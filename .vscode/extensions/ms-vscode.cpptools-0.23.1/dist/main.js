module.exports=function(e){var t={};function n(r){if(t[r])return t[r].exports;var i=t[r]={i:r,l:!1,exports:{}};return e[r].call(i.exports,i,i.exports,n),i.l=!0,i.exports}return n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var i in e)n.d(r,i,function(t){return e[t]}.bind(null,i));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=73)}([function(e,t){e.exports=require("vscode")},function(e,t){e.exports=require("path")},function(e,t){e.exports=require("fs")},function(e,t){e.exports=require("os")},function(e,t,n){var r=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))(function(i,o){function s(e){try{c(r.next(e))}catch(e){o(e)}}function a(e){try{c(r.throw(e))}catch(e){o(e)}}function c(e){e.done?i(e.value):new n(function(t){t(e.value)}).then(s,a)}c((r=r.apply(e,t||[])).next())})};Object.defineProperty(t,"__esModule",{value:!0});const i=n(1),o=n(2),s=n(3),a=n(18),c=n(0),u=n(8),l=n(132),d=n(14),h=n(27),p=n(31),f=n(20),g=n(21),m=n(23);t.setExtensionContext=function(e){t.extensionContext=e,t.extensionPath=t.extensionContext.extensionPath},t.setExtensionPath=function(e){t.extensionPath=e},t.failedToParseTasksJson="Failed to parse tasks.json, possibly due to comments or trailing commas.",t.packageJson=c.extensions.getExtension("ms-vscode.cpptools").packageJSON;let v,C=null;function y(){const e=S();if(e)return new Promise((n,r)=>{o.exists(e,i=>{if(!i)return n({});let s=o.readFileSync(e).toString();s=s.replace(/^\s*\/\/.*$/gm,"");let a={};try{a=JSON.parse(s)}catch(e){return r(new Error(t.failedToParseTasksJson))}n(a)})})}function w(e){return i.resolve(t.extensionPath,e)}function b(){return w("package.json")}function S(){const e=c.window.activeTextEditor,t=c.workspace.getWorkspaceFolder(e.document.uri);if(t)return i.join(t.uri.fsPath,".vscode","tasks.json")}function _(){return"win32"===process.platform?i.join(process.env.LOCALAPPDATA,"vcpkg/vcpkg.path.txt"):i.join(process.env.HOME,".vcpkg/vcpkg.path.txt")}t.getRawPackageJson=function(){if(null===C){const e=o.readFileSync(b());C=JSON.parse(e.toString())}return C},t.getRawTasksJson=y,t.ensureBuildTaskExists=function(e){return r(this,void 0,void 0,function*(){let t=yield y();t.tasks||(t.tasks=new Array);let n=t.tasks.find(e=>e.label&&e.label===e);if(n)return;const r=yield g.getBuildTasks(!1);n=r.find(t=>t.name===e),console.assert(n),t.version="2.0.0",t.tasks.find(e=>e.label===n.definition.label)||t.tasks.push(n.definition);let i=new m.OtherSettings;yield H(S(),JSON.stringify(t,null,i.editorTabSize))})},t.fileIsCOrCppSource=function(e){const t=i.extname(e).toLowerCase();return[".C",".c",".cpp",".cc",".cxx",".mm",".ino",".inl"].some(e=>t===e)},t.stringifyPackageJson=function(e){return JSON.stringify(e,null,2)},t.getExtensionFilePath=w,t.getPackageJsonPath=b,t.getTasksJsonPath=S,t.getVcpkgPathDescriptorFile=_,t.getVcpkgRoot=function(){if(!v&&""!==v&&(v="",o.existsSync(_()))){let e=o.readFileSync(_()).toString();e=e.trim(),o.existsSync(e)&&(v=i.join(e,"/installed").replace(/\\/g,"/"))}return v},t.isHeader=function(e){let t=i.extname(e.fsPath);return!t||t.startsWith(".h")||t.startsWith(".H")},t.isExtensionReady=function(){return r(this,void 0,void 0,function*(){return yield $()})};let P=!1;t.extensionNotReadyString="The C/C++ extension is still installing. See the output window for more information.",t.displayExtensionNotReadyPrompt=function(){P||(P=!0,h.showOutputChannel(),h.getOutputChannelLogger().showInformationMessage(t.extensionNotReadyString).then(()=>{P=!1},()=>{P=!1}))};const x=100,k=150,E=200,T=300,I=1e3;let D="CPP."+t.packageJson.version+".Progress",R="CPP."+t.packageJson.version+".IntelliSenseProgress";function O(){return t.extensionContext?t.extensionContext.globalState.get(D,-1):-1}function A(){return t.extensionContext?t.extensionContext.globalState.get(R,-1):-1}t.getProgress=O,t.getIntelliSenseProgress=A,t.setProgress=function(e){if(t.extensionContext&&O()<e){t.extensionContext.globalState.update(D,e);let n,r={};switch(e){case 0:n="install started";break;case x:n="install succeeded";break;case k:n="executable started";break;case E:n="executable succeeded";break;case T:n="parse root succeeded"}r.progress=n,u.logDebuggerEvent("progress",r)}},t.setIntelliSenseProgress=function(e){if(t.extensionContext&&A()<e){t.extensionContext.globalState.update(R,e);let n,r={};switch(e){case I:n="IntelliSense no squiggles"}r.progress=n,u.logDebuggerEvent("progress",r)}},t.getProgressInstallSuccess=function(){return x},t.getProgressExecutableStarted=function(){return k},t.getProgressExecutableSuccess=function(){return E},t.getProgressParseRootSuccess=function(){return T},t.getProgressIntelliSenseNoSquiggles=function(){return I};let F=void 0;function N(e){return"string"==typeof e}function M(e){return e instanceof Array}function L(e){return M(e)&&e.every(e=>N(e))}function q(){let e=c.workspace.getConfiguration().get("http.proxy");if(!e&&!(e=process.env.HTTPS_PROXY||process.env.https_proxy||process.env.HTTP_PROXY||process.env.http_proxy))return null;let t=d.parse(e);if("https:"!==t.protocol&&"http:"!==t.protocol)return null;let n=c.workspace.getConfiguration().get("http.proxyStrictSSL",!0),r={host:t.hostname,port:parseInt(t.port,10),auth:t.auth,rejectUnauthorized:n};return new l(r)}function j(e){return new Promise((t,n)=>{o.stat(e,(e,n)=>{n&&n.isFile()?t(!0):t(!1)})})}function W(e){try{return o.statSync(e).isFile()}catch(e){}return!1}function $(){return j(z())}function U(e,t="utf8"){return new Promise((n,r)=>{o.readFile(e,t,(e,t)=>{e?r(e):n(t)})})}function H(e,t,n="utf8"){return new Promise((r,i)=>{o.writeFile(e,t,{encoding:n},e=>{e?i(e):r()})})}function z(){return w("install.lock")}function V(){return`Please refer to ${w("README.md")} for troubleshooting information. Issues can be created at https://github.com/Microsoft/vscode-cpptools/issues`}function B(e){c.window.showInformationMessage(e,"Reload").then(e=>{"Reload"===e&&c.commands.executeCommand("workbench.action.reloadWindow")})}t.showReleaseNotes=function(){return r(this,void 0,void 0,function*(){F?F.reveal():((F=c.window.createWebviewPanel("releaseNotes","C/C++ Extension Release Notes",c.ViewColumn.One)).webview.html=yield U(w("ReleaseNotes.html")),F.onDidDispose(()=>F=void 0,null,t.extensionContext.subscriptions))})},t.isUri=function(e){return e&&e instanceof c.Uri},t.isString=N,t.isNumber=function(e){return"number"==typeof e},t.isBoolean=function(e){return"boolean"==typeof e},t.isArray=M,t.isOptionalString=function(e){return void 0===e||N(e)},t.isArrayOfString=L,t.isOptionalArrayOfString=function(e){return void 0===e||L(e)},t.resolveVariables=function(e,t){if(!e)return"";t||(t={});let n=()=>/\$\{((env|config|workspaceFolder)(\.|:))?(.*?)\}/g,r=e,i=new Set;for(;!i.has(r);)i.add(r),r=r.replace(n(),(n,r,i,o,s)=>{let a;switch(void 0===i&&(i="env"),i){case"env":{let r=t[s];N(r)?a=r:e===n&&L(r)&&(a=r.join(";")),N(a)||(a=process.env[s]);break}case"config":{let e=c.workspace.getConfiguration();e&&(a=e.get(s));break}case"workspaceFolder":if(s&&c.workspace&&c.workspace.workspaceFolders){let e=c.workspace.workspaceFolders.find(e=>e.name.toLocaleLowerCase()===s.toLocaleLowerCase());e&&(a=e.uri.fsPath)}break;default:p.fail("unknown varType matched")}return N(a)?a:n});return n=(()=>/^\~/g),r=r.replace(n(),(e,t)=>{let n="win32"===process.platform?process.env.USERPROFILE:process.env.HOME;return n||e})},t.asFolder=function(e){let t=e.toString();return"/"!==t.charAt(t.length-1)&&(t+="/"),t},t.getOpenCommand=function(){return"win32"===s.platform()?"explorer":"darwin"===s.platform()?"/usr/bin/open":"/usr/bin/xdg-open"},t.getDebugAdaptersPath=function(e){return i.resolve(w("debugAdapters"),e)},t.getHttpsProxyAgent=q,t.touchInstallLockFile=function(){return e=z(),new Promise((t,n)=>{o.writeFile(e,"",e=>{e&&n(e),t()})});var e},t.touchExtensionFolder=function(){return new Promise((e,n)=>{o.utimes(i.resolve(t.extensionPath,".."),new Date(Date.now()),new Date(Date.now()),t=>{t&&n(t),e()})})},t.checkFileExists=j,t.checkDirectoryExists=function(e){return new Promise((t,n)=>{o.stat(e,(e,n)=>{n&&n.isDirectory()?t(!0):t(!1)})})},t.checkFileExistsSync=W,t.checkDirectoryExistsSync=function(e){try{return o.statSync(e).isDirectory()}catch(e){}return!1},t.readDir=function(e){return new Promise(t=>{o.readdir(e,(e,n)=>{t(n)})})},t.checkInstallLockFile=$,t.readFileText=U,t.writeFileText=H,t.deleteFile=function(e){return new Promise((t,n)=>{o.existsSync(e)?o.unlink(e,e=>{e?n(e):t()}):t()})},t.getInstallLockPath=z,t.getReadmeMessage=V,t.logToFile=function(e){const t=w("extension.log");o.writeFileSync(t,`${e}${s.EOL}`,{flag:"a"})},t.execChildProcess=function(e,t,n){return new Promise((r,i)=>{a.exec(e,{cwd:t,maxBuffer:512e3},(e,t,o)=>{if(n){let r="",i=!1;t&&t.length>0&&(r+=t),o&&o.length>0&&(r+=o,i=!0),e&&(r+=e.message,i=!0),i&&(n.append(r),n.show())}e?i(e):o&&o.length>0?i(new Error(o)):r(t)})})},t.spawnChildProcess=function(e,t,n,r,i){return new Promise(function(o,s){const c=a.spawn(e,t,{cwd:n});c.stdout.on("data",e=>{r(`${e}`)}),c.stderr.on("data",e=>{i(`${e}`)}),c.on("exit",t=>{0!==t?s(new Error(`${e} exited with error code ${t}`)):o()})})},t.allowExecution=function(e){return new Promise((t,n)=>{"win32"!==process.platform?j(e).then(r=>{r?o.chmod(e,"755",e=>{e?n(e):t()}):(h.getOutputChannelLogger().appendLine(""),h.getOutputChannelLogger().appendLine(`Warning: Expected file ${e} is missing.`),t())}):t()})},t.removePotentialPII=function(e){let t=e.split(" "),n="";for(let e of t)-1===e.indexOf(".")&&-1===e.indexOf("/")&&-1===e.indexOf("\\")&&-1===e.indexOf(":")?n+=e+" ":n+="? ";return n},t.checkDistro=function(e){"win32"!==e.platform&&"linux"!==e.platform&&"darwin"!==e.platform&&h.getOutputChannelLogger().appendLine(`Warning: Debugging has not been tested for this platform. ${V()}`)},t.unlinkPromise=function(e){return r(this,void 0,void 0,function*(){return new Promise((t,n)=>{o.unlink(e,e=>e?n(e):t())})})},t.renamePromise=function(e,t){return r(this,void 0,void 0,function*(){return new Promise((n,r)=>{o.rename(e,t,e=>e?r(e):n())})})},t.promptForReloadWindowDueToSettingsChange=function(){B("Reload the workspace for the settings change to take effect.")},t.promptReloadWindow=B,t.downloadFileToDestination=function e(t,n,r){return new Promise((i,s)=>{let a=d.parse(t),u=f.request({host:a.host,path:a.path,agent:q(),rejectUnauthorized:c.workspace.getConfiguration().get("http.proxyStrictSSL",!0),headers:r},t=>{if(301===t.statusCode||302===t.statusCode){let o;return o="string"==typeof t.headers.location?t.headers.location:t.headers.location[0],i(e(o,n,r))}if(200!==t.statusCode)return s();let a=o.createWriteStream(n);a.on("finish",()=>{i()}),t.on("error",e=>{s(e)}),t.pipe(a)});u.on("error",e=>{s(e)}),u.end()})},t.downloadFileToStr=function e(t,n){return new Promise((r,i)=>{let o=d.parse(t),s=f.request({host:o.host,path:o.path,agent:q(),rejectUnauthorized:c.workspace.getConfiguration().get("http.proxyStrictSSL",!0),headers:n},t=>{if(301===t.statusCode||302===t.statusCode){let i;return i="string"==typeof t.headers.location?t.headers.location:t.headers.location[0],r(e(i,n))}if(200!==t.statusCode)return i();let o="";t.on("data",e=>{o+=e}),t.on("error",e=>{i(e)}),t.on("end",()=>{r(o)})});s.on("error",e=>{i(e)}),s.end()})},t.extractCompilerPathAndArgs=function(e){let t,n=e,r="win32"===s.platform();if(n)if(n.startsWith('"')){let e=n.substr(1).search('"')+1;-1!==e&&(t=(t=n.substr(e+1).split(" ")).filter(e=>0!==e.trim().length),n=n.substr(1,e-1))}else{let e=n.lastIndexOf(" ");if(!(-1===e||r&&n.endsWith("cl.exe")||W(n))){let i=n.substr(0,e);for(;!(r&&i.endsWith("cl.exe")||W(i));){if(-1===(e=i.lastIndexOf(" "))){i=n;break}i=i.substr(0,e)}n!==i&&(t=(t=n.substr(e+1).split(" ")).filter(e=>0!==e.trim().length),n=i)}}return{compilerPath:n,additionalArgs:t}},t.escapeForSquiggles=function(e){let t="",n=!1,r=!1;for(let i=0;i<e.length;i++)"\\"===e[i]?(n?(t+="\\",r=!r):r=!1,t+="\\",n=!0):(n&&(r||'"'!==e[i])&&(t+="\\"),n=!1,r=!1,t+=e[i]);return n&&(t+="\\"),t}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(45),i=n(45);t.makePatchingRequire=i.makePatchingRequire;var o=function(e){return!0},s=function(){function e(){this.version=n(79).version,this.subscribers={},this.contextPreservationFunction=function(e){return e},this.knownPatches={},this.currentlyPublishing=!1}return e.prototype.shouldPublish=function(e){var t=this.subscribers[e];return!!t&&t.some(function(e){var t=e.filter;return!t||t(!1)})},e.prototype.publish=function(e,t){if(!this.currentlyPublishing){var n=this.subscribers[e];if(n){var r={timestamp:Date.now(),data:t};this.currentlyPublishing=!0,n.forEach(function(e){var t=e.listener,n=e.filter;try{n&&n(!0)&&t(r)}catch(e){}}),this.currentlyPublishing=!1}}},e.prototype.subscribe=function(e,t,n){void 0===n&&(n=o),this.subscribers[e]||(this.subscribers[e]=[]),this.subscribers[e].push({listener:t,filter:n})},e.prototype.unsubscribe=function(e,t,n){void 0===n&&(n=o);var r=this.subscribers[e];if(r)for(var i=0;i<r.length;++i)if(r[i].listener===t&&r[i].filter===n)return r.splice(i,1),!0;return!1},e.prototype.reset=function(){var e=this;this.subscribers={},this.contextPreservationFunction=function(e){return e},Object.getOwnPropertyNames(this.knownPatches).forEach(function(t){return delete e.knownPatches[t]})},e.prototype.bindToContext=function(e){return this.contextPreservationFunction(e)},e.prototype.addContextPreservation=function(e){var t=this.contextPreservationFunction;this.contextPreservationFunction=function(n){return e(t(n))}},e.prototype.registerMonkeyPatch=function(e,t){this.knownPatches[e]||(this.knownPatches[e]=[]),this.knownPatches[e].push(t)},e.prototype.getPatchesObject=function(){return this.knownPatches},e}();global.diagnosticsSource||(global.diagnosticsSource=new s,n(46).prototype.require=r.makePatchingRequire(global.diagnosticsSource.getPatchesObject()));t.channel=global.diagnosticsSource},function(e,t,n){"use strict";var r=function(){function e(){}return e.info=function(t){for(var n=[],r=1;r<arguments.length;r++)n[r-1]=arguments[r];e.enableDebug&&console.info(e.TAG+t,n)},e.warn=function(t){for(var n=[],r=1;r<arguments.length;r++)n[r-1]=arguments[r];e.disableWarnings||console.warn(e.TAG+t,n)},e.enableDebug=!1,e.disableWarnings=!1,e.TAG="ApplicationInsights:",e}();e.exports=r},function(e,t,n){"use strict";function r(e){for(var n in e)t.hasOwnProperty(n)||(t[n]=e[n])}Object.defineProperty(t,"__esModule",{value:!0});const i=n(10);t.ErrorCodes=i.ErrorCodes,t.ResponseError=i.ResponseError,t.CancellationToken=i.CancellationToken,t.CancellationTokenSource=i.CancellationTokenSource,t.Disposable=i.Disposable,t.Event=i.Event,t.Emitter=i.Emitter,t.Trace=i.Trace,t.TraceFormat=i.TraceFormat,t.SetTraceNotification=i.SetTraceNotification,t.LogTraceNotification=i.LogTraceNotification,t.RequestType=i.RequestType,t.RequestType0=i.RequestType0,t.NotificationType=i.NotificationType,t.NotificationType0=i.NotificationType0,t.MessageReader=i.MessageReader,t.MessageWriter=i.MessageWriter,t.ConnectionStrategy=i.ConnectionStrategy,t.StreamMessageReader=i.StreamMessageReader,t.StreamMessageWriter=i.StreamMessageWriter,t.IPCMessageReader=i.IPCMessageReader,t.IPCMessageWriter=i.IPCMessageWriter,t.createClientPipeTransport=i.createClientPipeTransport,t.createServerPipeTransport=i.createServerPipeTransport,t.generateRandomPipeName=i.generateRandomPipeName,t.createClientSocketTransport=i.createClientSocketTransport,t.createServerSocketTransport=i.createServerSocketTransport,r(n(154)),r(n(155)),t.createProtocolConnection=function(e,t,n,r){return i.createMessageConnection(e,t,n,r)}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(74),i=n(4);let o;t.activate=function(){try{o=function(){if(i.extensionContext){let e={name:i.packageJson.publisher+"."+i.packageJson.name,version:i.packageJson.version,aiKey:i.packageJson.contributes.debuggers[0].aiKey};if(e&&e.aiKey)return new r.default(e.name,e.version,e.aiKey)}return null}()}catch(e){}},t.deactivate=function(){o&&o.dispose()},t.logDebuggerEvent=function(e,t){if(o){const n="cppdbg/VS/Diagnostics/Debugger/";o.sendTelemetryEvent(n+e,t)}},t.logLanguageServerEvent=function(e,t,n){if(o){const r="C_Cpp/LanguageServer/";o.sendTelemetryEvent(r+e,t,n)}}},function(e,t,n){"use strict";function r(e){for(var n in e)t.hasOwnProperty(n)||(t[n]=e[n])}Object.defineProperty(t,"__esModule",{value:!0}),r(n(96)),r(n(47)),r(n(111))},function(e,t,n){"use strict";function r(e){for(var n in e)t.hasOwnProperty(n)||(t[n]=e[n])}Object.defineProperty(t,"__esModule",{value:!0});const i=n(29),o=n(149);t.RequestType=o.RequestType,t.RequestType0=o.RequestType0,t.RequestType1=o.RequestType1,t.RequestType2=o.RequestType2,t.RequestType3=o.RequestType3,t.RequestType4=o.RequestType4,t.RequestType5=o.RequestType5,t.RequestType6=o.RequestType6,t.RequestType7=o.RequestType7,t.RequestType8=o.RequestType8,t.RequestType9=o.RequestType9,t.ResponseError=o.ResponseError,t.ErrorCodes=o.ErrorCodes,t.NotificationType=o.NotificationType,t.NotificationType0=o.NotificationType0,t.NotificationType1=o.NotificationType1,t.NotificationType2=o.NotificationType2,t.NotificationType3=o.NotificationType3,t.NotificationType4=o.NotificationType4,t.NotificationType5=o.NotificationType5,t.NotificationType6=o.NotificationType6,t.NotificationType7=o.NotificationType7,t.NotificationType8=o.NotificationType8,t.NotificationType9=o.NotificationType9;const s=n(42);t.MessageReader=s.MessageReader,t.StreamMessageReader=s.StreamMessageReader,t.IPCMessageReader=s.IPCMessageReader,t.SocketMessageReader=s.SocketMessageReader;const a=n(43);t.MessageWriter=a.MessageWriter,t.StreamMessageWriter=a.StreamMessageWriter,t.IPCMessageWriter=a.IPCMessageWriter,t.SocketMessageWriter=a.SocketMessageWriter;const c=n(32);t.Disposable=c.Disposable,t.Event=c.Event,t.Emitter=c.Emitter;const u=n(150);t.CancellationTokenSource=u.CancellationTokenSource,t.CancellationToken=u.CancellationToken;const l=n(151);var d,h,p,f,g,m,v;r(n(152)),r(n(153)),function(e){e.type=new o.NotificationType("$/cancelRequest")}(d||(d={})),t.NullLogger=Object.freeze({error:()=>{},warn:()=>{},info:()=>{},log:()=>{}}),function(e){e[e.Off=0]="Off",e[e.Messages=1]="Messages",e[e.Verbose=2]="Verbose"}(h=t.Trace||(t.Trace={})),function(e){e.fromString=function(t){switch(t=t.toLowerCase()){case"off":return e.Off;case"messages":return e.Messages;case"verbose":return e.Verbose;default:return e.Off}},e.toString=function(t){switch(t){case e.Off:return"off";case e.Messages:return"messages";case e.Verbose:return"verbose";default:return"off"}}}(h=t.Trace||(t.Trace={})),function(e){e.Text="text",e.JSON="json"}(p=t.TraceFormat||(t.TraceFormat={})),function(e){e.fromString=function(t){return"json"===(t=t.toLowerCase())?e.JSON:e.Text}}(p=t.TraceFormat||(t.TraceFormat={})),function(e){e.type=new o.NotificationType("$/setTraceNotification")}(f=t.SetTraceNotification||(t.SetTraceNotification={})),function(e){e.type=new o.NotificationType("$/logTraceNotification")}(g=t.LogTraceNotification||(t.LogTraceNotification={})),function(e){e[e.Closed=1]="Closed",e[e.Disposed=2]="Disposed",e[e.AlreadyListening=3]="AlreadyListening"}(m=t.ConnectionErrors||(t.ConnectionErrors={}));class C extends Error{constructor(e,t){super(t),this.code=e,Object.setPrototypeOf(this,C.prototype)}}function y(e,t,n,r){let s=0,a=0,y=0;const w="2.0";let b,S,_=void 0,P=Object.create(null),x=void 0,k=Object.create(null),E=new l.LinkedMap,T=Object.create(null),I=Object.create(null),D=h.Off,R=p.Text,O=v.New,A=new c.Emitter,F=new c.Emitter,N=new c.Emitter,M=new c.Emitter;function L(e){return"req-"+e.toString()}function q(e,t){var n;o.isRequestMessage(t)?e.set(L(t.id),t):o.isResponseMessage(t)?e.set(null===(n=t.id)?"res-unknown-"+(++y).toString():"res-"+n.toString(),t):e.set("not-"+(++a).toString(),t)}function j(e){}function W(){return O===v.Listening}function $(){return O===v.Closed}function U(){return O===v.Disposed}function H(){O!==v.New&&O!==v.Listening||(O=v.Closed,F.fire(void 0))}function z(){b||0===E.size||(b=setImmediate(()=>{b=void 0,function(){if(0===E.size)return;let e=E.shift();try{o.isRequestMessage(e)?function(e){if(U())return;function n(n,r,i){let s={jsonrpc:w,id:e.id};n instanceof o.ResponseError?s.error=n.toJson():s.result=void 0===n?null:n,B(s,r,i),t.write(s)}function r(n,r,i){let o={jsonrpc:w,id:e.id,error:n.toJson()};B(o,r,i),t.write(o)}!function(e){if(D===h.Off||!S)return;if(R===p.Text){let t=void 0;D===h.Verbose&&e.params&&(t=`Params: ${JSON.stringify(e.params,null,4)}\n\n`),S.log(`Received request '${e.method} - (${e.id})'.`,t)}else K("receive-request",e)}(e);let s,a,c=P[e.method];c&&(s=c.type,a=c.handler);let l=Date.now();if(a||_){let c=new u.CancellationTokenSource,d=String(e.id);I[d]=c;try{let u,h=u=void 0===e.params||void 0!==s&&0===s.numberOfParams?a?a(c.token):_(e.method,c.token):i.array(e.params)&&(void 0===s||s.numberOfParams>1)?a?a(...e.params,c.token):_(e.method,...e.params,c.token):a?a(e.params,c.token):_(e.method,e.params,c.token);u?h.then?h.then(t=>{delete I[d],n(t,e.method,l)},t=>{delete I[d],t instanceof o.ResponseError?r(t,e.method,l):t&&i.string(t.message)?r(new o.ResponseError(o.ErrorCodes.InternalError,`Request ${e.method} failed with message: ${t.message}`),e.method,l):r(new o.ResponseError(o.ErrorCodes.InternalError,`Request ${e.method} failed unexpectedly without providing any details.`),e.method,l)}):(delete I[d],n(u,e.method,l)):(delete I[d],function(n,r,i){void 0===n&&(n=null);let o={jsonrpc:w,id:e.id,result:n};B(o,r,i),t.write(o)}(u,e.method,l))}catch(t){delete I[d],t instanceof o.ResponseError?n(t,e.method,l):t&&i.string(t.message)?r(new o.ResponseError(o.ErrorCodes.InternalError,`Request ${e.method} failed with message: ${t.message}`),e.method,l):r(new o.ResponseError(o.ErrorCodes.InternalError,`Request ${e.method} failed unexpectedly without providing any details.`),e.method,l)}}else r(new o.ResponseError(o.ErrorCodes.MethodNotFound,`Unhandled method ${e.method}`),e.method,l)}(e):o.isNotificationMessage(e)?function(e){if(U())return;let t,r=void 0;if(e.method===d.type.method)t=(e=>{let t=e.id,n=I[String(t)];n&&n.cancel()});else{let n=k[e.method];n&&(t=n.handler,r=n.type)}if(t||x)try{!function(e){if(D===h.Off||!S||e.method===g.type.method)return;if(R===p.Text){let t=void 0;D===h.Verbose&&(t=e.params?`Params: ${JSON.stringify(e.params,null,4)}\n\n`:"No parameters provided.\n\n"),S.log(`Received notification '${e.method}'.`,t)}else K("receive-notification",e)}(e),void 0===e.params||void 0!==r&&0===r.numberOfParams?t?t():x(e.method):i.array(e.params)&&(void 0===r||r.numberOfParams>1)?t?t(...e.params):x(e.method,...e.params):t?t(e.params):x(e.method,e.params)}catch(t){t.message?n.error(`Notification handler '${e.method}' failed with message: ${t.message}`):n.error(`Notification handler '${e.method}' failed unexpectedly.`)}else N.fire(e)}(e):o.isResponseMessage(e)?function(e){if(U())return;if(null===e.id)e.error?n.error(`Received response message without id: Error is: \n${JSON.stringify(e.error,void 0,4)}`):n.error("Received response message without id. No further error information provided.");else{let t=String(e.id),r=T[t];if(function(e,t){if(D===h.Off||!S)return;if(R===p.Text){let n=void 0;if(D===h.Verbose&&(e.error&&e.error.data?n=`Error data: ${JSON.stringify(e.error.data,null,4)}\n\n`:e.result?n=`Result: ${JSON.stringify(e.result,null,4)}\n\n`:void 0===e.error&&(n="No result returned.\n\n")),t){let r=e.error?` Request failed: ${e.error.message} (${e.error.code}).`:"";S.log(`Received response '${t.method} - (${e.id})' in ${Date.now()-t.timerStart}ms.${r}`,n)}else S.log(`Received response ${e.id} without active response promise.`,n)}else K("receive-response",e)}(e,r),r){delete T[t];try{if(e.error){let t=e.error;r.reject(new o.ResponseError(t.code,t.message,t.data))}else{if(void 0===e.result)throw new Error("Should never happen.");r.resolve(e.result)}}catch(e){e.message?n.error(`Response handler '${r.method}' failed with message: ${e.message}`):n.error(`Response handler '${r.method}' failed unexpectedly.`)}}}}(e):function(e){if(!e)return void n.error("Received empty message.");n.error(`Received message which is neither a response nor a notification message:\n${JSON.stringify(e,null,4)}`);let t=e;if(i.string(t.id)||i.number(t.id)){let e=String(t.id),n=T[e];n&&n.reject(new Error("The received response has neither a result nor an error property."))}}(e)}finally{z()}}()}))}e.onClose(H),e.onError(function(e){A.fire([e,void 0,void 0])}),t.onClose(H),t.onError(function(e){A.fire(e)});let V=e=>{try{if(o.isNotificationMessage(e)&&e.method===d.type.method){let n=L(e.params.id),i=E.get(n);if(o.isRequestMessage(i)){let o=r&&r.cancelUndispatched?r.cancelUndispatched(i,j):void 0;if(o&&(void 0!==o.error||void 0!==o.result))return E.delete(n),o.id=i.id,B(o,e.method,Date.now()),void t.write(o)}}q(E,e)}finally{z()}};function B(e,t,n){if(D!==h.Off&&S)if(R===p.Text){let r=void 0;D===h.Verbose&&(e.error&&e.error.data?r=`Error data: ${JSON.stringify(e.error.data,null,4)}\n\n`:e.result?r=`Result: ${JSON.stringify(e.result,null,4)}\n\n`:void 0===e.error&&(r="No result returned.\n\n")),S.log(`Sending response '${t} - (${e.id})'. Processing request took ${Date.now()-n}ms`,r)}else K("send-response",e)}function K(e,t){if(!S||D===h.Off)return;const n={isLSPMessage:!0,type:e,message:t,timestamp:Date.now()};S.log(n)}function J(){if($())throw new C(m.Closed,"Connection is closed.");if(U())throw new C(m.Disposed,"Connection is disposed.")}function G(e){return void 0===e?null:e}function Z(e,t){let n,r=e.numberOfParams;switch(r){case 0:n=null;break;case 1:n=G(t[0]);break;default:n=[];for(let e=0;e<t.length&&e<r;e++)n.push(G(t[e]));if(t.length<r)for(let e=t.length;e<r;e++)n.push(null)}return n}let Y={sendNotification:(e,...n)=>{let r,o;if(J(),i.string(e))switch(r=e,n.length){case 0:o=null;break;case 1:o=n[0];break;default:o=n}else r=e.method,o=Z(e,n);let s={jsonrpc:w,method:r,params:o};!function(e){if(D!==h.Off&&S)if(R===p.Text){let t=void 0;D===h.Verbose&&(t=e.params?`Params: ${JSON.stringify(e.params,null,4)}\n\n`:"No parameters provided.\n\n"),S.log(`Sending notification '${e.method}'.`,t)}else K("send-notification",e)}(s),t.write(s)},onNotification:(e,t)=>{J(),i.func(e)?x=e:t&&(i.string(e)?k[e]={type:void 0,handler:t}:k[e.method]={type:e,handler:t})},sendRequest:(e,...n)=>{let r,a;J(),function(){if(!W())throw new Error("Call listen() first.")}();let c=void 0;if(i.string(e))switch(r=e,n.length){case 0:a=null;break;case 1:u.CancellationToken.is(n[0])?(a=null,c=n[0]):a=G(n[0]);break;default:const t=n.length-1;u.CancellationToken.is(n[t])?(c=n[t],a=2===n.length?G(n[0]):n.slice(0,t).map(e=>G(e))):a=n.map(e=>G(e))}else{r=e.method,a=Z(e,n);let t=e.numberOfParams;c=u.CancellationToken.is(n[t])?n[t]:void 0}let l=s++,f=new Promise((e,n)=>{let i={jsonrpc:w,id:l,method:r,params:a},s={method:r,timerStart:Date.now(),resolve:e,reject:n};!function(e){if(D!==h.Off&&S)if(R===p.Text){let t=void 0;D===h.Verbose&&e.params&&(t=`Params: ${JSON.stringify(e.params,null,4)}\n\n`),S.log(`Sending request '${e.method} - (${e.id})'.`,t)}else K("send-request",e)}(i);try{t.write(i)}catch(e){s.reject(new o.ResponseError(o.ErrorCodes.MessageWriteError,e.message?e.message:"Unknown reason")),s=null}s&&(T[String(l)]=s)});return c&&c.onCancellationRequested(()=>{Y.sendNotification(d.type,{id:l})}),f},onRequest:(e,t)=>{J(),i.func(e)?_=e:t&&(i.string(e)?P[e]={type:void 0,handler:t}:P[e.method]={type:e,handler:t})},trace:(e,t,n)=>{let r=!1,o=p.Text;void 0!==n&&(i.boolean(n)?r=n:(r=n.sendNotification||!1,o=n.traceFormat||p.Text)),R=o,S=(D=e)===h.Off?void 0:t,!r||$()||U()||Y.sendNotification(f.type,{value:h.toString(e)})},onError:A.event,onClose:F.event,onUnhandledNotification:N.event,onDispose:M.event,dispose:()=>{if(U())return;O=v.Disposed,M.fire(void 0);let n=new Error("Connection got disposed.");Object.keys(T).forEach(e=>{T[e].reject(n)}),T=Object.create(null),I=Object.create(null),E=new l.LinkedMap,i.func(t.dispose)&&t.dispose(),i.func(e.dispose)&&e.dispose()},listen:()=>{J(),function(){if(W())throw new C(m.AlreadyListening,"Connection is already listening")}(),O=v.Listening,e.listen(V)},inspect:()=>{console.log("inspect")}};return Y.onNotification(g.type,e=>{D!==h.Off&&S&&S.log(e.message,D===h.Verbose?e.verbose:void 0)}),Y}t.ConnectionError=C,function(e){e.is=function(e){let t=e;return t&&i.func(t.cancelUndispatched)}}(t.ConnectionStrategy||(t.ConnectionStrategy={})),function(e){e[e.New=1]="New",e[e.Listening=2]="Listening",e[e.Closed=3]="Closed",e[e.Disposed=4]="Disposed"}(v||(v={})),t.createMessageConnection=function(e,n,r,i){var o;return r||(r=t.NullLogger),y(void 0!==(o=e).listen&&void 0===o.read?e:new s.StreamMessageReader(e),function(e){return void 0!==e.write&&void 0===e.end}(n)?n:new a.StreamMessageWriter(n),r,i)}},function(e,t,n){"use strict";function r(e){return"string"==typeof e||e instanceof String}function i(e){return"function"==typeof e}function o(e){return Array.isArray(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.boolean=function(e){return!0===e||!1===e},t.string=r,t.number=function(e){return"number"==typeof e||e instanceof Number},t.error=function(e){return e instanceof Error},t.func=i,t.array=o,t.stringArray=function(e){return o(e)&&e.every(e=>r(e))},t.typedArray=function(e,t){return Array.isArray(e)&&e.every(t)},t.thenable=function(e){return e&&i(e.then)}},function(e,t,n){"use strict";var r=function(){return function(){}}();e.exports=r},function(e,t,n){"use strict";var r=this&&this.__assign||Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},i=n(39),o=n(20),s=n(14),a=n(116),c=n(6),u=n(26),l=function(){function e(){}return e.getCookie=function(t,n){var r="";if(t&&t.length&&"string"==typeof n)for(var i=t+"=",o=n.split(";"),s=0;s<o.length;s++){n=o[s];if((n=e.trim(n))&&0===n.indexOf(i)){r=n.substring(i.length,o[s].length);break}}return r},e.trim=function(e){return"string"==typeof e?e.replace(/^\s+|\s+$/g,""):""},e.int32ArrayToBase64=function(e){var t=function(e,t){return String.fromCharCode(e>>t&255)},n=e.map(function(e){return t(e,24)+t(e,16)+t(e,8)+t(e,0)}).join(""),r=(Buffer.from?Buffer.from(n,"binary"):new Buffer(n,"binary")).toString("base64");return r.substr(0,r.indexOf("="))},e.random32=function(){return 4294967296*Math.random()|0},e.randomu32=function(){return e.random32()+2147483648},e.w3cTraceId=function(){for(var t,n=["0","1","2","3","4","5","6","7","8","9","a","b","c","d","e","f"],r="",i=0;i<4;i++)r+=n[15&(t=e.random32())]+n[t>>4&15]+n[t>>8&15]+n[t>>12&15]+n[t>>16&15]+n[t>>20&15]+n[t>>24&15]+n[t>>28&15];var o=n[8+4*Math.random()|0];return r.substr(0,8)+r.substr(9,4)+"4"+r.substr(13,3)+o+r.substr(16,3)+r.substr(19,12)},e.isArray=function(e){return"[object Array]"===Object.prototype.toString.call(e)},e.isError=function(e){return e instanceof Error},e.isPrimitive=function(e){var t=typeof e;return"string"===t||"number"===t||"boolean"===t},e.isDate=function(e){return"[object Date]"===Object.prototype.toString.call(e)},e.msToTimeSpan=function(e){(isNaN(e)||e<0)&&(e=0);var t=(e/1e3%60).toFixed(7).replace(/0{0,4}$/,""),n=""+Math.floor(e/6e4)%60,r=""+Math.floor(e/36e5)%24,i=Math.floor(e/864e5);return t=t.indexOf(".")<2?"0"+t:t,n=n.length<2?"0"+n:n,(i>0?i+".":"")+(r=r.length<2?"0"+r:r)+":"+n+":"+t},e.extractError=function(e){var t=e;return{message:e.message,code:t.code||t.id||""}},e.extractObject=function(t){return t instanceof Error?e.extractError(t):"function"==typeof t.toJSON?t.toJSON():t},e.validateStringMap=function(t){if("object"==typeof t){var n={};for(var r in t){var i="",o=t[r],s=typeof o;if(e.isPrimitive(o))i=o.toString();else if(null===o||"undefined"===s)i="";else{if("function"===s){c.info("key: "+r+" was function; will not serialize");continue}var a=e.isArray(o)?o:e.extractObject(o);try{i=e.isPrimitive(a)?a:JSON.stringify(a)}catch(e){i=o.constructor.name.toString()+" (Error: "+e.message+")",c.info("key: "+r+", could not be serialized")}}n[r]=i.substring(0,e.MAX_PROPERTY_LENGTH)}return n}c.info("Invalid properties dropped from payload")},e.canIncludeCorrelationHeader=function(e,t){var n=e&&e.config&&e.config.correlationHeaderExcludedDomains;if(!n||0==n.length||!t)return!0;for(var r=0;r<n.length;r++){if(new RegExp(n[r].replace(/\./g,".").replace(/\*/g,".*")).test(s.parse(t).hostname))return!1}return!0},e.getCorrelationContextTarget=function(e,t){var n=e.headers&&e.headers[u.requestContextHeader];if(n)for(var r=n.split(","),i=0;i<r.length;++i){var o=r[i].split("=");if(2==o.length&&o[0]==t)return o[1]}},e.makeRequest=function(t,n,a,u){n&&0===n.indexOf("//")&&(n="https:"+n);var l=s.parse(n),d=r({},a,{host:l.hostname,port:l.port,path:l.pathname}),h=void 0;if("https:"===l.protocol&&(h=t.proxyHttpsUrl||void 0),"http:"===l.protocol&&(h=t.proxyHttpUrl||void 0),h){0===h.indexOf("//")&&(h="http:"+h);var p=s.parse(h);"https:"===p.protocol?(c.info("Proxies that use HTTPS are not supported"),h=void 0):d=r({},d,{host:p.hostname,port:p.port||"80",path:n,headers:r({},d.headers,{Host:l.hostname})})}var f="https:"===l.protocol&&!h;return f&&void 0!==t.httpsAgent?d.agent=t.httpsAgent:f||void 0===t.httpAgent?f&&(d.agent=e.tlsRestrictedAgent):d.agent=t.httpAgent,f?o.request(d,u):i.request(d,u)},e.MAX_PROPERTY_LENGTH=8192,e.tlsRestrictedAgent=new o.Agent({secureOptions:a.SSL_OP_NO_SSLv2|a.SSL_OP_NO_SSLv3|a.SSL_OP_NO_TLSv1|a.SSL_OP_NO_TLSv1_1}),e}();e.exports=l},function(e,t){e.exports=require("url")},function(e,t){e.exports=require("util")},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(0),i=n(7),o=n(164),s=n(165),a=n(11),c=n(166),u=n(17);!function(e){for(var n in e)t.hasOwnProperty(n)||(t[n]=e[n])}(n(7));class l{error(e){console.error(e)}warn(e){console.warn(e)}info(e){console.info(e)}log(e){console.log(e)}}var d,h,p,f,g;!function(e){e[e.Continue=1]="Continue",e[e.Shutdown=2]="Shutdown"}(d=t.ErrorAction||(t.ErrorAction={})),function(e){e[e.DoNotRestart=1]="DoNotRestart",e[e.Restart=2]="Restart"}(h=t.CloseAction||(t.CloseAction={}));class m{constructor(e){this.name=e,this.restarts=[]}error(e,t,n){return n&&n<=3?d.Continue:d.Shutdown}closed(){if(this.restarts.push(Date.now()),this.restarts.length<5)return h.Restart;return this.restarts[this.restarts.length-1]-this.restarts[0]<=18e4?(r.window.showErrorMessage(`The ${this.name} server crashed 5 times in the last 3 minutes. The server will not be restarted.`),h.DoNotRestart):(this.restarts.shift(),h.Restart)}}!function(e){e[e.Info=1]="Info",e[e.Warn=2]="Warn",e[e.Error=3]="Error",e[e.Never=4]="Never"}(p=t.RevealOutputChannelOn||(t.RevealOutputChannelOn={})),function(e){e[e.Stopped=1]="Stopped",e[e.Starting=3]="Starting",e[e.Running=2]="Running"}(f=t.State||(t.State={})),function(e){e[e.Initial=0]="Initial",e[e.Starting=1]="Starting",e[e.StartFailed=2]="StartFailed",e[e.Running=3]="Running",e[e.Stopping=4]="Stopping",e[e.Stopped=5]="Stopped"}(g||(g={}));const v=[i.SymbolKind.File,i.SymbolKind.Module,i.SymbolKind.Namespace,i.SymbolKind.Package,i.SymbolKind.Class,i.SymbolKind.Method,i.SymbolKind.Property,i.SymbolKind.Field,i.SymbolKind.Constructor,i.SymbolKind.Enum,i.SymbolKind.Interface,i.SymbolKind.Function,i.SymbolKind.Variable,i.SymbolKind.Constant,i.SymbolKind.String,i.SymbolKind.Number,i.SymbolKind.Boolean,i.SymbolKind.Array,i.SymbolKind.Object,i.SymbolKind.Key,i.SymbolKind.Null,i.SymbolKind.EnumMember,i.SymbolKind.Struct,i.SymbolKind.Event,i.SymbolKind.Operator,i.SymbolKind.TypeParameter],C=[i.CompletionItemKind.Text,i.CompletionItemKind.Method,i.CompletionItemKind.Function,i.CompletionItemKind.Constructor,i.CompletionItemKind.Field,i.CompletionItemKind.Variable,i.CompletionItemKind.Class,i.CompletionItemKind.Interface,i.CompletionItemKind.Module,i.CompletionItemKind.Property,i.CompletionItemKind.Unit,i.CompletionItemKind.Value,i.CompletionItemKind.Enum,i.CompletionItemKind.Keyword,i.CompletionItemKind.Snippet,i.CompletionItemKind.Color,i.CompletionItemKind.File,i.CompletionItemKind.Reference,i.CompletionItemKind.Folder,i.CompletionItemKind.EnumMember,i.CompletionItemKind.Constant,i.CompletionItemKind.Struct,i.CompletionItemKind.Event,i.CompletionItemKind.Operator,i.CompletionItemKind.TypeParameter];function y(e,t){return void 0===e[t]&&(e[t]={}),e[t]}var w;!function(e){e.is=function(e){let t=e;return t&&a.func(t.register)&&a.func(t.unregister)&&a.func(t.dispose)&&void 0!==t.messages}}(w||(w={}));class b{constructor(e,t,n,r,i,o){this._client=e,this._event=t,this._type=n,this._middleware=r,this._createParams=i,this._selectorFilter=o,this._selectors=new Map}static textDocumentFilter(e,t){for(const n of e)if(r.languages.match(n,t))return!0;return!1}register(e,t){t.registerOptions.documentSelector&&(this._listener||(this._listener=this._event(this.callback,this)),this._selectors.set(t.id,t.registerOptions.documentSelector))}callback(e){this._selectorFilter&&!this._selectorFilter(this._selectors.values(),e)||(this._middleware?this._middleware(e,e=>this._client.sendNotification(this._type,this._createParams(e))):this._client.sendNotification(this._type,this._createParams(e)),this.notificationSent(e))}notificationSent(e){}unregister(e){this._selectors.delete(e),0===this._selectors.size&&this._listener&&(this._listener.dispose(),this._listener=void 0)}dispose(){this._selectors.clear(),this._listener&&(this._listener.dispose(),this._listener=void 0)}}class S extends b{constructor(e,t){super(e,r.workspace.onDidOpenTextDocument,i.DidOpenTextDocumentNotification.type,e.clientOptions.middleware.didOpen,t=>e.code2ProtocolConverter.asOpenTextDocumentParams(t),b.textDocumentFilter),this._syncedDocuments=t}get messages(){return i.DidOpenTextDocumentNotification.type}fillClientCapabilities(e){y(y(e,"textDocument"),"synchronization").dynamicRegistration=!0}initialize(e,t){let n=e.resolvedTextDocumentSync;t&&n&&n.openClose&&this.register(this.messages,{id:u.generateUuid(),registerOptions:{documentSelector:t}})}register(e,t){if(super.register(e,t),!t.registerOptions.documentSelector)return;let n=t.registerOptions.documentSelector;r.workspace.textDocuments.forEach(e=>{let t=e.uri.toString();if(!this._syncedDocuments.has(t)&&r.languages.match(n,e)){let n=this._client.clientOptions.middleware,r=e=>{this._client.sendNotification(this._type,this._createParams(e))};n.didOpen?n.didOpen(e,r):r(e),this._syncedDocuments.set(t,e)}})}notificationSent(e){super.notificationSent(e),this._syncedDocuments.set(e.uri.toString(),e)}}class _ extends b{constructor(e,t){super(e,r.workspace.onDidCloseTextDocument,i.DidCloseTextDocumentNotification.type,e.clientOptions.middleware.didClose,t=>e.code2ProtocolConverter.asCloseTextDocumentParams(t),b.textDocumentFilter),this._syncedDocuments=t}get messages(){return i.DidCloseTextDocumentNotification.type}fillClientCapabilities(e){y(y(e,"textDocument"),"synchronization").dynamicRegistration=!0}initialize(e,t){let n=e.resolvedTextDocumentSync;t&&n&&n.openClose&&this.register(this.messages,{id:u.generateUuid(),registerOptions:{documentSelector:t}})}notificationSent(e){super.notificationSent(e),this._syncedDocuments.delete(e.uri.toString())}unregister(e){let t=this._selectors.get(e);super.unregister(e);let n=this._selectors.values();this._syncedDocuments.forEach(e=>{if(r.languages.match(t,e)&&!this._selectorFilter(n,e)){let t=this._client.clientOptions.middleware,n=e=>{this._client.sendNotification(this._type,this._createParams(e))};this._syncedDocuments.delete(e.uri.toString()),t.didClose?t.didClose(e,n):n(e)}})}}class P{constructor(e){this._client=e,this._changeData=new Map,this._forcingDelivery=!1}get messages(){return i.DidChangeTextDocumentNotification.type}fillClientCapabilities(e){y(y(e,"textDocument"),"synchronization").dynamicRegistration=!0}initialize(e,t){let n=e.resolvedTextDocumentSync;t&&n&&void 0!==n.change&&n.change!==i.TextDocumentSyncKind.None&&this.register(this.messages,{id:u.generateUuid(),registerOptions:Object.assign({},{documentSelector:t},{syncKind:n.change})})}register(e,t){t.registerOptions.documentSelector&&(this._listener||(this._listener=r.workspace.onDidChangeTextDocument(this.callback,this)),this._changeData.set(t.id,{documentSelector:t.registerOptions.documentSelector,syncKind:t.registerOptions.syncKind}))}callback(e){if(0!==e.contentChanges.length)for(const t of this._changeData.values())if(r.languages.match(t.documentSelector,e.document)){let n=this._client.clientOptions.middleware;if(t.syncKind===i.TextDocumentSyncKind.Incremental){let t=this._client.code2ProtocolConverter.asChangeTextDocumentParams(e);n.didChange?n.didChange(e,()=>this._client.sendNotification(i.DidChangeTextDocumentNotification.type,t)):this._client.sendNotification(i.DidChangeTextDocumentNotification.type,t)}else if(t.syncKind===i.TextDocumentSyncKind.Full){let t=e=>{this._changeDelayer?(this._changeDelayer.uri!==e.document.uri.toString()&&(this.forceDelivery(),this._changeDelayer.uri=e.document.uri.toString()),this._changeDelayer.delayer.trigger(()=>{this._client.sendNotification(i.DidChangeTextDocumentNotification.type,this._client.code2ProtocolConverter.asChangeTextDocumentParams(e.document))})):(this._changeDelayer={uri:e.document.uri.toString(),delayer:new c.Delayer(200)},this._changeDelayer.delayer.trigger(()=>{this._client.sendNotification(i.DidChangeTextDocumentNotification.type,this._client.code2ProtocolConverter.asChangeTextDocumentParams(e.document))},-1))};n.didChange?n.didChange(e,t):t(e)}}}unregister(e){this._changeData.delete(e),0===this._changeData.size&&this._listener&&(this._listener.dispose(),this._listener=void 0)}dispose(){this._changeDelayer=void 0,this._forcingDelivery=!1,this._changeData.clear(),this._listener&&(this._listener.dispose(),this._listener=void 0)}forceDelivery(){if(!this._forcingDelivery&&this._changeDelayer)try{this._forcingDelivery=!0,this._changeDelayer.delayer.forceDelivery()}finally{this._forcingDelivery=!1}}}class x extends b{constructor(e){super(e,r.workspace.onWillSaveTextDocument,i.WillSaveTextDocumentNotification.type,e.clientOptions.middleware.willSave,t=>e.code2ProtocolConverter.asWillSaveTextDocumentParams(t),(e,t)=>b.textDocumentFilter(e,t.document))}get messages(){return i.WillSaveTextDocumentNotification.type}fillClientCapabilities(e){y(y(e,"textDocument"),"synchronization").willSave=!0}initialize(e,t){let n=e.resolvedTextDocumentSync;t&&n&&n.willSave&&this.register(this.messages,{id:u.generateUuid(),registerOptions:{documentSelector:t}})}}class k{constructor(e){this._client=e,this._selectors=new Map}get messages(){return i.WillSaveTextDocumentWaitUntilRequest.type}fillClientCapabilities(e){y(y(e,"textDocument"),"synchronization").willSaveWaitUntil=!0}initialize(e,t){let n=e.resolvedTextDocumentSync;t&&n&&n.willSaveWaitUntil&&this.register(this.messages,{id:u.generateUuid(),registerOptions:{documentSelector:t}})}register(e,t){t.registerOptions.documentSelector&&(this._listener||(this._listener=r.workspace.onWillSaveTextDocument(this.callback,this)),this._selectors.set(t.id,t.registerOptions.documentSelector))}callback(e){if(b.textDocumentFilter(this._selectors.values(),e.document)){let t=this._client.clientOptions.middleware,n=e=>this._client.sendRequest(i.WillSaveTextDocumentWaitUntilRequest.type,this._client.code2ProtocolConverter.asWillSaveTextDocumentParams(e)).then(e=>{let t=this._client.protocol2CodeConverter.asTextEdits(e);return void 0===t?[]:t});e.waitUntil(t.willSaveWaitUntil?t.willSaveWaitUntil(e,n):n(e))}}unregister(e){this._selectors.delete(e),0===this._selectors.size&&this._listener&&(this._listener.dispose(),this._listener=void 0)}dispose(){this._selectors.clear(),this._listener&&(this._listener.dispose(),this._listener=void 0)}}class E extends b{constructor(e){super(e,r.workspace.onDidSaveTextDocument,i.DidSaveTextDocumentNotification.type,e.clientOptions.middleware.didSave,t=>e.code2ProtocolConverter.asSaveTextDocumentParams(t,this._includeText),b.textDocumentFilter)}get messages(){return i.DidSaveTextDocumentNotification.type}fillClientCapabilities(e){y(y(e,"textDocument"),"synchronization").didSave=!0}initialize(e,t){let n=e.resolvedTextDocumentSync;t&&n&&n.save&&this.register(this.messages,{id:u.generateUuid(),registerOptions:Object.assign({},{documentSelector:t},{includeText:!!n.save.includeText})})}register(e,t){this._includeText=!!t.registerOptions.includeText,super.register(e,t)}}class T{constructor(e,t){this._client=e,this._notifyFileEvent=t,this._watchers=new Map}get messages(){return i.DidChangeWatchedFilesNotification.type}fillClientCapabilities(e){y(y(e,"workspace"),"didChangeWatchedFiles").dynamicRegistration=!0}initialize(e,t){}register(e,t){if(!Array.isArray(t.registerOptions.watchers))return;let n=[];for(let e of t.registerOptions.watchers){if(!a.string(e.globPattern))continue;let t=!0,o=!0,s=!0;void 0!==e.kind&&null!==e.kind&&(t=0!=(e.kind&i.WatchKind.Create),o=0!=(e.kind&i.WatchKind.Change),s=0!=(e.kind&i.WatchKind.Delete));let c=r.workspace.createFileSystemWatcher(e.globPattern,!t,!o,!s);this.hookListeners(c,t,o,s),n.push(c)}this._watchers.set(t.id,n)}registerRaw(e,t){let n=[];for(let e of t)this.hookListeners(e,!0,!0,!0,n);this._watchers.set(e,n)}hookListeners(e,t,n,r,o){t&&e.onDidCreate(e=>this._notifyFileEvent({uri:this._client.code2ProtocolConverter.asUri(e),type:i.FileChangeType.Created}),null,o),n&&e.onDidChange(e=>this._notifyFileEvent({uri:this._client.code2ProtocolConverter.asUri(e),type:i.FileChangeType.Changed}),null,o),r&&e.onDidDelete(e=>this._notifyFileEvent({uri:this._client.code2ProtocolConverter.asUri(e),type:i.FileChangeType.Deleted}),null,o)}unregister(e){let t=this._watchers.get(e);if(t)for(let e of t)e.dispose()}dispose(){this._watchers.forEach(e=>{for(let t of e)t.dispose()}),this._watchers.clear()}}class I{constructor(e,t){this._client=e,this._message=t,this._providers=new Map}get messages(){return this._message}register(e,t){if(e.method!==this.messages.method)throw new Error(`Register called on wrong feature. Requested ${e.method} but reached feature ${this.messages.method}`);if(!t.registerOptions.documentSelector)return;let n=this.registerLanguageProvider(t.registerOptions);n&&this._providers.set(t.id,n)}unregister(e){let t=this._providers.get(e);t&&t.dispose()}dispose(){this._providers.forEach(e=>{e.dispose()}),this._providers.clear()}}t.TextDocumentFeature=I;class D{constructor(e,t){this._client=e,this._message=t,this._providers=new Map}get messages(){return this._message}register(e,t){if(e.method!==this.messages.method)throw new Error(`Register called on wron feature. Requested ${e.method} but reached feature ${this.messages.method}`);let n=this.registerLanguageProvider(t.registerOptions);n&&this._providers.set(t.id,n)}unregister(e){let t=this._providers.get(e);t&&t.dispose()}dispose(){this._providers.forEach(e=>{e.dispose()}),this._providers.clear()}}class R extends I{constructor(e){super(e,i.CompletionRequest.type)}fillClientCapabilities(e){let t=y(y(e,"textDocument"),"completion");t.dynamicRegistration=!0,t.contextSupport=!0,t.completionItem={snippetSupport:!0,commitCharactersSupport:!0,documentationFormat:[i.MarkupKind.Markdown,i.MarkupKind.PlainText],deprecatedSupport:!0,preselectSupport:!0},t.completionItemKind={valueSet:C}}initialize(e,t){e.completionProvider&&t&&this.register(this.messages,{id:u.generateUuid(),registerOptions:Object.assign({},{documentSelector:t},e.completionProvider)})}registerLanguageProvider(e){let t=e.triggerCharacters||[],n=this._client,o=(e,t,r,o)=>n.sendRequest(i.CompletionRequest.type,n.code2ProtocolConverter.asCompletionParams(e,t,r),o).then(n.protocol2CodeConverter.asCompletionResult,e=>(n.logFailedRequest(i.CompletionRequest.type,e),Promise.resolve([]))),s=(e,t)=>n.sendRequest(i.CompletionResolveRequest.type,n.code2ProtocolConverter.asCompletionItem(e),t).then(n.protocol2CodeConverter.asCompletionItem,t=>(n.logFailedRequest(i.CompletionResolveRequest.type,t),Promise.resolve(e))),a=this._client.clientOptions.middleware;return r.languages.registerCompletionItemProvider(e.documentSelector,{provideCompletionItems:(e,t,n,r)=>a.provideCompletionItem?a.provideCompletionItem(e,t,r,n,o):o(e,t,r,n),resolveCompletionItem:e.resolveProvider?(e,t)=>a.resolveCompletionItem?a.resolveCompletionItem(e,t,s):s(e,t):void 0},...t)}}class O extends I{constructor(e){super(e,i.HoverRequest.type)}fillClientCapabilities(e){const t=y(y(e,"textDocument"),"hover");t.dynamicRegistration=!0,t.contentFormat=[i.MarkupKind.Markdown,i.MarkupKind.PlainText]}initialize(e,t){e.hoverProvider&&t&&this.register(this.messages,{id:u.generateUuid(),registerOptions:Object.assign({},{documentSelector:t})})}registerLanguageProvider(e){let t=this._client,n=(e,n,r)=>t.sendRequest(i.HoverRequest.type,t.code2ProtocolConverter.asTextDocumentPositionParams(e,n),r).then(t.protocol2CodeConverter.asHover,e=>(t.logFailedRequest(i.HoverRequest.type,e),Promise.resolve(null))),o=t.clientOptions.middleware;return r.languages.registerHoverProvider(e.documentSelector,{provideHover:(e,t,r)=>o.provideHover?o.provideHover(e,t,r,n):n(e,t,r)})}}class A extends I{constructor(e){super(e,i.SignatureHelpRequest.type)}fillClientCapabilities(e){let t=y(y(e,"textDocument"),"signatureHelp");t.dynamicRegistration=!0,t.signatureInformation={documentationFormat:[i.MarkupKind.Markdown,i.MarkupKind.PlainText]},t.signatureInformation.parameterInformation={labelOffsetSupport:!0}}initialize(e,t){e.signatureHelpProvider&&t&&this.register(this.messages,{id:u.generateUuid(),registerOptions:Object.assign({},{documentSelector:t},e.signatureHelpProvider)})}registerLanguageProvider(e){let t=this._client,n=(e,n,r)=>t.sendRequest(i.SignatureHelpRequest.type,t.code2ProtocolConverter.asTextDocumentPositionParams(e,n),r).then(t.protocol2CodeConverter.asSignatureHelp,e=>(t.logFailedRequest(i.SignatureHelpRequest.type,e),Promise.resolve(null))),o=t.clientOptions.middleware,s=e.triggerCharacters||[];return r.languages.registerSignatureHelpProvider(e.documentSelector,{provideSignatureHelp:(e,t,r)=>o.provideSignatureHelp?o.provideSignatureHelp(e,t,r,n):n(e,t,r)},...s)}}class F extends I{constructor(e){super(e,i.DefinitionRequest.type)}fillClientCapabilities(e){let t=y(y(e,"textDocument"),"definition");t.dynamicRegistration=!0,t.linkSupport=!0}initialize(e,t){e.definitionProvider&&t&&this.register(this.messages,{id:u.generateUuid(),registerOptions:Object.assign({},{documentSelector:t})})}registerLanguageProvider(e){let t=this._client,n=(e,n,r)=>t.sendRequest(i.DefinitionRequest.type,t.code2ProtocolConverter.asTextDocumentPositionParams(e,n),r).then(t.protocol2CodeConverter.asDefinitionResult,e=>(t.logFailedRequest(i.DefinitionRequest.type,e),Promise.resolve(null))),o=t.clientOptions.middleware;return r.languages.registerDefinitionProvider(e.documentSelector,{provideDefinition:(e,t,r)=>o.provideDefinition?o.provideDefinition(e,t,r,n):n(e,t,r)})}}class N extends I{constructor(e){super(e,i.ReferencesRequest.type)}fillClientCapabilities(e){y(y(e,"textDocument"),"references").dynamicRegistration=!0}initialize(e,t){e.referencesProvider&&t&&this.register(this.messages,{id:u.generateUuid(),registerOptions:Object.assign({},{documentSelector:t})})}registerLanguageProvider(e){let t=this._client,n=(e,n,r,o)=>t.sendRequest(i.ReferencesRequest.type,t.code2ProtocolConverter.asReferenceParams(e,n,r),o).then(t.protocol2CodeConverter.asReferences,e=>(t.logFailedRequest(i.ReferencesRequest.type,e),Promise.resolve([]))),o=t.clientOptions.middleware;return r.languages.registerReferenceProvider(e.documentSelector,{provideReferences:(e,t,r,i)=>o.provideReferences?o.provideReferences(e,t,r,i,n):n(e,t,r,i)})}}class M extends I{constructor(e){super(e,i.DocumentHighlightRequest.type)}fillClientCapabilities(e){y(y(e,"textDocument"),"documentHighlight").dynamicRegistration=!0}initialize(e,t){e.documentHighlightProvider&&t&&this.register(this.messages,{id:u.generateUuid(),registerOptions:Object.assign({},{documentSelector:t})})}registerLanguageProvider(e){let t=this._client,n=(e,n,r)=>t.sendRequest(i.DocumentHighlightRequest.type,t.code2ProtocolConverter.asTextDocumentPositionParams(e,n),r).then(t.protocol2CodeConverter.asDocumentHighlights,e=>(t.logFailedRequest(i.DocumentHighlightRequest.type,e),Promise.resolve([]))),o=t.clientOptions.middleware;return r.languages.registerDocumentHighlightProvider(e.documentSelector,{provideDocumentHighlights:(e,t,r)=>o.provideDocumentHighlights?o.provideDocumentHighlights(e,t,r,n):n(e,t,r)})}}class L extends I{constructor(e){super(e,i.DocumentSymbolRequest.type)}fillClientCapabilities(e){let t=y(y(e,"textDocument"),"documentSymbol");t.dynamicRegistration=!0,t.symbolKind={valueSet:v},t.hierarchicalDocumentSymbolSupport=!0}initialize(e,t){e.documentSymbolProvider&&t&&this.register(this.messages,{id:u.generateUuid(),registerOptions:Object.assign({},{documentSelector:t})})}registerLanguageProvider(e){let t=this._client,n=(e,n)=>t.sendRequest(i.DocumentSymbolRequest.type,t.code2ProtocolConverter.asDocumentSymbolParams(e),n).then(e=>{if(null!==e){if(0===e.length)return[];{let n=e[0];return i.DocumentSymbol.is(n)?t.protocol2CodeConverter.asDocumentSymbols(e):t.protocol2CodeConverter.asSymbolInformations(e)}}},e=>(t.logFailedRequest(i.DocumentSymbolRequest.type,e),Promise.resolve([]))),o=t.clientOptions.middleware;return r.languages.registerDocumentSymbolProvider(e.documentSelector,{provideDocumentSymbols:(e,t)=>o.provideDocumentSymbols?o.provideDocumentSymbols(e,t,n):n(e,t)})}}class q extends D{constructor(e){super(e,i.WorkspaceSymbolRequest.type)}fillClientCapabilities(e){let t=y(y(e,"workspace"),"symbol");t.dynamicRegistration=!0,t.symbolKind={valueSet:v}}initialize(e){e.workspaceSymbolProvider&&this.register(this.messages,{id:u.generateUuid(),registerOptions:void 0})}registerLanguageProvider(e){let t=this._client,n=(e,n)=>t.sendRequest(i.WorkspaceSymbolRequest.type,{query:e},n).then(t.protocol2CodeConverter.asSymbolInformations,e=>(t.logFailedRequest(i.WorkspaceSymbolRequest.type,e),Promise.resolve([]))),o=t.clientOptions.middleware;return r.languages.registerWorkspaceSymbolProvider({provideWorkspaceSymbols:(e,t)=>o.provideWorkspaceSymbols?o.provideWorkspaceSymbols(e,t,n):n(e,t)})}}class j extends I{constructor(e){super(e,i.CodeActionRequest.type)}fillClientCapabilities(e){const t=y(y(e,"textDocument"),"codeAction");t.dynamicRegistration=!0,t.codeActionLiteralSupport={codeActionKind:{valueSet:["",i.CodeActionKind.QuickFix,i.CodeActionKind.Refactor,i.CodeActionKind.RefactorExtract,i.CodeActionKind.RefactorInline,i.CodeActionKind.RefactorRewrite,i.CodeActionKind.Source,i.CodeActionKind.SourceOrganizeImports]}}}initialize(e,t){if(!e.codeActionProvider||!t)return;let n=void 0;a.boolean(e.codeActionProvider)||(n=e.codeActionProvider.codeActionKinds),this.register(this.messages,{id:u.generateUuid(),registerOptions:{documentSelector:t,codeActionKinds:n}})}registerLanguageProvider(e){let t=this._client,n=(e,n,r,o)=>{let s={textDocument:t.code2ProtocolConverter.asTextDocumentIdentifier(e),range:t.code2ProtocolConverter.asRange(n),context:t.code2ProtocolConverter.asCodeActionContext(r)};return t.sendRequest(i.CodeActionRequest.type,s,o).then(e=>{if(null===e)return;let n=[];for(let r of e)i.Command.is(r)?n.push(t.protocol2CodeConverter.asCommand(r)):n.push(t.protocol2CodeConverter.asCodeAction(r));return n},e=>(t.logFailedRequest(i.CodeActionRequest.type,e),Promise.resolve([])))},o=t.clientOptions.middleware;return r.languages.registerCodeActionsProvider(e.documentSelector,{provideCodeActions:(e,t,r,i)=>o.provideCodeActions?o.provideCodeActions(e,t,r,i,n):n(e,t,r,i)},e.codeActionKinds?{providedCodeActionKinds:t.protocol2CodeConverter.asCodeActionKinds(e.codeActionKinds)}:void 0)}}class W extends I{constructor(e){super(e,i.CodeLensRequest.type)}fillClientCapabilities(e){y(y(e,"textDocument"),"codeLens").dynamicRegistration=!0}initialize(e,t){e.codeLensProvider&&t&&this.register(this.messages,{id:u.generateUuid(),registerOptions:Object.assign({},{documentSelector:t},e.codeLensProvider)})}registerLanguageProvider(e){let t=this._client,n=(e,n)=>t.sendRequest(i.CodeLensRequest.type,t.code2ProtocolConverter.asCodeLensParams(e),n).then(t.protocol2CodeConverter.asCodeLenses,e=>(t.logFailedRequest(i.CodeLensRequest.type,e),Promise.resolve([]))),o=(e,n)=>t.sendRequest(i.CodeLensResolveRequest.type,t.code2ProtocolConverter.asCodeLens(e),n).then(t.protocol2CodeConverter.asCodeLens,n=>(t.logFailedRequest(i.CodeLensResolveRequest.type,n),e)),s=t.clientOptions.middleware;return r.languages.registerCodeLensProvider(e.documentSelector,{provideCodeLenses:(e,t)=>s.provideCodeLenses?s.provideCodeLenses(e,t,n):n(e,t),resolveCodeLens:e.resolveProvider?(e,t)=>s.resolveCodeLens?s.resolveCodeLens(e,t,o):o(e,t):void 0})}}class $ extends I{constructor(e){super(e,i.DocumentFormattingRequest.type)}fillClientCapabilities(e){y(y(e,"textDocument"),"formatting").dynamicRegistration=!0}initialize(e,t){e.documentFormattingProvider&&t&&this.register(this.messages,{id:u.generateUuid(),registerOptions:Object.assign({},{documentSelector:t})})}registerLanguageProvider(e){let t=this._client,n=(e,n,r)=>{let o={textDocument:t.code2ProtocolConverter.asTextDocumentIdentifier(e),options:t.code2ProtocolConverter.asFormattingOptions(n)};return t.sendRequest(i.DocumentFormattingRequest.type,o,r).then(t.protocol2CodeConverter.asTextEdits,e=>(t.logFailedRequest(i.DocumentFormattingRequest.type,e),Promise.resolve([])))},o=t.clientOptions.middleware;return r.languages.registerDocumentFormattingEditProvider(e.documentSelector,{provideDocumentFormattingEdits:(e,t,r)=>o.provideDocumentFormattingEdits?o.provideDocumentFormattingEdits(e,t,r,n):n(e,t,r)})}}class U extends I{constructor(e){super(e,i.DocumentRangeFormattingRequest.type)}fillClientCapabilities(e){y(y(e,"textDocument"),"rangeFormatting").dynamicRegistration=!0}initialize(e,t){e.documentRangeFormattingProvider&&t&&this.register(this.messages,{id:u.generateUuid(),registerOptions:Object.assign({},{documentSelector:t})})}registerLanguageProvider(e){let t=this._client,n=(e,n,r,o)=>{let s={textDocument:t.code2ProtocolConverter.asTextDocumentIdentifier(e),range:t.code2ProtocolConverter.asRange(n),options:t.code2ProtocolConverter.asFormattingOptions(r)};return t.sendRequest(i.DocumentRangeFormattingRequest.type,s,o).then(t.protocol2CodeConverter.asTextEdits,e=>(t.logFailedRequest(i.DocumentRangeFormattingRequest.type,e),Promise.resolve([])))},o=t.clientOptions.middleware;return r.languages.registerDocumentRangeFormattingEditProvider(e.documentSelector,{provideDocumentRangeFormattingEdits:(e,t,r,i)=>o.provideDocumentRangeFormattingEdits?o.provideDocumentRangeFormattingEdits(e,t,r,i,n):n(e,t,r,i)})}}class H extends I{constructor(e){super(e,i.DocumentOnTypeFormattingRequest.type)}fillClientCapabilities(e){y(y(e,"textDocument"),"onTypeFormatting").dynamicRegistration=!0}initialize(e,t){e.documentOnTypeFormattingProvider&&t&&this.register(this.messages,{id:u.generateUuid(),registerOptions:Object.assign({},{documentSelector:t},e.documentOnTypeFormattingProvider)})}registerLanguageProvider(e){let t=this._client,n=e.moreTriggerCharacter||[],o=(e,n,r,o,s)=>{let a={textDocument:t.code2ProtocolConverter.asTextDocumentIdentifier(e),position:t.code2ProtocolConverter.asPosition(n),ch:r,options:t.code2ProtocolConverter.asFormattingOptions(o)};return t.sendRequest(i.DocumentOnTypeFormattingRequest.type,a,s).then(t.protocol2CodeConverter.asTextEdits,e=>(t.logFailedRequest(i.DocumentOnTypeFormattingRequest.type,e),Promise.resolve([])))},s=t.clientOptions.middleware;return r.languages.registerOnTypeFormattingEditProvider(e.documentSelector,{provideOnTypeFormattingEdits:(e,t,n,r,i)=>s.provideOnTypeFormattingEdits?s.provideOnTypeFormattingEdits(e,t,n,r,i,o):o(e,t,n,r,i)},e.firstTriggerCharacter,...n)}}class z extends I{constructor(e){super(e,i.RenameRequest.type)}fillClientCapabilities(e){let t=y(y(e,"textDocument"),"rename");t.dynamicRegistration=!0,t.prepareSupport=!0}initialize(e,t){if(!e.renameProvider||!t)return;let n=Object.assign({},{documentSelector:t});a.boolean(e.renameProvider)?n.prepareProvider=!1:n.prepareProvider=e.renameProvider.prepareProvider,this.register(this.messages,{id:u.generateUuid(),registerOptions:n})}registerLanguageProvider(e){let t=this._client,n=(e,n,r,o)=>{let s={textDocument:t.code2ProtocolConverter.asTextDocumentIdentifier(e),position:t.code2ProtocolConverter.asPosition(n),newName:r};return t.sendRequest(i.RenameRequest.type,s,o).then(t.protocol2CodeConverter.asWorkspaceEdit,e=>(t.logFailedRequest(i.RenameRequest.type,e),Promise.reject(new Error(e.message))))},o=(e,n,r)=>{let o={textDocument:t.code2ProtocolConverter.asTextDocumentIdentifier(e),position:t.code2ProtocolConverter.asPosition(n)};return t.sendRequest(i.PrepareRenameRequest.type,o,r).then(e=>i.Range.is(e)?t.protocol2CodeConverter.asRange(e):e&&e.range?{range:t.protocol2CodeConverter.asRange(e.range),placeholder:e.placeholder}:null,e=>(t.logFailedRequest(i.PrepareRenameRequest.type,e),Promise.reject(new Error(e.message))))},s=t.clientOptions.middleware;return r.languages.registerRenameProvider(e.documentSelector,{provideRenameEdits:(e,t,r,i)=>s.provideRenameEdits?s.provideRenameEdits(e,t,r,i,n):n(e,t,r,i),prepareRename:e.prepareProvider?(e,t,n)=>s.prepareRename?s.prepareRename(e,t,n,o):o(e,t,n):void 0})}}class V extends I{constructor(e){super(e,i.DocumentLinkRequest.type)}fillClientCapabilities(e){y(y(e,"textDocument"),"documentLink").dynamicRegistration=!0}initialize(e,t){e.documentLinkProvider&&t&&this.register(this.messages,{id:u.generateUuid(),registerOptions:Object.assign({},{documentSelector:t},e.documentLinkProvider)})}registerLanguageProvider(e){let t=this._client,n=(e,n)=>t.sendRequest(i.DocumentLinkRequest.type,t.code2ProtocolConverter.asDocumentLinkParams(e),n).then(t.protocol2CodeConverter.asDocumentLinks,e=>{t.logFailedRequest(i.DocumentLinkRequest.type,e),Promise.resolve(new Error(e.message))}),o=(e,n)=>t.sendRequest(i.DocumentLinkResolveRequest.type,t.code2ProtocolConverter.asDocumentLink(e),n).then(t.protocol2CodeConverter.asDocumentLink,e=>{t.logFailedRequest(i.DocumentLinkResolveRequest.type,e),Promise.resolve(new Error(e.message))}),s=t.clientOptions.middleware;return r.languages.registerDocumentLinkProvider(e.documentSelector,{provideDocumentLinks:(e,t)=>s.provideDocumentLinks?s.provideDocumentLinks(e,t,n):n(e,t),resolveDocumentLink:e.resolveProvider?(e,t)=>s.resolveDocumentLink?s.resolveDocumentLink(e,t,o):o(e,t):void 0})}}class B{constructor(e){this._client=e,this._listeners=new Map}get messages(){return i.DidChangeConfigurationNotification.type}fillClientCapabilities(e){y(y(e,"workspace"),"didChangeConfiguration").dynamicRegistration=!0}initialize(){let e=this._client.clientOptions.synchronize.configurationSection;void 0!==e&&this.register(this.messages,{id:u.generateUuid(),registerOptions:{section:e}})}register(e,t){let n=r.workspace.onDidChangeConfiguration(e=>{this.onDidChangeConfiguration(t.registerOptions.section,e)});this._listeners.set(t.id,n),void 0!==t.registerOptions.section&&this.onDidChangeConfiguration(t.registerOptions.section,void 0)}unregister(e){let t=this._listeners.get(e);t&&(this._listeners.delete(e),t.dispose())}dispose(){for(let e of this._listeners.values())e.dispose();this._listeners.clear()}onDidChangeConfiguration(e,t){let n;if(void 0!==(n=a.string(e)?[e]:e)&&void 0!==t){if(!n.some(e=>t.affectsConfiguration(e)))return}let r=e=>{void 0!==e?this._client.sendNotification(i.DidChangeConfigurationNotification.type,{settings:this.extractSettingsInformation(e)}):this._client.sendNotification(i.DidChangeConfigurationNotification.type,{settings:null})},o=this.getMiddleware();o?o(n,r):r(n)}extractSettingsInformation(e){function t(e,t){let n=e;for(let e=0;e<t.length-1;e++){let r=n[t[e]];r||(r=Object.create(null),n[t[e]]=r),n=r}return n}let n=this._client.clientOptions.workspaceFolder?this._client.clientOptions.workspaceFolder.uri:void 0,i=Object.create(null);for(let o=0;o<e.length;o++){let s=e[o],a=s.indexOf("."),c=null;if(c=a>=0?r.workspace.getConfiguration(s.substr(0,a),n).get(s.substr(a+1)):r.workspace.getConfiguration(s,n)){let n=e[o].split(".");t(i,n)[n[n.length-1]]=c}}return i}getMiddleware(){let e=this._client.clientOptions.middleware;return e.workspace&&e.workspace.didChangeConfiguration?e.workspace.didChangeConfiguration:void 0}}class K{constructor(e){this._client=e,this._commands=new Map}get messages(){return i.ExecuteCommandRequest.type}fillClientCapabilities(e){y(y(e,"workspace"),"executeCommand").dynamicRegistration=!0}initialize(e){e.executeCommandProvider&&this.register(this.messages,{id:u.generateUuid(),registerOptions:Object.assign({},e.executeCommandProvider)})}register(e,t){let n=this._client;if(t.registerOptions.commands){let e=[];for(const o of t.registerOptions.commands)e.push(r.commands.registerCommand(o,(...e)=>{let t={command:o,arguments:e};return n.sendRequest(i.ExecuteCommandRequest.type,t).then(void 0,e=>{n.logFailedRequest(i.ExecuteCommandRequest.type,e)})}));this._commands.set(t.id,e)}}unregister(e){let t=this._commands.get(e);t&&t.forEach(e=>e.dispose())}dispose(){this._commands.forEach(e=>{e.forEach(e=>e.dispose())}),this._commands.clear()}}!function(e){e.is=function(e){return e&&i.MessageReader.is(e.reader)&&i.MessageWriter.is(e.writer)}}(t.MessageTransports||(t.MessageTransports={}));class J{constructor(e,t){this._resolve=e,this._reject=t,this._used=!1}get isUsed(){return this._used}resolve(){this._used=!0,this._resolve()}reject(e){this._used=!0,this._reject(e)}}t.BaseLanguageClient=class{constructor(e,t,n){this._traceFormat=i.TraceFormat.Text,this._features=[],this._method2Message=new Map,this._dynamicFeatures=new Map,this._id=e,this._name=t,n=n||{},this._clientOptions={documentSelector:n.documentSelector||[],synchronize:n.synchronize||{},diagnosticCollectionName:n.diagnosticCollectionName,outputChannelName:n.outputChannelName||this._name,revealOutputChannelOn:n.revealOutputChannelOn||p.Error,stdioEncoding:n.stdioEncoding||"utf8",initializationOptions:n.initializationOptions,initializationFailedHandler:n.initializationFailedHandler,errorHandler:n.errorHandler||new m(this._name),middleware:n.middleware||{},uriConverters:n.uriConverters,workspaceFolder:n.workspaceFolder},this._clientOptions.synchronize=this._clientOptions.synchronize||{},this.state=g.Initial,this._connectionPromise=void 0,this._resolvedConnection=void 0,this._initializeResult=void 0,n.outputChannel?(this._outputChannel=n.outputChannel,this._disposeOutputChannel=!1):(this._outputChannel=void 0,this._disposeOutputChannel=!0),this._listeners=void 0,this._providers=void 0,this._diagnostics=void 0,this._fileEvents=[],this._fileEventDelayer=new c.Delayer(250),this._onReady=new Promise((e,t)=>{this._onReadyCallbacks=new J(e,t)}),this._onStop=void 0,this._telemetryEmitter=new i.Emitter,this._stateChangeEmitter=new i.Emitter,this._tracer={log:(e,t)=>{a.string(e)?this.logTrace(e,t):this.logObjectTrace(e)}},this._c2p=o.createConverter(n.uriConverters?n.uriConverters.code2Protocol:void 0),this._p2c=s.createConverter(n.uriConverters?n.uriConverters.protocol2Code:void 0),this._syncedDocuments=new Map,this.registerBuiltinFeatures()}get state(){return this._state}set state(e){let t=this.getPublicState();this._state=e;let n=this.getPublicState();n!==t&&this._stateChangeEmitter.fire({oldState:t,newState:n})}getPublicState(){return this.state===g.Running?f.Running:this.state===g.Starting?f.Starting:f.Stopped}get initializeResult(){return this._initializeResult}sendRequest(e,...t){if(!this.isConnectionActive())throw new Error("Language client is not ready yet");this.forceDocumentSync();try{return this._resolvedConnection.sendRequest(e,...t)}catch(t){throw this.error(`Sending request ${a.string(e)?e:e.method} failed.`,t),t}}onRequest(e,t){if(!this.isConnectionActive())throw new Error("Language client is not ready yet");try{this._resolvedConnection.onRequest(e,t)}catch(t){throw this.error(`Registering request handler ${a.string(e)?e:e.method} failed.`,t),t}}sendNotification(e,t){if(!this.isConnectionActive())throw new Error("Language client is not ready yet");this.forceDocumentSync();try{this._resolvedConnection.sendNotification(e,t)}catch(t){throw this.error(`Sending notification ${a.string(e)?e:e.method} failed.`,t),t}}onNotification(e,t){if(!this.isConnectionActive())throw new Error("Language client is not ready yet");try{this._resolvedConnection.onNotification(e,t)}catch(t){throw this.error(`Registering notification handler ${a.string(e)?e:e.method} failed.`,t),t}}get clientOptions(){return this._clientOptions}get protocol2CodeConverter(){return this._p2c}get code2ProtocolConverter(){return this._c2p}get onTelemetry(){return this._telemetryEmitter.event}get onDidChangeState(){return this._stateChangeEmitter.event}get outputChannel(){return this._outputChannel||(this._outputChannel=r.window.createOutputChannel(this._clientOptions.outputChannelName?this._clientOptions.outputChannelName:this._name)),this._outputChannel}get diagnostics(){return this._diagnostics}createDefaultErrorHandler(){return new m(this._name)}set trace(e){this._trace=e,this.onReady().then(()=>{this.resolveConnection().then(e=>{e.trace(this._trace,this._tracer,{sendNotification:!1,traceFormat:this._traceFormat})})},()=>{})}data2String(e){if(e instanceof i.ResponseError){const t=e;return`  Message: ${t.message}\n  Code: ${t.code} ${t.data?"\n"+t.data.toString():""}`}return e instanceof Error?a.string(e.stack)?e.stack:e.message:a.string(e)?e:e.toString()}info(e,t){this.outputChannel.appendLine(`[Info  - ${(new Date).toLocaleTimeString()}] ${e}`),t&&this.outputChannel.appendLine(this.data2String(t)),this._clientOptions.revealOutputChannelOn<=p.Info&&this.outputChannel.show(!0)}warn(e,t){this.outputChannel.appendLine(`[Warn  - ${(new Date).toLocaleTimeString()}] ${e}`),t&&this.outputChannel.appendLine(this.data2String(t)),this._clientOptions.revealOutputChannelOn<=p.Warn&&this.outputChannel.show(!0)}error(e,t){this.outputChannel.appendLine(`[Error - ${(new Date).toLocaleTimeString()}] ${e}`),t&&this.outputChannel.appendLine(this.data2String(t)),this._clientOptions.revealOutputChannelOn<=p.Error&&this.outputChannel.show(!0)}logTrace(e,t){this.outputChannel.appendLine(`[Trace - ${(new Date).toLocaleTimeString()}] ${e}`),t&&this.outputChannel.appendLine(this.data2String(t))}logObjectTrace(e){e.isLSPMessage&&e.type?this.outputChannel.append(`[LSP   - ${(new Date).toLocaleTimeString()}] `):this.outputChannel.append(`[Trace - ${(new Date).toLocaleTimeString()}] `),e&&this.outputChannel.appendLine(`${JSON.stringify(e)}`)}needsStart(){return this.state===g.Initial||this.state===g.Stopping||this.state===g.Stopped}needsStop(){return this.state===g.Starting||this.state===g.Running}onReady(){return this._onReady}isConnectionActive(){return this.state===g.Running&&!!this._resolvedConnection}start(){return this._onReadyCallbacks.isUsed&&(this._onReady=new Promise((e,t)=>{this._onReadyCallbacks=new J(e,t)})),this._listeners=[],this._providers=[],this._diagnostics||(this._diagnostics=this._clientOptions.diagnosticCollectionName?r.languages.createDiagnosticCollection(this._clientOptions.diagnosticCollectionName):r.languages.createDiagnosticCollection()),this.state=g.Starting,this.resolveConnection().then(e=>(e.onLogMessage(e=>{switch(e.type){case i.MessageType.Error:this.error(e.message);break;case i.MessageType.Warning:this.warn(e.message);break;case i.MessageType.Info:this.info(e.message);break;default:this.outputChannel.appendLine(e.message)}}),e.onShowMessage(e=>{switch(e.type){case i.MessageType.Error:r.window.showErrorMessage(e.message);break;case i.MessageType.Warning:r.window.showWarningMessage(e.message);break;case i.MessageType.Info:r.window.showInformationMessage(e.message);break;default:r.window.showInformationMessage(e.message)}}),e.onRequest(i.ShowMessageRequest.type,e=>{let t;switch(e.type){case i.MessageType.Error:t=r.window.showErrorMessage;break;case i.MessageType.Warning:t=r.window.showWarningMessage;break;case i.MessageType.Info:t=r.window.showInformationMessage;break;default:t=r.window.showInformationMessage}let n=e.actions||[];return t(e.message,...n)}),e.onTelemetry(e=>{this._telemetryEmitter.fire(e)}),e.listen(),this.initialize(e))).then(void 0,e=>{this.state=g.StartFailed,this._onReadyCallbacks.reject(e),this.error("Starting client failed",e),r.window.showErrorMessage(`Couldn't start client ${this._name}`)}),new r.Disposable(()=>{this.needsStop()&&this.stop()})}resolveConnection(){return this._connectionPromise||(this._connectionPromise=this.createConnection()),this._connectionPromise}initialize(e){this.refreshTrace(e,!1);let t=this._clientOptions.initializationOptions,n=this._clientOptions.workspaceFolder?this._clientOptions.workspaceFolder.uri.fsPath:this._clientGetRootPath(),o={processId:process.pid,rootPath:n||null,rootUri:n?this._c2p.asUri(r.Uri.file(n)):null,capabilities:this.computeClientCapabilities(),initializationOptions:a.func(t)?t():t,trace:i.Trace.toString(this._trace),workspaceFolders:null};return this.fillInitializeParams(o),e.initialize(o).then(t=>{this._resolvedConnection=e,this._initializeResult=t,this.state=g.Running;let n=void 0;return a.number(t.capabilities.textDocumentSync)?n=t.capabilities.textDocumentSync===i.TextDocumentSyncKind.None?{openClose:!1,change:i.TextDocumentSyncKind.None,save:void 0}:{openClose:!0,change:t.capabilities.textDocumentSync,save:{includeText:!1}}:void 0!==t.capabilities.textDocumentSync&&null!==t.capabilities.textDocumentSync&&(n=t.capabilities.textDocumentSync),this._capabilities=Object.assign({},t.capabilities,{resolvedTextDocumentSync:n}),e.onDiagnostics(e=>this.handleDiagnostics(e)),e.onRequest(i.RegistrationRequest.type,e=>this.handleRegistrationRequest(e)),e.onRequest("client/registerFeature",e=>this.handleRegistrationRequest(e)),e.onRequest(i.UnregistrationRequest.type,e=>this.handleUnregistrationRequest(e)),e.onRequest("client/unregisterFeature",e=>this.handleUnregistrationRequest(e)),e.onRequest(i.ApplyWorkspaceEditRequest.type,e=>this.handleApplyWorkspaceEdit(e)),e.sendNotification(i.InitializedNotification.type,{}),this.hookFileEvents(e),this.hookConfigurationChanged(e),this.initializeFeatures(e),this._onReadyCallbacks.resolve(),t}).then(void 0,t=>{this._clientOptions.initializationFailedHandler?this._clientOptions.initializationFailedHandler(t)?this.initialize(e):(this.stop(),this._onReadyCallbacks.reject(t)):t instanceof i.ResponseError&&t.data&&t.data.retry?r.window.showErrorMessage(t.message,{title:"Retry",id:"retry"}).then(n=>{n&&"retry"===n.id?this.initialize(e):(this.stop(),this._onReadyCallbacks.reject(t))}):(t&&t.message&&r.window.showErrorMessage(t.message),this.error("Server initialization failed.",t),this.stop(),this._onReadyCallbacks.reject(t))})}_clientGetRootPath(){let e=r.workspace.workspaceFolders;if(!e||0===e.length)return;let t=e[0];return"file"===t.uri.scheme?t.uri.fsPath:void 0}stop(){return this._initializeResult=void 0,this._connectionPromise?this.state===g.Stopping&&this._onStop?this._onStop:(this.state=g.Stopping,this.cleanUp(),this._onStop=this.resolveConnection().then(e=>e.shutdown().then(()=>{e.exit(),e.dispose(),this.state=g.Stopped,this._onStop=void 0,this._connectionPromise=void 0,this._resolvedConnection=void 0}))):(this.state=g.Stopped,Promise.resolve())}cleanUp(e=!0,t=!0){this._listeners&&(this._listeners.forEach(e=>e.dispose()),this._listeners=void 0),this._providers&&(this._providers.forEach(e=>e.dispose()),this._providers=void 0),this._syncedDocuments&&this._syncedDocuments.clear();for(let e of this._dynamicFeatures.values())e.dispose();e&&this._outputChannel&&this._disposeOutputChannel&&(this._outputChannel.dispose(),this._outputChannel=void 0),t&&this._diagnostics&&(this._diagnostics.dispose(),this._diagnostics=void 0)}notifyFileEvent(e){this._fileEvents.push(e),this._fileEventDelayer.trigger(()=>{this.onReady().then(()=>{this.resolveConnection().then(e=>{this.isConnectionActive()&&e.didChangeWatchedFiles({changes:this._fileEvents}),this._fileEvents=[]})},e=>{this.error("Notify file events failed.",e)})})}forceDocumentSync(){this._dynamicFeatures.get(i.DidChangeTextDocumentNotification.type.method).forceDelivery()}handleDiagnostics(e){if(!this._diagnostics)return;let t=this._p2c.asUri(e.uri),n=this._p2c.asDiagnostics(e.diagnostics),r=this.clientOptions.middleware.handleDiagnostics;r?r(t,n,(e,t)=>this.setDiagnostics(e,t)):this.setDiagnostics(t,n)}setDiagnostics(e,t){this._diagnostics&&this._diagnostics.set(e,t)}createConnection(){let e=(e,t,n)=>{this.handleConnectionError(e,t,n)},t=()=>{this.handleConnectionClosed()};return this.createMessageTransports(this._clientOptions.stdioEncoding||"utf8").then(n=>(function(e,t,n,r){let o=new l,s=i.createProtocolConnection(e,t,o);return s.onError(e=>{n(e[0],e[1],e[2])}),s.onClose(r),{listen:()=>s.listen(),sendRequest:(e,...t)=>s.sendRequest(a.string(e)?e:e.method,...t),onRequest:(e,t)=>s.onRequest(a.string(e)?e:e.method,t),sendNotification:(e,t)=>s.sendNotification(a.string(e)?e:e.method,t),onNotification:(e,t)=>s.onNotification(a.string(e)?e:e.method,t),trace:(e,t,n)=>{const r={sendNotification:!1,traceFormat:i.TraceFormat.Text};void 0===n?s.trace(e,t,r):(a.boolean(n),s.trace(e,t,n))},initialize:e=>s.sendRequest(i.InitializeRequest.type,e),shutdown:()=>s.sendRequest(i.ShutdownRequest.type,void 0),exit:()=>s.sendNotification(i.ExitNotification.type),onLogMessage:e=>s.onNotification(i.LogMessageNotification.type,e),onShowMessage:e=>s.onNotification(i.ShowMessageNotification.type,e),onTelemetry:e=>s.onNotification(i.TelemetryEventNotification.type,e),didChangeConfiguration:e=>s.sendNotification(i.DidChangeConfigurationNotification.type,e),didChangeWatchedFiles:e=>s.sendNotification(i.DidChangeWatchedFilesNotification.type,e),didOpenTextDocument:e=>s.sendNotification(i.DidOpenTextDocumentNotification.type,e),didChangeTextDocument:e=>s.sendNotification(i.DidChangeTextDocumentNotification.type,e),didCloseTextDocument:e=>s.sendNotification(i.DidCloseTextDocumentNotification.type,e),didSaveTextDocument:e=>s.sendNotification(i.DidSaveTextDocumentNotification.type,e),onDiagnostics:e=>s.onNotification(i.PublishDiagnosticsNotification.type,e),dispose:()=>s.dispose()}})(n.reader,n.writer,e,t))}handleConnectionClosed(){if(this.state===g.Stopping||this.state===g.Stopped)return;try{this._resolvedConnection&&this._resolvedConnection.dispose()}catch(e){}let e=h.DoNotRestart;try{e=this._clientOptions.errorHandler.closed()}catch(e){}this._connectionPromise=void 0,this._resolvedConnection=void 0,e===h.DoNotRestart?(this.error("Connection to server got closed. Server will not be restarted."),this.state=g.Stopped,this.cleanUp(!1,!0)):e===h.Restart&&(this.info("Connection to server got closed. Server will restart."),this.cleanUp(!1,!1),this.state=g.Initial,this.start())}handleConnectionError(e,t,n){this._clientOptions.errorHandler.error(e,t,n)===d.Shutdown&&(this.error("Connection to server is erroring. Shutting down server."),this.stop())}hookConfigurationChanged(e){r.workspace.onDidChangeConfiguration(()=>{this.refreshTrace(e,!0)})}refreshTrace(e,t=!1){let n=r.workspace.getConfiguration(this._id),o=i.Trace.Off,s=i.TraceFormat.Text;if(n){const e=n.get("trace.server","off");"string"==typeof e?o=i.Trace.fromString(e):(o=i.Trace.fromString(n.get("trace.server.verbosity","off")),s=i.TraceFormat.fromString(n.get("trace.server.format","text")))}this._trace=o,this._traceFormat=s,e.trace(this._trace,this._tracer,{sendNotification:t,traceFormat:this._traceFormat})}hookFileEvents(e){let t,n=this._clientOptions.synchronize.fileEvents;n&&(t=a.array(n)?n:[n])&&this._dynamicFeatures.get(i.DidChangeWatchedFilesNotification.type.method).registerRaw(u.generateUuid(),t)}registerFeatures(e){for(let t of e)this.registerFeature(t)}registerFeature(e){if(this._features.push(e),w.is(e)){let t=e.messages;if(Array.isArray(t))for(let n of t)this._method2Message.set(n.method,n),this._dynamicFeatures.set(n.method,e);else this._method2Message.set(t.method,t),this._dynamicFeatures.set(t.method,e)}}registerBuiltinFeatures(){this.registerFeature(new B(this)),this.registerFeature(new S(this,this._syncedDocuments)),this.registerFeature(new P(this)),this.registerFeature(new x(this)),this.registerFeature(new k(this)),this.registerFeature(new E(this)),this.registerFeature(new _(this,this._syncedDocuments)),this.registerFeature(new T(this,e=>this.notifyFileEvent(e))),this.registerFeature(new R(this)),this.registerFeature(new O(this)),this.registerFeature(new A(this)),this.registerFeature(new F(this)),this.registerFeature(new N(this)),this.registerFeature(new M(this)),this.registerFeature(new L(this)),this.registerFeature(new q(this)),this.registerFeature(new j(this)),this.registerFeature(new W(this)),this.registerFeature(new $(this)),this.registerFeature(new U(this)),this.registerFeature(new H(this)),this.registerFeature(new z(this)),this.registerFeature(new V(this)),this.registerFeature(new K(this))}fillInitializeParams(e){for(let t of this._features)a.func(t.fillInitializeParams)&&t.fillInitializeParams(e)}computeClientCapabilities(){let e={};y(e,"workspace").applyEdit=!0;let t=y(y(e,"workspace"),"workspaceEdit");t.documentChanges=!0,t.resourceOperations=[i.ResourceOperationKind.Create,i.ResourceOperationKind.Rename,i.ResourceOperationKind.Delete],t.failureHandling=i.FailureHandlingKind.TextOnlyTransactional,y(y(e,"textDocument"),"publishDiagnostics").relatedInformation=!0;for(let t of this._features)t.fillClientCapabilities(e);return e}initializeFeatures(e){let t=this._clientOptions.documentSelector;for(let e of this._features)e.initialize(this._capabilities,t)}handleRegistrationRequest(e){return new Promise((t,n)=>{for(let t of e.registrations){const e=this._dynamicFeatures.get(t.method);if(!e)return void n(new Error(`No feature implementation for ${t.method} found. Registration failed.`));const r=t.registerOptions||{};r.documentSelector=r.documentSelector||this._clientOptions.documentSelector;const i={id:t.id,registerOptions:r};e.register(this._method2Message.get(t.method),i)}t()})}handleUnregistrationRequest(e){return new Promise((t,n)=>{for(let t of e.unregisterations){const e=this._dynamicFeatures.get(t.method);if(!e)return void n(new Error(`No feature implementation for ${t.method} found. Unregistration failed.`));e.unregister(t.id)}t()})}handleApplyWorkspaceEdit(e){let t=e.edit,n=new Map;r.workspace.textDocuments.forEach(e=>n.set(e.uri.toString(),e));let o=!1;if(t.documentChanges)for(const e of t.documentChanges)if(i.TextDocumentEdit.is(e)&&e.textDocument.version&&e.textDocument.version>=0){let t=n.get(e.textDocument.uri);if(t&&t.version!==e.textDocument.version){o=!0;break}}return o?Promise.resolve({applied:!1}):r.workspace.applyEdit(this._p2c.asWorkspaceEdit(e.edit)).then(e=>({applied:e}))}logFailedRequest(e,t){t instanceof i.ResponseError&&t.code===i.ErrorCodes.RequestCancelled||this.error(`Request ${e.method} failed.`,t)}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});class r{constructor(e){this._value=e}asHex(){return this._value}equals(e){return this.asHex()===e.asHex()}}class i extends r{constructor(){super([i._randomHex(),i._randomHex(),i._randomHex(),i._randomHex(),i._randomHex(),i._randomHex(),i._randomHex(),i._randomHex(),"-",i._randomHex(),i._randomHex(),i._randomHex(),i._randomHex(),"-","4",i._randomHex(),i._randomHex(),i._randomHex(),"-",i._oneOf(i._timeHighBits),i._randomHex(),i._randomHex(),i._randomHex(),"-",i._randomHex(),i._randomHex(),i._randomHex(),i._randomHex(),i._randomHex(),i._randomHex(),i._randomHex(),i._randomHex(),i._randomHex(),i._randomHex(),i._randomHex(),i._randomHex()].join(""))}static _oneOf(e){return e[Math.floor(e.length*Math.random())]}static _randomHex(){return i._oneOf(i._chars)}}function o(){return new i}i._chars=["0","1","2","3","4","5","6","6","7","8","9","a","b","c","d","e","f"],i._timeHighBits=["8","9","a","b"],t.empty=new r("00000000-0000-0000-0000-000000000000"),t.v4=o;const s=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/i;function a(e){return s.test(e)}t.isUUID=a,t.parse=function(e){if(!a(e))throw new Error("invalid uuid");return new r(e)},t.generateUuid=function(){return o().asHex()}},function(e,t){e.exports=require("child_process")},function(e,t){e.exports=require("events")},function(e,t){e.exports=require("https")},function(e,t,n){"use strict";var r=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))(function(i,o){function s(e){try{c(r.next(e))}catch(e){o(e)}}function a(e){try{c(r.throw(e))}catch(e){o(e)}}function c(e){e.done?i(e.value):new n(function(t){t(e.value)}).then(s,a)}c((r=r.apply(e,t||[])).next())})};Object.defineProperty(t,"__esModule",{value:!0});const i=n(1),o=n(0),s=n(3),a=n(2),c=n(4),u=n(8),l=n(56),d=n(146),h=n(23),p=n(30),f=n(185),g=n(22),m=n(34),v=n(57),C=n(18),y=n(62),w=n(193),b=n(68),S=n(69);let _,P,x,k,E,T,I,D=[],R=[],O=!1,A=[];const F=36e5;let N=null;const M="C/C++",L="C/C++: Install vsix -- ";let q;const j="Do not activate the extension when IntelliSense is disabled.";function W(e){return r(this,void 0,void 0,function*(){const t=o.window.activeTextEditor;if(!t)return[];const n=i.extname(t.document.fileName);if(!n)return;const r=n.toLowerCase();if(!n||[".hpp",".hh",".hxx",".h",".inl",""].some(e=>r===e))return[];let a,l,d;if(".C"===n?(a=!0,l=!0):(a=[".cpp",".cc",".cxx",".mm",".ino"].some(e=>r===e),l=".c"===r),!a&&!l)return[];const h="win32"===s.platform();let p;try{p=ke()}catch(e){return e&&e.message===j||console.error("Unknown error calling getActiveClient()."),[]}let f=yield p.getCompilerPath();f&&(f=f.trim(),f=h&&f.startsWith("/")?null:f.replace(/\\\\/g,"\\"));let g=yield p.getKnownCompilers();if(g){d=(g=g.filter(e=>(a&&!e.isC||l&&e.isC)&&(!h||!e.path.startsWith("/")))).map(e=>e.path);let e=new Map;const t=t=>{let n=t;if(t===f){n=c.extractCompilerPathAndArgs(t).compilerPath}n=i.basename(n),e.set(n,t)};d.forEach(t),f&&t(f),d=[...e.values()]}else f&&(d=[f]);return d?d.map(t=>{let n=c.extractCompilerPathAndArgs(t);t=n.compilerPath;const r=i.join("${fileDirname}","${fileBasenameNoExtension}"),s=i.basename(t),a=s+" build active file",u=a.startsWith("cl.exe");let l=u?["/Zi","/EHsc","/Fe:",r+".exe","${file}"]:["-g","${file}","-o",r+(h?".exe":"")];n.additionalArgs&&(l=l.concat(n.additionalArgs));const d=u?"":i.dirname(t),p={type:"shell",label:a,command:u?s:t,args:l,options:u?void 0:{cwd:d},compilerPath:u?s:t},f=new o.ShellExecution(t,[...l],{cwd:d}),g=o.workspace.getWorkspaceFolder(P.ActiveClient.RootUri);let m=new o.Task(p,g,a,M,f,"$gcc");return m.definition=p,m.group=o.TaskGroup.Build,e||delete m.definition.compilerPath,m}):(u.logLanguageServerEvent("noCompilerFound"),[])})}function $(){0!==A.length&&(A.forEach(e=>{e.dispose()}),A=[],O||U(),I.Value=!0)}function U(){if("Disabled"===(new h.CppSettings).intelliSenseEngine)throw new Error(j);{console.log("activating extension");let e=new p.PersistentState("CPP."+c.packageJson.version+".checkForConflictingExtensions",!0);if(e.Value){e.Value=!1,o.extensions.all.some((e,t,n)=>e.isActive&&"mitaki28.vscode-clang"===e.id)&&u.logLanguageServerEvent("conflictingExtension")}}O=!0,console.log("starting language server"),P=new d.ClientCollection,k=l.getUI(),void 0!==o.workspace.textDocuments&&o.workspace.textDocuments.length>0&&K(o.window.activeTextEditor),P.forEach(e=>{g.getCustomConfigProviders().forEach(t=>e.onRegisterCustomConfigurationProvider(t))}),D.push(o.workspace.onDidChangeConfiguration(z)),D.push(o.workspace.onDidSaveTextDocument(B)),D.push(o.window.onDidChangeActiveTextEditor(K)),D.push(o.window.onDidChangeTextEditorSelection(J)),D.push(o.window.onDidChangeVisibleTextEditors(G)),H(),function(){if("darwin"===process.platform){_="";let e=i.resolve(process.env.HOME,"Library/Logs/DiagnosticReports");a.stat(e,(t,n)=>{let r={};if(t)return r["fs.stat: err.code"]=t.code,void u.logLanguageServerEvent("MacCrash",r,null);try{a.watch(e,(t,n)=>{"rename"===t&&n!==_&&(_=n,n.startsWith("Microsoft.VSCode.CPP.")&&setTimeout(()=>{a.readFile(i.resolve(e,n),"utf8",(t,r)=>{t?a.readFile(i.resolve(e,n),"utf8",Pe):Pe(t,r)})},5e3))})}catch(e){}})}}();const e=new h.CppSettings(P.ActiveClient.RootUri);"Default"===e.updateChannel?function(){r(this,void 0,void 0,function*(){let e,t=new p.PersistentState("CPP.suggestInsiders",!0);if(!t.Value)return;try{e=yield w.getTargetBuildInfo("Insiders")}catch(e){console.log(`${L}${e.message}`),-1===e.message.indexOf("/")&&-1===e.message.indexOf("\\")||(e.message="Potential PII hidden"),u.logLanguageServerEvent("suggestInsiders",{error:e.message,success:"false"})}if(!e)return;const n=`Insiders version ${e.name} is available. Would you like to switch to the Insiders channel and install this update?`;let r=yield o.window.showInformationMessage(n,"Yes","Ask Me Later","Don't Show Again");switch(r){case"Yes":N=e,o.workspace.getConfiguration("C_Cpp").update("updateChannel","Insiders",o.ConfigurationTarget.Global);break;case"Don't Show Again":t.Value=!1}})}():"Insiders"===e.updateChannel&&(T=setInterval(Q,F,e.updateChannel),Q(e.updateChannel)),E=setInterval(Z,2500)}function H(){R.forEach(e=>e.dispose()),(R=[]).push(o.languages.setLanguageConfiguration("c",f.getLanguageConfig("c",P.ActiveClient.RootUri))),R.push(o.languages.setLanguageConfiguration("cpp",f.getLanguageConfig("cpp",P.ActiveClient.RootUri)))}function z(){const e=P.ActiveClient.onDidChangeSettings();P.forEach(e=>e.onDidChangeSettings());const t=e.updateChannel;t&&("Default"===t?clearInterval(T):"Insiders"===t&&(T=setInterval(Q,F)),Q(t))}t.activate=function(e){if(!O)if((I=new p.PersistentWorkspaceState("activatedPreviously",!1)).Value&&(I.Value=!1,U()),0===A.length&&A.push(o.workspace.onDidOpenTextDocument(e=>(function(e){"c"!==e.languageId&&"cpp"!==e.languageId||$()})(e))),e)$();else{if(q=o.tasks.registerTaskProvider(M,{provideTasks:()=>W(!1),resolveTask(e){}}),o.tasks.onDidStartTask(e=>{e.execution.task.source===M&&u.logLanguageServerEvent("buildTaskStarted")}),o.workspace.workspaceFolders&&o.workspace.workspaceFolders.length>0)for(let e=0;e<o.workspace.workspaceFolders.length;++e){let t=i.join(o.workspace.workspaceFolders[e].uri.fsPath,".vscode/c_cpp_properties.json");if(a.existsSync(t))return void $()}if(void 0!==o.workspace.textDocuments&&o.workspace.textDocuments.length>0)for(let e=0;e<o.workspace.textDocuments.length;++e){let t=o.workspace.textDocuments[e];if("cpp"===t.languageId||"c"===t.languageId)return void $()}}},t.getBuildTasks=W,t.updateLanguageConfigurations=H;let V=!1;function B(e){!o.window.activeTextEditor||e!==o.window.activeTextEditor.document||"cpp"!==e.languageId&&"c"!==e.languageId||!V&&new h.CppSettings(e.uri).clangFormatOnSave&&(V=!0,o.window.showInformationMessage('"C_Cpp.clang_format_formatOnSave" has been removed. Please use "editor.formatOnSave" instead.'))}function K(e){if(console.assert(void 0!==P,"client should be available before active editor is changed"),void 0===P)return;let t=o.window.activeTextEditor;!t||"cpp"!==t.document.languageId&&"c"!==t.document.languageId?x="":(x=e.document.uri.toString(),P.activeDocumentChanged(e.document),P.ActiveClient.selectionChanged(v.Range.create(e.selection.start,e.selection.end))),k.activeDocumentChanged()}function J(e){e.textEditor&&o.window.activeTextEditor&&e.textEditor.document.uri===o.window.activeTextEditor.document.uri&&("cpp"===e.textEditor.document.languageId||"c"===e.textEditor.document.languageId)&&(x!==e.textEditor.document.uri.toString()&&(x=e.textEditor.document.uri.toString(),P.activeDocumentChanged(e.textEditor.document),k.activeDocumentChanged()),P.ActiveClient.selectionChanged(v.Range.create(e.selections[0].start,e.selections[0].end)))}function G(e){P.forEach(t=>t.onDidChangeVisibleTextEditors(e))}function Z(){P.ActiveClient.onInterval()}function Y(e){return new Promise((t,n)=>{y.file({postfix:".vsix"},(s,a,l,d)=>r(this,void 0,void 0,function*(){if(s)return void n(new Error("Failed to create vsix file"));let r=o.workspace.getConfiguration(),l=r.inspect("http.proxySupport").globalValue;for(;;){try{yield c.downloadFileToDestination(e.downloadUrl,a)}catch(e){if(l!==r.inspect("http.proxySupport").globalValue)return r.update("http.proxySupport",l,!0),void n(new Error("Failed to download VSIX package with proxySupport off"));if("off"!==r.get("http.proxySupport")&&"off"!==l){r.update("http.proxySupport","off",!0);continue}return void n(new Error("Failed to download VSIX package"))}l!==r.inspect("http.proxySupport").globalValue&&(r.update("http.proxySupport",l,!0),u.logLanguageServerEvent("installVsix",{error:"Success with proxySupport off",success:"true"}));break}try{yield function(e){let t=new b.PackageVersion(o.version),n=new b.PackageVersion("1.32.3");return t.isGreaterThan(n)?o.commands.executeCommand("workbench.extensions.installExtension",o.Uri.file(e)):m.PlatformInformation.GetPlatformInformation().then(n=>{const r=function(e){if("win32"===e.platform){const e=i.basename(process.execPath);let t;t="Code - Insiders.exe"===e?"code-insiders.cmd":"Code - Exploration.exe"===e?"code-exploration.cmd":"code.cmd";const n=i.dirname(process.execPath);return i.join(n,"bin",t)}if("darwin"===e.platform)return i.join(process.execPath,"..","..","..","..","..","Resources","app","bin","code");{const e=i.basename(process.execPath);try{return C.execSync("which "+e).toString().trim()}catch(e){return}}}(n);if(!r)return Promise.reject(new Error("Failed to find VS Code script"));let o=new b.PackageVersion("1.27.2");return t.isGreaterThan(o)?new Promise((t,n)=>{let i;try{i=C.spawn(r,["--install-extension",e,"--force"]);const o=setTimeout(()=>{i.kill(),n(new Error("Failed to receive response from VS Code script process for installation within 30s."))},3e4);if(i.on("exit",e=>{clearInterval(o),0!==e?n(new Error(`VS Code script exited with error code ${e}`)):t()}),void 0===i.pid)throw new Error}catch(e){return void n(new Error("Failed to launch VS Code script process for installation"))}}):new Promise((t,n)=>{let i;try{if(void 0===(i=C.spawn(r,["--install-extension",e])).pid)throw new Error}catch(e){return void n(new Error("Failed to launch VS Code script process for installation"))}const o=setTimeout(()=>{i.kill(),n(new Error("Failed to receive response from VS Code script process for installation within 30s."))},3e4);let s=!1;i.stdout.on("data",()=>{s||(i.stdin.write("0\n"),s=!0,clearInterval(o),t())})})})}(a)}catch(e){return void n(e)}clearInterval(T);const d=`The C/C++ Extension has been updated to version ${e.name}. Please reload the window for the changes to take effect.`;c.promptReloadWindow(d),u.logLanguageServerEvent("installVsix",{success:"true"}),t()}))}).catch(e=>{console.error(`${L}${e.message}`),-1===e.message.indexOf("/")&&-1===e.message.indexOf("\\")||(e.message="Potential PII hidden"),u.logLanguageServerEvent("installVsix",{error:e.message,success:"false"})})}function Q(e){return r(this,void 0,void 0,function*(){let t=N;if(N=null,!t)try{t=yield w.getTargetBuildInfo(e)}catch(e){u.logLanguageServerEvent("installVsix",{error:e.message,success:"false"})}t&&(yield Y(t))})}let X=!1;function ee(){$();let e=o.window.activeTextEditor;e&&P.ActiveClient.requestNavigationList(e.document).then(e=>{k.showNavigationOptions(e)})}function te(){$(),P.ActiveClient.requestGoToDeclaration().then(()=>o.commands.executeCommand("editor.action.goToDeclaration"))}function ne(){$(),P.ActiveClient.requestGoToDeclaration().then(()=>o.commands.executeCommand("editor.action.previewDeclaration"))}function re(){$();let e=o.window.activeTextEditor;if(!e||!e.document)return;if("cpp"!==e.document.languageId&&"c"!==e.document.languageId)return;let t=P.ActiveClient.RootPath,n=e.document.fileName;t||(t=i.dirname(n)),P.ActiveClient.requestSwitchHeaderSource(t,n).then(e=>{o.workspace.openTextDocument(e).then(e=>{let t=!1;o.window.visibleTextEditors.forEach((n,r,i)=>{n.document!==e||t||(t=!0,o.window.showTextDocument(e,n.viewColumn))}),t||(void 0!==o.window.activeTextEditor?o.window.showTextDocument(e,o.window.activeTextEditor.viewColumn):o.window.showTextDocument(e))})})}function ie(){return 1===P.Count?Promise.resolve(P.ActiveClient):k.showWorkspaces(P.Names).then(e=>{if(""!==e){let t=P.get(e);if(t)return t;console.assert("client not found")}return Promise.reject("client not found")})}function oe(){$(),ie().then(e=>e.resetDatabase(),e=>{})}function se(){$(),xe()?P.ActiveClient.handleConfigurationSelectCommand():o.window.showInformationMessage("Open a folder first to select a configuration")}function ae(){$(),xe()?ie().then(e=>e.handleConfigurationProviderSelectCommand(),e=>{}):o.window.showInformationMessage("Open a folder first to select a configuration provider")}function ce(){$(),u.logLanguageServerEvent("SettingsCommand",{palette:"json"},null),xe()?ie().then(e=>e.handleConfigurationEditJSONCommand(),e=>{}):o.window.showInformationMessage("Open a folder first to edit configurations")}function ue(){$(),u.logLanguageServerEvent("SettingsCommand",{palette:"ui"},null),xe()?ie().then(e=>e.handleConfigurationEditUICommand(),e=>{}):o.window.showInformationMessage("Open a folder first to edit configurations")}function le(){$(),xe()?ie().then(e=>e.handleConfigurationEditCommand(),e=>{}):o.window.showInformationMessage("Open a folder first to edit configurations")}function de(e){xe()?P.ActiveClient.handleAddToIncludePathCommand(e):o.window.showInformationMessage("Open a folder first to add to includePath")}function he(){$(),new h.CppSettings(P.ActiveClient.RootUri).update("errorSquiggles","Enabled")}function pe(){$(),new h.CppSettings(P.ActiveClient.RootUri).update("errorSquiggles","Disabled")}function fe(){$(),new h.CppSettings(P.ActiveClient.RootUri).toggleSetting("intelliSenseEngineFallback","Enabled","Disabled")}function ge(){$();let e=new h.CppSettings(P.ActiveClient.RootUri);e.update("dimInactiveRegions",!e.dimInactiveRegions)}function me(){$(),c.showReleaseNotes()}function ve(){$(),ie().then(e=>e.pauseParsing(),e=>{})}function Ce(){$(),ie().then(e=>e.resumeParsing(),e=>{})}function ye(){$(),ie().then(e=>e.handleShowParsingCommands(),e=>{})}function we(){$(),u.logLanguageServerEvent("onTakeSurvey");let e=o.Uri.parse(`https://www.research.net/r/VBVV6C6?o=${s.platform()}&m=${o.env.machineId}`);o.commands.executeCommand("vscode.open",e)}function be(){return P.ActiveClient.getCurrentConfigName()}function Se(){$(),P.ActiveClient.logDiagnostics()}function _e(e){let t={};t.CrashingThreadCallStack=e,u.logLanguageServerEvent("MacCrash",t,null)}function Pe(e,t){if(e)return _e("readFile: "+e.code);let n=t.indexOf(" Crashed:");if(n<0)return _e("No crash start");n+=" Crashed:".length+1;let r=t.indexOf("Thread ",n);if(r<0&&(r=t.length-1),r<=n)return _e("No crash end");const i="Microsoft.VSCode.CPP.IntelliSense.Msvc.darwin\t",o="Microsoft.VSCode.CPP.Extension.darwin\t";if((t=(t=(t=t.substr(n,r-n)).replace(/0x................ /g,"")).replace(/0x1........ \+ 0/g,"")).includes(i))t=i+"\n"+(t=t.replace(new RegExp(i,"g"),""));else{if(!t.includes(o))return _e("No process");t=o+"\n"+(t=t.replace(new RegExp(o,"g"),""))}let s=t.split("\n");t="",s.forEach(e=>{e.includes(".dylib")||e.includes("???")||(e=(e=e.replace(/^\d+\s+/,"")).replace(/std::__1::/g,"std::"),t+=e+"\n")}),(t=t.trimRight()).length>8192&&(t=t.substr(0,8189)+"..."),_e(t)}function xe(){return void 0!==o.workspace.workspaceFolders&&o.workspace.workspaceFolders.length>0}function ke(){return O||U(),P.ActiveClient}t.registerCommands=function(){X||(X=!0,S.getTemporaryCommandRegistrarInstance().clearTempCommands(),D.push(o.commands.registerCommand("C_Cpp.Navigate",ee)),D.push(o.commands.registerCommand("C_Cpp.GoToDeclaration",te)),D.push(o.commands.registerCommand("C_Cpp.PeekDeclaration",ne)),D.push(o.commands.registerCommand("C_Cpp.SwitchHeaderSource",re)),D.push(o.commands.registerCommand("C_Cpp.ResetDatabase",oe)),D.push(o.commands.registerCommand("C_Cpp.ConfigurationSelect",se)),D.push(o.commands.registerCommand("C_Cpp.ConfigurationProviderSelect",ae)),D.push(o.commands.registerCommand("C_Cpp.ConfigurationEditJSON",ce)),D.push(o.commands.registerCommand("C_Cpp.ConfigurationEditUI",ue)),D.push(o.commands.registerCommand("C_Cpp.ConfigurationEdit",le)),D.push(o.commands.registerCommand("C_Cpp.AddToIncludePath",de)),D.push(o.commands.registerCommand("C_Cpp.EnableErrorSquiggles",he)),D.push(o.commands.registerCommand("C_Cpp.DisableErrorSquiggles",pe)),D.push(o.commands.registerCommand("C_Cpp.ToggleIncludeFallback",fe)),D.push(o.commands.registerCommand("C_Cpp.ToggleDimInactiveRegions",ge)),D.push(o.commands.registerCommand("C_Cpp.ShowReleaseNotes",me)),D.push(o.commands.registerCommand("C_Cpp.PauseParsing",ve)),D.push(o.commands.registerCommand("C_Cpp.ResumeParsing",Ce)),D.push(o.commands.registerCommand("C_Cpp.ShowParsingCommands",ye)),D.push(o.commands.registerCommand("C_Cpp.TakeSurvey",we)),D.push(o.commands.registerCommand("C_Cpp.LogDiagnostics",Se)),D.push(o.commands.registerCommand("cpptools.activeConfigName",be)),S.getTemporaryCommandRegistrarInstance().executeDelayedCommands())},t.deactivate=function(){return console.log("deactivating extension"),u.logLanguageServerEvent("LanguageServerShutdown"),clearInterval(E),clearInterval(T),D.forEach(e=>e.dispose()),R.forEach(e=>e.dispose()),k.dispose(),q&&q.dispose(),P.dispose()},t.isFolderOpen=xe,t.getClients=function(){return O||U(),P},t.getActiveClient=ke},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(28),i=n(23);class o{constructor(e,t){this._isReady=t<r.Version.v2,this.provider=e,e.extensionId&&t===r.Version.v0&&(t=r.Version.v1),this._version=t}get isReady(){return this._isReady}set isReady(e){this._isReady=e}get isValid(){let e=!!(this.provider.name&&this.provider.canProvideConfiguration&&this.provider.provideConfigurations);return e&&this._version>r.Version.v0&&(e=!(!this.provider.extensionId||!this.provider.dispose)),e&&this._version>r.Version.v1&&(e=!(!this.provider.canProvideBrowseConfiguration||!this.provider.provideBrowseConfiguration)),e}get version(){return this._version}get name(){return this.provider.name}get extensionId(){return this._version===r.Version.v0?this.provider.name:this.provider.extensionId}canProvideConfiguration(e,t){return this.provider.canProvideConfiguration(e,t)}provideConfigurations(e,t){return this.provider.provideConfigurations(e,t)}canProvideBrowseConfiguration(e){return this._version<r.Version.v2?Promise.resolve(!1):this.provider.canProvideBrowseConfiguration(e)}provideBrowseConfiguration(e){return console.assert(this._version>=r.Version.v2),this._version<r.Version.v2?Promise.resolve({browsePath:[]}):this.provider.provideBrowseConfiguration(e)}dispose(){this._version!==r.Version.v0&&this.provider.dispose()}}class s{constructor(){this.providers=new Map}logProblems(e,t){let n=[];e.name||n.push("'name'"),t===r.Version.v0||e.extensionId||n.push("'extensionId'"),e.canProvideConfiguration||n.push("'canProvideConfiguration'"),e.provideConfigurations||n.push("'canProvideConfiguration'"),t===r.Version.v0||e.dispose||n.push("'dispose'"),t>=r.Version.v2&&!e.canProvideBrowseConfiguration&&n.push("'canProvideBrowseConfiguration'"),t>=r.Version.v2&&!e.provideBrowseConfiguration&&n.push("'provideBrowseConfiguration'"),console.error(`CustomConfigurationProvider was not registered. The following properties are missing from the implementation: ${n.join(", ")}.`)}getId(e){return"string"==typeof e?e:e.extensionId?e.extensionId:e.name?e.name:(console.error(`invalid provider: ${e}`),"")}get size(){return this.providers.size}add(e,t){if("Disabled"===(new i.CppSettings).intelliSenseEngine)return console.warn("IntelliSense is disabled. Provider will not be registered."),!1;let n=new o(e,t);if(!n.isValid)return this.logProblems(e,t),!1;let s=this.providers.has(n.extensionId);if(s){s=this.providers.get(n.extensionId).version===r.Version.v0&&n.version===r.Version.v0}return s?console.error(`CustomConfigurationProvider '${n.extensionId}' has already been registered.`):this.providers.set(n.extensionId,n),!s}get(e){let t=this.getId(e);return this.providers.has(t)?this.providers.get(t):null}forEach(e){this.providers.forEach(t=>e(t))}remove(e){let t=this.getId(e);this.providers.has(t)?this.providers.delete(t):console.warn(`${t} is not registered`)}checkId(e){if(!e)return e;let t=[],n=!1;return this.forEach(i=>{i.extensionId===e?n=!0:i.name===e&&i.version!==r.Version.v0&&t.push(i)}),n?e:1===t.length?t[0].extensionId:(t.length>1&&console.warn("duplicate provider name found. Not upgrading."),e)}}t.CustomConfigurationProviderCollection=s;let a=new s;t.getCustomConfigProviders=function(){return a}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(0);class i{constructor(e,t){this.settings=r.workspace.getConfiguration(e,t||null)}get Section(){return this.settings}}t.CppSettings=class extends i{constructor(e){super("C_Cpp",e)}get clangFormatPath(){return super.Section.get("clang_format_path")}get clangFormatStyle(){return super.Section.get("clang_format_style")}get clangFormatFallbackStyle(){return super.Section.get("clang_format_fallbackStyle")}get clangFormatSortIncludes(){return super.Section.get("clang_format_sortIncludes")}get clangFormatOnSave(){return super.Section.get("clang_format_formatOnSave")}get formatting(){return super.Section.get("formatting")}get suggestSnippets(){return super.Section.get("suggestSnippets")}get intelliSenseEngine(){return super.Section.get("intelliSenseEngine")}get intelliSenseEngineFallback(){return super.Section.get("intelliSenseEngineFallback")}get intelliSenseCachePath(){return super.Section.get("intelliSenseCachePath")}get intelliSenseCacheSize(){return super.Section.get("intelliSenseCacheSize")}get errorSquiggles(){return super.Section.get("errorSquiggles")}get dimInactiveRegions(){return super.Section.get("dimInactiveRegions")}get inactiveRegionOpacity(){return super.Section.get("inactiveRegionOpacity")}get inactiveRegionForegroundColor(){return super.Section.get("inactiveRegionForegroundColor")}get inactiveRegionBackgroundColor(){return super.Section.get("inactiveRegionBackgroundColor")}get autoComplete(){return super.Section.get("autocomplete")}get loggingLevel(){return super.Section.get("loggingLevel")}get navigationLength(){return super.Section.get("navigation.length",60)}get autoAddFileAssociations(){return super.Section.get("autoAddFileAssociations")}get workspaceParsingPriority(){return super.Section.get("workspaceParsingPriority")}get workspaceSymbols(){return super.Section.get("workspaceSymbols")}get exclusionPolicy(){return super.Section.get("exclusionPolicy")}get commentContinuationPatterns(){return super.Section.get("commentContinuationPatterns")}get configurationWarnings(){return super.Section.get("configurationWarnings")}get preferredPathSeparator(){return super.Section.get("preferredPathSeparator")}get updateChannel(){return super.Section.get("updateChannel")}get defaultIncludePath(){return super.Section.get("default.includePath")}get defaultDefines(){return super.Section.get("default.defines")}get defaultMacFrameworkPath(){return super.Section.get("default.macFrameworkPath")}get defaultWindowsSdkVersion(){return super.Section.get("default.windowsSdkVersion")}get defaultCompileCommands(){return super.Section.get("default.compileCommands")}get defaultForcedInclude(){return super.Section.get("default.forcedInclude")}get defaultIntelliSenseMode(){return super.Section.get("default.intelliSenseMode")}get defaultCompilerPath(){return super.Section.get("default.compilerPath")}get defaultCStandard(){return super.Section.get("default.cStandard")}get defaultCppStandard(){return super.Section.get("default.cppStandard")}get defaultConfigurationProvider(){return super.Section.get("default.configurationProvider")}get defaultBrowsePath(){return super.Section.get("default.browse.path")}get defaultDatabaseFilename(){return super.Section.get("default.browse.databaseFilename")}get defaultLimitSymbolsToIncludedHeaders(){return super.Section.get("default.browse.limitSymbolsToIncludedHeaders")}get defaultSystemIncludePath(){return super.Section.get("default.systemIncludePath")}get defaultEnableConfigurationSquiggles(){return super.Section.get("default.enableConfigurationSquiggles")}toggleSetting(e,t,n){let i=super.Section.get(e);super.Section.update(e,i===t?n:t,r.workspace.workspaceFolders?r.ConfigurationTarget.WorkspaceFolder:r.ConfigurationTarget.Global)}update(e,t){super.Section.update(e,t)}};t.OtherSettings=class{constructor(e){e||(e=null),this.resource=e}get editorTabSize(){return r.workspace.getConfiguration("editor",this.resource).get("tabSize")}get filesAssociations(){return r.workspace.getConfiguration("files",null).get("associations")}get filesExclude(){return r.workspace.getConfiguration("files",this.resource).get("exclude")}get searchExclude(){return r.workspace.getConfiguration("search",this.resource).get("exclude")}get settingsEditor(){return r.workspace.getConfiguration("workbench.settings").get("editor")}set filesAssociations(e){r.workspace.getConfiguration("files",null).update("associations",e,r.ConfigurationTarget.Workspace)}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(6),i=n(36),o=function(){function e(){}return e.getCurrentContext=function(){return e.enabled?Zone.current.get("context"):null},e.generateContextObject=function(e,t,n,r){return t=t||e,this.enabled?{operation:{name:n,id:e,parentId:t},customProperties:new s(r)}:null},e.runWithContext=function(t,n){e.enabled?Zone.current.fork({name:"AI-"+(t&&t.operation.parentId||"Unknown"),properties:{context:t}}).run(n):n()},e.wrapCallback=function(t){return e.enabled?Zone.current.wrap(t,"User-wrapped method"):t},e.enable=function(){if(!this.enabled)if(this.isNodeVersionCompatible()){if(!e.hasEverEnabled){this.hasEverEnabled=!0;try{"undefined"==typeof Zone&&n(91)}catch(e){r.warn("Failed to require zone.js")}i.registerContextPreservation(function(e){return Zone.current.wrap(e,"AI-ContextPreservation")}),this.patchError(),this.patchTimers(["setTimeout","setInterval"])}this.enabled=!0}else this.enabled=!1},e.disable=function(){this.enabled=!1},e.isNodeVersionCompatible=function(){var e=process.versions.node.split(".");return parseInt(e[0])>3||parseInt(e[0])>2&&parseInt(e[1])>2},e.patchTimers=function(e){e.forEach(function(e){var t=global[e];global[e]=function(){var e=t.apply(this,arguments);return e.toString=function(){return this.data&&void 0!==this.data.handleId?this.data.handleId.toString():Object.prototype.toString.call(this)},e}})},e.patchError=function(){var e=global.Error;function t(){if(!(this instanceof t))return t.apply(Object.create(t.prototype),arguments);var n=e.stackRewrite;if(e.prepareStackTrace){e.stackRewrite=!1;var r=e.prepareStackTrace;e.prepareStackTrace=function(e,t){for(var n=!1,i=0;i<t.length;i++){var o=t[i].getFileName();if(o)if(-1===o.indexOf("AutoCollection/CorrelationContextManager")&&-1===o.indexOf("AutoCollection\\CorrelationContextManager")){if(n)break}else n=!0}return i=Math.max(0,i-1),n&&t.splice(0,i),r(e,t)}}if(e.apply(this,arguments),e.stackRewrite=n,this.stack&&"string"==typeof this.stack){var i=this.stack.split("\n");i.length>3&&(0===i[2].trim().indexOf("at Error.AppInsightsAsyncCorrelatedErrorWrapper")?i.splice(2,1):0===i[1].trim().indexOf("at AppInsightsAsyncCorrelatedErrorWrapper.ZoneAwareError")&&0===i[2].trim().indexOf("at new AppInsightsAsyncCorrelatedErrorWrapper")&&i.splice(1,2)),this.stack=i.map(function(e){var t=e.indexOf(") [");return t>-1&&(e=e.substr(0,t+1)),e}).join("\n")}for(var o=Object.getOwnPropertyNames(this).concat(Object.keys(this)),s=0;s<o.length;s++){var a=o[s],c=Zone.__symbol__(a);Object.defineProperty(this,a,{enumerable:!1}),Object.defineProperty(this,c,{enumerable:!1,writable:!0})}return this}t.prototype=e.prototype;for(var n=Object.getOwnPropertyNames(e),r=0;r<n.length;r++){var i=n[r];t[i]||Object.defineProperty(t,i,Object.getOwnPropertyDescriptor(e,i))}global.Error=t},e.enabled=!1,e.hasEverEnabled=!1,e}();t.CorrelationContextManager=o;var s=function(){function e(e){this.props=[],this.addHeaderData(e)}return e.prototype.addHeaderData=function(e){var t=e?e.split(", "):[];this.props=t.map(function(e){var t=e.split("=");return{key:t[0],value:t[1]}}).concat(this.props)},e.prototype.serializeToHeader=function(){return this.props.map(function(e){return e.key+"="+e.value}).join(", ")},e.prototype.getProperty=function(e){for(var t=0;t<this.props.length;++t){var n=this.props[t];if(n.key===e)return n.value}},e.prototype.setProperty=function(t,n){if(e.bannedCharacters.test(t)||e.bannedCharacters.test(n))r.warn("Correlation context property keys and values must not contain ',' or '='. setProperty was called with key: "+t+" and value: "+n);else{for(var i=0;i<this.props.length;++i){var o=this.props[i];if(o.key===t)return void(o.value=n)}this.props.push({key:t,value:n})}},e.bannedCharacters=/[,=]/,e}()},function(e,t){e.exports=require("stream")},function(e,t,n){"use strict";e.exports={requestContextHeader:"request-context",requestContextSourceKey:"appId",requestContextTargetKey:"appId",requestIdHeader:"request-id",parentIdHeader:"x-ms-request-id",rootIdHeader:"x-ms-request-root-id",correlationContextHeader:"correlation-context"}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(0),i=n(3);let o,s,a;t.subscribeToAllLoggers=function(e){o=e};class c{constructor(e){this.writer=e}append(e){this.writer(e),o&&o(e)}appendLine(e){this.writer(e+i.EOL),o&&o(e+i.EOL)}showInformationMessage(e,t){return this.appendLine(e),r.window.showInformationMessage(e,...t)}showWarningMessage(e,t){return this.appendLine(e),r.window.showWarningMessage(e,...t)}showErrorMessage(e,t){return this.appendLine(e),r.window.showErrorMessage(e,...t)}}function u(){return void 0===s&&(s=r.window.createOutputChannel("C/C++")),s}t.Logger=c,t.getOutputChannel=u,t.showOutputChannel=function(){u().show()},t.getOutputChannelLogger=function(){return a||(a=new c(e=>u().append(e))),a}},function(e,t,n){"use strict";var r=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))(function(i,o){function s(e){try{c(r.next(e))}catch(e){o(e)}}function a(e){try{c(r.throw(e))}catch(e){o(e)}}function c(e){e.done?i(e.value):new n(function(t){t(e.value)}).then(s,a)}c((r=r.apply(e,t||[])).next())})};Object.defineProperty(t,"__esModule",{value:!0});const i=n(0);var o;!function(e){e[e.v0=0]="v0",e[e.v1=1]="v1",e[e.v2=2]="v2",e[e.latest=2]="latest"}(o=t.Version||(t.Version={})),t.getCppToolsApi=function(e){return r(this,void 0,void 0,function*(){let t,n,r=i.extensions.getExtension("ms-vscode.cpptools");if(r)if(function(e){return void 0!==e.getApi}(t=r.isActive?r.exports:yield r.activate())){try{n=t.getApi(e)}catch(e){let r=e;r.message&&r.message.startsWith("Invalid version")&&(n=t.getApi(o.v1))}e!==o.v1&&(n.getVersion?e!==n.getVersion()&&console.warn(`vscode-cpptools-api version ${e} requested, but is not available in the current version of the cpptools extension. Using version ${n.getVersion()} instead.`):console.warn(`vscode-cpptools-api version ${e} requested, but is not available in the current version of the cpptools extension. Using version 1 instead.`))}else n=t,e!==o.v0&&console.warn(`vscode-cpptools-api version ${e} requested, but is not available in version 0.17.5 of the cpptools extension. Using version 0 instead.`);else console.warn("C/C++ extension is not installed");return n})}},function(e,t,n){"use strict";function r(e){return"string"==typeof e||e instanceof String}function i(e){return Array.isArray(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.boolean=function(e){return!0===e||!1===e},t.string=r,t.number=function(e){return"number"==typeof e||e instanceof Number},t.error=function(e){return e instanceof Error},t.func=function(e){return"function"==typeof e},t.array=i,t.stringArray=function(e){return i(e)&&e.every(e=>r(e))}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(4),i=n(1);class o{constructor(e,t,n){this.key=e,this.defaultvalue=t,this.state=n,this.curvalue=t}get Value(){return this.state?this.state.get(this.key,this.defaultvalue):this.curvalue}set Value(e){this.state&&this.state.update(this.key,e),this.curvalue=e}get DefaultValue(){return this.defaultvalue}}t.PersistentState=class extends o{constructor(e,t){super(e,t,r.extensionContext?r.extensionContext.globalState:null)}};class s extends o{constructor(e,t){super(e,t,r.extensionContext?r.extensionContext.workspaceState:null)}}t.PersistentWorkspaceState=s;t.PersistentFolderState=class extends s{constructor(e,t,n){super(e+(n?`-${i.basename(n)}`:"-untitled"),t)}}},function(e,t){e.exports=require("assert")},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),function(e){e.create=function(e){return{dispose:e}}}(t.Disposable||(t.Disposable={})),function(e){const t={dispose(){}};e.None=function(){return t}}(t.Event||(t.Event={}));class r{add(e,t=null,n){this._callbacks||(this._callbacks=[],this._contexts=[]),this._callbacks.push(e),this._contexts.push(t),Array.isArray(n)&&n.push({dispose:()=>this.remove(e,t)})}remove(e,t=null){if(this._callbacks){for(var n=!1,r=0,i=this._callbacks.length;r<i;r++)if(this._callbacks[r]===e){if(this._contexts[r]===t)return this._callbacks.splice(r,1),void this._contexts.splice(r,1);n=!0}if(n)throw new Error("When adding a listener with a context, you should remove it with the same context")}}invoke(...e){if(!this._callbacks)return[];for(var t=[],n=this._callbacks.slice(0),r=this._contexts.slice(0),i=0,o=n.length;i<o;i++)try{t.push(n[i].apply(r[i],e))}catch(e){console.error(e)}return t}isEmpty(){return!this._callbacks||0===this._callbacks.length}dispose(){this._callbacks=void 0,this._contexts=void 0}}class i{constructor(e){this._options=e}get event(){return this._event||(this._event=((e,t,n)=>{let o;return this._callbacks||(this._callbacks=new r),this._options&&this._options.onFirstListenerAdd&&this._callbacks.isEmpty()&&this._options.onFirstListenerAdd(this),this._callbacks.add(e,t),o={dispose:()=>{this._callbacks.remove(e,t),o.dispose=i._noop,this._options&&this._options.onLastListenerRemove&&this._callbacks.isEmpty()&&this._options.onLastListenerRemove(this)}},Array.isArray(n)&&n.push(o),o})),this._event}fire(e){this._callbacks&&this._callbacks.invoke.call(this._callbacks,e)}dispose(){this._callbacks&&(this._callbacks.dispose(),this._callbacks=void 0)}}i._noop=function(){},t.Emitter=i},function(e,t,n){e.exports=f,f.Minimatch=g;var r={sep:"/"};try{r=n(1)}catch(e){}var i=f.GLOBSTAR=g.GLOBSTAR={},o=n(181),s={"!":{open:"(?:(?!(?:",close:"))[^/]*?)"},"?":{open:"(?:",close:")?"},"+":{open:"(?:",close:")+"},"*":{open:"(?:",close:")*"},"@":{open:"(?:",close:")"}},a="[^/]",c=a+"*?",u="(?:(?!(?:\\/|^)(?:\\.{1,2})($|\\/)).)*?",l="(?:(?!(?:\\/|^)\\.).)*?",d="().*{}+?[]^$\\!".split("").reduce(function(e,t){return e[t]=!0,e},{});var h=/\/+/;function p(e,t){e=e||{},t=t||{};var n={};return Object.keys(t).forEach(function(e){n[e]=t[e]}),Object.keys(e).forEach(function(t){n[t]=e[t]}),n}function f(e,t,n){if("string"!=typeof t)throw new TypeError("glob pattern string required");return n||(n={}),!(!n.nocomment&&"#"===t.charAt(0))&&(""===t.trim()?""===e:new g(t,n).match(e))}function g(e,t){if(!(this instanceof g))return new g(e,t);if("string"!=typeof e)throw new TypeError("glob pattern string required");t||(t={}),e=e.trim(),"/"!==r.sep&&(e=e.split(r.sep).join("/")),this.options=t,this.set=[],this.pattern=e,this.regexp=null,this.negate=!1,this.comment=!1,this.empty=!1,this.make()}function m(e,t){if(t||(t=this instanceof g?this.options:{}),void 0===(e=void 0===e?this.pattern:e))throw new TypeError("undefined pattern");return t.nobrace||!e.match(/\{.*\}/)?[e]:o(e)}f.filter=function(e,t){return t=t||{},function(n,r,i){return f(n,e,t)}},f.defaults=function(e){if(!e||!Object.keys(e).length)return f;var t=f,n=function(n,r,i){return t.minimatch(n,r,p(e,i))};return n.Minimatch=function(n,r){return new t.Minimatch(n,p(e,r))},n},g.defaults=function(e){return e&&Object.keys(e).length?f.defaults(e).Minimatch:g},g.prototype.debug=function(){},g.prototype.make=function(){if(this._made)return;var e=this.pattern,t=this.options;if(!t.nocomment&&"#"===e.charAt(0))return void(this.comment=!0);if(!e)return void(this.empty=!0);this.parseNegate();var n=this.globSet=this.braceExpand();t.debug&&(this.debug=console.error);this.debug(this.pattern,n),n=this.globParts=n.map(function(e){return e.split(h)}),this.debug(this.pattern,n),n=n.map(function(e,t,n){return e.map(this.parse,this)},this),this.debug(this.pattern,n),n=n.filter(function(e){return-1===e.indexOf(!1)}),this.debug(this.pattern,n),this.set=n},g.prototype.parseNegate=function(){var e=this.pattern,t=!1,n=this.options,r=0;if(n.nonegate)return;for(var i=0,o=e.length;i<o&&"!"===e.charAt(i);i++)t=!t,r++;r&&(this.pattern=e.substr(r));this.negate=t},f.braceExpand=function(e,t){return m(e,t)},g.prototype.braceExpand=m,g.prototype.parse=function(e,t){if(e.length>65536)throw new TypeError("pattern is too long");var n=this.options;if(!n.noglobstar&&"**"===e)return i;if(""===e)return"";var r,o="",u=!!n.nocase,l=!1,h=[],p=[],f=!1,g=-1,m=-1,C="."===e.charAt(0)?"":n.dot?"(?!(?:^|\\/)\\.{1,2}(?:$|\\/))":"(?!\\.)",y=this;function w(){if(r){switch(r){case"*":o+=c,u=!0;break;case"?":o+=a,u=!0;break;default:o+="\\"+r}y.debug("clearStateChar %j %j",r,o),r=!1}}for(var b,S=0,_=e.length;S<_&&(b=e.charAt(S));S++)if(this.debug("%s\t%s %s %j",e,S,o,b),l&&d[b])o+="\\"+b,l=!1;else switch(b){case"/":return!1;case"\\":w(),l=!0;continue;case"?":case"*":case"+":case"@":case"!":if(this.debug("%s\t%s %s %j <-- stateChar",e,S,o,b),f){this.debug("  in class"),"!"===b&&S===m+1&&(b="^"),o+=b;continue}y.debug("call clearStateChar %j",r),w(),r=b,n.noext&&w();continue;case"(":if(f){o+="(";continue}if(!r){o+="\\(";continue}h.push({type:r,start:S-1,reStart:o.length,open:s[r].open,close:s[r].close}),o+="!"===r?"(?:(?!(?:":"(?:",this.debug("plType %j %j",r,o),r=!1;continue;case")":if(f||!h.length){o+="\\)";continue}w(),u=!0;var P=h.pop();o+=P.close,"!"===P.type&&p.push(P),P.reEnd=o.length;continue;case"|":if(f||!h.length||l){o+="\\|",l=!1;continue}w(),o+="|";continue;case"[":if(w(),f){o+="\\"+b;continue}f=!0,m=S,g=o.length,o+=b;continue;case"]":if(S===m+1||!f){o+="\\"+b,l=!1;continue}if(f){var x=e.substring(m+1,S);try{RegExp("["+x+"]")}catch(e){var k=this.parse(x,v);o=o.substr(0,g)+"\\["+k[0]+"\\]",u=u||k[1],f=!1;continue}}u=!0,f=!1,o+=b;continue;default:w(),l?l=!1:!d[b]||"^"===b&&f||(o+="\\"),o+=b}f&&(x=e.substr(m+1),k=this.parse(x,v),o=o.substr(0,g)+"\\["+k[0],u=u||k[1]);for(P=h.pop();P;P=h.pop()){var E=o.slice(P.reStart+P.open.length);this.debug("setting tail",o,P),E=E.replace(/((?:\\{2}){0,64})(\\?)\|/g,function(e,t,n){return n||(n="\\"),t+t+n+"|"}),this.debug("tail=%j\n   %s",E,E,P,o);var T="*"===P.type?c:"?"===P.type?a:"\\"+P.type;u=!0,o=o.slice(0,P.reStart)+T+"\\("+E}w(),l&&(o+="\\\\");var I=!1;switch(o.charAt(0)){case".":case"[":case"(":I=!0}for(var D=p.length-1;D>-1;D--){var R=p[D],O=o.slice(0,R.reStart),A=o.slice(R.reStart,R.reEnd-8),F=o.slice(R.reEnd-8,R.reEnd),N=o.slice(R.reEnd);F+=N;var M=O.split("(").length-1,L=N;for(S=0;S<M;S++)L=L.replace(/\)[+*?]?/,"");var q="";""===(N=L)&&t!==v&&(q="$");var j=O+A+N+q+F;o=j}""!==o&&u&&(o="(?=.)"+o);I&&(o=C+o);if(t===v)return[o,u];if(!u)return e.replace(/\\(.)/g,"$1");var W=n.nocase?"i":"";try{var $=new RegExp("^"+o+"$",W)}catch(e){return new RegExp("$.")}return $._glob=e,$._src=o,$};var v={};f.makeRe=function(e,t){return new g(e,t||{}).makeRe()},g.prototype.makeRe=function(){if(this.regexp||!1===this.regexp)return this.regexp;var e=this.set;if(!e.length)return this.regexp=!1,this.regexp;var t=this.options,n=t.noglobstar?c:t.dot?u:l,r=t.nocase?"i":"",o=e.map(function(e){return e.map(function(e){return e===i?n:"string"==typeof e?e.replace(/[-[\]{}()*+?.,\\^$|#\s]/g,"\\$&"):e._src}).join("\\/")}).join("|");o="^(?:"+o+")$",this.negate&&(o="^(?!"+o+").*$");try{this.regexp=new RegExp(o,r)}catch(e){this.regexp=!1}return this.regexp},f.match=function(e,t,n){var r=new g(t,n=n||{});return e=e.filter(function(e){return r.match(e)}),r.options.nonull&&!e.length&&e.push(t),e},g.prototype.match=function(e,t){if(this.debug("match",e,this.pattern),this.comment)return!1;if(this.empty)return""===e;if("/"===e&&t)return!0;var n=this.options;"/"!==r.sep&&(e=e.split(r.sep).join("/"));e=e.split(h),this.debug(this.pattern,"split",e);var i,o,s=this.set;for(this.debug(this.pattern,"set",s),o=e.length-1;o>=0&&!(i=e[o]);o--);for(o=0;o<s.length;o++){var a=s[o],c=e;n.matchBase&&1===a.length&&(c=[i]);var u=this.matchOne(c,a,t);if(u)return!!n.flipNegate||!this.negate}return!n.flipNegate&&this.negate},g.prototype.matchOne=function(e,t,n){var r=this.options;this.debug("matchOne",{this:this,file:e,pattern:t}),this.debug("matchOne",e.length,t.length);for(var o=0,s=0,a=e.length,c=t.length;o<a&&s<c;o++,s++){this.debug("matchOne loop");var u,l=t[s],d=e[o];if(this.debug(t,l,d),!1===l)return!1;if(l===i){this.debug("GLOBSTAR",[t,l,d]);var h=o,p=s+1;if(p===c){for(this.debug("** at the end");o<a;o++)if("."===e[o]||".."===e[o]||!r.dot&&"."===e[o].charAt(0))return!1;return!0}for(;h<a;){var f=e[h];if(this.debug("\nglobstar while",e,h,t,p,f),this.matchOne(e.slice(h),t.slice(p),n))return this.debug("globstar found match!",h,a,f),!0;if("."===f||".."===f||!r.dot&&"."===f.charAt(0)){this.debug("dot detected!",e,h,t,p);break}this.debug("globstar swallow a segment, and continue"),h++}return!(!n||(this.debug("\n>>> no match, partial?",e,h,t,p),h!==a))}if("string"==typeof l?(u=r.nocase?d.toLowerCase()===l.toLowerCase():d===l,this.debug("string match",l,d,u)):(u=d.match(l),this.debug("pattern match",l,d,u)),!u)return!1}if(o===a&&s===c)return!0;if(o===a)return n;if(s===c)return o===a-1&&""===e[o];throw new Error("wtf?")}},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0});const r=n(3),i=n(4),o=n(186);class s{constructor(e,t,n){this.platform=e,this.architecture=t,this.distribution=n}static GetPlatformInformation(){let e,t=r.platform(),n=Promise.resolve(null);switch(t){case"win32":e=s.GetWindowsArchitecture();break;case"linux":e=s.GetUnixArchitecture(),n=o.LinuxDistribution.GetDistroInformation();break;case"darwin":e=s.GetUnixArchitecture()}return Promise.all([e,n]).then(([e,n])=>new s(t,e,n))}static GetUnknownArchitecture(){return"Unknown"}static GetWindowsArchitecture(){return i.execChildProcess("wmic os get osarchitecture",i.extensionPath).then(e=>{if(e){let t=e.split(r.EOL);if(t.length>=2){let e=t[1].trim();if(e.indexOf("64")>=0)return"x86_64";if(e.indexOf("32")>=0)return"x86"}}return s.GetUnknownArchitecture()}).catch(e=>s.GetUnknownArchitecture())}static GetUnixArchitecture(){return i.execChildProcess("uname -m",i.packageJson.extensionFolderPath).then(e=>e?e.trim():null)}}t.PlatformInformation=s},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(4),i=n(8),o=n(30),s=n(2),a=100,c="CPP.UserBucket",u="cpptools.json";class l{constructor(){this.intelliSenseEngineDefault=new o.PersistentState("ABTest.1",100),this.recursiveIncludesDefault=new o.PersistentState("ABTest.2",100),this.gotoDefIntelliSenseDefault=new o.PersistentState("ABTest.3",100),this.settings={defaultIntelliSenseEngine:this.intelliSenseEngineDefault.Value,recursiveIncludes:this.recursiveIncludesDefault.Value,gotoDefIntelliSense:this.gotoDefIntelliSenseDefault.Value},this.bucket=new o.PersistentState(c,-1),-1===this.bucket.Value&&(this.bucket.Value=Math.floor(Math.random()*a)+1),this.updateSettings(),this.downloadCpptoolsJsonPkgAsync(),setInterval(()=>{this.downloadCpptoolsJsonPkgAsync()},18e5)}get UseDefaultIntelliSenseEngine(){return!r.isNumber(this.settings.defaultIntelliSenseEngine)||this.settings.defaultIntelliSenseEngine>=this.bucket.Value}get UseRecursiveIncludes(){return!r.isNumber(this.settings.recursiveIncludes)||this.settings.recursiveIncludes>=this.bucket.Value}get UseGoToDefIntelliSense(){return!r.isNumber(this.settings.gotoDefIntelliSense)||this.settings.gotoDefIntelliSense>=this.bucket.Value}updateSettings(){const e=r.getExtensionFilePath(u);try{if(s.existsSync(e)){const t=s.readFileSync(e).toString();let n=JSON.parse(t);this.intelliSenseEngineDefault.Value=r.isNumber(n.defaultIntelliSenseEngine)?n.defaultIntelliSenseEngine:this.intelliSenseEngineDefault.DefaultValue,this.recursiveIncludesDefault.Value=r.isNumber(n.recursiveIncludes)?n.recursiveIncludes:this.recursiveIncludesDefault.DefaultValue,this.gotoDefIntelliSenseDefault.Value=r.isNumber(n.gotoDefIntelliSense)?n.gotoDefIntelliSense:this.gotoDefIntelliSenseDefault.DefaultValue,this.settings={defaultIntelliSenseEngine:this.intelliSenseEngineDefault.Value,recursiveIncludes:this.recursiveIncludesDefault.Value,gotoDefIntelliSense:this.gotoDefIntelliSenseDefault.Value}}}catch(e){}}downloadCpptoolsJsonPkgAsync(){let e=!1,t={};const n=r.getExtensionFilePath(u);return r.downloadFileToDestination("https://go.microsoft.com/fwlink/?linkid=2026205",n).catch(t=>{e=!0}).then(()=>{this.updateSettings(),t.success=(!e).toString(),i.logDebuggerEvent("cpptoolsJsonDownload",t)})}}let d;t.ABTestSettings=l,t.getABTestSettings=function(){return d||(d=new l),d}},function(e,t,n){"use strict";if(Object.defineProperty(t,"__esModule",{value:!0}),t.IsInitialized=!process.env.APPLICATION_INSIGHTS_NO_DIAGNOSTIC_CHANNEL,t.IsInitialized){var r=n(76),i=(process.env.APPLICATION_INSIGHTS_NO_PATCH_MODULES||"").split(","),o={bunyan:r.bunyan,console:r.console,mongodb:r.mongodb,mongodbCore:r.mongodbCore,mysql:r.mysql,redis:r.redis,pg:r.pg,pgPool:r.pgPool,winston:r.winston};for(var s in o)-1===i.indexOf(s)&&o[s].enable()}t.registerContextPreservation=function(e){t.IsInitialized&&n(5).channel.addContextPreservation(e)}},function(e,t){e.exports=require("crypto")},function(e,t,n){"use strict";var r=n(39),i=n(20),o=n(6),s=n(13),a=n(26),c=n(117),u=n(24),l=n(36),d=function(){function e(t){if(e.INSTANCE)throw new Error("Client request tracking should be configured from the applicationInsights object");e.INSTANCE=this,this._client=t}return e.prototype.enable=function(e){this._isEnabled=e,this._isEnabled&&!this._isInitialized&&this._initialize(),l.IsInitialized&&(n(118).enable(e,this._client),n(119).enable(e,this._client),n(120).enable(e,this._client),n(121).enable(e,this._client))},e.prototype.isInitialized=function(){return this._isInitialized},e.prototype._initialize=function(){var t=this;this._isInitialized=!0;r.get;var n=r.request,o=i.request,s=function(n,r){var i=!r[e.disableCollectionRequestOption]&&!n[e.alreadyAutoCollectedFlag];n[e.alreadyAutoCollectedFlag]=!0,n&&r&&i&&e.trackRequest(t._client,{options:r,request:n})};r.request=function(e){for(var t=[],i=1;i<arguments.length;i++)t[i-1]=arguments[i];var o=n.call.apply(n,[r,e].concat(t));return s(o,e),o},i.request=function(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];var r=o.call.apply(o,[i,e].concat(t));return s(r,e),r},r.get=function(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];var i,o=(i=r.request).call.apply(i,[r,e].concat(t));return o.end(),o},i.get=function(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];var r,o=(r=i.request).call.apply(r,[i,e].concat(t));return o.end(),o}},e.trackRequest=function(t,n){if(n.options&&n.request&&t){var r=new c(n.options,n.request),i=u.CorrelationContextManager.getCurrentContext(),l=i&&i.operation&&i.operation.parentId+e.requestNumber+++".";if(s.canIncludeCorrelationHeader(t,r.getUrl())&&n.request.getHeader&&n.request.setHeader){if(t.config&&t.config.correlationId){var d=n.request.getHeader(a.requestContextHeader);if(d){var h=d.split(","),p=a.requestContextSourceKey+"=";h.some(function(e){return e.substring(0,p.length)===p})||n.request.setHeader(a.requestContextHeader,d+","+a.requestContextSourceKey+"="+t.config.correlationId)}else n.request.setHeader(a.requestContextHeader,a.requestContextSourceKey+"="+t.config.correlationId)}if(i&&i.operation){n.request.setHeader(a.requestIdHeader,l),n.request.setHeader(a.parentIdHeader,i.operation.id),n.request.setHeader(a.rootIdHeader,l);var f=i.customProperties.serializeToHeader();f&&n.request.setHeader(a.correlationContextHeader,f)}}n.request.on&&(n.request.on("response",function(e){r.onResponse(e);var i=r.getDependencyTelemetry(n,l);i.contextObjects=i.contextObjects||{},i.contextObjects["http.RequestOptions"]=n.options,i.contextObjects["http.ClientRequest"]=n.request,i.contextObjects["http.ClientResponse"]=e,t.trackDependency(i)}),n.request.on("error",function(e){r.onError(e);var i=r.getDependencyTelemetry(n,l);i.contextObjects=i.contextObjects||{},i.contextObjects["http.RequestOptions"]=n.options,i.contextObjects["http.ClientRequest"]=n.request,i.contextObjects.Error=e,t.trackDependency(i)}))}else o.info("AutoCollectHttpDependencies.trackRequest was called with invalid parameters: ",!n.options,!n.request,!t)},e.prototype.dispose=function(){e.INSTANCE=null,this.enable(!1),this._isInitialized=!1},e.disableCollectionRequestOption="disableAppInsightsAutoCollection",e.requestNumber=1,e.alreadyAutoCollectedFlag="_appInsightsAutoCollected",e}();e.exports=d},function(e,t){e.exports=require("http")},function(e,t,n){"use strict";var r=n(13),i=n(6),o=function(){function e(){}return e.queryCorrelationId=function(t,n){var o=t.profileQueryEndpoint+"/api/profiles/"+t.instrumentationKey+"/appId";if(e.completedLookups.hasOwnProperty(o))n(e.completedLookups[o]);else if(e.pendingLookups[o])e.pendingLookups[o].push(n);else{e.pendingLookups[o]=[n];var s=function(){if(e.pendingLookups[o]){var n={method:"GET",disableAppInsightsAutoCollection:!0};i.info(e.TAG,n);var a=r.makeRequest(t,o,n,function(n){if(200===n.statusCode){var r="";n.setEncoding("utf-8"),n.on("data",function(e){r+=e}),n.on("end",function(){i.info(e.TAG,r);var t=e.correlationIdPrefix+r;e.completedLookups[o]=t,e.pendingLookups[o]&&e.pendingLookups[o].forEach(function(e){return e(t)}),delete e.pendingLookups[o]})}else n.statusCode>=400&&n.statusCode<500?(e.completedLookups[o]=void 0,delete e.pendingLookups[o]):setTimeout(s,t.correlationIdRetryIntervalMs)});a&&(a.on("error",function(t){i.warn(e.TAG,t)}),a.end())}};setTimeout(s,0)}},e.cancelCorrelationIdQuery=function(t,n){var r=t.profileQueryEndpoint+"/api/profiles/"+t.instrumentationKey+"/appId",i=e.pendingLookups[r];i&&(e.pendingLookups[r]=i.filter(function(e){return e!=n}),0==e.pendingLookups[r].length&&delete e.pendingLookups[r])},e.generateRequestId=function(t){if(t){"."!==(t="|"==t[0]?t:"|"+t)[t.length-1]&&(t+=".");var n=(e.currentRootId++).toString(16);return e.appendSuffix(t,n,"_")}return e.generateRootId()},e.getRootId=function(e){var t=e.indexOf(".");t<0&&(t=e.length);var n="|"===e[0]?1:0;return e.substring(n,t)},e.generateRootId=function(){return"|"+r.w3cTraceId()+"."},e.appendSuffix=function(t,n,i){if(t.length+n.length<e.requestIdMaxLength)return t+n+i;var o=e.requestIdMaxLength-9;if(t.length>o)for(;o>1;--o){var s=t[o-1];if("."===s||"_"===s)break}if(o<=1)return e.generateRootId();for(n=r.randomu32().toString(16);n.length<8;)n="0"+n;return t.substring(0,o)+n+"#"},e.TAG="CorrelationIdManager",e.correlationIdPrefix="cid-v1:",e.pendingLookups={},e.completedLookups={},e.requestIdMaxLength=1024,e.currentRootId=r.randomu32(),e}();e.exports=o},function(e,t){e.exports=require("net")},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(32),i=n(29);let o=8192,s=Buffer.from("\r","ascii")[0],a=Buffer.from("\n","ascii")[0],c="\r\n";class u{constructor(e="utf8"){this.encoding=e,this.index=0,this.buffer=Buffer.allocUnsafe(o)}append(e){var t=e;if("string"==typeof e){var n=e,r=Buffer.byteLength(n,this.encoding);(t=Buffer.allocUnsafe(r)).write(n,0,r,this.encoding)}if(this.buffer.length-this.index>=t.length)t.copy(this.buffer,this.index,0,t.length);else{var i=(Math.ceil((this.index+t.length)/o)+1)*o;0===this.index?(this.buffer=Buffer.allocUnsafe(i),t.copy(this.buffer,0,0,t.length)):this.buffer=Buffer.concat([this.buffer.slice(0,this.index),t],i)}this.index+=t.length}tryReadHeaders(){let e=void 0,t=0;for(;t+3<this.index&&(this.buffer[t]!==s||this.buffer[t+1]!==a||this.buffer[t+2]!==s||this.buffer[t+3]!==a);)t++;if(t+3>=this.index)return e;e=Object.create(null),this.buffer.toString("ascii",0,t).split(c).forEach(t=>{let n=t.indexOf(":");if(-1===n)throw new Error("Message header must separate key and value using :");let r=t.substr(0,n),i=t.substr(n+1).trim();e[r]=i});let n=t+4;return this.buffer=this.buffer.slice(n),this.index=this.index-n,e}tryReadContent(e){if(this.index<e)return null;let t=this.buffer.toString(this.encoding,0,e),n=e;return this.buffer.copy(this.buffer,0,n),this.index=this.index-n,t}get numberOfBytes(){return this.index}}!function(e){e.is=function(e){let t=e;return t&&i.func(t.listen)&&i.func(t.dispose)&&i.func(t.onError)&&i.func(t.onClose)&&i.func(t.onPartialMessage)}}(t.MessageReader||(t.MessageReader={}));class l{constructor(){this.errorEmitter=new r.Emitter,this.closeEmitter=new r.Emitter,this.partialMessageEmitter=new r.Emitter}dispose(){this.errorEmitter.dispose(),this.closeEmitter.dispose()}get onError(){return this.errorEmitter.event}fireError(e){this.errorEmitter.fire(this.asError(e))}get onClose(){return this.closeEmitter.event}fireClose(){this.closeEmitter.fire(void 0)}get onPartialMessage(){return this.partialMessageEmitter.event}firePartialMessage(e){this.partialMessageEmitter.fire(e)}asError(e){return e instanceof Error?e:new Error(`Reader recevied error. Reason: ${i.string(e.message)?e.message:"unknown"}`)}}t.AbstractMessageReader=l;class d extends l{constructor(e,t="utf8"){super(),this.readable=e,this.buffer=new u(t),this._partialMessageTimeout=1e4}set partialMessageTimeout(e){this._partialMessageTimeout=e}get partialMessageTimeout(){return this._partialMessageTimeout}listen(e){this.nextMessageLength=-1,this.messageToken=0,this.partialMessageTimer=void 0,this.callback=e,this.readable.on("data",e=>{this.onData(e)}),this.readable.on("error",e=>this.fireError(e)),this.readable.on("close",()=>this.fireClose())}onData(e){for(this.buffer.append(e);;){if(-1===this.nextMessageLength){let e=this.buffer.tryReadHeaders();if(!e)return;let t=e["Content-Length"];if(!t)throw new Error("Header must provide a Content-Length property.");let n=parseInt(t);if(isNaN(n))throw new Error("Content-Length value must be a number.");this.nextMessageLength=n}var t=this.buffer.tryReadContent(this.nextMessageLength);if(null===t)return void this.setPartialMessageTimer();this.clearPartialMessageTimer(),this.nextMessageLength=-1,this.messageToken++;var n=JSON.parse(t);this.callback(n)}}clearPartialMessageTimer(){this.partialMessageTimer&&(clearTimeout(this.partialMessageTimer),this.partialMessageTimer=void 0)}setPartialMessageTimer(){this.clearPartialMessageTimer(),this._partialMessageTimeout<=0||(this.partialMessageTimer=setTimeout((e,t)=>{this.partialMessageTimer=void 0,e===this.messageToken&&(this.firePartialMessage({messageToken:e,waitingTime:t}),this.setPartialMessageTimer())},this._partialMessageTimeout,this.messageToken,this._partialMessageTimeout))}}t.StreamMessageReader=d;t.IPCMessageReader=class extends l{constructor(e){super(),this.process=e;let t=this.process;t.on("error",e=>this.fireError(e)),t.on("close",()=>this.fireClose())}listen(e){this.process.on("message",e)}};t.SocketMessageReader=class extends d{constructor(e,t="utf-8"){super(e,t)}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(32),i=n(29);let o="Content-Length: ",s="\r\n";!function(e){e.is=function(e){let t=e;return t&&i.func(t.dispose)&&i.func(t.onClose)&&i.func(t.onError)&&i.func(t.write)}}(t.MessageWriter||(t.MessageWriter={}));class a{constructor(){this.errorEmitter=new r.Emitter,this.closeEmitter=new r.Emitter}dispose(){this.errorEmitter.dispose(),this.closeEmitter.dispose()}get onError(){return this.errorEmitter.event}fireError(e,t,n){this.errorEmitter.fire([this.asError(e),t,n])}get onClose(){return this.closeEmitter.event}fireClose(){this.closeEmitter.fire(void 0)}asError(e){return e instanceof Error?e:new Error(`Writer recevied error. Reason: ${i.string(e.message)?e.message:"unknown"}`)}}t.AbstractMessageWriter=a;t.StreamMessageWriter=class extends a{constructor(e,t="utf8"){super(),this.writable=e,this.encoding=t,this.errorCount=0,this.writable.on("error",e=>this.fireError(e)),this.writable.on("close",()=>this.fireClose())}write(e){let t=JSON.stringify(e),n=Buffer.byteLength(t,this.encoding),r=[o,n.toString(),s,s];try{this.writable.write(r.join(""),"ascii"),this.writable.write(t,this.encoding),this.errorCount=0}catch(t){this.errorCount++,this.fireError(t,e,this.errorCount)}}};t.IPCMessageWriter=class extends a{constructor(e){super(),this.process=e,this.errorCount=0,this.queue=[],this.sending=!1;let t=this.process;t.on("error",e=>this.fireError(e)),t.on("close",()=>this.fireClose)}write(e){this.sending||0!==this.queue.length?this.queue.push(e):this.doWriteMessage(e)}doWriteMessage(e){try{this.process.send&&(this.sending=!0,this.process.send(e,void 0,void 0,t=>{this.sending=!1,t?(this.errorCount++,this.fireError(t,e,this.errorCount)):this.errorCount=0,this.queue.length>0&&this.doWriteMessage(this.queue.shift())}))}catch(t){this.errorCount++,this.fireError(t,e,this.errorCount)}}};t.SocketMessageWriter=class extends a{constructor(e,t="utf8"){super(),this.socket=e,this.queue=[],this.sending=!1,this.encoding=t,this.errorCount=0,this.socket.on("error",e=>this.fireError(e)),this.socket.on("close",()=>this.fireClose())}write(e){this.sending||0!==this.queue.length?this.queue.push(e):this.doWriteMessage(e)}doWriteMessage(e){let t=JSON.stringify(e),n=Buffer.byteLength(t,this.encoding),r=[o,n.toString(),s,s];try{this.sending=!0,this.socket.write(r.join(""),"ascii",n=>{n&&this.handleError(n,e);try{this.socket.write(t,this.encoding,t=>{this.sending=!1,t?this.handleError(t,e):this.errorCount=0,this.queue.length>0&&this.doWriteMessage(this.queue.shift())})}catch(n){this.handleError(n,e)}})}catch(t){this.handleError(t,e)}}handleError(e,t){this.errorCount++,this.fireError(e,t,this.errorCount)}}},function(e,t,n){"use strict";function r(e){return"/"===e.charAt(0)}function i(e){var t=/^([a-zA-Z]:|[\\\/]{2}[^\\\/]+[\\\/]+[^\\\/]+)?([\\\/])?([\s\S]*?)$/.exec(e),n=t[1]||"",r=Boolean(n&&":"!==n.charAt(1));return Boolean(t[2]||r)}e.exports="win32"===process.platform?i:r,e.exports.posix=r,e.exports.win32=i},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(1),i=n(78),o=n(46),s=Object.keys(process.binding("natives")),a=o.prototype.require;t.makePatchingRequire=function(e){var t={};return function(n){var c=a.apply(this,arguments);if(e[n]){var u=o._resolveFilename(n,this);if(t.hasOwnProperty(u))return t[u];var l=void 0;if(s.indexOf(n)<0)try{l=a.call(this,r.join(n,"package.json")).version}catch(e){return c}else l=process.version.substring(1);var d=l.indexOf("-");d>=0&&(l=l.substring(0,d));for(var h=c,p=0,f=e[n];p<f.length;p++){var g=f[p];i.satisfies(l,g.versionSpecifier)&&(h=g.patch(h,u))}return t[u]=h}return c}}},function(e,t){e.exports=require("module")},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.AvailabilityData=n(97),t.Base=n(48),t.ContextTagKeys=n(98),t.Data=n(99),t.DataPoint=n(100),t.DataPointType=n(49),t.Domain=n(12),t.Envelope=n(101),t.EventData=n(50),t.ExceptionData=n(102),t.ExceptionDetails=n(103),t.MessageData=n(104),t.MetricData=n(105),t.PageViewData=n(106),t.RemoteDependencyData=n(107),t.RequestData=n(108),t.SeverityLevel=n(109),t.StackFrame=n(110)},function(e,t,n){"use strict";var r=function(){return function(){}}();e.exports=r},function(e,t,n){"use strict";var r;!function(e){e[e.Measurement=0]="Measurement",e[e.Aggregation=1]="Aggregation"}(r||(r={})),e.exports=r},function(e,t,n){"use strict";var r,i=this&&this.__extends||(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},function(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),o=function(e){function t(){var t=e.call(this)||this;return t.ver=2,t.properties={},t.measurements={},t}return i(t,e),t}(n(12));e.exports=o},function(e,t,n){"use strict";var r=n(3),i=n(6),o=function(){function e(t){if(e.INSTANCE)throw new Error("Performance tracking should be configured from the applicationInsights object");e.INSTANCE=this,this._isInitialized=!1,this._client=t}return e.prototype.enable=function(t){var n=this;this._isEnabled=t,this._isEnabled&&!this._isInitialized&&(this._isInitialized=!0),t?this._handle||(this._lastCpus=r.cpus(),this._lastRequests={totalRequestCount:e._totalRequestCount,totalFailedRequestCount:e._totalFailedRequestCount,time:+new Date},"function"==typeof process.cpuUsage&&(this._lastAppCpuUsage=process.cpuUsage()),this._lastHrtime=process.hrtime(),this._handle=setInterval(function(){return n.trackPerformance()},6e4),this._handle.unref()):this._handle&&(clearInterval(this._handle),this._handle=void 0)},e.countRequest=function(t,n){var r=this;if(e.isEnabled()){var o=+new Date;t&&n?"function"==typeof n.once&&n.once("finish",function(){var t=+new Date;r._lastRequestExecutionTime=t-o,e._totalRequestCount++,n.statusCode>=400&&e._totalFailedRequestCount++}):i.warn("AutoCollectPerformance.countRequest was called with invalid parameters: ",!!t,!!n)}},e.prototype.isInitialized=function(){return this._isInitialized},e.isEnabled=function(){return e.INSTANCE&&e.INSTANCE._isEnabled},e.prototype.trackPerformance=function(){this._trackCpu(),this._trackMemory(),this._trackNetwork()},e.prototype._trackCpu=function(){var e=r.cpus();if(e&&e.length&&this._lastCpus&&e.length===this._lastCpus.length){for(var t=0,n=0,i=0,o=0,s=0,a=0;e&&a<e.length;a++){var c=e[a],u=this._lastCpus[a],l=(c.model,c.speed,c.times),d=u.times;t+=l.user-d.user||0,n+=l.sys-d.sys||0,i+=l.nice-d.nice||0,o+=l.idle-d.idle||0,s+=l.irq-d.irq||0}var h=void 0;if("function"==typeof process.cpuUsage){var p=process.cpuUsage(),f=process.hrtime(),g=p.user-this._lastAppCpuUsage.user+(p.system-this._lastAppCpuUsage.system)||0;if(void 0!==this._lastHrtime&&2===this._lastHrtime.length)h=100*g/((1e6*(f[0]-this._lastHrtime[0])+(f[1]-this._lastHrtime[1])/1e3||0)*e.length);this._lastAppCpuUsage=p,this._lastHrtime=f}var m=t+n+i+o+s||1;this._client.trackMetric({name:"\\Processor(_Total)\\% Processor Time",value:(m-o)/m*100}),this._client.trackMetric({name:"\\Process(??APP_WIN32_PROC??)\\% Processor Time",value:h||t/m*100})}this._lastCpus=e},e.prototype._trackMemory=function(){var e=r.freemem(),t=process.memoryUsage().rss;this._client.trackMetric({name:"\\Process(??APP_WIN32_PROC??)\\Private Bytes",value:t}),this._client.trackMetric({name:"\\Memory\\Available Bytes",value:e})},e.prototype._trackNetwork=function(){var t=this._lastRequests,n={totalRequestCount:e._totalRequestCount,totalFailedRequestCount:e._totalFailedRequestCount,time:+new Date},r=n.totalRequestCount-t.totalRequestCount||0,i=(t.totalFailedRequestCount,n.time-t.time),o=i/1e3;if(i>0){var s=r/o;this._client.trackMetric({name:"\\ASP.NET Applications(??APP_W3SVC_PROC??)\\Requests/Sec",value:s}),this._client.trackMetric({name:"\\ASP.NET Applications(??APP_W3SVC_PROC??)\\Request Execution Time",value:e._lastRequestExecutionTime})}this._lastRequests=n},e.prototype.dispose=function(){e.INSTANCE=null,this.enable(!1),this._isInitialized=!1},e._totalRequestCount=0,e._totalFailedRequestCount=0,e._lastRequestExecutionTime=0,e}();e.exports=o},function(e,t,n){"use strict";var r=function(){function e(){}return e.prototype.getUrl=function(){return this.url},e.prototype.RequestParser=function(){this.startTime=+new Date},e.prototype._setStatus=function(e,t){var n=+new Date;this.duration=n-this.startTime,this.statusCode=e;var r=this.properties||{};if(t)if("string"==typeof t)r.error=t;else if(t instanceof Error)r.error=t.message;else if("object"==typeof t)for(var i in t)r[i]=t[i]&&t[i].toString&&t[i].toString();this.properties=r},e.prototype._isSuccess=function(){return 0<this.statusCode&&this.statusCode<400},e}();e.exports=r},function(e,t,n){"use strict";var r=n(39),i=n(20),o=n(6),s=n(13),a=n(26),c=n(122),u=n(24),l=n(51),d=function(){function e(t){if(e.INSTANCE)throw new Error("Server request tracking should be configured from the applicationInsights object");e.INSTANCE=this,this._client=t}return e.prototype.enable=function(e){this._isEnabled=e,(this._isAutoCorrelating||this._isEnabled||l.isEnabled())&&!this._isInitialized&&(this.useAutoCorrelation(this._isAutoCorrelating),this._initialize())},e.prototype.useAutoCorrelation=function(e){e&&!this._isAutoCorrelating?u.CorrelationContextManager.enable():!e&&this._isAutoCorrelating&&u.CorrelationContextManager.disable(),this._isAutoCorrelating=e},e.prototype.isInitialized=function(){return this._isInitialized},e.prototype.isAutoCorrelating=function(){return this._isAutoCorrelating},e.prototype._generateCorrelationContext=function(e){if(this._isAutoCorrelating)return u.CorrelationContextManager.generateContextObject(e.getOperationId(this._client.context.tags),e.getRequestId(),e.getOperationName(this._client.context.tags),e.getCorrelationContextHeader())},e.prototype._initialize=function(){var t=this;this._isInitialized=!0;var n=function(n){if(n){if("function"!=typeof n)throw new Error("onRequest handler must be a function");return function(r,i){var o=r&&!r[e.alreadyAutoCollectedFlag];if(r&&o){var s=new c(r),a=t._generateCorrelationContext(s);u.CorrelationContextManager.runWithContext(a,function(){t._isEnabled&&(r[e.alreadyAutoCollectedFlag]=!0,e.trackRequest(t._client,{request:r,response:i},s)),l.countRequest(r,i),"function"==typeof n&&n(r,i)})}else"function"==typeof n&&n(r,i)}}},o=function(e){var t=e.addListener.bind(e);e.addListener=function(e,r){switch(e){case"request":case"checkContinue":return t(e,n(r));default:return t(e,r)}},e.on=e.addListener},s=r.createServer;r.createServer=function(e){var t=s(n(e));return o(t),t};var a=i.createServer;i.createServer=function(e,t){var r=a(e,n(t));return o(r),r}},e.trackRequestSync=function(t,n){if(n.request&&n.response&&t){e.addResponseCorrelationIdHeader(t,n.response);var r=u.CorrelationContextManager.getCurrentContext(),i=new c(n.request,r&&r.operation.parentId);r&&(r.operation.id=i.getOperationId(t.context.tags)||r.operation.id,r.operation.name=i.getOperationName(t.context.tags)||r.operation.name,r.operation.parentId=i.getRequestId()||r.operation.parentId,r.customProperties.addHeaderData(i.getCorrelationContextHeader())),e.endRequest(t,i,n,n.duration,n.error)}else o.info("AutoCollectHttpRequests.trackRequestSync was called with invalid parameters: ",!n.request,!n.response,!t)},e.trackRequest=function(t,n,r){if(n.request&&n.response&&t){var i=u.CorrelationContextManager.getCurrentContext(),a=r||new c(n.request,i&&i.operation.parentId);s.canIncludeCorrelationHeader(t,a.getUrl())&&e.addResponseCorrelationIdHeader(t,n.response),i&&!r&&(i.operation.id=a.getOperationId(t.context.tags)||i.operation.id,i.operation.name=a.getOperationName(t.context.tags)||i.operation.name,i.operation.parentId=a.getOperationParentId(t.context.tags)||i.operation.parentId,i.customProperties.addHeaderData(a.getCorrelationContextHeader())),n.response.once&&n.response.once("finish",function(){e.endRequest(t,a,n,null,null)}),n.request.on&&n.request.on("error",function(r){e.endRequest(t,a,n,null,r)})}else o.info("AutoCollectHttpRequests.trackRequest was called with invalid parameters: ",!n.request,!n.response,!t)},e.addResponseCorrelationIdHeader=function(e,t){if(e.config&&e.config.correlationId&&t.getHeader&&t.setHeader&&!t.headersSent){var n=t.getHeader(a.requestContextHeader);if(n){var r=n.split(","),i=a.requestContextSourceKey+"=";r.some(function(e){return e.substring(0,i.length)===i})||t.setHeader(a.requestContextHeader,n+","+a.requestContextSourceKey+"="+e.config.correlationId)}else t.setHeader(a.requestContextHeader,a.requestContextSourceKey+"="+e.config.correlationId)}},e.endRequest=function(e,t,n,r,i){i?t.onError(i,r):t.onResponse(n.response,r);var o=t.getRequestTelemetry(n);if(o.tagOverrides=t.getRequestTags(e.context.tags),n.tagOverrides)for(var s in n.tagOverrides)o.tagOverrides[s]=n.tagOverrides[s];o.contextObjects=o.contextObjects||{},o.contextObjects["http.ServerRequest"]=n.request,o.contextObjects["http.ServerResponse"]=n.response,e.trackRequest(o)},e.prototype.dispose=function(){e.INSTANCE=null,this.enable(!1),this._isInitialized=!1},e.alreadyAutoCollectedFlag="_appInsightsAutoCollected",e}();e.exports=d},function(e,t){e.exports=require("zlib")},function(e,t,n){"use strict";e.exports=function(e){function t(e){for(var t=0,n=0;n<e.length;n++)t=(t<<5)-t+e.charCodeAt(n),t|=0;return r.colors[Math.abs(t)%r.colors.length]}function r(e){var n;function s(){if(s.enabled){for(var e=arguments.length,t=new Array(e),i=0;i<e;i++)t[i]=arguments[i];var o=s,a=Number(new Date),c=a-(n||a);o.diff=c,o.prev=n,o.curr=a,n=a,t[0]=r.coerce(t[0]),"string"!=typeof t[0]&&t.unshift("%O");var u=0;t[0]=t[0].replace(/%([a-zA-Z%])/g,function(e,n){if("%%"===e)return e;u++;var i=r.formatters[n];if("function"==typeof i){var s=t[u];e=i.call(o,s),t.splice(u,1),u--}return e}),r.formatArgs.call(o,t),(o.log||r.log).apply(o,t)}}return s.namespace=e,s.enabled=r.enabled(e),s.useColors=r.useColors(),s.color=t(e),s.destroy=i,s.extend=o,"function"==typeof r.init&&r.init(s),r.instances.push(s),s}function i(){var e=r.instances.indexOf(this);return-1!==e&&(r.instances.splice(e,1),!0)}function o(e,t){return r(this.namespace+(void 0===t?":":t)+e)}return r.debug=r,r.default=r,r.coerce=function(e){return e instanceof Error?e.stack||e.message:e},r.disable=function(){r.enable("")},r.enable=function(e){var t;r.save(e),r.names=[],r.skips=[];var n=("string"==typeof e?e:"").split(/[\s,]+/),i=n.length;for(t=0;t<i;t++)n[t]&&("-"===(e=n[t].replace(/\*/g,".*?"))[0]?r.skips.push(new RegExp("^"+e.substr(1)+"$")):r.names.push(new RegExp("^"+e+"$")));for(t=0;t<r.instances.length;t++){var o=r.instances[t];o.enabled=r.enabled(o.namespace)}},r.enabled=function(e){if("*"===e[e.length-1])return!0;var t,n;for(t=0,n=r.skips.length;t<n;t++)if(r.skips[t].test(e))return!1;for(t=0,n=r.names.length;t<n;t++)if(r.names[t].test(e))return!0;return!1},r.humanize=n(141),Object.keys(e).forEach(function(t){r[t]=e[t]}),r.instances=[],r.names=[],r.skips=[],r.formatters={},r.selectColor=t,r.enable(r.load()),r}},function(e,t,n){"use strict";var r=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))(function(i,o){function s(e){try{c(r.next(e))}catch(e){o(e)}}function a(e){try{c(r.throw(e))}catch(e){o(e)}}function c(e){e.done?i(e.value):new n(function(t){t(e.value)}).then(s,a)}c((r=r.apply(e,t||[])).next())})};Object.defineProperty(t,"__esModule",{value:!0});const i=n(0),o=n(22);let s;var a;!function(e){e[e.IncludePath=1]="IncludePath",e[e.CompileCommands=2]="CompileCommands",e[e.CustomProvider=3]="CustomProvider"}(a||(a={}));class c{constructor(){this.navigationStatusBarItem=i.window.createStatusBarItem(i.StatusBarAlignment.Right,1e3),this.navigationStatusBarItem.tooltip="C/C++ Navigation",this.navigationStatusBarItem.command="C_Cpp.Navigate",this.ShowNavigation=!0,this.configStatusBarItem=i.window.createStatusBarItem(i.StatusBarAlignment.Right,2),this.configStatusBarItem.command="C_Cpp.ConfigurationSelect",this.configStatusBarItem.tooltip="C/C++ Configuration",this.ShowConfiguration=!0,this.intelliSenseStatusBarItem=i.window.createStatusBarItem(i.StatusBarAlignment.Right,1),this.intelliSenseStatusBarItem.text="",this.intelliSenseStatusBarItem.tooltip="Updating IntelliSense...",this.intelliSenseStatusBarItem.color="Red",this.ShowFlameIcon=!0,this.browseEngineStatusBarItem=i.window.createStatusBarItem(i.StatusBarAlignment.Right,0),this.browseEngineStatusBarItem.text="",this.browseEngineStatusBarItem.tooltip="Discovering files...",this.browseEngineStatusBarItem.color=new i.ThemeColor("statusBar.foreground"),this.browseEngineStatusBarItem.command="C_Cpp.ShowParsingCommands",this.ShowDBIcon=!0}set NavigationLocation(e){this.navigationStatusBarItem.text=e}set ActiveConfig(e){this.configStatusBarItem.text=e}set TagParseStatus(e){this.browseEngineStatusBarItem.tooltip=e}get IsTagParsing(){return""!==this.browseEngineStatusBarItem.text}set IsTagParsing(e){this.browseEngineStatusBarItem.text=e?"$(database)":"",this.ShowDBIcon=e}get IsUpdatingIntelliSense(){return""!==this.intelliSenseStatusBarItem.text}set IsUpdatingIntelliSense(e){this.intelliSenseStatusBarItem.text=e?"$(flame)":"",this.ShowFlameIcon=e}set ShowNavigation(e){e?this.navigationStatusBarItem.show():this.navigationStatusBarItem.hide()}set ShowDBIcon(e){e&&this.IsTagParsing?this.browseEngineStatusBarItem.show():this.browseEngineStatusBarItem.hide()}set ShowFlameIcon(e){e&&this.IsUpdatingIntelliSense?this.intelliSenseStatusBarItem.show():this.intelliSenseStatusBarItem.hide()}set ShowConfiguration(e){e?this.configStatusBarItem.show():this.configStatusBarItem.hide()}activeDocumentChanged(){let e=i.window.activeTextEditor,t=e&&("cpp"===e.document.languageId||"c"===e.document.languageId),n=e&&(e.document.fileName.endsWith("c_cpp_properties.json")||e.document.fileName.endsWith("settings.json"));this.ShowConfiguration=t||n,this.ShowDBIcon=t||n,this.ShowFlameIcon=t||n,this.ShowNavigation=t}bind(e){e.TagParsingChanged(e=>{this.IsTagParsing=e}),e.IntelliSenseParsingChanged(e=>{this.IsUpdatingIntelliSense=e}),e.NavigationLocationChanged(e=>{this.NavigationLocation=e}),e.TagParserStatusChanged(e=>{this.TagParseStatus=e}),e.ActiveConfigChanged(e=>{this.ActiveConfig=e})}showNavigationOptions(e){let t={placeHolder:"Select where to navigate to"},n=[],r=e.split(";");for(let e=0;e<r.length-1;e+=2)n.push({label:r[e],description:"",index:Number(r[e+1])});i.window.showQuickPick(n,t).then(e=>{e&&(i.window.activeTextEditor.revealRange(new i.Range(e.index,0,e.index,0),i.TextEditorRevealType.InCenter),i.window.activeTextEditor.selection=new i.Selection(new i.Position(e.index,0),new i.Position(e.index,0)))})}showConfigurations(e){let t={placeHolder:"Select a Configuration..."},n=[];for(let t=0;t<e.length;t++)n.push({label:e[t],description:"",index:t});return n.push({label:"Edit Configurations (UI)",description:"",index:e.length}),n.push({label:"Edit Configurations (JSON)",description:"",index:e.length+1}),i.window.showQuickPick(n,t).then(e=>e?e.index:-1)}showConfigurationProviders(e){let t={placeHolder:"Select a Configuration Provider..."},n=o.getCustomConfigProviders(),r=[];return n.forEach(t=>{let n=t.name;t.extensionId===e&&(n+=" (active)"),r.push({label:n,description:"",key:t.extensionId})}),r.push({label:"(none)",description:"Disable the active configuration provider, if applicable.",key:""}),i.window.showQuickPick(r,t).then(e=>e?e.key:void 0)}showCompileCommands(e){let t={placeHolder:"Select a compile_commands.json..."},n=[];for(let t=0;t<e.length;t++)n.push({label:e[t],description:"",index:t});return i.window.showQuickPick(n,t).then(e=>e?e.index:-1)}showWorkspaces(e){let t={placeHolder:"Select a Workspace..."},n=[];return e.forEach(e=>n.push({label:e.name,description:"",key:e.key})),i.window.showQuickPick(n,t).then(e=>e?e.key:"")}showParsingCommands(){let e,t={};return t.placeHolder="Select a parsing command...",e=[],"Parsing paused"===this.browseEngineStatusBarItem.tooltip?e.push({label:"Resume Parsing",description:"",index:1}):e.push({label:"Pause Parsing",description:"",index:0}),i.window.showQuickPick(e,t).then(e=>e?e.index:-1)}showConfigureIncludePathMessage(e,t){setTimeout(()=>{this.showConfigurationPrompt(a.IncludePath,e,t)},1e4)}showConfigureCompileCommandsMessage(e,t){setTimeout(()=>{this.showConfigurationPrompt(a.CompileCommands,e,t)},5e3)}showConfigureCustomProviderMessage(e,t){this.showConfigurationPrompt(a.CustomProvider,e,t)}showConfigurationPrompt(e,t,n){let i=()=>r(this,void 0,void 0,function*(){let n=yield t();return Promise.resolve({priority:e,configured:n})});this.configurationUIPromise?this.configurationUIPromise=this.configurationUIPromise.then(t=>e>t.priority?i():t.configured?(n(),Promise.resolve({priority:t.priority,configured:!0})):i()):this.configurationUIPromise=i()}dispose(){this.configStatusBarItem.dispose(),this.browseEngineStatusBarItem.dispose(),this.intelliSenseStatusBarItem.dispose(),this.navigationStatusBarItem.dispose()}}t.UI=c,t.getUI=function(){return void 0===s&&(s=new c),s}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(18),i=n(2),o=n(148),s=n(16),a=n(0),c=n(7),u=n(167),l=n(168),d=n(169),h=n(170),p=n(171),f=n(172),g=n(173),m=n(11),v=n(174);!function(e){for(var n in e)t.hasOwnProperty(n)||(t[n]=e[n])}(n(16));const C="^1.30";var y,w,b,S,_,P,x;!function(e){e.is=function(e){return m.string(e.command)}}(y||(y={})),function(e){e[e.stdio=0]="stdio",e[e.ipc=1]="ipc",e[e.pipe=2]="pipe",e[e.socket=3]="socket"}(w=t.TransportKind||(t.TransportKind={})),function(e){e.isSocket=function(e){let t=e;return t&&t.kind===w.socket&&m.number(t.port)}}(b||(b={})),function(e){e.is=function(e){return m.string(e.module)}}(S||(S={})),function(e){e.is=function(e){let t=e;return t&&void 0!==t.writer&&void 0!==t.reader}}(_||(_={})),function(e){e.is=function(e){let t=e;return t&&void 0!==t.process&&"boolean"==typeof t.detached}}(P||(P={}));t.LanguageClient=class extends s.BaseLanguageClient{constructor(e,t,n,r,i){let o,s,a,c,u;m.string(t)?(o=e,s=t,a=n,c=r,u=!!i):(o=e.toLowerCase(),s=e,a=t,c=n,u=r),void 0===u&&(u=!1),super(o,s,c),this._serverOptions=a,this._forceDebug=u;try{this.checkVersion()}catch(e){throw m.string(e.message)&&this.outputChannel.appendLine(e.message),e}}checkVersion(){let e=o.parse(a.version);if(!e)throw new Error(`No valid VS Code version detected. Version string is: ${a.version}`);if(e.prerelease&&e.prerelease.length>0&&(e.prerelease=[]),!o.satisfies(e,C))throw new Error(`The language client requires VS Code version ${C} but received version ${a.version}`)}stop(){return super.stop().then(()=>{if(this._serverProcess){let e=this._serverProcess;this._serverProcess=void 0,void 0!==this._isDetached&&this._isDetached||this.checkProcessDied(e),this._isDetached=void 0}})}checkProcessDied(e){e&&setTimeout(()=>{try{process.kill(e.pid,0),v.terminate(e)}catch(e){}},2e3)}handleConnectionClosed(){this._serverProcess=void 0,super.handleConnectionClosed()}createMessageTransports(e){let t,n=this._serverOptions;if(m.func(n))return n().then(t=>{if(s.MessageTransports.is(t))return this._isDetached=!!t.detached,t;if(_.is(t))return this._isDetached=!!t.detached,{reader:new c.StreamMessageReader(t.reader),writer:new c.StreamMessageWriter(t.writer)};{let n;return P.is(t)?(n=t.process,this._isDetached=t.detached):(n=t,this._isDetached=!1),n.stderr.on("data",t=>this.outputChannel.append(m.string(t)?t:t.toString(e))),{reader:new c.StreamMessageReader(n.stdout),writer:new c.StreamMessageWriter(n.stdin)}}});let i=n;return t=i.run||i.debug?"object"==typeof v8debug||this._forceDebug||function(){let e=process.execArgv;return!!e&&e.some(e=>/^--debug=?/.test(e)||/^--debug-brk=?/.test(e)||/^--inspect=?/.test(e)||/^--inspect-brk=?/.test(e))}()?i.debug:i.run:n,this._getServerWorkingDir(t.options).then(i=>{if(S.is(t)&&t.module){let n=t,o=n.transport||w.stdio;if(!n.runtime){let t=void 0;return new Promise((s,a)=>{let u=n.args&&n.args.slice()||[];o===w.ipc?u.push("--node-ipc"):o===w.stdio?u.push("--stdio"):o===w.pipe?(t=c.generateRandomPipeName(),u.push(`--pipe=${t}`)):b.isSocket(o)&&u.push(`--socket=${o.port}`),u.push(`--clientProcessId=${process.pid.toString()}`);let l=n.options||Object.create(null);if(l.execArgv=l.execArgv||[],l.cwd=i,l.silent=!0,o===w.ipc||o===w.stdio){let t=r.fork(n.module,u||[],l);this._serverProcess=t,t.stderr.on("data",t=>this.outputChannel.append(m.string(t)?t:t.toString(e))),o===w.ipc?(t.stdout.on("data",t=>this.outputChannel.append(m.string(t)?t:t.toString(e))),s({reader:new c.IPCMessageReader(this._serverProcess),writer:new c.IPCMessageWriter(this._serverProcess)})):s({reader:new c.StreamMessageReader(t.stdout),writer:new c.StreamMessageWriter(t.stdin)})}else o===w.pipe?c.createClientPipeTransport(t).then(t=>{let i=r.fork(n.module,u||[],l);this._serverProcess=i,i.stderr.on("data",t=>this.outputChannel.append(m.string(t)?t:t.toString(e))),i.stdout.on("data",t=>this.outputChannel.append(m.string(t)?t:t.toString(e))),t.onConnected().then(e=>{s({reader:e[0],writer:e[1]})})}):b.isSocket(o)&&c.createClientSocketTransport(o.port).then(t=>{let i=r.fork(n.module,u||[],l);this._serverProcess=i,i.stderr.on("data",t=>this.outputChannel.append(m.string(t)?t:t.toString(e))),i.stdout.on("data",t=>this.outputChannel.append(m.string(t)?t:t.toString(e))),t.onConnected().then(e=>{s({reader:e[0],writer:e[1]})})})})}{let t=[],s=n.options||Object.create(null);s.execArgv&&s.execArgv.forEach(e=>t.push(e)),t.push(n.module),n.args&&n.args.forEach(e=>t.push(e));let a=Object.create(null);a.cwd=i,a.env=function(e){if(!e)return process.env;let t=Object.create(null);return Object.keys(process.env).forEach(e=>t[e]=process.env[e]),Object.keys(e).forEach(n=>t[n]=e[n]),t}(s.env);let u=void 0;if(o===w.ipc?(a.stdio=[null,null,null,"ipc"],t.push("--node-ipc")):o===w.stdio?t.push("--stdio"):o===w.pipe?(u=c.generateRandomPipeName(),t.push(`--pipe=${u}`)):b.isSocket(o)&&t.push(`--socket=${o.port}`),t.push(`--clientProcessId=${process.pid.toString()}`),o===w.ipc||o===w.stdio){let i=r.spawn(n.runtime,t,a);return i&&i.pid?(this._serverProcess=i,i.stderr.on("data",t=>this.outputChannel.append(m.string(t)?t:t.toString(e))),o===w.ipc?(i.stdout.on("data",t=>this.outputChannel.append(m.string(t)?t:t.toString(e))),Promise.resolve({reader:new c.IPCMessageReader(i),writer:new c.IPCMessageWriter(i)})):Promise.resolve({reader:new c.StreamMessageReader(i.stdout),writer:new c.StreamMessageWriter(i.stdin)})):Promise.reject(`Launching server using runtime ${n.runtime} failed.`)}if(o==w.pipe)return c.createClientPipeTransport(u).then(i=>{let o=r.spawn(n.runtime,t,a);return o&&o.pid?(this._serverProcess=o,o.stderr.on("data",t=>this.outputChannel.append(m.string(t)?t:t.toString(e))),o.stdout.on("data",t=>this.outputChannel.append(m.string(t)?t:t.toString(e))),i.onConnected().then(e=>({reader:e[0],writer:e[1]}))):Promise.reject(`Launching server using runtime ${n.runtime} failed.`)});if(b.isSocket(o))return c.createClientSocketTransport(o.port).then(i=>{let o=r.spawn(n.runtime,t,a);return o&&o.pid?(this._serverProcess=o,o.stderr.on("data",t=>this.outputChannel.append(m.string(t)?t:t.toString(e))),o.stdout.on("data",t=>this.outputChannel.append(m.string(t)?t:t.toString(e))),i.onConnected().then(e=>({reader:e[0],writer:e[1]}))):Promise.reject(`Launching server using runtime ${n.runtime} failed.`)})}}else if(y.is(t)&&t.command){let n=t,o=n.args||[],s=Object.assign({},n.options);s.cwd=s.cwd||i;let a=r.spawn(n.command,o,s);return a&&a.pid?(a.stderr.on("data",t=>this.outputChannel.append(m.string(t)?t:t.toString(e))),this._serverProcess=a,this._isDetached=!!s.detached,Promise.resolve({reader:new c.StreamMessageReader(a.stdout),writer:new c.StreamMessageWriter(a.stdin)})):Promise.reject(`Launching server using command ${n.command} failed.`)}return Promise.reject(new Error("Unsupported server configuration "+JSON.stringify(n,null,4)))})}registerProposedFeatures(){this.registerFeatures(x.createAll(this))}registerBuiltinFeatures(){super.registerBuiltinFeatures(),this.registerFeature(new l.ConfigurationFeature(this)),this.registerFeature(new h.TypeDefinitionFeature(this)),this.registerFeature(new d.ImplementationFeature(this)),this.registerFeature(new u.ColorProviderFeature(this)),this.registerFeature(new p.WorkspaceFoldersFeature(this)),this.registerFeature(new f.FoldingRangeFeature(this)),this.registerFeature(new g.DeclarationFeature(this))}_mainGetRootPath(){let e=a.workspace.workspaceFolders;if(!e||0===e.length)return;let t=e[0];return"file"===t.uri.scheme?t.uri.fsPath:void 0}_getServerWorkingDir(e){let t=e&&e.cwd;return t||(t=this.clientOptions.workspaceFolder?this.clientOptions.workspaceFolder.uri.fsPath:this._mainGetRootPath()),t?new Promise(e=>{i.lstat(t,(n,r)=>{e(!n&&r.isDirectory()?t:void 0)})}):Promise.resolve(void 0)}};t.SettingMonitor=class{constructor(e,t){this._client=e,this._setting=t,this._listeners=[]}start(){return a.workspace.onDidChangeConfiguration(this.onDidChangeConfiguration,this,this._listeners),this.onDidChangeConfiguration(),new a.Disposable(()=>{this._client.needsStop()&&this._client.stop()})}onDidChangeConfiguration(){let e=this._setting.indexOf("."),t=e>=0?this._setting.substr(0,e):this._setting,n=e>=0?this._setting.substr(e+1):void 0,r=n?a.workspace.getConfiguration(t).get(n,!1):a.workspace.getConfiguration(t);r&&this._client.needsStart()?this._client.start():!r&&this._client.needsStop()&&this._client.stop()}},function(e){e.createAll=function(e){return[]}}(x=t.ProposedFeatures||(t.ProposedFeatures={}))},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(0);t.default=class extends r.CompletionItem{constructor(e){super(e)}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(0);t.default=class extends r.CodeLens{constructor(e){super(e)}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(0);t.default=class extends r.DocumentLink{constructor(e,t){super(e,t)}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(0);class i{constructor(){this.statusChangedEvent=new r.EventEmitter}get StatusChanged(){return this.statusChangedEvent.event}get valid(){return!!this.statusChangedEvent}updateStatus(e){this.statusChangedEvent.fire(e)}dispose(){this.statusChangedEvent.dispose(),this.statusChangedEvent=null}}let o;t.TestHook=i,t.getTestHook=function(){return o&&o.valid||(o=new i),o}},function(e,t,n){
/*!
 * Tmp
 *
 * Copyright (c) 2011-2017 KARASZI Istvan <github@spam.raszi.hu>
 *
 * MIT Licensed
 */
const r=n(2),i=n(3),o=n(1),s=n(37),a=r.constants&&i.constants?{fs:r.constants,os:i.constants}:process.binding("constants"),c=n(187),u="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz",l=/XXXXXX/,d=3,h=(a.O_CREAT||a.fs.O_CREAT)|(a.O_EXCL||a.fs.O_EXCL)|(a.O_RDWR||a.fs.O_RDWR),p=a.EBADF||a.os.errno.EBADF,f=a.ENOENT||a.os.errno.ENOENT,g=448,m=384,v="exit",C="SIGINT",y=[];var w=!1;function b(e){var t=[],n=null;try{n=s.randomBytes(e)}catch(t){n=s.pseudoRandomBytes(e)}for(var r=0;r<e;r++)t.push(u[n[r]%u.length]);return t.join("")}function S(e,t){return"function"==typeof e?[{},e]:void 0===e?[{},t]:[e,t]}function _(e){const t=L();if(M(e.dir)&&M(t))throw new Error("No tmp dir specified");if(!M(e.name))return o.join(e.dir||t,e.name);if(e.template){var n=e.template;return o.basename(n)===n&&(n=o.join(e.dir||t,n)),n.replace(l,b(6))}const r=[M(e.prefix)?"tmp-":e.prefix,process.pid,b(12),e.postfix?e.postfix:""].join("");return o.join(e.dir||t,r)}function P(e,t){var n=S(e,t),i=n[0],o=n[1],s=M(i.name)?i.tries||d:1;return isNaN(s)||s<0?o(new Error("Invalid tries")):i.template&&!i.template.match(l)?o(new Error("Invalid template provided")):void function e(){try{const t=_(i);r.stat(t,function(n){if(!n)return s-- >0?e():o(new Error("Could not get a unique tmp filename, max tries reached "+t));o(null,t)})}catch(e){o(e)}}()}function x(e){var t=S(e)[0],n=M(t.name)?t.tries||d:1;if(isNaN(n)||n<0)throw new Error("Invalid tries");if(t.template&&!t.template.match(l))throw new Error("Invalid template provided");do{const e=_(t);try{r.statSync(e)}catch(t){return e}}while(n-- >0);throw new Error("Could not get a unique tmp filename, max tries reached")}function k(e,t){const n=function(e){if(e&&!F(e))return t(e);t()};0<=e[0]?r.close(e[0],function(t){r.unlink(e[1],n)}):r.unlink(e[1],n)}function E(e){try{0<=e[0]&&r.closeSync(e[0])}catch(e){if(!N(e,-p,"EBADF")&&!F(e))throw e}finally{try{r.unlinkSync(e[1])}catch(e){if(!F(e))throw e}}}function T(e,t,n){const r=O(E,[t,e]),i=O(k,[t,e],r);return n.keep||y.unshift(r),i}function I(e,t){c(e,t)}function D(e,t){try{return t(null,c.sync(e))}catch(e){return t(e)}}function R(e,t){const n=t.unsafeCleanup?I:r.rmdir.bind(r),i=O(t.unsafeCleanup?D:r.rmdirSync.bind(r),e),o=O(n,e,i);return t.keep||y.unshift(i),o}function O(e,t,n){var r=!1;return function i(o){if(o=o||function(){},r)return o(new Error("cleanup callback has already been called"));{const s=n||i,a=y.indexOf(s);if(a>=0&&y.splice(a,1),r=!0,1!==e.length)return e(t,o);try{return e(t),o(null)}catch(e){return o(e)}}}}function A(){if(w)for(;y.length;)try{y[0]()}catch(e){}}function F(e){return N(e,-f,"ENOENT")}function N(e,t,n){return e.code===t||e.code===n}function M(e){return null==e||!e.trim()}function L(){return i.tmpdir()}!function(){const e=process.listeners(v),t=[];for(let r=0,i=e.length;r<i;r++){const i=e[r];("_tmp$safe_listener"===i.name||("_exit"===(n=i).name||"_uncaughtExceptionThrown"===n.name)&&n.toString().indexOf("_garbageCollector();")>-1)&&("_uncaughtExceptionThrown"!==i.name&&t.push(i),process.removeListener(v,i))}var n;process.addListener(v,function(e){for(let n=0,r=t.length;n<r;n++)try{t[n](e)}catch(e){}A()})}(),function(){const e=process.listeners(C),t=[];for(let n=0,r=e.length;n<r;n++){const r=e[n];"_tmp$sigint_listener"===r.name&&(t.push(r),process.removeListener(C,r))}process.on(C,function(e){for(let e=0,n=t.length;e<n;e++)try{t[e](!1)}catch(e){}try{A()}finally{e&&process.exit(0)}})}(),Object.defineProperty(e.exports,"tmpdir",{enumerable:!0,configurable:!1,get:function(){return L()}}),e.exports.dir=function(e,t){var n=S(e,t),i=n[0],o=n[1];P(i,function(e,t){if(e)return o(e);r.mkdir(t,i.mode||g,function(e){if(e)return o(e);o(null,t,R(t,i))})})},e.exports.dirSync=function(e){var t=S(e)[0];const n=x(t);return r.mkdirSync(n,t.mode||g),{name:n,removeCallback:R(n,t)}},e.exports.file=function(e,t){var n=S(e,t),i=n[0],o=n[1];P(i,function(e,t){if(e)return o(e);r.open(t,h,i.mode||m,function(e,n){return e?o(e):i.discardDescriptor?r.close(n,function(e){if(e){try{r.unlinkSync(t)}catch(t){F(t)||(e=t)}return o(e)}o(null,t,void 0,T(t,-1,i))}):i.detachDescriptor?o(null,t,n,T(t,-1,i)):void o(null,t,n,T(t,n,i))})})},e.exports.fileSync=function(e){var t=S(e)[0];const n=t.discardDescriptor||t.detachDescriptor,i=x(t);var o=r.openSync(i,h,t.mode||m);return t.discardDescriptor&&(r.closeSync(o),o=void 0),{name:i,fd:o,removeCallback:T(i,n?-1:o,t)}},e.exports.tmpName=P,e.exports.tmpNameSync=x,e.exports.setGracefulCleanup=function(){w=!0}},function(e,t,n){e.exports=y;var r=n(2),i=n(64),o=n(33),s=(o.Minimatch,n(189)),a=n(19).EventEmitter,c=n(1),u=n(31),l=n(44),d=n(191),h=n(65),p=(h.alphasort,h.alphasorti,h.setopts),f=h.ownProp,g=n(192),m=(n(15),h.childrenIgnored),v=h.isIgnored,C=n(67);function y(e,t,n){if("function"==typeof t&&(n=t,t={}),t||(t={}),t.sync){if(n)throw new TypeError("callback provided to sync glob");return d(e,t)}return new b(e,t,n)}y.sync=d;var w=y.GlobSync=d.GlobSync;function b(e,t,n){if("function"==typeof t&&(n=t,t=null),t&&t.sync){if(n)throw new TypeError("callback provided to sync glob");return new w(e,t)}if(!(this instanceof b))return new b(e,t,n);p(this,e,t),this._didRealPath=!1;var r=this.minimatch.set.length;this.matches=new Array(r),"function"==typeof n&&(n=C(n),this.on("error",n),this.on("end",function(e){n(null,e)}));var i=this;if(this._processing=0,this._emitQueue=[],this._processQueue=[],this.paused=!1,this.noprocess)return this;if(0===r)return a();for(var o=!0,s=0;s<r;s++)this._process(this.minimatch.set[s],s,!1,a);function a(){--i._processing,i._processing<=0&&(o?process.nextTick(function(){i._finish()}):i._finish())}o=!1}y.glob=y,y.hasMagic=function(e,t){var n=function(e,t){if(null===t||"object"!=typeof t)return e;for(var n=Object.keys(t),r=n.length;r--;)e[n[r]]=t[n[r]];return e}({},t);n.noprocess=!0;var r=new b(e,n).minimatch.set;if(!e)return!1;if(r.length>1)return!0;for(var i=0;i<r[0].length;i++)if("string"!=typeof r[0][i])return!0;return!1},y.Glob=b,s(b,a),b.prototype._finish=function(){if(u(this instanceof b),!this.aborted){if(this.realpath&&!this._didRealpath)return this._realpath();h.finish(this),this.emit("end",this.found)}},b.prototype._realpath=function(){if(!this._didRealpath){this._didRealpath=!0;var e=this.matches.length;if(0===e)return this._finish();for(var t=this,n=0;n<this.matches.length;n++)this._realpathSet(n,r)}function r(){0==--e&&t._finish()}},b.prototype._realpathSet=function(e,t){var n=this.matches[e];if(!n)return t();var r=Object.keys(n),o=this,s=r.length;if(0===s)return t();var a=this.matches[e]=Object.create(null);r.forEach(function(n,r){n=o._makeAbs(n),i.realpath(n,o.realpathCache,function(r,i){r?"stat"===r.syscall?a[n]=!0:o.emit("error",r):a[i]=!0,0==--s&&(o.matches[e]=a,t())})})},b.prototype._mark=function(e){return h.mark(this,e)},b.prototype._makeAbs=function(e){return h.makeAbs(this,e)},b.prototype.abort=function(){this.aborted=!0,this.emit("abort")},b.prototype.pause=function(){this.paused||(this.paused=!0,this.emit("pause"))},b.prototype.resume=function(){if(this.paused){if(this.emit("resume"),this.paused=!1,this._emitQueue.length){var e=this._emitQueue.slice(0);this._emitQueue.length=0;for(var t=0;t<e.length;t++){var n=e[t];this._emitMatch(n[0],n[1])}}if(this._processQueue.length){var r=this._processQueue.slice(0);this._processQueue.length=0;for(t=0;t<r.length;t++){var i=r[t];this._processing--,this._process(i[0],i[1],i[2],i[3])}}}},b.prototype._process=function(e,t,n,r){if(u(this instanceof b),u("function"==typeof r),!this.aborted)if(this._processing++,this.paused)this._processQueue.push([e,t,n,r]);else{for(var i,s=0;"string"==typeof e[s];)s++;switch(s){case e.length:return void this._processSimple(e.join("/"),t,r);case 0:i=null;break;default:i=e.slice(0,s).join("/")}var a,c=e.slice(s);null===i?a=".":l(i)||l(e.join("/"))?(i&&l(i)||(i="/"+i),a=i):a=i;var d=this._makeAbs(a);if(m(this,a))return r();c[0]===o.GLOBSTAR?this._processGlobStar(i,a,d,c,t,n,r):this._processReaddir(i,a,d,c,t,n,r)}},b.prototype._processReaddir=function(e,t,n,r,i,o,s){var a=this;this._readdir(n,o,function(c,u){return a._processReaddir2(e,t,n,r,i,o,u,s)})},b.prototype._processReaddir2=function(e,t,n,r,i,o,s,a){if(!s)return a();for(var u=r[0],l=!!this.minimatch.negate,d=u._glob,h=this.dot||"."===d.charAt(0),p=[],f=0;f<s.length;f++){if("."!==(m=s[f]).charAt(0)||h)(l&&!e?!m.match(u):m.match(u))&&p.push(m)}var g=p.length;if(0===g)return a();if(1===r.length&&!this.mark&&!this.stat){this.matches[i]||(this.matches[i]=Object.create(null));for(f=0;f<g;f++){var m=p[f];e&&(m="/"!==e?e+"/"+m:e+m),"/"!==m.charAt(0)||this.nomount||(m=c.join(this.root,m)),this._emitMatch(i,m)}return a()}r.shift();for(f=0;f<g;f++){m=p[f];e&&(m="/"!==e?e+"/"+m:e+m),this._process([m].concat(r),i,o,a)}a()},b.prototype._emitMatch=function(e,t){if(!this.aborted&&!v(this,t))if(this.paused)this._emitQueue.push([e,t]);else{var n=l(t)?t:this._makeAbs(t);if(this.mark&&(t=this._mark(t)),this.absolute&&(t=n),!this.matches[e][t]){if(this.nodir){var r=this.cache[n];if("DIR"===r||Array.isArray(r))return}this.matches[e][t]=!0;var i=this.statCache[n];i&&this.emit("stat",t,i),this.emit("match",t)}}},b.prototype._readdirInGlobStar=function(e,t){if(!this.aborted){if(this.follow)return this._readdir(e,!1,t);var n=this,i=g("lstat\0"+e,function(r,i){if(r&&"ENOENT"===r.code)return t();var o=i&&i.isSymbolicLink();n.symlinks[e]=o,o||!i||i.isDirectory()?n._readdir(e,!1,t):(n.cache[e]="FILE",t())});i&&r.lstat(e,i)}},b.prototype._readdir=function(e,t,n){if(!this.aborted&&(n=g("readdir\0"+e+"\0"+t,n))){if(t&&!f(this.symlinks,e))return this._readdirInGlobStar(e,n);if(f(this.cache,e)){var i=this.cache[e];if(!i||"FILE"===i)return n();if(Array.isArray(i))return n(null,i)}r.readdir(e,function(e,t,n){return function(r,i){r?e._readdirError(t,r,n):e._readdirEntries(t,i,n)}}(this,e,n))}},b.prototype._readdirEntries=function(e,t,n){if(!this.aborted){if(!this.mark&&!this.stat)for(var r=0;r<t.length;r++){var i=t[r];i="/"===e?e+i:e+"/"+i,this.cache[i]=!0}return this.cache[e]=t,n(null,t)}},b.prototype._readdirError=function(e,t,n){if(!this.aborted){switch(t.code){case"ENOTSUP":case"ENOTDIR":var r=this._makeAbs(e);if(this.cache[r]="FILE",r===this.cwdAbs){var i=new Error(t.code+" invalid cwd "+this.cwd);i.path=this.cwd,i.code=t.code,this.emit("error",i),this.abort()}break;case"ENOENT":case"ELOOP":case"ENAMETOOLONG":case"UNKNOWN":this.cache[this._makeAbs(e)]=!1;break;default:this.cache[this._makeAbs(e)]=!1,this.strict&&(this.emit("error",t),this.abort()),this.silent||console.error("glob error",t)}return n()}},b.prototype._processGlobStar=function(e,t,n,r,i,o,s){var a=this;this._readdir(n,o,function(c,u){a._processGlobStar2(e,t,n,r,i,o,u,s)})},b.prototype._processGlobStar2=function(e,t,n,r,i,o,s,a){if(!s)return a();var c=r.slice(1),u=e?[e]:[],l=u.concat(c);this._process(l,i,!1,a);var d=this.symlinks[n],h=s.length;if(d&&o)return a();for(var p=0;p<h;p++){if("."!==s[p].charAt(0)||this.dot){var f=u.concat(s[p],c);this._process(f,i,!0,a);var g=u.concat(s[p],r);this._process(g,i,!0,a)}}a()},b.prototype._processSimple=function(e,t,n){var r=this;this._stat(e,function(i,o){r._processSimple2(e,t,i,o,n)})},b.prototype._processSimple2=function(e,t,n,r,i){if(this.matches[t]||(this.matches[t]=Object.create(null)),!r)return i();if(e&&l(e)&&!this.nomount){var o=/[\/\\]$/.test(e);"/"===e.charAt(0)?e=c.join(this.root,e):(e=c.resolve(this.root,e),o&&(e+="/"))}"win32"===process.platform&&(e=e.replace(/\\/g,"/")),this._emitMatch(t,e),i()},b.prototype._stat=function(e,t){var n=this._makeAbs(e),i="/"===e.slice(-1);if(e.length>this.maxLength)return t();if(!this.stat&&f(this.cache,n)){var o=this.cache[n];if(Array.isArray(o)&&(o="DIR"),!i||"DIR"===o)return t(null,o);if(i&&"FILE"===o)return t()}var s=this.statCache[n];if(void 0!==s){if(!1===s)return t(null,s);var a=s.isDirectory()?"DIR":"FILE";return i&&"FILE"===a?t():t(null,a,s)}var c=this,u=g("stat\0"+n,function(i,o){if(o&&o.isSymbolicLink())return r.stat(n,function(r,i){r?c._stat2(e,n,null,o,t):c._stat2(e,n,r,i,t)});c._stat2(e,n,i,o,t)});u&&r.lstat(n,u)},b.prototype._stat2=function(e,t,n,r,i){if(n&&("ENOENT"===n.code||"ENOTDIR"===n.code))return this.statCache[t]=!1,i();var o="/"===e.slice(-1);if(this.statCache[t]=r,"/"===t.slice(-1)&&r&&!r.isDirectory())return i(null,!1,r);var s=!0;return r&&(s=r.isDirectory()?"DIR":"FILE"),this.cache[t]=this.cache[t]||s,o&&"FILE"===s?i():i(null,s,r)}},function(e,t,n){e.exports=l,l.realpath=l,l.sync=d,l.realpathSync=d,l.monkeypatch=function(){r.realpath=l,r.realpathSync=d},l.unmonkeypatch=function(){r.realpath=i,r.realpathSync=o};var r=n(2),i=r.realpath,o=r.realpathSync,s=process.version,a=/^v[0-5]\./.test(s),c=n(188);function u(e){return e&&"realpath"===e.syscall&&("ELOOP"===e.code||"ENOMEM"===e.code||"ENAMETOOLONG"===e.code)}function l(e,t,n){if(a)return i(e,t,n);"function"==typeof t&&(n=t,t=null),i(e,t,function(r,i){u(r)?c.realpath(e,t,n):n(r,i)})}function d(e,t){if(a)return o(e,t);try{return o(e,t)}catch(n){if(u(n))return c.realpathSync(e,t);throw n}}},function(e,t,n){function r(e,t){return Object.prototype.hasOwnProperty.call(e,t)}t.alphasort=u,t.alphasorti=c,t.setopts=function(e,t,n){n||(n={});if(n.matchBase&&-1===t.indexOf("/")){if(n.noglobstar)throw new Error("base matching requires globstar");t="**/"+t}e.silent=!!n.silent,e.pattern=t,e.strict=!1!==n.strict,e.realpath=!!n.realpath,e.realpathCache=n.realpathCache||Object.create(null),e.follow=!!n.follow,e.dot=!!n.dot,e.mark=!!n.mark,e.nodir=!!n.nodir,e.nodir&&(e.mark=!0);e.sync=!!n.sync,e.nounique=!!n.nounique,e.nonull=!!n.nonull,e.nosort=!!n.nosort,e.nocase=!!n.nocase,e.stat=!!n.stat,e.noprocess=!!n.noprocess,e.absolute=!!n.absolute,e.maxLength=n.maxLength||1/0,e.cache=n.cache||Object.create(null),e.statCache=n.statCache||Object.create(null),e.symlinks=n.symlinks||Object.create(null),function(e,t){e.ignore=t.ignore||[],Array.isArray(e.ignore)||(e.ignore=[e.ignore]);e.ignore.length&&(e.ignore=e.ignore.map(l))}(e,n),e.changedCwd=!1;var o=process.cwd();r(n,"cwd")?(e.cwd=i.resolve(n.cwd),e.changedCwd=e.cwd!==o):e.cwd=o;e.root=n.root||i.resolve(e.cwd,"/"),e.root=i.resolve(e.root),"win32"===process.platform&&(e.root=e.root.replace(/\\/g,"/"));e.cwdAbs=s(e.cwd)?e.cwd:d(e,e.cwd),"win32"===process.platform&&(e.cwdAbs=e.cwdAbs.replace(/\\/g,"/"));e.nomount=!!n.nomount,n.nonegate=!0,n.nocomment=!0,e.minimatch=new a(t,n),e.options=e.minimatch.options},t.ownProp=r,t.makeAbs=d,t.finish=function(e){for(var t=e.nounique,n=t?[]:Object.create(null),r=0,i=e.matches.length;r<i;r++){var o=e.matches[r];if(o&&0!==Object.keys(o).length){var s=Object.keys(o);t?n.push.apply(n,s):s.forEach(function(e){n[e]=!0})}else if(e.nonull){var a=e.minimatch.globSet[r];t?n.push(a):n[a]=!0}}t||(n=Object.keys(n));e.nosort||(n=n.sort(e.nocase?c:u));if(e.mark){for(var r=0;r<n.length;r++)n[r]=e._mark(n[r]);e.nodir&&(n=n.filter(function(t){var n=!/\/$/.test(t),r=e.cache[t]||e.cache[d(e,t)];return n&&r&&(n="DIR"!==r&&!Array.isArray(r)),n}))}e.ignore.length&&(n=n.filter(function(t){return!h(e,t)}));e.found=n},t.mark=function(e,t){var n=d(e,t),r=e.cache[n],i=t;if(r){var o="DIR"===r||Array.isArray(r),s="/"===t.slice(-1);if(o&&!s?i+="/":!o&&s&&(i=i.slice(0,-1)),i!==t){var a=d(e,i);e.statCache[a]=e.statCache[n],e.cache[a]=e.cache[n]}}return i},t.isIgnored=h,t.childrenIgnored=function(e,t){return!!e.ignore.length&&e.ignore.some(function(e){return!(!e.gmatcher||!e.gmatcher.match(t))})};var i=n(1),o=n(33),s=n(44),a=o.Minimatch;function c(e,t){return e.toLowerCase().localeCompare(t.toLowerCase())}function u(e,t){return e.localeCompare(t)}function l(e){var t=null;if("/**"===e.slice(-3)){var n=e.replace(/(\/\*\*)+$/,"");t=new a(n,{dot:!0})}return{matcher:new a(e,{dot:!0}),gmatcher:t}}function d(e,t){var n=t;return n="/"===t.charAt(0)?i.join(e.root,t):s(t)||""===t?t:e.changedCwd?i.resolve(e.cwd,t):i.resolve(t),"win32"===process.platform&&(n=n.replace(/\\/g,"/")),n}function h(e,t){return!!e.ignore.length&&e.ignore.some(function(e){return e.matcher.match(t)||!(!e.gmatcher||!e.gmatcher.match(t))})}},function(e,t){e.exports=function e(t,n){if(t&&n)return e(t)(n);if("function"!=typeof t)throw new TypeError("need wrapper function");Object.keys(t).forEach(function(e){r[e]=t[e]});return r;function r(){for(var e=new Array(arguments.length),n=0;n<e.length;n++)e[n]=arguments[n];var r=t.apply(this,e),i=e[e.length-1];return"function"==typeof r&&r!==i&&Object.keys(i).forEach(function(e){r[e]=i[e]}),r}}},function(e,t,n){var r=n(66);function i(e){var t=function(){return t.called?t.value:(t.called=!0,t.value=e.apply(this,arguments))};return t.called=!1,t}function o(e){var t=function(){if(t.called)throw new Error(t.onceError);return t.called=!0,t.value=e.apply(this,arguments)},n=e.name||"Function wrapped with `once`";return t.onceError=n+" shouldn't be called more than once",t.called=!1,t}e.exports=r(i),e.exports.strict=r(o),i.proto=i(function(){Object.defineProperty(Function.prototype,"once",{value:function(){return i(this)},configurable:!0}),Object.defineProperty(Function.prototype,"onceStrict",{value:function(){return o(this)},configurable:!0})})},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.PackageVersion=class{constructor(e){const t=e.split(new RegExp("[-\\.]","g"));if(t.length<3)throw new Error("Failed to parse version string: "+e);if(this.major=parseInt(t[0]),this.minor=parseInt(t[1]),this.patch=parseInt(t[2]),t.length>3){const e=t[3].search(new RegExp(/(\d)/));-1!==e?(this.suffix=t[3].substring(0,e),this.suffixVersion=parseInt(t[3].substring(e))):(this.suffix=t[3],this.suffixVersion=1)}else this.suffix=void 0,this.suffixVersion=0;if(void 0===this.major||void 0===this.minor||void 0===this.patch)throw new Error("Failed to parse version string: "+e)}isGreaterThan(e,t="insiders"){if(this.suffix&&!this.suffix.startsWith(t)||e.suffix&&!e.suffix.startsWith(t))return!1;let n=this.major-e.major;return n?n>0:(n=this.minor-e.minor)?n>0:(n=this.patch-e.patch)?n>0:this.suffix?e.suffix&&this.suffixVersion>e.suffixVersion:!!e.suffix}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(0),i=n(21),o=n(4);class s{constructor(){this.isLanguageServerDisabled=!1,this.isActivationReady=!1,this.commandsToRegister=["C_Cpp.ConfigurationEditJSON","C_Cpp.ConfigurationEditUI","C_Cpp.ConfigurationSelect","C_Cpp.ConfigurationProviderSelect","C_Cpp.SwitchHeaderSource","C_Cpp.Navigate","C_Cpp.GoToDeclaration","C_Cpp.PeekDeclaration","C_Cpp.EnableErrorSquiggles","C_Cpp.DisableErrorSquiggles","C_Cpp.ToggleIncludeFallback","C_Cpp.ToggleDimInactiveRegions","C_Cpp.ShowReleaseNotes","C_Cpp.ResetDatabase","C_Cpp.PauseParsing","C_Cpp.ResumeParsing","C_Cpp.ShowParsingCommands","C_Cpp.TakeSurvey","C_Cpp.LogDiagnostics"],this.tempCommands=[],this.delayedCommandsToExecute=new Set,o.extensionContext&&this.commandsToRegister.forEach(e=>{this.registerTempCommand(e)})}registerTempCommand(e){this.tempCommands.push(r.commands.registerCommand(e,()=>{this.isLanguageServerDisabled?r.window.showInformationMessage('The command is disabled because "C_Cpp.intelliSenseEngine" is set to "Disabled".'):(this.delayedCommandsToExecute.add(e),this.isActivationReady&&i.activate(!0))}))}disableLanguageServer(){this.isLanguageServerDisabled=!0}activateLanguageServer(){i.activate(this.delayedCommandsToExecute.size>0),this.isActivationReady=!0}clearTempCommands(){this.tempCommands.forEach(e=>{e.dispose()}),this.tempCommands=[]}executeDelayedCommands(){this.delayedCommandsToExecute.forEach(e=>{r.commands.executeCommand(e)}),this.delayedCommandsToExecute.clear()}}let a;t.initializeTemporaryCommandRegistrar=function(){a=new s},t.getTemporaryCommandRegistrarInstance=function(){return a}},function(e,t,n){var r=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))(function(i,o){function s(e){try{c(r.next(e))}catch(e){o(e)}}function a(e){try{c(r.throw(e))}catch(e){o(e)}}function c(e){e.done?i(e.value):new n(function(t){t(e.value)}).then(s,a)}c((r=r.apply(e,t||[])).next())})};Object.defineProperty(t,"__esModule",{value:!0});const i=n(0),o=n(3),s=n(194),a=n(71),c=n(196),u=n(199),l=n(4),d=n(8);let h=[];function p(){return" build and debug active file"}t.buildAndDebugActiveFileStr=p,t.initialize=function(e){let t=a.NativeAttachItemsProviderFactory.Get(),n=new s.AttachPicker(t);h.push(i.commands.registerCommand("extension.pickNativeProcess",()=>n.ShowAttachEntries()));let p=new s.RemoteAttachPicker;h.push(i.commands.registerCommand("extension.pickRemoteNativeProcess",e=>p.ShowAttachEntries(e)));let f=c.ConfigurationAssetProviderFactory.getConfigurationProvider(),g=null;"win32"===o.platform()&&(g=new c.CppVsDbgConfigurationProvider(f),h.push(i.debug.registerDebugConfigurationProvider("cppvsdbg",new c.QuickPickConfigurationProvider(g))));const m=new c.CppDbgConfigurationProvider(f);h.push(i.debug.registerDebugConfigurationProvider("cppdbg",new c.QuickPickConfigurationProvider(m))),h.push(i.commands.registerTextEditorCommand("C_Cpp.BuildAndDebugActiveFile",(e,t,...n)=>r(this,void 0,void 0,function*(){const t=i.workspace.getWorkspaceFolder(e.document.uri);if(!t)return i.window.showErrorMessage("This command is not yet available for single-file mode."),Promise.resolve();if(!l.fileIsCOrCppSource(e.document.uri.fsPath))return i.window.showErrorMessage("Cannot build and debug because the active file is not a C or C++ source file."),Promise.resolve();let n=(yield m.provideDebugConfigurations(t)).filter(e=>-1!==e.name.indexOf(" build and debug active file"));if(g){let e=(yield g.provideDebugConfigurations(t)).filter(e=>-1!==e.name.indexOf(" build and debug active file"));e&&n.push(...e)}const o=n.map(e=>({label:e.name,configuration:e}));i.window.showQuickPick(o,{placeHolder:0===o.length?"No compiler found":"Select a compiler"}).then(e=>r(this,void 0,void 0,function*(){if(e)if(!e.label.startsWith("cl.exe")||process.env.DevEnvDir&&0!==process.env.DevEnvDir.length){if(e.configuration.preLaunchTask){if(!t)return Promise.resolve();try{yield l.ensureBuildTaskExists(e.configuration.preLaunchTask),d.logDebuggerEvent("buildAndDebug",{success:"false"})}catch(e){return e&&e.message===l.failedToParseTasksJson&&i.window.showErrorMessage(l.failedToParseTasksJson),Promise.resolve()}}try{yield i.debug.startDebugging(t,e.configuration.name),d.logDebuggerEvent("buildAndDebug",{success:"true"})}catch(n){try{i.debug.startDebugging(t,e.configuration)}catch(e){d.logDebuggerEvent("buildAndDebug",{success:"false"})}}}else i.window.showErrorMessage("cl.exe build and debug is only usable when VS Code is run from the Developer Command Prompt for VS.")}))}))),f.getConfigurationSnippets(),h.push(i.languages.registerCompletionItemProvider([{scheme:"file",language:"jsonc",pattern:"**/launch.json"}],new c.ConfigurationSnippetProvider(f))),h.push(i.debug.registerDebugAdapterDescriptorFactory(u.CppvsdbgDebugAdapterDescriptorFactory.DEBUG_TYPE,new u.CppvsdbgDebugAdapterDescriptorFactory(e))),h.push(i.debug.registerDebugAdapterDescriptorFactory(u.CppdbgDebugAdapterDescriptorFactory.DEBUG_TYPE,new u.CppdbgDebugAdapterDescriptorFactory(e))),i.Disposable.from(...h)},t.dispose=function(){h.forEach(e=>e.dispose())}},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0});const r=n(18),i=n(3);class o{constructor(e,t,n){this.name=e,this.pid=t,this.commandLine=n}toAttachItem(){return{label:this.name,description:this.pid,detail:this.commandLine,id:this.pid}}}t.NativeAttachItemsProviderFactory=class{static Get(){return"win32"===i.platform()?new l:new a}};class s{getAttachItems(){return this.getInternalProcessEntries().then(e=>{return e.sort((e,t)=>{if(void 0===e.name)return void 0===t.name?0:1;if(void 0===t.name)return-1;let n=e.name.toLowerCase(),r=t.name.toLowerCase();return n===r?0:n<r?-1:1}),e.map(e=>e.toAttachItem())})}}class a extends s{getInternalProcessEntries(){let e="";switch(i.platform()){case"darwin":e=c.psDarwinCommand;break;case"linux":e=c.psLinuxCommand;break;default:return Promise.reject(new Error(`Operating system "${i.platform()}" not support.`))}return u(e,null).then(e=>c.ParseProcessFromPs(e))}}t.PsAttachItemsProvider=a;class c{static get secondColumnCharacters(){return 50}static get commColumnTitle(){return Array(c.secondColumnCharacters).join("a")}static get psLinuxCommand(){return`ps axww -o pid=,comm=${c.commColumnTitle},args=`}static get psDarwinCommand(){return`ps axww -o pid=,comm=${c.commColumnTitle},args= -c`}static ParseProcessFromPs(e){let t=e.split(i.EOL);return c.ParseProcessFromPsArray(t)}static ParseProcessFromPsArray(e){let t=[];for(let n=1;n<e.length;n++){let r=e[n];if(!r)continue;let i=c.parseLineFromPs(r);t.push(i)}return t}static parseLineFromPs(e){const t=new RegExp(`^\\s*([0-9]+)\\s+(.{${c.secondColumnCharacters-1}})\\s+(.*)$`).exec(e);if(t&&4===t.length){const e=t[1].trim(),n=t[2].trim(),r=t[3].trim();return new o(n,e,r)}}}function u(e,t){return new Promise((n,i)=>{r.exec(e,{cwd:t,maxBuffer:512e3},(e,t,r)=>{e?i(e):r&&r.length>0?i(new Error(r)):n(t)})})}t.PsProcessParser=c;class l extends s{getInternalProcessEntries(){return u("wmic process get Name,ProcessId,CommandLine /FORMAT:list",null).then(e=>d.ParseProcessFromWmic(e))}}t.WmicAttachItemsProvider=l;class d{static get wmicNameTitle(){return"Name"}static get wmicCommandLineTitle(){return"CommandLine"}static get wmicPidTitle(){return"ProcessId"}static ParseProcessFromWmic(e){let t=e.split(i.EOL),n=new o(null,null,null),r=[];for(let e=0;e<t.length;e++){let i=t[e];i&&(d.parseLineFromWmic(i,n),0===i.lastIndexOf(d.wmicPidTitle,0)&&(r.push(n),n=new o(null,null,null)))}return r}static parseLineFromWmic(e,t){if(e.indexOf("=")>=0){let n=e.slice(0,e.indexOf("=")).trim(),r=e.slice(e.indexOf("=")+1).trim();if(n===d.wmicNameTitle)t.name=r;else if(n===d.wmicPidTitle)t.pid=r;else if(n===d.wmicCommandLineTitle){const e="\\??\\";0===r.lastIndexOf(e,0)&&(r=r.slice(e.length)),t.commandLine=r}}}}t.WmicProcessParser=d},function(e,t){var n;Object.defineProperty(t,"__esModule",{value:!0}),function(e){e[e.ia32=0]="ia32",e[e.x64=1]="x64"}(n=t.ArchType||(t.ArchType={}));class r{static checkAndReplaceWSLPipeProgram(e,t){let i=null;const o=process.env.WINDIR?process.env.WINDIR.toLowerCase():null,s=process.env.WINDIR?process.env.WINDIR.replace("\\","/").toLowerCase():null;if(o&&s&&(0===e.indexOf(o)||0===e.indexOf(s)||0===e.indexOf("${env:windir}")))if(t===n.x64){const t=r.checkForFolderInPath(e,"sysnative");t&&(i=e.replace(`${t}sysnative${t}`,`${t}system32${t}`))}else if(t===n.ia32){const t=r.checkForFolderInPath(e,"system32");t&&(i=e.replace(`${t}system32${t}`,`${t}sysnative${t}`))}return i}static checkForFolderInPath(e,t){return e.indexOf(`/${t}/`)>=0?"/":e.indexOf(`\\${t}\\`)>=0?"\\":""}}t.ArchitectureReplacer=r},function(e,t,n){"use strict";var r=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))(function(i,o){function s(e){try{c(r.next(e))}catch(e){o(e)}}function a(e){try{c(r.throw(e))}catch(e){o(e)}}function c(e){e.done?i(e.value):new n(function(t){t(e.value)}).then(s,a)}c((r=r.apply(e,t||[])).next())})};Object.defineProperty(t,"__esModule",{value:!0});const i=n(35),o=n(70),s=n(2),a=n(21),c=n(3),u=n(8),l=n(4),d=n(0),h=n(69),p=n(34),f=n(200),g=n(30),m=n(207),v=n(27),C=n(208),y=5,w=new C.CppTools1;let b=!1,S=!1,_=[];function P(){return l.allowExecution(l.getDebugAdaptersPath("OpenDebugAD7"))}function x(){if("win32"!==c.platform()){let e=l.getDebugAdaptersPath("bin/OpenDebugAD7.exe.config");s.existsSync(e)&&s.rename(e,l.getDebugAdaptersPath("bin/OpenDebugAD7.exe.config.unused"),t=>{t&&v.getOutputChannelLogger().appendLine(`ERROR: fs.rename failed with "${t.message}". Delete ${e} manually to enable debugging.`)})}return Promise.resolve()}function k(e){let t=m.getInstallationInformation();const n=!t.hasError;if(t.telemetryProperties.success=n.toString(),t.telemetryProperties.type=t.type===m.InstallationType.Online?"online":"offline",e.distribution&&(t.telemetryProperties.linuxDistroName=e.distribution.name,t.telemetryProperties.linuxDistroVersion=e.distribution.version),n){l.setProgress(l.getProgressInstallSuccess());let e=new g.PersistentState("CPP.ReleaseNotesVersion",-1);e.Value<y&&(e.Value!==e.DefaultValue&&l.showReleaseNotes(),e.Value=y)}return t.telemetryProperties.osArchitecture=e.architecture,u.logDebuggerEvent("acquisition",t.telemetryProperties),n}function E(e){return r(this,void 0,void 0,function*(){let t=v.getOutputChannelLogger();return t.appendLine(""),t.appendLine("Finished installing dependencies"),t.appendLine(""),k(e)?(l.checkDistro(e),T()):Promise.reject("")})}function T(){return r(this,void 0,void 0,function*(){if("Disabled"===d.workspace.getConfiguration("C_Cpp",null).get("intelliSenseEngine"))return b=!0,h.getTemporaryCommandRegistrarInstance().disableLanguageServer(),void _.push(d.workspace.onDidChangeConfiguration(()=>{S||"Disabled"===d.workspace.getConfiguration("C_Cpp",null).get("intelliSenseEngine")||(S=!0,l.promptForReloadWindowDueToSettingsChange())}));_.push(d.workspace.onDidChangeConfiguration(()=>{S||"Disabled"!==d.workspace.getConfiguration("C_Cpp",null).get("intelliSenseEngine")||(S=!0,l.promptForReloadWindowDueToSettingsChange())})),h.getTemporaryCommandRegistrarInstance().activateLanguageServer();let e=l.getExtensionFilePath("package.json");if(e.includes(".vscode-insiders")||e.includes(".vscode-exploration")){let e=l.getRawPackageJson();if("Default"===e.contributes.configuration.properties["C_Cpp.updateChannel"].default)return e.contributes.configuration.properties["C_Cpp.updateChannel"].default="Insiders",l.writeFileText(l.getPackageJsonPath(),l.stringifyPackageJson(e))}else{let e=i.getABTestSettings(),t=l.getRawPackageJson(),n=t.contributes.configuration.properties["C_Cpp.intelliSenseEngine"].default;if(e.UseDefaultIntelliSenseEngine?t.contributes.configuration.properties["C_Cpp.intelliSenseEngine"].default="Default":t.contributes.configuration.properties["C_Cpp.intelliSenseEngine"].default="Tag Parser",n!==t.contributes.configuration.properties["C_Cpp.intelliSenseEngine"].default)return l.writeFileText(l.getPackageJsonPath(),l.stringifyPackageJson(t))}})}function I(){let e=l.getRawPackageJson();return e.activationEvents=["onLanguage:cpp","onLanguage:c","onCommand:extension.pickNativeProcess","onCommand:extension.pickRemoteNativeProcess","onCommand:C_Cpp.BuildAndDebugActiveFile","onCommand:C_Cpp.ConfigurationEditJSON","onCommand:C_Cpp.ConfigurationEditUI","onCommand:C_Cpp.ConfigurationSelect","onCommand:C_Cpp.ConfigurationProviderSelect","onCommand:C_Cpp.SwitchHeaderSource","onCommand:C_Cpp.Navigate","onCommand:C_Cpp.GoToDeclaration","onCommand:C_Cpp.PeekDeclaration","onCommand:C_Cpp.EnableErrorSquiggles","onCommand:C_Cpp.DisableErrorSquiggles","onCommand:C_Cpp.ToggleIncludeFallback","onCommand:C_Cpp.ToggleDimInactiveRegions","onCommand:C_Cpp.ShowReleaseNotes","onCommand:C_Cpp.ResetDatabase","onCommand:C_Cpp.PauseParsing","onCommand:C_Cpp.ResumeParsing","onCommand:C_Cpp.ShowParsingCommands","onCommand:C_Cpp.TakeSurvey","onCommand:C_Cpp.LogDiagnostics","onDebug","workspaceContains:/.vscode/c_cpp_properties.json"],l.writeFileText(l.getPackageJsonPath(),l.stringifyPackageJson(e))}t.activate=function(e){return r(this,void 0,void 0,function*(){return l.setExtensionContext(e),h.initializeTemporaryCommandRegistrar(),u.activate(),l.setProgress(0),o.initialize(e),yield function(){return r(this,void 0,void 0,function*(){const e=yield l.checkInstallLockFile();if(e)if(l.packageJson.activationEvents&&1===l.packageJson.activationEvents.length)try{yield function(){return r(this,void 0,void 0,function*(){m.setInstallationStage("getPlatformInfo"),m.setInstallationType(m.InstallationType.Offline);const e=yield p.PlatformInformation.GetPlatformInformation();m.setInstallationStage("makeBinariesExecutable"),yield P(),m.setInstallationStage("makeOfflineBinariesExecutable"),yield function(e){let t=[];return l.packageJson.runtimeDependencies.forEach(n=>{n.binaries&&n.binaries.length>0&&-1!==n.platforms.findIndex(t=>t===e.platform)&&(void 0===n.architectures||-1!==n.architectures.findIndex(t=>t===e.architecture))&&n.binaries.forEach(e=>t.push(l.allowExecution(l.getExtensionFilePath(e))))}),Promise.all(t).then(()=>{})}(e),m.setInstallationStage("removeUnnecessaryFile"),yield x(),m.setInstallationStage("rewriteManifest"),yield I(),m.setInstallationStage("postInstall"),yield E(e)})}()}catch(e){v.getOutputChannelLogger().showErrorMessage("The installation of the C/C++ extension failed. Please see the output window for more information."),v.showOutputChannel(),k(yield p.PlatformInformation.GetPlatformInformation())}else yield T();else try{yield function(){return r(this,void 0,void 0,function*(){m.setInstallationStage("getPlatformInfo"),m.setInstallationType(m.InstallationType.Online);const e=yield p.PlatformInformation.GetPlatformInformation();yield function(e){return r(this,void 0,void 0,function*(){let t=v.getOutputChannelLogger();t.appendLine("Updating C/C++ dependencies...");let n=new f.PackageManager(e,t);return d.window.withProgress({location:d.ProgressLocation.Notification,title:"C/C++ Extension",cancellable:!1},(e,i)=>r(this,void 0,void 0,function*(){t.appendLine(""),m.setInstallationStage("downloadPackages"),yield n.DownloadPackages(e),t.appendLine(""),m.setInstallationStage("installPackages"),yield n.InstallPackages(e)}))})}(e),m.setInstallationStage("makeBinariesExecutable"),yield P(),m.setInstallationStage("removeUnnecessaryFile"),yield x(),m.setInstallationStage("rewriteManifest"),yield I(),m.setInstallationStage("touchInstallLockFile"),yield l.touchInstallLockFile(),m.setInstallationStage("postInstall"),yield E(e)})}()}catch(e){!function(e){let t,n=m.getInstallationInformation();if(n.hasError=!0,n.telemetryProperties.stage=n.stage,e instanceof f.PackageManagerError){let r=e;n.telemetryProperties["error.methodName"]=r.methodName,n.telemetryProperties["error.message"]=r.message,r.innerError?(t=r.innerError.toString(),n.telemetryProperties["error.innerError"]=l.removePotentialPII(t)):t=r.message,r.pkg&&(n.telemetryProperties["error.packageName"]=r.pkg.description,n.telemetryProperties["error.packageUrl"]=r.pkg.url),r.errorCode&&(n.telemetryProperties["error.errorCode"]=l.removePotentialPII(r.errorCode))}else t=e.toString(),n.telemetryProperties["error.toString"]=l.removePotentialPII(t);let r=v.getOutputChannelLogger();"downloadPackages"===n.stage&&r.appendLine(""),r.appendLine(`Failed at stage: ${n.stage}`),r.appendLine(t),r.appendLine(""),r.appendLine('If you work in an offline environment or repeatedly see this error, try downloading a version of the extension with all the dependencies pre-included from https://github.com/Microsoft/vscode-cpptools/releases, then use the "Install from VSIX" command in VS Code to install it.'),v.showOutputChannel()}(e),k(yield p.PlatformInformation.GetPlatformInformation())}})}(),w})},t.deactivate=function(){if(o.dispose(),u.deactivate(),_.forEach(e=>e.dispose()),!b)return a.deactivate()}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),process.env.APPLICATION_INSIGHTS_NO_DIAGNOSTIC_CHANNEL=!0;var r=n(2),i=n(3),o=n(1),s=n(0),a=n(75),c=function(){function e(e,t,n){var i=this;this.extensionId=e,this.extensionVersion=t,this.userOptIn=!1;var a=process.env.VSCODE_LOGS||"";a&&e&&"trace"===process.env.VSCODE_LOG_LEVEL&&(a=o.join(a,e+".txt"),this.logStream=r.createWriteStream(a,{flags:"a",encoding:"utf8",autoClose:!0})),this.updateUserOptIn(n),this.configListener=s.workspace.onDidChangeConfiguration(function(){return i.updateUserOptIn(n)})}return e.prototype.updateUserOptIn=function(t){var n=s.workspace.getConfiguration(e.TELEMETRY_CONFIG_ID);this.userOptIn!==n.get(e.TELEMETRY_CONFIG_ENABLED_ID,!0)&&(this.userOptIn=n.get(e.TELEMETRY_CONFIG_ENABLED_ID,!0),this.userOptIn?this.createAppInsightsClient(t):this.dispose())},e.prototype.createAppInsightsClient=function(e){a.defaultClient?(this.appInsightsClient=new a.TelemetryClient(e),this.appInsightsClient.channel.setUseDiskRetryCaching(!0)):(a.setup(e).setAutoCollectRequests(!1).setAutoCollectPerformance(!1).setAutoCollectExceptions(!1).setAutoCollectDependencies(!1).setAutoDependencyCorrelation(!1).setAutoCollectConsole(!1).setUseDiskRetryCaching(!0).start(),this.appInsightsClient=a.defaultClient),this.appInsightsClient.commonProperties=this.getCommonProperties(),s&&s.env&&(this.appInsightsClient.context.tags[this.appInsightsClient.context.keys.userId]=s.env.machineId,this.appInsightsClient.context.tags[this.appInsightsClient.context.keys.sessionId]=s.env.sessionId),e&&0===e.indexOf("AIF-")&&(this.appInsightsClient.config.endpointUrl="https://vortex.data.microsoft.com/collect/v1")},e.prototype.getCommonProperties=function(){var e=Object.create(null);return e["common.os"]=i.platform(),e["common.platformversion"]=(i.release()||"").replace(/^(\d+)(\.\d+)?(\.\d+)?(.*)/,"$1$2$3"),e["common.extname"]=this.extensionId,e["common.extversion"]=this.extensionVersion,s&&s.env&&(e["common.vscodemachineid"]=s.env.machineId,e["common.vscodesessionid"]=s.env.sessionId,e["common.vscodeversion"]=s.version),e},e.prototype.sendTelemetryEvent=function(e,t,n){this.userOptIn&&e&&this.appInsightsClient&&(this.appInsightsClient.trackEvent({name:this.extensionId+"/"+e,properties:t,measurements:n}),this.logStream&&this.logStream.write("telemetry/"+e+" "+JSON.stringify({properties:t,measurements:n})+"\n"))},e.prototype.dispose=function(){var e=this;this.configListener.dispose();var t=new Promise(function(t){if(!e.logStream)return t(void 0);e.logStream.on("finish",t),e.logStream.end()}),n=new Promise(function(t){e.appInsightsClient?e.appInsightsClient.flush({callback:function(){e.appInsightsClient=void 0,t(void 0)}}):t(void 0)});return Promise.all([n,t])},e.TELEMETRY_CONFIG_ID="telemetry",e.TELEMETRY_CONFIG_ENABLED_ID="enableTelemetry",e}();t.default=c},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(24),i=n(94),o=n(115),s=n(51),a=n(38),c=n(53),u=n(6);t.TelemetryClient=n(123),t.Contracts=n(9);var l,d,h,p,f,g=!0,m=!1,v=!0,C=!0,y=!0,w=!0,b=!0,S=!0,_=void 0,P=void 0,x=!1;function k(){return t.defaultClient?(x=!0,l.enable(g,m),d.enable(v),h.enable(C),p.useAutoCorrelation(S),p.enable(y),f.enable(w)):u.warn("Start cannot be called before setup"),E}t.setup=function(e){return t.defaultClient?u.info("The default client is already setup"):(t.defaultClient=new t.TelemetryClient(e),l=new i(t.defaultClient),d=new o(t.defaultClient),h=new s(t.defaultClient),p=new c(t.defaultClient),f=new a(t.defaultClient)),t.defaultClient&&t.defaultClient.channel&&t.defaultClient.channel.setUseDiskRetryCaching(b,_,P),E},t.start=k,t.getCorrelationContext=function(){return S?r.CorrelationContextManager.getCurrentContext():null},t.wrapWithCorrelationContext=function(e){return r.CorrelationContextManager.wrapCallback(e)};var E=function(){function e(){}return e.setAutoCollectConsole=function(t,n){return void 0===n&&(n=!1),g=t,m=n,x&&l.enable(t,n),e},e.setAutoCollectExceptions=function(t){return v=t,x&&d.enable(t),e},e.setAutoCollectPerformance=function(t){return C=t,x&&h.enable(t),e},e.setAutoCollectRequests=function(t){return y=t,x&&p.enable(t),e},e.setAutoCollectDependencies=function(t){return w=t,x&&f.enable(t),e},e.setAutoDependencyCorrelation=function(t){return S=t,x&&p.useAutoCorrelation(t),e},e.setUseDiskRetryCaching=function(n,r,i){return b=n,_=r,P=i,t.defaultClient&&t.defaultClient.channel&&t.defaultClient.channel.setUseDiskRetryCaching(n,r,i),e},e.setInternalLogging=function(t,n){return void 0===t&&(t=!1),void 0===n&&(n=!0),u.enableDebug=t,u.disableWarnings=!n,e},e.start=k,e}();t.Configuration=E,t.dispose=function(){t.defaultClient=null,x=!1,l&&l.dispose(),d&&d.dispose(),h&&h.dispose(),p&&p.dispose(),f&&f.dispose()}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(77);t.bunyan=r;var i=n(80);t.console=i;var o=n(82);t.mongodbCore=o;var s=n(83);t.mongodb=s;var a=n(84);t.mysql=a;var c=n(87);t.pgPool=c;var u=n(88);t.pg=u;var l=n(89);t.redis=l;var d=n(90);t.winston=d,t.enable=function(){r.enable(),i.enable(),o.enable(),s.enable(),a.enable(),u.enable(),c.enable(),l.enable(),d.enable()}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(5);t.bunyan={versionSpecifier:">= 1.0.0 < 2.0.0",patch:function(e){var t=e.prototype._emit;return e.prototype._emit=function(e,n){var i=t.apply(this,arguments);if(!n){var o=i;o||(o=t.call(this,e,!0)),r.channel.publish("bunyan",{level:e.level,result:o})}return i},e}},t.enable=function(){r.channel.registerMonkeyPatch("bunyan",t.bunyan)}},function(e,t){var n;t=e.exports=B,n="object"==typeof process&&process.env&&process.env.NODE_DEBUG&&/\bsemver\b/i.test(process.env.NODE_DEBUG)?function(){var e=Array.prototype.slice.call(arguments,0);e.unshift("SEMVER"),console.log.apply(console,e)}:function(){},t.SEMVER_SPEC_VERSION="2.0.0";var r=256,i=Number.MAX_SAFE_INTEGER||9007199254740991,o=t.re=[],s=t.src=[],a=0,c=a++;s[c]="0|[1-9]\\d*";var u=a++;s[u]="[0-9]+";var l=a++;s[l]="\\d*[a-zA-Z-][a-zA-Z0-9-]*";var d=a++;s[d]="("+s[c]+")\\.("+s[c]+")\\.("+s[c]+")";var h=a++;s[h]="("+s[u]+")\\.("+s[u]+")\\.("+s[u]+")";var p=a++;s[p]="(?:"+s[c]+"|"+s[l]+")";var f=a++;s[f]="(?:"+s[u]+"|"+s[l]+")";var g=a++;s[g]="(?:-("+s[p]+"(?:\\."+s[p]+")*))";var m=a++;s[m]="(?:-?("+s[f]+"(?:\\."+s[f]+")*))";var v=a++;s[v]="[0-9A-Za-z-]+";var C=a++;s[C]="(?:\\+("+s[v]+"(?:\\."+s[v]+")*))";var y=a++,w="v?"+s[d]+s[g]+"?"+s[C]+"?";s[y]="^"+w+"$";var b="[v=\\s]*"+s[h]+s[m]+"?"+s[C]+"?",S=a++;s[S]="^"+b+"$";var _=a++;s[_]="((?:<|>)?=?)";var P=a++;s[P]=s[u]+"|x|X|\\*";var x=a++;s[x]=s[c]+"|x|X|\\*";var k=a++;s[k]="[v=\\s]*("+s[x]+")(?:\\.("+s[x]+")(?:\\.("+s[x]+")(?:"+s[g]+")?"+s[C]+"?)?)?";var E=a++;s[E]="[v=\\s]*("+s[P]+")(?:\\.("+s[P]+")(?:\\.("+s[P]+")(?:"+s[m]+")?"+s[C]+"?)?)?";var T=a++;s[T]="^"+s[_]+"\\s*"+s[k]+"$";var I=a++;s[I]="^"+s[_]+"\\s*"+s[E]+"$";var D=a++;s[D]="(?:~>?)";var R=a++;s[R]="(\\s*)"+s[D]+"\\s+",o[R]=new RegExp(s[R],"g");var O=a++;s[O]="^"+s[D]+s[k]+"$";var A=a++;s[A]="^"+s[D]+s[E]+"$";var F=a++;s[F]="(?:\\^)";var N=a++;s[N]="(\\s*)"+s[F]+"\\s+",o[N]=new RegExp(s[N],"g");var M=a++;s[M]="^"+s[F]+s[k]+"$";var L=a++;s[L]="^"+s[F]+s[E]+"$";var q=a++;s[q]="^"+s[_]+"\\s*("+b+")$|^$";var j=a++;s[j]="^"+s[_]+"\\s*("+w+")$|^$";var W=a++;s[W]="(\\s*)"+s[_]+"\\s*("+b+"|"+s[k]+")",o[W]=new RegExp(s[W],"g");var $=a++;s[$]="^\\s*("+s[k]+")\\s+-\\s+("+s[k]+")\\s*$";var U=a++;s[U]="^\\s*("+s[E]+")\\s+-\\s+("+s[E]+")\\s*$";var H=a++;s[H]="(<|>)?=?\\s*\\*";for(var z=0;z<34;z++)n(z,s[z]),o[z]||(o[z]=new RegExp(s[z]));function V(e,t){if(e instanceof B)return e;if("string"!=typeof e)return null;if(e.length>r)return null;if(!(t?o[S]:o[y]).test(e))return null;try{return new B(e,t)}catch(e){return null}}function B(e,t){if(e instanceof B){if(e.loose===t)return e;e=e.version}else if("string"!=typeof e)throw new TypeError("Invalid Version: "+e);if(e.length>r)throw new TypeError("version is longer than "+r+" characters");if(!(this instanceof B))return new B(e,t);n("SemVer",e,t),this.loose=t;var s=e.trim().match(t?o[S]:o[y]);if(!s)throw new TypeError("Invalid Version: "+e);if(this.raw=e,this.major=+s[1],this.minor=+s[2],this.patch=+s[3],this.major>i||this.major<0)throw new TypeError("Invalid major version");if(this.minor>i||this.minor<0)throw new TypeError("Invalid minor version");if(this.patch>i||this.patch<0)throw new TypeError("Invalid patch version");s[4]?this.prerelease=s[4].split(".").map(function(e){if(/^[0-9]+$/.test(e)){var t=+e;if(t>=0&&t<i)return t}return e}):this.prerelease=[],this.build=s[5]?s[5].split("."):[],this.format()}t.parse=V,t.valid=function(e,t){var n=V(e,t);return n?n.version:null},t.clean=function(e,t){var n=V(e.trim().replace(/^[=v]+/,""),t);return n?n.version:null},t.SemVer=B,B.prototype.format=function(){return this.version=this.major+"."+this.minor+"."+this.patch,this.prerelease.length&&(this.version+="-"+this.prerelease.join(".")),this.version},B.prototype.toString=function(){return this.version},B.prototype.compare=function(e){return n("SemVer.compare",this.version,this.loose,e),e instanceof B||(e=new B(e,this.loose)),this.compareMain(e)||this.comparePre(e)},B.prototype.compareMain=function(e){return e instanceof B||(e=new B(e,this.loose)),J(this.major,e.major)||J(this.minor,e.minor)||J(this.patch,e.patch)},B.prototype.comparePre=function(e){if(e instanceof B||(e=new B(e,this.loose)),this.prerelease.length&&!e.prerelease.length)return-1;if(!this.prerelease.length&&e.prerelease.length)return 1;if(!this.prerelease.length&&!e.prerelease.length)return 0;var t=0;do{var r=this.prerelease[t],i=e.prerelease[t];if(n("prerelease compare",t,r,i),void 0===r&&void 0===i)return 0;if(void 0===i)return 1;if(void 0===r)return-1;if(r!==i)return J(r,i)}while(++t)},B.prototype.inc=function(e,t){switch(e){case"premajor":this.prerelease.length=0,this.patch=0,this.minor=0,this.major++,this.inc("pre",t);break;case"preminor":this.prerelease.length=0,this.patch=0,this.minor++,this.inc("pre",t);break;case"prepatch":this.prerelease.length=0,this.inc("patch",t),this.inc("pre",t);break;case"prerelease":0===this.prerelease.length&&this.inc("patch",t),this.inc("pre",t);break;case"major":0===this.minor&&0===this.patch&&0!==this.prerelease.length||this.major++,this.minor=0,this.patch=0,this.prerelease=[];break;case"minor":0===this.patch&&0!==this.prerelease.length||this.minor++,this.patch=0,this.prerelease=[];break;case"patch":0===this.prerelease.length&&this.patch++,this.prerelease=[];break;case"pre":if(0===this.prerelease.length)this.prerelease=[0];else{for(var n=this.prerelease.length;--n>=0;)"number"==typeof this.prerelease[n]&&(this.prerelease[n]++,n=-2);-1===n&&this.prerelease.push(0)}t&&(this.prerelease[0]===t?isNaN(this.prerelease[1])&&(this.prerelease=[t,0]):this.prerelease=[t,0]);break;default:throw new Error("invalid increment argument: "+e)}return this.format(),this.raw=this.version,this},t.inc=function(e,t,n,r){"string"==typeof n&&(r=n,n=void 0);try{return new B(e,n).inc(t,r).version}catch(e){return null}},t.diff=function(e,t){if(Q(e,t))return null;var n=V(e),r=V(t);if(n.prerelease.length||r.prerelease.length){for(var i in n)if(("major"===i||"minor"===i||"patch"===i)&&n[i]!==r[i])return"pre"+i;return"prerelease"}for(var i in n)if(("major"===i||"minor"===i||"patch"===i)&&n[i]!==r[i])return i},t.compareIdentifiers=J;var K=/^[0-9]+$/;function J(e,t){var n=K.test(e),r=K.test(t);return n&&r&&(e=+e,t=+t),n&&!r?-1:r&&!n?1:e<t?-1:e>t?1:0}function G(e,t,n){return new B(e,n).compare(new B(t,n))}function Z(e,t,n){return G(e,t,n)>0}function Y(e,t,n){return G(e,t,n)<0}function Q(e,t,n){return 0===G(e,t,n)}function X(e,t,n){return 0!==G(e,t,n)}function ee(e,t,n){return G(e,t,n)>=0}function te(e,t,n){return G(e,t,n)<=0}function ne(e,t,n,r){var i;switch(t){case"===":"object"==typeof e&&(e=e.version),"object"==typeof n&&(n=n.version),i=e===n;break;case"!==":"object"==typeof e&&(e=e.version),"object"==typeof n&&(n=n.version),i=e!==n;break;case"":case"=":case"==":i=Q(e,n,r);break;case"!=":i=X(e,n,r);break;case">":i=Z(e,n,r);break;case">=":i=ee(e,n,r);break;case"<":i=Y(e,n,r);break;case"<=":i=te(e,n,r);break;default:throw new TypeError("Invalid operator: "+t)}return i}function re(e,t){if(e instanceof re){if(e.loose===t)return e;e=e.value}if(!(this instanceof re))return new re(e,t);n("comparator",e,t),this.loose=t,this.parse(e),this.semver===ie?this.value="":this.value=this.operator+this.semver.version,n("comp",this)}t.rcompareIdentifiers=function(e,t){return J(t,e)},t.major=function(e,t){return new B(e,t).major},t.minor=function(e,t){return new B(e,t).minor},t.patch=function(e,t){return new B(e,t).patch},t.compare=G,t.compareLoose=function(e,t){return G(e,t,!0)},t.rcompare=function(e,t,n){return G(t,e,n)},t.sort=function(e,n){return e.sort(function(e,r){return t.compare(e,r,n)})},t.rsort=function(e,n){return e.sort(function(e,r){return t.rcompare(e,r,n)})},t.gt=Z,t.lt=Y,t.eq=Q,t.neq=X,t.gte=ee,t.lte=te,t.cmp=ne,t.Comparator=re;var ie={};function oe(e,t){if(e instanceof oe)return e.loose===t?e:new oe(e.raw,t);if(e instanceof re)return new oe(e.value,t);if(!(this instanceof oe))return new oe(e,t);if(this.loose=t,this.raw=e,this.set=e.split(/\s*\|\|\s*/).map(function(e){return this.parseRange(e.trim())},this).filter(function(e){return e.length}),!this.set.length)throw new TypeError("Invalid SemVer Range: "+e);this.format()}function se(e){return!e||"x"===e.toLowerCase()||"*"===e}function ae(e,t,n,r,i,o,s,a,c,u,l,d,h){return((t=se(n)?"":se(r)?">="+n+".0.0":se(i)?">="+n+"."+r+".0":">="+t)+" "+(a=se(c)?"":se(u)?"<"+(+c+1)+".0.0":se(l)?"<"+c+"."+(+u+1)+".0":d?"<="+c+"."+u+"."+l+"-"+d:"<="+a)).trim()}function ce(e,t){for(var r=0;r<e.length;r++)if(!e[r].test(t))return!1;if(t.prerelease.length){for(r=0;r<e.length;r++)if(n(e[r].semver),e[r].semver!==ie&&e[r].semver.prerelease.length>0){var i=e[r].semver;if(i.major===t.major&&i.minor===t.minor&&i.patch===t.patch)return!0}return!1}return!0}function ue(e,t,n){try{t=new oe(t,n)}catch(e){return!1}return t.test(e)}function le(e,t,n,r){var i,o,s,a,c;switch(e=new B(e,r),t=new oe(t,r),n){case">":i=Z,o=te,s=Y,a=">",c=">=";break;case"<":i=Y,o=ee,s=Z,a="<",c="<=";break;default:throw new TypeError('Must provide a hilo val of "<" or ">"')}if(ue(e,t,r))return!1;for(var u=0;u<t.set.length;++u){var l=t.set[u],d=null,h=null;if(l.forEach(function(e){e.semver===ie&&(e=new re(">=0.0.0")),d=d||e,h=h||e,i(e.semver,d.semver,r)?d=e:s(e.semver,h.semver,r)&&(h=e)}),d.operator===a||d.operator===c)return!1;if((!h.operator||h.operator===a)&&o(e,h.semver))return!1;if(h.operator===c&&s(e,h.semver))return!1}return!0}re.prototype.parse=function(e){var t=this.loose?o[q]:o[j],n=e.match(t);if(!n)throw new TypeError("Invalid comparator: "+e);this.operator=n[1],"="===this.operator&&(this.operator=""),n[2]?this.semver=new B(n[2],this.loose):this.semver=ie},re.prototype.toString=function(){return this.value},re.prototype.test=function(e){return n("Comparator.test",e,this.loose),this.semver===ie||("string"==typeof e&&(e=new B(e,this.loose)),ne(e,this.operator,this.semver,this.loose))},re.prototype.intersects=function(e,t){if(!(e instanceof re))throw new TypeError("a Comparator is required");var n;if(""===this.operator)return n=new oe(e.value,t),ue(this.value,n,t);if(""===e.operator)return n=new oe(this.value,t),ue(e.semver,n,t);var r=!(">="!==this.operator&&">"!==this.operator||">="!==e.operator&&">"!==e.operator),i=!("<="!==this.operator&&"<"!==this.operator||"<="!==e.operator&&"<"!==e.operator),o=this.semver.version===e.semver.version,s=!(">="!==this.operator&&"<="!==this.operator||">="!==e.operator&&"<="!==e.operator),a=ne(this.semver,"<",e.semver,t)&&(">="===this.operator||">"===this.operator)&&("<="===e.operator||"<"===e.operator),c=ne(this.semver,">",e.semver,t)&&("<="===this.operator||"<"===this.operator)&&(">="===e.operator||">"===e.operator);return r||i||o&&s||a||c},t.Range=oe,oe.prototype.format=function(){return this.range=this.set.map(function(e){return e.join(" ").trim()}).join("||").trim(),this.range},oe.prototype.toString=function(){return this.range},oe.prototype.parseRange=function(e){var t=this.loose;e=e.trim(),n("range",e,t);var r=t?o[U]:o[$];e=e.replace(r,ae),n("hyphen replace",e),e=e.replace(o[W],"$1$2$3"),n("comparator trim",e,o[W]),e=(e=(e=e.replace(o[R],"$1~")).replace(o[N],"$1^")).split(/\s+/).join(" ");var i=t?o[q]:o[j],s=e.split(" ").map(function(e){return function(e,t){return n("comp",e),e=function(e,t){return e.trim().split(/\s+/).map(function(e){return function(e,t){n("caret",e,t);var r=t?o[L]:o[M];return e.replace(r,function(t,r,i,o,s){var a;return n("caret",e,t,r,i,o,s),se(r)?a="":se(i)?a=">="+r+".0.0 <"+(+r+1)+".0.0":se(o)?a="0"===r?">="+r+"."+i+".0 <"+r+"."+(+i+1)+".0":">="+r+"."+i+".0 <"+(+r+1)+".0.0":s?(n("replaceCaret pr",s),"-"!==s.charAt(0)&&(s="-"+s),a="0"===r?"0"===i?">="+r+"."+i+"."+o+s+" <"+r+"."+i+"."+(+o+1):">="+r+"."+i+"."+o+s+" <"+r+"."+(+i+1)+".0":">="+r+"."+i+"."+o+s+" <"+(+r+1)+".0.0"):(n("no pr"),a="0"===r?"0"===i?">="+r+"."+i+"."+o+" <"+r+"."+i+"."+(+o+1):">="+r+"."+i+"."+o+" <"+r+"."+(+i+1)+".0":">="+r+"."+i+"."+o+" <"+(+r+1)+".0.0"),n("caret return",a),a})}(e,t)}).join(" ")}(e,t),n("caret",e),e=function(e,t){return e.trim().split(/\s+/).map(function(e){return function(e,t){var r=t?o[A]:o[O];return e.replace(r,function(t,r,i,o,s){var a;return n("tilde",e,t,r,i,o,s),se(r)?a="":se(i)?a=">="+r+".0.0 <"+(+r+1)+".0.0":se(o)?a=">="+r+"."+i+".0 <"+r+"."+(+i+1)+".0":s?(n("replaceTilde pr",s),"-"!==s.charAt(0)&&(s="-"+s),a=">="+r+"."+i+"."+o+s+" <"+r+"."+(+i+1)+".0"):a=">="+r+"."+i+"."+o+" <"+r+"."+(+i+1)+".0",n("tilde return",a),a})}(e,t)}).join(" ")}(e,t),n("tildes",e),e=function(e,t){return n("replaceXRanges",e,t),e.split(/\s+/).map(function(e){return function(e,t){e=e.trim();var r=t?o[I]:o[T];return e.replace(r,function(t,r,i,o,s,a){n("xRange",e,t,r,i,o,s,a);var c=se(i),u=c||se(o),l=u||se(s),d=l;return"="===r&&d&&(r=""),c?t=">"===r||"<"===r?"<0.0.0":"*":r&&d?(u&&(o=0),l&&(s=0),">"===r?(r=">=",u?(i=+i+1,o=0,s=0):l&&(o=+o+1,s=0)):"<="===r&&(r="<",u?i=+i+1:o=+o+1),t=r+i+"."+o+"."+s):u?t=">="+i+".0.0 <"+(+i+1)+".0.0":l&&(t=">="+i+"."+o+".0 <"+i+"."+(+o+1)+".0"),n("xRange return",t),t})}(e,t)}).join(" ")}(e,t),n("xrange",e),e=function(e,t){return n("replaceStars",e,t),e.trim().replace(o[H],"")}(e,t),n("stars",e),e}(e,t)}).join(" ").split(/\s+/);return this.loose&&(s=s.filter(function(e){return!!e.match(i)})),s=s.map(function(e){return new re(e,t)})},oe.prototype.intersects=function(e,t){if(!(e instanceof oe))throw new TypeError("a Range is required");return this.set.some(function(n){return n.every(function(n){return e.set.some(function(e){return e.every(function(e){return n.intersects(e,t)})})})})},t.toComparators=function(e,t){return new oe(e,t).set.map(function(e){return e.map(function(e){return e.value}).join(" ").trim().split(" ")})},oe.prototype.test=function(e){if(!e)return!1;"string"==typeof e&&(e=new B(e,this.loose));for(var t=0;t<this.set.length;t++)if(ce(this.set[t],e))return!0;return!1},t.satisfies=ue,t.maxSatisfying=function(e,t,n){var r=null,i=null;try{var o=new oe(t,n)}catch(e){return null}return e.forEach(function(e){o.test(e)&&(r&&-1!==i.compare(e)||(i=new B(r=e,n)))}),r},t.minSatisfying=function(e,t,n){var r=null,i=null;try{var o=new oe(t,n)}catch(e){return null}return e.forEach(function(e){o.test(e)&&(r&&1!==i.compare(e)||(i=new B(r=e,n)))}),r},t.validRange=function(e,t){try{return new oe(e,t).range||"*"}catch(e){return null}},t.ltr=function(e,t,n){return le(e,t,"<",n)},t.gtr=function(e,t,n){return le(e,t,">",n)},t.outside=le,t.prerelease=function(e,t){var n=V(e,t);return n&&n.prerelease.length?n.prerelease:null},t.intersects=function(e,t,n){return e=new oe(e,n),t=new oe(t,n),e.intersects(t)}},function(e){e.exports={_args:[["diagnostic-channel@0.2.0","E:\\A\\_work\\r191\\a\\GitHub\\Extension"]],_from:"diagnostic-channel@0.2.0",_id:"diagnostic-channel@0.2.0",_inBundle:!1,_integrity:"sha1-zJmvlhLCP7H/8TYSxy8sv6qNWhc=",_location:"/diagnostic-channel",_phantomChildren:{},_requested:{type:"version",registry:!0,raw:"diagnostic-channel@0.2.0",name:"diagnostic-channel",escapedName:"diagnostic-channel",rawSpec:"0.2.0",saveSpec:null,fetchSpec:"0.2.0"},_requiredBy:["/applicationinsights"],_resolved:"https://registry.npmjs.org/diagnostic-channel/-/diagnostic-channel-0.2.0.tgz",_spec:"0.2.0",_where:"E:\\A\\_work\\r191\\a\\GitHub\\Extension",bugs:{url:"https://github.com/Microsoft/node-diagnostic-channel/issues"},dependencies:{semver:"^5.3.0"},description:"Provides a context-saving pub/sub channel to connect diagnostic event publishers and subscribers",devDependencies:{"@types/mocha":"^2.2.40","@types/node":"^7.0.12",mocha:"^3.2.0",rimraf:"^2.6.1",tslint:"^5.0.0",typescript:"^2.2.1"},files:["dist/src/**/*.d.ts","dist/src/**/*.js","LICENSE","README.md","package.json"],homepage:"https://github.com/Microsoft/node-diagnostic-channel",license:"MIT",main:"./dist/src/channel.js",name:"diagnostic-channel",repository:{type:"git",url:"git+https://github.com/Microsoft/node-diagnostic-channel.git"},scripts:{build:"tsc",clean:"rimraf ./dist",lint:"tslint -c tslint.json -p tsconfig.json",test:"mocha ./dist/tests/**/*.js"},types:"./dist/src/channel.d.ts",version:"0.2.0"}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(5),i=n(25);t.console={versionSpecifier:">= 4.0.0",patch:function(e){var t=new i.Writable,n=new i.Writable;t.write=function(e){if(!e)return!0;var t=e.toString();return r.channel.publish("console",{message:t}),!0},n.write=function(e){if(!e)return!0;var t=e.toString();return r.channel.publish("console",{message:t,stderr:!0}),!0};for(var o=new e.Console(t,n),s=function(t){var n=e[t];n&&(e[t]=function(){if(o[t])try{o[t].apply(o,arguments)}catch(e){}return n.apply(e,arguments)})},a=0,c=["log","info","warn","error","dir","time","timeEnd","trace","assert"];a<c.length;a++)s(c[a]);return e}},t.enable=function(){r.channel.registerMonkeyPatch("console",t.console),n(81)}},function(e,t){e.exports=require("console")},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(5);t.mongoCore2={versionSpecifier:">= 2.0.0 < 2.2.0",patch:function(e){var t=e.Server.prototype.connect;return e.Server.prototype.connect=function(){var e=t.apply(this,arguments),n=this.s.pool.write;this.s.pool.write=function(){var e="function"==typeof arguments[1]?1:2;return"function"==typeof arguments[e]&&(arguments[e]=r.channel.bindToContext(arguments[e])),n.apply(this,arguments)};var i=this.s.pool.logout;return this.s.pool.logout=function(){return"function"==typeof arguments[1]&&(arguments[1]=r.channel.bindToContext(arguments[1])),i.apply(this,arguments)},e},e}},t.enable=function(){r.channel.registerMonkeyPatch("mongodb-core",t.mongoCore2)}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(5);t.mongo2={versionSpecifier:">= 2.0.0 <= 2.2.x",patch:function(e){var t=e.instrument({operationIdGenerator:{next:function(){return r.channel.bindToContext(function(e){return e()})}}}),n={};return t.on("started",function(e){n[e.requestId]||(n[e.requestId]=e)}),t.on("succeeded",function(e){var t=n[e.requestId];t&&delete n[e.requestId],e.operationId(function(){return r.channel.publish("mongodb",{startedData:t,event:e,succeeded:!0})})}),t.on("failed",function(e){var t=n[e.requestId];t&&delete n[e.requestId],e.operationId(function(){return r.channel.publish("mongodb",{startedData:t,event:e,succeeded:!1})})}),e}},t.enable=function(){r.channel.registerMonkeyPatch("mongodb",t.mongo2)}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(5),i=n(1);t.mysql={versionSpecifier:">= 2.0.0 <= 2.14.x",patch:function(e,t){var o=function(e,t){return function(t,n){var i=e[t];i&&(e[t]=function(){for(var e=arguments.length-1,t=arguments.length-1;t>=0;--t){if("function"==typeof arguments[t]){e=t;break}if(void 0!==arguments[t])break}var o=arguments[e],s={result:null,startTime:null};"function"==typeof o&&(n?(s.startTime=process.hrtime(),arguments[e]=r.channel.bindToContext(n(s,o))):arguments[e]=r.channel.bindToContext(o));var a=i.apply(this,arguments);return s.result=a,a})}},s=function(e,t){return o(e.prototype)},a=n(85)(i.dirname(t)+"/lib/Connection");["connect","changeUser","ping","statistics","end"].forEach(function(e){return s(a)(e)}),o(a)("createQuery",function(e,t){return function(n){var i=process.hrtime(e.startTime),o=1e3*i[0]+i[1]/1e6|0;r.channel.publish("mysql",{query:e.result,callbackArgs:arguments,err:n,duration:o}),t.apply(this,arguments)}});var c=n(86)(i.dirname(t)+"/lib/Pool");return["_enqueueCallback"].forEach(function(e){return s(c)(e)}),e}},t.enable=function(){r.channel.registerMonkeyPatch("mysql",t.mysql)}},function(e,t){function n(e){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}n.keys=function(){return[]},n.resolve=n,e.exports=n,n.id=85},function(e,t){function n(e){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}n.keys=function(){return[]},n.resolve=n,e.exports=n,n.id=86},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(5);t.postgresPool1={versionSpecifier:"1.x",patch:function(e){var t=e.prototype.connect;return e.prototype.connect=function(e){e&&(arguments[0]=r.channel.bindToContext(e)),t.apply(this,arguments)},e}},t.enable=function(){r.channel.registerMonkeyPatch("pg-pool",t.postgresPool1)}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(5),i=n(19);t.postgres6={versionSpecifier:"6.x",patch:function(e,t){var n=e.Client.prototype.query,o="__diagnosticOriginalFunc";return e.Client.prototype.query=function(e,t,s){var a,c={query:{},database:{host:this.connectionParameters.host,port:this.connectionParameters.port},result:null,error:null,duration:0},u=process.hrtime();function l(e){e&&e[o]&&(e=e[o]);var t=r.channel.bindToContext(function(t,n){var o=process.hrtime(u);if(c.result=n&&{rowCount:n.rowCount,command:n.command},c.error=t,c.duration=Math.ceil(1e3*o[0]+o[1]/1e6),r.channel.publish("postgres",c),t){if(e)return e.apply(this,arguments);a&&a instanceof i.EventEmitter&&a.emit("error",t)}else e&&e.apply(this,arguments)});try{return Object.defineProperty(t,o,{value:e}),t}catch(t){return e}}try{"string"==typeof e?t instanceof Array?(c.query.preparable={text:e,args:t},s=l(s)):(c.query.text=e,s?s=l(s):t=l(t)):("string"==typeof e.name?c.query.plan=e.name:e.values instanceof Array?c.query.preparable={text:e.text,args:e.values}:c.query.text=e.text,s?s=l(s):t?t=l(t):e.callback=l(e.callback))}catch(e){return n.apply(this,arguments)}return arguments[0]=e,arguments[1]=t,arguments[2]=s,arguments.length=arguments.length>3?arguments.length:3,a=n.apply(this,arguments)},e}},t.enable=function(){r.channel.registerMonkeyPatch("pg",t.postgres6)}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(5);t.redis={versionSpecifier:">= 2.0.0 < 3.0.0",patch:function(e){var t=e.RedisClient.prototype.internal_send_command;return e.RedisClient.prototype.internal_send_command=function(e){if(e){var n=e.callback;if(!n||!n.pubsubBound){var i=this.address,o=process.hrtime();e.callback=r.channel.bindToContext(function(t,s){var a=process.hrtime(o),c=1e3*a[0]+a[1]/1e6|0;r.channel.publish("redis",{duration:c,address:i,commandObj:e,err:t,result:s}),"function"==typeof n&&n.apply(this,arguments)}),e.callback.pubsubBound=!0}}return t.call(this,e)},e}},t.enable=function(){r.channel.registerMonkeyPatch("redis",t.redis)}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(5);t.winston={versionSpecifier:"2.x",patch:function(e){var t,n=e.Logger.prototype.log,i=function(n,i,o){var s;return s=t===e.config.npm.levels?"npm":t===e.config.syslog.levels?"syslog":"unknown",r.channel.publish("winston",{level:n,message:i,meta:o,levelKind:s}),i};return e.Logger.prototype.log=function(){return t=this.levels,this.filters&&0!==this.filters.length?this.filters[this.filters.length-1]!==i&&(this.filters=this.filters.filter(function(e){return e!==i}),this.filters.push(i)):this.filters=[i],n.apply(this,arguments)},e}},t.enable=function(){r.channel.registerMonkeyPatch("winston",t.winston)}},function(e,t,n){(function(){"use strict";
/**
 * @license
 * Copyright Google Inc. All Rights Reserved.
 *
 * Use of this source code is governed by an MIT-style license that can be
 * found in the LICENSE file at https://angular.io/license
 */!function(e){if(e.Zone)throw new Error("Zone already loaded.");var t=function(){function t(e,t){this._properties=null,this._parent=e,this._name=t?t.name||"unnamed":"<root>",this._properties=t&&t.properties||{},this._zoneDelegate=new n(this,this._parent&&this._parent._zoneDelegate,t)}return t.assertZonePatched=function(){if(e.Promise!==O)throw new Error("Zone.js has detected that ZoneAwarePromise `(window|global).Promise` has been overwritten.\nMost likely cause is that a Promise polyfill has been loaded after Zone.js (Polyfilling Promise api is not necessary when zone.js is loaded. If you must load one, do so before loading zone.js.)")},Object.defineProperty(t,"current",{get:function(){return u.zone},enumerable:!0,configurable:!0}),Object.defineProperty(t,"currentTask",{get:function(){return l},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"parent",{get:function(){return this._parent},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"name",{get:function(){return this._name},enumerable:!0,configurable:!0}),t.prototype.get=function(e){var t=this.getZoneWith(e);if(t)return t._properties[e]},t.prototype.getZoneWith=function(e){for(var t=this;t;){if(t._properties.hasOwnProperty(e))return t;t=t._parent}return null},t.prototype.fork=function(e){if(!e)throw new Error("ZoneSpec required!");return this._zoneDelegate.fork(this,e)},t.prototype.wrap=function(e,t){if("function"!=typeof e)throw new Error("Expecting function got: "+e);var n=this._zoneDelegate.intercept(this,e,t),r=this;return function(){return r.runGuarded(n,this,arguments,t)}},t.prototype.run=function(e,t,n,r){void 0===t&&(t=null),void 0===n&&(n=null),void 0===r&&(r=null),u=new i(u,this);try{return this._zoneDelegate.invoke(this,e,t,n,r)}finally{u=u.parent}},t.prototype.runGuarded=function(e,t,n,r){void 0===t&&(t=null),void 0===n&&(n=null),void 0===r&&(r=null),u=new i(u,this);try{try{return this._zoneDelegate.invoke(this,e,t,n,r)}catch(e){if(this._zoneDelegate.handleError(this,e))throw e}}finally{u=u.parent}},t.prototype.runTask=function(e,t,n){if(e.runCount++,e.zone!=this)throw new Error("A task can only be run in the zone which created it! (Creation: "+e.zone.name+"; Execution: "+this.name+")");var r=l;l=e,u=new i(u,this);try{"macroTask"==e.type&&e.data&&!e.data.isPeriodic&&(e.cancelFn=null);try{return this._zoneDelegate.invokeTask(this,e,t,n)}catch(e){if(this._zoneDelegate.handleError(this,e))throw e}}finally{u=u.parent,l=r}},t.prototype.scheduleMicroTask=function(e,t,n,i){return this._zoneDelegate.scheduleTask(this,new r("microTask",this,e,t,n,i,null))},t.prototype.scheduleMacroTask=function(e,t,n,i,o){return this._zoneDelegate.scheduleTask(this,new r("macroTask",this,e,t,n,i,o))},t.prototype.scheduleEventTask=function(e,t,n,i,o){return this._zoneDelegate.scheduleTask(this,new r("eventTask",this,e,t,n,i,o))},t.prototype.cancelTask=function(e){var t=this._zoneDelegate.cancelTask(this,e);return e.runCount=-1,e.cancelFn=null,t},t}();t.__symbol__=o;var n=function(){function e(e,t,n){this._taskCounts={microTask:0,macroTask:0,eventTask:0},this.zone=e,this._parentDelegate=t,this._forkZS=n&&(n&&n.onFork?n:t._forkZS),this._forkDlgt=n&&(n.onFork?t:t._forkDlgt),this._forkCurrZone=n&&(n.onFork?this.zone:t.zone),this._interceptZS=n&&(n.onIntercept?n:t._interceptZS),this._interceptDlgt=n&&(n.onIntercept?t:t._interceptDlgt),this._interceptCurrZone=n&&(n.onIntercept?this.zone:t.zone),this._invokeZS=n&&(n.onInvoke?n:t._invokeZS),this._invokeDlgt=n&&(n.onInvoke?t:t._invokeDlgt),this._invokeCurrZone=n&&(n.onInvoke?this.zone:t.zone),this._handleErrorZS=n&&(n.onHandleError?n:t._handleErrorZS),this._handleErrorDlgt=n&&(n.onHandleError?t:t._handleErrorDlgt),this._handleErrorCurrZone=n&&(n.onHandleError?this.zone:t.zone),this._scheduleTaskZS=n&&(n.onScheduleTask?n:t._scheduleTaskZS),this._scheduleTaskDlgt=n&&(n.onScheduleTask?t:t._scheduleTaskDlgt),this._scheduleTaskCurrZone=n&&(n.onScheduleTask?this.zone:t.zone),this._invokeTaskZS=n&&(n.onInvokeTask?n:t._invokeTaskZS),this._invokeTaskDlgt=n&&(n.onInvokeTask?t:t._invokeTaskDlgt),this._invokeTaskCurrZone=n&&(n.onInvokeTask?this.zone:t.zone),this._cancelTaskZS=n&&(n.onCancelTask?n:t._cancelTaskZS),this._cancelTaskDlgt=n&&(n.onCancelTask?t:t._cancelTaskDlgt),this._cancelTaskCurrZone=n&&(n.onCancelTask?this.zone:t.zone),this._hasTaskZS=n&&(n.onHasTask?n:t._hasTaskZS),this._hasTaskDlgt=n&&(n.onHasTask?t:t._hasTaskDlgt),this._hasTaskCurrZone=n&&(n.onHasTask?this.zone:t.zone)}return e.prototype.fork=function(e,n){return this._forkZS?this._forkZS.onFork(this._forkDlgt,this.zone,e,n):new t(e,n)},e.prototype.intercept=function(e,t,n){return this._interceptZS?this._interceptZS.onIntercept(this._interceptDlgt,this._interceptCurrZone,e,t,n):t},e.prototype.invoke=function(e,t,n,r,i){return this._invokeZS?this._invokeZS.onInvoke(this._invokeDlgt,this._invokeCurrZone,e,t,n,r,i):t.apply(n,r)},e.prototype.handleError=function(e,t){return!this._handleErrorZS||this._handleErrorZS.onHandleError(this._handleErrorDlgt,this._handleErrorCurrZone,e,t)},e.prototype.scheduleTask=function(e,t){try{if(this._scheduleTaskZS)return this._scheduleTaskZS.onScheduleTask(this._scheduleTaskDlgt,this._scheduleTaskCurrZone,e,t);if(t.scheduleFn)t.scheduleFn(t);else{if("microTask"!=t.type)throw new Error("Task is missing scheduleFn.");!function(e){g(),d.push(e)}(t)}return t}finally{e==this.zone&&this._updateTaskCount(t.type,1)}},e.prototype.invokeTask=function(e,t,n,r){try{return this._invokeTaskZS?this._invokeTaskZS.onInvokeTask(this._invokeTaskDlgt,this._invokeTaskCurrZone,e,t,n,r):t.callback.apply(n,r)}finally{e!=this.zone||"eventTask"==t.type||t.data&&t.data.isPeriodic||this._updateTaskCount(t.type,-1)}},e.prototype.cancelTask=function(e,t){var n;if(this._cancelTaskZS)n=this._cancelTaskZS.onCancelTask(this._cancelTaskDlgt,this._cancelTaskCurrZone,e,t);else{if(!t.cancelFn)throw new Error("Task does not support cancellation, or is already canceled.");n=t.cancelFn(t)}return e==this.zone&&this._updateTaskCount(t.type,-1),n},e.prototype.hasTask=function(e,t){return this._hasTaskZS&&this._hasTaskZS.onHasTask(this._hasTaskDlgt,this._hasTaskCurrZone,e,t)},e.prototype._updateTaskCount=function(e,t){var n=this._taskCounts,r=n[e],i=n[e]=r+t;if(i<0)throw new Error("More tasks executed then were scheduled.");if(0==r||0==i){var o={microTask:n.microTask>0,macroTask:n.macroTask>0,eventTask:n.eventTask>0,change:e};try{this.hasTask(this.zone,o)}finally{this._parentDelegate&&this._parentDelegate._updateTaskCount(e,t)}}},e}(),r=function(){function e(e,t,n,r,i,o,s){this.runCount=0,this.type=e,this.zone=t,this.source=n,this.data=i,this.scheduleFn=o,this.cancelFn=s,this.callback=r;var a=this;this.invoke=function(){f++;try{return t.runTask(a,this,arguments)}finally{1==f&&v(),f--}}}return e.prototype.toString=function(){return this.data&&void 0!==this.data.handleId?this.data.handleId:Object.prototype.toString.call(this)},e.prototype.toJSON=function(){return{type:this.type,source:this.source,data:this.data,zone:this.zone.name,invoke:this.invoke,scheduleFn:this.scheduleFn,cancelFn:this.cancelFn,runCount:this.runCount,callback:this.callback}},e}(),i=function(){return function(e,t){this.parent=e,this.zone=t}}();function o(e){return"__zone_symbol__"+e}var s=o("setTimeout"),a=o("Promise"),c=o("then"),u=new i(null,new t(null,null)),l=null,d=[],h=!1,p=[],f=0;function g(){0===f&&0===d.length&&(e[a]?e[a].resolve(0)[c](v):e[s](v,0))}function m(e){var t=e&&e.rejection;t&&console.error("Unhandled Promise rejection:",t instanceof Error?t.message:t,"; Zone:",e.zone.name,"; Task:",e.task&&e.task.source,"; Value:",t,t instanceof Error?t.stack:void 0),console.error(e)}function v(){if(!h){for(h=!0;d.length;){var e=d;d=[];for(var t=0;t<e.length;t++){var n=e[t];try{n.zone.runTask(n,null,null)}catch(e){m(e)}}}for(;p.length;)for(var r=function(){var e=p.shift();try{e.zone.runGuarded(function(){throw e})}catch(e){m(e)}};p.length;)r();h=!1}}function C(e){return e&&e.then}function y(e){return e}function w(e){return O.reject(e)}var b=o("state"),S=o("value"),_="Promise.then",P=null,x=!0,k=!1,E=0;function T(e,t){return function(n){I(e,t,n)}}function I(e,n,r){if(e[b]===P)if(r instanceof O&&r.hasOwnProperty(b)&&r.hasOwnProperty(S)&&r[b]!==P)D(r),I(e,r[b],r[S]);else if(C(r))r.then(T(e,n),T(e,!1));else{e[b]=n;var i=e[S];e[S]=r;for(var o=0;o<i.length;)R(e,i[o++],i[o++],i[o++],i[o++]);if(0==i.length&&n==k){e[b]=E;try{throw new Error("Uncaught (in promise): "+r+(r&&r.stack?"\n"+r.stack:""))}catch(n){var s=n;s.rejection=r,s.promise=e,s.zone=t.current,s.task=t.currentTask,p.push(s),g()}}}return e}function D(e){if(e[b]===E){e[b]=k;for(var t=0;t<p.length;t++)if(e===p[t].promise){p.splice(t,1);break}}}function R(e,t,n,r,i){D(e);var o=e[b]?r||y:i||w;t.scheduleMicroTask(_,function(){try{I(n,!0,t.run(o,null,[e[S]]))}catch(e){I(n,!1,e)}})}var O=function(){function e(t){if(!(this instanceof e))throw new Error("Must be an instanceof Promise.");this[b]=P,this[S]=[];try{t&&t(T(this,x),T(this,k))}catch(e){I(this,!1,e)}}return e.toString=function(){return"function ZoneAwarePromise() { [native code] }"},e.resolve=function(e){return I(new this(null),x,e)},e.reject=function(e){return I(new this(null),k,e)},e.race=function(e){var t,n,r=new this(function(e,r){var i;t=(i=[e,r])[0],n=i[1]});function i(e){r&&(r=t(e))}function o(e){r&&(r=n(e))}for(var s=0,a=e;s<a.length;s++){var c=a[s];C(c)||(c=this.resolve(c)),c.then(i,o)}return r},e.all=function(e){for(var t,n,r=new this(function(e,r){t=e,n=r}),i=0,o=[],s=0,a=e;s<a.length;s++){var c=a[s];C(c)||(c=this.resolve(c)),c.then(function(e){return function(n){o[e]=n,--i||t(o)}}(i),n),i++}return i||t(o),r},e.prototype.then=function(e,n){var r=new this.constructor(null),i=t.current;return this[b]==P?this[S].push(i,r,e,n):R(this,i,r,e,n),r},e.prototype.catch=function(e){return this.then(null,e)},e}();O.resolve=O.resolve,O.reject=O.reject,O.race=O.race,O.all=O.all;var A,F=e[o("Promise")]=e.Promise;function N(e){var t=e.prototype,n=t[o("then")]=t.then;t.then=function(e,t){var r=this;return new O(function(e,t){n.call(r,e,t)}).then(e,t)}}if(e.Promise=O,F&&(N(F),void 0!==e.fetch)){var M=void 0;try{M=e.fetch()}catch(t){M=e.fetch("about:blank")}M.then(function(){return null},function(){return null}),M.constructor!=F&&M.constructor!=O&&N(M.constructor)}Promise[t.__symbol__("uncaughtPromiseErrors")]=p,function(e){e[e.blackList=0]="blackList",e[e.transition=1]="transition"}(A||(A={}));var L,q=e[o("Error")]=e.Error,j={};e.Error=V;var W="stackRewrite",$=function(e,t){if(!e[t]){var n=o(t);e[t]={configurable:!0,enumerable:!0,get:function(){if(!this[n]){var e=this[o("error")];e&&(this[n]=e[t])}return this[n]},set:function(e){this[n]=e}}}},U=function(e,t){e[t]||(e[t]={configurable:!0,enumerable:!0,writable:!0,value:function(){var e=this[o("error")],n=e&&e[t]||this[t];if(n)return n.apply(e,arguments)}})},H=function(){for(var e=Object.create(null),t=new q,n=Object.getOwnPropertyNames(t),r=0;r<n.length;r++){var i=n[r];Object.prototype.hasOwnProperty.call(t,i)&&$(e,i)}var o=q.prototype;if(o){var s=Object.getOwnPropertyNames(o);for(r=0;r<s.length;r++)"constructor"!==(i=s[r])&&"toString"!==i&&"toSource"!==i&&$(e,i)}return $(e,"originalStack"),$(e,"zoneAwareStack"),U(e,"toString"),U(e,"toSource"),e}(),z=function(e){if(e===V.prototype)return H;var t=Object.create(null),n=Object.getOwnPropertyNames(H),r=Object.getOwnPropertyNames(e);return n.forEach(function(e){0===r.filter(function(t){return t===e}).length&&(t[e]=H[e])}),t};function V(){if(!(this instanceof V))return V.apply(Object.create(V.prototype),arguments);var e=q.apply(this,arguments);if(this[o("error")]=e,e.originalStack=e.stack,V[W]&&e.originalStack){for(var t=e.originalStack.split("\n"),n=u,r=0;t[r]!==L&&r<t.length;)r++;for(;r<t.length&&n;r++){var i=t[r];if(i.trim()){var s=j.hasOwnProperty(i)&&j[i];s===A.blackList?(t.splice(r,1),r--):s===A.transition?n.parent?(t[r]+=" ["+n.parent.zone.name+" => "+n.zone.name+"]",n=n.parent):n=null:t[r]+=" ["+n.zone.name+"]"}}e.stack=e.zoneAwareStack=t.join("\n")}return Object.defineProperties(this,z(Object.getPrototypeOf(this))),this}V.prototype=q.prototype,V[t.__symbol__("blacklistedStackFrames")]=j,V[W]=!1,q.hasOwnProperty("stackTraceLimit")&&(q.stackTraceLimit=Math.max(q.stackTraceLimit,15),Object.defineProperty(V,"stackTraceLimit",{get:function(){return q.stackTraceLimit},set:function(e){return q.stackTraceLimit=e}})),q.hasOwnProperty("captureStackTrace")&&Object.defineProperty(V,"captureStackTrace",{value:function(e,t){q.captureStackTrace(e,t)}}),Object.defineProperty(V,"prepareStackTrace",{get:function(){return q.prepareStackTrace},set:function(e){return q.prepareStackTrace=e&&"function"==typeof e?function(t,n){if(n)for(var r=0;r<n.length;r++){if("zoneCaptureStackTrace"===n[r].getFunctionName()){n.splice(r,1);break}}return e.apply(this,[t,n])}:e}});var B=t.current.fork({name:"detect",onInvoke:function(e,t,n,r,i,o,s){return e.invoke(n,r,i,o,s)},onHandleError:function(e,t,n,r){if(r.originalStack&&Error===V)for(var i=r.originalStack.split(/\n/),o=!1,s=!1,a=!1;i.length;){var c=i.shift();if(/:\d+:\d+/.test(c)){var u=c.split("(")[0].split("@")[0],l=A.transition;if(-1!==u.indexOf("ZoneAwareError")&&(L=c),-1!==u.indexOf("runGuarded")?s=!0:-1!==u.indexOf("runTask")?a=!0:-1!==u.indexOf("run")?o=!0:l=A.blackList,j[c]=l,o&&s&&a){V[W]=!0;break}}}return!1}});B.runTask(B.scheduleMacroTask("detect",function(){B.run(function(){B.runGuarded(function(){throw new Error("blacklistStackFrames")})})},null,function(){return null},null)),e.Zone=t}("object"==typeof window&&window||"object"==typeof self&&self||global);var e=function(e){return"__zone_symbol__"+e},t="object"==typeof window&&window||"object"==typeof self&&self||global;
/**
 * @license
 * Copyright Google Inc. All Rights Reserved.
 *
 * Use of this source code is governed by an MIT-style license that can be
 * found in the LICENSE file at https://angular.io/license
 */!("nw"in t)&&"undefined"!=typeof process&&{}.toString.call(process);var r=e("eventTasks");function i(e,t,n,i,o){var s=e[r];if(s)for(var a=0;a<s.length;a++){var c=s[a],u=c.data,l=u.handler;if((u.handler===t||l.listener===t)&&u.useCapturing===i&&u.eventName===n)return o&&s.splice(a,1),c}return null}var o=function(e,n){return{useCapturing:n[2],eventName:n[0],handler:n[1],target:e||t,name:n[0],invokeAddFunc:function(e,t){return t&&t.invoke?this.target[e](this.eventName,t.invoke,this.useCapturing):this.target[e](this.eventName,t,this.useCapturing)},invokeRemoveFunc:function(e,t){return t&&t.invoke?this.target[e](this.eventName,t.invoke,this.useCapturing):this.target[e](this.eventName,t,this.useCapturing)}}};function s(t,n,s,a,c,u){void 0===s&&(s=!0),void 0===a&&(a=!1),void 0===c&&(c=!1),void 0===u&&(u=o);var l=e(t),d=e(n),h=!s&&void 0;function p(e){var t=e.data;return function(e,t,n){var i=e[r];i||(i=e[r]=[]),n?i.unshift(t):i.push(t)}(t.target,e,c),t.invokeAddFunc(l,e)}function f(e){var t=e.data;return i(t.target,e.invoke,t.eventName,t.useCapturing,!0),t.invokeRemoveFunc(d,e)}return function(e,n){var r=u(e,n);r.useCapturing=r.useCapturing||h;var o=null;"function"==typeof r.handler?o=r.handler:r.handler&&r.handler.handleEvent&&(o=function(e){return r.handler.handleEvent(e)});var s=!1;try{s=r.handler&&"[object FunctionWrapper]"===r.handler.toString()}catch(e){return}if(!o||s)return r.invokeAddFunc(l,r.handler);if(!a){var c=i(r.target,r.handler,r.eventName,r.useCapturing,!1);if(c)return r.invokeAddFunc(l,c)}var d=Zone.current,g=r.target.constructor.name+"."+t+":"+r.eventName;d.scheduleEventTask(g,o,r,p,f)}}function a(t,n,r){void 0===n&&(n=!0),void 0===r&&(r=o);var s=e(t),a=!n&&void 0;return function(e,t){var n=r(e,t);n.useCapturing=n.useCapturing||a;var o=i(n.target,n.handler,n.eventName,n.useCapturing,!0);o?o.zone.cancelTask(o):n.invokeRemoveFunc(s,n.handler)}}function c(t,n,r){for(var i=t;i&&-1===Object.getOwnPropertyNames(i).indexOf(n);)i=Object.getPrototypeOf(i);!i&&t[n]&&(i=t);var o,s=e(n);return i&&!(o=i[s])&&(o=i[s]=i[n],i[n]=function(e,t){try{return Function("f","return function "+e+"(){return f(this, arguments)}")(t)}catch(e){return function(){return t(this,arguments)}}}(n,r(o,s,n))),o}s("addEventListener","removeEventListener"),a("removeEventListener"),e("originalInstance");
/**
 * @license
 * Copyright Google Inc. All Rights Reserved.
 *
 * Use of this source code is governed by an MIT-style license that can be
 * found in the LICENSE file at https://angular.io/license
 */
var u,l,d,h=function(e){return function(t,n){return e(t,n),t}},p="addListener",f="prependListener",g="removeListener",m="removeAllListeners",v="listeners",C="on",y=h(s(p,g,!1,!0,!1)),w=h(s(f,g,!1,!0,!0)),b=h(a(g,!1)),S=h(function(n,i){void 0===i&&(i=!0);var o=e(n),s=!i&&void 0;return function(e,n){var i=e||t;if(0===n.length)return i[r]=[],void i[o]();var a=n[0];!function(e,t,n,i){var o=e[r];if(o){for(var s=[],a=o.length-1;a>=0;a--){var c=o[a],u=c.data;u.eventName===t&&u.useCapturing===n&&(s.push(c),i&&o.splice(a,1))}}}(i,a,n[1]||s,!0),i[o](a)}}(m,!1)),_=(e(v),function(e,n){var i=n[0],o=e||t;return o[r]?o[r].filter(function(e){return e.data.eventName===i}).map(function(e){return e.data.handler}):[]});try{u=n(19)}catch(e){}u&&u.EventEmitter&&(l=u.EventEmitter.prototype)&&l.addListener&&(c(l,p,function(){return y}),c(l,f,function(){return w}),c(l,g,function(){return b}),c(l,m,function(){return S}),c(l,v,function(){return _}),l[C]=l[p])
/**
 * @license
 * Copyright Google Inc. All Rights Reserved.
 *
 * Use of this source code is governed by an MIT-style license that can be
 * found in the LICENSE file at https://angular.io/license
 */;try{d=n(2)}catch(e){}
/**
 * @license
 * Copyright Google Inc. All Rights Reserved.
 *
 * Use of this source code is governed by an MIT-style license that can be
 * found in the LICENSE file at https://angular.io/license
 */
function P(e,t,n,r){var i=null,o=null;n+=r;var s={};function a(t){var n=t.data;return n.args[0]=function(){t.invoke.apply(this,arguments),delete s[n.handleId]},n.handleId=i.apply(e,n.args),s[n.handleId]=t,t}function u(e){return delete s[e.data.handleId],o(e.data.handleId)}i=c(e,t+=r,function(n){return function(i,o){if("function"==typeof o[0]){var s=Zone.current,c={handleId:null,isPeriodic:"Interval"===r,delay:"Timeout"===r||"Interval"===r?o[1]||0:null,args:o},l=s.scheduleMacroTask(t,o[0],c,a,u);if(!l)return l;var d=l.data.handleId;return d.ref&&d.unref&&(l.ref=d.ref.bind(d),l.unref=d.unref.bind(d)),l}return n.apply(e,o)}}),o=c(e,n,function(t){return function(n,r){var i="number"==typeof r[0]?s[r[0]]:r[0];i&&"string"==typeof i.type?(i.cancelFn&&i.data.isPeriodic||0===i.runCount)&&i.zone.cancelTask(i):t.apply(e,r)}})}
/**
 * @license
 * Copyright Google Inc. All Rights Reserved.
 *
 * Use of this source code is governed by an MIT-style license that can be
 * found in the LICENSE file at https://angular.io/license
 */d&&["access","appendFile","chmod","chown","close","exists","fchmod","fchown","fdatasync","fstat","fsync","ftruncate","futimes","lchmod","lchown","link","lstat","mkdir","mkdtemp","open","read","readdir","readFile","readlink","realpath","rename","rmdir","stat","symlink","truncate","unlink","utimes","write","writeFile"].filter(function(e){return!!d[e]&&"function"==typeof d[e]}).forEach(function(e){!function(e,t,n){var r=null;function i(e){var t=e.data;return t.args[t.callbackIndex]=function(){e.invoke.apply(this,arguments)},r.apply(t.target,t.args),e}r=c(e,t,function(e){return function(t,r){var o=n(t,r);return o.callbackIndex>=0&&"function"==typeof r[o.callbackIndex]?Zone.current.scheduleMacroTask(o.name,r[o.callbackIndex],o,i,null):e.apply(t,r)}})}(d,e,function(t,n){return{name:"fs."+e,args:n,callbackIndex:n.length>0?n.length-1:-1,target:t}})});var x,k,E="set",T="object"==typeof window&&window||"object"==typeof self&&self||global,I=n(92);P(I,E,"clear","Timeout"),P(I,E,"clear","Interval"),P(I,E,"clear","Immediate"),global.setTimeout!==I.setTimeout&&(P(T,E,"clear","Timeout"),P(T,E,"clear","Interval"),P(T,E,"clear","Immediate")),function(){var e=null;function t(t){var n=t.data;return n[0]=function(){t.invoke.apply(this,arguments)},e.apply(process,n),t}e=c(process,"nextTick",function(e){return function(n,r){if("function"==typeof r[0]){var i=Zone.current,o=i.scheduleMicroTask("nextTick",r[0],r,t);return o}return e.apply(process,r)}})}();try{x=n(37)}catch(e){}if(x){var D=x.randomBytes;x.randomBytes=function(e,t){if(t){var n=Zone.current,r=x.constructor.name+".randomBytes";return D(e,n.wrap(t,r))}return D(e)}.bind(x);var R=x.pbkdf2;x.pbkdf2=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var n=e[e.length-1];if("function"==typeof n){var r=Zone.current,i=x.constructor.name+".pbkdf2";return e[e.length-1]=r.wrap(n,i),R.apply(void 0,e)}return R.apply(void 0,e)}.bind(x)}try{k=n(93)}catch(e){}if(k&&k.ClientRequest){var O=k.ClientRequest.bind(k);k.ClientRequest=function(e,t){if(t){var n=Zone.current;return new O(e,n.wrap(t,"http.ClientRequest"))}return new O(e)}}})()},function(e,t){e.exports=require("timers")},function(e,t){e.exports=require("_http_client")},function(e,t,n){"use strict";var r=n(36),i=function(){function e(t){if(e.INSTANCE)throw new Error("Console logging adapter tracking should be configured from the applicationInsights object");this._client=t,e.INSTANCE=this}return e.prototype.enable=function(e,t){r.IsInitialized&&(n(95).enable(e&&t,this._client),n(113).enable(e,this._client),n(114).enable(e,this._client))},e.prototype.isInitialized=function(){return this._isInitialized},e.prototype.dispose=function(){e.INSTANCE=null,this.enable(!1,!1)},e._methodNames=["debug","info","log","warn","error"],e}();e.exports=i},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(9),i=n(5),o=[],s=function(e){o.forEach(function(t){var n=e.data.message;n.lastIndexOf("\n")==n.length-1&&(n=n.substring(0,n.length-1)),t.trackTrace({message:n,severity:e.data.stderr?r.SeverityLevel.Warning:r.SeverityLevel.Information})})};t.enable=function(e,t){e?(0===o.length&&i.channel.subscribe("console",s),o.push(t)):0===(o=o.filter(function(e){return e!=t})).length&&i.channel.unsubscribe("console",s)}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(47),i=function(){function e(){}return e.TYPE_HTTP="Http",e.TYPE_AI="Http (tracked component)",e}();t.RemoteDependencyDataConstants=i,t.domainSupportsProperties=function(e){return"properties"in e||e instanceof r.EventData||e instanceof r.ExceptionData||e instanceof r.MessageData||e instanceof r.MetricData||e instanceof r.PageViewData||e instanceof r.RemoteDependencyData||e instanceof r.RequestData}},function(e,t,n){"use strict";var r,i=this&&this.__extends||(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},function(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),o=function(e){function t(){var t=e.call(this)||this;return t.ver=2,t.properties={},t.measurements={},t}return i(t,e),t}(n(12));e.exports=o},function(e,t,n){"use strict";var r=function(){return function(){this.applicationVersion="ai.application.ver",this.deviceId="ai.device.id",this.deviceLocale="ai.device.locale",this.deviceModel="ai.device.model",this.deviceOEMName="ai.device.oemName",this.deviceOSVersion="ai.device.osVersion",this.deviceType="ai.device.type",this.locationIp="ai.location.ip",this.operationId="ai.operation.id",this.operationName="ai.operation.name",this.operationParentId="ai.operation.parentId",this.operationSyntheticSource="ai.operation.syntheticSource",this.operationCorrelationVector="ai.operation.correlationVector",this.sessionId="ai.session.id",this.sessionIsFirst="ai.session.isFirst",this.userAccountId="ai.user.accountId",this.userId="ai.user.id",this.userAuthUserId="ai.user.authUserId",this.cloudRole="ai.cloud.role",this.cloudRoleInstance="ai.cloud.roleInstance",this.internalSdkVersion="ai.internal.sdkVersion",this.internalAgentVersion="ai.internal.agentVersion",this.internalNodeName="ai.internal.nodeName"}}();e.exports=r},function(e,t,n){"use strict";var r,i=this&&this.__extends||(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},function(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),o=function(e){function t(){return e.call(this)||this}return i(t,e),t}(n(48));e.exports=o},function(e,t,n){"use strict";var r=n(49),i=function(){return function(){this.kind=r.Measurement}}();e.exports=i},function(e,t,n){"use strict";var r=function(){return function(){this.ver=1,this.sampleRate=100,this.tags={}}}();e.exports=r},function(e,t,n){"use strict";var r,i=this&&this.__extends||(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},function(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),o=function(e){function t(){var t=e.call(this)||this;return t.ver=2,t.exceptions=[],t.properties={},t.measurements={},t}return i(t,e),t}(n(12));e.exports=o},function(e,t,n){"use strict";var r=function(){return function(){this.hasFullStack=!0,this.parsedStack=[]}}();e.exports=r},function(e,t,n){"use strict";var r,i=this&&this.__extends||(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},function(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),o=function(e){function t(){var t=e.call(this)||this;return t.ver=2,t.properties={},t}return i(t,e),t}(n(12));e.exports=o},function(e,t,n){"use strict";var r,i=this&&this.__extends||(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},function(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),o=function(e){function t(){var t=e.call(this)||this;return t.ver=2,t.metrics=[],t.properties={},t}return i(t,e),t}(n(12));e.exports=o},function(e,t,n){"use strict";var r,i=this&&this.__extends||(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},function(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),o=function(e){function t(){var t=e.call(this)||this;return t.ver=2,t.properties={},t.measurements={},t}return i(t,e),t}(n(50));e.exports=o},function(e,t,n){"use strict";var r,i=this&&this.__extends||(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},function(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),o=function(e){function t(){var t=e.call(this)||this;return t.ver=2,t.success=!0,t.properties={},t.measurements={},t}return i(t,e),t}(n(12));e.exports=o},function(e,t,n){"use strict";var r,i=this&&this.__extends||(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},function(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),o=function(e){function t(){var t=e.call(this)||this;return t.ver=2,t.properties={},t.measurements={},t}return i(t,e),t}(n(12));e.exports=o},function(e,t,n){"use strict";var r;!function(e){e[e.Verbose=0]="Verbose",e[e.Information=1]="Information",e[e.Warning=2]="Warning",e[e.Error=3]="Error",e[e.Critical=4]="Critical"}(r||(r={})),e.exports=r},function(e,t,n){"use strict";var r=function(){return function(){}}();e.exports=r},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),function(e){for(var n in e)t.hasOwnProperty(n)||(t[n]=e[n])}(n(112))},function(e,t,n){"use strict";var r;Object.defineProperty(t,"__esModule",{value:!0}),t.telemetryTypeToBaseType=function(e){switch(e){case r.Event:return"EventData";case r.Exception:return"ExceptionData";case r.Trace:return"MessageData";case r.Metric:return"MetricData";case r.Request:return"RequestData";case r.Dependency:return"RemoteDependencyData"}},t.baseTypeToTelemetryType=function(e){switch(e){case"EventData":return r.Event;case"ExceptionData":return r.Exception;case"MessageData":return r.Trace;case"MetricData":return r.Metric;case"RequestData":return r.Request;case"RemoteDependencyData":return r.Dependency}},function(e){e[e.Event=0]="Event",e[e.Exception=1]="Exception",e[e.Trace=2]="Trace",e[e.Metric=3]="Metric",e[e.Request=4]="Request",e[e.Dependency=5]="Dependency"}(r=t.TelemetryType||(t.TelemetryType={}))},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(9),i=n(5),o=[],s={10:r.SeverityLevel.Verbose,20:r.SeverityLevel.Verbose,30:r.SeverityLevel.Information,40:r.SeverityLevel.Warning,50:r.SeverityLevel.Error,60:r.SeverityLevel.Critical},a=function(e){o.forEach(function(t){var n=s[e.data.level];t.trackTrace({message:e.data.result,severity:n})})};t.enable=function(e,t){e?(0===o.length&&i.channel.subscribe("bunyan",a),o.push(t)):0===(o=o.filter(function(e){return e!=t})).length&&i.channel.unsubscribe("bunyan",a)}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(9),i=n(5),o=[],s={syslog:function(e){var t={emerg:r.SeverityLevel.Critical,alert:r.SeverityLevel.Critical,crit:r.SeverityLevel.Critical,error:r.SeverityLevel.Error,warning:r.SeverityLevel.Warning,notice:r.SeverityLevel.Information,info:r.SeverityLevel.Information,debug:r.SeverityLevel.Verbose};return void 0===t[e]?r.SeverityLevel.Information:t[e]},npm:function(e){var t={error:r.SeverityLevel.Error,warn:r.SeverityLevel.Warning,info:r.SeverityLevel.Information,verbose:r.SeverityLevel.Verbose,debug:r.SeverityLevel.Verbose,silly:r.SeverityLevel.Verbose};return void 0===t[e]?r.SeverityLevel.Information:t[e]},unknown:function(e){return r.SeverityLevel.Information}},a=function(e){o.forEach(function(t){var n=s[e.data.levelKind](e.data.level);t.trackTrace({message:e.data.message,severity:n,properties:e.data.meta})})};t.enable=function(e,t){e?(0===o.length&&i.channel.subscribe("winston",a),o.push(t)):0===(o=o.filter(function(e){return e!=t})).length&&i.channel.unsubscribe("winston",a)}},function(e,t,n){"use strict";var r=function(){function e(t){if(e.INSTANCE)throw new Error("Exception tracking should be configured from the applicationInsights object");e.INSTANCE=this,this._client=t}return Object.defineProperty(e,"UNCAUGHT_EXCEPTION_HANDLER_NAME",{get:function(){return"uncaughtException"},enumerable:!0,configurable:!0}),Object.defineProperty(e,"UNHANDLED_REJECTION_HANDLER_NAME",{get:function(){return"unhandledRejection"},enumerable:!0,configurable:!0}),e.prototype.isInitialized=function(){return this._isInitialized},e.prototype.enable=function(t){var n=this;if(t){this._isInitialized=!0;if(!this._exceptionListenerHandle){var r=function(e,t){if(n._client.trackException({exception:t}),n._client.flush({isAppCrashing:!0}),e)throw t};this._exceptionListenerHandle=r.bind(this,!0),this._rejectionListenerHandle=r.bind(this,!1),process.on(e.UNCAUGHT_EXCEPTION_HANDLER_NAME,this._exceptionListenerHandle),process.on(e.UNHANDLED_REJECTION_HANDLER_NAME,this._rejectionListenerHandle)}}else this._exceptionListenerHandle&&(process.removeListener(e.UNCAUGHT_EXCEPTION_HANDLER_NAME,this._exceptionListenerHandle),process.removeListener(e.UNHANDLED_REJECTION_HANDLER_NAME,this._rejectionListenerHandle),this._exceptionListenerHandle=void 0,this._rejectionListenerHandle=void 0,delete this._exceptionListenerHandle,delete this._rejectionListenerHandle)},e.prototype.dispose=function(){e.INSTANCE=null,this.enable(!1),this._isInitialized=!1},e.INSTANCE=null,e}();e.exports=r},function(e,t){e.exports=require("constants")},function(e,t,n){"use strict";var r,i=this&&this.__extends||(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},function(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),o=n(14),s=n(9),a=n(13),c=n(26),u=n(52),l=n(40),d=function(e){function t(n,r){var i=e.call(this)||this;return r&&r.method&&n&&(i.method=r.method,i.url=t._getUrlFromRequestOptions(n,r),i.startTime=+new Date),i}return i(t,e),t.prototype.onError=function(e){this._setStatus(void 0,e)},t.prototype.onResponse=function(e){this._setStatus(e.statusCode,void 0),this.correlationId=a.getCorrelationContextTarget(e,c.requestContextTargetKey)},t.prototype.getDependencyTelemetry=function(e,t){var n=o.parse(this.url);n.search=void 0,n.hash=void 0;var r=this.method.toUpperCase()+" "+n.pathname,i=s.RemoteDependencyDataConstants.TYPE_HTTP,a=n.hostname;this.correlationId?(i=s.RemoteDependencyDataConstants.TYPE_AI,this.correlationId!==l.correlationIdPrefix&&(a=n.hostname+" | "+this.correlationId)):i=s.RemoteDependencyDataConstants.TYPE_HTTP;var c={id:t,name:r,data:this.url,duration:this.duration,success:this._isSuccess(),resultCode:this.statusCode?this.statusCode.toString():null,properties:this.properties||{},dependencyTypeName:i,target:a};if(e){for(var u in e)c[u]||(c[u]=e[u]);if(e.properties)for(var u in e.properties)c.properties[u]=e.properties[u]}return c},t._getUrlFromRequestOptions=function(e,t){if("string"==typeof e)e=o.parse(e);else{var n=e;e={},n&&Object.keys(n).forEach(function(t){e[t]=n[t]})}if(e.path){var r=o.parse(e.path);e.pathname=r.pathname,e.search=r.search}e.host&&e.port&&(!o.parse("http://"+e.host).port&&e.port&&(e.hostname=e.host,delete e.host));return e.protocol=e.protocol||t.agent&&t.agent.protocol||void 0,e.hostname=e.hostname||"localhost",o.format(e)},t}(u);e.exports=d},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(5),i=[];t.subscriber=function(e){i.forEach(function(t){var n=e.data.startedData&&e.data.startedData.databaseName||"Unknown database";t.trackDependency({target:n,data:e.data.event.commandName,name:e.data.event.commandName,duration:e.data.event.duration,success:e.data.succeeded,resultCode:e.data.succeeded?"0":"1",dependencyTypeName:"mongodb"})})},t.enable=function(e,n){e?(0===i.length&&r.channel.subscribe("mongodb",t.subscriber),i.push(n)):0===(i=i.filter(function(e){return e!=n})).length&&r.channel.unsubscribe("mongodb",t.subscriber)}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(5),i=[];t.subscriber=function(e){i.forEach(function(t){var n=e.data.query||{},r=n.sql||"Unknown query",i=!e.data.err,o=(n._connection||{}).config||{},s=o.socketPath?o.socketPath:(o.host||"localhost")+":"+o.port;t.trackDependency({target:s,data:r,name:r,duration:e.data.duration,success:i,resultCode:i?"0":"1",dependencyTypeName:"mysql"})})},t.enable=function(e,n){e?(0===i.length&&r.channel.subscribe("mysql",t.subscriber),i.push(n)):0===(i=i.filter(function(e){return e!=n})).length&&r.channel.unsubscribe("mysql",t.subscriber)}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(5),i=[];t.subscriber=function(e){i.forEach(function(t){"info"!==e.data.commandObj.command&&t.trackDependency({target:e.data.address,name:e.data.commandObj.command,data:e.data.commandObj.command,duration:e.data.duration,success:!e.data.err,resultCode:e.data.err?"1":"0",dependencyTypeName:"redis"})})},t.enable=function(e,n){e?(0===i.length&&r.channel.subscribe("redis",t.subscriber),i.push(n)):0===(i=i.filter(function(e){return e!=n})).length&&r.channel.unsubscribe("redis",t.subscriber)}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(5),i=[];t.subscriber=function(e){i.forEach(function(t){var n=e.data.query,r=n.preparable&&n.preparable.text||n.plan||n.text||"unknown query",i=!e.data.error,o=e.data.database.host+":"+e.data.database.port;t.trackDependency({target:o,data:r,name:r,duration:e.data.duration,success:i,resultCode:i?"0":"1",dependencyTypeName:"postgres"})})},t.enable=function(e,n){e?(0===i.length&&r.channel.subscribe("postgres",t.subscriber),i.push(n)):0===(i=i.filter(function(e){return e!=n})).length&&r.channel.unsubscribe("postgres",t.subscriber)}},function(e,t,n){"use strict";var r,i=this&&this.__extends||(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},function(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),o=n(14),s=n(9),a=n(13),c=n(26),u=n(52),l=n(40),d=function(e){function t(t,n){var r=e.call(this)||this;return t&&(r.method=t.method,r.url=r._getAbsoluteUrl(t),r.startTime=+new Date,r.socketRemoteAddress=t.socket&&t.socket.remoteAddress,r.parseHeaders(t,n),t.connection&&(r.connectionRemoteAddress=t.connection.remoteAddress,r.legacySocketRemoteAddress=t.connection.socket&&t.connection.socket.remoteAddress)),r}return i(t,e),t.prototype.onError=function(e,t){this._setStatus(void 0,e),t&&(this.duration=t)},t.prototype.onResponse=function(e,t){this._setStatus(e.statusCode,void 0),t&&(this.duration=t)},t.prototype.getRequestTelemetry=function(e){var t={id:this.requestId,name:this.method+" "+o.parse(this.url).pathname,url:this.url,source:this.sourceCorrelationId,duration:this.duration,resultCode:this.statusCode?this.statusCode.toString():null,success:this._isSuccess(),properties:this.properties};if(e){for(var n in e)t[n]||(t[n]=e[n]);if(e.properties)for(var n in e.properties)t.properties[n]=e.properties[n]}return t},t.prototype.getRequestTags=function(e){var n={};for(var r in e)n[r]=e[r];return n[t.keys.locationIp]=e[t.keys.locationIp]||this._getIp(),n[t.keys.sessionId]=e[t.keys.sessionId]||this._getId("ai_session"),n[t.keys.userId]=e[t.keys.userId]||this._getId("ai_user"),n[t.keys.userAuthUserId]=e[t.keys.userAuthUserId]||this._getId("ai_authUser"),n[t.keys.operationName]=this.getOperationName(e),n[t.keys.operationParentId]=this.getOperationParentId(e),n[t.keys.operationId]=this.getOperationId(e),n},t.prototype.getOperationId=function(e){return e[t.keys.operationId]||this.operationId},t.prototype.getOperationParentId=function(e){return e[t.keys.operationParentId]||this.parentId||this.getOperationId(e)},t.prototype.getOperationName=function(e){return e[t.keys.operationName]||this.method+" "+o.parse(this.url).pathname},t.prototype.getRequestId=function(){return this.requestId},t.prototype.getCorrelationContextHeader=function(){return this.correlationContextHeader},t.prototype._getAbsoluteUrl=function(e){if(!e.headers)return e.url;var t=e.connection?e.connection.encrypted:null,n=o.parse(e.url),r=n.pathname,i=n.search;return o.format({protocol:t?"https":"http",host:e.headers.host,pathname:r,search:i})},t.prototype._getIp=function(){var e=/[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}/,t=function(t){var n=e.exec(t);if(n)return n[0]},n=t(this.rawHeaders["x-forwarded-for"])||t(this.rawHeaders["x-client-ip"])||t(this.rawHeaders["x-real-ip"])||t(this.connectionRemoteAddress)||t(this.socketRemoteAddress)||t(this.legacySocketRemoteAddress);return!n&&this.connectionRemoteAddress&&this.connectionRemoteAddress.substr&&"::"===this.connectionRemoteAddress.substr(0,2)&&(n="127.0.0.1"),n},t.prototype._getId=function(e){var n=this.rawHeaders&&this.rawHeaders.cookie&&"string"==typeof this.rawHeaders.cookie&&this.rawHeaders.cookie||"";return t.parseId(a.getCookie(e,n))},t.prototype.parseHeaders=function(e,t){if(this.rawHeaders=e.headers||e.rawHeaders,this.userAgent=e.headers&&e.headers["user-agent"],this.sourceCorrelationId=a.getCorrelationContextTarget(e,c.requestContextSourceKey),e.headers){if(this.correlationContextHeader=e.headers[c.correlationContextHeader],e.headers[c.requestIdHeader])this.parentId=e.headers[c.requestIdHeader],this.requestId=l.generateRequestId(this.parentId),this.correlationContextHeader=e.headers[c.correlationContextHeader];else{var n=e.headers[c.rootIdHeader];this.parentId=e.headers[c.parentIdHeader],this.requestId=l.generateRequestId(n||this.parentId),this.correlationContextHeader=null}t&&(this.requestId=t),this.operationId=l.getRootId(this.requestId)}},t.parseId=function(e){return e.substr(0,e.indexOf("|"))},t.keys=new s.ContextTagKeys,t}(u);e.exports=d},function(e,t,n){"use strict";var r,i=this&&this.__extends||(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},function(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),o=n(124),s=n(53),a=n(38),c=n(6),u=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return i(t,e),t.prototype.trackNodeHttpRequestSync=function(e){e&&e.request&&e.response&&e.duration?s.trackRequestSync(this,e):c.warn("trackNodeHttpRequestSync requires NodeHttpRequestTelemetry object with request, response and duration specified.")},t.prototype.trackNodeHttpRequest=function(e){(e.duration||e.error)&&c.warn("trackNodeHttpRequest will ignore supplied duration and error parameters. These values are collected from the request and response objects."),e&&e.request&&e.response?s.trackRequest(this,e):c.warn("trackNodeHttpRequest requires NodeHttpRequestTelemetry object with request and response specified.")},t.prototype.trackNodeHttpDependency=function(e){e&&e.request?a.trackRequest(this,e):c.warn("trackNodeHttpDependency requires NodeHttpDependencyTelemetry object with request specified.")},t}(o);e.exports=u},function(e,t,n){"use strict";var r=n(14),i=n(125),o=n(126),s=n(9),a=n(127),c=n(128),u=n(24),l=n(130),d=n(13),h=n(6),p=n(131),f=function(){function e(e){this._telemetryProcessors=[];var t=new i(e);this.config=t,this.context=new o,this.commonProperties={};var n=new l(this.config);this.channel=new a(function(){return t.disableAppInsights},function(){return t.maxBatchSize},function(){return t.maxBatchIntervalMs},n)}return e.prototype.trackTrace=function(e){this.track(e,s.TelemetryType.Trace)},e.prototype.trackMetric=function(e){this.track(e,s.TelemetryType.Metric)},e.prototype.trackException=function(e){e&&e.exception&&!d.isError(e.exception)&&(e.exception=new Error(e.exception.toString())),this.track(e,s.TelemetryType.Exception)},e.prototype.trackEvent=function(e){this.track(e,s.TelemetryType.Event)},e.prototype.trackRequest=function(e){this.track(e,s.TelemetryType.Request)},e.prototype.trackDependency=function(e){e&&!e.target&&e.data&&(e.target=r.parse(e.data).host),this.track(e,s.TelemetryType.Dependency)},e.prototype.flush=function(e){this.channel.triggerSend(!!e&&!!e.isAppCrashing,e?e.callback:void 0)},e.prototype.track=function(e,t){if(e&&s.telemetryTypeToBaseType(t)){var n=p.createEnvelope(e,t,this.commonProperties,this.context,this.config);e.time&&(n.time=e.time.toISOString());var r=this.runTelemetryProcessors(n,e.contextObjects);(r=r&&c.samplingTelemetryProcessor(n,{correlationContext:u.CorrelationContextManager.getCurrentContext()}))&&this.channel.send(n)}else h.warn("track() requires telemetry object and telemetryType to be specified.")},e.prototype.addTelemetryProcessor=function(e){this._telemetryProcessors.push(e)},e.prototype.clearTelemetryProcessors=function(){this._telemetryProcessors=[]},e.prototype.runTelemetryProcessors=function(e,t){var n=!0,r=this._telemetryProcessors.length;if(0===r)return n;(t=t||{}).correlationContext=u.CorrelationContextManager.getCurrentContext();for(var i=0;i<r;++i)try{var o=this._telemetryProcessors[i];if(o&&!1===o.apply(null,[e,t])){n=!1;break}}catch(t){n=!0,h.warn("One of telemetry processors failed, telemetry item will be sent.",t,e)}return n},e}();e.exports=f},function(e,t,n){"use strict";var r=n(40),i=function(){function e(t){var n=this;this.endpointBase="https://dc.services.visualstudio.com",this.instrumentationKey=t||e._getInstrumentationKey(),this.endpointUrl=this.endpointBase+"/v2/track",this.maxBatchSize=250,this.maxBatchIntervalMs=15e3,this.disableAppInsights=!1,this.samplingPercentage=100,this.correlationIdRetryIntervalMs=3e4,this.correlationHeaderExcludedDomains=["*.core.windows.net","*.core.chinacloudapi.cn","*.core.cloudapi.de","*.core.usgovcloudapi.net"],this.setCorrelationId=function(e){return n.correlationId=e},this.profileQueryEndpoint=process.env[e.ENV_profileQueryEndpoint]||this.endpointBase,this.proxyHttpUrl=process.env[e.ENV_http_proxy]||void 0,this.proxyHttpsUrl=process.env[e.ENV_https_proxy]||void 0,this.httpAgent=void 0,this.httpsAgent=void 0}return Object.defineProperty(e.prototype,"profileQueryEndpoint",{get:function(){return this._profileQueryEndpoint},set:function(e){r.cancelCorrelationIdQuery(this,this.setCorrelationId),this._profileQueryEndpoint=e,this.correlationId=r.correlationIdPrefix,r.queryCorrelationId(this,this.setCorrelationId)},enumerable:!0,configurable:!0}),e._getInstrumentationKey=function(){var t=process.env[e.ENV_iKey]||process.env[e.ENV_azurePrefix+e.ENV_iKey]||process.env[e.legacy_ENV_iKey]||process.env[e.ENV_azurePrefix+e.legacy_ENV_iKey];if(!t||""==t)throw new Error("Instrumentation key not found, pass the key in the config to this method or set the key in the environment variable APPINSIGHTS_INSTRUMENTATIONKEY before starting the server");return t},e.ENV_azurePrefix="APPSETTING_",e.ENV_iKey="APPINSIGHTS_INSTRUMENTATIONKEY",e.legacy_ENV_iKey="APPINSIGHTS_INSTRUMENTATION_KEY",e.ENV_profileQueryEndpoint="APPINSIGHTS_PROFILE_QUERY_ENDPOINT",e.ENV_http_proxy="http_proxy",e.ENV_https_proxy="https_proxy",e}();e.exports=i},function(e,t,n){"use strict";(function(t){var r=n(3),i=n(2),o=n(1),s=n(9),a=n(6),c=function(){function e(e){this.keys=new s.ContextTagKeys,this.tags={},this._loadApplicationContext(),this._loadDeviceContext(),this._loadInternalContext()}return e.prototype._loadApplicationContext=function(n){if(n=n||o.resolve(t,"../../../../package.json"),!e.appVersion[n]){e.appVersion[n]="unknown";try{var r=JSON.parse(i.readFileSync(n,"utf8"));r&&"string"==typeof r.version&&(e.appVersion[n]=r.version)}catch(e){a.info("unable to read app version: ",e)}}this.tags[this.keys.applicationVersion]=e.appVersion[n]},e.prototype._loadDeviceContext=function(){this.tags[this.keys.deviceId]="",this.tags[this.keys.cloudRoleInstance]=r&&r.hostname(),this.tags[this.keys.deviceOSVersion]=r&&r.type()+" "+r.release(),this.tags[this.keys.cloudRole]=e.DefaultRoleName,this.tags["ai.device.osArchitecture"]=r&&r.arch(),this.tags["ai.device.osPlatform"]=r&&r.platform()},e.prototype._loadInternalContext=function(){var n=o.resolve(t,"../../package.json");if(!e.sdkVersion){e.sdkVersion="unknown";try{var r=JSON.parse(i.readFileSync(n,"utf8"));r&&"string"==typeof r.version&&(e.sdkVersion=r.version)}catch(e){a.info("unable to read app version: ",e)}}this.tags[this.keys.internalSdkVersion]="node:"+e.sdkVersion},e.DefaultRoleName="Web",e.appVersion={},e.sdkVersion=null,e}();e.exports=c}).call(this,"/")},function(e,t,n){"use strict";var r=n(6),i=function(){function e(e,t,n,r){this._buffer=[],this._lastSend=0,this._isDisabled=e,this._getBatchSize=t,this._getBatchIntervalMs=n,this._sender=r}return e.prototype.setUseDiskRetryCaching=function(e,t,n){this._sender.setDiskRetryMode(e,t,n)},e.prototype.send=function(e){var t=this;if(!this._isDisabled())if(e){var n=this._stringify(e);"string"==typeof n&&(this._buffer.push(n),this._buffer.length>=this._getBatchSize()?this.triggerSend(!1):!this._timeoutHandle&&this._buffer.length>0&&(this._timeoutHandle=setTimeout(function(){t._timeoutHandle=null,t.triggerSend(!1)},this._getBatchIntervalMs())))}else r.warn("Cannot send null/undefined telemetry")},e.prototype.triggerSend=function(e,t){var n=this._buffer.length<1;if(!n){var r=this._buffer.join("\n");e?(this._sender.saveOnCrash(r),"function"==typeof t&&t("data saved on crash")):this._sender.send(Buffer.from?Buffer.from(r):new Buffer(r),t)}this._lastSend=+new Date,this._buffer.length=0,clearTimeout(this._timeoutHandle),this._timeoutHandle=null,n&&"function"==typeof t&&t("no data to send")},e.prototype._stringify=function(e){try{return JSON.stringify(e)}catch(t){r.warn("Failed to serialize payload",t,e)}},e}();e.exports=i},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),function(e){for(var n in e)t.hasOwnProperty(n)||(t[n]=e[n])}(n(129))},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(9);function i(e){var t=5381;if(!e)return 0;for(;e.length<8;)e+=e;for(var n=0;n<e.length;n++)t=((t<<5)+t|0)+e.charCodeAt(n)|0;return(t=t<=-2147483648?2147483647:Math.abs(t))/2147483647*100}t.samplingTelemetryProcessor=function(e,t){var n=e.sampleRate;return null==n||n>=100||!(!e.data||r.TelemetryType.Metric!==r.baseTypeToTelemetryType(e.data.baseType))||(t.correlationContext&&t.correlationContext.operation?i(t.correlationContext.operation.id)<n:100*Math.random()<n)},t.getSamplingHashCode=i},function(e,t,n){"use strict";var r=n(2),i=n(3),o=n(1),s=n(54),a=n(18),c=n(6),u=n(38),l=n(13),d=function(){function e(t,n,i){if(this._config=t,this._onSuccess=n,this._onError=i,this._enableDiskRetryMode=!1,this._resendInterval=e.WAIT_BETWEEN_RESEND,this._maxBytesOnDisk=e.MAX_BYTES_ON_DISK,this._numConsecutiveFailures=0,!e.OS_PROVIDES_FILE_PROTECTION)if(e.USE_ICACLS){try{e.OS_PROVIDES_FILE_PROTECTION=r.existsSync(e.ICACLS_PATH)}catch(e){}e.OS_PROVIDES_FILE_PROTECTION||c.warn(e.TAG,"Could not find ICACLS in expected location! This is necessary to use disk retry mode on Windows.")}else e.OS_PROVIDES_FILE_PROTECTION=!0}return e.prototype.setDiskRetryMode=function(t,n,r){this._enableDiskRetryMode=e.OS_PROVIDES_FILE_PROTECTION&&t,"number"==typeof n&&n>=0&&(this._resendInterval=Math.floor(n)),"number"==typeof r&&r>=0&&(this._maxBytesOnDisk=Math.floor(r)),t&&!e.OS_PROVIDES_FILE_PROTECTION&&(this._enableDiskRetryMode=!1,c.warn(e.TAG,"Ignoring request to enable disk retry mode. Sufficient file protection capabilities were not detected."))},e.prototype.send=function(t,n){var r=this,i=this._config.endpointUrl,o={method:"POST",withCredentials:!1,headers:{"Content-Type":"application/x-json-stream"}};s.gzip(t,function(s,a){var d=a;s?(c.warn(s),d=t,o.headers["Content-Length"]=t.length.toString()):(o.headers["Content-Encoding"]="gzip",o.headers["Content-Length"]=a.length),c.info(e.TAG,o),o[u.disableCollectionRequestOption]=!0;var h=l.makeRequest(r._config,i,o,function(i){i.setEncoding("utf-8");var o="";i.on("data",function(e){o+=e}),i.on("end",function(){r._numConsecutiveFailures=0,c.info(e.TAG,o),"function"==typeof r._onSuccess&&r._onSuccess(o),"function"==typeof n&&n(o),r._enableDiskRetryMode&&(200===i.statusCode?setTimeout(function(){return r._sendFirstFileOnDisk()},r._resendInterval):408!==i.statusCode&&429!==i.statusCode&&439!==i.statusCode&&500!==i.statusCode&&503!==i.statusCode||r._storeToDisk(t))})});h.on("error",function(i){if(r._numConsecutiveFailures++,!r._enableDiskRetryMode||r._numConsecutiveFailures>0&&r._numConsecutiveFailures%e.MAX_CONNECTION_FAILURES_BEFORE_WARN==0){var o="Ingestion endpoint could not be reached. This batch of telemetry items has been lost. Use Disk Retry Caching to enable resending of failed telemetry. Error:";r._enableDiskRetryMode&&(o="Ingestion endpoint could not be reached "+r._numConsecutiveFailures+" consecutive times. There may be resulting telemetry loss. Most recent error:"),c.warn(e.TAG,o,i)}else{o="Transient failure to reach ingestion endpoint. This batch of telemetry items will be retried. Error:";c.info(e.TAG,o,i)}if(r._onErrorHelper(i),"function"==typeof n){var s="error sending telemetry";i&&"function"==typeof i.toString&&(s=i.toString()),n(s)}r._enableDiskRetryMode&&r._storeToDisk(t)}),h.write(d),h.end()})},e.prototype.saveOnCrash=function(e){this._enableDiskRetryMode&&this._storeToDiskSync(e)},e.prototype._runICACLS=function(t,n){var r=a.spawn(e.ICACLS_PATH,t,{windowsHide:!0});r.on("error",function(e){return n(e)}),r.on("close",function(e,t){return n(0===e?null:new Error("Setting ACL restrictions did not succeed (ICACLS returned code "+e+")"))})},e.prototype._runICACLSSync=function(t){if(!a.spawnSync)throw new Error("Could not synchronously call ICACLS under current version of Node.js");var n=a.spawnSync(e.ICACLS_PATH,t,{windowsHide:!0});if(n.error)throw n.error;if(0!==n.status)throw new Error("Setting ACL restrictions did not succeed (ICACLS returned code "+n.status+")")},e.prototype._getACLIdentity=function(t){if(e.ACL_IDENTITY)return t(null,e.ACL_IDENTITY);var n=a.spawn(e.POWERSHELL_PATH,["-Command","[System.Security.Principal.WindowsIdentity]::GetCurrent().Name"],{windowsHide:!0,stdio:["ignore","pipe","pipe"]}),r="";n.stdout.on("data",function(e){return r+=e}),n.on("error",function(e){return t(e,null)}),n.on("close",function(n,i){return e.ACL_IDENTITY=r&&r.trim(),t(0===n?null:new Error("Getting ACL identity did not succeed (PS returned code "+n+")"),e.ACL_IDENTITY)})},e.prototype._getACLIdentitySync=function(){if(e.ACL_IDENTITY)return e.ACL_IDENTITY;if(a.spawnSync){var t=a.spawnSync(e.POWERSHELL_PATH,["-Command","[System.Security.Principal.WindowsIdentity]::GetCurrent().Name"],{windowsHide:!0,stdio:["ignore","pipe","pipe"]});if(t.error)throw t.error;if(0!==t.status)throw new Error("Getting ACL identity did not succeed (PS returned code "+t.status+")");return e.ACL_IDENTITY=t.stdout&&t.stdout.toString().trim(),e.ACL_IDENTITY}throw new Error("Could not synchronously get ACL identity under current version of Node.js")},e.prototype._getACLArguments=function(e,t){return[e,"/grant","*S-1-5-32-544:(OI)(CI)F","/grant",t+":(OI)(CI)F","/inheritance:r"]},e.prototype._applyACLRules=function(t,n){var r=this;return e.USE_ICACLS?void 0!==e.ACLED_DIRECTORIES[t]?n(e.ACLED_DIRECTORIES[t]?null:new Error("Setting ACL restrictions did not succeed (cached result)")):(e.ACLED_DIRECTORIES[t]=!1,void this._getACLIdentity(function(i,o){if(i)return e.ACLED_DIRECTORIES[t]=!1,n(i);r._runICACLS(r._getACLArguments(t,o),function(r){return e.ACLED_DIRECTORIES[t]=!r,n(r)})})):n(null)},e.prototype._applyACLRulesSync=function(t){if(e.USE_ICACLS){if(void 0===e.ACLED_DIRECTORIES[t])return this._runICACLSSync(this._getACLArguments(t,this._getACLIdentitySync())),void(e.ACLED_DIRECTORIES[t]=!0);if(!e.ACLED_DIRECTORIES[t])throw new Error("Setting ACL restrictions did not succeed (cached result)")}},e.prototype._confirmDirExists=function(e,t){var n=this;r.lstat(e,function(i,o){i&&"ENOENT"===i.code?r.mkdir(e,function(r){r&&"EEXIST"!==r.code?t(r):n._applyACLRules(e,t)}):!i&&o.isDirectory()?n._applyACLRules(e,t):t(i||new Error("Path existed but was not a directory"))})},e.prototype._getShallowDirectorySize=function(e,t){r.readdir(e,function(n,i){if(n)return t(n,-1);var s=null,a=0,c=0;if(0!==i.length)for(var u=0;u<i.length;u++)r.stat(o.join(e,i[u]),function(e,n){c++,e?s=e:n.isFile()&&(a+=n.size),c===i.length&&t(s,s?-1:a)});else t(null,0)})},e.prototype._getShallowDirectorySizeSync=function(e){for(var t=r.readdirSync(e),n=0,i=0;i<t.length;i++)n+=r.statSync(o.join(e,t[i])).size;return n},e.prototype._storeToDisk=function(t){var n=this,s=o.join(i.tmpdir(),e.TEMPDIR_PREFIX+this._config.instrumentationKey);c.info(e.TAG,"Checking existance of data storage directory: "+s),this._confirmDirExists(s,function(i){if(i)return c.warn(e.TAG,"Error while checking/creating directory: "+(i&&i.message)),void n._onErrorHelper(i);n._getShallowDirectorySize(s,function(i,a){if(i||a<0)return c.warn(e.TAG,"Error while checking directory size: "+(i&&i.message)),void n._onErrorHelper(i);if(a>n._maxBytesOnDisk)c.warn(e.TAG,"Not saving data due to max size limit being met. Directory size in bytes is: "+a);else{var u=(new Date).getTime()+".ai.json",l=o.join(s,u);c.info(e.TAG,"saving data to disk at: "+l),r.writeFile(l,t,{mode:384},function(e){return n._onErrorHelper(e)})}})})},e.prototype._storeToDiskSync=function(t){var n=o.join(i.tmpdir(),e.TEMPDIR_PREFIX+this._config.instrumentationKey);try{c.info(e.TAG,"Checking existance of data storage directory: "+n),r.existsSync(n)||r.mkdirSync(n),this._applyACLRulesSync(n);var s=this._getShallowDirectorySizeSync(n);if(s>this._maxBytesOnDisk)return void c.info(e.TAG,"Not saving data due to max size limit being met. Directory size in bytes is: "+s);var a=(new Date).getTime()+".ai.json",u=o.join(n,a);c.info(e.TAG,"saving data before crash to disk at: "+u),r.writeFileSync(u,t,{mode:384})}catch(t){c.warn(e.TAG,"Error while saving data to disk: "+(t&&t.message)),this._onErrorHelper(t)}},e.prototype._sendFirstFileOnDisk=function(){var t=this,n=o.join(i.tmpdir(),e.TEMPDIR_PREFIX+this._config.instrumentationKey);r.exists(n,function(e){e&&r.readdir(n,function(e,i){if(e)t._onErrorHelper(e);else if((i=i.filter(function(e){return o.basename(e).indexOf(".ai.json")>-1})).length>0){var s=i[0],a=o.join(n,s);r.readFile(a,function(e,n){e?t._onErrorHelper(e):r.unlink(a,function(e){e?t._onErrorHelper(e):t.send(n)})})}})})},e.prototype._onErrorHelper=function(e){"function"==typeof this._onError&&this._onError(e)},e.TAG="Sender",e.ICACLS_PATH=process.env.systemdrive+"/windows/system32/icacls.exe",e.POWERSHELL_PATH=process.env.systemdrive+"/windows/system32/windowspowershell/v1.0/powershell.exe",e.ACLED_DIRECTORIES={},e.ACL_IDENTITY=null,e.WAIT_BETWEEN_RESEND=6e4,e.MAX_BYTES_ON_DISK=5e7,e.MAX_CONNECTION_FAILURES_BEFORE_WARN=5,e.TEMPDIR_PREFIX="appInsights-node",e.OS_PROVIDES_FILE_PROTECTION=!1,e.USE_ICACLS="Windows_NT"===i.type(),e}();e.exports=d},function(e,t,n){"use strict";var r=n(9),i=n(13),o=n(24),s=function(){function e(){}return e.createEnvelope=function(t,n,o,s,a){var c=null;switch(n){case r.TelemetryType.Trace:c=e.createTraceData(t);break;case r.TelemetryType.Dependency:c=e.createDependencyData(t);break;case r.TelemetryType.Event:c=e.createEventData(t);break;case r.TelemetryType.Exception:c=e.createExceptionData(t);break;case r.TelemetryType.Request:c=e.createRequestData(t);break;case r.TelemetryType.Metric:c=e.createMetricData(t)}if(o&&r.domainSupportsProperties(c.baseData)){if(c&&c.baseData)if(c.baseData.properties)for(var u in o)c.baseData.properties[u]||(c.baseData.properties[u]=o[u]);else c.baseData.properties=o;c.baseData.properties=i.validateStringMap(c.baseData.properties)}var l=a&&a.instrumentationKey||"",d=new r.Envelope;return d.data=c,d.iKey=l,d.name="Microsoft.ApplicationInsights."+l.replace(/-/g,"")+"."+c.baseType.substr(0,c.baseType.length-4),d.tags=this.getTags(s,t.tagOverrides),d.time=(new Date).toISOString(),d.ver=1,d.sampleRate=a?a.samplingPercentage:100,n===r.TelemetryType.Metric&&(d.sampleRate=100),d},e.createTraceData=function(e){var t=new r.MessageData;t.message=e.message,t.properties=e.properties,isNaN(e.severity)?t.severityLevel=r.SeverityLevel.Information:t.severityLevel=e.severity;var n=new r.Data;return n.baseType=r.telemetryTypeToBaseType(r.TelemetryType.Trace),n.baseData=t,n},e.createDependencyData=function(e){var t=new r.RemoteDependencyData;t.name=e.name,t.data=e.data,t.target=e.target,t.duration=i.msToTimeSpan(e.duration),t.success=e.success,t.type=e.dependencyTypeName,t.properties=e.properties,t.resultCode=e.resultCode?e.resultCode+"":"",e.id?t.id=e.id:t.id=i.w3cTraceId();var n=new r.Data;return n.baseType=r.telemetryTypeToBaseType(r.TelemetryType.Dependency),n.baseData=t,n},e.createEventData=function(e){var t=new r.EventData;t.name=e.name,t.properties=e.properties,t.measurements=e.measurements;var n=new r.Data;return n.baseType=r.telemetryTypeToBaseType(r.TelemetryType.Event),n.baseData=t,n},e.createExceptionData=function(e){var t=new r.ExceptionData;t.properties=e.properties,t.severityLevel=r.SeverityLevel.Error,t.measurements=e.measurements,t.exceptions=[];var n=e.exception.stack,o=new r.ExceptionDetails;o.message=e.exception.message,o.typeName=e.exception.name,o.parsedStack=this.parseStack(n),o.hasFullStack=i.isArray(o.parsedStack)&&o.parsedStack.length>0,t.exceptions.push(o);var s=new r.Data;return s.baseType=r.telemetryTypeToBaseType(r.TelemetryType.Exception),s.baseData=t,s},e.createRequestData=function(e){var t=new r.RequestData;e.id?t.id=e.id:t.id=i.w3cTraceId(),t.name=e.name,t.url=e.url,t.source=e.source,t.duration=i.msToTimeSpan(e.duration),t.responseCode=e.resultCode?e.resultCode+"":"",t.success=e.success,t.properties=e.properties;var n=new r.Data;return n.baseType=r.telemetryTypeToBaseType(r.TelemetryType.Request),n.baseData=t,n},e.createMetricData=function(e){var t=new r.MetricData;t.metrics=[];var n=new r.DataPoint;n.count=isNaN(e.count)?1:e.count,n.kind=r.DataPointType.Aggregation,n.max=isNaN(e.max)?e.value:e.max,n.min=isNaN(e.min)?e.value:e.min,n.name=e.name,n.stdDev=isNaN(e.stdDev)?0:e.stdDev,n.value=e.value,t.metrics.push(n),t.properties=e.properties;var i=new r.Data;return i.baseType=r.telemetryTypeToBaseType(r.TelemetryType.Metric),i.baseData=t,i},e.getTags=function(e,t){var n=o.CorrelationContextManager.getCurrentContext(),r={};if(e&&e.tags)for(var i in e.tags)r[i]=e.tags[i];if(t)for(var i in t)r[i]=t[i];return n&&(r[e.keys.operationId]=r[e.keys.operationId]||n.operation.id,r[e.keys.operationName]=r[e.keys.operationName]||n.operation.name,r[e.keys.operationParentId]=r[e.keys.operationParentId]||n.operation.parentId),r},e.parseStack=function(e){var t=void 0;if("string"==typeof e){var n=e.split("\n");t=[];for(var r=0,i=0,o=0;o<=n.length;o++){var s=n[o];if(a.regex.test(s)){var c=new a(n[o],r++);i+=c.sizeInBytes,t.push(c)}}if(i>32768)for(var u=0,l=t.length-1,d=0,h=u,p=l;u<l;){if((d+=t[u].sizeInBytes+t[l].sizeInBytes)>32768){var f=p-h+1;t.splice(h,f);break}h=u,p=l,u++,l--}}return t},e}(),a=function(){function e(t,n){this.sizeInBytes=0,this.level=n,this.method="<no_method>",this.assembly=i.trim(t);var r=t.match(e.regex);r&&r.length>=5&&(this.method=i.trim(r[2])||this.method,this.fileName=i.trim(r[4])||"<no_filename>",this.line=parseInt(r[5])||0),this.sizeInBytes+=this.method.length,this.sizeInBytes+=this.fileName.length,this.sizeInBytes+=this.assembly.length,this.sizeInBytes+=e.baseSize,this.sizeInBytes+=this.level.toString().length,this.sizeInBytes+=this.line.toString().length}return e.regex=/^([\s]+at)?(.*?)(\@|\s\(|\s)([^\(\@\n]+):([0-9]+):([0-9]+)(\)?)$/,e.baseSize=58,e}();e.exports=s},function(e,t,n){var r=n(41),i=n(133),o=n(14),s=n(134),a=n(15).inherits,c=n(139)("https-proxy-agent");function u(e){if(!(this instanceof u))return new u(e);if("string"==typeof e&&(e=o.parse(e)),!e)throw new Error("an HTTP(S) proxy server `host` and `port` must be specified!");c("creating new HttpsProxyAgent instance: %o",e),s.call(this,e);var t=Object.assign({},e);this.secureProxy=!!t.protocol&&/^https:?$/i.test(t.protocol),t.host=t.hostname||t.host,t.port=+t.port||(this.secureProxy?443:80),!this.secureProxy||"ALPNProtocols"in t||(t.ALPNProtocols=["http 1.1"]),t.host&&t.path&&(delete t.path,delete t.pathname),this.proxy=t,this.defaultPort=443}e.exports=u,a(u,s),u.prototype.callback=function(e,t,n){var o,s=this.proxy;o=this.secureProxy?i.connect(s):r.connect(s);var a=[],u=0;function l(){var e=o.read();e?g(e):o.once("readable",l)}function d(){o.removeListener("data",g),o.removeListener("end",p),o.removeListener("error",f),o.removeListener("close",h),o.removeListener("readable",l)}function h(e){c("onclose had error %o",e)}function p(){c("onend")}function f(e){d(),n(e)}function g(r){a.push(r),u+=r.length;var s=Buffer.concat(a,u),h=s.toString("ascii");if(!~h.indexOf("\r\n\r\n"))return c("have not received end of HTTP headers yet..."),void(o.read?l():o.once("data",g));var p=h.substring(0,h.indexOf("\r\n")),f=+p.split(" ")[1];if(c("got proxy server response: %o",p),200==f){var v=o;a=s=null,t.secureEndpoint&&(c("upgrading proxy-connected socket to TLS connection: %o",t.host),t.socket=o,t.servername=t.servername||t.host,t.host=null,t.hostname=null,t.port=null,v=i.connect(t)),d(),n(null,v)}else d(),a=s,e.once("socket",m),n(null,o)}function m(e){if("function"==typeof e.ondata)e.ondata(a,0,a.length);else{if(!(e.listeners("data").length>0))throw new Error("should not happen...");e.emit("data",a)}a=null}o.on("error",f),o.on("close",h),o.on("end",p),o.read?l():o.once("data",g);var v="CONNECT "+(t.host+":"+t.port)+" HTTP/1.1\r\n",C=Object.assign({},s.headers);s.auth&&(C["Proxy-Authorization"]="Basic "+Buffer.from(s.auth).toString("base64"));var y,w,b=t.host;y=t.port,w=t.secureEndpoint,Boolean(!w&&80===y||w&&443===y)||(b+=":"+t.port),C.Host=b,C.Connection="close",Object.keys(C).forEach(function(e){v+=e+": "+C[e]+"\r\n"}),o.write(v+"\r\n")}},function(e,t){e.exports=require("tls")},function(e,t,n){"use strict";n(135);const r=n(15).inherits,i=n(136),o=n(19).EventEmitter;function s(e,t){if(!(this instanceof s))return new s(e,t);o.call(this),this._promisifiedCallback=!1;let n=t;"function"==typeof e?this.callback=e:e&&(n=e),this.timeout=n&&n.timeout||null,this.options=n}e.exports=s,r(s,o),s.prototype.callback=function(e,t){throw new Error('"agent-base" has no default implementation, you must subclass and override `callback()`')},s.prototype.addRequest=function(e,t){const n=Object.assign({},t);null==n.host&&(n.host="localhost"),null==n.port&&(n.port=n.secureEndpoint?443:80);const r=Object.assign({},this.options,n);let o;r.host&&r.path&&delete r.path,delete r.agent,delete r.hostname,delete r._defaultAgent,delete r.defaultPort,delete r.createConnection,e._last=!0,e.shouldKeepAlive=!1;let s=!1;const a=this.timeout,c=this.freeSocket;function u(t){e._hadError||(e.emit("error",t),e._hadError=!0)}function l(e){s||(null!=o&&(clearTimeout(o),o=null),u(e))}!this._promisifiedCallback&&this.callback.length>=3&&(this.callback=i(this.callback,this),this._promisifiedCallback=!0),a>0&&(o=setTimeout(function(){o=null,s=!0;const e=new Error('A "socket" was not created for HTTP request before '+a+"ms");e.code="ETIMEOUT",u(e)},a));try{Promise.resolve(this.callback(e,r)).then(function(t){var n;s||(null!=o&&(clearTimeout(o),o=null),(n=t)&&"function"==typeof n.addRequest?t.addRequest(e,r):t?(t.on("free",function(){c(t,r)}),e.onSocket(t)):u(new Error("no Duplex stream was returned to agent-base for `"+e.method+" "+e.path+"`")))},l)}catch(e){Promise.reject(e).catch(l)}},s.prototype.freeSocket=function(e,t){e.destroy()}},function(e,t,n){"use strict";const r=n(14),i=n(20);var o;i.request=(o=i.request,function(e,t){let n;return null==(n="string"==typeof e?r.parse(e):Object.assign({},e)).port&&(n.port=443),n.secureEndpoint=!0,o.call(i,n,t)}),i.get=function(e,t){const n=i.request(e,t);return n.end(),n}},function(e,t,n){"use strict";e.exports=function(){var e=n(137);return function(t,n){return function(){for(var r=arguments.length,i=Array(r),o=0;o<r;o++)i[o]=arguments[o];var s=n&&n.multiArgs,a=void 0;return n&&n.thisArg?a=n.thisArg:n&&(a=n),new e(function(e,n){i.push(function(t){if(t)return n(t);for(var r=arguments.length,i=Array(r>1?r-1:0),o=1;o<r;o++)i[o-1]=arguments[o];if(!1==!!s)return e(i[0]);e(i)});var r,o=t.apply(a,i);(r=o)&&"function"==typeof r.then&&"function"==typeof r.catch&&e(o)})}}}()},function(e,t,n){"use strict";e.exports=function(){var e=void 0;return e=void 0!==global?global:void 0!==window&&window.document?window:self,function(){if(!e.hasOwnProperty("Promise"))return!1;var t,n=e.Promise;return!(!n.hasOwnProperty("resolve")||!n.hasOwnProperty("reject"))&&(!(!n.hasOwnProperty("all")||!n.hasOwnProperty("race"))&&(t=void 0,!!new e.Promise(function(e){t=e})&&"function"==typeof t))}()?e.Promise:n(138).Promise}()},function(e,t,n){
/*!
 * @overview es6-promise - a tiny implementation of Promises/A+.
 * @copyright Copyright (c) 2014 Yehuda Katz, Tom Dale, Stefan Penner and contributors (Conversion to ES6 API by Jake Archibald)
 * @license   Licensed under MIT license
 *            See https://raw.githubusercontent.com/stefanpenner/es6-promise/master/LICENSE
 * @version   v4.2.5+7f2b526d
 */var r;r=function(){"use strict";function e(e){return"function"==typeof e}var t=Array.isArray?Array.isArray:function(e){return"[object Array]"===Object.prototype.toString.call(e)},n=0,r=void 0,i=void 0,o=function(e,t){h[n]=e,h[n+1]=t,2===(n+=2)&&(i?i(p):C())},s="undefined"!=typeof window?window:void 0,a=s||{},c=a.MutationObserver||a.WebKitMutationObserver,u="undefined"==typeof self&&"undefined"!=typeof process&&"[object process]"==={}.toString.call(process),l="undefined"!=typeof Uint8ClampedArray&&"undefined"!=typeof importScripts&&"undefined"!=typeof MessageChannel;function d(){var e=setTimeout;return function(){return e(p,1)}}var h=new Array(1e3);function p(){for(var e=0;e<n;e+=2){(0,h[e])(h[e+1]),h[e]=void 0,h[e+1]=void 0}n=0}var f,g,m,v,C=void 0;function y(e,t){var n=this,r=new this.constructor(S);void 0===r[b]&&L(r);var i=n._state;if(i){var s=arguments[i-1];o(function(){return N(i,r,s,n._result)})}else A(n,r,e,t);return r}function w(e){if(e&&"object"==typeof e&&e.constructor===this)return e;var t=new this(S);return I(t,e),t}u?C=function(){return process.nextTick(p)}:c?(g=0,m=new c(p),v=document.createTextNode(""),m.observe(v,{characterData:!0}),C=function(){v.data=g=++g%2}):l?((f=new MessageChannel).port1.onmessage=p,C=function(){return f.port2.postMessage(0)}):C=void 0===s?function(){try{var e=Function("return this")().require("vertx");return void 0!==(r=e.runOnLoop||e.runOnContext)?function(){r(p)}:d()}catch(e){return d()}}():d();var b=Math.random().toString(36).substring(2);function S(){}var _=void 0,P=1,x=2,k={error:null};function E(e){try{return e.then}catch(e){return k.error=e,k}}function T(t,n,r){n.constructor===t.constructor&&r===y&&n.constructor.resolve===w?function(e,t){t._state===P?R(e,t._result):t._state===x?O(e,t._result):A(t,void 0,function(t){return I(e,t)},function(t){return O(e,t)})}(t,n):r===k?(O(t,k.error),k.error=null):void 0===r?R(t,n):e(r)?function(e,t,n){o(function(e){var r=!1,i=function(e,t,n,r){try{e.call(t,n,r)}catch(e){return e}}(n,t,function(n){r||(r=!0,t!==n?I(e,n):R(e,n))},function(t){r||(r=!0,O(e,t))},e._label);!r&&i&&(r=!0,O(e,i))},e)}(t,n,r):R(t,n)}function I(e,t){var n,r;e===t?O(e,new TypeError("You cannot resolve a promise with itself")):(r=typeof(n=t),null===n||"object"!==r&&"function"!==r?R(e,t):T(e,t,E(t)))}function D(e){e._onerror&&e._onerror(e._result),F(e)}function R(e,t){e._state===_&&(e._result=t,e._state=P,0!==e._subscribers.length&&o(F,e))}function O(e,t){e._state===_&&(e._state=x,e._result=t,o(D,e))}function A(e,t,n,r){var i=e._subscribers,s=i.length;e._onerror=null,i[s]=t,i[s+P]=n,i[s+x]=r,0===s&&e._state&&o(F,e)}function F(e){var t=e._subscribers,n=e._state;if(0!==t.length){for(var r=void 0,i=void 0,o=e._result,s=0;s<t.length;s+=3)r=t[s],i=t[s+n],r?N(n,r,i,o):i(o);e._subscribers.length=0}}function N(t,n,r,i){var o=e(r),s=void 0,a=void 0,c=void 0,u=void 0;if(o){if((s=function(e,t){try{return e(t)}catch(e){return k.error=e,k}}(r,i))===k?(u=!0,a=s.error,s.error=null):c=!0,n===s)return void O(n,new TypeError("A promises callback cannot return that same promise."))}else s=i,c=!0;n._state!==_||(o&&c?I(n,s):u?O(n,a):t===P?R(n,s):t===x&&O(n,s))}var M=0;function L(e){e[b]=M++,e._state=void 0,e._result=void 0,e._subscribers=[]}var q=function(){function e(e,n){this._instanceConstructor=e,this.promise=new e(S),this.promise[b]||L(this.promise),t(n)?(this.length=n.length,this._remaining=n.length,this._result=new Array(this.length),0===this.length?R(this.promise,this._result):(this.length=this.length||0,this._enumerate(n),0===this._remaining&&R(this.promise,this._result))):O(this.promise,new Error("Array Methods must be provided an Array"))}return e.prototype._enumerate=function(e){for(var t=0;this._state===_&&t<e.length;t++)this._eachEntry(e[t],t)},e.prototype._eachEntry=function(e,t){var n=this._instanceConstructor,r=n.resolve;if(r===w){var i=E(e);if(i===y&&e._state!==_)this._settledAt(e._state,t,e._result);else if("function"!=typeof i)this._remaining--,this._result[t]=e;else if(n===j){var o=new n(S);T(o,e,i),this._willSettleAt(o,t)}else this._willSettleAt(new n(function(t){return t(e)}),t)}else this._willSettleAt(r(e),t)},e.prototype._settledAt=function(e,t,n){var r=this.promise;r._state===_&&(this._remaining--,e===x?O(r,n):this._result[t]=n),0===this._remaining&&R(r,this._result)},e.prototype._willSettleAt=function(e,t){var n=this;A(e,void 0,function(e){return n._settledAt(P,t,e)},function(e){return n._settledAt(x,t,e)})},e}(),j=function(){function t(e){this[b]=M++,this._result=this._state=void 0,this._subscribers=[],S!==e&&("function"!=typeof e&&function(){throw new TypeError("You must pass a resolver function as the first argument to the promise constructor")}(),this instanceof t?function(e,t){try{t(function(t){I(e,t)},function(t){O(e,t)})}catch(t){O(e,t)}}(this,e):function(){throw new TypeError("Failed to construct 'Promise': Please use the 'new' operator, this object constructor cannot be called as a function.")}())}return t.prototype.catch=function(e){return this.then(null,e)},t.prototype.finally=function(t){var n=this.constructor;return e(t)?this.then(function(e){return n.resolve(t()).then(function(){return e})},function(e){return n.resolve(t()).then(function(){throw e})}):this.then(t,t)},t}();return j.prototype.then=y,j.all=function(e){return new q(this,e).promise},j.race=function(e){var n=this;return t(e)?new n(function(t,r){for(var i=e.length,o=0;o<i;o++)n.resolve(e[o]).then(t,r)}):new n(function(e,t){return t(new TypeError("You must pass an array to race."))})},j.resolve=w,j.reject=function(e){var t=new this(S);return O(t,e),t},j._setScheduler=function(e){i=e},j._setAsap=function(e){o=e},j._asap=o,j.polyfill=function(){var e=void 0;if("undefined"!=typeof global)e=global;else if("undefined"!=typeof self)e=self;else try{e=Function("return this")()}catch(e){throw new Error("polyfill failed because global object is unavailable in this environment")}var t=e.Promise;if(t){var n=null;try{n=Object.prototype.toString.call(t.resolve())}catch(e){}if("[object Promise]"===n&&!t.cast)return}e.Promise=j},j.Promise=j,j},e.exports=r()},function(e,t,n){"use strict";"undefined"==typeof process||"renderer"===process.type||!0===process.browser||process.__nwjs?e.exports=n(140):e.exports=n(142)},function(e,t,n){"use strict";function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}t.log=function(){var e;return"object"===("undefined"==typeof console?"undefined":r(console))&&console.log&&(e=console).log.apply(e,arguments)},t.formatArgs=function(t){if(t[0]=(this.useColors?"%c":"")+this.namespace+(this.useColors?" %c":" ")+t[0]+(this.useColors?"%c ":" ")+"+"+e.exports.humanize(this.diff),!this.useColors)return;var n="color: "+this.color;t.splice(1,0,n,"color: inherit");var r=0,i=0;t[0].replace(/%[a-zA-Z%]/g,function(e){"%%"!==e&&(r++,"%c"===e&&(i=r))}),t.splice(i,0,n)},t.save=function(e){try{e?t.storage.setItem("debug",e):t.storage.removeItem("debug")}catch(e){}},t.load=function(){var e;try{e=t.storage.getItem("debug")}catch(e){}!e&&"undefined"!=typeof process&&"env"in process&&(e=process.env.DEBUG);return e},t.useColors=function(){if("undefined"!=typeof window&&window.process&&("renderer"===window.process.type||window.process.__nwjs))return!0;if("undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/))return!1;return"undefined"!=typeof document&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||"undefined"!=typeof window&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||"undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31||"undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/)},t.storage=function(){try{return localStorage}catch(e){}}(),t.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"],e.exports=n(55)(t),e.exports.formatters.j=function(e){try{return JSON.stringify(e)}catch(e){return"[UnexpectedJSONParseError]: "+e.message}}},function(e,t){var n=1e3,r=60*n,i=60*r,o=24*i,s=7*o,a=365.25*o;function c(e,t,n,r){var i=t>=1.5*n;return Math.round(e/n)+" "+r+(i?"s":"")}e.exports=function(e,t){t=t||{};var u=typeof e;if("string"===u&&e.length>0)return function(e){if((e=String(e)).length>100)return;var t=/^((?:\d+)?\-?\d?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(e);if(!t)return;var c=parseFloat(t[1]);switch((t[2]||"ms").toLowerCase()){case"years":case"year":case"yrs":case"yr":case"y":return c*a;case"weeks":case"week":case"w":return c*s;case"days":case"day":case"d":return c*o;case"hours":case"hour":case"hrs":case"hr":case"h":return c*i;case"minutes":case"minute":case"mins":case"min":case"m":return c*r;case"seconds":case"second":case"secs":case"sec":case"s":return c*n;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return c;default:return}}(e);if("number"===u&&!1===isNaN(e))return t.long?function(e){var t=Math.abs(e);if(t>=o)return c(e,t,o,"day");if(t>=i)return c(e,t,i,"hour");if(t>=r)return c(e,t,r,"minute");if(t>=n)return c(e,t,n,"second");return e+" ms"}(e):function(e){var t=Math.abs(e);if(t>=o)return Math.round(e/o)+"d";if(t>=i)return Math.round(e/i)+"h";if(t>=r)return Math.round(e/r)+"m";if(t>=n)return Math.round(e/n)+"s";return e+"ms"}(e);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(e))}},function(e,t,n){"use strict";var r=n(143),i=n(15);t.init=function(e){e.inspectOpts={};for(var n=Object.keys(t.inspectOpts),r=0;r<n.length;r++)e.inspectOpts[n[r]]=t.inspectOpts[n[r]]},t.log=function(){return process.stderr.write(i.format.apply(i,arguments)+"\n")},t.formatArgs=function(n){var r=this.namespace;if(this.useColors){var i=this.color,o="[3"+(i<8?i:"8;5;"+i),s="  ".concat(o,";1m").concat(r," [0m");n[0]=s+n[0].split("\n").join("\n"+s),n.push(o+"m+"+e.exports.humanize(this.diff)+"[0m")}else n[0]=function(){if(t.inspectOpts.hideDate)return"";return(new Date).toISOString()+" "}()+r+" "+n[0]},t.save=function(e){e?process.env.DEBUG=e:delete process.env.DEBUG},t.load=function(){return process.env.DEBUG},t.useColors=function(){return"colors"in t.inspectOpts?Boolean(t.inspectOpts.colors):r.isatty(process.stderr.fd)},t.colors=[6,2,3,4,5,1];try{var o=n(144);o&&(o.stderr||o).level>=2&&(t.colors=[20,21,26,27,32,33,38,39,40,41,42,43,44,45,56,57,62,63,68,69,74,75,76,77,78,79,80,81,92,93,98,99,112,113,128,129,134,135,148,149,160,161,162,163,164,165,166,167,168,169,170,171,172,173,178,179,184,185,196,197,198,199,200,201,202,203,204,205,206,207,208,209,214,215,220,221])}catch(e){}t.inspectOpts=Object.keys(process.env).filter(function(e){return/^debug_/i.test(e)}).reduce(function(e,t){var n=t.substring(6).toLowerCase().replace(/_([a-z])/g,function(e,t){return t.toUpperCase()}),r=process.env[t];return r=!!/^(yes|on|true|enabled)$/i.test(r)||!/^(no|off|false|disabled)$/i.test(r)&&("null"===r?null:Number(r)),e[n]=r,e},{}),e.exports=n(55)(t);var s=e.exports.formatters;s.o=function(e){return this.inspectOpts.colors=this.useColors,i.inspect(e,this.inspectOpts).replace(/\s*\n\s*/g," ")},s.O=function(e){return this.inspectOpts.colors=this.useColors,i.inspect(e,this.inspectOpts)}},function(e,t){e.exports=require("tty")},function(e,t,n){"use strict";const r=n(3),i=n(145),o=process.env;let s;function a(e){return function(e){return 0!==e&&{level:e,hasBasic:!0,has256:e>=2,has16m:e>=3}}(function(e){if(!1===s)return 0;if(i("color=16m")||i("color=full")||i("color=truecolor"))return 3;if(i("color=256"))return 2;if(e&&!e.isTTY&&!0!==s)return 0;const t=s?1:0;if("win32"===process.platform){const e=r.release().split(".");return Number(process.versions.node.split(".")[0])>=8&&Number(e[0])>=10&&Number(e[2])>=10586?Number(e[2])>=14931?3:2:1}if("CI"in o)return["TRAVIS","CIRCLECI","APPVEYOR","GITLAB_CI"].some(e=>e in o)||"codeship"===o.CI_NAME?1:t;if("TEAMCITY_VERSION"in o)return/^(9\.(0*[1-9]\d*)\.|\d{2,}\.)/.test(o.TEAMCITY_VERSION)?1:0;if("truecolor"===o.COLORTERM)return 3;if("TERM_PROGRAM"in o){const e=parseInt((o.TERM_PROGRAM_VERSION||"").split(".")[0],10);switch(o.TERM_PROGRAM){case"iTerm.app":return e>=3?3:2;case"Apple_Terminal":return 2}}return/-256(color)?$/i.test(o.TERM)?2:/^screen|^xterm|^vt100|^vt220|^rxvt|color|ansi|cygwin|linux/i.test(o.TERM)?1:"COLORTERM"in o?1:(o.TERM,t)}(e))}i("no-color")||i("no-colors")||i("color=false")?s=!1:(i("color")||i("colors")||i("color=true")||i("color=always"))&&(s=!0),"FORCE_COLOR"in o&&(s=0===o.FORCE_COLOR.length||0!==parseInt(o.FORCE_COLOR,10)),e.exports={supportsColor:a,stdout:a(process.stdout),stderr:a(process.stderr)}},function(e,t,n){"use strict";e.exports=((e,t)=>{t=t||process.argv;const n=e.startsWith("-")?"":1===e.length?"-":"--",r=t.indexOf(n+e),i=t.indexOf("--");return-1!==r&&(-1===i||r<i)})},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(0),i=n(4),o=n(8),s=n(147),a=n(1),c=n(22),u="@@default@@";t.ClientCollection=class{constructor(){this.disposables=[],this.languageClients=new Map;let e=u;if(r.workspace.workspaceFolders&&r.workspace.workspaceFolders.length>0){let t=r.workspace.workspaceFolders[0];e=i.asFolder(t.uri),this.activeClient=s.createClient(this,t)}else this.activeClient=s.createClient(this);this.defaultClient=this.activeClient,this.languageClients.set(e,this.activeClient),this.disposables.push(r.workspace.onDidChangeWorkspaceFolders(e=>this.onDidChangeWorkspaceFolders(e))),this.disposables.push(r.workspace.onDidOpenTextDocument(e=>this.onDidOpenTextDocument(e))),this.disposables.push(r.workspace.onDidCloseTextDocument(e=>this.onDidCloseTextDocument(e)))}get ActiveClient(){return this.activeClient}get Names(){let e=[];return this.languageClients.forEach((t,n)=>{e.push({name:t.Name,key:n})}),e}get Count(){return this.languageClients.size}activeDocumentChanged(e){this.activeDocument=e;let t=this.getClientFor(e.uri);t.activeDocumentChanged(e),t!==this.activeClient&&(t.activate(),this.activeClient.deactivate(),this.activeClient=t)}get(e){return this.languageClients.has(e)?this.languageClients.get(e):(console.assert("key not found"),null)}forEach(e){this.languageClients.forEach(e)}checkOwnership(e,t){let n=[];return this.languageClients.forEach(e=>{t.uri.fsPath.startsWith(e.RootPath+a.sep)&&n.push(e)}),0===n.length&&n.push(this.activeClient),n[0]===e}replace(e,t){let n=void 0;for(let t of this.languageClients)if(t[1]===e){n=t[0];break}return n?(this.languageClients.delete(n),t?(e.TrackedDocuments.forEach(t=>this.transferOwnership(t,e)),e.TrackedDocuments.clear()):this.languageClients.set(n,s.createNullClient()),this.activeClient===e&&this.activeDocument&&(this.activeClient=this.getClientFor(this.activeDocument.uri),this.activeClient.activeDocumentChanged(this.activeDocument)),e.dispose(),this.languageClients.get(n)):(console.assert(n,"unable to locate language client"),null)}onDidChangeWorkspaceFolders(e){let t=r.workspace.workspaceFolders?r.workspace.workspaceFolders.length:0;t>1&&o.logLanguageServerEvent("workspaceFoldersChange",{count:t.toString()}),void 0!==e&&e.removed.forEach(e=>{let t=i.asFolder(e.uri),n=this.languageClients.get(t);n&&(this.languageClients.delete(t),n.TrackedDocuments.forEach(e=>this.transferOwnership(e,n)),n.TrackedDocuments.clear(),this.activeClient===n&&this.activeDocument&&(this.activeClient=this.getClientFor(this.activeDocument.uri),this.activeClient.activeDocumentChanged(this.activeDocument)),n.dispose())})}transferOwnership(e,t){let n=this.getClientFor(e.uri);console.assert(n!==t,"'oldOwner' should not be in the list of clients to consider"),n.takeOwnership(e)}onDidOpenTextDocument(e){("c"===e.languageId||"cpp"===e.languageId||"json"===e.languageId&&e.uri.fsPath.endsWith("c_cpp_properties.json"))&&this.getClientFor(e.uri)}getClientFor(e){let t=r.workspace.getWorkspaceFolder(e);if(t){let e=i.asFolder(t.uri);if(!this.languageClients.has(e)){let n=s.createClient(this,t);this.languageClients.set(e,n),c.getCustomConfigProviders().forEach(e=>n.onRegisterCustomConfigurationProvider(e))}return this.languageClients.get(e)}return this.defaultClient}onDidCloseTextDocument(e){}dispose(){let e=[];return this.defaultClient=void 0,this.languageClients.forEach(t=>e.push(t.dispose())),this.languageClients.clear(),Promise.all(e).then(()=>void 0)}}},function(e,t,n){"use strict";var r=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))(function(i,o){function s(e){try{c(r.next(e))}catch(e){o(e)}}function a(e){try{c(r.throw(e))}catch(e){o(e)}}function c(e){e.done?i(e.value):new n(function(t){t(e.value)}).then(s,a)}c((r=r.apply(e,t||[])).next())})};Object.defineProperty(t,"__esModule",{value:!0});const i=n(1),o=n(0),s=n(57),a=n(28),c=n(175),u=n(4),l=n(176),d=n(23),h=n(8),p=n(30),f=n(56),g=n(179),m=n(180),v=n(33),C=n(27),y=n(21),w=n(0),b=n(184),S=n(61),_=n(22),P=n(35),x=n(2),k=n(3);let E;const T=2e3;var I;!function(e){e[e.ConfigNotNeeded=0]="ConfigNotNeeded",e[e.ConfigNeeded=1]="ConfigNeeded",e[e.AncestorConfigNeeded=2]="AncestorConfigNeeded"}(I=t.QueryTranslationUnitSourceConfigDisposition||(t.QueryTranslationUnitSourceConfigDisposition={}));const D=new s.RequestType("cpptools/requestNavigationList"),R=new s.RequestType("cpptools/goToDeclaration"),O=new s.RequestType("cpptools/queryCompilerDefaults"),A=new s.RequestType("cpptools/queryTranslationUnitSource"),F=new s.RequestType("cpptools/didSwitchHeaderSource"),N=new s.RequestType("cpptools/getDiagnostics"),M=new s.NotificationType("textDocument/didOpen"),L=new s.NotificationType("cpptools/fileCreated"),q=new s.NotificationType("cpptools/fileDeleted"),j=new s.NotificationType("cpptools/resetDatabase"),W=new s.NotificationType("cpptools/pauseParsing"),$=new s.NotificationType("cpptools/resumeParsing"),U=new s.NotificationType("cpptools/activeDocumentChange"),H=new s.NotificationType("cpptools/textEditorSelectionChange"),z=new s.NotificationType("cpptools/didChangeFolderSettings"),V=new s.NotificationType("cpptools/didChangeCompileCommands"),B=new s.NotificationType("cpptools/didChangeSelectedSetting"),K=new s.NotificationType("cpptools/onIntervalTimer"),J=new s.NotificationType("cpptools/didChangeCustomConfiguration"),G=new s.NotificationType("cpptools/didChangeCustomBrowseConfiguration"),Z=new s.NotificationType("cpptools/clearCustomConfigurations"),Y=new s.NotificationType("cpptools/reloadWindow"),Q=new s.NotificationType("cpptools/logTelemetry"),X=new s.NotificationType("cpptools/reportNavigation"),ee=new s.NotificationType("cpptools/reportTagParseStatus"),te=new s.NotificationType("cpptools/reportStatus"),ne=new s.NotificationType("cpptools/debugProtocol"),re=new s.NotificationType("cpptools/debugLog"),ie=new s.NotificationType("cpptools/inactiveRegions"),oe=new s.NotificationType("cpptools/compileCommandsPaths"),se=new s.NotificationType("cpptools/updateClangFormatPath"),ae=new s.NotificationType("cpptools/updateIntelliSenseCachePath");class ce{constructor(e,t){this.done=!1,this.promise=new Promise((t,n)=>r(this,void 0,void 0,function*(){try{let r=yield e();t(r),this.done=!0}catch(e){n(e),this.done=!0}})),this.dependency=t}get Done(){return this.done&&(!this.dependency||this.dependency.Done)}then(e,t){return this.promise.then(e,t)}}let ue=!1;t.createClient=function(e,t){return new le(e,t)},t.createNullClient=function(){return new he};class le{constructor(e,t){this.disposables=[],this.trackedDocuments=new Set,this.crashTimes=[],this.isSupported=!0,this.inactiveRegionsDecorations=new Map,this.model={isTagParsing:new m.DataBinding(!1),isUpdatingIntelliSense:new m.DataBinding(!1),navigationLocation:new m.DataBinding(""),tagParserStatus:new m.DataBinding(""),activeConfigName:new m.DataBinding("")};try{let n=this.createLanguageClient(e,t);n.registerProposedFeatures(),n.start(),u.setProgress(u.getProgressExecutableStarted()),this.rootFolder=t,(E=f.getUI()).bind(this),this.queueBlockingTask(()=>n.onReady().then(()=>(this.configuration=new l.CppProperties(this.RootUri),this.configuration.ConfigurationsChanged(e=>this.onConfigurationsChanged(e)),this.configuration.SelectionChanged(e=>this.onSelectedConfigurationChanged(e)),this.configuration.CompileCommandsChanged(e=>this.onCompileCommandsChanged(e)),this.disposables.push(this.configuration),this.languageClient=n,this.settingsTracker=b.getTracker(this.RootUri),h.logLanguageServerEvent("NonDefaultInitialCppSettings",this.settingsTracker.getUserModifiedSettings()),ue=!1,this.registerNotifications(),this.registerFileWatcher(),n.sendRequest(O,{}).then(e=>{this.configuration.CompilerDefaults=e,y.registerCommands()})),e=>{this.isSupported=!1,ue||(ue=!0,o.window.showErrorMessage("Unable to start the C/C++ language server. IntelliSense features will be disabled. Error: "+String(e)))}))}catch(e){if(this.isSupported=!1,!ue){let t;ue=!0,t="EPERM"===e.code?`EPERM: Check permissions for '${de()}'`:String(e),o.window.showErrorMessage("Unable to start the C/C++ language server. IntelliSense features will be disabled. Error: "+t)}}}get TagParsingChanged(){return this.model.isTagParsing.ValueChanged}get IntelliSenseParsingChanged(){return this.model.isUpdatingIntelliSense.ValueChanged}get NavigationLocationChanged(){return this.model.navigationLocation.ValueChanged}get TagParserStatusChanged(){return this.model.tagParserStatus.ValueChanged}get ActiveConfigChanged(){return this.model.activeConfigName.ValueChanged}get RootPath(){return this.rootFolder?this.rootFolder.uri.fsPath:""}get RootUri(){return this.rootFolder?this.rootFolder.uri:null}get Name(){return this.getName(this.rootFolder)}get TrackedDocuments(){return this.trackedDocuments}get AdditionalEnvironment(){return{workspaceFolderBasename:this.Name}}getName(e){return e?e.name:"untitled"}createLanguageClient(e,t){let n=de();if(!x.existsSync(n))throw h.logLanguageServerEvent("missingLanguageServerBinary"),String("Missing binary at "+n);let r=this.getName(t),a={run:{command:n},debug:{command:n,args:[r]}},c=new d.CppSettings(t?t.uri:null),l=new d.OtherSettings(t?t.uri:null),p=u.extensionContext?u.extensionContext.storagePath:i.join(t?t.uri.fsPath:"","/.vscode");o.workspace.workspaceFolders&&o.workspace.workspaceFolders.length>1&&(p=i.join(p,r));let f=P.getABTestSettings(),m=!1;if("darwin"===k.platform()){const e=k.release().split(".");e.length>=1&&(m=parseInt(e[0])<17)}let v={documentSelector:[{scheme:"file",language:"cpp"},{scheme:"file",language:"c"}],synchronize:{configurationSection:["C_Cpp","files","search"]},workspaceFolder:t,initializationOptions:{clang_format_path:u.resolveVariables(c.clangFormatPath,this.AdditionalEnvironment),clang_format_style:c.clangFormatStyle,clang_format_fallbackStyle:c.clangFormatFallbackStyle,clang_format_sortIncludes:c.clangFormatSortIncludes,formatting:c.formatting,extension_path:u.extensionPath,exclude_files:l.filesExclude,exclude_search:l.searchExclude,storage_path:p,tab_size:l.editorTabSize,intelliSenseEngine:c.intelliSenseEngine,intelliSenseEngineFallback:c.intelliSenseEngineFallback,intelliSenseCacheDisabled:m,intelliSenseCachePath:u.resolveVariables(c.intelliSenseCachePath,this.AdditionalEnvironment),intelliSenseCacheSize:c.intelliSenseCacheSize,autocomplete:c.autoComplete,errorSquiggles:c.errorSquiggles,dimInactiveRegions:c.dimInactiveRegions,suggestSnippets:c.suggestSnippets,loggingLevel:c.loggingLevel,workspaceParsingPriority:c.workspaceParsingPriority,workspaceSymbols:c.workspaceSymbols,exclusionPolicy:c.exclusionPolicy,preferredPathSeparator:c.preferredPathSeparator,default:{systemIncludePath:c.defaultSystemIncludePath},vcpkg_root:u.getVcpkgRoot(),gotoDefIntelliSense:f.UseGoToDefIntelliSense},middleware:g.createProtocolFilter(this,e),errorHandler:{error:()=>s.ErrorAction.Continue,closed:()=>{if(this.crashTimes.push(Date.now()),this.crashTimes.length<5){e.replace(this,!0).crashTimes=this.crashTimes}else{if(this.crashTimes[this.crashTimes.length-1]-this.crashTimes[0]<=18e4)o.workspace.workspaceFolders&&o.workspace.workspaceFolders.length>1?o.window.showErrorMessage(`The language server for '${r}' crashed 5 times in the last 3 minutes. It will not be restarted.`):o.window.showErrorMessage("The language server crashed 5 times in the last 3 minutes. It will not be restarted."),e.replace(this,!1);else{this.crashTimes.shift(),e.replace(this,!0).crashTimes=this.crashTimes}}return s.CloseAction.DoNotRestart}}};return new s.LanguageClient(`cpptools: ${r}`,a,v)}onDidChangeSettings(){let e=this.settingsTracker.getChangedSettings();if(Object.keys(e).length>0){if(e.commentContinuationPatterns&&y.updateLanguageConfigurations(),e.clang_format_path){let e=new d.CppSettings(this.RootUri);this.languageClient.sendNotification(se,u.resolveVariables(e.clangFormatPath,this.AdditionalEnvironment))}if(e.intelliSenseCachePath){let e=new d.CppSettings(this.RootUri);this.languageClient.sendNotification(ae,u.resolveVariables(e.intelliSenseCachePath,this.AdditionalEnvironment))}this.configuration.onDidChangeSettings(),h.logLanguageServerEvent("CppSettingsChange",e,null)}return e}onDidChangeVisibleTextEditors(e){if(new d.CppSettings(this.RootUri).dimInactiveRegions)for(let t of e){let e=this.inactiveRegionsDecorations.get(t.document.uri.toString());e&&t.setDecorations(e.decoration,e.ranges)}}onRegisterCustomConfigurationProvider(e){let t=()=>{e.version>=a.Version.v2&&this.pauseParsing()};return this.notifyWhenReady(()=>{if(!this.RootPath)return;let n=this.configuration.CurrentConfigurationProvider;if(n)n===e.extensionId?(t(),h.logLanguageServerEvent("customConfigurationProvider",{providerId:e.extensionId})):n===e.name&&(t(),this.configuration.updateCustomConfigurationProvider(e.extensionId));else{let n=new p.PersistentFolderState("Client.registerProvider",!0,this.RootPath);n.Value&&E.showConfigureCustomProviderMessage(()=>{let r=o.workspace.workspaceFolders&&o.workspace.workspaceFolders.length>1?"the '"+this.Name+"'":"this";const i=`${e.name} would like to configure IntelliSense for ${r} folder.`;return o.window.showInformationMessage(i,"Allow","Don't Allow","Ask Me Later").then(r=>{switch(r){case"Allow":return this.configuration.updateCustomConfigurationProvider(e.extensionId).then(()=>{t(),h.logLanguageServerEvent("customConfigurationProvider",{providerId:e.extensionId})}),n.Value=!1,!0;case"Don't Allow":n.Value=!1}return!1})},()=>n.Value=!1)}})}updateCustomConfigurations(e){return this.notifyWhenReady(()=>{if(!this.configurationProvider)return;let t=_.getCustomConfigProviders().get(this.configurationProvider);if(!t||e&&e.extensionId!==t.extensionId||0===this.trackedDocuments.size)return;let n=new w.CancellationTokenSource,r=[];this.trackedDocuments.forEach(e=>r.push(e.uri));this.queueTaskWithTimeout(()=>t.provideConfigurations(r,n.token),T,n).then(e=>this.sendCustomConfigurations(e),()=>{})})}updateCustomBrowseConfiguration(e){return this.notifyWhenReady(()=>{if(!this.configurationProvider)return;console.log("updateCustomBrowseConfiguration");let t=_.getCustomConfigProviders().get(this.configurationProvider);if(!t||e&&e.extensionId!==t.extensionId)return;let n=new w.CancellationTokenSource;this.queueTaskWithTimeout(()=>r(this,void 0,void 0,function*(){return(yield t.canProvideBrowseConfiguration(n.token))?t.provideBrowseConfiguration(n.token):(t.version>=a.Version.v2&&console.warn("failed to provide browse configuration"),Promise.reject(""))}),T,n).then(e=>r(this,void 0,void 0,function*(){yield this.sendCustomBrowseConfiguration(e),this.resumeParsing()}),()=>{})})}logDiagnostics(){return r(this,void 0,void 0,function*(){let e=yield this.requestWhenReady(()=>this.languageClient.sendRequest(N,null));this.diagnosticsChannel||(this.diagnosticsChannel=o.window.createOutputChannel("C/C++ Diagnostics"),this.disposables.push(this.diagnosticsChannel));let t=`-------- Diagnostics - ${(new Date).toLocaleString()}\n`,n=`Version: ${u.packageJson.version}\n`;this.diagnosticsChannel.appendLine(`${t}${n}${e.diagnostics}`),this.diagnosticsChannel.show(!1)})}provideCustomConfiguration(e){return r(this,void 0,void 0,function*(){let t=new w.CancellationTokenSource,n=_.getCustomConfigProviders();if(0===n.size)return Promise.resolve();console.log("provideCustomConfiguration");let i=yield this.getCustomConfigurationProviderId();if(!i)return Promise.resolve();let s=i,a={uri:e.uri.toString()},c=yield this.requestWhenReady(()=>this.languageClient.sendRequest(A,a));if(c.configDisposition===I.ConfigNotNeeded)return Promise.resolve();let u=o.Uri.parse(c.uri),l=yield this.getCurrentConfigName();const h=`${s} is not ready`;return this.queueTaskWithTimeout(()=>r(this,void 0,void 0,function*(){try{let e=n.get(i);if(e){if(!e.isReady)return Promise.reject(h);if(s=e.name,yield e.canProvideConfiguration(u,t.token))return e.provideConfigurations([u],t.token)}}catch(e){}return console.warn("failed to provide configuration"),Promise.reject("")}),T,t).then(t=>{if(t&&t.length>0&&(this.sendCustomConfigurations(t,!0),c.configDisposition===I.AncestorConfigNeeded)){let n={uri:e.uri,configuration:t[0].configuration};this.sendCustomConfigurations([n],!0)}},t=>{if(t===h)return;let n=new d.CppSettings(this.RootUri);if("Enabled"===n.configurationWarnings&&!this.isExternalHeader(e.uri)&&!o.debug.activeDebugSession){const r="Dismiss",i="Disable Warnings";let a=`'${s}' is unable to provide IntelliSense configuration information for '${e.uri.fsPath}'. `+`Settings from the '${l}' configuration will be used instead.`;t&&(a+=` (${t})`),o.window.showInformationMessage(a,r,i).then(e=>{switch(e){case i:n.toggleSetting("configurationWarnings","Enabled","Disabled")}})}})})}isExternalHeader(e){return u.isHeader(e)&&!e.toString().startsWith(this.RootUri.toString())}getCustomConfigurationProviderId(){return this.queueTask(()=>Promise.resolve(this.configuration.CurrentConfigurationProvider))}getCurrentConfigName(){return this.queueTask(()=>Promise.resolve(this.configuration.CurrentConfiguration.name))}getCompilerPath(){return this.queueTask(()=>Promise.resolve(this.configuration.CompilerPath))}getKnownCompilers(){return this.queueTask(()=>Promise.resolve(this.configuration.KnownCompiler))}takeOwnership(e){let t={textDocument:{uri:e.uri.toString(),languageId:e.languageId,version:e.version,text:e.getText()}};this.notifyWhenReady(()=>this.languageClient.sendNotification(M,t)),this.trackedDocuments.add(e)}queueTask(e){if(this.isSupported){let t=()=>r(this,void 0,void 0,function*(){try{return yield e()}catch(e){throw console.error(e),e}});return this.pendingTask&&!this.pendingTask.Done?this.pendingTask.then(t,t):(this.pendingTask=void 0,t())}return Promise.reject("Unsupported client")}queueBlockingTask(e){if(!this.isSupported)return Promise.reject("Unsupported client");this.pendingTask=new ce(e,this.pendingTask)}queueTaskWithTimeout(e,t,n){let r,i=()=>new Promise((e,i)=>{r=setTimeout(()=>{clearTimeout(r),n&&n.cancel(),i("Timed out in "+t+"ms.")},t)});return this.queueTask(()=>Promise.race([e(),i()]).then(e=>(clearTimeout(r),e),e=>{throw clearTimeout(r),e}))}requestWhenReady(e){return this.queueTask(e)}notifyWhenReady(e,t){let n=()=>new Promise(t=>{e(),t()});return t?this.queueBlockingTask(n):this.queueTask(n)}registerNotifications(){console.assert(void 0!==this.languageClient,'This method must not be called until this.languageClient is set in "onReady"'),this.languageClient.onNotification(Y,()=>u.promptForReloadWindowDueToSettingsChange()),this.languageClient.onNotification(Q,e=>this.logTelemetry(e)),this.languageClient.onNotification(X,e=>this.navigate(e)),this.languageClient.onNotification(te,e=>this.updateStatus(e)),this.languageClient.onNotification(ee,e=>this.updateTagParseStatus(e)),this.languageClient.onNotification(ie,e=>this.updateInactiveRegions(e)),this.languageClient.onNotification(oe,e=>this.promptCompileCommands(e)),this.setupOutputHandlers()}registerFileWatcher(){console.assert(void 0!==this.languageClient,'This method must not be called until this.languageClient is set in "onReady"'),this.rootFolder?(this.rootPathFileWatcher=o.workspace.createFileSystemWatcher("**/*",!1,!0,!1),this.rootPathFileWatcher.onDidCreate(e=>{this.languageClient.sendNotification(L,{uri:e.toString()})}),this.rootPathFileWatcher.onDidDelete(e=>{this.languageClient.sendNotification(q,{uri:e.toString()})}),this.disposables.push(this.rootPathFileWatcher)):this.rootPathFileWatcher=void 0}setupOutputHandlers(){console.assert(void 0!==this.languageClient,'This method must not be called until this.languageClient is set in "onReady"'),this.languageClient.onNotification(ne,e=>{this.debugChannel||(this.debugChannel=o.window.createOutputChannel(`C/C++ Debug Protocol: ${this.Name}`),this.disposables.push(this.debugChannel)),this.debugChannel.appendLine(""),this.debugChannel.appendLine("************************************************************************************************************************"),this.debugChannel.append(`${e}`)}),this.languageClient.onNotification(re,e=>{this.outputChannel||(o.workspace.workspaceFolders&&o.workspace.workspaceFolders.length>1?this.outputChannel=o.window.createOutputChannel(`C/C++: ${this.Name}`):this.outputChannel=C.getOutputChannel(),this.disposables.push(this.outputChannel)),this.outputChannel.appendLine(`${e}`)})}logTelemetry(e){h.logLanguageServerEvent(e.event,e.properties,e.metrics)}navigate(e){let t=new d.CppSettings(this.RootUri);if(t.autoAddFileAssociations&&e.navigation.startsWith("<def")){let t=e.navigation.substr(4),n=t.startsWith("c");return t=t.substr(n?3:2),void this.addFileAssociations(t,n)}let n=e.navigation,r=t.navigationLength;n.length>r&&(n=n.substring(0,r-3).concat("...")),this.model.navigationLocation.Value=n}addFileAssociations(e,t){let n=new d.OtherSettings(this.RootUri),r=n.filesAssociations,i=e.split(";"),o=!1;for(let e=0;e<i.length;++e){let n=i[e].split("@");if(2===n.length){let e=n[0],i=n[1];if(e in r||"**/"+e in r)continue;let s=e.lastIndexOf(".");if(-1!==s){let t=e.substr(s);if("*"+t in r||"**/*"+t in r)continue}let a=!1;for(let e in r)if(v(i,e)){a=!0;break}if(a)continue;r[e]=t?"c":"cpp",o=!0}}o&&(n.filesAssociations=r)}updateStatus(e){let t=e.status;u.setProgress(u.getProgressExecutableSuccess());let n=S.getTestHook();if(t.endsWith("Indexing..."))this.model.isTagParsing.Value=!0,n.updateStatus(c.Status.TagParsingBegun);else if(t.endsWith("Updating IntelliSense..."))this.model.isUpdatingIntelliSense.Value=!0,n.updateStatus(c.Status.IntelliSenseCompiling);else if(t.endsWith("IntelliSense Ready"))this.model.isUpdatingIntelliSense.Value=!1,n.updateStatus(c.Status.IntelliSenseReady);else if(t.endsWith("Ready"))this.model.isTagParsing.Value=!1,n.updateStatus(c.Status.TagParsingDone),u.setProgress(u.getProgressParseRootSuccess());else if(t.endsWith("No Squiggles"))u.setIntelliSenseProgress(u.getProgressIntelliSenseNoSquiggles());else if(t.endsWith("IntelliSense Fallback")){let e=new p.PersistentState("CPP.showIntelliSenseFallbackMessage",!0);e.Value&&E.showConfigureIncludePathMessage(()=>{let t=this.configuration.VcpkgInstalled?"Update your IntelliSense settings or use Vcpkg to install libraries to help find missing headers.":"Configure your IntelliSense settings to help find missing headers.";return o.window.showInformationMessage(t,"Configure (JSON)","Configure (UI)","Don't Show Again").then(t=>{switch(t){case"Configure (JSON)":o.commands.getCommands(!0).then(e=>{e.indexOf("workbench.action.problems.focus")>=0&&o.commands.executeCommand("workbench.action.problems.focus")}),this.handleConfigurationEditJSONCommand(),h.logLanguageServerEvent("SettingsCommand",{toast:"json"},null);break;case"Configure (UI)":o.commands.getCommands(!0).then(e=>{e.indexOf("workbench.action.problems.focus")>=0&&o.commands.executeCommand("workbench.action.problems.focus")}),this.handleConfigurationEditUICommand(),h.logLanguageServerEvent("SettingsCommand",{toast:"ui"},null);break;case"Don't Show Again":e.Value=!1}return!0})},()=>e.Value=!1)}}updateTagParseStatus(e){this.model.tagParserStatus.Value=e.status}updateInactiveRegions(e){let t=new d.CppSettings(this.RootUri),n=o.window.createTextEditorDecorationType({opacity:t.inactiveRegionOpacity.toString(),backgroundColor:t.inactiveRegionBackgroundColor,color:t.inactiveRegionForegroundColor,rangeBehavior:o.DecorationRangeBehavior.ClosedOpen}),r=[];e.regions.forEach(e=>{let t=new o.Range(e.startLine,0,e.endLine,0);r.push(t)});let i=this.inactiveRegionsDecorations.get(e.uri);if(i)i.decoration.dispose(),i.decoration=n,i.ranges=r;else{let t={decoration:n,ranges:r};this.inactiveRegionsDecorations.set(e.uri,t)}if(t.dimInactiveRegions){let t=o.window.visibleTextEditors.filter(t=>t.document.uri.toString()===e.uri);for(let e of t)e.setDecorations(n,r)}}promptCompileCommands(e){if(void 0!==this.configuration.CurrentConfiguration.compileCommands)return;let t=new p.PersistentFolderState("CPP.showCompileCommandsSelection",!0,this.RootPath);if(!t.Value)return;const n=`Would you like to use ${e.paths.length>1?"a compile_commands.json file":e.paths[0]} to auto-configure IntelliSense for ${o.workspace.workspaceFolders&&o.workspace.workspaceFolders.length>1?"the '"+this.Name+"'":"this"} folder?`;E.showConfigureCompileCommandsMessage(()=>{return o.window.showInformationMessage(n,"Yes","No","Ask Me Later").then(n=>r(this,void 0,void 0,function*(){switch(n){case"Yes":if(e.paths.length>1){let t=yield E.showCompileCommands(e.paths);if(t<0)return!1;this.configuration.setCompileCommands(e.paths[t])}else this.configuration.setCompileCommands(e.paths[0]);return!0;case"Ask Me Later":break;case"No":t.Value=!1}return!1}))},()=>t.Value=!1)}requestGoToDeclaration(){return this.requestWhenReady(()=>this.languageClient.sendRequest(R,null))}requestSwitchHeaderSource(e,t){let n={rootPath:e,switchHeaderSourceFileName:t};return this.requestWhenReady(()=>this.languageClient.sendRequest(F,n))}requestNavigationList(e){return this.requestWhenReady(()=>this.languageClient.sendRequest(D,this.languageClient.code2ProtocolConverter.asTextDocumentIdentifier(e)))}activeDocumentChanged(e){this.notifyWhenReady(()=>{this.languageClient.sendNotification(U,this.languageClient.code2ProtocolConverter.asTextDocumentIdentifier(e))})}activate(){for(let e in this.model)this.model.hasOwnProperty(e)&&this.model[e].activate();this.resumeParsing()}selectionChanged(e){this.notifyWhenReady(()=>this.languageClient.sendNotification(H,e))}resetDatabase(){this.notifyWhenReady(()=>this.languageClient.sendNotification(j))}deactivate(){for(let e in this.model)this.model.hasOwnProperty(e)&&this.model[e].deactivate();this.pauseParsing()}pauseParsing(){this.notifyWhenReady(()=>this.languageClient.sendNotification(W))}resumeParsing(){this.notifyWhenReady(()=>this.languageClient.sendNotification($))}onConfigurationsChanged(e){let t={configurations:e,currentConfiguration:this.configuration.CurrentConfigurationIndex};this.notifyWhenReady(()=>{this.languageClient.sendNotification(z,t),this.model.activeConfigName.Value=e[t.currentConfiguration].name}).then(()=>{let e=this.configuration.CurrentConfigurationProvider;this.configurationProvider!==e&&(this.configurationProvider&&this.clearCustomConfigurations(),this.configurationProvider=e,this.updateCustomConfigurations(),this.updateCustomBrowseConfiguration())})}onSelectedConfigurationChanged(e){let t={currentConfiguration:e};this.notifyWhenReady(()=>{this.languageClient.sendNotification(B,t),this.model.activeConfigName.Value=this.configuration.ConfigurationNames[e]})}onCompileCommandsChanged(e){let t={uri:e};this.notifyWhenReady(()=>this.languageClient.sendNotification(V,t))}isSourceFileConfigurationItem(e){return e&&(u.isString(e.uri)||u.isUri(e.uri))&&e.configuration&&u.isArrayOfString(e.configuration.includePath)&&u.isArrayOfString(e.configuration.defines)&&u.isString(e.configuration.intelliSenseMode)&&u.isString(e.configuration.standard)&&u.isOptionalString(e.configuration.compilerPath)&&u.isOptionalArrayOfString(e.configuration.forcedInclude)}sendCustomConfigurations(e,t){if(!(e&&e instanceof Array))return void console.warn("discarding invalid SourceFileConfigurationItems[]: "+e);let n=new d.CppSettings(this.RootUri),r=C.getOutputChannelLogger();"Debug"===n.loggingLevel&&r.appendLine("Custom configurations received:");let i=[];if(e.forEach(e=>{this.isSourceFileConfigurationItem(e)?(i.push({uri:e.uri.toString(),configuration:e.configuration}),"Debug"===n.loggingLevel&&(r.appendLine(`  uri: ${e.uri.toString()}`),r.appendLine(`  config: ${JSON.stringify(e.configuration,null,2)}`)),e.configuration.includePath.some(e=>e.endsWith("**"))&&console.warn("custom include paths should not use recursive includes ('**')")):console.warn("discarding invalid SourceFileConfigurationItem: "+e)}),0===i.length)return;let o={configurationItems:i};this.notifyWhenReady(()=>this.languageClient.sendNotification(J,o),t)}sendCustomBrowseConfiguration(e){if(!e||e instanceof Array)return console.warn("discarding invalid WorkspaceBrowseConfiguration: "+e),Promise.resolve();let t=e;if(!(u.isArrayOfString(t.browsePath)&&u.isOptionalString(t.compilerPath)&&u.isOptionalString(t.standard)&&u.isOptionalString(t.windowsSdkVersion)))return console.warn("discarding invalid WorkspaceBrowseConfiguration: "+e),Promise.resolve();let n=new d.CppSettings(this.RootUri),r=C.getOutputChannelLogger();"Debug"===n.loggingLevel&&r.appendLine(`Custom browse configuration received: ${JSON.stringify(t,null,2)}`);let i={browseConfiguration:t};return this.notifyWhenReady(()=>this.languageClient.sendNotification(G,i))}clearCustomConfigurations(){this.notifyWhenReady(()=>this.languageClient.sendNotification(Z))}handleConfigurationSelectCommand(){this.notifyWhenReady(()=>{E.showConfigurations(this.configuration.ConfigurationNames).then(e=>{e<0||this.configuration.select(e)})})}handleConfigurationProviderSelectCommand(){this.notifyWhenReady(()=>{E.showConfigurationProviders(this.configuration.CurrentConfigurationProvider).then(e=>{void 0!==e&&this.configuration.updateCustomConfigurationProvider(e).then(()=>{if(e){let t=_.getCustomConfigProviders().get(e);this.updateCustomConfigurations(t),this.updateCustomBrowseConfiguration(t),h.logLanguageServerEvent("customConfigurationProvider",{providerId:e})}else this.clearCustomConfigurations()})})})}handleShowParsingCommands(){this.notifyWhenReady(()=>{E.showParsingCommands().then(e=>{0===e?this.pauseParsing():1===e&&this.resumeParsing()})})}handleConfigurationEditCommand(){this.notifyWhenReady(()=>this.configuration.handleConfigurationEditCommand(null,o.window.showTextDocument))}handleConfigurationEditJSONCommand(){this.notifyWhenReady(()=>this.configuration.handleConfigurationEditJSONCommand(null,o.window.showTextDocument))}handleConfigurationEditUICommand(){this.notifyWhenReady(()=>this.configuration.handleConfigurationEditUICommand(null,o.window.showTextDocument))}handleAddToIncludePathCommand(e){this.notifyWhenReady(()=>this.configuration.addToIncludePathCommand(e))}onInterval(){void 0!==this.languageClient&&void 0!==this.configuration&&(this.languageClient.sendNotification(K),this.configuration.checkCppProperties())}dispose(){return(this.languageClient?this.languageClient.stop():Promise.resolve()).then(()=>{this.disposables.forEach(e=>e.dispose()),this.disposables=[];for(let e in this.model)this.model.hasOwnProperty(e)&&this.model[e].dispose()})}}function de(){let e="Microsoft.VSCode.CPP.Extension",t=process.platform;if("linux"===t)e+=".linux";else if("darwin"===t)e+=".darwin";else{if("win32"!==t)throw"Invalid Platform";e+=".exe"}return i.resolve(u.getExtensionFilePath("bin"),e)}class he{constructor(){this.booleanEvent=new o.EventEmitter,this.stringEvent=new o.EventEmitter,this.RootPath="/",this.RootUri=o.Uri.file("/"),this.Name="(empty)",this.TrackedDocuments=new Set}get TagParsingChanged(){return this.booleanEvent.event}get IntelliSenseParsingChanged(){return this.booleanEvent.event}get NavigationLocationChanged(){return this.stringEvent.event}get TagParserStatusChanged(){return this.stringEvent.event}get ActiveConfigChanged(){return this.stringEvent.event}onDidChangeSettings(){return{}}onDidChangeVisibleTextEditors(e){}onRegisterCustomConfigurationProvider(e){return Promise.resolve()}updateCustomConfigurations(e){return Promise.resolve()}updateCustomBrowseConfiguration(e){return Promise.resolve()}provideCustomConfiguration(e){return Promise.resolve()}logDiagnostics(){return Promise.resolve()}getCurrentConfigName(){return Promise.resolve("")}getCompilerPath(){return Promise.resolve("")}getKnownCompilers(){return Promise.resolve([])}takeOwnership(e){}queueTask(e){return e()}requestWhenReady(e){}notifyWhenReady(e){}requestGoToDeclaration(){return Promise.resolve()}requestSwitchHeaderSource(e,t){return Promise.resolve("")}requestNavigationList(e){return Promise.resolve("")}activeDocumentChanged(e){}activate(){}selectionChanged(e){}resetDatabase(){}deactivate(){}pauseParsing(){}resumeParsing(){}handleConfigurationSelectCommand(){}handleConfigurationProviderSelectCommand(){}handleShowParsingCommands(){}handleConfigurationEditCommand(){}handleConfigurationEditJSONCommand(){}handleConfigurationEditUICommand(){}handleAddToIncludePathCommand(e){}onInterval(){}dispose(){return this.booleanEvent.dispose(),this.stringEvent.dispose(),Promise.resolve()}addFileAssociations(e,t){}}},function(e,t){var n;t=e.exports=K,n="object"==typeof process&&process.env&&process.env.NODE_DEBUG&&/\bsemver\b/i.test(process.env.NODE_DEBUG)?function(){var e=Array.prototype.slice.call(arguments,0);e.unshift("SEMVER"),console.log.apply(console,e)}:function(){},t.SEMVER_SPEC_VERSION="2.0.0";var r=256,i=Number.MAX_SAFE_INTEGER||9007199254740991,o=t.re=[],s=t.src=[],a=0,c=a++;s[c]="0|[1-9]\\d*";var u=a++;s[u]="[0-9]+";var l=a++;s[l]="\\d*[a-zA-Z-][a-zA-Z0-9-]*";var d=a++;s[d]="("+s[c]+")\\.("+s[c]+")\\.("+s[c]+")";var h=a++;s[h]="("+s[u]+")\\.("+s[u]+")\\.("+s[u]+")";var p=a++;s[p]="(?:"+s[c]+"|"+s[l]+")";var f=a++;s[f]="(?:"+s[u]+"|"+s[l]+")";var g=a++;s[g]="(?:-("+s[p]+"(?:\\."+s[p]+")*))";var m=a++;s[m]="(?:-?("+s[f]+"(?:\\."+s[f]+")*))";var v=a++;s[v]="[0-9A-Za-z-]+";var C=a++;s[C]="(?:\\+("+s[v]+"(?:\\."+s[v]+")*))";var y=a++,w="v?"+s[d]+s[g]+"?"+s[C]+"?";s[y]="^"+w+"$";var b="[v=\\s]*"+s[h]+s[m]+"?"+s[C]+"?",S=a++;s[S]="^"+b+"$";var _=a++;s[_]="((?:<|>)?=?)";var P=a++;s[P]=s[u]+"|x|X|\\*";var x=a++;s[x]=s[c]+"|x|X|\\*";var k=a++;s[k]="[v=\\s]*("+s[x]+")(?:\\.("+s[x]+")(?:\\.("+s[x]+")(?:"+s[g]+")?"+s[C]+"?)?)?";var E=a++;s[E]="[v=\\s]*("+s[P]+")(?:\\.("+s[P]+")(?:\\.("+s[P]+")(?:"+s[m]+")?"+s[C]+"?)?)?";var T=a++;s[T]="^"+s[_]+"\\s*"+s[k]+"$";var I=a++;s[I]="^"+s[_]+"\\s*"+s[E]+"$";var D=a++;s[D]="(?:^|[^\\d])(\\d{1,16})(?:\\.(\\d{1,16}))?(?:\\.(\\d{1,16}))?(?:$|[^\\d])";var R=a++;s[R]="(?:~>?)";var O=a++;s[O]="(\\s*)"+s[R]+"\\s+",o[O]=new RegExp(s[O],"g");var A=a++;s[A]="^"+s[R]+s[k]+"$";var F=a++;s[F]="^"+s[R]+s[E]+"$";var N=a++;s[N]="(?:\\^)";var M=a++;s[M]="(\\s*)"+s[N]+"\\s+",o[M]=new RegExp(s[M],"g");var L=a++;s[L]="^"+s[N]+s[k]+"$";var q=a++;s[q]="^"+s[N]+s[E]+"$";var j=a++;s[j]="^"+s[_]+"\\s*("+b+")$|^$";var W=a++;s[W]="^"+s[_]+"\\s*("+w+")$|^$";var $=a++;s[$]="(\\s*)"+s[_]+"\\s*("+b+"|"+s[k]+")",o[$]=new RegExp(s[$],"g");var U=a++;s[U]="^\\s*("+s[k]+")\\s+-\\s+("+s[k]+")\\s*$";var H=a++;s[H]="^\\s*("+s[E]+")\\s+-\\s+("+s[E]+")\\s*$";var z=a++;s[z]="(<|>)?=?\\s*\\*";for(var V=0;V<35;V++)n(V,s[V]),o[V]||(o[V]=new RegExp(s[V]));function B(e,t){if(t&&"object"==typeof t||(t={loose:!!t,includePrerelease:!1}),e instanceof K)return e;if("string"!=typeof e)return null;if(e.length>r)return null;if(!(t.loose?o[S]:o[y]).test(e))return null;try{return new K(e,t)}catch(e){return null}}function K(e,t){if(t&&"object"==typeof t||(t={loose:!!t,includePrerelease:!1}),e instanceof K){if(e.loose===t.loose)return e;e=e.version}else if("string"!=typeof e)throw new TypeError("Invalid Version: "+e);if(e.length>r)throw new TypeError("version is longer than "+r+" characters");if(!(this instanceof K))return new K(e,t);n("SemVer",e,t),this.options=t,this.loose=!!t.loose;var s=e.trim().match(t.loose?o[S]:o[y]);if(!s)throw new TypeError("Invalid Version: "+e);if(this.raw=e,this.major=+s[1],this.minor=+s[2],this.patch=+s[3],this.major>i||this.major<0)throw new TypeError("Invalid major version");if(this.minor>i||this.minor<0)throw new TypeError("Invalid minor version");if(this.patch>i||this.patch<0)throw new TypeError("Invalid patch version");s[4]?this.prerelease=s[4].split(".").map(function(e){if(/^[0-9]+$/.test(e)){var t=+e;if(t>=0&&t<i)return t}return e}):this.prerelease=[],this.build=s[5]?s[5].split("."):[],this.format()}t.parse=B,t.valid=function(e,t){var n=B(e,t);return n?n.version:null},t.clean=function(e,t){var n=B(e.trim().replace(/^[=v]+/,""),t);return n?n.version:null},t.SemVer=K,K.prototype.format=function(){return this.version=this.major+"."+this.minor+"."+this.patch,this.prerelease.length&&(this.version+="-"+this.prerelease.join(".")),this.version},K.prototype.toString=function(){return this.version},K.prototype.compare=function(e){return n("SemVer.compare",this.version,this.options,e),e instanceof K||(e=new K(e,this.options)),this.compareMain(e)||this.comparePre(e)},K.prototype.compareMain=function(e){return e instanceof K||(e=new K(e,this.options)),G(this.major,e.major)||G(this.minor,e.minor)||G(this.patch,e.patch)},K.prototype.comparePre=function(e){if(e instanceof K||(e=new K(e,this.options)),this.prerelease.length&&!e.prerelease.length)return-1;if(!this.prerelease.length&&e.prerelease.length)return 1;if(!this.prerelease.length&&!e.prerelease.length)return 0;var t=0;do{var r=this.prerelease[t],i=e.prerelease[t];if(n("prerelease compare",t,r,i),void 0===r&&void 0===i)return 0;if(void 0===i)return 1;if(void 0===r)return-1;if(r!==i)return G(r,i)}while(++t)},K.prototype.inc=function(e,t){switch(e){case"premajor":this.prerelease.length=0,this.patch=0,this.minor=0,this.major++,this.inc("pre",t);break;case"preminor":this.prerelease.length=0,this.patch=0,this.minor++,this.inc("pre",t);break;case"prepatch":this.prerelease.length=0,this.inc("patch",t),this.inc("pre",t);break;case"prerelease":0===this.prerelease.length&&this.inc("patch",t),this.inc("pre",t);break;case"major":0===this.minor&&0===this.patch&&0!==this.prerelease.length||this.major++,this.minor=0,this.patch=0,this.prerelease=[];break;case"minor":0===this.patch&&0!==this.prerelease.length||this.minor++,this.patch=0,this.prerelease=[];break;case"patch":0===this.prerelease.length&&this.patch++,this.prerelease=[];break;case"pre":if(0===this.prerelease.length)this.prerelease=[0];else{for(var n=this.prerelease.length;--n>=0;)"number"==typeof this.prerelease[n]&&(this.prerelease[n]++,n=-2);-1===n&&this.prerelease.push(0)}t&&(this.prerelease[0]===t?isNaN(this.prerelease[1])&&(this.prerelease=[t,0]):this.prerelease=[t,0]);break;default:throw new Error("invalid increment argument: "+e)}return this.format(),this.raw=this.version,this},t.inc=function(e,t,n,r){"string"==typeof n&&(r=n,n=void 0);try{return new K(e,n).inc(t,r).version}catch(e){return null}},t.diff=function(e,t){if(X(e,t))return null;var n=B(e),r=B(t),i="";if(n.prerelease.length||r.prerelease.length){i="pre";var o="prerelease"}for(var s in n)if(("major"===s||"minor"===s||"patch"===s)&&n[s]!==r[s])return i+s;return o},t.compareIdentifiers=G;var J=/^[0-9]+$/;function G(e,t){var n=J.test(e),r=J.test(t);return n&&r&&(e=+e,t=+t),e===t?0:n&&!r?-1:r&&!n?1:e<t?-1:1}function Z(e,t,n){return new K(e,n).compare(new K(t,n))}function Y(e,t,n){return Z(e,t,n)>0}function Q(e,t,n){return Z(e,t,n)<0}function X(e,t,n){return 0===Z(e,t,n)}function ee(e,t,n){return 0!==Z(e,t,n)}function te(e,t,n){return Z(e,t,n)>=0}function ne(e,t,n){return Z(e,t,n)<=0}function re(e,t,n,r){switch(t){case"===":return"object"==typeof e&&(e=e.version),"object"==typeof n&&(n=n.version),e===n;case"!==":return"object"==typeof e&&(e=e.version),"object"==typeof n&&(n=n.version),e!==n;case"":case"=":case"==":return X(e,n,r);case"!=":return ee(e,n,r);case">":return Y(e,n,r);case">=":return te(e,n,r);case"<":return Q(e,n,r);case"<=":return ne(e,n,r);default:throw new TypeError("Invalid operator: "+t)}}function ie(e,t){if(t&&"object"==typeof t||(t={loose:!!t,includePrerelease:!1}),e instanceof ie){if(e.loose===!!t.loose)return e;e=e.value}if(!(this instanceof ie))return new ie(e,t);n("comparator",e,t),this.options=t,this.loose=!!t.loose,this.parse(e),this.semver===oe?this.value="":this.value=this.operator+this.semver.version,n("comp",this)}t.rcompareIdentifiers=function(e,t){return G(t,e)},t.major=function(e,t){return new K(e,t).major},t.minor=function(e,t){return new K(e,t).minor},t.patch=function(e,t){return new K(e,t).patch},t.compare=Z,t.compareLoose=function(e,t){return Z(e,t,!0)},t.rcompare=function(e,t,n){return Z(t,e,n)},t.sort=function(e,n){return e.sort(function(e,r){return t.compare(e,r,n)})},t.rsort=function(e,n){return e.sort(function(e,r){return t.rcompare(e,r,n)})},t.gt=Y,t.lt=Q,t.eq=X,t.neq=ee,t.gte=te,t.lte=ne,t.cmp=re,t.Comparator=ie;var oe={};function se(e,t){if(t&&"object"==typeof t||(t={loose:!!t,includePrerelease:!1}),e instanceof se)return e.loose===!!t.loose&&e.includePrerelease===!!t.includePrerelease?e:new se(e.raw,t);if(e instanceof ie)return new se(e.value,t);if(!(this instanceof se))return new se(e,t);if(this.options=t,this.loose=!!t.loose,this.includePrerelease=!!t.includePrerelease,this.raw=e,this.set=e.split(/\s*\|\|\s*/).map(function(e){return this.parseRange(e.trim())},this).filter(function(e){return e.length}),!this.set.length)throw new TypeError("Invalid SemVer Range: "+e);this.format()}function ae(e){return!e||"x"===e.toLowerCase()||"*"===e}function ce(e,t,n,r,i,o,s,a,c,u,l,d,h){return((t=ae(n)?"":ae(r)?">="+n+".0.0":ae(i)?">="+n+"."+r+".0":">="+t)+" "+(a=ae(c)?"":ae(u)?"<"+(+c+1)+".0.0":ae(l)?"<"+c+"."+(+u+1)+".0":d?"<="+c+"."+u+"."+l+"-"+d:"<="+a)).trim()}function ue(e,t,r){for(var i=0;i<e.length;i++)if(!e[i].test(t))return!1;if(t.prerelease.length&&!r.includePrerelease){for(i=0;i<e.length;i++)if(n(e[i].semver),e[i].semver!==oe&&e[i].semver.prerelease.length>0){var o=e[i].semver;if(o.major===t.major&&o.minor===t.minor&&o.patch===t.patch)return!0}return!1}return!0}function le(e,t,n){try{t=new se(t,n)}catch(e){return!1}return t.test(e)}function de(e,t,n,r){var i,o,s,a,c;switch(e=new K(e,r),t=new se(t,r),n){case">":i=Y,o=ne,s=Q,a=">",c=">=";break;case"<":i=Q,o=te,s=Y,a="<",c="<=";break;default:throw new TypeError('Must provide a hilo val of "<" or ">"')}if(le(e,t,r))return!1;for(var u=0;u<t.set.length;++u){var l=t.set[u],d=null,h=null;if(l.forEach(function(e){e.semver===oe&&(e=new ie(">=0.0.0")),d=d||e,h=h||e,i(e.semver,d.semver,r)?d=e:s(e.semver,h.semver,r)&&(h=e)}),d.operator===a||d.operator===c)return!1;if((!h.operator||h.operator===a)&&o(e,h.semver))return!1;if(h.operator===c&&s(e,h.semver))return!1}return!0}ie.prototype.parse=function(e){var t=this.options.loose?o[j]:o[W],n=e.match(t);if(!n)throw new TypeError("Invalid comparator: "+e);this.operator=n[1],"="===this.operator&&(this.operator=""),n[2]?this.semver=new K(n[2],this.options.loose):this.semver=oe},ie.prototype.toString=function(){return this.value},ie.prototype.test=function(e){return n("Comparator.test",e,this.options.loose),this.semver===oe||("string"==typeof e&&(e=new K(e,this.options)),re(e,this.operator,this.semver,this.options))},ie.prototype.intersects=function(e,t){if(!(e instanceof ie))throw new TypeError("a Comparator is required");var n;if(t&&"object"==typeof t||(t={loose:!!t,includePrerelease:!1}),""===this.operator)return n=new se(e.value,t),le(this.value,n,t);if(""===e.operator)return n=new se(this.value,t),le(e.semver,n,t);var r=!(">="!==this.operator&&">"!==this.operator||">="!==e.operator&&">"!==e.operator),i=!("<="!==this.operator&&"<"!==this.operator||"<="!==e.operator&&"<"!==e.operator),o=this.semver.version===e.semver.version,s=!(">="!==this.operator&&"<="!==this.operator||">="!==e.operator&&"<="!==e.operator),a=re(this.semver,"<",e.semver,t)&&(">="===this.operator||">"===this.operator)&&("<="===e.operator||"<"===e.operator),c=re(this.semver,">",e.semver,t)&&("<="===this.operator||"<"===this.operator)&&(">="===e.operator||">"===e.operator);return r||i||o&&s||a||c},t.Range=se,se.prototype.format=function(){return this.range=this.set.map(function(e){return e.join(" ").trim()}).join("||").trim(),this.range},se.prototype.toString=function(){return this.range},se.prototype.parseRange=function(e){var t=this.options.loose;e=e.trim();var r=t?o[H]:o[U];e=e.replace(r,ce),n("hyphen replace",e),e=e.replace(o[$],"$1$2$3"),n("comparator trim",e,o[$]),e=(e=(e=e.replace(o[O],"$1~")).replace(o[M],"$1^")).split(/\s+/).join(" ");var i=t?o[j]:o[W],s=e.split(" ").map(function(e){return function(e,t){return n("comp",e,t),e=function(e,t){return e.trim().split(/\s+/).map(function(e){return function(e,t){n("caret",e,t);var r=t.loose?o[q]:o[L];return e.replace(r,function(t,r,i,o,s){var a;return n("caret",e,t,r,i,o,s),ae(r)?a="":ae(i)?a=">="+r+".0.0 <"+(+r+1)+".0.0":ae(o)?a="0"===r?">="+r+"."+i+".0 <"+r+"."+(+i+1)+".0":">="+r+"."+i+".0 <"+(+r+1)+".0.0":s?(n("replaceCaret pr",s),a="0"===r?"0"===i?">="+r+"."+i+"."+o+"-"+s+" <"+r+"."+i+"."+(+o+1):">="+r+"."+i+"."+o+"-"+s+" <"+r+"."+(+i+1)+".0":">="+r+"."+i+"."+o+"-"+s+" <"+(+r+1)+".0.0"):(n("no pr"),a="0"===r?"0"===i?">="+r+"."+i+"."+o+" <"+r+"."+i+"."+(+o+1):">="+r+"."+i+"."+o+" <"+r+"."+(+i+1)+".0":">="+r+"."+i+"."+o+" <"+(+r+1)+".0.0"),n("caret return",a),a})}(e,t)}).join(" ")}(e,t),n("caret",e),e=function(e,t){return e.trim().split(/\s+/).map(function(e){return function(e,t){var r=t.loose?o[F]:o[A];return e.replace(r,function(t,r,i,o,s){var a;return n("tilde",e,t,r,i,o,s),ae(r)?a="":ae(i)?a=">="+r+".0.0 <"+(+r+1)+".0.0":ae(o)?a=">="+r+"."+i+".0 <"+r+"."+(+i+1)+".0":s?(n("replaceTilde pr",s),a=">="+r+"."+i+"."+o+"-"+s+" <"+r+"."+(+i+1)+".0"):a=">="+r+"."+i+"."+o+" <"+r+"."+(+i+1)+".0",n("tilde return",a),a})}(e,t)}).join(" ")}(e,t),n("tildes",e),e=function(e,t){return n("replaceXRanges",e,t),e.split(/\s+/).map(function(e){return function(e,t){e=e.trim();var r=t.loose?o[I]:o[T];return e.replace(r,function(t,r,i,o,s,a){n("xRange",e,t,r,i,o,s,a);var c=ae(i),u=c||ae(o),l=u||ae(s),d=l;return"="===r&&d&&(r=""),c?t=">"===r||"<"===r?"<0.0.0":"*":r&&d?(u&&(o=0),s=0,">"===r?(r=">=",u?(i=+i+1,o=0,s=0):(o=+o+1,s=0)):"<="===r&&(r="<",u?i=+i+1:o=+o+1),t=r+i+"."+o+"."+s):u?t=">="+i+".0.0 <"+(+i+1)+".0.0":l&&(t=">="+i+"."+o+".0 <"+i+"."+(+o+1)+".0"),n("xRange return",t),t})}(e,t)}).join(" ")}(e,t),n("xrange",e),e=function(e,t){return n("replaceStars",e,t),e.trim().replace(o[z],"")}(e,t),n("stars",e),e}(e,this.options)},this).join(" ").split(/\s+/);return this.options.loose&&(s=s.filter(function(e){return!!e.match(i)})),s=s.map(function(e){return new ie(e,this.options)},this)},se.prototype.intersects=function(e,t){if(!(e instanceof se))throw new TypeError("a Range is required");return this.set.some(function(n){return n.every(function(n){return e.set.some(function(e){return e.every(function(e){return n.intersects(e,t)})})})})},t.toComparators=function(e,t){return new se(e,t).set.map(function(e){return e.map(function(e){return e.value}).join(" ").trim().split(" ")})},se.prototype.test=function(e){if(!e)return!1;"string"==typeof e&&(e=new K(e,this.options));for(var t=0;t<this.set.length;t++)if(ue(this.set[t],e,this.options))return!0;return!1},t.satisfies=le,t.maxSatisfying=function(e,t,n){var r=null,i=null;try{var o=new se(t,n)}catch(e){return null}return e.forEach(function(e){o.test(e)&&(r&&-1!==i.compare(e)||(i=new K(r=e,n)))}),r},t.minSatisfying=function(e,t,n){var r=null,i=null;try{var o=new se(t,n)}catch(e){return null}return e.forEach(function(e){o.test(e)&&(r&&1!==i.compare(e)||(i=new K(r=e,n)))}),r},t.minVersion=function(e,t){e=new se(e,t);var n=new K("0.0.0");if(e.test(n))return n;if(n=new K("0.0.0-0"),e.test(n))return n;n=null;for(var r=0;r<e.set.length;++r){var i=e.set[r];i.forEach(function(e){var t=new K(e.semver.version);switch(e.operator){case">":0===t.prerelease.length?t.patch++:t.prerelease.push(0),t.raw=t.format();case"":case">=":n&&!Y(n,t)||(n=t);break;case"<":case"<=":break;default:throw new Error("Unexpected operation: "+e.operator)}})}if(n&&e.test(n))return n;return null},t.validRange=function(e,t){try{return new se(e,t).range||"*"}catch(e){return null}},t.ltr=function(e,t,n){return de(e,t,"<",n)},t.gtr=function(e,t,n){return de(e,t,">",n)},t.outside=de,t.prerelease=function(e,t){var n=B(e,t);return n&&n.prerelease.length?n.prerelease:null},t.intersects=function(e,t,n){return e=new se(e,n),t=new se(t,n),e.intersects(t)},t.coerce=function(e){if(e instanceof K)return e;if("string"!=typeof e)return null;var t=e.match(o[D]);if(null==t)return null;return B(t[1]+"."+(t[2]||"0")+"."+(t[3]||"0"))}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(29);var i;!function(e){e.ParseError=-32700,e.InvalidRequest=-32600,e.MethodNotFound=-32601,e.InvalidParams=-32602,e.InternalError=-32603,e.serverErrorStart=-32099,e.serverErrorEnd=-32e3,e.ServerNotInitialized=-32002,e.UnknownErrorCode=-32001,e.RequestCancelled=-32800,e.MessageWriteError=1,e.MessageReadError=2}(i=t.ErrorCodes||(t.ErrorCodes={}));class o extends Error{constructor(e,t,n){super(t),this.code=r.number(e)?e:i.UnknownErrorCode,this.data=n,Object.setPrototypeOf(this,o.prototype)}toJson(){return{code:this.code,message:this.message,data:this.data}}}t.ResponseError=o;class s{constructor(e,t){this._method=e,this._numberOfParams=t}get method(){return this._method}get numberOfParams(){return this._numberOfParams}}t.AbstractMessageType=s;t.RequestType0=class extends s{constructor(e){super(e,0),this._=void 0}};t.RequestType=class extends s{constructor(e){super(e,1),this._=void 0}};t.RequestType1=class extends s{constructor(e){super(e,1),this._=void 0}};t.RequestType2=class extends s{constructor(e){super(e,2),this._=void 0}};t.RequestType3=class extends s{constructor(e){super(e,3),this._=void 0}};t.RequestType4=class extends s{constructor(e){super(e,4),this._=void 0}};t.RequestType5=class extends s{constructor(e){super(e,5),this._=void 0}};t.RequestType6=class extends s{constructor(e){super(e,6),this._=void 0}};t.RequestType7=class extends s{constructor(e){super(e,7),this._=void 0}};t.RequestType8=class extends s{constructor(e){super(e,8),this._=void 0}};t.RequestType9=class extends s{constructor(e){super(e,9),this._=void 0}};t.NotificationType=class extends s{constructor(e){super(e,1),this._=void 0}};t.NotificationType0=class extends s{constructor(e){super(e,0),this._=void 0}};t.NotificationType1=class extends s{constructor(e){super(e,1),this._=void 0}};t.NotificationType2=class extends s{constructor(e){super(e,2),this._=void 0}};t.NotificationType3=class extends s{constructor(e){super(e,3),this._=void 0}};t.NotificationType4=class extends s{constructor(e){super(e,4),this._=void 0}};t.NotificationType5=class extends s{constructor(e){super(e,5),this._=void 0}};t.NotificationType6=class extends s{constructor(e){super(e,6),this._=void 0}};t.NotificationType7=class extends s{constructor(e){super(e,7),this._=void 0}};t.NotificationType8=class extends s{constructor(e){super(e,8),this._=void 0}};t.NotificationType9=class extends s{constructor(e){super(e,9),this._=void 0}},t.isRequestMessage=function(e){let t=e;return t&&r.string(t.method)&&(r.string(t.id)||r.number(t.id))},t.isNotificationMessage=function(e){let t=e;return t&&r.string(t.method)&&void 0===e.id},t.isResponseMessage=function(e){let t=e;return t&&(void 0!==t.result||!!t.error)&&(r.string(t.id)||r.number(t.id)||null===t.id)}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(32),i=n(29);var o;!function(e){e.None=Object.freeze({isCancellationRequested:!1,onCancellationRequested:r.Event.None}),e.Cancelled=Object.freeze({isCancellationRequested:!0,onCancellationRequested:r.Event.None}),e.is=function(t){let n=t;return n&&(n===e.None||n===e.Cancelled||i.boolean(n.isCancellationRequested)&&!!n.onCancellationRequested)}}(o=t.CancellationToken||(t.CancellationToken={}));const s=Object.freeze(function(e,t){let n=setTimeout(e.bind(t),0);return{dispose(){clearTimeout(n)}}});class a{constructor(){this._isCancelled=!1}cancel(){this._isCancelled||(this._isCancelled=!0,this._emitter&&(this._emitter.fire(void 0),this._emitter=void 0))}get isCancellationRequested(){return this._isCancelled}get onCancellationRequested(){return this._isCancelled?s:(this._emitter||(this._emitter=new r.Emitter),this._emitter.event)}}t.CancellationTokenSource=class{get token(){return this._token||(this._token=new a),this._token}cancel(){this._token?this._token.cancel():this._token=o.Cancelled}dispose(){this.cancel()}}},function(e,t,n){"use strict";var r;Object.defineProperty(t,"__esModule",{value:!0}),function(e){e.None=0,e.First=1,e.Last=2}(r=t.Touch||(t.Touch={}));t.LinkedMap=class{constructor(){this._map=new Map,this._head=void 0,this._tail=void 0,this._size=0}clear(){this._map.clear(),this._head=void 0,this._tail=void 0,this._size=0}isEmpty(){return!this._head&&!this._tail}get size(){return this._size}has(e){return this._map.has(e)}get(e){const t=this._map.get(e);if(t)return t.value}set(e,t,n=r.None){let i=this._map.get(e);if(i)i.value=t,n!==r.None&&this.touch(i,n);else{switch(i={key:e,value:t,next:void 0,previous:void 0},n){case r.None:this.addItemLast(i);break;case r.First:this.addItemFirst(i);break;case r.Last:default:this.addItemLast(i)}this._map.set(e,i),this._size++}}delete(e){const t=this._map.get(e);return!!t&&(this._map.delete(e),this.removeItem(t),this._size--,!0)}shift(){if(!this._head&&!this._tail)return;if(!this._head||!this._tail)throw new Error("Invalid list");const e=this._head;return this._map.delete(e.key),this.removeItem(e),this._size--,e.value}forEach(e,t){let n=this._head;for(;n;)t?e.bind(t)(n.value,n.key,this):e(n.value,n.key,this),n=n.next}forEachReverse(e,t){let n=this._tail;for(;n;)t?e.bind(t)(n.value,n.key,this):e(n.value,n.key,this),n=n.previous}values(){let e=[],t=this._head;for(;t;)e.push(t.value),t=t.next;return e}keys(){let e=[],t=this._head;for(;t;)e.push(t.key),t=t.next;return e}addItemFirst(e){if(this._head||this._tail){if(!this._head)throw new Error("Invalid list");e.next=this._head,this._head.previous=e}else this._tail=e;this._head=e}addItemLast(e){if(this._head||this._tail){if(!this._tail)throw new Error("Invalid list");e.previous=this._tail,this._tail.next=e}else this._head=e;this._tail=e}removeItem(e){if(e===this._head&&e===this._tail)this._head=void 0,this._tail=void 0;else if(e===this._head)this._head=e.next;else if(e===this._tail)this._tail=e.previous;else{const t=e.next,n=e.previous;if(!t||!n)throw new Error("Invalid list");t.previous=n,n.next=t}}touch(e,t){if(!this._head||!this._tail)throw new Error("Invalid list");if(t===r.First||t===r.Last)if(t===r.First){if(e===this._head)return;const t=e.next,n=e.previous;e===this._tail?(n.next=void 0,this._tail=n):(t.previous=n,n.next=t),e.previous=void 0,e.next=this._head,this._head.previous=e,this._head=e}else if(t===r.Last){if(e===this._tail)return;const t=e.next,n=e.previous;e===this._head?(t.previous=void 0,this._head=t):(t.previous=n,n.next=t),e.next=void 0,e.previous=this._tail,this._tail.next=e,this._tail=e}}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(1),i=n(3),o=n(37),s=n(41),a=n(42),c=n(43);t.generateRandomPipeName=function(){const e=o.randomBytes(21).toString("hex");return"win32"===process.platform?`\\\\.\\pipe\\vscode-jsonrpc-${e}-sock`:r.join(i.tmpdir(),`vscode-${e}.sock`)},t.createClientPipeTransport=function(e,t="utf-8"){let n,r=new Promise((e,t)=>{n=e});return new Promise((i,o)=>{let u=s.createServer(e=>{u.close(),n([new a.SocketMessageReader(e,t),new c.SocketMessageWriter(e,t)])});u.on("error",o),u.listen(e,()=>{u.removeListener("error",o),i({onConnected:()=>r})})})},t.createServerPipeTransport=function(e,t="utf-8"){const n=s.createConnection(e);return[new a.SocketMessageReader(n,t),new c.SocketMessageWriter(n,t)]}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(41),i=n(42),o=n(43);t.createClientSocketTransport=function(e,t="utf-8"){let n,s=new Promise((e,t)=>{n=e});return new Promise((a,c)=>{let u=r.createServer(e=>{u.close(),n([new i.SocketMessageReader(e,t),new o.SocketMessageWriter(e,t)])});u.on("error",c),u.listen(e,"127.0.0.1",()=>{u.removeListener("error",c),a({onConnected:()=>s})})})},t.createServerSocketTransport=function(e,t="utf-8"){const n=r.createConnection(e,"127.0.0.1");return[new i.SocketMessageReader(n,t),new o.SocketMessageWriter(n,t)]}},function(e,t,n){"use strict";var r,i,o,s,a,c,u,l,d,h,p,f,g,m,v,C,y,w,b;n.r(t),n.d(t,"Position",function(){return r}),n.d(t,"Range",function(){return i}),n.d(t,"Location",function(){return o}),n.d(t,"LocationLink",function(){return s}),n.d(t,"Color",function(){return a}),n.d(t,"ColorInformation",function(){return c}),n.d(t,"ColorPresentation",function(){return u}),n.d(t,"FoldingRangeKind",function(){return l}),n.d(t,"FoldingRange",function(){return d}),n.d(t,"DiagnosticRelatedInformation",function(){return h}),n.d(t,"DiagnosticSeverity",function(){return p}),n.d(t,"Diagnostic",function(){return f}),n.d(t,"Command",function(){return g}),n.d(t,"TextEdit",function(){return m}),n.d(t,"TextDocumentEdit",function(){return v}),n.d(t,"CreateFile",function(){return C}),n.d(t,"RenameFile",function(){return y}),n.d(t,"DeleteFile",function(){return w}),n.d(t,"WorkspaceEdit",function(){return b}),n.d(t,"WorkspaceChange",function(){return W}),n.d(t,"TextDocumentIdentifier",function(){return S}),n.d(t,"VersionedTextDocumentIdentifier",function(){return _}),n.d(t,"TextDocumentItem",function(){return P}),n.d(t,"MarkupKind",function(){return x}),n.d(t,"MarkupContent",function(){return k}),n.d(t,"CompletionItemKind",function(){return E}),n.d(t,"InsertTextFormat",function(){return T}),n.d(t,"CompletionItem",function(){return I}),n.d(t,"CompletionList",function(){return D}),n.d(t,"MarkedString",function(){return R}),n.d(t,"Hover",function(){return O}),n.d(t,"ParameterInformation",function(){return A}),n.d(t,"SignatureInformation",function(){return F}),n.d(t,"DocumentHighlightKind",function(){return N}),n.d(t,"DocumentHighlight",function(){return M}),n.d(t,"SymbolKind",function(){return L}),n.d(t,"SymbolInformation",function(){return q}),n.d(t,"DocumentSymbol",function(){return B}),n.d(t,"CodeActionKind",function(){return $}),n.d(t,"CodeActionContext",function(){return U}),n.d(t,"CodeAction",function(){return H}),n.d(t,"CodeLens",function(){return z}),n.d(t,"FormattingOptions",function(){return V}),n.d(t,"DocumentLink",function(){return K}),n.d(t,"EOL",function(){return Z}),n.d(t,"TextDocument",function(){return J}),n.d(t,"TextDocumentSaveReason",function(){return G}),function(e){e.create=function(e,t){return{line:e,character:t}},e.is=function(e){var t=e;return Y.objectLiteral(t)&&Y.number(t.line)&&Y.number(t.character)}}(r||(r={})),function(e){e.create=function(e,t,n,i){if(Y.number(e)&&Y.number(t)&&Y.number(n)&&Y.number(i))return{start:r.create(e,t),end:r.create(n,i)};if(r.is(e)&&r.is(t))return{start:e,end:t};throw new Error("Range#create called with invalid arguments["+e+", "+t+", "+n+", "+i+"]")},e.is=function(e){var t=e;return Y.objectLiteral(t)&&r.is(t.start)&&r.is(t.end)}}(i||(i={})),function(e){e.create=function(e,t){return{uri:e,range:t}},e.is=function(e){var t=e;return Y.defined(t)&&i.is(t.range)&&(Y.string(t.uri)||Y.undefined(t.uri))}}(o||(o={})),function(e){e.create=function(e,t,n,r){return{targetUri:e,targetRange:t,targetSelectionRange:n,originSelectionRange:r}},e.is=function(e){var t=e;return Y.defined(t)&&i.is(t.targetRange)&&Y.string(t.targetUri)&&(i.is(t.targetSelectionRange)||Y.undefined(t.targetSelectionRange))&&(i.is(t.originSelectionRange)||Y.undefined(t.originSelectionRange))}}(s||(s={})),function(e){e.create=function(e,t,n,r){return{red:e,green:t,blue:n,alpha:r}},e.is=function(e){var t=e;return Y.number(t.red)&&Y.number(t.green)&&Y.number(t.blue)&&Y.number(t.alpha)}}(a||(a={})),function(e){e.create=function(e,t){return{range:e,color:t}},e.is=function(e){var t=e;return i.is(t.range)&&a.is(t.color)}}(c||(c={})),function(e){e.create=function(e,t,n){return{label:e,textEdit:t,additionalTextEdits:n}},e.is=function(e){var t=e;return Y.string(t.label)&&(Y.undefined(t.textEdit)||m.is(t))&&(Y.undefined(t.additionalTextEdits)||Y.typedArray(t.additionalTextEdits,m.is))}}(u||(u={})),function(e){e.Comment="comment",e.Imports="imports",e.Region="region"}(l||(l={})),function(e){e.create=function(e,t,n,r,i){var o={startLine:e,endLine:t};return Y.defined(n)&&(o.startCharacter=n),Y.defined(r)&&(o.endCharacter=r),Y.defined(i)&&(o.kind=i),o},e.is=function(e){var t=e;return Y.number(t.startLine)&&Y.number(t.startLine)&&(Y.undefined(t.startCharacter)||Y.number(t.startCharacter))&&(Y.undefined(t.endCharacter)||Y.number(t.endCharacter))&&(Y.undefined(t.kind)||Y.string(t.kind))}}(d||(d={})),function(e){e.create=function(e,t){return{location:e,message:t}},e.is=function(e){var t=e;return Y.defined(t)&&o.is(t.location)&&Y.string(t.message)}}(h||(h={})),function(e){e.Error=1,e.Warning=2,e.Information=3,e.Hint=4}(p||(p={})),function(e){e.create=function(e,t,n,r,i,o){var s={range:e,message:t};return Y.defined(n)&&(s.severity=n),Y.defined(r)&&(s.code=r),Y.defined(i)&&(s.source=i),Y.defined(o)&&(s.relatedInformation=o),s},e.is=function(e){var t=e;return Y.defined(t)&&i.is(t.range)&&Y.string(t.message)&&(Y.number(t.severity)||Y.undefined(t.severity))&&(Y.number(t.code)||Y.string(t.code)||Y.undefined(t.code))&&(Y.string(t.source)||Y.undefined(t.source))&&(Y.undefined(t.relatedInformation)||Y.typedArray(t.relatedInformation,h.is))}}(f||(f={})),function(e){e.create=function(e,t){for(var n=[],r=2;r<arguments.length;r++)n[r-2]=arguments[r];var i={title:e,command:t};return Y.defined(n)&&n.length>0&&(i.arguments=n),i},e.is=function(e){var t=e;return Y.defined(t)&&Y.string(t.title)&&Y.string(t.command)}}(g||(g={})),function(e){e.replace=function(e,t){return{range:e,newText:t}},e.insert=function(e,t){return{range:{start:e,end:e},newText:t}},e.del=function(e){return{range:e,newText:""}},e.is=function(e){var t=e;return Y.objectLiteral(t)&&Y.string(t.newText)&&i.is(t.range)}}(m||(m={})),function(e){e.create=function(e,t){return{textDocument:e,edits:t}},e.is=function(e){var t=e;return Y.defined(t)&&_.is(t.textDocument)&&Array.isArray(t.edits)}}(v||(v={})),function(e){e.create=function(e,t){var n={kind:"create",uri:e};return void 0===t||void 0===t.overwrite&&void 0===t.ignoreIfExists||(n.options=t),n},e.is=function(e){var t=e;return t&&"create"===t.kind&&Y.string(t.uri)&&(void 0===t.options||(void 0===t.options.overwrite||Y.boolean(t.options.overwrite))&&(void 0===t.options.ignoreIfExists||Y.boolean(t.options.ignoreIfExists)))}}(C||(C={})),function(e){e.create=function(e,t,n){var r={kind:"rename",oldUri:e,newUri:t};return void 0===n||void 0===n.overwrite&&void 0===n.ignoreIfExists||(r.options=n),r},e.is=function(e){var t=e;return t&&"rename"===t.kind&&Y.string(t.oldUri)&&Y.string(t.newUri)&&(void 0===t.options||(void 0===t.options.overwrite||Y.boolean(t.options.overwrite))&&(void 0===t.options.ignoreIfExists||Y.boolean(t.options.ignoreIfExists)))}}(y||(y={})),function(e){e.create=function(e,t){var n={kind:"delete",uri:e};return void 0===t||void 0===t.recursive&&void 0===t.ignoreIfNotExists||(n.options=t),n},e.is=function(e){var t=e;return t&&"delete"===t.kind&&Y.string(t.uri)&&(void 0===t.options||(void 0===t.options.recursive||Y.boolean(t.options.recursive))&&(void 0===t.options.ignoreIfNotExists||Y.boolean(t.options.ignoreIfNotExists)))}}(w||(w={})),function(e){e.is=function(e){var t=e;return t&&(void 0!==t.changes||void 0!==t.documentChanges)&&(void 0===t.documentChanges||t.documentChanges.every(function(e){return Y.string(e.kind)?C.is(e)||y.is(e)||w.is(e):v.is(e)}))}}(b||(b={}));var S,_,P,x,k,E,T,I,D,R,O,A,F,N,M,L,q,j=function(){function e(e){this.edits=e}return e.prototype.insert=function(e,t){this.edits.push(m.insert(e,t))},e.prototype.replace=function(e,t){this.edits.push(m.replace(e,t))},e.prototype.delete=function(e){this.edits.push(m.del(e))},e.prototype.add=function(e){this.edits.push(e)},e.prototype.all=function(){return this.edits},e.prototype.clear=function(){this.edits.splice(0,this.edits.length)},e}(),W=function(){function e(e){var t=this;this._textEditChanges=Object.create(null),e&&(this._workspaceEdit=e,e.documentChanges?e.documentChanges.forEach(function(e){if(v.is(e)){var n=new j(e.edits);t._textEditChanges[e.textDocument.uri]=n}}):e.changes&&Object.keys(e.changes).forEach(function(n){var r=new j(e.changes[n]);t._textEditChanges[n]=r}))}return Object.defineProperty(e.prototype,"edit",{get:function(){return this._workspaceEdit},enumerable:!0,configurable:!0}),e.prototype.getTextEditChange=function(e){if(_.is(e)){if(this._workspaceEdit||(this._workspaceEdit={documentChanges:[]}),!this._workspaceEdit.documentChanges)throw new Error("Workspace edit is not configured for document changes.");var t=e;if(!(r=this._textEditChanges[t.uri])){var n={textDocument:t,edits:i=[]};this._workspaceEdit.documentChanges.push(n),r=new j(i),this._textEditChanges[t.uri]=r}return r}if(this._workspaceEdit||(this._workspaceEdit={changes:Object.create(null)}),!this._workspaceEdit.changes)throw new Error("Workspace edit is not configured for normal text edit changes.");var r;if(!(r=this._textEditChanges[e])){var i=[];this._workspaceEdit.changes[e]=i,r=new j(i),this._textEditChanges[e]=r}return r},e.prototype.createFile=function(e,t){this.checkDocumentChanges(),this._workspaceEdit.documentChanges.push(C.create(e,t))},e.prototype.renameFile=function(e,t,n){this.checkDocumentChanges(),this._workspaceEdit.documentChanges.push(y.create(e,t,n))},e.prototype.deleteFile=function(e,t){this.checkDocumentChanges(),this._workspaceEdit.documentChanges.push(w.create(e,t))},e.prototype.checkDocumentChanges=function(){if(!this._workspaceEdit||!this._workspaceEdit.documentChanges)throw new Error("Workspace edit is not configured for document changes.")},e}();!function(e){e.create=function(e){return{uri:e}},e.is=function(e){var t=e;return Y.defined(t)&&Y.string(t.uri)}}(S||(S={})),function(e){e.create=function(e,t){return{uri:e,version:t}},e.is=function(e){var t=e;return Y.defined(t)&&Y.string(t.uri)&&(null===t.version||Y.number(t.version))}}(_||(_={})),function(e){e.create=function(e,t,n,r){return{uri:e,languageId:t,version:n,text:r}},e.is=function(e){var t=e;return Y.defined(t)&&Y.string(t.uri)&&Y.string(t.languageId)&&Y.number(t.version)&&Y.string(t.text)}}(P||(P={})),function(e){e.PlainText="plaintext",e.Markdown="markdown"}(x||(x={})),function(e){e.is=function(t){var n=t;return n===e.PlainText||n===e.Markdown}}(x||(x={})),function(e){e.is=function(e){var t=e;return Y.objectLiteral(e)&&x.is(t.kind)&&Y.string(t.value)}}(k||(k={})),function(e){e.Text=1,e.Method=2,e.Function=3,e.Constructor=4,e.Field=5,e.Variable=6,e.Class=7,e.Interface=8,e.Module=9,e.Property=10,e.Unit=11,e.Value=12,e.Enum=13,e.Keyword=14,e.Snippet=15,e.Color=16,e.File=17,e.Reference=18,e.Folder=19,e.EnumMember=20,e.Constant=21,e.Struct=22,e.Event=23,e.Operator=24,e.TypeParameter=25}(E||(E={})),function(e){e.PlainText=1,e.Snippet=2}(T||(T={})),function(e){e.create=function(e){return{label:e}}}(I||(I={})),function(e){e.create=function(e,t){return{items:e||[],isIncomplete:!!t}}}(D||(D={})),function(e){e.fromPlainText=function(e){return e.replace(/[\\`*_{}[\]()#+\-.!]/g,"\\$&")},e.is=function(e){var t=e;return Y.string(t)||Y.objectLiteral(t)&&Y.string(t.language)&&Y.string(t.value)}}(R||(R={})),function(e){e.is=function(e){var t=e;return!!t&&Y.objectLiteral(t)&&(k.is(t.contents)||R.is(t.contents)||Y.typedArray(t.contents,R.is))&&(void 0===e.range||i.is(e.range))}}(O||(O={})),function(e){e.create=function(e,t){return t?{label:e,documentation:t}:{label:e}}}(A||(A={})),function(e){e.create=function(e,t){for(var n=[],r=2;r<arguments.length;r++)n[r-2]=arguments[r];var i={label:e};return Y.defined(t)&&(i.documentation=t),Y.defined(n)?i.parameters=n:i.parameters=[],i}}(F||(F={})),function(e){e.Text=1,e.Read=2,e.Write=3}(N||(N={})),function(e){e.create=function(e,t){var n={range:e};return Y.number(t)&&(n.kind=t),n}}(M||(M={})),function(e){e.File=1,e.Module=2,e.Namespace=3,e.Package=4,e.Class=5,e.Method=6,e.Property=7,e.Field=8,e.Constructor=9,e.Enum=10,e.Interface=11,e.Function=12,e.Variable=13,e.Constant=14,e.String=15,e.Number=16,e.Boolean=17,e.Array=18,e.Object=19,e.Key=20,e.Null=21,e.EnumMember=22,e.Struct=23,e.Event=24,e.Operator=25,e.TypeParameter=26}(L||(L={})),function(e){e.create=function(e,t,n,r,i){var o={name:e,kind:t,location:{uri:r,range:n}};return i&&(o.containerName=i),o}}(q||(q={}));var $,U,H,z,V,B=function(){return function(){}}();!function(e){e.create=function(e,t,n,r,i,o){var s={name:e,detail:t,kind:n,range:r,selectionRange:i};return void 0!==o&&(s.children=o),s},e.is=function(e){var t=e;return t&&Y.string(t.name)&&Y.number(t.kind)&&i.is(t.range)&&i.is(t.selectionRange)&&(void 0===t.detail||Y.string(t.detail))&&(void 0===t.deprecated||Y.boolean(t.deprecated))&&(void 0===t.children||Array.isArray(t.children))}}(B||(B={})),function(e){e.QuickFix="quickfix",e.Refactor="refactor",e.RefactorExtract="refactor.extract",e.RefactorInline="refactor.inline",e.RefactorRewrite="refactor.rewrite",e.Source="source",e.SourceOrganizeImports="source.organizeImports"}($||($={})),function(e){e.create=function(e,t){var n={diagnostics:e};return null!=t&&(n.only=t),n},e.is=function(e){var t=e;return Y.defined(t)&&Y.typedArray(t.diagnostics,f.is)&&(void 0===t.only||Y.typedArray(t.only,Y.string))}}(U||(U={})),function(e){e.create=function(e,t,n){var r={title:e};return g.is(t)?r.command=t:r.edit=t,void 0!==n&&(r.kind=n),r},e.is=function(e){var t=e;return t&&Y.string(t.title)&&(void 0===t.diagnostics||Y.typedArray(t.diagnostics,f.is))&&(void 0===t.kind||Y.string(t.kind))&&(void 0!==t.edit||void 0!==t.command)&&(void 0===t.command||g.is(t.command))&&(void 0===t.edit||b.is(t.edit))}}(H||(H={})),function(e){e.create=function(e,t){var n={range:e};return Y.defined(t)&&(n.data=t),n},e.is=function(e){var t=e;return Y.defined(t)&&i.is(t.range)&&(Y.undefined(t.command)||g.is(t.command))}}(z||(z={})),function(e){e.create=function(e,t){return{tabSize:e,insertSpaces:t}},e.is=function(e){var t=e;return Y.defined(t)&&Y.number(t.tabSize)&&Y.boolean(t.insertSpaces)}}(V||(V={}));var K=function(){return function(){}}();!function(e){e.create=function(e,t,n){return{range:e,target:t,data:n}},e.is=function(e){var t=e;return Y.defined(t)&&i.is(t.range)&&(Y.undefined(t.target)||Y.string(t.target))}}(K||(K={}));var J,G,Z=["\n","\r\n","\r"];!function(e){e.create=function(e,t,n,r){return new Q(e,t,n,r)},e.is=function(e){var t=e;return!!(Y.defined(t)&&Y.string(t.uri)&&(Y.undefined(t.languageId)||Y.string(t.languageId))&&Y.number(t.lineCount)&&Y.func(t.getText)&&Y.func(t.positionAt)&&Y.func(t.offsetAt))},e.applyEdits=function(e,t){for(var n=e.getText(),r=function e(t,n){if(t.length<=1)return t;var r=t.length/2|0,i=t.slice(0,r),o=t.slice(r);e(i,n),e(o,n);for(var s=0,a=0,c=0;s<i.length&&a<o.length;){var u=n(i[s],o[a]);t[c++]=u<=0?i[s++]:o[a++]}for(;s<i.length;)t[c++]=i[s++];for(;a<o.length;)t[c++]=o[a++];return t}(t,function(e,t){var n=e.range.start.line-t.range.start.line;return 0===n?e.range.start.character-t.range.start.character:n}),i=n.length,o=r.length-1;o>=0;o--){var s=r[o],a=e.offsetAt(s.range.start),c=e.offsetAt(s.range.end);if(!(c<=i))throw new Error("Overlapping edit");n=n.substring(0,a)+s.newText+n.substring(c,n.length),i=a}return n}}(J||(J={})),function(e){e.Manual=1,e.AfterDelay=2,e.FocusOut=3}(G||(G={}));var Y,Q=function(){function e(e,t,n,r){this._uri=e,this._languageId=t,this._version=n,this._content=r,this._lineOffsets=null}return Object.defineProperty(e.prototype,"uri",{get:function(){return this._uri},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"languageId",{get:function(){return this._languageId},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"version",{get:function(){return this._version},enumerable:!0,configurable:!0}),e.prototype.getText=function(e){if(e){var t=this.offsetAt(e.start),n=this.offsetAt(e.end);return this._content.substring(t,n)}return this._content},e.prototype.update=function(e,t){this._content=e.text,this._version=t,this._lineOffsets=null},e.prototype.getLineOffsets=function(){if(null===this._lineOffsets){for(var e=[],t=this._content,n=!0,r=0;r<t.length;r++){n&&(e.push(r),n=!1);var i=t.charAt(r);n="\r"===i||"\n"===i,"\r"===i&&r+1<t.length&&"\n"===t.charAt(r+1)&&r++}n&&t.length>0&&e.push(t.length),this._lineOffsets=e}return this._lineOffsets},e.prototype.positionAt=function(e){e=Math.max(Math.min(e,this._content.length),0);var t=this.getLineOffsets(),n=0,i=t.length;if(0===i)return r.create(0,e);for(;n<i;){var o=Math.floor((n+i)/2);t[o]>e?i=o:n=o+1}var s=n-1;return r.create(s,e-t[s])},e.prototype.offsetAt=function(e){var t=this.getLineOffsets();if(e.line>=t.length)return this._content.length;if(e.line<0)return 0;var n=t[e.line],r=e.line+1<t.length?t[e.line+1]:this._content.length;return Math.max(Math.min(n+e.character,r),n)},Object.defineProperty(e.prototype,"lineCount",{get:function(){return this.getLineOffsets().length},enumerable:!0,configurable:!0}),e}();!function(e){var t=Object.prototype.toString;e.defined=function(e){return void 0!==e},e.undefined=function(e){return void 0===e},e.boolean=function(e){return!0===e||!1===e},e.string=function(e){return"[object String]"===t.call(e)},e.number=function(e){return"[object Number]"===t.call(e)},e.func=function(e){return"[object Function]"===t.call(e)},e.objectLiteral=function(e){return null!==e&&"object"==typeof e},e.typedArray=function(e,t){return Array.isArray(e)&&e.every(t)}}(Y||(Y={}))},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(156),i=n(10),o=n(157);t.ImplementationRequest=o.ImplementationRequest;const s=n(158);t.TypeDefinitionRequest=s.TypeDefinitionRequest;const a=n(159);t.WorkspaceFoldersRequest=a.WorkspaceFoldersRequest,t.DidChangeWorkspaceFoldersNotification=a.DidChangeWorkspaceFoldersNotification;const c=n(160);t.ConfigurationRequest=c.ConfigurationRequest;const u=n(161);t.DocumentColorRequest=u.DocumentColorRequest,t.ColorPresentationRequest=u.ColorPresentationRequest;const l=n(162);t.FoldingRangeRequest=l.FoldingRangeRequest;const d=n(163);t.DeclarationRequest=d.DeclarationRequest,function(e){e.is=function(e){let t=e;return r.string(t.language)||r.string(t.scheme)||r.string(t.pattern)}}(t.DocumentFilter||(t.DocumentFilter={})),function(e){e.type=new i.RequestType("client/registerCapability")}(t.RegistrationRequest||(t.RegistrationRequest={})),function(e){e.type=new i.RequestType("client/unregisterCapability")}(t.UnregistrationRequest||(t.UnregistrationRequest={})),function(e){e.Create="create",e.Rename="rename",e.Delete="delete"}(t.ResourceOperationKind||(t.ResourceOperationKind={})),function(e){e.Abort="abort",e.Transactional="transactional",e.TextOnlyTransactional="textOnlyTransactional",e.Undo="undo"}(t.FailureHandlingKind||(t.FailureHandlingKind={})),function(e){e.None=0,e.Full=1,e.Incremental=2}(t.TextDocumentSyncKind||(t.TextDocumentSyncKind={})),function(e){e.type=new i.RequestType("initialize")}(t.InitializeRequest||(t.InitializeRequest={})),function(e){e.unknownProtocolVersion=1}(t.InitializeError||(t.InitializeError={})),function(e){e.type=new i.NotificationType("initialized")}(t.InitializedNotification||(t.InitializedNotification={})),function(e){e.type=new i.RequestType0("shutdown")}(t.ShutdownRequest||(t.ShutdownRequest={})),function(e){e.type=new i.NotificationType0("exit")}(t.ExitNotification||(t.ExitNotification={})),function(e){e.type=new i.NotificationType("workspace/didChangeConfiguration")}(t.DidChangeConfigurationNotification||(t.DidChangeConfigurationNotification={})),function(e){e.Error=1,e.Warning=2,e.Info=3,e.Log=4}(t.MessageType||(t.MessageType={})),function(e){e.type=new i.NotificationType("window/showMessage")}(t.ShowMessageNotification||(t.ShowMessageNotification={})),function(e){e.type=new i.RequestType("window/showMessageRequest")}(t.ShowMessageRequest||(t.ShowMessageRequest={})),function(e){e.type=new i.NotificationType("window/logMessage")}(t.LogMessageNotification||(t.LogMessageNotification={})),function(e){e.type=new i.NotificationType("telemetry/event")}(t.TelemetryEventNotification||(t.TelemetryEventNotification={})),function(e){e.type=new i.NotificationType("textDocument/didOpen")}(t.DidOpenTextDocumentNotification||(t.DidOpenTextDocumentNotification={})),function(e){e.type=new i.NotificationType("textDocument/didChange")}(t.DidChangeTextDocumentNotification||(t.DidChangeTextDocumentNotification={})),function(e){e.type=new i.NotificationType("textDocument/didClose")}(t.DidCloseTextDocumentNotification||(t.DidCloseTextDocumentNotification={})),function(e){e.type=new i.NotificationType("textDocument/didSave")}(t.DidSaveTextDocumentNotification||(t.DidSaveTextDocumentNotification={})),function(e){e.type=new i.NotificationType("textDocument/willSave")}(t.WillSaveTextDocumentNotification||(t.WillSaveTextDocumentNotification={})),function(e){e.type=new i.RequestType("textDocument/willSaveWaitUntil")}(t.WillSaveTextDocumentWaitUntilRequest||(t.WillSaveTextDocumentWaitUntilRequest={})),function(e){e.type=new i.NotificationType("workspace/didChangeWatchedFiles")}(t.DidChangeWatchedFilesNotification||(t.DidChangeWatchedFilesNotification={})),function(e){e.Created=1,e.Changed=2,e.Deleted=3}(t.FileChangeType||(t.FileChangeType={})),function(e){e.Create=1,e.Change=2,e.Delete=4}(t.WatchKind||(t.WatchKind={})),function(e){e.type=new i.NotificationType("textDocument/publishDiagnostics")}(t.PublishDiagnosticsNotification||(t.PublishDiagnosticsNotification={})),function(e){e.Invoked=1,e.TriggerCharacter=2,e.TriggerForIncompleteCompletions=3}(t.CompletionTriggerKind||(t.CompletionTriggerKind={})),function(e){e.type=new i.RequestType("textDocument/completion")}(t.CompletionRequest||(t.CompletionRequest={})),function(e){e.type=new i.RequestType("completionItem/resolve")}(t.CompletionResolveRequest||(t.CompletionResolveRequest={})),function(e){e.type=new i.RequestType("textDocument/hover")}(t.HoverRequest||(t.HoverRequest={})),function(e){e.type=new i.RequestType("textDocument/signatureHelp")}(t.SignatureHelpRequest||(t.SignatureHelpRequest={})),function(e){e.type=new i.RequestType("textDocument/definition")}(t.DefinitionRequest||(t.DefinitionRequest={})),function(e){e.type=new i.RequestType("textDocument/references")}(t.ReferencesRequest||(t.ReferencesRequest={})),function(e){e.type=new i.RequestType("textDocument/documentHighlight")}(t.DocumentHighlightRequest||(t.DocumentHighlightRequest={})),function(e){e.type=new i.RequestType("textDocument/documentSymbol")}(t.DocumentSymbolRequest||(t.DocumentSymbolRequest={})),function(e){e.type=new i.RequestType("workspace/symbol")}(t.WorkspaceSymbolRequest||(t.WorkspaceSymbolRequest={})),function(e){e.type=new i.RequestType("textDocument/codeAction")}(t.CodeActionRequest||(t.CodeActionRequest={})),function(e){e.type=new i.RequestType("textDocument/codeLens")}(t.CodeLensRequest||(t.CodeLensRequest={})),function(e){e.type=new i.RequestType("codeLens/resolve")}(t.CodeLensResolveRequest||(t.CodeLensResolveRequest={})),function(e){e.type=new i.RequestType("textDocument/formatting")}(t.DocumentFormattingRequest||(t.DocumentFormattingRequest={})),function(e){e.type=new i.RequestType("textDocument/rangeFormatting")}(t.DocumentRangeFormattingRequest||(t.DocumentRangeFormattingRequest={})),function(e){e.type=new i.RequestType("textDocument/onTypeFormatting")}(t.DocumentOnTypeFormattingRequest||(t.DocumentOnTypeFormattingRequest={})),function(e){e.type=new i.RequestType("textDocument/rename")}(t.RenameRequest||(t.RenameRequest={})),function(e){e.type=new i.RequestType("textDocument/prepareRename")}(t.PrepareRenameRequest||(t.PrepareRenameRequest={})),function(e){e.type=new i.RequestType("textDocument/documentLink")}(t.DocumentLinkRequest||(t.DocumentLinkRequest={})),function(e){e.type=new i.RequestType("documentLink/resolve")}(t.DocumentLinkResolveRequest||(t.DocumentLinkResolveRequest={})),function(e){e.type=new i.RequestType("workspace/executeCommand")}(t.ExecuteCommandRequest||(t.ExecuteCommandRequest={})),function(e){e.type=new i.RequestType("workspace/applyEdit")}(t.ApplyWorkspaceEditRequest||(t.ApplyWorkspaceEditRequest={}))},function(e,t,n){"use strict";function r(e){return"string"==typeof e||e instanceof String}function i(e){return"function"==typeof e}function o(e){return Array.isArray(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.boolean=function(e){return!0===e||!1===e},t.string=r,t.number=function(e){return"number"==typeof e||e instanceof Number},t.error=function(e){return e instanceof Error},t.func=i,t.array=o,t.stringArray=function(e){return o(e)&&e.every(e=>r(e))},t.typedArray=function(e,t){return Array.isArray(e)&&e.every(t)},t.thenable=function(e){return e&&i(e.then)}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(10);!function(e){e.type=new r.RequestType("textDocument/implementation")}(t.ImplementationRequest||(t.ImplementationRequest={}))},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(10);!function(e){e.type=new r.RequestType("textDocument/typeDefinition")}(t.TypeDefinitionRequest||(t.TypeDefinitionRequest={}))},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(10);!function(e){e.type=new r.RequestType0("workspace/workspaceFolders")}(t.WorkspaceFoldersRequest||(t.WorkspaceFoldersRequest={})),function(e){e.type=new r.NotificationType("workspace/didChangeWorkspaceFolders")}(t.DidChangeWorkspaceFoldersNotification||(t.DidChangeWorkspaceFoldersNotification={}))},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(10);!function(e){e.type=new r.RequestType("workspace/configuration")}(t.ConfigurationRequest||(t.ConfigurationRequest={}))},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(10);!function(e){e.type=new r.RequestType("textDocument/documentColor")}(t.DocumentColorRequest||(t.DocumentColorRequest={})),function(e){e.type=new r.RequestType("textDocument/colorPresentation")}(t.ColorPresentationRequest||(t.ColorPresentationRequest={}))},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(10);!function(e){e.Comment="comment",e.Imports="imports",e.Region="region"}(t.FoldingRangeKind||(t.FoldingRangeKind={})),function(e){e.type=new r.RequestType("textDocument/foldingRange")}(t.FoldingRangeRequest||(t.FoldingRangeRequest={}))},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(10);!function(e){e.type=new r.RequestType("textDocument/declaration")}(t.DeclarationRequest||(t.DeclarationRequest={}))},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(0),i=n(7),o=n(11),s=n(58),a=n(59),c=n(60);t.createConverter=function(e){const t=e||(e=>e.toString());function n(e){return t(e)}function u(e){return{uri:t(e.uri)}}function l(e){return{uri:t(e.uri),version:e.version}}function d(e){switch(e){case r.TextDocumentSaveReason.Manual:return i.TextDocumentSaveReason.Manual;case r.TextDocumentSaveReason.AfterDelay:return i.TextDocumentSaveReason.AfterDelay;case r.TextDocumentSaveReason.FocusOut:return i.TextDocumentSaveReason.FocusOut}return i.TextDocumentSaveReason.Manual}function h(e){switch(e){case r.CompletionTriggerKind.TriggerCharacter:return i.CompletionTriggerKind.TriggerCharacter;case r.CompletionTriggerKind.TriggerForIncompleteCompletions:return i.CompletionTriggerKind.TriggerForIncompleteCompletions;default:return i.CompletionTriggerKind.Invoked}}function p(e){return{line:e.line,character:e.character}}function f(e){if(void 0!==e)return null===e?null:{line:e.line,character:e.character}}function g(e){return null==e?e:{start:f(e.start),end:f(e.end)}}function m(e){switch(e){case r.DiagnosticSeverity.Error:return i.DiagnosticSeverity.Error;case r.DiagnosticSeverity.Warning:return i.DiagnosticSeverity.Warning;case r.DiagnosticSeverity.Information:return i.DiagnosticSeverity.Information;case r.DiagnosticSeverity.Hint:return i.DiagnosticSeverity.Hint}}function v(e){let t=i.Diagnostic.create(g(e.range),e.message);return o.number(e.severity)&&(t.severity=m(e.severity)),(o.number(e.code)||o.string(e.code))&&(t.code=e.code),e.source&&(t.source=e.source),t}function C(e){return null==e?e:e.map(v)}function y(e){return{range:g(e.range),newText:e.newText}}function w(e){let t=i.Command.create(e.title,e.command);return e.arguments&&(t.arguments=e.arguments),t}return{asUri:n,asTextDocumentIdentifier:u,asVersionedTextDocumentIdentifier:l,asOpenTextDocumentParams:function(e){return{textDocument:{uri:t(e.uri),languageId:e.languageId,version:e.version,text:e.getText()}}},asChangeTextDocumentParams:function(e){if(function(e){let t=e;return!!t.uri&&!!t.version}(e))return{textDocument:{uri:t(e.uri),version:e.version},contentChanges:[{text:e.getText()}]};if(function(e){let t=e;return!!t.document&&!!t.contentChanges}(e)){let n=e.document;return{textDocument:{uri:t(n.uri),version:n.version},contentChanges:e.contentChanges.map(e=>{let t=e.range;return{range:{start:{line:t.start.line,character:t.start.character},end:{line:t.end.line,character:t.end.character}},rangeLength:e.rangeLength,text:e.text}})}}throw Error("Unsupported text document change parameter")},asCloseTextDocumentParams:function(e){return{textDocument:u(e)}},asSaveTextDocumentParams:function(e,t=!1){let n={textDocument:l(e)};return t&&(n.text=e.getText()),n},asWillSaveTextDocumentParams:function(e){return{textDocument:u(e.document),reason:d(e.reason)}},asTextDocumentPositionParams:function(e,t){return{textDocument:u(e),position:p(t)}},asCompletionParams:function(e,t,n){return{textDocument:u(e),position:p(t),context:{triggerKind:h(n.triggerKind),triggerCharacter:n.triggerCharacter}}},asWorkerPosition:p,asRange:g,asPosition:f,asDiagnosticSeverity:m,asDiagnostic:v,asDiagnostics:C,asCompletionItem:function(e){let t={label:e.label},n=e instanceof s.default?e:void 0;var a,c,u;return e.detail&&(t.detail=e.detail),e.documentation&&(n&&"$string"!==n.documentationFormat?t.documentation=function(e,t){switch(e){case"$string":return t;case i.MarkupKind.PlainText:return{kind:e,value:t};case i.MarkupKind.Markdown:return{kind:e,value:t.value};default:return`Unsupported Markup content received. Kind is: ${e}`}}(n.documentationFormat,e.documentation):t.documentation=e.documentation),e.filterText&&(t.filterText=e.filterText),function(e,t){let n,o=i.InsertTextFormat.PlainText,s=void 0;t.textEdit?(n=t.textEdit.newText,s=g(t.textEdit.range)):t.insertText instanceof r.SnippetString?(o=i.InsertTextFormat.Snippet,n=t.insertText.value):n=t.insertText,t.range&&(s=g(t.range)),e.insertTextFormat=o,t.fromEdit&&n&&s?e.textEdit={newText:n,range:s}:e.insertText=n}(t,e),o.number(e.kind)&&(t.kind=(a=e.kind,void 0!==(c=n&&n.originalItemKind)?c:a+1)),e.sortText&&(t.sortText=e.sortText),e.additionalTextEdits&&(t.additionalTextEdits=null==(u=e.additionalTextEdits)?u:u.map(y)),e.commitCharacters&&(t.commitCharacters=e.commitCharacters.slice()),e.command&&(t.command=w(e.command)),!0!==e.preselect&&!1!==e.preselect||(t.preselect=e.preselect),n&&(void 0!==n.data&&(t.data=n.data),!0!==n.deprecated&&!1!==n.deprecated||(t.deprecated=n.deprecated)),t},asTextEdit:y,asReferenceParams:function(e,t,n){return{textDocument:u(e),position:p(t),context:{includeDeclaration:n.includeDeclaration}}},asCodeActionContext:function(e){return null==e?e:i.CodeActionContext.create(C(e.diagnostics),o.string(e.only)?[e.only]:void 0)},asCommand:w,asCodeLens:function(e){let t=i.CodeLens.create(g(e.range));return e.command&&(t.command=w(e.command)),e instanceof a.default&&e.data&&(t.data=e.data),t},asFormattingOptions:function(e){return{tabSize:e.tabSize,insertSpaces:e.insertSpaces}},asDocumentSymbolParams:function(e){return{textDocument:u(e)}},asCodeLensParams:function(e){return{textDocument:u(e)}},asDocumentLink:function(e){let t=i.DocumentLink.create(g(e.range));e.target&&(t.target=n(e.target));let r=e instanceof c.default?e:void 0;return r&&r.data&&(t.data=r.data),t},asDocumentLinkParams:function(e){return{textDocument:u(e)}}}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(0),i=n(7),o=n(11),s=n(58),a=n(59),c=n(60);var u;!function(e){e.is=function(e){let t=e;return t&&o.string(t.language)&&o.string(t.value)}}(u||(u={})),t.createConverter=function(e){const t=e||(e=>r.Uri.parse(e));function n(e){return t(e)}function l(e){return e.map(d)}function d(e){let t=new r.Diagnostic(f(e.range),e.message,g(e.severity));return(o.number(e.code)||o.string(e.code))&&(t.code=e.code),e.source&&(t.source=e.source),e.relatedInformation&&(t.relatedInformation=e.relatedInformation.map(h)),t}function h(e){return new r.DiagnosticRelatedInformation(P(e.location),e.message)}function p(e){if(e)return new r.Position(e.line,e.character)}function f(e){if(e)return new r.Range(p(e.start),p(e.end))}function g(e){if(null==e)return r.DiagnosticSeverity.Error;switch(e){case i.DiagnosticSeverity.Error:return r.DiagnosticSeverity.Error;case i.DiagnosticSeverity.Warning:return r.DiagnosticSeverity.Warning;case i.DiagnosticSeverity.Information:return r.DiagnosticSeverity.Information;case i.DiagnosticSeverity.Hint:return r.DiagnosticSeverity.Hint}return r.DiagnosticSeverity.Error}function m(e){if(o.string(e))return e;switch(e.kind){case i.MarkupKind.Markdown:return new r.MarkdownString(e.value);case i.MarkupKind.PlainText:return e.value;default:return`Unsupported Markup content received. Kind is: ${e.kind}`}}function v(e){let t=new s.default(e.label);e.detail&&(t.detail=e.detail),e.documentation&&(t.documentation=m(e.documentation),t.documentationFormat=o.string(e.documentation)?"$string":e.documentation.kind),e.filterText&&(t.filterText=e.filterText);let n=function(e){return e.textEdit?e.insertTextFormat===i.InsertTextFormat.Snippet?{text:new r.SnippetString(e.textEdit.newText),range:f(e.textEdit.range),fromEdit:!0}:{text:e.textEdit.newText,range:f(e.textEdit.range),fromEdit:!0}:e.insertText?e.insertTextFormat===i.InsertTextFormat.Snippet?{text:new r.SnippetString(e.insertText),fromEdit:!1}:{text:e.insertText,fromEdit:!1}:void 0}(e);if(n&&(t.insertText=n.text,t.range=n.range,t.fromEdit=n.fromEdit),o.number(e.kind)){let[n,o]=(a=e.kind,i.CompletionItemKind.Text<=a&&a<=i.CompletionItemKind.TypeParameter?[a-1,void 0]:[r.CompletionItemKind.Text,a]);t.kind=n,o&&(t.originalItemKind=o)}var a;return e.sortText&&(t.sortText=e.sortText),e.additionalTextEdits&&(t.additionalTextEdits=y(e.additionalTextEdits)),o.stringArray(e.commitCharacters)&&(t.commitCharacters=e.commitCharacters.slice()),e.command&&(t.command=O(e.command)),!0!==e.deprecated&&!1!==e.deprecated||(t.deprecated=e.deprecated),!0!==e.preselect&&!1!==e.preselect||(t.preselect=e.preselect),void 0!==e.data&&(t.data=e.data),t}function C(e){if(e)return new r.TextEdit(f(e.range),e.newText)}function y(e){if(e)return e.map(C)}function w(e){return e.map(b)}function b(e){let t=new r.SignatureInformation(e.label);return e.documentation&&(t.documentation=m(e.documentation)),e.parameters&&(t.parameters=S(e.parameters)),t}function S(e){return e.map(_)}function _(e){let t=new r.ParameterInformation(e.label);return e.documentation&&(t.documentation=m(e.documentation)),t}function P(e){if(e)return new r.Location(t(e.uri),f(e.range))}function x(e){if(e)return{targetUri:t(e.targetUri),targetRange:f(e.targetSelectionRange),originSelectionRange:f(e.originSelectionRange),targetSelectionRange:f(e.targetSelectionRange)}}function k(e){if(e)return o.array(e)?0===e.length?[]:i.LocationLink.is(e[0])?e.map(e=>x(e)):e.map(e=>P(e)):i.LocationLink.is(e)?[x(e)]:P(e)}function E(e){let t=new r.DocumentHighlight(f(e.range));return o.number(e.kind)&&(t.kind=T(e.kind)),t}function T(e){switch(e){case i.DocumentHighlightKind.Text:return r.DocumentHighlightKind.Text;case i.DocumentHighlightKind.Read:return r.DocumentHighlightKind.Read;case i.DocumentHighlightKind.Write:return r.DocumentHighlightKind.Write}return r.DocumentHighlightKind.Text}function I(e){return e<=i.SymbolKind.TypeParameter?e-1:r.SymbolKind.Property}function D(e,n){let i=new r.SymbolInformation(e.name,I(e.kind),f(e.location.range),e.location.uri?t(e.location.uri):n);return e.containerName&&(i.containerName=e.containerName),i}function R(e){let t=new r.DocumentSymbol(e.name,e.detail||"",I(e.kind),f(e.range),f(e.selectionRange));if(void 0!==e.children&&e.children.length>0){let n=[];for(let t of e.children)n.push(R(t));t.children=n}return t}function O(e){let t={title:e.title,command:e.command};return e.arguments&&(t.arguments=e.arguments),t}const A=new Map;function F(e){if(null==e)return;let t=A.get(e);if(t)return t;let n=e.split(".");t=r.CodeActionKind.Empty;for(let e of n)t=t.append(e);return t}function N(e){if(!e)return;let t=new a.default(f(e.range));return e.command&&(t.command=O(e.command)),void 0!==e.data&&null!==e.data&&(t.data=e.data),t}function M(e){if(!e)return;let n=new r.WorkspaceEdit;return e.documentChanges?e.documentChanges.forEach(e=>{i.CreateFile.is(e)?n.createFile(t(e.uri),e.options):i.RenameFile.is(e)?n.renameFile(t(e.oldUri),t(e.newUri),e.options):i.DeleteFile.is(e)?n.deleteFile(t(e.uri),e.options):i.TextDocumentEdit.is(e)?n.set(t(e.textDocument.uri),y(e.edits)):console.error(`Unknown workspace edit change received:\n${JSON.stringify(e,void 0,4)}`)}):e.changes&&Object.keys(e.changes).forEach(r=>{n.set(t(r),y(e.changes[r]))}),n}function L(e){let t=f(e.range),r=e.target?n(e.target):void 0,i=new c.default(t,r);return void 0!==e.data&&null!==e.data&&(i.data=e.data),i}function q(e){return new r.Color(e.red,e.green,e.blue,e.alpha)}function j(e){return new r.ColorInformation(f(e.range),q(e.color))}function W(e){let t=new r.ColorPresentation(e.label);return t.additionalTextEdits=y(e.additionalTextEdits),e.textEdit&&(t.textEdit=C(e.textEdit)),t}function $(e){if(e)switch(e){case i.FoldingRangeKind.Comment:return r.FoldingRangeKind.Comment;case i.FoldingRangeKind.Imports:return r.FoldingRangeKind.Imports;case i.FoldingRangeKind.Region:return r.FoldingRangeKind.Region}}function U(e){return new r.FoldingRange(e.startLine,e.endLine,$(e.kind))}return A.set("",r.CodeActionKind.Empty),A.set(i.CodeActionKind.QuickFix,r.CodeActionKind.QuickFix),A.set(i.CodeActionKind.Refactor,r.CodeActionKind.Refactor),A.set(i.CodeActionKind.RefactorExtract,r.CodeActionKind.RefactorExtract),A.set(i.CodeActionKind.RefactorInline,r.CodeActionKind.RefactorInline),A.set(i.CodeActionKind.RefactorRewrite,r.CodeActionKind.RefactorRewrite),A.set(i.CodeActionKind.Source,r.CodeActionKind.Source),A.set(i.CodeActionKind.SourceOrganizeImports,r.CodeActionKind.SourceOrganizeImports),{asUri:n,asDiagnostics:l,asDiagnostic:d,asRange:f,asPosition:p,asDiagnosticSeverity:g,asHover:function(e){if(e)return new r.Hover(function(e){if(o.string(e))return new r.MarkdownString(e);if(u.is(e))return(new r.MarkdownString).appendCodeblock(e.value,e.language);if(Array.isArray(e)){let t=[];for(let n of e){let e=new r.MarkdownString;u.is(n)?e.appendCodeblock(n.value,n.language):e.appendMarkdown(n),t.push(e)}return t}{let t;switch(e.kind){case i.MarkupKind.Markdown:return new r.MarkdownString(e.value);case i.MarkupKind.PlainText:return(t=new r.MarkdownString).appendText(e.value),t;default:return(t=new r.MarkdownString).appendText(`Unsupported Markup content received. Kind is: ${e.kind}`),t}}}(e.contents),f(e.range))},asCompletionResult:function(e){if(!e)return;if(Array.isArray(e))return e.map(v);let t=e;return new r.CompletionList(t.items.map(v),t.isIncomplete)},asCompletionItem:v,asTextEdit:C,asTextEdits:y,asSignatureHelp:function(e){if(!e)return;let t=new r.SignatureHelp;return o.number(e.activeSignature)?t.activeSignature=e.activeSignature:t.activeSignature=0,o.number(e.activeParameter)?t.activeParameter=e.activeParameter:t.activeParameter=0,e.signatures&&(t.signatures=w(e.signatures)),t},asSignatureInformations:w,asSignatureInformation:b,asParameterInformations:S,asParameterInformation:_,asDeclarationResult:function(e){if(e)return k(e)},asDefinitionResult:function(e){if(e)return k(e)},asLocation:P,asReferences:function(e){if(e)return e.map(e=>P(e))},asDocumentHighlights:function(e){if(e)return e.map(E)},asDocumentHighlight:E,asDocumentHighlightKind:T,asSymbolInformations:function(e,t){if(e)return e.map(e=>D(e,t))},asSymbolInformation:D,asDocumentSymbols:function(e){if(null!=e)return e.map(R)},asDocumentSymbol:R,asCommand:O,asCommands:function(e){if(e)return e.map(O)},asCodeAction:function(e){if(null==e)return;let t=new r.CodeAction(e.title);return void 0!==e.kind&&(t.kind=F(e.kind)),e.diagnostics&&(t.diagnostics=l(e.diagnostics)),e.edit&&(t.edit=M(e.edit)),e.command&&(t.command=O(e.command)),t},asCodeActionKind:F,asCodeActionKinds:function(e){if(null!=e)return e.map(e=>F(e))},asCodeLens:N,asCodeLenses:function(e){if(e)return e.map(e=>N(e))},asWorkspaceEdit:M,asDocumentLink:L,asDocumentLinks:function(e){if(e)return e.map(L)},asFoldingRangeKind:$,asFoldingRange:U,asFoldingRanges:function(e){if(Array.isArray(e))return e.map(U)},asColor:q,asColorInformation:j,asColorInformations:function(e){if(Array.isArray(e))return e.map(j)},asColorPresentation:W,asColorPresentations:function(e){if(Array.isArray(e))return e.map(W)}}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.Delayer=class{constructor(e){this.defaultDelay=e,this.timeout=void 0,this.completionPromise=void 0,this.onSuccess=void 0,this.task=void 0}trigger(e,t=this.defaultDelay){return this.task=e,t>=0&&this.cancelTimeout(),this.completionPromise||(this.completionPromise=new Promise(e=>{this.onSuccess=e}).then(()=>{this.completionPromise=void 0,this.onSuccess=void 0;var e=this.task();return this.task=void 0,e})),(t>=0||void 0===this.timeout)&&(this.timeout=setTimeout(()=>{this.timeout=void 0,this.onSuccess(void 0)},t>=0?t:this.defaultDelay)),this.completionPromise}forceDelivery(){if(!this.completionPromise)return;this.cancelTimeout();let e=this.task();return this.completionPromise=void 0,this.onSuccess=void 0,this.task=void 0,e}isTriggered(){return void 0!==this.timeout}cancel(){this.cancelTimeout(),this.completionPromise=void 0}cancelTimeout(){void 0!==this.timeout&&(clearTimeout(this.timeout),this.timeout=void 0)}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(17),i=n(11),o=n(0),s=n(7),a=n(16);function c(e,t){return void 0===e[t]&&(e[t]={}),e[t]}t.ColorProviderFeature=class extends a.TextDocumentFeature{constructor(e){super(e,s.DocumentColorRequest.type)}fillClientCapabilities(e){c(c(e,"textDocument"),"colorProvider").dynamicRegistration=!0}initialize(e,t){if(!e.colorProvider)return;const n=e.colorProvider,o=i.string(n.id)&&n.id.length>0?n.id:r.generateUuid(),s=n.documentSelector||t;s&&this.register(this.messages,{id:o,registerOptions:Object.assign({},{documentSelector:s})})}registerLanguageProvider(e){let t=this._client,n=(e,n,r)=>{const i={color:e,textDocument:t.code2ProtocolConverter.asTextDocumentIdentifier(n.document),range:t.code2ProtocolConverter.asRange(n.range)};return t.sendRequest(s.ColorPresentationRequest.type,i,r).then(this.asColorPresentations.bind(this),e=>(t.logFailedRequest(s.ColorPresentationRequest.type,e),Promise.resolve(null)))},r=(e,n)=>{const r={textDocument:t.code2ProtocolConverter.asTextDocumentIdentifier(e)};return t.sendRequest(s.DocumentColorRequest.type,r,n).then(this.asColorInformations.bind(this),e=>(t.logFailedRequest(s.ColorPresentationRequest.type,e),Promise.resolve(null)))},i=t.clientOptions.middleware;return o.languages.registerColorProvider(e.documentSelector,{provideColorPresentations:(e,t,r)=>i.provideColorPresentations?i.provideColorPresentations(e,t,r,n):n(e,t,r),provideDocumentColors:(e,t)=>i.provideDocumentColors?i.provideDocumentColors(e,t,r):r(e,t)})}asColor(e){return new o.Color(e.red,e.green,e.blue,e.alpha)}asColorInformations(e){return Array.isArray(e)?e.map(e=>new o.ColorInformation(this._client.protocol2CodeConverter.asRange(e.range),this.asColor(e.color))):[]}asColorPresentations(e){return Array.isArray(e)?e.map(e=>{let t=new o.ColorPresentation(e.label);return t.additionalTextEdits=this._client.protocol2CodeConverter.asTextEdits(e.additionalTextEdits),t.textEdit=this._client.protocol2CodeConverter.asTextEdit(e.textEdit),t}):[]}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(0),i=n(7);t.ConfigurationFeature=class{constructor(e){this._client=e}fillClientCapabilities(e){e.workspace=e.workspace||{},e.workspace.configuration=!0}initialize(){let e=this._client;e.onRequest(i.ConfigurationRequest.type,(t,n)=>{let r=e=>{let t=[];for(let n of e.items){let e=void 0!==n.scopeUri&&null!==n.scopeUri?this._client.protocol2CodeConverter.asUri(n.scopeUri):void 0;t.push(this.getConfiguration(e,null!==n.section?n.section:void 0))}return t},i=e.clientOptions.middleware.workspace;return i&&i.configuration?i.configuration(t,n,r):r(t)})}getConfiguration(e,t){let n=null;if(t){let i=t.lastIndexOf(".");if(-1===i)n=r.workspace.getConfiguration(void 0,e).get(t);else{let e=r.workspace.getConfiguration(t.substr(0,i));e&&(n=e.get(t.substr(i+1)))}}else{let t=r.workspace.getConfiguration(void 0,e);n={};for(let e of Object.keys(t))t.has(e)&&(n[e]=t.get(e))}return n||null}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(17),i=n(11),o=n(0),s=n(7),a=n(16);function c(e,t){return void 0===e[t]&&(e[t]={}),e[t]}t.ImplementationFeature=class extends a.TextDocumentFeature{constructor(e){super(e,s.ImplementationRequest.type)}fillClientCapabilities(e){let t=c(c(e,"textDocument"),"implementation");t.dynamicRegistration=!0,t.linkSupport=!0}initialize(e,t){if(e.implementationProvider)if(!0===e.implementationProvider){if(!t)return;this.register(this.messages,{id:r.generateUuid(),registerOptions:Object.assign({},{documentSelector:t})})}else{const n=e.implementationProvider,o=i.string(n.id)&&n.id.length>0?n.id:r.generateUuid(),s=n.documentSelector||t;s&&this.register(this.messages,{id:o,registerOptions:Object.assign({},{documentSelector:s})})}}registerLanguageProvider(e){let t=this._client,n=(e,n,r)=>t.sendRequest(s.ImplementationRequest.type,t.code2ProtocolConverter.asTextDocumentPositionParams(e,n),r).then(t.protocol2CodeConverter.asDefinitionResult,e=>(t.logFailedRequest(s.ImplementationRequest.type,e),Promise.resolve(null))),r=t.clientOptions.middleware;return o.languages.registerImplementationProvider(e.documentSelector,{provideImplementation:(e,t,i)=>r.provideImplementation?r.provideImplementation(e,t,i,n):n(e,t,i)})}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(17),i=n(11),o=n(0),s=n(7),a=n(16);function c(e,t){return void 0===e[t]&&(e[t]={}),e[t]}t.TypeDefinitionFeature=class extends a.TextDocumentFeature{constructor(e){super(e,s.TypeDefinitionRequest.type)}fillClientCapabilities(e){c(c(e,"textDocument"),"typeDefinition").dynamicRegistration=!0;let t=c(c(e,"textDocument"),"typeDefinition");t.dynamicRegistration=!0,t.linkSupport=!0}initialize(e,t){if(e.typeDefinitionProvider)if(!0===e.typeDefinitionProvider){if(!t)return;this.register(this.messages,{id:r.generateUuid(),registerOptions:Object.assign({},{documentSelector:t})})}else{const n=e.typeDefinitionProvider,o=i.string(n.id)&&n.id.length>0?n.id:r.generateUuid(),s=n.documentSelector||t;s&&this.register(this.messages,{id:o,registerOptions:Object.assign({},{documentSelector:s})})}}registerLanguageProvider(e){let t=this._client,n=(e,n,r)=>t.sendRequest(s.TypeDefinitionRequest.type,t.code2ProtocolConverter.asTextDocumentPositionParams(e,n),r).then(t.protocol2CodeConverter.asDefinitionResult,e=>(t.logFailedRequest(s.TypeDefinitionRequest.type,e),Promise.resolve(null))),r=t.clientOptions.middleware;return o.languages.registerTypeDefinitionProvider(e.documentSelector,{provideTypeDefinition:(e,t,i)=>r.provideTypeDefinition?r.provideTypeDefinition(e,t,i,n):n(e,t,i)})}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(17),i=n(0),o=n(7);function s(e,t){if(void 0!==e)return e[t]}t.WorkspaceFoldersFeature=class{constructor(e){this._client=e,this._listeners=new Map}get messages(){return o.DidChangeWorkspaceFoldersNotification.type}fillInitializeParams(e){let t=i.workspace.workspaceFolders;e.workspaceFolders=void 0===t?null:t.map(e=>this.asProtocol(e))}fillClientCapabilities(e){e.workspace=e.workspace||{},e.workspace.workspaceFolders=!0}initialize(e){let t=this._client;t.onRequest(o.WorkspaceFoldersRequest.type,e=>{let n=()=>{let e=i.workspace.workspaceFolders;return void 0===e?null:e.map(e=>this.asProtocol(e))},r=t.clientOptions.middleware.workspace;return r&&r.workspaceFolders?r.workspaceFolders(e,n):n()});let n,a=s(s(s(e,"workspace"),"workspaceFolders"),"changeNotifications");"string"==typeof a?n=a:!0===a&&(n=r.generateUuid()),n&&this.register(this.messages,{id:n,registerOptions:void 0})}register(e,t){let n=t.id,r=this._client,s=i.workspace.onDidChangeWorkspaceFolders(e=>{let t=e=>{let t={event:{added:e.added.map(e=>this.asProtocol(e)),removed:e.removed.map(e=>this.asProtocol(e))}};this._client.sendNotification(o.DidChangeWorkspaceFoldersNotification.type,t)},n=r.clientOptions.middleware.workspace;n&&n.didChangeWorkspaceFolders?n.didChangeWorkspaceFolders(e,t):t(e)});this._listeners.set(n,s)}unregister(e){let t=this._listeners.get(e);void 0!==t&&(this._listeners.delete(e),t.dispose())}dispose(){for(let e of this._listeners.values())e.dispose();this._listeners.clear()}asProtocol(e){return void 0===e?null:{uri:this._client.code2ProtocolConverter.asUri(e.uri),name:e.name}}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(17),i=n(11),o=n(0),s=n(7),a=n(16);function c(e,t){return void 0===e[t]&&(e[t]={}),e[t]}t.FoldingRangeFeature=class extends a.TextDocumentFeature{constructor(e){super(e,s.FoldingRangeRequest.type)}fillClientCapabilities(e){let t=c(c(e,"textDocument"),"foldingRange");t.dynamicRegistration=!0,t.rangeLimit=5e3,t.lineFoldingOnly=!0}initialize(e,t){if(!e.foldingRangeProvider)return;const n=e.foldingRangeProvider,o=i.string(n.id)&&n.id.length>0?n.id:r.generateUuid(),s=n.documentSelector||t;s&&this.register(this.messages,{id:o,registerOptions:Object.assign({},{documentSelector:s})})}registerLanguageProvider(e){let t=this._client,n=(e,n,r)=>{const i={textDocument:t.code2ProtocolConverter.asTextDocumentIdentifier(e)};return t.sendRequest(s.FoldingRangeRequest.type,i,r).then(this.asFoldingRanges.bind(this),e=>(t.logFailedRequest(s.FoldingRangeRequest.type,e),Promise.resolve(null)))},r=t.clientOptions.middleware;return o.languages.registerFoldingRangeProvider(e.documentSelector,{provideFoldingRanges:(e,t,i)=>r.provideFoldingRanges?r.provideFoldingRanges(e,t,i,n):n(e,0,i)})}asFoldingRangeKind(e){if(e)switch(e){case s.FoldingRangeKind.Comment:return o.FoldingRangeKind.Comment;case s.FoldingRangeKind.Imports:return o.FoldingRangeKind.Imports;case s.FoldingRangeKind.Region:return o.FoldingRangeKind.Region}}asFoldingRanges(e){return Array.isArray(e)?e.map(e=>new o.FoldingRange(e.startLine,e.endLine,this.asFoldingRangeKind(e.kind))):[]}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(17),i=n(11),o=n(0),s=n(7),a=n(16);function c(e,t){return void 0===e[t]&&(e[t]={}),e[t]}t.DeclarationFeature=class extends a.TextDocumentFeature{constructor(e){super(e,s.DeclarationRequest.type)}fillClientCapabilities(e){let t=c(c(e,"textDocument"),"declaration");t.dynamicRegistration=!0,t.linkSupport=!0}initialize(e,t){if(e.declarationProvider)if(!0===e.declarationProvider){if(!t)return;this.register(this.messages,{id:r.generateUuid(),registerOptions:Object.assign({},{documentSelector:t})})}else{const n=e.declarationProvider,o=i.string(n.id)&&n.id.length>0?n.id:r.generateUuid(),s=n.documentSelector||t;s&&this.register(this.messages,{id:o,registerOptions:Object.assign({},{documentSelector:s})})}}registerLanguageProvider(e){let t=this._client,n=(e,n,r)=>t.sendRequest(s.DeclarationRequest.type,t.code2ProtocolConverter.asTextDocumentPositionParams(e,n),r).then(t.protocol2CodeConverter.asDeclarationResult,e=>(t.logFailedRequest(s.DeclarationRequest.type,e),Promise.resolve(null))),r=t.clientOptions.middleware;return o.languages.registerDeclarationProvider(e.documentSelector,{provideDeclaration:(e,t,i)=>r.provideDeclaration?r.provideDeclaration(e,t,i,n):n(e,t,i)})}}},function(e,t,n){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0});const r=n(18),i=n(1),o="win32"===process.platform,s="darwin"===process.platform,a="linux"===process.platform;t.terminate=function(t,n){if(o)try{let e={stdio:["pipe","pipe","ignore"]};return n&&(e.cwd=n),r.execFileSync("taskkill",["/T","/F","/PID",t.pid.toString()],e),!0}catch(e){return!1}else{if(!a&&!s)return t.kill("SIGKILL"),!0;try{var c=i.join(e,"terminateProcess.sh");return!r.spawnSync(c,[t.pid.toString()]).error}catch(e){return!1}}}}).call(this,"/")},function(e,t,n){"use strict";var r=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))(function(i,o){function s(e){try{c(r.next(e))}catch(e){o(e)}}function a(e){try{c(r.throw(e))}catch(e){o(e)}}function c(e){e.done?i(e.value):new n(function(t){t(e.value)}).then(s,a)}c((r=r.apply(e,t||[])).next())})};Object.defineProperty(t,"__esModule",{value:!0});const i=n(28),o=n(0);!function(e){e[e.TagParsingBegun=1]="TagParsingBegun",e[e.TagParsingDone=2]="TagParsingDone",e[e.IntelliSenseCompiling=3]="IntelliSenseCompiling",e[e.IntelliSenseReady=4]="IntelliSenseReady"}(t.Status||(t.Status={})),t.getCppToolsTestApi=function(e){return r(this,void 0,void 0,function*(){let t,n,r=o.extensions.getExtension("ms-vscode.cpptools");if(r)if(function(e){return void 0!==e.getTestApi}(t=r.isActive?r.exports:yield r.activate())){try{n=t.getTestApi(e)}catch(e){let r=e;r.message&&r.message.startsWith("Invalid version")&&(n=t.getTestApi(i.Version.v1))}e!==i.Version.v1&&(n.getVersion?e!==n.getVersion()&&console.warn(`vscode-cpptools-api version ${e} requested, but is not available in the current version of the cpptools extension. Using version ${n.getVersion()} instead.`):console.warn(`vscode-cpptools-api version ${e} requested, but is not available in the current version of the cpptools extension. Using version 1 instead.`))}else n=t,e!==i.Version.v0&&console.warn(`vscode-cpptools-api version ${e} requested, but is not available in version 0.17.5 of the cpptools extension. Using version 0 instead.`);else console.warn("C/C++ extension is not installed");return n})}},function(e,t,n){"use strict";var r=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))(function(i,o){function s(e){try{c(r.next(e))}catch(e){o(e)}}function a(e){try{c(r.throw(e))}catch(e){o(e)}}function c(e){e.done?i(e.value):new n(function(t){t(e.value)}).then(s,a)}c((r=r.apply(e,t||[])).next())})};Object.defineProperty(t,"__esModule",{value:!0});const i=n(1),o=n(2),s=n(0),a=n(4),c=n(8),u=n(30),l=n(23),d=n(35),h=n(22),p=n(177),f=n(3),g=n(178),m=4;t.CppProperties=class{constructor(e){this.propertiesFile=void 0,this.configurationJson=null,this.configFileWatcher=null,this.configFileWatcherFallbackTime=new Date,this.compileCommandFileWatchers=[],this.defaultCompilerPath=null,this.knownCompilers=null,this.defaultCStandard=null,this.defaultCppStandard=null,this.defaultIncludes=null,this.defaultFrameworks=null,this.defaultWindowsSdkVersion=null,this.vcpkgIncludes=[],this.vcpkgPathReady=!1,this.defaultIntelliSenseMode=null,this.configurationGlobPattern="c_cpp_properties.json",this.disposables=[],this.configurationsChanged=new s.EventEmitter,this.selectionChanged=new s.EventEmitter,this.compileCommandsChanged=new s.EventEmitter,this.prevSquiggleMetrics=new Map,this.rootfs=null,this.settingsPanel=void 0,this.configurationIncomplete=!0,console.assert(void 0!==e),this.rootUri=e;let t=e?e.fsPath:"";this.currentConfigurationIndex=new u.PersistentFolderState("CppProperties.currentConfigurationIndex",-1,t),this.configFolder=i.join(t,".vscode"),this.diagnosticCollection=s.languages.createDiagnosticCollection(t),this.buildVcpkgIncludePath(),this.disposables.push(s.Disposable.from(this.configurationsChanged,this.selectionChanged,this.compileCommandsChanged))}get ConfigurationsChanged(){return this.configurationsChanged.event}get SelectionChanged(){return this.selectionChanged.event}get CompileCommandsChanged(){return this.compileCommandsChanged.event}get Configurations(){return this.configurationJson?this.configurationJson.configurations:null}get CurrentConfigurationIndex(){return this.currentConfigurationIndex.Value}get CurrentConfiguration(){return this.Configurations?this.Configurations[this.CurrentConfigurationIndex]:null}get CompilerPath(){return this.CurrentConfiguration?this.CurrentConfiguration.compilerPath:null}get KnownCompiler(){return this.knownCompilers}get CurrentConfigurationProvider(){return this.CurrentConfiguration.configurationProvider?this.CurrentConfiguration.configurationProvider:new l.CppSettings(this.rootUri).defaultConfigurationProvider}get ConfigurationNames(){let e=[];return this.configurationJson.configurations.forEach(t=>e.push(t.name)),e}set CompilerDefaults(e){this.defaultCompilerPath=e.compilerPath,this.knownCompilers=e.knownCompilers,this.defaultCStandard=e.cStandard,this.defaultCppStandard=e.cppStandard,this.defaultIncludes=e.includes,this.defaultFrameworks=e.frameworks,this.defaultWindowsSdkVersion=e.windowsSdkVersion,this.defaultIntelliSenseMode=e.intelliSenseMode,this.rootfs=e.rootfs;let t=i.join(this.configFolder,"c_cpp_properties.json");o.existsSync(t)?this.propertiesFile=s.Uri.file(t):this.propertiesFile=null;let n=i.join(this.configFolder,this.configurationGlobPattern);this.configFileWatcher=s.workspace.createFileSystemWatcher(n),this.disposables.push(this.configFileWatcher),this.configFileWatcher.onDidCreate(e=>{this.propertiesFile=e,this.handleConfigurationChange()}),this.configFileWatcher.onDidDelete(()=>{this.propertiesFile=null,this.resetToDefaultSettings(!0),this.handleConfigurationChange()}),this.configFileWatcher.onDidChange(()=>{let e=!1;for(let t=0;t<s.workspace.textDocuments.length;t++)if(s.workspace.textDocuments[t].uri.fsPath===n){e=!0;break}e||this.handleConfigurationChange()}),s.workspace.onDidChangeTextDocument(e=>{e.document.uri.fsPath===n&&this.handleConfigurationChange()}),this.handleConfigurationChange()}get VcpkgInstalled(){return this.vcpkgIncludes.length>0}onConfigurationsChanged(){this.configurationsChanged.fire(this.Configurations)}onSelectionChanged(){this.selectionChanged.fire(this.CurrentConfigurationIndex),this.settingsPanel&&this.ensurePropertiesFile().then(()=>{this.propertiesFile&&(this.parsePropertiesFile(!1)?this.settingsPanel.updateConfigUI(this.configurationJson.configurations[this.currentConfigurationIndex.Value],this.getErrorsForConfigUI()):s.workspace.openTextDocument(this.propertiesFile))}),this.handleSquiggles()}onCompileCommandsChanged(e){this.compileCommandsChanged.fire(e)}onDidChangeSettings(){this.propertiesFile?this.configurationIncomplete||this.handleConfigurationChange():(this.resetToDefaultSettings(!0),this.handleConfigurationChange())}resetToDefaultSettings(e){this.configurationJson={configurations:["darwin"===process.platform?{name:"Mac"}:"win32"===process.platform?{name:"Win32"}:{name:"Linux"}],version:m},(e||this.CurrentConfigurationIndex<0||this.CurrentConfigurationIndex>=this.configurationJson.configurations.length)&&(this.currentConfigurationIndex.Value=this.getConfigIndexForPlatform(this.configurationJson)),this.configurationIncomplete=!0}applyDefaultIncludePathsAndFrameworks(){if(this.configurationIncomplete&&this.defaultIncludes&&this.defaultFrameworks&&this.vcpkgPathReady){let e=this.CurrentConfiguration,t=new l.CppSettings(this.rootUri),n=e=>null===e;if(n(t.defaultIncludePath)){let t=d.getABTestSettings().UseRecursiveIncludes?"${workspaceFolder}/**":"${workspaceFolder}";e.includePath=[t].concat(this.vcpkgIncludes)}n(t.defaultDefines)&&(e.defines="win32"===process.platform?["_DEBUG","UNICODE","_UNICODE"]:[]),n(t.defaultMacFrameworkPath)&&"darwin"===process.platform&&(e.macFrameworkPath=this.defaultFrameworks),n(t.defaultWindowsSdkVersion)&&this.defaultWindowsSdkVersion&&"win32"===process.platform&&(e.windowsSdkVersion=this.defaultWindowsSdkVersion),n(t.defaultCompilerPath)&&this.defaultCompilerPath&&n(t.defaultCompileCommands)&&!e.compileCommands&&(e.compilerPath=this.defaultCompilerPath),this.knownCompilers&&(e.knownCompilers=this.knownCompilers),n(t.defaultCStandard)&&this.defaultCStandard&&(e.cStandard=this.defaultCStandard),n(t.defaultCppStandard)&&this.defaultCppStandard&&(e.cppStandard=this.defaultCppStandard),n(t.defaultIntelliSenseMode)&&(e.intelliSenseMode=this.defaultIntelliSenseMode),this.configurationIncomplete=!1}}get ExtendedEnvironment(){let e={};return this.configurationJson.env&&Object.assign(e,this.configurationJson.env),e.workspaceFolderBasename=this.rootUri?i.basename(this.rootUri.fsPath):"",e}buildVcpkgIncludePath(){return r(this,void 0,void 0,function*(){try{let e=a.getVcpkgRoot();if(e){let t=yield a.readDir(e);void 0!==t&&t.forEach(t=>{if("vcpkg"!==t){let n=i.join(e,t);if(o.existsSync(n)){let t=i.join(n,"include");o.existsSync(t)&&(t=(t=t.replace(/\\/g,"/")).replace(e,"${vcpkgRoot}"),this.vcpkgIncludes.push(t))}}})}}catch(e){}finally{this.vcpkgPathReady=!0,this.handleConfigurationChange()}})}getConfigIndexForPlatform(e){let t;t="darwin"===process.platform?"Mac":"win32"===process.platform?"Win32":"Linux";for(let n=0;n<this.configurationJson.configurations.length;n++)if(e.configurations[n].name===t)return n;return this.configurationJson.configurations.length-1}getIntelliSenseModeForPlatform(e){return"Linux"===e?"gcc-x64":"Mac"===e?"clang-x64":"Win32"===e?"msvc-x64":"win32"===process.platform?"msvc-x64":"darwin"===process.platform?"clang-x64":"gcc-x64"}isCompilerIntelliSenseModeCompatible(){return void 0===this.CurrentConfiguration.compilerPath||""===this.CurrentConfiguration.compilerPath||"${default}"===this.CurrentConfiguration.compilerPath||void 0===this.CurrentConfiguration.intelliSenseMode||""===this.CurrentConfiguration.intelliSenseMode||"${default}"===this.CurrentConfiguration.intelliSenseMode||a.extractCompilerPathAndArgs(this.CurrentConfiguration.compilerPath).compilerPath.endsWith("cl.exe")===("msvc-x64"===this.CurrentConfiguration.intelliSenseMode)}addToIncludePathCommand(e){this.handleConfigurationEditCommand(()=>{c.logLanguageServerEvent("addToIncludePath"),this.parsePropertiesFile(!0);let t=this.CurrentConfiguration;void 0===t.includePath&&(t.includePath=["${default}"]),t.includePath.splice(t.includePath.length,0,e),this.writeToJson(),this.handleConfigurationChange()},null)}updateCustomConfigurationProvider(e){return new Promise(t=>{if(this.propertiesFile)this.handleConfigurationEditJSONCommand(()=>{this.parsePropertiesFile(!0);let n=this.CurrentConfiguration;e?n.configurationProvider=e:delete n.configurationProvider,this.writeToJson(),this.handleConfigurationChange(),t()},null);else{let n=new l.CppSettings(this.rootUri);e?n.update("default.configurationProvider",e):n.update("default.configurationProvider",void 0),this.CurrentConfiguration.configurationProvider=e,t()}})}setCompileCommands(e){this.handleConfigurationEditJSONCommand(()=>{this.parsePropertiesFile(!0),this.CurrentConfiguration.compileCommands=e,this.writeToJson(),this.handleConfigurationChange()},null)}select(e){e!==this.configurationJson.configurations.length?e!==this.configurationJson.configurations.length+1?(this.currentConfigurationIndex.Value=e,this.onSelectionChanged()):this.handleConfigurationEditJSONCommand(null,s.window.showTextDocument):this.handleConfigurationEditUICommand(null,s.window.showTextDocument)}resolveDefaults(e,t){let n=[];return e.forEach(e=>{"${default}"===e?null!==t&&(n=n.concat(t)):n.push(e)}),n}resolveAndSplit(e,t,n){let r=[];return e&&(e=this.resolveDefaults(e,t)).forEach(e=>{let t=a.resolveVariables(e,n).split(";").filter(e=>e);r=r.concat(t)}),r}resolveVariables(e,t,n){return void 0!==e&&"${default}"!==e||(e=t),"boolean"==typeof e?e:a.resolveVariables(e,n)}updateConfiguration(e,t,n){if(a.isString(e)||a.isString(t))return this.resolveVariables(e,t,n);if(a.isBoolean(e)||a.isBoolean(t))return this.resolveVariables(e,t,n);if(a.isArrayOfString(e)||a.isArrayOfString(t)){if(e)return this.resolveAndSplit(e,t,n);if(void 0===e&&t)return this.resolveAndSplit(t,[],n)}return e}updateServerOnFolderSettingsChange(){if(!this.configurationJson)return;let e=new l.CppSettings(this.rootUri),t=this.ExtendedEnvironment;for(let n=0;n<this.configurationJson.configurations.length;n++){let r=this.configurationJson.configurations[n];r.includePath=this.updateConfiguration(r.includePath,e.defaultIncludePath,t),r.defines=this.updateConfiguration(r.defines,e.defaultDefines,t),r.macFrameworkPath=this.updateConfiguration(r.macFrameworkPath,e.defaultMacFrameworkPath,t),r.windowsSdkVersion=this.updateConfiguration(r.windowsSdkVersion,e.defaultWindowsSdkVersion,t),r.forcedInclude=this.updateConfiguration(r.forcedInclude,e.defaultForcedInclude,t),r.compileCommands=this.updateConfiguration(r.compileCommands,e.defaultCompileCommands,t),r.compilerPath=this.updateConfiguration(r.compilerPath,e.defaultCompilerPath,t),r.cStandard=this.updateConfiguration(r.cStandard,e.defaultCStandard,t),r.cppStandard=this.updateConfiguration(r.cppStandard,e.defaultCppStandard,t),r.intelliSenseMode=this.updateConfiguration(r.intelliSenseMode,e.defaultIntelliSenseMode,t),r.configurationProvider=this.updateConfiguration(r.configurationProvider,e.defaultConfigurationProvider,t),r.browse||(r.browse={}),r.browse.path?r.browse.path=this.updateConfiguration(r.browse.path,e.defaultBrowsePath,t):e.defaultBrowsePath?r.browse.path=e.defaultBrowsePath:r.includePath&&(r.browse.path=r.includePath.slice(0),-1===r.includePath.findIndex((e,t)=>!!e.match(/^\$\{(workspaceRoot|workspaceFolder)\}(\\\*{0,2}|\/\*{0,2})?$/g))&&r.browse.path.push("${workspaceFolder}")),r.browse.limitSymbolsToIncludedHeaders=this.updateConfiguration(r.browse.limitSymbolsToIncludedHeaders,e.defaultLimitSymbolsToIncludedHeaders,t),r.browse.databaseFilename=this.updateConfiguration(r.browse.databaseFilename,e.defaultDatabaseFilename,t)}this.updateCompileCommandsFileWatchers(),this.configurationIncomplete||this.onConfigurationsChanged()}updateCompileCommandsFileWatchers(){this.compileCommandFileWatchers.forEach(e=>e.close()),this.compileCommandFileWatchers=[];let e=new Set;this.configurationJson.configurations.forEach(t=>{void 0!==t.compileCommands&&o.existsSync(t.compileCommands)&&e.add(t.compileCommands)});try{e.forEach(e=>{this.compileCommandFileWatchers.push(o.watch(e,(t,n)=>{"rename"!==t&&this.onCompileCommandsChanged(e)}))})}catch(e){}}handleConfigurationEditCommand(e,t){"ui"===new l.OtherSettings(this.rootUri).settingsEditor?this.handleConfigurationEditUICommand(e,t):this.handleConfigurationEditJSONCommand(e,t)}handleConfigurationEditJSONCommand(e,t){this.ensurePropertiesFile().then(()=>{console.assert(this.propertiesFile),e&&e(),s.workspace.openTextDocument(this.propertiesFile).then(e=>{t&&t(e)})})}handleConfigurationEditUICommand(e,t){this.ensurePropertiesFile().then(()=>{this.propertiesFile&&(e&&e(),this.parsePropertiesFile(!1)?(void 0===this.settingsPanel&&(this.settingsPanel=new p.SettingsPanel,this.settingsPanel.SettingsPanelActivated(()=>this.onSettingsPanelActivated()),this.settingsPanel.ConfigValuesChanged(()=>this.saveConfigurationUI()),this.disposables.push(this.settingsPanel)),this.settingsPanel.createOrShow(this.configurationJson.configurations[this.currentConfigurationIndex.Value],this.getErrorsForConfigUI())):s.workspace.openTextDocument(this.propertiesFile).then(e=>{t&&t(e)}))})}onSettingsPanelActivated(){this.configurationJson&&this.ensurePropertiesFile().then(()=>{this.propertiesFile&&(this.parsePropertiesFile(!1)?this.settingsPanel.updateConfigUI(this.configurationJson.configurations[this.currentConfigurationIndex.Value],this.getErrorsForConfigUI()):s.workspace.openTextDocument(this.propertiesFile))})}saveConfigurationUI(){this.parsePropertiesFile(!1);let e=this.settingsPanel.getLastValuesFromConfigUI();this.configurationJson.configurations[this.currentConfigurationIndex.Value]=e,this.settingsPanel.updateErrors(this.getErrorsForConfigUI()),this.writeToJson()}handleConfigurationChange(){void 0!==this.propertiesFile&&(this.configFileWatcherFallbackTime=new Date,this.propertiesFile&&(this.parsePropertiesFile(!0),this.configurationJson&&(this.CurrentConfigurationIndex<0||this.CurrentConfigurationIndex>=this.configurationJson.configurations.length)&&(this.currentConfigurationIndex.Value=this.getConfigIndexForPlatform(this.configurationJson))),this.configurationJson||this.resetToDefaultSettings(!0),this.applyDefaultIncludePathsAndFrameworks(),this.updateServerOnFolderSettingsChange())}ensurePropertiesFile(){return r(this,void 0,void 0,function*(){if(!this.propertiesFile||!o.existsSync(this.propertiesFile.fsPath))try{o.existsSync(this.configFolder)||o.mkdirSync(this.configFolder);let e=i.join(this.configFolder,"c_cpp_properties.json");this.configurationJson&&this.resetToDefaultSettings(!0),this.applyDefaultIncludePathsAndFrameworks();let t=new l.CppSettings(this.rootUri);t.defaultConfigurationProvider&&(this.configurationJson.configurations.forEach(e=>{e.configurationProvider=t.defaultConfigurationProvider}),t.update("default.configurationProvider",void 0));let n=this.configurationJson.configurations[0].knownCompilers;delete this.configurationJson.configurations[0].knownCompilers,yield a.writeFileText(e,JSON.stringify(this.configurationJson,null,4)),this.configurationJson.configurations[0].knownCompilers=n,this.propertiesFile=s.Uri.file(i.join(this.configFolder,"c_cpp_properties.json"))}catch(e){s.window.showErrorMessage(`Failed to create "${this.configFolder}": ${e.message}`)}})}parsePropertiesFile(e){let t=!0;try{let n=o.readFileSync(this.propertiesFile.fsPath,"utf8");if(""===n)return;e&&(n=a.escapeForSquiggles(n));let r=JSON.parse(n);if(!r||!r.configurations||0===r.configurations.length)throw{message:"Invalid configuration file. There must be at least one configuration present in the array."};if(!this.configurationIncomplete&&this.configurationJson&&this.configurationJson.configurations&&this.CurrentConfigurationIndex>=0&&this.CurrentConfigurationIndex<this.configurationJson.configurations.length)for(let e=0;e<r.configurations.length;e++)if(r.configurations[e].name===this.configurationJson.configurations[this.CurrentConfigurationIndex].name){this.currentConfigurationIndex.Value=e;break}this.configurationJson=r,(this.CurrentConfigurationIndex<0||this.CurrentConfigurationIndex>=r.configurations.length)&&(this.currentConfigurationIndex.Value=this.getConfigIndexForPlatform(r));let i=!1;for(let e=0;e<this.configurationJson.configurations.length;e++){let t=h.getCustomConfigProviders().checkId(this.configurationJson.configurations[e].configurationProvider);t!==this.configurationJson.configurations[e].configurationProvider&&(i=!0,this.configurationJson.configurations[e].configurationProvider=t)}if(this.configurationJson.env&&(delete this.configurationJson.env.workspaceRoot,delete this.configurationJson.env.workspaceFolder,delete this.configurationJson.env.workspaceFolderBasename,delete this.configurationJson.env.default),this.configurationIncomplete=!1,this.configurationJson.version!==m&&(i=!0,void 0===this.configurationJson.version&&this.updateToVersion2(),2===this.configurationJson.version&&this.updateToVersion3(),3===this.configurationJson.version?this.updateToVersion4():(this.configurationJson.version=m,s.window.showErrorMessage("Unknown version number found in c_cpp_properties.json. Some features may not work as expected."))),i)try{this.writeToJson()}catch(e){s.window.showWarningMessage(`Attempt to update "${this.propertiesFile.fsPath}" failed (do you have write access?)`),t=!1}}catch(e){s.window.showErrorMessage(`Failed to parse "${this.propertiesFile.fsPath}": ${e.message}`),t=!1}return e&&t&&this.handleSquiggles(),t}resolvePath(e,t){if(!e||"${default}"===e)return"";let n="";if((n=a.resolveVariables(e,this.ExtendedEnvironment)).includes("${workspaceFolder}")&&(n=n.replace("${workspaceFolder}",this.rootUri.fsPath)),n.includes("${workspaceRoot}")&&(n=n.replace("${workspaceRoot}",this.rootUri.fsPath)),n.includes("${vcpkgRoot}")&&a.getVcpkgRoot()&&(n=n.replace("${vcpkgRoot}",a.getVcpkgRoot())),n.includes("*")&&(n=n.replace(/\*/g,"")),t&&n.startsWith("/")){const e="/mnt/";n.length>"/mnt/c/".length&&n.substr(0,e.length)===e?n=(n=n.substr(e.length)).substr(0,1)+":"+n.substr(1):this.rootfs&&this.rootfs.length>0&&(n=this.rootfs+n.substr(1))}return n}getErrorsForConfigUI(){let e={};const t="win32"===f.platform();let n=this.resolvePath(this.CurrentConfiguration.compilerPath,t),r=a.extractCompilerPathAndArgs(n);if(n&&(!t||!r.compilerPath.endsWith("cl.exe"))){n=n.trim();let s=[];r.additionalArgs&&!n.startsWith('"')&&r.compilerPath.includes(" ")&&s.push('Compiler path with spaces and arguments is missing double quotes " around the path.'),n=r.compilerPath;let c=!0,u=e=>t&&!e.startsWith("/")&&o.existsSync(e+".exe");if(!o.existsSync(n))if(u(n))n+=".exe";else{const e=this.rootUri.fsPath+i.sep+n;o.existsSync(e)?n=e:u(n)?n+=".exe":c=!1}if(c){if(!a.checkFileExistsSync(n)){let e=`Path is not a file: ${n}`;s.push(e)}}else{let e=`Cannot find: ${n}`;s.push(e)}s.length>0&&(e.compilerPath=s.join("\n"))}let s=[];if(this.CurrentConfiguration.includePath){for(let e of this.CurrentConfiguration.includePath){let n=!0,r=this.resolvePath(e,t);if(r){if(!o.existsSync(r)){const e=this.rootUri.fsPath+i.sep+r;o.existsSync(e)?r=e:n=!1}if(n){if(!a.checkDirectoryExistsSync(r)){let e=`Path is not a directory: ${r}`;s.push(e)}}else{let e=`Cannot find: ${r}`;s.push(e)}}}s.length>0&&(e.includePath=s.join("\n"))}return t&&!this.isCompilerIntelliSenseModeCompatible()&&(e.intelliSenseMode=`IntelliSense mode ${this.CurrentConfiguration.intelliSenseMode} is incompatible with compiler path.`),e}handleSquiggles(){this.propertiesFile&&(!1!==this.configurationJson.enableConfigurationSquiggles&&!1!==new l.CppSettings(this.rootUri).defaultEnableConfigurationSquiggles?s.workspace.openTextDocument(this.propertiesFile).then(e=>{let t=new Array,n=e.getText(),r=0;if(!this.CurrentConfiguration.name)return;const u=n.search(new RegExp(`{\\s*"name"\\s*:\\s*"${g(this.CurrentConfiguration.name)}"`));if(-1===u)return void c.logLanguageServerEvent("ConfigSquiggles",{error:"config name not first"});r=u+1;const l=(n=n.substr(r)).indexOf(":");r+=l+1;const d=(n=n.substr(l+1)).search(new RegExp('"name"\\s*:\\s*"'));if(-1!==d){const e=(n=n.substr(0,d+6)).search(new RegExp('\\s*}\\s*,\\s*{\\s*"name"'));if(-1===e)return void c.logLanguageServerEvent("ConfigSquiggles",{error:"next config name not first"});n=n.substr(0,e)}void 0===this.prevSquiggleMetrics[this.CurrentConfiguration.name]&&(this.prevSquiggleMetrics[this.CurrentConfiguration.name]={PathNonExistent:0,PathNotAFile:0,PathNotADirectory:0,CompilerPathMissingQuotes:0,CompilerModeMismatch:0});let h={PathNonExistent:0,PathNotAFile:0,PathNotADirectory:0,CompilerPathMissingQuotes:0,CompilerModeMismatch:0};const p="win32"===f.platform();if(p){const i=n.search(/\s*\"intelliSenseMode\"\s*:\s*\"/);if(-1!==i){const o=n.indexOf('"',n.indexOf(":",i)),a=-1===i?-1:n.indexOf('"',o+1)+1;if(!this.isCompilerIntelliSenseModeCompatible()){let n=`intelliSenseMode ${this.CurrentConfiguration.intelliSenseMode} is incompatible with compilerPath.`,i=new s.Diagnostic(new s.Range(e.positionAt(r+o),e.positionAt(r+a)),n,s.DiagnosticSeverity.Warning);t.push(i),h.CompilerModeMismatch++}}}let m=new Set;for(let e of[this.CurrentConfiguration.browse?this.CurrentConfiguration.browse.path:void 0,this.CurrentConfiguration.includePath,this.CurrentConfiguration.macFrameworkPath,this.CurrentConfiguration.forcedInclude])if(e)for(let t of e)m.add(`${t}`);this.CurrentConfiguration.compileCommands&&m.add(`${this.CurrentConfiguration.compileCommands}`),this.CurrentConfiguration.compilerPath&&m.add(`${this.CurrentConfiguration.compilerPath}`);const v=n.search(/\s*\"forcedInclude\"\s*:\s*\[/),C=-1===v?-1:n.indexOf("]",v),y=n.search(/\s*\"compileCommands\"\s*:\s*\"/),w=-1===y?-1:n.indexOf('"',n.indexOf('"',n.indexOf(":",y))+1),b=n.search(/\s*\"compilerPath\"\s*:\s*\"/),S=-1===b?-1:n.indexOf('"',n.indexOf('"',n.indexOf(":",b))+1)+1;for(let c of m){const u=c===this.CurrentConfiguration.compilerPath;if("${default}"===c)continue;let l=this.resolvePath(c,p);if(!l)continue;let d=!1;if(u){l=l.trim();let e=a.extractCompilerPathAndArgs(l);if(p&&e.compilerPath.endsWith("cl.exe"))continue;d=e.additionalArgs&&!l.startsWith('"')&&e.compilerPath.includes(" "),l=e.compilerPath}const f=p&&l.startsWith("/");let g=!0,m=e=>u&&p&&!f&&o.existsSync(e+".exe");if(!o.existsSync(l))if(m(l))l+=".exe";else{const e=this.rootUri.fsPath+i.sep+l;o.existsSync(e)?l=e:m(l)?l+=".exe":g=!1}l="/"===i.sep?l.replace(/\\/g,i.sep):l.replace(/\//g,i.sep);let _=c.replace(/\"/g,'\\"');_=_.replace(/[-\"\/\\^$*+?.()|[\]{}]/g,"\\$&");let P=new RegExp(`"[^"]*?(?<="|;)${_}(?="|;).*?"`),x=n.match(P);if(x){let i=0,o=0;for(let c of x){let u;if(o=(i=n.substr(o).search(P)+o)+c.length,g)if(i>=v&&i<=C||i>=y&&i<=w||i>=b&&i<=S)if(d)u='Compiler path with spaces and arguments is missing \\" around the path.',h.CompilerPathMissingQuotes++;else{if(a.checkFileExistsSync(l))continue;u=`Path is not a file: "${l}".`,h.PathNotAFile++}else{if(a.checkDirectoryExistsSync(l))continue;u=`Path is not a directory: "${l}".`,h.PathNotADirectory++}else u=`Cannot find "${l}".`,h.PathNonExistent++;let p=new s.Diagnostic(new s.Range(e.positionAt(r+i),e.positionAt(r+o)),u,s.DiagnosticSeverity.Warning);t.push(p)}}}0!==t.length?this.diagnosticCollection.set(e.uri,t):this.diagnosticCollection.clear();let _={};h.PathNonExistent!==this.prevSquiggleMetrics[this.CurrentConfiguration.name].PathNonExistent&&(_.PathNonExistent=h.PathNonExistent),h.PathNotAFile!==this.prevSquiggleMetrics[this.CurrentConfiguration.name].PathNotAFile&&(_.PathNotAFile=h.PathNotAFile),h.PathNotADirectory!==this.prevSquiggleMetrics[this.CurrentConfiguration.name].PathNotADirectory&&(_.PathNotADirectory=h.PathNotADirectory),h.CompilerPathMissingQuotes!==this.prevSquiggleMetrics[this.CurrentConfiguration.name].CompilerPathMissingQuotes&&(_.CompilerPathMissingQuotes=h.CompilerPathMissingQuotes),Object.keys(_).length>0&&c.logLanguageServerEvent("ConfigSquiggles",null,_),this.prevSquiggleMetrics[this.CurrentConfiguration.name]=h}):this.diagnosticCollection.clear())}updateToVersion2(){this.configurationJson.version=2}updateToVersion3(){this.configurationJson.version=3;for(let e=0;e<this.configurationJson.configurations.length;e++){let t=this.configurationJson.configurations[e];("Mac"===t.name||"darwin"===process.platform&&"Win32"!==t.name&&"Linux"!==t.name)&&void 0===t.macFrameworkPath&&(t.macFrameworkPath=["/System/Library/Frameworks","/Library/Frameworks"])}}updateToVersion4(){this.configurationJson.version=4;let e=new l.CppSettings(this.rootUri);for(let t=0;t<this.configurationJson.configurations.length;t++){let n=this.configurationJson.configurations[t];void 0!==n.intelliSenseMode||e.defaultIntelliSenseMode||(n.intelliSenseMode=this.getIntelliSenseModeForPlatform(n.name)),void 0!==n.compilerPath||!this.defaultCompilerPath||n.compileCommands||e.defaultCompilerPath||(n.compilerPath=this.defaultCompilerPath),n.cStandard||!this.defaultCStandard||e.defaultCStandard||(n.cStandard=this.defaultCStandard),n.cppStandard||!this.defaultCppStandard||e.defaultCppStandard||(n.cppStandard=this.defaultCppStandard)}}writeToJson(){console.assert(this.propertiesFile),o.writeFileSync(this.propertiesFile.fsPath,JSON.stringify(this.configurationJson,null,4))}checkCppProperties(){let e=i.join(this.configFolder,"c_cpp_properties.json");o.stat(e,(t,n)=>{t?this.propertiesFile&&(this.propertiesFile=null,this.resetToDefaultSettings(!0),this.handleConfigurationChange()):n.mtime>this.configFileWatcherFallbackTime&&(this.propertiesFile||(this.propertiesFile=s.Uri.file(e)),this.handleConfigurationChange())})}dispose(){this.disposables.forEach(e=>e.dispose()),this.disposables=[],this.compileCommandFileWatchers.forEach(e=>e.close()),this.compileCommandFileWatchers=[],this.diagnosticCollection.dispose()}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(1),i=n(2),o=n(0),s=n(4),a={activeConfig:"activeConfig",compilerPath:"compilerPath",intelliSenseMode:"intelliSenseMode",includePath:"includePath",defines:"defines",cStandard:"cStandard",cppStandard:"cppStandard"};class c{constructor(){this.isIntelliSenseModeDefined=!1,this.settingsPanelActivated=new o.EventEmitter,this.configValuesChanged=new o.EventEmitter,this.disposable=void 0,this.disposablesPanel=void 0,this.configValues={name:void 0},this.disposable=o.Disposable.from(this.settingsPanelActivated,this.configValuesChanged)}createOrShow(e,t){const n=o.window.activeTextEditor?o.window.activeTextEditor.viewColumn:void 0;this.panel?this.panel.reveal(n,!1):(this.panel=o.window.createWebviewPanel(c.viewType,c.title,n||o.ViewColumn.One,{enableCommandUris:!0,enableScripts:!0,localResourceRoots:[o.Uri.file(s.extensionPath),o.Uri.file(r.join(s.extensionPath,"ui")),o.Uri.file(r.join(s.extensionPath,"out","ui"))]}),this.panel.iconPath=o.Uri.file(s.getExtensionFilePath("LanguageCCPP_color_128x.png")),this.disposablesPanel=o.Disposable.from(this.panel,this.panel.onDidDispose(this.onPanelDisposed,this),this.panel.onDidChangeViewState(this.onViewStateChanged,this),this.panel.webview.onDidReceiveMessage(this.onMessageReceived,this),o.window.onDidChangeWindowState(this.onWindowStateChanged,this)),this.panel.webview.html=this.getHtml(),this.updateWebview(e,t))}get SettingsPanelActivated(){return this.settingsPanelActivated.event}get ConfigValuesChanged(){return this.configValuesChanged.event}getLastValuesFromConfigUI(){return this.configValues}updateConfigUI(e,t){this.panel&&this.updateWebview(e,t)}updateErrors(e){this.panel&&this.panel.webview.postMessage({command:"updateErrors",errors:e})}dispose(){this.panel.dispose(),this.disposable&&this.disposable.dispose(),this.disposablesPanel&&this.disposablesPanel.dispose()}onPanelDisposed(){this.disposablesPanel&&(this.disposablesPanel.dispose(),this.panel=void 0)}updateWebview(e,t){this.configValues=Object.assign({},e),this.isIntelliSenseModeDefined=void 0!==this.configValues.intelliSenseMode,this.panel&&(this.panel.webview.postMessage({command:"updateConfig",config:this.configValues}),this.panel.webview.postMessage({command:"updateErrors",errors:t}))}onViewStateChanged(e){e.webviewPanel.active&&this.settingsPanelActivated.fire()}onWindowStateChanged(e){e.focused&&this.settingsPanelActivated.fire()}onMessageReceived(e){if(null!==e)switch(e.command){case"change":this.updateConfig(e)}}updateConfig(e){let t;switch(e.key){case a.activeConfig:this.configValues.name=e.value;break;case a.compilerPath:this.configValues.compilerPath=e.value;break;case a.includePath:t=e.value.split("\n"),this.configValues.includePath=t.filter(e=>e);break;case a.defines:t=e.value.split("\n"),this.configValues.defines=t.filter(e=>e);break;case a.intelliSenseMode:"${default}"!==e.value||this.isIntelliSenseModeDefined?this.configValues.intelliSenseMode=e.value:this.configValues.intelliSenseMode=void 0;break;case a.cStandard:this.configValues.cStandard=e.value;break;case a.cppStandard:this.configValues.cppStandard=e.value}this.configValuesChanged.fire()}getHtml(){let e;return e=(e=(e=i.readFileSync(s.getExtensionFilePath("ui/settings.html")).toString()).replace(/{{root}}/g,o.Uri.file(s.extensionPath).with({scheme:"vscode-resource"}).toString())).replace(/{{nonce}}/g,this.getNonce())}getNonce(){let e;const t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789";for(let n=0;n<32;n++)e+=t.charAt(Math.floor(Math.random()*t.length));return e}}c.viewType="settingsPanel",c.title="C/C++ Configurations",t.SettingsPanel=c},function(e,t,n){"use strict";const r=/[|\\{}()[\]^$+*?.-]/g;e.exports=(e=>{if("string"!=typeof e)throw new TypeError("Expected a string");return e.replace(r,"\\$&")})},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(1);t.createProtocolFilter=function(e,t){let n=(n,r)=>{t.ActiveClient===e&&e.notifyWhenReady(()=>r(n))},i=(n,r,i)=>t.ActiveClient===e?e.requestWhenReady(()=>i(n,r)):null,o=(n,r,i,o)=>t.ActiveClient===e?e.requestWhenReady(()=>o(n,r,i)):null,s=(n,r,i,o,s)=>t.ActiveClient===e?e.requestWhenReady(()=>s(n,r,i,o)):null;return{didOpen:(n,i)=>{if(t.checkOwnership(e,n)){if(e.TrackedDocuments.add(n),n.uri.path.endsWith(".C")){let t=r.basename(n.uri.fsPath)+"@"+n.uri.fsPath;e.addFileAssociations(t,!1)}e.provideCustomConfiguration(n).then(()=>{i(n)},()=>{i(n)})}},didChange:n,willSave:n,willSaveWaitUntil:(n,r)=>t.ActiveClient===e?e.requestWhenReady(()=>r(n)):Promise.resolve([]),didSave:n,didClose:(n,r)=>{t.ActiveClient===e&&(console.assert(e.TrackedDocuments.has(n)),e.TrackedDocuments.delete(n),e.notifyWhenReady(()=>r(n)))},provideCompletionItem:s,resolveCompletionItem:i,provideHover:(n,r,i,o)=>t.checkOwnership(e,n)?e.requestWhenReady(()=>o(n,r,i)):null,provideSignatureHelp:o,provideDefinition:o,provideReferences:s,provideDocumentHighlights:o,provideDocumentSymbols:i,provideWorkspaceSymbols:i,provideCodeActions:s,provideCodeLenses:i,resolveCodeLens:i,provideDocumentFormattingEdits:o,provideDocumentRangeFormattingEdits:s,provideOnTypeFormattingEdits:(n,r,i,o,s,a)=>t.ActiveClient===e?e.requestWhenReady(()=>a(n,r,i,o,s)):null,provideRenameEdits:s,provideDocumentLinks:i,resolveDocumentLink:i}}},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0});const r=n(0);t.DataBinding=class{constructor(e){this.valueChanged=new r.EventEmitter,this.isActive=!0,this.value=e,this.isActive=!0}get Value(){return this.value}set Value(e){e!==this.value&&(this.value=e,this.isActive&&this.valueChanged.fire(this.value))}get ValueChanged(){return this.valueChanged.event}activate(){this.isActive=!0,this.valueChanged.fire(this.value)}deactivate(){this.isActive=!1}dispose(){this.deactivate(),this.valueChanged.dispose()}}},function(e,t,n){var r=n(182),i=n(183);e.exports=function(e){if(!e)return[];"{}"===e.substr(0,2)&&(e="\\{\\}"+e.substr(2));return function e(t,n){var o=[];var s=i("{","}",t);if(!s||/\$$/.test(s.pre))return[t];var c=/^-?\d+\.\.-?\d+(?:\.\.-?\d+)?$/.test(s.body);var u=/^[a-zA-Z]\.\.[a-zA-Z](?:\.\.-?\d+)?$/.test(s.body);var d=c||u;var m=s.body.indexOf(",")>=0;if(!d&&!m)return s.post.match(/,.*\}/)?(t=s.pre+"{"+s.body+a+s.post,e(t)):[t];var v;if(d)v=s.body.split(/\.\./);else if(1===(v=function e(t){if(!t)return[""];var n=[];var r=i("{","}",t);if(!r)return t.split(",");var o=r.pre;var s=r.body;var a=r.post;var c=o.split(",");c[c.length-1]+="{"+s+"}";var u=e(a);a.length&&(c[c.length-1]+=u.shift(),c.push.apply(c,u));n.push.apply(n,c);return n}(s.body)).length&&1===(v=e(v[0],!1).map(h)).length){var C=s.post.length?e(s.post,!1):[""];return C.map(function(e){return s.pre+v[0]+e})}var y=s.pre;var C=s.post.length?e(s.post,!1):[""];var w;if(d){var b=l(v[0]),S=l(v[1]),_=Math.max(v[0].length,v[1].length),P=3==v.length?Math.abs(l(v[2])):1,x=f,k=S<b;k&&(P*=-1,x=g);var E=v.some(p);w=[];for(var T=b;x(T,S);T+=P){var I;if(u)"\\"===(I=String.fromCharCode(T))&&(I="");else if(I=String(T),E){var D=_-I.length;if(D>0){var R=new Array(D+1).join("0");I=T<0?"-"+R+I.slice(1):R+I}}w.push(I)}}else w=r(v,function(t){return e(t,!1)});for(var O=0;O<w.length;O++)for(var A=0;A<C.length;A++){var F=y+w[O]+C[A];(!n||d||F)&&o.push(F)}return o}(function(e){return e.split("\\\\").join(o).split("\\{").join(s).split("\\}").join(a).split("\\,").join(c).split("\\.").join(u)}(e),!0).map(d)};var o="\0SLASH"+Math.random()+"\0",s="\0OPEN"+Math.random()+"\0",a="\0CLOSE"+Math.random()+"\0",c="\0COMMA"+Math.random()+"\0",u="\0PERIOD"+Math.random()+"\0";function l(e){return parseInt(e,10)==e?parseInt(e,10):e.charCodeAt(0)}function d(e){return e.split(o).join("\\").split(s).join("{").split(a).join("}").split(c).join(",").split(u).join(".")}function h(e){return"{"+e+"}"}function p(e){return/^-?0\d/.test(e)}function f(e,t){return e<=t}function g(e,t){return e>=t}},function(e,t){e.exports=function(e,t){for(var r=[],i=0;i<e.length;i++){var o=t(e[i],i);n(o)?r.push.apply(r,o):r.push(o)}return r};var n=Array.isArray||function(e){return"[object Array]"===Object.prototype.toString.call(e)}},function(e,t,n){"use strict";function r(e,t,n){e instanceof RegExp&&(e=i(e,n)),t instanceof RegExp&&(t=i(t,n));var r=o(e,t,n);return r&&{start:r[0],end:r[1],pre:n.slice(0,r[0]),body:n.slice(r[0]+e.length,r[1]),post:n.slice(r[1]+t.length)}}function i(e,t){var n=t.match(e);return n?n[0]:null}function o(e,t,n){var r,i,o,s,a,c=n.indexOf(e),u=n.indexOf(t,c+1),l=c;if(c>=0&&u>0){for(r=[],o=n.length;l>=0&&!a;)l==c?(r.push(l),c=n.indexOf(e,l+1)):1==r.length?a=[r.pop(),u]:((i=r.pop())<o&&(o=i,s=u),u=n.indexOf(t,l+1)),l=c<u&&c>=0?c:u;r.length&&(a=[o,s])}return a}e.exports=r,r.range=o},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(0),i=n(4),o=50;let s=void 0;class a{constructor(e){this.previousCppSettings={},this.resource=e,this.collectSettings(()=>!0)}getUserModifiedSettings(){return this.collectSettings((e,t,n)=>!this.areEqual(t,n.inspect(e).defaultValue))}getChangedSettings(){return this.collectSettings((e,t)=>!(e in this.previousCppSettings&&this.areEqual(t,this.previousCppSettings[e])))}collectSettings(e){let t=r.workspace.getConfiguration("C_Cpp",this.resource),n={};for(let r in t){let i=this.getSetting(t,r);if(void 0===i)continue;if(i instanceof Object&&!(i instanceof Array)){for(let o in i){let i=r+"."+o,s=this.getSetting(t,i);if(void 0===s)continue;let a=this.filterAndSanitize(i,s,t,e);a&&a.key&&a.value&&(n[a.key]=a.value)}continue}let o=this.filterAndSanitize(r,i,t,e);o&&o.key&&o.value&&(n[o.key]=o.value)}return n}getSetting(e,t){if(void 0!==e.inspect(t).defaultValue){let n=e.get(t);if(n instanceof Object)return n;let r=i.packageJson.contributes.configuration.properties["C_Cpp."+t];if(r){let e=this.typeMatch(n,r.type);if(e){if("string"!==e)return n;let t=r.enum;return t&&-1===t.indexOf(n)?"<invalid>":n}}}}typeMatch(e,t){if(t)if(t instanceof Array)for(let n=0;n<t.length;n++){let r=t[n];if(r){if(typeof e===r)return r;if("array"===r&&e instanceof Array)return r;if("null"===r&&null===e)return r}}else if("string"==typeof t&&typeof e===t)return t}filterAndSanitize(e,t,n,r){if(r(e,t,n)){let r;switch(this.previousCppSettings[e]=t,e){case"clang_format_style":case"clang_format_fallbackStyle":{let n=e+"2";if(t)switch(String(t).toLowerCase()){case"visual studio":case"llvm":case"google":case"chromium":case"mozilla":case"webkit":case"file":case"none":r=String(this.previousCppSettings[e]);break;default:r="..."}else r="null";e=n;break}case"commentContinuationPatterns":r=this.areEqual(t,n.inspect(e).defaultValue)?"<default>":"...";break;default:r="clang_format_path"===e||"intelliSenseCachePath"===e||e.startsWith("default.")?this.areEqual(t,n.inspect(e).defaultValue)?"<default>":"...":String(this.previousCppSettings[e])}return r&&r.length>o&&(r=r.substr(0,o)+"..."),{key:e,value:r}}}areEqual(e,t){return e instanceof Object&&t instanceof Object?JSON.stringify(e)===JSON.stringify(t):e===t}}t.SettingsTracker=a,t.getTracker=function(e){return s||(s=new a(e)),s}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(0),i=n(23),o=n(27),s=/[\\\^\$\*\+\?\{\}\(\)\.\!\=\|\[\]\ \/]/;function a(e){let t="";for(let n of e)n.match(s)?t+=`\\${n}`:t+=n;return t}function c(e){if(e&&e.startsWith("/*")){return`^\\s*\\/\\*${a(e.substr(2))}(?!\\/)([^\\*]|\\*(?!\\/))*$`}}function u(e){if(e){let t=c(e.begin);if(t)return{beforeText:new RegExp(t),afterText:new RegExp("^\\s*\\*\\/$"),action:{indentAction:r.IndentAction.IndentOutdent,appendText:e.continue?e.continue:""}}}}function l(e){if(e){let t=c(e.begin);if(t)return{beforeText:new RegExp(t),action:{indentAction:r.IndentAction.None,appendText:e.continue?e.continue:""}}}}function d(e){if(e){let t=function(e){if(e){let t=a(e.trimRight());if(t)return`^\\s*${t}(${a(e.substr(e.trimRight().length))}([^\\*]|\\*(?!\\/))*)?$`}}(e.continue);if(t)return{beforeText:new RegExp(t),action:{indentAction:r.IndentAction.None,appendText:e.continue.trimLeft()}}}}function h(e){if(e){let t=function(e){if(e){let t=a(e.trimRight().trimLeft());if(t)return`^\\s*${t}[^/]*\\*\\/\\s*$`}}(e.continue);if(t)return{beforeText:new RegExp(t),action:{indentAction:r.IndentAction.None,removeText:e.continue.length-e.continue.trimLeft().length}}}}function p(e){if(e){let t=function(e){if(e&&(e=e.trimRight()))return e.endsWith("*")&&(e=e.substr(0,e.length-1)),`^\\s*${a(e.trimRight())}\\*\\/\\s*$`}(e.continue);if(t)return{beforeText:new RegExp(t),action:{indentAction:r.IndentAction.None,removeText:e.continue.length-e.continue.trimLeft().length}}}}function f(e){if(e){let t=function(e){if(e)return`^\\s*${a(e.trimRight())}.*$`}(e.begin);if(t)return{beforeText:new RegExp(t),action:{indentAction:r.IndentAction.None,appendText:e.continue.trimLeft()}}}}function g(e){if(e){let t=function(e){if(e)return`^\\s*${a(e.trimRight())}.+$`}(e.continue);if(t)return{beforeText:new RegExp(t),action:{indentAction:r.IndentAction.None,appendText:e.continue.trimLeft()}}}}function m(e){if(e){let t=function(e){if(e){let t=a(e),n=a(e.trimRight());return t!==n&&(t=`(${t}|${n})`),`^\\s*${t}$`}}(e.continue);if(t)return{beforeText:new RegExp(t),action:{indentAction:r.IndentAction.None,removeText:e.continue.length-e.continue.trimLeft().length}}}}function v(e,t){let n=[],r=[],i=!1,s=[],a=[],c=[];return t.forEach(t=>{let o="string"==typeof t?{begin:t,continue:t.startsWith("/*")?" * ":t}:t,v=function(e,t){if(e&&e.begin&&e.begin.startsWith("/*")&&("c"===t||"cpp"===t))return{begin:[u(e),l(e)],continue:[d(e)],end:[p(e),h(e)]};if(e&&e.begin&&e.begin.startsWith("//")&&"cpp"===t)return{begin:e.begin===e.continue?[]:[f(e)],continue:[g(e)],end:[m(e)]};return{begin:[],continue:[],end:[]}}(o,e);n.indexOf(o.begin)<0?(v.begin&&v.begin.length>0&&(s=s.concat(v.begin)),n.push(o.begin)):i=!0,r.indexOf(o.continue)<0&&(v.continue&&v.continue.length>0&&(a=a.concat(v.continue)),v.end&&v.end.length>0&&(c=c.concat(v.end)),r.push(o.continue))}),i&&o.getOutputChannel().appendLine("Duplicate multiline comment patterns detected."),{onEnterRules:s.concat(a).concat(c).filter(e=>e)}}t.getLanguageConfig=function(e,t){return v(e,new i.CppSettings(t).commentContinuationPatterns)},t.getLanguageConfigFromPatterns=v},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0});const r=n(2),i=n(3);class o{constructor(e,t){this.name=e,this.version=t}static GetDistroInformation(){let e;return e=o.getDistroInformationFromFile("/etc/os-release").catch(()=>o.getDistroInformationFromFile("/usr/lib/os-release")).catch(()=>Promise.resolve(new o("unknown","unknown")))}static getDistroInformationFromFile(e){return new Promise((t,n)=>{r.readFile(e,"utf8",(e,r)=>{e?n(e):t(o.getDistroInformation(r))})})}static getDistroInformation(e){let t="unknown",n="unknown",r=e.split(i.EOL);for(let e=0;e<r.length;e++){let i=r[e].split("=");2===i.length&&("ID"===i[0]?t=i[1]:"VERSION_ID"===i[0]&&(n=i[1]))}return new o(t,n)}}t.LinuxDistribution=o},function(e,t,n){e.exports=h,h.sync=v;var r=n(31),i=n(1),o=n(2),s=n(63),a=parseInt("666",8),c={nosort:!0,silent:!0},u=0,l="win32"===process.platform;function d(e){["unlink","chmod","stat","lstat","rmdir","readdir"].forEach(function(t){e[t]=e[t]||o[t],e[t+="Sync"]=e[t]||o[t]}),e.maxBusyTries=e.maxBusyTries||3,e.emfileWait=e.emfileWait||1e3,!1===e.glob&&(e.disableGlob=!0),e.disableGlob=e.disableGlob||!1,e.glob=e.glob||c}function h(e,t,n){"function"==typeof t&&(n=t,t={}),r(e,"rimraf: missing path"),r.equal(typeof e,"string","rimraf: path should be a string"),r.equal(typeof n,"function","rimraf: callback function required"),r(t,"rimraf: invalid options argument provided"),r.equal(typeof t,"object","rimraf: options should be object"),d(t);var i=0,o=null,a=0;if(t.disableGlob||!s.hasMagic(e))return c(null,[e]);function c(e,r){return e?n(e):0===(a=r.length)?n():void r.forEach(function(e){p(e,t,function r(s){if(s){if(("EBUSY"===s.code||"ENOTEMPTY"===s.code||"EPERM"===s.code)&&i<t.maxBusyTries)return i++,setTimeout(function(){p(e,t,r)},100*i);if("EMFILE"===s.code&&u<t.emfileWait)return setTimeout(function(){p(e,t,r)},u++);"ENOENT"===s.code&&(s=null)}u=0,function(e){o=o||e,0==--a&&n(o)}(s)})})}t.lstat(e,function(n,r){if(!n)return c(null,[e]);s(e,t.glob,c)})}function p(e,t,n){r(e),r(t),r("function"==typeof n),t.lstat(e,function(r,i){return r&&"ENOENT"===r.code?n(null):(r&&"EPERM"===r.code&&l&&f(e,t,r,n),i&&i.isDirectory()?m(e,t,r,n):void t.unlink(e,function(r){if(r){if("ENOENT"===r.code)return n(null);if("EPERM"===r.code)return l?f(e,t,r,n):m(e,t,r,n);if("EISDIR"===r.code)return m(e,t,r,n)}return n(r)}))})}function f(e,t,n,i){r(e),r(t),r("function"==typeof i),n&&r(n instanceof Error),t.chmod(e,a,function(r){r?i("ENOENT"===r.code?null:n):t.stat(e,function(r,o){r?i("ENOENT"===r.code?null:n):o.isDirectory()?m(e,t,n,i):t.unlink(e,i)})})}function g(e,t,n){r(e),r(t),n&&r(n instanceof Error);try{t.chmodSync(e,a)}catch(e){if("ENOENT"===e.code)return;throw n}try{var i=t.statSync(e)}catch(e){if("ENOENT"===e.code)return;throw n}i.isDirectory()?C(e,t,n):t.unlinkSync(e)}function m(e,t,n,o){r(e),r(t),n&&r(n instanceof Error),r("function"==typeof o),t.rmdir(e,function(s){!s||"ENOTEMPTY"!==s.code&&"EEXIST"!==s.code&&"EPERM"!==s.code?s&&"ENOTDIR"===s.code?o(n):o(s):function(e,t,n){r(e),r(t),r("function"==typeof n),t.readdir(e,function(r,o){if(r)return n(r);var s,a=o.length;if(0===a)return t.rmdir(e,n);o.forEach(function(r){h(i.join(e,r),t,function(r){if(!s)return r?n(s=r):void(0==--a&&t.rmdir(e,n))})})})}(e,t,o)})}function v(e,t){var n;if(d(t=t||{}),r(e,"rimraf: missing path"),r.equal(typeof e,"string","rimraf: path should be a string"),r(t,"rimraf: missing options"),r.equal(typeof t,"object","rimraf: options should be object"),t.disableGlob||!s.hasMagic(e))n=[e];else try{t.lstatSync(e),n=[e]}catch(r){n=s.sync(e,t.glob)}if(n.length)for(var i=0;i<n.length;i++){e=n[i];try{var o=t.lstatSync(e)}catch(n){if("ENOENT"===n.code)return;"EPERM"===n.code&&l&&g(e,t,n)}try{o&&o.isDirectory()?C(e,t,null):t.unlinkSync(e)}catch(n){if("ENOENT"===n.code)return;if("EPERM"===n.code)return l?g(e,t,n):C(e,t,n);if("EISDIR"!==n.code)throw n;C(e,t,n)}}}function C(e,t,n){r(e),r(t),n&&r(n instanceof Error);try{t.rmdirSync(e)}catch(o){if("ENOENT"===o.code)return;if("ENOTDIR"===o.code)throw n;"ENOTEMPTY"!==o.code&&"EEXIST"!==o.code&&"EPERM"!==o.code||function(e,t){r(e),r(t),t.readdirSync(e).forEach(function(n){v(i.join(e,n),t)});var n=l?100:1,o=0;for(;;){var s=!0;try{var a=t.rmdirSync(e,t);return s=!1,a}finally{if(++o<n&&s)continue}}}(e,t)}}},function(e,t,n){var r=n(1),i="win32"===process.platform,o=n(2),s=process.env.NODE_DEBUG&&/fs/.test(process.env.NODE_DEBUG);function a(e){return"function"==typeof e?e:function(){var e;if(s){var t=new Error;e=function(e){e&&(t.message=e.message,n(e=t))}}else e=n;return e;function n(e){if(e){if(process.throwDeprecation)throw e;if(!process.noDeprecation){var t="fs: missing callback "+(e.stack||e.message);process.traceDeprecation?console.trace(t):console.error(t)}}}}()}r.normalize;if(i)var c=/(.*?)(?:[\/\\]+|$)/g;else c=/(.*?)(?:[\/]+|$)/g;if(i)var u=/^(?:[a-zA-Z]:|[\\\/]{2}[^\\\/]+[\\\/][^\\\/]+)?[\\\/]*/;else u=/^[\/]*/;t.realpathSync=function(e,t){if(e=r.resolve(e),t&&Object.prototype.hasOwnProperty.call(t,e))return t[e];var n,s,a,l,d=e,h={},p={};function f(){var t=u.exec(e);n=t[0].length,s=t[0],a=t[0],l="",i&&!p[a]&&(o.lstatSync(a),p[a]=!0)}for(f();n<e.length;){c.lastIndex=n;var g=c.exec(e);if(l=s,s+=g[0],a=l+g[1],n=c.lastIndex,!(p[a]||t&&t[a]===a)){var m;if(t&&Object.prototype.hasOwnProperty.call(t,a))m=t[a];else{var v=o.lstatSync(a);if(!v.isSymbolicLink()){p[a]=!0,t&&(t[a]=a);continue}var C=null;if(!i){var y=v.dev.toString(32)+":"+v.ino.toString(32);h.hasOwnProperty(y)&&(C=h[y])}null===C&&(o.statSync(a),C=o.readlinkSync(a)),m=r.resolve(l,C),t&&(t[a]=m),i||(h[y]=C)}e=r.resolve(m,e.slice(n)),f()}}return t&&(t[d]=e),e},t.realpath=function(e,t,n){if("function"!=typeof n&&(n=a(t),t=null),e=r.resolve(e),t&&Object.prototype.hasOwnProperty.call(t,e))return process.nextTick(n.bind(null,null,t[e]));var s,l,d,h,p=e,f={},g={};function m(){var t=u.exec(e);s=t[0].length,l=t[0],d=t[0],h="",i&&!g[d]?o.lstat(d,function(e){if(e)return n(e);g[d]=!0,v()}):process.nextTick(v)}function v(){if(s>=e.length)return t&&(t[p]=e),n(null,e);c.lastIndex=s;var r=c.exec(e);return h=l,l+=r[0],d=h+r[1],s=c.lastIndex,g[d]||t&&t[d]===d?process.nextTick(v):t&&Object.prototype.hasOwnProperty.call(t,d)?w(t[d]):o.lstat(d,C)}function C(e,r){if(e)return n(e);if(!r.isSymbolicLink())return g[d]=!0,t&&(t[d]=d),process.nextTick(v);if(!i){var s=r.dev.toString(32)+":"+r.ino.toString(32);if(f.hasOwnProperty(s))return y(null,f[s],d)}o.stat(d,function(e){if(e)return n(e);o.readlink(d,function(e,t){i||(f[s]=t),y(e,t)})})}function y(e,i,o){if(e)return n(e);var s=r.resolve(h,i);t&&(t[o]=s),w(s)}function w(t){e=r.resolve(t,e.slice(s)),m()}m()}},function(e,t,n){try{var r=n(15);if("function"!=typeof r.inherits)throw"";e.exports=r.inherits}catch(t){e.exports=n(190)}},function(e,t){"function"==typeof Object.create?e.exports=function(e,t){e.super_=t,e.prototype=Object.create(t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}})}:e.exports=function(e,t){e.super_=t;var n=function(){};n.prototype=t.prototype,e.prototype=new n,e.prototype.constructor=e}},function(e,t,n){e.exports=f,f.GlobSync=g;var r=n(2),i=n(64),o=n(33),s=(o.Minimatch,n(63).Glob,n(15),n(1)),a=n(31),c=n(44),u=n(65),l=(u.alphasort,u.alphasorti,u.setopts),d=u.ownProp,h=u.childrenIgnored,p=u.isIgnored;function f(e,t){if("function"==typeof t||3===arguments.length)throw new TypeError("callback provided to sync glob\nSee: https://github.com/isaacs/node-glob/issues/167");return new g(e,t).found}function g(e,t){if(!e)throw new Error("must provide pattern");if("function"==typeof t||3===arguments.length)throw new TypeError("callback provided to sync glob\nSee: https://github.com/isaacs/node-glob/issues/167");if(!(this instanceof g))return new g(e,t);if(l(this,e,t),this.noprocess)return this;var n=this.minimatch.set.length;this.matches=new Array(n);for(var r=0;r<n;r++)this._process(this.minimatch.set[r],r,!1);this._finish()}g.prototype._finish=function(){if(a(this instanceof g),this.realpath){var e=this;this.matches.forEach(function(t,n){var r=e.matches[n]=Object.create(null);for(var o in t)try{o=e._makeAbs(o),r[i.realpathSync(o,e.realpathCache)]=!0}catch(t){if("stat"!==t.syscall)throw t;r[e._makeAbs(o)]=!0}})}u.finish(this)},g.prototype._process=function(e,t,n){a(this instanceof g);for(var r,i=0;"string"==typeof e[i];)i++;switch(i){case e.length:return void this._processSimple(e.join("/"),t);case 0:r=null;break;default:r=e.slice(0,i).join("/")}var s,u=e.slice(i);null===r?s=".":c(r)||c(e.join("/"))?(r&&c(r)||(r="/"+r),s=r):s=r;var l=this._makeAbs(s);h(this,s)||(u[0]===o.GLOBSTAR?this._processGlobStar(r,s,l,u,t,n):this._processReaddir(r,s,l,u,t,n))},g.prototype._processReaddir=function(e,t,n,r,i,o){var a=this._readdir(n,o);if(a){for(var c=r[0],u=!!this.minimatch.negate,l=c._glob,d=this.dot||"."===l.charAt(0),h=[],p=0;p<a.length;p++){if("."!==(m=a[p]).charAt(0)||d)(u&&!e?!m.match(c):m.match(c))&&h.push(m)}var f=h.length;if(0!==f)if(1!==r.length||this.mark||this.stat){r.shift();for(p=0;p<f;p++){var g;m=h[p];g=e?[e,m]:[m],this._process(g.concat(r),i,o)}}else{this.matches[i]||(this.matches[i]=Object.create(null));for(var p=0;p<f;p++){var m=h[p];e&&(m="/"!==e.slice(-1)?e+"/"+m:e+m),"/"!==m.charAt(0)||this.nomount||(m=s.join(this.root,m)),this._emitMatch(i,m)}}}},g.prototype._emitMatch=function(e,t){if(!p(this,t)){var n=this._makeAbs(t);if(this.mark&&(t=this._mark(t)),this.absolute&&(t=n),!this.matches[e][t]){if(this.nodir){var r=this.cache[n];if("DIR"===r||Array.isArray(r))return}this.matches[e][t]=!0,this.stat&&this._stat(t)}}},g.prototype._readdirInGlobStar=function(e){if(this.follow)return this._readdir(e,!1);var t,n;try{n=r.lstatSync(e)}catch(e){if("ENOENT"===e.code)return null}var i=n&&n.isSymbolicLink();return this.symlinks[e]=i,i||!n||n.isDirectory()?t=this._readdir(e,!1):this.cache[e]="FILE",t},g.prototype._readdir=function(e,t){if(t&&!d(this.symlinks,e))return this._readdirInGlobStar(e);if(d(this.cache,e)){var n=this.cache[e];if(!n||"FILE"===n)return null;if(Array.isArray(n))return n}try{return this._readdirEntries(e,r.readdirSync(e))}catch(t){return this._readdirError(e,t),null}},g.prototype._readdirEntries=function(e,t){if(!this.mark&&!this.stat)for(var n=0;n<t.length;n++){var r=t[n];r="/"===e?e+r:e+"/"+r,this.cache[r]=!0}return this.cache[e]=t,t},g.prototype._readdirError=function(e,t){switch(t.code){case"ENOTSUP":case"ENOTDIR":var n=this._makeAbs(e);if(this.cache[n]="FILE",n===this.cwdAbs){var r=new Error(t.code+" invalid cwd "+this.cwd);throw r.path=this.cwd,r.code=t.code,r}break;case"ENOENT":case"ELOOP":case"ENAMETOOLONG":case"UNKNOWN":this.cache[this._makeAbs(e)]=!1;break;default:if(this.cache[this._makeAbs(e)]=!1,this.strict)throw t;this.silent||console.error("glob error",t)}},g.prototype._processGlobStar=function(e,t,n,r,i,o){var s=this._readdir(n,o);if(s){var a=r.slice(1),c=e?[e]:[],u=c.concat(a);this._process(u,i,!1);var l=s.length;if(!this.symlinks[n]||!o)for(var d=0;d<l;d++){if("."!==s[d].charAt(0)||this.dot){var h=c.concat(s[d],a);this._process(h,i,!0);var p=c.concat(s[d],r);this._process(p,i,!0)}}}},g.prototype._processSimple=function(e,t){var n=this._stat(e);if(this.matches[t]||(this.matches[t]=Object.create(null)),n){if(e&&c(e)&&!this.nomount){var r=/[\/\\]$/.test(e);"/"===e.charAt(0)?e=s.join(this.root,e):(e=s.resolve(this.root,e),r&&(e+="/"))}"win32"===process.platform&&(e=e.replace(/\\/g,"/")),this._emitMatch(t,e)}},g.prototype._stat=function(e){var t=this._makeAbs(e),n="/"===e.slice(-1);if(e.length>this.maxLength)return!1;if(!this.stat&&d(this.cache,t)){var i=this.cache[t];if(Array.isArray(i)&&(i="DIR"),!n||"DIR"===i)return i;if(n&&"FILE"===i)return!1}var o=this.statCache[t];if(!o){var s;try{s=r.lstatSync(t)}catch(e){if(e&&("ENOENT"===e.code||"ENOTDIR"===e.code))return this.statCache[t]=!1,!1}if(s&&s.isSymbolicLink())try{o=r.statSync(t)}catch(e){o=s}else o=s}this.statCache[t]=o;i=!0;return o&&(i=o.isDirectory()?"DIR":"FILE"),this.cache[t]=this.cache[t]||i,(!n||"FILE"!==i)&&i},g.prototype._mark=function(e){return u.mark(this,e)},g.prototype._makeAbs=function(e){return u.makeAbs(this,e)}},function(e,t,n){var r=n(66),i=Object.create(null),o=n(67);e.exports=r(function(e,t){return i[e]?(i[e].push(t),null):(i[e]=[t],function(e){return o(function t(){var n=i[e],r=n.length,o=function(e){for(var t=e.length,n=[],r=0;r<t;r++)n[r]=e[r];return n}(arguments);try{for(var s=0;s<r;s++)n[s].apply(null,o)}finally{n.length>r?(n.splice(0,r),process.nextTick(function(){t.apply(null,o)})):delete i[e]}})}(e))})},function(e,t,n){"use strict";var r=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))(function(i,o){function s(e){try{c(r.next(e))}catch(e){o(e)}}function a(e){try{c(r.throw(e))}catch(e){o(e)}}function c(e){e.done?i(e.value):new n(function(t){t(e.value)}).then(s,a)}c((r=r.apply(e,t||[])).next())})};Object.defineProperty(t,"__esModule",{value:!0});const i=n(68),o=n(4),s=n(34),a=!1;function c(e){return e&&e.name&&"string"==typeof e.name&&function(e){return e instanceof Array&&e.every(e=>(function(e){return e&&e.name&&"string"==typeof e.name&&e.browser_download_url&&"string"==typeof e.browser_download_url})(e))}(e.assets)&&e.assets.length>=4}t.getTargetBuildInfo=function(e){return r(this,void 0,void 0,function*(){return function(){return r(this,void 0,void 0,function*(){if(yield function(){return r(this,void 0,void 0,function*(){const e=yield function(){return r(this,void 0,void 0,function*(){const e=yield o.downloadFileToStr("https://api.github.com/rate_limit",{"User-Agent":"vscode-cpptools"}).catch(e=>{if(e&&e.code&&"ENOENT"!==e.code)throw new Error("Failed to download rate limit JSON")});if(!e)return Promise.resolve(null);let t;try{t=JSON.parse(e)}catch(e){throw new Error("Failed to parse rate limit JSON")}if((n=t)&&function(e){return e&&o.isNumber(e.remaining)}(n.rate))return Promise.resolve(t);throw new Error("Rate limit JSON is not of type RateLimit");var n})}();return e&&e.rate.remaining<=0})}())throw new Error("Failed to stay within GitHub API rate limit");const e=yield o.downloadFileToStr("https://api.github.com/repos/Microsoft/vscode-cpptools/releases",{"User-Agent":"vscode-cpptools"}).catch(e=>{if(e&&e.code&&"ENOENT"!==e.code)throw new Error("Failed to download release JSON")});if(!e)return Promise.resolve(null);let t;try{t=JSON.parse(e)}catch(e){throw new Error("Failed to parse release JSON")}if(function(e){if(!(e&&e instanceof Array&&0!==e.length))return!1;for(let t=0;t<5&&t<e.length;t++)if(!c(e[t]))return!1;return!0}(t))return t;throw new Error("Release JSON is not of type Build[]")})}().then(t=>{if(!t||0===t.length)return;const n=new i.PackageVersion(o.packageJson.version),r=new i.PackageVersion(t[0].name);return a||!(n.isGreaterThan(r)||n.suffix&&"insiders"!==n.suffix)?function(e,t,n){let r,o;if("Insiders"===n)r=((e,t)=>a||t.isGreaterThan(e)),o=(e=>!0);else{if("Default"!==n)throw new Error("Incorrect updateChannel setting provided");r=function(e,t){return e.isGreaterThan(t)},o=(e=>-1===e.name.indexOf("-"))}const s=e.find(e=>o(e));if(!s)throw new Error("Failed to determine installation candidate");const c=new i.PackageVersion(s.name);if(r(t,c))return s}(t,n,e):void 0}).then(e=>r(this,void 0,void 0,function*(){if(!e)return Promise.resolve(void 0);try{const t=function(e){const t=function(e){switch(e.platform){case"win32":return"cpptools-win32.vsix";case"darwin":return"cpptools-osx.vsix";default:switch(e.architecture){case"x86_64":return"cpptools-linux.vsix";case"x86":case"i386":case"i686":return"cpptools-linux32.vsix"}}}(e);if(!t)throw new Error("Failed to match VSIX name for: "+e.platform+":"+e.architecture);return t}(yield s.PlatformInformation.GetPlatformInformation());return{downloadUrl:function(e,t){const n=e.assets.find(e=>e.name===t).browser_download_url;if(!n)throw new Error("Failed to find VSIX: "+t+" in build: "+e.name);return n}(e,t),name:e.name}}catch(e){return Promise.reject(e)}}))})}},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0});const r=n(4),i=n(71),o=n(195),s=n(72),a=n(2),c=n(3),u=n(1),l=n(4),d=n(0);t.AttachPicker=class{constructor(e){this.attachItemsProvider=e}ShowAttachEntries(){return l.isExtensionReady().then(e=>{if(e)return o.showQuickPick(()=>this.attachItemsProvider.getAttachItems());l.displayExtensionNotReadyPrompt()})}};class h{constructor(){this._channel=null,this._channel=d.window.createOutputChannel("remote-attach")}ShowAttachEntries(e){return l.isExtensionReady().then(t=>{if(t){this._channel.clear();let t=e?e.pipeTransport:null;if(null===t)return Promise.reject(new Error("Chosen debug configuration does not contain pipeTransport"));let n=null;if("win32"===c.platform()&&t.pipeProgram&&!a.existsSync(t.pipeProgram)){const r=t.pipeProgram.toLowerCase().trim(),i=s.ArchType[process.arch];if(a.existsSync(e.pipeTransport.pipeProgram)||(n=s.ArchitectureReplacer.checkAndReplaceWSLPipeProgram(r,i)),!n&&e.pipeTransport.pipeCwd){const t=e.pipeTransport.pipeCwd.toLowerCase().trim(),o=u.join(t,r);a.existsSync(o)||(n=s.ArchitectureReplacer.checkAndReplaceWSLPipeProgram(o,i))}}n||(n=t.pipeProgram);let r=t.pipeArgs,i=`"${n}" ${h.createArgumentList(r)}`;return this.getRemoteOSAndProcesses(i).then(e=>{return d.window.showQuickPick(e,{matchOnDetail:!0,matchOnDescription:!0,placeHolder:"Select the process to attach to"}).then(e=>e?e.id:Promise.reject(new Error("Process not selected.")))})}l.displayExtensionNotReadyPrompt()})}getRemoteOSAndProcesses(e){const t=`sh -c "uname && if [ $(uname) = \\"Linux\\" ] ; then ${i.PsProcessParser.psLinuxCommand} ; elif [ $(uname) = \\"Darwin\\" ] ; `+`then ${i.PsProcessParser.psDarwinCommand}; fi"`;return r.execChildProcess(`${e} '${t}'`,null,this._channel).then(e=>{let t=e.split(/\r?\n/);if(0===t.length)return Promise.reject(new Error("Pipe transport failed to get OS and processes."));{let e=t[0].replace(/[\r\n]+/g,"");if("Linux"!==e&&"Darwin"!==e)return Promise.reject(new Error(`Operating system "${e}" not supported.`));if(1===t.length)return Promise.reject(new Error("Transport attach could not obtain processes list."));{let e=t.slice(1);return i.PsProcessParser.ParseProcessFromPsArray(e).sort((e,t)=>{if(void 0===e.name)return void 0===t.name?0:1;if(void 0===t.name)return-1;let n=e.name.toLowerCase(),r=t.name.toLowerCase();return n===r?0:n<r?-1:1}).map(e=>e.toAttachItem())}}})}static createArgumentList(e){let t="";for(let n of e)t&&(t+=" "),t+=`"${n}"`;return t}}t.RemoteAttachPicker=h},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0});const r=n(4),i=n(0);class o{get iconPath(){const e=r.getExtensionFilePath("assets/Refresh_inverse.svg"),t=r.getExtensionFilePath("assets/Refresh.svg");return{dark:i.Uri.file(e),light:i.Uri.file(t)}}get tooltip(){return"Refresh process list"}}t.showQuickPick=function(e){return e().then(t=>new Promise((n,r)=>{let s=i.window.createQuickPick();s.title="Attach to process",s.canSelectMany=!1,s.matchOnDescription=!0,s.matchOnDetail=!0,s.placeholder="Select the process to attach to",s.items=t,s.buttons=[new o];let a=[];s.onDidTriggerButton(t=>{e().then(e=>s.items=e)},void 0,a),s.onDidAccept(()=>{1!==s.selectedItems.length&&r(new Error("Process not selected"));let e=s.selectedItems[0].id;a.forEach(e=>e.dispose()),s.dispose(),n(e)},void 0,a),s.onDidHide(()=>{a.forEach(e=>e.dispose()),s.dispose(),r(new Error("Process not selected."))},void 0,a),s.show()}))}},function(e,t,n){var r=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))(function(i,o){function s(e){try{c(r.next(e))}catch(e){o(e)}}function a(e){try{c(r.throw(e))}catch(e){o(e)}}function c(e){e.done?i(e.value):new n(function(t){t(e.value)}).then(s,a)}c((r=r.apply(e,t||[])).next())})};Object.defineProperty(t,"__esModule",{value:!0});const i=n(72),o=n(3),s=n(1),a=n(0),c=n(21),u=n(4),l=n(2),d=n(8),h=n(70),p=n(197),f=n(210),g=n(34),m=n(198);function v(e){return"(gdb) Launch"===e||"(lldb) Launch"===e||"(Windows) Launch"===e}t.QuickPickConfigurationProvider=class{constructor(e){this.underlyingProvider=e}provideDebugConfigurations(e,t){return r(this,void 0,void 0,function*(){const n=yield this.underlyingProvider.provideDebugConfigurations(e,t),r=n.find(e=>v(e.name));console.assert(r);const i=a.window.activeTextEditor;if(!i||!u.fileIsCOrCppSource(i.document.fileName)||n.length<=1)return[r];const o=n.map(e=>{let t={label:e.name,configuration:e};return v(t.label)&&(t.label="Default Configuration"),t}),s=yield a.window.showQuickPick(o,{placeHolder:"Select a configuration"});if(!s)throw new Error;if(s.label.startsWith("cl.exe")&&(!process.env.DevEnvDir||0===process.env.DevEnvDir.length))throw a.window.showErrorMessage("cl.exe build and debug is only usable when VS Code is run from the Developer Command Prompt for VS."),new Error;if(-1!==s.label.indexOf(h.buildAndDebugActiveFileStr())&&s.configuration.preLaunchTask)try{yield u.ensureBuildTaskExists(s.configuration.preLaunchTask),yield a.debug.startDebugging(e,s.configuration),d.logDebuggerEvent("buildAndDebug",{success:"true"})}catch(e){d.logDebuggerEvent("buildAndDebug",{success:"false"})}return[s.configuration]})}resolveDebugConfiguration(e,t,n){return this.underlyingProvider.resolveDebugConfiguration(e,t,n)}};class C{constructor(e,t){this.provider=e,this.type=t}provideDebugConfigurations(e,t){return r(this,void 0,void 0,function*(){let e=yield c.getBuildTasks(!0);if(0===e.length)return Promise.resolve(this.provider.getInitialConfigurations(this.type));const t=this.provider.getInitialConfigurations(this.type).find(e=>v(e.name));console.assert(t,"Could not find default debug configuration.");const n=(yield g.PlatformInformation.GetPlatformInformation()).platform;e=e.filter(e=>{if("(Windows) Launch"===t.name){if(e.name.startsWith("cl.exe"))return!0}else if(!e.name.startsWith("cl.exe"))return!0;return!1});let i=yield Promise.all(e.map(e=>r(this,void 0,void 0,function*(){const r=e.definition,i=s.basename(r.compilerPath);let o=Object.assign({},t);o.name=i+h.buildAndDebugActiveFileStr(),o.preLaunchTask=e.name,o.externalConsole=!1;const a=s.join("${fileDirname}","${fileBasenameNoExtension}");return o.program="win32"===n?a+".exe":a,new Promise(e=>{if("darwin"===n)return e(o);{let t;if(i.startsWith("clang")){o.MIMode="lldb";const e=i.indexOf("-"),n=-1===e?"":i.substr(e);t="lldb-mi"+n}else{if("cl.exe"===i)return o.miDebuggerPath=void 0,o.type="cppvsdbg",e(o);t="gdb"}"win32"===n&&(t+=".exe");const a=s.dirname(r.compilerPath),c=s.join(a,t);l.stat(c,(n,r)=>(!n&&r&&r.isFile?o.miDebuggerPath=c:o.miDebuggerPath=s.join("/usr","bin",t),e(o)))}})})));return i.push(t),i})}resolveDebugConfiguration(e,t,n){if(t){if("cppvsdbg"===t.type){if("win32"!==o.platform())return void a.window.showErrorMessage("Debugger of type: 'cppvsdbg' is only available on Windows. Use type: 'cppdbg' on the current OS platform.");if(!t.enableDebugHeap){const e={name:"_NO_DEBUG_HEAP",value:"1"};t.environment&&u.isArray(t.environment)?t.environment.push(e):t.environment=[e]}if(t.envFile)try{const n=m.ParsedEnvironmentFile.CreateFromFile(t.envFile.replace(/\${workspaceFolder}/g,e.uri.path),t.environment);n.Warning&&C.showFileWarningAsync(n.Warning,t.envFile),t.environment=n.Env,delete t.envFile}catch(e){throw new Error("Can't parse envFile "+t.envFile)}}if("win32"===o.platform()&&t.pipeTransport&&t.pipeTransport.pipeProgram){let e=null;const n=t.pipeTransport.pipeProgram.toLowerCase().trim();if(!(e=i.ArchitectureReplacer.checkAndReplaceWSLPipeProgram(n,i.ArchType.ia32))&&!s.isAbsolute(n)&&t.pipeTransport.pipeCwd){const r=t.pipeTransport.pipeCwd.toLowerCase().trim(),o=s.join(r,n);e=i.ArchitectureReplacer.checkAndReplaceWSLPipeProgram(o,i.ArchType.ia32)}e&&(t.pipeTransport.pipeProgram=e)}}return t&&t.type?t:null}static showFileWarningAsync(e,t){return r(this,void 0,void 0,function*(){const n={title:"Open envFile"};let r=yield a.window.showWarningMessage(e,n);if(r&&r.title===n.title){let e=yield a.workspace.openTextDocument(t);e&&a.window.showTextDocument(e)}})}}t.CppVsDbgConfigurationProvider=class extends C{constructor(e){super(e,p.DebuggerType.cppvsdbg)}};t.CppDbgConfigurationProvider=class extends C{constructor(e){super(e,p.DebuggerType.cppdbg)}};t.ConfigurationAssetProviderFactory=class{static getConfigurationProvider(){switch(o.platform()){case"win32":return new w;case"darwin":return new b;case"linux":return new S;default:throw new Error("Unexpected OS type")}}};class y{getInitialConfigurations(e){let t=[];return this.configurations.forEach(e=>{t.push(e.GetLaunchConfiguration())}),t.filter(t=>t.debuggerType===e&&t.isInitialConfiguration).map(e=>JSON.parse(e.bodyText))}getConfigurationSnippets(){let e=[];return this.configurations.forEach(t=>{e.push(_(t.GetLaunchConfiguration())),e.push(_(t.GetAttachConfiguration()))}),e}}class w extends y{constructor(){super(),this.executable="a.exe",this.pipeProgram="<full path to pipe program such as plink.exe>",this.MIMode="gdb",this.setupCommandsBlock='"setupCommands": [\n    {\n        "description": "Enable pretty-printing for gdb",\n        "text": "-enable-pretty-printing",\n        "ignoreFailures": true\n    }\n]',this.configurations=[new p.MIConfigurations(this.MIMode,this.executable,this.pipeProgram,this.setupCommandsBlock),new p.PipeTransportConfigurations(this.MIMode,this.executable,this.pipeProgram,this.setupCommandsBlock),new p.WindowsConfigurations(this.MIMode,this.executable,this.pipeProgram,this.setupCommandsBlock),new p.WSLConfigurations(this.MIMode,this.executable,this.pipeProgram,this.setupCommandsBlock)]}}class b extends y{constructor(){super(),this.MIMode="lldb",this.executable="a.out",this.pipeProgram="/usr/bin/ssh",this.configurations=[new p.MIConfigurations(this.MIMode,this.executable,this.pipeProgram)]}}class S extends y{constructor(){super(),this.MIMode="gdb",this.setupCommandsBlock='"setupCommands": [\n    {\n        "description": "Enable pretty-printing for gdb",\n        "text": "-enable-pretty-printing",\n        "ignoreFailures": true\n    }\n]',this.executable="a.out",this.pipeProgram="/usr/bin/ssh",this.configurations=[new p.MIConfigurations(this.MIMode,this.executable,this.pipeProgram,this.setupCommandsBlock),new p.PipeTransportConfigurations(this.MIMode,this.executable,this.pipeProgram,this.setupCommandsBlock)]}}function _(e){let t=new a.CompletionItem(e.label,a.CompletionItemKind.Snippet);return t.insertText=e.bodyText,t}t.ConfigurationSnippetProvider=class{constructor(e){this.provider=e,this.snippets=this.provider.getConfigurationSnippets()}resolveCompletionItem(e,t){return Promise.resolve(e)}provideCompletionItems(e,t,n,r){let i=this.snippets;return 0!==f.parse(e.getText()).configurations.length&&(i=[],this.snippets.forEach(e=>i.push(Object.assign({},e))),i.map(e=>{e.insertText=e.insertText+","})),Promise.resolve(new a.CompletionList(i,!0))}}},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0});const r=n(3);var i;function o(e,t=1){return e.split("\n").map(e=>"\t".repeat(t)+e).join("\n").trim()}function s(e,t){for(let n in t)e=e.replace("{"+n+"}",t[n]);return e}function a(e,t,n){return`"name": "${e}",\n"type": "${t}",\n"request": "launch",\n"program": "${"enter program name, for example ${workspaceFolder}/"+n}",\n"args": [],\n"stopAtEntry": false,\n"cwd": "\${workspaceFolder}",\n"environment": [],\n"externalConsole": true\n`}function c(e,t,n){return s(`\n"name": "${e}",\n"type": "${t}",\n"request": "attach",{0}\n"processId": "\${command:pickProcess}"\n`,["cppdbg"===t?`${r.EOL}"program": "${"enter program name, for example ${workspaceFolder}/"+n}",`:""])}function u(e,t,n){return`\n"name": "${e}",\n"type": "${t}",\n"request": "attach",\n"program": "${"enter program name, for example ${workspaceFolder}/"+n}",\n"processId": "\${command:pickRemoteProcess}"\n`}function l(e,t,n=[]){return`\n"pipeTransport": {\n\t"debuggerPath": "/usr/bin/${t}",\n\t"pipeProgram": "${e}",\n\t"pipeArgs": ${JSON.stringify(n)},\n\t"pipeCwd": ""\n}`}!function(e){e[e.cppvsdbg=0]="cppvsdbg",e[e.cppdbg=1]="cppdbg"}(i=t.DebuggerType||(t.DebuggerType={})),t.indentJsonString=o;class d{constructor(e,t,n,r=""){this.snippetPrefix="C/C++: ",this.miDebugger="cppdbg",this.windowsDebugger="cppvsdbg",this.MIMode=e,this.executable=t,this.pipeProgram=n,this.additionalProperties=r}}t.MIConfigurations=class extends d{GetLaunchConfiguration(){let e=`(${this.MIMode}) Launch`,t=s(`{\n\t${o(a(e,this.miDebugger,this.executable))},\n\t"MIMode": "${this.MIMode}"{0}{1}\n}`,["cppdbg"===this.miDebugger&&"win32"===r.platform()?`,${r.EOL}\t"miDebuggerPath": "/path/to/gdb"`:"",this.additionalProperties?`,${r.EOL}\t${o(this.additionalProperties)}`:""]);return{label:this.snippetPrefix+e,description:`Launch with ${this.MIMode}.`,bodyText:t.trim(),isInitialConfiguration:!0,debuggerType:i.cppdbg}}GetAttachConfiguration(){let e=`(${this.MIMode}) Attach`,t=s(`{ \n\t${o(c(e,this.miDebugger,this.executable))},\n\t"MIMode": "${this.MIMode}"{0}{1}\n}`,["cppdbg"===this.miDebugger&&"win32"===r.platform()?`,${r.EOL}\t"miDebuggerPath": "/path/to/gdb"`:"",this.additionalProperties?`,${r.EOL}\t${o(this.additionalProperties)}`:""]);return{label:this.snippetPrefix+e,description:`Attach with ${this.MIMode}.`,bodyText:t.trim(),debuggerType:i.cppdbg}}};t.PipeTransportConfigurations=class extends d{GetLaunchConfiguration(){let e=`(${this.MIMode}) Pipe Launch`,t=s(`\n{\n\t${o(a(e,this.miDebugger,this.executable))},\n\t${o(l(this.pipeProgram,this.MIMode))},\n\t"MIMode": "${this.MIMode}"{0}\n}`,[this.additionalProperties?`,${r.EOL}\t${o(this.additionalProperties)}`:""]);return{label:this.snippetPrefix+e,description:`Pipe Launch with ${this.MIMode}.`,bodyText:t.trim(),debuggerType:i.cppdbg}}GetAttachConfiguration(){let e=`(${this.MIMode}) Pipe Attach`,t=s(`\n{\n\t${o(u(e,this.miDebugger,this.executable))},\n\t${o(l(this.pipeProgram,this.MIMode))},\n\t"MIMode": "${this.MIMode}"{0}\n}`,[this.additionalProperties?`,${r.EOL}\t${o(this.additionalProperties)}`:""]);return{label:this.snippetPrefix+e,description:`Pipe Attach with ${this.MIMode}.`,bodyText:t.trim(),debuggerType:i.cppdbg}}};t.WindowsConfigurations=class extends d{GetLaunchConfiguration(){let e="(Windows) Launch",t=`\n{\n\t${o(a(e,this.windowsDebugger,this.executable))}\n}`;return{label:this.snippetPrefix+e,description:"Launch with the Visual Studio C/C++ debugger.",bodyText:t.trim(),isInitialConfiguration:!0,debuggerType:i.cppvsdbg}}GetAttachConfiguration(){let e="(Windows) Attach",t=`\n{\n\t${o(c(e,this.windowsDebugger,this.executable))}\n}`;return{label:this.snippetPrefix+e,description:"Attach to a process with the Visual Studio C/C++ debugger.",bodyText:t.trim(),debuggerType:i.cppvsdbg}}};t.WSLConfigurations=class extends d{constructor(){super(...arguments),this.bashPipeProgram="ia32"===process.arch?"${env:windir}\\\\sysnative\\\\bash.exe":"${env:windir}\\\\system32\\\\bash.exe"}GetLaunchConfiguration(){let e=`(${this.MIMode}) Bash on Windows Launch`,t=s(`\n{\n\t${o(a(e,this.miDebugger,this.executable))},\n\t${o(l(this.bashPipeProgram,this.MIMode,["-c"]))}{0}\n}`,[this.additionalProperties?`,${r.EOL}\t${o(this.additionalProperties)}`:""]);return{label:this.snippetPrefix+e,description:`Launch in Bash on Windows using ${this.MIMode}.`,bodyText:t.trim(),debuggerType:i.cppdbg}}GetAttachConfiguration(){let e=`(${this.MIMode}) Bash on Windows Attach`,t=s(`\n{\n\t${o(u(e,this.miDebugger,this.executable))},\n\t${o(l(this.bashPipeProgram,this.MIMode,["-c"]))}{0}\n}`,[this.additionalProperties?`,${r.EOL}\t${o(this.additionalProperties)}`:""]);return{label:this.snippetPrefix+e,description:`Attach to a remote process running in Bash on Windows using ${this.MIMode}.`,bodyText:t.trim(),debuggerType:i.cppdbg}}}},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0});const r=n(2);class i{constructor(e,t){this.Env=e,this.Warning=t}static CreateFromFile(e,t){let n=r.readFileSync(e,"utf8");return this.CreateFromContent(n,e,t)}static CreateFromContent(e,t,n){"\ufeff"===e.charAt(0)&&(e=e.substr(1));let r=[],o=new Map;n&&n.forEach(e=>{o.set(e.name,e.value)}),e.split("\n").forEach(e=>{const t=e.match(/^\s*([\w\.\-]+)\s*=\s*(.*)?\s*$/);if(null!==t){const e=t[1];let n=t[2]||"";n.length>0&&'"'===n.charAt(0)&&'"'===n.charAt(n.length-1)&&(n=n.replace(/\\n/gm,"\n")),n=n.replace(/(^['"]|['"]$)/g,""),o.set(e,n)}else{new RegExp(/^\s*(#|$)/).test(e)||r.push(e)}});let s=null;0!==r.length&&(s="Ignoring non-parseable lines in envFile "+t+": ",r.forEach(function(e,t,n){s+='"'+e+'"'+(t!==n.length-1?", ":".")}));const a=[];for(let e of o.keys())a.push({name:e,value:o.get(e)});return new i(a,s)}}t.ParsedEnvironmentFile=i},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0});const r=n(0),i=n(4),o=n(1),s=n(3);class a{constructor(e){this.context=e}}class c extends a{constructor(e){super(e)}createDebugAdapterDescriptor(e,t){return i.isExtensionReady().then(e=>{if(e){let e=o.join(this.context.extensionPath,"./debugAdapters/OpenDebugAD7");return"win32"===s.platform()&&(e=o.join(this.context.extensionPath,"./debugAdapters/bin/OpenDebugAD7.exe")),new r.DebugAdapterExecutable(e,[])}throw new Error(i.extensionNotReadyString)})}}c.DEBUG_TYPE="cppdbg",t.CppdbgDebugAdapterDescriptorFactory=c;class u extends a{constructor(e){super(e)}createDebugAdapterDescriptor(e,t){return"win32"!==s.platform()?(r.window.showErrorMessage("Debugger type 'cppvsdbg' is not avaliable for non-Windows machines."),null):i.isExtensionReady().then(e=>{if(e)return new r.DebugAdapterExecutable(o.join(this.context.extensionPath,"./debugAdapters/vsdbg/bin/vsdbg.exe"),["--interpreter=vscode"]);throw new Error(i.extensionNotReadyString)})}}u.DEBUG_TYPE="cppvsdbg",t.CppvsdbgDebugAdapterDescriptorFactory=u},function(e,t,n){var r=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))(function(i,o){function s(e){try{c(r.next(e))}catch(e){o(e)}}function a(e){try{c(r.throw(e))}catch(e){o(e)}}function c(e){e.done?i(e.value):new n(function(t){t(e.value)}).then(s,a)}c((r=r.apply(e,t||[])).next())})};Object.defineProperty(t,"__esModule",{value:!0});const i=n(2),o=n(20),s=n(1),a=n(0),c=n(14),u=n(62),l=n(201),d=n(206),h=n(4),p=n(8);class f extends Error{constructor(e,t,n=null,r=null,i=""){super(e),this.message=e,this.methodName=t,this.pkg=n,this.innerError=r,this.errorCode=i}}t.PackageManagerError=f;class g extends f{constructor(e,t,n,r=null,i=null,o=""){super(t,n,r,i,o),this.socket=e,this.message=t,this.methodName=n,this.pkg=r,this.innerError=i,this.errorCode=o}}t.PackageManagerWebResponseError=g;t.PackageManager=class{constructor(e,t){this.platformInfo=e,this.outputChannel=t,u.setGracefulCleanup()}DownloadPackages(e){return this.GetPackages().then(t=>{let n=1;return this.BuildPromiseChain(t,r=>{const i=this.DownloadPackage(r,`${n}/${t.length}`,e);return n+=1,i})})}InstallPackages(e){return this.GetPackages().then(t=>{let n=1;return this.BuildPromiseChain(t,r=>{const i=this.InstallPackage(r,`${n}/${t.length}`,e);return n+=1,i})})}BuildPromiseChain(e,t){let n=Promise.resolve(null);for(let r of e)n=n.then(()=>t(r));return n}GetPackageList(){return new Promise((e,t)=>{if(this.allPackages)e(this.allPackages);else if(h.packageJson.runtimeDependencies){this.allPackages=h.packageJson.runtimeDependencies;for(let e of this.allPackages)e.binaries&&(e.binaries=e.binaries.map(e=>h.getExtensionFilePath(e)));e(this.allPackages)}else t(new f("Package manifest does not exist","GetPackageList"))})}GetPackages(){return this.GetPackageList().then(e=>e.filter((e,t,n)=>!(e.architectures&&-1===e.architectures.indexOf(this.platformInfo.architecture)||e.platforms&&-1===e.platforms.indexOf(this.platformInfo.platform))))}DownloadPackage(e,t,n){return r(this,void 0,void 0,function*(){this.AppendChannel(`Downloading package '${e.description}' `),n.report({message:`Downloading ${t}: ${e.description}`});const r=yield this.CreateTempFile(e);yield this.DownloadPackageWithRetries(e,r,n)})}CreateTempFile(e){return r(this,void 0,void 0,function*(){return new Promise((t,n)=>{u.file({prefix:"package-"},(r,i,o,s)=>r?n(new f("Error from temp.file","DownloadPackage",e,r)):t({name:i,fd:o,removeCallback:s}))})})}DownloadPackageWithRetries(e,t,n){return r(this,void 0,void 0,function*(){e.tmpFile=t;let r=!1,i=null,o=0;do{try{yield this.DownloadFile(e.url,e,o,n),r=!0}catch(t){if(i=t,(o+=1)>5)throw this.AppendChannel(" Failed to download "+e.url),t;this.AppendChannel(" Failed. Retrying...");continue}}while(!r&&o<5);if(this.AppendLineChannel(" Done!"),0!==o){let e={};if(e.success=r?`OnRetry${o}`:"false",i instanceof f){let t=i;e["error.methodName"]=t.methodName,e["error.message"]=t.message,t.pkg&&(e["error.packageName"]=t.pkg.description,e["error.packageUrl"]=t.pkg.url),t.errorCode&&(e["error.errorCode"]=t.errorCode)}p.logDebuggerEvent("acquisition",e)}})}DownloadFile(e,t,n,r){let s=c.parse(e),u=a.workspace.getConfiguration().get("http.proxyStrictSSL",!0),l={host:s.host,path:s.path,agent:h.getHttpsProxyAgent(),rejectUnauthorized:u};return new Promise((s,a)=>{let c=Math.pow(2,n);1===c&&(c=0),c>4&&this.AppendChannel(`Waiting ${c} seconds...`),setTimeout(()=>{if(!t.tmpFile||0===t.tmpFile.fd)return a(new f("Temporary Package file unavailable","DownloadFile",t));let n=o.request(l,e=>{if(301===e.statusCode||302===e.statusCode){let n;return n="string"==typeof e.headers.location?e.headers.location:e.headers.location[0],s(this.DownloadFile(n,t,0,r))}if(200!==e.statusCode){let n=`failed (error code '${e.statusCode}')`;return a(new g(e.socket,"HTTP/HTTPS Response Error","DownloadFile",t,n,e.statusCode.toString()))}{let n=e.headers["content-length"];n="string"==typeof e.headers["content-length"]?e.headers["content-length"]:e.headers["content-length"][0];let r=parseInt(n,10),o=0,c=0,u=i.createWriteStream(null,{fd:t.tmpFile.fd});this.AppendChannel(`(${Math.ceil(r/1024)} KB) `),e.on("data",e=>{let t=Math.ceil(o/5);t>c&&(this.AppendChannel(".".repeat(t-c)),c=t)}),e.on("end",()=>s()),e.on("error",n=>a(new g(e.socket,"HTTP/HTTPS Response error","DownloadFile",t,n.stack,n.name))),e.pipe(u,{end:!1})}});n.on("error",n=>a(new f("HTTP/HTTPS Request error"+(e.includes("fwlink")?": fwlink":""),"DownloadFile",t,n.stack,n.message))),n.end()},1e3*c)})}InstallPackage(e,t,n){return this.AppendLineChannel(`Installing package '${e.description}'`),n.report({message:`Installing ${t}: ${e.description}`}),new Promise((t,n)=>{if(!e.tmpFile||0===e.tmpFile.fd)return n(new f("Downloaded file unavailable","InstallPackage",e));l.fromFd(e.tmpFile.fd,{lazyEntries:!0},(o,a)=>{if(o)return n(new f("Zip file error","InstallPackage",e,o));a.on("end",()=>t()),a.on("error",t=>n(new f("Zip File Error","InstallPackage",e,t,t.code))),a.readEntry(),a.on("entry",t=>{let o=h.getExtensionFilePath(t.fileName);t.fileName.endsWith("/")?d.mkdirp(o,{mode:509},t=>{if(t)return n(new f("Error creating directory","InstallPackage",e,t,t.code));a.readEntry()}):h.checkFileExists(o).then(c=>{c?(".txt"!==s.extname(o)&&this.AppendLineChannel(`Warning: File '${o}' already exists and was not updated.`),a.readEntry()):a.openReadStream(t,(t,c)=>{if(t)return n(new f("Error reading zip stream","InstallPackage",e,t));c.on("error",t=>n(new f("Error in readStream","InstallPackage",e,t))),d.mkdirp(s.dirname(o),{mode:509},t=>r(this,void 0,void 0,function*(){if(t)return n(new f("Error creating directory","InstallPackage",e,t,t.code));let s=o+".tmp";if(i.existsSync(s))try{yield h.unlinkPromise(s)}catch(t){return n(new f(`Error unlinking file ${s}`,"InstallPackage",e,t))}let u=e.binaries&&-1!==e.binaries.indexOf(o)?493:436,l=i.createWriteStream(s,{mode:u});l.on("close",()=>r(this,void 0,void 0,function*(){try{yield h.renamePromise(s,o)}catch(t){return n(new f(`Error renaming file ${s}`,"InstallPackage",e,t))}a.readEntry()})),l.on("error",t=>n(new f("Error in writeStream","InstallPackage",e,t))),c.pipe(l)}))})})})})}).then(()=>{e.tmpFile.removeCallback()})}AppendChannel(e){this.outputChannel&&this.outputChannel.append(e)}AppendLineChannel(e){this.outputChannel&&this.outputChannel.appendLine(e)}}},function(e,t,n){var r=n(2),i=n(54),o=n(202),s=n(204),a=n(15),c=n(19).EventEmitter,u=n(25).Transform,l=n(25).PassThrough,d=n(25).Writable;function h(e,t,n){"function"==typeof t&&(n=t,t=null),null==t&&(t={}),null==t.autoClose&&(t.autoClose=!1),null==t.lazyEntries&&(t.lazyEntries=!1),null==t.decodeStrings&&(t.decodeStrings=!0),null==t.validateEntrySizes&&(t.validateEntrySizes=!0),null==t.strictFileNames&&(t.strictFileNames=!1),null==n&&(n=T),r.fstat(e,function(r,i){if(r)return n(r);p(o.createFromFd(e,{autoClose:!0}),i.size,t,n)})}function p(e,t,n,r){"function"==typeof n&&(r=n,n=null),null==n&&(n={}),null==n.autoClose&&(n.autoClose=!0),null==n.lazyEntries&&(n.lazyEntries=!1),null==n.decodeStrings&&(n.decodeStrings=!0);var i=!!n.decodeStrings;if(null==n.validateEntrySizes&&(n.validateEntrySizes=!0),null==n.strictFileNames&&(n.strictFileNames=!1),null==r&&(r=T),"number"!=typeof t)throw new Error("expected totalSize parameter to be a number");if(t>Number.MAX_SAFE_INTEGER)throw new Error("zip file too large. only file sizes up to 2^52 are supported due to JavaScript's Number type being an IEEE 754 double.");e.ref();var o=Math.min(65557,t),s=P(o),a=t-s.length;w(e,s,0,o,a,function(c){if(c)return r(c);for(var u=o-22;u>=0;u-=1)if(101010256===s.readUInt32LE(u)){var l=s.slice(u),d=l.readUInt16LE(4);if(0!==d)return r(new Error("multi-disk zip files are not supported: found disk number: "+d));var h=l.readUInt16LE(10),p=l.readUInt32LE(16),g=l.readUInt16LE(20),m=l.length-22;if(g!==m)return r(new Error("invalid comment length. expected: "+m+". found: "+g));var v=i?k(l,22,l.length,!1):l.slice(22);if(65535!==h&&4294967295!==p)return r(null,new f(e,p,t,h,v,n.autoClose,n.lazyEntries,i,n.validateEntrySizes,n.strictFileNames));var C=P(20),y=a+u-C.length;return void w(e,C,0,C.length,y,function(o){if(o)return r(o);if(117853008!==C.readUInt32LE(0))return r(new Error("invalid zip64 end of central directory locator signature"));var s=E(C,8),a=P(56);w(e,a,0,a.length,s,function(o){return o?r(o):101075792!==a.readUInt32LE(0)?r(new Error("invalid zip64 end of central directory record signature")):(h=E(a,32),p=E(a,48),r(null,new f(e,p,t,h,v,n.autoClose,n.lazyEntries,i,n.validateEntrySizes,n.strictFileNames)))})})}r(new Error("end of central directory record signature not found"))})}function f(e,t,n,r,i,o,s,a,u,l){var d=this;c.call(d),d.reader=e,d.reader.on("error",function(e){m(d,e)}),d.reader.once("close",function(){d.emit("close")}),d.readEntryCursor=t,d.fileSize=n,d.entryCount=r,d.comment=i,d.entriesRead=0,d.autoClose=!!o,d.lazyEntries=!!s,d.decodeStrings=!!a,d.validateEntrySizes=!!u,d.strictFileNames=!!l,d.isOpen=!0,d.emittedError=!1,d.lazyEntries||d._readEntry()}function g(e,t){e.autoClose&&e.close(),m(e,t)}function m(e,t){e.emittedError||(e.emittedError=!0,e.emit("error",t))}function v(){}function C(e,t){return new Date(1980+(e>>9&127),(e>>5&15)-1,31&e,t>>11&31,t>>5&63,2*(31&t),0)}function y(e){return-1!==e.indexOf("\\")?"invalid characters in fileName: "+e:/^[a-zA-Z]:/.test(e)||/^\//.test(e)?"absolute path: "+e:-1!==e.split("/").indexOf("..")?"invalid relative path: "+e:null}function w(e,t,n,r,i,o){if(0===r)return setImmediate(function(){o(null,P(0))});e.read(t,n,r,i,function(e,t){return e?o(e):t<r?o(new Error("unexpected EOF")):void o()})}function b(e){u.call(this),this.actualByteCount=0,this.expectedByteCount=e}function S(){c.call(this),this.refCount=0}function _(e){l.call(this),this.context=e,this.context.ref(),this.unreffedYet=!1}t.open=function(e,t,n){"function"==typeof t&&(n=t,t=null);null==t&&(t={});null==t.autoClose&&(t.autoClose=!0);null==t.lazyEntries&&(t.lazyEntries=!1);null==t.decodeStrings&&(t.decodeStrings=!0);null==t.validateEntrySizes&&(t.validateEntrySizes=!0);null==t.strictFileNames&&(t.strictFileNames=!1);null==n&&(n=T);r.open(e,"r",function(e,i){if(e)return n(e);h(i,t,function(e,t){e&&r.close(i,T),n(e,t)})})},t.fromFd=h,t.fromBuffer=function(e,t,n){"function"==typeof t&&(n=t,t=null);null==t&&(t={});t.autoClose=!1,null==t.lazyEntries&&(t.lazyEntries=!1);null==t.decodeStrings&&(t.decodeStrings=!0);null==t.validateEntrySizes&&(t.validateEntrySizes=!0);null==t.strictFileNames&&(t.strictFileNames=!1);p(o.createFromBuffer(e,{maxChunkSize:65536}),e.length,t,n)},t.fromRandomAccessReader=p,t.dosDateTimeToDate=C,t.validateFileName=y,t.ZipFile=f,t.Entry=v,t.RandomAccessReader=S,a.inherits(f,c),f.prototype.close=function(){this.isOpen&&(this.isOpen=!1,this.reader.unref())},f.prototype.readEntry=function(){if(!this.lazyEntries)throw new Error("readEntry() called without lazyEntries:true");this._readEntry()},f.prototype._readEntry=function(){var e=this;if(e.entryCount!==e.entriesRead){if(!e.emittedError){var t=P(46);w(e.reader,t,0,t.length,e.readEntryCursor,function(n){if(n)return g(e,n);if(!e.emittedError){var r=new v,i=t.readUInt32LE(0);if(33639248!==i)return g(e,new Error("invalid central directory file header signature: 0x"+i.toString(16)));if(r.versionMadeBy=t.readUInt16LE(4),r.versionNeededToExtract=t.readUInt16LE(6),r.generalPurposeBitFlag=t.readUInt16LE(8),r.compressionMethod=t.readUInt16LE(10),r.lastModFileTime=t.readUInt16LE(12),r.lastModFileDate=t.readUInt16LE(14),r.crc32=t.readUInt32LE(16),r.compressedSize=t.readUInt32LE(20),r.uncompressedSize=t.readUInt32LE(24),r.fileNameLength=t.readUInt16LE(28),r.extraFieldLength=t.readUInt16LE(30),r.fileCommentLength=t.readUInt16LE(32),r.internalFileAttributes=t.readUInt16LE(36),r.externalFileAttributes=t.readUInt32LE(38),r.relativeOffsetOfLocalHeader=t.readUInt32LE(42),64&r.generalPurposeBitFlag)return g(e,new Error("strong encryption is not supported"));e.readEntryCursor+=46,t=P(r.fileNameLength+r.extraFieldLength+r.fileCommentLength),w(e.reader,t,0,t.length,e.readEntryCursor,function(n){if(n)return g(e,n);if(!e.emittedError){var i=0!=(2048&r.generalPurposeBitFlag);r.fileName=e.decodeStrings?k(t,0,r.fileNameLength,i):t.slice(0,r.fileNameLength);var o=r.fileNameLength+r.extraFieldLength,a=t.slice(r.fileNameLength,o);r.extraFields=[];for(var c=0;c<a.length-3;){var u=a.readUInt16LE(c+0),l=a.readUInt16LE(c+2),d=c+4,h=d+l;if(h>a.length)return g(e,new Error("extra field length exceeds extra field buffer size"));var p=P(l);a.copy(p,0,d,h),r.extraFields.push({id:u,data:p}),c=h}if(r.fileComment=e.decodeStrings?k(t,o,o+r.fileCommentLength,i):t.slice(o,o+r.fileCommentLength),r.comment=r.fileComment,e.readEntryCursor+=t.length,e.entriesRead+=1,4294967295===r.uncompressedSize||4294967295===r.compressedSize||4294967295===r.relativeOffsetOfLocalHeader){var f=null;for(c=0;c<r.extraFields.length;c++){if(1===(v=r.extraFields[c]).id){f=v.data;break}}if(null==f)return g(e,new Error("expected zip64 extended information extra field"));var m=0;if(4294967295===r.uncompressedSize){if(m+8>f.length)return g(e,new Error("zip64 extended information extra field does not include uncompressed size"));r.uncompressedSize=E(f,m),m+=8}if(4294967295===r.compressedSize){if(m+8>f.length)return g(e,new Error("zip64 extended information extra field does not include compressed size"));r.compressedSize=E(f,m),m+=8}if(4294967295===r.relativeOffsetOfLocalHeader){if(m+8>f.length)return g(e,new Error("zip64 extended information extra field does not include relative header offset"));r.relativeOffsetOfLocalHeader=E(f,m),m+=8}}if(e.decodeStrings)for(c=0;c<r.extraFields.length;c++){var v;if(28789===(v=r.extraFields[c]).id){if(v.data.length<6)continue;if(1!==v.data.readUInt8(0))continue;var C=v.data.readUInt32LE(1);if(s.unsigned(t.slice(0,r.fileNameLength))!==C)continue;r.fileName=k(v.data,5,v.data.length,!0);break}}if(e.validateEntrySizes&&0===r.compressionMethod){var w=r.uncompressedSize;if(r.isEncrypted()&&(w+=12),r.compressedSize!==w){var b="compressed/uncompressed size mismatch for stored file: "+r.compressedSize+" != "+r.uncompressedSize;return g(e,new Error(b))}}if(e.decodeStrings){e.strictFileNames||(r.fileName=r.fileName.replace(/\\/g,"/"));var S=y(r.fileName,e.validateFileNameOptions);if(null!=S)return g(e,new Error(S))}e.emit("entry",r),e.lazyEntries||e._readEntry()}})}})}}else setImmediate(function(){e.autoClose&&e.close(),e.emittedError||e.emit("end")})},f.prototype.openReadStream=function(e,t,n){var r=this,o=0,s=e.compressedSize;if(null==n)n=t,t={};else{if(null!=t.decrypt){if(!e.isEncrypted())throw new Error("options.decrypt can only be specified for encrypted entries");if(!1!==t.decrypt)throw new Error("invalid options.decrypt value: "+t.decrypt);if(e.isCompressed()&&!1!==t.decompress)throw new Error("entry is encrypted and compressed, and options.decompress !== false")}if(null!=t.decompress){if(!e.isCompressed())throw new Error("options.decompress can only be specified for compressed entries");if(!1!==t.decompress&&!0!==t.decompress)throw new Error("invalid options.decompress value: "+t.decompress)}if(null!=t.start||null!=t.end){if(e.isCompressed()&&!1!==t.decompress)throw new Error("start/end range not allowed for compressed entry without options.decompress === false");if(e.isEncrypted()&&!1!==t.decrypt)throw new Error("start/end range not allowed for encrypted entry without options.decrypt === false")}if(null!=t.start){if((o=t.start)<0)throw new Error("options.start < 0");if(o>e.compressedSize)throw new Error("options.start > entry.compressedSize")}if(null!=t.end){if((s=t.end)<0)throw new Error("options.end < 0");if(s>e.compressedSize)throw new Error("options.end > entry.compressedSize");if(s<o)throw new Error("options.end < options.start")}}if(!r.isOpen)return n(new Error("closed"));if(e.isEncrypted()&&!1!==t.decrypt)return n(new Error("entry is encrypted, and options.decrypt !== false"));r.reader.ref();var a=P(30);w(r.reader,a,0,a.length,e.relativeOffsetOfLocalHeader,function(c){try{if(c)return n(c);var u=a.readUInt32LE(0);if(67324752!==u)return n(new Error("invalid local file header signature: 0x"+u.toString(16)));var l,d=a.readUInt16LE(26),h=a.readUInt16LE(28),p=e.relativeOffsetOfLocalHeader+a.length+d+h;if(0===e.compressionMethod)l=!1;else{if(8!==e.compressionMethod)return n(new Error("unsupported compression method: "+e.compressionMethod));l=null==t.decompress||t.decompress}var f=p,g=f+e.compressedSize;if(0!==e.compressedSize&&g>r.fileSize)return n(new Error("file data overflows file bounds: "+f+" + "+e.compressedSize+" > "+r.fileSize));var m=r.reader.createReadStream({start:f+o,end:f+s}),v=m;if(l){var C=!1,y=i.createInflateRaw();m.on("error",function(e){setImmediate(function(){C||y.emit("error",e)})}),m.pipe(y),r.validateEntrySizes?(v=new b(e.uncompressedSize),y.on("error",function(e){setImmediate(function(){C||v.emit("error",e)})}),y.pipe(v)):v=y,v.destroy=function(){C=!0,y!==v&&y.unpipe(v),m.unpipe(y),m.destroy()}}n(null,v)}finally{r.reader.unref()}})},v.prototype.getLastModDate=function(){return C(this.lastModFileDate,this.lastModFileTime)},v.prototype.isEncrypted=function(){return 0!=(1&this.generalPurposeBitFlag)},v.prototype.isCompressed=function(){return 8===this.compressionMethod},a.inherits(b,u),b.prototype._transform=function(e,t,n){if(this.actualByteCount+=e.length,this.actualByteCount>this.expectedByteCount){var r="too many bytes in the stream. expected "+this.expectedByteCount+". got at least "+this.actualByteCount;return n(new Error(r))}n(null,e)},b.prototype._flush=function(e){if(this.actualByteCount<this.expectedByteCount){var t="not enough bytes in the stream. expected "+this.expectedByteCount+". got only "+this.actualByteCount;return e(new Error(t))}e()},a.inherits(S,c),S.prototype.ref=function(){this.refCount+=1},S.prototype.unref=function(){var e=this;if(e.refCount-=1,!(e.refCount>0)){if(e.refCount<0)throw new Error("invalid unref");e.close(function(t){if(t)return e.emit("error",t);e.emit("close")})}},S.prototype.createReadStream=function(e){var t=e.start,n=e.end;if(t===n){var r=new l;return setImmediate(function(){r.end()}),r}var i=this._readStreamForRange(t,n),o=!1,s=new _(this);i.on("error",function(e){setImmediate(function(){o||s.emit("error",e)})}),s.destroy=function(){i.unpipe(s),s.unref(),i.destroy()};var a=new b(n-t);return s.on("error",function(e){setImmediate(function(){o||a.emit("error",e)})}),a.destroy=function(){o=!0,s.unpipe(a),s.destroy()},i.pipe(s).pipe(a)},S.prototype._readStreamForRange=function(e,t){throw new Error("not implemented")},S.prototype.read=function(e,t,n,r,i){var o=this.createReadStream({start:r,end:r+n}),s=new d,a=0;s._write=function(n,r,i){n.copy(e,t+a,0,n.length),a+=n.length,i()},s.on("finish",i),o.on("error",function(e){i(e)}),o.pipe(s)},S.prototype.close=function(e){setImmediate(e)},a.inherits(_,l),_.prototype._flush=function(e){this.unref(),e()},_.prototype.unref=function(e){this.unreffedYet||(this.unreffedYet=!0,this.context.unref())};var P,x="\0☺☻♥♦♣♠•◘○◙♂♀♪♫☼►◄↕‼¶§▬↨↑↓→←∟↔▲▼ !\"#$%&'()*+,-./0123456789:;<=>?@ABCDEFGHIJKLMNOPQRSTUVWXYZ[\\]^_`abcdefghijklmnopqrstuvwxyz{|}~⌂ÇüéâäàåçêëèïîìÄÅÉæÆôöòûùÿÖÜ¢£¥₧ƒáíóúñÑªº¿⌐¬½¼¡«»░▒▓│┤╡╢╖╕╣║╗╝╜╛┐└┴┬├─┼╞╟╚╔╩╦╠═╬╧╨╤╥╙╘╒╓╫╪┘┌█▄▌▐▀αßΓπΣσµτΦΘΩδ∞φε∩≡±≥≤⌠⌡÷≈°∙·√ⁿ²■ ";function k(e,t,n,r){if(r)return e.toString("utf8",t,n);for(var i="",o=t;o<n;o++)i+=x[e[o]];return i}function E(e,t){var n=e.readUInt32LE(t);return 4294967296*e.readUInt32LE(t+4)+n}function T(e){if(e)throw e}P="function"==typeof Buffer.allocUnsafe?function(e){return Buffer.allocUnsafe(e)}:function(e){return new Buffer(e)}},function(e,t,n){var r=n(2),i=n(15),o=n(25),s=o.Readable,a=o.Writable,c=o.PassThrough,u=n(203),l=n(19).EventEmitter;function d(e,t){t=t||{},l.call(this),this.fd=e,this.pend=new u,this.pend.max=1,this.refCount=0,this.autoClose=!!t.autoClose}function h(e,t){t=t||{},s.call(this,t),this.context=e,this.context.ref(),this.start=t.start||0,this.endOffset=t.end,this.pos=this.start,this.destroyed=!1}function p(e,t){t=t||{},a.call(this,t),this.context=e,this.context.ref(),this.start=t.start||0,this.endOffset=null==t.end?1/0:+t.end,this.bytesWritten=0,this.pos=this.start,this.destroyed=!1,this.on("finish",this.destroy.bind(this))}function f(e,t){l.call(this),t=t||{},this.refCount=0,this.buffer=e,this.maxChunkSize=t.maxChunkSize||Number.MAX_SAFE_INTEGER}t.createFromBuffer=function(e,t){return new f(e,t)},t.createFromFd=function(e,t){return new d(e,t)},t.BufferSlicer=f,t.FdSlicer=d,i.inherits(d,l),d.prototype.read=function(e,t,n,i,o){var s=this;s.pend.go(function(a){r.read(s.fd,e,t,n,i,function(e,t,n){a(),o(e,t,n)})})},d.prototype.write=function(e,t,n,i,o){var s=this;s.pend.go(function(a){r.write(s.fd,e,t,n,i,function(e,t,n){a(),o(e,t,n)})})},d.prototype.createReadStream=function(e){return new h(this,e)},d.prototype.createWriteStream=function(e){return new p(this,e)},d.prototype.ref=function(){this.refCount+=1},d.prototype.unref=function(){var e=this;if(e.refCount-=1,!(e.refCount>0)){if(e.refCount<0)throw new Error("invalid unref");e.autoClose&&r.close(e.fd,function(t){t?e.emit("error",t):e.emit("close")})}},i.inherits(h,s),h.prototype._read=function(e){var t=this;if(!t.destroyed){var n=Math.min(t._readableState.highWaterMark,e);if(null!=t.endOffset&&(n=Math.min(n,t.endOffset-t.pos)),n<=0)return t.destroyed=!0,t.push(null),void t.context.unref();t.context.pend.go(function(e){if(t.destroyed)return e();var i=new Buffer(n);r.read(t.context.fd,i,0,n,t.pos,function(n,r){n?t.destroy(n):0===r?(t.destroyed=!0,t.push(null),t.context.unref()):(t.pos+=r,t.push(i.slice(0,r))),e()})})}},h.prototype.destroy=function(e){this.destroyed||(e=e||new Error("stream destroyed"),this.destroyed=!0,this.emit("error",e),this.context.unref())},i.inherits(p,a),p.prototype._write=function(e,t,n){var i=this;if(!i.destroyed){if(i.pos+e.length>i.endOffset){var o=new Error("maximum file length exceeded");return o.code="ETOOBIG",i.destroy(),void n(o)}i.context.pend.go(function(t){if(i.destroyed)return t();r.write(i.context.fd,e,0,e.length,i.pos,function(e,r){e?(i.destroy(),t(),n(e)):(i.bytesWritten+=r,i.pos+=r,i.emit("progress"),t(),n())})})}},p.prototype.destroy=function(){this.destroyed||(this.destroyed=!0,this.context.unref())},i.inherits(f,l),f.prototype.read=function(e,t,n,r,i){var o=r+n,s=o-this.buffer.length,a=s>0?s:n;this.buffer.copy(e,t,r,o),setImmediate(function(){i(null,a)})},f.prototype.write=function(e,t,n,r,i){e.copy(this.buffer,r,t,t+n),setImmediate(function(){i(null,n,e)})},f.prototype.createReadStream=function(e){var t=new c(e=e||{});t.destroyed=!1,t.start=e.start||0,t.endOffset=e.end,t.pos=t.endOffset||this.buffer.length;for(var n=this.buffer.slice(t.start,t.pos),r=0;;){var i=r+this.maxChunkSize;if(i>=n.length){r<n.length&&t.write(n.slice(r,n.length));break}t.write(n.slice(r,i)),r=i}return t.end(),t.destroy=function(){t.destroyed=!0},t},f.prototype.createWriteStream=function(e){var t=this,n=new a(e=e||{});return n.start=e.start||0,n.endOffset=null==e.end?this.buffer.length:+e.end,n.bytesWritten=0,n.pos=n.start,n.destroyed=!1,n._write=function(e,r,i){if(!n.destroyed){var o=n.pos+e.length;if(o>n.endOffset){var s=new Error("maximum file length exceeded");return s.code="ETOOBIG",n.destroyed=!0,void i(s)}e.copy(t.buffer,n.pos,0,e.length),n.bytesWritten+=e.length,n.pos=o,n.emit("progress"),i()}},n.destroy=function(){n.destroyed=!0},n},f.prototype.ref=function(){this.refCount+=1},f.prototype.unref=function(){if(this.refCount-=1,this.refCount<0)throw new Error("invalid unref")}},function(e,t){function n(){this.pending=0,this.max=1/0,this.listeners=[],this.waiting=[],this.error=null}function r(e){e.pending+=1;var t=!1;return function(r){if(t)throw new Error("callback called twice");if(t=!0,e.error=e.error||r,e.pending-=1,e.waiting.length>0&&e.pending<e.max)i(e,e.waiting.shift());else if(0===e.pending){var o=e.listeners;e.listeners=[],o.forEach(n)}};function n(t){t(e.error)}}function i(e,t){t(r(e))}e.exports=n,n.prototype.go=function(e){this.pending<this.max?i(this,e):this.waiting.push(e)},n.prototype.wait=function(e){0===this.pending?e(this.error):this.listeners.push(e)},n.prototype.hold=function(){return r(this)}},function(e,t,n){var r=n(205).Buffer,i=[0,1996959894,3993919788,2567524794,124634137,1886057615,3915621685,2657392035,249268274,2044508324,3772115230,2547177864,162941995,2125561021,3887607047,2428444049,498536548,1789927666,4089016648,2227061214,450548861,1843258603,4107580753,2211677639,325883990,1684777152,4251122042,2321926636,335633487,1661365465,4195302755,2366115317,997073096,1281953886,3579855332,2724688242,1006888145,1258607687,3524101629,2768942443,901097722,1119000684,3686517206,2898065728,853044451,1172266101,3705015759,2882616665,651767980,1373503546,3369554304,3218104598,565507253,1454621731,3485111705,3099436303,671266974,1594198024,3322730930,2970347812,795835527,1483230225,3244367275,3060149565,1994146192,31158534,2563907772,4023717930,1907459465,112637215,2680153253,3904427059,2013776290,251722036,2517215374,3775830040,2137656763,141376813,2439277719,3865271297,1802195444,476864866,2238001368,4066508878,1812370925,453092731,2181625025,4111451223,1706088902,314042704,2344532202,4240017532,1658658271,366619977,2362670323,4224994405,1303535960,984961486,2747007092,3569037538,1256170817,1037604311,2765210733,3554079995,1131014506,879679996,2909243462,3663771856,1141124467,855842277,2852801631,3708648649,1342533948,654459306,3188396048,3373015174,1466479909,544179635,3110523913,3462522015,1591671054,702138776,2966460450,3352799412,1504918807,783551873,3082640443,3233442989,3988292384,2596254646,62317068,1957810842,3939845945,2647816111,81470997,1943803523,3814918930,2489596804,225274430,2053790376,3826175755,2466906013,167816743,2097651377,4027552580,2265490386,503444072,1762050814,4150417245,2154129355,426522225,1852507879,4275313526,2312317920,282753626,1742555852,4189708143,2394877945,397917763,1622183637,3604390888,2714866558,953729732,1340076626,3518719985,2797360999,1068828381,1219638859,3624741850,2936675148,906185462,1090812512,3747672003,2825379669,829329135,1181335161,3412177804,3160834842,628085408,1382605366,3423369109,3138078467,570562233,1426400815,3317316542,2998733608,733239954,1555261956,3268935591,3050360625,752459403,1541320221,2607071920,3965973030,1969922972,40735498,2617837225,3943577151,1913087877,83908371,2512341634,3803740692,2075208622,213261112,2463272603,3855990285,2094854071,198958881,2262029012,4057260610,1759359992,534414190,2176718541,4139329115,1873836001,414664567,2282248934,4279200368,1711684554,285281116,2405801727,4167216745,1634467795,376229701,2685067896,3608007406,1308918612,956543938,2808555105,3495958263,1231636301,1047427035,2932959818,3654703836,1088359270,936918e3,2847714899,3736837829,1202900863,817233897,3183342108,3401237130,1404277552,615818150,3134207493,3453421203,1423857449,601450431,3009837614,3294710456,1567103746,711928724,3020668471,3272380065,1510334235,755167117];function o(e){if(r.isBuffer(e))return e;var t="function"==typeof r.alloc&&"function"==typeof r.from;if("number"==typeof e)return t?r.alloc(e):new r(e);if("string"==typeof e)return t?r.from(e):new r(e);throw new Error("input must be buffer, number, or string, received "+typeof e)}function s(e,t){e=o(e),r.isBuffer(t)&&(t=t.readUInt32BE(0));for(var n=-1^~~t,s=0;s<e.length;s++)n=i[255&(n^e[s])]^n>>>8;return-1^n}function a(){return e=s.apply(null,arguments),(t=o(4)).writeInt32BE(e,0),t;var e,t}"undefined"!=typeof Int32Array&&(i=new Int32Array(i)),a.signed=function(){return s.apply(null,arguments)},a.unsigned=function(){return s.apply(null,arguments)>>>0},e.exports=a},function(e,t){e.exports=require("buffer")},function(e,t,n){var r=n(1),i=n(2),o=parseInt("0777",8);function s(e,t,n,a){"function"==typeof t?(n=t,t={}):t&&"object"==typeof t||(t={mode:t});var c=t.mode,u=t.fs||i;void 0===c&&(c=o&~process.umask()),a||(a=null);var l=n||function(){};e=r.resolve(e),u.mkdir(e,c,function(n){if(!n)return l(null,a=a||e);switch(n.code){case"ENOENT":s(r.dirname(e),t,function(n,r){n?l(n,r):s(e,t,l,r)});break;default:u.stat(e,function(e,t){e||!t.isDirectory()?l(n,a):l(null,a)})}})}e.exports=s.mkdirp=s.mkdirP=s,s.sync=function e(t,n,s){n&&"object"==typeof n||(n={mode:n});var a=n.mode,c=n.fs||i;void 0===a&&(a=o&~process.umask()),s||(s=null),t=r.resolve(t);try{c.mkdirSync(t,a),s=s||t}catch(i){switch(i.code){case"ENOENT":s=e(r.dirname(t),n,s),e(t,n,s);break;default:var u;try{u=c.statSync(t)}catch(e){throw i}if(!u.isDirectory())throw i}}return s}},function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),function(e){e[e.Online=0]="Online",e[e.Offline=1]="Offline"}(t.InstallationType||(t.InstallationType={}));class n{constructor(){this.hasError=!1,this.telemetryProperties={}}}let r;function i(){return r||(r=new n),r}t.InstallationInformation=n,t.getInstallationInformation=i,t.setInstallationStage=function(e){i().stage=e},t.setInstallationType=function(e){i().type=e}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(28),i=n(209);t.CppTools1=class{get BackupApi(){return this.backupApi||(this.backupApi=new i.CppTools(r.Version.v0)),this.backupApi}getApi(e){switch(e){case r.Version.v0:return this.BackupApi;default:return new i.CppTools(e)}}getTestApi(e){return this.getApi(e)}getVersion(){return this.BackupApi.getVersion()}registerCustomConfigurationProvider(e){this.BackupApi.registerCustomConfigurationProvider(e)}notifyReady(e){this.BackupApi.notifyReady(e)}didChangeCustomConfiguration(e){this.BackupApi.didChangeCustomConfiguration(e)}didChangeCustomBrowseConfiguration(e){this.BackupApi.didChangeCustomBrowseConfiguration(e)}dispose(){}getTestHook(){return this.BackupApi.getTestHook()}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(28),i=n(22),o=n(27),s=n(21),a=n(61);t.CppTools=class{constructor(e){this.providers=[],this.failedRegistrations=[],this.timers=new Map,e>r.Version.latest&&(console.warn(`version ${e} is not supported by this version of cpptools`),console.warn(`  using ${r.Version.latest} instead`),e=r.Version.latest),this.version=e}addNotifyReadyTimer(e){if(this.version>=r.Version.v2){const t=30;let n=setTimeout(()=>{console.warn(`registered provider ${e.extensionId} did not call 'notifyReady' within ${t} seconds`)},1e3*t);this.timers.set(e.extensionId,n)}}removeNotifyReadyTimer(e){if(this.version>=r.Version.v2){let t=this.timers.get(e.extensionId);t&&(this.timers.delete(e.extensionId),clearTimeout(t))}}getVersion(){return this.version}registerCustomConfigurationProvider(e){let t=i.getCustomConfigProviders();if(t.add(e,this.version)){let n=t.get(e);o.getOutputChannel().appendLine(`Custom configuration provider '${n.name}' registered`),this.providers.push(n),s.getClients().forEach(e=>e.onRegisterCustomConfigurationProvider(n)),this.addNotifyReadyTimer(n)}else this.failedRegistrations.push(e)}notifyReady(e){let t=i.getCustomConfigProviders().get(e);t?(this.removeNotifyReadyTimer(t),t.isReady=!0,s.getClients().forEach(e=>{e.updateCustomConfigurations(t),e.updateCustomBrowseConfiguration(t)})):this.failedRegistrations.find(t=>t===e)?console.warn("provider not successfully registered, 'notifyReady' ignored"):console.warn("provider should be registered before signaling it's ready to provide configurations")}didChangeCustomConfiguration(e){let t=i.getCustomConfigProviders().get(e);t?(t.isReady||console.warn("didChangeCustomConfiguration was invoked before notifyReady"),s.getClients().forEach(e=>e.updateCustomConfigurations(t))):this.failedRegistrations.find(t=>t===e)?console.warn("provider not successfully registered, 'didChangeCustomConfiguration' ignored"):console.warn("provider should be registered before sending config change messages")}didChangeCustomBrowseConfiguration(e){let t=i.getCustomConfigProviders().get(e);t?s.getClients().forEach(e=>e.updateCustomBrowseConfiguration(t)):this.failedRegistrations.find(t=>t===e)?console.warn("provider not successfully registered, 'didChangeCustomBrowseConfiguration' ignored"):console.warn("provider should be registered before sending config change messages")}dispose(){this.providers.forEach(e=>{i.getCustomConfigProviders().remove(e),e.dispose()}),this.providers=[]}getTestHook(){return a.getTestHook()}}},function(e,t,n){"use strict";function r(e,t){void 0===t&&(t=!1);var n=0,r=e.length,a="",c=0,u=16,l=0,d=0,h=0,p=0,f=0;function g(t,r){for(var i=0,o=0;i<t||!r;){var s=e.charCodeAt(n);if(s>=48&&s<=57)o=16*o+s-48;else if(s>=65&&s<=70)o=16*o+s-65+10;else{if(!(s>=97&&s<=102))break;o=16*o+s-97+10}n++,i++}return i<t&&(o=-1),o}function m(){if(a="",f=0,c=n,d=l,p=h,n>=r)return c=r,u=17;var t=e.charCodeAt(n);if(i(t)){do{n++,a+=String.fromCharCode(t),t=e.charCodeAt(n)}while(i(t));return u=15}if(o(t))return n++,a+=String.fromCharCode(t),13===t&&10===e.charCodeAt(n)&&(n++,a+="\n"),l++,h=n,u=14;switch(t){case 123:return n++,u=1;case 125:return n++,u=2;case 91:return n++,u=3;case 93:return n++,u=4;case 58:return n++,u=6;case 44:return n++,u=5;case 34:return n++,a=function(){for(var t="",i=n;;){if(n>=r){t+=e.substring(i,n),f=2;break}var s=e.charCodeAt(n);if(34===s){t+=e.substring(i,n),n++;break}if(92!==s){if(s>=0&&s<=31){if(o(s)){t+=e.substring(i,n),f=2;break}f=6}n++}else{if(t+=e.substring(i,n),++n>=r){f=2;break}switch(s=e.charCodeAt(n++)){case 34:t+='"';break;case 92:t+="\\";break;case 47:t+="/";break;case 98:t+="\b";break;case 102:t+="\f";break;case 110:t+="\n";break;case 114:t+="\r";break;case 116:t+="\t";break;case 117:var a=g(4,!0);a>=0?t+=String.fromCharCode(a):f=4;break;default:f=5}i=n}}return t}(),u=10;case 47:var m=n-1;if(47===e.charCodeAt(n+1)){for(n+=2;n<r&&!o(e.charCodeAt(n));)n++;return a=e.substring(m,n),u=12}if(42===e.charCodeAt(n+1)){n+=2;for(var C=r-1,y=!1;n<C;){var w=e.charCodeAt(n);if(42===w&&47===e.charCodeAt(n+1)){n+=2,y=!0;break}n++,o(w)&&(13===w&&10===e.charCodeAt(n)&&n++,l++,h=n)}return y||(n++,f=1),a=e.substring(m,n),u=13}return a+=String.fromCharCode(t),n++,u=16;case 45:if(a+=String.fromCharCode(t),++n===r||!s(e.charCodeAt(n)))return u=16;case 48:case 49:case 50:case 51:case 52:case 53:case 54:case 55:case 56:case 57:return a+=function(){var t=n;if(48===e.charCodeAt(n))n++;else for(n++;n<e.length&&s(e.charCodeAt(n));)n++;if(n<e.length&&46===e.charCodeAt(n)){if(!(++n<e.length&&s(e.charCodeAt(n))))return f=3,e.substring(t,n);for(n++;n<e.length&&s(e.charCodeAt(n));)n++}var r=n;if(n<e.length&&(69===e.charCodeAt(n)||101===e.charCodeAt(n)))if((++n<e.length&&43===e.charCodeAt(n)||45===e.charCodeAt(n))&&n++,n<e.length&&s(e.charCodeAt(n))){for(n++;n<e.length&&s(e.charCodeAt(n));)n++;r=n}else f=3;return e.substring(t,r)}(),u=11;default:for(;n<r&&v(t);)n++,t=e.charCodeAt(n);if(c!==n){switch(a=e.substring(c,n)){case"true":return u=8;case"false":return u=9;case"null":return u=7}return u=16}return a+=String.fromCharCode(t),n++,u=16}}function v(e){if(i(e)||o(e))return!1;switch(e){case 125:case 93:case 123:case 91:case 34:case 58:case 44:case 47:return!1}return!0}return{setPosition:function(e){n=e,a="",c=0,u=16,f=0},getPosition:function(){return n},scan:t?function(){var e;do{e=m()}while(e>=12&&e<=15);return e}:m,getToken:function(){return u},getTokenValue:function(){return a},getTokenOffset:function(){return c},getTokenLength:function(){return n-c},getTokenStartLine:function(){return d},getTokenStartCharacter:function(){return c-p},getTokenError:function(){return f}}}function i(e){return 32===e||9===e||11===e||12===e||160===e||5760===e||e>=8192&&e<=8203||8239===e||8287===e||12288===e||65279===e}function o(e){return 10===e||13===e||8232===e||8233===e}function s(e){return e>=48&&e<=57}function a(e,t,n){var i,o,s,a,l;if(t){for(a=t.offset,l=a+t.length,s=a;s>0&&!u(e,s-1);)s--;for(var d=l;d<e.length&&!u(e,d);)d++;o=e.substring(s,d),i=function(e,t){var n=0,r=0,i=t.tabSize||4;for(;n<e.length;){var o=e.charAt(n);if(" "===o)r++;else{if("\t"!==o)break;r+=i}n++}return Math.floor(r/i)}(o,n)}else o=e,i=0,s=0,a=0,l=e.length;var h,p=function(e,t){for(var n=0;n<t.length;n++){var r=t.charAt(n);if("\r"===r)return n+1<t.length&&"\n"===t.charAt(n+1)?"\r\n":"\r";if("\n"===r)return"\n"}return e&&e.eol||"\n"}(n,e),f=!1,g=0;h=n.insertSpaces?c(" ",n.tabSize||4):"\t";var m=r(o,!1),v=!1;function C(){return p+c(h,i+g)}function y(){var e=m.scan();for(f=!1;15===e||14===e;)f=f||14===e,e=m.scan();return v=16===e||0!==m.getTokenError(),e}var w=[];function b(t,n,r){!v&&n<l&&r>a&&e.substring(n,r)!==t&&w.push({offset:n,length:r-n,content:t})}var S=y();if(17!==S){var _=m.getTokenOffset()+s;b(c(h,i),s,_)}for(;17!==S;){for(var P=m.getTokenOffset()+m.getTokenLength()+s,x=y(),k="";!f&&(12===x||13===x);){b(" ",P,m.getTokenOffset()+s),P=m.getTokenOffset()+m.getTokenLength()+s,k=12===x?C():"",x=y()}if(2===x)1!==S&&(g--,k=C());else if(4===x)3!==S&&(g--,k=C());else{switch(S){case 3:case 1:g++,k=C();break;case 5:case 12:k=C();break;case 13:k=f?C():" ";break;case 6:k=" ";break;case 10:if(6===x){k="";break}case 7:case 8:case 9:case 11:case 2:case 4:12===x||13===x?k=" ":5!==x&&17!==x&&(v=!0);break;case 16:v=!0}!f||12!==x&&13!==x||(k=C())}b(k,P,m.getTokenOffset()+s),S=x}return w}function c(e,t){for(var n="",r=0;r<t;r++)n+=e;return n}function u(e,t){return-1!=="\r\n".indexOf(e.charAt(t))}var l;function d(e,t,n){void 0===t&&(t=[]),void 0===n&&(n=l.DEFAULT);var r={type:"array",offset:-1,length:-1,children:[],parent:void 0};function i(e){"property"===r.type&&(r.length=e-r.offset,r=r.parent)}function o(e){return r.children.push(e),e}p(e,{onObjectBegin:function(e){r=o({type:"object",offset:e,length:-1,parent:r,children:[]})},onObjectProperty:function(e,t,n){(r=o({type:"property",offset:t,length:-1,parent:r,children:[]})).children.push({type:"string",value:e,offset:t,length:n,parent:r})},onObjectEnd:function(e,t){r.length=e+t-r.offset,r=r.parent,i(e+t)},onArrayBegin:function(e,t){r=o({type:"array",offset:e,length:-1,parent:r,children:[]})},onArrayEnd:function(e,t){r.length=e+t-r.offset,r=r.parent,i(e+t)},onLiteralValue:function(e,t,n){o({type:f(e),offset:t,length:n,parent:r,value:e}),i(t+n)},onSeparator:function(e,t,n){"property"===r.type&&(":"===e?r.colonOffset=t:","===e&&i(t))},onError:function(e,n,r){t.push({error:e,offset:n,length:r})}},n);var s=r.children[0];return s&&delete s.parent,s}function h(e,t){if(e){for(var n=e,r=0,i=t;r<i.length;r++){var o=i[r];if("string"==typeof o){if("object"!==n.type||!Array.isArray(n.children))return;for(var s=!1,a=0,c=n.children;a<c.length;a++){var u=c[a];if(Array.isArray(u.children)&&u.children[0].value===o){n=u.children[1],s=!0;break}}if(!s)return}else{var l=o;if("array"!==n.type||l<0||!Array.isArray(n.children)||l>=n.children.length)return;n=n.children[l]}}return n}}function p(e,t,n){void 0===n&&(n=l.DEFAULT);var i=r(e,!1);function o(e){return e?function(){return e(i.getTokenOffset(),i.getTokenLength(),i.getTokenStartLine(),i.getTokenStartCharacter())}:function(){return!0}}function s(e){return e?function(t){return e(t,i.getTokenOffset(),i.getTokenLength(),i.getTokenStartLine(),i.getTokenStartCharacter())}:function(){return!0}}var a=o(t.onObjectBegin),c=s(t.onObjectProperty),u=o(t.onObjectEnd),d=o(t.onArrayBegin),h=o(t.onArrayEnd),p=s(t.onLiteralValue),f=s(t.onSeparator),g=o(t.onComment),m=s(t.onError),v=n&&n.disallowComments,C=n&&n.allowTrailingComma;function y(){for(;;){var e=i.scan();switch(i.getTokenError()){case 4:w(14);break;case 5:w(15);break;case 3:w(13);break;case 1:v||w(11);break;case 2:w(12);break;case 6:w(16)}switch(e){case 12:case 13:v?w(10):g();break;case 16:w(1);break;case 15:case 14:break;default:return e}}}function w(e,t,n){if(void 0===t&&(t=[]),void 0===n&&(n=[]),m(e),t.length+n.length>0)for(var r=i.getToken();17!==r;){if(-1!==t.indexOf(r)){y();break}if(-1!==n.indexOf(r))break;r=y()}}function b(e){var t=i.getTokenValue();return e?p(t):c(t),y(),!0}function S(){switch(i.getToken()){case 3:return function(){d(),y();for(var e=!1;4!==i.getToken()&&17!==i.getToken();){if(5===i.getToken()){if(e||w(4,[],[]),f(","),y(),4===i.getToken()&&C)break}else e&&w(6,[],[]);S()||w(4,[],[4,5]),e=!0}return h(),4!==i.getToken()?w(8,[4],[]):y(),!0}();case 1:return function(){a(),y();for(var e=!1;2!==i.getToken()&&17!==i.getToken();){if(5===i.getToken()){if(e||w(4,[],[]),f(","),y(),2===i.getToken()&&C)break}else e&&w(6,[],[]);(10!==i.getToken()?(w(3,[],[2,5]),0):(b(!1),6===i.getToken()?(f(":"),y(),S()||w(4,[],[2,5])):w(5,[],[2,5]),1))||w(4,[],[2,5]),e=!0}return u(),2!==i.getToken()?w(7,[2],[]):y(),!0}();case 10:return b(!0);default:return function(){switch(i.getToken()){case 11:var e=0;try{"number"!=typeof(e=JSON.parse(i.getTokenValue()))&&(w(2),e=0)}catch(e){w(2)}p(e);break;case 7:p(null);break;case 8:p(!0);break;case 9:p(!1);break;default:return!1}return y(),!0}()}}return y(),17===i.getToken()||(S()?(17!==i.getToken()&&w(9,[],[]),!0):(w(4,[],[]),!1))}function f(e){switch(typeof e){case"boolean":return"boolean";case"number":return"number";case"string":return"string";default:return"null"}}function g(e,t,n,r,i){for(var o,s=t.slice(),a=d(e,[]),c=void 0,u=void 0;s.length>0&&(u=s.pop(),void 0===(c=h(a,s))&&void 0!==n);)"string"==typeof u?((o={})[u]=n,n=o):n=[n];if(c){if("object"===c.type&&"string"==typeof u&&Array.isArray(c.children)){var l=h(c,[u]);if(void 0!==l){if(void 0===n){if(!l.parent)throw new Error("Malformed AST");var p=c.children.indexOf(l.parent),f=void 0,g=l.parent.offset+l.parent.length;if(p>0)f=(S=c.children[p-1]).offset+S.length;else if(f=c.offset+1,c.children.length>1)g=c.children[1].offset;return m(e,{offset:f,length:g-f,content:""},r)}return m(e,{offset:l.offset,length:l.length,content:JSON.stringify(n)},r)}if(void 0===n)return[];var v=JSON.stringify(u)+": "+JSON.stringify(n),C=i?i(c.children.map(function(e){return e.children[0].value})):c.children.length,y=void 0;return m(e,y=C>0?{offset:(S=c.children[C-1]).offset+S.length,length:0,content:","+v}:0===c.children.length?{offset:c.offset+1,length:0,content:v}:{offset:c.offset+1,length:0,content:v+","},r)}if("array"===c.type&&"number"==typeof u&&Array.isArray(c.children)){if(-1===u){v=""+JSON.stringify(n),y=void 0;if(0===c.children.length)y={offset:c.offset+1,length:0,content:v};else y={offset:(S=c.children[c.children.length-1]).offset+S.length,length:0,content:","+v};return m(e,y,r)}if(void 0===n&&c.children.length>=0){var w=u,b=c.children[w];y=void 0;if(1===c.children.length)y={offset:c.offset+1,length:c.length-2,content:""};else if(c.children.length-1===w){var S,_=(S=c.children[w-1]).offset+S.length;y={offset:_,length:c.offset+c.length-2-_,content:""}}else y={offset:b.offset,length:c.children[w+1].offset-b.offset,content:""};return m(e,y,r)}throw new Error("Array modification not supported yet")}throw new Error("Can not add "+("number"!=typeof u?"index":"property")+" to parent of type "+c.type)}if(void 0===n)throw new Error("Can not delete in empty document");return m(e,{offset:a?a.offset:0,length:a?a.length:0,content:JSON.stringify(n)},r)}function m(e,t,n){var r=v(e,t),i=t.offset,o=t.offset+t.content.length;if(0===t.length||0===t.content.length){for(;i>0&&!u(r,i-1);)i--;for(;o<r.length&&!u(r,o);)o++}for(var s=a(r,{offset:i,length:o-i},n),c=s.length-1;c>=0;c--){var l=s[c];r=v(r,l),i=Math.min(i,l.offset),o=Math.max(o,l.offset+l.length),o+=l.content.length-l.length}return[{offset:i,length:e.length-(r.length-o)-i,content:r.substring(i,o)}]}function v(e,t){return e.substring(0,t.offset)+t.content+e.substring(t.offset+t.length)}n.r(t),function(e){e.DEFAULT={allowTrailingComma:!1}}(l||(l={})),n.d(t,"createScanner",function(){return C}),n.d(t,"getLocation",function(){return y}),n.d(t,"parse",function(){return w}),n.d(t,"parseTree",function(){return b}),n.d(t,"findNodeAtLocation",function(){return S}),n.d(t,"findNodeAtOffset",function(){return _}),n.d(t,"getNodePath",function(){return P}),n.d(t,"getNodeValue",function(){return x}),n.d(t,"visit",function(){return k}),n.d(t,"stripComments",function(){return E}),n.d(t,"printParseErrorCode",function(){return T}),n.d(t,"format",function(){return I}),n.d(t,"modify",function(){return D}),n.d(t,"applyEdits",function(){return R});var C=r,y=function(e,t){var n=[],r=new Object,i=void 0,o={value:{},offset:0,length:0,type:"object",parent:void 0},s=!1;function a(e,t,n,r){o.value=e,o.offset=t,o.length=n,o.type=r,o.colonOffset=void 0,i=o}try{p(e,{onObjectBegin:function(e,o){if(t<=e)throw r;i=void 0,s=t>e,n.push("")},onObjectProperty:function(e,i,o){if(t<i)throw r;if(a(e,i,o,"property"),n[n.length-1]=e,t<=i+o)throw r},onObjectEnd:function(e,o){if(t<=e)throw r;i=void 0,n.pop()},onArrayBegin:function(e,o){if(t<=e)throw r;i=void 0,n.push(0)},onArrayEnd:function(e,o){if(t<=e)throw r;i=void 0,n.pop()},onLiteralValue:function(e,n,i){if(t<n)throw r;if(a(e,n,i,f(e)),t<=n+i)throw r},onSeparator:function(e,o,a){if(t<=o)throw r;if(":"===e&&i&&"property"===i.type)i.colonOffset=o,s=!1,i=void 0;else if(","===e){var c=n[n.length-1];"number"==typeof c?n[n.length-1]=c+1:(s=!0,n[n.length-1]=""),i=void 0}}})}catch(e){if(e!==r)throw e}return{path:n,previousNode:i,isAtPropertyKey:s,matches:function(e){for(var t=0,r=0;t<e.length&&r<n.length;r++)if(e[t]===n[r]||"*"===e[t])t++;else if("**"!==e[t])return!1;return t===e.length}}},w=function(e,t,n){void 0===t&&(t=[]),void 0===n&&(n=l.DEFAULT);var r=null,i=[],o=[];function s(e){Array.isArray(i)?i.push(e):r&&(i[r]=e)}return p(e,{onObjectBegin:function(){var e={};s(e),o.push(i),i=e,r=null},onObjectProperty:function(e){r=e},onObjectEnd:function(){i=o.pop()},onArrayBegin:function(){var e=[];s(e),o.push(i),i=e,r=null},onArrayEnd:function(){i=o.pop()},onLiteralValue:s,onError:function(e,n,r){t.push({error:e,offset:n,length:r})}},n),i[0]},b=d,S=h,_=function e(t,n,r){if(void 0===r&&(r=!1),function(e,t,n){return void 0===n&&(n=!1),t>=e.offset&&t<e.offset+e.length||n&&t===e.offset+e.length}(t,n,r)){var i=t.children;if(Array.isArray(i))for(var o=0;o<i.length&&i[o].offset<=n;o++){var s=e(i[o],n,r);if(s)return s}return t}},P=function e(t){if(!t.parent||!t.parent.children)return[];var n=e(t.parent);if("property"===t.parent.type){var r=t.parent.children[0].value;n.push(r)}else if("array"===t.parent.type){var i=t.parent.children.indexOf(t);-1!==i&&n.push(i)}return n},x=function e(t){switch(t.type){case"array":return t.children.map(e);case"object":for(var n=Object.create(null),r=0,i=t.children;r<i.length;r++){var o=i[r],s=o.children[1];s&&(n[o.children[0].value]=e(s))}return n;case"null":case"string":case"number":case"boolean":return t.value;default:return}},k=p,E=function(e,t){var n,i,o=r(e),s=[],a=0;do{switch(i=o.getPosition(),n=o.scan()){case 12:case 13:case 17:a!==i&&s.push(e.substring(a,i)),void 0!==t&&s.push(o.getTokenValue().replace(/[^\r\n]/g,t)),a=o.getPosition()}}while(17!==n);return s.join("")};function T(e){switch(e){case 1:return"InvalidSymbol";case 2:return"InvalidNumberFormat";case 3:return"PropertyNameExpected";case 4:return"ValueExpected";case 5:return"ColonExpected";case 6:return"CommaExpected";case 7:return"CloseBraceExpected";case 8:return"CloseBracketExpected";case 9:return"EndOfFileExpected";case 10:return"InvalidCommentToken";case 11:return"UnexpectedEndOfComment";case 12:return"UnexpectedEndOfString";case 13:return"UnexpectedEndOfNumber";case 14:return"InvalidUnicode";case 15:return"InvalidEscapeCharacter";case 16:return"InvalidCharacter"}return"<unknown ParseErrorCode>"}function I(e,t,n){return a(e,t,n)}function D(e,t,n,r){return g(e,t,n,r.formattingOptions,r.getInsertionIndex)}function R(e,t){for(var n=t.length-1;n>=0;n--)e=v(e,t[n]);return e}}]);
//# sourceMappingURL=main.js.map