module.exports=function(e){var t={};function __webpack_require__(r){if(t[r])return t[r].exports;var n=t[r]={i:r,l:!1,exports:{}};return e[r].call(n.exports,n,n.exports,__webpack_require__),n.l=!0,n.exports}return __webpack_require__.m=e,__webpack_require__.c=t,__webpack_require__.d=function(e,t,r){__webpack_require__.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},__webpack_require__.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},__webpack_require__.t=function(e,t){if(1&t&&(e=__webpack_require__(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(__webpack_require__.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var n in e)__webpack_require__.d(r,n,function(t){return e[t]}.bind(null,n));return r},__webpack_require__.n=function(e){var t=e&&e.__esModule?function getDefault(){return e.default}:function getModuleExports(){return e};return __webpack_require__.d(t,"a",t),t},__webpack_require__.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},__webpack_require__.p="",__webpack_require__(__webpack_require__.s=498)}([function(e,t,r){"use strict";r.r(t),r.d(t,"__extends",function(){return __extends}),r.d(t,"__assign",function(){return i}),r.d(t,"__rest",function(){return __rest}),r.d(t,"__decorate",function(){return __decorate}),r.d(t,"__param",function(){return __param}),r.d(t,"__metadata",function(){return __metadata}),r.d(t,"__awaiter",function(){return __awaiter}),r.d(t,"__generator",function(){return __generator}),r.d(t,"__exportStar",function(){return __exportStar}),r.d(t,"__values",function(){return __values}),r.d(t,"__read",function(){return __read}),r.d(t,"__spread",function(){return __spread}),r.d(t,"__await",function(){return __await}),r.d(t,"__asyncGenerator",function(){return __asyncGenerator}),r.d(t,"__asyncDelegator",function(){return __asyncDelegator}),r.d(t,"__asyncValues",function(){return __asyncValues}),r.d(t,"__makeTemplateObject",function(){return __makeTemplateObject}),r.d(t,"__importStar",function(){return __importStar}),r.d(t,"__importDefault",function(){return __importDefault});
/*! *****************************************************************************
Copyright (c) Microsoft Corporation. All rights reserved.
Licensed under the Apache License, Version 2.0 (the "License"); you may not use
this file except in compliance with the License. You may obtain a copy of the
License at http://www.apache.org/licenses/LICENSE-2.0

THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
MERCHANTABLITY OR NON-INFRINGEMENT.

See the Apache Version 2.0 License for specific language governing permissions
and limitations under the License.
***************************************************************************** */
var n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(e,t)};function __extends(e,t){function __(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(__.prototype=t.prototype,new __)}var i=function(){return(i=Object.assign||function __assign(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var i in t=arguments[r])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)};function __rest(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(n=Object.getOwnPropertySymbols(e);i<n.length;i++)t.indexOf(n[i])<0&&(r[n[i]]=e[n[i]])}return r}function __decorate(e,t,r,n){var i,o=arguments.length,s=o<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,r,n);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,r,s):i(t,r))||s);return o>3&&s&&Object.defineProperty(t,r,s),s}function __param(e,t){return function(r,n){t(r,n,e)}}function __metadata(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)}function __awaiter(e,t,r,n){return new(r||(r=Promise))(function(i,o){function fulfilled(e){try{step(n.next(e))}catch(e){o(e)}}function rejected(e){try{step(n.throw(e))}catch(e){o(e)}}function step(e){e.done?i(e.value):new r(function(t){t(e.value)}).then(fulfilled,rejected)}step((n=n.apply(e,t||[])).next())})}function __generator(e,t){var r,n,i,o,s={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:verb(0),throw:verb(1),return:verb(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function verb(o){return function(a){return function step(o){if(r)throw new TypeError("Generator is already executing.");for(;s;)try{if(r=1,n&&(i=2&o[0]?n.return:o[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,o[1])).done)return i;switch(n=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return s.label++,{value:o[1],done:!1};case 5:s.label++,n=o[1],o=[0];continue;case 7:o=s.ops.pop(),s.trys.pop();continue;default:if(!(i=(i=s.trys).length>0&&i[i.length-1])&&(6===o[0]||2===o[0])){s=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){s.label=o[1];break}if(6===o[0]&&s.label<i[1]){s.label=i[1],i=o;break}if(i&&s.label<i[2]){s.label=i[2],s.ops.push(o);break}i[2]&&s.ops.pop(),s.trys.pop();continue}o=t.call(e,s)}catch(e){o=[6,e],n=0}finally{r=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,a])}}}function __exportStar(e,t){for(var r in e)t.hasOwnProperty(r)||(t[r]=e[r])}function __values(e){var t="function"==typeof Symbol&&e[Symbol.iterator],r=0;return t?t.call(e):{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}}}function __read(e,t){var r="function"==typeof Symbol&&e[Symbol.iterator];if(!r)return e;var n,i,o=r.call(e),s=[];try{for(;(void 0===t||t-- >0)&&!(n=o.next()).done;)s.push(n.value)}catch(e){i={error:e}}finally{try{n&&!n.done&&(r=o.return)&&r.call(o)}finally{if(i)throw i.error}}return s}function __spread(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(__read(arguments[t]));return e}function __await(e){return this instanceof __await?(this.v=e,this):new __await(e)}function __asyncGenerator(e,t,r){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var n,i=r.apply(e,t||[]),o=[];return n={},verb("next"),verb("throw"),verb("return"),n[Symbol.asyncIterator]=function(){return this},n;function verb(e){i[e]&&(n[e]=function(t){return new Promise(function(r,n){o.push([e,t,r,n])>1||resume(e,t)})})}function resume(e,t){try{!function step(e){e.value instanceof __await?Promise.resolve(e.value.v).then(fulfill,reject):settle(o[0][2],e)}(i[e](t))}catch(e){settle(o[0][3],e)}}function fulfill(e){resume("next",e)}function reject(e){resume("throw",e)}function settle(e,t){e(t),o.shift(),o.length&&resume(o[0][0],o[0][1])}}function __asyncDelegator(e){var t,r;return t={},verb("next"),verb("throw",function(e){throw e}),verb("return"),t[Symbol.iterator]=function(){return this},t;function verb(n,i){t[n]=e[n]?function(t){return(r=!r)?{value:__await(e[n](t)),done:"return"===n}:i?i(t):t}:i}}function __asyncValues(e){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var t,r=e[Symbol.asyncIterator];return r?r.call(e):(e=__values(e),t={},verb("next"),verb("throw"),verb("return"),t[Symbol.asyncIterator]=function(){return this},t);function verb(r){t[r]=e[r]&&function(t){return new Promise(function(n,i){(function settle(e,t,r,n){Promise.resolve(n).then(function(t){e({value:t,done:r})},t)})(n,i,(t=e[r](t)).done,t.value)})}}}function __makeTemplateObject(e,t){return Object.defineProperty?Object.defineProperty(e,"raw",{value:t}):e.raw=t,e}function __importStar(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}function __importDefault(e){return e&&e.__esModule?e:{default:e}}},function(e,t){e.exports=require("util")},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function assertString(e){if(!("string"==typeof e||e instanceof String))throw new TypeError("This library (validator.js) validates strings only")},e.exports=t.default},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(126);t.types=n.types,t.message=n.message,t.filter=n.filter,t.uuid_to_string=n.uuid_to_string,t.generate_uuid=n.generate_uuid,t.string_to_uuid=n.string_to_uuid,t.ReceiverEvents=n.ReceiverEvents,t.SenderEvents=n.SenderEvents,t.ConnectionEvents=n.ConnectionEvents,t.SessionEvents=n.SessionEvents;var i=r(385);t.EventContext=i.EventContext;var o=r(388);t.Container=o.Container;var s=r(221);t.Connection=s.Connection;var a=r(222);t.Session=a.Session;var c=r(386);t.Receiver=c.Receiver;var u=r(387);t.Sender=u.Sender;var l=r(164);t.AmqpResponseStatusCode=l.AmqpResponseStatusCode,t.isAmqpError=l.isAmqpError,t.delay=l.delay,t.messageHeader=l.messageHeader,t.messageProperties=l.messageProperties,t.parseConnectionString=l.parseConnectionString},function(e,t,r){"use strict";e.exports={anHourFromNow:r(181).anHourFromNow,encodeUriComponentStrict:r(181).encodeUriComponentStrict,ConnectionString:r(608).ConnectionString,endpoint:r(609),errors:r(136),results:r(281),ResultWithHttpResponse:r(281).ResultWithHttpResponse,Message:r(610).Message,SharedAccessSignature:r(612).SharedAccessSignature,RetryOperation:r(613).RetryOperation,RetryPolicy:r(182).RetryPolicy,NoRetry:r(182).NoRetry,ExponentialBackOffWithJitter:r(182).ExponentialBackOffWithJitter,AuthenticationProvider:r(282).X509AuthenticationProvider,AuthenticationType:r(282).AuthenticationType,getAgentPlatformString:r(615).getAgentPlatformString,callbackToPromise:r(46).callbackToPromise,doubleValueCallbackToPromise:r(46).doubleValueCallbackToPromise,errorCallbackToPromise:r(46).errorCallbackToPromise,noErrorCallbackToPromise:r(46).noErrorCallbackToPromise,tripleValueCallbackToPromise:r(46).tripleValueCallbackToPromise,httpCallbackToPromise:r(46).httpCallbackToPromise,Callback:r(46).Callback,ErrorCallback:r(46).ErrorCallback,NoErrorCallback:r(46).NoErrorCallback,DoubleValueCallback:r(46).DoubleValueCallback,TripleValueCallback:r(46).TripleValueCallback,HttpResponseCallback:r(46).HttpResponseCallback}},function(e,t){e.exports=require("events")},function(e,t){e.exports=require("path")},function(e,t){e.exports=require("url")},function(e,t,r){"use strict";const n=r(71);t.Constants=r(72),t.WebResource=r(424),t.ServiceClient=r(973),t.HttpOperationResponse=r(431),t.TokenCredentials=r(978),t.BasicAuthenticationCredentials=r(979),t.ApiKeyCredentials=r(980),t.ProxyFilter=r(425),t.LogFilter=r(981),t.SigningFilter=r(427),t.ExponentialRetryPolicyFilter=r(429),t.UserAgentFilter=r(426),t.FormDataFilter=r(428),t.RpRegistrationFilter=r(430),t.requestPipeline=r(237),t.stripResponse=n.stripResponse,t.stripRequest=n.stripRequest,t.isValidUuid=n.isValidUuid,t.homeDir=n.homeDir,t.serializeObject=r(101).serializeObject,t.serialize=r(101).serialize,t.deserialize=r(101).deserialize;const i=r(101);t.addSerializationMixin=function addSerializationMixin(e){["serialize","serializeObject","deserialize"].forEach(t=>{e[t]=i[t]})},t=e.exports},function(e,t,r){"use strict";(t=e.exports).AzureServiceClient=r(423),t.UserTokenCredentials=r(238),t.ApplicationTokenCredentials=r(239),t.DeviceTokenCredentials=r(240),t.CognitiveServicesCredentials=r(984),t.TopicCredentials=r(985),t.MSITokenCredentials=r(168),t.MSIVmTokenCredentials=r(241),t.MSIAppServiceTokenCredentials=r(242),t.KeyVaultCredentials=r(986),t.AzureEnvironment=r(130),t.BaseResource=r(432),t.CloudError=r(433),t.TokenCredentials=r(8).TokenCredentials,t.generateUuid=r(243).generateUuid,t.interactiveLogin=r(60).interactive,t.interactiveLoginWithAuthResponse=r(60).interactiveWithAuthResponse,t.loginWithUsernamePassword=r(60).withUsernamePassword,t.loginWithUsernamePasswordWithAuthResponse=r(60).withUsernamePasswordWithAuthResponse,t.loginWithServicePrincipalSecret=r(60).withServicePrincipalSecret,t.loginWithServicePrincipalSecretWithAuthResponse=r(60).withServicePrincipalSecretWithAuthResponse,t.loginWithAuthFile=r(60).withAuthFile,t.loginWithAuthFileAuthResponse=r(60).withAuthFileWithAuthResponse,t.loginWithMSI=r(60).withMSI,t.loginWithVmMSI=t.loginWithMSI,t.loginWithAppServiceMSI=r(60).withAppServiceMSI},function(e,t){e.exports=require("vscode")},function(e,t){e.exports=require("fs")},function(e,t){e.exports=require("crypto")},function(e,t,r){var n=r(44),i=r(15).Stream,o=r(1),s=/^[a-fA-F0-9]{8}-[a-fA-F0-9]{4}-[a-fA-F0-9]{4}-[a-fA-F0-9]{4}-[a-fA-F0-9]{12}$/;function _capitalize(e){return e.charAt(0).toUpperCase()+e.slice(1)}function _toss(e,t,r,i,s){throw new n.AssertionError({message:o.format("%s (%s) is required",e,t),actual:void 0===s?typeof i:s(i),expected:t,operator:r||"===",stackStartFunction:_toss.caller})}function _getClass(e){return Object.prototype.toString.call(e).slice(8,-1)}function noop(){}var a={bool:{check:function(e){return"boolean"==typeof e}},func:{check:function(e){return"function"==typeof e}},string:{check:function(e){return"string"==typeof e}},object:{check:function(e){return"object"==typeof e&&null!==e}},number:{check:function(e){return"number"==typeof e&&!isNaN(e)}},finite:{check:function(e){return"number"==typeof e&&!isNaN(e)&&isFinite(e)}},buffer:{check:function(e){return Buffer.isBuffer(e)},operator:"Buffer.isBuffer"},array:{check:function(e){return Array.isArray(e)},operator:"Array.isArray"},stream:{check:function(e){return e instanceof i},operator:"instanceof",actual:_getClass},date:{check:function(e){return e instanceof Date},operator:"instanceof",actual:_getClass},regexp:{check:function(e){return e instanceof RegExp},operator:"instanceof",actual:_getClass},uuid:{check:function(e){return"string"==typeof e&&s.test(e)},operator:"isUUID"}};e.exports=function _setExports(e){var t,r=Object.keys(a);return t=process.env.NODE_NDEBUG?noop:function(e,t){e||_toss(t,"true",e)},r.forEach(function(r){if(e)t[r]=noop;else{var n=a[r];t[r]=function(e,t){n.check(e)||_toss(t,r,n.operator,e,n.actual)}}}),r.forEach(function(r){var n="optional"+_capitalize(r);if(e)t[n]=noop;else{var i=a[r];t[n]=function(e,t){null!=e&&(i.check(e)||_toss(t,r,i.operator,e,i.actual))}}}),r.forEach(function(r){var n="arrayOf"+_capitalize(r);if(e)t[n]=noop;else{var i=a[r],o="["+r+"]";t[n]=function(e,t){var r;for(Array.isArray(e)||_toss(t,o,i.operator,e,i.actual),r=0;r<e.length;r++)i.check(e[r])||_toss(t,o,i.operator,e,i.actual)}}}),r.forEach(function(r){var n="optionalArrayOf"+_capitalize(r);if(e)t[n]=noop;else{var i=a[r],o="["+r+"]";t[n]=function(e,t){var r;if(null!=e)for(Array.isArray(e)||_toss(t,o,i.operator,e,i.actual),r=0;r<e.length;r++)i.check(e[r])||_toss(t,o,i.operator,e,i.actual)}}}),Object.keys(n).forEach(function(r){t[r]="AssertionError"!==r&&e?noop:n[r]}),t._setExports=_setExports,t}(process.env.NODE_NDEBUG)},function(e,t,r){var n=r(56),i=n.Buffer;function copyProps(e,t){for(var r in e)t[r]=e[r]}function SafeBuffer(e,t,r){return i(e,t,r)}i.from&&i.alloc&&i.allocUnsafe&&i.allocUnsafeSlow?e.exports=n:(copyProps(n,t),t.Buffer=SafeBuffer),copyProps(i,SafeBuffer),SafeBuffer.from=function(e,t,r){if("number"==typeof e)throw new TypeError("Argument must not be a number");return i(e,t,r)},SafeBuffer.alloc=function(e,t,r){if("number"!=typeof e)throw new TypeError("Argument must be a number");var n=i(e);return void 0!==t?"string"==typeof r?n.fill(t,r):n.fill(t):n.fill(0),n},SafeBuffer.allocUnsafe=function(e){if("number"!=typeof e)throw new TypeError("Argument must be a number");return i(e)},SafeBuffer.allocUnsafeSlow=function(e){if("number"!=typeof e)throw new TypeError("Argument must be a number");return n.SlowBuffer(e)}},function(e,t){e.exports=require("stream")},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n=r(17),i=r(6);var o,s;!function(e){e.CSharp="C#",e.FSharp="F#",e.Go="Go",e.HTTP="HTTP",e.Java="Java",e.Node="Node.js",e.PHP="PHP",e.Python="Python",e.Ruby="Ruby"}(o||(o={})),function(e){e.SendD2C="Send device-to-cloud message",e.MonitorD2C="Monitor device-to-cloud message",e.DeviceManageDeviceTwin="Device - Manage device twin",e.ServiceManageDeviceTwin="Service - Manage device twin",e.ListenForDirectMethod="Listen for direct method",e.CallDirectMethod="Call direct method"}(s||(s={})),function(e){e.Desired="desired",e.Reported="reported"}(t.DeviceTwinPropertyType||(t.DeviceTwinPropertyType={})),function(e){e.OnlyMode="onlyMode",e.OnlySamplingRate="onlySamplingRate",e.All="all"}(t.DistributedSettingUpdateType||(t.DistributedSettingUpdateType={}));class Constants{static initialize(e){Constants.ExtensionContext=e;const t=e.storagePath?e.storagePath:n.tmpdir();Constants.ModuleTwinJosnFilePath=i.join(t,Constants.ModuleTwinJosnFileName),Constants.DeviceTwinJosnFilePath=i.join(t,Constants.DeviceTwinJosnFileName)}}Constants.ExtensionId="vsciot-vscode.azure-iot-toolkit",Constants.CampaignID="vsciottoolkit",Constants.IoTHub="IoT Hub",Constants.IsWelcomePageShown="IsWelcomePageShown",Constants.DeviceConnectionStringKey="deviceConnectionString",Constants.IotHubConnectionStringKey="iotHubConnectionString",Constants.IotHubConnectionStringTitle="IoT Hub Connection String",Constants.IoTHubConsumerGroup="iotHubConsumerGroup",Constants.IoTHubD2CMessageStringifyKey="iotHubD2CMessageStringify",Constants.IoTHubMonitorLabel="IoTHubMonitor",Constants.EventHubMonitorLabel="EventHubMonitor",Constants.IoTHubMessageLabel="D2CMessage",Constants.IoTHubC2DMessageLabel="C2DMessage",Constants.IoTHubC2DMessageMonitorLabel="C2DMessageMonitor",Constants.TreeViewAutoRefreshEnableKey="treeViewAutoRefreshEnable",Constants.TreeViewAutoRefreshIntervalInSecondsKey="treeViewAutoRefreshIntervalInSeconds",Constants.IoTHubDirectMethodLabel="DirectMethod",Constants.IoTHubDeviceTwinLabel="DeviceTwin",Constants.IoTHubModuleTwinLabel="ModuleTwin",Constants.IoTHubDistributedTracingSettingLabel="DistributedTracingSetting",Constants.IoTHubEdgeLabel="Edge",Constants.IoTHubAILoadDeviceTreeEvent="AZ.LoadDeviceTree",Constants.IoTHubAIStartMonitorEvent="AZ.D2C.startMonitoring",Constants.IoTHubAIStopMonitorEvent="AZ.D2C.stopMonitoring",Constants.IoTHubAIMessageStartEvent="AZ.D2C.Send.Start",Constants.IoTHubAIMessageDoneEvent="AZ.D2C.Send.Done",Constants.IoTHubAIStartMonitorC2DEvent="AZ.C2D.startMonitoring",Constants.IoTHubAIStopMonitorC2DEvent="AZ.C2D.stopMonitoring",Constants.IoTHubAIC2DMessageStartEvent="AZ.C2D.Send.Start",Constants.IoTHubAIC2DMessageDoneEvent="AZ.C2D.Send.Done",Constants.IoTHubAIInvokeDeviceMethodEvent="AZ.DeviceMethod.Invoke",Constants.IoTHubAIInvokeModuleMethodEvent="AZ.ModuleMethod.Invoke",Constants.IoTHubAIGetDeviceTwinStartEvent="AZ.DeviceTwin.Get.Start",Constants.IoTHubAIGetDeviceTwinDoneEvent="AZ.DeviceTwin.Get.Done",Constants.IoTHubAIUpdateDeviceTwinEvent="AZ.DeviceTwin.Update",Constants.DeviceTwinJosnFileName="azure-iot-device-twin.json",Constants.IoTHubAIEdgeDeployStartEvent="Edge.Deploy.Start",Constants.IoTHubAIEdgeDeployDoneEvent="AZ.Edge.Deploy.Done",Constants.IoTHubAIEdgeDeployAtScaleStartEvent="Edge.DeployAtScale.Start",Constants.IoTHubAIEdgeDeployAtScaleDoneEvent="AZ.Edge.DeployAtScale.Done",Constants.IoTHubAICreateStartEvent="General.IoTHub.Create.Start",Constants.IoTHubAICreateDoneEvent="AZ.IoTHub.Create.Done",Constants.IoTHubAIGetModuleTwinStartEvent="AZ.ModuleTwin.Get.Start",Constants.IoTHubAIGetModuleTwinDoneEvent="AZ.ModuleTwin.Get.Done",Constants.IoTHubAIUpdateModuleTwinStartEvent="AZ.ModuleTwin.Update.Start",Constants.IoTHubAIUpdateModuleTwinDoneEvent="AZ.ModuleTwin.Update.Done",Constants.ModuleTwinJosnFileName="azure-iot-module-twin.json",Constants.IoTHubAILoadModuleTreeStartEvent="AZ.LoadModuleTree.Start",Constants.IoTHubAILoadModuleTreeDoneEvent="AZ.LoadModuleTree.Done",Constants.IoTHubAILoadEdgeModuleTreeStartEvent="AZ.Edge.LoadModuleTree.Start",Constants.IoTHubAILoadEdgeModuleTreeDoneEvent="AZ.Edge.LoadModuleTree.Done",Constants.IoTHubAICreateModuleStartEvent="AZ.Module.Create.Start",Constants.IoTHubAICreateModuleDoneEvent="AZ.Module.Create.Done",Constants.IoTHubAIDeleteModuleStartEvent="AZ.Module.Delete.Start",Constants.IoTHubAIDeleteModuleDoneEvent="AZ.Module.Delete.Done",Constants.IoTHubAIGetModuleStartEvent="AZ.Module.Get.Start",Constants.IoTHubAIDGetModuleDoneEvent="AZ.Module.Get.Done",Constants.IoTHubAIUpdateDistributedSettingStartEvent="AZ.DistributedTracing.Update.Start",Constants.IoTHubAIUpdateDistributedSettingDoneEvent="AZ.DistributedTracing.Update.Done",Constants.IoTHubAILoadDistributedTracingSettingTreeStartEvent="AZ.LoadDistributedTracingSettingTree.Start",Constants.IoTHubAILoadDistributedTracingSettingTreeDoneEvent="AZ.LoadDistributedTracingSettingTree.Done",Constants.IoTHubAILoadLabelInDeviceTreeDoneEvent="AZ.LoadLabelInDeviceTree.Done",Constants.IoTHubAIStartLoadDeviceTreeEvent="General.StartLoadDeviceTree",Constants.IoTHubAIShowWelcomePagetEvent="General.WelcomePage.Show",Constants.IoTHubAIValidateJsonSchemaEvent="General.ValidateJsonSchema.Done",Constants.IoTHubAILoadEndpointsTreeStartEvent="AZ.LoadEndpointsTree.Start",Constants.IoTHubAILoadEndpointsTreeDoneEvent="AZ.LoadEndpointsTree.Done",Constants.IoTHubAIEHStartMonitorEvent="AZ.EventHub.startMonitoring",Constants.IoTHubAIEHStopMonitorEvent="AZ.EventHub.stopMonitoring",Constants.PercentageLabel="(%)",Constants.NotSetLabel="Not Set",Constants.DisabledLabel="Disabled",Constants.EnabledLabel="Enabled",Constants.DeploymentJsonSchemaUrl="http://json.schemastore.org/azure-iot-edge-deployment-1.0",Constants.CREATE_OPTIONS_MAX_CHUNKS=8,Constants.StateKeySubsID="subscriptionId",Constants.StateKeyIoTHubID="iothubid",Constants.DeleteLabel="Delete",Constants.DeleteMessage="Are you sure you want to delete",Constants.DISTRIBUTED_TWIN_NAME="azureiot*com^dtracing^1",Constants.ConnectionStringFormat={[Constants.IotHubConnectionStringKey]:"HostName=<my-hostname>;SharedAccessKeyName=<my-policy>;SharedAccessKey=<my-policy-key>",[Constants.DeviceConnectionStringKey]:"HostName=<my-hostname>;DeviceId=<known-device-id>;SharedAccessKey=<known-device-key>"},Constants.ConnectionStringRegex={[Constants.IotHubConnectionStringKey]:/^HostName=.+;SharedAccessKeyName=.+;SharedAccessKey=.+$/,[Constants.DeviceConnectionStringKey]:/^HostName=.+;DeviceId=.+;SharedAccessKey=.+$/},Constants.ShowIoTHubInfoKey="showIoTHubInfo",Constants.ShowConnectionStringInputBoxKey="showConnectionStringInputBox",Constants.IoTHubApiVersion="2018-06-30",Constants.CodeTemplates={[o.CSharp]:{[s.SendD2C]:"csharp/sendD2C"},[o.FSharp]:{[s.SendD2C]:"fsharp/sendD2C"},[o.Go]:{[s.SendD2C]:"go/sendD2C.go"},[o.HTTP]:{[s.SendD2C]:"http/sendD2C.http"},[o.Java]:{[s.SendD2C]:"java/sendD2C"},[o.Node]:{[s.SendD2C]:"node/sendD2C.js",[s.MonitorD2C]:"node/monitorD2C.js",[s.DeviceManageDeviceTwin]:"node/deviceManageDeviceTwin.js",[s.ServiceManageDeviceTwin]:"node/serviceManageDeviceTwin.js",[s.ListenForDirectMethod]:"node/listenForDirectMethod.js",[s.CallDirectMethod]:"node/callDirectMethod.js"},[o.PHP]:{[s.SendD2C]:"php/sendD2C.php"},[o.Python]:{[s.SendD2C]:"python/sendD2C.py"},[o.Ruby]:{[s.SendD2C]:"ruby/sendD2C.rb"}},Constants.LanguageIds={[o.Go]:"go",[o.HTTP]:"http",[o.Node]:"javascript",[o.PHP]:"php",[o.Python]:"python",[o.Ruby]:"ruby"},t.Constants=Constants},function(e,t){e.exports=require("os")},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n=r(10),i=r(548),o=r(16),s=r(607),a=r(25),c=n.extensions.getExtension(o.Constants.ExtensionId).packageJSON,u=c.version,l=c.aiKey;class TelemetryClient{static initialize(e){this._extensionContext=e}static sendEvent(e,t,r){t=this.addIoTHubHostName(t,r),this._client.sendTelemetryEvent(e,t),e.startsWith("AZ.")&&e!==o.Constants.IoTHubAILoadDeviceTreeEvent&&this._extensionContext&&s.NSAT.takeSurvey(this._extensionContext)}static addIoTHubHostName(e,t){let r=e||{};if(t||(t=a.Utility.getConnectionStringWithId(o.Constants.IotHubConnectionStringKey))||(t=a.Utility.getConnectionStringWithId(o.Constants.DeviceConnectionStringKey)),t){let e=a.Utility.getHostName(t);e&&(r.IoTHubHostName=a.Utility.hash(e),r.IoTHubHostNamePostfix=a.Utility.getPostfixFromHostName(e))}return r}}TelemetryClient._client=new i.default(o.Constants.ExtensionId,u,l),t.TelemetryClient=TelemetryClient},function(e,t,r){"use strict";var n,i=r(56),o=i.Buffer,s={};for(n in i)i.hasOwnProperty(n)&&"SlowBuffer"!==n&&"Buffer"!==n&&(s[n]=i[n]);var a=s.Buffer={};for(n in o)o.hasOwnProperty(n)&&"allocUnsafe"!==n&&"allocUnsafeSlow"!==n&&(a[n]=o[n]);if(s.Buffer.prototype=o.prototype,a.from&&a.from!==Uint8Array.from||(a.from=function(e,t,r){if("number"==typeof e)throw new TypeError('The "value" argument must not be of type number. Received type '+typeof e);if(e&&void 0===e.length)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof e);return o(e,t,r)}),a.alloc||(a.alloc=function(e,t,r){if("number"!=typeof e)throw new TypeError('The "size" argument must be of type number. Received type '+typeof e);if(e<0||e>=2*(1<<30))throw new RangeError('The value "'+e+'" is invalid for option "size"');var n=o(e);return t&&0!==t.length?"string"==typeof r?n.fill(t,r):n.fill(t):n.fill(0),n}),!s.kStringMaxLength)try{s.kStringMaxLength=process.binding("buffer").kStringMaxLength}catch(e){}s.constants||(s.constants={MAX_LENGTH:s.kMaxLength},s.kStringMaxLength&&(s.constants.MAX_STRING_LENGTH=s.kStringMaxLength)),e.exports=s},function(e,t,r){t=e.exports;var n=r(36);r(648);var i=n.getNodeVersion();if(0===i.major&&i.minor>8&&!(i.minor>10||10===i.minor&&i.patch>=3))throw new Error("The Microsoft Azure node SDK does not work with node versions > 0.9.0 and < 0.10.3. Please upgrade to node >= 0.10.3");t.xmlbuilder=r(140),t.xml2js=r(296),t.Logger=r(188),t.WebResource=r(297),t.StorageServiceClient=r(653),t.ServicePropertiesResult=r(346),t.ServiceStatsParser=r(815),t.AclResult=r(816),t.TokenCredential=r(345),t.LinearRetryPolicyFilter=r(817),t.ExponentialRetryPolicyFilter=r(818),t.RetryPolicyFilter=r(204),t.SharedAccessSignature=r(349),t.SharedKey=r(347),t.BatchOperation=r(819),t.ChunkAllocator=r(820),t.ChunkStream=r(351),t.ChunkStreamWithStream=r(821),t.SpeedSummary=r(822),t.BufferStream=r(343),t.Constants=r(22),t.SR=r(63),t.date=r(823),t.ISO8061Date=r(350),t.util=r(36),t.validate=r(200),t.StorageUtilities=r(139),t.AccessCondition=r(824)},function(e,t){e.exports=require("https")},function(e,t){e.exports;var r=process.env.AZURE_STORAGE_DNS_SUFFIX||"core.windows.net",n={USER_AGENT_PRODUCT_NAME:"Azure-Storage",USER_AGENT_PRODUCT_VERSION:"2.10.2",DEFAULT_PARALLEL_OPERATION_THREAD_COUNT:5,DEFAULT_ENABLE_REUSE_SOCKET:!0,KB:1024,MB:1048576,GB:1073741824,HTTP:"http:",HTTPS:"https:",DEFAULT_HTTP_PORT:80,DEFAULT_HTTPS_PORT:443,DEFAULT_CLIENT_REQUEST_TIMEOUT_IN_MS:12e4,XML_METADATA_MARKER:"$",XML_VALUE_MARKER:"_",ServiceType:{Blob:"blob",Queue:"queue",Table:"table",File:"file"},RequestLocationMode:{PRIMARY_ONLY:0,SECONDARY_ONLY:1,PRIMARY_OR_SECONDARY:2},StorageLocation:{PRIMARY:0,SECONDARY:1},AccountSasConstants:{Permissions:{READ:"r",ADD:"a",CREATE:"c",UPDATE:"u",PROCESS:"p",WRITE:"w",DELETE:"d",LIST:"l"},Services:{BLOB:"b",FILE:"f",QUEUE:"q",TABLE:"t"},Resources:{SERVICE:"s",CONTAINER:"c",OBJECT:"o"},Protocols:{HTTPSONLY:"https",HTTPSORHTTP:"https,http"}},AclConstants:{ACCESS_POLICY:"AccessPolicy",EXPIRY:"Expiry",ID:"Id",PERMISSION:"Permission",SIGNED_IDENTIFIER_ELEMENT:"SignedIdentifier",SIGNED_IDENTIFIERS_ELEMENT:"SignedIdentifiers",START:"Start"},ServicePropertiesConstants:{STORAGE_SERVICE_PROPERTIES_ELEMENT:"StorageServiceProperties",DEFAULT_ANALYTICS_VERSION:"1.0",LOGGING_ELEMENT:"Logging",VERSION_ELEMENT:"Version",DELETE_ELEMENT:"Delete",READ_ELEMENT:"Read",WRITE_ELEMENT:"Write",RETENTION_POLICY_ELEMENT:"RetentionPolicy",ENABLED_ELEMENT:"Enabled",DAYS_ELEMENT:"Days",HOUR_METRICS_ELEMENT:"HourMetrics",MINUTE_METRICS_ELEMENT:"MinuteMetrics",CORS_ELEMENT:"Cors",CORS_RULE_ELEMENT:"CorsRule",ALLOWED_ORIGINS_ELEMENT:"AllowedOrigins",ALLOWED_METHODS_ELEMENT:"AllowedMethods",MAX_AGE_IN_SECONDS_ELEMENT:"MaxAgeInSeconds",EXPOSED_HEADERS_ELEMENT:"ExposedHeaders",ALLOWED_HEADERS_ELEMENT:"AllowedHeaders",INCLUDE_APIS_ELEMENT:"IncludeAPIs",DEFAULT_SERVICE_VERSION_ELEMENT:"DefaultServiceVersion",DEFAULT_DELETE_RETENTION_POLICY_ELEMENT:"DeleteRetentionPolicy",DEFAULT_STATIC_WEBSITE_ELEMENT:"StaticWebsite",DEFAULT_INDEX_DOCUMENT_ELEMENT:"IndexDocument",DEFAULT_ERROR_DOCUMENT_404_PATH_ELEMENT:"ErrorDocument404Path"},BlobConstants:{LATEST_ELEMENT:"Latest",UNCOMMITTED_ELEMENT:"Uncommitted",BLOCK_LIST_ELEMENT:"BlockList",COMMITTED_ELEMENT:"Committed",DEFAULT_WRITE_PAGE_SIZE_IN_BYTES:4194304,MIN_WRITE_PAGE_SIZE_IN_BYTES:2097152,DEFAULT_SINGLE_BLOB_PUT_THRESHOLD_IN_BYTES:33554432,DEFAULT_WRITE_BLOCK_SIZE_IN_BYTES:4194304,DEFAULT_CRITICAL_MEMORY_LIMITATION_32_IN_BYTES:838860800,DEFAULT_CRITICAL_MEMORY_LIMITATION_BROWSER_IN_BYTES:1073741824,DEFAULT_MINIMUM_MEMORY_USAGE_BROWSER_IN_BYTES:4194304,MAX_BLOCK_BLOB_BLOCK_SIZE:104857600,MAX_APPEND_BLOB_BLOCK_SIZE:4194304,MAX_SINGLE_UPLOAD_BLOB_SIZE_IN_BYTES:67108864,MAX_RANGE_GET_SIZE_WITH_MD5:4194304,MAX_UPDATE_PAGE_SIZE:4194304,MAX_QUEUED_WRITE_DISK_BUFFER_SIZE:67108864,MAX_SINGLE_GET_PAGE_RANGE_SIZE:155189248,PAGE_SIZE:512,ResourceTypes:{CONTAINER:"c",BLOB:"b"},ListBlobTypes:{Blob:"b",Directory:"d"},PageWriteOptions:{UPDATE:"update",CLEAR:"clear"},BlobTypes:{BLOCK:"BlockBlob",PAGE:"PageBlob",APPEND:"AppendBlob"},LeaseOperation:{ACQUIRE:"acquire",RENEW:"renew",CHANGE:"change",RELEASE:"release",BREAK:"break"}},FileConstants:{DEFAULT_WRITE_SIZE_IN_BYTES:4194304,MAX_RANGE_GET_SIZE_WITH_MD5:4194304,MAX_UPDATE_FILE_SIZE:4194304,DEFAULT_SINGLE_FILE_GET_THRESHOLD_IN_BYTES:33554432,MIN_WRITE_FILE_SIZE_IN_BYTES:2097152,RangeWriteOptions:{UPDATE:"update",CLEAR:"clear"},ResourceTypes:{SHARE:"s",FILE:"f"}},QueueConstants:{QUEUE_MESSAGE_ELEMENT:"QueueMessage",MESSAGE_TEXT_ELEMENT:"MessageText"},TableConstants:{CHANGESET_DELIMITER:"--changesetresponse_",BATCH_DELIMITER:"--batchresponse_",CONTINUATION_NEXT_ROW_KEY:"x-ms-continuation-nextrowkey",CONTINUATION_NEXT_PARTITION_KEY:"x-ms-continuation-nextpartitionkey",CONTINUATION_NEXT_TABLE_NAME:"x-ms-continuation-nexttablename",NEXT_ROW_KEY:"NextRowKey",NEXT_PARTITION_KEY:"NextPartitionKey",NEXT_TABLE_NAME:"NextTableName",ODATA_PREFIX:"odata.",ODATA_TYPE_SUFFIX:"@odata.type",ODATA_METADATA_MARKER:".metadata",ODATA_VALUE_MARKER:"_",ODATA_TYPE_MARKER:"$",DEFAULT_DATA_SERVICE_VERSION:"3.0;NetFx",TABLE_NAME:"TableName",TABLE_SERVICE_TABLE_NAME:"Tables",Operations:{RETRIEVE:"RETRIEVE",INSERT:"INSERT",REPLACE:"REPLACE",MERGE:"MERGE",DELETE:"DELETE",INSERT_OR_REPLACE:"INSERT_OR_REPLACE",INSERT_OR_MERGE:"INSERT_OR_MERGE"}},HeaderConstants:{ACCEPT_RANGES:"accept_ranges",CONTENT_TRANSFER_ENCODING:"content-transfer-encoding",TRANSFER_ENCODING:"transfer-encoding",SERVER:"server",LOCATION:"location",LAST_MODIFIED:"Last-Modified",CREATION_TIME:"x-ms-creation-time",DATA_SERVICE_VERSION:"dataserviceversion",MAX_DATA_SERVICE_VERSION:"maxdataserviceversion",PREFIX_FOR_STORAGE:"x-ms-",CLIENT_REQUEST_ID:"x-ms-client-request-id",APPROXIMATE_MESSAGES_COUNT:"x-ms-approximate-messages-count",AUTHORIZATION:"authorization",FORCE_NO_CACHE_IN_BROWSER:"_",BLOB_PUBLIC_ACCESS:"x-ms-blob-public-access",HAS_IMMUTABILITY_POLICY:"x-ms-has-immutability-policy",HAS_LEGAL_HOLD:"x-ms-has-legal-hold",BLOB_TYPE:"x-ms-blob-type",TYPE:"x-ms-type",BLOCK_BLOB:"blockblob",CACHE_CONTROL:"cache-control",BLOB_CACHE_CONTROL:"x-ms-blob-cache-control",FILE_CACHE_CONTROL:"x-ms-cache-control",COPY_STATUS:"x-ms-copy-status",COPY_COMPLETION_TIME:"x-ms-copy-completion-time",COPY_STATUS_DESCRIPTION:"x-ms-copy-status-description",COPY_ID:"x-ms-copy-id",COPY_PROGRESS:"x-ms-copy-progress",COPY_ACTION:"x-ms-copy-action",INCREMENTAL_COPY:"x-ms-incremental-copy",COPY_DESTINATION_SNAPSHOT:"x-ms-copy-destination-snapshot",CONTENT_ID:"content-id",CONTENT_ENCODING:"content-encoding",BLOB_CONTENT_ENCODING:"x-ms-blob-content-encoding",FILE_CONTENT_ENCODING:"x-ms-content-encoding",CONTENT_LANGUAGE:"content-language",BLOB_CONTENT_LANGUAGE:"x-ms-blob-content-language",FILE_CONTENT_LANGUAGE:"x-ms-content-language",CONTENT_LENGTH:"content-length",BLOB_CONTENT_LENGTH:"x-ms-blob-content-length",FILE_CONTENT_LENGTH:"x-ms-content-length",CONTENT_DISPOSITION:"content-disposition",BLOB_CONTENT_DISPOSITION:"x-ms-blob-content-disposition",FILE_CONTENT_DISPOSITION:"x-ms-content-disposition",CONTENT_MD5:"content-md5",BLOB_CONTENT_MD5:"x-ms-blob-content-md5",FILE_CONTENT_MD5:"x-ms-content-md5",CONTENT_RANGE:"cache-range",CONTENT_TYPE:"content-type",BLOB_CONTENT_TYPE:"x-ms-blob-content-type",FILE_CONTENT_TYPE:"x-ms-content-type",COPY_SOURCE:"x-ms-copy-source",DATE:"date",MS_DATE:"x-ms-date",DELETE_SNAPSHOT:"x-ms-delete-snapshots",ETAG:"etag",IF_MATCH:"if-match",IF_MODIFIED_SINCE:"if-modified-since",IF_NONE_MATCH:"if-none-match",IF_UNMODIFIED_SINCE:"if-unmodified-since",INCLUDE_SNAPSHOTS_VALUE:"include",JSON_CONTENT_TYPE_VALUE:"application/json",SKU_NAME:"x-ms-sku-name",ACCOUNT_KIND:"x-ms-account-kind",LEASE_ID:"x-ms-lease-id",LEASE_BREAK_PERIOD:"x-ms-lease-break-period",PROPOSED_LEASE_ID:"x-ms-proposed-lease-id",LEASE_DURATION:"x-ms-lease-duration",SOURCE_LEASE_ID:"x-ms-source-lease-id",LEASE_TIME:"x-ms-lease-time",LEASE_STATUS:"x-ms-lease-status",LEASE_STATE:"x-ms-lease-state",PAGE_BLOB:"PageBlob",PAGE_WRITE:"x-ms-page-write",FILE_WRITE:"x-ms-write",PREFER:"Prefer",PREFER_CONTENT:"return-content",PREFER_NO_CONTENT:"return-no-content",PREFIX_FOR_STORAGE_METADATA:"x-ms-meta-",PREFIX_FOR_STORAGE_PROPERTIES:"x-ms-prop-",RANGE:"Range",SOURCE_RANGE:"x-ms-source-range",RANGE_GET_CONTENT_MD5:"x-ms-range-get-content-md5",RANGE_HEADER_FORMAT:"bytes:%d-%d",REQUEST_ID:"x-ms-request-id",SEQUENCE_NUMBER:"x-ms-blob-sequence-number",SEQUENCE_NUMBER_EQUAL:"x-ms-if-sequence-number-eq",SEQUENCE_NUMBER_LESS_THAN:"x-ms-if-sequence-number-lt",SEQUENCE_NUMBER_LESS_THAN_OR_EQUAL:"x-ms-if-sequence-number-le",SEQUENCE_NUMBER_ACTION:"x-ms-sequence-number-action",SIZE:"x-ms-blob-content-length",SNAPSHOT:"x-ms-snapshot",SNAPSHOTS_ONLY_VALUE:"only",SOURCE_IF_MATCH:"x-ms-source-if-match",SOURCE_IF_MODIFIED_SINCE:"x-ms-source-if-modified-since",SOURCE_IF_NONE_MATCH:"x-ms-source-if-none-match",SOURCE_IF_UNMODIFIED_SINCE:"x-ms-source-if-unmodified-since",STORAGE_RANGE:"x-ms-range",STORAGE_VERSION:"x-ms-version",TARGET_STORAGE_VERSION:"2018-03-28",USER_AGENT:"user-agent",POP_RECEIPT:"x-ms-popreceipt",TIME_NEXT_VISIBLE:"x-ms-time-next-visible",APPROXIMATE_MESSAGE_COUNT:"x-ms-approximate-message-count",LEASE_ACTION:"x-ms-lease-action",ACCEPT:"accept",ACCEPT_CHARSET:"Accept-Charset",HOST:"host",CORRELATION_ID:"x-ms-correlation-id",GROUP_ID:"x-ms-group-id",SHARE_QUOTA:"x-ms-share-quota",BLOB_CONDITION_MAX_SIZE:"x-ms-blob-condition-maxsize",BLOB_CONDITION_APPEND_POSITION:"x-ms-blob-condition-appendpos",BLOB_APPEND_OFFSET:"x-ms-blob-append-offset",BLOB_COMMITTED_BLOCK_COUNT:"x-ms-blob-committed-block-count",REQUEST_SERVER_ENCRYPTED:"x-ms-request-server-encrypted",SERVER_ENCRYPTED:"x-ms-server-encrypted",ACCESS_TIER:"x-ms-access-tier",ACCESS_TIER_CHANGE_TIME:"x-ms-access-tier-change-time",ACCESS_TIER_INFERRED:"x-ms-access-tier-inferred",ARCHIVE_STATUS:"x-ms-archive-status"},QueryStringConstants:{API_VERSION:"api-version",COMP:"comp",RESTYPE:"restype",COPY_ID:"copyid",SNAPSHOT:"snapshot",SHARE_SNAPSHOT:"sharesnapshot",PREV_SNAPSHOT:"prevsnapshot",TIMEOUT:"timeout",SIGNED_START:"st",SIGNED_EXPIRY:"se",SIGNED_RESOURCE:"sr",SIGNED_PERMISSIONS:"sp",SIGNED_SERVICES:"ss",SIGNED_RESOURCE_TYPES:"srt",SIGNED_IP:"sip",SIGNED_PROTOCOL:"spr",SIGNED_IDENTIFIER:"si",SIGNATURE:"sig",SIGNED_VERSION:"sv",CACHE_CONTROL:"rscc",CONTENT_TYPE:"rsct",CONTENT_ENCODING:"rsce",CONTENT_LANGUAGE:"rscl",CONTENT_DISPOSITION:"rscd",BLOCK_ID:"blockid",BLOCK_LIST_TYPE:"blocklisttype",PREFIX:"prefix",MARKER:"marker",MAX_RESULTS:"maxresults",DELIMITER:"delimiter",INCLUDE:"include",PEEK_ONLY:"peekonly",NUM_OF_MESSAGES:"numofmessages",POP_RECEIPT:"popreceipt",VISIBILITY_TIMEOUT:"visibilitytimeout",MESSAGE_TTL:"messagettl",SELECT:"$select",FILTER:"$filter",TOP:"$top",SKIP:"$skip",NEXT_PARTITION_KEY:"NextPartitionKey",NEXT_ROW_KEY:"NextRowKey",LOCK_ID:"lockid",TABLENAME:"tn",STARTPK:"spk",STARTRK:"srk",ENDPK:"epk",ENDRK:"erk"},StorageServiceClientConstants:{DEFAULT_PROTOCOL:"https:",EnvironmentVariables:{AZURE_STORAGE_ACCOUNT:"AZURE_STORAGE_ACCOUNT",AZURE_STORAGE_ACCESS_KEY:"AZURE_STORAGE_ACCESS_KEY",AZURE_STORAGE_DNS_SUFFIX:"AZURE_STORAGE_DNS_SUFFIX",AZURE_STORAGE_CONNECTION_STRING:"AZURE_STORAGE_CONNECTION_STRING",HTTP_PROXY:"HTTP_PROXY",HTTPS_PROXY:"HTTPS_PROXY",EMULATED:"EMULATED"},DEVSTORE_STORAGE_ACCOUNT:"devstoreaccount1",DEVSTORE_STORAGE_ACCESS_KEY:"Eby8vdM02xNOcqFlqUwJPLlmEtlCDXJ1OUzFT50uSRZ6IFsuFq2UVErCz4I6tq/K1SZFPTOtr/KBHBeksoGMGw==",DEV_STORE_URI:"http://127.0.0.1",DEVSTORE_DEFAULT_PROTOCOL:"http://",DEVSTORE_BLOB_HOST:"127.0.0.1:10000",DEVSTORE_QUEUE_HOST:"127.0.0.1:10001",DEVSTORE_TABLE_HOST:"127.0.0.1:10002",CLOUD_BLOB_HOST:"blob."+r,CLOUD_QUEUE_HOST:"queue."+r,CLOUD_TABLE_HOST:"table."+r,CLOUD_FILE_HOST:"file."+r},HttpConstants:{HttpVerbs:{PUT:"PUT",GET:"GET",DELETE:"DELETE",POST:"POST",MERGE:"MERGE",HEAD:"HEAD"},HttpResponseCodes:{Ok:200,Created:201,Accepted:202,NoContent:204,PartialContent:206,BadRequest:400,Unauthorized:401,Forbidden:403,NotFound:404,Conflict:409,LengthRequired:411,PreconditionFailed:412}},CompatibleVersionConstants:{AUGUST_2013:"2013-08-15",FEBRUARY_2012:"2012-02-12"},BlobErrorCodeStrings:{INVALID_BLOCK_ID:"InvalidBlockId",BLOB_NOT_FOUND:"BlobNotFound",BLOB_ALREADY_EXISTS:"BlobAlreadyExists",CONTAINER_ALREADY_EXISTS:"ContainerAlreadyExists",CONTAINER_NOT_FOUND:"ContainerNotFound",INVALID_BLOB_OR_BLOCK:"InvalidBlobOrBlock",INVALID_BLOCK_LIST:"InvalidBlockList"},FileErrorCodeStrings:{SHARE_ALREADY_EXISTS:"ShareAlreadyExists",SHARE_NOT_FOUND:"ShareNotFound",FILE_NOT_FOUND:"FileNotFound"},QueueErrorCodeStrings:{QUEUE_NOT_FOUND:"QueueNotFound",QUEUE_DISABLED:"QueueDisabled",QUEUE_ALREADY_EXISTS:"QueueAlreadyExists",QUEUE_NOT_EMPTY:"QueueNotEmpty",QUEUE_BEING_DELETED:"QueueBeingDeleted",POP_RECEIPT_MISMATCH:"PopReceiptMismatch",INVALID_PARAMETER:"InvalidParameter",MESSAGE_NOT_FOUND:"MessageNotFound",MESSAGE_TOO_LARGE:"MessageTooLarge",INVALID_MARKER:"InvalidMarker"},StorageErrorCodeStrings:{CONDITION_NOT_MET:"ConditionNotMet",MISSING_REQUIRED_HEADER:"MissingRequiredHeader",MISSING_REQUIRED_XML_NODE:"MissingRequiredXmlNode",UNSUPPORTED_HEADER:"UnsupportedHeader",UNSUPPORTED_XML_NODE:"UnsupportedXmlNode",INVALID_HEADER_VALUE:"InvalidHeaderValue",INVALID_XML_NODE_VALUE:"InvalidXmlNodeValue",MISSING_REQUIRED_QUERY_PARAMETER:"MissingRequiredQueryParameter",UNSUPPORTED_QUERY_PARAMETER:"UnsupportedQueryParameter",INVALID_QUERY_PARAMETER_VALUE:"InvalidQueryParameterValue",OUT_OF_RANGE_QUERY_PARAMETER_VALUE:"OutOfRangeQueryParameterValue",REQUEST_URL_FAILED_TO_PARSE:"RequestUrlFailedToParse",INVALID_URI:"InvalidUri",INVALID_HTTP_VERB:"InvalidHttpVerb",EMPTY_METADATA_KEY:"EmptyMetadataKey",INVALID_XML_DOCUMENT:"InvalidXmlDocument",MD5_MISMATCH:"Md5Mismatch",INVALID_MD5:"InvalidMd5",OUT_OF_RANGE_INPUT:"OutOfRangeInput",INVALID_AUTHENTICATION_INFO:"InvalidAuthenticationInfo",INVALID_INPUT:"InvalidInput",INVALID_METADATA:"InvalidMetadata",INVALID_RESOURCE_NAME:"InvalidResourceName",METADATA_TOO_LARGE:"MetadataTooLarge",CONDITION_HEADER_NOT_SUPPORTED:"ConditionHeadersNotSupported",MULTIPLE_CONDITION_HEADER_NOT_SUPPORTED:"MultipleConditionHeadersNotSupported",AUTHENTICATION_FAILED:"AuthenticationFailed",INSUFFICIENT_ACCOUNT_PERMISSIONS:"InsufficientAccountPermissions",RESOURCE_NOT_FOUND:"ResourceNotFound",ACCOUNT_IS_DISABLED:"AccountIsDisabled",UNSUPPORTED_HTTP_VERB:"UnsupportedHttpVerb",ACCOUNT_ALREADY_EXISTS:"AccountAlreadyExists",ACCOUNT_BEING_CREATED:"AccountBeingCreated",RESOURCE_ALREADY_EXISTS:"ResourceAlreadyExists",RESOURCE_TYPE_MISMATCH:"ResourceTypeMismatch",MISSING_CONTENT_LENGTH_HEADER:"MissingContentLengthHeader",REQUEST_BODY_TOO_LARGE:"RequestBodyTooLarge",INVALID_RANGE:"InvalidRange",INTERNAL_ERROR:"InternalError",OPERATION_TIMED_OUT:"OperationTimedOut",SERVER_BUSY:"ServerBusy",UPDATE_CONDITION_NOT_SATISFIED:"UpdateConditionNotSatisfied",CONTAINER_NOT_FOUND:"ContainerNotFound",CONTAINER_ALREADY_EXISTS:"ContainerAlreadyExists",CONTAINER_DISABLED:"ContainerDisabled",CONTAINER_BEING_DELETED:"ContainerBeingDeleted"},TableErrorCodeStrings:{XMETHOD_NOT_USING_POST:"XMethodNotUsingPost",XMETHOD_INCORRECT_VALUE:"XMethodIncorrectValue",XMETHOD_INCORRECT_COUNT:"XMethodIncorrectCount",TABLE_HAS_NO_PROPERTIES:"TableHasNoProperties",DUPLICATE_PROPERTIES_SPECIFIED:"DuplicatePropertiesSpecified",TABLE_HAS_NO_SUCH_PROPERTY:"TableHasNoSuchProperty",DUPLICATE_KEY_PROPERTY_SPECIFIED:"DuplicateKeyPropertySpecified",TABLE_ALREADY_EXISTS:"TableAlreadyExists",TABLE_NOT_FOUND:"TableNotFound",ENTITY_NOT_FOUND:"EntityNotFound",ENTITY_ALREADY_EXISTS:"EntityAlreadyExists",PARTITION_KEY_NOT_SPECIFIED:"PartitionKeyNotSpecified",OPERATOR_INVALID:"OperatorInvalid",UPDATE_CONDITION_NOT_SATISFIED:"UpdateConditionNotSatisfied",PROPERTIES_NEED_VALUE:"PropertiesNeedValue",PARTITION_KEY_PROPERTY_CANNOT_BE_UPDATED:"PartitionKeyPropertyCannotBeUpdated",TOO_MANY_PROPERTIES:"TooManyProperties",ENTITY_TOO_LARGE:"EntityTooLarge",PROPERTY_VALUE_TOO_LARGE:"PropertyValueTooLarge",INVALID_VALUE_TYPE:"InvalidValueType",TABLE_BEING_DELETED:"TableBeingDeleted",TABLE_SERVER_OUT_OF_MEMORY:"TableServerOutOfMemory",PRIMARY_KEY_PROPERTY_IS_INVALID_TYPE:"PrimaryKeyPropertyIsInvalidType",PROPERTY_NAME_TOO_LONG:"PropertyNameTooLong",PROPERTY_NAME_INVALID:"PropertyNameInvalid",BATCH_OPERATION_NOT_SUPPORTED:"BatchOperationNotSupported",JSON_FORMAT_NOT_SUPPORTED:"JsonFormatNotSupported",METHOD_NOT_ALLOWED:"MethodNotAllowed",NOT_IMPLEMENTED:"NotImplemented"},ConnectionStringKeys:{USE_DEVELOPMENT_STORAGE_NAME:"UseDevelopmentStorage",DEVELOPMENT_STORAGE_PROXY_URI_NAME:"DevelopmentStorageProxyUri",DEFAULT_ENDPOINTS_PROTOCOL_NAME:"DefaultEndpointsProtocol",ACCOUNT_NAME_NAME:"AccountName",ACCOUNT_KEY_NAME:"AccountKey",BLOB_ENDPOINT_NAME:"BlobEndpoint",FILE_ENDPOINT_NAME:"FileEndpoint",QUEUE_ENDPOINT_NAME:"QueueEndpoint",TABLE_ENDPOINT_NAME:"TableEndpoint",SHARED_ACCESS_SIGNATURE_NAME:"SharedAccessSignature",ENDPOINT_SUFFIX_NAME:"EndpointSuffix",BLOB_BASE_DNS_NAME:"blob.core.windows.net",FILE_BASE_DNS_NAME:"file.core.windows.net",QUEUE_BASE_DNS_NAME:"queue.core.windows.net",TABLE_BASE_DNS_NAME:"table.core.windows.net"}};e.exports=n},function(e,t){e.exports=require("http")},function(e,t,r){"use strict";var n=r(9);t.BaseResource=n.BaseResource,t.CloudError=n.CloudError,t.DeploymentExtendedFilter=r(1238),t.GenericResourceFilter=r(1239),t.ResourceGroupFilter=r(1240),t.TemplateLink=r(1241),t.ParametersLink=r(1242),t.DebugSetting=r(1243),t.DeploymentProperties=r(1244),t.Deployment=r(1245),t.DeploymentExportResult=r(1246),t.ResourceManagementErrorWithDetails=r(1247),t.AliasPathType=r(1248),t.AliasType=r(1249),t.ProviderResourceType=r(1250),t.Provider=r(1251),t.BasicDependency=r(1252),t.Dependency=r(1253),t.DeploymentPropertiesExtended=r(1254),t.DeploymentValidateResult=r(1255),t.DeploymentExtended=r(1256),t.DeploymentListResult=r(486),t.ProviderListResult=r(487),t.Plan=r(1257),t.Sku=r(1258),t.Identity=r(1259),t.Resource=r(1260),t.GenericResource=r(1261),t.ResourceListResult=r(488),t.ResourceGroupProperties=r(1262),t.ResourceGroup=r(1263),t.ResourceGroupListResult=r(489),t.ResourcesMoveInfo=r(1264),t.ExportTemplateRequest=r(1265),t.TagCount=r(1266),t.TagValue=r(1267),t.TagDetails=r(1268),t.TagsListResult=r(490),t.TargetResource=r(1269),t.HttpMessage=r(1270),t.DeploymentOperationProperties=r(1271),t.DeploymentOperation=r(1272),t.DeploymentOperationsListResult=r(491),t.ResourceProviderOperationDisplayProperties=r(1273),t.SubResource=r(1274),t.ResourceGroupExportResult=r(1275),t.DeploymentListResult=r(486),t.ProviderListResult=r(487),t.ResourceListResult=r(488),t.ResourceGroupListResult=r(489),t.TagsListResult=r(490),t.DeploymentOperationsListResult=r(491)},function(e,t,r){"use strict";var n=this&&this.__awaiter||function(e,t,r,n){return new(r||(r=Promise))(function(i,o){function fulfilled(e){try{step(n.next(e))}catch(e){o(e)}}function rejected(e){try{step(n.throw(e))}catch(e){o(e)}}function step(e){e.done?i(e.value):new r(function(t){t(e.value)}).then(fulfilled,rejected)}step((n=n.apply(e,t||[])).next())})};Object.defineProperty(t,"__esModule",{value:!0});const i=r(88),o=r(67),s=r(12),a=r(11),c=r(17),u=r(6),l=r(10),p=r(16),d=r(888),h=r(889),f=r(377),m=r(378),g=r(18);class Utility{static getConfiguration(){return l.workspace.getConfiguration("azure-iot-toolkit")}static getConnectionString(e,t,r=!0){return n(this,void 0,void 0,function*(){const n=this.getConnectionStringWithId(e);return!n&&r?this.setConnectionString(e,t):n})}static setConnectionString(e,t){return n(this,void 0,void 0,function*(){return g.TelemetryClient.sendEvent("General.SetConfig.Popup"),new Promise((r,i)=>{let o;const s=l.window.createInputBox();s.prompt=t,s.placeholder=p.Constants.ConnectionStringFormat[e],s.ignoreFocusOut=!0,s.onDidAccept(()=>n(this,void 0,void 0,function*(){if(o=s.value,this.isValidConnectionString(e,o)){g.TelemetryClient.sendEvent("General.SetConfig.Done",{Result:"Success"});let t=Utility.getConfiguration();yield t.update(e,o,!0),e===p.Constants.IotHubConnectionStringKey&&(yield Utility.deleteIoTHubInfo()),r(o),s.dispose()}else g.TelemetryClient.sendEvent("General.SetConfig.Done",{Result:"Fail"}),l.commands.executeCommand("markdown.showPreview",l.Uri.file(p.Constants.ExtensionContext.asAbsolutePath(u.join("resources","iot-hub-connection-string.md")))),s.validationMessage=`The format should be "${p.Constants.ConnectionStringFormat[e]}"`})),s.onDidHide(()=>{r(),s.dispose(),o||this.showIoTHubInformationMessage()}),s.show()})})}static getConnectionStringWithId(e){let t=Utility.getConfiguration().get(e);return this.isValidConnectionString(e,t)?t:null}static getConfig(e){return Utility.getConfiguration().get(e)}static getHostName(e){let t=/^HostName=([^=]+);/.exec(e);return t?t[1]:""}static getPostfixFromHostName(e){let t=/^[^.]+\.(.+)$/.exec(e);return t?t[1]:""}static hash(e){return s.createHash("sha256").update(e).digest("hex")}static generateSasTokenForService(e,t=1){const r=o.ConnectionString.parse(e),n=Math.floor(Date.now()/1e3)+60*t*60;return o.SharedAccessSignature.create(r.HostName,r.SharedAccessKeyName,r.SharedAccessKey,n).toString()}static generateSasTokenForDevice(e,t=1){const r=i.ConnectionString.parse(e),n=Math.floor(Date.now()/1e3)+60*t*60;return i.SharedAccessSignature.create(r.HostName,r.DeviceId,r.SharedAccessKey,n).toString()}static adjustTerminalCommand(e){return"linux"===c.platform()||"darwin"===c.platform()?`sudo ${e}`:e}static adjustFilePath(e){if("win32"!==c.platform())return e;const t=l.workspace.getConfiguration("terminal").get("integrated.shell.windows");if(!t)return e;const r=Utility.getConfiguration().get("terminalRoot");if(r)return e.replace(/^([A-Za-z]):/,(e,t)=>`${r}${t.toLowerCase()}`).replace(/\\/g,"/");let n=t.toLowerCase();return n.indexOf("bash")>-1&&n.indexOf("git")>-1?e.replace(/^([A-Za-z]):/,(e,t)=>`/${t.toLowerCase()}`).replace(/\\/g,"/"):n.indexOf("bash")>-1&&n.indexOf("windows")>-1?e.replace(/^([A-Za-z]):/,(e,t)=>`/mnt/${t.toLowerCase()}`).replace(/\\/g,"/"):e}static getDefaultPath(e){if(e){const t=l.workspace.workspaceFolders?u.join(l.workspace.workspaceFolders[0].uri.fsPath,e):`*/${e}`;return l.Uri.file(t)}return l.workspace.workspaceFolders?l.workspace.workspaceFolders[0].uri:void 0}static writeFile(e,t){a.writeFile(e.fsPath,t,t=>{t?l.window.showErrorMessage(t.message):l.window.showTextDocument(e)})}static getModuleItems(e,t,r){return n(this,void 0,void 0,function*(){return(yield Utility.getModules(e,t.deviceId)).map(e=>{const n="Connected"===e.connectionState?"on":"off",i=r.asAbsolutePath(u.join("resources",`module-${n}.svg`));return new h.ModuleItem(t,e.moduleId,e.connectionString,e.connectionState,null,i,"module")})})}static getModuleItemsForEdge(e,t,r){return n(this,void 0,void 0,function*(){const[n,i]=yield Promise.all([Utility.getModules(e,t.deviceId),Utility.getModuleTwin(e,t.deviceId,"$edgeAgent")]),o=i.properties.desired,s=i.properties.reported;return n.map(e=>{let n="Connected"===e.connectionState;"$edgeHub"===e.moduleId&&(n=n||"Connected"===i.connectionState)&&(e.connectionState="Connected");const a=n?"on":"off",c=r.asAbsolutePath(u.join("resources",`module-${a}.svg`));if(e.moduleId.startsWith("$")){const r=e.moduleId.substring(1);if(o.systemModules&&o.systemModules[r])return new h.ModuleItem(t,e.moduleId,e.connectionString,e.connectionState,n&&s?this.getModuleRuntimeStatus(r,s.systemModules):void 0,c,"edge-module")}else if(o.modules&&o.modules[e.moduleId])return new h.ModuleItem(t,e.moduleId,e.connectionString,e.connectionState,n&&s?this.getModuleRuntimeStatus(e.moduleId,s.modules):void 0,c,"edge-module");const l=e.moduleId.startsWith("$")?"edge-module":"module";return new h.ModuleItem(t,e.moduleId,e.connectionString,e.connectionState,null,c,l)}).filter(e=>e)})}static getModules(e,t){return n(this,void 0,void 0,function*(){const r=o.Registry.fromConnectionString(e),n=Utility.getHostName(e);return new Promise((e,i)=>{r.getModulesOnDevice(t,(r,o)=>{r?i(r):e(o.map(e=>(e.authentication.symmetricKey.primaryKey&&(e.connectionString=Utility.createModuleConnectionString(n,t,e.moduleId,e.authentication.symmetricKey.primaryKey)),e)))})})})}static getModuleTwin(e,t,r){return n(this,void 0,void 0,function*(){const n=o.Registry.fromConnectionString(e);return(yield n.getModuleTwin(t,r)).responseBody})}static updateModuleTwin(e,t,r,i){return n(this,void 0,void 0,function*(){const n=o.Registry.fromConnectionString(e);yield n.updateModuleTwin(t,r,i,"*")})}static readFromActiveFile(e){return n(this,void 0,void 0,function*(){const t=l.window.activeTextEditor;if(!t||!t.document||u.basename(t.document.fileName)!==e)return l.window.showWarningMessage(`Please open ${e} and try again.`),"";const r=t.document;return yield r.save(),r.getText()})}static writeJson(e,t){const r=u.dirname(e);a.existsSync(r)||a.mkdirSync(r),a.writeFileSync(e,`${JSON.stringify(t,null,4)}`)}static getInputDevice(e,t,r=!1,i){return n(this,void 0,void 0,function*(){if(e)return t&&g.TelemetryClient.sendEvent(t,{entry:"contextMenu",deviceType:e.contextValue}),e;{if(t&&g.TelemetryClient.sendEvent(t,{entry:"commandPalette"}),!i&&!(i=yield Utility.getConnectionString(p.Constants.IotHubConnectionStringKey,p.Constants.IotHubConnectionStringTitle)))return null;const n=Utility.getFilteredDeviceList(i,r);return e=yield l.window.showQuickPick(n,{placeHolder:"Select an IoT Hub device"})}})}static getDeviceList(e,t){return n(this,void 0,void 0,function*(){const[r,n]=yield Promise.all([Utility.getIoTDeviceList(e),Utility.getEdgeDeviceIdSet(e)]);return r.map(e=>{const r="Connected"===e.connectionState.toString(),i=r?"on":"off";let o;return r&&(e.description=e.connectionState.toString()),n.has(e.deviceId)?(o="edge",e.contextValue="edge"):o="device",t&&(e.iconPath=t.asAbsolutePath(u.join("resources",`${o}-${i}.svg`))),e})})}static getNoneEdgeDeviceIdList(e){return n(this,void 0,void 0,function*(){const t=yield this.queryDeviceTwins(e,!1),r=[];for(const e of t)r.push(e.deviceId);return r})}static isValidTargetCondition(e){return/^(\*|((deviceId|tags\..+|properties\.reported\..+).*=.+))$/.test(e)}static getResourceGroupNameFromId(e){return/resourceGroups\/([^\/]+)\//.exec(e)[1]}static createModuleConnectionString(e,t,r,n){return`HostName=${e};DeviceId=${t};ModuleId=${r};SharedAccessKey=${n}`}static getDefaultTreeItems(){g.TelemetryClient.sendEvent("General.Load.DefaultTreeItems");const e=[];return e.push(new f.CommandNode("-> Set IoT Hub Connection String","azure-iot-toolkit.setIoTHubConnectionString")),e.push(new f.CommandNode("-> Select IoT Hub","azure-iot-toolkit.selectIoTHub")),e.push(new f.CommandNode("-> Create IoT Hub","azure-iot-toolkit.createIoTHub")),e}static getErrorMessageTreeItems(e,t){const r=[];return r.push(new m.InfoNode(`Failed to list ${e}`)),r.push(new m.InfoNode(`Error: ${t}`)),r.push(new m.InfoNode("Try another IoT Hub?")),r.push(...this.getDefaultTreeItems()),r}static parseReportedSamplingMode(e){const t=e.properties.reported[p.Constants.DISTRIBUTED_TWIN_NAME];if(void 0!==t.sampling_mode&&void 0!==t.sampling_mode.value)return 1===e.properties.reported[p.Constants.DISTRIBUTED_TWIN_NAME].sampling_mode.value}static parseReportedSamplingRate(e){if(void 0!==e.properties.reported[p.Constants.DISTRIBUTED_TWIN_NAME].sampling_rate)return e.properties.reported[p.Constants.DISTRIBUTED_TWIN_NAME].sampling_rate.value}static parseDesiredSamplingMode(e){if(void 0!==e.properties.desired[p.Constants.DISTRIBUTED_TWIN_NAME].sampling_mode)return 1===e.properties.desired[p.Constants.DISTRIBUTED_TWIN_NAME].sampling_mode}static parseDesiredSamplingRate(e){return e.properties.desired[p.Constants.DISTRIBUTED_TWIN_NAME].sampling_rate}static getTwin(e,t){return n(this,void 0,void 0,function*(){return(yield e.getTwin(t)).responseBody})}static getAzureAccountApi(){return l.extensions.getExtension("ms-vscode.azure-account").exports}static getMessageFromEventData(e){const t=Utility.getConfiguration().get("showVerboseMessage");let r;const n=Utility.tryGetStringFromCharCode(e.body);return r=t?{body:n,applicationProperties:e.applicationProperties,annotations:e.annotations,properties:e.properties}:e.applicationProperties&&Object.keys(e.applicationProperties).length>0?{body:n,applicationProperties:e.applicationProperties}:n}static getTimeMessageFromEventData(e){return e.enqueuedTimeUtc?`[${e.enqueuedTimeUtc.toLocaleTimeString("en-US")}] `:""}static storeIoTHubInfo(e,t){return n(this,void 0,void 0,function*(){yield p.Constants.ExtensionContext.globalState.update(p.Constants.StateKeySubsID,e.subscription.subscriptionId),yield p.Constants.ExtensionContext.globalState.update(p.Constants.StateKeyIoTHubID,t.id)})}static deleteIoTHubInfo(){return n(this,void 0,void 0,function*(){yield p.Constants.ExtensionContext.globalState.update(p.Constants.StateKeySubsID,""),yield p.Constants.ExtensionContext.globalState.update(p.Constants.StateKeyIoTHubID,"")})}static tryGetStringFromCharCode(e){if(e instanceof Uint8Array)try{e=String.fromCharCode.apply(null,e)}catch(e){}return e}static getFilteredDeviceList(e,t){return n(this,void 0,void 0,function*(){if(t){const[t,r]=yield Promise.all([Utility.getIoTDeviceList(e),Utility.getEdgeDeviceIdSet(e)]);return t.filter(e=>r.has(e.deviceId))}return Utility.getIoTDeviceList(e)})}static getIoTDeviceList(e){return n(this,void 0,void 0,function*(){if(!e)return null;const t=o.Registry.fromConnectionString(e),r=[],n=Utility.getHostName(e);return new Promise((e,o)=>{t.list((t,s)=>{t?o(t):(s.forEach((e,t)=>{let o="";null!=e.authentication.SymmetricKey.primaryKey?o=i.ConnectionString.createWithSharedAccessKey(n,e.deviceId,e.authentication.SymmetricKey.primaryKey):null!=e.authentication.x509Thumbprint.primaryThumbprint&&(o=i.ConnectionString.createWithX509Certificate(n,e.deviceId)),r.push(new d.DeviceItem(e.deviceId,o,null,e.connectionState.toString(),null))}),e(r.sort((e,t)=>e.deviceId.localeCompare(t.deviceId))))})})})}static getEdgeDeviceIdSet(e){return n(this,void 0,void 0,function*(){const t=yield Utility.queryDeviceTwins(e,!0),r=new Set;for(const e of t)r.add(e.deviceId);return r})}static queryDeviceTwins(e,t){return n(this,void 0,void 0,function*(){const r=o.Registry.fromConnectionString(e).createQuery("SELECT * FROM DEVICES where capabilities.iotEdge="+t);return(yield r.nextAsTwin()).result})}static showIoTHubInformationMessage(){let e=Utility.getConfiguration();if(e.get(p.Constants.ShowIoTHubInfoKey)){const t="Go to Azure registration page",r="Go to Azure IoT Hub page",n="Don't show again";l.window.showInformationMessage("Don't have Azure IoT Hub? Register a free Azure account to get a free one.",t,r,n).then(i=>{switch(i){case t:l.commands.executeCommand("vscode.open",l.Uri.parse(`https://azure.microsoft.com/en-us/free/?WT.mc_id=${p.Constants.CampaignID}`)),g.TelemetryClient.sendEvent("General.Open.AzureRegistrationPage");break;case r:l.commands.executeCommand("vscode.open",l.Uri.parse(`https://docs.microsoft.com/en-us/azure/iot-hub/iot-hub-get-started?WT.mc_id=${p.Constants.CampaignID}`)),g.TelemetryClient.sendEvent("General.Open.AzureIoTHubPage");break;case n:e.update(p.Constants.ShowIoTHubInfoKey,!1,!0),g.TelemetryClient.sendEvent("General.IoTHubInfo.DoNotShowAgain")}})}}static isValidConnectionString(e,t){return!!t&&p.Constants.ConnectionStringRegex[e].test(t)}static getModuleRuntimeStatus(e,t){return t&&t[e]?t[e].runtimeStatus:void 0}}t.Utility=Utility},function(e,t,r){e.exports={bufferSplit:function bufferSplit(e,t){n.buffer(e),n.string(t);for(var r=[],i=0,o=0,s=0;s<e.length;++s)if(e[s]===t.charCodeAt(o)?++o:o=e[s]===t.charCodeAt(0)?1:0,o>=t.length){var a=s+1;r.push(e.slice(i,a-o)),i=a,o=0}i<=e.length&&r.push(e.slice(i,e.length));return r},addRSAMissing:function addRSAMissing(e){n.object(e),assertCompatible(e,o,[1,1]);var t,r=new p(e.part.d.data);if(!e.part.dmodp){var i=new p(e.part.p.data),s=r.mod(i.subtract(1));t=bigintToMpBuf(s),e.part.dmodp={name:"dmodp",data:t},e.parts.push(e.part.dmodp)}if(!e.part.dmodq){var a=new p(e.part.q.data),c=r.mod(a.subtract(1));t=bigintToMpBuf(c),e.part.dmodq={name:"dmodq",data:t},e.parts.push(e.part.dmodq)}},calculateDSAPublic:function calculateDSAPublic(e,t,r){return n.buffer(e),n.buffer(t),n.buffer(r),e=new p(e),t=new p(t),r=new p(r),bigintToMpBuf(e.modPow(r,t))},calculateED25519Public:function calculateED25519Public(e){n.buffer(e);var t=d.sign.keyPair.fromSeed(new Uint8Array(e));return i.from(t.publicKey)},calculateX25519Public:function calculateX25519Public(e){n.buffer(e);var t=d.box.keyPair.fromSeed(new Uint8Array(e));return i.from(t.publicKey)},mpNormalize:mpNormalize,mpDenormalize:function mpDenormalize(e){n.buffer(e);for(;e.length>1&&0===e[0];)e=e.slice(1);return e},ecNormalize:function ecNormalize(e,t){if(n.buffer(e),0===e[0]&&4===e[1])return t?e:e.slice(1);if(4===e[0]){if(!t)return e}else{for(;0===e[0];)e=e.slice(1);if(2===e[0]||3===e[0])throw new Error("Compressed elliptic curve points are not supported");if(4!==e[0])throw new Error("Not a valid elliptic curve point");if(!t)return e}var r=i.alloc(e.length+1);return r[0]=0,e.copy(r,1),r},countZeros:function countZeros(e){var t=0,r=8;for(;t<e.length;){var n=1<<r;if((e[t]&n)===n)break;--r<0&&(t++,r=8)}return 8*t+(8-r)-1},assertCompatible:assertCompatible,isCompatible:function isCompatible(e,t,r){if(null===e||"object"!=typeof e)return!1;void 0===r&&(r=t.prototype._sshpkApiVersion);if(e instanceof t&&t.prototype._sshpkApiVersion[0]==r[0])return!0;var n=Object.getPrototypeOf(e),i=0;for(;n.constructor.name!==t.name;)if(!(n=Object.getPrototypeOf(n))||++i>h)return!1;if(n.constructor.name!==t.name)return!1;var o=n._sshpkApiVersion;void 0===o&&(o=t._oldVersionDetect(e));return!(o[0]!=r[0]||o[1]<r[1])},opensslKeyDeriv:function opensslKeyDeriv(e,t,r,o){n.buffer(t,"salt"),n.buffer(r,"passphrase"),n.number(o,"iteration count");var s,c,u,l=f[e];n.object(l,"supported cipher"),t=t.slice(0,m);var p=i.alloc(0);for(;p.length<l.key+l.iv;){u=[],c&&u.push(c),u.push(r),u.push(t),s=i.concat(u);for(var d=0;d<o;++d)s=a.createHash("md5").update(s).digest();p=i.concat([p,s]),c=s}return{key:p.slice(0,l.key),iv:p.slice(l.key,l.key+l.iv)}},opensshCipherInfo:function opensshCipherInfo(e){var t={};switch(e){case"3des-cbc":t.keySize=24,t.blockSize=8,t.opensslName="des-ede3-cbc";break;case"blowfish-cbc":t.keySize=16,t.blockSize=8,t.opensslName="bf-cbc";break;case"aes128-cbc":case"aes128-ctr":case"aes128-gcm@openssh.com":t.keySize=16,t.blockSize=16,t.opensslName="aes-128-"+e.slice(7,10);break;case"aes192-cbc":case"aes192-ctr":case"aes192-gcm@openssh.com":t.keySize=24,t.blockSize=16,t.opensslName="aes-192-"+e.slice(7,10);break;case"aes256-cbc":case"aes256-ctr":case"aes256-gcm@openssh.com":t.keySize=32,t.blockSize=16,t.opensslName="aes-256-"+e.slice(7,10);break;default:throw new Error('Unsupported openssl cipher "'+e+'"')}return t},publicFromPrivateECDSA:function publicFromPrivateECDSA(e,t){n.string(e,"curveName"),n.buffer(t);var r=c.curves[e],o=new p(r.p),a=new p(r.a),u=new p(r.b),d=new l.ECCurveFp(o,a,u),h=d.decodePointHex(r.G.toString("hex")),f=new p(mpNormalize(t)),m=h.multiply(f);m=i.from(d.encodePointHex(m),"hex");var g=[];return g.push({name:"curve",data:i.from(e)}),g.push({name:"Q",data:m}),new s({type:"ecdsa",curve:d,parts:g})},zeroPadToLength:function zeroPadToLength(e,t){n.buffer(e),n.number(t);for(;e.length>t;)n.equal(e[0],0),e=e.slice(1);for(;e.length<t;){var r=i.alloc(e.length+1);r[0]=0,e.copy(r,1),e=r}return e},writeBitString:function writeBitString(e,t,r){void 0===r&&(r=u.Ber.BitString);var n=i.alloc(t.length+1);n[0]=0,t.copy(n,1),e.writeBuffer(n,r)},readBitString:function readBitString(e,t){void 0===t&&(t=u.Ber.BitString);var r=e.readString(t,!0);return n.strictEqual(r[0],0,"bit strings with unused bits are not supported (0x"+r[0].toString(16)+")"),r.slice(1)}};var n=r(13),i=r(19).Buffer,o=r(33),s=r(30),a=r(12),c=r(32),u=r(66),l=r(154),p=r(117).BigInteger,d=r(116),h=3;function assertCompatible(e,t,r,i){if(void 0===i&&(i="object"),n.ok(e,i+" must not be null"),n.object(e,i+" must be an object"),void 0===r&&(r=t.prototype._sshpkApiVersion),!(e instanceof t&&t.prototype._sshpkApiVersion[0]==r[0])){for(var o=Object.getPrototypeOf(e),s=0;o.constructor.name!==t.name;)o=Object.getPrototypeOf(o),n.ok(o&&++s<=h,i+" must be a "+t.name+" instance");n.strictEqual(o.constructor.name,t.name,i+" must be a "+t.name+" instance");var a=o._sshpkApiVersion;void 0===a&&(a=t._oldVersionDetect(e)),n.ok(a[0]==r[0]&&a[1]>=r[1],i+" must be compatible with "+t.name+" klass version "+r[0]+"."+r[1])}}var f={"des-ede3-cbc":{key:24,iv:8},"aes-128-cbc":{key:16,iv:16},"aes-256-cbc":{key:32,iv:16}},m=8;function mpNormalize(e){for(n.buffer(e);e.length>1&&0===e[0]&&0==(128&e[1]);)e=e.slice(1);if(128==(128&e[0])){var t=i.alloc(e.length+1);t[0]=0,e.copy(t,1),e=t}return e}function bigintToMpBuf(e){var t=i.from(e.toByteArray());return t=mpNormalize(t)}},function(e,t,r){var n=r(11),i=r(502),o=r(504),s=r(505),a=[],c=r(1);var u,l,p=function noop(){};function patch(e){i(e),e.gracefulify=patch,e.FileReadStream=ReadStream,e.FileWriteStream=WriteStream,e.createReadStream=function createReadStream(e,t){return new ReadStream(e,t)},e.createWriteStream=function createWriteStream(e,t){return new WriteStream(e,t)};var t=e.readFile;e.readFile=function readFile(e,r,n){"function"==typeof r&&(n=r,r=null);return function go$readFile(e,r,n){return t(e,r,function(t){!t||"EMFILE"!==t.code&&"ENFILE"!==t.code?("function"==typeof n&&n.apply(this,arguments),retry()):enqueue([go$readFile,[e,r,n]])})}(e,r,n)};var r=e.writeFile;e.writeFile=function writeFile(e,t,n,i){"function"==typeof n&&(i=n,n=null);return function go$writeFile(e,t,n,i){return r(e,t,n,function(r){!r||"EMFILE"!==r.code&&"ENFILE"!==r.code?("function"==typeof i&&i.apply(this,arguments),retry()):enqueue([go$writeFile,[e,t,n,i]])})}(e,t,n,i)};var n=e.appendFile;n&&(e.appendFile=function appendFile(e,t,r,i){"function"==typeof r&&(i=r,r=null);return function go$appendFile(e,t,r,i){return n(e,t,r,function(n){!n||"EMFILE"!==n.code&&"ENFILE"!==n.code?("function"==typeof i&&i.apply(this,arguments),retry()):enqueue([go$appendFile,[e,t,r,i]])})}(e,t,r,i)});var s=e.readdir;function go$readdir(t){return s.apply(e,t)}if(e.readdir=function readdir(e,t,r){var n=[e];"function"!=typeof t?n.push(t):r=t;return n.push(function go$readdir$cb(e,t){t&&t.sort&&t.sort(),!e||"EMFILE"!==e.code&&"ENFILE"!==e.code?("function"==typeof r&&r.apply(this,arguments),retry()):enqueue([go$readdir,[n]])}),go$readdir(n)},"v0.8"===process.version.substr(0,4)){var a=o(e);ReadStream=a.ReadStream,WriteStream=a.WriteStream}var c=e.ReadStream;c&&(ReadStream.prototype=Object.create(c.prototype),ReadStream.prototype.open=function ReadStream$open(){var e=this;open(e.path,e.flags,e.mode,function(t,r){t?(e.autoClose&&e.destroy(),e.emit("error",t)):(e.fd=r,e.emit("open",r),e.read())})});var u=e.WriteStream;function ReadStream(e,t){return this instanceof ReadStream?(c.apply(this,arguments),this):ReadStream.apply(Object.create(ReadStream.prototype),arguments)}function WriteStream(e,t){return this instanceof WriteStream?(u.apply(this,arguments),this):WriteStream.apply(Object.create(WriteStream.prototype),arguments)}u&&(WriteStream.prototype=Object.create(u.prototype),WriteStream.prototype.open=function WriteStream$open(){var e=this;open(e.path,e.flags,e.mode,function(t,r){t?(e.destroy(),e.emit("error",t)):(e.fd=r,e.emit("open",r))})}),e.ReadStream=ReadStream,e.WriteStream=WriteStream;var l=e.open;function open(e,t,r,n){return"function"==typeof r&&(n=r,r=null),function go$open(e,t,r,n){return l(e,t,r,function(i,o){!i||"EMFILE"!==i.code&&"ENFILE"!==i.code?("function"==typeof n&&n.apply(this,arguments),retry()):enqueue([go$open,[e,t,r,n]])})}(e,t,r,n)}return e.open=open,e}function enqueue(e){p("ENQUEUE",e[0].name,e[1]),a.push(e)}function retry(){var e=a.shift();e&&(p("RETRY",e[0].name,e[1]),e[0].apply(null,e[1]))}c.debuglog?p=c.debuglog("gfs4"):/\bgfs4\b/i.test(process.env.NODE_DEBUG||"")&&(p=function(){var e=c.format.apply(c,arguments);e="GFS4: "+e.split(/\n/).join("\nGFS4: "),console.error(e)}),/\bgfs4\b/i.test(process.env.NODE_DEBUG||"")&&process.on("exit",function(){p(a),r(44).equal(a.length,0)}),e.exports=patch(s(n)),process.env.TEST_GRACEFUL_FS_GLOBAL_PATCH&&!n.__patched&&(e.exports=patch(n),n.__patched=!0),e.exports.close=(u=n.close,function(e,t){return u.call(n,e,function(e){e||retry(),"function"==typeof t&&t.apply(this,arguments)})}),e.exports.closeSync=(l=n.closeSync,function(e){var t=l.apply(n,arguments);return retry(),t}),/\bgraceful-fs\b/.test(n.closeSync.toString())||(n.closeSync=e.exports.closeSync,n.close=e.exports.close)},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(269),i=r(269);t.makePatchingRequire=i.makePatchingRequire;var o=function(e){return!0},s=function(){function ContextPreservingEventEmitter(){this.version=r(551).version,this.subscribers={},this.contextPreservationFunction=function(e){return e},this.knownPatches={},this.currentlyPublishing=!1}return ContextPreservingEventEmitter.prototype.shouldPublish=function(e){var t=this.subscribers[e];return!!t&&t.some(function(e){var t=e.filter;return!t||t(!1)})},ContextPreservingEventEmitter.prototype.publish=function(e,t){if(!this.currentlyPublishing){var r=this.subscribers[e];if(r){var n={timestamp:Date.now(),data:t};this.currentlyPublishing=!0,r.forEach(function(e){var t=e.listener,r=e.filter;try{r&&r(!0)&&t(n)}catch(e){}}),this.currentlyPublishing=!1}}},ContextPreservingEventEmitter.prototype.subscribe=function(e,t,r){void 0===r&&(r=o),this.subscribers[e]||(this.subscribers[e]=[]),this.subscribers[e].push({listener:t,filter:r})},ContextPreservingEventEmitter.prototype.unsubscribe=function(e,t,r){void 0===r&&(r=o);var n=this.subscribers[e];if(n)for(var i=0;i<n.length;++i)if(n[i].listener===t&&n[i].filter===r)return n.splice(i,1),!0;return!1},ContextPreservingEventEmitter.prototype.reset=function(){var e=this;this.subscribers={},this.contextPreservationFunction=function(e){return e},Object.getOwnPropertyNames(this.knownPatches).forEach(function(t){return delete e.knownPatches[t]})},ContextPreservingEventEmitter.prototype.bindToContext=function(e){return this.contextPreservationFunction(e)},ContextPreservingEventEmitter.prototype.addContextPreservation=function(e){var t=this.contextPreservationFunction;this.contextPreservationFunction=function(r){return e(t(r))}},ContextPreservingEventEmitter.prototype.registerMonkeyPatch=function(e,t){this.knownPatches[e]||(this.knownPatches[e]=[]),this.knownPatches[e].push(t)},ContextPreservingEventEmitter.prototype.getPatchesObject=function(){return this.knownPatches},ContextPreservingEventEmitter}();global.diagnosticsSource||(global.diagnosticsSource=new s,r(270).prototype.require=n.makePatchingRequire(global.diagnosticsSource.getPatchesObject()));t.channel=global.diagnosticsSource},function(e,t,r){var n;(function(){var r=this,i=r._,o=Array.prototype,s=Object.prototype,a=Function.prototype,c=o.push,u=o.slice,l=s.toString,p=s.hasOwnProperty,d=Array.isArray,h=Object.keys,f=a.bind,m=Object.create,g=function(){},y=function(e){return e instanceof y?e:this instanceof y?void(this._wrapped=e):new y(e)};e.exports&&(t=e.exports=y),t._=y,y.VERSION="1.8.3";var v=function(e,t,r){if(void 0===t)return e;switch(null==r?3:r){case 1:return function(r){return e.call(t,r)};case 2:return function(r,n){return e.call(t,r,n)};case 3:return function(r,n,i){return e.call(t,r,n,i)};case 4:return function(r,n,i,o){return e.call(t,r,n,i,o)}}return function(){return e.apply(t,arguments)}},b=function(e,t,r){return null==e?y.identity:y.isFunction(e)?v(e,t,r):y.isObject(e)?y.matcher(e):y.property(e)};y.iteratee=function(e,t){return b(e,t,1/0)};var _=function(e,t){return function(r){var n=arguments.length;if(n<2||null==r)return r;for(var i=1;i<n;i++)for(var o=arguments[i],s=e(o),a=s.length,c=0;c<a;c++){var u=s[c];t&&void 0!==r[u]||(r[u]=o[u])}return r}},w=function(e){if(!y.isObject(e))return{};if(m)return m(e);g.prototype=e;var t=new g;return g.prototype=null,t},E=function(e){return function(t){return null==t?void 0:t[e]}},S=Math.pow(2,53)-1,C=E("length"),x=function(e){var t=C(e);return"number"==typeof t&&t>=0&&t<=S};function createReduce(e){return function(t,r,n,i){r=v(r,i,4);var o=!x(t)&&y.keys(t),s=(o||t).length,a=e>0?0:s-1;return arguments.length<3&&(n=t[o?o[a]:a],a+=e),function iterator(t,r,n,i,o,s){for(;o>=0&&o<s;o+=e){var a=i?i[o]:o;n=r(n,t[a],a,t)}return n}(t,r,n,o,a,s)}}y.each=y.forEach=function(e,t,r){var n,i;if(t=v(t,r),x(e))for(n=0,i=e.length;n<i;n++)t(e[n],n,e);else{var o=y.keys(e);for(n=0,i=o.length;n<i;n++)t(e[o[n]],o[n],e)}return e},y.map=y.collect=function(e,t,r){t=b(t,r);for(var n=!x(e)&&y.keys(e),i=(n||e).length,o=Array(i),s=0;s<i;s++){var a=n?n[s]:s;o[s]=t(e[a],a,e)}return o},y.reduce=y.foldl=y.inject=createReduce(1),y.reduceRight=y.foldr=createReduce(-1),y.find=y.detect=function(e,t,r){var n;if(void 0!==(n=x(e)?y.findIndex(e,t,r):y.findKey(e,t,r))&&-1!==n)return e[n]},y.filter=y.select=function(e,t,r){var n=[];return t=b(t,r),y.each(e,function(e,r,i){t(e,r,i)&&n.push(e)}),n},y.reject=function(e,t,r){return y.filter(e,y.negate(b(t)),r)},y.every=y.all=function(e,t,r){t=b(t,r);for(var n=!x(e)&&y.keys(e),i=(n||e).length,o=0;o<i;o++){var s=n?n[o]:o;if(!t(e[s],s,e))return!1}return!0},y.some=y.any=function(e,t,r){t=b(t,r);for(var n=!x(e)&&y.keys(e),i=(n||e).length,o=0;o<i;o++){var s=n?n[o]:o;if(t(e[s],s,e))return!0}return!1},y.contains=y.includes=y.include=function(e,t,r,n){return x(e)||(e=y.values(e)),("number"!=typeof r||n)&&(r=0),y.indexOf(e,t,r)>=0},y.invoke=function(e,t){var r=u.call(arguments,2),n=y.isFunction(t);return y.map(e,function(e){var i=n?t:e[t];return null==i?i:i.apply(e,r)})},y.pluck=function(e,t){return y.map(e,y.property(t))},y.where=function(e,t){return y.filter(e,y.matcher(t))},y.findWhere=function(e,t){return y.find(e,y.matcher(t))},y.max=function(e,t,r){var n,i,o=-1/0,s=-1/0;if(null==t&&null!=e)for(var a=0,c=(e=x(e)?e:y.values(e)).length;a<c;a++)(n=e[a])>o&&(o=n);else t=b(t,r),y.each(e,function(e,r,n){((i=t(e,r,n))>s||i===-1/0&&o===-1/0)&&(o=e,s=i)});return o},y.min=function(e,t,r){var n,i,o=1/0,s=1/0;if(null==t&&null!=e)for(var a=0,c=(e=x(e)?e:y.values(e)).length;a<c;a++)(n=e[a])<o&&(o=n);else t=b(t,r),y.each(e,function(e,r,n){((i=t(e,r,n))<s||i===1/0&&o===1/0)&&(o=e,s=i)});return o},y.shuffle=function(e){for(var t,r=x(e)?e:y.values(e),n=r.length,i=Array(n),o=0;o<n;o++)(t=y.random(0,o))!==o&&(i[o]=i[t]),i[t]=r[o];return i},y.sample=function(e,t,r){return null==t||r?(x(e)||(e=y.values(e)),e[y.random(e.length-1)]):y.shuffle(e).slice(0,Math.max(0,t))},y.sortBy=function(e,t,r){return t=b(t,r),y.pluck(y.map(e,function(e,r,n){return{value:e,index:r,criteria:t(e,r,n)}}).sort(function(e,t){var r=e.criteria,n=t.criteria;if(r!==n){if(r>n||void 0===r)return 1;if(r<n||void 0===n)return-1}return e.index-t.index}),"value")};var k=function(e){return function(t,r,n){var i={};return r=b(r,n),y.each(t,function(n,o){var s=r(n,o,t);e(i,n,s)}),i}};y.groupBy=k(function(e,t,r){y.has(e,r)?e[r].push(t):e[r]=[t]}),y.indexBy=k(function(e,t,r){e[r]=t}),y.countBy=k(function(e,t,r){y.has(e,r)?e[r]++:e[r]=1}),y.toArray=function(e){return e?y.isArray(e)?u.call(e):x(e)?y.map(e,y.identity):y.values(e):[]},y.size=function(e){return null==e?0:x(e)?e.length:y.keys(e).length},y.partition=function(e,t,r){t=b(t,r);var n=[],i=[];return y.each(e,function(e,r,o){(t(e,r,o)?n:i).push(e)}),[n,i]},y.first=y.head=y.take=function(e,t,r){if(null!=e)return null==t||r?e[0]:y.initial(e,e.length-t)},y.initial=function(e,t,r){return u.call(e,0,Math.max(0,e.length-(null==t||r?1:t)))},y.last=function(e,t,r){if(null!=e)return null==t||r?e[e.length-1]:y.rest(e,Math.max(0,e.length-t))},y.rest=y.tail=y.drop=function(e,t,r){return u.call(e,null==t||r?1:t)},y.compact=function(e){return y.filter(e,y.identity)};var R=function(e,t,r,n){for(var i=[],o=0,s=n||0,a=C(e);s<a;s++){var c=e[s];if(x(c)&&(y.isArray(c)||y.isArguments(c))){t||(c=R(c,t,r));var u=0,l=c.length;for(i.length+=l;u<l;)i[o++]=c[u++]}else r||(i[o++]=c)}return i};function createPredicateIndexFinder(e){return function(t,r,n){r=b(r,n);for(var i=C(t),o=e>0?0:i-1;o>=0&&o<i;o+=e)if(r(t[o],o,t))return o;return-1}}function createIndexFinder(e,t,r){return function(n,i,o){var s=0,a=C(n);if("number"==typeof o)e>0?s=o>=0?o:Math.max(o+a,s):a=o>=0?Math.min(o+1,a):o+a+1;else if(r&&o&&a)return n[o=r(n,i)]===i?o:-1;if(i!=i)return(o=t(u.call(n,s,a),y.isNaN))>=0?o+s:-1;for(o=e>0?s:a-1;o>=0&&o<a;o+=e)if(n[o]===i)return o;return-1}}y.flatten=function(e,t){return R(e,t,!1)},y.without=function(e){return y.difference(e,u.call(arguments,1))},y.uniq=y.unique=function(e,t,r,n){y.isBoolean(t)||(n=r,r=t,t=!1),null!=r&&(r=b(r,n));for(var i=[],o=[],s=0,a=C(e);s<a;s++){var c=e[s],u=r?r(c,s,e):c;t?(s&&o===u||i.push(c),o=u):r?y.contains(o,u)||(o.push(u),i.push(c)):y.contains(i,c)||i.push(c)}return i},y.union=function(){return y.uniq(R(arguments,!0,!0))},y.intersection=function(e){for(var t=[],r=arguments.length,n=0,i=C(e);n<i;n++){var o=e[n];if(!y.contains(t,o)){for(var s=1;s<r&&y.contains(arguments[s],o);s++);s===r&&t.push(o)}}return t},y.difference=function(e){var t=R(arguments,!0,!0,1);return y.filter(e,function(e){return!y.contains(t,e)})},y.zip=function(){return y.unzip(arguments)},y.unzip=function(e){for(var t=e&&y.max(e,C).length||0,r=Array(t),n=0;n<t;n++)r[n]=y.pluck(e,n);return r},y.object=function(e,t){for(var r={},n=0,i=C(e);n<i;n++)t?r[e[n]]=t[n]:r[e[n][0]]=e[n][1];return r},y.findIndex=createPredicateIndexFinder(1),y.findLastIndex=createPredicateIndexFinder(-1),y.sortedIndex=function(e,t,r,n){for(var i=(r=b(r,n,1))(t),o=0,s=C(e);o<s;){var a=Math.floor((o+s)/2);r(e[a])<i?o=a+1:s=a}return o},y.indexOf=createIndexFinder(1,y.findIndex,y.sortedIndex),y.lastIndexOf=createIndexFinder(-1,y.findLastIndex),y.range=function(e,t,r){null==t&&(t=e||0,e=0),r=r||1;for(var n=Math.max(Math.ceil((t-e)/r),0),i=Array(n),o=0;o<n;o++,e+=r)i[o]=e;return i};var T=function(e,t,r,n,i){if(!(n instanceof t))return e.apply(r,i);var o=w(e.prototype),s=e.apply(o,i);return y.isObject(s)?s:o};y.bind=function(e,t){if(f&&e.bind===f)return f.apply(e,u.call(arguments,1));if(!y.isFunction(e))throw new TypeError("Bind must be called on a function");var r=u.call(arguments,2),n=function(){return T(e,n,t,this,r.concat(u.call(arguments)))};return n},y.partial=function(e){var t=u.call(arguments,1),r=function(){for(var n=0,i=t.length,o=Array(i),s=0;s<i;s++)o[s]=t[s]===y?arguments[n++]:t[s];for(;n<arguments.length;)o.push(arguments[n++]);return T(e,r,this,this,o)};return r},y.bindAll=function(e){var t,r,n=arguments.length;if(n<=1)throw new Error("bindAll must be passed function names");for(t=1;t<n;t++)e[r=arguments[t]]=y.bind(e[r],e);return e},y.memoize=function(e,t){var r=function(n){var i=r.cache,o=""+(t?t.apply(this,arguments):n);return y.has(i,o)||(i[o]=e.apply(this,arguments)),i[o]};return r.cache={},r},y.delay=function(e,t){var r=u.call(arguments,2);return setTimeout(function(){return e.apply(null,r)},t)},y.defer=y.partial(y.delay,y,1),y.throttle=function(e,t,r){var n,i,o,s=null,a=0;r||(r={});var c=function(){a=!1===r.leading?0:y.now(),s=null,o=e.apply(n,i),s||(n=i=null)};return function(){var u=y.now();a||!1!==r.leading||(a=u);var l=t-(u-a);return n=this,i=arguments,l<=0||l>t?(s&&(clearTimeout(s),s=null),a=u,o=e.apply(n,i),s||(n=i=null)):s||!1===r.trailing||(s=setTimeout(c,l)),o}},y.debounce=function(e,t,r){var n,i,o,s,a,c=function(){var u=y.now()-s;u<t&&u>=0?n=setTimeout(c,t-u):(n=null,r||(a=e.apply(o,i),n||(o=i=null)))};return function(){o=this,i=arguments,s=y.now();var u=r&&!n;return n||(n=setTimeout(c,t)),u&&(a=e.apply(o,i),o=i=null),a}},y.wrap=function(e,t){return y.partial(t,e)},y.negate=function(e){return function(){return!e.apply(this,arguments)}},y.compose=function(){var e=arguments,t=e.length-1;return function(){for(var r=t,n=e[t].apply(this,arguments);r--;)n=e[r].call(this,n);return n}},y.after=function(e,t){return function(){if(--e<1)return t.apply(this,arguments)}},y.before=function(e,t){var r;return function(){return--e>0&&(r=t.apply(this,arguments)),e<=1&&(t=null),r}},y.once=y.partial(y.before,2);var O=!{toString:null}.propertyIsEnumerable("toString"),I=["valueOf","isPrototypeOf","toString","propertyIsEnumerable","hasOwnProperty","toLocaleString"];function collectNonEnumProps(e,t){var r=I.length,n=e.constructor,i=y.isFunction(n)&&n.prototype||s,o="constructor";for(y.has(e,o)&&!y.contains(t,o)&&t.push(o);r--;)(o=I[r])in e&&e[o]!==i[o]&&!y.contains(t,o)&&t.push(o)}y.keys=function(e){if(!y.isObject(e))return[];if(h)return h(e);var t=[];for(var r in e)y.has(e,r)&&t.push(r);return O&&collectNonEnumProps(e,t),t},y.allKeys=function(e){if(!y.isObject(e))return[];var t=[];for(var r in e)t.push(r);return O&&collectNonEnumProps(e,t),t},y.values=function(e){for(var t=y.keys(e),r=t.length,n=Array(r),i=0;i<r;i++)n[i]=e[t[i]];return n},y.mapObject=function(e,t,r){t=b(t,r);for(var n,i=y.keys(e),o=i.length,s={},a=0;a<o;a++)s[n=i[a]]=t(e[n],n,e);return s},y.pairs=function(e){for(var t=y.keys(e),r=t.length,n=Array(r),i=0;i<r;i++)n[i]=[t[i],e[t[i]]];return n},y.invert=function(e){for(var t={},r=y.keys(e),n=0,i=r.length;n<i;n++)t[e[r[n]]]=r[n];return t},y.functions=y.methods=function(e){var t=[];for(var r in e)y.isFunction(e[r])&&t.push(r);return t.sort()},y.extend=_(y.allKeys),y.extendOwn=y.assign=_(y.keys),y.findKey=function(e,t,r){t=b(t,r);for(var n,i=y.keys(e),o=0,s=i.length;o<s;o++)if(t(e[n=i[o]],n,e))return n},y.pick=function(e,t,r){var n,i,o={},s=e;if(null==s)return o;y.isFunction(t)?(i=y.allKeys(s),n=v(t,r)):(i=R(arguments,!1,!1,1),n=function(e,t,r){return t in r},s=Object(s));for(var a=0,c=i.length;a<c;a++){var u=i[a],l=s[u];n(l,u,s)&&(o[u]=l)}return o},y.omit=function(e,t,r){if(y.isFunction(t))t=y.negate(t);else{var n=y.map(R(arguments,!1,!1,1),String);t=function(e,t){return!y.contains(n,t)}}return y.pick(e,t,r)},y.defaults=_(y.allKeys,!0),y.create=function(e,t){var r=w(e);return t&&y.extendOwn(r,t),r},y.clone=function(e){return y.isObject(e)?y.isArray(e)?e.slice():y.extend({},e):e},y.tap=function(e,t){return t(e),e},y.isMatch=function(e,t){var r=y.keys(t),n=r.length;if(null==e)return!n;for(var i=Object(e),o=0;o<n;o++){var s=r[o];if(t[s]!==i[s]||!(s in i))return!1}return!0};var N=function(e,t,r,n){if(e===t)return 0!==e||1/e==1/t;if(null==e||null==t)return e===t;e instanceof y&&(e=e._wrapped),t instanceof y&&(t=t._wrapped);var i=l.call(e);if(i!==l.call(t))return!1;switch(i){case"[object RegExp]":case"[object String]":return""+e==""+t;case"[object Number]":return+e!=+e?+t!=+t:0==+e?1/+e==1/t:+e==+t;case"[object Date]":case"[object Boolean]":return+e==+t}var o="[object Array]"===i;if(!o){if("object"!=typeof e||"object"!=typeof t)return!1;var s=e.constructor,a=t.constructor;if(s!==a&&!(y.isFunction(s)&&s instanceof s&&y.isFunction(a)&&a instanceof a)&&"constructor"in e&&"constructor"in t)return!1}n=n||[];for(var c=(r=r||[]).length;c--;)if(r[c]===e)return n[c]===t;if(r.push(e),n.push(t),o){if((c=e.length)!==t.length)return!1;for(;c--;)if(!N(e[c],t[c],r,n))return!1}else{var u,p=y.keys(e);if(c=p.length,y.keys(t).length!==c)return!1;for(;c--;)if(u=p[c],!y.has(t,u)||!N(e[u],t[u],r,n))return!1}return r.pop(),n.pop(),!0};y.isEqual=function(e,t){return N(e,t)},y.isEmpty=function(e){return null==e||(x(e)&&(y.isArray(e)||y.isString(e)||y.isArguments(e))?0===e.length:0===y.keys(e).length)},y.isElement=function(e){return!(!e||1!==e.nodeType)},y.isArray=d||function(e){return"[object Array]"===l.call(e)},y.isObject=function(e){var t=typeof e;return"function"===t||"object"===t&&!!e},y.each(["Arguments","Function","String","Number","Date","RegExp","Error"],function(e){y["is"+e]=function(t){return l.call(t)==="[object "+e+"]"}}),y.isArguments(arguments)||(y.isArguments=function(e){return y.has(e,"callee")}),"object"!=typeof Int8Array&&(y.isFunction=function(e){return"function"==typeof e||!1}),y.isFinite=function(e){return isFinite(e)&&!isNaN(parseFloat(e))},y.isNaN=function(e){return y.isNumber(e)&&e!==+e},y.isBoolean=function(e){return!0===e||!1===e||"[object Boolean]"===l.call(e)},y.isNull=function(e){return null===e},y.isUndefined=function(e){return void 0===e},y.has=function(e,t){return null!=e&&p.call(e,t)},y.noConflict=function(){return r._=i,this},y.identity=function(e){return e},y.constant=function(e){return function(){return e}},y.noop=function(){},y.property=E,y.propertyOf=function(e){return null==e?function(){}:function(t){return e[t]}},y.matcher=y.matches=function(e){return e=y.extendOwn({},e),function(t){return y.isMatch(t,e)}},y.times=function(e,t,r){var n=Array(Math.max(0,e));t=v(t,r,1);for(var i=0;i<e;i++)n[i]=t(i);return n},y.random=function(e,t){return null==t&&(t=e,e=0),e+Math.floor(Math.random()*(t-e+1))},y.now=Date.now||function(){return(new Date).getTime()};var A={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","`":"&#x60;"},P=y.invert(A),L=function(e){var t=function(t){return e[t]},r="(?:"+y.keys(e).join("|")+")",n=RegExp(r),i=RegExp(r,"g");return function(e){return e=null==e?"":""+e,n.test(e)?e.replace(i,t):e}};y.escape=L(A),y.unescape=L(P),y.result=function(e,t,r){var n=null==e?void 0:e[t];return void 0===n&&(n=r),y.isFunction(n)?n.call(e):n};var D=0;y.uniqueId=function(e){var t=++D+"";return e?e+t:t},y.templateSettings={evaluate:/<%([\s\S]+?)%>/g,interpolate:/<%=([\s\S]+?)%>/g,escape:/<%-([\s\S]+?)%>/g};var M=/(.)^/,j={"'":"'","\\":"\\","\r":"r","\n":"n","\u2028":"u2028","\u2029":"u2029"},q=/\\|'|\r|\n|\u2028|\u2029/g,F=function(e){return"\\"+j[e]};y.template=function(e,t,r){!t&&r&&(t=r),t=y.defaults({},t,y.templateSettings);var n=RegExp([(t.escape||M).source,(t.interpolate||M).source,(t.evaluate||M).source].join("|")+"|$","g"),i=0,o="__p+='";e.replace(n,function(t,r,n,s,a){return o+=e.slice(i,a).replace(q,F),i=a+t.length,r?o+="'+\n((__t=("+r+"))==null?'':_.escape(__t))+\n'":n?o+="'+\n((__t=("+n+"))==null?'':__t)+\n'":s&&(o+="';\n"+s+"\n__p+='"),t}),o+="';\n",t.variable||(o="with(obj||{}){\n"+o+"}\n"),o="var __t,__p='',__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,'');};\n"+o+"return __p;\n";try{var s=new Function(t.variable||"obj","_",o)}catch(e){throw e.source=o,e}var a=function(e){return s.call(this,e,y)},c=t.variable||"obj";return a.source="function("+c+"){\n"+o+"}",a},y.chain=function(e){var t=y(e);return t._chain=!0,t};var z=function(e,t){return e._chain?y(t).chain():t};y.mixin=function(e){y.each(y.functions(e),function(t){var r=y[t]=e[t];y.prototype[t]=function(){var e=[this._wrapped];return c.apply(e,arguments),z(this,r.apply(y,e))}})},y.mixin(y),y.each(["pop","push","reverse","shift","sort","splice","unshift"],function(e){var t=o[e];y.prototype[e]=function(){var r=this._wrapped;return t.apply(r,arguments),"shift"!==e&&"splice"!==e||0!==r.length||delete r[0],z(this,r)}}),y.each(["concat","join","slice"],function(e){var t=o[e];y.prototype[e]=function(){return z(this,t.apply(this._wrapped,arguments))}}),y.prototype.value=function(){return this._wrapped},y.prototype.valueOf=y.prototype.toJSON=y.prototype.value,y.prototype.toString=function(){return""+this._wrapped},void 0===(n=function(){return y}.apply(t,[]))||(e.exports=n)}).call(this)},function(e,t,r){e.exports=Key;var n,i=r(13),o=r(32),s=r(12),a=r(114),c=r(65),u=r(191).DiffieHellman,l=r(64),p=r(26),d=r(33);try{n=r(304)}catch(e){}var h=l.InvalidAlgorithmError,f=l.KeyParseError,m={};function Key(e){i.object(e,"options"),i.arrayOfObject(e.parts,"options.parts"),i.string(e.type,"options.type"),i.optionalString(e.comment,"options.comment");var t=o.info[e.type];if("object"!=typeof t)throw new h(e.type);for(var r,n={},s=0;s<e.parts.length;++s){var a=e.parts[s];n[a.name]=a}if(this.type=e.type,this.parts=e.parts,this.part=n,this.comment=void 0,this.source=e.source,this._rfc4253Cache=e._rfc4253Cache,this._hashCache={},this.curve=void 0,"ecdsa"===this.type){var c=this.part.curve.data.toString();this.curve=c,r=o.curves[c].size}else if("ed25519"===this.type||"curve25519"===this.type)r=256,this.curve="curve25519";else{var u=this.part[t.sizePart];r=8*(r=u.data.length)-p.countZeros(u.data)}this.size=r}m.auto=r(305),m.pem=r(77),m.pkcs1=r(194),m.pkcs8=r(118),m.rfc4253=r(85),m.ssh=r(307),m["ssh-private"]=r(155),m.openssh=m["ssh-private"],m.dnssec=r(195),Key.formats=m,Key.prototype.toBuffer=function(e,t){return void 0===e&&(e="ssh"),i.string(e,"format"),i.object(m[e],"formats[format]"),i.optionalObject(t,"options"),"rfc4253"===e?(void 0===this._rfc4253Cache&&(this._rfc4253Cache=m.rfc4253.write(this)),this._rfc4253Cache):m[e].write(this,t)},Key.prototype.toString=function(e,t){return this.toBuffer(e,t).toString()},Key.prototype.hash=function(e){if(i.string(e,"algorithm"),e=e.toLowerCase(),void 0===o.hashAlgs[e])throw new h(e);if(this._hashCache[e])return this._hashCache[e];var t=s.createHash(e).update(this.toBuffer("rfc4253")).digest();return this._hashCache[e]=t,t},Key.prototype.fingerprint=function(e){void 0===e&&(e="sha256"),i.string(e,"algorithm");var t={type:"key",hash:this.hash(e),algorithm:e};return new a(t)},Key.prototype.defaultHashAlgorithm=function(){var e="sha1";return"rsa"===this.type&&(e="sha256"),"dsa"===this.type&&this.size>1024&&(e="sha256"),"ed25519"===this.type&&(e="sha512"),"ecdsa"===this.type&&(e=this.size<=256?"sha256":this.size<=384?"sha384":"sha512"),e},Key.prototype.createVerify=function(e){if(void 0===e&&(e=this.defaultHashAlgorithm()),i.string(e,"hash algorithm"),"ed25519"===this.type&&void 0!==n)return new n.Verifier(this,e);if("curve25519"===this.type)throw new Error("Curve25519 keys are not suitable for signing or verification");var t,r,o;try{r=e.toUpperCase(),t=s.createVerify(r)}catch(e){o=e}(void 0===t||o instanceof Error&&o.message.match(/Unknown message digest/))&&(r="RSA-",r+=e.toUpperCase(),t=s.createVerify(r)),i.ok(t,"failed to create verifier");var a=t.verify.bind(t),u=this.toBuffer("pkcs8"),l=this.curve,p=this;return t.verify=function(t,r){if(c.isSignature(t,[2,0]))return t.type===p.type&&((!t.hashAlgorithm||t.hashAlgorithm===e)&&((!t.curve||"ecdsa"!==p.type||t.curve===l)&&a(u,t.toBuffer("asn1"))));if("string"==typeof t||Buffer.isBuffer(t))return a(u,t,r);throw c.isSignature(t,[1,0])?new Error("signature was created by too old a version of sshpk and cannot be verified"):new TypeError("signature must be a string, Buffer, or Signature object")},t},Key.prototype.createDiffieHellman=function(){if("rsa"===this.type)throw new Error("RSA keys do not support Diffie-Hellman");return new u(this)},Key.prototype.createDH=Key.prototype.createDiffieHellman,Key.parse=function(e,t,r){"string"!=typeof e&&i.buffer(e,"data"),void 0===t&&(t="auto"),i.string(t,"format"),"string"==typeof r&&(r={filename:r}),i.optionalObject(r,"options"),void 0===r&&(r={}),i.optionalString(r.filename,"options.filename"),void 0===r.filename&&(r.filename="(unnamed)"),i.object(m[t],"formats[format]");try{var n=m[t].read(e,r);return n instanceof d&&(n=n.toPublic()),n.comment||(n.comment=r.filename),n}catch(e){if("KeyEncryptedError"===e.name)throw e;throw new f(r.filename,t,e)}},Key.isKey=function(e,t){return p.isCompatible(e,Key,t)},Key.prototype._sshpkApiVersion=[1,6],Key._oldVersionDetect=function(e){return i.func(e.toBuffer),i.func(e.fingerprint),e.createDH?[1,4]:e.defaultHashAlgorithm?[1,3]:e.formats.auto?[1,2]:e.formats.pkcs1?[1,1]:[1,0]}},function(e,t,r){var n=r(291),i=r(292);e.exports=function v4(e,t,r){var o=t&&r||0;"string"==typeof e&&(t="binary"===e?new Array(16):null,e=null);var s=(e=e||{}).random||(e.rng||n)();if(s[6]=15&s[6]|64,s[8]=63&s[8]|128,t)for(var a=0;a<16;++a)t[o+a]=s[a];return t||i(s)}},function(e,t,r){var n=r(19).Buffer,i={dsa:{parts:["p","q","g","y"],sizePart:"p"},rsa:{parts:["e","n"],sizePart:"n"},ecdsa:{parts:["curve","Q"],sizePart:"Q"},ed25519:{parts:["A"],sizePart:"A"}};i.curve25519=i.ed25519;var o={dsa:{parts:["p","q","g","y","x"]},rsa:{parts:["n","e","d","iqmp","p","q"]},ecdsa:{parts:["curve","Q","d"]},ed25519:{parts:["A","k"]}};o.curve25519=o.ed25519;var s={nistp256:{size:256,pkcs8oid:"1.2.840.10045.3.1.7",p:n.from("00ffffffff 00000001 00000000 0000000000000000 ffffffff ffffffff ffffffff".replace(/ /g,""),"hex"),a:n.from("00FFFFFFFF 00000001 00000000 0000000000000000 FFFFFFFF FFFFFFFF FFFFFFFC".replace(/ /g,""),"hex"),b:n.from("5ac635d8 aa3a93e7 b3ebbd55 769886bc651d06b0 cc53b0f6 3bce3c3e 27d2604b".replace(/ /g,""),"hex"),s:n.from("00c49d3608 86e70493 6a6678e1 139d26b7819f7e90".replace(/ /g,""),"hex"),n:n.from("00ffffffff 00000000 ffffffff ffffffffbce6faad a7179e84 f3b9cac2 fc632551".replace(/ /g,""),"hex"),G:n.from("046b17d1f2 e12c4247 f8bce6e5 63a440f277037d81 2deb33a0 f4a13945 d898c2964fe342e2 fe1a7f9b 8ee7eb4a 7c0f9e162bce3357 6b315ece cbb64068 37bf51f5".replace(/ /g,""),"hex")},nistp384:{size:384,pkcs8oid:"1.3.132.0.34",p:n.from("00ffffffff ffffffff ffffffff ffffffffffffffff ffffffff ffffffff fffffffeffffffff 00000000 00000000 ffffffff".replace(/ /g,""),"hex"),a:n.from("00FFFFFFFF FFFFFFFF FFFFFFFF FFFFFFFFFFFFFFFF FFFFFFFF FFFFFFFF FFFFFFFEFFFFFFFF 00000000 00000000 FFFFFFFC".replace(/ /g,""),"hex"),b:n.from("b3312fa7 e23ee7e4 988e056b e3f82d19181d9c6e fe814112 0314088f 5013875ac656398d 8a2ed19d 2a85c8ed d3ec2aef".replace(/ /g,""),"hex"),s:n.from("00a335926a a319a27a 1d00896a 6773a4827acdac73".replace(/ /g,""),"hex"),n:n.from("00ffffffff ffffffff ffffffff ffffffffffffffff ffffffff c7634d81 f4372ddf581a0db2 48b0a77a ecec196a ccc52973".replace(/ /g,""),"hex"),G:n.from("04aa87ca22 be8b0537 8eb1c71e f320ad746e1d3b62 8ba79b98 59f741e0 82542a385502f25d bf55296c 3a545e38 72760ab73617de4a 96262c6f 5d9e98bf 9292dc29f8f41dbd 289a147c e9da3113 b5f0b8c00a60b1ce 1d7e819d 7a431d7c 90ea0e5f".replace(/ /g,""),"hex")},nistp521:{size:521,pkcs8oid:"1.3.132.0.35",p:n.from("01ffffff ffffffff ffffffff ffffffffffffffff ffffffff ffffffff ffffffffffffffff ffffffff ffffffff ffffffffffffffff ffffffff ffffffff ffffffffffff".replace(/ /g,""),"hex"),a:n.from("01FFFFFFFFFF FFFFFFFF FFFFFFFF FFFFFFFFFFFFFFFF FFFFFFFF FFFFFFFF FFFFFFFFFFFFFFFF FFFFFFFF FFFFFFFF FFFFFFFFFFFFFFFF FFFFFFFF FFFFFFFF FFFFFFFC".replace(/ /g,""),"hex"),b:n.from("51953eb961 8e1c9a1f 929a21a0 b68540eea2da725b 99b315f3 b8b48991 8ef109e156193951 ec7e937b 1652c0bd 3bb1bf073573df88 3d2c34f1 ef451fd4 6b503f00".replace(/ /g,""),"hex"),s:n.from("00d09e8800 291cb853 96cc6717 393284aaa0da64ba".replace(/ /g,""),"hex"),n:n.from("01ffffffffff ffffffff ffffffff ffffffffffffffff ffffffff ffffffff fffffffa51868783 bf2f966b 7fcc0148 f709a5d03bb5c9b8 899c47ae bb6fb71e 91386409".replace(/ /g,""),"hex"),G:n.from("0400c6 858e06b7 0404e9cd 9e3ecb66 2395b4429c648139 053fb521 f828af60 6b4d3dbaa14b5e77 efe75928 fe1dc127 a2ffa8de3348b3c1 856a429b f97e7e31 c2e5bd660118 39296a78 9a3bc004 5c8a5fb4 2c7d1bd998f54449 579b4468 17afbd17 273e662c97ee7299 5ef42640 c550b901 3fad0761353c7086 a272c240 88be9476 9fd16650".replace(/ /g,""),"hex")}};e.exports={info:i,privInfo:o,hashAlgs:{md5:!0,sha1:!0,sha256:!0,sha384:!0,sha512:!0},curves:s}},function(e,t,r){e.exports=PrivateKey;var n=r(13),i=r(19).Buffer,o=r(32),s=r(12),a=(r(114),r(65)),c=r(64),u=r(1),l=r(26),p=r(191),d=p.generateECDSA,h=p.generateED25519,f=r(304),m=r(116),g=r(30),y=(c.InvalidAlgorithmError,c.KeyParseError),v=(c.KeyEncryptedError,{});function PrivateKey(e){n.object(e,"options"),g.call(this,e),this._pubCache=void 0}v.auto=r(305),v.pem=r(77),v.pkcs1=r(194),v.pkcs8=r(118),v.rfc4253=r(85),v["ssh-private"]=r(155),v.openssh=v["ssh-private"],v.ssh=v["ssh-private"],v.dnssec=r(195),u.inherits(PrivateKey,g),PrivateKey.formats=v,PrivateKey.prototype.toBuffer=function(e,t){return void 0===e&&(e="pkcs1"),n.string(e,"format"),n.object(v[e],"formats[format]"),n.optionalObject(t,"options"),v[e].write(this,t)},PrivateKey.prototype.hash=function(e){return this.toPublic().hash(e)},PrivateKey.prototype.toPublic=function(){if(this._pubCache)return this._pubCache;for(var e=o.info[this.type],t=[],r=0;r<e.parts.length;++r){var n=e.parts[r];t.push(this.part[n])}return this._pubCache=new g({type:this.type,source:this,parts:t}),this.comment&&(this._pubCache.comment=this.comment),this._pubCache},PrivateKey.prototype.derive=function(e){var t,r,o;if(n.string(e,"type"),"ed25519"===this.type&&"curve25519"===e)return 0===(t=this.part.k.data)[0]&&(t=t.slice(1)),o=m.box.keyPair.fromSecretKey(new Uint8Array(t)),r=i.from(o.publicKey),new PrivateKey({type:"curve25519",parts:[{name:"A",data:l.mpNormalize(r)},{name:"k",data:l.mpNormalize(t)}]});if("curve25519"===this.type&&"ed25519"===e)return 0===(t=this.part.k.data)[0]&&(t=t.slice(1)),o=m.sign.keyPair.fromSeed(new Uint8Array(t)),r=i.from(o.publicKey),new PrivateKey({type:"ed25519",parts:[{name:"A",data:l.mpNormalize(r)},{name:"k",data:l.mpNormalize(t)}]});throw new Error("Key derivation not supported from "+this.type+" to "+e)},PrivateKey.prototype.createVerify=function(e){return this.toPublic().createVerify(e)},PrivateKey.prototype.createSign=function(e){if(void 0===e&&(e=this.defaultHashAlgorithm()),n.string(e,"hash algorithm"),"ed25519"===this.type&&void 0!==f)return new f.Signer(this,e);if("curve25519"===this.type)throw new Error("Curve25519 keys are not suitable for signing or verification");var t,r,o;try{r=e.toUpperCase(),t=s.createSign(r)}catch(e){o=e}(void 0===t||o instanceof Error&&o.message.match(/Unknown message digest/))&&(r="RSA-",r+=e.toUpperCase(),t=s.createSign(r)),n.ok(t,"failed to create verifier");var c=t.sign.bind(t),u=this.toBuffer("pkcs1"),l=this.type,p=this.curve;return t.sign=function(){var t=c(u);return"string"==typeof t&&(t=i.from(t,"binary")),(t=a.parse(t,l,"asn1")).hashAlgorithm=e,t.curve=p,t},t},PrivateKey.parse=function(e,t,r){"string"!=typeof e&&n.buffer(e,"data"),void 0===t&&(t="auto"),n.string(t,"format"),"string"==typeof r&&(r={filename:r}),n.optionalObject(r,"options"),void 0===r&&(r={}),n.optionalString(r.filename,"options.filename"),void 0===r.filename&&(r.filename="(unnamed)"),n.object(v[t],"formats[format]");try{var i=v[t].read(e,r);return n.ok(i instanceof PrivateKey,"key is not a private key"),i.comment||(i.comment=r.filename),i}catch(e){if("KeyEncryptedError"===e.name)throw e;throw new y(r.filename,t,e)}},PrivateKey.isPrivateKey=function(e,t){return l.isCompatible(e,PrivateKey,t)},PrivateKey.generate=function(e,t){switch(void 0===t&&(t={}),n.object(t,"options"),e){case"ecdsa":return void 0===t.curve&&(t.curve="nistp256"),n.string(t.curve,"options.curve"),d(t.curve);case"ed25519":return h();default:throw new Error('Key generation not supported with key type "'+e+'"')}},PrivateKey.prototype._sshpkApiVersion=[1,5],PrivateKey._oldVersionDetect=function(e){return n.func(e.toPublic),n.func(e.createSign),e.derive?[1,3]:e.defaultHashAlgorithm?[1,2]:e.formats.auto?[1,1]:[1,0]}},function(e,t,r){"use strict";e.exports={OAuth2:{Parameters:{GRANT_TYPE:"grant_type",CLIENT_ASSERTION:"client_assertion",CLIENT_ASSERTION_TYPE:"client_assertion_type",CLIENT_ID:"client_id",CLIENT_SECRET:"client_secret",REDIRECT_URI:"redirect_uri",RESOURCE:"resource",CODE:"code",SCOPE:"scope",ASSERTION:"assertion",AAD_API_VERSION:"api-version",USERNAME:"username",PASSWORD:"password",REFRESH_TOKEN:"refresh_token",LANGUAGE:"mkt",DEVICE_CODE:"device_code"},GrantType:{AUTHORIZATION_CODE:"authorization_code",REFRESH_TOKEN:"refresh_token",CLIENT_CREDENTIALS:"client_credentials",JWT_BEARER:"urn:ietf:params:oauth:client-assertion-type:jwt-bearer",PASSWORD:"password",SAML1:"urn:ietf:params:oauth:grant-type:saml1_1-bearer",SAML2:"urn:ietf:params:oauth:grant-type:saml2-bearer",DEVICE_CODE:"device_code"},ResponseParameters:{CODE:"code",TOKEN_TYPE:"token_type",ACCESS_TOKEN:"access_token",ID_TOKEN:"id_token",REFRESH_TOKEN:"refresh_token",CREATED_ON:"created_on",EXPIRES_ON:"expires_on",EXPIRES_IN:"expires_in",RESOURCE:"resource",ERROR:"error",ERROR_DESCRIPTION:"error_description"},DeviceCodeResponseParameters:{USER_CODE:"user_code",DEVICE_CODE:"device_code",VERIFICATION_URL:"verification_url",EXPIRES_IN:"expires_in",INTERVAL:"interval",MESSAGE:"message",ERROR:"error",ERROR_DESCRIPTION:"error_description"},Scope:{OPENID:"openid"},IdTokenMap:{tid:"tenantId",given_name:"givenName",family_name:"familyName",idp:"identityProvider",oid:"oid"}},TokenResponseFields:{TOKEN_TYPE:"tokenType",ACCESS_TOKEN:"accessToken",REFRESH_TOKEN:"refreshToken",CREATED_ON:"createdOn",EXPIRES_ON:"expiresOn",EXPIRES_IN:"expiresIn",RESOURCE:"resource",USER_ID:"userId",ERROR:"error",ERROR_DESCRIPTION:"errorDescription"},UserCodeResponseFields:{USER_CODE:"userCode",DEVICE_CODE:"deviceCode",VERIFICATION_URL:"verificationUrl",EXPIRES_IN:"expiresIn",INTERVAL:"interval",MESSAGE:"message",ERROR:"error",ERROR_DESCRIPTION:"errorDescription"},IdTokenFields:{USER_ID:"userId",IS_USER_ID_DISPLAYABLE:"isUserIdDisplayable",TENANT_ID:"tenantId",GIVE_NAME:"givenName",FAMILY_NAME:"familyName",IDENTITY_PROVIDER:"identityProvider"},Misc:{MAX_DATE:4294967295,CLOCK_BUFFER:5},Jwt:{SELF_SIGNED_JWT_LIFETIME:10,AUDIENCE:"aud",ISSUER:"iss",SUBJECT:"sub",NOT_BEFORE:"nbf",EXPIRES_ON:"exp",JWT_ID:"jti"},AADConstants:{WORLD_WIDE_AUTHORITY:"login.windows.net",WELL_KNOWN_AUTHORITY_HOSTS:["login.windows.net","login.microsoftonline.com","login.chinacloudapi.cn","login-us.microsoftonline.com","login.microsoftonline.de","login.microsoftonline.us"],INSTANCE_DISCOVERY_ENDPOINT_TEMPLATE:"https://{authorize_host}/common/discovery/instance?authorization_endpoint={authorize_endpoint}&api-version=1.0",AUTHORIZE_ENDPOINT_PATH:"/oauth2/authorize",TOKEN_ENDPOINT_PATH:"/oauth2/token",DEVICE_ENDPOINT_PATH:"/oauth2/devicecode"},UserRealm:{FederationProtocolType:{WSFederation:"wstrust",SAML2:"saml20",Unknown:"unknown"},AccountType:{Federated:"federated",Managed:"managed",Unknown:"unknown"}},Saml:{TokenTypeV1:"urn:oasis:names:tc:SAML:1.0:assertion",TokenTypeV2:"urn:oasis:names:tc:SAML:2.0:assertion"},XmlNamespaces:{wsdl:"http://schemas.xmlsoap.org/wsdl/",sp:"http://docs.oasis-open.org/ws-sx/ws-securitypolicy/200702",sp2005:"http://schemas.xmlsoap.org/ws/2005/07/securitypolicy",wsu:"http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-utility-1.0.xsd",wsa10:"http://www.w3.org/2005/08/addressing",http:"http://schemas.microsoft.com/ws/06/2004/policy/http",soap12:"http://schemas.xmlsoap.org/wsdl/soap12/",wsp:"http://schemas.xmlsoap.org/ws/2004/09/policy",s:"http://www.w3.org/2003/05/soap-envelope",wsa:"http://www.w3.org/2005/08/addressing",wst:"http://docs.oasis-open.org/ws-sx/ws-trust/200512",t:"http://schemas.xmlsoap.org/ws/2005/02/trust"},Cache:{HASH_ALGORITHM:"sha256"},HttpError:{UNAUTHORIZED:401},AdalIdParameters:{SKU:"x-client-SKU",VERSION:"x-client-Ver",OS:"x-client-OS",CPU:"x-client-CPU",NODE_SKU:"Node"},WSTrustVersion:{UNDEFINED:"undefined",WSTRUST13:"wstrust13",WSTRUST2005:"wstrust2005"}}},function(e,t,r){var n=r(640),i=r(31),o=i;o.v1=n,o.v4=i,e.exports=o},function(e,t,r){var n=r(29),i=r(1),o=r(7),s=r(15),a=r(22),c=r(84),u=r(139),l=r(63);t.trimPortFromUri=function(e){return((e=o.parse(e)).protocol===a.HTTPS&&e.port==a.DEFAULT_HTTPS_PORT||e.protocol===a.HTTP&&e.port==a.DEFAULT_HTTP_PORT)&&(e.host=e.hostname),o.format(e)},t.objectKeysLength=function(e){return e?n.keys(e).length:0},t.isBrowser=function(){return"undefined"!=typeof window},t.isIE=function(){if(!t.isBrowser())return!1;var e=window.navigator.userAgent,r=e.indexOf("MSIE "),n=e.indexOf("Trident/");return r>0||n>0},t.is32=function(){return!t.isBrowser()&&"ia32"===process.arch},t.objectIsNull=function(e){return n.isNull(e)||n.isUndefined(e)},t.objectIsEmpty=function(e){return n.isEmpty(e)},t.objectIsInt=function(e){return"number"==typeof e&&parseFloat(e)==parseInt(e,10)&&!isNaN(e)},t.objectIsNaN=function(e){return"number"==typeof e&&isNaN(e)},t.objectIsString=function(e){return n.isString(e)},t.objectIsFunction=function(e){return n.isFunction(e)},t.zeroPaddingString=function(e,r){var n="0000000000"+e;return n.length<r?t.zeroPaddingString(n,r):n.substr(-1*r)},t.stringIsEmpty=function(e){return n.isNull(e)||n.isUndefined(e)||""===e},t.IsNullOrEmptyOrUndefinedOrWhiteSpace=function(e){return!(!n.isNull(e)&&!n.isUndefined(e)&&""!==e)||!(!n.isString(e)||0!==e.trim().length)},t.stringFormat=function(e){if(arguments.length>1)for(var t=1;-1!==e.indexOf("?");t++)e=e.replace("?",arguments[t]);return e},t.stringStartsWith=function(e,t){return!!n.isNull(t)||e.substr(0,t.length)===t},t.stringEndsWith=function(e,t){return!!n.isNull(t)||e.substr(e.length-t.length)===t},t.removeBOM=function(e){return 65279!==e.charCodeAt(0)&&65519!==e.charCodeAt(0)||(e=e.substring(1)),e},t.merge=function(){return n.extend.apply(this,arguments)},t.inArrayInsensitive=function(e,t){return n.contains(n.map(t,function(e){return e.toLowerCase()}),e.toLowerCase())},t.tryGetValueInsensitive=function(e,t,r){if(t)for(var n in t)if(t.hasOwnProperty(n)&&n.toString().toLowerCase()===e.toString().toLowerCase())return t[n];return r},t.tryGetValueChain=function(e,r,n){if(0===r.length)return e;var i=r.shift();return e&&void 0!==e[i]?t.tryGetValueChain(e[i],r,n):n},t.setObjectInnerPropertyValue=function(e,r,n){if(e&&!(r.length<1)){var i=r.shift();0!==r.length?(e[i]||(e[i]={}),t.setObjectInnerPropertyValue(e[i],r,n)):e[i]=n}},t.truncatedISO8061Date=function(e){var t=e.toISOString();return t.substring(0,t.length-5)+"Z"},t.normalizeArgs=function(e,t,r){var i={};n.isFunction(e)&&!t?t=e:e&&(i=e),r(i,t)},t.getNodeVersion=function(){var e=process.version.split(".");return{major:parseInt(e[0].substr(1),10),minor:parseInt(e[1],10),patch:parseInt(e[2],10)}},t.calculateMD5=function(e,t,r,n){var i=Buffer.alloc(t),o=0,s=(new c).createMd5Hash();e.on("data",function(r){if(o+r.length>t){var n=t-o;n>0&&((r=r.slice(0,n)).copy(i,o),s.update(r),o+=n),e.emit("end")}else r.copy(i,o),s.update(r),o+=r.length}).on("end",function(){if(!e.endEmitted){i=i.slice(0,o);var t=s.digest("base64");e.endEmitted=!0,n(i,t)}})},t.isBufferAllZero=function(e){for(var t=0,r=e.length;t<r;t++)if(0!==e[t])return!1;return!0};var p=null;t.writeZerosToStream=function(e,r,n,i,o){var s=a.BlobConstants.DEFAULT_WRITE_BLOCK_SIZE_IN_BYTES,c=Math.min(s,r),u=r-c,l=null;return c==s?(p||(p=Buffer.alloc(s)).fill(0),l=p):(l=Buffer.alloc(c)).fill(0),n&&n.update(l),e.write(l,function(){t.objectIsFunction(i)&&i(null,l.length),l=null,u>0?t.writeZerosToStream(e,u,n,i,o):t.objectIsFunction(o)&&o(null,null)})},t.getContentMd5=function(e,t){t||(t="base64");var r=(new c).createMd5Hash();return r.update(e,"utf8"),r.digest(t)},t.getNextLocation=function(e,t){switch(t){case u.LocationMode.PRIMARY_ONLY:return a.StorageLocation.PRIMARY;case u.LocationMode.SECONDARY_ONLY:return a.StorageLocation.SECONDARY;case u.LocationMode.PRIMARY_THEN_SECONDARY:case u.LocationMode.SECONDARY_THEN_PRIMARY:return e===a.StorageLocation.PRIMARY?a.StorageLocation.SECONDARY:a.StorageLocation.PRIMARY;default:throw new RangeError(i.format(l.ARGUMENT_OUT_OF_RANGE_ERROR,"locationMode",t))}},t.getNextListingLocationMode=function(e){if(n.isNull(e)||n.isUndefined(e))return a.RequestLocationMode.PRIMARY_OR_SECONDARY;switch(e.targetLocation){case a.StorageLocation.PRIMARY:return a.RequestLocationMode.PRIMARY_ONLY;case a.StorageLocation.SECONDARY:return a.RequestLocationMode.SECONDARY_ONLY;default:throw new RangeError(i.format(l.ARGUMENT_OUT_OF_RANGE_ERROR,"targetLocation",e.targetLocation))}},t.isStreamPaused=function(e){return e instanceof s&&(!0===e._paused||e._readableState&&!1===e._readableState.flowing)},t.parseCopyProgress=function(e){if("string"!=typeof e||-1===e.indexOf("/"))return{};var t=e.split("/");return{bytesCopied:t[0],totalBytes:t[1]}};var d={"x-ms-blob-sequence-number":"sequenceNumber","content-Type":"contentSettings.contentType","content-Encoding":"contentSettings.contentEncoding","content-Language":"contentSettings.contentLanguage","cache-Control":"contentSettings.cacheControl","content-Disposition":"contentSettings.contentDisposition","content-MD5":"contentSettings.contentMD5",leaseId:"lease.id",leaseStatus:"lease.status",leaseDuration:"lease.duration",leaseState:"lease.state",copyId:"copy.id",copyStatus:"copy.status",copySource:"copy.source",copyProgress:"copy.progress",copyCompletionTime:"copy.completionTime",copyStatusDescription:"copy.statusDescription",copyDestinationSnapshot:"copy.destinationSnapshot",publicAccess:"publicAccessLevel",incrementalCopy:"isIncrementalCopy"};t.normalizePropertyNameFromXML=function(e){return this.IsNullOrEmptyOrUndefinedOrWhiteSpace(e)?"":(e=(e=e.trim())[0].toLowerCase()+e.substring(1))in d?d[e]:-1!=e.toLowerCase().indexOf("-")?e.replace("-",""):e},t.setPropertyValueFromXML=function(e,r,n){for(var i in r)if(r.hasOwnProperty(i)){if(n){var o=this.normalizePropertyNameFromXML(i).split(".");t.setObjectInnerPropertyValue(e,o,r[i])}else e[i.toLowerCase()]=r[i];if("copyprogress"===i.toLowerCase()){var s=this.parseCopyProgress(r[i]);t.setObjectInnerPropertyValue(e,["copy","bytesCopied"],parseInt(s.bytesCopied)),t.setObjectInnerPropertyValue(e,["copy","totalBytes"],parseInt(s.totalBytes))}}},t.filterOutNonReservedProperties=function(e,t){var r={};if(t)for(var n in t)if(t.hasOwnProperty(n)){var i=e.hasOwnProperty(n),o="function"==typeof t[n];i||o||(r[n]=t[n])}return r}},function(e,t,r){"use strict";t.fromCallback=function(e){return Object.defineProperty(function(){if("function"!=typeof arguments[arguments.length-1])return new Promise((t,r)=>{arguments[arguments.length]=((e,n)=>{if(e)return r(e);t(n)}),arguments.length++,e.apply(this,arguments)});e.apply(this,arguments)},"name",{value:e.name})},t.fromPromise=function(e){return Object.defineProperty(function(){const t=arguments[arguments.length-1];if("function"!=typeof t)return e.apply(this,arguments);e.apply(this,arguments).then(e=>t(null,e),t)},"name",{value:e.name})}},function(e,t,r){try{var n=r(1);if("function"!=typeof n.inherits)throw"";e.exports=n.inherits}catch(t){e.exports=r(541)}},function(e,t,r){"use strict";var n=Object.prototype.hasOwnProperty,i=Object.prototype.toString,o=Object.defineProperty,s=Object.getOwnPropertyDescriptor,a=function isArray(e){return"function"==typeof Array.isArray?Array.isArray(e):"[object Array]"===i.call(e)},c=function isPlainObject(e){if(!e||"[object Object]"!==i.call(e))return!1;var t,r=n.call(e,"constructor"),o=e.constructor&&e.constructor.prototype&&n.call(e.constructor.prototype,"isPrototypeOf");if(e.constructor&&!r&&!o)return!1;for(t in e);return void 0===t||n.call(e,t)},u=function setProperty(e,t){o&&"__proto__"===t.name?o(e,t.name,{enumerable:!0,configurable:!0,value:t.newValue,writable:!0}):e[t.name]=t.newValue},l=function getProperty(e,t){if("__proto__"===t){if(!n.call(e,t))return;if(s)return s(e,t).value}return e[t]};e.exports=function extend(){var e,t,r,n,i,o,s=arguments[0],p=1,d=arguments.length,h=!1;for("boolean"==typeof s&&(h=s,s=arguments[1]||{},p=2),(null==s||"object"!=typeof s&&"function"!=typeof s)&&(s={});p<d;++p)if(null!=(e=arguments[p]))for(t in e)r=l(s,t),s!==(n=l(e,t))&&(h&&n&&(c(n)||(i=a(n)))?(i?(i=!1,o=r&&a(r)?r:[]):o=r&&c(r)?r:{},u(s,{name:t,newValue:extend(h,o,n)})):void 0!==n&&u(s,{name:t,newValue:n}));return s}},function(e,t,r){(function(){var t,n,i,o,s,a,c,u,l,p,d,h,f={}.hasOwnProperty;h=r(75),d=h.isObject,p=h.isFunction,l=h.isEmpty,s=null,t=null,n=null,i=null,o=null,c=null,u=null,a=null,e.exports=function(){function XMLNode(e){this.parent=e,this.parent&&(this.options=this.parent.options,this.stringify=this.parent.stringify),this.children=[],s||(s=r(141),t=r(142),n=r(143),i=r(144),o=r(145),c=r(150),u=r(151),a=r(152))}return XMLNode.prototype.element=function(e,t,r){var n,i,o,s,a,c,u,h,m,g;if(c=null,null==t&&(t={}),t=t.valueOf(),d(t)||(r=(m=[t,r])[0],t=m[1]),null!=e&&(e=e.valueOf()),Array.isArray(e))for(o=0,u=e.length;o<u;o++)i=e[o],c=this.element(i);else if(p(e))c=this.element(e.apply());else if(d(e)){for(a in e)if(f.call(e,a))if(g=e[a],p(g)&&(g=g.apply()),d(g)&&l(g)&&(g=null),!this.options.ignoreDecorators&&this.stringify.convertAttKey&&0===a.indexOf(this.stringify.convertAttKey))c=this.attribute(a.substr(this.stringify.convertAttKey.length),g);else if(!this.options.separateArrayItems&&Array.isArray(g))for(s=0,h=g.length;s<h;s++)i=g[s],(n={})[a]=i,c=this.element(n);else d(g)?(c=this.element(a)).element(g):c=this.element(a,g)}else c=!this.options.ignoreDecorators&&this.stringify.convertTextKey&&0===e.indexOf(this.stringify.convertTextKey)?this.text(r):!this.options.ignoreDecorators&&this.stringify.convertCDataKey&&0===e.indexOf(this.stringify.convertCDataKey)?this.cdata(r):!this.options.ignoreDecorators&&this.stringify.convertCommentKey&&0===e.indexOf(this.stringify.convertCommentKey)?this.comment(r):!this.options.ignoreDecorators&&this.stringify.convertRawKey&&0===e.indexOf(this.stringify.convertRawKey)?this.raw(r):!this.options.ignoreDecorators&&this.stringify.convertPIKey&&0===e.indexOf(this.stringify.convertPIKey)?this.instruction(e.substr(this.stringify.convertPIKey.length),r):this.node(e,t,r);if(null==c)throw new Error("Could not create any elements with: "+e);return c},XMLNode.prototype.insertBefore=function(e,t,r){var n,i,o;if(this.isRoot)throw new Error("Cannot insert elements at root level");return i=this.parent.children.indexOf(this),o=this.parent.children.splice(i),n=this.parent.element(e,t,r),Array.prototype.push.apply(this.parent.children,o),n},XMLNode.prototype.insertAfter=function(e,t,r){var n,i,o;if(this.isRoot)throw new Error("Cannot insert elements at root level");return i=this.parent.children.indexOf(this),o=this.parent.children.splice(i+1),n=this.parent.element(e,t,r),Array.prototype.push.apply(this.parent.children,o),n},XMLNode.prototype.remove=function(){var e;if(this.isRoot)throw new Error("Cannot remove the root element");return e=this.parent.children.indexOf(this),[].splice.apply(this.parent.children,[e,e-e+1].concat([])),this.parent},XMLNode.prototype.node=function(e,t,r){var n,i;return null!=e&&(e=e.valueOf()),t||(t={}),t=t.valueOf(),d(t)||(r=(i=[t,r])[0],t=i[1]),n=new s(this,e,t),null!=r&&n.text(r),this.children.push(n),n},XMLNode.prototype.text=function(e){var t;return t=new u(this,e),this.children.push(t),this},XMLNode.prototype.cdata=function(e){var r;return r=new t(this,e),this.children.push(r),this},XMLNode.prototype.comment=function(e){var t;return t=new n(this,e),this.children.push(t),this},XMLNode.prototype.commentBefore=function(e){var t,r;return t=this.parent.children.indexOf(this),r=this.parent.children.splice(t),this.parent.comment(e),Array.prototype.push.apply(this.parent.children,r),this},XMLNode.prototype.commentAfter=function(e){var t,r;return t=this.parent.children.indexOf(this),r=this.parent.children.splice(t+1),this.parent.comment(e),Array.prototype.push.apply(this.parent.children,r),this},XMLNode.prototype.raw=function(e){var t;return t=new c(this,e),this.children.push(t),this},XMLNode.prototype.instruction=function(e,t){var r,n,i,o,s;if(null!=e&&(e=e.valueOf()),null!=t&&(t=t.valueOf()),Array.isArray(e))for(o=0,s=e.length;o<s;o++)r=e[o],this.instruction(r);else if(d(e))for(r in e)f.call(e,r)&&(n=e[r],this.instruction(r,n));else p(t)&&(t=t.apply()),i=new a(this,e,t),this.children.push(i);return this},XMLNode.prototype.instructionBefore=function(e,t){var r,n;return r=this.parent.children.indexOf(this),n=this.parent.children.splice(r),this.parent.instruction(e,t),Array.prototype.push.apply(this.parent.children,n),this},XMLNode.prototype.instructionAfter=function(e,t){var r,n;return r=this.parent.children.indexOf(this),n=this.parent.children.splice(r+1),this.parent.instruction(e,t),Array.prototype.push.apply(this.parent.children,n),this},XMLNode.prototype.declaration=function(e,t,r){var n,o;return n=this.document(),o=new i(n,e,t,r),n.children[0]instanceof i?n.children[0]=o:n.children.unshift(o),n.root()||n},XMLNode.prototype.doctype=function(e,t){var r,n,i,s,a,c,u,l,p;for(r=this.document(),n=new o(r,e,t),i=s=0,c=(l=r.children).length;s<c;i=++s)if(l[i]instanceof o)return r.children[i]=n,n;for(i=a=0,u=(p=r.children).length;a<u;i=++a)if(p[i].isRoot)return r.children.splice(i,0,n),n;return r.children.push(n),n},XMLNode.prototype.up=function(){if(this.isRoot)throw new Error("The root node has no parent. Use doc() if you need to get the document object.");return this.parent},XMLNode.prototype.root=function(){var e;for(e=this;e;){if(e.isDocument)return e.rootObject;if(e.isRoot)return e;e=e.parent}},XMLNode.prototype.document=function(){var e;for(e=this;e;){if(e.isDocument)return e;e=e.parent}},XMLNode.prototype.end=function(e){return this.document().end(e)},XMLNode.prototype.prev=function(){var e;if((e=this.parent.children.indexOf(this))<1)throw new Error("Already at the first node");return this.parent.children[e-1]},XMLNode.prototype.next=function(){var e;if(-1===(e=this.parent.children.indexOf(this))||e===this.parent.children.length-1)throw new Error("Already at the last node");return this.parent.children[e+1]},XMLNode.prototype.importDocument=function(e){var t;return(t=e.root().clone()).parent=this,t.isRoot=!1,this.children.push(t),this},XMLNode.prototype.ele=function(e,t,r){return this.element(e,t,r)},XMLNode.prototype.nod=function(e,t,r){return this.node(e,t,r)},XMLNode.prototype.txt=function(e){return this.text(e)},XMLNode.prototype.dat=function(e){return this.cdata(e)},XMLNode.prototype.com=function(e){return this.comment(e)},XMLNode.prototype.ins=function(e,t){return this.instruction(e,t)},XMLNode.prototype.doc=function(){return this.document()},XMLNode.prototype.dec=function(e,t,r){return this.declaration(e,t,r)},XMLNode.prototype.dtd=function(e,t){return this.doctype(e,t)},XMLNode.prototype.e=function(e,t,r){return this.element(e,t,r)},XMLNode.prototype.n=function(e,t,r){return this.node(e,t,r)},XMLNode.prototype.t=function(e){return this.text(e)},XMLNode.prototype.d=function(e){return this.cdata(e)},XMLNode.prototype.c=function(e){return this.comment(e)},XMLNode.prototype.r=function(e){return this.raw(e)},XMLNode.prototype.i=function(e,t){return this.instruction(e,t)},XMLNode.prototype.u=function(){return this.up()},XMLNode.prototype.importXMLBuilder=function(e){return this.importDocument(e)},XMLNode}()}).call(this)},function(e,t,r){"use strict";var n=r(39),i=r(298),o=r(189).paramsHaveRequestBody;function initParams(e,t,r){"function"==typeof t&&(r=t);var i={};return"object"==typeof t?n(i,t,{uri:e}):n(i,"string"==typeof e?{uri:e}:e),i.callback=r||i.callback,i}function request(e,t,r){if(void 0===e)throw new Error("undefined is not a valid uri or options object.");var n=initParams(e,t,r);if("HEAD"===n.method&&o(n))throw new Error("HTTP HEAD requests MUST NOT include a request body.");return new request.Request(n)}function verbFunc(e){var t=e.toUpperCase();return function(e,r,n){var i=initParams(e,r,n);return i.method=t,request(i,i.callback)}}function wrapRequestMethod(e,t,r,i){return function(o,s,a){var c=initParams(o,s,a),u={};return n(!0,u,t,c),u.pool=c.pool||t.pool,i&&(u.method=i.toUpperCase()),"function"==typeof r&&(e=r),e(u,u.callback)}}request.get=verbFunc("get"),request.head=verbFunc("head"),request.options=verbFunc("options"),request.post=verbFunc("post"),request.put=verbFunc("put"),request.patch=verbFunc("patch"),request.del=verbFunc("delete"),request.delete=verbFunc("delete"),request.jar=function(e){return i.jar(e)},request.cookie=function(e){return i.parse(e)},request.defaults=function(e,t){var r=this;"function"==typeof(e=e||{})&&(t=e,e={});var n=wrapRequestMethod(r,e,t);return["get","head","post","put","patch","del","delete"].forEach(function(i){n[i]=wrapRequestMethod(r[i],e,t,i)}),n.cookie=wrapRequestMethod(r.cookie,e,t),n.jar=r.jar,n.defaults=r.defaults,n},request.forever=function(e,t){var r={};return t&&n(r,t),e&&(r.agentOptions=e),r.forever=!0,request.defaults(r)},e.exports=request,request.Request=r(660),request.initParams=initParams,Object.defineProperty(request,"debug",{enumerable:!0,get:function(){return request.Request.debug},set:function(e){request.Request.debug=e}})},function(e,t,r){"use strict";var n=r(390),i=r(226),o=Object.prototype.toString;function isArray(e){return"[object Array]"===o.call(e)}function isObject(e){return null!==e&&"object"==typeof e}function isFunction(e){return"[object Function]"===o.call(e)}function forEach(e,t){if(null!=e)if("object"!=typeof e&&(e=[e]),isArray(e))for(var r=0,n=e.length;r<n;r++)t.call(null,e[r],r,e);else for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&t.call(null,e[i],i,e)}e.exports={isArray:isArray,isArrayBuffer:function isArrayBuffer(e){return"[object ArrayBuffer]"===o.call(e)},isBuffer:i,isFormData:function isFormData(e){return"undefined"!=typeof FormData&&e instanceof FormData},isArrayBufferView:function isArrayBufferView(e){return"undefined"!=typeof ArrayBuffer&&ArrayBuffer.isView?ArrayBuffer.isView(e):e&&e.buffer&&e.buffer instanceof ArrayBuffer},isString:function isString(e){return"string"==typeof e},isNumber:function isNumber(e){return"number"==typeof e},isObject:isObject,isUndefined:function isUndefined(e){return void 0===e},isDate:function isDate(e){return"[object Date]"===o.call(e)},isFile:function isFile(e){return"[object File]"===o.call(e)},isBlob:function isBlob(e){return"[object Blob]"===o.call(e)},isFunction:isFunction,isStream:function isStream(e){return isObject(e)&&isFunction(e.pipe)},isURLSearchParams:function isURLSearchParams(e){return"undefined"!=typeof URLSearchParams&&e instanceof URLSearchParams},isStandardBrowserEnv:function isStandardBrowserEnv(){return("undefined"==typeof navigator||"ReactNative"!==navigator.product)&&"undefined"!=typeof window&&"undefined"!=typeof document},forEach:forEach,merge:function merge(){var e={};function assignValue(t,r){"object"==typeof e[r]&&"object"==typeof t?e[r]=merge(e[r],t):e[r]=t}for(var t=0,r=arguments.length;t<r;t++)forEach(arguments[t],assignValue);return e},extend:function extend(e,t,r){return forEach(t,function assignValue(t,i){e[i]=r&&"function"==typeof t?n(t,r):t}),e},trim:function trim(e){return e.replace(/^\s*/,"").replace(/\s*$/,"")}}},function(e,t,r){"use strict";var n=r(53),i=r(35),o={0:"ERROR:",1:"WARNING:",2:"INFO:",3:"VERBOSE:"},s={LOGGING_LEVEL:{ERROR:0,WARN:1,INFO:2,VERBOSE:3},setLoggingOptions:function(e){if(e||(e={}),e.log){if(!n.isFunction(e.log))throw new Error("setLogOptions expects the log key in the options parameter to be a function")}else e.log=function(){};if(e.level){var t=e.level;if(t<0||t>3)throw new Error("setLogOptions expects the level key to be in the range 0 to 3 inclusive")}else e.level=this.LOGGING_LEVEL.ERROR;1!=e.loggingWithPII&&(e.loggingWithPII=!1),this.LogOptions=e},getLoggingOptions:function(){return this.LogOptions},LogOptions:{log:function(){},level:0,loggingWithPII:!1}};function Logger(e,t){if(!t)throw new Error("Logger: logContext is a required parameter");this._componentName=e,this._logContext=t}Object.defineProperty(Logger.prototype,"context",{get:function(){return this._logContext}}),Logger.prototype.log=function(e,t,r,i){if((1!=i||s.LogOptions.loggingWithPII)&&e<=s.LogOptions.level){n.isFunction(t)&&(t=t());var a=this._logContext.correlationId||"<no correlation id>",c=(new Date).toUTCString()+":"+a+" - "+this._componentName+": "+o[e]+" "+t;r&&(c+="\nStack:\n"+r.stack),s.LogOptions.log(e,c,r)}},Logger.prototype.error=function(e,t,r){this.log(s.LOGGING_LEVEL.ERROR,e,t,r)},Logger.prototype.warn=function(e,t){this.log(s.LOGGING_LEVEL.WARN,e,null,t)},Logger.prototype.info=function(e,t){this.log(s.LOGGING_LEVEL.INFO,e,null,t)},Logger.prototype.verbose=function(e,t){this.log(s.LOGGING_LEVEL.VERBOSE,e,null,t)},Logger.prototype.createError=function(e,t){var r=new Error(e);return this.error(e,r,t),r};t={Logging:s,Logger:Logger,createLogContext:function createLogContext(e){return{correlationId:e||i.v4()}}};e.exports=t},function(e,t){e.exports=require("assert")},function(e,t,r){"use strict";const n=(0,r(37).fromCallback)(r(507)),i=r(508);e.exports={mkdirs:n,mkdirsSync:i,mkdirp:n,mkdirpSync:i,ensureDir:n,ensureDirSync:i}},function(e,t,r){"use strict";function callbackToPromise(e,t){if(t){if("function"!=typeof t)throw new TypeError("Callback has to be a Function");return e(t)}return new Promise(function(t,r){try{e(function(e,n){return e?r(e):t(n)})}catch(e){r(e)}})}function tripleValueCallbackToPromise(e,t,r){if(r){if("function"!=typeof r)throw new TypeError("Callback has to be a Function");return e(r)}return new Promise(function(r,n){try{e(function(e,i,o){e&&n(e),r(t(i,o))})}catch(e){n(e)}})}function createResultWithHttpResponse(e,t){return{responseBody:e,httpResponse:t}}t.callbackToPromise=callbackToPromise,t.errorCallbackToPromise=function errorCallbackToPromise(e,t){return callbackToPromise(e,t)},t.noErrorCallbackToPromise=function noErrorCallbackToPromise(e,t){if(t){if("function"!=typeof t)throw new TypeError("Callback has to be a Function");return e(t)}return new Promise(function(t,r){e(function(e){return t(e)})})},t.doubleValueCallbackToPromise=function doubleValueCallbackToPromise(e,t,r){if(r){if("function"!=typeof r)throw new TypeError("Callback has to be a Function");return e(r)}return new Promise(function(r,n){try{e(function(e,i){return e instanceof Error&&n(e),i instanceof Error&&n(i),r(t(e,i))})}catch(e){n(e)}})},t.tripleValueCallbackToPromise=tripleValueCallbackToPromise,t.httpCallbackToPromise=function httpCallbackToPromise(e,t){return tripleValueCallbackToPromise(e,function(e,t){return createResultWithHttpResponse(e,t)},t)},t.createResultWithHttpResponse=createResultWithHttpResponse},function(e,t){e.exports=require("net")},function(e,t){e.exports=function(e){return e.webpackPolyfill||(e.deprecate=function(){},e.paths=[],e.children||(e.children=[]),Object.defineProperty(e,"loaded",{enumerable:!0,get:function(){return e.l}}),Object.defineProperty(e,"id",{enumerable:!0,get:function(){return e.i}}),e.webpackPolyfill=1),e}},function(e,t,r){"use strict";const n=r(17),i=r(533),o=process.env;let s;function getSupportLevel(e){return function translateLevel(e){return 0!==e&&{level:e,hasBasic:!0,has256:e>=2,has16m:e>=3}}(function supportsColor(e){if(!1===s)return 0;if(i("color=16m")||i("color=full")||i("color=truecolor"))return 3;if(i("color=256"))return 2;if(e&&!e.isTTY&&!0!==s)return 0;const t=s?1:0;if("win32"===process.platform){const e=n.release().split(".");return Number(process.versions.node.split(".")[0])>=8&&Number(e[0])>=10&&Number(e[2])>=10586?Number(e[2])>=14931?3:2:1}if("CI"in o)return["TRAVIS","CIRCLECI","APPVEYOR","GITLAB_CI"].some(e=>e in o)||"codeship"===o.CI_NAME?1:t;if("TEAMCITY_VERSION"in o)return/^(9\.(0*[1-9]\d*)\.|\d{2,}\.)/.test(o.TEAMCITY_VERSION)?1:0;if("truecolor"===o.COLORTERM)return 3;if("TERM_PROGRAM"in o){const e=parseInt((o.TERM_PROGRAM_VERSION||"").split(".")[0],10);switch(o.TERM_PROGRAM){case"iTerm.app":return e>=3?3:2;case"Apple_Terminal":return 2}}return/-256(color)?$/i.test(o.TERM)?2:/^screen|^xterm|^vt100|^vt220|^rxvt|color|ansi|cygwin|linux/i.test(o.TERM)?1:"COLORTERM"in o?1:(o.TERM,t)}(e))}i("no-color")||i("no-colors")||i("color=false")?s=!1:(i("color")||i("colors")||i("color=true")||i("color=always"))&&(s=!0),"FORCE_COLOR"in o&&(s=0===o.FORCE_COLOR.length||0!==parseInt(o.FORCE_COLOR,10)),e.exports={supportsColor:getSupportLevel,stdout:getSupportLevel(process.stdout),stderr:getSupportLevel(process.stderr)}},function(e,t,r){"use strict";var n=function(){function Logging(){}return Logging.info=function(e){for(var t=[],r=1;r<arguments.length;r++)t[r-1]=arguments[r];Logging.enableDebug&&console.info(Logging.TAG+e,t)},Logging.warn=function(e){for(var t=[],r=1;r<arguments.length;r++)t[r-1]=arguments[r];Logging.disableWarnings||console.warn(Logging.TAG+e,t)},Logging.enableDebug=!1,Logging.disableWarnings=!1,Logging.TAG="ApplicationInsights:",Logging}();e.exports=n},function(e,t){e.exports=require("tty")},function(e,t){e.exports=require("querystring")},function(e,t,r){(function(e){var r;!function(){var n="object"==typeof self&&self.self===self&&self||"object"==typeof global&&global.global===global&&global||this||{},i=n._,o=Array.prototype,s=Object.prototype,a="undefined"!=typeof Symbol?Symbol.prototype:null,c=o.push,u=o.slice,l=s.toString,p=s.hasOwnProperty,d=Array.isArray,h=Object.keys,f=Object.create,m=function(){},g=function(e){return e instanceof g?e:this instanceof g?void(this._wrapped=e):new g(e)};t.nodeType?n._=g:(!e.nodeType&&e.exports&&(t=e.exports=g),t._=g),g.VERSION="1.9.1";var y,v=function(e,t,r){if(void 0===t)return e;switch(null==r?3:r){case 1:return function(r){return e.call(t,r)};case 3:return function(r,n,i){return e.call(t,r,n,i)};case 4:return function(r,n,i,o){return e.call(t,r,n,i,o)}}return function(){return e.apply(t,arguments)}},b=function(e,t,r){return g.iteratee!==y?g.iteratee(e,t):null==e?g.identity:g.isFunction(e)?v(e,t,r):g.isObject(e)&&!g.isArray(e)?g.matcher(e):g.property(e)};g.iteratee=y=function(e,t){return b(e,t,1/0)};var _=function(e,t){return t=null==t?e.length-1:+t,function(){for(var r=Math.max(arguments.length-t,0),n=Array(r),i=0;i<r;i++)n[i]=arguments[i+t];switch(t){case 0:return e.call(this,n);case 1:return e.call(this,arguments[0],n);case 2:return e.call(this,arguments[0],arguments[1],n)}var o=Array(t+1);for(i=0;i<t;i++)o[i]=arguments[i];return o[t]=n,e.apply(this,o)}},w=function(e){if(!g.isObject(e))return{};if(f)return f(e);m.prototype=e;var t=new m;return m.prototype=null,t},E=function(e){return function(t){return null==t?void 0:t[e]}},S=function(e,t){return null!=e&&p.call(e,t)},C=function(e,t){for(var r=t.length,n=0;n<r;n++){if(null==e)return;e=e[t[n]]}return r?e:void 0},x=Math.pow(2,53)-1,k=E("length"),R=function(e){var t=k(e);return"number"==typeof t&&t>=0&&t<=x};g.each=g.forEach=function(e,t,r){var n,i;if(t=v(t,r),R(e))for(n=0,i=e.length;n<i;n++)t(e[n],n,e);else{var o=g.keys(e);for(n=0,i=o.length;n<i;n++)t(e[o[n]],o[n],e)}return e},g.map=g.collect=function(e,t,r){t=b(t,r);for(var n=!R(e)&&g.keys(e),i=(n||e).length,o=Array(i),s=0;s<i;s++){var a=n?n[s]:s;o[s]=t(e[a],a,e)}return o};var T=function(e){return function(t,r,n,i){var o=arguments.length>=3;return function(t,r,n,i){var o=!R(t)&&g.keys(t),s=(o||t).length,a=e>0?0:s-1;for(i||(n=t[o?o[a]:a],a+=e);a>=0&&a<s;a+=e){var c=o?o[a]:a;n=r(n,t[c],c,t)}return n}(t,v(r,i,4),n,o)}};g.reduce=g.foldl=g.inject=T(1),g.reduceRight=g.foldr=T(-1),g.find=g.detect=function(e,t,r){var n=(R(e)?g.findIndex:g.findKey)(e,t,r);if(void 0!==n&&-1!==n)return e[n]},g.filter=g.select=function(e,t,r){var n=[];return t=b(t,r),g.each(e,function(e,r,i){t(e,r,i)&&n.push(e)}),n},g.reject=function(e,t,r){return g.filter(e,g.negate(b(t)),r)},g.every=g.all=function(e,t,r){t=b(t,r);for(var n=!R(e)&&g.keys(e),i=(n||e).length,o=0;o<i;o++){var s=n?n[o]:o;if(!t(e[s],s,e))return!1}return!0},g.some=g.any=function(e,t,r){t=b(t,r);for(var n=!R(e)&&g.keys(e),i=(n||e).length,o=0;o<i;o++){var s=n?n[o]:o;if(t(e[s],s,e))return!0}return!1},g.contains=g.includes=g.include=function(e,t,r,n){return R(e)||(e=g.values(e)),("number"!=typeof r||n)&&(r=0),g.indexOf(e,t,r)>=0},g.invoke=_(function(e,t,r){var n,i;return g.isFunction(t)?i=t:g.isArray(t)&&(n=t.slice(0,-1),t=t[t.length-1]),g.map(e,function(e){var o=i;if(!o){if(n&&n.length&&(e=C(e,n)),null==e)return;o=e[t]}return null==o?o:o.apply(e,r)})}),g.pluck=function(e,t){return g.map(e,g.property(t))},g.where=function(e,t){return g.filter(e,g.matcher(t))},g.findWhere=function(e,t){return g.find(e,g.matcher(t))},g.max=function(e,t,r){var n,i,o=-1/0,s=-1/0;if(null==t||"number"==typeof t&&"object"!=typeof e[0]&&null!=e)for(var a=0,c=(e=R(e)?e:g.values(e)).length;a<c;a++)null!=(n=e[a])&&n>o&&(o=n);else t=b(t,r),g.each(e,function(e,r,n){((i=t(e,r,n))>s||i===-1/0&&o===-1/0)&&(o=e,s=i)});return o},g.min=function(e,t,r){var n,i,o=1/0,s=1/0;if(null==t||"number"==typeof t&&"object"!=typeof e[0]&&null!=e)for(var a=0,c=(e=R(e)?e:g.values(e)).length;a<c;a++)null!=(n=e[a])&&n<o&&(o=n);else t=b(t,r),g.each(e,function(e,r,n){((i=t(e,r,n))<s||i===1/0&&o===1/0)&&(o=e,s=i)});return o},g.shuffle=function(e){return g.sample(e,1/0)},g.sample=function(e,t,r){if(null==t||r)return R(e)||(e=g.values(e)),e[g.random(e.length-1)];var n=R(e)?g.clone(e):g.values(e),i=k(n);t=Math.max(Math.min(t,i),0);for(var o=i-1,s=0;s<t;s++){var a=g.random(s,o),c=n[s];n[s]=n[a],n[a]=c}return n.slice(0,t)},g.sortBy=function(e,t,r){var n=0;return t=b(t,r),g.pluck(g.map(e,function(e,r,i){return{value:e,index:n++,criteria:t(e,r,i)}}).sort(function(e,t){var r=e.criteria,n=t.criteria;if(r!==n){if(r>n||void 0===r)return 1;if(r<n||void 0===n)return-1}return e.index-t.index}),"value")};var O=function(e,t){return function(r,n,i){var o=t?[[],[]]:{};return n=b(n,i),g.each(r,function(t,i){var s=n(t,i,r);e(o,t,s)}),o}};g.groupBy=O(function(e,t,r){S(e,r)?e[r].push(t):e[r]=[t]}),g.indexBy=O(function(e,t,r){e[r]=t}),g.countBy=O(function(e,t,r){S(e,r)?e[r]++:e[r]=1});var I=/[^\ud800-\udfff]|[\ud800-\udbff][\udc00-\udfff]|[\ud800-\udfff]/g;g.toArray=function(e){return e?g.isArray(e)?u.call(e):g.isString(e)?e.match(I):R(e)?g.map(e,g.identity):g.values(e):[]},g.size=function(e){return null==e?0:R(e)?e.length:g.keys(e).length},g.partition=O(function(e,t,r){e[r?0:1].push(t)},!0),g.first=g.head=g.take=function(e,t,r){return null==e||e.length<1?null==t?void 0:[]:null==t||r?e[0]:g.initial(e,e.length-t)},g.initial=function(e,t,r){return u.call(e,0,Math.max(0,e.length-(null==t||r?1:t)))},g.last=function(e,t,r){return null==e||e.length<1?null==t?void 0:[]:null==t||r?e[e.length-1]:g.rest(e,Math.max(0,e.length-t))},g.rest=g.tail=g.drop=function(e,t,r){return u.call(e,null==t||r?1:t)},g.compact=function(e){return g.filter(e,Boolean)};var N=function(e,t,r,n){for(var i=(n=n||[]).length,o=0,s=k(e);o<s;o++){var a=e[o];if(R(a)&&(g.isArray(a)||g.isArguments(a)))if(t)for(var c=0,u=a.length;c<u;)n[i++]=a[c++];else N(a,t,r,n),i=n.length;else r||(n[i++]=a)}return n};g.flatten=function(e,t){return N(e,t,!1)},g.without=_(function(e,t){return g.difference(e,t)}),g.uniq=g.unique=function(e,t,r,n){g.isBoolean(t)||(n=r,r=t,t=!1),null!=r&&(r=b(r,n));for(var i=[],o=[],s=0,a=k(e);s<a;s++){var c=e[s],u=r?r(c,s,e):c;t&&!r?(s&&o===u||i.push(c),o=u):r?g.contains(o,u)||(o.push(u),i.push(c)):g.contains(i,c)||i.push(c)}return i},g.union=_(function(e){return g.uniq(N(e,!0,!0))}),g.intersection=function(e){for(var t=[],r=arguments.length,n=0,i=k(e);n<i;n++){var o=e[n];if(!g.contains(t,o)){var s;for(s=1;s<r&&g.contains(arguments[s],o);s++);s===r&&t.push(o)}}return t},g.difference=_(function(e,t){return t=N(t,!0,!0),g.filter(e,function(e){return!g.contains(t,e)})}),g.unzip=function(e){for(var t=e&&g.max(e,k).length||0,r=Array(t),n=0;n<t;n++)r[n]=g.pluck(e,n);return r},g.zip=_(g.unzip),g.object=function(e,t){for(var r={},n=0,i=k(e);n<i;n++)t?r[e[n]]=t[n]:r[e[n][0]]=e[n][1];return r};var A=function(e){return function(t,r,n){r=b(r,n);for(var i=k(t),o=e>0?0:i-1;o>=0&&o<i;o+=e)if(r(t[o],o,t))return o;return-1}};g.findIndex=A(1),g.findLastIndex=A(-1),g.sortedIndex=function(e,t,r,n){for(var i=(r=b(r,n,1))(t),o=0,s=k(e);o<s;){var a=Math.floor((o+s)/2);r(e[a])<i?o=a+1:s=a}return o};var P=function(e,t,r){return function(n,i,o){var s=0,a=k(n);if("number"==typeof o)e>0?s=o>=0?o:Math.max(o+a,s):a=o>=0?Math.min(o+1,a):o+a+1;else if(r&&o&&a)return n[o=r(n,i)]===i?o:-1;if(i!=i)return(o=t(u.call(n,s,a),g.isNaN))>=0?o+s:-1;for(o=e>0?s:a-1;o>=0&&o<a;o+=e)if(n[o]===i)return o;return-1}};g.indexOf=P(1,g.findIndex,g.sortedIndex),g.lastIndexOf=P(-1,g.findLastIndex),g.range=function(e,t,r){null==t&&(t=e||0,e=0),r||(r=t<e?-1:1);for(var n=Math.max(Math.ceil((t-e)/r),0),i=Array(n),o=0;o<n;o++,e+=r)i[o]=e;return i},g.chunk=function(e,t){if(null==t||t<1)return[];for(var r=[],n=0,i=e.length;n<i;)r.push(u.call(e,n,n+=t));return r};var L=function(e,t,r,n,i){if(!(n instanceof t))return e.apply(r,i);var o=w(e.prototype),s=e.apply(o,i);return g.isObject(s)?s:o};g.bind=_(function(e,t,r){if(!g.isFunction(e))throw new TypeError("Bind must be called on a function");var n=_(function(i){return L(e,n,t,this,r.concat(i))});return n}),g.partial=_(function(e,t){var r=g.partial.placeholder,n=function(){for(var i=0,o=t.length,s=Array(o),a=0;a<o;a++)s[a]=t[a]===r?arguments[i++]:t[a];for(;i<arguments.length;)s.push(arguments[i++]);return L(e,n,this,this,s)};return n}),g.partial.placeholder=g,g.bindAll=_(function(e,t){var r=(t=N(t,!1,!1)).length;if(r<1)throw new Error("bindAll must be passed function names");for(;r--;){var n=t[r];e[n]=g.bind(e[n],e)}}),g.memoize=function(e,t){var r=function(n){var i=r.cache,o=""+(t?t.apply(this,arguments):n);return S(i,o)||(i[o]=e.apply(this,arguments)),i[o]};return r.cache={},r},g.delay=_(function(e,t,r){return setTimeout(function(){return e.apply(null,r)},t)}),g.defer=g.partial(g.delay,g,1),g.throttle=function(e,t,r){var n,i,o,s,a=0;r||(r={});var c=function(){a=!1===r.leading?0:g.now(),n=null,s=e.apply(i,o),n||(i=o=null)},u=function(){var u=g.now();a||!1!==r.leading||(a=u);var l=t-(u-a);return i=this,o=arguments,l<=0||l>t?(n&&(clearTimeout(n),n=null),a=u,s=e.apply(i,o),n||(i=o=null)):n||!1===r.trailing||(n=setTimeout(c,l)),s};return u.cancel=function(){clearTimeout(n),a=0,n=i=o=null},u},g.debounce=function(e,t,r){var n,i,o=function(t,r){n=null,r&&(i=e.apply(t,r))},s=_(function(s){if(n&&clearTimeout(n),r){var a=!n;n=setTimeout(o,t),a&&(i=e.apply(this,s))}else n=g.delay(o,t,this,s);return i});return s.cancel=function(){clearTimeout(n),n=null},s},g.wrap=function(e,t){return g.partial(t,e)},g.negate=function(e){return function(){return!e.apply(this,arguments)}},g.compose=function(){var e=arguments,t=e.length-1;return function(){for(var r=t,n=e[t].apply(this,arguments);r--;)n=e[r].call(this,n);return n}},g.after=function(e,t){return function(){if(--e<1)return t.apply(this,arguments)}},g.before=function(e,t){var r;return function(){return--e>0&&(r=t.apply(this,arguments)),e<=1&&(t=null),r}},g.once=g.partial(g.before,2),g.restArguments=_;var D=!{toString:null}.propertyIsEnumerable("toString"),M=["valueOf","isPrototypeOf","toString","propertyIsEnumerable","hasOwnProperty","toLocaleString"],j=function(e,t){var r=M.length,n=e.constructor,i=g.isFunction(n)&&n.prototype||s,o="constructor";for(S(e,o)&&!g.contains(t,o)&&t.push(o);r--;)(o=M[r])in e&&e[o]!==i[o]&&!g.contains(t,o)&&t.push(o)};g.keys=function(e){if(!g.isObject(e))return[];if(h)return h(e);var t=[];for(var r in e)S(e,r)&&t.push(r);return D&&j(e,t),t},g.allKeys=function(e){if(!g.isObject(e))return[];var t=[];for(var r in e)t.push(r);return D&&j(e,t),t},g.values=function(e){for(var t=g.keys(e),r=t.length,n=Array(r),i=0;i<r;i++)n[i]=e[t[i]];return n},g.mapObject=function(e,t,r){t=b(t,r);for(var n=g.keys(e),i=n.length,o={},s=0;s<i;s++){var a=n[s];o[a]=t(e[a],a,e)}return o},g.pairs=function(e){for(var t=g.keys(e),r=t.length,n=Array(r),i=0;i<r;i++)n[i]=[t[i],e[t[i]]];return n},g.invert=function(e){for(var t={},r=g.keys(e),n=0,i=r.length;n<i;n++)t[e[r[n]]]=r[n];return t},g.functions=g.methods=function(e){var t=[];for(var r in e)g.isFunction(e[r])&&t.push(r);return t.sort()};var q=function(e,t){return function(r){var n=arguments.length;if(t&&(r=Object(r)),n<2||null==r)return r;for(var i=1;i<n;i++)for(var o=arguments[i],s=e(o),a=s.length,c=0;c<a;c++){var u=s[c];t&&void 0!==r[u]||(r[u]=o[u])}return r}};g.extend=q(g.allKeys),g.extendOwn=g.assign=q(g.keys),g.findKey=function(e,t,r){t=b(t,r);for(var n,i=g.keys(e),o=0,s=i.length;o<s;o++)if(t(e[n=i[o]],n,e))return n};var F,z,U=function(e,t,r){return t in r};g.pick=_(function(e,t){var r={},n=t[0];if(null==e)return r;g.isFunction(n)?(t.length>1&&(n=v(n,t[1])),t=g.allKeys(e)):(n=U,t=N(t,!1,!1),e=Object(e));for(var i=0,o=t.length;i<o;i++){var s=t[i],a=e[s];n(a,s,e)&&(r[s]=a)}return r}),g.omit=_(function(e,t){var r,n=t[0];return g.isFunction(n)?(n=g.negate(n),t.length>1&&(r=t[1])):(t=g.map(N(t,!1,!1),String),n=function(e,r){return!g.contains(t,r)}),g.pick(e,n,r)}),g.defaults=q(g.allKeys,!0),g.create=function(e,t){var r=w(e);return t&&g.extendOwn(r,t),r},g.clone=function(e){return g.isObject(e)?g.isArray(e)?e.slice():g.extend({},e):e},g.tap=function(e,t){return t(e),e},g.isMatch=function(e,t){var r=g.keys(t),n=r.length;if(null==e)return!n;for(var i=Object(e),o=0;o<n;o++){var s=r[o];if(t[s]!==i[s]||!(s in i))return!1}return!0},F=function(e,t,r,n){if(e===t)return 0!==e||1/e==1/t;if(null==e||null==t)return!1;if(e!=e)return t!=t;var i=typeof e;return("function"===i||"object"===i||"object"==typeof t)&&z(e,t,r,n)},z=function(e,t,r,n){e instanceof g&&(e=e._wrapped),t instanceof g&&(t=t._wrapped);var i=l.call(e);if(i!==l.call(t))return!1;switch(i){case"[object RegExp]":case"[object String]":return""+e==""+t;case"[object Number]":return+e!=+e?+t!=+t:0==+e?1/+e==1/t:+e==+t;case"[object Date]":case"[object Boolean]":return+e==+t;case"[object Symbol]":return a.valueOf.call(e)===a.valueOf.call(t)}var o="[object Array]"===i;if(!o){if("object"!=typeof e||"object"!=typeof t)return!1;var s=e.constructor,c=t.constructor;if(s!==c&&!(g.isFunction(s)&&s instanceof s&&g.isFunction(c)&&c instanceof c)&&"constructor"in e&&"constructor"in t)return!1}n=n||[];for(var u=(r=r||[]).length;u--;)if(r[u]===e)return n[u]===t;if(r.push(e),n.push(t),o){if((u=e.length)!==t.length)return!1;for(;u--;)if(!F(e[u],t[u],r,n))return!1}else{var p,d=g.keys(e);if(u=d.length,g.keys(t).length!==u)return!1;for(;u--;)if(p=d[u],!S(t,p)||!F(e[p],t[p],r,n))return!1}return r.pop(),n.pop(),!0},g.isEqual=function(e,t){return F(e,t)},g.isEmpty=function(e){return null==e||(R(e)&&(g.isArray(e)||g.isString(e)||g.isArguments(e))?0===e.length:0===g.keys(e).length)},g.isElement=function(e){return!(!e||1!==e.nodeType)},g.isArray=d||function(e){return"[object Array]"===l.call(e)},g.isObject=function(e){var t=typeof e;return"function"===t||"object"===t&&!!e},g.each(["Arguments","Function","String","Number","Date","RegExp","Error","Symbol","Map","WeakMap","Set","WeakSet"],function(e){g["is"+e]=function(t){return l.call(t)==="[object "+e+"]"}}),g.isArguments(arguments)||(g.isArguments=function(e){return S(e,"callee")});var B=n.document&&n.document.childNodes;"object"!=typeof Int8Array&&"function"!=typeof B&&(g.isFunction=function(e){return"function"==typeof e||!1}),g.isFinite=function(e){return!g.isSymbol(e)&&isFinite(e)&&!isNaN(parseFloat(e))},g.isNaN=function(e){return g.isNumber(e)&&isNaN(e)},g.isBoolean=function(e){return!0===e||!1===e||"[object Boolean]"===l.call(e)},g.isNull=function(e){return null===e},g.isUndefined=function(e){return void 0===e},g.has=function(e,t){if(!g.isArray(t))return S(e,t);for(var r=t.length,n=0;n<r;n++){var i=t[n];if(null==e||!p.call(e,i))return!1;e=e[i]}return!!r},g.noConflict=function(){return n._=i,this},g.identity=function(e){return e},g.constant=function(e){return function(){return e}},g.noop=function(){},g.property=function(e){return g.isArray(e)?function(t){return C(t,e)}:E(e)},g.propertyOf=function(e){return null==e?function(){}:function(t){return g.isArray(t)?C(e,t):e[t]}},g.matcher=g.matches=function(e){return e=g.extendOwn({},e),function(t){return g.isMatch(t,e)}},g.times=function(e,t,r){var n=Array(Math.max(0,e));t=v(t,r,1);for(var i=0;i<e;i++)n[i]=t(i);return n},g.random=function(e,t){return null==t&&(t=e,e=0),e+Math.floor(Math.random()*(t-e+1))},g.now=Date.now||function(){return(new Date).getTime()};var H={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","`":"&#x60;"},$=g.invert(H),V=function(e){var t=function(t){return e[t]},r="(?:"+g.keys(e).join("|")+")",n=RegExp(r),i=RegExp(r,"g");return function(e){return e=null==e?"":""+e,n.test(e)?e.replace(i,t):e}};g.escape=V(H),g.unescape=V($),g.result=function(e,t,r){g.isArray(t)||(t=[t]);var n=t.length;if(!n)return g.isFunction(r)?r.call(e):r;for(var i=0;i<n;i++){var o=null==e?void 0:e[t[i]];void 0===o&&(o=r,i=n),e=g.isFunction(o)?o.call(e):o}return e};var G=0;g.uniqueId=function(e){var t=++G+"";return e?e+t:t},g.templateSettings={evaluate:/<%([\s\S]+?)%>/g,interpolate:/<%=([\s\S]+?)%>/g,escape:/<%-([\s\S]+?)%>/g};var W=/(.)^/,J={"'":"'","\\":"\\","\r":"r","\n":"n","\u2028":"u2028","\u2029":"u2029"},X=/\\|'|\r|\n|\u2028|\u2029/g,Y=function(e){return"\\"+J[e]};g.template=function(e,t,r){!t&&r&&(t=r),t=g.defaults({},t,g.templateSettings);var n,i=RegExp([(t.escape||W).source,(t.interpolate||W).source,(t.evaluate||W).source].join("|")+"|$","g"),o=0,s="__p+='";e.replace(i,function(t,r,n,i,a){return s+=e.slice(o,a).replace(X,Y),o=a+t.length,r?s+="'+\n((__t=("+r+"))==null?'':_.escape(__t))+\n'":n?s+="'+\n((__t=("+n+"))==null?'':__t)+\n'":i&&(s+="';\n"+i+"\n__p+='"),t}),s+="';\n",t.variable||(s="with(obj||{}){\n"+s+"}\n"),s="var __t,__p='',__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,'');};\n"+s+"return __p;\n";try{n=new Function(t.variable||"obj","_",s)}catch(e){throw e.source=s,e}var a=function(e){return n.call(this,e,g)},c=t.variable||"obj";return a.source="function("+c+"){\n"+s+"}",a},g.chain=function(e){var t=g(e);return t._chain=!0,t};var K=function(e,t){return e._chain?g(t).chain():t};g.mixin=function(e){return g.each(g.functions(e),function(t){var r=g[t]=e[t];g.prototype[t]=function(){var e=[this._wrapped];return c.apply(e,arguments),K(this,r.apply(g,e))}}),g},g.mixin(g),g.each(["pop","push","reverse","shift","sort","splice","unshift"],function(e){var t=o[e];g.prototype[e]=function(){var r=this._wrapped;return t.apply(r,arguments),"shift"!==e&&"splice"!==e||0!==r.length||delete r[0],K(this,r)}}),g.each(["concat","join","slice"],function(e){var t=o[e];g.prototype[e]=function(){return K(this,t.apply(this._wrapped,arguments))}}),g.prototype.value=function(){return this._wrapped},g.prototype.valueOf=g.prototype.toJSON=g.prototype.value,g.prototype.toString=function(){return String(this._wrapped)},void 0===(r=function(){return g}.apply(t,[]))||(e.exports=r)}()}).call(this,r(48)(e))},function(e,t,r){"use strict";var n=r(9);t.BaseResource=n.BaseResource,t.CloudError=n.CloudError,t.Resource=r(996),t.TrackedResource=r(997),t.Sku=r(998),t.EHNamespace=r(999),t.AuthorizationRule=r(1e3),t.AccessKeys=r(1001),t.RegenerateAccessKeyParameters=r(1002),t.Destination=r(1003),t.CaptureDescription=r(1004),t.Eventhub=r(1005),t.ConsumerGroup=r(1006),t.CheckNameAvailabilityParameter=r(1007),t.CheckNameAvailabilityResult=r(1008),t.OperationDisplay=r(1009),t.Operation=r(1010),t.ErrorResponse=r(1011),t.ArmDisasterRecovery=r(1012),t.MessagingRegionsProperties=r(1013),t.MessagingRegions=r(1014),t.MessagingPlan=r(1015),t.Subnet=r(1016),t.NWRuleSetIpRules=r(1017),t.NWRuleSetVirtualNetworkRules=r(1018),t.NetworkRuleSet=r(1019),t.OperationListResult=r(1020),t.EHNamespaceListResult=r(1021),t.AuthorizationRuleListResult=r(1022),t.ArmDisasterRecoveryListResult=r(1023),t.EventHubListResult=r(1024),t.ConsumerGroupListResult=r(1025),t.MessagingRegionsListResult=r(1026)},function(e,t,r){var n=r(15);"disable"===process.env.READABLE_STREAM&&n?(e.exports=n,(t=e.exports=n.Readable).Readable=n.Readable,t.Writable=n.Writable,t.Duplex=n.Duplex,t.Transform=n.Transform,t.PassThrough=n.PassThrough,t.Stream=n):((t=e.exports=r(446)).Stream=n||t,t.Readable=t,t.Writable=r(449),t.Duplex=r(103),t.Transform=r(451),t.PassThrough=r(1049))},function(e,t){e.exports=require("buffer")},function(e,t,r){"use strict";"undefined"==typeof process||"renderer"===process.type||!0===process.browser||process.__nwjs?e.exports=r(959):e.exports=r(961)},function(e,t,r){"use strict";function __export(e){for(var r in e)t.hasOwnProperty(r)||(t[r]=e[r])}Object.defineProperty(t,"__esModule",{value:!0}),__export(r(557)),__export(r(272)),__export(r(572))},function(e,t){e.exports=require("tls")},function(e,t,r){"use strict";const n=r(79),i=r(124),o=r(11),s=r(8),a=r(167),c=r(130),u=r(239),l=r(240),p=r(238),d=r(241),h=r(242),f=r(987),m=["https://management.core.windows.net/","https://management.core.chinacloudapi.cn/","https://management.core.usgovcloudapi.net/","https://management.core.cloudapi.de/","https://management.core.windows.net","https://management.core.chinacloudapi.cn","https://management.core.usgovcloudapi.net","https://management.core.cloudapi.de"];function _createCredentials(e){let t,r={};return r.environment=this.environment,r.domain=this.domain,r.clientId=this.clientId,r.tokenCache=this.tokenCache,r.username=this.username,r.authorizationScheme=this.authorizationScheme,r.tokenAudience=this.tokenAudience,e&&(e.domain&&(r.domain=e.domain),e.environment&&(r.environment=e.environment),e.userId&&(r.username=e.userId),e.tokenCache&&(r.tokenCache=e.tokenCache),e.tokenAudience&&(r.tokenAudience=e.tokenAudience)),t=p.prototype.isPrototypeOf(this)?new p(r.clientId,r.domain,r.username,this.password,r):u.prototype.isPrototypeOf(this)?new u(r.clientId,r.domain,this.secret,r):new l(r)}function buildTenantList(e,t){let r=[];if(e.domain&&e.domain!==a.AAD_COMMON_TENANT)return t(null,[e.domain]);new f(e,e.environment.resourceManagerEndpointUrl).tenants.list(function(e,n){i.eachSeries(n,function(t,n){r.push(t.tenantId),n(e)},function(e){t(e,r)})})}function _getSubscriptionsFromTenants(e,t){let r=this,n=[],o="user",s=r.username;u.prototype.isPrototypeOf(r)&&(o="servicePrincipal",s=r.clientId),i.eachSeries(e,function(e,t){let i=_createCredentials.call(r,{domain:e,tokenAudience:r.environment.activeDirectoryResourceId});new f(i,i.environment.resourceManagerEndpointUrl).subscriptions.list(function(r,a){return r||a&&a.length>0&&(n=n.concat(a.map(function(t){return t.tenantId=e,t.user={name:s,type:o},t.environmentName=i.environment.name,t.name=t.displayName,t.id=t.subscriptionId,delete t.displayName,delete t.subscriptionId,delete t.subscriptionPolicies,t}))),t(r)})},function(e){t(e,n)})}function _interactive(e,t){t||"function"!=typeof e||(t=e,e={}),e.environment||(e.environment=c.Azure),e.domain||(e.domain=a.AAD_COMMON_TENANT),e.clientId||(e.clientId=a.DEFAULT_ADAL_CLIENT_ID),e.tokenCache||(e.tokenCache=new n.MemoryCache),e.language||(e.language=a.DEFAULT_LANGUAGE);let r={};r.tokenAudience=e.tokenAudience,r.environment=e.environment,r.domain=e.domain,r.clientId=e.clientId,r.tokenCache=e.tokenCache,r.language=e.language,r.userCodeResponseLogger=e.userCodeResponseLogger;let o=r.environment.activeDirectoryEndpointUrl+r.domain;r.context=new n.AuthenticationContext(o,r.environment.validateAuthority,r.tokenCache);let s=[],u=function(e,t){let n=r.environment.activeDirectoryResourceId;r.tokenAudience&&(n=r.tokenAudience),r.context.acquireTokenWithDeviceCode(n,r.clientId,e,function(n,i){if(n){if("authorization_pending"!==n.error)return t(n);setTimeout(()=>{u(e,t)},1e3)}return r.username=i.userId,r.authorizationScheme=i.tokenType,t(null)})};i.waterfall([function(e){let t=r.environment.activeDirectoryResourceId;r.tokenAudience&&(t=r.tokenAudience),r.context.acquireUserCode(t,r.clientId,r.language,function(t,n){return t?e(t):(r.userCodeResponseLogger?r.userCodeResponseLogger(n.message):console.log(n.message),e(null,n))})},u,function(e){buildTenantList(_createCredentials.call(r),e)},function(e,t){return s=e,r.tokenAudience&&!m.some(e=>e===r.tokenAudience.toLowerCase())?t(null,[]):_getSubscriptionsFromTenants.call(r,e,t)}],function(e,n){return e?t(e):t(null,_createCredentials.call(r),n)})}function _withUsernamePassword(e,t,r,n){let o;n||"function"!=typeof r||(n=r,r={}),r.domain||(r.domain=a.AAD_COMMON_TENANT),r.clientId||(r.clientId=a.DEFAULT_ADAL_CLIENT_ID);let s=[];try{o=new p(r.clientId,r.domain,e,t,r)}catch(e){return n(e)}o.getToken(function(t,a){if(t)return n(t);o.username=function _crossCheckUserNameWithToken(e,t){if(e.toLowerCase()===t.toLowerCase())return t;throw new Error(`The userId of "${t}" in access token doesn't match the username from method call "usernameFromMethodCall".`)}(e,a.userId),i.waterfall([function(e){buildTenantList(o,e)},function(e,t){return s=e,r.tokenAudience&&!m.some(e=>e===r.tokenAudience.toLowerCase())?t(null,[]):_getSubscriptionsFromTenants.call(r,e,t)}],function(e,t){return n(null,o,t)})})}function _withServicePrincipalSecret(e,t,r,n,i){let o;i||"function"!=typeof n||(i=n,n={});try{o=new u(e,r,t,n)}catch(e){return i(e)}o.getToken(function(e){return e?i(e):n.tokenAudience&&!m.some(e=>e===n.tokenAudience.toLowerCase())?i(null,o,[]):void _getSubscriptionsFromTenants.call(o,[r],function(e,t){return e?i(e):i(null,o,t)})})}function _foundManagementEndpointUrl(e,t){if(!e||e&&"string"!=typeof e.valueOf())throw new Error("authFileUrl cannot be null or undefined and must be of type string.");if(!t||t&&"string"!=typeof t.valueOf())throw new Error("envUrl cannot be null or undefined and must be of type string.");return e=e.endsWith("/")?e.slice(0,-1):e,t=t.endsWith("/")?t.slice(0,-1):t,e.toLowerCase()===t.toLowerCase()}function _withAuthFile(e,r){if(r||"function"!=typeof e||(r=e,e={}),e||(e={filePath:""}),!r)throw new Error("callback cannot be null or undefined.");let n=e.filePath||process.env[a.AZURE_AUTH_LOCATION],i=e.subscriptionEnvVariableName||"AZURE_SUBSCRIPTION_ID";if(!n){let e=`Either provide an absolute file path to the auth file or set/export the environment variable - ${a.AZURE_AUTH_LOCATION}.`;return r(new Error(e))}n.startsWith("~")&&(n=s.homeDir(n.slice(1)));let u=null,l={},p={};try{u=o.readFileSync(n,{encoding:"utf8"}),function _validateAuthFileContent(e,t){if(!e)throw new Error("Please provide a credsObj to validate.");if(!t)throw new Error("Please provide a filePath.");if(!e.clientId)throw new Error(`"clientId" is missing from the auth file: ${t}.`);if(!e.clientSecret)throw new Error(`"clientSecret" is missing from the auth file: ${t}.`);if(!e.subscriptionId)throw new Error(`"subscriptionId" is missing from the auth file: ${t}.`);if(!e.tenantId)throw new Error(`"tenantId" is missing from the auth file: ${t}.`);if(!e.activeDirectoryEndpointUrl)throw new Error(`"activeDirectoryEndpointUrl" is missing from the auth file: ${t}.`);if(!e.resourceManagerEndpointUrl)throw new Error(`"resourceManagerEndpointUrl" is missing from the auth file: ${t}.`);if(!e.activeDirectoryGraphResourceId)throw new Error(`"activeDirectoryGraphResourceId" is missing from the auth file: ${t}.`);if(!e.sqlManagementEndpointUrl)throw new Error(`"sqlManagementEndpointUrl" is missing from the auth file: ${t}.`)}(l=JSON.parse(u),n)}catch(e){return r(e)}l.managementEndpointUrl||(l.managementEndpointUrl=l.resourceManagerEndpointUrl),process.env[i]=l.subscriptionId;let d={name:""},h=Object.keys(Object.getPrototypeOf(c)).slice(1);for(let e=0;e<h.length;e++){let t=h[e],r=c[t];if(r&&r.managementEndpointUrl&&_foundManagementEndpointUrl(l.managementEndpointUrl,r.managementEndpointUrl)){d.name=r.name;break}}if(d.name)p.environment=c[d.name];else{let e={name:l.managementEndpointUrl.match(/.*management\.core\.(.*)\..*/i)[1]||n},t=Object.keys(l);for(let r=0;r<t.length;r++){let n=t[r];null===n.match(/^(clientId|clientSecret|subscriptionId|tenantId)$/gi)&&("activeDirectoryEndpointUrl"!==n||n.endsWith("/")?e[n]=l[n]:e[n]=l[n]+"/")}e.activeDirectoryResourceId||(e.activeDirectoryResourceId=l.managementEndpointUrl),e.portalUrl||(e.portalUrl="https://portal.azure.com"),p.environment=c.add(e)}return t.withServicePrincipalSecret(l.clientId,l.clientSecret,l.tenantId,p,r)}function _withMSI(e,t){if(!t)throw new Error("callback cannot be null or undefined.");const r=new d(e);r.getToken(function(e){return e?t(e):t(null,r)})}function _withAppServiceMSI(e,t){if(!t)throw new Error("callback cannot be null or undefined.");let r;try{r=new h(e)}catch(e){return t(e)}r.getToken(function(e){return e?t(e):t(null,r)})}process.env.AZURE_ADAL_LOGGING_ENABLED&&function _turnOnLogging(){let e=n.Logging;e.setLoggingOptions({level:e.LOGGING_LEVEL.VERBOSE,log:function(e,t,r){console.info(t),r&&console.error(r)}})}(),t.interactive=function interactive(e,t){return t||"function"!=typeof e||(t=e,e={}),e||(e={}),t?_interactive(e,t):new Promise((t,r)=>{_interactive(e,(e,n)=>{e?r(e):t(n)})})},t.interactiveWithAuthResponse=function interactiveWithAuthResponse(e){return e||(e={}),new Promise((t,r)=>{_interactive(e,(e,n,i)=>{if(e)r(e);else{t({credentials:n,subscriptions:i})}})})},t.withUsernamePassword=function withUsernamePassword(e,t,r,n){return n||"function"!=typeof r||(n=r,r={}),r||(r={}),n?_withUsernamePassword(e,t,r,n):new Promise((n,i)=>{_withUsernamePassword(e,t,r,(e,t)=>{e?i(e):n(t)})})},t.withUsernamePasswordWithAuthResponse=function withUsernamePasswordWithAuthResponse(e,t,r){return r||(r={}),new Promise((n,i)=>{_withUsernamePassword(e,t,r,(e,t,r)=>{if(e)i(e);else{n({credentials:t,subscriptions:r})}})})},t.withServicePrincipalSecret=function withServicePrincipalSecret(e,t,r,n,i){return i||"function"!=typeof n||(i=n,n={}),n||(n={}),i?_withServicePrincipalSecret(e,t,r,n,i):new Promise((i,o)=>{_withServicePrincipalSecret(e,t,r,n,(e,t)=>{e?o(e):i(t)})})},t.withServicePrincipalSecretWithAuthResponse=function withServicePrincipalSecretWithAuthResponse(e,t,r,n){return n||(n={}),new Promise((i,o)=>{_withServicePrincipalSecret(e,t,r,n,(e,t,r)=>{if(e)o(e);else{i({credentials:t,subscriptions:r})}})})},t.withAuthFile=function withAuthFile(e,t){return t||"function"!=typeof e||(t=e,e={}),t?_withAuthFile(e,t):new Promise((t,r)=>{_withAuthFile(e,(e,n)=>{e?r(e):t(n)})})},t.withAuthFileWithAuthResponse=function withAuthFileWithAuthResponse(e){return new Promise((t,r)=>{_withAuthFile(e,(e,n,i)=>{if(e)r(e);else{t({credentials:n,subscriptions:i})}})})},t.withMSI=function withMSI(e,t){return t||"function"!=typeof e||(t=e,e={}),t?_withMSI(e,t):new Promise((t,r)=>{_withMSI(e,(e,n)=>{e?r(e):t(n)})})},t.withAppServiceMSI=function withAppServiceMSI(e,t){return t||"function"!=typeof e||(t=e,e={}),t?_withAppServiceMSI(e,t):new Promise((t,r)=>{_withAppServiceMSI(e,(e,n)=>{e?r(e):t(n)})})},t=e.exports},function(e,t,r){"use strict";var n=r(104);e.exports=function(e){if(!n(e))throw new TypeError("Cannot use null or undefined");return e}},function(e,t,r){"use strict";const n=r(37).fromPromise,i=r(258);e.exports={pathExists:n(function pathExists(e){return i.access(e).then(()=>!0).catch(()=>!1)}),pathExistsSync:i.existsSync}},function(e,t){e.exports;e.exports={ANONYMOUS_ACCESS_BLOBSERVICE_ONLY:"Anonymous access is only valid for the BlobService.",ARGUMENT_NULL_OR_EMPTY:"The argument must not be null or an empty string. Argument name: %s.",ARGUMENT_NULL_OR_UNDEFINED:"The argument must not be null or undefined. Argument name: %s.",ARGUMENT_OUT_OF_RANGE_ERROR:"The argument is out of range. Argument name: %s, Value passed: %s.",BATCH_ONE_PARTITION_KEY:"All entities in the batch must have the same PartitionKey value.",BATCH_ONE_RETRIEVE:"If a retrieve operation is part of a batch, it must be the only operation in the batch.",BATCH_TOO_LARGE:"Batches must not contain more than 100 operations.",BLOB_INVALID_SEQUENCE_NUMBER:"The sequence number may not be specified for an increment operation.",BLOB_TYPE_MISMATCH:"Blob type of the blob reference doesn't match blob type of the blob.",CANNOT_CREATE_SAS_WITHOUT_ACCOUNT_KEY:"Cannot create Shared Access Signature unless the Account Name and Key are used to create the ServiceClient.",CONTENT_LENGTH_MISMATCH:"An incorrect number of bytes was read from the connection. The connection may have been closed.",CONTENT_TYPE_MISSING:"Content-Type response header is missing or invalid.",EMPTY_BATCH:"Batch must not be empty.",EXCEEDED_SIZE_LIMITATION:"Upload exceeds the size limitation. Max size is %s but the current size is %s",HASH_MISMATCH:"Hash mismatch (integrity check failed), Expected value is %s, retrieved %s.",INCORRECT_ENTITY_KEYS:"PartitionKey and RowKey must be specified as strings in the entity object.",INVALID_BLOB_LENGTH:"createBlockBlobFromText requires the size of text to be less than 64MB. Please use createBlockBlobFromLocalFile or createBlockBlobFromStream to upload large blobs.",INVALID_CONNECTION_STRING:'Connection strings must be of the form "key1=value1;key2=value2".',INVALID_CONNECTION_STRING_BAD_KEY:'Connection string contains unrecognized key: "%s"',INVALID_CONNECTION_STRING_DUPLICATE_KEY:'Connection string contains duplicate key: "%s"',INVALID_CONNECTION_STRING_EMPTY_KEY:"Connection strings must not contain empty keys.",INVALID_DELETE_SNAPSHOT_OPTION:"The deleteSnapshots option cannot be included when deleting a specific snapshot using the snapshotId option.",INVALID_EDM_TYPE:"The value '%s' does not match the type '%s'.",INVALID_FILE_LENGTH:"createFileFromText requires the size of text to be less than 4MB. Please use createFileFromLocalFile or createFileFromStream to upload large files.",INVALID_FILE_RANGE_FOR_UPDATE:"Range size should be less than 4MB for a file range update operation.",INVALID_HEADERS:"Headers are not supported in the 2012-02-12 version.",INVALID_MESSAGE_ID:"Message ID cannot be null or undefined for deleteMessage and updateMessage operations.",INVALID_PAGE_BLOB_LENGTH:"Page blob length must be multiple of 512.",INVALID_PAGE_END_OFFSET:"Page end offset must be multiple of 512.",INVALID_PAGE_RANGE_FOR_UPDATE:"Page range size should be less than 4MB for a page update operation.",INVALID_PAGE_START_OFFSET:"Page start offset must be multiple of 512.",INVALID_POP_RECEIPT:"Pop Receipt cannot be null or undefined for deleteMessage and updateMessage operations.",INVALID_PROPERTY_RESOLVER:"The specified property resolver returned an invalid type. %s:{_:%s,$:%s }",INVALID_RANGE_FOR_MD5:"The requested range should be less than 4MB when contentMD5 is expected from the server",INVALID_SAS_VERSION:"SAS Version ? is invalid. Valid versions include: ?.",INVALID_SAS_TOKEN:"The SAS token should not contain api-version.",INVALID_SIGNED_IDENTIFIERS:"Signed identifiers need to be a hash object with key as the id and the value as the access policy.",INVALID_STREAM_LENGTH:"The length of the provided stream is invalid.",INVALID_STRING_ERROR:"Invalid string error.",INVALID_TABLE_OPERATION:"Operation not found: %s",INVALID_TEXT_LENGTH:"The length of the provided text is invalid.",MAXIMUM_EXECUTION_TIMEOUT_EXCEPTION:"The client could not finish the operation within specified maximum execution timeout.",MD5_NOT_POSSIBLE:"MD5 cannot be calculated for an existing blob because it would require reading the existing data. Please disable storeBlobContentMD5.",MD5_NOT_PRESENT_ERROR:"MD5 does not exist. If you do not want to force validation, please disable useTransactionalMD5.",METADATA_KEY_INVALID:"The key for one of the metadata key-value pairs is null, empty, or whitespace.",METADATA_VALUE_INVALID:"The value for one of the metadata key-value pairs is null, empty, or whitespace.",NO_CREDENTIALS_PROVIDED:"Credentials must be provided when creating a service client.",PRIMARY_ONLY_COMMAND:"This operation can only be executed against the primary storage location.",QUERY_OPERATOR_REQUIRES_WHERE:"%s operator needs to be used after where.",SECONDARY_ONLY_COMMAND:"This operation can only be executed against the secondary storage location.",STORAGE_HOST_LOCATION_REQUIRED:"The host for the storage service must be specified.",STORAGE_HOST_MISSING_LOCATION:"The host for the target storage location is not specified. Please consider changing the request's location mode.",TYPE_NOT_SUPPORTED:"Type not supported when sending data to the service: ",MAX_BLOB_SIZE_CONDITION_NOT_MEET:"Append block data should not exceed the maximum blob size condition value."}},function(e,t,r){r(13);var n=r(1);function FingerprintFormatError(e,t){Error.captureStackTrace&&Error.captureStackTrace(this,FingerprintFormatError),this.name="FingerprintFormatError",this.fingerprint=e,this.format=t,this.message="Fingerprint format is not supported, or is invalid: ",void 0!==e&&(this.message+=" fingerprint = "+e),void 0!==t&&(this.message+=" format = "+t)}function InvalidAlgorithmError(e){Error.captureStackTrace&&Error.captureStackTrace(this,InvalidAlgorithmError),this.name="InvalidAlgorithmError",this.algorithm=e,this.message='Algorithm "'+e+'" is not supported'}function KeyParseError(e,t,r){Error.captureStackTrace&&Error.captureStackTrace(this,KeyParseError),this.name="KeyParseError",this.format=t,this.keyName=e,this.innerErr=r,this.message="Failed to parse "+e+" as a valid "+t+" format key: "+r.message}function SignatureParseError(e,t,r){Error.captureStackTrace&&Error.captureStackTrace(this,SignatureParseError),this.name="SignatureParseError",this.type=e,this.format=t,this.innerErr=r,this.message="Failed to parse the given data as a "+e+" signature in "+t+" format: "+r.message}function CertificateParseError(e,t,r){Error.captureStackTrace&&Error.captureStackTrace(this,CertificateParseError),this.name="CertificateParseError",this.format=t,this.certName=e,this.innerErr=r,this.message="Failed to parse "+e+" as a valid "+t+" format certificate: "+r.message}function KeyEncryptedError(e,t){Error.captureStackTrace&&Error.captureStackTrace(this,KeyEncryptedError),this.name="KeyEncryptedError",this.format=t,this.keyName=e,this.message="The "+t+" format key "+e+" is encrypted (password-protected), and no passphrase was provided in `options`"}n.inherits(FingerprintFormatError,Error),n.inherits(InvalidAlgorithmError,Error),n.inherits(KeyParseError,Error),n.inherits(SignatureParseError,Error),n.inherits(CertificateParseError,Error),n.inherits(KeyEncryptedError,Error),e.exports={FingerprintFormatError:FingerprintFormatError,InvalidAlgorithmError:InvalidAlgorithmError,KeyParseError:KeyParseError,SignatureParseError:SignatureParseError,KeyEncryptedError:KeyEncryptedError,CertificateParseError:CertificateParseError}},function(e,t,r){e.exports=Signature;var n=r(13),i=r(19).Buffer,o=(r(32),r(12),r(64)),s=r(26),a=r(66),c=r(119),u=o.InvalidAlgorithmError,l=o.SignatureParseError;function Signature(e){n.object(e,"options"),n.arrayOfObject(e.parts,"options.parts"),n.string(e.type,"options.type");for(var t={},r=0;r<e.parts.length;++r){var i=e.parts[r];t[i.name]=i}this.type=e.type,this.hashAlgorithm=e.hashAlgo,this.curve=e.curve,this.parts=e.parts,this.part=t}function parseOneNum(e,t,r,i){if("ssh"===r){try{var o=new c({buffer:e}),s=o.readString()}catch(e){}if(void 0!==o){var a="SSH signature does not match expected type (expected "+t+", got "+s+")";switch(s){case"ssh-rsa":n.strictEqual(t,"rsa",a),i.hashAlgo="sha1";break;case"rsa-sha2-256":n.strictEqual(t,"rsa",a),i.hashAlgo="sha256";break;case"rsa-sha2-512":n.strictEqual(t,"rsa",a),i.hashAlgo="sha512";break;case"ssh-ed25519":n.strictEqual(t,"ed25519",a),i.hashAlgo="sha512";break;default:throw new Error("Unknown SSH signature type: "+s)}var u=o.readPart();return n.ok(o.atEnd(),"extra trailing bytes"),u.name="sig",i.parts.push(u),new Signature(i)}}return i.parts.push({name:"sig",data:e}),new Signature(i)}Signature.prototype.toBuffer=function(e){var t;void 0===e&&(e="asn1"),n.string(e,"format");var r="ssh-"+this.type;switch(this.type){case"rsa":switch(this.hashAlgorithm){case"sha256":r="rsa-sha2-256";break;case"sha512":r="rsa-sha2-512";break;case"sha1":case void 0:break;default:throw new Error("SSH signature format does not support hash algorithm "+this.hashAlgorithm)}return"ssh"===e?((t=new c({})).writeString(r),t.writePart(this.part.sig),t.toBuffer()):this.part.sig.data;case"ed25519":return"ssh"===e?((t=new c({})).writeString(r),t.writePart(this.part.sig),t.toBuffer()):this.part.sig.data;case"dsa":case"ecdsa":var o,u;if("asn1"===e){var l=new a.BerWriter;return l.startSequence(),o=s.mpNormalize(this.part.r.data),u=s.mpNormalize(this.part.s.data),l.writeBuffer(o,a.Ber.Integer),l.writeBuffer(u,a.Ber.Integer),l.endSequence(),l.buffer}if("ssh"===e&&"dsa"===this.type){if((t=new c({})).writeString("ssh-dss"),(o=this.part.r.data).length>20&&0===o[0]&&(o=o.slice(1)),(u=this.part.s.data).length>20&&0===u[0]&&(u=u.slice(1)),this.hashAlgorithm&&"sha1"!==this.hashAlgorithm||o.length+u.length!==40)throw new Error("OpenSSH only supports DSA signatures with SHA1 hash");return t.writeBuffer(i.concat([o,u])),t.toBuffer()}if("ssh"===e&&"ecdsa"===this.type){var p,d=new c({});o=this.part.r.data,d.writeBuffer(o),d.writePart(this.part.s),t=new c({}),0===o[0]&&(o=o.slice(1));var h=8*o.length;return 256===h?p="nistp256":384===h?p="nistp384":528===h&&(p="nistp521"),t.writeString("ecdsa-sha2-"+p),t.writeBuffer(d.toBuffer()),t.toBuffer()}throw new Error("Invalid signature format");default:throw new Error("Invalid signature data")}},Signature.prototype.toString=function(e){return n.optionalString(e,"format"),this.toBuffer(e).toString("base64")},Signature.parse=function(e,t,r){"string"==typeof e&&(e=i.from(e,"base64")),n.buffer(e,"data"),n.string(r,"format"),n.string(t,"type");var o={};o.type=t.toLowerCase(),o.parts=[];try{switch(n.ok(e.length>0,"signature must not be empty"),o.type){case"rsa":case"ed25519":return parseOneNum(e,t,r,o);case"dsa":case"ecdsa":return"asn1"===r?function parseDSAasn1(e,t,r,n){var i=new a.BerReader(e);i.readSequence();var o=i.readString(a.Ber.Integer,!0),c=i.readString(a.Ber.Integer,!0);return n.parts.push({name:"r",data:s.mpNormalize(o)}),n.parts.push({name:"s",data:s.mpNormalize(c)}),new Signature(n)}(e,0,0,o):"dsa"===o.type?function parseDSA(e,t,r,i){if(40!=e.length){var o=new c({buffer:e}),s=o.readBuffer();"ssh-dss"===s.toString("ascii")&&(s=o.readBuffer()),n.ok(o.atEnd(),"extra trailing bytes"),n.strictEqual(s.length,40,"invalid inner length"),e=s}return i.parts.push({name:"r",data:e.slice(0,20)}),i.parts.push({name:"s",data:e.slice(20,40)}),new Signature(i)}(e,0,0,o):function parseECDSA(e,t,r,i){var o,s,a=new c({buffer:e}),u=a.readBuffer(),l=u.toString("ascii");if("ecdsa-"===l.slice(0,6)){var p=l.split("-");switch(n.strictEqual(p[0],"ecdsa"),n.strictEqual(p[1],"sha2"),i.curve=p[2],i.curve){case"nistp256":i.hashAlgo="sha256";break;case"nistp384":i.hashAlgo="sha384";break;case"nistp521":i.hashAlgo="sha512";break;default:throw new Error("Unsupported ECDSA curve: "+i.curve)}u=a.readBuffer(),n.ok(a.atEnd(),"extra trailing bytes on outer"),a=new c({buffer:u}),o=a.readPart()}else o={data:u};return s=a.readPart(),n.ok(a.atEnd(),"extra trailing bytes"),o.name="r",s.name="s",i.parts.push(o),i.parts.push(s),new Signature(i)}(e,0,0,o);default:throw new u(t)}}catch(e){if(e instanceof u)throw e;throw new l(t,r,e)}},Signature.isSignature=function(e,t){return s.isCompatible(e,Signature,t)},Signature.prototype._sshpkApiVersion=[2,1],Signature._oldVersionDetect=function(e){return n.func(e.toBuffer),e.hasOwnProperty("hashAlgorithm")?[2,0]:[1,0]}},function(e,t,r){var n=r(668);e.exports={Ber:n,BerReader:n.Reader,BerWriter:n.Writer}},function(e,t,r){"use strict";e.exports={Client:r(855).Client,ConnectionString:r(158),Registry:r(885).Registry,SharedAccessSignature:r(376),Amqp:r(209).Amqp,AmqpWs:r(886).AmqpWs,JobClient:r(887).JobClient,Device:r(375).Device,Twin:r(217).Twin}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n=r(18);t.BaseExplorer=class BaseExplorer{constructor(e){this._outputChannel=e}output(e,t,r=this._outputChannel){r.append(`[${e}] ${t}`)}outputLine(e,t,r=this._outputChannel){r.appendLine(`[${e}] ${t}`)}sendEventDone(e,t,r,i){return this.outputLine(t,`Sending message to [${r}] ...`),(o,s)=>{o&&(this.outputLine(t,`Failed to send message to [${r}]`),this.outputLine(t,o.toString()),n.TelemetryClient.sendEvent(i,{Result:"Fail"})),s&&(this.outputLine(t,`[Success] Message sent to [${r}]`),n.TelemetryClient.sendEvent(i,{Result:"Success"})),e.close(()=>{})}}}},function(e,t,r){"use strict";const n=r(70),i=r(35),o=r(6);t.urlIsHTTPS=function(e){return e.protocol.toLowerCase()===n.HTTPS},t.objectIsNull=function(e){return null==e},t.encodeUri=function(e){return encodeURIComponent(e).replace(/!/g,"%21").replace(/'/g,"%27").replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/\*/g,"%2A")},t.stripResponse=function(e){let t={};return t.body=e.body,t.headers=e.headers,t.statusCode=e.statusCode,t},t.stripRequest=function(e){let t={};try{(t=JSON.parse(JSON.stringify(e))).headers&&t.headers.Authorization?delete t.headers.Authorization:t.headers&&t.headers.authorization&&delete t.headers.authorization}catch(t){let r=t.message;return t.message=`Error - "${r}" occured while creating a stripped version of the request object - "${e}".`,t}return t},t.isValidUuid=function(e){return new RegExp("^[0-9a-fA-F]{8}-[0-9a-fA-F]{4}-[0-9a-fA-F]{4}-[0-9a-fA-F]{4}-[0-9a-fA-F]{12}$","ig").test(e)},t.objectValues=function(e){let t=[];if(!(e&&e instanceof Object))throw new Error(`The provided object ${JSON.stringify(e,null,2)} is not a valid object that can be `+"enumerated to provide its values as an array.");for(let r in e)e.hasOwnProperty(r)&&t.push(e[r]);return t},t.generateUuid=function(){return i.v4()},t.homeDir=function homeDir(e){let t=process.env["win32"==process.platform?"USERPROFILE":"HOME"];return e?o.join(t,e):t},t=e.exports},function(e,t,r){"use strict";e.exports={HTTP:"http:",HTTPS:"https:",HTTP_PROXY:"HTTP_PROXY",HTTPS_PROXY:"HTTPS_PROXY",HttpConstants:{HttpVerbs:{PUT:"PUT",GET:"GET",DELETE:"DELETE",POST:"POST",MERGE:"MERGE",HEAD:"HEAD",PATCH:"PATCH"}},HeaderConstants:{AUTHORIZATION:"authorization",AUTHORIZATION_SCHEME:"Bearer",USER_AGENT:"user-agent",FORM_URL_ENCODED:"application/x-www-form-urlencoded"}}},function(e,t,r){"use strict";const n=r(72),i=r(35),o=r(6);t.urlIsHTTPS=function(e){return e.protocol.toLowerCase()===n.HTTPS},t.objectIsNull=function(e){return null==e},t.encodeUri=function(e){return encodeURIComponent(e).replace(/!/g,"%21").replace(/'/g,"%27").replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/\*/g,"%2A")},t.stripResponse=function(e){let t={};return t.body=e.body,t.headers=e.headers,t.statusCode=e.statusCode,t},t.stripRequest=function(e){let t={};try{(t=JSON.parse(JSON.stringify(e))).headers&&t.headers.Authorization?delete t.headers.Authorization:t.headers&&t.headers.authorization&&delete t.headers.authorization}catch(t){let r=t.message;return t.message=`Error - "${r}" occured while creating a stripped version of the request object - "${e}".`,t}return t},t.isValidUuid=function(e){return new RegExp("^[0-9a-fA-F]{8}-[0-9a-fA-F]{4}-[0-9a-fA-F]{4}-[0-9a-fA-F]{4}-[0-9a-fA-F]{12}$","ig").test(e)},t.objectValues=function(e){let t=[];if(!(e&&e instanceof Object))throw new Error(`The provided object ${JSON.stringify(e,null,2)} is not a valid object that can be `+"enumerated to provide its values as an array.");for(let r in e)e.hasOwnProperty(r)&&t.push(e[r]);return t},t.generateUuid=function(){return i.v4()},t.homeDir=function homeDir(e){let t=process.env["win32"==process.platform?"USERPROFILE":"HOME"];return e?o.join(t,e):t},t=e.exports},function(e,t,r){"use strict";e.exports={HTTP:"http:",HTTPS:"https:",HTTP_PROXY:"HTTP_PROXY",HTTPS_PROXY:"HTTPS_PROXY",HttpConstants:{HttpVerbs:{PUT:"PUT",GET:"GET",DELETE:"DELETE",POST:"POST",MERGE:"MERGE",HEAD:"HEAD",PATCH:"PATCH"}},HeaderConstants:{AUTHORIZATION:"authorization",AUTHORIZATION_SCHEME:"Bearer",USER_AGENT:"user-agent",FORM_URL_ENCODED:"application/x-www-form-urlencoded"}}},function(e,t,r){"use strict";e.exports=function(e){if("function"!=typeof e)throw new TypeError(e+" is not a function");return e}},function(e,t,r){"use strict";var n=function(){return function Domain(){}}();e.exports=n},function(e,t){(function(){var t,r,n,i,o,s,a=[].slice,c={}.hasOwnProperty;t=function(){var e,t,r,n,o,s;if(s=arguments[0],o=2<=arguments.length?a.call(arguments,1):[],i(Object.assign))Object.assign.apply(null,arguments);else for(e=0,r=o.length;e<r;e++)if(null!=(n=o[e]))for(t in n)c.call(n,t)&&(s[t]=n[t]);return s},i=function(e){return!!e&&"[object Function]"===Object.prototype.toString.call(e)},o=function(e){var t;return!!e&&("function"==(t=typeof e)||"object"===t)},r=function(e){return i(Array.isArray)?Array.isArray(e):"[object Array]"===Object.prototype.toString.call(e)},n=function(e){var t;if(r(e))return!e.length;for(t in e)if(c.call(e,t))return!1;return!0},s=function(e){var t,r;return o(e)&&(r=Object.getPrototypeOf(e))&&(t=r.constructor)&&"function"==typeof t&&t instanceof t&&Function.prototype.toString.call(t)===Function.prototype.toString.call(Object)},e.exports.assign=t,e.exports.isFunction=i,e.exports.isObject=o,e.exports.isArray=r,e.exports.isEmpty=n,e.exports.isPlainObject=s}).call(this)},function(e,t,r){var n=r(1),i=r(29);function captureStackTrace(e,t){Error.captureStackTrace&&Error.captureStackTrace(e,t)}function ArgumentError(e,t){captureStackTrace(this,this.constructor),this.name=this.constructor.name,this.argumentName=e,this.message=t||n.format("Invalid or missing argument supplied: %s",e)}function ArgumentNullError(e,t){captureStackTrace(this,this.constructor),this.name=this.constructor.name,this.argumentName=e,this.message=t||n.format("Missing argument: %s",e)}function StorageError(e,t){captureStackTrace(this,this.constructor),this.name=this.constructor.name,this.message=e,t&&i.extend(this,t)}function TimeoutError(e){captureStackTrace(this,this.constructor),this.name=this.constructor.name,this.message=e}n.inherits(ArgumentError,Error),n.inherits(ArgumentNullError,Error),n.inherits(StorageError,Error),n.inherits(TimeoutError,Error),e.exports.ArgumentError=ArgumentError,e.exports.ArgumentNullError=ArgumentNullError,e.exports.StorageError=StorageError,e.exports.TimeoutError=TimeoutError,e.exports.captureStackTrace=captureStackTrace},function(e,t,r){e.exports={read:function read(e,t,r){var c=e;"string"!=typeof e&&(n.buffer(e,"buf"),e=e.toString("ascii"));var u=e.trim().split("\n"),m=u[0].match(/[-]+[ ]*BEGIN ([A-Z0-9][A-Za-z0-9]+ )?(PUBLIC|PRIVATE) KEY[ ]*[-]+/);n.ok(m,"invalid PEM header");var g=u[u.length-1].match(/[-]+[ ]*END ([A-Z0-9][A-Za-z0-9]+ )?(PUBLIC|PRIVATE) KEY[ ]*[-]+/);n.ok(g,"invalid PEM footer"),n.equal(m[2],g[2]);var y,v=m[2].toLowerCase();m[1]&&(n.equal(m[1],g[1],"PEM header and footer mismatch"),y=m[1].trim());var b,_,w,E={};for(;u=u.slice(1),m=u[0].match(/^([A-Za-z0-9-]+): (.+)$/);)E[m[1].toLowerCase()]=m[2];if(E["proc-type"]){var S=E["proc-type"].split(",");if("4"===S[0]&&"ENCRYPTED"===S[1]){if("string"==typeof t.passphrase&&(t.passphrase=s.from(t.passphrase,"utf-8")),!s.isBuffer(t.passphrase))throw new f.KeyEncryptedError(t.filename,"PEM");S=E["dek-info"].split(","),n.ok(2===S.length),b=S[0].toLowerCase(),w=s.from(S[1],"hex"),_=a.opensslKeyDeriv(b,w,t.passphrase,1).key}}if(u=u.slice(0,-1).join(""),e=s.from(u,"base64"),b&&_&&w){var C,x=o.createDecipheriv(b,_,w),k=[];for(x.once("error",function(e){if(-1!==e.toString().indexOf("bad decrypt"))throw new Error("Incorrect passphrase supplied, could not decrypt key");throw e}),x.write(e),x.end();null!==(C=x.read());)k.push(C);e=s.concat(k)}if(y&&"openssh"===y.toLowerCase())return d.readSSHPrivate(v,e,t);if(y&&"ssh2"===y.toLowerCase())return h.readType(v,e,t);var R=new i.BerReader(e);return R.originalInput=c,R.readSequence(),y?(r&&n.strictEqual(r,"pkcs1"),l.readPkcs1(y,v,R)):(r&&n.strictEqual(r,"pkcs8"),p.readPkcs8(y,v,R))},write:function write(e,t,r){n.object(e);var o,a={ecdsa:"EC",rsa:"RSA",dsa:"DSA",ed25519:"EdDSA"}[e.type],d=new i.BerWriter;if(u.isPrivateKey(e))r&&"pkcs8"===r?(o="PRIVATE KEY",p.writePkcs8(d,e)):(r&&n.strictEqual(r,"pkcs1"),o=a+" PRIVATE KEY",l.writePkcs1(d,e));else{if(!c.isKey(e))throw new Error("key is not a Key or PrivateKey");r&&"pkcs1"===r?(o=a+" PUBLIC KEY",l.writePkcs1(d,e)):(r&&n.strictEqual(r,"pkcs8"),o="PUBLIC KEY",p.writePkcs8(d,e))}var h=d.buffer.toString("base64"),f=h.length+h.length/64+18+16+2*o.length+10,m=s.alloc(f),g=0;g+=m.write("-----BEGIN "+o+"-----\n",g);for(var y=0;y<h.length;){var v=y+64;v>h.length&&(v=h.length),g+=m.write(h.slice(y,v),g),m[g++]=10,y=v}return g+=m.write("-----END "+o+"-----\n",g),m.slice(0,g)}};var n=r(13),i=r(66),o=r(12),s=r(19).Buffer,a=(r(32),r(26)),c=r(30),u=r(33),l=r(194),p=r(118),d=r(155),h=r(85),f=r(64)},function(e,t,r){
/*!
 *  * machina - A library for creating powerful and flexible finite state machines. Loosely inspired by Erlang/OTP's gen_fsm behavior.
 *  * Author: Jim Cowart (http://ifandelse.com)
 *  * Version: v4.0.2
 *  * Url: http://machina-js.org/
 *  * License(s): 
 */
!function webpackUniversalModuleDefinition(t,n){e.exports=n(r(113))}(0,function(e){return function(e){var t={};function __webpack_require__(r){if(t[r])return t[r].exports;var n=t[r]={exports:{},id:r,loaded:!1};return e[r].call(n.exports,n,n.exports,__webpack_require__),n.loaded=!0,n.exports}return __webpack_require__.m=e,__webpack_require__.c=t,__webpack_require__.p="",__webpack_require__(0)}([function(e,t,r){var n=r(1),i=r(2);e.exports=n.merge(i.instance,{Fsm:r(5),BehavioralFsm:r(6),utils:r(3),eventListeners:{newFsm:[]}})},function(t,r){t.exports=e},function(e,t,r){var n=r(3),i=r(1);function getInstance(){return{emit:function(e){var t=n.getLeaklessArgs(arguments);this.eventListeners["*"]&&i.each(this.eventListeners["*"],function(e){if(this.useSafeEmit)try{e.apply(this,t)}catch(e){console&&void 0!==console.log&&console.log(e.stack)}else e.apply(this,t)}.bind(this)),this.eventListeners[e]&&i.each(this.eventListeners[e],function(e){if(this.useSafeEmit)try{e.apply(this,t.slice(1))}catch(e){console&&void 0!==console.log&&console.log(e.stack)}else e.apply(this,t.slice(1))}.bind(this))},on:function(e,t){var r=this;return r.eventListeners=r.eventListeners||{"*":[]},r.eventListeners[e]||(r.eventListeners[e]=[]),r.eventListeners[e].push(t),{eventName:e,callback:t,off:function(){r.off(e,t)}}},off:function(e,t){this.eventListeners=this.eventListeners||{"*":[]},e?this.eventListeners[e]=t?i.without(this.eventListeners[e],t):[]:this.eventListeners={}}}}e.exports={getInstance:getInstance,instance:getInstance()}},function(e,t,r){var n,i=[].slice,o=r(4),s=r(1),a=(n=0,function(){return"fsm."+n++});function getDefaultBehavioralOptions(){return{initialState:"uninitialized",eventListeners:{"*":[]},states:{},namespace:a(),useSafeEmit:!1,hierarchy:{},pendingDelegations:{}}}var c=["states","initialState"];e.exports={createUUID:function createUUID(){for(var e=[],t=0;t<36;t++)e[t]="0123456789abcdef".substr(Math.floor(16*Math.random()),1);return e[14]="4",e[19]="0123456789abcdef".substr(3&e[19]|8,1),e[8]=e[13]=e[18]=e[23]="-",e.join("")},extend:function(e,t){var r,n=this,o={},a=function(){};return r=e&&e.hasOwnProperty("constructor")?e.constructor:function(){var e,t=i.call(arguments,0);t[0]=t[0]||{};var r=t[0].states||{};(e=s.merge(s.cloneDeep(o),{states:r})).initialState=t[0].initialState||this.initialState,s.extend(t[0],e),n.apply(this,t)},s.merge(r,n),a.prototype=n.prototype,r.prototype=new a,e&&(s.extend(r.prototype,e),s.merge(o,s.transform(e,function(e,t,r){-1!==c.indexOf(r)&&(e[r]=t)}))),t&&s.merge(r,t),r.prototype.constructor=r,r.__super__=n.prototype,r},getDefaultBehavioralOptions:getDefaultBehavioralOptions,getDefaultOptions:getDefaultBehavioralOptions,getDefaultClientMeta:function getDefaultClientMeta(){return{inputQueue:[],targetReplayState:"",state:void 0,priorState:void 0,priorAction:"",currentAction:"",currentActionArgs:void 0,inExitHandler:!1}},getChildFsmInstance:function getChildFsmInstance(e){if(e){var t={};return"object"==typeof e?e.factory?(t=e).instance=t.factory():t.factory=function(){return e}:"function"==typeof e&&(t.factory=e),t.instance=t.factory(),t}},getLeaklessArgs:function getLeaklessArgs(e,t){for(var r=[],n=t||0;n<e.length;n++)r[n]=e[n];return r},listenToChild:function listenToChild(e,t){return t.on("*",function(t,r){switch(t){case o.NO_HANDLER:r.ticket||r.delegated||r.namespace===e.namespace||(r.args[1].bubbling=!0),"_reset"!==r.inputType&&e.handle.apply(e,r.args);break;case o.HANDLING:var n=r.ticket;n&&e.pendingDelegations[n]&&delete e.pendingDelegations[n],e.emit(t,r);break;default:e.emit(t,r)}})},makeFsmNamespace:a}},function(e,t){e.exports={NEXT_TRANSITION:"transition",HANDLING:"handling",HANDLED:"handled",NO_HANDLER:"nohandler",TRANSITION:"transition",TRANSITIONED:"transitioned",INVALID_STATE:"invalidstate",DEFERRED:"deferred",NEW_FSM:"newfsm"}},function(e,t,r){var n=r(6),i=r(3),o=r(1),s={constructor:function(){n.apply(this,arguments),this.ensureClientMeta()},initClient:function initClient(){var e=this.initialState;if(!e)throw new Error("You must specify an initial state for this FSM");if(!this.states[e])throw new Error("The initial state specified does not exist in the states object.");this.transition(e)},ensureClientMeta:function ensureClientMeta(){return this._stamped||(this._stamped=!0,o.defaults(this,o.cloneDeep(i.getDefaultClientMeta())),this.initClient()),this},ensureClientArg:function(e){var t=e;return"object"!=typeof t[0]||"inputType"in t[0]||t[0]===this?("object"!=typeof t[0]||"object"==typeof t[0]&&"inputType"in t[0])&&t.unshift(this):t.splice(0,1,this),t},getHandlerArgs:function(e,t){var r=e,n=r[1];return"object"==typeof inputType&&r.splice(1,1,n.inputType),t?r.slice(1):r.slice(2)},getSystemHandlerArgs:function(e,t){return e},buildEventPayload:function(){var e=this.ensureClientArg(i.getLeaklessArgs(arguments))[1];return o.isPlainObject(e)?o.extend(e,{namespace:this.namespace}):{data:e||null,namespace:this.namespace}}};o.each(["handle","transition","deferUntilTransition","processQueue","clearQueue"],function(e){s[e]=function(){var t=this.ensureClientArg(i.getLeaklessArgs(arguments));return n.prototype[e].apply(this,t)}}),s=n.extend(s),e.exports=s},function(e,t,r){var n=r(1),i=r(3),o=r(2),s=o.instance,a=r(4);function BehavioralFsm(e){n.extend(this,e),n.defaults(this,i.getDefaultBehavioralOptions()),this.initialize.apply(this,arguments),s.emit(a.NEW_FSM,this)}n.extend(BehavioralFsm.prototype,{initialize:function(){},initClient:function initClient(e){var t=this.initialState;if(!t)throw new Error("You must specify an initial state for this FSM");if(!this.states[t])throw new Error("The initial state specified does not exist in the states object.");this.transition(e,t)},configForState:function configForState(e){var t,r=this.states[e];return n.each(this.hierarchy,function(e,t){e&&"function"==typeof e.off&&e.off()}),r._child&&(r._child=i.getChildFsmInstance(r._child),t=r._child&&r._child.instance,this.hierarchy[t.namespace]=i.listenToChild(this,t)),t},ensureClientMeta:function ensureClientMeta(e){if("object"!=typeof e)throw new Error("An FSM client must be an object.");return e.__machina__=e.__machina__||{},e.__machina__[this.namespace]||(e.__machina__[this.namespace]=n.cloneDeep(i.getDefaultClientMeta()),this.initClient(e)),e.__machina__[this.namespace]},buildEventPayload:function(e,t){return n.isPlainObject(t)?n.extend(t,{client:e,namespace:this.namespace}):{client:e,data:t||null,namespace:this.namespace}},getHandlerArgs:function(e,t){var r=e.slice(0),n=r[1];return"object"==typeof n&&r.splice(1,1,n.inputType),t?r:[r[0]].concat(r.slice(2))},getSystemHandlerArgs:function(e,t){return[t].concat(e)},handle:function(e,t){var r=t;if(void 0===t)throw new Error("The input argument passed to the FSM's handle method is undefined. Did you forget to pass the input name?");"string"==typeof t&&(r={inputType:t,delegated:!1,ticket:void 0});var o=this.ensureClientMeta(e),s=i.getLeaklessArgs(arguments);"object"!=typeof t&&s.splice(1,1,r),o.currentActionArgs=s.slice(1);var c,u,l,p,d,h=o.state,f=this.states[h],m=!1;if(!o.inExitHandler)if(!(l=this.configForState(h))||this.pendingDelegations[r.ticket]||r.bubbling){r.ticket&&this.pendingDelegations[r.ticket]&&delete this.pendingDelegations[r.ticket],m="*"===(c=f[r.inputType]?r.inputType:"*"),u=f[c]||this[c]||this["*"],d=o.state+"."+c,o.currentAction=d;var g=this.buildEventPayload(e,{inputType:r.inputType,delegated:r.delegated,ticket:r.ticket});u?(this.emit(a.HANDLING,g),"function"==typeof u?p=u.apply(this,this.getHandlerArgs(s,m)):(p=u,this.transition(e,u)),this.emit(a.HANDLED,g)):this.emit(a.NO_HANDLER,n.extend({args:s},g)),o.priorAction=o.currentAction,o.currentAction="",o.currentActionArgs=void 0}else r.ticket=r.ticket||i.createUUID(),r.delegated=!0,this.pendingDelegations[r.ticket]={delegatedTo:l.namespace},p=l.handle.apply(l,s);return p},transition:function(e,t){var r,n=this.ensureClientMeta(e),o=n.state,s=this.states[o],c=this.states[t],u=i.getLeaklessArgs(arguments).slice(2);if(!n.inExitHandler&&t!==o){if(c){r=this.configForState(t),s&&s._onExit&&(n.inExitHandler=!0,s._onExit.call(this,e),n.inExitHandler=!1),n.targetReplayState=t,n.priorState=o,n.state=t;var l=this.buildEventPayload(e,{fromState:n.priorState,action:n.currentAction,toState:t});return this.emit(a.TRANSITION,l),c._onEnter&&c._onEnter.apply(this,this.getSystemHandlerArgs(u,e)),this.emit(a.TRANSITIONED,l),r&&r.handle(e,"_reset"),void(n.targetReplayState===t&&this.processQueue(e,a.NEXT_TRANSITION))}this.emit(a.INVALID_STATE,this.buildEventPayload(e,{state:n.state,attemptedState:t}))}},deferUntilTransition:function(e,t){var r=this.ensureClientMeta(e),i=n.isArray(t)?t:t?[t]:void 0;if(r.currentActionArgs){var o={type:a.NEXT_TRANSITION,untilState:i,args:r.currentActionArgs};r.inputQueue.push(o);var s=this.buildEventPayload(e,{state:r.state,queuedArgs:o});this.emit(a.DEFERRED,s)}},deferAndTransition:function(e,t){this.deferUntilTransition(e,t),this.transition(e,t)},processQueue:function(e){var t=this.ensureClientMeta(e),r=n.filter(t.inputQueue,function(e){return!e.untilState||n.includes(e.untilState,t.state)});t.inputQueue=n.difference(t.inputQueue,r),n.each(r,function(t){this.handle.apply(this,[e].concat(t.args))}.bind(this))},clearQueue:function(e,t){var r=this.ensureClientMeta(e);if(t){n.each(r.inputQueue,function(e){e.untilState=n.without(e.untilState,t)});r.inputQueue=n.filter(r.inputQueue,function(e){return 0!==e.untilState.length})}else r.inputQueue=[]},compositeState:function(e){var t=this.ensureClientMeta(e).state,r=this.states[t]._child&&this.states[t]._child.instance;return r&&(t+="."+r.compositeState(e)),t}},o.getInstance()),BehavioralFsm.extend=i.extend,e.exports=BehavioralFsm}])})},function(e,t,r){"use strict";var n=r(53),i=r(937),o=r(955),s=r(43),a=r(408);(t={}).Logging=s.Logging,t.AuthenticationContext=i.AuthenticationContext,t.setGlobalADALOptions=i.setGlobalADALOptions,t.getGlobalADALOptions=i.getGlobalADALOptions,t.MemoryCache=a,n.extend(t,o),t.createAuthenticationContext=function(e,t){return new i.AuthenticationContext(e,t)},e.exports=t},function(e,t,r){"use strict";var n,i=r(53),o=r(34).AdalIdParameters,s=r(17),a=r(7);function isHttpSuccess(e){return e>=200&&e<300}function convertRegularToUrlSafeBase64EncodedString(e){return e.replace(/\+/g,"-").replace(/\//g,"_").replace(/=/g,"")}e.exports.adalInit=function adalInit(){!function loadAdalVersion(){n=r(939).version}()},e.exports.isHttpSuccess=isHttpSuccess,e.exports.createRequestHandler=function createRequestHandler(e,t,r,n){return function(i,o,s){if(function logReturnCorrelationId(e,t,r){r&&r.headers&&r.headers["client-request-id"]&&e.info(t+"Server returned this correlationId: "+r.headers["client-request-id"],!0)}(t,e,o),i)return t.error(e+" request failed with",i,!0),void r(i);if(isHttpSuccess(o.statusCode))n(o,s);else{var a,c=e+" request returned http error: "+o.statusCode;if(s){c+=" and server response: "+s;try{a=JSON.parse(s)}catch(e){}}r(t.createError(c,!0),a)}}},e.exports.createRequestOptions=function createRequestOptions(e,t){var r={};return t&&i.extend(r,t),e._callContext.options&&e._callContext.options.http&&i.extend(r,e._callContext.options.http),function addDefaultRequestHeaders(e,t){t.headers||(t.headers={});var r=t.headers;r["Accept-Charset"]||(r["Accept-Charset"]="utf-8"),r["client-request-id"]=e._callContext._logContext.correlationId,r["return-client-request-id"]="true",r[o.SKU]=o.NODE_SKU,r[o.VERSION]=n,r[o.OS]=s.platform(),r[o.CPU]=s.arch()}(e,r),r},e.exports.copyUrl=function copyUrl(e){return a.parse(a.format(e))},e.exports.base64DecodeStringUrlSafe=function base64DecodeStringUrlSafe(e){var t=function convertUrlSafeToRegularBase64EncodedString(e){return e.replace(/-/g,"+").replace(/_/g,"/")}(e);return new Buffer(t,"base64").toString("utf8")},e.exports.base64EncodeStringUrlSafe=function base64EncodeStringUrlSafe(e){return convertRegularToUrlSafeBase64EncodedString(new Buffer(e,"utf8").toString("base64"))},e.exports.convertRegularToUrlSafeBase64EncodedString=convertRegularToUrlSafeBase64EncodedString},function(e,t,r){"use strict";e.exports=r(1072)()?Symbol:r(1073)},function(e,t,r){"use strict";"undefined"==typeof process||"renderer"===process.type||!0===process.browser||process.__nwjs?e.exports=r(908):e.exports=r(910)},function(e,t,r){"use strict";var n=r(7),i=r(50),o=r(111),s=function(){function Util(){}return Util.getCookie=function(e,t){var r="";if(e&&e.length&&"string"==typeof t)for(var n=e+"=",i=t.split(";"),o=0;o<i.length;o++){t=i[o];if((t=Util.trim(t))&&0===t.indexOf(n)){r=t.substring(n.length,i[o].length);break}}return r},Util.trim=function(e){return"string"==typeof e?e.replace(/^\s+|\s+$/g,""):""},Util.int32ArrayToBase64=function(e){var t=function(e,t){return String.fromCharCode(e>>t&255)},r=e.map(function(e){return t(e,24)+t(e,16)+t(e,8)+t(e,0)}).join(""),n=new Buffer(r,"binary").toString("base64");return n.substr(0,n.indexOf("="))},Util.random32=function(){return 4294967296*Math.random()|0},Util.randomu32=function(){return Util.random32()+2147483648},Util.newGuid=function(){for(var e,t=["0","1","2","3","4","5","6","7","8","9","A","B","C","D","E","F"],r="",n=0;n<4;n++)r+=t[15&(e=Util.random32())]+t[e>>4&15]+t[e>>8&15]+t[e>>12&15]+t[e>>16&15]+t[e>>20&15]+t[e>>24&15]+t[e>>28&15];var i=t[8+4*Math.random()|0];return r.substr(0,8)+"-"+r.substr(9,4)+"-4"+r.substr(13,3)+"-"+i+r.substr(16,3)+"-"+r.substr(19,12)},Util.isArray=function(e){return"[object Array]"===Object.prototype.toString.call(e)},Util.isError=function(e){return e instanceof Error},Util.isDate=function(e){return"[object Date]"===Object.prototype.toString.call(e)},Util.msToTimeSpan=function(e){(isNaN(e)||e<0)&&(e=0);var t=(e/1e3%60).toFixed(7).replace(/0{0,4}$/,""),r=""+Math.floor(e/6e4)%60,n=""+Math.floor(e/36e5)%24,i=Math.floor(e/864e5);return t=t.indexOf(".")<2?"0"+t:t,r=r.length<2?"0"+r:r,(i>0?i+".":"")+(n=n.length<2?"0"+n:n)+":"+r+":"+t},Util.validateStringMap=function(e){var t;if("object"==typeof e)for(var r in t={},e){var n=e[r],o=typeof n;if("string"!==o){if(null==n||"function"!=typeof n.toString){i.info("key: "+r+", invalid property type: "+o);continue}n=n.toString()}t[r]=n.trim(0,Util.MAX_PROPERTY_LENGTH)}else i.info("Invalid properties dropped from payload");return t},Util.canIncludeCorrelationHeader=function(e,t){var r=e&&e.config&&e.config.correlationHeaderExcludedDomains;if(!r||0==r.length||!t)return!0;for(var i=0;i<r.length;i++){if(new RegExp(r[i].replace(/\./g,".").replace(/\*/g,".*")).test(n.parse(t).hostname))return!1}return!0},Util.getCorrelationContextTarget=function(e,t){var r=e.headers&&e.headers[o.requestContextHeader];if(r)for(var n=r.split(","),i=0;i<n.length;++i){var s=n[i].split("=");if(2==s.length&&s[0]==t)return s[1]}},Util.MAX_PROPERTY_LENGTH=1024,Util.document="undefined"!=typeof document?document:{},Util}();e.exports=s},function(e,t,r){var n=r(12),i=function(){};i.prototype.createMd5Hash=function(){return n.createHash("md5")},e.exports=i},function(e,t,r){e.exports={read:read.bind(void 0,!1,void 0),readType:read.bind(void 0,!1),write:function write(e,t){n.object(e);var r,a=keyTypeToAlg(e),l=o.info[e.type];c.isPrivateKey(e)&&(l=o.privInfo[e.type]);var p=l.parts,d=new u({});for(d.writeString(a),r=0;r<p.length;++r){var h=e.part[p[r]].data;!1!==l.normalize&&(h="ed25519"===e.type?s.zeroPadToLength(h,32):s.mpNormalize(h)),"ed25519"===e.type&&"k"===p[r]&&(h=i.concat([h,e.part.A.data])),d.writeBuffer(h)}return d.toBuffer()},readPartial:read.bind(void 0,!0),readInternal:read,keyTypeToAlg:keyTypeToAlg,algToKeyType:algToKeyType};var n=r(13),i=r(19).Buffer,o=r(32),s=r(26),a=r(30),c=r(33),u=r(119);function algToKeyType(e){if(n.string(e),"ssh-dss"===e)return"dsa";if("ssh-rsa"===e)return"rsa";if("ssh-ed25519"===e)return"ed25519";if("ssh-curve25519"===e)return"curve25519";if(e.match(/^ecdsa-sha2-/))return"ecdsa";throw new Error("Unknown algorithm "+e)}function keyTypeToAlg(e){if(n.object(e),"dsa"===e.type)return"ssh-dss";if("rsa"===e.type)return"ssh-rsa";if("ed25519"===e.type)return"ssh-ed25519";if("curve25519"===e.type)return"ssh-curve25519";if("ecdsa"===e.type)return"ecdsa-sha2-"+e.part.curve.data.toString();throw new Error("Unknown key type "+e.type)}function read(e,t,r,l){"string"==typeof r&&(r=i.from(r)),n.buffer(r,"buf");var p={},d=p.parts=[],h=new u({buffer:r}),f=h.readString();n.ok(!h.atEnd(),"key must have at least one part"),p.type=algToKeyType(f);var m=o.info[p.type].parts.length;for(t&&"private"===t&&(m=o.privInfo[p.type].parts.length);!h.atEnd()&&d.length<m;)d.push(h.readPart());for(;!e&&!h.atEnd();)d.push(h.readPart());n.ok(d.length>=1,"key must have at least one part"),n.ok(e||h.atEnd(),"leftover bytes at end of key");var g=a,y=o.info[p.type];if("private"!==t&&y.parts.length===d.length||(y=o.privInfo[p.type],g=c),n.strictEqual(y.parts.length,d.length),"ecdsa"===p.type){var v=/^ecdsa-sha2-(.+)$/.exec(f);n.ok(null!==v),n.strictEqual(v[1],d[0].data.toString())}for(var b=!0,_=0;_<y.parts.length;++_){var w,E=d[_];if(E.name=y.parts[_],"ed25519"===p.type&&"k"===E.name&&(E.data=E.data.slice(0,32)),"curve"!==E.name&&!1!==y.normalize)(w="ed25519"===p.type?s.zeroPadToLength(E.data,32):s.mpNormalize(E.data)).toString("binary")!==E.data.toString("binary")&&(E.data=w,b=!1)}return b&&(p._rfc4253Cache=h.toBuffer()),e&&"object"==typeof e&&(e.remainder=h.remainder(),e.consumed=h._offset),new g(p)}},function(e,t,r){"use strict";const n=r(69);t.Constants=r(70),t.WebResource=r(410),t.ServiceClient=r(963),t.HttpOperationResponse=r(422),t.TokenCredentials=r(969),t.BasicAuthenticationCredentials=r(970),t.ApiKeyCredentials=r(971),t.ProxyFilter=r(413),t.LogFilter=r(972),t.SigningFilter=r(416),t.ExponentialRetryPolicyFilter=r(420),t.UserAgentFilter=r(415),t.FormDataFilter=r(419),t.RpRegistrationFilter=r(421),t.requestPipeline=r(236),t.stripResponse=n.stripResponse,t.stripRequest=n.stripRequest,t.isValidUuid=n.isValidUuid,t.homeDir=n.homeDir,t.serializeObject=r(100).serializeObject,t.serialize=r(100).serialize,t.deserialize=r(100).deserialize;const i=r(100);t.addSerializationMixin=function addSerializationMixin(e){["serialize","serializeObject","deserialize"].forEach(t=>{e[t]=i[t]})},t=e.exports},function(e,t,r){"use strict";var n=r(247),i=r(457),o=r(1068),s=r(458);(e.exports=function(e,t){var r,o,a,c,u;return arguments.length<2||"string"!=typeof e?(c=t,t=e,e=null):c=arguments[2],null==e?(r=a=!0,o=!1):(r=s.call(e,"c"),o=s.call(e,"e"),a=s.call(e,"w")),u={value:t,configurable:r,enumerable:o,writable:a},c?n(i(c),u):u}).gs=function(e,t,r){var a,c,u,l;return"string"!=typeof e?(u=r,r=t,t=e,e=null):u=arguments[3],null==t?t=void 0:o(t)?null==r?r=void 0:o(r)||(u=r,r=void 0):(u=t,t=r=void 0),null==e?(a=!0,c=!1):(a=s.call(e,"c"),c=s.call(e,"e")),l={get:t,set:r,configurable:a,enumerable:c},u?n(i(u),l):l}},function(e,t,r){"use strict";var n=r(4);e.exports={Client:r(629).Client,ModuleClient:r(851).ModuleClient,ConnectionString:r(853),Message:n.Message,SharedAccessSignature:r(854),DeviceMethodRequest:r(138).DeviceMethodRequest,DeviceMethodResponse:r(138).DeviceMethodResponse,X509AuthenticationProvider:r(358).X509AuthenticationProvider,SharedAccessSignatureAuthenticationProvider:r(208).SharedAccessSignatureAuthenticationProvider,SharedAccessKeyAuthenticationProvider:r(157).SharedAccessKeyAuthenticationProvider,Twin:r(184).Twin,TwinProperties:r(184).TwinProperties,getUserAgentString:r(293).getUserAgentString}},function(e,t,r){"use strict";e.exports={Http:r(287).Http,HttpTransportError:r(290).HttpTransportError,RestApiClient:r(290).RestApiClient}},function(e,t){function objectToString(e){return Object.prototype.toString.call(e)}t.isArray=function isArray(e){return Array.isArray?Array.isArray(e):"[object Array]"===objectToString(e)},t.isBoolean=function isBoolean(e){return"boolean"==typeof e},t.isNull=function isNull(e){return null===e},t.isNullOrUndefined=function isNullOrUndefined(e){return null==e},t.isNumber=function isNumber(e){return"number"==typeof e},t.isString=function isString(e){return"string"==typeof e},t.isSymbol=function isSymbol(e){return"symbol"==typeof e},t.isUndefined=function isUndefined(e){return void 0===e},t.isRegExp=function isRegExp(e){return"[object RegExp]"===objectToString(e)},t.isObject=function isObject(e){return"object"==typeof e&&null!==e},t.isDate=function isDate(e){return"[object Date]"===objectToString(e)},t.isError=function isError(e){return"[object Error]"===objectToString(e)||e instanceof Error},t.isFunction=function isFunction(e){return"function"==typeof e},t.isPrimitive=function isPrimitive(e){return null===e||"boolean"==typeof e||"number"==typeof e||"string"==typeof e||"symbol"==typeof e||void 0===e},t.isBuffer=Buffer.isBuffer},function(e,t,r){"use strict";function checkDataType(e,t,r){var n=r?" !== ":" === ",i=r?" || ":" && ",o=r?"!":"",s=r?"":"!";switch(e){case"null":return t+n+"null";case"array":return o+"Array.isArray("+t+")";case"object":return"("+o+t+i+"typeof "+t+n+'"object"'+i+s+"Array.isArray("+t+"))";case"integer":return"(typeof "+t+n+'"number"'+i+s+"("+t+" % 1)"+i+t+n+t+")";default:return"typeof "+t+n+'"'+e+'"'}}e.exports={copy:function copy(e,t){for(var r in t=t||{},e)t[r]=e[r];return t},checkDataType:checkDataType,checkDataTypes:function checkDataTypes(e,t){switch(e.length){case 1:return checkDataType(e[0],t,!0);default:var r="",n=toHash(e);for(var i in n.array&&n.object&&(r=n.null?"(":"(!"+t+" || ",r+="typeof "+t+' !== "object")',delete n.null,delete n.array,delete n.object),n.number&&delete n.integer,n)r+=(r?" && ":"")+checkDataType(i,t,!0);return r}},coerceToTypes:function coerceToTypes(e,t){if(Array.isArray(t)){for(var r=[],i=0;i<t.length;i++){var o=t[i];n[o]?r[r.length]=o:"array"===e&&"array"===o&&(r[r.length]=o)}if(r.length)return r}else{if(n[t])return[t];if("array"===e&&"array"===t)return["array"]}},toHash:toHash,getProperty:getProperty,escapeQuotes:escapeQuotes,equal:r(198),ucs2length:r(697),varOccurences:function varOccurences(e,t){t+="[^0-9]";var r=e.match(new RegExp(t,"g"));return r?r.length:0},varReplace:function varReplace(e,t,r){return t+="([^0-9])",r=r.replace(/\$/g,"$$$$"),e.replace(new RegExp(t,"g"),r+"$1")},cleanUpCode:function cleanUpCode(e){return e.replace(s,"").replace(a,"").replace(c,"if (!($1))")},finalCleanUpCode:function finalCleanUpCode(e,t){var r=e.match(u);r&&2==r.length&&(e=t?e.replace(p,"").replace(f,m):e.replace(l,"").replace(d,h));return(r=e.match(g))&&3===r.length?e.replace(y,""):e},schemaHasRules:function schemaHasRules(e,t){if("boolean"==typeof e)return!e;for(var r in e)if(t[r])return!0},schemaHasRulesExcept:function schemaHasRulesExcept(e,t,r){if("boolean"==typeof e)return!e&&"not"!=r;for(var n in e)if(n!=r&&t[n])return!0},schemaUnknownRules:function schemaUnknownRules(e,t){if("boolean"==typeof e)return;for(var r in e)if(!t[r])return r},toQuotedString:toQuotedString,getPathExpr:function getPathExpr(e,t,r,n){return joinPaths(e,r?"'/' + "+t+(n?"":".replace(/~/g, '~0').replace(/\\//g, '~1')"):n?"'[' + "+t+" + ']'":"'[\\'' + "+t+" + '\\']'")},getPath:function getPath(e,t,r){var n=toQuotedString(r?"/"+escapeJsonPointer(t):getProperty(t));return joinPaths(e,n)},getData:function getData(e,t,r){var n,i,o,s;if(""===e)return"rootData";if("/"==e[0]){if(!v.test(e))throw new Error("Invalid JSON-pointer: "+e);i=e,o="rootData"}else{if(!(s=e.match(b)))throw new Error("Invalid JSON-pointer: "+e);if(n=+s[1],"#"==(i=s[2])){if(n>=t)throw new Error("Cannot access property/index "+n+" levels up, current level is "+t);return r[t-n]}if(n>t)throw new Error("Cannot access data "+n+" levels up, current level is "+t);if(o="data"+(t-n||""),!i)return o}for(var a=o,c=i.split("/"),u=0;u<c.length;u++){var l=c[u];l&&(o+=getProperty(unescapeJsonPointer(l)),a+=" && "+o)}return a},unescapeFragment:function unescapeFragment(e){return unescapeJsonPointer(decodeURIComponent(e))},unescapeJsonPointer:unescapeJsonPointer,escapeFragment:function escapeFragment(e){return encodeURIComponent(escapeJsonPointer(e))},escapeJsonPointer:escapeJsonPointer};var n=toHash(["string","number","integer","boolean","null"]);function toHash(e){for(var t={},r=0;r<e.length;r++)t[e[r]]=!0;return t}var i=/^[a-z$_][a-z$_0-9]*$/i,o=/'|\\/g;function getProperty(e){return"number"==typeof e?"["+e+"]":i.test(e)?"."+e:"['"+escapeQuotes(e)+"']"}function escapeQuotes(e){return e.replace(o,"\\$&").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/\f/g,"\\f").replace(/\t/g,"\\t")}var s=/else\s*{\s*}/g,a=/if\s*\([^)]+\)\s*\{\s*\}(?!\s*else)/g,c=/if\s*\(([^)]+)\)\s*\{\s*\}\s*else(?!\s*if)/g;var u=/[^v.]errors/g,l=/var errors = 0;|var vErrors = null;|validate.errors = vErrors;/g,p=/var errors = 0;|var vErrors = null;/g,d="return errors === 0;",h="validate.errors = null; return true;",f=/if \(errors === 0\) return data;\s*else throw new ValidationError\(vErrors\);/,m="return data;",g=/[^A-Za-z_$]rootData[^A-Za-z0-9_$]/g,y=/if \(rootData === undefined\) rootData = data;/;function toQuotedString(e){return"'"+escapeQuotes(e)+"'"}var v=/^\/(?:[^~]|~0|~1)*$/,b=/^([0-9]+)(#|\/(?:[^~]|~0|~1)*)?$/;function joinPaths(e,t){return'""'==e?t:(e+" + "+t).replace(/' \+ '/g,"")}function escapeJsonPointer(e){return e.replace(/~/g,"~0").replace(/\//g,"~1")}function unescapeJsonPointer(e){return e.replace(/~1/g,"/").replace(/~0/g,"~")}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function merge(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments[1];for(var r in t)void 0===e[r]&&(e[r]=t[r]);return e},e.exports=t.default},function(e,t,r){"use strict";var n=r(1);function ProtocolError(e){Error.call(this),this.message=e,this.name="ProtocolError"}function TypeError(e){ProtocolError.call(this,e),this.message=e,this.name="TypeError"}function ConnectionError(e,t,r){Error.call(this,e),this.message=e,this.name="ConnectionError",this.condition=t,this.description=e,this.connection=r}n.inherits(ProtocolError,Error),n.inherits(TypeError,ProtocolError),n.inherits(ConnectionError,Error),ConnectionError.prototype.toJSON=function(){return{type:this.name,code:this.condition,message:this.description}},e.exports={ProtocolError:ProtocolError,TypeError:TypeError,ConnectionError:ConnectionError}},function(e,t,r){"use strict";var n=r(93),i=1,o=2,s=3,a=4;function Typed(e,t,r,n){this.type=e,this.value=t,r&&(this.array_constructor={typecode:r},n&&(this.array_constructor.descriptor=n))}function TypeDesc(e,t,r,n){this.name=e,this.typecode=t;var c=t>>>4;switch(c){case 4:this.width=0,this.category=i;break;case 5:this.width=1,this.category=i;break;case 6:this.width=2,this.category=i;break;case 7:this.width=4,this.category=i;break;case 8:this.width=8,this.category=i;break;case 9:this.width=16,this.category=i;break;case 10:this.width=1,this.category=o;break;case 11:this.width=4,this.category=o;break;case 12:this.width=1,this.category=s;break;case 13:this.width=4,this.category=s;break;case 14:this.width=1,this.category=a;break;case 15:this.width=4,this.category=a}r&&(r.read&&(this.read=r.read),r.write&&(this.write=r.write),r.encoding&&(this.encoding=r.encoding));var u=this;this.create=4===c?function(){return new Typed(u,n)}:14===c||15===c?function(e,t,r){return new Typed(u,e,t,r)}:function(e){return new Typed(u,e)}}function hex(e){return Number(e).toString(16)}Typed.prototype.toString=function(){return this.value?this.value.toString():null},Typed.prototype.toLocaleString=function(){return this.value?this.value.toLocaleString():null},Typed.prototype.valueOf=function(){return this.value},Typed.prototype.toJSON=function(){return this.value&&this.value.toJSON?this.value.toJSON():this.value},TypeDesc.prototype.toString=function(){return this.name+"#"+hex(this.typecode)};var c={by_code:{}};function define_type(e,t,r,n){var i=new TypeDesc(e,t,r,n);i.create.typecode=i.typecode,c.by_code[i.typecode]=i,c[e]=i.create}Object.defineProperty(c,"MAX_UINT",{value:4294967295,writable:!1,configurable:!1}),Object.defineProperty(c,"MAX_USHORT",{value:65535,writable:!1,configurable:!1});var u=4294967296;function write_long(e,t,r){if("number"==typeof t||t instanceof Number){var n=Math.abs(t),i=Math.floor(n/u),o=n%u;if(e.writeInt32BE(i,r),e.writeUInt32BE(o,r+4),t<0)for(var s=1,a=0;a<8;a++){var c=r+(7-a),l=(255^e[c])+s;e[c]=255&l,s=l>>8}}else t.copy(e,r)}function read_long(e,t){var r=e.readInt32BE(t),n=e.readUInt32BE(t+4);return r<2097153&&r>-2097153?r*u+n:e.slice(t,t+8)}function is_one_of(e,t){for(var r=0;r<t.length;r++)if(e.type.typecode===t[r].typecode)return!0;return!1}function buffer_zero(e,t,r){for(var n=0;n<t&&n<e.length;n++)if(e[n]!==(r?255:0))return!1;return!0}function mapify(e){for(var t={},r=0;r+1<e.length;)t[e[r++]]=e[r++];return t}define_type("Null",64,void 0,null),define_type("Boolean",86,{read:function(e,t){return e.readUInt8(t)},write:function(e,t,r){e.writeUInt8(t,r)}}),define_type("True",65,void 0,!0),define_type("False",66,void 0,!1),define_type("Ubyte",80,{read:function(e,t){return e.readUInt8(t)},write:function(e,t,r){e.writeUInt8(t,r)}}),define_type("Ushort",96,{read:function(e,t){return e.readUInt16BE(t)},write:function(e,t,r){e.writeUInt16BE(t,r)}}),define_type("Uint",112,{read:function(e,t){return e.readUInt32BE(t)},write:function(e,t,r){e.writeUInt32BE(t,r)}}),define_type("SmallUint",82,{read:function(e,t){return e.readUInt8(t)},write:function(e,t,r){e.writeUInt8(t,r)}}),define_type("Uint0",67,void 0,0),define_type("Ulong",128,{write:function write_ulong(e,t,r){if("number"==typeof t||t instanceof Number){var n=Math.floor(t/u),i=t%u;e.writeUInt32BE(n,r),e.writeUInt32BE(i,r+4)}else t.copy(e,r)},read:function read_ulong(e,t){var r=e.readUInt32BE(t),n=e.readUInt32BE(t+4);return r<2097153?r*u+n:e.slice(t,t+8)}}),define_type("SmallUlong",83,{read:function(e,t){return e.readUInt8(t)},write:function(e,t,r){e.writeUInt8(t,r)}}),define_type("Ulong0",68,void 0,0),define_type("Byte",81,{read:function(e,t){return e.readInt8(t)},write:function(e,t,r){e.writeInt8(t,r)}}),define_type("Short",97,{read:function(e,t){return e.readInt16BE(t)},write:function(e,t,r){e.writeInt16BE(t,r)}}),define_type("Int",113,{read:function(e,t){return e.readInt32BE(t)},write:function(e,t,r){e.writeInt32BE(t,r)}}),define_type("SmallInt",84,{read:function(e,t){return e.readInt8(t)},write:function(e,t,r){e.writeInt8(t,r)}}),define_type("Long",129,{write:write_long,read:read_long}),define_type("SmallLong",85,{read:function(e,t){return e.readInt8(t)},write:function(e,t,r){e.writeInt8(t,r)}}),define_type("Float",114,{read:function(e,t){return e.readFloatBE(t)},write:function(e,t,r){e.writeFloatBE(t,r)}}),define_type("Double",130,{read:function(e,t){return e.readDoubleBE(t)},write:function(e,t,r){e.writeDoubleBE(t,r)}}),define_type("Decimal32",116),define_type("Decimal64",132),define_type("Decimal128",148),define_type("CharUTF32",115,{read:function(e,t){return e.readUInt32BE(t)},write:function(e,t,r){e.writeUInt32BE(t,r)}}),define_type("Timestamp",131,{write:write_long,read:read_long}),define_type("Uuid",152),define_type("Vbin8",160),define_type("Vbin32",176),define_type("Str8",161,{encoding:"utf8"}),define_type("Str32",177,{encoding:"utf8"}),define_type("Sym8",163,{encoding:"ascii"}),define_type("Sym32",179,{encoding:"ascii"}),define_type("List0",69,void 0,[]),define_type("List8",192),define_type("List32",208),define_type("Map8",193),define_type("Map32",209),define_type("Array8",224),define_type("Array32",240),c.is_ulong=function(e){return is_one_of(e,[c.Ulong,c.Ulong0,c.SmallUlong])},c.is_string=function(e){return is_one_of(e,[c.Str8,c.Str32])},c.is_symbol=function(e){return is_one_of(e,[c.Sym8,c.Sym32])},c.is_list=function(e){return is_one_of(e,[c.List0,c.List8,c.List32])},c.is_map=function(e){return is_one_of(e,[c.Map8,c.Map32])},c.wrap_boolean=function(e){return e?c.True():c.False()},c.wrap_ulong=function(e){return Buffer.isBuffer(e)?buffer_zero(e,8,!1)?c.Ulong0():buffer_zero(e,7,!1)?c.SmallUlong(e[7]):c.Ulong(e):0===e?c.Ulong0():e>255?c.Ulong(e):c.SmallUlong(e)},c.wrap_uint=function(e){return 0===e?c.Uint0():e>255?c.Uint(e):c.SmallUint(e)},c.wrap_ushort=function(e){return c.Ushort(e)},c.wrap_ubyte=function(e){return c.Ubyte(e)},c.wrap_long=function(e){if(Buffer.isBuffer(e)){var t=0!=(128&e[0]);return buffer_zero(e,7,t)&&(128&e[7])==(t?128:0)?c.SmallLong(t?-(1+(255^e[7])):e[7]):c.Long(e)}return e>127||e<-128?c.Long(e):c.SmallLong(e)},c.wrap_int=function(e){return e>127||e<-128?c.Int(e):c.SmallInt(e)},c.wrap_short=function(e){return c.Short(e)},c.wrap_byte=function(e){return c.Byte(e)},c.wrap_float=function(e){return c.Float(e)},c.wrap_double=function(e){return c.Double(e)},c.wrap_timestamp=function(e){return c.Timestamp(e)},c.wrap_char=function(e){return c.CharUTF32(e)},c.wrap_uuid=function(e){return c.Uuid(e)},c.wrap_binary=function(e){return e.length>255?c.Vbin32(e):c.Vbin8(e)},c.wrap_string=function(e){return e.length>255?c.Str32(e):c.Str8(e)},c.wrap_symbol=function(e){return e.length>255?c.Sym32(e):c.Sym8(e)},c.wrap_list=function(e){if(0===e.length)return c.List0();var t=e.map(c.wrap);return c.List32(t)},c.wrap_map=function(e,t){var r=[];for(var n in e)r.push(t?t(n):c.wrap(n)),r.push(c.wrap(e[n]));return c.Map32(r)},c.wrap_symbolic_map=function(e){return c.wrap_map(e,c.wrap_symbol)},c.wrap_array=function(e,t,r){if(t)return c.Array32(e,t,r);throw console.trace("An array must specify a type for its elements"),new n.TypeError("An array must specify a type for its elements")},c.wrap=function(e){var t=typeof e;if("string"===t)return c.wrap_string(e);if("boolean"===t)return e?c.True():c.False();if("number"===t||e instanceof Number){if(isNaN(e))throw new n.TypeError("Cannot wrap NaN! "+e);return Math.floor(e)-e!=0?c.Double(e):e>0?e<u?c.wrap_uint(e):c.wrap_ulong(e):e>-2147483647?c.wrap_int(e):c.wrap_long(e)}return e instanceof Date?c.wrap_timestamp(e.getTime()):e instanceof Typed?e:e instanceof Buffer?c.wrap_binary(e):"undefined"===t||null===e?c.Null():Array.isArray(e)?c.wrap_list(e):c.wrap_map(e)},c.wrap_described=function(e,t){var r=c.wrap(e);return t&&("string"==typeof t?r=c.described(c.wrap_string(t),r):("number"==typeof t||t instanceof Number)&&(r=c.described(c.wrap_ulong(t),r))),r},c.wrap_message_id=function(e){var t=typeof e;if("string"===t)return c.wrap_string(e);if("number"===t||e instanceof Number)return c.wrap_ulong(e);if(Buffer.isBuffer(e))return c.wrap_uuid(e);throw new n.TypeError("invalid message id:"+e)};var l={};function get_type(e){var t=c.by_code[e];if(!t)throw new n.TypeError("Unrecognised typecode: "+hex(e));return t}function wrap_field(e,t){if(null!=t){if(Array.isArray(t)){if(!e.multiple)throw new n.TypeError("Field "+e.name+" does not support multiple values, got "+JSON.stringify(t));var r=function get_constructor(e){if("symbol"===e)return{typecode:c.Sym8.typecode};throw new n.TypeError("TODO: Array of type "+e+" not yet supported")}(e.type);return c.wrap_array(t,r.typecode,r.descriptor)}if("*"===e.type)return t;var i=c["wrap_"+e.type];if(i)return i(t);throw new n.TypeError("No wrapper for field "+e.name+" of type "+e.type)}if(e.mandatory)throw new n.TypeError("Field "+e.name+" is mandatory");return c.Null()}function get_accessors(e,t){return{get:"*"===t.type?function(){return this.value[e]}:function(){return c.unwrap(this.value[e])},set:function(r){this.value[e]=wrap_field(t,r)},enumerable:!0,configurable:!1}}c.unwrap_map_simple=function(e){return mapify(e.value.map(function(e){return c.unwrap(e,!0)}))},c.unwrap=function(e,t){if(e instanceof Typed){if(e.descriptor){var r=l[e.descriptor.value];if(r)return new r(e.value);if(t)return e}var n=c.unwrap(e.value,!0);return c.is_map(e)?mapify(n):n}return Array.isArray(e)?e.map(function(e){return c.unwrap(e,!0)}):e},c.described_nc=function(e,t){return e.length?(t.descriptor=e.shift(),c.described(e,t)):(t.descriptor=e,t)},c.described=c.described_nc,c.Reader=function(e){this.buffer=e,this.position=0},c.Reader.prototype.read_typecode=function(){return this.read_uint(1)},c.Reader.prototype.read_uint=function(e){var t=this.position;if(this.position+=e,1===e)return this.buffer.readUInt8(t);if(2===e)return this.buffer.readUInt16BE(t);if(4===e)return this.buffer.readUInt32BE(t);throw new n.TypeError("Unexpected width for uint "+e)},c.Reader.prototype.read_fixed_width=function(e){var t=this.position;return this.position+=e.width,e.read?e.read(this.buffer,t):this.buffer.slice(t,this.position)},c.Reader.prototype.read_variable_width=function(e){var t=this.read_uint(e.width),r=this.read_bytes(t);return e.encoding?r.toString(e.encoding):r},c.Reader.prototype.read=function(){var e=this.read_constructor(),t=this.read_value(get_type(e.typecode));return e.descriptor?c.described_nc(e.descriptor,t):t},c.Reader.prototype.read_constructor=function(){var e=this.read_typecode();if(0===e){var t=[];t.push(this.read());for(var r=this.read_constructor();r.descriptor;)t.push(r.descriptor),r=this.read_constructor();return{typecode:r.typecode,descriptor:1===t.length?t[0]:t}}return{typecode:e}},c.Reader.prototype.read_value=function(e){if(0===e.width)return e.create();if(e.category===i)return e.create(this.read_fixed_width(e));if(e.category===o)return e.create(this.read_variable_width(e));if(e.category===s)return this.read_compound(e);if(e.category===a)return this.read_array(e);throw new n.TypeError("Invalid category for type: "+e)},c.Reader.prototype.read_array_items=function(e,t){for(var r=[];r.length<e;)r.push(this.read_value(t));return r},c.Reader.prototype.read_n=function(e){for(var t=new Array(e),r=0;r<e;r++)t[r]=this.read();return t},c.Reader.prototype.read_size_count=function(e){return{size:this.read_uint(e),count:this.read_uint(e)}},c.Reader.prototype.read_compound=function(e){var t=this.read_size_count(e.width);return e.create(this.read_n(t.count))},c.Reader.prototype.read_array=function(e){var t=this.read_size_count(e.width),r=this.read_constructor();return e.create(this.read_array_items(t.count,get_type(r.typecode)),r.typecode,r.descriptor)},c.Reader.prototype.toString=function(){var e="buffer@"+this.position;this.position&&(e+=": ");for(var t=this.position;t<this.buffer.length;t++)t>0&&(e+=","),e+="0x"+Number(this.buffer[t]).toString(16);return e},c.Reader.prototype.reset=function(){this.position=0},c.Reader.prototype.skip=function(e){this.position+=e},c.Reader.prototype.read_bytes=function(e){var t=this.position;return this.position+=e,this.buffer.slice(t,this.position)},c.Reader.prototype.remaining=function(){return this.buffer.length-this.position},c.Writer=function(e){this.buffer=e||new Buffer(1024),this.position=0},c.Writer.prototype.toBuffer=function(){return this.buffer.slice(0,this.position)},c.Writer.prototype.ensure=function(e){if(this.buffer.length<e){var t=new Buffer(function max(e,t){return e>t?e:t}(2*this.buffer.length,e));this.buffer.copy(t),this.buffer=t}},c.Writer.prototype.write_typecode=function(e){this.write_uint(e,1)},c.Writer.prototype.write_uint=function(e,t){var r=this.position;if(this.ensure(this.position+t),this.position+=t,1===t)return this.buffer.writeUInt8(e,r);if(2===t)return this.buffer.writeUInt16BE(e,r);if(4===t)return this.buffer.writeUInt32BE(e,r);throw new n.TypeError("Unexpected width for uint "+t)},c.Writer.prototype.write_fixed_width=function(e,t){var r=this.position;if(this.ensure(this.position+e.width),this.position+=e.width,e.write)e.write(this.buffer,t,r);else{if(!t.copy)throw new n.TypeError("Cannot handle write for "+e);t.copy(this.buffer,r)}},c.Writer.prototype.write_variable_width=function(e,t){var r=e.encoding?new Buffer(t,e.encoding):new Buffer(t);this.write_uint(r.length,e.width),this.write_bytes(r)},c.Writer.prototype.write_bytes=function(e){var t=this.position;this.ensure(this.position+e.length),this.position+=e.length,e.copy(this.buffer,t)},c.Writer.prototype.write_constructor=function(e,t){t&&(this.write_typecode(0),this.write(t)),this.write_typecode(e)},c.Writer.prototype.write=function(e){if(void 0===e.type){if(!e.described)throw new n.TypeError("Cannot write "+JSON.stringify(e));this.write(e.described())}else this.write_constructor(e.type.typecode,e.descriptor),this.write_value(e.type,e.value,e.array_constructor)},c.Writer.prototype.write_value=function(e,t,r){if(0!==e.width)if(e.category===i)this.write_fixed_width(e,t);else if(e.category===o)this.write_variable_width(e,t);else if(e.category===s)this.write_compound(e,t);else{if(e.category!==a)throw new n.TypeError("Invalid category "+e.category+" for type: "+e);this.write_array(e,t,r)}},c.Writer.prototype.backfill_size=function(e,t){var r=this.position-t;this.position=t,this.write_uint(r-e,e),this.position+=r-e},c.Writer.prototype.write_compound=function(e,t){var r=this.position;this.position+=e.width,this.write_uint(t.length,e.width);for(var n=0;n<t.length;n++)void 0===t[n]||null===t[n]?this.write(c.Null()):this.write(t[n]);this.backfill_size(e.width,r)},c.Writer.prototype.write_array=function(e,t,r){var n=this.position;this.position+=e.width,this.write_uint(t.length,e.width),this.write_constructor(r.typecode,r.descriptor);for(var i=get_type(r.typecode),o=0;o<t.length;o++)this.write_value(i,t[o]);this.backfill_size(e.width,n)},c.Writer.prototype.toString=function(){var e="buffer@"+this.position;this.position&&(e+=": ");for(var t=0;t<this.position;t++)t>0&&(e+=","),e+=("00"+Number(this.buffer[t]).toString(16)).slice(-2);return e},c.Writer.prototype.skip=function(e){this.ensure(this.position+e),this.position+=e},c.Writer.prototype.clear=function(){this.buffer.fill(0),this.position=0},c.Writer.prototype.remaining=function(){return this.buffer.length-this.position},c.define_composite=function(e){var t=function(e){this.value=e||[]};t.descriptor={numeric:e.code,symbolic:"amqp:"+e.name+":list"},t.prototype.dispatch=function(t,r){t["on_"+e.name](r)};for(var r=0;r<e.fields.length;r++){var n=e.fields[r];Object.defineProperty(t.prototype,n.name,get_accessors(r,n))}return t.toString=function(){return e.name+"#"+Number(e.code).toString(16)},t.prototype.toJSON=function(){var e={};for(var t in this)"value"!==t&&this[t]&&(e[t]=this[t]);return e},t.create=function(e){var r=new t;for(var n in e)r[n]=e[n];return r},t.prototype.described=function(){return c.described_nc(c.wrap_ulong(t.descriptor.numeric),c.wrap_list(this.value))},t},function add_type(e){var t=c.define_composite(e);c["wrap_"+e.name]=function(e){return t.create(e).described()},l[Number(t.descriptor.numeric).toString(10)]=t,l[t.descriptor.symbolic]=t}({name:"error",code:29,fields:[{name:"condition",type:"symbol",mandatory:!0},{name:"description",type:"string"},{name:"info",type:"map"}]}),e.exports=c},function(e,t,r){"use strict";var n=r(863);n.formatters&&(n.formatters.h=function(e){return e.toString("hex")}),e.exports={frames:n("rhea:frames"),raw:n("rhea:raw"),reconnect:n("rhea:reconnect"),events:n("rhea:events"),message:n("rhea:message"),flow:n("rhea:flow"),io:n("rhea:io")}},function(e,t,r){"use strict";var n=r(1);function ProtocolError(e){Error.call(this),this.message=e,this.name="ProtocolError"}function TypeError(e){ProtocolError.call(this,e),this.message=e,this.name="TypeError"}function ConnectionError(e,t,r){Error.call(this,e),this.message=e,this.name="ConnectionError",this.condition=t,this.description=e,this.connection=r}n.inherits(ProtocolError,Error),n.inherits(TypeError,ProtocolError),n.inherits(ConnectionError,Error),ConnectionError.prototype.toJSON=function(){return{type:this.name,code:this.condition,message:this.description}},e.exports={ProtocolError:ProtocolError,TypeError:TypeError,ConnectionError:ConnectionError}},function(e,t,r){"use strict";var n=r(96),i=1,o=2,s=3,a=4;function Typed(e,t,r,n){this.type=e,this.value=t,r&&(this.array_constructor={typecode:r},n&&(this.array_constructor.descriptor=n))}function TypeDesc(e,t,r,n){this.name=e,this.typecode=t;var c=t>>>4;switch(c){case 4:this.width=0,this.category=i;break;case 5:this.width=1,this.category=i;break;case 6:this.width=2,this.category=i;break;case 7:this.width=4,this.category=i;break;case 8:this.width=8,this.category=i;break;case 9:this.width=16,this.category=i;break;case 10:this.width=1,this.category=o;break;case 11:this.width=4,this.category=o;break;case 12:this.width=1,this.category=s;break;case 13:this.width=4,this.category=s;break;case 14:this.width=1,this.category=a;break;case 15:this.width=4,this.category=a}r&&(r.read&&(this.read=r.read),r.write&&(this.write=r.write),r.encoding&&(this.encoding=r.encoding));var u=this;this.create=4===c?function(){return new Typed(u,n)}:14===c||15===c?function(e,t,r){return new Typed(u,e,t,r)}:function(e){return new Typed(u,e)}}function hex(e){return Number(e).toString(16)}Typed.prototype.toString=function(){return this.value?this.value.toString():null},Typed.prototype.toLocaleString=function(){return this.value?this.value.toLocaleString():null},Typed.prototype.valueOf=function(){return this.value},Typed.prototype.toJSON=function(){return this.value&&this.value.toJSON?this.value.toJSON():this.value},TypeDesc.prototype.toString=function(){return this.name+"#"+hex(this.typecode)};var c={by_code:{}};function define_type(e,t,r,n){var i=new TypeDesc(e,t,r,n);i.create.typecode=i.typecode,c.by_code[i.typecode]=i,c[e]=i.create}Object.defineProperty(c,"MAX_UINT",{value:4294967295,writable:!1,configurable:!1}),Object.defineProperty(c,"MAX_USHORT",{value:65535,writable:!1,configurable:!1});var u=4294967296;function write_long(e,t,r){if("number"==typeof t||t instanceof Number){var n=Math.abs(t),i=Math.floor(n/u),o=n%u;if(e.writeInt32BE(i,r),e.writeUInt32BE(o,r+4),t<0)for(var s=1,a=0;a<8;a++){var c=r+(7-a),l=(255^e[c])+s;e[c]=255&l,s=l>>8}}else t.copy(e,r)}function read_long(e,t){var r=e.readInt32BE(t),n=e.readUInt32BE(t+4);return r<2097153&&r>-2097153?r*u+n:e.slice(t,t+8)}function is_one_of(e,t){for(var r=0;r<t.length;r++)if(e.type.typecode===t[r].typecode)return!0;return!1}function buffer_zero(e,t,r){for(var n=0;n<t&&n<e.length;n++)if(e[n]!==(r?255:0))return!1;return!0}function mapify(e){for(var t={},r=0;r+1<e.length;)t[e[r++]]=e[r++];return t}define_type("Null",64,void 0,null),define_type("Boolean",86,{read:function(e,t){return e.readUInt8(t)},write:function(e,t,r){e.writeUInt8(t,r)}}),define_type("True",65,void 0,!0),define_type("False",66,void 0,!1),define_type("Ubyte",80,{read:function(e,t){return e.readUInt8(t)},write:function(e,t,r){e.writeUInt8(t,r)}}),define_type("Ushort",96,{read:function(e,t){return e.readUInt16BE(t)},write:function(e,t,r){e.writeUInt16BE(t,r)}}),define_type("Uint",112,{read:function(e,t){return e.readUInt32BE(t)},write:function(e,t,r){e.writeUInt32BE(t,r)}}),define_type("SmallUint",82,{read:function(e,t){return e.readUInt8(t)},write:function(e,t,r){e.writeUInt8(t,r)}}),define_type("Uint0",67,void 0,0),define_type("Ulong",128,{write:function write_ulong(e,t,r){if("number"==typeof t||t instanceof Number){var n=Math.floor(t/u),i=t%u;e.writeUInt32BE(n,r),e.writeUInt32BE(i,r+4)}else t.copy(e,r)},read:function read_ulong(e,t){var r=e.readUInt32BE(t),n=e.readUInt32BE(t+4);return r<2097153?r*u+n:e.slice(t,t+8)}}),define_type("SmallUlong",83,{read:function(e,t){return e.readUInt8(t)},write:function(e,t,r){e.writeUInt8(t,r)}}),define_type("Ulong0",68,void 0,0),define_type("Byte",81,{read:function(e,t){return e.readInt8(t)},write:function(e,t,r){e.writeInt8(t,r)}}),define_type("Short",97,{read:function(e,t){return e.readInt16BE(t)},write:function(e,t,r){e.writeInt16BE(t,r)}}),define_type("Int",113,{read:function(e,t){return e.readInt32BE(t)},write:function(e,t,r){e.writeInt32BE(t,r)}}),define_type("SmallInt",84,{read:function(e,t){return e.readInt8(t)},write:function(e,t,r){e.writeInt8(t,r)}}),define_type("Long",129,{write:write_long,read:read_long}),define_type("SmallLong",85,{read:function(e,t){return e.readInt8(t)},write:function(e,t,r){e.writeInt8(t,r)}}),define_type("Float",114,{read:function(e,t){return e.readFloatBE(t)},write:function(e,t,r){e.writeFloatBE(t,r)}}),define_type("Double",130,{read:function(e,t){return e.readDoubleBE(t)},write:function(e,t,r){e.writeDoubleBE(t,r)}}),define_type("Decimal32",116),define_type("Decimal64",132),define_type("Decimal128",148),define_type("CharUTF32",115,{read:function(e,t){return e.readUInt32BE(t)},write:function(e,t,r){e.writeUInt32BE(t,r)}}),define_type("Timestamp",131,{write:write_long,read:read_long}),define_type("Uuid",152),define_type("Vbin8",160),define_type("Vbin32",176),define_type("Str8",161,{encoding:"utf8"}),define_type("Str32",177,{encoding:"utf8"}),define_type("Sym8",163,{encoding:"ascii"}),define_type("Sym32",179,{encoding:"ascii"}),define_type("List0",69,void 0,[]),define_type("List8",192),define_type("List32",208),define_type("Map8",193),define_type("Map32",209),define_type("Array8",224),define_type("Array32",240),c.is_ulong=function(e){return is_one_of(e,[c.Ulong,c.Ulong0,c.SmallUlong])},c.is_string=function(e){return is_one_of(e,[c.Str8,c.Str32])},c.is_symbol=function(e){return is_one_of(e,[c.Sym8,c.Sym32])},c.is_list=function(e){return is_one_of(e,[c.List0,c.List8,c.List32])},c.is_map=function(e){return is_one_of(e,[c.Map8,c.Map32])},c.wrap_boolean=function(e){return e?c.True():c.False()},c.wrap_ulong=function(e){return Buffer.isBuffer(e)?buffer_zero(e,8,!1)?c.Ulong0():buffer_zero(e,7,!1)?c.SmallUlong(e[7]):c.Ulong(e):0===e?c.Ulong0():e>255?c.Ulong(e):c.SmallUlong(e)},c.wrap_uint=function(e){return 0===e?c.Uint0():e>255?c.Uint(e):c.SmallUint(e)},c.wrap_ushort=function(e){return c.Ushort(e)},c.wrap_ubyte=function(e){return c.Ubyte(e)},c.wrap_long=function(e){if(Buffer.isBuffer(e)){var t=0!=(128&e[0]);return buffer_zero(e,7,t)&&(128&e[7])==(t?128:0)?c.SmallLong(t?-(1+(255^e[7])):e[7]):c.Long(e)}return e>127||e<-128?c.Long(e):c.SmallLong(e)},c.wrap_int=function(e){return e>127||e<-128?c.Int(e):c.SmallInt(e)},c.wrap_short=function(e){return c.Short(e)},c.wrap_byte=function(e){return c.Byte(e)},c.wrap_float=function(e){return c.Float(e)},c.wrap_double=function(e){return c.Double(e)},c.wrap_timestamp=function(e){return c.Timestamp(e)},c.wrap_char=function(e){return c.CharUTF32(e)},c.wrap_uuid=function(e){return c.Uuid(e)},c.wrap_binary=function(e){return e.length>255?c.Vbin32(e):c.Vbin8(e)},c.wrap_string=function(e){return e.length>255?c.Str32(e):c.Str8(e)},c.wrap_symbol=function(e){return e.length>255?c.Sym32(e):c.Sym8(e)},c.wrap_list=function(e){if(0===e.length)return c.List0();var t=e.map(c.wrap);return c.List32(t)},c.wrap_map=function(e,t){var r=[];for(var n in e)r.push(t?t(n):c.wrap(n)),r.push(c.wrap(e[n]));return c.Map32(r)},c.wrap_symbolic_map=function(e){return c.wrap_map(e,c.wrap_symbol)},c.wrap_array=function(e,t,r){if(t)return c.Array32(e,t,r);throw console.trace("An array must specify a type for its elements"),new n.TypeError("An array must specify a type for its elements")},c.wrap=function(e){var t=typeof e;return"string"===t?c.wrap_string(e):"boolean"===t?e?c.True():c.False():"number"===t||e instanceof Number?isNaN(e)?c.Null():Math.floor(e)-e!=0?c.Double(e):e>0?e<u?c.wrap_uint(e):c.wrap_ulong(e):e>-2147483647?c.wrap_int(e):c.wrap_long(e):e instanceof Date?c.wrap_timestamp(e.getTime()):e instanceof Typed?e:e instanceof Buffer?c.wrap_binary(e):"undefined"===t||null===e?c.Null():Array.isArray(e)?c.wrap_list(e):c.wrap_map(e)},c.wrap_described=function(e,t){var r=c.wrap(e);return t&&("string"==typeof t?r=c.described(c.wrap_symbol(t),r):("number"==typeof t||t instanceof Number)&&(r=c.described(c.wrap_ulong(t),r))),r},c.wrap_message_id=function(e){var t=typeof e;if("string"===t)return c.wrap_string(e);if("number"===t||e instanceof Number)return c.wrap_ulong(e);if(Buffer.isBuffer(e))return c.wrap_uuid(e);throw new n.TypeError("invalid message id:"+e)};var l={};function get_type(e){var t=c.by_code[e];if(!t)throw new n.TypeError("Unrecognised typecode: "+hex(e));return t}function wrap_field(e,t){if(null!=t){if(Array.isArray(t)){if(!e.multiple)throw new n.TypeError("Field "+e.name+" does not support multiple values, got "+JSON.stringify(t));var r=function get_constructor(e){if("symbol"===e)return{typecode:c.Sym8.typecode};throw new n.TypeError("TODO: Array of type "+e+" not yet supported")}(e.type);return c.wrap_array(t,r.typecode,r.descriptor)}if("*"===e.type)return t;var i=c["wrap_"+e.type];if(i)return i(t);throw new n.TypeError("No wrapper for field "+e.name+" of type "+e.type)}if(e.mandatory)throw new n.TypeError("Field "+e.name+" is mandatory");return c.Null()}function get_accessors(e,t){return{get:"*"===t.type?function(){return this.value[e]}:function(){return c.unwrap(this.value[e])},set:function(r){this.value[e]=wrap_field(t,r)},enumerable:!0,configurable:!1}}c.unwrap_map_simple=function(e){return mapify(e.value.map(function(e){return c.unwrap(e,!0)}))},c.unwrap=function(e,t){if(e instanceof Typed){if(e.descriptor){var r=l[e.descriptor.value];if(r)return new r(e.value);if(t)return e}var n=c.unwrap(e.value,!0);return c.is_map(e)?mapify(n):n}return Array.isArray(e)?e.map(function(e){return c.unwrap(e,!0)}):e},c.described_nc=function(e,t){return e.length?(t.descriptor=e.shift(),c.described(e,t)):(t.descriptor=e,t)},c.described=c.described_nc,c.Reader=function(e){this.buffer=e,this.position=0},c.Reader.prototype.read_typecode=function(){return this.read_uint(1)},c.Reader.prototype.read_uint=function(e){var t=this.position;if(this.position+=e,1===e)return this.buffer.readUInt8(t);if(2===e)return this.buffer.readUInt16BE(t);if(4===e)return this.buffer.readUInt32BE(t);throw new n.TypeError("Unexpected width for uint "+e)},c.Reader.prototype.read_fixed_width=function(e){var t=this.position;return this.position+=e.width,e.read?e.read(this.buffer,t):this.buffer.slice(t,this.position)},c.Reader.prototype.read_variable_width=function(e){var t=this.read_uint(e.width),r=this.read_bytes(t);return e.encoding?r.toString(e.encoding):r},c.Reader.prototype.read=function(){var e=this.read_constructor(),t=this.read_value(get_type(e.typecode));return e.descriptor?c.described_nc(e.descriptor,t):t},c.Reader.prototype.read_constructor=function(){var e=this.read_typecode();if(0===e){var t=[];t.push(this.read());for(var r=this.read_constructor();r.descriptor;)t.push(r.descriptor),r=this.read_constructor();return{typecode:r.typecode,descriptor:1===t.length?t[0]:t}}return{typecode:e}},c.Reader.prototype.read_value=function(e){if(0===e.width)return e.create();if(e.category===i)return e.create(this.read_fixed_width(e));if(e.category===o)return e.create(this.read_variable_width(e));if(e.category===s)return this.read_compound(e);if(e.category===a)return this.read_array(e);throw new n.TypeError("Invalid category for type: "+e)},c.Reader.prototype.read_array_items=function(e,t){for(var r=[];r.length<e;)r.push(this.read_value(t));return r},c.Reader.prototype.read_n=function(e){for(var t=new Array(e),r=0;r<e;r++)t[r]=this.read();return t},c.Reader.prototype.read_size_count=function(e){return{size:this.read_uint(e),count:this.read_uint(e)}},c.Reader.prototype.read_compound=function(e){var t=this.read_size_count(e.width);return e.create(this.read_n(t.count))},c.Reader.prototype.read_array=function(e){var t=this.read_size_count(e.width),r=this.read_constructor();return e.create(this.read_array_items(t.count,get_type(r.typecode)),r.typecode,r.descriptor)},c.Reader.prototype.toString=function(){var e="buffer@"+this.position;this.position&&(e+=": ");for(var t=this.position;t<this.buffer.length;t++)t>0&&(e+=","),e+="0x"+Number(this.buffer[t]).toString(16);return e},c.Reader.prototype.reset=function(){this.position=0},c.Reader.prototype.skip=function(e){this.position+=e},c.Reader.prototype.read_bytes=function(e){var t=this.position;return this.position+=e,this.buffer.slice(t,this.position)},c.Reader.prototype.remaining=function(){return this.buffer.length-this.position},c.Writer=function(e){this.buffer=e||Buffer.alloc(1024),this.position=0},c.Writer.prototype.toBuffer=function(){return this.buffer.slice(0,this.position)},c.Writer.prototype.ensure=function(e){if(this.buffer.length<e){var t=Buffer.alloc(function max(e,t){return e>t?e:t}(2*this.buffer.length,e));this.buffer.copy(t),this.buffer=t}},c.Writer.prototype.write_typecode=function(e){this.write_uint(e,1)},c.Writer.prototype.write_uint=function(e,t){var r=this.position;if(this.ensure(this.position+t),this.position+=t,1===t)return this.buffer.writeUInt8(e,r);if(2===t)return this.buffer.writeUInt16BE(e,r);if(4===t)return this.buffer.writeUInt32BE(e,r);throw new n.TypeError("Unexpected width for uint "+t)},c.Writer.prototype.write_fixed_width=function(e,t){var r=this.position;if(this.ensure(this.position+e.width),this.position+=e.width,e.write)e.write(this.buffer,t,r);else{if(!t.copy)throw new n.TypeError("Cannot handle write for "+e);t.copy(this.buffer,r)}},c.Writer.prototype.write_variable_width=function(e,t){var r=e.encoding?Buffer.from(t,e.encoding):Buffer.from(t);this.write_uint(r.length,e.width),this.write_bytes(r)},c.Writer.prototype.write_bytes=function(e){var t=this.position;this.ensure(this.position+e.length),this.position+=e.length,e.copy(this.buffer,t)},c.Writer.prototype.write_constructor=function(e,t){t&&(this.write_typecode(0),this.write(t)),this.write_typecode(e)},c.Writer.prototype.write=function(e){if(void 0===e.type){if(!e.described)throw new n.TypeError("Cannot write "+JSON.stringify(e));this.write(e.described())}else this.write_constructor(e.type.typecode,e.descriptor),this.write_value(e.type,e.value,e.array_constructor)},c.Writer.prototype.write_value=function(e,t,r){if(0!==e.width)if(e.category===i)this.write_fixed_width(e,t);else if(e.category===o)this.write_variable_width(e,t);else if(e.category===s)this.write_compound(e,t);else{if(e.category!==a)throw new n.TypeError("Invalid category "+e.category+" for type: "+e);this.write_array(e,t,r)}},c.Writer.prototype.backfill_size=function(e,t){var r=this.position-t;this.position=t,this.write_uint(r-e,e),this.position+=r-e},c.Writer.prototype.write_compound=function(e,t){var r=this.position;this.position+=e.width,this.write_uint(t.length,e.width);for(var n=0;n<t.length;n++)void 0===t[n]||null===t[n]?this.write(c.Null()):this.write(t[n]);this.backfill_size(e.width,r)},c.Writer.prototype.write_array=function(e,t,r){var n=this.position;this.position+=e.width,this.write_uint(t.length,e.width),this.write_constructor(r.typecode,r.descriptor);for(var i=get_type(r.typecode),o=0;o<t.length;o++)this.write_value(i,t[o]);this.backfill_size(e.width,n)},c.Writer.prototype.toString=function(){var e="buffer@"+this.position;this.position&&(e+=": ");for(var t=0;t<this.position;t++)t>0&&(e+=","),e+=("00"+Number(this.buffer[t]).toString(16)).slice(-2);return e},c.Writer.prototype.skip=function(e){this.ensure(this.position+e),this.position+=e},c.Writer.prototype.clear=function(){this.buffer.fill(0),this.position=0},c.Writer.prototype.remaining=function(){return this.buffer.length-this.position},c.define_composite=function(e){var t=function(e){this.value=e||[]};t.descriptor={numeric:e.code,symbolic:"amqp:"+e.name+":list"},t.prototype.dispatch=function(t,r){t["on_"+e.name](r)};for(var r=0;r<e.fields.length;r++){var n=e.fields[r];Object.defineProperty(t.prototype,n.name,get_accessors(r,n))}return t.toString=function(){return e.name+"#"+Number(e.code).toString(16)},t.prototype.toJSON=function(){var e={};for(var t in this)"value"!==t&&this[t]&&(e[t]=this[t]);return e},t.create=function(e){var r=new t;for(var n in e)r[n]=e[n];return r},t.prototype.described=function(){return c.described_nc(c.wrap_ulong(t.descriptor.numeric),c.wrap_list(this.value))},t},function add_type(e){var t=c.define_composite(e);c["wrap_"+e.name]=function(e){return t.create(e).described()},l[Number(t.descriptor.numeric).toString(10)]=t,l[t.descriptor.symbolic]=t}({name:"error",code:29,fields:[{name:"condition",type:"symbol",mandatory:!0},{name:"description",type:"string"},{name:"info",type:"map"}]}),e.exports=c},function(e,t,r){"use strict";var n=r(381);n.formatters&&(n.formatters.h=function(e){return e.toString("hex")}),e.exports={config:n("rhea:config"),frames:n("rhea:frames"),raw:n("rhea:raw"),reconnect:n("rhea:reconnect"),events:n("rhea:events"),message:n("rhea:message"),flow:n("rhea:flow"),io:n("rhea:io")}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.AuthConstants={AAD_COMMON_TENANT:"common",DEFAULT_ADAL_CLIENT_ID:"04b07795-8ddb-461a-bbee-02f9e1bf7b46",SDK_INTERNAL_ERROR:"SDK_INTERNAL_ERROR",DEFAULT_LANGUAGE:"en-us",AZURE_AUTH_LOCATION:"AZURE_AUTH_LOCATION",RESOURCE_MANAGER_ENDPOINT:"https://management.azure.com/"}},function(e,t,r){"use strict";const n=r(411),i=r(412),o=r(226),s=r(69);function splitSerializeName(e){let t=[],r="";return e.split(".").forEach(e=>{"\\"===e.charAt(e.length-1)?r+=e.substr(0,e.length-1)+".":(r+=e,t.push(r),r="")}),t}function getPolymorphicMapper(e,t,r,n){if(e.type.polymorphicDiscriminator){if("string"==typeof e.type.polymorphicDiscriminator.valueOf())return function _getPolymorphicMapperStringVersion(e,t,r){if(null!==e.type.polymorphicDiscriminator&&void 0!==e.type.polymorphicDiscriminator){if(null==t)throw new Error(`${r}" cannot be null or undefined. "${e.type.polymorphicDiscriminator}" is the `+"polmorphicDiscriminator and is a required property.");if(null===t[e.type.polymorphicDiscriminator]||void 0===t[e.type.polymorphicDiscriminator])return e;let n=null;n=t[e.type.polymorphicDiscriminator]===e.type.uberParent?t[e.type.polymorphicDiscriminator]:e.type.uberParent+"."+t[e.type.polymorphicDiscriminator],this.models.discriminators[n]&&(e=(new this.models.discriminators[n]).mapper())}return e}.call(this,e,t,r);if(e.type.polymorphicDiscriminator instanceof Object)return function _getPolymorphicMapperObjectVersion(e,t,r,n){let i="";if("serialize"===n)i="clientName";else{if("deserialize"!==n)throw new Error(`The given mode "${n}" for getting the polymorphic mapper for "${r}" is inavlid.`);i="serializedName"}if(e.type.polymorphicDiscriminator&&null!==e.type.polymorphicDiscriminator[i]&&void 0!==e.type.polymorphicDiscriminator[i]){if(null==t)throw new Error(`${r}" cannot be null or undefined. `+`"${e.type.polymorphicDiscriminator[i]}" is the `+"polmorphicDiscriminator and is a required property.");if(null===t[e.type.polymorphicDiscriminator[i]]||void 0===t[e.type.polymorphicDiscriminator[i]])return e;let n=null;n=t[e.type.polymorphicDiscriminator[i]]===e.type.uberParent?t[e.type.polymorphicDiscriminator[i]]:e.type.uberParent+"."+t[e.type.polymorphicDiscriminator[i]],this.models.discriminators[n]&&(e=(new this.models.discriminators[n]).mapper())}return e}.call(this,e,t,r,n);throw new Error(`The polymorphicDiscriminator for "${r}" is neither a string nor an object.`)}return e}t.serializeObject=function(e){if(null==e)return null;if(o(e))return e=e.toString("base64");if(e instanceof Date)return e.toISOString();if(Array.isArray(e)){let r=[];for(let n=0;n<e.length;n++)r.push(t.serializeObject.call(this,e[n]));return r}if("object"==typeof e){let r={};for(let n in e)r[n]=t.serializeObject.call(this,e[n]);return r}return e},t.serialize=function(e,r,a){let c={},u=e.type.name;a||(a=e.serializedName),null!==u.match(/^Sequence$/gi)&&(c=[]),null!==e.defaultValue&&void 0!==e.defaultValue&&null==r&&(r=e.defaultValue),e.isConstant&&(r=e.defaultValue);const l=e.required,p=e.nullable;if(l&&p&&void 0===r)throw new Error(`${a} cannot be undefined.`);if(l&&!p&&null==r)throw new Error(`${a} cannot be null or undefined.`);if(!l&&!1===p&&null===r)throw new Error(`${a} cannot be null.`);return null==r?r:(function validateConstraints(e,t,r){!e.constraints||null===t&&void 0===t||Object.keys(e.constraints).forEach(n=>{if(null!==n.match(/^ExclusiveMaximum$/gi)){if(t>=e.constraints[n])throw new Error(`"${r}" with value "${t}" should satify the constraint "ExclusiveMaximum": ${e.constraints[n]}.`)}else if(null!==n.match(/^ExclusiveMinimum$/gi)){if(t<=e.constraints[n])throw new Error(`${r}" with value "${t}" should satify the constraint "ExclusiveMinimum": ${e.constraints[n]}.`)}else if(null!==n.match(/^InclusiveMaximum$/gi)){if(t>e.constraints[n])throw new Error(`${r}" with value "${t}" should satify the constraint "InclusiveMaximum": ${e.constraints[n]}.`)}else if(null!==n.match(/^InclusiveMinimum$/gi)){if(t<e.constraints[n])throw new Error(`${r}" with value "${t}" should satify the constraint "InclusiveMinimum": ${e.constraints[n]}.`)}else if(null!==n.match(/^MaxItems$/gi)){if(t.length>e.constraints[n])throw new Error(`${r}" with value "${t}" should satify the constraint "MaxItems": ${e.constraints[n]}.`)}else if(null!==n.match(/^MaxLength$/gi)){if(t.length>e.constraints[n])throw new Error(`${r}" with value "${t}" should satify the constraint "MaxLength": ${e.constraints[n]}.`)}else if(null!==n.match(/^MinItems$/gi)){if(t.length<e.constraints[n])throw new Error(`${r}" with value "${t}" should satify the constraint "MinItems": ${e.constraints[n]}.`)}else if(null!==n.match(/^MinLength$/gi)){if(t.length<e.constraints[n])throw new Error(`${r}" with value "${t}" should satify the constraint "MinLength": ${e.constraints[n]}.`)}else if(null!==n.match(/^MultipleOf$/gi)){if(t.length%e.constraints[n]!=0)throw new Error(`${r}" with value "${t}" should satify the constraint "MultipleOf": ${e.constraints[n]}.`)}else if(null!==n.match(/^Pattern$/gi)){if(null===t.match(e.constraints[n].split("/").join("/")))throw new Error(`${r}" with value "${t}" should satify the constraint "Pattern": ${e.constraints[n]}.`)}else if(null!==n.match(/^UniqueItems/gi)&&e.constraints[n]&&t.length!==t.filter(function(e,t,r){return r.indexOf(e)===t}).length)throw new Error(`${r}" with value "${t}" should satify the constraint "UniqueItems": ${e.constraints[n]}`)})}.call(this,e,r,a),null!==u.match(/^any$/gi)?c=r:null!==u.match(/^(Number|String|Boolean|Object|Stream|Uuid)$/gi)?c=function serializeBasicTypes(e,t,r){if(null!=r)if(null!==e.match(/^Number$/gi)){if("number"!=typeof r)throw new Error(`${t} with value ${r} must be of type number.`)}else if(null!==e.match(/^String$/gi)){if("string"!=typeof r.valueOf())throw new Error(`${t} with value "${r}" must be of type string.`)}else if(null!==e.match(/^Uuid$/gi)){if("string"!=typeof r.valueOf()||!s.isValidUuid(r))throw new Error(`${t} with value "${r}" must be of type string and a valid uuid.`)}else if(null!==e.match(/^Boolean$/gi)){if("boolean"!=typeof r)throw new Error(`${t} with value ${r} must be of type boolean.`)}else if(null!==e.match(/^Stream$/gi)&&i(r))throw new Error(`${t} must be of type stream.`);return r}.call(this,u,a,r):null!==u.match(/^Enum$/gi)?c=function serializeEnumType(e,t,r){if(!t)throw new Error(`Please provide a set of allowedValues to validate ${e} as an Enum Type.`);if(!t.some(function(e){return"string"==typeof e.valueOf()?e.toLowerCase()===r.toLowerCase():e===r}))throw new Error(`${r} is not a valid value for ${e}. The valid values are: ${JSON.stringify(t)}.`);return r}.call(this,a,e.type.allowedValues,r):null!==u.match(/^(Date|DateTime|TimeSpan|DateTimeRfc1123|UnixTime)$/gi)?c=function serializeDateTypes(e,t,r){if(null!=t)if(null!==e.match(/^Date$/gi)){if(!(t instanceof Date||"string"==typeof t.valueOf()&&!isNaN(Date.parse(t))))throw new Error(`${r} must be an instanceof Date or a string in ISO8601 format.`);t=t instanceof Date?t.toISOString().substring(0,10):new Date(t).toISOString().substring(0,10)}else if(null!==e.match(/^DateTime$/gi)){if(!(t instanceof Date||"string"==typeof t.valueOf()&&!isNaN(Date.parse(t))))throw new Error(`${r} must be an instanceof Date or a string in ISO8601 format.`);t=t instanceof Date?t.toISOString():new Date(t).toISOString()}else if(null!==e.match(/^DateTimeRfc1123$/gi)){if(!(t instanceof Date||"string"==typeof t.valueOf()&&!isNaN(Date.parse(t))))throw new Error(`${r} must be an instanceof Date or a string in RFC-1123 format.`);t=t instanceof Date?t.toUTCString():new Date(t).toUTCString()}else if(null!==e.match(/^UnixTime$/gi)){if(!(t instanceof Date||"string"==typeof t.valueOf()&&!isNaN(Date.parse(t))))throw new Error(`${r} must be an instanceof Date or a string in RFC-1123/ISO8601 format `+"for it to be serialized in UnixTime/Epoch format.");t=function dateToUnixTime(e){if(!e)return null;"string"==typeof e.valueOf()&&(e=new Date(e));return parseInt(e.getTime()/1e3)}(t)}else if(null!==e.match(/^TimeSpan$/gi)){if(!(n.isDuration(t)||t.constructor&&"Duration"===t.constructor.name&&t.isValid&&t.isValid()))throw new Error(`${r} must be a TimeSpan/Duration.`);t=t.toISOString()}return t}.call(this,u,r,a):null!==u.match(/^ByteArray$/gi)?c=function serializeBufferType(e,t){if(null!=t){if(!o(t))throw new Error(`${e} must be of type Buffer.`);t=t.toString("base64")}return t}.call(this,a,r):null!==u.match(/^Base64Url$/gi)?c=function serializeBase64UrlType(e,t){if(null!=t){if(!o(t))throw new Error(`${e} must be of type Buffer.`);t=function bufferToBase64Url(e){if(!e)return null;if(!o(e))throw new Error("Please provide an input of type Buffer for converting to Base64Url.");return function trimEnd(e,t){let r=e.length;for(;r-1>=0&&e[r-1]===t;)--r;return e.substr(0,r)}(e.toString("base64"),"=").replace(/\+/g,"-").replace(/\//g,"_")}(t)}return t}.call(this,a,r):null!==u.match(/^Sequence$/gi)?c=function serializeSequenceType(e,r,n){if(!Array.isArray(r))throw new Error(`${n} must be of type Array.`);if(!e.type.element||"object"!=typeof e.type.element)throw new Error('element" metadata for an Array must be defined in the '+`mapper and it must of type "object" in ${n}.`);let i=[];for(let o=0;o<r.length;o++)i[o]=t.serialize.call(this,e.type.element,r[o],`${n}[${o}]`);return i}.call(this,e,r,a):null!==u.match(/^Dictionary$/gi)?c=function serializeDictionaryType(e,r,n){if("object"!=typeof r)throw new Error(`${n} must be of type object.`);if(!e.type.value||"object"!=typeof e.type.value)throw new Error('"value" metadata for a Dictionary must be defined in the '+`mapper and it must of type "object" in ${n}.`);let i={};for(let o in r)r.hasOwnProperty(o)&&(i[o]=t.serialize.call(this,e.type.value,r[o],`${n}[${o}]`));return i}.call(this,e,r,a):null!==u.match(/^Composite$/gi)&&(c=function serializeCompositeType(e,r,n){e.type.polymorphicDiscriminator&&(e=getPolymorphicMapper.call(this,e,r,n,"serialize"));let i={},o={};"Sequence"===e.type.name&&(i=[]);if(null!=r){let s=e.type.modelProperties;if(!s){if(!e.type.className)throw new Error(`Class name for model "${n}" is not provided in the mapper "${JSON.stringify(e,null,2)}".`);if(!(o=(new this.models[e.type.className]).mapper()))throw new Error(`mapper() cannot be null or undefined for model "${e.type.className}".`);if(!(s=o.type.modelProperties))throw new Error("modelProperties cannot be null or undefined in the "+`mapper "${JSON.stringify(o)}" of type "${e.type.className}" for object "${n}".`)}for(let o in s)if(s.hasOwnProperty(o)){let a=splitSerializeName(s[o].serializedName),c=a.pop(),u=i;if(a.forEach(e=>{let t=u[e];null==t&&null!==r[o]&&void 0!==r[o]&&(u[e]={}),u=u[e]}),null!==r[o]&&void 0!==r[o]||s[o].isPolymorphicDiscriminator&&(r[o]=e.serializedName),s[o].readOnly)continue;if(null!=u){let e=n;""!==s[o].serializedName&&(e=n+"."+s[o].serializedName);let i=s[o],a=t.serialize.call(this,i,r[o],e);u[c]=a}}let a=e.type.additionalProperties;if(a){let e={},o=Object.keys(r).filter(t=>(s[t]||(e[t]=r[t]),t));if(o&&o.length){let r=t.serializeObject(e);r=t.serialize.call(this,a,r,n);for(let e in r){if(i[e]){let t=`AdditionalProperty "${e}" is already present in the serialized payload ${JSON.stringify(i)}, which creates a conflict.`;throw new Error(t)}i[e]=r[e]}}}return i}return r}.call(this,e,r,a)),c)},t.deserialize=function(e,r,i){if(null==r){if(!e||!e.isConstant)return r;r=e.defaultValue}let o={},a=e.type.name;return i||(i=e.serializedName),null!==a.match(/^Sequence$/gi)&&(o=[]),null!==a.match(/^(Number|String|Boolean|Enum|Object|Stream|Uuid|any)$/gi)?o=r:null!==a.match(/^(Date|DateTime|DateTimeRfc1123)$/gi)?o=new Date(r):null!==a.match(/^TimeSpan$/gi)?o=n.duration(r):null!==a.match(/^UnixTime$/gi)?o=function unixTimeToDate(e){if(!e)return null;return new Date(1e3*e)}(r):null!==a.match(/^ByteArray$/gi)?o=Buffer.from(r,"base64"):null!==a.match(/^Base64Url$/gi)?o=function base64UrlToBuffer(e){if(!e)return null;if(e&&"string"!=typeof e.valueOf())throw new Error("Please provide an input of type string for converting to Buffer");return e=e.replace(/\-/g,"+").replace(/\_/g,"/"),Buffer.from(e,"base64")}(r):null!==a.match(/^Sequence$/gi)?o=function deserializeSequenceType(e,r,n){if(!e.type.element||"object"!=typeof e.type.element)throw new Error('element" metadata for an Array must be defined in the '+`mapper and it must of type "object" in ${n}`);if(r){let i=[];for(let o=0;o<r.length;o++)i[o]=t.deserialize.call(this,e.type.element,r[o],`${n}[${o}]`);return i}return r}.call(this,e,r,i):null!==a.match(/^Dictionary$/gi)?o=function deserializeDictionaryType(e,r,n){if(!e.type.value||"object"!=typeof e.type.value)throw new Error('"value" metadata for a Dictionary must be defined in the '+`mapper and it must of type "object" in ${n}`);if(r){let i={};for(let o in r)r.hasOwnProperty(o)&&(i[o]=t.deserialize.call(this,e.type.value,r[o],`${n}[${o}]`));return i}return r}.call(this,e,r,i):null!==a.match(/^Composite$/gi)&&(o=function deserializeCompositeType(e,r,n){e.type.polymorphicDiscriminator&&(e=getPolymorphicMapper.call(this,e,r,n,"deserialize"));let i={},o={},a=e.type.name,c={};"Sequence"===a&&(i=[]);if(null!=r){let a=e.type.modelProperties;if(!a){if(!e.type.className)throw new Error(`Class name for model "${n}" is not provided in the mapper "${JSON.stringify(e)}"`);if(!(o=(new this.models[e.type.className]).mapper()))throw new Error(`mapper() cannot be null or undefined for model "${e.type.className}"`);if(!(a=o.type.modelProperties))throw new Error("modelProperties cannot be null or undefined in the "+`mapper "${JSON.stringify(o)}" of type "${e.type.className}" for responseBody "${n}".`)}for(let o in a)if(a.hasOwnProperty(o)){const s=splitSerializeName(a[o].serializedName);c[a[o].serializedName]=s;let u=t.getPropertyValue(r,s),l=a[o];!u&&l.isPolymorphicDiscriminator&&(u=e.serializedName);let p,d=n;""!==a[o].serializedName&&(d=n+"."+a[o].serializedName),Array.isArray(r[o])&&""===a[o].serializedName?(u=r[o],i=t.deserialize.call(this,l,u,d)):(null!=u||l&&l.isConstant)&&(p=t.deserialize.call(this,l,u,d),i[o]=p)}let u=e.type.additionalProperties;if(u){let e={},o=s.objectValues(c),l=Object.keys(r).filter(t=>{if(!a[t]&&!c[t]&&!function isPropertyPresent(e,t){return e.some(e=>e&&e[0]===t)}(o,t))return e[t]=r[t],t});if(l&&l.length){let r=t.deserialize.call(this,u,e,n);for(let e in r){if(i[e]){let t=`AdditionalProperty "${e}" is already present in the deserialized instance ${JSON.stringify(i)}, which creates a conflict.`;throw new Error(t)}i[e]=r[e]}}}return i}return r}.call(this,e,r,i)),o},t.getPropertyValue=function(e,t){let r;if(null!=e&&null!=t)for(const n of t)if(n){if(void 0===(r=e[n])){const t=n.toLowerCase();for(const n of Object.keys(e))if(t===n.toLowerCase()){r=e[n];break}}if(null==r)break;e=r}else r=e;return r},t=e.exports},function(e,t,r){"use strict";const n=r(411),i=r(412),o=r(226),s=r(71);function splitSerializeName(e){let t=[],r="";return e.split(".").forEach(e=>{"\\"===e.charAt(e.length-1)?r+=e.substr(0,e.length-1)+".":(r+=e,t.push(r),r="")}),t}function getPolymorphicMapper(e,t,r,n){if(e.type.polymorphicDiscriminator){if("string"==typeof e.type.polymorphicDiscriminator.valueOf())return function _getPolymorphicMapperStringVersion(e,t,r){if(null!==e.type.polymorphicDiscriminator&&void 0!==e.type.polymorphicDiscriminator){if(null==t)throw new Error(`${r}" cannot be null or undefined. "${e.type.polymorphicDiscriminator}" is the `+"polmorphicDiscriminator and is a required property.");if(null===t[e.type.polymorphicDiscriminator]||void 0===t[e.type.polymorphicDiscriminator])return e;let n=null;n=t[e.type.polymorphicDiscriminator]===e.type.uberParent?t[e.type.polymorphicDiscriminator]:e.type.uberParent+"."+t[e.type.polymorphicDiscriminator],this.models.discriminators[n]&&(e=(new this.models.discriminators[n]).mapper())}return e}.call(this,e,t,r);if(e.type.polymorphicDiscriminator instanceof Object)return function _getPolymorphicMapperObjectVersion(e,t,r,n){let i="";if("serialize"===n)i="clientName";else{if("deserialize"!==n)throw new Error(`The given mode "${n}" for getting the polymorphic mapper for "${r}" is inavlid.`);i="serializedName"}if(e.type.polymorphicDiscriminator&&null!==e.type.polymorphicDiscriminator[i]&&void 0!==e.type.polymorphicDiscriminator[i]){if(null==t)throw new Error(`${r}" cannot be null or undefined. `+`"${e.type.polymorphicDiscriminator[i]}" is the `+"polmorphicDiscriminator and is a required property.");if(null===t[e.type.polymorphicDiscriminator[i]]||void 0===t[e.type.polymorphicDiscriminator[i]])return e;let n=null;n=t[e.type.polymorphicDiscriminator[i]]===e.type.uberParent?t[e.type.polymorphicDiscriminator[i]]:e.type.uberParent+"."+t[e.type.polymorphicDiscriminator[i]],this.models.discriminators[n]&&(e=(new this.models.discriminators[n]).mapper())}return e}.call(this,e,t,r,n);throw new Error(`The polymorphicDiscriminator for "${r}" is neither a string nor an object.`)}return e}t.serializeObject=function(e){if(null==e)return null;if(o(e))return e=e.toString("base64");if(e instanceof Date)return e.toISOString();if(Array.isArray(e)){let r=[];for(let n=0;n<e.length;n++)r.push(t.serializeObject.call(this,e[n]));return r}if("object"==typeof e){let r={};for(let n in e)r[n]=t.serializeObject.call(this,e[n]);return r}return e},t.serialize=function(e,r,a){let c={},u=e.type.name;a||(a=e.serializedName),null!==u.match(/^Sequence$/gi)&&(c=[]),null!==e.defaultValue&&void 0!==e.defaultValue&&null==r&&(r=e.defaultValue),e.isConstant&&(r=e.defaultValue);const l=e.required,p=e.nullable;if(l&&p&&void 0===r)throw new Error(`${a} cannot be undefined.`);if(l&&!p&&null==r)throw new Error(`${a} cannot be null or undefined.`);if(!l&&!1===p&&null===r)throw new Error(`${a} cannot be null.`);return null==r?r:(function validateConstraints(e,t,r){!e.constraints||null===t&&void 0===t||Object.keys(e.constraints).forEach(n=>{if(null!==n.match(/^ExclusiveMaximum$/gi)){if(t>=e.constraints[n])throw new Error(`"${r}" with value "${t}" should satify the constraint "ExclusiveMaximum": ${e.constraints[n]}.`)}else if(null!==n.match(/^ExclusiveMinimum$/gi)){if(t<=e.constraints[n])throw new Error(`${r}" with value "${t}" should satify the constraint "ExclusiveMinimum": ${e.constraints[n]}.`)}else if(null!==n.match(/^InclusiveMaximum$/gi)){if(t>e.constraints[n])throw new Error(`${r}" with value "${t}" should satify the constraint "InclusiveMaximum": ${e.constraints[n]}.`)}else if(null!==n.match(/^InclusiveMinimum$/gi)){if(t<e.constraints[n])throw new Error(`${r}" with value "${t}" should satify the constraint "InclusiveMinimum": ${e.constraints[n]}.`)}else if(null!==n.match(/^MaxItems$/gi)){if(t.length>e.constraints[n])throw new Error(`${r}" with value "${t}" should satify the constraint "MaxItems": ${e.constraints[n]}.`)}else if(null!==n.match(/^MaxLength$/gi)){if(t.length>e.constraints[n])throw new Error(`${r}" with value "${t}" should satify the constraint "MaxLength": ${e.constraints[n]}.`)}else if(null!==n.match(/^MinItems$/gi)){if(t.length<e.constraints[n])throw new Error(`${r}" with value "${t}" should satify the constraint "MinItems": ${e.constraints[n]}.`)}else if(null!==n.match(/^MinLength$/gi)){if(t.length<e.constraints[n])throw new Error(`${r}" with value "${t}" should satify the constraint "MinLength": ${e.constraints[n]}.`)}else if(null!==n.match(/^MultipleOf$/gi)){if(t.length%e.constraints[n]!=0)throw new Error(`${r}" with value "${t}" should satify the constraint "MultipleOf": ${e.constraints[n]}.`)}else if(null!==n.match(/^Pattern$/gi)){if(null===t.match(e.constraints[n].split("/").join("/")))throw new Error(`${r}" with value "${t}" should satify the constraint "Pattern": ${e.constraints[n]}.`)}else if(null!==n.match(/^UniqueItems/gi)&&e.constraints[n]&&t.length!==t.filter(function(e,t,r){return r.indexOf(e)===t}).length)throw new Error(`${r}" with value "${t}" should satify the constraint "UniqueItems": ${e.constraints[n]}`)})}.call(this,e,r,a),null!==u.match(/^any$/gi)?c=r:null!==u.match(/^(Number|String|Boolean|Object|Stream|Uuid)$/gi)?c=function serializeBasicTypes(e,t,r){if(null!=r)if(null!==e.match(/^Number$/gi)){if("number"!=typeof r)throw new Error(`${t} with value ${r} must be of type number.`)}else if(null!==e.match(/^String$/gi)){if("string"!=typeof r.valueOf())throw new Error(`${t} with value "${r}" must be of type string.`)}else if(null!==e.match(/^Uuid$/gi)){if("string"!=typeof r.valueOf()||!s.isValidUuid(r))throw new Error(`${t} with value "${r}" must be of type string and a valid uuid.`)}else if(null!==e.match(/^Boolean$/gi)){if("boolean"!=typeof r)throw new Error(`${t} with value ${r} must be of type boolean.`)}else if(null!==e.match(/^Stream$/gi)&&i(r))throw new Error(`${t} must be of type stream.`);return r}.call(this,u,a,r):null!==u.match(/^Enum$/gi)?c=function serializeEnumType(e,t,r){if(!t)throw new Error(`Please provide a set of allowedValues to validate ${e} as an Enum Type.`);if(!t.some(function(e){return"string"==typeof e.valueOf()?e.toLowerCase()===r.toLowerCase():e===r}))throw new Error(`${r} is not a valid value for ${e}. The valid values are: ${JSON.stringify(t)}.`);return r}.call(this,a,e.type.allowedValues,r):null!==u.match(/^(Date|DateTime|TimeSpan|DateTimeRfc1123|UnixTime)$/gi)?c=function serializeDateTypes(e,t,r){if(null!=t)if(null!==e.match(/^Date$/gi)){if(!(t instanceof Date||"string"==typeof t.valueOf()&&!isNaN(Date.parse(t))))throw new Error(`${r} must be an instanceof Date or a string in ISO8601 format.`);t=t instanceof Date?t.toISOString().substring(0,10):new Date(t).toISOString().substring(0,10)}else if(null!==e.match(/^DateTime$/gi)){if(!(t instanceof Date||"string"==typeof t.valueOf()&&!isNaN(Date.parse(t))))throw new Error(`${r} must be an instanceof Date or a string in ISO8601 format.`);t=t instanceof Date?t.toISOString():new Date(t).toISOString()}else if(null!==e.match(/^DateTimeRfc1123$/gi)){if(!(t instanceof Date||"string"==typeof t.valueOf()&&!isNaN(Date.parse(t))))throw new Error(`${r} must be an instanceof Date or a string in RFC-1123 format.`);t=t instanceof Date?t.toUTCString():new Date(t).toUTCString()}else if(null!==e.match(/^UnixTime$/gi)){if(!(t instanceof Date||"string"==typeof t.valueOf()&&!isNaN(Date.parse(t))))throw new Error(`${r} must be an instanceof Date or a string in RFC-1123/ISO8601 format `+"for it to be serialized in UnixTime/Epoch format.");t=function dateToUnixTime(e){if(!e)return null;"string"==typeof e.valueOf()&&(e=new Date(e));return parseInt(e.getTime()/1e3)}(t)}else if(null!==e.match(/^TimeSpan$/gi)){if(!(n.isDuration(t)||t.constructor&&"Duration"===t.constructor.name&&t.isValid&&t.isValid()))throw new Error(`${r} must be a TimeSpan/Duration.`);t=t.toISOString()}return t}.call(this,u,r,a):null!==u.match(/^ByteArray$/gi)?c=function serializeBufferType(e,t){if(null!=t){if(!o(t))throw new Error(`${e} must be of type Buffer.`);t=t.toString("base64")}return t}.call(this,a,r):null!==u.match(/^Base64Url$/gi)?c=function serializeBase64UrlType(e,t){if(null!=t){if(!o(t))throw new Error(`${e} must be of type Buffer.`);t=function bufferToBase64Url(e){if(!e)return null;if(!o(e))throw new Error("Please provide an input of type Buffer for converting to Base64Url.");return function trimEnd(e,t){let r=e.length;for(;r-1>=0&&e[r-1]===t;)--r;return e.substr(0,r)}(e.toString("base64"),"=").replace(/\+/g,"-").replace(/\//g,"_")}(t)}return t}.call(this,a,r):null!==u.match(/^Sequence$/gi)?c=function serializeSequenceType(e,r,n){if(!Array.isArray(r))throw new Error(`${n} must be of type Array.`);if(!e.type.element||"object"!=typeof e.type.element)throw new Error('element" metadata for an Array must be defined in the '+`mapper and it must of type "object" in ${n}.`);let i=[];for(let o=0;o<r.length;o++)i[o]=t.serialize.call(this,e.type.element,r[o],`${n}[${o}]`);return i}.call(this,e,r,a):null!==u.match(/^Dictionary$/gi)?c=function serializeDictionaryType(e,r,n){if("object"!=typeof r)throw new Error(`${n} must be of type object.`);if(!e.type.value||"object"!=typeof e.type.value)throw new Error('"value" metadata for a Dictionary must be defined in the '+`mapper and it must of type "object" in ${n}.`);let i={};for(let o in r)r.hasOwnProperty(o)&&(i[o]=t.serialize.call(this,e.type.value,r[o],`${n}[${o}]`));return i}.call(this,e,r,a):null!==u.match(/^Composite$/gi)&&(c=function serializeCompositeType(e,r,n){e.type.polymorphicDiscriminator&&(e=getPolymorphicMapper.call(this,e,r,n,"serialize"));let i={},o={};"Sequence"===e.type.name&&(i=[]);if(null!=r){let s=e.type.modelProperties;if(!s){if(!e.type.className)throw new Error(`Class name for model "${n}" is not provided in the mapper "${JSON.stringify(e,null,2)}".`);if(!(o=(new this.models[e.type.className]).mapper()))throw new Error(`mapper() cannot be null or undefined for model "${e.type.className}".`);if(!(s=o.type.modelProperties))throw new Error("modelProperties cannot be null or undefined in the "+`mapper "${JSON.stringify(o)}" of type "${e.type.className}" for object "${n}".`)}for(let o in s)if(s.hasOwnProperty(o)){let a=splitSerializeName(s[o].serializedName),c=a.pop(),u=i;if(a.forEach(e=>{let t=u[e];null==t&&null!==r[o]&&void 0!==r[o]&&(u[e]={}),u=u[e]}),null!==r[o]&&void 0!==r[o]||s[o].isPolymorphicDiscriminator&&(r[o]=e.serializedName),s[o].readOnly)continue;if(null!=u){let e=n;""!==s[o].serializedName&&(e=n+"."+s[o].serializedName);let i=s[o],a=t.serialize.call(this,i,r[o],e);u[c]=a}}let a=e.type.additionalProperties;if(a){let e={},o=Object.keys(r).filter(t=>(s[t]||(e[t]=r[t]),t));if(o&&o.length){let r=t.serializeObject(e);r=t.serialize.call(this,a,r,n);for(let e in r){if(i[e]){let t=`AdditionalProperty "${e}" is already present in the serialized payload ${JSON.stringify(i)}, which creates a conflict.`;throw new Error(t)}i[e]=r[e]}}}return i}return r}.call(this,e,r,a)),c)},t.deserialize=function(e,r,i){if(null==r){if(!e||!e.isConstant)return r;r=e.defaultValue}let o={},a=e.type.name;return i||(i=e.serializedName),null!==a.match(/^Sequence$/gi)&&(o=[]),null!==a.match(/^(Number|String|Boolean|Enum|Object|Stream|Uuid|any)$/gi)?o=r:null!==a.match(/^(Date|DateTime|DateTimeRfc1123)$/gi)?o=new Date(r):null!==a.match(/^TimeSpan$/gi)?o=n.duration(r):null!==a.match(/^UnixTime$/gi)?o=function unixTimeToDate(e){if(!e)return null;return new Date(1e3*e)}(r):null!==a.match(/^ByteArray$/gi)?o=Buffer.from(r,"base64"):null!==a.match(/^Base64Url$/gi)?o=function base64UrlToBuffer(e){if(!e)return null;if(e&&"string"!=typeof e.valueOf())throw new Error("Please provide an input of type string for converting to Buffer");return e=e.replace(/\-/g,"+").replace(/\_/g,"/"),Buffer.from(e,"base64")}(r):null!==a.match(/^Sequence$/gi)?o=function deserializeSequenceType(e,r,n){if(!e.type.element||"object"!=typeof e.type.element)throw new Error('element" metadata for an Array must be defined in the '+`mapper and it must of type "object" in ${n}`);if(r){let i=[];for(let o=0;o<r.length;o++)i[o]=t.deserialize.call(this,e.type.element,r[o],`${n}[${o}]`);return i}return r}.call(this,e,r,i):null!==a.match(/^Dictionary$/gi)?o=function deserializeDictionaryType(e,r,n){if(!e.type.value||"object"!=typeof e.type.value)throw new Error('"value" metadata for a Dictionary must be defined in the '+`mapper and it must of type "object" in ${n}`);if(r){let i={};for(let o in r)r.hasOwnProperty(o)&&(i[o]=t.deserialize.call(this,e.type.value,r[o],`${n}[${o}]`));return i}return r}.call(this,e,r,i):null!==a.match(/^Composite$/gi)&&(o=function deserializeCompositeType(e,r,n){e.type.polymorphicDiscriminator&&(e=getPolymorphicMapper.call(this,e,r,n,"deserialize"));let i={},o={},a=e.type.name,c={};"Sequence"===a&&(i=[]);if(null!=r){let a=e.type.modelProperties;if(!a){if(!e.type.className)throw new Error(`Class name for model "${n}" is not provided in the mapper "${JSON.stringify(e)}"`);if(!(o=(new this.models[e.type.className]).mapper()))throw new Error(`mapper() cannot be null or undefined for model "${e.type.className}"`);if(!(a=o.type.modelProperties))throw new Error("modelProperties cannot be null or undefined in the "+`mapper "${JSON.stringify(o)}" of type "${e.type.className}" for responseBody "${n}".`)}for(let o in a)if(a.hasOwnProperty(o)){const s=splitSerializeName(a[o].serializedName);c[a[o].serializedName]=s;let u=t.getPropertyValue(r,s),l=a[o];!u&&l.isPolymorphicDiscriminator&&(u=e.serializedName);let p,d=n;""!==a[o].serializedName&&(d=n+"."+a[o].serializedName),Array.isArray(r[o])&&""===a[o].serializedName?(u=r[o],i=t.deserialize.call(this,l,u,d)):(null!=u||l&&l.isConstant)&&(p=t.deserialize.call(this,l,u,d),i[o]=p)}let u=e.type.additionalProperties;if(u){let e={},o=s.objectValues(c),l=Object.keys(r).filter(t=>{if(!a[t]&&!c[t]&&!function isPropertyPresent(e,t){return e.some(e=>e&&e[0]===t)}(o,t))return e[t]=r[t],t});if(l&&l.length){let r=t.deserialize.call(this,u,e,n);for(let e in r){if(i[e]){let t=`AdditionalProperty "${e}" is already present in the deserialized instance ${JSON.stringify(i)}, which creates a conflict.`;throw new Error(t)}i[e]=r[e]}}}return i}return r}.call(this,e,r,i)),o},t.getPropertyValue=function(e,t){let r;if(null!=e&&null!=t)for(const n of t)if(n){if(void 0===(r=e[n])){const t=n.toLowerCase();for(const n of Object.keys(e))if(t===n.toLowerCase()){r=e[n];break}}if(null==r)break;e=r}else r=e;return r},t=e.exports},function(e,t){e.exports=function extend(){for(var e={},t=0;t<arguments.length;t++){var n=arguments[t];for(var i in n)r.call(n,i)&&(e[i]=n[i])}return e};var r=Object.prototype.hasOwnProperty},function(e,t,r){"use strict";var n=r(131),i=Object.keys||function(e){var t=[];for(var r in e)t.push(r);return t};e.exports=Duplex;var o=r(90);o.inherits=r(38);var s=r(446),a=r(449);o.inherits(Duplex,s);for(var c=i(a.prototype),u=0;u<c.length;u++){var l=c[u];Duplex.prototype[l]||(Duplex.prototype[l]=a.prototype[l])}function Duplex(e){if(!(this instanceof Duplex))return new Duplex(e);s.call(this,e),a.call(this,e),e&&!1===e.readable&&(this.readable=!1),e&&!1===e.writable&&(this.writable=!1),this.allowHalfOpen=!0,e&&!1===e.allowHalfOpen&&(this.allowHalfOpen=!1),this.once("end",onend)}function onend(){this.allowHalfOpen||this._writableState.ended||n.nextTick(onEndNT,this)}function onEndNT(e){e.end()}Object.defineProperty(Duplex.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),Object.defineProperty(Duplex.prototype,"destroyed",{get:function(){return void 0!==this._readableState&&void 0!==this._writableState&&(this._readableState.destroyed&&this._writableState.destroyed)},set:function(e){void 0!==this._readableState&&void 0!==this._writableState&&(this._readableState.destroyed=e,this._writableState.destroyed=e)}}),Duplex.prototype._destroy=function(e,t){this.push(null),this.end(),n.nextTick(t,e)}},function(e,t,r){"use strict";var n=r(453)();e.exports=function(e){return e!==n&&null!==e}},function(e,t,r){"use strict";var n=r(9);t.BaseResource=n.BaseResource,t.CloudError=n.CloudError,t.CertificateVerificationDescription=r(1150),t.CertificateProperties=r(1151),t.CertificateDescription=r(1152),t.CertificateListDescription=r(1153),t.CertificateBodyDescription=r(1154),t.CertificatePropertiesWithNonce=r(1155),t.CertificateWithNonceDescription=r(1156),t.SharedAccessSignatureAuthorizationRule=r(1157),t.IpFilterRule=r(1158),t.EventHubProperties=r(1159),t.RoutingServiceBusQueueEndpointProperties=r(1160),t.RoutingServiceBusTopicEndpointProperties=r(1161),t.RoutingEventHubProperties=r(1162),t.RoutingStorageContainerProperties=r(1163),t.RoutingEndpoints=r(1164),t.RouteProperties=r(1165),t.FallbackRouteProperties=r(1166),t.RoutingProperties=r(1167),t.StorageEndpointProperties=r(1168),t.MessagingEndpointProperties=r(1169),t.FeedbackProperties=r(1170),t.CloudToDeviceProperties=r(1171),t.OperationsMonitoringProperties=r(1172),t.IotHubProperties=r(1173),t.IotHubSkuInfo=r(1174),t.Resource=r(1175),t.IotHubDescription=r(1176),t.OperationDisplay=r(1177),t.Operation=r(1178),t.ErrorDetails=r(1179),t.IotHubQuotaMetricInfo=r(1180),t.EndpointHealthData=r(1181),t.RegistryStatistics=r(1182),t.JobResponse=r(1183),t.IotHubCapacity=r(1184),t.IotHubSkuDescription=r(1185),t.TagsResource=r(1186),t.EventHubConsumerGroupInfo=r(1187),t.OperationInputs=r(1188),t.IotHubNameAvailabilityInfo=r(1189),t.Name=r(1190),t.UserSubscriptionQuota=r(1191),t.UserSubscriptionQuotaListResult=r(1192),t.RoutingMessage=r(1193),t.TestAllRoutesInput=r(1194),t.MatchedRoute=r(1195),t.TestAllRoutesResult=r(1196),t.TestRouteInput=r(1197),t.RouteErrorPosition=r(1198),t.RouteErrorRange=r(1199),t.RouteCompilationError=r(1200),t.TestRouteResultDetails=r(1201),t.TestRouteResult=r(1202),t.ExportDevicesRequest=r(1203),t.ImportDevicesRequest=r(1204),t.OperationListResult=r(1205),t.IotHubDescriptionListResult=r(1206),t.IotHubSkuDescriptionListResult=r(1207),t.EventHubConsumerGroupsListResult=r(1208),t.JobResponseListResult=r(1209),t.IotHubQuotaMetricInfoListResult=r(1210),t.EndpointHealthDataListResult=r(1211),t.SharedAccessSignatureAuthorizationRuleListResult=r(1212)},function(e,t,r){"use strict";function getHeaderKey(e){return e.toLowerCase()}r.r(t);var n=function(){function HttpHeaders(e){if(this._headersMap={},e)for(var t in e)this.set(t,e[t])}return HttpHeaders.prototype.set=function(e,t){this._headersMap[getHeaderKey(e)]={name:e,value:t.toString()}},HttpHeaders.prototype.get=function(e){var t=this._headersMap[getHeaderKey(e)];return t?t.value:void 0},HttpHeaders.prototype.contains=function(e){return!!this._headersMap[getHeaderKey(e)]},HttpHeaders.prototype.remove=function(e){var t=this.contains(e);return delete this._headersMap[getHeaderKey(e)],t},HttpHeaders.prototype.rawHeaders=function(){var e={};for(var t in this._headersMap){var r=this._headersMap[t];e[r.name.toLowerCase()]=r.value}return e},HttpHeaders.prototype.headersArray=function(){var e=[];for(var t in this._headersMap)e.push(this._headersMap[t]);return e},HttpHeaders.prototype.headerNames=function(){for(var e=[],t=this.headersArray(),r=0;r<t.length;++r)e.push(t[r].name);return e},HttpHeaders.prototype.headerValues=function(){for(var e=[],t=this.headersArray(),r=0;r<t.length;++r)e.push(t[r].value);return e},HttpHeaders.prototype.toJson=function(){return this.rawHeaders()},HttpHeaders.prototype.toString=function(){return JSON.stringify(this.toJson())},HttpHeaders.prototype.clone=function(){return new HttpHeaders(this.rawHeaders())},HttpHeaders}();function encodeByteArray(e){return(e instanceof Buffer?e:Buffer.from(e.buffer)).toString("base64")}function decodeString(e){return Buffer.from(e,"base64")}var i=r(31),o=r.n(i),s={msRestVersion:"1.8.1",HTTP:"http:",HTTPS:"https:",HTTP_PROXY:"HTTP_PROXY",HTTPS_PROXY:"HTTPS_PROXY",HttpConstants:{HttpVerbs:{PUT:"PUT",GET:"GET",DELETE:"DELETE",POST:"POST",MERGE:"MERGE",HEAD:"HEAD",PATCH:"PATCH"},StatusCodes:{TooManyRequests:429}},HeaderConstants:{AUTHORIZATION:"authorization",AUTHORIZATION_SCHEME:"Bearer",RETRY_AFTER:"Retry-After",USER_AGENT:"User-Agent"}},a="undefined"==typeof navigator&&"undefined"!=typeof process;function encodeUri(e){return encodeURIComponent(e).replace(/!/g,"%21").replace(/"/g,"%27").replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/\*/g,"%2A")}function stripResponse(e){var t={};return t.body=e.bodyAsText,t.headers=e.headers,t.status=e.status,t}function stripRequest(e){var t=e.clone();return t.headers&&t.headers.remove("authorization"),t}function isValidUuid(e){return new RegExp("^[0-9a-fA-F]{8}-[0-9a-fA-F]{4}-[0-9a-fA-F]{4}-[0-9a-fA-F]{4}-[0-9a-fA-F]{12}$","ig").test(e)}function generateUuid(){return o()()}function executePromisesSequentially(e,t){var r=Promise.resolve(t);return e.forEach(function(e){r=r.then(e)}),r}function utils_delay(e,t){return new Promise(function(r){return setTimeout(function(){return r(t)},e)})}function promiseToCallback(e){if("function"!=typeof e.then)throw new Error("The provided input is not a Promise.");return function(t){e.then(function(e){t(void 0,e)},function(e){t(e)})}}function promiseToServiceCallback(e){if("function"!=typeof e.then)throw new Error("The provided input is not a Promise.");return function(t){e.then(function(e){process.nextTick(t,void 0,e.parsedBody,e.request,e)},function(e){process.nextTick(t,e)})}}function applyMixins(e,t){t.forEach(function(t){Object.getOwnPropertyNames(t.prototype).forEach(function(r){e.prototype[r]=t.prototype[r]})})}var c=/^(-|\+)?P(?:([-+]?[0-9,.]*)Y)?(?:([-+]?[0-9,.]*)M)?(?:([-+]?[0-9,.]*)W)?(?:([-+]?[0-9,.]*)D)?(?:T(?:([-+]?[0-9,.]*)H)?(?:([-+]?[0-9,.]*)M)?(?:([-+]?[0-9,.]*)S)?)?$/;function isDuration(e){return c.test(e)}function replaceAll(e,t,r){return e&&t?e.split(t).join(r||""):e}var u=function(){function Serializer(e,t){void 0===e&&(e={}),this.modelMappers=e,this.isXML=t}return Serializer.prototype.validateConstraints=function(e,t,r){var n=function(e,n){throw new Error('"'+r+'" with value "'+t+'" should satisfy the constraint "'+e+'": '+n+".")};if(e.constraints&&null!=t){var i=e.constraints,o=i.ExclusiveMaximum,s=i.ExclusiveMinimum,a=i.InclusiveMaximum,c=i.InclusiveMinimum,u=i.MaxItems,l=i.MaxLength,p=i.MinItems,d=i.MinLength,h=i.MultipleOf,f=i.Pattern,m=i.UniqueItems;null!=o&&t>=o&&n("ExclusiveMaximum",o),null!=s&&t<=s&&n("ExclusiveMinimum",s),null!=a&&t>a&&n("InclusiveMaximum",a),null!=c&&t<c&&n("InclusiveMinimum",c),null!=u&&t.length>u&&n("MaxItems",u),null!=l&&t.length>l&&n("MaxLength",l),null!=p&&t.length<p&&n("MinItems",p),null!=d&&t.length<d&&n("MinLength",d),null!=h&&t%h!=0&&n("MultipleOf",h),f&&null===t.match(f)&&n("Pattern",f),m&&t.some(function(e,t,r){return r.indexOf(e)!==t})&&n("UniqueItems",m)}},Serializer.prototype.serialize=function(e,t,r){var n={},i=e.type.name;r||(r=e.serializedName),null!==i.match(/^Sequence$/gi)&&(n=[]),null!=t||null==e.defaultValue&&!e.isConstant||(t=e.defaultValue);var o=e.required,s=e.nullable;if(o&&s&&void 0===t)throw new Error(r+" cannot be undefined.");if(o&&!s&&null==t)throw new Error(r+" cannot be null or undefined.");if(!o&&!1===s&&null===t)throw new Error(r+" cannot be null.");if(null==t)n=t;else if(this.validateConstraints(e,t,r),null!==i.match(/^any$/gi))n=t;else if(null!==i.match(/^(Number|String|Boolean|Object|Stream|Uuid)$/gi))n=function serializeBasicTypes(e,t,r){if(null!=r)if(null!==e.match(/^Number$/gi)){if("number"!=typeof r)throw new Error(t+" with value "+r+" must be of type number.")}else if(null!==e.match(/^String$/gi)){if("string"!=typeof r.valueOf())throw new Error(t+' with value "'+r+'" must be of type string.')}else if(null!==e.match(/^Uuid$/gi)){if("string"!=typeof r.valueOf()||!isValidUuid(r))throw new Error(t+' with value "'+r+'" must be of type string and a valid uuid.')}else if(null!==e.match(/^Boolean$/gi)){if("boolean"!=typeof r)throw new Error(t+" with value "+r+" must be of type boolean.")}else if(null!==e.match(/^Stream$/gi)){var n=typeof r;if(!("string"===n||"function"===n||r instanceof ArrayBuffer||ArrayBuffer.isView(r)||"function"==typeof Blob&&r instanceof Blob))throw new Error(t+" must be a string, Blob, ArrayBuffer, ArrayBufferView, or a function returning NodeJS.ReadableStream.")}return r}(i,r,t);else if(null!==i.match(/^Enum$/gi)){n=function serializeEnumType(e,t,r){if(!t)throw new Error("Please provide a set of allowedValues to validate "+e+" as an Enum Type.");if(!t.some(function(e){return"string"==typeof e.valueOf()?e.toLowerCase()===r.toLowerCase():e===r}))throw new Error(r+" is not a valid value for "+e+". The valid values are: "+JSON.stringify(t)+".");return r}(r,e.type.allowedValues,t)}else null!==i.match(/^(Date|DateTime|TimeSpan|DateTimeRfc1123|UnixTime)$/gi)?n=function serializeDateTypes(e,t,r){if(null!=t)if(null!==e.match(/^Date$/gi)){if(!(t instanceof Date||"string"==typeof t.valueOf()&&!isNaN(Date.parse(t))))throw new Error(r+" must be an instanceof Date or a string in ISO8601 format.");t=t instanceof Date?t.toISOString().substring(0,10):new Date(t).toISOString().substring(0,10)}else if(null!==e.match(/^DateTime$/gi)){if(!(t instanceof Date||"string"==typeof t.valueOf()&&!isNaN(Date.parse(t))))throw new Error(r+" must be an instanceof Date or a string in ISO8601 format.");t=t instanceof Date?t.toISOString():new Date(t).toISOString()}else if(null!==e.match(/^DateTimeRfc1123$/gi)){if(!(t instanceof Date||"string"==typeof t.valueOf()&&!isNaN(Date.parse(t))))throw new Error(r+" must be an instanceof Date or a string in RFC-1123 format.");t=t instanceof Date?t.toUTCString():new Date(t).toUTCString()}else if(null!==e.match(/^UnixTime$/gi)){if(!(t instanceof Date||"string"==typeof t.valueOf()&&!isNaN(Date.parse(t))))throw new Error(r+" must be an instanceof Date or a string in RFC-1123/ISO8601 format for it to be serialized in UnixTime/Epoch format.");t=function dateToUnixTime(e){if(!e)return;"string"==typeof e.valueOf()&&(e=new Date(e));return Math.floor(e.getTime()/1e3)}(t)}else if(null!==e.match(/^TimeSpan$/gi)){if(!isDuration(t))throw new Error(r+' must be a string in ISO 8601 format. Instead was "'+t+'".');t=t}return t}(i,t,r):null!==i.match(/^ByteArray$/gi)?n=function serializeByteArrayType(e,t){if(null!=t){if(!(t instanceof Uint8Array))throw new Error(e+" must be of type Uint8Array.");t=encodeByteArray(t)}return t}(r,t):null!==i.match(/^Base64Url$/gi)?n=function serializeBase64UrlType(e,t){if(null!=t){if(!(t instanceof Uint8Array))throw new Error(e+" must be of type Uint8Array.");t=function bufferToBase64Url(e){if(!e)return;if(!(e instanceof Uint8Array))throw new Error("Please provide an input of type Uint8Array for converting to Base64Url.");return function trimEnd(e,t){var r=e.length;for(;r-1>=0&&e[r-1]===t;)--r;return e.substr(0,r)}(encodeByteArray(e),"=").replace(/\+/g,"-").replace(/\//g,"_")}(t)}return t}(r,t):null!==i.match(/^Sequence$/gi)?n=function serializeSequenceType(e,t,r,n){if(!Array.isArray(r))throw new Error(n+" must be of type Array.");var i=t.type.element;if(!i||"object"!=typeof i)throw new Error('element" metadata for an Array must be defined in the mapper and it must of type "object" in '+n+".");for(var o=[],s=0;s<r.length;s++)o[s]=e.serialize(i,r[s],n);return o}(this,e,t,r):null!==i.match(/^Dictionary$/gi)?n=function serializeDictionaryType(e,t,r,n){if("object"!=typeof r)throw new Error(n+" must be of type object.");var i=t.type.value;if(!i||"object"!=typeof i)throw new Error('"value" metadata for a Dictionary must be defined in the mapper and it must of type "object" in '+n+".");for(var o={},s=0,a=Object.keys(r);s<a.length;s++){var c=a[s];o[c]=e.serialize(i,r[c],n+"."+c)}return o}(this,e,t,r):null!==i.match(/^Composite$/gi)&&(n=function serializeCompositeType(e,t,r,n){var i;getPolymorphicDiscriminatorRecursively(e,t)&&(t=getPolymorphicMapper(e,t,r,"clientName"));if(null!=r){for(var o={},s=resolveModelProperties(e,t,n),a=0,c=Object.keys(s);a<c.length;a++){var u=c[a],l=s[u];if(!l.readOnly){var p=void 0,d=o;if(e.isXML)p=l.xmlIsWrapped?l.xmlName:l.xmlElementName||l.xmlName;else{var h=splitSerializeName(l.serializedName);p=h.pop();for(var f=0,m=h;f<m.length;f++){var g=m[f],y=d[g];null==y&&null!=r[u]&&(d[g]={}),d=d[g]}}if(null!=d){var v=""!==l.serializedName?n+"."+l.serializedName:n,b=r[u],_=getPolymorphicDiscriminatorRecursively(e,t);_&&_.clientName===u&&null==b&&(b=t.serializedName);var w=e.serialize(l,b,v);void 0!==w&&null!=p&&(l.xmlIsAttribute?(d.$=d.$||{},d.$[p]=w):l.xmlIsWrapped?d[p]=((i={})[l.xmlElementName]=w,i):d[p]=w)}}}var E=t.type.additionalProperties;if(E){var S=Object.keys(s),C=function(t){var i=S.every(function(e){return e!==t});i&&(o[t]=e.serialize(E,r[t],n+'["'+t+'"]'))};for(var x in r)C(x)}return o}return r}(this,e,t,r));return n},Serializer.prototype.deserialize=function(e,t,r){if(null==t)return this.isXML&&"Sequence"===e.type.name&&!e.xmlIsWrapped&&(t=[]),t;var n,i=e.type.name;return r||(r=e.serializedName),null!==i.match(/^Composite$/gi)?n=function deserializeCompositeType(e,t,r,n){getPolymorphicDiscriminatorRecursively(e,t)&&(t=getPolymorphicMapper(e,t,r,"serializedName"));for(var i=resolveModelProperties(e,t,n),o={},s=[],a=0,c=Object.keys(i);a<c.length;a++){var u=c[a],l=i[u],p=splitSerializeName(i[u].serializedName);s.push(p[0]);var d=l.serializedName,h=l.xmlName,f=l.xmlElementName,m=n;""!==d&&void 0!==d&&(m=n+"."+d);var g=l.headerCollectionPrefix;if(g){for(var y={},v=0,b=Object.keys(r);v<b.length;v++){var _=b[v];_.startsWith(g)&&(y[_.substring(g.length)]=e.deserialize(l.type.value,r[_],m)),s.push(_)}o[u]=y}else if(e.isXML)if(l.xmlIsAttribute&&r.$)o[u]=e.deserialize(l,r.$[h],m);else{var w=f||h||d,E=r[w];if(l.xmlIsWrapped){var S=void 0===(E=(E=r[h])&&E[f]);S&&(E=[])}o[u]=e.deserialize(l,E,m)}else{for(var C=void 0,x=r,k=0,R=p;k<R.length;k++){var T=R[k];if(!x)break;x=x[T]}C=x;var O=t.type.polymorphicDiscriminator;O&&l.serializedName===O.serializedName&&null==C&&(C=t.serializedName);var I=void 0;Array.isArray(r[u])&&""===i[u].serializedName?(C=r[u],o=e.deserialize(l,C,m)):void 0!==C&&(I=e.deserialize(l,C,m),o[u]=I)}}var N=t.type.additionalProperties;if(N){var A=function(e){for(var t in i){var r=splitSerializeName(i[t].serializedName);if(r[0]===e)return!1}return!0};for(var P in r)A(P)&&(o[P]=e.deserialize(N,r[P],n+'["'+P+'"]'))}else if(r)for(var L=0,D=Object.keys(r);L<D.length;L++){var u=D[L];void 0!==o[u]||s.includes(u)||isSpecialXmlProperty(u)||(o[u]=r[u])}return o}(this,e,t,r):(this.isXML&&null!=t.$&&null!=t._&&(t=t._),null!==i.match(/^Number$/gi)?(n=parseFloat(t),isNaN(n)&&(n=t)):null!==i.match(/^Boolean$/gi)?n="true"===t||"false"!==t&&t:null!==i.match(/^(String|Enum|Object|Stream|Uuid|TimeSpan|any)$/gi)?n=t:null!==i.match(/^(Date|DateTime|DateTimeRfc1123)$/gi)?n=new Date(t):null!==i.match(/^UnixTime$/gi)?n=function unixTimeToDate(e){if(!e)return;return new Date(1e3*e)}(t):null!==i.match(/^ByteArray$/gi)?n=decodeString(t):null!==i.match(/^Base64Url$/gi)?n=function base64UrlToByteArray(e){if(!e)return;if(e&&"string"!=typeof e.valueOf())throw new Error("Please provide an input of type string for converting to Uint8Array");return decodeString(e=e.replace(/\-/g,"+").replace(/\_/g,"/"))}(t):null!==i.match(/^Sequence$/gi)?n=function deserializeSequenceType(e,t,r,n){var i=t.type.element;if(!i||"object"!=typeof i)throw new Error('element" metadata for an Array must be defined in the mapper and it must of type "object" in '+n);if(r){Array.isArray(r)||(r=[r]);for(var o=[],s=0;s<r.length;s++)o[s]=e.deserialize(i,r[s],n+"["+s+"]");return o}return r}(this,e,t,r):null!==i.match(/^Dictionary$/gi)&&(n=function deserializeDictionaryType(e,t,r,n){var i=t.type.value;if(!i||"object"!=typeof i)throw new Error('"value" metadata for a Dictionary must be defined in the mapper and it must of type "object" in '+n);if(r){for(var o={},s=0,a=Object.keys(r);s<a.length;s++){var c=a[s];o[c]=e.deserialize(i,r[c],n)}return o}return r}(this,e,t,r))),e.isConstant&&(n=e.defaultValue),n},Serializer}();function splitSerializeName(e){var t=[],r="";if(e)for(var n=0,i=e.split(".");n<i.length;n++){var o=i[n];"\\"===o.charAt(o.length-1)?r+=o.substr(0,o.length-1)+".":(r+=o,t.push(r),r="")}return t}function resolveModelProperties(e,t,r){var n=t.type.modelProperties;if(!n){var i=t.type.className;if(!i)throw new Error('Class name for model "'+r+'" is not provided in the mapper "'+JSON.stringify(t,void 0,2)+'".');var o=e.modelMappers[i];if(!o)throw new Error('mapper() cannot be null or undefined for model "'+i+'".');if(!(n=o.type.modelProperties))throw new Error('modelProperties cannot be null or undefined in the mapper "'+JSON.stringify(o)+'" of type "'+i+'" for object "'+r+'".')}return n}function isSpecialXmlProperty(e){return["$","_"].includes(e)}function getPolymorphicMapper(e,t,r,n){var i=getPolymorphicDiscriminatorRecursively(e,t);if(i){var o=i[n];if(null!=o){var s=r[o];if(null!=s){var a=t.type.uberParent||t.type.className,c=s===a?s:a+"."+s,u=e.modelMappers.discriminators[c];u&&(t=u)}}}return t}function getPolymorphicDiscriminatorRecursively(e,t){return t.type.polymorphicDiscriminator||getPolymorphicDiscriminatorSafely(e,t.type.uberParent)||getPolymorphicDiscriminatorSafely(e,t.type.className)}function getPolymorphicDiscriminatorSafely(e,t){return t&&e.modelMappers[t]&&e.modelMappers[t].type.polymorphicDiscriminator}function serializeObject(e){if(null!=e){if(e instanceof Uint8Array)return e=encodeByteArray(e);if(e instanceof Date)return e.toISOString();if(Array.isArray(e)){for(var t=[],r=0;r<e.length;r++)t.push(serializeObject(e[r]));return t}if("object"==typeof e){var n={};for(var i in e)n[i]=serializeObject(e[i]);return n}return e}}var l=function strEnum(e){for(var t={},r=0,n=e;r<n.length;r++){var i=n[r];t[i]=i}return t}(["Base64Url","Boolean","ByteArray","Composite","Date","DateTime","DateTimeRfc1123","Dictionary","Enum","Number","Object","Sequence","String","Stream","TimeSpan","UnixTime"]),p=function(){function WebResource(e,t,r,i,o,s,a,c,u,l,p,d){this.streamResponseBody=s,this.url=e||"",this.method=t||"GET",this.headers=o instanceof n?o:new n(o),this.body=r,this.query=i,this.formData=void 0,this.withCredentials=a||!1,this.abortSignal=c,this.timeout=u||0,this.onUploadProgress=l,this.onDownloadProgress=p,this.proxySettings=d}return WebResource.prototype.validateRequestProperties=function(){if(!this.method)throw new Error("WebResource.method is required.");if(!this.url)throw new Error("WebResource.url is required.")},WebResource.prototype.prepare=function(e){if(!e)throw new Error("options object is required");if(null==e.method||"string"!=typeof e.method.valueOf())throw new Error("options.method must be a string.");if(e.url&&e.pathTemplate)throw new Error("options.url and options.pathTemplate are mutually exclusive. Please provide exactly one of them.");if(!(null!=e.pathTemplate&&"string"==typeof e.pathTemplate.valueOf()||null!=e.url&&"string"==typeof e.url.valueOf()))throw new Error("Please provide exactly one of options.pathTemplate or options.url.");if(e.url){if("string"!=typeof e.url)throw new Error('options.url must be of type "string".');this.url=e.url}if(e.method){var t=["GET","PUT","HEAD","DELETE","OPTIONS","POST","PATCH","TRACE"];if(-1===t.indexOf(e.method.toUpperCase()))throw new Error('The provided method "'+e.method+'" is invalid. Supported HTTP methods are: '+JSON.stringify(t))}if(this.method=e.method.toUpperCase(),e.pathTemplate){var r=e.pathTemplate,n=e.pathParameters;if("string"!=typeof r)throw new Error('options.pathTemplate must be of type "string".');e.baseUrl||(e.baseUrl="https://management.azure.com");var i=e.baseUrl,o=i+(i.endsWith("/")?"":"/")+(r.startsWith("/")?r.slice(1):r),s=o.match(/({\w*\s*\w*})/gi);if(s&&s.length){if(!n)throw new Error("pathTemplate: "+r+" has been provided. Hence, options.pathParameters must also be provided.");s.forEach(function(e){var t=e.slice(1,-1),i=n[t];if(null==i||"string"!=typeof i&&"object"!=typeof i)throw new Error("pathTemplate: "+r+" contains the path parameter "+t+" however, it is not present in "+n+" - "+JSON.stringify(n,void 0,2)+'.The value of the path parameter can either be a "string" of the form { '+t+': "some sample value" } or it can be an "object" of the form { "'+t+'": { value: "some sample value", skipUrlEncoding: true } }.');if("string"==typeof i.valueOf()&&(o=o.replace(e,encodeURIComponent(i))),"object"==typeof i.valueOf()){if(!i.value)throw new Error("options.pathParameters["+t+'] is of type "object" but it does not contain a "value" property.');o=i.skipUrlEncoding?o.replace(e,i.value):o.replace(e,encodeURIComponent(i.value))}})}this.url=o}if(e.queryParameters){var a=e.queryParameters;if("object"!=typeof a)throw new Error('options.queryParameters must be of type object. It should be a JSON object of "query-parameter-name" as the key and the "query-parameter-value" as the value. The "query-parameter-value" may be fo type "string" or an "object" of the form { value: "query-parameter-value", skipUrlEncoding: true }.');this.url&&-1===this.url.indexOf("?")&&(this.url+="?");var c=[];for(var l in this.query={},a){var p=a[l];if(p)if("string"==typeof p)c.push(l+"="+encodeURIComponent(p)),this.query[l]=encodeURIComponent(p);else if("object"==typeof p){if(!p.value)throw new Error("options.queryParameters["+l+'] is of type "object" but it does not contain a "value" property.');p.skipUrlEncoding?(c.push(l+"="+p.value),this.query[l]=p.value):(c.push(l+"="+encodeURIComponent(p.value)),this.query[l]=encodeURIComponent(p.value))}}this.url+=c.join("&")}if(e.headers)for(var d=e.headers,h=0,f=Object.keys(e.headers);h<f.length;h++){var m=f[h];this.headers.set(m,d[m])}return this.headers.get("accept-language")||this.headers.set("accept-language","en-US"),this.headers.get("x-ms-client-request-id")||e.disableClientRequestId||this.headers.set("x-ms-client-request-id",generateUuid()),this.headers.get("Content-Type")||this.headers.set("Content-Type","application/json; charset=utf-8"),this.body=e.body,null!=e.body&&(e.bodyIsStream?(this.headers.get("Transfer-Encoding")||this.headers.set("Transfer-Encoding","chunked"),"application/octet-stream"!==this.headers.get("Content-Type")&&this.headers.set("Content-Type","application/octet-stream")):(e.serializationMapper&&(this.body=new u(e.mappers).serialize(e.serializationMapper,e.body,"requestBody")),e.disableJsonStringifyOnBody||(this.body=JSON.stringify(e.body)))),this.abortSignal=e.abortSignal,this.onDownloadProgress=e.onDownloadProgress,this.onUploadProgress=e.onUploadProgress,this},WebResource.prototype.clone=function(){var e=new WebResource(this.url,this.method,this.body,this.query,this.headers&&this.headers.clone(),this.streamResponseBody,this.withCredentials,this.abortSignal,this.timeout,this.onUploadProgress,this.onDownloadProgress);return this.formData&&(e.formData=this.formData),this.operationSpec&&(e.operationSpec=this.operationSpec),this.shouldDeserialize&&(e.shouldDeserialize=this.shouldDeserialize),this.operationResponseGetter&&(e.operationResponseGetter=this.operationResponseGetter),e},WebResource}(),d=r(0),h=r(107),f=r.n(h),m=r(15),g=r(255),y=r.n(g),v=r(254),b=function(e){function RestError(t,r,n,i,o,s){var a=e.call(this,t)||this;return a.code=r,a.statusCode=n,a.request=i,a.response=o,a.body=s,Object.setPrototypeOf(a,RestError.prototype),a}return d.__extends(RestError,e),RestError.REQUEST_SEND_ERROR="REQUEST_SEND_ERROR",RestError.REQUEST_ABORTED_ERROR="REQUEST_ABORTED_ERROR",RestError.PARSE_ERROR="PARSE_ERROR",RestError}(Error),_=r(133),w=function(){function URLQuery(){this._rawQuery={}}return URLQuery.prototype.any=function(){return Object.keys(this._rawQuery).length>0},URLQuery.prototype.set=function(e,t){if(e)if(null!=t){var r=Array.isArray(t)?t:t.toString();this._rawQuery[e]=r}else delete this._rawQuery[e]},URLQuery.prototype.get=function(e){return e?this._rawQuery[e]:void 0},URLQuery.prototype.toString=function(){var e="";for(var t in this._rawQuery){e&&(e+="&");var r=this._rawQuery[t];if(Array.isArray(r)){for(var n=[],i=0,o=r;i<o.length;i++){var s=o[i];n.push(t+"="+s)}e+=n.join("&")}else e+=t+"="+r}return e},URLQuery.parse=function(e){var t=new URLQuery;if(e){e.startsWith("?")&&(e=e.substring(1));for(var r="ParameterName",n="",i="",o=0;o<e.length;++o){var s=e[o];switch(r){case"ParameterName":switch(s){case"=":r="ParameterValue";break;case"&":n="",i="";break;default:n+=s}break;case"ParameterValue":switch(s){case"=":n="",i="",r="Invalid";break;case"&":t.set(n,i),n="",i="",r="ParameterName";break;default:i+=s}break;case"Invalid":"&"===s&&(r="ParameterName");break;default:throw new Error("Unrecognized URLQuery parse state: "+r)}}"ParameterValue"===r&&t.set(n,i)}return t},URLQuery}(),E=function(){function URLBuilder(){}return URLBuilder.prototype.setScheme=function(e){e?this.set(e,"SCHEME"):this._scheme=void 0},URLBuilder.prototype.getScheme=function(){return this._scheme},URLBuilder.prototype.setHost=function(e){e?this.set(e,"SCHEME_OR_HOST"):this._host=void 0},URLBuilder.prototype.getHost=function(){return this._host},URLBuilder.prototype.setPort=function(e){null==e||""===e?this._port=void 0:this.set(e.toString(),"PORT")},URLBuilder.prototype.getPort=function(){return this._port},URLBuilder.prototype.setPath=function(e){e?-1!==e.indexOf("://")?this.set(e,"SCHEME"):this.set(e,"PATH"):this._path=void 0},URLBuilder.prototype.appendPath=function(e){if(e){var t=this.getPath();t&&(t.endsWith("/")||(t+="/"),e.startsWith("/")&&(e=e.substring(1)),e=t+e),this.set(e,"PATH")}},URLBuilder.prototype.getPath=function(){return this._path},URLBuilder.prototype.setQuery=function(e){this._query=e?w.parse(e):void 0},URLBuilder.prototype.setQueryParameter=function(e,t){e&&(this._query||(this._query=new w),this._query.set(e,t))},URLBuilder.prototype.getQueryParameterValue=function(e){return this._query?this._query.get(e):void 0},URLBuilder.prototype.getQuery=function(){return this._query?this._query.toString():void 0},URLBuilder.prototype.set=function(e,t){for(var r=new C(e,t);r.next();){var n=r.current();if(n)switch(n.type){case"SCHEME":this._scheme=n.text||void 0;break;case"HOST":this._host=n.text||void 0;break;case"PORT":this._port=n.text||void 0;break;case"PATH":var i=n.text||void 0;this._path&&"/"!==this._path&&"/"===i||(this._path=i);break;case"QUERY":this._query=w.parse(n.text);break;default:throw new Error("Unrecognized URLTokenType: "+n.type)}}},URLBuilder.prototype.toString=function(){var e="";return this._scheme&&(e+=this._scheme+"://"),this._host&&(e+=this._host),this._port&&(e+=":"+this._port),this._path&&(this._path.startsWith("/")||(e+="/"),e+=this._path),this._query&&this._query.any()&&(e+="?"+this._query.toString()),e},URLBuilder.prototype.replaceAll=function(e,t){e&&(this.setScheme(replaceAll(this.getScheme(),e,t)),this.setHost(replaceAll(this.getHost(),e,t)),this.setPort(replaceAll(this.getPort(),e,t)),this.setPath(replaceAll(this.getPath(),e,t)),this.setQuery(replaceAll(this.getQuery(),e,t)))},URLBuilder.parse=function(e){var t=new URLBuilder;return t.set(e,"SCHEME_OR_HOST"),t},URLBuilder}(),S=function(){function URLToken(e,t){this.text=e,this.type=t}return URLToken.scheme=function(e){return new URLToken(e,"SCHEME")},URLToken.host=function(e){return new URLToken(e,"HOST")},URLToken.port=function(e){return new URLToken(e,"PORT")},URLToken.path=function(e){return new URLToken(e,"PATH")},URLToken.query=function(e){return new URLToken(e,"QUERY")},URLToken}();var C=function(){function URLTokenizer(e,t){this._text=e,this._textLength=e?e.length:0,this._currentState=null!=t?t:"SCHEME_OR_HOST",this._currentIndex=0}return URLTokenizer.prototype.current=function(){return this._currentToken},URLTokenizer.prototype.next=function(){if(hasCurrentCharacter(this))switch(this._currentState){case"SCHEME":!function nextScheme(e){var t=function readWhileLetterOrDigit(e){return readWhile(e,function(e){return function isAlphaNumericCharacter(e){var t=e.charCodeAt(0);return 48<=t&&t<=57||65<=t&&t<=90||97<=t&&t<=122}(e)})}(e);e._currentToken=S.scheme(t),hasCurrentCharacter(e)?e._currentState="HOST":e._currentState="DONE"}(this);break;case"SCHEME_OR_HOST":!function nextSchemeOrHost(e){var t=readUntilCharacter(e,":","/","?");hasCurrentCharacter(e)?":"===getCurrentCharacter(e)?"://"===peekCharacters(e,3)?(e._currentToken=S.scheme(t),e._currentState="HOST"):(e._currentToken=S.host(t),e._currentState="PORT"):(e._currentToken=S.host(t),"/"===getCurrentCharacter(e)?e._currentState="PATH":e._currentState="QUERY"):(e._currentToken=S.host(t),e._currentState="DONE")}(this);break;case"HOST":!function nextHost(e){"://"===peekCharacters(e,3)&&nextCharacter(e,3);var t=readUntilCharacter(e,":","/","?");e._currentToken=S.host(t),hasCurrentCharacter(e)?":"===getCurrentCharacter(e)?e._currentState="PORT":"/"===getCurrentCharacter(e)?e._currentState="PATH":e._currentState="QUERY":e._currentState="DONE"}(this);break;case"PORT":!function nextPort(e){":"===getCurrentCharacter(e)&&nextCharacter(e);var t=readUntilCharacter(e,"/","?");e._currentToken=S.port(t),hasCurrentCharacter(e)?"/"===getCurrentCharacter(e)?e._currentState="PATH":e._currentState="QUERY":e._currentState="DONE"}(this);break;case"PATH":!function nextPath(e){var t=readUntilCharacter(e,"?");e._currentToken=S.path(t),hasCurrentCharacter(e)?e._currentState="QUERY":e._currentState="DONE"}(this);break;case"QUERY":!function nextQuery(e){"?"===getCurrentCharacter(e)&&nextCharacter(e);var t=function readRemaining(e){var t="";e._currentIndex<e._textLength&&(t=e._text.substring(e._currentIndex),e._currentIndex=e._textLength);return t}(e);e._currentToken=S.query(t),e._currentState="DONE"}(this);break;default:throw new Error("Unrecognized URLTokenizerState: "+this._currentState)}else this._currentToken=void 0;return!!this._currentToken},URLTokenizer}();function hasCurrentCharacter(e){return e._currentIndex<e._textLength}function getCurrentCharacter(e){return e._text[e._currentIndex]}function nextCharacter(e,t){hasCurrentCharacter(e)&&(t||(t=1),e._currentIndex+=t)}function peekCharacters(e,t){var r=e._currentIndex+t;return e._textLength<r&&(r=e._textLength),e._text.substring(e._currentIndex,r)}function readWhile(e,t){for(var r="";hasCurrentCharacter(e);){var n=getCurrentCharacter(e);if(!t(n))break;r+=n,nextCharacter(e)}return r}function readUntilCharacter(e){for(var t=[],r=1;r<arguments.length;r++)t[r-1]=arguments[r];return readWhile(e,function(e){return-1===t.indexOf(e)})}var x,k=function(){function AxiosHttpClient(){this.cookieJar=new v.CookieJar}return AxiosHttpClient.prototype.sendRequest=function(e){return d.__awaiter(this,void 0,void 0,function(){var t,r,i,o,s,a,c,u,l,p,h,g,v,_,w,S,C,x,k,R,T,O,I,N,A,P,L,D,M,j,q,F=this;return d.__generator(this,function(z){switch(z.label){case 0:if(!e)throw new Error("httpRequest (WebResource) cannot be null or undefined and must be of type object.");if(e.formData){for(t=e.formData,r=new y.a,i=function(e,t){"function"==typeof t&&(t=t()),t&&t.hasOwnProperty("value")&&t.hasOwnProperty("options")?r.append(e,t.value,t.options):r.append(e,t)},o=0,s=Object.keys(t);o<s.length;o++)if(a=s[o],c=t[a],Array.isArray(c))for(u=0;u<c.length;u++)i(a,c[u]);else i(a,c);e.body=r,e.formData=void 0,(l=e.headers.get("Content-Type"))&&-1!==l.indexOf("multipart/form-data")&&("function"==typeof r.getBoundary?e.headers.set("Content-Type","multipart/form-data; boundary="+r.getBoundary()):e.headers.remove("Content-Type"))}return!this.cookieJar||e.headers.get("Cookie")?[3,2]:[4,new Promise(function(t,r){F.cookieJar.getCookieString(e.url,function(e,n){e?r(e):t(n)})})];case 1:p=z.sent(),e.headers.set("Cookie",p),z.label=2;case 2:if((h=e.abortSignal)&&h.aborted)throw new b("The request was aborted",b.REQUEST_ABORTED_ERROR,void 0,e);v=h&&new f.a.CancelToken(function(e){g=function(){return e()},h.addEventListener("abort",g)}),_=e.headers.rawHeaders(),w=e.body,S=void 0===w?null:"function"==typeof w?w():w,(C=e.onUploadProgress)&&S&&(x=0,k=new m.Transform({transform:function(e,t,r){x+=e.length,C({loadedBytes:x}),r(void 0,e)}}),isReadableStream(S)?S.pipe(k):k.end(S),S=k),z.label=3;case 3:return z.trys.push([3,5,6,7]),T={method:e.method,url:e.url,headers:_,data:S,transformResponse:void 0,validateStatus:function(){return!0},maxContentLength:1/0,responseType:e.streamResponseBody?"stream":"text",cancelToken:v,timeout:e.timeout,proxy:!1},e.proxySettings&&((O=function createProxyAgent(e,t,r){var n={proxy:{host:t.host,port:t.port,headers:r&&r.rawHeaders()||{}}};t.username&&t.password&&(n.proxy.proxyAuth=t.username+":"+t.password);var i="https"===(E.parse(e).getScheme()||"").toLowerCase(),o="https"===(E.parse(t.host).getScheme()||"").toLowerCase();return{isHttps:i,agent:createTunnel(i,o,n)}}(e.url,e.proxySettings,e.headers)).isHttps?T.httpsAgent=O.agent:T.httpAgent=O.agent),f.a.interceptors.request.use(function(e){return d.__assign({},e,{method:e.method&&e.method.toUpperCase()})}),[4,f.a.request(T)];case 4:return R=z.sent(),[3,7];case 5:throw(I=z.sent())instanceof f.a.Cancel?new b(I.message,b.REQUEST_SEND_ERROR,void 0,e):new b(I.message,b.REQUEST_SEND_ERROR,void 0,e);case 6:return h&&g&&h.removeEventListener("abort",g),[7];case 7:return N=new n(R.headers),A=e.onDownloadProgress,P=R.data,A&&(isReadableStream(P)?(L=0,D=new m.Transform({transform:function(e,t,r){L+=e.length,A({loadedBytes:L}),r(void 0,e)}}),P.pipe(D),P=D):(M=parseInt(N.get("Content-Length"))||P.length||void 0)&&A({loadedBytes:M})),j={request:e,status:R.status,headers:N,readableStreamBody:e.streamResponseBody?P:void 0,bodyAsText:e.streamResponseBody?void 0:P},this.cookieJar?null==(q=j.headers.get("Set-Cookie"))?[3,9]:[4,new Promise(function(t,r){F.cookieJar.setCookie(q,e.url,function(e){e?r(e):t()})})]:[3,9];case 8:z.sent(),z.label=9;case 9:return[2,j]}})})},AxiosHttpClient}();function isReadableStream(e){return"function"==typeof e.pipe}function createTunnel(e,t,r){return e&&t?_.httpsOverHttps(r):e&&!t?_.httpsOverHttp(r):!e&&t?_.httpOverHttps(r):_.httpOverHttp(r)}function getPathStringFromParameter(e){return getPathStringFromParameterPath(e.parameterPath,e.mapper)}function getPathStringFromParameterPath(e,t){return"string"==typeof e?e:Array.isArray(e)?e.join("."):t.serializedName}function isStreamOperation(e){var t=!1;for(var r in e.responses){var n=e.responses[r];if(n.bodyMapper&&n.bodyMapper.type.name===l.Stream){t=!0;break}}return t}!function(e){e[e.OFF=0]="OFF",e[e.ERROR=1]="ERROR",e[e.WARNING=2]="WARNING",e[e.INFO=3]="INFO"}(x||(x={}));var R=r(257);function stringifyXML(e,t){return new R.Builder({explicitArray:!1,explicitCharkey:!1,rootName:(t||{}).rootName,renderOpts:{pretty:!1}}).buildObject(e)}var T=function(){function BaseRequestPolicy(e,t){this._nextPolicy=e,this._options=t}return BaseRequestPolicy.prototype.shouldLog=function(e){return this._options.shouldLog(e)},BaseRequestPolicy.prototype.log=function(e,t){this._options.log(e,t)},BaseRequestPolicy}(),O=function(){function RequestPolicyOptions(e){this._logger=e}return RequestPolicyOptions.prototype.shouldLog=function(e){return!!this._logger&&e!==x.OFF&&e<=this._logger.minimumLogLevel},RequestPolicyOptions.prototype.log=function(e,t){this._logger&&this.shouldLog(e)&&this._logger.log(e,t)},RequestPolicyOptions}();function deserializationPolicy(e){return{create:function(t,r){return new A(t,e,r)}}}var I=["application/json","text/json"],N=["application/xml","application/atom+xml"],A=function(e){function DeserializationPolicy(t,r,n){var i=e.call(this,t,n)||this;return i.jsonContentTypes=r&&r.json||I,i.xmlContentTypes=r&&r.xml||N,i}return d.__extends(DeserializationPolicy,e),DeserializationPolicy.prototype.sendRequest=function(e){return d.__awaiter(this,void 0,void 0,function(){var t=this;return d.__generator(this,function(r){return[2,this._nextPolicy.sendRequest(e).then(function(e){return deserializeResponseBody(t.jsonContentTypes,t.xmlContentTypes,e)})]})})},DeserializationPolicy}(T);function deserializeResponseBody(e,t,r){return function parse(e,t,r){var n=function(e){var t='Error "'+e+'" occurred while parsing the response body - '+r.bodyAsText+".",n=e.code||b.PARSE_ERROR,i=new b(t,n,r.status,r.request,r,r.bodyAsText);return Promise.reject(i)};if(!r.request.streamResponseBody&&r.bodyAsText){var i=r.bodyAsText,o=r.headers.get("Content-Type")||"",s=o?o.split(";").map(function(e){return e.toLowerCase()}):[];if(0===s.length||s.some(function(t){return-1!==e.indexOf(t)}))return new Promise(function(e){r.parsedBody=JSON.parse(i),e(r)}).catch(n);if(s.some(function(e){return-1!==t.indexOf(e)}))return function parseXML(e){var t=new R.Parser({explicitArray:!1,explicitCharkey:!1,explicitRoot:!1});return new Promise(function(r,n){e?t.parseString(e,function(e,t){e?n(e):r(t)}):n(new Error("Document is empty"))})}(i).then(function(e){return r.parsedBody=e,r}).catch(n)}return Promise.resolve(r)}(e,t,r).then(function(e){if(function shouldDeserializeResponse(e){var t=e.request.shouldDeserialize;return void 0===t||("boolean"==typeof t?t:t(e))}(e)){var t=e.request.operationSpec;if(t&&t.responses){var n=e.status,i=Object.keys(t.responses),o=0===i.length||1===i.length&&"default"===i[0],s=function getOperationResponse(e){var t,r=e.request,n=r.operationSpec;if(n){var i=r.operationResponseGetter;t=i?i(n,e):n.responses[e.status]}return t}(e);if(o?200<=n&&n<300:!!s){if(s){if(s.bodyMapper){m=e.parsedBody;t.isXML&&s.bodyMapper.type.name===l.Sequence&&(m="object"==typeof m?m[s.bodyMapper.xmlElementName]:[]);try{e.parsedBody=t.serializer.deserialize(s.bodyMapper,m,"operationRes.parsedBody")}catch(p){var a=new b("Error "+p+" occurred in deserializing the responseBody - "+e.bodyAsText);return a.request=stripRequest(e.request),a.response=stripResponse(e),Promise.reject(a)}}else"HEAD"===t.httpMethod&&(e.parsedBody=r.status>=200&&r.status<300);s.headersMapper&&(e.parsedHeaders=t.serializer.deserialize(s.headersMapper,e.headers.rawHeaders(),"operationRes.parsedHeaders"))}}else{var c=t.responses.default;if(c){var u=isStreamOperation(t)?"Unexpected status code: "+n:e.bodyAsText,p=new b(u);p.statusCode=n,p.request=stripRequest(e.request),p.response=stripResponse(e);var d=e.parsedBody;try{if(d){var h=c.bodyMapper;if(h&&"CloudError"===h.serializedName)d.error&&(d=d.error),d.code&&(p.code=d.code),d.message&&(p.message=d.message);else{var f=d;d.error&&(f=d.error),p.code=f.code,f.message&&(p.message=f.message)}if(h){var m=d;t.isXML&&h.type.name===l.Sequence&&(m="object"==typeof d?d[h.xmlElementName]:[]),p.body=t.serializer.deserialize(h,m,"error.body")}}}catch(t){p.message='Error "'+t.message+'" occurred in deserializing the responseBody - "'+e.bodyAsText+'" for the default response.'}return Promise.reject(p)}}}}return Promise.resolve(e)})}function exponentialRetryPolicy(e,t,r,n){return{create:function(i,o){return new j(i,o,e,t,r,n)}}}var P=3e4,L=3,D=9e4,M=3e3,j=function(e){function ExponentialRetryPolicy(t,r,n,i,o,s){var a=e.call(this,t,r)||this;function isNumber(e){return"number"==typeof e}return a.retryCount=isNumber(n)?n:L,a.retryInterval=isNumber(i)?i:P,a.minRetryInterval=isNumber(o)?o:M,a.maxRetryInterval=isNumber(s)?s:D,a}return d.__extends(ExponentialRetryPolicy,e),ExponentialRetryPolicy.prototype.sendRequest=function(e){var t=this;return this._nextPolicy.sendRequest(e.clone()).then(function(r){return retry(t,e,r)}).catch(function(r){return retry(t,e,r.response,void 0,r)})},ExponentialRetryPolicy}(T);function retry(e,t,r,n,i){n=function updateRetryData(e,t,r){t||(t={retryCount:0,retryInterval:0}),r&&(t.error&&(r.innerError=t.error),t.error=r),t.retryCount++;var n=Math.pow(2,t.retryCount)-1;return n*=.8*e.retryInterval+Math.floor(Math.random()*(1.2*e.retryInterval-.8*e.retryInterval)),t.retryInterval=Math.min(e.minRetryInterval+n,e.maxRetryInterval),t}(e,n,i);var o=t.abortSignal&&t.abortSignal.aborted;if(!o&&function shouldRetry(e,t,r){if(null==t||t<500&&408!==t||501===t||505===t)return!1;if(!r)throw new Error("retryData for the ExponentialRetryPolicyFilter cannot be null.");return(r&&r.retryCount)<e.retryCount}(e,r&&r.status,n))return utils_delay(n.retryInterval).then(function(){return e._nextPolicy.sendRequest(t.clone())}).then(function(r){return retry(e,t,r,n,void 0)}).catch(function(i){return retry(e,t,r,n,i)});if(o||i||!r){var s=n.error||new b("Failed to send the request.",b.REQUEST_SEND_ERROR,r&&r.status,r&&r.request,r);return Promise.reject(s)}return Promise.resolve(r)}function generateClientRequestIdPolicy(e){return void 0===e&&(e="x-ms-client-request-id"),{create:function(t,r){return new q(t,r,e)}}}var q=function(e){function GenerateClientRequestIdPolicy(t,r,n){var i=e.call(this,t,r)||this;return i._requestIdHeaderName=n,i}return d.__extends(GenerateClientRequestIdPolicy,e),GenerateClientRequestIdPolicy.prototype.sendRequest=function(e){return e.headers.contains(this._requestIdHeaderName)||e.headers.set(this._requestIdHeaderName,generateUuid()),this._nextPolicy.sendRequest(e)},GenerateClientRequestIdPolicy}(T),F=r(17);function getDefaultUserAgentKey(){return s.HeaderConstants.USER_AGENT}var z=getDefaultUserAgentKey;function getDefaultUserAgentValue(){var e=function getRuntimeInfo(){return[{key:"ms-rest-js",value:s.msRestVersion}]}(),t=function getPlatformSpecificData(){return[{key:"Node",value:process.version},{key:"OS",value:"("+F.arch()+"-"+F.type()+"-"+F.release()+")"}]}();return function getUserAgentString(e,t,r){return void 0===t&&(t=" "),void 0===r&&(r="/"),e.map(function(e){var t=e.value?""+r+e.value:"";return""+e.key+t}).join(t)}(e.concat(t))}function userAgentPolicy(e){var t=e&&null!=e.key?e.key:getDefaultUserAgentKey(),r=e&&null!=e.value?e.value:getDefaultUserAgentValue();return{create:function(e,n){return new U(e,n,t,r)}}}var U=function(e){function UserAgentPolicy(t,r,n,i){var o=e.call(this,t,r)||this;return o._nextPolicy=t,o._options=r,o.headerKey=n,o.headerValue=i,o}return d.__extends(UserAgentPolicy,e),UserAgentPolicy.prototype.sendRequest=function(e){return this.addUserAgentHeader(e),this._nextPolicy.sendRequest(e)},UserAgentPolicy.prototype.addUserAgentHeader=function(e){e.headers||(e.headers=new n),!e.headers.get(this.headerKey)&&this.headerValue&&e.headers.set(this.headerKey,this.headerValue)},UserAgentPolicy}(T);function redirectPolicy(e){return void 0===e&&(e=20),{create:function(t,r){return new B(t,r,e)}}}var B=function(e){function RedirectPolicy(t,r,n){void 0===n&&(n=20);var i=e.call(this,t,r)||this;return i.maxRetries=n,i}return d.__extends(RedirectPolicy,e),RedirectPolicy.prototype.sendRequest=function(e){var t=this;return this._nextPolicy.sendRequest(e).then(function(e){return function handleRedirect(e,t,r){var n=t.request,i=t.status;var o=t.headers.get("location");if(o&&(300===i||307===i||303===i&&"POST"===n.method)&&(!e.maxRetries||r<e.maxRetries)){var s=E.parse(n.url);return s.setPath(o),n.url=s.toString(),303===i&&(n.method="GET"),e._nextPolicy.sendRequest(n).then(function(t){return handleRedirect(e,t,r+1)})}return Promise.resolve(t)}(t,e,0)})},RedirectPolicy}(T);var H=function(e){function RPRegistrationPolicy(t,r,n){void 0===n&&(n=30);var i=e.call(this,t,r)||this;return i._retryTimeout=n,i}return d.__extends(RPRegistrationPolicy,e),RPRegistrationPolicy.prototype.sendRequest=function(e){var t=this;return this._nextPolicy.sendRequest(e.clone()).then(function(r){return function registerIfNeeded(e,t,r){if(409===r.status){var n=function checkRPNotRegisteredError(e){var t,r;if(e){try{r=JSON.parse(e)}catch(e){}if(r&&r.error&&r.error.message&&r.error.code&&"MissingSubscriptionRegistration"===r.error.code){var n=r.error.message.match(/.*'(.*)'/i);n&&(t=n.pop())}}return t}(r.bodyAsText);if(n){var i=function extractSubscriptionUrl(e){var t,r=e.match(/.*\/subscriptions\/[a-f0-9-]+\//gi);if(!r||!r[0])throw new Error("Unable to extract subscriptionId from the given url - "+e+".");t=r[0];return t}(t.url);return function registerRP(e,t,r,n){var i=t+"providers/"+r+"/register?api-version=2016-02-01",o=t+"providers/"+r+"?api-version=2016-02-01",s=getRequestEssentials(n);return s.method="POST",s.url=i,e._nextPolicy.sendRequest(s).then(function(t){if(200!==t.status)throw new Error("Autoregistration of "+r+" failed. Please try registering manually.");return function getRegistrationStatus(e,t,r){var n=getRequestEssentials(r);return n.url=t,n.method="GET",e._nextPolicy.sendRequest(n).then(function(n){var i=n.parsedBody;return!(!n.parsedBody||!i.registrationState||"Registered"!==i.registrationState)||utils_delay(1e3*e._retryTimeout).then(function(){return getRegistrationStatus(e,t,r)})})}(e,o,n)})}(e,i,n,t).catch(function(){return!1}).then(function(n){return n?(t.headers.set("x-ms-client-request-id",generateUuid()),e._nextPolicy.sendRequest(t.clone())):r})}}return Promise.resolve(r)}(t,e,r)})},RPRegistrationPolicy}(T);function getRequestEssentials(e,t){void 0===t&&(t=!1);var r={headers:{}};for(var n in t&&(r.url=e.url),e.headers)r.headers.set(n,e.headers.get(n));return r.headers["x-ms-client-request-id"]=generateUuid(),r.headers["Content-Type"]="application/json; charset=utf-8",r}function signingPolicy(e){return{create:function(t,r){return new $(t,r,e)}}}var $=function(e){function SigningPolicy(t,r,n){var i=e.call(this,t,r)||this;return i.authenticationProvider=n,i}return d.__extends(SigningPolicy,e),SigningPolicy.prototype.signRequest=function(e){return this.authenticationProvider.signRequest(e)},SigningPolicy.prototype.sendRequest=function(e){var t=this;return this.signRequest(e).then(function(e){return t._nextPolicy.sendRequest(e)})},SigningPolicy}(T);function systemErrorRetryPolicy(e,t,r,n){return{create:function(i,o){return new G(i,o,e,t,r,n)}}}var V,G=function(e){function SystemErrorRetryPolicy(t,r,n,i,o,s){var a=e.call(this,t,r)||this;return a.DEFAULT_CLIENT_RETRY_INTERVAL=3e4,a.DEFAULT_CLIENT_RETRY_COUNT=3,a.DEFAULT_CLIENT_MAX_RETRY_INTERVAL=9e4,a.DEFAULT_CLIENT_MIN_RETRY_INTERVAL=3e3,a.retryCount="number"==typeof n?n:a.DEFAULT_CLIENT_RETRY_COUNT,a.retryInterval="number"==typeof i?i:a.DEFAULT_CLIENT_RETRY_INTERVAL,a.minRetryInterval="number"==typeof o?o:a.DEFAULT_CLIENT_MIN_RETRY_INTERVAL,a.maxRetryInterval="number"==typeof s?s:a.DEFAULT_CLIENT_MAX_RETRY_INTERVAL,a}return d.__extends(SystemErrorRetryPolicy,e),SystemErrorRetryPolicy.prototype.sendRequest=function(e){var t=this;return this._nextPolicy.sendRequest(e.clone()).then(function(r){return function systemErrorRetryPolicy_retry(e,t,r,n,i){n=function systemErrorRetryPolicy_updateRetryData(e,t,r){t||(t={retryCount:0,retryInterval:0});r&&(t.error&&(r.innerError=t.error),t.error=r);t.retryCount++;var n=Math.pow(2,t.retryCount)-1,i=.8*e.retryInterval+Math.floor(Math.random()*(1.2*e.retryInterval-.8*e.retryInterval));return n*=i,t.retryInterval=Math.min(e.minRetryInterval+n,e.maxRetryInterval),t}(e,n,i);return i&&i.code&&function systemErrorRetryPolicy_shouldRetry(e,t){var r;if(!t)throw new Error("retryData for the SystemErrorRetryPolicyFilter cannot be null.");r=t&&t.retryCount;return r<e.retryCount}(e,n)&&("ETIMEDOUT"===i.code||"ESOCKETTIMEDOUT"===i.code||"ECONNREFUSED"===i.code||"ECONNRESET"===i.code||"ENOENT"===i.code)?utils_delay(n.retryInterval).then(function(){return e._nextPolicy.sendRequest(t.clone())}).then(function(r){return systemErrorRetryPolicy_retry(e,t,r,n,i)}).catch(function(i){return systemErrorRetryPolicy_retry(e,t,r,n,i)}):null!=i?(i=n.error,Promise.reject(i)):Promise.resolve(r)}(t,e,r)})},SystemErrorRetryPolicy}(T);function getDefaultProxySettings(e){if(e||(e=function loadEnvironmentProxyValue(){if(process)return process.env[s.HTTPS_PROXY]?process.env[s.HTTPS_PROXY]:process.env[s.HTTPS_PROXY.toLowerCase()]?process.env[s.HTTPS_PROXY.toLowerCase()]:process.env[s.HTTP_PROXY]?process.env[s.HTTP_PROXY]:process.env[s.HTTP_PROXY.toLowerCase()]?process.env[s.HTTP_PROXY.toLowerCase()]:void 0}())){var t=E.parse(e);return{host:t.getScheme()+"://"+t.getHost(),port:Number.parseInt(t.getPort()||"80")}}}function proxyPolicy(e){return{create:function(t,r){return new W(t,r,e)}}}!function(e){e.Csv=",",e.Ssv=" ",e.Tsv="\t",e.Pipes="|",e.Multi="Multi"}(V||(V={}));var W=function(e){function ProxyPolicy(t,r,n){var i=e.call(this,t,r)||this;return i.proxySettings=n,i}return d.__extends(ProxyPolicy,e),ProxyPolicy.prototype.sendRequest=function(e){return e.proxySettings||(e.proxySettings=this.proxySettings),this._nextPolicy.sendRequest(e)},ProxyPolicy}(T),J=s.HttpConstants.StatusCodes;function throttlingRetryPolicy(){return{create:function(e,t){return new X(e,t)}}}var X=function(e){function ThrottlingRetryPolicy(t,r,n){var i=e.call(this,t,r)||this;return i._handleResponse=n||i._defaultResponseHandler,i}return d.__extends(ThrottlingRetryPolicy,e),ThrottlingRetryPolicy.prototype.sendRequest=function(e){return d.__awaiter(this,void 0,void 0,function(){var t=this;return d.__generator(this,function(r){return[2,this._nextPolicy.sendRequest(e.clone()).then(function(r){return r.status!==J.TooManyRequests?r:t._handleResponse(e,r)})]})})},ThrottlingRetryPolicy.prototype._defaultResponseHandler=function(e,t){return d.__awaiter(this,void 0,void 0,function(){var r,n,i=this;return d.__generator(this,function(o){return(r=t.headers.get(s.HeaderConstants.RETRY_AFTER))&&(n=ThrottlingRetryPolicy.parseRetryAfterHeader(r))?[2,delay(n).then(function(t){return i._nextPolicy.sendRequest(e)})]:[2,t]})})},ThrottlingRetryPolicy.parseRetryAfterHeader=function(e){var t=Number(e);return Number.isNaN(t)?ThrottlingRetryPolicy.parseDateRetryAfterHeader(e):1e3*t},ThrottlingRetryPolicy.parseDateRetryAfterHeader=function(e){try{var t=Date.now(),r=Date.parse(e)-t;return Number.isNaN(r)?void 0:r}catch(e){return}},ThrottlingRetryPolicy}(T),Y=function(){function ServiceClient(e,t){if(t||(t={}),e&&!e.signRequest)throw new Error("credentials argument needs to implement signRequest method");var r;if(this._withCredentials=t.withCredentials||!1,this._httpClient=t.httpClient||new k,this._requestPolicyOptions=new O(t.httpPipelineLogger),Array.isArray(t.requestPolicyFactories))r=t.requestPolicyFactories;else if(r=function createDefaultRequestPolicyFactories(e,t){var r=[];t.generateClientRequestIdHeader&&r.push(generateClientRequestIdPolicy(t.clientRequestIdHeaderName));e&&(!function isRequestPolicyFactory(e){return"function"==typeof e.create}(e)?r.push(signingPolicy(e)):r.push(e));var n=getValueOrFunctionResult(t.userAgentHeaderName,z),i=getValueOrFunctionResult(t.userAgent,getDefaultUserAgentValue);n&&i&&r.push(userAgentPolicy({key:n,value:i}));r.push(redirectPolicy()),r.push(function rpRegistrationPolicy(e){return void 0===e&&(e=30),{create:function(t,r){return new H(t,r,e)}}}(t.rpRegistrationRetryTimeout)),t.noRetryPolicy||(r.push(exponentialRetryPolicy()),r.push(systemErrorRetryPolicy()),r.push(throttlingRetryPolicy()));r.push(deserializationPolicy(t.deserializationContentTypes));var o=t.proxySettings||getDefaultProxySettings();o&&r.push(proxyPolicy(o));return r}(e,t),t.requestPolicyFactories){var n=t.requestPolicyFactories(r);n&&(r=n)}this._requestPolicyFactories=r}return ServiceClient.prototype.sendRequest=function(e){if(null==e||"object"!=typeof e)throw new Error("options cannot be null or undefined and it must be of type object.");var t;try{e instanceof p?(e.validateRequestProperties(),t=e):t=(t=new p).prepare(e)}catch(e){return Promise.reject(e)}var r=this._httpClient;if(this._requestPolicyFactories&&this._requestPolicyFactories.length>0)for(var n=this._requestPolicyFactories.length-1;n>=0;--n)r=this._requestPolicyFactories[n].create(r,this._requestPolicyOptions);return r.sendRequest(t)},ServiceClient.prototype.sendOperationRequest=function(e,t,r){"function"==typeof e.options&&(r=e.options,e.options=void 0);var n,i=new p;try{var o=t.baseUrl||this.baseUri;if(!o)throw new Error("If operationSpec.baseUrl is not specified, then the ServiceClient must have a baseUri string property that contains the base URL to use.");i.method=t.httpMethod,i.operationSpec=t;var s=E.parse(o);if(t.path&&s.appendPath(t.path),t.urlParameters&&t.urlParameters.length>0)for(var a=0,c=t.urlParameters;a<c.length;a++){var u=c[a],d=getOperationArgumentValueFromParameter(this,e,u,t.serializer);d=t.serializer.serialize(u.mapper,d,getPathStringFromParameter(u)),u.skipEncoding||(d=encodeURIComponent(d)),s.replaceAll("{"+(u.mapper.serializedName||getPathStringFromParameter(u))+"}",d)}if(t.queryParameters&&t.queryParameters.length>0)for(var h=0,f=t.queryParameters;h<f.length;h++){var m=f[h],g=getOperationArgumentValueFromParameter(this,e,m,t.serializer);if(null!=g){if(g=t.serializer.serialize(m.mapper,g,getPathStringFromParameter(m)),null!=m.collectionFormat)if(m.collectionFormat===V.Multi)if(0===g.length)g="";else for(var y in g){var v=g[y];g[y]=null==v?"":v.toString()}else g=g.join(m.collectionFormat);if(!m.skipEncoding)if(Array.isArray(g))for(var y in g)g[y]=encodeURIComponent(g[y]);else g=encodeURIComponent(g);s.setQueryParameter(m.mapper.serializedName||getPathStringFromParameter(m),g)}}i.url=s.toString();var b=t.contentType||this.requestContentType;if(b&&i.headers.set("Content-Type",b),t.headerParameters)for(var _=0,w=t.headerParameters;_<w.length;_++){var S=w[_],C=getOperationArgumentValueFromParameter(this,e,S,t.serializer);if(null!=C){C=t.serializer.serialize(S.mapper,C,getPathStringFromParameter(S));var x=S.mapper.headerCollectionPrefix;if(x)for(var k=0,R=Object.keys(C);k<R.length;k++){var T=R[k];i.headers.set(x+T,C[T])}else i.headers.set(S.mapper.serializedName||getPathStringFromParameter(S),C)}}var O=e.options;if(O){if(O.customHeaders)for(var I in O.customHeaders)i.headers.set(I,O.customHeaders[I]);O.abortSignal&&(i.abortSignal=O.abortSignal),O.timeout&&(i.timeout=O.timeout),O.onUploadProgress&&(i.onUploadProgress=O.onUploadProgress),O.onDownloadProgress&&(i.onDownloadProgress=O.onDownloadProgress)}i.withCredentials=this._withCredentials,function serializeRequestBody(e,t,r,n){if(n.requestBody&&n.requestBody.mapper){t.body=getOperationArgumentValueFromParameter(e,r,n.requestBody,n.serializer);var i=n.requestBody.mapper,o=i.required,s=i.xmlName,a=i.xmlElementName,c=i.serializedName,u=i.type.name;try{if(null!=t.body||o){var p=getPathStringFromParameter(n.requestBody);t.body=n.serializer.serialize(i,t.body,p);var d=u===l.Stream;n.isXML?u===l.Sequence?t.body=stringifyXML(function prepareXMLRootList(e,t){var r;return Array.isArray(e)||(e=[e]),(r={})[t]=e,r}(t.body,a||s||c),{rootName:s||c}):d||(t.body=stringifyXML(t.body,{rootName:s||c})):d||(t.body=JSON.stringify(t.body))}}catch(e){throw new Error('Error "'+e.message+'" occurred in serializing the payload - '+JSON.stringify(c,void 0,"  ")+".")}}else if(n.formDataParameters&&n.formDataParameters.length>0){t.formData={};for(var h=0,f=n.formDataParameters;h<f.length;h++){var m=f[h],g=getOperationArgumentValueFromParameter(e,r,m,n.serializer);if(null!=g){var y=m.mapper.serializedName||getPathStringFromParameter(m);t.formData[y]=n.serializer.serialize(m.mapper,g,getPathStringFromParameter(m))}}}}(this,i,e,t),null==i.streamResponseBody&&(i.streamResponseBody=isStreamOperation(t)),n=this.sendRequest(i).then(function(e){return flattenResponse(e,t.responses[e.status])})}catch(e){n=Promise.reject(e)}var N=r;return N&&n.then(function(e){return N(null,e._response.parsedBody,e._response.request,e._response)}).catch(function(e){return N(e)}),n},ServiceClient}();function getValueOrFunctionResult(e,t){var r;return"string"==typeof e?r=e:(r=t(),"function"==typeof e&&(r=e(r))),r}function getOperationArgumentValueFromParameter(e,t,r,n){return function getOperationArgumentValueFromParameterPath(e,t,r,n,i){var o;"string"==typeof r&&(r=[r]);if(Array.isArray(r)){if(r.length>0){if(n.isConstant)o=n.defaultValue;else{var s=getPropertyFromParameterPath(t,r);s.propertyFound||(s=getPropertyFromParameterPath(e,r));var a=!1;s.propertyFound||(a=n.required||"options"===r[0]&&2===r.length),o=a?n.defaultValue:s.propertyValue}var c=getPathStringFromParameterPath(r,n);i.serialize(n,o,c)}}else for(var u in n.required&&(o={}),r){var l=n.type.modelProperties[u],p=r[u],d=getOperationArgumentValueFromParameterPath(e,t,p,l,i),h=getPathStringFromParameterPath(p,l);i.serialize(l,d,h),void 0!==d&&(o||(o={}),o[u]=d)}return o}(e,t,r.parameterPath,r.mapper,n)}function getPropertyFromParameterPath(e,t){for(var r={propertyFound:!1},n=0;n<t.length;++n){var i=t[n];if(!(null!=e&&i in e))break;e=e[i]}return n===t.length&&(r.propertyValue=e,r.propertyFound=!0),r}function flattenResponse(e,t){var r=e.parsedHeaders,n=t&&t.bodyMapper,i=function(t){return Object.defineProperty(t,"_response",{value:e})};if(n){var o=n.type.name;if("Stream"===o)return i(d.__assign({},r,{blobBody:e.blobBody,readableStreamBody:e.readableStreamBody}));var s="Composite"===o&&n.type.modelProperties||{},a=Object.keys(s).some(function(e){return""===s[e].serializedName});if("Sequence"===o||a){for(var c=(e.parsedBody||[]).slice(),u=0,l=Object.keys(s);u<l.length;u++){var p=l[u];s[p].serializedName&&(c[p]=e.parsedBody[p])}if(r)for(var h=0,f=Object.keys(r);h<f.length;h++){c[p=f[h]]=r[p]}return i(c),c}if("Composite"===o||"Dictionary"===o)return i(d.__assign({},r,e.parsedBody))}return n||"HEAD"===e.request.method?i(d.__assign({},r,{body:e.parsedBody})):i(d.__assign({},r,e.parsedBody))}function logPolicy(e){return void 0===e&&(e=console.log),{create:function(t,r){return new K(t,r,e)}}}var K=function(e){function LogPolicy(t,r,n){void 0===n&&(n=console.log);var i=e.call(this,t,r)||this;return i.logger=n,i}return d.__extends(LogPolicy,e),LogPolicy.prototype.sendRequest=function(e){var t=this;return this._nextPolicy.sendRequest(e).then(function(e){return function logResponse(e,t){e.logger(">> Request: "+JSON.stringify(t.request,void 0,2)),e.logger(">> Response status code: "+t.status);var r=t.bodyAsText;return e.logger(">> Body: "+r),Promise.resolve(t)}(t,e)})},LogPolicy}(T);var Q=s.HeaderConstants,Z="Bearer",ee=function(){function TokenCredentials(e,t){if(void 0===t&&(t=Z),this.authorizationScheme=Z,!e)throw new Error("token cannot be null or undefined.");this.token=e,this.authorizationScheme=t}return TokenCredentials.prototype.signRequest=function(e){return e.headers||(e.headers=new n),e.headers.set(Q.AUTHORIZATION,this.authorizationScheme+" "+this.token),Promise.resolve(e)},TokenCredentials}(),te=s.HeaderConstants,re="Basic",ne=function(){function BasicAuthenticationCredentials(e,t,r){if(void 0===r&&(r=re),this.authorizationScheme=re,null==e||"string"!=typeof e.valueOf())throw new Error("userName cannot be null or undefined and must be of type string.");if(null==t||"string"!=typeof t.valueOf())throw new Error("password cannot be null or undefined and must be of type string.");this.userName=e,this.password=t,this.authorizationScheme=r}return BasicAuthenticationCredentials.prototype.signRequest=function(e){var t=this.userName+":"+this.password,r=this.authorizationScheme+" "+function encodeString(e){return Buffer.from(e).toString("base64")}(t);return e.headers||(e.headers=new n),e.headers.set(te.AUTHORIZATION,r),Promise.resolve(e)},BasicAuthenticationCredentials}(),ie=function(){function ApiKeyCredentials(e){if(!e||e&&!e.inHeader&&!e.inQuery)throw new Error('options cannot be null or undefined. Either "inHeader" or "inQuery" property of the options object needs to be provided.');this.inHeader=e.inHeader,this.inQuery=e.inQuery}return ApiKeyCredentials.prototype.signRequest=function(e){if(!e)return Promise.reject(new Error('webResource cannot be null or undefined and must be of type "object".'));if(this.inHeader)for(var t in e.headers||(e.headers=new n),this.inHeader)e.headers.set(t,this.inHeader[t]);if(this.inQuery){if(!e.url)return Promise.reject(new Error("url cannot be null in the request object."));for(var r in e.url.indexOf("?")<0&&(e.url+="?"),this.inQuery)e.url.endsWith("?")||(e.url+="&"),e.url+=r+"="+this.inQuery[r]}return Promise.resolve(e)},ApiKeyCredentials}(),oe=function(e){function TopicCredentials(t){if(!t||t&&"string"!=typeof t)throw new Error("topicKey cannot be null or undefined and must be of type string.");var r={inHeader:{"aeg-sas-key":t}};return e.call(this,r)||this}return d.__extends(TopicCredentials,e),TopicCredentials}(ie);r.d(t,"WebResource",function(){return p}),r.d(t,"DefaultHttpClient",function(){return k}),r.d(t,"HttpHeaders",function(){return n}),r.d(t,"HttpPipelineLogLevel",function(){return x}),r.d(t,"RestError",function(){return b}),r.d(t,"ServiceClient",function(){return Y}),r.d(t,"flattenResponse",function(){return flattenResponse}),r.d(t,"QueryCollectionFormat",function(){return V}),r.d(t,"Constants",function(){return s}),r.d(t,"logPolicy",function(){return logPolicy}),r.d(t,"BaseRequestPolicy",function(){return T}),r.d(t,"RequestPolicyOptions",function(){return O}),r.d(t,"generateClientRequestIdPolicy",function(){return generateClientRequestIdPolicy}),r.d(t,"exponentialRetryPolicy",function(){return exponentialRetryPolicy}),r.d(t,"systemErrorRetryPolicy",function(){return systemErrorRetryPolicy}),r.d(t,"throttlingRetryPolicy",function(){return throttlingRetryPolicy}),r.d(t,"getDefaultProxySettings",function(){return getDefaultProxySettings}),r.d(t,"proxyPolicy",function(){return proxyPolicy}),r.d(t,"redirectPolicy",function(){return redirectPolicy}),r.d(t,"signingPolicy",function(){return signingPolicy}),r.d(t,"userAgentPolicy",function(){return userAgentPolicy}),r.d(t,"getDefaultUserAgentValue",function(){return getDefaultUserAgentValue}),r.d(t,"deserializationPolicy",function(){return deserializationPolicy}),r.d(t,"deserializeResponseBody",function(){return deserializeResponseBody}),r.d(t,"MapperType",function(){return l}),r.d(t,"Serializer",function(){return u}),r.d(t,"serializeObject",function(){return serializeObject}),r.d(t,"stripRequest",function(){return stripRequest}),r.d(t,"stripResponse",function(){return stripResponse}),r.d(t,"delay",function(){return utils_delay}),r.d(t,"executePromisesSequentially",function(){return executePromisesSequentially}),r.d(t,"generateUuid",function(){return generateUuid}),r.d(t,"encodeUri",function(){return encodeUri}),r.d(t,"promiseToCallback",function(){return promiseToCallback}),r.d(t,"promiseToServiceCallback",function(){return promiseToServiceCallback}),r.d(t,"isValidUuid",function(){return isValidUuid}),r.d(t,"applyMixins",function(){return applyMixins}),r.d(t,"isNode",function(){return a}),r.d(t,"isDuration",function(){return isDuration}),r.d(t,"URLBuilder",function(){return E}),r.d(t,"URLQuery",function(){return w}),r.d(t,"TokenCredentials",function(){return ee}),r.d(t,"BasicAuthenticationCredentials",function(){return ne}),r.d(t,"ApiKeyCredentials",function(){return ie}),r.d(t,"TopicCredentials",function(){return oe})},function(e,t,r){e.exports=r(911)},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(165);t.ApplicationTokenCredentials=n.ApplicationTokenCredentials;var i=r(232);t.DeviceTokenCredentials=i.DeviceTokenCredentials;var o=r(956);t.createAuthenticator=o.createAuthenticator;var s=r(233);t.MSIAppServiceTokenCredentials=s.MSIAppServiceTokenCredentials;var a=r(166);t.MSITokenCredentials=a.MSITokenCredentials;var c=r(234);t.MSIVmTokenCredentials=c.MSIVmTokenCredentials;var u=r(129);t.TokenCredentialsBase=u.TokenCredentialsBase;var l=r(235);t.UserTokenCredentials=l.UserTokenCredentials;var p=r(99);t.AuthConstants=p.AuthConstants;var d=r(957);t.interactiveLogin=d.interactive,t.interactiveLoginWithAuthResponse=d.withInteractiveWithAuthResponse,t.loginWithUsernamePassword=d.withUsernamePassword,t.loginWithUsernamePasswordWithAuthResponse=d.withUsernamePasswordWithAuthResponse,t.loginWithServicePrincipalSecret=d.withServicePrincipalSecret,t.loginWithServicePrincipalSecretWithAuthResponse=d.withServicePrincipalSecretWithAuthResponse,t.loginWithAuthFile=d.withAuthFile,t.loginWithAuthFileWithAuthResponse=d.withAuthFileWithAuthResponse,t.loginWithVmMSI=d.loginWithVmMSI,t.loginWithAppServiceMSI=d.loginWithAppServiceMSI},function(e,t,r){var n=r(267);function once(e){var t=function(){return t.called?t.value:(t.called=!0,t.value=e.apply(this,arguments))};return t.called=!1,t}function onceStrict(e){var t=function(){if(t.called)throw new Error(t.onceError);return t.called=!0,t.value=e.apply(this,arguments)},r=e.name||"Function wrapped with `once`";return t.onceError=r+" shouldn't be called more than once",t.called=!1,t}e.exports=n(once),e.exports.strict=n(onceStrict),once.proto=once(function(){Object.defineProperty(Function.prototype,"once",{value:function(){return once(this)},configurable:!0}),Object.defineProperty(Function.prototype,"onceStrict",{value:function(){return onceStrict(this)},configurable:!0})})},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(50),i=r(28),o=function(){function CorrelationContextManager(){}return CorrelationContextManager.getCurrentContext=function(){return CorrelationContextManager.enabled?Zone.current.get("context"):null},CorrelationContextManager.generateContextObject=function(e,t,r,n){return t=t||e,this.enabled?{operation:{name:r,id:e,parentId:t},customProperties:new s(n)}:null},CorrelationContextManager.runWithContext=function(e,t){CorrelationContextManager.enabled?Zone.current.fork({name:"AI-"+(e&&e.operation.parentId||"Unknown"),properties:{context:e}}).run(t):t()},CorrelationContextManager.wrapCallback=function(e){return CorrelationContextManager.enabled?Zone.current.wrap(e,"User-wrapped method"):e},CorrelationContextManager.enable=function(){this.isNodeVersionCompatible()?(r(552),this.hasEverEnabled||(this.hasEverEnabled=!0,i.channel.addContextPreservation(function(e){return Zone.current.wrap(e,"AI-ContextPreservation")}),this.patchError(),this.patchTimers(["setTimeout","setInterval"])),this.enabled=!0):this.enabled=!1},CorrelationContextManager.disable=function(){this.enabled=!1},CorrelationContextManager.isNodeVersionCompatible=function(){var e=process.versions.node.split(".");return parseInt(e[0])>3||parseInt(e[0])>2&&parseInt(e[1])>2},CorrelationContextManager.requireForPatch=function(e){var t=null;try{t=r(554)(e)}catch(e){return null}return t},CorrelationContextManager.patchTimers=function(e){e.forEach(function(e){var t=global[e];global[e]=function(){var e=t.apply(this,arguments);return e.toString=function(){return this.data&&void 0!==this.data.handleId?this.data.handleId.toString():Object.prototype.toString.call(this)},e}})},CorrelationContextManager.patchError=function(){var e=global.Error;function AppInsightsAsyncCorrelatedErrorWrapper(){if(!(this instanceof AppInsightsAsyncCorrelatedErrorWrapper))return AppInsightsAsyncCorrelatedErrorWrapper.apply(Object.create(AppInsightsAsyncCorrelatedErrorWrapper.prototype),arguments);var t=e.stackRewrite;if(e.prepareStackTrace){e.stackRewrite=!1;var r=e.prepareStackTrace;e.prepareStackTrace=function(e,t){for(var n=!1,i=0;i<t.length;i++)if(-1===t[i].getFileName().indexOf("AutoCollection/CorrelationContextManager")&&-1===t[i].getFileName().indexOf("AutoCollection\\CorrelationContextManager")){if(n)break}else n=!0;return i=Math.max(0,i-1),t.splice(0,i),r(e,t)}}if(e.apply(this,arguments),e.stackRewrite=t,this.stack&&"string"==typeof this.stack){var n=this.stack.split("\n");n.length>3&&0===n[2].trim().indexOf("at Error.AppInsightsAsyncCorrelatedErrorWrapper")&&n.splice(2,1),this.stack=n.map(function(e){var t=e.indexOf(") [");return t>-1&&(e=e.substr(0,t+1)),e}).join("\n")}for(var i=Object.getOwnPropertyNames(this).concat(Object.keys(this)),o=0;o<i.length;o++){var s=i[o],a=Zone.__symbol__(s);Object.defineProperty(this,s,{enumerable:!1}),Object.defineProperty(this,a,{enumerable:!1,writable:!0})}return this}AppInsightsAsyncCorrelatedErrorWrapper.prototype=e.prototype;for(var t=Object.getOwnPropertyNames(e),r=0;r<t.length;r++){var n=t[r];AppInsightsAsyncCorrelatedErrorWrapper[n]||Object.defineProperty(AppInsightsAsyncCorrelatedErrorWrapper,n,Object.getOwnPropertyDescriptor(e,n))}global.Error=AppInsightsAsyncCorrelatedErrorWrapper},CorrelationContextManager.enabled=!1,CorrelationContextManager.hasEverEnabled=!1,CorrelationContextManager}();t.CorrelationContextManager=o;var s=function(){function CustomPropertiesImpl(e){this.props=[],this.addHeaderData(e)}return CustomPropertiesImpl.prototype.addHeaderData=function(e){var t=e?e.split(", "):[];this.props=t.map(function(e){var t=e.split("=");return{key:t[0],value:t[1]}}).concat(this.props)},CustomPropertiesImpl.prototype.serializeToHeader=function(){return this.props.map(function(e){return e.key+"="+e.value}).join(", ")},CustomPropertiesImpl.prototype.getProperty=function(e){for(var t=0;t<this.props.length;++t){var r=this.props[t];if(r.key===e)return r.value}},CustomPropertiesImpl.prototype.setProperty=function(e,t){if(CustomPropertiesImpl.bannedCharacters.test(e)||CustomPropertiesImpl.bannedCharacters.test(t))n.warn("Correlation context property keys and values must not contain ',' or '='. setProperty was called with key: "+e+" and value: "+t);else{for(var r=0;r<this.props.length;++r){var i=this.props[r];if(i.key===e)return void(i.value=t)}this.props.push({key:e,value:t})}},CustomPropertiesImpl.bannedCharacters=/[,=]/,CustomPropertiesImpl}()},function(e,t,r){"use strict";e.exports={requestContextHeader:"request-context",requestContextSourceKey:"appId",requestContextTargetKey:"appId",requestContextSourceRoleNameKey:"roleName",requestContextTargetRoleNameKey:"roleName",requestIdHeader:"request-id",parentIdHeader:"x-ms-request-id",rootIdHeader:"x-ms-request-root-id",correlationContextHeader:"correlation-context"}},function(e,t){e.exports=require("zlib")},function(e,t,r){(function(e){var n;
/**
 * @license
 * Lodash <https://lodash.com/>
 * Copyright JS Foundation and other contributors <https://js.foundation/>
 * Released under MIT license <https://lodash.com/license>
 * Based on Underscore.js 1.8.3 <http://underscorejs.org/LICENSE>
 * Copyright Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors
 */(function(){var i,o=200,s="Unsupported core-js use. Try https://npms.io/search?q=ponyfill.",a="Expected a function",c="__lodash_hash_undefined__",u=500,l="__lodash_placeholder__",p=1,d=2,h=4,f=1,m=2,g=1,y=2,v=4,b=8,_=16,w=32,E=64,S=128,C=256,x=512,k=30,R="...",T=800,O=16,I=1,N=2,A=1/0,P=9007199254740991,L=1.7976931348623157e308,D=NaN,M=4294967295,j=M-1,q=M>>>1,F=[["ary",S],["bind",g],["bindKey",y],["curry",b],["curryRight",_],["flip",x],["partial",w],["partialRight",E],["rearg",C]],z="[object Arguments]",U="[object Array]",B="[object AsyncFunction]",H="[object Boolean]",$="[object Date]",V="[object DOMException]",G="[object Error]",W="[object Function]",J="[object GeneratorFunction]",X="[object Map]",Y="[object Number]",K="[object Null]",Q="[object Object]",Z="[object Proxy]",ee="[object RegExp]",te="[object Set]",re="[object String]",ne="[object Symbol]",ie="[object Undefined]",oe="[object WeakMap]",se="[object WeakSet]",ae="[object ArrayBuffer]",ce="[object DataView]",ue="[object Float32Array]",le="[object Float64Array]",pe="[object Int8Array]",de="[object Int16Array]",he="[object Int32Array]",fe="[object Uint8Array]",me="[object Uint8ClampedArray]",ge="[object Uint16Array]",ye="[object Uint32Array]",ve=/\b__p \+= '';/g,be=/\b(__p \+=) '' \+/g,_e=/(__e\(.*?\)|\b__t\)) \+\n'';/g,we=/&(?:amp|lt|gt|quot|#39);/g,Ee=/[&<>"']/g,Se=RegExp(we.source),Ce=RegExp(Ee.source),xe=/<%-([\s\S]+?)%>/g,ke=/<%([\s\S]+?)%>/g,Re=/<%=([\s\S]+?)%>/g,Te=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,Oe=/^\w*$/,Ie=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,Ne=/[\\^$.*+?()[\]{}|]/g,Ae=RegExp(Ne.source),Pe=/^\s+|\s+$/g,Le=/^\s+/,De=/\s+$/,Me=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/,je=/\{\n\/\* \[wrapped with (.+)\] \*/,qe=/,? & /,Fe=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g,ze=/\\(\\)?/g,Ue=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,Be=/\w*$/,He=/^[-+]0x[0-9a-f]+$/i,$e=/^0b[01]+$/i,Ve=/^\[object .+?Constructor\]$/,Ge=/^0o[0-7]+$/i,We=/^(?:0|[1-9]\d*)$/,Je=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,Xe=/($^)/,Ye=/['\n\r\u2028\u2029\\]/g,Ke="\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff",Qe="\\xac\\xb1\\xd7\\xf7\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf\\u2000-\\u206f \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",Ze="[\\ud800-\\udfff]",et="["+Qe+"]",tt="["+Ke+"]",rt="\\d+",nt="[\\u2700-\\u27bf]",it="[a-z\\xdf-\\xf6\\xf8-\\xff]",ot="[^\\ud800-\\udfff"+Qe+rt+"\\u2700-\\u27bfa-z\\xdf-\\xf6\\xf8-\\xffA-Z\\xc0-\\xd6\\xd8-\\xde]",st="\\ud83c[\\udffb-\\udfff]",at="[^\\ud800-\\udfff]",ct="(?:\\ud83c[\\udde6-\\uddff]){2}",ut="[\\ud800-\\udbff][\\udc00-\\udfff]",lt="[A-Z\\xc0-\\xd6\\xd8-\\xde]",pt="(?:"+it+"|"+ot+")",dt="(?:"+lt+"|"+ot+")",ht="(?:"+tt+"|"+st+")"+"?",ft="[\\ufe0e\\ufe0f]?"+ht+("(?:\\u200d(?:"+[at,ct,ut].join("|")+")[\\ufe0e\\ufe0f]?"+ht+")*"),mt="(?:"+[nt,ct,ut].join("|")+")"+ft,gt="(?:"+[at+tt+"?",tt,ct,ut,Ze].join("|")+")",yt=RegExp("[']","g"),vt=RegExp(tt,"g"),bt=RegExp(st+"(?="+st+")|"+gt+ft,"g"),_t=RegExp([lt+"?"+it+"+(?:['](?:d|ll|m|re|s|t|ve))?(?="+[et,lt,"$"].join("|")+")",dt+"+(?:['](?:D|LL|M|RE|S|T|VE))?(?="+[et,lt+pt,"$"].join("|")+")",lt+"?"+pt+"+(?:['](?:d|ll|m|re|s|t|ve))?",lt+"+(?:['](?:D|LL|M|RE|S|T|VE))?","\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])","\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",rt,mt].join("|"),"g"),wt=RegExp("[\\u200d\\ud800-\\udfff"+Ke+"\\ufe0e\\ufe0f]"),Et=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,St=["Array","Buffer","DataView","Date","Error","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Map","Math","Object","Promise","RegExp","Set","String","Symbol","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap","_","clearTimeout","isFinite","parseInt","setTimeout"],Ct=-1,xt={};xt[ue]=xt[le]=xt[pe]=xt[de]=xt[he]=xt[fe]=xt[me]=xt[ge]=xt[ye]=!0,xt[z]=xt[U]=xt[ae]=xt[H]=xt[ce]=xt[$]=xt[G]=xt[W]=xt[X]=xt[Y]=xt[Q]=xt[ee]=xt[te]=xt[re]=xt[oe]=!1;var kt={};kt[z]=kt[U]=kt[ae]=kt[ce]=kt[H]=kt[$]=kt[ue]=kt[le]=kt[pe]=kt[de]=kt[he]=kt[X]=kt[Y]=kt[Q]=kt[ee]=kt[te]=kt[re]=kt[ne]=kt[fe]=kt[me]=kt[ge]=kt[ye]=!0,kt[G]=kt[W]=kt[oe]=!1;var Rt={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},Tt=parseFloat,Ot=parseInt,It="object"==typeof global&&global&&global.Object===Object&&global,Nt="object"==typeof self&&self&&self.Object===Object&&self,At=It||Nt||Function("return this")(),Pt=t&&!t.nodeType&&t,Lt=Pt&&"object"==typeof e&&e&&!e.nodeType&&e,Dt=Lt&&Lt.exports===Pt,Mt=Dt&&It.process,jt=function(){try{var e=Lt&&Lt.require&&Lt.require("util").types;return e||Mt&&Mt.binding&&Mt.binding("util")}catch(e){}}(),qt=jt&&jt.isArrayBuffer,Ft=jt&&jt.isDate,zt=jt&&jt.isMap,Ut=jt&&jt.isRegExp,Bt=jt&&jt.isSet,Ht=jt&&jt.isTypedArray;function apply(e,t,r){switch(r.length){case 0:return e.call(t);case 1:return e.call(t,r[0]);case 2:return e.call(t,r[0],r[1]);case 3:return e.call(t,r[0],r[1],r[2])}return e.apply(t,r)}function arrayAggregator(e,t,r,n){for(var i=-1,o=null==e?0:e.length;++i<o;){var s=e[i];t(n,s,r(s),e)}return n}function arrayEach(e,t){for(var r=-1,n=null==e?0:e.length;++r<n&&!1!==t(e[r],r,e););return e}function arrayEachRight(e,t){for(var r=null==e?0:e.length;r--&&!1!==t(e[r],r,e););return e}function arrayEvery(e,t){for(var r=-1,n=null==e?0:e.length;++r<n;)if(!t(e[r],r,e))return!1;return!0}function arrayFilter(e,t){for(var r=-1,n=null==e?0:e.length,i=0,o=[];++r<n;){var s=e[r];t(s,r,e)&&(o[i++]=s)}return o}function arrayIncludes(e,t){return!!(null==e?0:e.length)&&baseIndexOf(e,t,0)>-1}function arrayIncludesWith(e,t,r){for(var n=-1,i=null==e?0:e.length;++n<i;)if(r(t,e[n]))return!0;return!1}function arrayMap(e,t){for(var r=-1,n=null==e?0:e.length,i=Array(n);++r<n;)i[r]=t(e[r],r,e);return i}function arrayPush(e,t){for(var r=-1,n=t.length,i=e.length;++r<n;)e[i+r]=t[r];return e}function arrayReduce(e,t,r,n){var i=-1,o=null==e?0:e.length;for(n&&o&&(r=e[++i]);++i<o;)r=t(r,e[i],i,e);return r}function arrayReduceRight(e,t,r,n){var i=null==e?0:e.length;for(n&&i&&(r=e[--i]);i--;)r=t(r,e[i],i,e);return r}function arraySome(e,t){for(var r=-1,n=null==e?0:e.length;++r<n;)if(t(e[r],r,e))return!0;return!1}var $t=baseProperty("length");function baseFindKey(e,t,r){var n;return r(e,function(e,r,i){if(t(e,r,i))return n=r,!1}),n}function baseFindIndex(e,t,r,n){for(var i=e.length,o=r+(n?1:-1);n?o--:++o<i;)if(t(e[o],o,e))return o;return-1}function baseIndexOf(e,t,r){return t==t?function strictIndexOf(e,t,r){var n=r-1,i=e.length;for(;++n<i;)if(e[n]===t)return n;return-1}(e,t,r):baseFindIndex(e,baseIsNaN,r)}function baseIndexOfWith(e,t,r,n){for(var i=r-1,o=e.length;++i<o;)if(n(e[i],t))return i;return-1}function baseIsNaN(e){return e!=e}function baseMean(e,t){var r=null==e?0:e.length;return r?baseSum(e,t)/r:D}function baseProperty(e){return function(t){return null==t?i:t[e]}}function basePropertyOf(e){return function(t){return null==e?i:e[t]}}function baseReduce(e,t,r,n,i){return i(e,function(e,i,o){r=n?(n=!1,e):t(r,e,i,o)}),r}function baseSum(e,t){for(var r,n=-1,o=e.length;++n<o;){var s=t(e[n]);s!==i&&(r=r===i?s:r+s)}return r}function baseTimes(e,t){for(var r=-1,n=Array(e);++r<e;)n[r]=t(r);return n}function baseUnary(e){return function(t){return e(t)}}function baseValues(e,t){return arrayMap(t,function(t){return e[t]})}function cacheHas(e,t){return e.has(t)}function charsStartIndex(e,t){for(var r=-1,n=e.length;++r<n&&baseIndexOf(t,e[r],0)>-1;);return r}function charsEndIndex(e,t){for(var r=e.length;r--&&baseIndexOf(t,e[r],0)>-1;);return r}var Vt=basePropertyOf({"":"A","":"A","":"A","":"A","":"A","":"A","":"a","":"a","":"a","":"a","":"a","":"a","":"C","":"c","":"D","":"d","":"E","":"E","":"E","":"E","":"e","":"e","":"e","":"e","":"I","":"I","":"I","":"I","":"i","":"i","":"i","":"i","":"N","":"n","":"O","":"O","":"O","":"O","":"O","":"O","":"o","":"o","":"o","":"o","":"o","":"o","":"U","":"U","":"U","":"U","":"u","":"u","":"u","":"u","":"Y","":"y","":"y","":"Ae","":"ae","":"Th","":"th","":"ss","":"A","":"A","":"A","":"a","":"a","":"a","":"C","":"C","":"C","":"C","":"c","":"c","":"c","":"c","":"D","":"D","":"d","":"d","":"E","":"E","":"E","":"E","":"E","":"e","":"e","":"e","":"e","":"e","":"G","":"G","":"G","":"G","":"g","":"g","":"g","":"g","":"H","":"H","":"h","":"h","":"I","":"I","":"I","":"I","":"I","":"i","":"i","":"i","":"i","":"i","":"J","":"j","":"K","":"k","":"k","":"L","":"L","":"L","":"L","":"L","":"l","":"l","":"l","":"l","":"l","":"N","":"N","":"N","":"N","":"n","":"n","":"n","":"n","":"O","":"O","":"O","":"o","":"o","":"o","":"R","":"R","":"R","":"r","":"r","":"r","":"S","":"S","":"S","":"S","":"s","":"s","":"s","":"s","":"T","":"T","":"T","":"t","":"t","":"t","":"U","":"U","":"U","":"U","":"U","":"U","":"u","":"u","":"u","":"u","":"u","":"u","":"W","":"w","":"Y","":"y","":"Y","":"Z","":"Z","":"Z","":"z","":"z","":"z","":"IJ","":"ij","":"Oe","":"oe","":"'n","":"s"}),Gt=basePropertyOf({"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"});function escapeStringChar(e){return"\\"+Rt[e]}function hasUnicode(e){return wt.test(e)}function mapToArray(e){var t=-1,r=Array(e.size);return e.forEach(function(e,n){r[++t]=[n,e]}),r}function overArg(e,t){return function(r){return e(t(r))}}function replaceHolders(e,t){for(var r=-1,n=e.length,i=0,o=[];++r<n;){var s=e[r];s!==t&&s!==l||(e[r]=l,o[i++]=r)}return o}function setToArray(e){var t=-1,r=Array(e.size);return e.forEach(function(e){r[++t]=e}),r}function setToPairs(e){var t=-1,r=Array(e.size);return e.forEach(function(e){r[++t]=[e,e]}),r}function stringSize(e){return hasUnicode(e)?function unicodeSize(e){var t=bt.lastIndex=0;for(;bt.test(e);)++t;return t}(e):$t(e)}function stringToArray(e){return hasUnicode(e)?function unicodeToArray(e){return e.match(bt)||[]}(e):function asciiToArray(e){return e.split("")}(e)}var Wt=basePropertyOf({"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"});var Jt=function runInContext(e){var t,r=(e=null==e?At:Jt.defaults(At.Object(),e,Jt.pick(At,St))).Array,n=e.Date,Ke=e.Error,Qe=e.Function,Ze=e.Math,et=e.Object,tt=e.RegExp,rt=e.String,nt=e.TypeError,it=r.prototype,ot=Qe.prototype,st=et.prototype,at=e["__core-js_shared__"],ct=ot.toString,ut=st.hasOwnProperty,lt=0,pt=(t=/[^.]+$/.exec(at&&at.keys&&at.keys.IE_PROTO||""))?"Symbol(src)_1."+t:"",dt=st.toString,ht=ct.call(et),ft=At._,mt=tt("^"+ct.call(ut).replace(Ne,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),gt=Dt?e.Buffer:i,bt=e.Symbol,wt=e.Uint8Array,Rt=gt?gt.allocUnsafe:i,It=overArg(et.getPrototypeOf,et),Nt=et.create,Pt=st.propertyIsEnumerable,Lt=it.splice,Mt=bt?bt.isConcatSpreadable:i,jt=bt?bt.iterator:i,$t=bt?bt.toStringTag:i,Xt=function(){try{var e=getNative(et,"defineProperty");return e({},"",{}),e}catch(e){}}(),Yt=e.clearTimeout!==At.clearTimeout&&e.clearTimeout,Kt=n&&n.now!==At.Date.now&&n.now,Qt=e.setTimeout!==At.setTimeout&&e.setTimeout,Zt=Ze.ceil,er=Ze.floor,tr=et.getOwnPropertySymbols,rr=gt?gt.isBuffer:i,nr=e.isFinite,ir=it.join,or=overArg(et.keys,et),sr=Ze.max,ar=Ze.min,cr=n.now,ur=e.parseInt,lr=Ze.random,pr=it.reverse,dr=getNative(e,"DataView"),hr=getNative(e,"Map"),fr=getNative(e,"Promise"),mr=getNative(e,"Set"),gr=getNative(e,"WeakMap"),yr=getNative(et,"create"),vr=gr&&new gr,br={},_r=toSource(dr),wr=toSource(hr),Er=toSource(fr),Sr=toSource(mr),Cr=toSource(gr),xr=bt?bt.prototype:i,kr=xr?xr.valueOf:i,Rr=xr?xr.toString:i;function lodash(e){if(isObjectLike(e)&&!An(e)&&!(e instanceof LazyWrapper)){if(e instanceof LodashWrapper)return e;if(ut.call(e,"__wrapped__"))return wrapperClone(e)}return new LodashWrapper(e)}var Tr=function(){function object(){}return function(e){if(!isObject(e))return{};if(Nt)return Nt(e);object.prototype=e;var t=new object;return object.prototype=i,t}}();function baseLodash(){}function LodashWrapper(e,t){this.__wrapped__=e,this.__actions__=[],this.__chain__=!!t,this.__index__=0,this.__values__=i}function LazyWrapper(e){this.__wrapped__=e,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=M,this.__views__=[]}function Hash(e){var t=-1,r=null==e?0:e.length;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}function ListCache(e){var t=-1,r=null==e?0:e.length;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}function MapCache(e){var t=-1,r=null==e?0:e.length;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}function SetCache(e){var t=-1,r=null==e?0:e.length;for(this.__data__=new MapCache;++t<r;)this.add(e[t])}function Stack(e){var t=this.__data__=new ListCache(e);this.size=t.size}function arrayLikeKeys(e,t){var r=An(e),n=!r&&Nn(e),i=!r&&!n&&Ln(e),o=!r&&!n&&!i&&Fn(e),s=r||n||i||o,a=s?baseTimes(e.length,rt):[],c=a.length;for(var u in e)!t&&!ut.call(e,u)||s&&("length"==u||i&&("offset"==u||"parent"==u)||o&&("buffer"==u||"byteLength"==u||"byteOffset"==u)||isIndex(u,c))||a.push(u);return a}function arraySample(e){var t=e.length;return t?e[baseRandom(0,t-1)]:i}function arraySampleSize(e,t){return shuffleSelf(copyArray(e),baseClamp(t,0,e.length))}function arrayShuffle(e){return shuffleSelf(copyArray(e))}function assignMergeValue(e,t,r){(r===i||eq(e[t],r))&&(r!==i||t in e)||baseAssignValue(e,t,r)}function assignValue(e,t,r){var n=e[t];ut.call(e,t)&&eq(n,r)&&(r!==i||t in e)||baseAssignValue(e,t,r)}function assocIndexOf(e,t){for(var r=e.length;r--;)if(eq(e[r][0],t))return r;return-1}function baseAggregator(e,t,r,n){return Or(e,function(e,i,o){t(n,e,r(e),o)}),n}function baseAssign(e,t){return e&&copyObject(t,keys(t),e)}function baseAssignValue(e,t,r){"__proto__"==t&&Xt?Xt(e,t,{configurable:!0,enumerable:!0,value:r,writable:!0}):e[t]=r}function baseAt(e,t){for(var n=-1,o=t.length,s=r(o),a=null==e;++n<o;)s[n]=a?i:get(e,t[n]);return s}function baseClamp(e,t,r){return e==e&&(r!==i&&(e=e<=r?e:r),t!==i&&(e=e>=t?e:t)),e}function baseClone(e,t,r,n,o,s){var a,c=t&p,u=t&d,l=t&h;if(r&&(a=o?r(e,n,o,s):r(e)),a!==i)return a;if(!isObject(e))return e;var f=An(e);if(f){if(a=function initCloneArray(e){var t=e.length,r=new e.constructor(t);return t&&"string"==typeof e[0]&&ut.call(e,"index")&&(r.index=e.index,r.input=e.input),r}(e),!c)return copyArray(e,a)}else{var m=Ur(e),g=m==W||m==J;if(Ln(e))return cloneBuffer(e,c);if(m==Q||m==z||g&&!o){if(a=u||g?{}:initCloneObject(e),!c)return u?function copySymbolsIn(e,t){return copyObject(e,zr(e),t)}(e,function baseAssignIn(e,t){return e&&copyObject(t,keysIn(t),e)}(a,e)):function copySymbols(e,t){return copyObject(e,Fr(e),t)}(e,baseAssign(a,e))}else{if(!kt[m])return o?e:{};a=function initCloneByTag(e,t,r){var n=e.constructor;switch(t){case ae:return cloneArrayBuffer(e);case H:case $:return new n(+e);case ce:return function cloneDataView(e,t){var r=t?cloneArrayBuffer(e.buffer):e.buffer;return new e.constructor(r,e.byteOffset,e.byteLength)}(e,r);case ue:case le:case pe:case de:case he:case fe:case me:case ge:case ye:return cloneTypedArray(e,r);case X:return new n;case Y:case re:return new n(e);case ee:return function cloneRegExp(e){var t=new e.constructor(e.source,Be.exec(e));return t.lastIndex=e.lastIndex,t}(e);case te:return new n;case ne:return function cloneSymbol(e){return kr?et(kr.call(e)):{}}(e)}}(e,m,c)}}s||(s=new Stack);var y=s.get(e);if(y)return y;if(s.set(e,a),qn(e))return e.forEach(function(n){a.add(baseClone(n,t,r,n,e,s))}),a;if(Mn(e))return e.forEach(function(n,i){a.set(i,baseClone(n,t,r,i,e,s))}),a;var v=f?i:(l?u?getAllKeysIn:getAllKeys:u?keysIn:keys)(e);return arrayEach(v||e,function(n,i){v&&(n=e[i=n]),assignValue(a,i,baseClone(n,t,r,i,e,s))}),a}function baseConformsTo(e,t,r){var n=r.length;if(null==e)return!n;for(e=et(e);n--;){var o=r[n],s=t[o],a=e[o];if(a===i&&!(o in e)||!s(a))return!1}return!0}function baseDelay(e,t,r){if("function"!=typeof e)throw new nt(a);return $r(function(){e.apply(i,r)},t)}function baseDifference(e,t,r,n){var i=-1,s=arrayIncludes,a=!0,c=e.length,u=[],l=t.length;if(!c)return u;r&&(t=arrayMap(t,baseUnary(r))),n?(s=arrayIncludesWith,a=!1):t.length>=o&&(s=cacheHas,a=!1,t=new SetCache(t));e:for(;++i<c;){var p=e[i],d=null==r?p:r(p);if(p=n||0!==p?p:0,a&&d==d){for(var h=l;h--;)if(t[h]===d)continue e;u.push(p)}else s(t,d,n)||u.push(p)}return u}lodash.templateSettings={escape:xe,evaluate:ke,interpolate:Re,variable:"",imports:{_:lodash}},lodash.prototype=baseLodash.prototype,lodash.prototype.constructor=lodash,LodashWrapper.prototype=Tr(baseLodash.prototype),LodashWrapper.prototype.constructor=LodashWrapper,LazyWrapper.prototype=Tr(baseLodash.prototype),LazyWrapper.prototype.constructor=LazyWrapper,Hash.prototype.clear=function hashClear(){this.__data__=yr?yr(null):{},this.size=0},Hash.prototype.delete=function hashDelete(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t},Hash.prototype.get=function hashGet(e){var t=this.__data__;if(yr){var r=t[e];return r===c?i:r}return ut.call(t,e)?t[e]:i},Hash.prototype.has=function hashHas(e){var t=this.__data__;return yr?t[e]!==i:ut.call(t,e)},Hash.prototype.set=function hashSet(e,t){var r=this.__data__;return this.size+=this.has(e)?0:1,r[e]=yr&&t===i?c:t,this},ListCache.prototype.clear=function listCacheClear(){this.__data__=[],this.size=0},ListCache.prototype.delete=function listCacheDelete(e){var t=this.__data__,r=assocIndexOf(t,e);return!(r<0||(r==t.length-1?t.pop():Lt.call(t,r,1),--this.size,0))},ListCache.prototype.get=function listCacheGet(e){var t=this.__data__,r=assocIndexOf(t,e);return r<0?i:t[r][1]},ListCache.prototype.has=function listCacheHas(e){return assocIndexOf(this.__data__,e)>-1},ListCache.prototype.set=function listCacheSet(e,t){var r=this.__data__,n=assocIndexOf(r,e);return n<0?(++this.size,r.push([e,t])):r[n][1]=t,this},MapCache.prototype.clear=function mapCacheClear(){this.size=0,this.__data__={hash:new Hash,map:new(hr||ListCache),string:new Hash}},MapCache.prototype.delete=function mapCacheDelete(e){var t=getMapData(this,e).delete(e);return this.size-=t?1:0,t},MapCache.prototype.get=function mapCacheGet(e){return getMapData(this,e).get(e)},MapCache.prototype.has=function mapCacheHas(e){return getMapData(this,e).has(e)},MapCache.prototype.set=function mapCacheSet(e,t){var r=getMapData(this,e),n=r.size;return r.set(e,t),this.size+=r.size==n?0:1,this},SetCache.prototype.add=SetCache.prototype.push=function setCacheAdd(e){return this.__data__.set(e,c),this},SetCache.prototype.has=function setCacheHas(e){return this.__data__.has(e)},Stack.prototype.clear=function stackClear(){this.__data__=new ListCache,this.size=0},Stack.prototype.delete=function stackDelete(e){var t=this.__data__,r=t.delete(e);return this.size=t.size,r},Stack.prototype.get=function stackGet(e){return this.__data__.get(e)},Stack.prototype.has=function stackHas(e){return this.__data__.has(e)},Stack.prototype.set=function stackSet(e,t){var r=this.__data__;if(r instanceof ListCache){var n=r.__data__;if(!hr||n.length<o-1)return n.push([e,t]),this.size=++r.size,this;r=this.__data__=new MapCache(n)}return r.set(e,t),this.size=r.size,this};var Or=createBaseEach(baseForOwn),Ir=createBaseEach(baseForOwnRight,!0);function baseEvery(e,t){var r=!0;return Or(e,function(e,n,i){return r=!!t(e,n,i)}),r}function baseExtremum(e,t,r){for(var n=-1,o=e.length;++n<o;){var s=e[n],a=t(s);if(null!=a&&(c===i?a==a&&!isSymbol(a):r(a,c)))var c=a,u=s}return u}function baseFilter(e,t){var r=[];return Or(e,function(e,n,i){t(e,n,i)&&r.push(e)}),r}function baseFlatten(e,t,r,n,i){var o=-1,s=e.length;for(r||(r=isFlattenable),i||(i=[]);++o<s;){var a=e[o];t>0&&r(a)?t>1?baseFlatten(a,t-1,r,n,i):arrayPush(i,a):n||(i[i.length]=a)}return i}var Nr=createBaseFor(),Ar=createBaseFor(!0);function baseForOwn(e,t){return e&&Nr(e,t,keys)}function baseForOwnRight(e,t){return e&&Ar(e,t,keys)}function baseFunctions(e,t){return arrayFilter(t,function(t){return isFunction(e[t])})}function baseGet(e,t){for(var r=0,n=(t=castPath(t,e)).length;null!=e&&r<n;)e=e[toKey(t[r++])];return r&&r==n?e:i}function baseGetAllKeys(e,t,r){var n=t(e);return An(e)?n:arrayPush(n,r(e))}function baseGetTag(e){return null==e?e===i?ie:K:$t&&$t in et(e)?function getRawTag(e){var t=ut.call(e,$t),r=e[$t];try{e[$t]=i;var n=!0}catch(e){}var o=dt.call(e);return n&&(t?e[$t]=r:delete e[$t]),o}(e):function objectToString(e){return dt.call(e)}(e)}function baseGt(e,t){return e>t}function baseHas(e,t){return null!=e&&ut.call(e,t)}function baseHasIn(e,t){return null!=e&&t in et(e)}function baseIntersection(e,t,n){for(var o=n?arrayIncludesWith:arrayIncludes,s=e[0].length,a=e.length,c=a,u=r(a),l=1/0,p=[];c--;){var d=e[c];c&&t&&(d=arrayMap(d,baseUnary(t))),l=ar(d.length,l),u[c]=!n&&(t||s>=120&&d.length>=120)?new SetCache(c&&d):i}d=e[0];var h=-1,f=u[0];e:for(;++h<s&&p.length<l;){var m=d[h],g=t?t(m):m;if(m=n||0!==m?m:0,!(f?cacheHas(f,g):o(p,g,n))){for(c=a;--c;){var y=u[c];if(!(y?cacheHas(y,g):o(e[c],g,n)))continue e}f&&f.push(g),p.push(m)}}return p}function baseInvoke(e,t,r){var n=null==(e=parent(e,t=castPath(t,e)))?e:e[toKey(last(t))];return null==n?i:apply(n,e,r)}function baseIsArguments(e){return isObjectLike(e)&&baseGetTag(e)==z}function baseIsEqual(e,t,r,n,o){return e===t||(null==e||null==t||!isObjectLike(e)&&!isObjectLike(t)?e!=e&&t!=t:function baseIsEqualDeep(e,t,r,n,o,s){var a=An(e),c=An(t),u=a?U:Ur(e),l=c?U:Ur(t),p=(u=u==z?Q:u)==Q,d=(l=l==z?Q:l)==Q,h=u==l;if(h&&Ln(e)){if(!Ln(t))return!1;a=!0,p=!1}if(h&&!p)return s||(s=new Stack),a||Fn(e)?equalArrays(e,t,r,n,o,s):function equalByTag(e,t,r,n,i,o,s){switch(r){case ce:if(e.byteLength!=t.byteLength||e.byteOffset!=t.byteOffset)return!1;e=e.buffer,t=t.buffer;case ae:return!(e.byteLength!=t.byteLength||!o(new wt(e),new wt(t)));case H:case $:case Y:return eq(+e,+t);case G:return e.name==t.name&&e.message==t.message;case ee:case re:return e==t+"";case X:var a=mapToArray;case te:var c=n&f;if(a||(a=setToArray),e.size!=t.size&&!c)return!1;var u=s.get(e);if(u)return u==t;n|=m,s.set(e,t);var l=equalArrays(a(e),a(t),n,i,o,s);return s.delete(e),l;case ne:if(kr)return kr.call(e)==kr.call(t)}return!1}(e,t,u,r,n,o,s);if(!(r&f)){var g=p&&ut.call(e,"__wrapped__"),y=d&&ut.call(t,"__wrapped__");if(g||y){var v=g?e.value():e,b=y?t.value():t;return s||(s=new Stack),o(v,b,r,n,s)}}return!!h&&(s||(s=new Stack),function equalObjects(e,t,r,n,o,s){var a=r&f,c=getAllKeys(e),u=c.length,l=getAllKeys(t).length;if(u!=l&&!a)return!1;for(var p=u;p--;){var d=c[p];if(!(a?d in t:ut.call(t,d)))return!1}var h=s.get(e);if(h&&s.get(t))return h==t;var m=!0;s.set(e,t),s.set(t,e);for(var g=a;++p<u;){d=c[p];var y=e[d],v=t[d];if(n)var b=a?n(v,y,d,t,e,s):n(y,v,d,e,t,s);if(!(b===i?y===v||o(y,v,r,n,s):b)){m=!1;break}g||(g="constructor"==d)}if(m&&!g){var _=e.constructor,w=t.constructor;_!=w&&"constructor"in e&&"constructor"in t&&!("function"==typeof _&&_ instanceof _&&"function"==typeof w&&w instanceof w)&&(m=!1)}return s.delete(e),s.delete(t),m}(e,t,r,n,o,s))}(e,t,r,n,baseIsEqual,o))}function baseIsMatch(e,t,r,n){var o=r.length,s=o,a=!n;if(null==e)return!s;for(e=et(e);o--;){var c=r[o];if(a&&c[2]?c[1]!==e[c[0]]:!(c[0]in e))return!1}for(;++o<s;){var u=(c=r[o])[0],l=e[u],p=c[1];if(a&&c[2]){if(l===i&&!(u in e))return!1}else{var d=new Stack;if(n)var h=n(l,p,u,e,t,d);if(!(h===i?baseIsEqual(p,l,f|m,n,d):h))return!1}}return!0}function baseIsNative(e){return!(!isObject(e)||function isMasked(e){return!!pt&&pt in e}(e))&&(isFunction(e)?mt:Ve).test(toSource(e))}function baseIteratee(e){return"function"==typeof e?e:null==e?identity:"object"==typeof e?An(e)?baseMatchesProperty(e[0],e[1]):baseMatches(e):property(e)}function baseKeys(e){if(!isPrototype(e))return or(e);var t=[];for(var r in et(e))ut.call(e,r)&&"constructor"!=r&&t.push(r);return t}function baseKeysIn(e){if(!isObject(e))return function nativeKeysIn(e){var t=[];if(null!=e)for(var r in et(e))t.push(r);return t}(e);var t=isPrototype(e),r=[];for(var n in e)("constructor"!=n||!t&&ut.call(e,n))&&r.push(n);return r}function baseLt(e,t){return e<t}function baseMap(e,t){var n=-1,i=isArrayLike(e)?r(e.length):[];return Or(e,function(e,r,o){i[++n]=t(e,r,o)}),i}function baseMatches(e){var t=getMatchData(e);return 1==t.length&&t[0][2]?matchesStrictComparable(t[0][0],t[0][1]):function(r){return r===e||baseIsMatch(r,e,t)}}function baseMatchesProperty(e,t){return isKey(e)&&isStrictComparable(t)?matchesStrictComparable(toKey(e),t):function(r){var n=get(r,e);return n===i&&n===t?hasIn(r,e):baseIsEqual(t,n,f|m)}}function baseMerge(e,t,r,n,o){e!==t&&Nr(t,function(s,a){if(isObject(s))o||(o=new Stack),function baseMergeDeep(e,t,r,n,o,s,a){var c=safeGet(e,r),u=safeGet(t,r),l=a.get(u);if(l)assignMergeValue(e,r,l);else{var p=s?s(c,u,r+"",e,t,a):i,d=p===i;if(d){var h=An(u),f=!h&&Ln(u),m=!h&&!f&&Fn(u);p=u,h||f||m?An(c)?p=c:isArrayLikeObject(c)?p=copyArray(c):f?(d=!1,p=cloneBuffer(u,!0)):m?(d=!1,p=cloneTypedArray(u,!0)):p=[]:isPlainObject(u)||Nn(u)?(p=c,Nn(c)?p=toPlainObject(c):isObject(c)&&!isFunction(c)||(p=initCloneObject(u))):d=!1}d&&(a.set(u,p),o(p,u,n,s,a),a.delete(u)),assignMergeValue(e,r,p)}}(e,t,a,r,baseMerge,n,o);else{var c=n?n(safeGet(e,a),s,a+"",e,t,o):i;c===i&&(c=s),assignMergeValue(e,a,c)}},keysIn)}function baseNth(e,t){var r=e.length;if(r)return isIndex(t+=t<0?r:0,r)?e[t]:i}function baseOrderBy(e,t,r){var n=-1;return t=arrayMap(t.length?t:[identity],baseUnary(getIteratee())),function baseSortBy(e,t){var r=e.length;for(e.sort(t);r--;)e[r]=e[r].value;return e}(baseMap(e,function(e,r,i){return{criteria:arrayMap(t,function(t){return t(e)}),index:++n,value:e}}),function(e,t){return function compareMultiple(e,t,r){for(var n=-1,i=e.criteria,o=t.criteria,s=i.length,a=r.length;++n<s;){var c=compareAscending(i[n],o[n]);if(c){if(n>=a)return c;var u=r[n];return c*("desc"==u?-1:1)}}return e.index-t.index}(e,t,r)})}function basePickBy(e,t,r){for(var n=-1,i=t.length,o={};++n<i;){var s=t[n],a=baseGet(e,s);r(a,s)&&baseSet(o,castPath(s,e),a)}return o}function basePullAll(e,t,r,n){var i=n?baseIndexOfWith:baseIndexOf,o=-1,s=t.length,a=e;for(e===t&&(t=copyArray(t)),r&&(a=arrayMap(e,baseUnary(r)));++o<s;)for(var c=0,u=t[o],l=r?r(u):u;(c=i(a,l,c,n))>-1;)a!==e&&Lt.call(a,c,1),Lt.call(e,c,1);return e}function basePullAt(e,t){for(var r=e?t.length:0,n=r-1;r--;){var i=t[r];if(r==n||i!==o){var o=i;isIndex(i)?Lt.call(e,i,1):baseUnset(e,i)}}return e}function baseRandom(e,t){return e+er(lr()*(t-e+1))}function baseRepeat(e,t){var r="";if(!e||t<1||t>P)return r;do{t%2&&(r+=e),(t=er(t/2))&&(e+=e)}while(t);return r}function baseRest(e,t){return Vr(overRest(e,t,identity),e+"")}function baseSample(e){return arraySample(values(e))}function baseSampleSize(e,t){var r=values(e);return shuffleSelf(r,baseClamp(t,0,r.length))}function baseSet(e,t,r,n){if(!isObject(e))return e;for(var o=-1,s=(t=castPath(t,e)).length,a=s-1,c=e;null!=c&&++o<s;){var u=toKey(t[o]),l=r;if(o!=a){var p=c[u];(l=n?n(p,u,c):i)===i&&(l=isObject(p)?p:isIndex(t[o+1])?[]:{})}assignValue(c,u,l),c=c[u]}return e}var Pr=vr?function(e,t){return vr.set(e,t),e}:identity,Lr=Xt?function(e,t){return Xt(e,"toString",{configurable:!0,enumerable:!1,value:constant(t),writable:!0})}:identity;function baseShuffle(e){return shuffleSelf(values(e))}function baseSlice(e,t,n){var i=-1,o=e.length;t<0&&(t=-t>o?0:o+t),(n=n>o?o:n)<0&&(n+=o),o=t>n?0:n-t>>>0,t>>>=0;for(var s=r(o);++i<o;)s[i]=e[i+t];return s}function baseSome(e,t){var r;return Or(e,function(e,n,i){return!(r=t(e,n,i))}),!!r}function baseSortedIndex(e,t,r){var n=0,i=null==e?n:e.length;if("number"==typeof t&&t==t&&i<=q){for(;n<i;){var o=n+i>>>1,s=e[o];null!==s&&!isSymbol(s)&&(r?s<=t:s<t)?n=o+1:i=o}return i}return baseSortedIndexBy(e,t,identity,r)}function baseSortedIndexBy(e,t,r,n){t=r(t);for(var o=0,s=null==e?0:e.length,a=t!=t,c=null===t,u=isSymbol(t),l=t===i;o<s;){var p=er((o+s)/2),d=r(e[p]),h=d!==i,f=null===d,m=d==d,g=isSymbol(d);if(a)var y=n||m;else y=l?m&&(n||h):c?m&&h&&(n||!f):u?m&&h&&!f&&(n||!g):!f&&!g&&(n?d<=t:d<t);y?o=p+1:s=p}return ar(s,j)}function baseSortedUniq(e,t){for(var r=-1,n=e.length,i=0,o=[];++r<n;){var s=e[r],a=t?t(s):s;if(!r||!eq(a,c)){var c=a;o[i++]=0===s?0:s}}return o}function baseToNumber(e){return"number"==typeof e?e:isSymbol(e)?D:+e}function baseToString(e){if("string"==typeof e)return e;if(An(e))return arrayMap(e,baseToString)+"";if(isSymbol(e))return Rr?Rr.call(e):"";var t=e+"";return"0"==t&&1/e==-A?"-0":t}function baseUniq(e,t,r){var n=-1,i=arrayIncludes,s=e.length,a=!0,c=[],u=c;if(r)a=!1,i=arrayIncludesWith;else if(s>=o){var l=t?null:jr(e);if(l)return setToArray(l);a=!1,i=cacheHas,u=new SetCache}else u=t?[]:c;e:for(;++n<s;){var p=e[n],d=t?t(p):p;if(p=r||0!==p?p:0,a&&d==d){for(var h=u.length;h--;)if(u[h]===d)continue e;t&&u.push(d),c.push(p)}else i(u,d,r)||(u!==c&&u.push(d),c.push(p))}return c}function baseUnset(e,t){return null==(e=parent(e,t=castPath(t,e)))||delete e[toKey(last(t))]}function baseUpdate(e,t,r,n){return baseSet(e,t,r(baseGet(e,t)),n)}function baseWhile(e,t,r,n){for(var i=e.length,o=n?i:-1;(n?o--:++o<i)&&t(e[o],o,e););return r?baseSlice(e,n?0:o,n?o+1:i):baseSlice(e,n?o+1:0,n?i:o)}function baseWrapperValue(e,t){var r=e;return r instanceof LazyWrapper&&(r=r.value()),arrayReduce(t,function(e,t){return t.func.apply(t.thisArg,arrayPush([e],t.args))},r)}function baseXor(e,t,n){var i=e.length;if(i<2)return i?baseUniq(e[0]):[];for(var o=-1,s=r(i);++o<i;)for(var a=e[o],c=-1;++c<i;)c!=o&&(s[o]=baseDifference(s[o]||a,e[c],t,n));return baseUniq(baseFlatten(s,1),t,n)}function baseZipObject(e,t,r){for(var n=-1,o=e.length,s=t.length,a={};++n<o;){var c=n<s?t[n]:i;r(a,e[n],c)}return a}function castArrayLikeObject(e){return isArrayLikeObject(e)?e:[]}function castFunction(e){return"function"==typeof e?e:identity}function castPath(e,t){return An(e)?e:isKey(e,t)?[e]:Gr(toString(e))}var Dr=baseRest;function castSlice(e,t,r){var n=e.length;return r=r===i?n:r,!t&&r>=n?e:baseSlice(e,t,r)}var Mr=Yt||function(e){return At.clearTimeout(e)};function cloneBuffer(e,t){if(t)return e.slice();var r=e.length,n=Rt?Rt(r):new e.constructor(r);return e.copy(n),n}function cloneArrayBuffer(e){var t=new e.constructor(e.byteLength);return new wt(t).set(new wt(e)),t}function cloneTypedArray(e,t){var r=t?cloneArrayBuffer(e.buffer):e.buffer;return new e.constructor(r,e.byteOffset,e.length)}function compareAscending(e,t){if(e!==t){var r=e!==i,n=null===e,o=e==e,s=isSymbol(e),a=t!==i,c=null===t,u=t==t,l=isSymbol(t);if(!c&&!l&&!s&&e>t||s&&a&&u&&!c&&!l||n&&a&&u||!r&&u||!o)return 1;if(!n&&!s&&!l&&e<t||l&&r&&o&&!n&&!s||c&&r&&o||!a&&o||!u)return-1}return 0}function composeArgs(e,t,n,i){for(var o=-1,s=e.length,a=n.length,c=-1,u=t.length,l=sr(s-a,0),p=r(u+l),d=!i;++c<u;)p[c]=t[c];for(;++o<a;)(d||o<s)&&(p[n[o]]=e[o]);for(;l--;)p[c++]=e[o++];return p}function composeArgsRight(e,t,n,i){for(var o=-1,s=e.length,a=-1,c=n.length,u=-1,l=t.length,p=sr(s-c,0),d=r(p+l),h=!i;++o<p;)d[o]=e[o];for(var f=o;++u<l;)d[f+u]=t[u];for(;++a<c;)(h||o<s)&&(d[f+n[a]]=e[o++]);return d}function copyArray(e,t){var n=-1,i=e.length;for(t||(t=r(i));++n<i;)t[n]=e[n];return t}function copyObject(e,t,r,n){var o=!r;r||(r={});for(var s=-1,a=t.length;++s<a;){var c=t[s],u=n?n(r[c],e[c],c,r,e):i;u===i&&(u=e[c]),o?baseAssignValue(r,c,u):assignValue(r,c,u)}return r}function createAggregator(e,t){return function(r,n){var i=An(r)?arrayAggregator:baseAggregator,o=t?t():{};return i(r,e,getIteratee(n,2),o)}}function createAssigner(e){return baseRest(function(t,r){var n=-1,o=r.length,s=o>1?r[o-1]:i,a=o>2?r[2]:i;for(s=e.length>3&&"function"==typeof s?(o--,s):i,a&&isIterateeCall(r[0],r[1],a)&&(s=o<3?i:s,o=1),t=et(t);++n<o;){var c=r[n];c&&e(t,c,n,s)}return t})}function createBaseEach(e,t){return function(r,n){if(null==r)return r;if(!isArrayLike(r))return e(r,n);for(var i=r.length,o=t?i:-1,s=et(r);(t?o--:++o<i)&&!1!==n(s[o],o,s););return r}}function createBaseFor(e){return function(t,r,n){for(var i=-1,o=et(t),s=n(t),a=s.length;a--;){var c=s[e?a:++i];if(!1===r(o[c],c,o))break}return t}}function createCaseFirst(e){return function(t){var r=hasUnicode(t=toString(t))?stringToArray(t):i,n=r?r[0]:t.charAt(0),o=r?castSlice(r,1).join(""):t.slice(1);return n[e]()+o}}function createCompounder(e){return function(t){return arrayReduce(words(deburr(t).replace(yt,"")),e,"")}}function createCtor(e){return function(){var t=arguments;switch(t.length){case 0:return new e;case 1:return new e(t[0]);case 2:return new e(t[0],t[1]);case 3:return new e(t[0],t[1],t[2]);case 4:return new e(t[0],t[1],t[2],t[3]);case 5:return new e(t[0],t[1],t[2],t[3],t[4]);case 6:return new e(t[0],t[1],t[2],t[3],t[4],t[5]);case 7:return new e(t[0],t[1],t[2],t[3],t[4],t[5],t[6])}var r=Tr(e.prototype),n=e.apply(r,t);return isObject(n)?n:r}}function createFind(e){return function(t,r,n){var o=et(t);if(!isArrayLike(t)){var s=getIteratee(r,3);t=keys(t),r=function(e){return s(o[e],e,o)}}var a=e(t,r,n);return a>-1?o[s?t[a]:a]:i}}function createFlow(e){return flatRest(function(t){var r=t.length,n=r,o=LodashWrapper.prototype.thru;for(e&&t.reverse();n--;){var s=t[n];if("function"!=typeof s)throw new nt(a);if(o&&!c&&"wrapper"==getFuncName(s))var c=new LodashWrapper([],!0)}for(n=c?n:r;++n<r;){var u=getFuncName(s=t[n]),l="wrapper"==u?qr(s):i;c=l&&isLaziable(l[0])&&l[1]==(S|b|w|C)&&!l[4].length&&1==l[9]?c[getFuncName(l[0])].apply(c,l[3]):1==s.length&&isLaziable(s)?c[u]():c.thru(s)}return function(){var e=arguments,n=e[0];if(c&&1==e.length&&An(n))return c.plant(n).value();for(var i=0,o=r?t[i].apply(this,e):n;++i<r;)o=t[i].call(this,o);return o}})}function createHybrid(e,t,n,o,s,a,c,u,l,p){var d=t&S,h=t&g,f=t&y,m=t&(b|_),v=t&x,w=f?i:createCtor(e);return function wrapper(){for(var g=arguments.length,y=r(g),b=g;b--;)y[b]=arguments[b];if(m)var _=getHolder(wrapper),E=function countHolders(e,t){for(var r=e.length,n=0;r--;)e[r]===t&&++n;return n}(y,_);if(o&&(y=composeArgs(y,o,s,m)),a&&(y=composeArgsRight(y,a,c,m)),g-=E,m&&g<p){var S=replaceHolders(y,_);return createRecurry(e,t,createHybrid,wrapper.placeholder,n,y,S,u,l,p-g)}var C=h?n:this,x=f?C[e]:e;return g=y.length,u?y=function reorder(e,t){for(var r=e.length,n=ar(t.length,r),o=copyArray(e);n--;){var s=t[n];e[n]=isIndex(s,r)?o[s]:i}return e}(y,u):v&&g>1&&y.reverse(),d&&l<g&&(y.length=l),this&&this!==At&&this instanceof wrapper&&(x=w||createCtor(x)),x.apply(C,y)}}function createInverter(e,t){return function(r,n){return function baseInverter(e,t,r,n){return baseForOwn(e,function(e,i,o){t(n,r(e),i,o)}),n}(r,e,t(n),{})}}function createMathOperation(e,t){return function(r,n){var o;if(r===i&&n===i)return t;if(r!==i&&(o=r),n!==i){if(o===i)return n;"string"==typeof r||"string"==typeof n?(r=baseToString(r),n=baseToString(n)):(r=baseToNumber(r),n=baseToNumber(n)),o=e(r,n)}return o}}function createOver(e){return flatRest(function(t){return t=arrayMap(t,baseUnary(getIteratee())),baseRest(function(r){var n=this;return e(t,function(e){return apply(e,n,r)})})})}function createPadding(e,t){var r=(t=t===i?" ":baseToString(t)).length;if(r<2)return r?baseRepeat(t,e):t;var n=baseRepeat(t,Zt(e/stringSize(t)));return hasUnicode(t)?castSlice(stringToArray(n),0,e).join(""):n.slice(0,e)}function createRange(e){return function(t,n,o){return o&&"number"!=typeof o&&isIterateeCall(t,n,o)&&(n=o=i),t=toFinite(t),n===i?(n=t,t=0):n=toFinite(n),function baseRange(e,t,n,i){for(var o=-1,s=sr(Zt((t-e)/(n||1)),0),a=r(s);s--;)a[i?s:++o]=e,e+=n;return a}(t,n,o=o===i?t<n?1:-1:toFinite(o),e)}}function createRelationalOperation(e){return function(t,r){return"string"==typeof t&&"string"==typeof r||(t=toNumber(t),r=toNumber(r)),e(t,r)}}function createRecurry(e,t,r,n,o,s,a,c,u,l){var p=t&b;t|=p?w:E,(t&=~(p?E:w))&v||(t&=~(g|y));var d=[e,t,o,p?s:i,p?a:i,p?i:s,p?i:a,c,u,l],h=r.apply(i,d);return isLaziable(e)&&Hr(h,d),h.placeholder=n,setWrapToString(h,e,t)}function createRound(e){var t=Ze[e];return function(e,r){if(e=toNumber(e),r=null==r?0:ar(toInteger(r),292)){var n=(toString(e)+"e").split("e");return+((n=(toString(t(n[0]+"e"+(+n[1]+r)))+"e").split("e"))[0]+"e"+(+n[1]-r))}return t(e)}}var jr=mr&&1/setToArray(new mr([,-0]))[1]==A?function(e){return new mr(e)}:noop;function createToPairs(e){return function(t){var r=Ur(t);return r==X?mapToArray(t):r==te?setToPairs(t):function baseToPairs(e,t){return arrayMap(t,function(t){return[t,e[t]]})}(t,e(t))}}function createWrap(e,t,n,o,s,c,u,p){var d=t&y;if(!d&&"function"!=typeof e)throw new nt(a);var h=o?o.length:0;if(h||(t&=~(w|E),o=s=i),u=u===i?u:sr(toInteger(u),0),p=p===i?p:toInteger(p),h-=s?s.length:0,t&E){var f=o,m=s;o=s=i}var x=d?i:qr(e),k=[e,t,n,o,s,f,m,c,u,p];if(x&&function mergeData(e,t){var r=e[1],n=t[1],i=r|n,o=i<(g|y|S),s=n==S&&r==b||n==S&&r==C&&e[7].length<=t[8]||n==(S|C)&&t[7].length<=t[8]&&r==b;if(!o&&!s)return e;n&g&&(e[2]=t[2],i|=r&g?0:v);var a=t[3];if(a){var c=e[3];e[3]=c?composeArgs(c,a,t[4]):a,e[4]=c?replaceHolders(e[3],l):t[4]}return(a=t[5])&&(c=e[5],e[5]=c?composeArgsRight(c,a,t[6]):a,e[6]=c?replaceHolders(e[5],l):t[6]),(a=t[7])&&(e[7]=a),n&S&&(e[8]=null==e[8]?t[8]:ar(e[8],t[8])),null==e[9]&&(e[9]=t[9]),e[0]=t[0],e[1]=i,e}(k,x),e=k[0],t=k[1],n=k[2],o=k[3],s=k[4],!(p=k[9]=k[9]===i?d?0:e.length:sr(k[9]-h,0))&&t&(b|_)&&(t&=~(b|_)),t&&t!=g)R=t==b||t==_?function createCurry(e,t,n){var o=createCtor(e);return function wrapper(){for(var s=arguments.length,a=r(s),c=s,u=getHolder(wrapper);c--;)a[c]=arguments[c];var l=s<3&&a[0]!==u&&a[s-1]!==u?[]:replaceHolders(a,u);return(s-=l.length)<n?createRecurry(e,t,createHybrid,wrapper.placeholder,i,a,l,i,i,n-s):apply(this&&this!==At&&this instanceof wrapper?o:e,this,a)}}(e,t,p):t!=w&&t!=(g|w)||s.length?createHybrid.apply(i,k):function createPartial(e,t,n,i){var o=t&g,s=createCtor(e);return function wrapper(){for(var t=-1,a=arguments.length,c=-1,u=i.length,l=r(u+a),p=this&&this!==At&&this instanceof wrapper?s:e;++c<u;)l[c]=i[c];for(;a--;)l[c++]=arguments[++t];return apply(p,o?n:this,l)}}(e,t,n,o);else var R=function createBind(e,t,r){var n=t&g,i=createCtor(e);return function wrapper(){return(this&&this!==At&&this instanceof wrapper?i:e).apply(n?r:this,arguments)}}(e,t,n);return setWrapToString((x?Pr:Hr)(R,k),e,t)}function customDefaultsAssignIn(e,t,r,n){return e===i||eq(e,st[r])&&!ut.call(n,r)?t:e}function customDefaultsMerge(e,t,r,n,o,s){return isObject(e)&&isObject(t)&&(s.set(t,e),baseMerge(e,t,i,customDefaultsMerge,s),s.delete(t)),e}function customOmitClone(e){return isPlainObject(e)?i:e}function equalArrays(e,t,r,n,o,s){var a=r&f,c=e.length,u=t.length;if(c!=u&&!(a&&u>c))return!1;var l=s.get(e);if(l&&s.get(t))return l==t;var p=-1,d=!0,h=r&m?new SetCache:i;for(s.set(e,t),s.set(t,e);++p<c;){var g=e[p],y=t[p];if(n)var v=a?n(y,g,p,t,e,s):n(g,y,p,e,t,s);if(v!==i){if(v)continue;d=!1;break}if(h){if(!arraySome(t,function(e,t){if(!cacheHas(h,t)&&(g===e||o(g,e,r,n,s)))return h.push(t)})){d=!1;break}}else if(g!==y&&!o(g,y,r,n,s)){d=!1;break}}return s.delete(e),s.delete(t),d}function flatRest(e){return Vr(overRest(e,i,flatten),e+"")}function getAllKeys(e){return baseGetAllKeys(e,keys,Fr)}function getAllKeysIn(e){return baseGetAllKeys(e,keysIn,zr)}var qr=vr?function(e){return vr.get(e)}:noop;function getFuncName(e){for(var t=e.name+"",r=br[t],n=ut.call(br,t)?r.length:0;n--;){var i=r[n],o=i.func;if(null==o||o==e)return i.name}return t}function getHolder(e){return(ut.call(lodash,"placeholder")?lodash:e).placeholder}function getIteratee(){var e=lodash.iteratee||iteratee;return e=e===iteratee?baseIteratee:e,arguments.length?e(arguments[0],arguments[1]):e}function getMapData(e,t){var r=e.__data__;return function isKeyable(e){var t=typeof e;return"string"==t||"number"==t||"symbol"==t||"boolean"==t?"__proto__"!==e:null===e}(t)?r["string"==typeof t?"string":"hash"]:r.map}function getMatchData(e){for(var t=keys(e),r=t.length;r--;){var n=t[r],i=e[n];t[r]=[n,i,isStrictComparable(i)]}return t}function getNative(e,t){var r=function getValue(e,t){return null==e?i:e[t]}(e,t);return baseIsNative(r)?r:i}var Fr=tr?function(e){return null==e?[]:(e=et(e),arrayFilter(tr(e),function(t){return Pt.call(e,t)}))}:stubArray,zr=tr?function(e){for(var t=[];e;)arrayPush(t,Fr(e)),e=It(e);return t}:stubArray,Ur=baseGetTag;function hasPath(e,t,r){for(var n=-1,i=(t=castPath(t,e)).length,o=!1;++n<i;){var s=toKey(t[n]);if(!(o=null!=e&&r(e,s)))break;e=e[s]}return o||++n!=i?o:!!(i=null==e?0:e.length)&&isLength(i)&&isIndex(s,i)&&(An(e)||Nn(e))}function initCloneObject(e){return"function"!=typeof e.constructor||isPrototype(e)?{}:Tr(It(e))}function isFlattenable(e){return An(e)||Nn(e)||!!(Mt&&e&&e[Mt])}function isIndex(e,t){var r=typeof e;return!!(t=null==t?P:t)&&("number"==r||"symbol"!=r&&We.test(e))&&e>-1&&e%1==0&&e<t}function isIterateeCall(e,t,r){if(!isObject(r))return!1;var n=typeof t;return!!("number"==n?isArrayLike(r)&&isIndex(t,r.length):"string"==n&&t in r)&&eq(r[t],e)}function isKey(e,t){if(An(e))return!1;var r=typeof e;return!("number"!=r&&"symbol"!=r&&"boolean"!=r&&null!=e&&!isSymbol(e))||Oe.test(e)||!Te.test(e)||null!=t&&e in et(t)}function isLaziable(e){var t=getFuncName(e),r=lodash[t];if("function"!=typeof r||!(t in LazyWrapper.prototype))return!1;if(e===r)return!0;var n=qr(r);return!!n&&e===n[0]}(dr&&Ur(new dr(new ArrayBuffer(1)))!=ce||hr&&Ur(new hr)!=X||fr&&"[object Promise]"!=Ur(fr.resolve())||mr&&Ur(new mr)!=te||gr&&Ur(new gr)!=oe)&&(Ur=function(e){var t=baseGetTag(e),r=t==Q?e.constructor:i,n=r?toSource(r):"";if(n)switch(n){case _r:return ce;case wr:return X;case Er:return"[object Promise]";case Sr:return te;case Cr:return oe}return t});var Br=at?isFunction:stubFalse;function isPrototype(e){var t=e&&e.constructor;return e===("function"==typeof t&&t.prototype||st)}function isStrictComparable(e){return e==e&&!isObject(e)}function matchesStrictComparable(e,t){return function(r){return null!=r&&r[e]===t&&(t!==i||e in et(r))}}function overRest(e,t,n){return t=sr(t===i?e.length-1:t,0),function(){for(var i=arguments,o=-1,s=sr(i.length-t,0),a=r(s);++o<s;)a[o]=i[t+o];o=-1;for(var c=r(t+1);++o<t;)c[o]=i[o];return c[t]=n(a),apply(e,this,c)}}function parent(e,t){return t.length<2?e:baseGet(e,baseSlice(t,0,-1))}function safeGet(e,t){if("__proto__"!=t)return e[t]}var Hr=shortOut(Pr),$r=Qt||function(e,t){return At.setTimeout(e,t)},Vr=shortOut(Lr);function setWrapToString(e,t,r){var n=t+"";return Vr(e,function insertWrapDetails(e,t){var r=t.length;if(!r)return e;var n=r-1;return t[n]=(r>1?"& ":"")+t[n],t=t.join(r>2?", ":" "),e.replace(Me,"{\n/* [wrapped with "+t+"] */\n")}(n,function updateWrapDetails(e,t){return arrayEach(F,function(r){var n="_."+r[0];t&r[1]&&!arrayIncludes(e,n)&&e.push(n)}),e.sort()}(function getWrapDetails(e){var t=e.match(je);return t?t[1].split(qe):[]}(n),r)))}function shortOut(e){var t=0,r=0;return function(){var n=cr(),o=O-(n-r);if(r=n,o>0){if(++t>=T)return arguments[0]}else t=0;return e.apply(i,arguments)}}function shuffleSelf(e,t){var r=-1,n=e.length,o=n-1;for(t=t===i?n:t;++r<t;){var s=baseRandom(r,o),a=e[s];e[s]=e[r],e[r]=a}return e.length=t,e}var Gr=function memoizeCapped(e){var t=memoize(e,function(e){return r.size===u&&r.clear(),e}),r=t.cache;return t}(function(e){var t=[];return 46===e.charCodeAt(0)&&t.push(""),e.replace(Ie,function(e,r,n,i){t.push(n?i.replace(ze,"$1"):r||e)}),t});function toKey(e){if("string"==typeof e||isSymbol(e))return e;var t=e+"";return"0"==t&&1/e==-A?"-0":t}function toSource(e){if(null!=e){try{return ct.call(e)}catch(e){}try{return e+""}catch(e){}}return""}function wrapperClone(e){if(e instanceof LazyWrapper)return e.clone();var t=new LodashWrapper(e.__wrapped__,e.__chain__);return t.__actions__=copyArray(e.__actions__),t.__index__=e.__index__,t.__values__=e.__values__,t}var Wr=baseRest(function(e,t){return isArrayLikeObject(e)?baseDifference(e,baseFlatten(t,1,isArrayLikeObject,!0)):[]}),Jr=baseRest(function(e,t){var r=last(t);return isArrayLikeObject(r)&&(r=i),isArrayLikeObject(e)?baseDifference(e,baseFlatten(t,1,isArrayLikeObject,!0),getIteratee(r,2)):[]}),Xr=baseRest(function(e,t){var r=last(t);return isArrayLikeObject(r)&&(r=i),isArrayLikeObject(e)?baseDifference(e,baseFlatten(t,1,isArrayLikeObject,!0),i,r):[]});function findIndex(e,t,r){var n=null==e?0:e.length;if(!n)return-1;var i=null==r?0:toInteger(r);return i<0&&(i=sr(n+i,0)),baseFindIndex(e,getIteratee(t,3),i)}function findLastIndex(e,t,r){var n=null==e?0:e.length;if(!n)return-1;var o=n-1;return r!==i&&(o=toInteger(r),o=r<0?sr(n+o,0):ar(o,n-1)),baseFindIndex(e,getIteratee(t,3),o,!0)}function flatten(e){return null!=e&&e.length?baseFlatten(e,1):[]}function head(e){return e&&e.length?e[0]:i}var Yr=baseRest(function(e){var t=arrayMap(e,castArrayLikeObject);return t.length&&t[0]===e[0]?baseIntersection(t):[]}),Kr=baseRest(function(e){var t=last(e),r=arrayMap(e,castArrayLikeObject);return t===last(r)?t=i:r.pop(),r.length&&r[0]===e[0]?baseIntersection(r,getIteratee(t,2)):[]}),Qr=baseRest(function(e){var t=last(e),r=arrayMap(e,castArrayLikeObject);return(t="function"==typeof t?t:i)&&r.pop(),r.length&&r[0]===e[0]?baseIntersection(r,i,t):[]});function last(e){var t=null==e?0:e.length;return t?e[t-1]:i}var Zr=baseRest(pullAll);function pullAll(e,t){return e&&e.length&&t&&t.length?basePullAll(e,t):e}var en=flatRest(function(e,t){var r=null==e?0:e.length,n=baseAt(e,t);return basePullAt(e,arrayMap(t,function(e){return isIndex(e,r)?+e:e}).sort(compareAscending)),n});function reverse(e){return null==e?e:pr.call(e)}var tn=baseRest(function(e){return baseUniq(baseFlatten(e,1,isArrayLikeObject,!0))}),rn=baseRest(function(e){var t=last(e);return isArrayLikeObject(t)&&(t=i),baseUniq(baseFlatten(e,1,isArrayLikeObject,!0),getIteratee(t,2))}),nn=baseRest(function(e){var t=last(e);return t="function"==typeof t?t:i,baseUniq(baseFlatten(e,1,isArrayLikeObject,!0),i,t)});function unzip(e){if(!e||!e.length)return[];var t=0;return e=arrayFilter(e,function(e){if(isArrayLikeObject(e))return t=sr(e.length,t),!0}),baseTimes(t,function(t){return arrayMap(e,baseProperty(t))})}function unzipWith(e,t){if(!e||!e.length)return[];var r=unzip(e);return null==t?r:arrayMap(r,function(e){return apply(t,i,e)})}var on=baseRest(function(e,t){return isArrayLikeObject(e)?baseDifference(e,t):[]}),sn=baseRest(function(e){return baseXor(arrayFilter(e,isArrayLikeObject))}),an=baseRest(function(e){var t=last(e);return isArrayLikeObject(t)&&(t=i),baseXor(arrayFilter(e,isArrayLikeObject),getIteratee(t,2))}),cn=baseRest(function(e){var t=last(e);return t="function"==typeof t?t:i,baseXor(arrayFilter(e,isArrayLikeObject),i,t)}),un=baseRest(unzip);var ln=baseRest(function(e){var t=e.length,r=t>1?e[t-1]:i;return r="function"==typeof r?(e.pop(),r):i,unzipWith(e,r)});function chain(e){var t=lodash(e);return t.__chain__=!0,t}function thru(e,t){return t(e)}var pn=flatRest(function(e){var t=e.length,r=t?e[0]:0,n=this.__wrapped__,o=function(t){return baseAt(t,e)};return!(t>1||this.__actions__.length)&&n instanceof LazyWrapper&&isIndex(r)?((n=n.slice(r,+r+(t?1:0))).__actions__.push({func:thru,args:[o],thisArg:i}),new LodashWrapper(n,this.__chain__).thru(function(e){return t&&!e.length&&e.push(i),e})):this.thru(o)});var dn=createAggregator(function(e,t,r){ut.call(e,r)?++e[r]:baseAssignValue(e,r,1)});var hn=createFind(findIndex),fn=createFind(findLastIndex);function forEach(e,t){return(An(e)?arrayEach:Or)(e,getIteratee(t,3))}function forEachRight(e,t){return(An(e)?arrayEachRight:Ir)(e,getIteratee(t,3))}var mn=createAggregator(function(e,t,r){ut.call(e,r)?e[r].push(t):baseAssignValue(e,r,[t])});var gn=baseRest(function(e,t,n){var i=-1,o="function"==typeof t,s=isArrayLike(e)?r(e.length):[];return Or(e,function(e){s[++i]=o?apply(t,e,n):baseInvoke(e,t,n)}),s}),yn=createAggregator(function(e,t,r){baseAssignValue(e,r,t)});function map(e,t){return(An(e)?arrayMap:baseMap)(e,getIteratee(t,3))}var vn=createAggregator(function(e,t,r){e[r?0:1].push(t)},function(){return[[],[]]});var bn=baseRest(function(e,t){if(null==e)return[];var r=t.length;return r>1&&isIterateeCall(e,t[0],t[1])?t=[]:r>2&&isIterateeCall(t[0],t[1],t[2])&&(t=[t[0]]),baseOrderBy(e,baseFlatten(t,1),[])}),_n=Kt||function(){return At.Date.now()};function ary(e,t,r){return t=r?i:t,t=e&&null==t?e.length:t,createWrap(e,S,i,i,i,i,t)}function before(e,t){var r;if("function"!=typeof t)throw new nt(a);return e=toInteger(e),function(){return--e>0&&(r=t.apply(this,arguments)),e<=1&&(t=i),r}}var wn=baseRest(function(e,t,r){var n=g;if(r.length){var i=replaceHolders(r,getHolder(wn));n|=w}return createWrap(e,n,t,r,i)}),En=baseRest(function(e,t,r){var n=g|y;if(r.length){var i=replaceHolders(r,getHolder(En));n|=w}return createWrap(t,n,e,r,i)});function debounce(e,t,r){var n,o,s,c,u,l,p=0,d=!1,h=!1,f=!0;if("function"!=typeof e)throw new nt(a);function invokeFunc(t){var r=n,s=o;return n=o=i,p=t,c=e.apply(s,r)}function shouldInvoke(e){var r=e-l;return l===i||r>=t||r<0||h&&e-p>=s}function timerExpired(){var e=_n();if(shouldInvoke(e))return trailingEdge(e);u=$r(timerExpired,function remainingWait(e){var r=t-(e-l);return h?ar(r,s-(e-p)):r}(e))}function trailingEdge(e){return u=i,f&&n?invokeFunc(e):(n=o=i,c)}function debounced(){var e=_n(),r=shouldInvoke(e);if(n=arguments,o=this,l=e,r){if(u===i)return function leadingEdge(e){return p=e,u=$r(timerExpired,t),d?invokeFunc(e):c}(l);if(h)return u=$r(timerExpired,t),invokeFunc(l)}return u===i&&(u=$r(timerExpired,t)),c}return t=toNumber(t)||0,isObject(r)&&(d=!!r.leading,s=(h="maxWait"in r)?sr(toNumber(r.maxWait)||0,t):s,f="trailing"in r?!!r.trailing:f),debounced.cancel=function cancel(){u!==i&&Mr(u),p=0,n=l=o=u=i},debounced.flush=function flush(){return u===i?c:trailingEdge(_n())},debounced}var Sn=baseRest(function(e,t){return baseDelay(e,1,t)}),Cn=baseRest(function(e,t,r){return baseDelay(e,toNumber(t)||0,r)});function memoize(e,t){if("function"!=typeof e||null!=t&&"function"!=typeof t)throw new nt(a);var r=function(){var n=arguments,i=t?t.apply(this,n):n[0],o=r.cache;if(o.has(i))return o.get(i);var s=e.apply(this,n);return r.cache=o.set(i,s)||o,s};return r.cache=new(memoize.Cache||MapCache),r}function negate(e){if("function"!=typeof e)throw new nt(a);return function(){var t=arguments;switch(t.length){case 0:return!e.call(this);case 1:return!e.call(this,t[0]);case 2:return!e.call(this,t[0],t[1]);case 3:return!e.call(this,t[0],t[1],t[2])}return!e.apply(this,t)}}memoize.Cache=MapCache;var xn=Dr(function(e,t){var r=(t=1==t.length&&An(t[0])?arrayMap(t[0],baseUnary(getIteratee())):arrayMap(baseFlatten(t,1),baseUnary(getIteratee()))).length;return baseRest(function(n){for(var i=-1,o=ar(n.length,r);++i<o;)n[i]=t[i].call(this,n[i]);return apply(e,this,n)})}),kn=baseRest(function(e,t){var r=replaceHolders(t,getHolder(kn));return createWrap(e,w,i,t,r)}),Rn=baseRest(function(e,t){var r=replaceHolders(t,getHolder(Rn));return createWrap(e,E,i,t,r)}),Tn=flatRest(function(e,t){return createWrap(e,C,i,i,i,t)});function eq(e,t){return e===t||e!=e&&t!=t}var On=createRelationalOperation(baseGt),In=createRelationalOperation(function(e,t){return e>=t}),Nn=baseIsArguments(function(){return arguments}())?baseIsArguments:function(e){return isObjectLike(e)&&ut.call(e,"callee")&&!Pt.call(e,"callee")},An=r.isArray,Pn=qt?baseUnary(qt):function baseIsArrayBuffer(e){return isObjectLike(e)&&baseGetTag(e)==ae};function isArrayLike(e){return null!=e&&isLength(e.length)&&!isFunction(e)}function isArrayLikeObject(e){return isObjectLike(e)&&isArrayLike(e)}var Ln=rr||stubFalse,Dn=Ft?baseUnary(Ft):function baseIsDate(e){return isObjectLike(e)&&baseGetTag(e)==$};function isError(e){if(!isObjectLike(e))return!1;var t=baseGetTag(e);return t==G||t==V||"string"==typeof e.message&&"string"==typeof e.name&&!isPlainObject(e)}function isFunction(e){if(!isObject(e))return!1;var t=baseGetTag(e);return t==W||t==J||t==B||t==Z}function isInteger(e){return"number"==typeof e&&e==toInteger(e)}function isLength(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=P}function isObject(e){var t=typeof e;return null!=e&&("object"==t||"function"==t)}function isObjectLike(e){return null!=e&&"object"==typeof e}var Mn=zt?baseUnary(zt):function baseIsMap(e){return isObjectLike(e)&&Ur(e)==X};function isNumber(e){return"number"==typeof e||isObjectLike(e)&&baseGetTag(e)==Y}function isPlainObject(e){if(!isObjectLike(e)||baseGetTag(e)!=Q)return!1;var t=It(e);if(null===t)return!0;var r=ut.call(t,"constructor")&&t.constructor;return"function"==typeof r&&r instanceof r&&ct.call(r)==ht}var jn=Ut?baseUnary(Ut):function baseIsRegExp(e){return isObjectLike(e)&&baseGetTag(e)==ee};var qn=Bt?baseUnary(Bt):function baseIsSet(e){return isObjectLike(e)&&Ur(e)==te};function isString(e){return"string"==typeof e||!An(e)&&isObjectLike(e)&&baseGetTag(e)==re}function isSymbol(e){return"symbol"==typeof e||isObjectLike(e)&&baseGetTag(e)==ne}var Fn=Ht?baseUnary(Ht):function baseIsTypedArray(e){return isObjectLike(e)&&isLength(e.length)&&!!xt[baseGetTag(e)]};var zn=createRelationalOperation(baseLt),Un=createRelationalOperation(function(e,t){return e<=t});function toArray(e){if(!e)return[];if(isArrayLike(e))return isString(e)?stringToArray(e):copyArray(e);if(jt&&e[jt])return function iteratorToArray(e){for(var t,r=[];!(t=e.next()).done;)r.push(t.value);return r}(e[jt]());var t=Ur(e);return(t==X?mapToArray:t==te?setToArray:values)(e)}function toFinite(e){return e?(e=toNumber(e))===A||e===-A?(e<0?-1:1)*L:e==e?e:0:0===e?e:0}function toInteger(e){var t=toFinite(e),r=t%1;return t==t?r?t-r:t:0}function toLength(e){return e?baseClamp(toInteger(e),0,M):0}function toNumber(e){if("number"==typeof e)return e;if(isSymbol(e))return D;if(isObject(e)){var t="function"==typeof e.valueOf?e.valueOf():e;e=isObject(t)?t+"":t}if("string"!=typeof e)return 0===e?e:+e;e=e.replace(Pe,"");var r=$e.test(e);return r||Ge.test(e)?Ot(e.slice(2),r?2:8):He.test(e)?D:+e}function toPlainObject(e){return copyObject(e,keysIn(e))}function toString(e){return null==e?"":baseToString(e)}var Bn=createAssigner(function(e,t){if(isPrototype(t)||isArrayLike(t))copyObject(t,keys(t),e);else for(var r in t)ut.call(t,r)&&assignValue(e,r,t[r])}),Hn=createAssigner(function(e,t){copyObject(t,keysIn(t),e)}),$n=createAssigner(function(e,t,r,n){copyObject(t,keysIn(t),e,n)}),Vn=createAssigner(function(e,t,r,n){copyObject(t,keys(t),e,n)}),Gn=flatRest(baseAt);var Wn=baseRest(function(e,t){e=et(e);var r=-1,n=t.length,o=n>2?t[2]:i;for(o&&isIterateeCall(t[0],t[1],o)&&(n=1);++r<n;)for(var s=t[r],a=keysIn(s),c=-1,u=a.length;++c<u;){var l=a[c],p=e[l];(p===i||eq(p,st[l])&&!ut.call(e,l))&&(e[l]=s[l])}return e}),Jn=baseRest(function(e){return e.push(i,customDefaultsMerge),apply(Zn,i,e)});function get(e,t,r){var n=null==e?i:baseGet(e,t);return n===i?r:n}function hasIn(e,t){return null!=e&&hasPath(e,t,baseHasIn)}var Xn=createInverter(function(e,t,r){null!=t&&"function"!=typeof t.toString&&(t=dt.call(t)),e[t]=r},constant(identity)),Yn=createInverter(function(e,t,r){null!=t&&"function"!=typeof t.toString&&(t=dt.call(t)),ut.call(e,t)?e[t].push(r):e[t]=[r]},getIteratee),Kn=baseRest(baseInvoke);function keys(e){return isArrayLike(e)?arrayLikeKeys(e):baseKeys(e)}function keysIn(e){return isArrayLike(e)?arrayLikeKeys(e,!0):baseKeysIn(e)}var Qn=createAssigner(function(e,t,r){baseMerge(e,t,r)}),Zn=createAssigner(function(e,t,r,n){baseMerge(e,t,r,n)}),ei=flatRest(function(e,t){var r={};if(null==e)return r;var n=!1;t=arrayMap(t,function(t){return t=castPath(t,e),n||(n=t.length>1),t}),copyObject(e,getAllKeysIn(e),r),n&&(r=baseClone(r,p|d|h,customOmitClone));for(var i=t.length;i--;)baseUnset(r,t[i]);return r});var ti=flatRest(function(e,t){return null==e?{}:function basePick(e,t){return basePickBy(e,t,function(t,r){return hasIn(e,r)})}(e,t)});function pickBy(e,t){if(null==e)return{};var r=arrayMap(getAllKeysIn(e),function(e){return[e]});return t=getIteratee(t),basePickBy(e,r,function(e,r){return t(e,r[0])})}var ri=createToPairs(keys),ni=createToPairs(keysIn);function values(e){return null==e?[]:baseValues(e,keys(e))}var ii=createCompounder(function(e,t,r){return t=t.toLowerCase(),e+(r?capitalize(t):t)});function capitalize(e){return pi(toString(e).toLowerCase())}function deburr(e){return(e=toString(e))&&e.replace(Je,Vt).replace(vt,"")}var oi=createCompounder(function(e,t,r){return e+(r?"-":"")+t.toLowerCase()}),si=createCompounder(function(e,t,r){return e+(r?" ":"")+t.toLowerCase()}),ai=createCaseFirst("toLowerCase");var ci=createCompounder(function(e,t,r){return e+(r?"_":"")+t.toLowerCase()});var ui=createCompounder(function(e,t,r){return e+(r?" ":"")+pi(t)});var li=createCompounder(function(e,t,r){return e+(r?" ":"")+t.toUpperCase()}),pi=createCaseFirst("toUpperCase");function words(e,t,r){return e=toString(e),(t=r?i:t)===i?function hasUnicodeWord(e){return Et.test(e)}(e)?function unicodeWords(e){return e.match(_t)||[]}(e):function asciiWords(e){return e.match(Fe)||[]}(e):e.match(t)||[]}var di=baseRest(function(e,t){try{return apply(e,i,t)}catch(e){return isError(e)?e:new Ke(e)}}),hi=flatRest(function(e,t){return arrayEach(t,function(t){t=toKey(t),baseAssignValue(e,t,wn(e[t],e))}),e});function constant(e){return function(){return e}}var fi=createFlow(),mi=createFlow(!0);function identity(e){return e}function iteratee(e){return baseIteratee("function"==typeof e?e:baseClone(e,p))}var gi=baseRest(function(e,t){return function(r){return baseInvoke(r,e,t)}}),yi=baseRest(function(e,t){return function(r){return baseInvoke(e,r,t)}});function mixin(e,t,r){var n=keys(t),i=baseFunctions(t,n);null!=r||isObject(t)&&(i.length||!n.length)||(r=t,t=e,e=this,i=baseFunctions(t,keys(t)));var o=!(isObject(r)&&"chain"in r&&!r.chain),s=isFunction(e);return arrayEach(i,function(r){var n=t[r];e[r]=n,s&&(e.prototype[r]=function(){var t=this.__chain__;if(o||t){var r=e(this.__wrapped__);return(r.__actions__=copyArray(this.__actions__)).push({func:n,args:arguments,thisArg:e}),r.__chain__=t,r}return n.apply(e,arrayPush([this.value()],arguments))})}),e}function noop(){}var vi=createOver(arrayMap),bi=createOver(arrayEvery),_i=createOver(arraySome);function property(e){return isKey(e)?baseProperty(toKey(e)):function basePropertyDeep(e){return function(t){return baseGet(t,e)}}(e)}var wi=createRange(),Ei=createRange(!0);function stubArray(){return[]}function stubFalse(){return!1}var Si=createMathOperation(function(e,t){return e+t},0),Ci=createRound("ceil"),xi=createMathOperation(function(e,t){return e/t},1),ki=createRound("floor");var Ri,Ti=createMathOperation(function(e,t){return e*t},1),Oi=createRound("round"),Ii=createMathOperation(function(e,t){return e-t},0);return lodash.after=function after(e,t){if("function"!=typeof t)throw new nt(a);return e=toInteger(e),function(){if(--e<1)return t.apply(this,arguments)}},lodash.ary=ary,lodash.assign=Bn,lodash.assignIn=Hn,lodash.assignInWith=$n,lodash.assignWith=Vn,lodash.at=Gn,lodash.before=before,lodash.bind=wn,lodash.bindAll=hi,lodash.bindKey=En,lodash.castArray=function castArray(){if(!arguments.length)return[];var e=arguments[0];return An(e)?e:[e]},lodash.chain=chain,lodash.chunk=function chunk(e,t,n){t=(n?isIterateeCall(e,t,n):t===i)?1:sr(toInteger(t),0);var o=null==e?0:e.length;if(!o||t<1)return[];for(var s=0,a=0,c=r(Zt(o/t));s<o;)c[a++]=baseSlice(e,s,s+=t);return c},lodash.compact=function compact(e){for(var t=-1,r=null==e?0:e.length,n=0,i=[];++t<r;){var o=e[t];o&&(i[n++]=o)}return i},lodash.concat=function concat(){var e=arguments.length;if(!e)return[];for(var t=r(e-1),n=arguments[0],i=e;i--;)t[i-1]=arguments[i];return arrayPush(An(n)?copyArray(n):[n],baseFlatten(t,1))},lodash.cond=function cond(e){var t=null==e?0:e.length,r=getIteratee();return e=t?arrayMap(e,function(e){if("function"!=typeof e[1])throw new nt(a);return[r(e[0]),e[1]]}):[],baseRest(function(r){for(var n=-1;++n<t;){var i=e[n];if(apply(i[0],this,r))return apply(i[1],this,r)}})},lodash.conforms=function conforms(e){return function baseConforms(e){var t=keys(e);return function(r){return baseConformsTo(r,e,t)}}(baseClone(e,p))},lodash.constant=constant,lodash.countBy=dn,lodash.create=function create(e,t){var r=Tr(e);return null==t?r:baseAssign(r,t)},lodash.curry=function curry(e,t,r){var n=createWrap(e,b,i,i,i,i,i,t=r?i:t);return n.placeholder=curry.placeholder,n},lodash.curryRight=function curryRight(e,t,r){var n=createWrap(e,_,i,i,i,i,i,t=r?i:t);return n.placeholder=curryRight.placeholder,n},lodash.debounce=debounce,lodash.defaults=Wn,lodash.defaultsDeep=Jn,lodash.defer=Sn,lodash.delay=Cn,lodash.difference=Wr,lodash.differenceBy=Jr,lodash.differenceWith=Xr,lodash.drop=function drop(e,t,r){var n=null==e?0:e.length;return n?baseSlice(e,(t=r||t===i?1:toInteger(t))<0?0:t,n):[]},lodash.dropRight=function dropRight(e,t,r){var n=null==e?0:e.length;return n?baseSlice(e,0,(t=n-(t=r||t===i?1:toInteger(t)))<0?0:t):[]},lodash.dropRightWhile=function dropRightWhile(e,t){return e&&e.length?baseWhile(e,getIteratee(t,3),!0,!0):[]},lodash.dropWhile=function dropWhile(e,t){return e&&e.length?baseWhile(e,getIteratee(t,3),!0):[]},lodash.fill=function fill(e,t,r,n){var o=null==e?0:e.length;return o?(r&&"number"!=typeof r&&isIterateeCall(e,t,r)&&(r=0,n=o),function baseFill(e,t,r,n){var o=e.length;for((r=toInteger(r))<0&&(r=-r>o?0:o+r),(n=n===i||n>o?o:toInteger(n))<0&&(n+=o),n=r>n?0:toLength(n);r<n;)e[r++]=t;return e}(e,t,r,n)):[]},lodash.filter=function filter(e,t){return(An(e)?arrayFilter:baseFilter)(e,getIteratee(t,3))},lodash.flatMap=function flatMap(e,t){return baseFlatten(map(e,t),1)},lodash.flatMapDeep=function flatMapDeep(e,t){return baseFlatten(map(e,t),A)},lodash.flatMapDepth=function flatMapDepth(e,t,r){return r=r===i?1:toInteger(r),baseFlatten(map(e,t),r)},lodash.flatten=flatten,lodash.flattenDeep=function flattenDeep(e){return null!=e&&e.length?baseFlatten(e,A):[]},lodash.flattenDepth=function flattenDepth(e,t){return null!=e&&e.length?baseFlatten(e,t=t===i?1:toInteger(t)):[]},lodash.flip=function flip(e){return createWrap(e,x)},lodash.flow=fi,lodash.flowRight=mi,lodash.fromPairs=function fromPairs(e){for(var t=-1,r=null==e?0:e.length,n={};++t<r;){var i=e[t];n[i[0]]=i[1]}return n},lodash.functions=function functions(e){return null==e?[]:baseFunctions(e,keys(e))},lodash.functionsIn=function functionsIn(e){return null==e?[]:baseFunctions(e,keysIn(e))},lodash.groupBy=mn,lodash.initial=function initial(e){return null!=e&&e.length?baseSlice(e,0,-1):[]},lodash.intersection=Yr,lodash.intersectionBy=Kr,lodash.intersectionWith=Qr,lodash.invert=Xn,lodash.invertBy=Yn,lodash.invokeMap=gn,lodash.iteratee=iteratee,lodash.keyBy=yn,lodash.keys=keys,lodash.keysIn=keysIn,lodash.map=map,lodash.mapKeys=function mapKeys(e,t){var r={};return t=getIteratee(t,3),baseForOwn(e,function(e,n,i){baseAssignValue(r,t(e,n,i),e)}),r},lodash.mapValues=function mapValues(e,t){var r={};return t=getIteratee(t,3),baseForOwn(e,function(e,n,i){baseAssignValue(r,n,t(e,n,i))}),r},lodash.matches=function matches(e){return baseMatches(baseClone(e,p))},lodash.matchesProperty=function matchesProperty(e,t){return baseMatchesProperty(e,baseClone(t,p))},lodash.memoize=memoize,lodash.merge=Qn,lodash.mergeWith=Zn,lodash.method=gi,lodash.methodOf=yi,lodash.mixin=mixin,lodash.negate=negate,lodash.nthArg=function nthArg(e){return e=toInteger(e),baseRest(function(t){return baseNth(t,e)})},lodash.omit=ei,lodash.omitBy=function omitBy(e,t){return pickBy(e,negate(getIteratee(t)))},lodash.once=function once(e){return before(2,e)},lodash.orderBy=function orderBy(e,t,r,n){return null==e?[]:(An(t)||(t=null==t?[]:[t]),An(r=n?i:r)||(r=null==r?[]:[r]),baseOrderBy(e,t,r))},lodash.over=vi,lodash.overArgs=xn,lodash.overEvery=bi,lodash.overSome=_i,lodash.partial=kn,lodash.partialRight=Rn,lodash.partition=vn,lodash.pick=ti,lodash.pickBy=pickBy,lodash.property=property,lodash.propertyOf=function propertyOf(e){return function(t){return null==e?i:baseGet(e,t)}},lodash.pull=Zr,lodash.pullAll=pullAll,lodash.pullAllBy=function pullAllBy(e,t,r){return e&&e.length&&t&&t.length?basePullAll(e,t,getIteratee(r,2)):e},lodash.pullAllWith=function pullAllWith(e,t,r){return e&&e.length&&t&&t.length?basePullAll(e,t,i,r):e},lodash.pullAt=en,lodash.range=wi,lodash.rangeRight=Ei,lodash.rearg=Tn,lodash.reject=function reject(e,t){return(An(e)?arrayFilter:baseFilter)(e,negate(getIteratee(t,3)))},lodash.remove=function remove(e,t){var r=[];if(!e||!e.length)return r;var n=-1,i=[],o=e.length;for(t=getIteratee(t,3);++n<o;){var s=e[n];t(s,n,e)&&(r.push(s),i.push(n))}return basePullAt(e,i),r},lodash.rest=function rest(e,t){if("function"!=typeof e)throw new nt(a);return baseRest(e,t=t===i?t:toInteger(t))},lodash.reverse=reverse,lodash.sampleSize=function sampleSize(e,t,r){return t=(r?isIterateeCall(e,t,r):t===i)?1:toInteger(t),(An(e)?arraySampleSize:baseSampleSize)(e,t)},lodash.set=function set(e,t,r){return null==e?e:baseSet(e,t,r)},lodash.setWith=function setWith(e,t,r,n){return n="function"==typeof n?n:i,null==e?e:baseSet(e,t,r,n)},lodash.shuffle=function shuffle(e){return(An(e)?arrayShuffle:baseShuffle)(e)},lodash.slice=function slice(e,t,r){var n=null==e?0:e.length;return n?(r&&"number"!=typeof r&&isIterateeCall(e,t,r)?(t=0,r=n):(t=null==t?0:toInteger(t),r=r===i?n:toInteger(r)),baseSlice(e,t,r)):[]},lodash.sortBy=bn,lodash.sortedUniq=function sortedUniq(e){return e&&e.length?baseSortedUniq(e):[]},lodash.sortedUniqBy=function sortedUniqBy(e,t){return e&&e.length?baseSortedUniq(e,getIteratee(t,2)):[]},lodash.split=function split(e,t,r){return r&&"number"!=typeof r&&isIterateeCall(e,t,r)&&(t=r=i),(r=r===i?M:r>>>0)?(e=toString(e))&&("string"==typeof t||null!=t&&!jn(t))&&!(t=baseToString(t))&&hasUnicode(e)?castSlice(stringToArray(e),0,r):e.split(t,r):[]},lodash.spread=function spread(e,t){if("function"!=typeof e)throw new nt(a);return t=null==t?0:sr(toInteger(t),0),baseRest(function(r){var n=r[t],i=castSlice(r,0,t);return n&&arrayPush(i,n),apply(e,this,i)})},lodash.tail=function tail(e){var t=null==e?0:e.length;return t?baseSlice(e,1,t):[]},lodash.take=function take(e,t,r){return e&&e.length?baseSlice(e,0,(t=r||t===i?1:toInteger(t))<0?0:t):[]},lodash.takeRight=function takeRight(e,t,r){var n=null==e?0:e.length;return n?baseSlice(e,(t=n-(t=r||t===i?1:toInteger(t)))<0?0:t,n):[]},lodash.takeRightWhile=function takeRightWhile(e,t){return e&&e.length?baseWhile(e,getIteratee(t,3),!1,!0):[]},lodash.takeWhile=function takeWhile(e,t){return e&&e.length?baseWhile(e,getIteratee(t,3)):[]},lodash.tap=function tap(e,t){return t(e),e},lodash.throttle=function throttle(e,t,r){var n=!0,i=!0;if("function"!=typeof e)throw new nt(a);return isObject(r)&&(n="leading"in r?!!r.leading:n,i="trailing"in r?!!r.trailing:i),debounce(e,t,{leading:n,maxWait:t,trailing:i})},lodash.thru=thru,lodash.toArray=toArray,lodash.toPairs=ri,lodash.toPairsIn=ni,lodash.toPath=function toPath(e){return An(e)?arrayMap(e,toKey):isSymbol(e)?[e]:copyArray(Gr(toString(e)))},lodash.toPlainObject=toPlainObject,lodash.transform=function transform(e,t,r){var n=An(e),i=n||Ln(e)||Fn(e);if(t=getIteratee(t,4),null==r){var o=e&&e.constructor;r=i?n?new o:[]:isObject(e)&&isFunction(o)?Tr(It(e)):{}}return(i?arrayEach:baseForOwn)(e,function(e,n,i){return t(r,e,n,i)}),r},lodash.unary=function unary(e){return ary(e,1)},lodash.union=tn,lodash.unionBy=rn,lodash.unionWith=nn,lodash.uniq=function uniq(e){return e&&e.length?baseUniq(e):[]},lodash.uniqBy=function uniqBy(e,t){return e&&e.length?baseUniq(e,getIteratee(t,2)):[]},lodash.uniqWith=function uniqWith(e,t){return t="function"==typeof t?t:i,e&&e.length?baseUniq(e,i,t):[]},lodash.unset=function unset(e,t){return null==e||baseUnset(e,t)},lodash.unzip=unzip,lodash.unzipWith=unzipWith,lodash.update=function update(e,t,r){return null==e?e:baseUpdate(e,t,castFunction(r))},lodash.updateWith=function updateWith(e,t,r,n){return n="function"==typeof n?n:i,null==e?e:baseUpdate(e,t,castFunction(r),n)},lodash.values=values,lodash.valuesIn=function valuesIn(e){return null==e?[]:baseValues(e,keysIn(e))},lodash.without=on,lodash.words=words,lodash.wrap=function wrap(e,t){return kn(castFunction(t),e)},lodash.xor=sn,lodash.xorBy=an,lodash.xorWith=cn,lodash.zip=un,lodash.zipObject=function zipObject(e,t){return baseZipObject(e||[],t||[],assignValue)},lodash.zipObjectDeep=function zipObjectDeep(e,t){return baseZipObject(e||[],t||[],baseSet)},lodash.zipWith=ln,lodash.entries=ri,lodash.entriesIn=ni,lodash.extend=Hn,lodash.extendWith=$n,mixin(lodash,lodash),lodash.add=Si,lodash.attempt=di,lodash.camelCase=ii,lodash.capitalize=capitalize,lodash.ceil=Ci,lodash.clamp=function clamp(e,t,r){return r===i&&(r=t,t=i),r!==i&&(r=(r=toNumber(r))==r?r:0),t!==i&&(t=(t=toNumber(t))==t?t:0),baseClamp(toNumber(e),t,r)},lodash.clone=function clone(e){return baseClone(e,h)},lodash.cloneDeep=function cloneDeep(e){return baseClone(e,p|h)},lodash.cloneDeepWith=function cloneDeepWith(e,t){return baseClone(e,p|h,t="function"==typeof t?t:i)},lodash.cloneWith=function cloneWith(e,t){return baseClone(e,h,t="function"==typeof t?t:i)},lodash.conformsTo=function conformsTo(e,t){return null==t||baseConformsTo(e,t,keys(t))},lodash.deburr=deburr,lodash.defaultTo=function defaultTo(e,t){return null==e||e!=e?t:e},lodash.divide=xi,lodash.endsWith=function endsWith(e,t,r){e=toString(e),t=baseToString(t);var n=e.length,o=r=r===i?n:baseClamp(toInteger(r),0,n);return(r-=t.length)>=0&&e.slice(r,o)==t},lodash.eq=eq,lodash.escape=function escape(e){return(e=toString(e))&&Ce.test(e)?e.replace(Ee,Gt):e},lodash.escapeRegExp=function escapeRegExp(e){return(e=toString(e))&&Ae.test(e)?e.replace(Ne,"\\$&"):e},lodash.every=function every(e,t,r){var n=An(e)?arrayEvery:baseEvery;return r&&isIterateeCall(e,t,r)&&(t=i),n(e,getIteratee(t,3))},lodash.find=hn,lodash.findIndex=findIndex,lodash.findKey=function findKey(e,t){return baseFindKey(e,getIteratee(t,3),baseForOwn)},lodash.findLast=fn,lodash.findLastIndex=findLastIndex,lodash.findLastKey=function findLastKey(e,t){return baseFindKey(e,getIteratee(t,3),baseForOwnRight)},lodash.floor=ki,lodash.forEach=forEach,lodash.forEachRight=forEachRight,lodash.forIn=function forIn(e,t){return null==e?e:Nr(e,getIteratee(t,3),keysIn)},lodash.forInRight=function forInRight(e,t){return null==e?e:Ar(e,getIteratee(t,3),keysIn)},lodash.forOwn=function forOwn(e,t){return e&&baseForOwn(e,getIteratee(t,3))},lodash.forOwnRight=function forOwnRight(e,t){return e&&baseForOwnRight(e,getIteratee(t,3))},lodash.get=get,lodash.gt=On,lodash.gte=In,lodash.has=function has(e,t){return null!=e&&hasPath(e,t,baseHas)},lodash.hasIn=hasIn,lodash.head=head,lodash.identity=identity,lodash.includes=function includes(e,t,r,n){e=isArrayLike(e)?e:values(e),r=r&&!n?toInteger(r):0;var i=e.length;return r<0&&(r=sr(i+r,0)),isString(e)?r<=i&&e.indexOf(t,r)>-1:!!i&&baseIndexOf(e,t,r)>-1},lodash.indexOf=function indexOf(e,t,r){var n=null==e?0:e.length;if(!n)return-1;var i=null==r?0:toInteger(r);return i<0&&(i=sr(n+i,0)),baseIndexOf(e,t,i)},lodash.inRange=function inRange(e,t,r){return t=toFinite(t),r===i?(r=t,t=0):r=toFinite(r),function baseInRange(e,t,r){return e>=ar(t,r)&&e<sr(t,r)}(e=toNumber(e),t,r)},lodash.invoke=Kn,lodash.isArguments=Nn,lodash.isArray=An,lodash.isArrayBuffer=Pn,lodash.isArrayLike=isArrayLike,lodash.isArrayLikeObject=isArrayLikeObject,lodash.isBoolean=function isBoolean(e){return!0===e||!1===e||isObjectLike(e)&&baseGetTag(e)==H},lodash.isBuffer=Ln,lodash.isDate=Dn,lodash.isElement=function isElement(e){return isObjectLike(e)&&1===e.nodeType&&!isPlainObject(e)},lodash.isEmpty=function isEmpty(e){if(null==e)return!0;if(isArrayLike(e)&&(An(e)||"string"==typeof e||"function"==typeof e.splice||Ln(e)||Fn(e)||Nn(e)))return!e.length;var t=Ur(e);if(t==X||t==te)return!e.size;if(isPrototype(e))return!baseKeys(e).length;for(var r in e)if(ut.call(e,r))return!1;return!0},lodash.isEqual=function isEqual(e,t){return baseIsEqual(e,t)},lodash.isEqualWith=function isEqualWith(e,t,r){var n=(r="function"==typeof r?r:i)?r(e,t):i;return n===i?baseIsEqual(e,t,i,r):!!n},lodash.isError=isError,lodash.isFinite=function isFinite(e){return"number"==typeof e&&nr(e)},lodash.isFunction=isFunction,lodash.isInteger=isInteger,lodash.isLength=isLength,lodash.isMap=Mn,lodash.isMatch=function isMatch(e,t){return e===t||baseIsMatch(e,t,getMatchData(t))},lodash.isMatchWith=function isMatchWith(e,t,r){return r="function"==typeof r?r:i,baseIsMatch(e,t,getMatchData(t),r)},lodash.isNaN=function isNaN(e){return isNumber(e)&&e!=+e},lodash.isNative=function isNative(e){if(Br(e))throw new Ke(s);return baseIsNative(e)},lodash.isNil=function isNil(e){return null==e},lodash.isNull=function isNull(e){return null===e},lodash.isNumber=isNumber,lodash.isObject=isObject,lodash.isObjectLike=isObjectLike,lodash.isPlainObject=isPlainObject,lodash.isRegExp=jn,lodash.isSafeInteger=function isSafeInteger(e){return isInteger(e)&&e>=-P&&e<=P},lodash.isSet=qn,lodash.isString=isString,lodash.isSymbol=isSymbol,lodash.isTypedArray=Fn,lodash.isUndefined=function isUndefined(e){return e===i},lodash.isWeakMap=function isWeakMap(e){return isObjectLike(e)&&Ur(e)==oe},lodash.isWeakSet=function isWeakSet(e){return isObjectLike(e)&&baseGetTag(e)==se},lodash.join=function join(e,t){return null==e?"":ir.call(e,t)},lodash.kebabCase=oi,lodash.last=last,lodash.lastIndexOf=function lastIndexOf(e,t,r){var n=null==e?0:e.length;if(!n)return-1;var o=n;return r!==i&&(o=(o=toInteger(r))<0?sr(n+o,0):ar(o,n-1)),t==t?function strictLastIndexOf(e,t,r){for(var n=r+1;n--;)if(e[n]===t)return n;return n}(e,t,o):baseFindIndex(e,baseIsNaN,o,!0)},lodash.lowerCase=si,lodash.lowerFirst=ai,lodash.lt=zn,lodash.lte=Un,lodash.max=function max(e){return e&&e.length?baseExtremum(e,identity,baseGt):i},lodash.maxBy=function maxBy(e,t){return e&&e.length?baseExtremum(e,getIteratee(t,2),baseGt):i},lodash.mean=function mean(e){return baseMean(e,identity)},lodash.meanBy=function meanBy(e,t){return baseMean(e,getIteratee(t,2))},lodash.min=function min(e){return e&&e.length?baseExtremum(e,identity,baseLt):i},lodash.minBy=function minBy(e,t){return e&&e.length?baseExtremum(e,getIteratee(t,2),baseLt):i},lodash.stubArray=stubArray,lodash.stubFalse=stubFalse,lodash.stubObject=function stubObject(){return{}},lodash.stubString=function stubString(){return""},lodash.stubTrue=function stubTrue(){return!0},lodash.multiply=Ti,lodash.nth=function nth(e,t){return e&&e.length?baseNth(e,toInteger(t)):i},lodash.noConflict=function noConflict(){return At._===this&&(At._=ft),this},lodash.noop=noop,lodash.now=_n,lodash.pad=function pad(e,t,r){e=toString(e);var n=(t=toInteger(t))?stringSize(e):0;if(!t||n>=t)return e;var i=(t-n)/2;return createPadding(er(i),r)+e+createPadding(Zt(i),r)},lodash.padEnd=function padEnd(e,t,r){e=toString(e);var n=(t=toInteger(t))?stringSize(e):0;return t&&n<t?e+createPadding(t-n,r):e},lodash.padStart=function padStart(e,t,r){e=toString(e);var n=(t=toInteger(t))?stringSize(e):0;return t&&n<t?createPadding(t-n,r)+e:e},lodash.parseInt=function parseInt(e,t,r){return r||null==t?t=0:t&&(t=+t),ur(toString(e).replace(Le,""),t||0)},lodash.random=function random(e,t,r){if(r&&"boolean"!=typeof r&&isIterateeCall(e,t,r)&&(t=r=i),r===i&&("boolean"==typeof t?(r=t,t=i):"boolean"==typeof e&&(r=e,e=i)),e===i&&t===i?(e=0,t=1):(e=toFinite(e),t===i?(t=e,e=0):t=toFinite(t)),e>t){var n=e;e=t,t=n}if(r||e%1||t%1){var o=lr();return ar(e+o*(t-e+Tt("1e-"+((o+"").length-1))),t)}return baseRandom(e,t)},lodash.reduce=function reduce(e,t,r){var n=An(e)?arrayReduce:baseReduce,i=arguments.length<3;return n(e,getIteratee(t,4),r,i,Or)},lodash.reduceRight=function reduceRight(e,t,r){var n=An(e)?arrayReduceRight:baseReduce,i=arguments.length<3;return n(e,getIteratee(t,4),r,i,Ir)},lodash.repeat=function repeat(e,t,r){return t=(r?isIterateeCall(e,t,r):t===i)?1:toInteger(t),baseRepeat(toString(e),t)},lodash.replace=function replace(){var e=arguments,t=toString(e[0]);return e.length<3?t:t.replace(e[1],e[2])},lodash.result=function result(e,t,r){var n=-1,o=(t=castPath(t,e)).length;for(o||(o=1,e=i);++n<o;){var s=null==e?i:e[toKey(t[n])];s===i&&(n=o,s=r),e=isFunction(s)?s.call(e):s}return e},lodash.round=Oi,lodash.runInContext=runInContext,lodash.sample=function sample(e){return(An(e)?arraySample:baseSample)(e)},lodash.size=function size(e){if(null==e)return 0;if(isArrayLike(e))return isString(e)?stringSize(e):e.length;var t=Ur(e);return t==X||t==te?e.size:baseKeys(e).length},lodash.snakeCase=ci,lodash.some=function some(e,t,r){var n=An(e)?arraySome:baseSome;return r&&isIterateeCall(e,t,r)&&(t=i),n(e,getIteratee(t,3))},lodash.sortedIndex=function sortedIndex(e,t){return baseSortedIndex(e,t)},lodash.sortedIndexBy=function sortedIndexBy(e,t,r){return baseSortedIndexBy(e,t,getIteratee(r,2))},lodash.sortedIndexOf=function sortedIndexOf(e,t){var r=null==e?0:e.length;if(r){var n=baseSortedIndex(e,t);if(n<r&&eq(e[n],t))return n}return-1},lodash.sortedLastIndex=function sortedLastIndex(e,t){return baseSortedIndex(e,t,!0)},lodash.sortedLastIndexBy=function sortedLastIndexBy(e,t,r){return baseSortedIndexBy(e,t,getIteratee(r,2),!0)},lodash.sortedLastIndexOf=function sortedLastIndexOf(e,t){if(null!=e&&e.length){var r=baseSortedIndex(e,t,!0)-1;if(eq(e[r],t))return r}return-1},lodash.startCase=ui,lodash.startsWith=function startsWith(e,t,r){return e=toString(e),r=null==r?0:baseClamp(toInteger(r),0,e.length),t=baseToString(t),e.slice(r,r+t.length)==t},lodash.subtract=Ii,lodash.sum=function sum(e){return e&&e.length?baseSum(e,identity):0},lodash.sumBy=function sumBy(e,t){return e&&e.length?baseSum(e,getIteratee(t,2)):0},lodash.template=function template(e,t,r){var n=lodash.templateSettings;r&&isIterateeCall(e,t,r)&&(t=i),e=toString(e),t=$n({},t,n,customDefaultsAssignIn);var o,s,a=$n({},t.imports,n.imports,customDefaultsAssignIn),c=keys(a),u=baseValues(a,c),l=0,p=t.interpolate||Xe,d="__p += '",h=tt((t.escape||Xe).source+"|"+p.source+"|"+(p===Re?Ue:Xe).source+"|"+(t.evaluate||Xe).source+"|$","g"),f="//# sourceURL="+("sourceURL"in t?t.sourceURL:"lodash.templateSources["+ ++Ct+"]")+"\n";e.replace(h,function(t,r,n,i,a,c){return n||(n=i),d+=e.slice(l,c).replace(Ye,escapeStringChar),r&&(o=!0,d+="' +\n__e("+r+") +\n'"),a&&(s=!0,d+="';\n"+a+";\n__p += '"),n&&(d+="' +\n((__t = ("+n+")) == null ? '' : __t) +\n'"),l=c+t.length,t}),d+="';\n";var m=t.variable;m||(d="with (obj) {\n"+d+"\n}\n"),d=(s?d.replace(ve,""):d).replace(be,"$1").replace(_e,"$1;"),d="function("+(m||"obj")+") {\n"+(m?"":"obj || (obj = {});\n")+"var __t, __p = ''"+(o?", __e = _.escape":"")+(s?", __j = Array.prototype.join;\nfunction print() { __p += __j.call(arguments, '') }\n":";\n")+d+"return __p\n}";var g=di(function(){return Qe(c,f+"return "+d).apply(i,u)});if(g.source=d,isError(g))throw g;return g},lodash.times=function times(e,t){if((e=toInteger(e))<1||e>P)return[];var r=M,n=ar(e,M);t=getIteratee(t),e-=M;for(var i=baseTimes(n,t);++r<e;)t(r);return i},lodash.toFinite=toFinite,lodash.toInteger=toInteger,lodash.toLength=toLength,lodash.toLower=function toLower(e){return toString(e).toLowerCase()},lodash.toNumber=toNumber,lodash.toSafeInteger=function toSafeInteger(e){return e?baseClamp(toInteger(e),-P,P):0===e?e:0},lodash.toString=toString,lodash.toUpper=function toUpper(e){return toString(e).toUpperCase()},lodash.trim=function trim(e,t,r){if((e=toString(e))&&(r||t===i))return e.replace(Pe,"");if(!e||!(t=baseToString(t)))return e;var n=stringToArray(e),o=stringToArray(t);return castSlice(n,charsStartIndex(n,o),charsEndIndex(n,o)+1).join("")},lodash.trimEnd=function trimEnd(e,t,r){if((e=toString(e))&&(r||t===i))return e.replace(De,"");if(!e||!(t=baseToString(t)))return e;var n=stringToArray(e);return castSlice(n,0,charsEndIndex(n,stringToArray(t))+1).join("")},lodash.trimStart=function trimStart(e,t,r){if((e=toString(e))&&(r||t===i))return e.replace(Le,"");if(!e||!(t=baseToString(t)))return e;var n=stringToArray(e);return castSlice(n,charsStartIndex(n,stringToArray(t))).join("")},lodash.truncate=function truncate(e,t){var r=k,n=R;if(isObject(t)){var o="separator"in t?t.separator:o;r="length"in t?toInteger(t.length):r,n="omission"in t?baseToString(t.omission):n}var s=(e=toString(e)).length;if(hasUnicode(e)){var a=stringToArray(e);s=a.length}if(r>=s)return e;var c=r-stringSize(n);if(c<1)return n;var u=a?castSlice(a,0,c).join(""):e.slice(0,c);if(o===i)return u+n;if(a&&(c+=u.length-c),jn(o)){if(e.slice(c).search(o)){var l,p=u;for(o.global||(o=tt(o.source,toString(Be.exec(o))+"g")),o.lastIndex=0;l=o.exec(p);)var d=l.index;u=u.slice(0,d===i?c:d)}}else if(e.indexOf(baseToString(o),c)!=c){var h=u.lastIndexOf(o);h>-1&&(u=u.slice(0,h))}return u+n},lodash.unescape=function unescape(e){return(e=toString(e))&&Se.test(e)?e.replace(we,Wt):e},lodash.uniqueId=function uniqueId(e){var t=++lt;return toString(e)+t},lodash.upperCase=li,lodash.upperFirst=pi,lodash.each=forEach,lodash.eachRight=forEachRight,lodash.first=head,mixin(lodash,(Ri={},baseForOwn(lodash,function(e,t){ut.call(lodash.prototype,t)||(Ri[t]=e)}),Ri),{chain:!1}),lodash.VERSION="4.17.11",arrayEach(["bind","bindKey","curry","curryRight","partial","partialRight"],function(e){lodash[e].placeholder=lodash}),arrayEach(["drop","take"],function(e,t){LazyWrapper.prototype[e]=function(r){r=r===i?1:sr(toInteger(r),0);var n=this.__filtered__&&!t?new LazyWrapper(this):this.clone();return n.__filtered__?n.__takeCount__=ar(r,n.__takeCount__):n.__views__.push({size:ar(r,M),type:e+(n.__dir__<0?"Right":"")}),n},LazyWrapper.prototype[e+"Right"]=function(t){return this.reverse()[e](t).reverse()}}),arrayEach(["filter","map","takeWhile"],function(e,t){var r=t+1,n=r==I||3==r;LazyWrapper.prototype[e]=function(e){var t=this.clone();return t.__iteratees__.push({iteratee:getIteratee(e,3),type:r}),t.__filtered__=t.__filtered__||n,t}}),arrayEach(["head","last"],function(e,t){var r="take"+(t?"Right":"");LazyWrapper.prototype[e]=function(){return this[r](1).value()[0]}}),arrayEach(["initial","tail"],function(e,t){var r="drop"+(t?"":"Right");LazyWrapper.prototype[e]=function(){return this.__filtered__?new LazyWrapper(this):this[r](1)}}),LazyWrapper.prototype.compact=function(){return this.filter(identity)},LazyWrapper.prototype.find=function(e){return this.filter(e).head()},LazyWrapper.prototype.findLast=function(e){return this.reverse().find(e)},LazyWrapper.prototype.invokeMap=baseRest(function(e,t){return"function"==typeof e?new LazyWrapper(this):this.map(function(r){return baseInvoke(r,e,t)})}),LazyWrapper.prototype.reject=function(e){return this.filter(negate(getIteratee(e)))},LazyWrapper.prototype.slice=function(e,t){e=toInteger(e);var r=this;return r.__filtered__&&(e>0||t<0)?new LazyWrapper(r):(e<0?r=r.takeRight(-e):e&&(r=r.drop(e)),t!==i&&(r=(t=toInteger(t))<0?r.dropRight(-t):r.take(t-e)),r)},LazyWrapper.prototype.takeRightWhile=function(e){return this.reverse().takeWhile(e).reverse()},LazyWrapper.prototype.toArray=function(){return this.take(M)},baseForOwn(LazyWrapper.prototype,function(e,t){var r=/^(?:filter|find|map|reject)|While$/.test(t),n=/^(?:head|last)$/.test(t),o=lodash[n?"take"+("last"==t?"Right":""):t],s=n||/^find/.test(t);o&&(lodash.prototype[t]=function(){var t=this.__wrapped__,a=n?[1]:arguments,c=t instanceof LazyWrapper,u=a[0],l=c||An(t),p=function(e){var t=o.apply(lodash,arrayPush([e],a));return n&&d?t[0]:t};l&&r&&"function"==typeof u&&1!=u.length&&(c=l=!1);var d=this.__chain__,h=!!this.__actions__.length,f=s&&!d,m=c&&!h;if(!s&&l){t=m?t:new LazyWrapper(this);var g=e.apply(t,a);return g.__actions__.push({func:thru,args:[p],thisArg:i}),new LodashWrapper(g,d)}return f&&m?e.apply(this,a):(g=this.thru(p),f?n?g.value()[0]:g.value():g)})}),arrayEach(["pop","push","shift","sort","splice","unshift"],function(e){var t=it[e],r=/^(?:push|sort|unshift)$/.test(e)?"tap":"thru",n=/^(?:pop|shift)$/.test(e);lodash.prototype[e]=function(){var e=arguments;if(n&&!this.__chain__){var i=this.value();return t.apply(An(i)?i:[],e)}return this[r](function(r){return t.apply(An(r)?r:[],e)})}}),baseForOwn(LazyWrapper.prototype,function(e,t){var r=lodash[t];if(r){var n=r.name+"";(br[n]||(br[n]=[])).push({name:t,func:r})}}),br[createHybrid(i,y).name]=[{name:"wrapper",func:i}],LazyWrapper.prototype.clone=function lazyClone(){var e=new LazyWrapper(this.__wrapped__);return e.__actions__=copyArray(this.__actions__),e.__dir__=this.__dir__,e.__filtered__=this.__filtered__,e.__iteratees__=copyArray(this.__iteratees__),e.__takeCount__=this.__takeCount__,e.__views__=copyArray(this.__views__),e},LazyWrapper.prototype.reverse=function lazyReverse(){if(this.__filtered__){var e=new LazyWrapper(this);e.__dir__=-1,e.__filtered__=!0}else(e=this.clone()).__dir__*=-1;return e},LazyWrapper.prototype.value=function lazyValue(){var e=this.__wrapped__.value(),t=this.__dir__,r=An(e),n=t<0,i=r?e.length:0,o=function getView(e,t,r){for(var n=-1,i=r.length;++n<i;){var o=r[n],s=o.size;switch(o.type){case"drop":e+=s;break;case"dropRight":t-=s;break;case"take":t=ar(t,e+s);break;case"takeRight":e=sr(e,t-s)}}return{start:e,end:t}}(0,i,this.__views__),s=o.start,a=o.end,c=a-s,u=n?a:s-1,l=this.__iteratees__,p=l.length,d=0,h=ar(c,this.__takeCount__);if(!r||!n&&i==c&&h==c)return baseWrapperValue(e,this.__actions__);var f=[];e:for(;c--&&d<h;){for(var m=-1,g=e[u+=t];++m<p;){var y=l[m],v=y.iteratee,b=y.type,_=v(g);if(b==N)g=_;else if(!_){if(b==I)continue e;break e}}f[d++]=g}return f},lodash.prototype.at=pn,lodash.prototype.chain=function wrapperChain(){return chain(this)},lodash.prototype.commit=function wrapperCommit(){return new LodashWrapper(this.value(),this.__chain__)},lodash.prototype.next=function wrapperNext(){this.__values__===i&&(this.__values__=toArray(this.value()));var e=this.__index__>=this.__values__.length;return{done:e,value:e?i:this.__values__[this.__index__++]}},lodash.prototype.plant=function wrapperPlant(e){for(var t,r=this;r instanceof baseLodash;){var n=wrapperClone(r);n.__index__=0,n.__values__=i,t?o.__wrapped__=n:t=n;var o=n;r=r.__wrapped__}return o.__wrapped__=e,t},lodash.prototype.reverse=function wrapperReverse(){var e=this.__wrapped__;if(e instanceof LazyWrapper){var t=e;return this.__actions__.length&&(t=new LazyWrapper(this)),(t=t.reverse()).__actions__.push({func:thru,args:[reverse],thisArg:i}),new LodashWrapper(t,this.__chain__)}return this.thru(reverse)},lodash.prototype.toJSON=lodash.prototype.valueOf=lodash.prototype.value=function wrapperValue(){return baseWrapperValue(this.__wrapped__,this.__actions__)},lodash.prototype.first=lodash.prototype.head,jt&&(lodash.prototype[jt]=function wrapperToIterator(){return this}),lodash}();At._=Jt,(n=function(){return Jt}.call(t,r,t,e))===i||(e.exports=n)}).call(this)}).call(this,r(48)(e))},function(e,t,r){e.exports=Fingerprint;var n=r(13),i=r(19).Buffer,o=r(32),s=r(12),a=r(64),c=r(30),u=r(115),l=r(26),p=a.FingerprintFormatError,d=a.InvalidAlgorithmError;function Fingerprint(e){if(n.object(e,"options"),n.string(e.type,"options.type"),n.buffer(e.hash,"options.hash"),n.string(e.algorithm,"options.algorithm"),this.algorithm=e.algorithm.toLowerCase(),!0!==o.hashAlgs[this.algorithm])throw new d(this.algorithm);this.hash=e.hash,this.type=e.type}Fingerprint.prototype.toString=function(e){switch(void 0===e&&(e="md5"===this.algorithm?"hex":"base64"),n.string(e),e){case"hex":return function addColons(e){return e.replace(/(.{2})(?=.)/g,"$1:")}(this.hash.toString("hex"));case"base64":return function sshBase64Format(e,t){return e.toUpperCase()+":"+function base64Strip(e){return e.replace(/=*$/,"")}(t)}(this.algorithm,this.hash.toString("base64"));default:throw new p(void 0,e)}},Fingerprint.prototype.matches=function(e){n.object(e,"key or certificate"),"key"===this.type?l.assertCompatible(e,c,[1,0],"key"):l.assertCompatible(e,u,[1,0],"certificate");var t=e.hash(this.algorithm),r=s.createHash(this.algorithm).update(t).digest("base64");return void 0===this.hash2&&(this.hash2=s.createHash(this.algorithm).update(this.hash).digest("base64")),this.hash2===r},Fingerprint.parse=function(e,t){var r,s,a;n.string(e,"fingerprint"),Array.isArray(t)&&(a=t,t={}),n.optionalObject(t,"options"),void 0===t&&(t={}),void 0!==t.enAlgs&&(a=t.enAlgs),n.optionalArrayOfString(a,"algorithms");var c=e.split(":");if(2==c.length){r=c[0].toLowerCase();if(!/^[A-Za-z0-9+\/=]+$/.test(c[1]))throw new p(e);try{s=i.from(c[1],"base64")}catch(t){throw new p(e)}}else if(c.length>2){r="md5","md5"===c[0].toLowerCase()&&(c=c.slice(1)),c=(c=c.map(function(t){for(;t.length<2;)t="0"+t;if(t.length>2)throw new p(e);return t})).join("");if(!/^[a-fA-F0-9]+$/.test(c)||c.length%2!=0)throw new p(e);try{s=i.from(c,"hex")}catch(t){throw new p(e)}}if(void 0===r)throw new p(e);if(void 0===o.hashAlgs[r])throw new d(r);if(void 0!==a&&-1===(a=a.map(function(e){return e.toLowerCase()})).indexOf(r))throw new d(r);return new Fingerprint({algorithm:r,hash:s,type:t.type||"key"})},Fingerprint.isFingerprint=function(e,t){return l.isCompatible(e,Fingerprint,t)},Fingerprint.prototype._sshpkApiVersion=[1,1],Fingerprint._oldVersionDetect=function(e){return n.func(e.toString),n.func(e.matches),[1,0]}},function(e,t,r){e.exports=Certificate;var n=r(13),i=r(19).Buffer,o=r(32),s=r(12),a=r(114),c=(r(65),r(64)),u=(r(1),r(26)),l=r(30),p=r(33),d=r(120),h={};h.openssh=r(671),h.x509=r(308),h.pem=r(672);var f=c.CertificateParseError,m=c.InvalidAlgorithmError;function Certificate(e){n.object(e,"options"),n.arrayOfObject(e.subjects,"options.subjects"),u.assertCompatible(e.subjects[0],d,[1,0],"options.subjects"),u.assertCompatible(e.subjectKey,l,[1,0],"options.subjectKey"),u.assertCompatible(e.issuer,d,[1,0],"options.issuer"),void 0!==e.issuerKey&&u.assertCompatible(e.issuerKey,l,[1,0],"options.issuerKey"),n.object(e.signatures,"options.signatures"),n.buffer(e.serial,"options.serial"),n.date(e.validFrom,"options.validFrom"),n.date(e.validUntil,"optons.validUntil"),n.optionalArrayOfString(e.purposes,"options.purposes"),this._hashCache={},this.subjects=e.subjects,this.issuer=e.issuer,this.subjectKey=e.subjectKey,this.issuerKey=e.issuerKey,this.signatures=e.signatures,this.serial=e.serial,this.validFrom=e.validFrom,this.validUntil=e.validUntil,this.purposes=e.purposes}Certificate.formats=h,Certificate.prototype.toBuffer=function(e,t){return void 0===e&&(e="x509"),n.string(e,"format"),n.object(h[e],"formats[format]"),n.optionalObject(t,"options"),h[e].write(this,t)},Certificate.prototype.toString=function(e,t){return void 0===e&&(e="pem"),this.toBuffer(e,t).toString()},Certificate.prototype.fingerprint=function(e){void 0===e&&(e="sha256"),n.string(e,"algorithm");var t={type:"certificate",hash:this.hash(e),algorithm:e};return new a(t)},Certificate.prototype.hash=function(e){if(n.string(e,"algorithm"),e=e.toLowerCase(),void 0===o.hashAlgs[e])throw new m(e);if(this._hashCache[e])return this._hashCache[e];var t=s.createHash(e).update(this.toBuffer("x509")).digest();return this._hashCache[e]=t,t},Certificate.prototype.isExpired=function(e){return void 0===e&&(e=new Date),!(e.getTime()>=this.validFrom.getTime()&&e.getTime()<this.validUntil.getTime())},Certificate.prototype.isSignedBy=function(e){return u.assertCompatible(e,Certificate,[1,0],"issuer"),!!this.issuer.equals(e.subjects[0])&&(!(this.issuer.purposes&&this.issuer.purposes.length>0&&-1===this.issuer.purposes.indexOf("ca"))&&this.isSignedByKey(e.subjectKey))},Certificate.prototype.getExtension=function(e){return n.string(e,"keyOrOid"),this.getExtensions().filter(function(t){return"x509"===t.format?t.oid===e:"openssh"===t.format&&t.name===e})[0]},Certificate.prototype.getExtensions=function(){var e=[],t=this.signatures.x509;t&&t.extras&&t.extras.exts&&t.extras.exts.forEach(function(t){t.format="x509",e.push(t)});var r=this.signatures.openssh;return r&&r.exts&&r.exts.forEach(function(t){t.format="openssh",e.push(t)}),e},Certificate.prototype.isSignedByKey=function(e){if(u.assertCompatible(e,l,[1,2],"issuerKey"),void 0!==this.issuerKey)return this.issuerKey.fingerprint("sha512").matches(e);var t=Object.keys(this.signatures)[0],r=h[t].verify(this,e);return r&&(this.issuerKey=e),r},Certificate.prototype.signWith=function(e){u.assertCompatible(e,p,[1,2],"key");for(var t=Object.keys(h),r=!1,n=0;n<t.length;++n){if("pem"!==t[n])!0===h[t[n]].sign(this,e)&&(r=!0)}if(!r)throw new Error("Failed to sign the certificate for any available certificate formats")},Certificate.createSelfSigned=function(e,t,r){var o;o=Array.isArray(e)?e:[e],n.arrayOfObject(o),o.forEach(function(e){u.assertCompatible(e,d,[1,0],"subject")}),u.assertCompatible(t,p,[1,2],"private key"),n.optionalObject(r,"options"),void 0===r&&(r={}),n.optionalObject(r.validFrom,"options.validFrom"),n.optionalObject(r.validUntil,"options.validUntil");var s=r.validFrom,a=r.validUntil;if(void 0===s&&(s=new Date),void 0===a){n.optionalNumber(r.lifetime,"options.lifetime");var c=r.lifetime;void 0===c&&(c=31536e4),(a=new Date).setTime(a.getTime()+1e3*c)}n.optionalBuffer(r.serial,"options.serial");var l=r.serial;void 0===l&&(l=i.from("0000000000000001","hex"));var h=r.purposes;if(void 0===h&&(h=[]),-1===h.indexOf("signature")&&h.push("signature"),-1===h.indexOf("ca")&&h.push("ca"),-1===h.indexOf("crl")&&h.push("crl"),h.length<=3){var f=o.filter(function(e){return"host"===e.type}),m=o.filter(function(e){return"user"===e.type});f.length>0&&-1===h.indexOf("serverAuth")&&h.push("serverAuth"),m.length>0&&-1===h.indexOf("clientAuth")&&h.push("clientAuth"),(m.length>0||f.length>0)&&(-1===h.indexOf("keyAgreement")&&h.push("keyAgreement"),"rsa"===t.type&&-1===h.indexOf("encryption")&&h.push("encryption"))}var g=new Certificate({subjects:o,issuer:o[0],subjectKey:t.toPublic(),issuerKey:t.toPublic(),signatures:{},serial:l,validFrom:s,validUntil:a,purposes:h});return g.signWith(t),g},Certificate.create=function(e,t,r,o,s){var a;a=Array.isArray(e)?e:[e],n.arrayOfObject(a),a.forEach(function(e){u.assertCompatible(e,d,[1,0],"subject")}),u.assertCompatible(t,l,[1,0],"key"),p.isPrivateKey(t)&&(t=t.toPublic()),u.assertCompatible(r,d,[1,0],"issuer"),u.assertCompatible(o,p,[1,2],"issuer key"),n.optionalObject(s,"options"),void 0===s&&(s={}),n.optionalObject(s.validFrom,"options.validFrom"),n.optionalObject(s.validUntil,"options.validUntil");var c=s.validFrom,h=s.validUntil;if(void 0===c&&(c=new Date),void 0===h){n.optionalNumber(s.lifetime,"options.lifetime");var f=s.lifetime;void 0===f&&(f=31536e4),(h=new Date).setTime(h.getTime()+1e3*f)}n.optionalBuffer(s.serial,"options.serial");var m=s.serial;void 0===m&&(m=i.from("0000000000000001","hex"));var g=s.purposes;void 0===g&&(g=[]),-1===g.indexOf("signature")&&g.push("signature"),!0===s.ca&&(-1===g.indexOf("ca")&&g.push("ca"),-1===g.indexOf("crl")&&g.push("crl"));var y=a.filter(function(e){return"host"===e.type}),v=a.filter(function(e){return"user"===e.type});y.length>0&&-1===g.indexOf("serverAuth")&&g.push("serverAuth"),v.length>0&&-1===g.indexOf("clientAuth")&&g.push("clientAuth"),(v.length>0||y.length>0)&&(-1===g.indexOf("keyAgreement")&&g.push("keyAgreement"),"rsa"===t.type&&-1===g.indexOf("encryption")&&g.push("encryption"));var b=new Certificate({subjects:a,issuer:r,subjectKey:t,issuerKey:o.toPublic(),signatures:{},serial:m,validFrom:c,validUntil:h,purposes:g});return b.signWith(o),b},Certificate.parse=function(e,t,r){"string"!=typeof e&&n.buffer(e,"data"),void 0===t&&(t="auto"),n.string(t,"format"),"string"==typeof r&&(r={filename:r}),n.optionalObject(r,"options"),void 0===r&&(r={}),n.optionalString(r.filename,"options.filename"),void 0===r.filename&&(r.filename="(unnamed)"),n.object(h[t],"formats[format]");try{return h[t].read(e,r)}catch(e){throw new f(r.filename,t,e)}},Certificate.isCertificate=function(e,t){return u.isCompatible(e,Certificate,t)},Certificate.prototype._sshpkApiVersion=[1,1],Certificate._oldVersionDetect=function(e){return[1,0]}},function(e,t,r){!function(e){"use strict";var t=function(e){var t,r=new Float64Array(16);if(e)for(t=0;t<e.length;t++)r[t]=e[t];return r},n=function(){throw new Error("no PRNG")},i=new Uint8Array(16),o=new Uint8Array(32);o[0]=9;var s=t(),a=t([1]),c=t([56129,1]),u=t([30883,4953,19914,30187,55467,16705,2637,112,59544,30585,16505,36039,65139,11119,27886,20995]),l=t([61785,9906,39828,60374,45398,33411,5274,224,53552,61171,33010,6542,64743,22239,55772,9222]),p=t([54554,36645,11616,51542,42930,38181,51040,26924,56412,64982,57905,49316,21502,52590,14035,8553]),d=t([26200,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214]),h=t([41136,18958,6951,50414,58488,44335,6150,12099,55207,15867,153,11085,57099,20417,9344,11139]);function ts64(e,t,r,n){e[t]=r>>24&255,e[t+1]=r>>16&255,e[t+2]=r>>8&255,e[t+3]=255&r,e[t+4]=n>>24&255,e[t+5]=n>>16&255,e[t+6]=n>>8&255,e[t+7]=255&n}function vn(e,t,r,n,i){var o,s=0;for(o=0;o<i;o++)s|=e[t+o]^r[n+o];return(1&s-1>>>8)-1}function crypto_verify_16(e,t,r,n){return vn(e,t,r,n,16)}function crypto_verify_32(e,t,r,n){return vn(e,t,r,n,32)}function crypto_core_salsa20(e,t,r,n){!function core_salsa20(e,t,r,n){for(var i,o=255&n[0]|(255&n[1])<<8|(255&n[2])<<16|(255&n[3])<<24,s=255&r[0]|(255&r[1])<<8|(255&r[2])<<16|(255&r[3])<<24,a=255&r[4]|(255&r[5])<<8|(255&r[6])<<16|(255&r[7])<<24,c=255&r[8]|(255&r[9])<<8|(255&r[10])<<16|(255&r[11])<<24,u=255&r[12]|(255&r[13])<<8|(255&r[14])<<16|(255&r[15])<<24,l=255&n[4]|(255&n[5])<<8|(255&n[6])<<16|(255&n[7])<<24,p=255&t[0]|(255&t[1])<<8|(255&t[2])<<16|(255&t[3])<<24,d=255&t[4]|(255&t[5])<<8|(255&t[6])<<16|(255&t[7])<<24,h=255&t[8]|(255&t[9])<<8|(255&t[10])<<16|(255&t[11])<<24,f=255&t[12]|(255&t[13])<<8|(255&t[14])<<16|(255&t[15])<<24,m=255&n[8]|(255&n[9])<<8|(255&n[10])<<16|(255&n[11])<<24,g=255&r[16]|(255&r[17])<<8|(255&r[18])<<16|(255&r[19])<<24,y=255&r[20]|(255&r[21])<<8|(255&r[22])<<16|(255&r[23])<<24,v=255&r[24]|(255&r[25])<<8|(255&r[26])<<16|(255&r[27])<<24,b=255&r[28]|(255&r[29])<<8|(255&r[30])<<16|(255&r[31])<<24,_=255&n[12]|(255&n[13])<<8|(255&n[14])<<16|(255&n[15])<<24,w=o,E=s,S=a,C=c,x=u,k=l,R=p,T=d,O=h,I=f,N=m,A=g,P=y,L=v,D=b,M=_,j=0;j<20;j+=2)w^=(i=(P^=(i=(O^=(i=(x^=(i=w+P|0)<<7|i>>>25)+w|0)<<9|i>>>23)+x|0)<<13|i>>>19)+O|0)<<18|i>>>14,k^=(i=(E^=(i=(L^=(i=(I^=(i=k+E|0)<<7|i>>>25)+k|0)<<9|i>>>23)+I|0)<<13|i>>>19)+L|0)<<18|i>>>14,N^=(i=(R^=(i=(S^=(i=(D^=(i=N+R|0)<<7|i>>>25)+N|0)<<9|i>>>23)+D|0)<<13|i>>>19)+S|0)<<18|i>>>14,M^=(i=(A^=(i=(T^=(i=(C^=(i=M+A|0)<<7|i>>>25)+M|0)<<9|i>>>23)+C|0)<<13|i>>>19)+T|0)<<18|i>>>14,w^=(i=(C^=(i=(S^=(i=(E^=(i=w+C|0)<<7|i>>>25)+w|0)<<9|i>>>23)+E|0)<<13|i>>>19)+S|0)<<18|i>>>14,k^=(i=(x^=(i=(T^=(i=(R^=(i=k+x|0)<<7|i>>>25)+k|0)<<9|i>>>23)+R|0)<<13|i>>>19)+T|0)<<18|i>>>14,N^=(i=(I^=(i=(O^=(i=(A^=(i=N+I|0)<<7|i>>>25)+N|0)<<9|i>>>23)+A|0)<<13|i>>>19)+O|0)<<18|i>>>14,M^=(i=(D^=(i=(L^=(i=(P^=(i=M+D|0)<<7|i>>>25)+M|0)<<9|i>>>23)+P|0)<<13|i>>>19)+L|0)<<18|i>>>14;w=w+o|0,E=E+s|0,S=S+a|0,C=C+c|0,x=x+u|0,k=k+l|0,R=R+p|0,T=T+d|0,O=O+h|0,I=I+f|0,N=N+m|0,A=A+g|0,P=P+y|0,L=L+v|0,D=D+b|0,M=M+_|0,e[0]=w>>>0&255,e[1]=w>>>8&255,e[2]=w>>>16&255,e[3]=w>>>24&255,e[4]=E>>>0&255,e[5]=E>>>8&255,e[6]=E>>>16&255,e[7]=E>>>24&255,e[8]=S>>>0&255,e[9]=S>>>8&255,e[10]=S>>>16&255,e[11]=S>>>24&255,e[12]=C>>>0&255,e[13]=C>>>8&255,e[14]=C>>>16&255,e[15]=C>>>24&255,e[16]=x>>>0&255,e[17]=x>>>8&255,e[18]=x>>>16&255,e[19]=x>>>24&255,e[20]=k>>>0&255,e[21]=k>>>8&255,e[22]=k>>>16&255,e[23]=k>>>24&255,e[24]=R>>>0&255,e[25]=R>>>8&255,e[26]=R>>>16&255,e[27]=R>>>24&255,e[28]=T>>>0&255,e[29]=T>>>8&255,e[30]=T>>>16&255,e[31]=T>>>24&255,e[32]=O>>>0&255,e[33]=O>>>8&255,e[34]=O>>>16&255,e[35]=O>>>24&255,e[36]=I>>>0&255,e[37]=I>>>8&255,e[38]=I>>>16&255,e[39]=I>>>24&255,e[40]=N>>>0&255,e[41]=N>>>8&255,e[42]=N>>>16&255,e[43]=N>>>24&255,e[44]=A>>>0&255,e[45]=A>>>8&255,e[46]=A>>>16&255,e[47]=A>>>24&255,e[48]=P>>>0&255,e[49]=P>>>8&255,e[50]=P>>>16&255,e[51]=P>>>24&255,e[52]=L>>>0&255,e[53]=L>>>8&255,e[54]=L>>>16&255,e[55]=L>>>24&255,e[56]=D>>>0&255,e[57]=D>>>8&255,e[58]=D>>>16&255,e[59]=D>>>24&255,e[60]=M>>>0&255,e[61]=M>>>8&255,e[62]=M>>>16&255,e[63]=M>>>24&255}(e,t,r,n)}function crypto_core_hsalsa20(e,t,r,n){!function core_hsalsa20(e,t,r,n){for(var i,o=255&n[0]|(255&n[1])<<8|(255&n[2])<<16|(255&n[3])<<24,s=255&r[0]|(255&r[1])<<8|(255&r[2])<<16|(255&r[3])<<24,a=255&r[4]|(255&r[5])<<8|(255&r[6])<<16|(255&r[7])<<24,c=255&r[8]|(255&r[9])<<8|(255&r[10])<<16|(255&r[11])<<24,u=255&r[12]|(255&r[13])<<8|(255&r[14])<<16|(255&r[15])<<24,l=255&n[4]|(255&n[5])<<8|(255&n[6])<<16|(255&n[7])<<24,p=255&t[0]|(255&t[1])<<8|(255&t[2])<<16|(255&t[3])<<24,d=255&t[4]|(255&t[5])<<8|(255&t[6])<<16|(255&t[7])<<24,h=255&t[8]|(255&t[9])<<8|(255&t[10])<<16|(255&t[11])<<24,f=255&t[12]|(255&t[13])<<8|(255&t[14])<<16|(255&t[15])<<24,m=255&n[8]|(255&n[9])<<8|(255&n[10])<<16|(255&n[11])<<24,g=255&r[16]|(255&r[17])<<8|(255&r[18])<<16|(255&r[19])<<24,y=255&r[20]|(255&r[21])<<8|(255&r[22])<<16|(255&r[23])<<24,v=255&r[24]|(255&r[25])<<8|(255&r[26])<<16|(255&r[27])<<24,b=255&r[28]|(255&r[29])<<8|(255&r[30])<<16|(255&r[31])<<24,_=255&n[12]|(255&n[13])<<8|(255&n[14])<<16|(255&n[15])<<24,w=0;w<20;w+=2)o^=(i=(y^=(i=(h^=(i=(u^=(i=o+y|0)<<7|i>>>25)+o|0)<<9|i>>>23)+u|0)<<13|i>>>19)+h|0)<<18|i>>>14,l^=(i=(s^=(i=(v^=(i=(f^=(i=l+s|0)<<7|i>>>25)+l|0)<<9|i>>>23)+f|0)<<13|i>>>19)+v|0)<<18|i>>>14,m^=(i=(p^=(i=(a^=(i=(b^=(i=m+p|0)<<7|i>>>25)+m|0)<<9|i>>>23)+b|0)<<13|i>>>19)+a|0)<<18|i>>>14,_^=(i=(g^=(i=(d^=(i=(c^=(i=_+g|0)<<7|i>>>25)+_|0)<<9|i>>>23)+c|0)<<13|i>>>19)+d|0)<<18|i>>>14,o^=(i=(c^=(i=(a^=(i=(s^=(i=o+c|0)<<7|i>>>25)+o|0)<<9|i>>>23)+s|0)<<13|i>>>19)+a|0)<<18|i>>>14,l^=(i=(u^=(i=(d^=(i=(p^=(i=l+u|0)<<7|i>>>25)+l|0)<<9|i>>>23)+p|0)<<13|i>>>19)+d|0)<<18|i>>>14,m^=(i=(f^=(i=(h^=(i=(g^=(i=m+f|0)<<7|i>>>25)+m|0)<<9|i>>>23)+g|0)<<13|i>>>19)+h|0)<<18|i>>>14,_^=(i=(b^=(i=(v^=(i=(y^=(i=_+b|0)<<7|i>>>25)+_|0)<<9|i>>>23)+y|0)<<13|i>>>19)+v|0)<<18|i>>>14;e[0]=o>>>0&255,e[1]=o>>>8&255,e[2]=o>>>16&255,e[3]=o>>>24&255,e[4]=l>>>0&255,e[5]=l>>>8&255,e[6]=l>>>16&255,e[7]=l>>>24&255,e[8]=m>>>0&255,e[9]=m>>>8&255,e[10]=m>>>16&255,e[11]=m>>>24&255,e[12]=_>>>0&255,e[13]=_>>>8&255,e[14]=_>>>16&255,e[15]=_>>>24&255,e[16]=p>>>0&255,e[17]=p>>>8&255,e[18]=p>>>16&255,e[19]=p>>>24&255,e[20]=d>>>0&255,e[21]=d>>>8&255,e[22]=d>>>16&255,e[23]=d>>>24&255,e[24]=h>>>0&255,e[25]=h>>>8&255,e[26]=h>>>16&255,e[27]=h>>>24&255,e[28]=f>>>0&255,e[29]=f>>>8&255,e[30]=f>>>16&255,e[31]=f>>>24&255}(e,t,r,n)}var f=new Uint8Array([101,120,112,97,110,100,32,51,50,45,98,121,116,101,32,107]);function crypto_stream_salsa20_xor(e,t,r,n,i,o,s){var a,c,u=new Uint8Array(16),l=new Uint8Array(64);for(c=0;c<16;c++)u[c]=0;for(c=0;c<8;c++)u[c]=o[c];for(;i>=64;){for(crypto_core_salsa20(l,u,s,f),c=0;c<64;c++)e[t+c]=r[n+c]^l[c];for(a=1,c=8;c<16;c++)a=a+(255&u[c])|0,u[c]=255&a,a>>>=8;i-=64,t+=64,n+=64}if(i>0)for(crypto_core_salsa20(l,u,s,f),c=0;c<i;c++)e[t+c]=r[n+c]^l[c];return 0}function crypto_stream_salsa20(e,t,r,n,i){var o,s,a=new Uint8Array(16),c=new Uint8Array(64);for(s=0;s<16;s++)a[s]=0;for(s=0;s<8;s++)a[s]=n[s];for(;r>=64;){for(crypto_core_salsa20(c,a,i,f),s=0;s<64;s++)e[t+s]=c[s];for(o=1,s=8;s<16;s++)o=o+(255&a[s])|0,a[s]=255&o,o>>>=8;r-=64,t+=64}if(r>0)for(crypto_core_salsa20(c,a,i,f),s=0;s<r;s++)e[t+s]=c[s];return 0}function crypto_stream(e,t,r,n,i){var o=new Uint8Array(32);crypto_core_hsalsa20(o,n,i,f);for(var s=new Uint8Array(8),a=0;a<8;a++)s[a]=n[a+16];return crypto_stream_salsa20(e,t,r,s,o)}function crypto_stream_xor(e,t,r,n,i,o,s){var a=new Uint8Array(32);crypto_core_hsalsa20(a,o,s,f);for(var c=new Uint8Array(8),u=0;u<8;u++)c[u]=o[u+16];return crypto_stream_salsa20_xor(e,t,r,n,i,c,a)}var m=function(e){var t,r,n,i,o,s,a,c;this.buffer=new Uint8Array(16),this.r=new Uint16Array(10),this.h=new Uint16Array(10),this.pad=new Uint16Array(8),this.leftover=0,this.fin=0,t=255&e[0]|(255&e[1])<<8,this.r[0]=8191&t,r=255&e[2]|(255&e[3])<<8,this.r[1]=8191&(t>>>13|r<<3),n=255&e[4]|(255&e[5])<<8,this.r[2]=7939&(r>>>10|n<<6),i=255&e[6]|(255&e[7])<<8,this.r[3]=8191&(n>>>7|i<<9),o=255&e[8]|(255&e[9])<<8,this.r[4]=255&(i>>>4|o<<12),this.r[5]=o>>>1&8190,s=255&e[10]|(255&e[11])<<8,this.r[6]=8191&(o>>>14|s<<2),a=255&e[12]|(255&e[13])<<8,this.r[7]=8065&(s>>>11|a<<5),c=255&e[14]|(255&e[15])<<8,this.r[8]=8191&(a>>>8|c<<8),this.r[9]=c>>>5&127,this.pad[0]=255&e[16]|(255&e[17])<<8,this.pad[1]=255&e[18]|(255&e[19])<<8,this.pad[2]=255&e[20]|(255&e[21])<<8,this.pad[3]=255&e[22]|(255&e[23])<<8,this.pad[4]=255&e[24]|(255&e[25])<<8,this.pad[5]=255&e[26]|(255&e[27])<<8,this.pad[6]=255&e[28]|(255&e[29])<<8,this.pad[7]=255&e[30]|(255&e[31])<<8};function crypto_onetimeauth(e,t,r,n,i,o){var s=new m(o);return s.update(r,n,i),s.finish(e,t),0}function crypto_onetimeauth_verify(e,t,r,n,i,o){var s=new Uint8Array(16);return crypto_onetimeauth(s,0,r,n,i,o),crypto_verify_16(e,t,s,0)}function crypto_secretbox(e,t,r,n,i){var o;if(r<32)return-1;for(crypto_stream_xor(e,0,t,0,r,n,i),crypto_onetimeauth(e,16,e,32,r-32,e),o=0;o<16;o++)e[o]=0;return 0}function crypto_secretbox_open(e,t,r,n,i){var o,s=new Uint8Array(32);if(r<32)return-1;if(crypto_stream(s,0,32,n,i),0!==crypto_onetimeauth_verify(t,16,t,32,r-32,s))return-1;for(crypto_stream_xor(e,0,t,0,r,n,i),o=0;o<32;o++)e[o]=0;return 0}function set25519(e,t){var r;for(r=0;r<16;r++)e[r]=0|t[r]}function car25519(e){var t,r,n=1;for(t=0;t<16;t++)r=e[t]+n+65535,n=Math.floor(r/65536),e[t]=r-65536*n;e[0]+=n-1+37*(n-1)}function sel25519(e,t,r){for(var n,i=~(r-1),o=0;o<16;o++)n=i&(e[o]^t[o]),e[o]^=n,t[o]^=n}function pack25519(e,r){var n,i,o,s=t(),a=t();for(n=0;n<16;n++)a[n]=r[n];for(car25519(a),car25519(a),car25519(a),i=0;i<2;i++){for(s[0]=a[0]-65517,n=1;n<15;n++)s[n]=a[n]-65535-(s[n-1]>>16&1),s[n-1]&=65535;s[15]=a[15]-32767-(s[14]>>16&1),o=s[15]>>16&1,s[14]&=65535,sel25519(a,s,1-o)}for(n=0;n<16;n++)e[2*n]=255&a[n],e[2*n+1]=a[n]>>8}function neq25519(e,t){var r=new Uint8Array(32),n=new Uint8Array(32);return pack25519(r,e),pack25519(n,t),crypto_verify_32(r,0,n,0)}function par25519(e){var t=new Uint8Array(32);return pack25519(t,e),1&t[0]}function unpack25519(e,t){var r;for(r=0;r<16;r++)e[r]=t[2*r]+(t[2*r+1]<<8);e[15]&=32767}function A(e,t,r){for(var n=0;n<16;n++)e[n]=t[n]+r[n]}function Z(e,t,r){for(var n=0;n<16;n++)e[n]=t[n]-r[n]}function M(e,t,r){var n,i,o=0,s=0,a=0,c=0,u=0,l=0,p=0,d=0,h=0,f=0,m=0,g=0,y=0,v=0,b=0,_=0,w=0,E=0,S=0,C=0,x=0,k=0,R=0,T=0,O=0,I=0,N=0,A=0,P=0,L=0,D=0,M=r[0],j=r[1],q=r[2],F=r[3],z=r[4],U=r[5],B=r[6],H=r[7],$=r[8],V=r[9],G=r[10],W=r[11],J=r[12],X=r[13],Y=r[14],K=r[15];o+=(n=t[0])*M,s+=n*j,a+=n*q,c+=n*F,u+=n*z,l+=n*U,p+=n*B,d+=n*H,h+=n*$,f+=n*V,m+=n*G,g+=n*W,y+=n*J,v+=n*X,b+=n*Y,_+=n*K,s+=(n=t[1])*M,a+=n*j,c+=n*q,u+=n*F,l+=n*z,p+=n*U,d+=n*B,h+=n*H,f+=n*$,m+=n*V,g+=n*G,y+=n*W,v+=n*J,b+=n*X,_+=n*Y,w+=n*K,a+=(n=t[2])*M,c+=n*j,u+=n*q,l+=n*F,p+=n*z,d+=n*U,h+=n*B,f+=n*H,m+=n*$,g+=n*V,y+=n*G,v+=n*W,b+=n*J,_+=n*X,w+=n*Y,E+=n*K,c+=(n=t[3])*M,u+=n*j,l+=n*q,p+=n*F,d+=n*z,h+=n*U,f+=n*B,m+=n*H,g+=n*$,y+=n*V,v+=n*G,b+=n*W,_+=n*J,w+=n*X,E+=n*Y,S+=n*K,u+=(n=t[4])*M,l+=n*j,p+=n*q,d+=n*F,h+=n*z,f+=n*U,m+=n*B,g+=n*H,y+=n*$,v+=n*V,b+=n*G,_+=n*W,w+=n*J,E+=n*X,S+=n*Y,C+=n*K,l+=(n=t[5])*M,p+=n*j,d+=n*q,h+=n*F,f+=n*z,m+=n*U,g+=n*B,y+=n*H,v+=n*$,b+=n*V,_+=n*G,w+=n*W,E+=n*J,S+=n*X,C+=n*Y,x+=n*K,p+=(n=t[6])*M,d+=n*j,h+=n*q,f+=n*F,m+=n*z,g+=n*U,y+=n*B,v+=n*H,b+=n*$,_+=n*V,w+=n*G,E+=n*W,S+=n*J,C+=n*X,x+=n*Y,k+=n*K,d+=(n=t[7])*M,h+=n*j,f+=n*q,m+=n*F,g+=n*z,y+=n*U,v+=n*B,b+=n*H,_+=n*$,w+=n*V,E+=n*G,S+=n*W,C+=n*J,x+=n*X,k+=n*Y,R+=n*K,h+=(n=t[8])*M,f+=n*j,m+=n*q,g+=n*F,y+=n*z,v+=n*U,b+=n*B,_+=n*H,w+=n*$,E+=n*V,S+=n*G,C+=n*W,x+=n*J,k+=n*X,R+=n*Y,T+=n*K,f+=(n=t[9])*M,m+=n*j,g+=n*q,y+=n*F,v+=n*z,b+=n*U,_+=n*B,w+=n*H,E+=n*$,S+=n*V,C+=n*G,x+=n*W,k+=n*J,R+=n*X,T+=n*Y,O+=n*K,m+=(n=t[10])*M,g+=n*j,y+=n*q,v+=n*F,b+=n*z,_+=n*U,w+=n*B,E+=n*H,S+=n*$,C+=n*V,x+=n*G,k+=n*W,R+=n*J,T+=n*X,O+=n*Y,I+=n*K,g+=(n=t[11])*M,y+=n*j,v+=n*q,b+=n*F,_+=n*z,w+=n*U,E+=n*B,S+=n*H,C+=n*$,x+=n*V,k+=n*G,R+=n*W,T+=n*J,O+=n*X,I+=n*Y,N+=n*K,y+=(n=t[12])*M,v+=n*j,b+=n*q,_+=n*F,w+=n*z,E+=n*U,S+=n*B,C+=n*H,x+=n*$,k+=n*V,R+=n*G,T+=n*W,O+=n*J,I+=n*X,N+=n*Y,A+=n*K,v+=(n=t[13])*M,b+=n*j,_+=n*q,w+=n*F,E+=n*z,S+=n*U,C+=n*B,x+=n*H,k+=n*$,R+=n*V,T+=n*G,O+=n*W,I+=n*J,N+=n*X,A+=n*Y,P+=n*K,b+=(n=t[14])*M,_+=n*j,w+=n*q,E+=n*F,S+=n*z,C+=n*U,x+=n*B,k+=n*H,R+=n*$,T+=n*V,O+=n*G,I+=n*W,N+=n*J,A+=n*X,P+=n*Y,L+=n*K,_+=(n=t[15])*M,s+=38*(E+=n*q),a+=38*(S+=n*F),c+=38*(C+=n*z),u+=38*(x+=n*U),l+=38*(k+=n*B),p+=38*(R+=n*H),d+=38*(T+=n*$),h+=38*(O+=n*V),f+=38*(I+=n*G),m+=38*(N+=n*W),g+=38*(A+=n*J),y+=38*(P+=n*X),v+=38*(L+=n*Y),b+=38*(D+=n*K),o=(n=(o+=38*(w+=n*j))+(i=1)+65535)-65536*(i=Math.floor(n/65536)),s=(n=s+i+65535)-65536*(i=Math.floor(n/65536)),a=(n=a+i+65535)-65536*(i=Math.floor(n/65536)),c=(n=c+i+65535)-65536*(i=Math.floor(n/65536)),u=(n=u+i+65535)-65536*(i=Math.floor(n/65536)),l=(n=l+i+65535)-65536*(i=Math.floor(n/65536)),p=(n=p+i+65535)-65536*(i=Math.floor(n/65536)),d=(n=d+i+65535)-65536*(i=Math.floor(n/65536)),h=(n=h+i+65535)-65536*(i=Math.floor(n/65536)),f=(n=f+i+65535)-65536*(i=Math.floor(n/65536)),m=(n=m+i+65535)-65536*(i=Math.floor(n/65536)),g=(n=g+i+65535)-65536*(i=Math.floor(n/65536)),y=(n=y+i+65535)-65536*(i=Math.floor(n/65536)),v=(n=v+i+65535)-65536*(i=Math.floor(n/65536)),b=(n=b+i+65535)-65536*(i=Math.floor(n/65536)),_=(n=_+i+65535)-65536*(i=Math.floor(n/65536)),o=(n=(o+=i-1+37*(i-1))+(i=1)+65535)-65536*(i=Math.floor(n/65536)),s=(n=s+i+65535)-65536*(i=Math.floor(n/65536)),a=(n=a+i+65535)-65536*(i=Math.floor(n/65536)),c=(n=c+i+65535)-65536*(i=Math.floor(n/65536)),u=(n=u+i+65535)-65536*(i=Math.floor(n/65536)),l=(n=l+i+65535)-65536*(i=Math.floor(n/65536)),p=(n=p+i+65535)-65536*(i=Math.floor(n/65536)),d=(n=d+i+65535)-65536*(i=Math.floor(n/65536)),h=(n=h+i+65535)-65536*(i=Math.floor(n/65536)),f=(n=f+i+65535)-65536*(i=Math.floor(n/65536)),m=(n=m+i+65535)-65536*(i=Math.floor(n/65536)),g=(n=g+i+65535)-65536*(i=Math.floor(n/65536)),y=(n=y+i+65535)-65536*(i=Math.floor(n/65536)),v=(n=v+i+65535)-65536*(i=Math.floor(n/65536)),b=(n=b+i+65535)-65536*(i=Math.floor(n/65536)),_=(n=_+i+65535)-65536*(i=Math.floor(n/65536)),o+=i-1+37*(i-1),e[0]=o,e[1]=s,e[2]=a,e[3]=c,e[4]=u,e[5]=l,e[6]=p,e[7]=d,e[8]=h,e[9]=f,e[10]=m,e[11]=g,e[12]=y,e[13]=v,e[14]=b,e[15]=_}function S(e,t){M(e,t,t)}function inv25519(e,r){var n,i=t();for(n=0;n<16;n++)i[n]=r[n];for(n=253;n>=0;n--)S(i,i),2!==n&&4!==n&&M(i,i,r);for(n=0;n<16;n++)e[n]=i[n]}function crypto_scalarmult(e,r,n){var i,o,s=new Uint8Array(32),a=new Float64Array(80),u=t(),l=t(),p=t(),d=t(),h=t(),f=t();for(o=0;o<31;o++)s[o]=r[o];for(s[31]=127&r[31]|64,s[0]&=248,unpack25519(a,n),o=0;o<16;o++)l[o]=a[o],d[o]=u[o]=p[o]=0;for(u[0]=d[0]=1,o=254;o>=0;--o)sel25519(u,l,i=s[o>>>3]>>>(7&o)&1),sel25519(p,d,i),A(h,u,p),Z(u,u,p),A(p,l,d),Z(l,l,d),S(d,h),S(f,u),M(u,p,u),M(p,l,h),A(h,u,p),Z(u,u,p),S(l,u),Z(p,d,f),M(u,p,c),A(u,u,d),M(p,p,u),M(u,d,f),M(d,l,a),S(l,h),sel25519(u,l,i),sel25519(p,d,i);for(o=0;o<16;o++)a[o+16]=u[o],a[o+32]=p[o],a[o+48]=l[o],a[o+64]=d[o];var m=a.subarray(32),g=a.subarray(16);return inv25519(m,m),M(g,g,m),pack25519(e,g),0}function crypto_scalarmult_base(e,t){return crypto_scalarmult(e,t,o)}function crypto_box_keypair(e,t){return n(t,32),crypto_scalarmult_base(e,t)}function crypto_box_beforenm(e,t,r){var n=new Uint8Array(32);return crypto_scalarmult(n,r,t),crypto_core_hsalsa20(e,i,n,f)}m.prototype.blocks=function(e,t,r){for(var n,i,o,s,a,c,u,l,p,d,h,f,m,g,y,v,b,_,w,E=this.fin?0:2048,S=this.h[0],C=this.h[1],x=this.h[2],k=this.h[3],R=this.h[4],T=this.h[5],O=this.h[6],I=this.h[7],N=this.h[8],A=this.h[9],P=this.r[0],L=this.r[1],D=this.r[2],M=this.r[3],j=this.r[4],q=this.r[5],F=this.r[6],z=this.r[7],U=this.r[8],B=this.r[9];r>=16;)d=p=0,d+=(S+=8191&(n=255&e[t+0]|(255&e[t+1])<<8))*P,d+=(C+=8191&(n>>>13|(i=255&e[t+2]|(255&e[t+3])<<8)<<3))*(5*B),d+=(x+=8191&(i>>>10|(o=255&e[t+4]|(255&e[t+5])<<8)<<6))*(5*U),d+=(k+=8191&(o>>>7|(s=255&e[t+6]|(255&e[t+7])<<8)<<9))*(5*z),p=(d+=(R+=8191&(s>>>4|(a=255&e[t+8]|(255&e[t+9])<<8)<<12))*(5*F))>>>13,d&=8191,d+=(T+=a>>>1&8191)*(5*q),d+=(O+=8191&(a>>>14|(c=255&e[t+10]|(255&e[t+11])<<8)<<2))*(5*j),d+=(I+=8191&(c>>>11|(u=255&e[t+12]|(255&e[t+13])<<8)<<5))*(5*M),d+=(N+=8191&(u>>>8|(l=255&e[t+14]|(255&e[t+15])<<8)<<8))*(5*D),h=p+=(d+=(A+=l>>>5|E)*(5*L))>>>13,h+=S*L,h+=C*P,h+=x*(5*B),h+=k*(5*U),p=(h+=R*(5*z))>>>13,h&=8191,h+=T*(5*F),h+=O*(5*q),h+=I*(5*j),h+=N*(5*M),p+=(h+=A*(5*D))>>>13,h&=8191,f=p,f+=S*D,f+=C*L,f+=x*P,f+=k*(5*B),p=(f+=R*(5*U))>>>13,f&=8191,f+=T*(5*z),f+=O*(5*F),f+=I*(5*q),f+=N*(5*j),m=p+=(f+=A*(5*M))>>>13,m+=S*M,m+=C*D,m+=x*L,m+=k*P,p=(m+=R*(5*B))>>>13,m&=8191,m+=T*(5*U),m+=O*(5*z),m+=I*(5*F),m+=N*(5*q),g=p+=(m+=A*(5*j))>>>13,g+=S*j,g+=C*M,g+=x*D,g+=k*L,p=(g+=R*P)>>>13,g&=8191,g+=T*(5*B),g+=O*(5*U),g+=I*(5*z),g+=N*(5*F),y=p+=(g+=A*(5*q))>>>13,y+=S*q,y+=C*j,y+=x*M,y+=k*D,p=(y+=R*L)>>>13,y&=8191,y+=T*P,y+=O*(5*B),y+=I*(5*U),y+=N*(5*z),v=p+=(y+=A*(5*F))>>>13,v+=S*F,v+=C*q,v+=x*j,v+=k*M,p=(v+=R*D)>>>13,v&=8191,v+=T*L,v+=O*P,v+=I*(5*B),v+=N*(5*U),b=p+=(v+=A*(5*z))>>>13,b+=S*z,b+=C*F,b+=x*q,b+=k*j,p=(b+=R*M)>>>13,b&=8191,b+=T*D,b+=O*L,b+=I*P,b+=N*(5*B),_=p+=(b+=A*(5*U))>>>13,_+=S*U,_+=C*z,_+=x*F,_+=k*q,p=(_+=R*j)>>>13,_&=8191,_+=T*M,_+=O*D,_+=I*L,_+=N*P,w=p+=(_+=A*(5*B))>>>13,w+=S*B,w+=C*U,w+=x*z,w+=k*F,p=(w+=R*q)>>>13,w&=8191,w+=T*j,w+=O*M,w+=I*D,w+=N*L,S=d=8191&(p=(p=((p+=(w+=A*P)>>>13)<<2)+p|0)+(d&=8191)|0),C=h+=p>>>=13,x=f&=8191,k=m&=8191,R=g&=8191,T=y&=8191,O=v&=8191,I=b&=8191,N=_&=8191,A=w&=8191,t+=16,r-=16;this.h[0]=S,this.h[1]=C,this.h[2]=x,this.h[3]=k,this.h[4]=R,this.h[5]=T,this.h[6]=O,this.h[7]=I,this.h[8]=N,this.h[9]=A},m.prototype.finish=function(e,t){var r,n,i,o,s=new Uint16Array(10);if(this.leftover){for(o=this.leftover,this.buffer[o++]=1;o<16;o++)this.buffer[o]=0;this.fin=1,this.blocks(this.buffer,0,16)}for(r=this.h[1]>>>13,this.h[1]&=8191,o=2;o<10;o++)this.h[o]+=r,r=this.h[o]>>>13,this.h[o]&=8191;for(this.h[0]+=5*r,r=this.h[0]>>>13,this.h[0]&=8191,this.h[1]+=r,r=this.h[1]>>>13,this.h[1]&=8191,this.h[2]+=r,s[0]=this.h[0]+5,r=s[0]>>>13,s[0]&=8191,o=1;o<10;o++)s[o]=this.h[o]+r,r=s[o]>>>13,s[o]&=8191;for(s[9]-=8192,n=(1^r)-1,o=0;o<10;o++)s[o]&=n;for(n=~n,o=0;o<10;o++)this.h[o]=this.h[o]&n|s[o];for(this.h[0]=65535&(this.h[0]|this.h[1]<<13),this.h[1]=65535&(this.h[1]>>>3|this.h[2]<<10),this.h[2]=65535&(this.h[2]>>>6|this.h[3]<<7),this.h[3]=65535&(this.h[3]>>>9|this.h[4]<<4),this.h[4]=65535&(this.h[4]>>>12|this.h[5]<<1|this.h[6]<<14),this.h[5]=65535&(this.h[6]>>>2|this.h[7]<<11),this.h[6]=65535&(this.h[7]>>>5|this.h[8]<<8),this.h[7]=65535&(this.h[8]>>>8|this.h[9]<<5),i=this.h[0]+this.pad[0],this.h[0]=65535&i,o=1;o<8;o++)i=(this.h[o]+this.pad[o]|0)+(i>>>16)|0,this.h[o]=65535&i;e[t+0]=this.h[0]>>>0&255,e[t+1]=this.h[0]>>>8&255,e[t+2]=this.h[1]>>>0&255,e[t+3]=this.h[1]>>>8&255,e[t+4]=this.h[2]>>>0&255,e[t+5]=this.h[2]>>>8&255,e[t+6]=this.h[3]>>>0&255,e[t+7]=this.h[3]>>>8&255,e[t+8]=this.h[4]>>>0&255,e[t+9]=this.h[4]>>>8&255,e[t+10]=this.h[5]>>>0&255,e[t+11]=this.h[5]>>>8&255,e[t+12]=this.h[6]>>>0&255,e[t+13]=this.h[6]>>>8&255,e[t+14]=this.h[7]>>>0&255,e[t+15]=this.h[7]>>>8&255},m.prototype.update=function(e,t,r){var n,i;if(this.leftover){for((i=16-this.leftover)>r&&(i=r),n=0;n<i;n++)this.buffer[this.leftover+n]=e[t+n];if(r-=i,t+=i,this.leftover+=i,this.leftover<16)return;this.blocks(this.buffer,0,16),this.leftover=0}if(r>=16&&(i=r-r%16,this.blocks(e,t,i),t+=i,r-=i),r){for(n=0;n<r;n++)this.buffer[this.leftover+n]=e[t+n];this.leftover+=r}};var g=crypto_secretbox,y=crypto_secretbox_open;var v=[1116352408,3609767458,1899447441,602891725,3049323471,3964484399,3921009573,2173295548,961987163,4081628472,1508970993,3053834265,2453635748,2937671579,2870763221,3664609560,3624381080,2734883394,310598401,1164996542,607225278,1323610764,1426881987,3590304994,1925078388,4068182383,2162078206,991336113,2614888103,633803317,3248222580,3479774868,3835390401,2666613458,4022224774,944711139,264347078,2341262773,604807628,2007800933,770255983,1495990901,1249150122,1856431235,1555081692,3175218132,1996064986,2198950837,2554220882,3999719339,2821834349,766784016,2952996808,2566594879,3210313671,3203337956,3336571891,1034457026,3584528711,2466948901,113926993,3758326383,338241895,168717936,666307205,1188179964,773529912,1546045734,1294757372,1522805485,1396182291,2643833823,1695183700,2343527390,1986661051,1014477480,2177026350,1206759142,2456956037,344077627,2730485921,1290863460,2820302411,3158454273,3259730800,3505952657,3345764771,106217008,3516065817,3606008344,3600352804,1432725776,4094571909,1467031594,275423344,851169720,430227734,3100823752,506948616,1363258195,659060556,3750685593,883997877,3785050280,958139571,3318307427,1322822218,3812723403,1537002063,2003034995,1747873779,3602036899,1955562222,1575990012,2024104815,1125592928,2227730452,2716904306,2361852424,442776044,2428436474,593698344,2756734187,3733110249,3204031479,2999351573,3329325298,3815920427,3391569614,3928383900,3515267271,566280711,3940187606,3454069534,4118630271,4000239992,116418474,1914138554,174292421,2731055270,289380356,3203993006,460393269,320620315,685471733,587496836,852142971,1086792851,1017036298,365543100,1126000580,2618297676,1288033470,3409855158,1501505948,4234509866,1607167915,987167468,1816402316,1246189591];function crypto_hashblocks_hl(e,t,r,n){for(var i,o,s,a,c,u,l,p,d,h,f,m,g,y,b,_,w,E,S,C,x,k,R,T,O,I,N=new Int32Array(16),A=new Int32Array(16),P=e[0],L=e[1],D=e[2],M=e[3],j=e[4],q=e[5],F=e[6],z=e[7],U=t[0],B=t[1],H=t[2],$=t[3],V=t[4],G=t[5],W=t[6],J=t[7],X=0;n>=128;){for(S=0;S<16;S++)C=8*S+X,N[S]=r[C+0]<<24|r[C+1]<<16|r[C+2]<<8|r[C+3],A[S]=r[C+4]<<24|r[C+5]<<16|r[C+6]<<8|r[C+7];for(S=0;S<80;S++)if(i=P,o=L,s=D,a=M,c=j,u=q,l=F,z,d=U,h=B,f=H,m=$,g=V,y=G,b=W,J,R=65535&(k=J),T=k>>>16,O=65535&(x=z),I=x>>>16,R+=65535&(k=(V>>>14|j<<18)^(V>>>18|j<<14)^(j>>>9|V<<23)),T+=k>>>16,O+=65535&(x=(j>>>14|V<<18)^(j>>>18|V<<14)^(V>>>9|j<<23)),I+=x>>>16,R+=65535&(k=V&G^~V&W),T+=k>>>16,O+=65535&(x=j&q^~j&F),I+=x>>>16,x=v[2*S],R+=65535&(k=v[2*S+1]),T+=k>>>16,O+=65535&x,I+=x>>>16,x=N[S%16],T+=(k=A[S%16])>>>16,O+=65535&x,I+=x>>>16,O+=(T+=(R+=65535&k)>>>16)>>>16,R=65535&(k=E=65535&R|T<<16),T=k>>>16,O=65535&(x=w=65535&O|(I+=O>>>16)<<16),I=x>>>16,R+=65535&(k=(U>>>28|P<<4)^(P>>>2|U<<30)^(P>>>7|U<<25)),T+=k>>>16,O+=65535&(x=(P>>>28|U<<4)^(U>>>2|P<<30)^(U>>>7|P<<25)),I+=x>>>16,T+=(k=U&B^U&H^B&H)>>>16,O+=65535&(x=P&L^P&D^L&D),I+=x>>>16,p=65535&(O+=(T+=(R+=65535&k)>>>16)>>>16)|(I+=O>>>16)<<16,_=65535&R|T<<16,R=65535&(k=m),T=k>>>16,O=65535&(x=a),I=x>>>16,T+=(k=E)>>>16,O+=65535&(x=w),I+=x>>>16,L=i,D=o,M=s,j=a=65535&(O+=(T+=(R+=65535&k)>>>16)>>>16)|(I+=O>>>16)<<16,q=c,F=u,z=l,P=p,B=d,H=h,$=f,V=m=65535&R|T<<16,G=g,W=y,J=b,U=_,S%16==15)for(C=0;C<16;C++)x=N[C],R=65535&(k=A[C]),T=k>>>16,O=65535&x,I=x>>>16,x=N[(C+9)%16],R+=65535&(k=A[(C+9)%16]),T+=k>>>16,O+=65535&x,I+=x>>>16,w=N[(C+1)%16],R+=65535&(k=((E=A[(C+1)%16])>>>1|w<<31)^(E>>>8|w<<24)^(E>>>7|w<<25)),T+=k>>>16,O+=65535&(x=(w>>>1|E<<31)^(w>>>8|E<<24)^w>>>7),I+=x>>>16,w=N[(C+14)%16],T+=(k=((E=A[(C+14)%16])>>>19|w<<13)^(w>>>29|E<<3)^(E>>>6|w<<26))>>>16,O+=65535&(x=(w>>>19|E<<13)^(E>>>29|w<<3)^w>>>6),I+=x>>>16,I+=(O+=(T+=(R+=65535&k)>>>16)>>>16)>>>16,N[C]=65535&O|I<<16,A[C]=65535&R|T<<16;R=65535&(k=U),T=k>>>16,O=65535&(x=P),I=x>>>16,x=e[0],T+=(k=t[0])>>>16,O+=65535&x,I+=x>>>16,I+=(O+=(T+=(R+=65535&k)>>>16)>>>16)>>>16,e[0]=P=65535&O|I<<16,t[0]=U=65535&R|T<<16,R=65535&(k=B),T=k>>>16,O=65535&(x=L),I=x>>>16,x=e[1],T+=(k=t[1])>>>16,O+=65535&x,I+=x>>>16,I+=(O+=(T+=(R+=65535&k)>>>16)>>>16)>>>16,e[1]=L=65535&O|I<<16,t[1]=B=65535&R|T<<16,R=65535&(k=H),T=k>>>16,O=65535&(x=D),I=x>>>16,x=e[2],T+=(k=t[2])>>>16,O+=65535&x,I+=x>>>16,I+=(O+=(T+=(R+=65535&k)>>>16)>>>16)>>>16,e[2]=D=65535&O|I<<16,t[2]=H=65535&R|T<<16,R=65535&(k=$),T=k>>>16,O=65535&(x=M),I=x>>>16,x=e[3],T+=(k=t[3])>>>16,O+=65535&x,I+=x>>>16,I+=(O+=(T+=(R+=65535&k)>>>16)>>>16)>>>16,e[3]=M=65535&O|I<<16,t[3]=$=65535&R|T<<16,R=65535&(k=V),T=k>>>16,O=65535&(x=j),I=x>>>16,x=e[4],T+=(k=t[4])>>>16,O+=65535&x,I+=x>>>16,I+=(O+=(T+=(R+=65535&k)>>>16)>>>16)>>>16,e[4]=j=65535&O|I<<16,t[4]=V=65535&R|T<<16,R=65535&(k=G),T=k>>>16,O=65535&(x=q),I=x>>>16,x=e[5],T+=(k=t[5])>>>16,O+=65535&x,I+=x>>>16,I+=(O+=(T+=(R+=65535&k)>>>16)>>>16)>>>16,e[5]=q=65535&O|I<<16,t[5]=G=65535&R|T<<16,R=65535&(k=W),T=k>>>16,O=65535&(x=F),I=x>>>16,x=e[6],T+=(k=t[6])>>>16,O+=65535&x,I+=x>>>16,I+=(O+=(T+=(R+=65535&k)>>>16)>>>16)>>>16,e[6]=F=65535&O|I<<16,t[6]=W=65535&R|T<<16,R=65535&(k=J),T=k>>>16,O=65535&(x=z),I=x>>>16,x=e[7],T+=(k=t[7])>>>16,O+=65535&x,I+=x>>>16,I+=(O+=(T+=(R+=65535&k)>>>16)>>>16)>>>16,e[7]=z=65535&O|I<<16,t[7]=J=65535&R|T<<16,X+=128,n-=128}return n}function crypto_hash(e,t,r){var n,i=new Int32Array(8),o=new Int32Array(8),s=new Uint8Array(256),a=r;for(i[0]=1779033703,i[1]=3144134277,i[2]=1013904242,i[3]=2773480762,i[4]=1359893119,i[5]=2600822924,i[6]=528734635,i[7]=1541459225,o[0]=4089235720,o[1]=2227873595,o[2]=4271175723,o[3]=1595750129,o[4]=2917565137,o[5]=725511199,o[6]=4215389547,o[7]=327033209,crypto_hashblocks_hl(i,o,t,r),r%=128,n=0;n<r;n++)s[n]=t[a-r+n];for(s[r]=128,s[(r=256-128*(r<112?1:0))-9]=0,ts64(s,r-8,a/536870912|0,a<<3),crypto_hashblocks_hl(i,o,s,r),n=0;n<8;n++)ts64(e,8*n,i[n],o[n]);return 0}function add(e,r){var n=t(),i=t(),o=t(),s=t(),a=t(),c=t(),u=t(),p=t(),d=t();Z(n,e[1],e[0]),Z(d,r[1],r[0]),M(n,n,d),A(i,e[0],e[1]),A(d,r[0],r[1]),M(i,i,d),M(o,e[3],r[3]),M(o,o,l),M(s,e[2],r[2]),A(s,s,s),Z(a,i,n),Z(c,s,o),A(u,s,o),A(p,i,n),M(e[0],a,c),M(e[1],p,u),M(e[2],u,c),M(e[3],a,p)}function cswap(e,t,r){var n;for(n=0;n<4;n++)sel25519(e[n],t[n],r)}function pack(e,r){var n=t(),i=t(),o=t();inv25519(o,r[2]),M(n,r[0],o),M(i,r[1],o),pack25519(e,i),e[31]^=par25519(n)<<7}function scalarmult(e,t,r){var n,i;for(set25519(e[0],s),set25519(e[1],a),set25519(e[2],a),set25519(e[3],s),i=255;i>=0;--i)cswap(e,t,n=r[i/8|0]>>(7&i)&1),add(t,e),add(e,e),cswap(e,t,n)}function scalarbase(e,r){var n=[t(),t(),t(),t()];set25519(n[0],p),set25519(n[1],d),set25519(n[2],a),M(n[3],p,d),scalarmult(e,n,r)}function crypto_sign_keypair(e,r,i){var o,s=new Uint8Array(64),a=[t(),t(),t(),t()];for(i||n(r,32),crypto_hash(s,r,32),s[0]&=248,s[31]&=127,s[31]|=64,scalarbase(a,s),pack(e,a),o=0;o<32;o++)r[o+32]=e[o];return 0}var b=new Float64Array([237,211,245,92,26,99,18,88,214,156,247,162,222,249,222,20,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,16]);function modL(e,t){var r,n,i,o;for(n=63;n>=32;--n){for(r=0,i=n-32,o=n-12;i<o;++i)t[i]+=r-16*t[n]*b[i-(n-32)],r=t[i]+128>>8,t[i]-=256*r;t[i]+=r,t[n]=0}for(r=0,i=0;i<32;i++)t[i]+=r-(t[31]>>4)*b[i],r=t[i]>>8,t[i]&=255;for(i=0;i<32;i++)t[i]-=r*b[i];for(n=0;n<32;n++)t[n+1]+=t[n]>>8,e[n]=255&t[n]}function reduce(e){var t,r=new Float64Array(64);for(t=0;t<64;t++)r[t]=e[t];for(t=0;t<64;t++)e[t]=0;modL(e,r)}function crypto_sign(e,r,n,i){var o,s,a=new Uint8Array(64),c=new Uint8Array(64),u=new Uint8Array(64),l=new Float64Array(64),p=[t(),t(),t(),t()];crypto_hash(a,i,32),a[0]&=248,a[31]&=127,a[31]|=64;var d=n+64;for(o=0;o<n;o++)e[64+o]=r[o];for(o=0;o<32;o++)e[32+o]=a[32+o];for(crypto_hash(u,e.subarray(32),n+32),reduce(u),scalarbase(p,u),pack(e,p),o=32;o<64;o++)e[o]=i[o];for(crypto_hash(c,e,n+64),reduce(c),o=0;o<64;o++)l[o]=0;for(o=0;o<32;o++)l[o]=u[o];for(o=0;o<32;o++)for(s=0;s<32;s++)l[o+s]+=c[o]*a[s];return modL(e.subarray(32),l),d}function unpackneg(e,r){var n=t(),i=t(),o=t(),c=t(),l=t(),p=t(),d=t();return set25519(e[2],a),unpack25519(e[1],r),S(o,e[1]),M(c,o,u),Z(o,o,e[2]),A(c,e[2],c),S(l,c),S(p,l),M(d,p,l),M(n,d,o),M(n,n,c),function pow2523(e,r){var n,i=t();for(n=0;n<16;n++)i[n]=r[n];for(n=250;n>=0;n--)S(i,i),1!==n&&M(i,i,r);for(n=0;n<16;n++)e[n]=i[n]}(n,n),M(n,n,o),M(n,n,c),M(n,n,c),M(e[0],n,c),S(i,e[0]),M(i,i,c),neq25519(i,o)&&M(e[0],e[0],h),S(i,e[0]),M(i,i,c),neq25519(i,o)?-1:(par25519(e[0])===r[31]>>7&&Z(e[0],s,e[0]),M(e[3],e[0],e[1]),0)}function crypto_sign_open(e,r,n,i){var o,s=new Uint8Array(32),a=new Uint8Array(64),c=[t(),t(),t(),t()],u=[t(),t(),t(),t()];if(-1,n<64)return-1;if(unpackneg(u,i))return-1;for(o=0;o<n;o++)e[o]=r[o];for(o=0;o<32;o++)e[o+32]=i[o];if(crypto_hash(a,e,n),reduce(a),scalarmult(c,u,a),scalarbase(u,r.subarray(32)),add(c,u),pack(s,c),n-=64,crypto_verify_32(r,0,s,0)){for(o=0;o<n;o++)e[o]=0;return-1}for(o=0;o<n;o++)e[o]=r[o+64];return n}var _=32,w=24,E=32,C=32,x=w;function checkLengths(e,t){if(e.length!==_)throw new Error("bad key size");if(t.length!==w)throw new Error("bad nonce size")}function checkArrayTypes(){var e,t;for(t=0;t<arguments.length;t++)if("[object Uint8Array]"!==(e=Object.prototype.toString.call(arguments[t])))throw new TypeError("unexpected type "+e+", use Uint8Array")}function cleanup(e){for(var t=0;t<e.length;t++)e[t]=0}e.lowlevel={crypto_core_hsalsa20:crypto_core_hsalsa20,crypto_stream_xor:crypto_stream_xor,crypto_stream:crypto_stream,crypto_stream_salsa20_xor:crypto_stream_salsa20_xor,crypto_stream_salsa20:crypto_stream_salsa20,crypto_onetimeauth:crypto_onetimeauth,crypto_onetimeauth_verify:crypto_onetimeauth_verify,crypto_verify_16:crypto_verify_16,crypto_verify_32:crypto_verify_32,crypto_secretbox:crypto_secretbox,crypto_secretbox_open:crypto_secretbox_open,crypto_scalarmult:crypto_scalarmult,crypto_scalarmult_base:crypto_scalarmult_base,crypto_box_beforenm:crypto_box_beforenm,crypto_box_afternm:g,crypto_box:function crypto_box(e,t,r,n,i,o){var s=new Uint8Array(32);return crypto_box_beforenm(s,i,o),g(e,t,r,n,s)},crypto_box_open:function crypto_box_open(e,t,r,n,i,o){var s=new Uint8Array(32);return crypto_box_beforenm(s,i,o),y(e,t,r,n,s)},crypto_box_keypair:crypto_box_keypair,crypto_hash:crypto_hash,crypto_sign:crypto_sign,crypto_sign_keypair:crypto_sign_keypair,crypto_sign_open:crypto_sign_open,crypto_secretbox_KEYBYTES:_,crypto_secretbox_NONCEBYTES:w,crypto_secretbox_ZEROBYTES:32,crypto_secretbox_BOXZEROBYTES:16,crypto_scalarmult_BYTES:32,crypto_scalarmult_SCALARBYTES:32,crypto_box_PUBLICKEYBYTES:E,crypto_box_SECRETKEYBYTES:C,crypto_box_BEFORENMBYTES:32,crypto_box_NONCEBYTES:x,crypto_box_ZEROBYTES:32,crypto_box_BOXZEROBYTES:16,crypto_sign_BYTES:64,crypto_sign_PUBLICKEYBYTES:32,crypto_sign_SECRETKEYBYTES:64,crypto_sign_SEEDBYTES:32,crypto_hash_BYTES:64},e.util||(e.util={},e.util.decodeUTF8=e.util.encodeUTF8=e.util.encodeBase64=e.util.decodeBase64=function(){throw new Error("nacl.util moved into separate package: https://github.com/dchest/tweetnacl-util-js")}),e.randomBytes=function(e){var t=new Uint8Array(e);return n(t,e),t},e.secretbox=function(e,t,r){checkArrayTypes(e,t,r),checkLengths(r,t);for(var n=new Uint8Array(32+e.length),i=new Uint8Array(n.length),o=0;o<e.length;o++)n[o+32]=e[o];return crypto_secretbox(i,n,n.length,t,r),i.subarray(16)},e.secretbox.open=function(e,t,r){checkArrayTypes(e,t,r),checkLengths(r,t);for(var n=new Uint8Array(16+e.length),i=new Uint8Array(n.length),o=0;o<e.length;o++)n[o+16]=e[o];return!(n.length<32)&&(0===crypto_secretbox_open(i,n,n.length,t,r)&&i.subarray(32))},e.secretbox.keyLength=_,e.secretbox.nonceLength=w,e.secretbox.overheadLength=16,e.scalarMult=function(e,t){if(checkArrayTypes(e,t),32!==e.length)throw new Error("bad n size");if(32!==t.length)throw new Error("bad p size");var r=new Uint8Array(32);return crypto_scalarmult(r,e,t),r},e.scalarMult.base=function(e){if(checkArrayTypes(e),32!==e.length)throw new Error("bad n size");var t=new Uint8Array(32);return crypto_scalarmult_base(t,e),t},e.scalarMult.scalarLength=32,e.scalarMult.groupElementLength=32,e.box=function(t,r,n,i){var o=e.box.before(n,i);return e.secretbox(t,r,o)},e.box.before=function(e,t){checkArrayTypes(e,t),function checkBoxLengths(e,t){if(e.length!==E)throw new Error("bad public key size");if(t.length!==C)throw new Error("bad secret key size")}(e,t);var r=new Uint8Array(32);return crypto_box_beforenm(r,e,t),r},e.box.after=e.secretbox,e.box.open=function(t,r,n,i){var o=e.box.before(n,i);return e.secretbox.open(t,r,o)},e.box.open.after=e.secretbox.open,e.box.keyPair=function(){var e=new Uint8Array(E),t=new Uint8Array(C);return crypto_box_keypair(e,t),{publicKey:e,secretKey:t}},e.box.keyPair.fromSecretKey=function(e){if(checkArrayTypes(e),e.length!==C)throw new Error("bad secret key size");var t=new Uint8Array(E);return crypto_scalarmult_base(t,e),{publicKey:t,secretKey:new Uint8Array(e)}},e.box.publicKeyLength=E,e.box.secretKeyLength=C,e.box.sharedKeyLength=32,e.box.nonceLength=x,e.box.overheadLength=e.secretbox.overheadLength,e.sign=function(e,t){if(checkArrayTypes(e,t),64!==t.length)throw new Error("bad secret key size");var r=new Uint8Array(64+e.length);return crypto_sign(r,e,e.length,t),r},e.sign.open=function(e,t){if(2!==arguments.length)throw new Error("nacl.sign.open accepts 2 arguments; did you mean to use nacl.sign.detached.verify?");if(checkArrayTypes(e,t),32!==t.length)throw new Error("bad public key size");var r=new Uint8Array(e.length),n=crypto_sign_open(r,e,e.length,t);if(n<0)return null;for(var i=new Uint8Array(n),o=0;o<i.length;o++)i[o]=r[o];return i},e.sign.detached=function(t,r){for(var n=e.sign(t,r),i=new Uint8Array(64),o=0;o<i.length;o++)i[o]=n[o];return i},e.sign.detached.verify=function(e,t,r){if(checkArrayTypes(e,t,r),64!==t.length)throw new Error("bad signature size");if(32!==r.length)throw new Error("bad public key size");var n,i=new Uint8Array(64+e.length),o=new Uint8Array(64+e.length);for(n=0;n<64;n++)i[n]=t[n];for(n=0;n<e.length;n++)i[n+64]=e[n];return crypto_sign_open(o,i,i.length,r)>=0},e.sign.keyPair=function(){var e=new Uint8Array(32),t=new Uint8Array(64);return crypto_sign_keypair(e,t),{publicKey:e,secretKey:t}},e.sign.keyPair.fromSecretKey=function(e){if(checkArrayTypes(e),64!==e.length)throw new Error("bad secret key size");for(var t=new Uint8Array(32),r=0;r<t.length;r++)t[r]=e[32+r];return{publicKey:t,secretKey:new Uint8Array(e)}},e.sign.keyPair.fromSeed=function(e){if(checkArrayTypes(e),32!==e.length)throw new Error("bad seed size");for(var t=new Uint8Array(32),r=new Uint8Array(64),n=0;n<32;n++)r[n]=e[n];return crypto_sign_keypair(t,r,!0),{publicKey:t,secretKey:r}},e.sign.publicKeyLength=32,e.sign.secretKeyLength=64,e.sign.seedLength=32,e.sign.signatureLength=64,e.hash=function(e){checkArrayTypes(e);var t=new Uint8Array(64);return crypto_hash(t,e,e.length),t},e.hash.hashLength=64,e.verify=function(e,t){return checkArrayTypes(e,t),0!==e.length&&0!==t.length&&(e.length===t.length&&0===vn(e,0,t,0,e.length))},e.setPRNG=function(e){n=e},function(){var t="undefined"!=typeof self?self.crypto||self.msCrypto:null;if(t&&t.getRandomValues){e.setPRNG(function(e,r){var n,i=new Uint8Array(r);for(n=0;n<r;n+=65536)t.getRandomValues(i.subarray(n,n+Math.min(r-n,65536)));for(n=0;n<r;n++)e[n]=i[n];cleanup(i)})}else(t=r(12))&&t.randomBytes&&e.setPRNG(function(e,r){var n,i=t.randomBytes(r);for(n=0;n<r;n++)e[n]=i[n];cleanup(i)})}()}(e.exports?e.exports:self.nacl=self.nacl||{})},function(e,t,r){(function(){var t;function BigInteger(e,t,r){null!=e&&("number"==typeof e?this.fromNumber(e,t,r):null==t&&"string"!=typeof e?this.fromString(e,256):this.fromString(e,t))}function nbi(){return new BigInteger(null)}var r="undefined"!=typeof navigator;r&&"Microsoft Internet Explorer"==navigator.appName?(BigInteger.prototype.am=function am2(e,t,r,n,i,o){for(var s=32767&t,a=t>>15;--o>=0;){var c=32767&this[e],u=this[e++]>>15,l=a*c+u*s;i=((c=s*c+((32767&l)<<15)+r[n]+(1073741823&i))>>>30)+(l>>>15)+a*u+(i>>>30),r[n++]=1073741823&c}return i},t=30):r&&"Netscape"!=navigator.appName?(BigInteger.prototype.am=function am1(e,t,r,n,i,o){for(;--o>=0;){var s=t*this[e++]+r[n]+i;i=Math.floor(s/67108864),r[n++]=67108863&s}return i},t=26):(BigInteger.prototype.am=function am3(e,t,r,n,i,o){for(var s=16383&t,a=t>>14;--o>=0;){var c=16383&this[e],u=this[e++]>>14,l=a*c+u*s;i=((c=s*c+((16383&l)<<14)+r[n]+i)>>28)+(l>>14)+a*u,r[n++]=268435455&c}return i},t=28),BigInteger.prototype.DB=t,BigInteger.prototype.DM=(1<<t)-1,BigInteger.prototype.DV=1<<t;BigInteger.prototype.FV=Math.pow(2,52),BigInteger.prototype.F1=52-t,BigInteger.prototype.F2=2*t-52;var n,i,o="0123456789abcdefghijklmnopqrstuvwxyz",s=new Array;for(n="0".charCodeAt(0),i=0;i<=9;++i)s[n++]=i;for(n="a".charCodeAt(0),i=10;i<36;++i)s[n++]=i;for(n="A".charCodeAt(0),i=10;i<36;++i)s[n++]=i;function int2char(e){return o.charAt(e)}function intAt(e,t){var r=s[e.charCodeAt(t)];return null==r?-1:r}function nbv(e){var t=nbi();return t.fromInt(e),t}function nbits(e){var t,r=1;return 0!=(t=e>>>16)&&(e=t,r+=16),0!=(t=e>>8)&&(e=t,r+=8),0!=(t=e>>4)&&(e=t,r+=4),0!=(t=e>>2)&&(e=t,r+=2),0!=(t=e>>1)&&(e=t,r+=1),r}function Classic(e){this.m=e}function Montgomery(e){this.m=e,this.mp=e.invDigit(),this.mpl=32767&this.mp,this.mph=this.mp>>15,this.um=(1<<e.DB-15)-1,this.mt2=2*e.t}function op_and(e,t){return e&t}function op_or(e,t){return e|t}function op_xor(e,t){return e^t}function op_andnot(e,t){return e&~t}function lbit(e){if(0==e)return-1;var t=0;return 0==(65535&e)&&(e>>=16,t+=16),0==(255&e)&&(e>>=8,t+=8),0==(15&e)&&(e>>=4,t+=4),0==(3&e)&&(e>>=2,t+=2),0==(1&e)&&++t,t}function cbit(e){for(var t=0;0!=e;)e&=e-1,++t;return t}function NullExp(){}function nNop(e){return e}function Barrett(e){this.r2=nbi(),this.q3=nbi(),BigInteger.ONE.dlShiftTo(2*e.t,this.r2),this.mu=this.r2.divide(e),this.m=e}Classic.prototype.convert=function cConvert(e){return e.s<0||e.compareTo(this.m)>=0?e.mod(this.m):e},Classic.prototype.revert=function cRevert(e){return e},Classic.prototype.reduce=function cReduce(e){e.divRemTo(this.m,null,e)},Classic.prototype.mulTo=function cMulTo(e,t,r){e.multiplyTo(t,r),this.reduce(r)},Classic.prototype.sqrTo=function cSqrTo(e,t){e.squareTo(t),this.reduce(t)},Montgomery.prototype.convert=function montConvert(e){var t=nbi();return e.abs().dlShiftTo(this.m.t,t),t.divRemTo(this.m,null,t),e.s<0&&t.compareTo(BigInteger.ZERO)>0&&this.m.subTo(t,t),t},Montgomery.prototype.revert=function montRevert(e){var t=nbi();return e.copyTo(t),this.reduce(t),t},Montgomery.prototype.reduce=function montReduce(e){for(;e.t<=this.mt2;)e[e.t++]=0;for(var t=0;t<this.m.t;++t){var r=32767&e[t],n=r*this.mpl+((r*this.mph+(e[t]>>15)*this.mpl&this.um)<<15)&e.DM;for(e[r=t+this.m.t]+=this.m.am(0,n,e,t,0,this.m.t);e[r]>=e.DV;)e[r]-=e.DV,e[++r]++}e.clamp(),e.drShiftTo(this.m.t,e),e.compareTo(this.m)>=0&&e.subTo(this.m,e)},Montgomery.prototype.mulTo=function montMulTo(e,t,r){e.multiplyTo(t,r),this.reduce(r)},Montgomery.prototype.sqrTo=function montSqrTo(e,t){e.squareTo(t),this.reduce(t)},BigInteger.prototype.copyTo=function bnpCopyTo(e){for(var t=this.t-1;t>=0;--t)e[t]=this[t];e.t=this.t,e.s=this.s},BigInteger.prototype.fromInt=function bnpFromInt(e){this.t=1,this.s=e<0?-1:0,e>0?this[0]=e:e<-1?this[0]=e+this.DV:this.t=0},BigInteger.prototype.fromString=function bnpFromString(e,t){var r;if(16==t)r=4;else if(8==t)r=3;else if(256==t)r=8;else if(2==t)r=1;else if(32==t)r=5;else{if(4!=t)return void this.fromRadix(e,t);r=2}this.t=0,this.s=0;for(var n=e.length,i=!1,o=0;--n>=0;){var s=8==r?255&e[n]:intAt(e,n);s<0?"-"==e.charAt(n)&&(i=!0):(i=!1,0==o?this[this.t++]=s:o+r>this.DB?(this[this.t-1]|=(s&(1<<this.DB-o)-1)<<o,this[this.t++]=s>>this.DB-o):this[this.t-1]|=s<<o,(o+=r)>=this.DB&&(o-=this.DB))}8==r&&0!=(128&e[0])&&(this.s=-1,o>0&&(this[this.t-1]|=(1<<this.DB-o)-1<<o)),this.clamp(),i&&BigInteger.ZERO.subTo(this,this)},BigInteger.prototype.clamp=function bnpClamp(){for(var e=this.s&this.DM;this.t>0&&this[this.t-1]==e;)--this.t},BigInteger.prototype.dlShiftTo=function bnpDLShiftTo(e,t){var r;for(r=this.t-1;r>=0;--r)t[r+e]=this[r];for(r=e-1;r>=0;--r)t[r]=0;t.t=this.t+e,t.s=this.s},BigInteger.prototype.drShiftTo=function bnpDRShiftTo(e,t){for(var r=e;r<this.t;++r)t[r-e]=this[r];t.t=Math.max(this.t-e,0),t.s=this.s},BigInteger.prototype.lShiftTo=function bnpLShiftTo(e,t){var r,n=e%this.DB,i=this.DB-n,o=(1<<i)-1,s=Math.floor(e/this.DB),a=this.s<<n&this.DM;for(r=this.t-1;r>=0;--r)t[r+s+1]=this[r]>>i|a,a=(this[r]&o)<<n;for(r=s-1;r>=0;--r)t[r]=0;t[s]=a,t.t=this.t+s+1,t.s=this.s,t.clamp()},BigInteger.prototype.rShiftTo=function bnpRShiftTo(e,t){t.s=this.s;var r=Math.floor(e/this.DB);if(r>=this.t)t.t=0;else{var n=e%this.DB,i=this.DB-n,o=(1<<n)-1;t[0]=this[r]>>n;for(var s=r+1;s<this.t;++s)t[s-r-1]|=(this[s]&o)<<i,t[s-r]=this[s]>>n;n>0&&(t[this.t-r-1]|=(this.s&o)<<i),t.t=this.t-r,t.clamp()}},BigInteger.prototype.subTo=function bnpSubTo(e,t){for(var r=0,n=0,i=Math.min(e.t,this.t);r<i;)n+=this[r]-e[r],t[r++]=n&this.DM,n>>=this.DB;if(e.t<this.t){for(n-=e.s;r<this.t;)n+=this[r],t[r++]=n&this.DM,n>>=this.DB;n+=this.s}else{for(n+=this.s;r<e.t;)n-=e[r],t[r++]=n&this.DM,n>>=this.DB;n-=e.s}t.s=n<0?-1:0,n<-1?t[r++]=this.DV+n:n>0&&(t[r++]=n),t.t=r,t.clamp()},BigInteger.prototype.multiplyTo=function bnpMultiplyTo(e,t){var r=this.abs(),n=e.abs(),i=r.t;for(t.t=i+n.t;--i>=0;)t[i]=0;for(i=0;i<n.t;++i)t[i+r.t]=r.am(0,n[i],t,i,0,r.t);t.s=0,t.clamp(),this.s!=e.s&&BigInteger.ZERO.subTo(t,t)},BigInteger.prototype.squareTo=function bnpSquareTo(e){for(var t=this.abs(),r=e.t=2*t.t;--r>=0;)e[r]=0;for(r=0;r<t.t-1;++r){var n=t.am(r,t[r],e,2*r,0,1);(e[r+t.t]+=t.am(r+1,2*t[r],e,2*r+1,n,t.t-r-1))>=t.DV&&(e[r+t.t]-=t.DV,e[r+t.t+1]=1)}e.t>0&&(e[e.t-1]+=t.am(r,t[r],e,2*r,0,1)),e.s=0,e.clamp()},BigInteger.prototype.divRemTo=function bnpDivRemTo(e,t,r){var n=e.abs();if(!(n.t<=0)){var i=this.abs();if(i.t<n.t)return null!=t&&t.fromInt(0),void(null!=r&&this.copyTo(r));null==r&&(r=nbi());var o=nbi(),s=this.s,a=e.s,c=this.DB-nbits(n[n.t-1]);c>0?(n.lShiftTo(c,o),i.lShiftTo(c,r)):(n.copyTo(o),i.copyTo(r));var u=o.t,l=o[u-1];if(0!=l){var p=l*(1<<this.F1)+(u>1?o[u-2]>>this.F2:0),d=this.FV/p,h=(1<<this.F1)/p,f=1<<this.F2,m=r.t,g=m-u,y=null==t?nbi():t;for(o.dlShiftTo(g,y),r.compareTo(y)>=0&&(r[r.t++]=1,r.subTo(y,r)),BigInteger.ONE.dlShiftTo(u,y),y.subTo(o,o);o.t<u;)o[o.t++]=0;for(;--g>=0;){var v=r[--m]==l?this.DM:Math.floor(r[m]*d+(r[m-1]+f)*h);if((r[m]+=o.am(0,v,r,g,0,u))<v)for(o.dlShiftTo(g,y),r.subTo(y,r);r[m]<--v;)r.subTo(y,r)}null!=t&&(r.drShiftTo(u,t),s!=a&&BigInteger.ZERO.subTo(t,t)),r.t=u,r.clamp(),c>0&&r.rShiftTo(c,r),s<0&&BigInteger.ZERO.subTo(r,r)}}},BigInteger.prototype.invDigit=function bnpInvDigit(){if(this.t<1)return 0;var e=this[0];if(0==(1&e))return 0;var t=3&e;return(t=(t=(t=(t=t*(2-(15&e)*t)&15)*(2-(255&e)*t)&255)*(2-((65535&e)*t&65535))&65535)*(2-e*t%this.DV)%this.DV)>0?this.DV-t:-t},BigInteger.prototype.isEven=function bnpIsEven(){return 0==(this.t>0?1&this[0]:this.s)},BigInteger.prototype.exp=function bnpExp(e,t){if(e>4294967295||e<1)return BigInteger.ONE;var r=nbi(),n=nbi(),i=t.convert(this),o=nbits(e)-1;for(i.copyTo(r);--o>=0;)if(t.sqrTo(r,n),(e&1<<o)>0)t.mulTo(n,i,r);else{var s=r;r=n,n=s}return t.revert(r)},BigInteger.prototype.toString=function bnToString(e){if(this.s<0)return"-"+this.negate().toString(e);var t;if(16==e)t=4;else if(8==e)t=3;else if(2==e)t=1;else if(32==e)t=5;else{if(4!=e)return this.toRadix(e);t=2}var r,n=(1<<t)-1,i=!1,o="",s=this.t,a=this.DB-s*this.DB%t;if(s-- >0)for(a<this.DB&&(r=this[s]>>a)>0&&(i=!0,o=int2char(r));s>=0;)a<t?(r=(this[s]&(1<<a)-1)<<t-a,r|=this[--s]>>(a+=this.DB-t)):(r=this[s]>>(a-=t)&n,a<=0&&(a+=this.DB,--s)),r>0&&(i=!0),i&&(o+=int2char(r));return i?o:"0"},BigInteger.prototype.negate=function bnNegate(){var e=nbi();return BigInteger.ZERO.subTo(this,e),e},BigInteger.prototype.abs=function bnAbs(){return this.s<0?this.negate():this},BigInteger.prototype.compareTo=function bnCompareTo(e){var t=this.s-e.s;if(0!=t)return t;var r=this.t;if(0!=(t=r-e.t))return this.s<0?-t:t;for(;--r>=0;)if(0!=(t=this[r]-e[r]))return t;return 0},BigInteger.prototype.bitLength=function bnBitLength(){return this.t<=0?0:this.DB*(this.t-1)+nbits(this[this.t-1]^this.s&this.DM)},BigInteger.prototype.mod=function bnMod(e){var t=nbi();return this.abs().divRemTo(e,null,t),this.s<0&&t.compareTo(BigInteger.ZERO)>0&&e.subTo(t,t),t},BigInteger.prototype.modPowInt=function bnModPowInt(e,t){var r;return r=e<256||t.isEven()?new Classic(t):new Montgomery(t),this.exp(e,r)},BigInteger.ZERO=nbv(0),BigInteger.ONE=nbv(1),NullExp.prototype.convert=nNop,NullExp.prototype.revert=nNop,NullExp.prototype.mulTo=function nMulTo(e,t,r){e.multiplyTo(t,r)},NullExp.prototype.sqrTo=function nSqrTo(e,t){e.squareTo(t)},Barrett.prototype.convert=function barrettConvert(e){if(e.s<0||e.t>2*this.m.t)return e.mod(this.m);if(e.compareTo(this.m)<0)return e;var t=nbi();return e.copyTo(t),this.reduce(t),t},Barrett.prototype.revert=function barrettRevert(e){return e},Barrett.prototype.reduce=function barrettReduce(e){for(e.drShiftTo(this.m.t-1,this.r2),e.t>this.m.t+1&&(e.t=this.m.t+1,e.clamp()),this.mu.multiplyUpperTo(this.r2,this.m.t+1,this.q3),this.m.multiplyLowerTo(this.q3,this.m.t+1,this.r2);e.compareTo(this.r2)<0;)e.dAddOffset(1,this.m.t+1);for(e.subTo(this.r2,e);e.compareTo(this.m)>=0;)e.subTo(this.m,e)},Barrett.prototype.mulTo=function barrettMulTo(e,t,r){e.multiplyTo(t,r),this.reduce(r)},Barrett.prototype.sqrTo=function barrettSqrTo(e,t){e.squareTo(t),this.reduce(t)};var a,c,u,l=[2,3,5,7,11,13,17,19,23,29,31,37,41,43,47,53,59,61,67,71,73,79,83,89,97,101,103,107,109,113,127,131,137,139,149,151,157,163,167,173,179,181,191,193,197,199,211,223,227,229,233,239,241,251,257,263,269,271,277,281,283,293,307,311,313,317,331,337,347,349,353,359,367,373,379,383,389,397,401,409,419,421,431,433,439,443,449,457,461,463,467,479,487,491,499,503,509,521,523,541,547,557,563,569,571,577,587,593,599,601,607,613,617,619,631,641,643,647,653,659,661,673,677,683,691,701,709,719,727,733,739,743,751,757,761,769,773,787,797,809,811,821,823,827,829,839,853,857,859,863,877,881,883,887,907,911,919,929,937,941,947,953,967,971,977,983,991,997],p=(1<<26)/l[l.length-1];function rng_seed_time(){!function rng_seed_int(e){c[u++]^=255&e,c[u++]^=e>>8&255,c[u++]^=e>>16&255,c[u++]^=e>>24&255,u>=m&&(u-=m)}((new Date).getTime())}if(BigInteger.prototype.chunkSize=function bnpChunkSize(e){return Math.floor(Math.LN2*this.DB/Math.log(e))},BigInteger.prototype.toRadix=function bnpToRadix(e){if(null==e&&(e=10),0==this.signum()||e<2||e>36)return"0";var t=this.chunkSize(e),r=Math.pow(e,t),n=nbv(r),i=nbi(),o=nbi(),s="";for(this.divRemTo(n,i,o);i.signum()>0;)s=(r+o.intValue()).toString(e).substr(1)+s,i.divRemTo(n,i,o);return o.intValue().toString(e)+s},BigInteger.prototype.fromRadix=function bnpFromRadix(e,t){this.fromInt(0),null==t&&(t=10);for(var r=this.chunkSize(t),n=Math.pow(t,r),i=!1,o=0,s=0,a=0;a<e.length;++a){var c=intAt(e,a);c<0?"-"==e.charAt(a)&&0==this.signum()&&(i=!0):(s=t*s+c,++o>=r&&(this.dMultiply(n),this.dAddOffset(s,0),o=0,s=0))}o>0&&(this.dMultiply(Math.pow(t,o)),this.dAddOffset(s,0)),i&&BigInteger.ZERO.subTo(this,this)},BigInteger.prototype.fromNumber=function bnpFromNumber(e,t,r){if("number"==typeof t)if(e<2)this.fromInt(1);else for(this.fromNumber(e,r),this.testBit(e-1)||this.bitwiseTo(BigInteger.ONE.shiftLeft(e-1),op_or,this),this.isEven()&&this.dAddOffset(1,0);!this.isProbablePrime(t);)this.dAddOffset(2,0),this.bitLength()>e&&this.subTo(BigInteger.ONE.shiftLeft(e-1),this);else{var n=new Array,i=7&e;n.length=1+(e>>3),t.nextBytes(n),i>0?n[0]&=(1<<i)-1:n[0]=0,this.fromString(n,256)}},BigInteger.prototype.bitwiseTo=function bnpBitwiseTo(e,t,r){var n,i,o=Math.min(e.t,this.t);for(n=0;n<o;++n)r[n]=t(this[n],e[n]);if(e.t<this.t){for(i=e.s&this.DM,n=o;n<this.t;++n)r[n]=t(this[n],i);r.t=this.t}else{for(i=this.s&this.DM,n=o;n<e.t;++n)r[n]=t(i,e[n]);r.t=e.t}r.s=t(this.s,e.s),r.clamp()},BigInteger.prototype.changeBit=function bnpChangeBit(e,t){var r=BigInteger.ONE.shiftLeft(e);return this.bitwiseTo(r,t,r),r},BigInteger.prototype.addTo=function bnpAddTo(e,t){for(var r=0,n=0,i=Math.min(e.t,this.t);r<i;)n+=this[r]+e[r],t[r++]=n&this.DM,n>>=this.DB;if(e.t<this.t){for(n+=e.s;r<this.t;)n+=this[r],t[r++]=n&this.DM,n>>=this.DB;n+=this.s}else{for(n+=this.s;r<e.t;)n+=e[r],t[r++]=n&this.DM,n>>=this.DB;n+=e.s}t.s=n<0?-1:0,n>0?t[r++]=n:n<-1&&(t[r++]=this.DV+n),t.t=r,t.clamp()},BigInteger.prototype.dMultiply=function bnpDMultiply(e){this[this.t]=this.am(0,e-1,this,0,0,this.t),++this.t,this.clamp()},BigInteger.prototype.dAddOffset=function bnpDAddOffset(e,t){if(0!=e){for(;this.t<=t;)this[this.t++]=0;for(this[t]+=e;this[t]>=this.DV;)this[t]-=this.DV,++t>=this.t&&(this[this.t++]=0),++this[t]}},BigInteger.prototype.multiplyLowerTo=function bnpMultiplyLowerTo(e,t,r){var n,i=Math.min(this.t+e.t,t);for(r.s=0,r.t=i;i>0;)r[--i]=0;for(n=r.t-this.t;i<n;++i)r[i+this.t]=this.am(0,e[i],r,i,0,this.t);for(n=Math.min(e.t,t);i<n;++i)this.am(0,e[i],r,i,0,t-i);r.clamp()},BigInteger.prototype.multiplyUpperTo=function bnpMultiplyUpperTo(e,t,r){--t;var n=r.t=this.t+e.t-t;for(r.s=0;--n>=0;)r[n]=0;for(n=Math.max(t-this.t,0);n<e.t;++n)r[this.t+n-t]=this.am(t-n,e[n],r,0,0,this.t+n-t);r.clamp(),r.drShiftTo(1,r)},BigInteger.prototype.modInt=function bnpModInt(e){if(e<=0)return 0;var t=this.DV%e,r=this.s<0?e-1:0;if(this.t>0)if(0==t)r=this[0]%e;else for(var n=this.t-1;n>=0;--n)r=(t*r+this[n])%e;return r},BigInteger.prototype.millerRabin=function bnpMillerRabin(e){var t=this.subtract(BigInteger.ONE),r=t.getLowestSetBit();if(r<=0)return!1;var n=t.shiftRight(r);(e=e+1>>1)>l.length&&(e=l.length);for(var i=nbi(),o=0;o<e;++o){i.fromInt(l[Math.floor(Math.random()*l.length)]);var s=i.modPow(n,this);if(0!=s.compareTo(BigInteger.ONE)&&0!=s.compareTo(t)){for(var a=1;a++<r&&0!=s.compareTo(t);)if(0==(s=s.modPowInt(2,this)).compareTo(BigInteger.ONE))return!1;if(0!=s.compareTo(t))return!1}}return!0},BigInteger.prototype.clone=function bnClone(){var e=nbi();return this.copyTo(e),e},BigInteger.prototype.intValue=function bnIntValue(){if(this.s<0){if(1==this.t)return this[0]-this.DV;if(0==this.t)return-1}else{if(1==this.t)return this[0];if(0==this.t)return 0}return(this[1]&(1<<32-this.DB)-1)<<this.DB|this[0]},BigInteger.prototype.byteValue=function bnByteValue(){return 0==this.t?this.s:this[0]<<24>>24},BigInteger.prototype.shortValue=function bnShortValue(){return 0==this.t?this.s:this[0]<<16>>16},BigInteger.prototype.signum=function bnSigNum(){return this.s<0?-1:this.t<=0||1==this.t&&this[0]<=0?0:1},BigInteger.prototype.toByteArray=function bnToByteArray(){var e=this.t,t=new Array;t[0]=this.s;var r,n=this.DB-e*this.DB%8,i=0;if(e-- >0)for(n<this.DB&&(r=this[e]>>n)!=(this.s&this.DM)>>n&&(t[i++]=r|this.s<<this.DB-n);e>=0;)n<8?(r=(this[e]&(1<<n)-1)<<8-n,r|=this[--e]>>(n+=this.DB-8)):(r=this[e]>>(n-=8)&255,n<=0&&(n+=this.DB,--e)),0!=(128&r)&&(r|=-256),0==i&&(128&this.s)!=(128&r)&&++i,(i>0||r!=this.s)&&(t[i++]=r);return t},BigInteger.prototype.equals=function bnEquals(e){return 0==this.compareTo(e)},BigInteger.prototype.min=function bnMin(e){return this.compareTo(e)<0?this:e},BigInteger.prototype.max=function bnMax(e){return this.compareTo(e)>0?this:e},BigInteger.prototype.and=function bnAnd(e){var t=nbi();return this.bitwiseTo(e,op_and,t),t},BigInteger.prototype.or=function bnOr(e){var t=nbi();return this.bitwiseTo(e,op_or,t),t},BigInteger.prototype.xor=function bnXor(e){var t=nbi();return this.bitwiseTo(e,op_xor,t),t},BigInteger.prototype.andNot=function bnAndNot(e){var t=nbi();return this.bitwiseTo(e,op_andnot,t),t},BigInteger.prototype.not=function bnNot(){for(var e=nbi(),t=0;t<this.t;++t)e[t]=this.DM&~this[t];return e.t=this.t,e.s=~this.s,e},BigInteger.prototype.shiftLeft=function bnShiftLeft(e){var t=nbi();return e<0?this.rShiftTo(-e,t):this.lShiftTo(e,t),t},BigInteger.prototype.shiftRight=function bnShiftRight(e){var t=nbi();return e<0?this.lShiftTo(-e,t):this.rShiftTo(e,t),t},BigInteger.prototype.getLowestSetBit=function bnGetLowestSetBit(){for(var e=0;e<this.t;++e)if(0!=this[e])return e*this.DB+lbit(this[e]);return this.s<0?this.t*this.DB:-1},BigInteger.prototype.bitCount=function bnBitCount(){for(var e=0,t=this.s&this.DM,r=0;r<this.t;++r)e+=cbit(this[r]^t);return e},BigInteger.prototype.testBit=function bnTestBit(e){var t=Math.floor(e/this.DB);return t>=this.t?0!=this.s:0!=(this[t]&1<<e%this.DB)},BigInteger.prototype.setBit=function bnSetBit(e){return this.changeBit(e,op_or)},BigInteger.prototype.clearBit=function bnClearBit(e){return this.changeBit(e,op_andnot)},BigInteger.prototype.flipBit=function bnFlipBit(e){return this.changeBit(e,op_xor)},BigInteger.prototype.add=function bnAdd(e){var t=nbi();return this.addTo(e,t),t},BigInteger.prototype.subtract=function bnSubtract(e){var t=nbi();return this.subTo(e,t),t},BigInteger.prototype.multiply=function bnMultiply(e){var t=nbi();return this.multiplyTo(e,t),t},BigInteger.prototype.divide=function bnDivide(e){var t=nbi();return this.divRemTo(e,t,null),t},BigInteger.prototype.remainder=function bnRemainder(e){var t=nbi();return this.divRemTo(e,null,t),t},BigInteger.prototype.divideAndRemainder=function bnDivideAndRemainder(e){var t=nbi(),r=nbi();return this.divRemTo(e,t,r),new Array(t,r)},BigInteger.prototype.modPow=function bnModPow(e,t){var r,n,i=e.bitLength(),o=nbv(1);if(i<=0)return o;r=i<18?1:i<48?3:i<144?4:i<768?5:6,n=i<8?new Classic(t):t.isEven()?new Barrett(t):new Montgomery(t);var s=new Array,a=3,c=r-1,u=(1<<r)-1;if(s[1]=n.convert(this),r>1){var l=nbi();for(n.sqrTo(s[1],l);a<=u;)s[a]=nbi(),n.mulTo(l,s[a-2],s[a]),a+=2}var p,d,h=e.t-1,f=!0,m=nbi();for(i=nbits(e[h])-1;h>=0;){for(i>=c?p=e[h]>>i-c&u:(p=(e[h]&(1<<i+1)-1)<<c-i,h>0&&(p|=e[h-1]>>this.DB+i-c)),a=r;0==(1&p);)p>>=1,--a;if((i-=a)<0&&(i+=this.DB,--h),f)s[p].copyTo(o),f=!1;else{for(;a>1;)n.sqrTo(o,m),n.sqrTo(m,o),a-=2;a>0?n.sqrTo(o,m):(d=o,o=m,m=d),n.mulTo(m,s[p],o)}for(;h>=0&&0==(e[h]&1<<i);)n.sqrTo(o,m),d=o,o=m,m=d,--i<0&&(i=this.DB-1,--h)}return n.revert(o)},BigInteger.prototype.modInverse=function bnModInverse(e){var t=e.isEven();if(this.isEven()&&t||0==e.signum())return BigInteger.ZERO;for(var r=e.clone(),n=this.clone(),i=nbv(1),o=nbv(0),s=nbv(0),a=nbv(1);0!=r.signum();){for(;r.isEven();)r.rShiftTo(1,r),t?(i.isEven()&&o.isEven()||(i.addTo(this,i),o.subTo(e,o)),i.rShiftTo(1,i)):o.isEven()||o.subTo(e,o),o.rShiftTo(1,o);for(;n.isEven();)n.rShiftTo(1,n),t?(s.isEven()&&a.isEven()||(s.addTo(this,s),a.subTo(e,a)),s.rShiftTo(1,s)):a.isEven()||a.subTo(e,a),a.rShiftTo(1,a);r.compareTo(n)>=0?(r.subTo(n,r),t&&i.subTo(s,i),o.subTo(a,o)):(n.subTo(r,n),t&&s.subTo(i,s),a.subTo(o,a))}return 0!=n.compareTo(BigInteger.ONE)?BigInteger.ZERO:a.compareTo(e)>=0?a.subtract(e):a.signum()<0?(a.addTo(e,a),a.signum()<0?a.add(e):a):a},BigInteger.prototype.pow=function bnPow(e){return this.exp(e,new NullExp)},BigInteger.prototype.gcd=function bnGCD(e){var t=this.s<0?this.negate():this.clone(),r=e.s<0?e.negate():e.clone();if(t.compareTo(r)<0){var n=t;t=r,r=n}var i=t.getLowestSetBit(),o=r.getLowestSetBit();if(o<0)return t;for(i<o&&(o=i),o>0&&(t.rShiftTo(o,t),r.rShiftTo(o,r));t.signum()>0;)(i=t.getLowestSetBit())>0&&t.rShiftTo(i,t),(i=r.getLowestSetBit())>0&&r.rShiftTo(i,r),t.compareTo(r)>=0?(t.subTo(r,t),t.rShiftTo(1,t)):(r.subTo(t,r),r.rShiftTo(1,r));return o>0&&r.lShiftTo(o,r),r},BigInteger.prototype.isProbablePrime=function bnIsProbablePrime(e){var t,r=this.abs();if(1==r.t&&r[0]<=l[l.length-1]){for(t=0;t<l.length;++t)if(r[0]==l[t])return!0;return!1}if(r.isEven())return!1;for(t=1;t<l.length;){for(var n=l[t],i=t+1;i<l.length&&n<p;)n*=l[i++];for(n=r.modInt(n);t<i;)if(n%l[t++]==0)return!1}return r.millerRabin(e)},BigInteger.prototype.square=function bnSquare(){var e=nbi();return this.squareTo(e),e},BigInteger.prototype.Barrett=Barrett,null==c){var d;if(c=new Array,u=0,"undefined"!=typeof window&&window.crypto)if(window.crypto.getRandomValues){var h=new Uint8Array(32);for(window.crypto.getRandomValues(h),d=0;d<32;++d)c[u++]=h[d]}else if("Netscape"==navigator.appName&&navigator.appVersion<"5"){var f=window.crypto.random(32);for(d=0;d<f.length;++d)c[u++]=255&f.charCodeAt(d)}for(;u<m;)d=Math.floor(65536*Math.random()),c[u++]=d>>>8,c[u++]=255&d;u=0,rng_seed_time()}function rng_get_byte(){if(null==a){for(rng_seed_time(),(a=function prng_newstate(){return new Arcfour}()).init(c),u=0;u<c.length;++u)c[u]=0;u=0}return a.next()}function SecureRandom(){}function Arcfour(){this.i=0,this.j=0,this.S=new Array}SecureRandom.prototype.nextBytes=function rng_get_bytes(e){var t;for(t=0;t<e.length;++t)e[t]=rng_get_byte()},Arcfour.prototype.init=function ARC4init(e){var t,r,n;for(t=0;t<256;++t)this.S[t]=t;for(r=0,t=0;t<256;++t)r=r+this.S[t]+e[t%e.length]&255,n=this.S[t],this.S[t]=this.S[r],this.S[r]=n;this.i=0,this.j=0},Arcfour.prototype.next=function ARC4next(){var e;return this.i=this.i+1&255,this.j=this.j+this.S[this.i]&255,e=this.S[this.i],this.S[this.i]=this.S[this.j],this.S[this.j]=e,this.S[e+this.S[this.i]&255]};var m=256;BigInteger.SecureRandom=SecureRandom,BigInteger.BigInteger=BigInteger,e.exports=BigInteger}).call(this)},function(e,t,r){e.exports={read:function read(e,t){return l.read(e,t,"pkcs8")},readPkcs8:function readPkcs8(e,t,r){r.peek()===i.Ber.Integer&&(n.strictEqual(t,"private","unexpected Integer at start of public key"),r.readString(i.Ber.Integer,!0));r.readSequence();var s=r.offset+r.length,l=r.readOID();switch(l){case"1.2.840.113549.1.1.1":return r._offset=s,"public"===t?function readPkcs8RSAPublic(e){e.readSequence(i.Ber.BitString),e.readByte(),e.readSequence();var t=readMPInt(e,"modulus"),r=readMPInt(e,"exponent"),n={type:"rsa",source:e.originalInput,parts:[{name:"e",data:r},{name:"n",data:t}]};return new c(n)}(r):function readPkcs8RSAPrivate(e){e.readSequence(i.Ber.OctetString),e.readSequence();var t=readMPInt(e,"version");n.equal(t[0],0,"unknown RSA private key version");var r=readMPInt(e,"modulus"),o=readMPInt(e,"public exponent"),s=readMPInt(e,"private exponent"),a=readMPInt(e,"prime1"),c=readMPInt(e,"prime2"),l=readMPInt(e,"exponent1"),p=readMPInt(e,"exponent2"),d=readMPInt(e,"iqmp");return new u({type:"rsa",parts:[{name:"n",data:r},{name:"e",data:o},{name:"d",data:s},{name:"iqmp",data:d},{name:"p",data:a},{name:"q",data:c},{name:"dmodp",data:l},{name:"dmodq",data:p}]})}(r);case"1.2.840.10040.4.1":return"public"===t?function readPkcs8DSAPublic(e){e.readSequence();var t=readMPInt(e,"p"),r=readMPInt(e,"q"),n=readMPInt(e,"g");e.readSequence(i.Ber.BitString),e.readByte();var o=readMPInt(e,"y");return new c({type:"dsa",parts:[{name:"p",data:t},{name:"q",data:r},{name:"g",data:n},{name:"y",data:o}]})}(r):function readPkcs8DSAPrivate(e){e.readSequence();var t=readMPInt(e,"p"),r=readMPInt(e,"q"),n=readMPInt(e,"g");e.readSequence(i.Ber.OctetString);var o=readMPInt(e,"x"),s=a.calculateDSAPublic(n,t,o);return new u({type:"dsa",parts:[{name:"p",data:t},{name:"q",data:r},{name:"g",data:n},{name:"y",data:s},{name:"x",data:o}]})}(r);case"1.2.840.10045.2.1":return"public"===t?function readPkcs8ECDSAPublic(e){var t=readECDSACurve(e);n.string(t,"a known elliptic curve");var r=e.readString(i.Ber.BitString,!0);r=a.ecNormalize(r);var s={type:"ecdsa",parts:[{name:"curve",data:o.from(t)},{name:"Q",data:r}]};return new c(s)}(r):function readPkcs8ECDSAPrivate(e){var t=readECDSACurve(e);n.string(t,"a known elliptic curve"),e.readSequence(i.Ber.OctetString),e.readSequence();var r=readMPInt(e,"version");n.equal(r[0],1,"unknown version of ECDSA key");var s=e.readString(i.Ber.OctetString,!0);e.readSequence(161);var c=e.readString(i.Ber.BitString,!0);c=a.ecNormalize(c);var l={type:"ecdsa",parts:[{name:"curve",data:o.from(t)},{name:"Q",data:c},{name:"d",data:s}]};return new u(l)}(r);case"1.3.101.112":return"public"===t?function readPkcs8EdDSAPublic(e){0===e.peek()&&e.readByte();var t=a.readBitString(e),r={type:"ed25519",parts:[{name:"A",data:a.zeroPadToLength(t,32)}]};return new c(r)}(r):function readPkcs8EdDSAPrivate(e){0===e.peek()&&e.readByte();e.readSequence(i.Ber.OctetString);var t,r=e.readString(i.Ber.OctetString,!0);r=a.zeroPadToLength(r,32),e.peek()===i.Ber.BitString?(t=a.readBitString(e),t=a.zeroPadToLength(t,32)):t=a.calculateED25519Public(r);var n={type:"ed25519",parts:[{name:"A",data:a.zeroPadToLength(t,32)},{name:"k",data:a.zeroPadToLength(r,32)}]};return new u(n)}(r);case"1.3.101.110":return"public"===t?function readPkcs8X25519Public(e){var t=a.readBitString(e),r={type:"curve25519",parts:[{name:"A",data:a.zeroPadToLength(t,32)}]};return new c(r)}(r):function readPkcs8X25519Private(e){0===e.peek()&&e.readByte();e.readSequence(i.Ber.OctetString);var t=e.readString(i.Ber.OctetString,!0);t=a.zeroPadToLength(t,32);var r=a.calculateX25519Public(t),n={type:"curve25519",parts:[{name:"A",data:a.zeroPadToLength(r,32)},{name:"k",data:a.zeroPadToLength(t,32)}]};return new u(n)}(r);default:throw new Error("Unknown key type OID "+l)}},write:function write(e,t){return l.write(e,t,"pkcs8")},writePkcs8:function writePkcs8(e,t){if(e.startSequence(),u.isPrivateKey(t)){var r=o.from([0]);e.writeBuffer(r,i.Ber.Integer)}switch(e.startSequence(),t.type){case"rsa":e.writeOID("1.2.840.113549.1.1.1"),u.isPrivateKey(t)?function writePkcs8RSAPrivate(e,t){t.writeNull(),t.endSequence(),t.startSequence(i.Ber.OctetString),t.startSequence();var r=o.from([0]);t.writeBuffer(r,i.Ber.Integer),t.writeBuffer(e.part.n.data,i.Ber.Integer),t.writeBuffer(e.part.e.data,i.Ber.Integer),t.writeBuffer(e.part.d.data,i.Ber.Integer),t.writeBuffer(e.part.p.data,i.Ber.Integer),t.writeBuffer(e.part.q.data,i.Ber.Integer),e.part.dmodp&&e.part.dmodq||a.addRSAMissing(e);t.writeBuffer(e.part.dmodp.data,i.Ber.Integer),t.writeBuffer(e.part.dmodq.data,i.Ber.Integer),t.writeBuffer(e.part.iqmp.data,i.Ber.Integer),t.endSequence(),t.endSequence()}(t,e):function writePkcs8RSAPublic(e,t){t.writeNull(),t.endSequence(),t.startSequence(i.Ber.BitString),t.writeByte(0),t.startSequence(),t.writeBuffer(e.part.n.data,i.Ber.Integer),t.writeBuffer(e.part.e.data,i.Ber.Integer),t.endSequence(),t.endSequence()}(t,e);break;case"dsa":e.writeOID("1.2.840.10040.4.1"),u.isPrivateKey(t)?function writePkcs8DSAPrivate(e,t){t.startSequence(),t.writeBuffer(e.part.p.data,i.Ber.Integer),t.writeBuffer(e.part.q.data,i.Ber.Integer),t.writeBuffer(e.part.g.data,i.Ber.Integer),t.endSequence(),t.endSequence(),t.startSequence(i.Ber.OctetString),t.writeBuffer(e.part.x.data,i.Ber.Integer),t.endSequence()}(t,e):function writePkcs8DSAPublic(e,t){t.startSequence(),t.writeBuffer(e.part.p.data,i.Ber.Integer),t.writeBuffer(e.part.q.data,i.Ber.Integer),t.writeBuffer(e.part.g.data,i.Ber.Integer),t.endSequence(),t.endSequence(),t.startSequence(i.Ber.BitString),t.writeByte(0),t.writeBuffer(e.part.y.data,i.Ber.Integer),t.endSequence()}(t,e);break;case"ecdsa":e.writeOID("1.2.840.10045.2.1"),u.isPrivateKey(t)?function writePkcs8ECDSAPrivate(e,t){writeECDSACurve(e,t),t.endSequence(),t.startSequence(i.Ber.OctetString),t.startSequence();var r=o.from([1]);t.writeBuffer(r,i.Ber.Integer),t.writeBuffer(e.part.d.data,i.Ber.OctetString),t.startSequence(161);var n=a.ecNormalize(e.part.Q.data,!0);t.writeBuffer(n,i.Ber.BitString),t.endSequence(),t.endSequence(),t.endSequence()}(t,e):function writePkcs8ECDSAPublic(e,t){writeECDSACurve(e,t),t.endSequence();var r=a.ecNormalize(e.part.Q.data,!0);t.writeBuffer(r,i.Ber.BitString)}(t,e);break;case"ed25519":if(e.writeOID("1.3.101.112"),u.isPrivateKey(t))throw new Error("Ed25519 private keys in pkcs8 format are not supported");!function writePkcs8EdDSAPublic(e,t){t.endSequence(),a.writeBitString(t,e.part.A.data)}(t,e);break;default:throw new Error("Unsupported key type: "+t.type)}e.endSequence()},readECDSACurve:readECDSACurve,writeECDSACurve:writeECDSACurve};var n=r(13),i=r(66),o=r(19).Buffer,s=r(32),a=r(26),c=r(30),u=r(33),l=r(77);function readMPInt(e,t){return n.strictEqual(e.peek(),i.Ber.Integer,t+" is not an Integer"),a.mpNormalize(e.readString(i.Ber.Integer,!0))}function readECDSACurve(e){var t,r,c,u,l;if(e.peek()===i.Ber.OID){var p=e.readOID();for(r=Object.keys(s.curves),c=0;c<r.length;++c)if(u=r[c],(l=s.curves[u]).pkcs8oid===p){t=u;break}}else{e.readSequence();var d=e.readString(i.Ber.Integer,!0);n.strictEqual(d[0],1,"ECDSA key not version 1");var h={};e.readSequence();var f=e.readOID();n.strictEqual(f,"1.2.840.10045.1.1","ECDSA key is not from a prime-field");var m=h.p=a.mpNormalize(e.readString(i.Ber.Integer,!0));h.size=8*m.length-a.countZeros(m),e.readSequence(),h.a=a.mpNormalize(e.readString(i.Ber.OctetString,!0)),h.b=a.mpNormalize(e.readString(i.Ber.OctetString,!0)),e.peek()===i.Ber.BitString&&(h.s=e.readString(i.Ber.BitString,!0)),h.G=e.readString(i.Ber.OctetString,!0),n.strictEqual(h.G[0],4,"uncompressed G is required"),h.n=a.mpNormalize(e.readString(i.Ber.Integer,!0)),h.h=a.mpNormalize(e.readString(i.Ber.Integer,!0)),n.strictEqual(h.h[0],1,"a cofactor=1 curve is required"),r=Object.keys(s.curves);var g=Object.keys(h);for(c=0;c<r.length;++c){u=r[c],l=s.curves[u];for(var y=!0,v=0;v<g.length;++v){var b=g[v];if(void 0!==l[b])if("object"==typeof l[b]&&void 0!==l[b].equals){if(!l[b].equals(h[b])){y=!1;break}}else if(o.isBuffer(l[b])){if(l[b].toString("binary")!==h[b].toString("binary")){y=!1;break}}else if(l[b]!==h[b]){y=!1;break}}if(y){t=u;break}}}return t}function writeECDSACurve(e,t){var r=s.curves[e.curve];if(r.pkcs8oid)t.writeOID(r.pkcs8oid);else{t.startSequence();var n=o.from([1]);t.writeBuffer(n,i.Ber.Integer),t.startSequence(),t.writeOID("1.2.840.10045.1.1"),t.writeBuffer(r.p,i.Ber.Integer),t.endSequence(),t.startSequence();var a=r.p;0===a[0]&&(a=a.slice(1)),t.writeBuffer(a,i.Ber.OctetString),t.writeBuffer(r.b,i.Ber.OctetString),t.writeBuffer(r.s,i.Ber.BitString),t.endSequence(),t.writeBuffer(r.G,i.Ber.OctetString),t.writeBuffer(r.n,i.Ber.Integer);var c=r.h;c||(c=o.from([1])),t.writeBuffer(c,i.Ber.Integer),t.endSequence()}}},function(e,t,r){e.exports=SSHBuffer;var n=r(13),i=r(19).Buffer;function SSHBuffer(e){n.object(e,"options"),void 0!==e.buffer&&n.buffer(e.buffer,"options.buffer"),this._size=e.buffer?e.buffer.length:1024,this._buffer=e.buffer||i.alloc(this._size),this._offset=0}SSHBuffer.prototype.toBuffer=function(){return this._buffer.slice(0,this._offset)},SSHBuffer.prototype.atEnd=function(){return this._offset>=this._buffer.length},SSHBuffer.prototype.remainder=function(){return this._buffer.slice(this._offset)},SSHBuffer.prototype.skip=function(e){this._offset+=e},SSHBuffer.prototype.expand=function(){this._size*=2;var e=i.alloc(this._size);this._buffer.copy(e,0),this._buffer=e},SSHBuffer.prototype.readPart=function(){return{data:this.readBuffer()}},SSHBuffer.prototype.readBuffer=function(){var e=this._buffer.readUInt32BE(this._offset);this._offset+=4,n.ok(this._offset+e<=this._buffer.length,"length out of bounds at +0x"+this._offset.toString(16)+" (data truncated?)");var t=this._buffer.slice(this._offset,this._offset+e);return this._offset+=e,t},SSHBuffer.prototype.readString=function(){return this.readBuffer().toString()},SSHBuffer.prototype.readCString=function(){for(var e=this._offset;e<this._buffer.length&&0!==this._buffer[e];)e++;n.ok(e<this._buffer.length,"c string does not terminate");var t=this._buffer.slice(this._offset,e).toString();return this._offset=e+1,t},SSHBuffer.prototype.readInt=function(){var e=this._buffer.readUInt32BE(this._offset);return this._offset+=4,e},SSHBuffer.prototype.readInt64=function(){n.ok(this._offset+8<this._buffer.length,"buffer not long enough to read Int64");var e=this._buffer.slice(this._offset,this._offset+8);return this._offset+=8,e},SSHBuffer.prototype.readChar=function(){return this._buffer[this._offset++]},SSHBuffer.prototype.writeBuffer=function(e){for(;this._offset+4+e.length>this._size;)this.expand();this._buffer.writeUInt32BE(e.length,this._offset),this._offset+=4,e.copy(this._buffer,this._offset),this._offset+=e.length},SSHBuffer.prototype.writeString=function(e){this.writeBuffer(i.from(e,"utf8"))},SSHBuffer.prototype.writeCString=function(e){for(;this._offset+1+e.length>this._size;)this.expand();this._buffer.write(e,this._offset),this._offset+=e.length,this._buffer[this._offset++]=0},SSHBuffer.prototype.writeInt=function(e){for(;this._offset+4>this._size;)this.expand();this._buffer.writeUInt32BE(e,this._offset),this._offset+=4},SSHBuffer.prototype.writeInt64=function(e){if(n.buffer(e,"value"),e.length>8){for(var t=e.slice(0,e.length-8),r=0;r<t.length;++r)n.strictEqual(t[r],0,"must fit in 64 bits of precision");e=e.slice(e.length-8,e.length)}for(;this._offset+8>this._size;)this.expand();e.copy(this._buffer,this._offset),this._offset+=8},SSHBuffer.prototype.writeChar=function(e){for(;this._offset+1>this._size;)this.expand();this._buffer[this._offset++]=e},SSHBuffer.prototype.writePart=function(e){this.writeBuffer(e.data)},SSHBuffer.prototype.write=function(e){for(;this._offset+e.length>this._size;)this.expand();e.copy(this._buffer,this._offset),this._offset+=e.length}},function(e,t,r){e.exports=Identity;var n=r(13),i=(r(32),r(12),r(114),r(65),r(64),r(1),r(26)),o=r(66),s=r(19).Buffer,a=/^([*]|[a-z0-9][a-z0-9\-]{0,62})(?:\.([*]|[a-z0-9][a-z0-9\-]{0,62}))*$/i,c={cn:"2.5.4.3",o:"2.5.4.10",ou:"2.5.4.11",l:"2.5.4.7",s:"2.5.4.8",c:"2.5.4.6",sn:"2.5.4.4",postalCode:"2.5.4.17",serialNumber:"2.5.4.5",street:"2.5.4.9",x500UniqueIdentifier:"2.5.4.45",role:"2.5.4.72",telephoneNumber:"2.5.4.20",description:"2.5.4.13",dc:"0.9.2342.19200300.100.1.25",uid:"0.9.2342.19200300.100.1.1",mail:"0.9.2342.19200300.100.1.3",title:"2.5.4.12",gn:"2.5.4.42",initials:"2.5.4.43",pseudonym:"2.5.4.65",emailAddress:"1.2.840.113549.1.9.1"},u={};function Identity(e){var t=this;if(n.object(e,"options"),n.arrayOfObject(e.components,"options.components"),this.components=e.components,this.componentLookup={},this.components.forEach(function(e){e.name&&!e.oid&&(e.oid=c[e.name]),e.oid&&!e.name&&(e.name=u[e.oid]),void 0===t.componentLookup[e.name]&&(t.componentLookup[e.name]=[]),t.componentLookup[e.name].push(e)}),this.componentLookup.cn&&this.componentLookup.cn.length>0&&(this.cn=this.componentLookup.cn[0].value),n.optionalString(e.type,"options.type"),void 0===e.type)1===this.components.length&&this.componentLookup.cn&&1===this.componentLookup.cn.length&&this.componentLookup.cn[0].value.match(a)?(this.type="host",this.hostname=this.componentLookup.cn[0].value):this.componentLookup.dc&&this.components.length===this.componentLookup.dc.length?(this.type="host",this.hostname=this.componentLookup.dc.map(function(e){return e.value}).join(".")):this.componentLookup.uid&&this.components.length===this.componentLookup.uid.length?(this.type="user",this.uid=this.componentLookup.uid[0].value):this.componentLookup.cn&&1===this.componentLookup.cn.length&&this.componentLookup.cn[0].value.match(a)?(this.type="host",this.hostname=this.componentLookup.cn[0].value):this.componentLookup.uid&&1===this.componentLookup.uid.length?(this.type="user",this.uid=this.componentLookup.uid[0].value):this.componentLookup.mail&&1===this.componentLookup.mail.length?(this.type="email",this.email=this.componentLookup.mail[0].value):this.componentLookup.cn&&1===this.componentLookup.cn.length?(this.type="user",this.uid=this.componentLookup.cn[0].value):this.type="unknown";else if(this.type=e.type,"host"===this.type)this.hostname=e.hostname;else if("user"===this.type)this.uid=e.uid;else{if("email"!==this.type)throw new Error("Unknown type "+this.type);this.email=e.email}}Object.keys(c).forEach(function(e){u[c[e]]=e}),Identity.prototype.toString=function(){return this.components.map(function(e){var t=e.name.toUpperCase();t=t.replace(/=/g,"\\=");var r=e.value;return t+"="+(r=r.replace(/,/g,"\\,"))}).join(", ")},Identity.prototype.get=function(e,t){n.string(e,"name");var r=this.componentLookup[e];if(void 0!==r&&0!==r.length){if(!t&&r.length>1)throw new Error("Multiple values for attribute "+e);return t?r.map(function(e){return e.value}):r[0].value}},Identity.prototype.toArray=function(e){return this.components.map(function(e){return{name:e.name,value:e.value}})};var l=/[^a-zA-Z0-9 '(),+.\/:=?-]/,p=/[^\x00-\x7f]/;function globMatch(e,t){if("**"===e||"**"===t)return!0;var r=e.split("."),n=t.split(".");if(r.length!==n.length)return!1;for(var i=0;i<r.length;++i)if("*"!==r[i]&&"*"!==n[i]&&r[i]!==n[i])return!1;return!0}Identity.prototype.toAsn1=function(e,t){e.startSequence(t),this.components.forEach(function(t){if(e.startSequence(o.Ber.Constructor|o.Ber.Set),e.startSequence(),e.writeOID(t.oid),t.asn1type===o.Ber.Utf8String||t.value.match(p)){var r=s.from(t.value,"utf8");e.writeBuffer(r,o.Ber.Utf8String)}else if(t.asn1type===o.Ber.IA5String||t.value.match(l))e.writeString(t.value,o.Ber.IA5String);else{var n=o.Ber.PrintableString;void 0!==t.asn1type&&(n=t.asn1type),e.writeString(t.value,n)}e.endSequence(),e.endSequence()}),e.endSequence()},Identity.prototype.equals=function(e){if(!Identity.isIdentity(e,[1,0]))return!1;if(e.components.length!==this.components.length)return!1;for(var t=0;t<this.components.length;++t){if(this.components[t].oid!==e.components[t].oid)return!1;if(!globMatch(this.components[t].value,e.components[t].value))return!1}return!0},Identity.forHost=function(e){return n.string(e,"hostname"),new Identity({type:"host",hostname:e,components:[{name:"cn",value:e}]})},Identity.forUser=function(e){return n.string(e,"uid"),new Identity({type:"user",uid:e,components:[{name:"uid",value:e}]})},Identity.forEmail=function(e){return n.string(e,"email"),new Identity({type:"email",email:e,components:[{name:"mail",value:e}]})},Identity.parseDN=function(e){n.string(e,"dn");for(var t=[""],r=0,i=e;i.length>0;){var o;if(null!==(o=/^,/.exec(i)))t[++r]="",i=i.slice(o[0].length);else if(null!==(o=/^\\,/.exec(i)))t[r]+=",",i=i.slice(o[0].length);else if(null!==(o=/^\\./.exec(i)))t[r]+=o[0],i=i.slice(o[0].length);else{if(null===(o=/^[^\\,]+/.exec(i)))throw new Error("Failed to parse DN");t[r]+=o[0],i=i.slice(o[0].length)}}return new Identity({components:t.map(function(e){for(var t=(e=e.trim()).indexOf("=");t>0&&"\\"===e.charAt(t-1);)t=e.indexOf("=",t+1);if(-1===t)throw new Error("Failed to parse DN");return{name:e.slice(0,t).toLowerCase().replace(/\\=/g,"="),value:e.slice(t+1)}})})},Identity.fromArray=function(e){return n.arrayOfObject(e,"components"),e.forEach(function(e){if(n.object(e,"component"),n.string(e.name,"component.name"),!s.isBuffer(e.value)&&"string"!=typeof e.value)throw new Error("Invalid component value")}),new Identity({components:e})},Identity.parseAsn1=function(e,t){var r=[];e.readSequence(t);for(var n=e.offset+e.length;e.offset<n;){e.readSequence(o.Ber.Constructor|o.Ber.Set);var i=e.offset+e.length;e.readSequence();var s,a=e.readOID(),c=e.peek();switch(c){case o.Ber.PrintableString:case o.Ber.IA5String:case o.Ber.OctetString:case o.Ber.T61String:s=e.readString(c);break;case o.Ber.Utf8String:s=(s=e.readString(c,!0)).toString("utf8");break;case o.Ber.CharacterString:case o.Ber.BMPString:s=(s=e.readString(c,!0)).toString("utf16le");break;default:throw new Error("Unknown asn1 type "+c)}r.push({oid:a,asn1type:c,value:s}),e._offset=i}return e._offset=n,new Identity({components:r})},Identity.isIdentity=function(e,t){return i.isCompatible(e,Identity,t)},Identity.prototype._sshpkApiVersion=[1,0],Identity._oldVersionDetect=function(e){return[1,0]}},function(e,t){e.exports;e.exports={SharedAccessPermissions:{READ:"r",ADD:"a",CREATE:"c",WRITE:"w",DELETE:"d",LIST:"l"},BlobListingDetails:{SNAPSHOTS:"snapshots",METADATA:"metadata",UNCOMMITTED_BLOBS:"uncommittedblobs",COPY:"copy",DELETED:"deleted"},SnapshotDeleteOptions:{SNAPSHOTS_ONLY:"only",BLOB_AND_SNAPSHOTS:"include"},BlockListFilter:{ALL:"all",COMMITTED:"committed",UNCOMMITTED:"uncommitted"},BlobContainerPublicAccessType:{OFF:null,CONTAINER:"container",BLOB:"blob"},SequenceNumberAction:{MAX:"max",UPDATE:"update",INCREMENT:"increment"},BlobTier:{PremiumPageBlobTier:{P4:"P4",P6:"P6",P10:"P10",P20:"P20",P30:"P30",P40:"P40",P50:"P50",P60:"P60"},StandardBlobTier:{HOT:"Hot",COOL:"Cool",ARCHIVE:"Archive"}}}},function(e,t){e.exports;var r,n={SharedAccessPermissions:{QUERY:"r",ADD:"a",UPDATE:"u",DELETE:"d"},PayloadFormat:{FULL_METADATA:"application/json;odata=fullmetadata",MINIMAL_METADATA:"application/json;odata=minimalmetadata",NO_METADATA:"application/json;odata=nometadata"},TableOperators:{AND:"and",NOT:"not",OR:"or"},QueryComparisons:{EQUAL:"eq",NOT_EQUAL:"ne",GREATER_THAN:"gt",GREATER_THAN_OR_EQUAL:"ge",LESS_THAN:"lt",LESS_THAN_OR_EQUAL:"le"},EdmType:{STRING:"Edm.String",BINARY:"Edm.Binary",INT64:"Edm.Int64",INT32:"Edm.Int32",DOUBLE:"Edm.Double",DATETIME:"Edm.DateTime",GUID:"Edm.Guid",BOOLEAN:"Edm.Boolean"},entityGenerator:(r=function(e,t){var r={_:e};return t&&(r.$=t),r},{EntityProperty:r,Int32:function(e){return new r(e,"Edm.Int32")},Int64:function(e){return new r(e,"Edm.Int64")},Binary:function(e){return new r(e,"Edm.Binary")},Boolean:function(e){return new r(e,"Edm.Boolean")},String:function(e){return new r(e,"Edm.String")},Guid:function(e){return new r(e,"Edm.Guid")},Double:function(e){return new r(e,"Edm.Double")},DateTime:function(e){return new r(e,"Edm.DateTime")}})};e.exports=n},function(e,t,r){"use strict";var n=r(94),i=r(93),o={},s={};function define_frame(e,t){var r=n.define_composite(t);o[t.name]=r.create,s[Number(r.descriptor.numeric).toString(10)]=r,s[r.descriptor.symbolic]=r}o.read_header=function(e){var t=4,r={},n=e.toString("ascii",0,t);if("AMQP"!==n)throw new i.ProtocolError("Invalid protocol header for AMQP "+n);if(r.protocol_id=e.readUInt8(t++),r.major=e.readUInt8(t++),r.minor=e.readUInt8(t++),r.revision=e.readUInt8(t++),0===r.protocol_id&&0===r.major&&9===r.minor&&1===r.revision)throw new i.ProtocolError("Unsupported AMQP version: 0-9-1");if(1===r.protocol_id&&1===r.major&&0===r.minor&&10===r.revision)throw new i.ProtocolError("Unsupported AMQP version: 0-10");if(1!==r.major||0!==r.minor)throw new i.ProtocolError("Unsupported AMQP version: "+JSON.stringify(r));return r},o.write_header=function(e,t){var r=4;return e.write("AMQP",0,r,"ascii"),e.writeUInt8(t.protocol_id,r++),e.writeUInt8(t.major,r++),e.writeUInt8(t.minor,r++),e.writeUInt8(t.revision,r++),8},o.TYPE_AMQP=0,o.TYPE_SASL=1,o.read_frame=function(e){var t=new n.Reader(e),r={};if(r.size=t.read_uint(4),t.remaining<r.size)return null;var a=t.read_uint(1);if(a<2)throw new i.ProtocolError("Invalid data offset, must be at least 2 was "+a);if(r.type=t.read_uint(1),r.type===o.TYPE_AMQP)r.channel=t.read_uint(2);else{if(r.type!==o.TYPE_SASL)throw new i.ProtocolError("Unknown frame type "+r.type);t.skip(2)}if(a>1&&t.skip(4*a-8),t.remaining()){r.performative=t.read();var c=s[r.performative.descriptor.value];c&&(r.performative=new c(r.performative.value)),t.remaining()&&(r.payload=t.read_bytes(t.remaining()))}return r},o.write_frame=function(e){var t=new n.Writer;if(t.skip(4),t.write_uint(2,1),t.write_uint(e.type,1),e.type===o.TYPE_AMQP)t.write_uint(e.channel,2);else{if(e.type!==o.TYPE_SASL)throw new i.ProtocolError("Unknown frame type "+e.type);t.write_uint(0,2)}e.performative&&(t.write(e.performative),e.payload&&t.write_bytes(e.payload));var r=t.toBuffer();return r.writeUInt32BE(r.length,0),r},o.amqp_frame=function(e,t,r){return{channel:e||0,type:o.TYPE_AMQP,performative:t,payload:r}},o.sasl_frame=function(e){return{channel:0,type:o.TYPE_SASL,performative:e}};define_frame(o.TYPE_AMQP,{name:"open",code:16,fields:[{name:"container_id",type:"string",mandatory:!0},{name:"hostname",type:"string"},{name:"max_frame_size",type:"uint",default_value:4294967295},{name:"channel_max",type:"ushort",default_value:65535},{name:"idle_time_out",type:"uint"},{name:"outgoing_locales",type:"symbol",multiple:!0},{name:"incoming_locales",type:"symbol",multiple:!0},{name:"offered_capabilities",type:"symbol",multiple:!0},{name:"desired_capabilities",type:"symbol",multiple:!0},{name:"properties",type:"symbolic_map"}]}),define_frame(o.TYPE_AMQP,{name:"begin",code:17,fields:[{name:"remote_channel",type:"ushort"},{name:"next_outgoing_id",type:"uint",mandatory:!0},{name:"incoming_window",type:"uint",mandatory:!0},{name:"outgoing_window",type:"uint",mandatory:!0},{name:"handle_max",type:"uint",default_value:"4294967295"},{name:"offered_capabilities",type:"symbol",multiple:!0},{name:"desired_capabilities",type:"symbol",multiple:!0},{name:"properties",type:"symbolic_map"}]}),define_frame(o.TYPE_AMQP,{name:"attach",code:18,fields:[{name:"name",type:"string",mandatory:!0},{name:"handle",type:"uint",mandatory:!0},{name:"role",type:"boolean",mandatory:!0},{name:"snd_settle_mode",type:"ubyte",default_value:2},{name:"rcv_settle_mode",type:"ubyte",default_value:0},{name:"source",type:"*"},{name:"target",type:"*"},{name:"unsettled",type:"map"},{name:"incomplete_unsettled",type:"boolean",default_value:!1},{name:"initial_delivery_count",type:"uint"},{name:"max_message_size",type:"ulong"},{name:"offered_capabilities",type:"symbol",multiple:!0},{name:"desired_capabilities",type:"symbol",multiple:!0},{name:"properties",type:"symbolic_map"}]}),define_frame(o.TYPE_AMQP,{name:"flow",code:19,fields:[{name:"next_incoming_id",type:"uint"},{name:"incoming_window",type:"uint",mandatory:!0},{name:"next_outgoing_id",type:"uint",mandatory:!0},{name:"outgoing_window",type:"uint",mandatory:!0},{name:"handle",type:"uint"},{name:"delivery_count",type:"uint"},{name:"link_credit",type:"uint"},{name:"available",type:"uint"},{name:"drain",type:"boolean",default_value:!1},{name:"echo",type:"boolean",default_value:!1},{name:"properties",type:"symbolic_map"}]}),define_frame(o.TYPE_AMQP,{name:"transfer",code:20,fields:[{name:"handle",type:"uint",mandatory:!0},{name:"delivery_id",type:"uint"},{name:"delivery_tag",type:"binary"},{name:"message_format",type:"uint"},{name:"settled",type:"boolean"},{name:"more",type:"boolean",default_value:!1},{name:"rcv_settle_mode",type:"ubyte"},{name:"state",type:"delivery_state"},{name:"resume",type:"boolean",default_value:!1},{name:"aborted",type:"boolean",default_value:!1},{name:"batchable",type:"boolean",default_value:!1}]}),define_frame(o.TYPE_AMQP,{name:"disposition",code:21,fields:[{name:"role",type:"boolean",mandatory:!0},{name:"first",type:"uint",mandatory:!0},{name:"last",type:"uint"},{name:"settled",type:"boolean",default_value:!1},{name:"state",type:"*"},{name:"batchable",type:"boolean",default_value:!1}]}),define_frame(o.TYPE_AMQP,{name:"detach",code:22,fields:[{name:"handle",type:"uint",mandatory:!0},{name:"closed",type:"boolean",default_value:!1},{name:"error",type:"error"}]}),define_frame(o.TYPE_AMQP,{name:"end",code:23,fields:[{name:"error",type:"error"}]}),define_frame(o.TYPE_AMQP,{name:"close",code:24,fields:[{name:"error",type:"error"}]});define_frame(o.TYPE_SASL,{name:"sasl_mechanisms",code:64,fields:[{name:"sasl_server_mechanisms",type:"symbol",multiple:!0,mandatory:!0}]}),define_frame(o.TYPE_SASL,{name:"sasl_init",code:65,fields:[{name:"mechanism",type:"symbol",mandatory:!0},{name:"initial_response",type:"binary"},{name:"hostname",type:"string"}]}),define_frame(o.TYPE_SASL,{name:"sasl_challenge",code:66,fields:[{name:"challenge",type:"binary",mandatory:!0}]}),define_frame(o.TYPE_SASL,{name:"sasl_response",code:67,fields:[{name:"response",type:"binary",mandatory:!0}]}),define_frame(o.TYPE_SASL,{name:"sasl_outcome",code:68,fields:[{name:"code",type:"ubyte",mandatory:!0},{name:"additional_data",type:"binary"}]}),e.exports=o},function(e,t,r){(function(e){(function(t){"use strict";function slice(e,t){t|=0;for(var r=Math.max(e.length-t,0),n=Array(r),i=0;i<r;i++)n[i]=e[t+i];return n}var r=function(e){var t=slice(arguments,1);return function(){var r=slice(arguments);return e.apply(null,t.concat(r))}},n=function(e){return function(){var t=slice(arguments),r=t.pop();e.call(this,t,r)}};function isObject(e){var t=typeof e;return null!=e&&("object"==t||"function"==t)}var i="function"==typeof setImmediate&&setImmediate,o="object"==typeof process&&"function"==typeof process.nextTick;function fallback(e){setTimeout(e,0)}function wrap(e){return function(t){var r=slice(arguments,1);e(function(){t.apply(null,r)})}}var s=wrap(i?setImmediate:o?process.nextTick:fallback);function asyncify(e){return n(function(t,r){var n;try{n=e.apply(this,t)}catch(e){return r(e)}isObject(n)&&"function"==typeof n.then?n.then(function(e){invokeCallback(r,null,e)},function(e){invokeCallback(r,e.message?e:new Error(e))}):r(null,n)})}function invokeCallback(e,t,r){try{e(t,r)}catch(e){s(rethrow,e)}}function rethrow(e){throw e}var a="function"==typeof Symbol;function isAsync(e){return a&&"AsyncFunction"===e[Symbol.toStringTag]}function wrapAsync(e){return isAsync(e)?asyncify(e):e}function applyEach$1(e){return function(t){var r=slice(arguments,1),i=n(function(r,n){var i=this;return e(t,function(e,t){wrapAsync(e).apply(i,r.concat(t))},n)});return r.length?i.apply(this,r):i}}var c="object"==typeof global&&global&&global.Object===Object&&global,u="object"==typeof self&&self&&self.Object===Object&&self,l=c||u||Function("return this")(),p=l.Symbol,d=Object.prototype,h=d.hasOwnProperty,f=d.toString,m=p?p.toStringTag:void 0,g=Object.prototype.toString,y="[object Null]",v="[object Undefined]",b=p?p.toStringTag:void 0;function baseGetTag(e){return null==e?void 0===e?v:y:b&&b in Object(e)?function getRawTag(e){var t=h.call(e,m),r=e[m];try{e[m]=void 0;var n=!0}catch(e){}var i=f.call(e);return n&&(t?e[m]=r:delete e[m]),i}(e):function objectToString(e){return g.call(e)}(e)}var _="[object AsyncFunction]",w="[object Function]",E="[object GeneratorFunction]",S="[object Proxy]",C=9007199254740991;function isLength(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=C}function isArrayLike(e){return null!=e&&isLength(e.length)&&!function isFunction(e){if(!isObject(e))return!1;var t=baseGetTag(e);return t==w||t==E||t==_||t==S}(e)}var x={};function noop(){}function once(e){return function(){if(null!==e){var t=e;e=null,t.apply(this,arguments)}}}var k="function"==typeof Symbol&&Symbol.iterator,R=function(e){return k&&e[k]&&e[k]()};function isObjectLike(e){return null!=e&&"object"==typeof e}var T="[object Arguments]";function baseIsArguments(e){return isObjectLike(e)&&baseGetTag(e)==T}var O=Object.prototype,I=O.hasOwnProperty,N=O.propertyIsEnumerable,A=baseIsArguments(function(){return arguments}())?baseIsArguments:function(e){return isObjectLike(e)&&I.call(e,"callee")&&!N.call(e,"callee")},P=Array.isArray,L="object"==typeof t&&t&&!t.nodeType&&t,D=L&&"object"==typeof e&&e&&!e.nodeType&&e,M=D&&D.exports===L?l.Buffer:void 0,j=(M?M.isBuffer:void 0)||function stubFalse(){return!1},q=9007199254740991,F=/^(?:0|[1-9]\d*)$/;function isIndex(e,t){return!!(t=null==t?q:t)&&("number"==typeof e||F.test(e))&&e>-1&&e%1==0&&e<t}var z={};z["[object Float32Array]"]=z["[object Float64Array]"]=z["[object Int8Array]"]=z["[object Int16Array]"]=z["[object Int32Array]"]=z["[object Uint8Array]"]=z["[object Uint8ClampedArray]"]=z["[object Uint16Array]"]=z["[object Uint32Array]"]=!0,z["[object Arguments]"]=z["[object Array]"]=z["[object ArrayBuffer]"]=z["[object Boolean]"]=z["[object DataView]"]=z["[object Date]"]=z["[object Error]"]=z["[object Function]"]=z["[object Map]"]=z["[object Number]"]=z["[object Object]"]=z["[object RegExp]"]=z["[object Set]"]=z["[object String]"]=z["[object WeakMap]"]=!1;var U="object"==typeof t&&t&&!t.nodeType&&t,B=U&&"object"==typeof e&&e&&!e.nodeType&&e,H=B&&B.exports===U&&c.process,$=function(){try{return H&&H.binding&&H.binding("util")}catch(e){}}(),V=$&&$.isTypedArray,G=V?function baseUnary(e){return function(t){return e(t)}}(V):function baseIsTypedArray(e){return isObjectLike(e)&&isLength(e.length)&&!!z[baseGetTag(e)]},W=Object.prototype.hasOwnProperty;function arrayLikeKeys(e,t){var r=P(e),n=!r&&A(e),i=!r&&!n&&j(e),o=!r&&!n&&!i&&G(e),s=r||n||i||o,a=s?function baseTimes(e,t){for(var r=-1,n=Array(e);++r<e;)n[r]=t(r);return n}(e.length,String):[],c=a.length;for(var u in e)!t&&!W.call(e,u)||s&&("length"==u||i&&("offset"==u||"parent"==u)||o&&("buffer"==u||"byteLength"==u||"byteOffset"==u)||isIndex(u,c))||a.push(u);return a}var J=Object.prototype,X=function overArg(e,t){return function(r){return e(t(r))}}(Object.keys,Object),Y=Object.prototype.hasOwnProperty;function baseKeys(e){if(!function isPrototype(e){var t=e&&e.constructor;return e===("function"==typeof t&&t.prototype||J)}(e))return X(e);var t=[];for(var r in Object(e))Y.call(e,r)&&"constructor"!=r&&t.push(r);return t}function keys(e){return isArrayLike(e)?arrayLikeKeys(e):baseKeys(e)}function iterator(e){if(isArrayLike(e))return function createArrayIterator(e){var t=-1,r=e.length;return function next(){return++t<r?{value:e[t],key:t}:null}}(e);var t=R(e);return t?function createES2015Iterator(e){var t=-1;return function next(){var r=e.next();return r.done?null:(t++,{value:r.value,key:t})}}(t):function createObjectIterator(e){var t=keys(e),r=-1,n=t.length;return function next(){var i=t[++r];return r<n?{value:e[i],key:i}:null}}(e)}function onlyOnce(e){return function(){if(null===e)throw new Error("Callback was already called.");var t=e;e=null,t.apply(this,arguments)}}function _eachOfLimit(e){return function(t,r,n){if(n=once(n||noop),e<=0||!t)return n(null);var i=iterator(t),o=!1,s=0;function iterateeCallback(e,t){if(s-=1,e)o=!0,n(e);else{if(t===x||o&&s<=0)return o=!0,n(null);replenish()}}function replenish(){for(;s<e&&!o;){var t=i();if(null===t)return o=!0,void(s<=0&&n(null));s+=1,r(t.value,t.key,onlyOnce(iterateeCallback))}}replenish()}}function eachOfLimit(e,t,r,n){_eachOfLimit(t)(e,wrapAsync(r),n)}function doLimit(e,t){return function(r,n,i){return e(r,t,n,i)}}function eachOfArrayLike(e,t,r){r=once(r||noop);var n=0,i=0,o=e.length;function iteratorCallback(e,t){e?r(e):++i!==o&&t!==x||r(null)}for(0===o&&r(null);n<o;n++)t(e[n],n,onlyOnce(iteratorCallback))}var K=doLimit(eachOfLimit,1/0),Q=function(e,t,r){(isArrayLike(e)?eachOfArrayLike:K)(e,wrapAsync(t),r)};function doParallel(e){return function(t,r,n){return e(Q,t,wrapAsync(r),n)}}function _asyncMap(e,t,r,n){n=n||noop,t=t||[];var i=[],o=0,s=wrapAsync(r);e(t,function(e,t,r){var n=o++;s(e,function(e,t){i[n]=t,r(e)})},function(e){n(e,i)})}var Z=doParallel(_asyncMap),ee=applyEach$1(Z);function doParallelLimit(e){return function(t,r,n,i){return e(_eachOfLimit(r),t,wrapAsync(n),i)}}var te=doParallelLimit(_asyncMap),re=doLimit(te,1),ne=applyEach$1(re);function arrayEach(e,t){for(var r=-1,n=null==e?0:e.length;++r<n&&!1!==t(e[r],r,e););return e}var ie=function createBaseFor(e){return function(t,r,n){for(var i=-1,o=Object(t),s=n(t),a=s.length;a--;){var c=s[e?a:++i];if(!1===r(o[c],c,o))break}return t}}();function baseForOwn(e,t){return e&&ie(e,t,keys)}function baseIsNaN(e){return e!=e}function baseIndexOf(e,t,r){return t==t?function strictIndexOf(e,t,r){for(var n=r-1,i=e.length;++n<i;)if(e[n]===t)return n;return-1}(e,t,r):function baseFindIndex(e,t,r,n){for(var i=e.length,o=r+(n?1:-1);n?o--:++o<i;)if(t(e[o],o,e))return o;return-1}(e,baseIsNaN,r)}var oe=function(e,t,r){"function"==typeof t&&(r=t,t=null),r=once(r||noop);var n=keys(e).length;if(!n)return r(null);t||(t=n);var i={},o=0,s=!1,a=Object.create(null),c=[],u=[],l={};function enqueueTask(e,t){c.push(function(){!function runTask(e,t){if(s)return;var n=onlyOnce(function(t,n){if(o--,arguments.length>2&&(n=slice(arguments,1)),t){var c={};baseForOwn(i,function(e,t){c[t]=e}),c[e]=n,s=!0,a=Object.create(null),r(t,c)}else i[e]=n,function taskComplete(e){arrayEach(a[e]||[],function(e){e()}),processQueue()}(e)});o++;var c=wrapAsync(t[t.length-1]);t.length>1?c(i,n):c(n)}(e,t)})}function processQueue(){if(0===c.length&&0===o)return r(null,i);for(;c.length&&o<t;){c.shift()()}}function getDependents(t){var r=[];return baseForOwn(e,function(e,n){P(e)&&baseIndexOf(e,t,0)>=0&&r.push(n)}),r}baseForOwn(e,function(t,r){if(!P(t))return enqueueTask(r,[t]),void u.push(r);var n=t.slice(0,t.length-1),i=n.length;if(0===i)return enqueueTask(r,t),void u.push(r);l[r]=i,arrayEach(n,function(o){if(!e[o])throw new Error("async.auto task `"+r+"` has a non-existent dependency `"+o+"` in "+n.join(", "));!function addListener(e,t){var r=a[e];r||(r=a[e]=[]);r.push(t)}(o,function(){0===--i&&enqueueTask(r,t)})})}),function checkForDeadlocks(){var e,t=0;for(;u.length;)e=u.pop(),t++,arrayEach(getDependents(e),function(e){0==--l[e]&&u.push(e)});if(t!==n)throw new Error("async.auto cannot execute tasks due to a recursive dependency")}(),processQueue()};function arrayMap(e,t){for(var r=-1,n=null==e?0:e.length,i=Array(n);++r<n;)i[r]=t(e[r],r,e);return i}var se="[object Symbol]",ae=1/0,ce=p?p.prototype:void 0,ue=ce?ce.toString:void 0;function baseToString(e){if("string"==typeof e)return e;if(P(e))return arrayMap(e,baseToString)+"";if(function isSymbol(e){return"symbol"==typeof e||isObjectLike(e)&&baseGetTag(e)==se}(e))return ue?ue.call(e):"";var t=e+"";return"0"==t&&1/e==-ae?"-0":t}function castSlice(e,t,r){var n=e.length;return r=void 0===r?n:r,!t&&r>=n?e:function baseSlice(e,t,r){var n=-1,i=e.length;t<0&&(t=-t>i?0:i+t),(r=r>i?i:r)<0&&(r+=i),i=t>r?0:r-t>>>0,t>>>=0;for(var o=Array(i);++n<i;)o[n]=e[n+t];return o}(e,t,r)}var le=RegExp("[\\u200d\\ud800-\\udfff\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff\\ufe0e\\ufe0f]"),pe="[\\ud800-\\udfff]",de="[\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff]",he="\\ud83c[\\udffb-\\udfff]",fe="[^\\ud800-\\udfff]",me="(?:\\ud83c[\\udde6-\\uddff]){2}",ge="[\\ud800-\\udbff][\\udc00-\\udfff]",ye="(?:"+de+"|"+he+")"+"?",ve="[\\ufe0e\\ufe0f]?"+ye+("(?:\\u200d(?:"+[fe,me,ge].join("|")+")[\\ufe0e\\ufe0f]?"+ye+")*"),be="(?:"+[fe+de+"?",de,me,ge,pe].join("|")+")",_e=RegExp(he+"(?="+he+")|"+be+ve,"g");function stringToArray(e){return function hasUnicode(e){return le.test(e)}(e)?function unicodeToArray(e){return e.match(_e)||[]}(e):function asciiToArray(e){return e.split("")}(e)}var we=/^\s+|\s+$/g;function trim(e,t,r){if((e=function toString(e){return null==e?"":baseToString(e)}(e))&&(r||void 0===t))return e.replace(we,"");if(!e||!(t=baseToString(t)))return e;var n=stringToArray(e),i=stringToArray(t);return castSlice(n,function charsStartIndex(e,t){for(var r=-1,n=e.length;++r<n&&baseIndexOf(t,e[r],0)>-1;);return r}(n,i),function charsEndIndex(e,t){for(var r=e.length;r--&&baseIndexOf(t,e[r],0)>-1;);return r}(n,i)+1).join("")}var Ee=/^(?:async\s+)?(function)?\s*[^\(]*\(\s*([^\)]*)\)/m,Se=/,/,Ce=/(=.+)?(\s*)$/,xe=/((\/\/.*$)|(\/\*[\s\S]*?\*\/))/gm;function autoInject(e,t){var r={};baseForOwn(e,function(e,t){var n,i=isAsync(e),o=!i&&1===e.length||i&&0===e.length;if(P(e))n=e.slice(0,-1),e=e[e.length-1],r[t]=n.concat(n.length>0?newTask:e);else if(o)r[t]=e;else{if(n=function parseParams(e){return e=(e=(e=(e=e.toString().replace(xe,"")).match(Ee)[2].replace(" ",""))?e.split(Se):[]).map(function(e){return trim(e.replace(Ce,""))})}(e),0===e.length&&!i&&0===n.length)throw new Error("autoInject task functions require explicit parameters.");i||n.pop(),r[t]=n.concat(newTask)}function newTask(t,r){var i=arrayMap(n,function(e){return t[e]});i.push(r),wrapAsync(e).apply(null,i)}}),oe(r,t)}function DLL(){this.head=this.tail=null,this.length=0}function setInitial(e,t){e.length=1,e.head=e.tail=t}function queue(e,t,r){if(null==t)t=1;else if(0===t)throw new Error("Concurrency must not be zero");var n=wrapAsync(e),i=0,o=[],a=!1;function _insert(e,t,r){if(null!=r&&"function"!=typeof r)throw new Error("task callback must be a function");if(u.started=!0,P(e)||(e=[e]),0===e.length&&u.idle())return s(function(){u.drain()});for(var n=0,i=e.length;n<i;n++){var o={data:e[n],callback:r||noop};t?u._tasks.unshift(o):u._tasks.push(o)}a||(a=!0,s(function(){a=!1,u.process()}))}function _next(e){return function(t){i-=1;for(var r=0,n=e.length;r<n;r++){var s=e[r],a=baseIndexOf(o,s,0);0===a?o.shift():a>0&&o.splice(a,1),s.callback.apply(s,arguments),null!=t&&u.error(t,s.data)}i<=u.concurrency-u.buffer&&u.unsaturated(),u.idle()&&u.drain(),u.process()}}var c=!1,u={_tasks:new DLL,concurrency:t,payload:r,saturated:noop,unsaturated:noop,buffer:t/4,empty:noop,drain:noop,error:noop,started:!1,paused:!1,push:function(e,t){_insert(e,!1,t)},kill:function(){u.drain=noop,u._tasks.empty()},unshift:function(e,t){_insert(e,!0,t)},remove:function(e){u._tasks.remove(e)},process:function(){if(!c){for(c=!0;!u.paused&&i<u.concurrency&&u._tasks.length;){var e=[],t=[],r=u._tasks.length;u.payload&&(r=Math.min(r,u.payload));for(var s=0;s<r;s++){var a=u._tasks.shift();e.push(a),o.push(a),t.push(a.data)}i+=1,0===u._tasks.length&&u.empty(),i===u.concurrency&&u.saturated();var l=onlyOnce(_next(e));n(t,l)}c=!1}},length:function(){return u._tasks.length},running:function(){return i},workersList:function(){return o},idle:function(){return u._tasks.length+i===0},pause:function(){u.paused=!0},resume:function(){!1!==u.paused&&(u.paused=!1,s(u.process))}};return u}function cargo(e,t){return queue(e,1,t)}DLL.prototype.removeLink=function(e){return e.prev?e.prev.next=e.next:this.head=e.next,e.next?e.next.prev=e.prev:this.tail=e.prev,e.prev=e.next=null,this.length-=1,e},DLL.prototype.empty=function(){for(;this.head;)this.shift();return this},DLL.prototype.insertAfter=function(e,t){t.prev=e,t.next=e.next,e.next?e.next.prev=t:this.tail=t,e.next=t,this.length+=1},DLL.prototype.insertBefore=function(e,t){t.prev=e.prev,t.next=e,e.prev?e.prev.next=t:this.head=t,e.prev=t,this.length+=1},DLL.prototype.unshift=function(e){this.head?this.insertBefore(this.head,e):setInitial(this,e)},DLL.prototype.push=function(e){this.tail?this.insertAfter(this.tail,e):setInitial(this,e)},DLL.prototype.shift=function(){return this.head&&this.removeLink(this.head)},DLL.prototype.pop=function(){return this.tail&&this.removeLink(this.tail)},DLL.prototype.toArray=function(){for(var e=Array(this.length),t=this.head,r=0;r<this.length;r++)e[r]=t.data,t=t.next;return e},DLL.prototype.remove=function(e){for(var t=this.head;t;){var r=t.next;e(t)&&this.removeLink(t),t=r}return this};var ke=doLimit(eachOfLimit,1);function reduce(e,t,r,n){n=once(n||noop);var i=wrapAsync(r);ke(e,function(e,r,n){i(t,e,function(e,r){t=r,n(e)})},function(e){n(e,t)})}function seq(){var e=arrayMap(arguments,wrapAsync);return function(){var t=slice(arguments),r=this,n=t[t.length-1];"function"==typeof n?t.pop():n=noop,reduce(e,t,function(e,t,n){t.apply(r,e.concat(function(e){var t=slice(arguments,1);n(e,t)}))},function(e,t){n.apply(r,[e].concat(t))})}}var Re=function(){return seq.apply(null,slice(arguments).reverse())},Te=Array.prototype.concat,Oe=function(e,t,r,n){n=n||noop;var i=wrapAsync(r);te(e,t,function(e,t){i(e,function(e){return e?t(e):t(null,slice(arguments,1))})},function(e,t){for(var r=[],i=0;i<t.length;i++)t[i]&&(r=Te.apply(r,t[i]));return n(e,r)})},Ie=doLimit(Oe,1/0),Ne=doLimit(Oe,1),Ae=function(){var e=slice(arguments),t=[null].concat(e);return function(){return arguments[arguments.length-1].apply(this,t)}};function identity(e){return e}function _createTester(e,t){return function(r,n,i,o){o=o||noop;var s,a=!1;r(n,function(r,n,o){i(r,function(n,i){n?o(n):e(i)&&!s?(a=!0,s=t(!0,r),o(null,x)):o()})},function(e){e?o(e):o(null,a?s:t(!1))})}}function _findGetResult(e,t){return t}var Pe=doParallel(_createTester(identity,_findGetResult)),Le=doParallelLimit(_createTester(identity,_findGetResult)),De=doLimit(Le,1);function consoleFunc(e){return function(t){var r=slice(arguments,1);r.push(function(t){var r=slice(arguments,1);"object"==typeof console&&(t?console.error&&console.error(t):console[e]&&arrayEach(r,function(t){console[e](t)}))}),wrapAsync(t).apply(null,r)}}var Me=consoleFunc("dir");function doDuring(e,t,r){r=onlyOnce(r||noop);var n=wrapAsync(e),i=wrapAsync(t);function next(e){if(e)return r(e);var t=slice(arguments,1);t.push(check),i.apply(this,t)}function check(e,t){return e?r(e):t?void n(next):r(null)}check(null,!0)}function doWhilst(e,t,r){r=onlyOnce(r||noop);var n=wrapAsync(e),i=function(e){if(e)return r(e);var o=slice(arguments,1);if(t.apply(this,o))return n(i);r.apply(null,[null].concat(o))};n(i)}function doUntil(e,t,r){doWhilst(e,function(){return!t.apply(this,arguments)},r)}function during(e,t,r){r=onlyOnce(r||noop);var n=wrapAsync(t),i=wrapAsync(e);function next(e){if(e)return r(e);i(check)}function check(e,t){return e?r(e):t?void n(next):r(null)}i(check)}function _withoutIndex(e){return function(t,r,n){return e(t,n)}}function eachLimit(e,t,r){Q(e,_withoutIndex(wrapAsync(t)),r)}function eachLimit$1(e,t,r,n){_eachOfLimit(t)(e,_withoutIndex(wrapAsync(r)),n)}var je=doLimit(eachLimit$1,1);function ensureAsync(e){return isAsync(e)?e:n(function(t,r){var n=!0;t.push(function(){var e=arguments;n?s(function(){r.apply(null,e)}):r.apply(null,e)}),e.apply(this,t),n=!1})}function notId(e){return!e}var qe=doParallel(_createTester(notId,notId)),Fe=doParallelLimit(_createTester(notId,notId)),ze=doLimit(Fe,1);function baseProperty(e){return function(t){return null==t?void 0:t[e]}}function filterArray(e,t,r,n){var i=new Array(t.length);e(t,function(e,t,n){r(e,function(e,r){i[t]=!!r,n(e)})},function(e){if(e)return n(e);for(var r=[],o=0;o<t.length;o++)i[o]&&r.push(t[o]);n(null,r)})}function filterGeneric(e,t,r,n){var i=[];e(t,function(e,t,n){r(e,function(r,o){r?n(r):(o&&i.push({index:t,value:e}),n())})},function(e){e?n(e):n(null,arrayMap(i.sort(function(e,t){return e.index-t.index}),baseProperty("value")))})}function _filter(e,t,r,n){(isArrayLike(t)?filterArray:filterGeneric)(e,t,wrapAsync(r),n||noop)}var Ue=doParallel(_filter),Be=doParallelLimit(_filter),He=doLimit(Be,1);function forever(e,t){var r=onlyOnce(t||noop),n=wrapAsync(ensureAsync(e));!function next(e){if(e)return r(e);n(next)}()}var $e=function(e,t,r,n){n=n||noop;var i=wrapAsync(r);te(e,t,function(e,t){i(e,function(r,n){return r?t(r):t(null,{key:n,val:e})})},function(e,t){for(var r={},i=Object.prototype.hasOwnProperty,o=0;o<t.length;o++)if(t[o]){var s=t[o].key,a=t[o].val;i.call(r,s)?r[s].push(a):r[s]=[a]}return n(e,r)})},Ve=doLimit($e,1/0),Ge=doLimit($e,1),We=consoleFunc("log");function mapValuesLimit(e,t,r,n){n=once(n||noop);var i={},o=wrapAsync(r);eachOfLimit(e,t,function(e,t,r){o(e,t,function(e,n){if(e)return r(e);i[t]=n,r()})},function(e){n(e,i)})}var Je=doLimit(mapValuesLimit,1/0),Xe=doLimit(mapValuesLimit,1);function has(e,t){return t in e}function memoize(e,t){var r=Object.create(null),i=Object.create(null);t=t||identity;var o=wrapAsync(e),a=n(function memoized(e,n){var a=t.apply(null,e);has(r,a)?s(function(){n.apply(null,r[a])}):has(i,a)?i[a].push(n):(i[a]=[n],o.apply(null,e.concat(function(){var e=slice(arguments);r[a]=e;var t=i[a];delete i[a];for(var n=0,o=t.length;n<o;n++)t[n].apply(null,e)})))});return a.memo=r,a.unmemoized=e,a}var Ye=wrap(o?process.nextTick:i?setImmediate:fallback);function _parallel(e,t,r){r=r||noop;var n=isArrayLike(t)?[]:{};e(t,function(e,t,r){wrapAsync(e)(function(e,i){arguments.length>2&&(i=slice(arguments,1)),n[t]=i,r(e)})},function(e){r(e,n)})}function parallelLimit(e,t){_parallel(Q,e,t)}function parallelLimit$1(e,t,r){_parallel(_eachOfLimit(t),e,r)}var Ke=function(e,t){var r=wrapAsync(e);return queue(function(e,t){r(e[0],t)},t,1)},Qe=function(e,t){var r=Ke(e,t);return r.push=function(e,t,n){if(null==n&&(n=noop),"function"!=typeof n)throw new Error("task callback must be a function");if(r.started=!0,P(e)||(e=[e]),0===e.length)return s(function(){r.drain()});t=t||0;for(var i=r._tasks.head;i&&t>=i.priority;)i=i.next;for(var o=0,a=e.length;o<a;o++){var c={data:e[o],priority:t,callback:n};i?r._tasks.insertBefore(i,c):r._tasks.push(c)}s(r.process)},delete r.unshift,r};function race(e,t){if(t=once(t||noop),!P(e))return t(new TypeError("First argument to race must be an array of functions"));if(!e.length)return t();for(var r=0,n=e.length;r<n;r++)wrapAsync(e[r])(t)}function reduceRight(e,t,r,n){reduce(slice(e).reverse(),t,r,n)}function reflect(e){var t=wrapAsync(e);return n(function reflectOn(e,r){return e.push(function callback(e,t){var n;e?r(null,{error:e}):(n=arguments.length<=2?t:slice(arguments,1),r(null,{value:n}))}),t.apply(this,e)})}function reflectAll(e){var t;return P(e)?t=arrayMap(e,reflect):(t={},baseForOwn(e,function(e,r){t[r]=reflect.call(this,e)})),t}function reject$1(e,t,r,n){_filter(e,t,function(e,t){r(e,function(e,r){t(e,!r)})},n)}var Ze=doParallel(reject$1),et=doParallelLimit(reject$1),tt=doLimit(et,1);function constant$1(e){return function(){return e}}function retry(e,t,r){var n=5,i=0,o={times:n,intervalFunc:constant$1(i)};if(arguments.length<3&&"function"==typeof e?(r=t||noop,t=e):(!function parseTimes(e,t){if("object"==typeof t)e.times=+t.times||n,e.intervalFunc="function"==typeof t.interval?t.interval:constant$1(+t.interval||i),e.errorFilter=t.errorFilter;else{if("number"!=typeof t&&"string"!=typeof t)throw new Error("Invalid arguments for async.retry");e.times=+t||n}}(o,e),r=r||noop),"function"!=typeof t)throw new Error("Invalid arguments for async.retry");var s=wrapAsync(t),a=1;!function retryAttempt(){s(function(e){e&&a++<o.times&&("function"!=typeof o.errorFilter||o.errorFilter(e))?setTimeout(retryAttempt,o.intervalFunc(a)):r.apply(null,arguments)})}()}var rt=function(e,t){t||(t=e,e=null);var r=wrapAsync(t);return n(function(t,n){function taskFn(e){r.apply(null,t.concat(e))}e?retry(e,taskFn,n):retry(taskFn,n)})};function series(e,t){_parallel(ke,e,t)}var nt=doParallel(_createTester(Boolean,identity)),it=doParallelLimit(_createTester(Boolean,identity)),ot=doLimit(it,1);function sortBy(e,t,r){var n=wrapAsync(t);function comparator(e,t){var r=e.criteria,n=t.criteria;return r<n?-1:r>n?1:0}Z(e,function(e,t){n(e,function(r,n){if(r)return t(r);t(null,{value:e,criteria:n})})},function(e,t){if(e)return r(e);r(null,arrayMap(t.sort(comparator),baseProperty("value")))})}function timeout(e,t,r){var i=wrapAsync(e);return n(function(n,o){var s,a=!1;n.push(function(){a||(o.apply(null,arguments),clearTimeout(s))}),s=setTimeout(function timeoutCallback(){var t=e.name||"anonymous",n=new Error('Callback function "'+t+'" timed out.');n.code="ETIMEDOUT",r&&(n.info=r),a=!0,o(n)},t),i.apply(null,n)})}var st=Math.ceil,at=Math.max;function timeLimit(e,t,r,n){var i=wrapAsync(r);te(function baseRange(e,t,r,n){for(var i=-1,o=at(st((t-e)/(r||1)),0),s=Array(o);o--;)s[n?o:++i]=e,e+=r;return s}(0,e,1),t,i,n)}var ct=doLimit(timeLimit,1/0),ut=doLimit(timeLimit,1);function transform(e,t,r,n){arguments.length<=3&&(n=r,r=t,t=P(e)?[]:{}),n=once(n||noop);var i=wrapAsync(r);Q(e,function(e,r,n){i(t,e,r,n)},function(e){n(e,t)})}function tryEach(e,t){var r,n=null;t=t||noop,je(e,function(e,t){wrapAsync(e)(function(e,i){r=arguments.length>2?slice(arguments,1):i,n=e,t(!e)})},function(){t(n,r)})}function unmemoize(e){return function(){return(e.unmemoized||e).apply(null,arguments)}}function whilst(e,t,r){r=onlyOnce(r||noop);var n=wrapAsync(t);if(!e())return r(null);var i=function(t){if(t)return r(t);if(e())return n(i);var o=slice(arguments,1);r.apply(null,[null].concat(o))};n(i)}function until(e,t,r){whilst(function(){return!e.apply(this,arguments)},t,r)}var lt=function(e,t){if(t=once(t||noop),!P(e))return t(new Error("First argument to waterfall must be an array of functions"));if(!e.length)return t();var r=0;function nextTask(t){var n=wrapAsync(e[r++]);t.push(onlyOnce(next)),n.apply(null,t)}function next(n){if(n||r===e.length)return t.apply(null,arguments);nextTask(slice(arguments,1))}nextTask([])},pt={apply:r,applyEach:ee,applyEachSeries:ne,asyncify:asyncify,auto:oe,autoInject:autoInject,cargo:cargo,compose:Re,concat:Ie,concatLimit:Oe,concatSeries:Ne,constant:Ae,detect:Pe,detectLimit:Le,detectSeries:De,dir:Me,doDuring:doDuring,doUntil:doUntil,doWhilst:doWhilst,during:during,each:eachLimit,eachLimit:eachLimit$1,eachOf:Q,eachOfLimit:eachOfLimit,eachOfSeries:ke,eachSeries:je,ensureAsync:ensureAsync,every:qe,everyLimit:Fe,everySeries:ze,filter:Ue,filterLimit:Be,filterSeries:He,forever:forever,groupBy:Ve,groupByLimit:$e,groupBySeries:Ge,log:We,map:Z,mapLimit:te,mapSeries:re,mapValues:Je,mapValuesLimit:mapValuesLimit,mapValuesSeries:Xe,memoize:memoize,nextTick:Ye,parallel:parallelLimit,parallelLimit:parallelLimit$1,priorityQueue:Qe,queue:Ke,race:race,reduce:reduce,reduceRight:reduceRight,reflect:reflect,reflectAll:reflectAll,reject:Ze,rejectLimit:et,rejectSeries:tt,retry:retry,retryable:rt,seq:seq,series:series,setImmediate:s,some:nt,someLimit:it,someSeries:ot,sortBy:sortBy,timeout:timeout,times:ct,timesLimit:timeLimit,timesSeries:ut,transform:transform,tryEach:tryEach,unmemoize:unmemoize,until:until,waterfall:lt,whilst:whilst,all:qe,allLimit:Fe,allSeries:ze,any:nt,anyLimit:it,anySeries:ot,find:Pe,findLimit:Le,findSeries:De,forEach:eachLimit,forEachSeries:je,forEachLimit:eachLimit$1,forEachOf:Q,forEachOfSeries:ke,forEachOfLimit:eachOfLimit,inject:reduce,foldl:reduce,foldr:reduceRight,select:Ue,selectLimit:Be,selectSeries:He,wrapSync:asyncify};t.default=pt,t.apply=r,t.applyEach=ee,t.applyEachSeries=ne,t.asyncify=asyncify,t.auto=oe,t.autoInject=autoInject,t.cargo=cargo,t.compose=Re,t.concat=Ie,t.concatLimit=Oe,t.concatSeries=Ne,t.constant=Ae,t.detect=Pe,t.detectLimit=Le,t.detectSeries=De,t.dir=Me,t.doDuring=doDuring,t.doUntil=doUntil,t.doWhilst=doWhilst,t.during=during,t.each=eachLimit,t.eachLimit=eachLimit$1,t.eachOf=Q,t.eachOfLimit=eachOfLimit,t.eachOfSeries=ke,t.eachSeries=je,t.ensureAsync=ensureAsync,t.every=qe,t.everyLimit=Fe,t.everySeries=ze,t.filter=Ue,t.filterLimit=Be,t.filterSeries=He,t.forever=forever,t.groupBy=Ve,t.groupByLimit=$e,t.groupBySeries=Ge,t.log=We,t.map=Z,t.mapLimit=te,t.mapSeries=re,t.mapValues=Je,t.mapValuesLimit=mapValuesLimit,t.mapValuesSeries=Xe,t.memoize=memoize,t.nextTick=Ye,t.parallel=parallelLimit,t.parallelLimit=parallelLimit$1,t.priorityQueue=Qe,t.queue=Ke,t.race=race,t.reduce=reduce,t.reduceRight=reduceRight,t.reflect=reflect,t.reflectAll=reflectAll,t.reject=Ze,t.rejectLimit=et,t.rejectSeries=tt,t.retry=retry,t.retryable=rt,t.seq=seq,t.series=series,t.setImmediate=s,t.some=nt,t.someLimit=it,t.someSeries=ot,t.sortBy=sortBy,t.timeout=timeout,t.times=ct,t.timesLimit=timeLimit,t.timesSeries=ut,t.transform=transform,t.tryEach=tryEach,t.unmemoize=unmemoize,t.until=until,t.waterfall=lt,t.whilst=whilst,t.all=qe,t.allLimit=Fe,t.allSeries=ze,t.any=nt,t.anyLimit=it,t.anySeries=ot,t.find=Pe,t.findLimit=Le,t.findSeries=De,t.forEach=eachLimit,t.forEachSeries=je,t.forEachLimit=eachLimit$1,t.forEachOf=Q,t.forEachOfSeries=ke,t.forEachOfLimit=eachOfLimit,t.inject=reduce,t.foldl=reduce,t.foldr=reduceRight,t.select=Ue,t.selectLimit=Be,t.selectSeries=He,t.wrapSync=asyncify,Object.defineProperty(t,"__esModule",{value:!0})})(t)}).call(this,r(48)(e))},function(e,t,r){"use strict";e.exports={BINARY_TYPES:["nodebuffer","arraybuffer","fragments"],GUID:"258EAFA5-E914-47DA-95CA-C5AB0DC85B11",kStatusCode:Symbol("status-code"),kWebSocket:Symbol("websocket"),EMPTY_BUFFER:Buffer.alloc(0),NOOP:()=>{}}},function(e,t,r){"use strict";var n=r(896),i=r(98),o=r(383),s=r(218),a=r(903),c=r(47),u=r(59),l=r(5).EventEmitter,p=function(e){this.options=e?Object.create(e):{},this.options.id||(this.options.id=s.generate_uuid()),this.id=this.options.id,this.sasl_server_mechanisms=o.server_mechanisms()};(p.prototype=Object.create(l.prototype)).constructor=p,p.prototype.dispatch=function(e){return i.events("[%s] Container got event: "+e,this.id),l.prototype.emit.apply(this,arguments),!!this.listeners(e).length},p.prototype.connect=function(e){return new n(e,this).connect()},p.prototype.create_connection=function(e){return new n(e,this)},p.prototype.listen=function(e){var t,r=this;if(void 0===e.transport||"tcp"===e.transport)(t=c.createServer()).on("connection",function(t){new n(e,r).accept(t)});else{if("tls"!==e.transport&&"ssl"!==e.transport)throw Error("Unrecognised transport: "+e.transport);(t=u.createServer(e)).on("secureConnection",function(t){new n(e,r).accept(t)})}return process.version.match(/v0\.10\.\d+/)?t.listen(e.port,e.host):t.listen(e),t},p.prototype.create_container=function(e){return new p(e)},p.prototype.get_option=function(e,t){return void 0!==this.options[e]?this.options[e]:t},p.prototype.generate_uuid=s.generate_uuid,p.prototype.string_to_uuid=s.string_to_uuid,p.prototype.uuid_to_string=s.uuid_to_string;var d=r(904);p.prototype.websocket_accept=function(e,t){new n(t,this).accept(d.wrap(e))},p.prototype.websocket_connect=d.connect,p.prototype.filter=r(905),p.prototype.types=r(97),p.prototype.message=r(220),p.prototype.sasl=o,p.prototype.ReceiverEvents=a.ReceiverEvents,p.prototype.SenderEvents=a.SenderEvents,p.prototype.SessionEvents=a.SessionEvents,p.prototype.ConnectionEvents=a.ConnectionEvents,e.exports=new p},function(e,t,r){"use strict";var n=r(97),i=r(96),o={},s={};function define_frame(e,t){var r=n.define_composite(t);o[t.name]=r.create,s[Number(r.descriptor.numeric).toString(10)]=r,s[r.descriptor.symbolic]=r}o.read_header=function(e){var t=4,r={},n=e.toString("ascii",0,t);if("AMQP"!==n)throw new i.ProtocolError("Invalid protocol header for AMQP "+n);if(r.protocol_id=e.readUInt8(t++),r.major=e.readUInt8(t++),r.minor=e.readUInt8(t++),r.revision=e.readUInt8(t++),0===r.protocol_id&&0===r.major&&9===r.minor&&1===r.revision)throw new i.ProtocolError("Unsupported AMQP version: 0-9-1");if(1===r.protocol_id&&1===r.major&&0===r.minor&&10===r.revision)throw new i.ProtocolError("Unsupported AMQP version: 0-10");if(1!==r.major||0!==r.minor)throw new i.ProtocolError("Unsupported AMQP version: "+JSON.stringify(r));return r},o.write_header=function(e,t){var r=4;return e.write("AMQP",0,r,"ascii"),e.writeUInt8(t.protocol_id,r++),e.writeUInt8(t.major,r++),e.writeUInt8(t.minor,r++),e.writeUInt8(t.revision,r++),8},o.TYPE_AMQP=0,o.TYPE_SASL=1,o.read_frame=function(e){var t=new n.Reader(e),r={};if(r.size=t.read_uint(4),t.remaining<r.size)return null;var a=t.read_uint(1);if(a<2)throw new i.ProtocolError("Invalid data offset, must be at least 2 was "+a);if(r.type=t.read_uint(1),r.type===o.TYPE_AMQP)r.channel=t.read_uint(2);else{if(r.type!==o.TYPE_SASL)throw new i.ProtocolError("Unknown frame type "+r.type);t.skip(2),r.channel=0}if(a>1&&t.skip(4*a-8),t.remaining()){r.performative=t.read();var c=s[r.performative.descriptor.value];c&&(r.performative=new c(r.performative.value)),t.remaining()&&(r.payload=t.read_bytes(t.remaining()))}return r},o.write_frame=function(e){var t=new n.Writer;if(t.skip(4),t.write_uint(2,1),t.write_uint(e.type,1),e.type===o.TYPE_AMQP)t.write_uint(e.channel,2);else{if(e.type!==o.TYPE_SASL)throw new i.ProtocolError("Unknown frame type "+e.type);t.write_uint(0,2)}e.performative&&(t.write(e.performative),e.payload&&t.write_bytes(e.payload));var r=t.toBuffer();return r.writeUInt32BE(r.length,0),r},o.amqp_frame=function(e,t,r){return{channel:e||0,type:o.TYPE_AMQP,performative:t,payload:r}},o.sasl_frame=function(e){return{channel:0,type:o.TYPE_SASL,performative:e}};define_frame(o.TYPE_AMQP,{name:"open",code:16,fields:[{name:"container_id",type:"string",mandatory:!0},{name:"hostname",type:"string"},{name:"max_frame_size",type:"uint",default_value:4294967295},{name:"channel_max",type:"ushort",default_value:65535},{name:"idle_time_out",type:"uint"},{name:"outgoing_locales",type:"symbol",multiple:!0},{name:"incoming_locales",type:"symbol",multiple:!0},{name:"offered_capabilities",type:"symbol",multiple:!0},{name:"desired_capabilities",type:"symbol",multiple:!0},{name:"properties",type:"symbolic_map"}]}),define_frame(o.TYPE_AMQP,{name:"begin",code:17,fields:[{name:"remote_channel",type:"ushort"},{name:"next_outgoing_id",type:"uint",mandatory:!0},{name:"incoming_window",type:"uint",mandatory:!0},{name:"outgoing_window",type:"uint",mandatory:!0},{name:"handle_max",type:"uint",default_value:"4294967295"},{name:"offered_capabilities",type:"symbol",multiple:!0},{name:"desired_capabilities",type:"symbol",multiple:!0},{name:"properties",type:"symbolic_map"}]}),define_frame(o.TYPE_AMQP,{name:"attach",code:18,fields:[{name:"name",type:"string",mandatory:!0},{name:"handle",type:"uint",mandatory:!0},{name:"role",type:"boolean",mandatory:!0},{name:"snd_settle_mode",type:"ubyte",default_value:2},{name:"rcv_settle_mode",type:"ubyte",default_value:0},{name:"source",type:"*"},{name:"target",type:"*"},{name:"unsettled",type:"map"},{name:"incomplete_unsettled",type:"boolean",default_value:!1},{name:"initial_delivery_count",type:"uint"},{name:"max_message_size",type:"ulong"},{name:"offered_capabilities",type:"symbol",multiple:!0},{name:"desired_capabilities",type:"symbol",multiple:!0},{name:"properties",type:"symbolic_map"}]}),define_frame(o.TYPE_AMQP,{name:"flow",code:19,fields:[{name:"next_incoming_id",type:"uint"},{name:"incoming_window",type:"uint",mandatory:!0},{name:"next_outgoing_id",type:"uint",mandatory:!0},{name:"outgoing_window",type:"uint",mandatory:!0},{name:"handle",type:"uint"},{name:"delivery_count",type:"uint"},{name:"link_credit",type:"uint"},{name:"available",type:"uint"},{name:"drain",type:"boolean",default_value:!1},{name:"echo",type:"boolean",default_value:!1},{name:"properties",type:"symbolic_map"}]}),define_frame(o.TYPE_AMQP,{name:"transfer",code:20,fields:[{name:"handle",type:"uint",mandatory:!0},{name:"delivery_id",type:"uint"},{name:"delivery_tag",type:"binary"},{name:"message_format",type:"uint"},{name:"settled",type:"boolean"},{name:"more",type:"boolean",default_value:!1},{name:"rcv_settle_mode",type:"ubyte"},{name:"state",type:"delivery_state"},{name:"resume",type:"boolean",default_value:!1},{name:"aborted",type:"boolean",default_value:!1},{name:"batchable",type:"boolean",default_value:!1}]}),define_frame(o.TYPE_AMQP,{name:"disposition",code:21,fields:[{name:"role",type:"boolean",mandatory:!0},{name:"first",type:"uint",mandatory:!0},{name:"last",type:"uint"},{name:"settled",type:"boolean",default_value:!1},{name:"state",type:"*"},{name:"batchable",type:"boolean",default_value:!1}]}),define_frame(o.TYPE_AMQP,{name:"detach",code:22,fields:[{name:"handle",type:"uint",mandatory:!0},{name:"closed",type:"boolean",default_value:!1},{name:"error",type:"error"}]}),define_frame(o.TYPE_AMQP,{name:"end",code:23,fields:[{name:"error",type:"error"}]}),define_frame(o.TYPE_AMQP,{name:"close",code:24,fields:[{name:"error",type:"error"}]});define_frame(o.TYPE_SASL,{name:"sasl_mechanisms",code:64,fields:[{name:"sasl_server_mechanisms",type:"symbol",multiple:!0,mandatory:!0}]}),define_frame(o.TYPE_SASL,{name:"sasl_init",code:65,fields:[{name:"mechanism",type:"symbol",mandatory:!0},{name:"initial_response",type:"binary"},{name:"hostname",type:"string"}]}),define_frame(o.TYPE_SASL,{name:"sasl_challenge",code:66,fields:[{name:"challenge",type:"binary",mandatory:!0}]}),define_frame(o.TYPE_SASL,{name:"sasl_response",code:67,fields:[{name:"response",type:"binary",mandatory:!0}]}),define_frame(o.TYPE_SASL,{name:"sasl_outcome",code:68,fields:[{name:"code",type:"ubyte",mandatory:!0},{name:"additional_data",type:"binary"}]}),e.exports=o},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n=r(381);t.container=n("rhea-promise:container"),t.connection=n("rhea-promise:connection"),t.session=n("rhea-promise:session"),t.sender=n("rhea-promise:sender"),t.receiver=n("rhea-promise:receiver"),t.error=n("rhea-promise:error"),t.eventHandler=n("rhea-promise:eventhandler"),t.contextTranslator=n("rhea-promise:translate")},function(e,t,r){"use strict";var n=this&&this.__awaiter||function(e,t,r,n){return new(r||(r=Promise))(function(i,o){function fulfilled(e){try{step(n.next(e))}catch(e){o(e)}}function rejected(e){try{step(n.throw(e))}catch(e){o(e)}}function step(e){e.done?i(e.value):new r(function(t){t(e.value)}).then(fulfilled,rejected)}step((n=n.apply(e,t||[])).next())})};Object.defineProperty(t,"__esModule",{value:!0});const i=r(106),o=r(399),s=r(79);t.TokenCredentialsBase=class TokenCredentialsBase{constructor(e,t,r,n=o.Environment.AzureCloud,i=new s.MemoryCache){if(this.clientId=e,this.domain=t,this.tokenAudience=r,this.environment=n,this.tokenCache=i,!Boolean(e)||"string"!=typeof e.valueOf())throw new Error("clientId must be a non empty string.");if(!Boolean(t)||"string"!=typeof t.valueOf())throw new Error("domain must be a non empty string.");if("graph"===this.tokenAudience&&"common"===this.domain.toLowerCase())throw new Error('If the tokenAudience is specified as "graph" then "domain" cannot be defaulted to "commmon" tenant.        It must be the actual tenant (preferrably a string in a guid format).');const a=this.environment.activeDirectoryEndpointUrl+this.domain;this.authContext=new s.AuthenticationContext(a,this.environment.validateAuthority,this.tokenCache)}getActiveDirectoryResourceId(){let e=this.environment.activeDirectoryResourceId;return this.tokenAudience&&(e=this.tokenAudience,"graph"===this.tokenAudience.toLowerCase()?e=this.environment.activeDirectoryGraphResourceId:"batch"===this.tokenAudience.toLowerCase()&&(e=this.environment.batchResourceId)),e}getTokenFromCache(e){const t=this,r=this.getActiveDirectoryResourceId();return new Promise((n,i)=>{t.authContext.acquireToken(r,e,t.clientId,(e,t)=>e?i(e):t.error||t.errorDescription?i(t):n(t))})}signRequest(e){return n(this,void 0,void 0,function*(){const t=yield this.getToken();return e.headers.set(i.Constants.HeaderConstants.AUTHORIZATION,`${t.tokenType} ${t.accessToken}`),Promise.resolve(e)})}}},function(e,t,r){"use strict";function AzureEnvironment(e){if(this.validateAuthority=!0,e){for(var t in["name","portalUrl","managementEndpointUrl","resourceManagerEndpointUrl","activeDirectoryEndpointUrl","activeDirectoryResourceId"].forEach(function(t){if(!e[t]||"string"!=typeof e[t].valueOf())throw new Error(`Please provide "${t}" for the environment and it must be of type "string".`)}),e)this[t]=e[t]}}var n={Azure:{name:"Azure",portalUrl:"https://portal.azure.com",publishingProfileUrl:"http://go.microsoft.com/fwlink/?LinkId=254432",managementEndpointUrl:"https://management.core.windows.net",resourceManagerEndpointUrl:"https://management.azure.com/",sqlManagementEndpointUrl:"https://management.core.windows.net:8443/",sqlServerHostnameSuffix:".database.windows.net",galleryEndpointUrl:"https://gallery.azure.com/",activeDirectoryEndpointUrl:"https://login.microsoftonline.com/",activeDirectoryResourceId:"https://management.core.windows.net/",activeDirectoryGraphResourceId:"https://graph.windows.net/",batchResourceId:"https://batch.core.windows.net/",activeDirectoryGraphApiVersion:"2013-04-05",storageEndpointSuffix:".core.windows.net",keyVaultDnsSuffix:".vault.azure.net",azureDataLakeStoreFileSystemEndpointSuffix:"azuredatalakestore.net",azureDataLakeAnalyticsCatalogAndJobEndpointSuffix:"azuredatalakeanalytics.net"},AzureChina:{name:"AzureChina",portalUrl:"https://portal.azure.cn",publishingProfileUrl:"http://go.microsoft.com/fwlink/?LinkID=301774",managementEndpointUrl:"https://management.core.chinacloudapi.cn",resourceManagerEndpointUrl:"https://management.chinacloudapi.cn",sqlManagementEndpointUrl:"https://management.core.chinacloudapi.cn:8443/",sqlServerHostnameSuffix:".database.chinacloudapi.cn",galleryEndpointUrl:"https://gallery.chinacloudapi.cn/",activeDirectoryEndpointUrl:"https://login.chinacloudapi.cn/",activeDirectoryResourceId:"https://management.core.chinacloudapi.cn/",activeDirectoryGraphResourceId:"https://graph.chinacloudapi.cn/",batchResourceId:"https://batch.chinacloudapi.cn/",activeDirectoryGraphApiVersion:"2013-04-05",storageEndpointSuffix:".core.chinacloudapi.cn",keyVaultDnsSuffix:".vault.azure.cn",azureDataLakeStoreFileSystemEndpointSuffix:"N/A",azureDataLakeAnalyticsCatalogAndJobEndpointSuffix:"N/A"},AzureUSGovernment:{name:"AzureUSGovernment",portalUrl:"https://portal.azure.us",publishingProfileUrl:"https://manage.windowsazure.us/publishsettings/index",managementEndpointUrl:"https://management.core.usgovcloudapi.net",resourceManagerEndpointUrl:"https://management.usgovcloudapi.net",sqlManagementEndpointUrl:"https://management.core.usgovcloudapi.net:8443/",sqlServerHostnameSuffix:".database.usgovcloudapi.net",galleryEndpointUrl:"https://gallery.usgovcloudapi.net/",activeDirectoryEndpointUrl:"https://login.microsoftonline.us/",activeDirectoryResourceId:"https://management.core.usgovcloudapi.net/",activeDirectoryGraphResourceId:"https://graph.windows.net/",batchResourceId:"https://batch.core.usgovcloudapi.net/",activeDirectoryGraphApiVersion:"2013-04-05",storageEndpointSuffix:".core.usgovcloudapi.net",keyVaultDnsSuffix:".vault.usgovcloudapi.net",azureDataLakeStoreFileSystemEndpointSuffix:"N/A",azureDataLakeAnalyticsCatalogAndJobEndpointSuffix:"N/A"},AzureGermanCloud:{name:"AzureGermanCloud",portalUrl:"http://portal.microsoftazure.de/",publishingProfileUrl:"https://manage.microsoftazure.de/publishsettings/index",managementEndpointUrl:"https://management.core.cloudapi.de",resourceManagerEndpointUrl:"https://management.microsoftazure.de",sqlManagementEndpointUrl:"https://management.core.cloudapi.de:8443/",sqlServerHostnameSuffix:".database.cloudapi.de",galleryEndpointUrl:"https://gallery.cloudapi.de/",activeDirectoryEndpointUrl:"https://login.microsoftonline.de/",activeDirectoryResourceId:"https://management.core.cloudapi.de/",activeDirectoryGraphResourceId:"https://graph.cloudapi.de/",batchResourceId:"https://batch.microsoftazure.de/",activeDirectoryGraphApiVersion:"2013-04-05",storageEndpointSuffix:".core.cloudapi.de",keyVaultDnsSuffix:".vault.microsoftazure.de",azureDataLakeStoreFileSystemEndpointSuffix:"N/A",azureDataLakeAnalyticsCatalogAndJobEndpointSuffix:"N/A"}};for(var i in AzureEnvironment.prototype.add=function(e){var t=new AzureEnvironment(e);return AzureEnvironment.prototype[t.name]=t,t},n)AzureEnvironment.prototype.add(n[i]);e.exports=new AzureEnvironment},function(e,t,r){"use strict";!process.version||0===process.version.indexOf("v0.")||0===process.version.indexOf("v1.")&&0!==process.version.indexOf("v1.8.")?e.exports={nextTick:function nextTick(e,t,r,n){if("function"!=typeof e)throw new TypeError('"callback" argument must be a function');var i,o,s=arguments.length;switch(s){case 0:case 1:return process.nextTick(e);case 2:return process.nextTick(function afterTickOne(){e.call(null,t)});case 3:return process.nextTick(function afterTickTwo(){e.call(null,t,r)});case 4:return process.nextTick(function afterTickThree(){e.call(null,t,r,n)});default:for(i=new Array(s-1),o=0;o<i.length;)i[o++]=arguments[o];return process.nextTick(function afterTick(){e.apply(null,i)})}}}:e.exports=process},function(e,t){
/*!
 * Determine if an object is a Buffer
 *
 * @author   Feross Aboukhadijeh <https://feross.org>
 * @license  MIT
 */
e.exports=function isBuffer(e){return null!=e&&null!=e.constructor&&"function"==typeof e.constructor.isBuffer&&e.constructor.isBuffer(e)}},function(e,t,r){e.exports=r(932)},function(e,t,r){"use strict";const n=r(37).fromCallback,i=r(511);e.exports={remove:n(i),removeSync:i.sync}},function(e,t,r){e.exports=glob;var n=r(11),i=r(265),o=r(177),s=(o.Minimatch,r(38)),a=r(5).EventEmitter,c=r(6),u=r(44),l=r(178),p=r(542),d=r(266),h=(d.alphasort,d.alphasorti,d.setopts),f=d.ownProp,m=r(543),g=(r(1),d.childrenIgnored),y=d.isIgnored,v=r(109);function glob(e,t,r){if("function"==typeof t&&(r=t,t={}),t||(t={}),t.sync){if(r)throw new TypeError("callback provided to sync glob");return p(e,t)}return new Glob(e,t,r)}glob.sync=p;var b=glob.GlobSync=p.GlobSync;function Glob(e,t,r){if("function"==typeof t&&(r=t,t=null),t&&t.sync){if(r)throw new TypeError("callback provided to sync glob");return new b(e,t)}if(!(this instanceof Glob))return new Glob(e,t,r);h(this,e,t),this._didRealPath=!1;var n=this.minimatch.set.length;this.matches=new Array(n),"function"==typeof r&&(r=v(r),this.on("error",r),this.on("end",function(e){r(null,e)}));var i=this;if(this._processing=0,this._emitQueue=[],this._processQueue=[],this.paused=!1,this.noprocess)return this;if(0===n)return done();for(var o=!0,s=0;s<n;s++)this._process(this.minimatch.set[s],s,!1,done);function done(){--i._processing,i._processing<=0&&(o?process.nextTick(function(){i._finish()}):i._finish())}o=!1}glob.glob=glob,glob.hasMagic=function(e,t){var r=function extend(e,t){if(null===t||"object"!=typeof t)return e;for(var r=Object.keys(t),n=r.length;n--;)e[r[n]]=t[r[n]];return e}({},t);r.noprocess=!0;var n=new Glob(e,r).minimatch.set;if(!e)return!1;if(n.length>1)return!0;for(var i=0;i<n[0].length;i++)if("string"!=typeof n[0][i])return!0;return!1},glob.Glob=Glob,s(Glob,a),Glob.prototype._finish=function(){if(u(this instanceof Glob),!this.aborted){if(this.realpath&&!this._didRealpath)return this._realpath();d.finish(this),this.emit("end",this.found)}},Glob.prototype._realpath=function(){if(!this._didRealpath){this._didRealpath=!0;var e=this.matches.length;if(0===e)return this._finish();for(var t=this,r=0;r<this.matches.length;r++)this._realpathSet(r,next)}function next(){0==--e&&t._finish()}},Glob.prototype._realpathSet=function(e,t){var r=this.matches[e];if(!r)return t();var n=Object.keys(r),o=this,s=n.length;if(0===s)return t();var a=this.matches[e]=Object.create(null);n.forEach(function(r,n){r=o._makeAbs(r),i.realpath(r,o.realpathCache,function(n,i){n?"stat"===n.syscall?a[r]=!0:o.emit("error",n):a[i]=!0,0==--s&&(o.matches[e]=a,t())})})},Glob.prototype._mark=function(e){return d.mark(this,e)},Glob.prototype._makeAbs=function(e){return d.makeAbs(this,e)},Glob.prototype.abort=function(){this.aborted=!0,this.emit("abort")},Glob.prototype.pause=function(){this.paused||(this.paused=!0,this.emit("pause"))},Glob.prototype.resume=function(){if(this.paused){if(this.emit("resume"),this.paused=!1,this._emitQueue.length){var e=this._emitQueue.slice(0);this._emitQueue.length=0;for(var t=0;t<e.length;t++){var r=e[t];this._emitMatch(r[0],r[1])}}if(this._processQueue.length){var n=this._processQueue.slice(0);this._processQueue.length=0;for(t=0;t<n.length;t++){var i=n[t];this._processing--,this._process(i[0],i[1],i[2],i[3])}}}},Glob.prototype._process=function(e,t,r,n){if(u(this instanceof Glob),u("function"==typeof n),!this.aborted)if(this._processing++,this.paused)this._processQueue.push([e,t,r,n]);else{for(var i,s=0;"string"==typeof e[s];)s++;switch(s){case e.length:return void this._processSimple(e.join("/"),t,n);case 0:i=null;break;default:i=e.slice(0,s).join("/")}var a,c=e.slice(s);null===i?a=".":l(i)||l(e.join("/"))?(i&&l(i)||(i="/"+i),a=i):a=i;var p=this._makeAbs(a);if(g(this,a))return n();c[0]===o.GLOBSTAR?this._processGlobStar(i,a,p,c,t,r,n):this._processReaddir(i,a,p,c,t,r,n)}},Glob.prototype._processReaddir=function(e,t,r,n,i,o,s){var a=this;this._readdir(r,o,function(c,u){return a._processReaddir2(e,t,r,n,i,o,u,s)})},Glob.prototype._processReaddir2=function(e,t,r,n,i,o,s,a){if(!s)return a();for(var u=n[0],l=!!this.minimatch.negate,p=u._glob,d=this.dot||"."===p.charAt(0),h=[],f=0;f<s.length;f++){if("."!==(g=s[f]).charAt(0)||d)(l&&!e?!g.match(u):g.match(u))&&h.push(g)}var m=h.length;if(0===m)return a();if(1===n.length&&!this.mark&&!this.stat){this.matches[i]||(this.matches[i]=Object.create(null));for(f=0;f<m;f++){var g=h[f];e&&(g="/"!==e?e+"/"+g:e+g),"/"!==g.charAt(0)||this.nomount||(g=c.join(this.root,g)),this._emitMatch(i,g)}return a()}n.shift();for(f=0;f<m;f++){g=h[f];e&&(g="/"!==e?e+"/"+g:e+g),this._process([g].concat(n),i,o,a)}a()},Glob.prototype._emitMatch=function(e,t){if(!this.aborted&&!y(this,t))if(this.paused)this._emitQueue.push([e,t]);else{var r=l(t)?t:this._makeAbs(t);if(this.mark&&(t=this._mark(t)),this.absolute&&(t=r),!this.matches[e][t]){if(this.nodir){var n=this.cache[r];if("DIR"===n||Array.isArray(n))return}this.matches[e][t]=!0;var i=this.statCache[r];i&&this.emit("stat",t,i),this.emit("match",t)}}},Glob.prototype._readdirInGlobStar=function(e,t){if(!this.aborted){if(this.follow)return this._readdir(e,!1,t);var r=this,i=m("lstat\0"+e,function lstatcb_(n,i){if(n&&"ENOENT"===n.code)return t();var o=i&&i.isSymbolicLink();r.symlinks[e]=o,o||!i||i.isDirectory()?r._readdir(e,!1,t):(r.cache[e]="FILE",t())});i&&n.lstat(e,i)}},Glob.prototype._readdir=function(e,t,r){if(!this.aborted&&(r=m("readdir\0"+e+"\0"+t,r))){if(t&&!f(this.symlinks,e))return this._readdirInGlobStar(e,r);if(f(this.cache,e)){var i=this.cache[e];if(!i||"FILE"===i)return r();if(Array.isArray(i))return r(null,i)}n.readdir(e,function readdirCb(e,t,r){return function(n,i){n?e._readdirError(t,n,r):e._readdirEntries(t,i,r)}}(this,e,r))}},Glob.prototype._readdirEntries=function(e,t,r){if(!this.aborted){if(!this.mark&&!this.stat)for(var n=0;n<t.length;n++){var i=t[n];i="/"===e?e+i:e+"/"+i,this.cache[i]=!0}return this.cache[e]=t,r(null,t)}},Glob.prototype._readdirError=function(e,t,r){if(!this.aborted){switch(t.code){case"ENOTSUP":case"ENOTDIR":var n=this._makeAbs(e);if(this.cache[n]="FILE",n===this.cwdAbs){var i=new Error(t.code+" invalid cwd "+this.cwd);i.path=this.cwd,i.code=t.code,this.emit("error",i),this.abort()}break;case"ENOENT":case"ELOOP":case"ENAMETOOLONG":case"UNKNOWN":this.cache[this._makeAbs(e)]=!1;break;default:this.cache[this._makeAbs(e)]=!1,this.strict&&(this.emit("error",t),this.abort()),this.silent||console.error("glob error",t)}return r()}},Glob.prototype._processGlobStar=function(e,t,r,n,i,o,s){var a=this;this._readdir(r,o,function(c,u){a._processGlobStar2(e,t,r,n,i,o,u,s)})},Glob.prototype._processGlobStar2=function(e,t,r,n,i,o,s,a){if(!s)return a();var c=n.slice(1),u=e?[e]:[],l=u.concat(c);this._process(l,i,!1,a);var p=this.symlinks[r],d=s.length;if(p&&o)return a();for(var h=0;h<d;h++){if("."!==s[h].charAt(0)||this.dot){var f=u.concat(s[h],c);this._process(f,i,!0,a);var m=u.concat(s[h],n);this._process(m,i,!0,a)}}a()},Glob.prototype._processSimple=function(e,t,r){var n=this;this._stat(e,function(i,o){n._processSimple2(e,t,i,o,r)})},Glob.prototype._processSimple2=function(e,t,r,n,i){if(this.matches[t]||(this.matches[t]=Object.create(null)),!n)return i();if(e&&l(e)&&!this.nomount){var o=/[\/\\]$/.test(e);"/"===e.charAt(0)?e=c.join(this.root,e):(e=c.resolve(this.root,e),o&&(e+="/"))}"win32"===process.platform&&(e=e.replace(/\\/g,"/")),this._emitMatch(t,e),i()},Glob.prototype._stat=function(e,t){var r=this._makeAbs(e),i="/"===e.slice(-1);if(e.length>this.maxLength)return t();if(!this.stat&&f(this.cache,r)){var o=this.cache[r];if(Array.isArray(o)&&(o="DIR"),!i||"DIR"===o)return t(null,o);if(i&&"FILE"===o)return t()}var s=this.statCache[r];if(void 0!==s){if(!1===s)return t(null,s);var a=s.isDirectory()?"DIR":"FILE";return i&&"FILE"===a?t():t(null,a,s)}var c=this,u=m("stat\0"+r,function lstatcb_(i,o){if(o&&o.isSymbolicLink())return n.stat(r,function(n,i){n?c._stat2(e,r,null,o,t):c._stat2(e,r,n,i,t)});c._stat2(e,r,i,o,t)});u&&n.lstat(r,u)},Glob.prototype._stat2=function(e,t,r,n,i){if(r&&("ENOENT"===r.code||"ENOTDIR"===r.code))return this.statCache[t]=!1,i();var o="/"===e.slice(-1);if(this.statCache[t]=n,"/"===t.slice(-1)&&n&&!n.isDirectory())return i(null,!1,n);var s=!0;return n&&(s=n.isDirectory()?"DIR":"FILE"),this.cache[t]=this.cache[t]||s,o&&"FILE"===s?i():i(null,s,n)}},function(e,t,r){"use strict";
/*! Copyright (c) Microsoft. All rights reserved.
 *! Licensed under the MIT license. See LICENSE file in the project root for full license information.
 */var n=this&&this.__extends||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);function __(){this.constructor=e}e.prototype=null===t?Object.create(t):(__.prototype=t.prototype,new __)},i=function(e){function ArgumentError(t){e.call(this,t),this.name="ArgumentError",this.message=t,Error.captureStackTrace(this,this.constructor)}return n(ArgumentError,e),ArgumentError}(Error);t.ArgumentError=i;var o=function(e){function ArgumentOutOfRangeError(t){e.call(this,t),this.name="ArgumentOutOfRangeError",this.message=t,Error.captureStackTrace(this,this.constructor)}return n(ArgumentOutOfRangeError,e),ArgumentOutOfRangeError}(Error);t.ArgumentOutOfRangeError=o;var s=function(e){function DeviceMaximumQueueDepthExceededError(t){e.call(this,t),this.name="DeviceMaximumQueueDepthExceededError",this.message=t,Error.captureStackTrace(this,this.constructor)}return n(DeviceMaximumQueueDepthExceededError,e),DeviceMaximumQueueDepthExceededError}(Error);t.DeviceMaximumQueueDepthExceededError=s;var a=function(e){function DeviceNotFoundError(t){e.call(this,t),this.name="DeviceNotFoundError",this.message=t,Error.captureStackTrace(this,this.constructor)}return n(DeviceNotFoundError,e),DeviceNotFoundError}(Error);t.DeviceNotFoundError=a;var c=function(e){function FormatError(t){e.call(this,t),this.name="FormatError",this.message=t,Error.captureStackTrace(this,this.constructor)}return n(FormatError,e),FormatError}(Error);t.FormatError=c;var u=function(e){function UnauthorizedError(t){e.call(this,t),this.name="UnauthorizedError",this.message=t,Error.captureStackTrace(this,this.constructor)}return n(UnauthorizedError,e),UnauthorizedError}(Error);t.UnauthorizedError=u;var l=function(e){function NotImplementedError(t){e.call(this,t),this.name="NotImplementedError",this.message=t,Error.captureStackTrace(this,this.constructor)}return n(NotImplementedError,e),NotImplementedError}(Error);t.NotImplementedError=l;var p=function(e){function NotConnectedError(t){e.call(this,t),this.name="NotConnectedError",this.message=t,Error.captureStackTrace(this,this.constructor)}return n(NotConnectedError,e),NotConnectedError}(Error);t.NotConnectedError=p;var d=function(e){function IotHubQuotaExceededError(t){e.call(this,t),this.name="IotHubQuotaExceededError",this.message=t,Error.captureStackTrace(this,this.constructor)}return n(IotHubQuotaExceededError,e),IotHubQuotaExceededError}(Error);t.IotHubQuotaExceededError=d;var h=function(e){function MessageTooLargeError(t){e.call(this,t),this.name="MessageTooLargeError",this.message=t,Error.captureStackTrace(this,this.constructor)}return n(MessageTooLargeError,e),MessageTooLargeError}(Error);t.MessageTooLargeError=h;var f=function(e){function InternalServerError(t){e.call(this,t),this.name="InternalServerError",this.message=t,Error.captureStackTrace(this,this.constructor)}return n(InternalServerError,e),InternalServerError}(Error);t.InternalServerError=f;var m=function(e){function ServiceUnavailableError(t){e.call(this,t),this.name="ServiceUnavailableError",this.message=t,Error.captureStackTrace(this,this.constructor)}return n(ServiceUnavailableError,e),ServiceUnavailableError}(Error);t.ServiceUnavailableError=m;var g=function(e){function IotHubNotFoundError(t){e.call(this,t),this.name="IotHubNotFoundError",this.message=t,Error.captureStackTrace(this,this.constructor)}return n(IotHubNotFoundError,e),IotHubNotFoundError}(Error);t.IotHubNotFoundError=g;var y=function(e){function IoTHubSuspendedError(t){e.call(this,t),this.name="IoTHubSuspendedError",this.message=t,Error.captureStackTrace(this,this.constructor)}return n(IoTHubSuspendedError,e),IoTHubSuspendedError}(Error);t.IoTHubSuspendedError=y;var v=function(e){function JobNotFoundError(t){e.call(this,t),this.name="JobNotFoundError",this.message=t,Error.captureStackTrace(this,this.constructor)}return n(JobNotFoundError,e),JobNotFoundError}(Error);t.JobNotFoundError=v;var b=function(e){function TooManyDevicesError(t){e.call(this,t),this.name="TooManyDevicesError",this.message=t,Error.captureStackTrace(this,this.constructor)}return n(TooManyDevicesError,e),TooManyDevicesError}(Error);t.TooManyDevicesError=b;var _=function(e){function ThrottlingError(t){e.call(this,t),this.name="ThrottlingError",this.message=t,Error.captureStackTrace(this,this.constructor)}return n(ThrottlingError,e),ThrottlingError}(Error);t.ThrottlingError=_;var w=function(e){function DeviceAlreadyExistsError(t){e.call(this,t),this.name="DeviceAlreadyExistsError",this.message=t,Error.captureStackTrace(this,this.constructor)}return n(DeviceAlreadyExistsError,e),DeviceAlreadyExistsError}(Error);t.DeviceAlreadyExistsError=w;var E=function(e){function DeviceMessageLockLostError(t){e.call(this,t),this.name="DeviceMessageLockLostError",this.message=t,Error.captureStackTrace(this,this.constructor)}return n(DeviceMessageLockLostError,e),DeviceMessageLockLostError}(Error);t.DeviceMessageLockLostError=E;var S=function(e){function InvalidEtagError(t){e.call(this,t),this.name="InvalidEtagError",this.message=t,Error.captureStackTrace(this,this.constructor)}return n(InvalidEtagError,e),InvalidEtagError}(Error);t.InvalidEtagError=S;var C=function(e){function InvalidOperationError(t){e.call(this,t),this.name="InvalidOperationError",this.message=t,Error.captureStackTrace(this,this.constructor)}return n(InvalidOperationError,e),InvalidOperationError}(Error);t.InvalidOperationError=C;var x=function(e){function PreconditionFailedError(t){e.call(this,t),this.name="PreconditionFailedError",this.message=t,Error.captureStackTrace(this,this.constructor)}return n(PreconditionFailedError,e),PreconditionFailedError}(Error);t.PreconditionFailedError=x;var k=function(e){function TimeoutError(t){e.call(this,t),this.name="TimeoutError",this.message=t,Error.captureStackTrace(this,this.constructor)}return n(TimeoutError,e),TimeoutError}(Error);t.TimeoutError=k;var R=function(e){function BadDeviceResponseError(t){e.call(this,t),this.name="BadDeviceResponseError",this.message=t,Error.captureStackTrace(this,this.constructor)}return n(BadDeviceResponseError,e),BadDeviceResponseError}(Error);t.BadDeviceResponseError=R;var T=function(e){function GatewayTimeoutError(t){e.call(this,t),this.name="GatewayTimeoutError",this.message=t,Error.captureStackTrace(this,this.constructor)}return n(GatewayTimeoutError,e),GatewayTimeoutError}(Error);t.GatewayTimeoutError=T;var O=function(e){function DeviceTimeoutError(t){e.call(this,t),this.name="DeviceTimeoutError",this.message=t,Error.captureStackTrace(this,this.constructor)}return n(DeviceTimeoutError,e),DeviceTimeoutError}(Error);t.DeviceTimeoutError=O;var I=function(e){function CloudToDeviceDetachedError(t){e.call(this,t),this.name="CloudToDeviceDetachedError",this.message=t,Error.captureStackTrace(this,this.constructor)}return n(CloudToDeviceDetachedError,e),CloudToDeviceDetachedError}(Error);t.CloudToDeviceDetachedError=I;var N=function(e){function DeviceMethodsDetachedError(t){e.call(this,t),this.name="DeviceMethodsDetachedError",this.message=t,Error.captureStackTrace(this,this.constructor)}return n(DeviceMethodsDetachedError,e),DeviceMethodsDetachedError}(Error);t.DeviceMethodsDetachedError=N;var A=function(e){function TwinDetachedError(t){e.call(this,t),this.name="TwinDetachedError",this.message=t,Error.captureStackTrace(this,this.constructor)}return n(TwinDetachedError,e),TwinDetachedError}(Error);t.TwinDetachedError=A;var P=function(e){function TwinRequestError(t){e.call(this,t),this.name="TwinRequestError",this.message=t,Error.captureStackTrace(this,this.constructor)}return n(TwinRequestError,e),TwinRequestError}(Error);t.TwinRequestError=P;var L=function(e){function OperationCancelledError(t){e.call(this,t),this.name="OperationCancelledError",this.message=t,Error.captureStackTrace(this,this.constructor)}return n(OperationCancelledError,e),OperationCancelledError}(Error);t.OperationCancelledError=L;var D=function(e){function DeviceRegistrationFailedError(t){e.call(this,t),this.name="ProvisioningRegistrationFailedError",this.message=t,Error.captureStackTrace(this,this.constructor)}return n(DeviceRegistrationFailedError,e),DeviceRegistrationFailedError}(Error);t.DeviceRegistrationFailedError=D;var M=function(e){function SecurityDeviceError(t){e.call(this,t),this.name="SecurityDeviceError",this.message=t,Error.captureStackTrace(this,this.constructor)}return n(SecurityDeviceError,e),SecurityDeviceError}(Error);t.SecurityDeviceError=M},function(e,t,r){"use strict";"undefined"==typeof process||"renderer"===process.type||!0===process.browser||process.__nwjs?e.exports=r(630):e.exports=r(632)},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(633);t.DeviceMethodRequest=n.DeviceMethodRequest;var i=r(634);t.DeviceMethodResponse=i.DeviceMethodResponse;var o=r(635);t.createDeviceMethodExchange=o.createDeviceMethodExchange;var s=r(636);t.MethodClient=s.MethodClient},function(e,t){e.exports={LocationMode:{PRIMARY_ONLY:0,PRIMARY_THEN_SECONDARY:1,SECONDARY_ONLY:2,SECONDARY_THEN_PRIMARY:3}}},function(e,t,r){(function(){var t,n,i,o,s,a,c;c=r(75),s=c.assign,a=c.isFunction,t=r(649),n=r(650),o=r(186),i=r(651),e.exports.create=function(e,r,n,i){var o,a;if(null==e)throw new Error("Root element needs a name");return i=s({},r,n,i),a=(o=new t(i)).element(e),i.headless||(o.declaration(i),null==i.pubID&&null==i.sysID||o.doctype(i)),a},e.exports.begin=function(e,r,i){var o;return a(e)&&(r=(o=[e,r])[0],i=o[1],e={}),r?new n(e,r,i):new t(e)},e.exports.stringWriter=function(e){return new o(e)},e.exports.streamWriter=function(e,t){return new i(e,t)}}).call(this)},function(e,t,r){(function(){var t,n,i,o,s,a={}.hasOwnProperty;s=r(75),o=s.isObject,i=s.isFunction,n=r(40),t=r(294),e.exports=function(e){function XMLElement(e,t,r){if(XMLElement.__super__.constructor.call(this,e),null==t)throw new Error("Missing element name");this.name=this.stringify.eleName(t),this.attributes={},null!=r&&this.attribute(r),e.isDocument&&(this.isRoot=!0,this.documentObject=e,e.rootObject=this)}return function(e,t){for(var r in t)a.call(t,r)&&(e[r]=t[r]);function ctor(){this.constructor=e}ctor.prototype=t.prototype,e.prototype=new ctor,e.__super__=t.prototype}(XMLElement,n),XMLElement.prototype.clone=function(){var e,t,r,n;for(t in(r=Object.create(this)).isRoot&&(r.documentObject=null),r.attributes={},n=this.attributes)a.call(n,t)&&(e=n[t],r.attributes[t]=e.clone());return r.children=[],this.children.forEach(function(e){var t;return(t=e.clone()).parent=r,r.children.push(t)}),r},XMLElement.prototype.attribute=function(e,r){var n,s;if(null!=e&&(e=e.valueOf()),o(e))for(n in e)a.call(e,n)&&(s=e[n],this.attribute(n,s));else i(r)&&(r=r.apply()),this.options.skipNullAttributes&&null==r||(this.attributes[e]=new t(this,e,r));return this},XMLElement.prototype.removeAttribute=function(e){var t,r,n;if(null==e)throw new Error("Missing attribute name");if(e=e.valueOf(),Array.isArray(e))for(r=0,n=e.length;r<n;r++)t=e[r],delete this.attributes[t];else delete this.attributes[e];return this},XMLElement.prototype.toString=function(e){return this.options.writer.set(e).element(this)},XMLElement.prototype.att=function(e,t){return this.attribute(e,t)},XMLElement.prototype.a=function(e,t){return this.attribute(e,t)},XMLElement}()}).call(this)},function(e,t,r){(function(){var t,n={}.hasOwnProperty;t=r(40),e.exports=function(e){function XMLCData(e,t){if(XMLCData.__super__.constructor.call(this,e),null==t)throw new Error("Missing CDATA text");this.text=this.stringify.cdata(t)}return function(e,t){for(var r in t)n.call(t,r)&&(e[r]=t[r]);function ctor(){this.constructor=e}ctor.prototype=t.prototype,e.prototype=new ctor,e.__super__=t.prototype}(XMLCData,t),XMLCData.prototype.clone=function(){return Object.create(this)},XMLCData.prototype.toString=function(e){return this.options.writer.set(e).cdata(this)},XMLCData}()}).call(this)},function(e,t,r){(function(){var t,n={}.hasOwnProperty;t=r(40),e.exports=function(e){function XMLComment(e,t){if(XMLComment.__super__.constructor.call(this,e),null==t)throw new Error("Missing comment text");this.text=this.stringify.comment(t)}return function(e,t){for(var r in t)n.call(t,r)&&(e[r]=t[r]);function ctor(){this.constructor=e}ctor.prototype=t.prototype,e.prototype=new ctor,e.__super__=t.prototype}(XMLComment,t),XMLComment.prototype.clone=function(){return Object.create(this)},XMLComment.prototype.toString=function(e){return this.options.writer.set(e).comment(this)},XMLComment}()}).call(this)},function(e,t,r){(function(){var t,n,i={}.hasOwnProperty;n=r(75).isObject,t=r(40),e.exports=function(e){function XMLDeclaration(e,t,r,i){var o;XMLDeclaration.__super__.constructor.call(this,e),n(t)&&(t=(o=t).version,r=o.encoding,i=o.standalone),t||(t="1.0"),this.version=this.stringify.xmlVersion(t),null!=r&&(this.encoding=this.stringify.xmlEncoding(r)),null!=i&&(this.standalone=this.stringify.xmlStandalone(i))}return function(e,t){for(var r in t)i.call(t,r)&&(e[r]=t[r]);function ctor(){this.constructor=e}ctor.prototype=t.prototype,e.prototype=new ctor,e.__super__=t.prototype}(XMLDeclaration,t),XMLDeclaration.prototype.toString=function(e){return this.options.writer.set(e).declaration(this)},XMLDeclaration}()}).call(this)},function(e,t,r){(function(){var t,n,i,o,s,a,c={}.hasOwnProperty;a=r(75).isObject,s=r(40),t=r(146),i=r(147),n=r(148),o=r(149),e.exports=function(e){function XMLDocType(e,t,r){var n,i;XMLDocType.__super__.constructor.call(this,e),this.documentObject=e,a(t)&&(t=(n=t).pubID,r=n.sysID),null==r&&(r=(i=[t,r])[0],t=i[1]),null!=t&&(this.pubID=this.stringify.dtdPubID(t)),null!=r&&(this.sysID=this.stringify.dtdSysID(r))}return function(e,t){for(var r in t)c.call(t,r)&&(e[r]=t[r]);function ctor(){this.constructor=e}ctor.prototype=t.prototype,e.prototype=new ctor,e.__super__=t.prototype}(XMLDocType,s),XMLDocType.prototype.element=function(e,t){var r;return r=new n(this,e,t),this.children.push(r),this},XMLDocType.prototype.attList=function(e,r,n,i,o){var s;return s=new t(this,e,r,n,i,o),this.children.push(s),this},XMLDocType.prototype.entity=function(e,t){var r;return r=new i(this,!1,e,t),this.children.push(r),this},XMLDocType.prototype.pEntity=function(e,t){var r;return r=new i(this,!0,e,t),this.children.push(r),this},XMLDocType.prototype.notation=function(e,t){var r;return r=new o(this,e,t),this.children.push(r),this},XMLDocType.prototype.toString=function(e){return this.options.writer.set(e).docType(this)},XMLDocType.prototype.ele=function(e,t){return this.element(e,t)},XMLDocType.prototype.att=function(e,t,r,n,i){return this.attList(e,t,r,n,i)},XMLDocType.prototype.ent=function(e,t){return this.entity(e,t)},XMLDocType.prototype.pent=function(e,t){return this.pEntity(e,t)},XMLDocType.prototype.not=function(e,t){return this.notation(e,t)},XMLDocType.prototype.up=function(){return this.root()||this.documentObject},XMLDocType}()}).call(this)},function(e,t,r){(function(){var t,n={}.hasOwnProperty;t=r(40),e.exports=function(e){function XMLDTDAttList(e,t,r,n,i,o){if(XMLDTDAttList.__super__.constructor.call(this,e),null==t)throw new Error("Missing DTD element name");if(null==r)throw new Error("Missing DTD attribute name");if(!n)throw new Error("Missing DTD attribute type");if(!i)throw new Error("Missing DTD attribute default");if(0!==i.indexOf("#")&&(i="#"+i),!i.match(/^(#REQUIRED|#IMPLIED|#FIXED|#DEFAULT)$/))throw new Error("Invalid default value type; expected: #REQUIRED, #IMPLIED, #FIXED or #DEFAULT");if(o&&!i.match(/^(#FIXED|#DEFAULT)$/))throw new Error("Default value only applies to #FIXED or #DEFAULT");this.elementName=this.stringify.eleName(t),this.attributeName=this.stringify.attName(r),this.attributeType=this.stringify.dtdAttType(n),this.defaultValue=this.stringify.dtdAttDefault(o),this.defaultValueType=i}return function(e,t){for(var r in t)n.call(t,r)&&(e[r]=t[r]);function ctor(){this.constructor=e}ctor.prototype=t.prototype,e.prototype=new ctor,e.__super__=t.prototype}(XMLDTDAttList,t),XMLDTDAttList.prototype.toString=function(e){return this.options.writer.set(e).dtdAttList(this)},XMLDTDAttList}()}).call(this)},function(e,t,r){(function(){var t,n,i={}.hasOwnProperty;n=r(75).isObject,t=r(40),e.exports=function(e){function XMLDTDEntity(e,t,r,i){if(XMLDTDEntity.__super__.constructor.call(this,e),null==r)throw new Error("Missing entity name");if(null==i)throw new Error("Missing entity value");if(this.pe=!!t,this.name=this.stringify.eleName(r),n(i)){if(!i.pubID&&!i.sysID)throw new Error("Public and/or system identifiers are required for an external entity");if(i.pubID&&!i.sysID)throw new Error("System identifier is required for a public external entity");if(null!=i.pubID&&(this.pubID=this.stringify.dtdPubID(i.pubID)),null!=i.sysID&&(this.sysID=this.stringify.dtdSysID(i.sysID)),null!=i.nData&&(this.nData=this.stringify.dtdNData(i.nData)),this.pe&&this.nData)throw new Error("Notation declaration is not allowed in a parameter entity")}else this.value=this.stringify.dtdEntityValue(i)}return function(e,t){for(var r in t)i.call(t,r)&&(e[r]=t[r]);function ctor(){this.constructor=e}ctor.prototype=t.prototype,e.prototype=new ctor,e.__super__=t.prototype}(XMLDTDEntity,t),XMLDTDEntity.prototype.toString=function(e){return this.options.writer.set(e).dtdEntity(this)},XMLDTDEntity}()}).call(this)},function(e,t,r){(function(){var t,n={}.hasOwnProperty;t=r(40),e.exports=function(e){function XMLDTDElement(e,t,r){if(XMLDTDElement.__super__.constructor.call(this,e),null==t)throw new Error("Missing DTD element name");r||(r="(#PCDATA)"),Array.isArray(r)&&(r="("+r.join(",")+")"),this.name=this.stringify.eleName(t),this.value=this.stringify.dtdElementValue(r)}return function(e,t){for(var r in t)n.call(t,r)&&(e[r]=t[r]);function ctor(){this.constructor=e}ctor.prototype=t.prototype,e.prototype=new ctor,e.__super__=t.prototype}(XMLDTDElement,t),XMLDTDElement.prototype.toString=function(e){return this.options.writer.set(e).dtdElement(this)},XMLDTDElement}()}).call(this)},function(e,t,r){(function(){var t,n={}.hasOwnProperty;t=r(40),e.exports=function(e){function XMLDTDNotation(e,t,r){if(XMLDTDNotation.__super__.constructor.call(this,e),null==t)throw new Error("Missing notation name");if(!r.pubID&&!r.sysID)throw new Error("Public or system identifiers are required for an external entity");this.name=this.stringify.eleName(t),null!=r.pubID&&(this.pubID=this.stringify.dtdPubID(r.pubID)),null!=r.sysID&&(this.sysID=this.stringify.dtdSysID(r.sysID))}return function(e,t){for(var r in t)n.call(t,r)&&(e[r]=t[r]);function ctor(){this.constructor=e}ctor.prototype=t.prototype,e.prototype=new ctor,e.__super__=t.prototype}(XMLDTDNotation,t),XMLDTDNotation.prototype.toString=function(e){return this.options.writer.set(e).dtdNotation(this)},XMLDTDNotation}()}).call(this)},function(e,t,r){(function(){var t,n={}.hasOwnProperty;t=r(40),e.exports=function(e){function XMLRaw(e,t){if(XMLRaw.__super__.constructor.call(this,e),null==t)throw new Error("Missing raw text");this.value=this.stringify.raw(t)}return function(e,t){for(var r in t)n.call(t,r)&&(e[r]=t[r]);function ctor(){this.constructor=e}ctor.prototype=t.prototype,e.prototype=new ctor,e.__super__=t.prototype}(XMLRaw,t),XMLRaw.prototype.clone=function(){return Object.create(this)},XMLRaw.prototype.toString=function(e){return this.options.writer.set(e).raw(this)},XMLRaw}()}).call(this)},function(e,t,r){(function(){var t,n={}.hasOwnProperty;t=r(40),e.exports=function(e){function XMLText(e,t){if(XMLText.__super__.constructor.call(this,e),null==t)throw new Error("Missing element text");this.value=this.stringify.eleText(t)}return function(e,t){for(var r in t)n.call(t,r)&&(e[r]=t[r]);function ctor(){this.constructor=e}ctor.prototype=t.prototype,e.prototype=new ctor,e.__super__=t.prototype}(XMLText,t),XMLText.prototype.clone=function(){return Object.create(this)},XMLText.prototype.toString=function(e){return this.options.writer.set(e).text(this)},XMLText}()}).call(this)},function(e,t,r){(function(){var t,n={}.hasOwnProperty;t=r(40),e.exports=function(e){function XMLProcessingInstruction(e,t,r){if(XMLProcessingInstruction.__super__.constructor.call(this,e),null==t)throw new Error("Missing instruction target");this.target=this.stringify.insTarget(t),r&&(this.value=this.stringify.insValue(r))}return function(e,t){for(var r in t)n.call(t,r)&&(e[r]=t[r]);function ctor(){this.constructor=e}ctor.prototype=t.prototype,e.prototype=new ctor,e.__super__=t.prototype}(XMLProcessingInstruction,t),XMLProcessingInstruction.prototype.clone=function(){return Object.create(this)},XMLProcessingInstruction.prototype.toString=function(e){return this.options.writer.set(e).processingInstruction(this)},XMLProcessingInstruction}()}).call(this)},function(e,t,r){var n=r(13),i=r(190),o=r(1),s={sha1:!0,sha256:!0,sha512:!0},a={rsa:!0,dsa:!0,ecdsa:!0};function HttpSignatureError(e,t){Error.captureStackTrace&&Error.captureStackTrace(this,t||HttpSignatureError),this.message=e,this.name=t.name}function InvalidAlgorithmError(e){HttpSignatureError.call(this,e,InvalidAlgorithmError)}o.inherits(HttpSignatureError,Error),o.inherits(InvalidAlgorithmError,HttpSignatureError),e.exports={HASH_ALGOS:s,PK_ALGOS:a,HttpSignatureError:HttpSignatureError,InvalidAlgorithmError:InvalidAlgorithmError,validateAlgorithm:function validateAlgorithm(e){var t=e.toLowerCase().split("-");if(2!==t.length)throw new InvalidAlgorithmError(t[0].toUpperCase()+" is not a valid algorithm");if("hmac"!==t[0]&&!a[t[0]])throw new InvalidAlgorithmError(t[0].toUpperCase()+" type keys are not supported");if(!s[t[1]])throw new InvalidAlgorithmError(t[1].toUpperCase()+" is not a supported hash algorithm");return t},sshKeyToPEM:function sshKeyToPEM(e){return n.string(e,"ssh_key"),i.parseKey(e,"ssh").toString("pem")},fingerprint:function fingerprint(e){return n.string(e,"ssh_key"),i.parseKey(e,"ssh").fingerprint("md5").toString("hex")},pemToRsaSSHKey:function pemToRsaSSHKey(e,t){n.equal("string",typeof e,"typeof pem");var r=i.parseKey(e,"pem");return r.comment=t,r.toString("ssh")}}},function(e,t,r){var n=r(117).BigInteger,i=n.prototype.Barrett;function ECFieldElementFp(e,t){this.x=t,this.q=e}function ECPointFp(e,t,r,i){this.curve=e,this.x=t,this.y=r,this.z=null==i?n.ONE:i,this.zinv=null}function ECCurveFp(e,t,r){this.q=e,this.a=this.fromBigInteger(t),this.b=this.fromBigInteger(r),this.infinity=new ECPointFp(this,null,null),this.reducer=new i(this.q)}ECFieldElementFp.prototype.equals=function feFpEquals(e){return e==this||this.q.equals(e.q)&&this.x.equals(e.x)},ECFieldElementFp.prototype.toBigInteger=function feFpToBigInteger(){return this.x},ECFieldElementFp.prototype.negate=function feFpNegate(){return new ECFieldElementFp(this.q,this.x.negate().mod(this.q))},ECFieldElementFp.prototype.add=function feFpAdd(e){return new ECFieldElementFp(this.q,this.x.add(e.toBigInteger()).mod(this.q))},ECFieldElementFp.prototype.subtract=function feFpSubtract(e){return new ECFieldElementFp(this.q,this.x.subtract(e.toBigInteger()).mod(this.q))},ECFieldElementFp.prototype.multiply=function feFpMultiply(e){return new ECFieldElementFp(this.q,this.x.multiply(e.toBigInteger()).mod(this.q))},ECFieldElementFp.prototype.square=function feFpSquare(){return new ECFieldElementFp(this.q,this.x.square().mod(this.q))},ECFieldElementFp.prototype.divide=function feFpDivide(e){return new ECFieldElementFp(this.q,this.x.multiply(e.toBigInteger().modInverse(this.q)).mod(this.q))},ECPointFp.prototype.getX=function pointFpGetX(){null==this.zinv&&(this.zinv=this.z.modInverse(this.curve.q));var e=this.x.toBigInteger().multiply(this.zinv);return this.curve.reduce(e),this.curve.fromBigInteger(e)},ECPointFp.prototype.getY=function pointFpGetY(){null==this.zinv&&(this.zinv=this.z.modInverse(this.curve.q));var e=this.y.toBigInteger().multiply(this.zinv);return this.curve.reduce(e),this.curve.fromBigInteger(e)},ECPointFp.prototype.equals=function pointFpEquals(e){return e==this||(this.isInfinity()?e.isInfinity():e.isInfinity()?this.isInfinity():!!e.y.toBigInteger().multiply(this.z).subtract(this.y.toBigInteger().multiply(e.z)).mod(this.curve.q).equals(n.ZERO)&&e.x.toBigInteger().multiply(this.z).subtract(this.x.toBigInteger().multiply(e.z)).mod(this.curve.q).equals(n.ZERO))},ECPointFp.prototype.isInfinity=function pointFpIsInfinity(){return null==this.x&&null==this.y||this.z.equals(n.ZERO)&&!this.y.toBigInteger().equals(n.ZERO)},ECPointFp.prototype.negate=function pointFpNegate(){return new ECPointFp(this.curve,this.x,this.y.negate(),this.z)},ECPointFp.prototype.add=function pointFpAdd(e){if(this.isInfinity())return e;if(e.isInfinity())return this;var t=e.y.toBigInteger().multiply(this.z).subtract(this.y.toBigInteger().multiply(e.z)).mod(this.curve.q),r=e.x.toBigInteger().multiply(this.z).subtract(this.x.toBigInteger().multiply(e.z)).mod(this.curve.q);if(n.ZERO.equals(r))return n.ZERO.equals(t)?this.twice():this.curve.getInfinity();var i=new n("3"),o=this.x.toBigInteger(),s=this.y.toBigInteger(),a=(e.x.toBigInteger(),e.y.toBigInteger(),r.square()),c=a.multiply(r),u=o.multiply(a),l=t.square().multiply(this.z),p=l.subtract(u.shiftLeft(1)).multiply(e.z).subtract(c).multiply(r).mod(this.curve.q),d=u.multiply(i).multiply(t).subtract(s.multiply(c)).subtract(l.multiply(t)).multiply(e.z).add(t.multiply(c)).mod(this.curve.q),h=c.multiply(this.z).multiply(e.z).mod(this.curve.q);return new ECPointFp(this.curve,this.curve.fromBigInteger(p),this.curve.fromBigInteger(d),h)},ECPointFp.prototype.twice=function pointFpTwice(){if(this.isInfinity())return this;if(0==this.y.toBigInteger().signum())return this.curve.getInfinity();var e=new n("3"),t=this.x.toBigInteger(),r=this.y.toBigInteger(),i=r.multiply(this.z),o=i.multiply(r).mod(this.curve.q),s=this.curve.a.toBigInteger(),a=t.square().multiply(e);n.ZERO.equals(s)||(a=a.add(this.z.square().multiply(s)));var c=(a=a.mod(this.curve.q)).square().subtract(t.shiftLeft(3).multiply(o)).shiftLeft(1).multiply(i).mod(this.curve.q),u=a.multiply(e).multiply(t).subtract(o.shiftLeft(1)).shiftLeft(2).multiply(o).subtract(a.square().multiply(a)).mod(this.curve.q),l=i.square().multiply(i).shiftLeft(3).mod(this.curve.q);return new ECPointFp(this.curve,this.curve.fromBigInteger(c),this.curve.fromBigInteger(u),l)},ECPointFp.prototype.multiply=function pointFpMultiply(e){if(this.isInfinity())return this;if(0==e.signum())return this.curve.getInfinity();var t,r=e,i=r.multiply(new n("3")),o=this.negate(),s=this;for(t=i.bitLength()-2;t>0;--t){s=s.twice();var a=i.testBit(t);a!=r.testBit(t)&&(s=s.add(a?this:o))}return s},ECPointFp.prototype.multiplyTwo=function pointFpMultiplyTwo(e,t,r){var n;n=e.bitLength()>r.bitLength()?e.bitLength()-1:r.bitLength()-1;for(var i=this.curve.getInfinity(),o=this.add(t);n>=0;)i=i.twice(),e.testBit(n)?i=r.testBit(n)?i.add(o):i.add(this):r.testBit(n)&&(i=i.add(t)),--n;return i},ECCurveFp.prototype.getQ=function curveFpGetQ(){return this.q},ECCurveFp.prototype.getA=function curveFpGetA(){return this.a},ECCurveFp.prototype.getB=function curveFpGetB(){return this.b},ECCurveFp.prototype.equals=function curveFpEquals(e){return e==this||this.q.equals(e.q)&&this.a.equals(e.a)&&this.b.equals(e.b)},ECCurveFp.prototype.getInfinity=function curveFpGetInfinity(){return this.infinity},ECCurveFp.prototype.fromBigInteger=function curveFpFromBigInteger(e){return new ECFieldElementFp(this.q,e)},ECCurveFp.prototype.reduce=function curveReduce(e){this.reducer.reduce(e)},ECCurveFp.prototype.encodePointHex=function curveFpEncodePointHex(e){if(e.isInfinity())return"00";var t=e.getX().toBigInteger().toString(16),r=e.getY().toBigInteger().toString(16),n=this.getQ().toString(16).length;for(n%2!=0&&n++;t.length<n;)t="0"+t;for(;r.length<n;)r="0"+r;return"04"+t+r},ECCurveFp.prototype.decodePointHex=function(e){var t;switch(parseInt(e.substr(0,2),16)){case 0:return this.infinity;case 2:t=!1;case 3:null==t&&(t=!0);var r=e.length-2,i=e.substr(2,r),o=this.fromBigInteger(new n(i,16)),s=o.multiply(o.square().add(this.getA())).add(this.getB()).sqrt();if(null==s)throw"Invalid point compression";var a=s.toBigInteger();return a.testBit(0)!=t&&(s=this.fromBigInteger(this.getQ().subtract(a))),new ECPointFp(this,o,s);case 4:case 6:case 7:r=(e.length-2)/2,i=e.substr(2,r);var c=e.substr(r+2,r);return new ECPointFp(this,this.fromBigInteger(new n(i,16)),this.fromBigInteger(new n(c,16)));default:return null}},ECCurveFp.prototype.encodeCompressedPointHex=function(e){if(e.isInfinity())return"00";var t=e.getX().toBigInteger().toString(16),r=this.getQ().toString(16).length;for(r%2!=0&&r++;t.length<r;)t="0"+t;return(e.getY().toBigInteger().isEven()?"02":"03")+t},ECFieldElementFp.prototype.getR=function(){if(null!=this.r)return this.r;this.r=null;var e=this.q.bitLength();e>128&&(-1==this.q.shiftRight(e-64).intValue()&&(this.r=n.ONE.shiftLeft(e).subtract(this.q)));return this.r},ECFieldElementFp.prototype.modMult=function(e,t){return this.modReduce(e.multiply(t))},ECFieldElementFp.prototype.modReduce=function(e){if(null!=this.getR()){for(var t=q.bitLength();e.bitLength()>t+1;){var r=e.shiftRight(t),i=e.subtract(r.shiftLeft(t));this.getR().equals(n.ONE)||(r=r.multiply(this.getR())),e=r.add(i)}for(;e.compareTo(q)>=0;)e=e.subtract(q)}else e=e.mod(q);return e},ECFieldElementFp.prototype.sqrt=function(){if(!this.q.testBit(0))throw"unsupported";if(this.q.testBit(1)){var e=new ECFieldElementFp(this.q,this.x.modPow(this.q.shiftRight(2).add(n.ONE),this.q));return e.square().equals(this)?e:null}var t=this.q.subtract(n.ONE),r=t.shiftRight(1);if(!this.x.modPow(r,this.q).equals(n.ONE))return null;var i,o,s=t.shiftRight(2).shiftLeft(1).add(n.ONE),a=this.x,c=modDouble(modDouble(a));do{var u;do{u=new n(this.q.bitLength(),new SecureRandom)}while(u.compareTo(this.q)>=0||!u.multiply(u).subtract(c).modPow(r,this.q).equals(t));var l=this.lucasSequence(u,a,s);if(i=l[0],o=l[1],this.modMult(o,o).equals(c))return o.testBit(0)&&(o=o.add(q)),o=o.shiftRight(1),new ECFieldElementFp(q,o)}while(i.equals(n.ONE)||i.equals(t));return null},ECFieldElementFp.prototype.lucasSequence=function(e,t,r){for(var i=r.bitLength(),o=r.getLowestSetBit(),s=n.ONE,a=n.TWO,c=e,u=n.ONE,l=n.ONE,p=i-1;p>=o+1;--p)u=this.modMult(u,l),r.testBit(p)?(l=this.modMult(u,t),s=this.modMult(s,c),a=this.modReduce(c.multiply(a).subtract(e.multiply(u))),c=this.modReduce(c.multiply(c).subtract(l.shiftLeft(1)))):(l=u,s=this.modReduce(s.multiply(a).subtract(u)),c=this.modReduce(c.multiply(a).subtract(e.multiply(u))),a=this.modReduce(a.multiply(a).subtract(u.shiftLeft(1))));u=this.modMult(u,l),l=this.modMult(u,t),s=this.modReduce(s.multiply(a).subtract(u)),a=this.modReduce(c.multiply(a).subtract(e.multiply(u))),u=this.modMult(u,l);for(p=1;p<=o;++p)s=this.modMult(s,a),a=this.modReduce(a.multiply(a).subtract(u.shiftLeft(1))),u=this.modMult(u,u);return[s,a]};t={ECCurveFp:ECCurveFp,ECPointFp:ECPointFp,ECFieldElementFp:ECFieldElementFp};e.exports=t},function(e,t,r){e.exports={read:function read(e,t){return u.read(e,t)},readSSHPrivate:function readSSHPrivate(e,t,c){var u=(t=new p({buffer:t})).readCString();i.strictEqual(u,h,"bad magic string");var f=t.readString(),m=t.readString(),g=t.readBuffer();if(1!==t.readInt())throw new Error("OpenSSH-format key file contains multiple keys: this is unsupported.");var y=t.readBuffer();if("public"===e)return i.ok(t.atEnd(),"excess bytes left after key"),l.read(y);var v=t.readBuffer();i.ok(t.atEnd(),"excess bytes left after key");var b=new p({buffer:g});switch(m){case"none":if("none"!==f)throw new Error('OpenSSH-format key uses KDF "none" but specifies a cipher other than "none"');break;case"bcrypt":var _=b.readBuffer(),w=b.readInt(),E=s.opensshCipherInfo(f);if(void 0===n&&(n=r(306)),"string"==typeof c.passphrase&&(c.passphrase=o.from(c.passphrase,"utf-8")),!o.isBuffer(c.passphrase))throw new d.KeyEncryptedError(c.filename,"OpenSSH");var S=new Uint8Array(c.passphrase),C=new Uint8Array(_),x=new Uint8Array(E.keySize+E.blockSize),k=n.pbkdf(S,S.length,C,C.length,x,x.length,w);if(0!==k)throw new Error("bcrypt_pbkdf function returned failure, parameters invalid");var R=(x=o.from(x)).slice(0,E.keySize),T=x.slice(E.keySize,E.keySize+E.blockSize),O=a.createDecipheriv(E.opensslName,R,T);O.setAutoPadding(!1);var I,N=[];for(O.once("error",function(e){if(-1!==e.toString().indexOf("bad decrypt"))throw new Error("Incorrect passphrase supplied, could not decrypt key");throw e}),O.write(v),O.end();null!==(I=O.read());)N.push(I);v=o.concat(N);break;default:throw new Error('OpenSSH-format key uses unknown KDF "'+m+'"')}var A=(t=new p({buffer:v})).readInt(),P=t.readInt();if(A!==P)throw new Error("Incorrect passphrase supplied, could not decrypt key");var L={},D=l.readInternal(L,"private",t.remainder());t.skip(L.consumed);var M=t.readString();return D.comment=M,D},write:function write(e,t){var u;u=c.isPrivateKey(e)?e.toPublic():e;var l,d,f="none",m="none",g=o.alloc(0),y={blockSize:8};void 0!==t&&("string"==typeof(l=t.passphrase)&&(l=o.from(l,"utf-8")),void 0!==l&&(i.buffer(l,"options.passphrase"),i.optionalString(t.cipher,"options.cipher"),void 0===(f=t.cipher)&&(f="aes128-ctr"),y=s.opensshCipherInfo(f),m="bcrypt"));if(c.isPrivateKey(e)){d=new p({});var v=a.randomBytes(4).readUInt32BE(0);d.writeInt(v),d.writeInt(v),d.write(e.toBuffer("rfc4253")),d.writeString(e.comment||"");for(var b=1;d._offset%y.blockSize!=0;)d.writeChar(b++);d=d.toBuffer()}switch(m){case"none":break;case"bcrypt":var _=a.randomBytes(16),w=new p({});w.writeBuffer(_),w.writeInt(16),g=w.toBuffer(),void 0===n&&(n=r(306));var E=new Uint8Array(l),S=new Uint8Array(_),C=new Uint8Array(y.keySize+y.blockSize),x=n.pbkdf(E,E.length,S,S.length,C,C.length,16);if(0!==x)throw new Error("bcrypt_pbkdf function returned failure, parameters invalid");var k=(C=o.from(C)).slice(0,y.keySize),R=C.slice(y.keySize,y.keySize+y.blockSize),T=a.createCipheriv(y.opensslName,k,R);T.setAutoPadding(!1);var O,I=[];for(T.once("error",function(e){throw e}),T.write(d),T.end();null!==(O=T.read());)I.push(O);d=o.concat(I);break;default:throw new Error("Unsupported kdf "+m)}var N,A=new p({});A.writeCString(h),A.writeString(f),A.writeString(m),A.writeBuffer(g),A.writeInt(1),A.writeBuffer(u.toBuffer("rfc4253")),d&&A.writeBuffer(d);A=A.toBuffer(),N=c.isPrivateKey(e)?"OPENSSH PRIVATE KEY":"OPENSSH PUBLIC KEY";var P=A.toString("base64"),L=P.length+P.length/70+18+16+2*N.length+10;A=o.alloc(L);var D=0;D+=A.write("-----BEGIN "+N+"-----\n",D);for(var M=0;M<P.length;){var j=M+70;j>P.length&&(j=P.length),D+=A.write(P.slice(M,j),D),A[D++]=10,M=j}return D+=A.write("-----END "+N+"-----\n",D),A.slice(0,D)}};var n,i=r(13),o=(r(66),r(19).Buffer),s=(r(32),r(26)),a=r(12),c=(r(30),r(33)),u=r(77),l=r(85),p=r(119),d=r(64);var h="openssh-key-v1"},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});for(var n,i=t.alpha={"en-US":/^[A-Z]+$/i,"bg-BG":/^[-]+$/i,"cs-CZ":/^[A-Z]+$/i,"da-DK":/^[A-Z]+$/i,"de-DE":/^[A-Z]+$/i,"el-GR":/^[-]+$/i,"es-ES":/^[A-Z]+$/i,"fr-FR":/^[A-Z]+$/i,"it-IT":/^[A-Z]+$/i,"nb-NO":/^[A-Z]+$/i,"nl-NL":/^[A-Z]+$/i,"nn-NO":/^[A-Z]+$/i,"hu-HU":/^[A-Z]+$/i,"pl-PL":/^[A-Z]+$/i,"pt-PT":/^[A-Z]+$/i,"ru-RU":/^[-]+$/i,"sk-SK":/^[A-Z]+$/i,"sr-RS@latin":/^[A-Z]+$/i,"sr-RS":/^[-]+$/i,"sv-SE":/^[A-Z]+$/i,"tr-TR":/^[A-Z]+$/i,"uk-UA":/^[-I]+$/i,ar:/^[]+$/},o=t.alphanumeric={"en-US":/^[0-9A-Z]+$/i,"bg-BG":/^[0-9-]+$/i,"cs-CZ":/^[0-9A-Z]+$/i,"da-DK":/^[0-9A-Z]+$/i,"de-DE":/^[0-9A-Z]+$/i,"el-GR":/^[0-9-]+$/i,"es-ES":/^[0-9A-Z]+$/i,"fr-FR":/^[0-9A-Z]+$/i,"it-IT":/^[0-9A-Z]+$/i,"hu-HU":/^[0-9A-Z]+$/i,"nb-NO":/^[0-9A-Z]+$/i,"nl-NL":/^[0-9A-Z]+$/i,"nn-NO":/^[0-9A-Z]+$/i,"pl-PL":/^[0-9A-Z]+$/i,"pt-PT":/^[0-9A-Z]+$/i,"ru-RU":/^[0-9-]+$/i,"sk-SK":/^[0-9A-Z]+$/i,"sr-RS@latin":/^[0-9A-Z]+$/i,"sr-RS":/^[0-9-]+$/i,"sv-SE":/^[0-9A-Z]+$/i,"tr-TR":/^[0-9A-Z]+$/i,"uk-UA":/^[0-9-I]+$/i,ar:/^[0-9]+$/},s=t.decimal={"en-US":".",ar:""},a=t.englishLocales=["AU","GB","HK","IN","NZ","ZA","ZM"],c=0;c<a.length;c++)i[n="en-"+a[c]]=i["en-US"],o[n]=o["en-US"],s[n]=s["en-US"];for(var u,l=t.arabicLocales=["AE","BH","DZ","EG","IQ","JO","KW","LB","LY","MA","QM","QA","SA","SD","SY","TN","YE"],p=0;p<l.length;p++)i[u="ar-"+l[p]]=i.ar,o[u]=o.ar,s[u]=s.ar;for(var d=t.dotDecimal=[],h=t.commaDecimal=["bg-BG","cs-CZ","da-DK","de-DE","el-GR","es-ES","fr-FR","it-IT","hu-HU","nb-NO","nn-NO","nl-NL","pl-Pl","pt-PT","ru-RU","sr-RS@latin","sr-RS","sv-SE","tr-TR","uk-UA"],f=0;f<d.length;f++)s[d[f]]=s["en-US"];for(var m=0;m<h.length;m++)s[h[m]]=",";i["pt-BR"]=i["pt-PT"],o["pt-BR"]=o["pt-PT"],s["pt-BR"]=s["pt-PT"]},function(e,t,r){"use strict";var n,i=this&&this.__extends||(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])},function(e,t){function __(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(__.prototype=t.prototype,new __)});Object.defineProperty(t,"__esModule",{value:!0});var o=r(5),s=r(4),a=function(e){function SharedAccessKeyAuthenticationProvider(t,r,n){var i=e.call(this)||this;if(i.type=s.AuthenticationType.Token,i._tokenValidTimeInSeconds=3600,i._tokenRenewalMarginInSeconds=900,i._credentials=t,r&&(i._tokenValidTimeInSeconds=r),n&&(i._tokenRenewalMarginInSeconds=n),i._tokenValidTimeInSeconds<=i._tokenRenewalMarginInSeconds)throw new s.errors.ArgumentError("tokenRenewalMarginInSeconds must be less than tokenValidTimeInSeconds");return i}return i(SharedAccessKeyAuthenticationProvider,e),SharedAccessKeyAuthenticationProvider.prototype.getDeviceCredentials=function(e){var t=this;return s.callbackToPromise(function(e){t._shouldRenewToken()?t._renewToken(function(r,n){r?e(r):(t._scheduleNextExpiryTimeout(),e(null,n))}):e(null,t._credentials)},e)},SharedAccessKeyAuthenticationProvider.prototype.stop=function(){this._renewalTimeout&&(clearTimeout(this._renewalTimeout),this._renewalTimeout=null)},SharedAccessKeyAuthenticationProvider.prototype._sign=function(e,t,r){r(null,s.SharedAccessSignature.create(e,this._credentials.sharedAccessKeyName,this._credentials.sharedAccessKey,t).toString())},SharedAccessKeyAuthenticationProvider.prototype._shouldRenewToken=function(){if(isNaN(this._currentTokenExpiryTimeInSeconds))return!0;var e=Math.floor(Date.now()/1e3);return this._currentTokenExpiryTimeInSeconds-e<this._tokenRenewalMarginInSeconds},SharedAccessKeyAuthenticationProvider.prototype._renewToken=function(e){var t=this,r=Math.floor(Date.now()/1e3)+this._tokenValidTimeInSeconds,n=this._credentials.host+"/devices/"+this._credentials.deviceId;this._credentials.moduleId&&(n+="/modules/"+this._credentials.moduleId);var i=s.encodeUriComponentStrict(n);this._sign(i,r,function(n,i){n?e(n):(t._currentTokenExpiryTimeInSeconds=r,t._credentials.sharedAccessSignature=i,e(null,t._credentials))})},SharedAccessKeyAuthenticationProvider.prototype._expiryTimerHandler=function(){var e=this;this._renewalTimeout&&(clearTimeout(this._renewalTimeout),this._renewalTimeout=null),this._renewToken(function(t){t?e.emit("error",t):(e._scheduleNextExpiryTimeout(),e.emit("newTokenAvailable",e._credentials))})},SharedAccessKeyAuthenticationProvider.prototype._scheduleNextExpiryTimeout=function(){var e=this;this._renewalTimeout&&(clearTimeout(this._renewalTimeout),this._renewalTimeout=null);var t=1e3*(this._tokenValidTimeInSeconds-this._tokenRenewalMarginInSeconds);this._renewalTimeout=setTimeout(function(){return e._expiryTimerHandler()},t)},SharedAccessKeyAuthenticationProvider.fromConnectionString=function(e,t,r){if(!e)throw new ReferenceError("connectionString cannot be '"+e+"'");var n=s.ConnectionString.parse(e,["DeviceId","HostName","SharedAccessKey"]);return new SharedAccessKeyAuthenticationProvider({host:n.HostName,gatewayHostName:n.GatewayHostName,deviceId:n.DeviceId,moduleId:n.ModuleId,sharedAccessKeyName:n.SharedAccessKeyName,sharedAccessKey:n.SharedAccessKey},t,r)},SharedAccessKeyAuthenticationProvider}(o.EventEmitter);t.SharedAccessKeyAuthenticationProvider=a},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(4);t.parse=function parse(e){return n.ConnectionString.parse(e,["HostName","SharedAccessKeyName","SharedAccessKey"])}},function(e,t,r){"use strict";"undefined"==typeof process||"renderer"===process.type||!0===process.browser||process.__nwjs?e.exports=r(875):e.exports=r(877)},function(e,t,r){"use strict";var n,i=this&&this.__extends||(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])},function(e,t){function __(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(__.prototype=t.prototype,new __)});Object.defineProperty(t,"__esModule",{value:!0});var o=r(78),s=r(159),a=r(35),c=r(5),u=r(4),l=s("azure-iot-amqp-base:ReceiverLink"),p=function(e){function ReceiverLink(t,r,n){var i=e.call(this)||this;if(i._receiverCloseOccurred=!1,i._linkAddress=t,i._linkOptions=r,i._rheaSession=n,i._undisposedDeliveries=[],i._combinedOptions={source:t},r)for(var s in r)i._combinedOptions[s]=r[s];var c=function(e){i._fsm.handle("receiverOpenEvent",e)},p=function(e){i._fsm.handle("receiverCloseEvent",e)},d=function(e){i._fsm.handle("receiverErrorEvent",e)},h=function(e){i._undisposedDeliveries.push({msg:e.message,delivery:e.delivery}),i.emit("message",e.message)},f=function(e){i._rheaReceiver[e]("receiver_error",d),i._rheaReceiver[e]("receiver_close",p),i._rheaReceiver[e]("receiver_open",c),i._rheaReceiver[e]("message",h)};return i._fsm=new o.Fsm({initialState:"detached",namespace:"receiverLink",states:{detached:{_onEnter:function(e,t){i._rheaReceiver=null,i._rheaReceiverName=null,e?i._safeCallback(e,t):t&&i.emit("error",t)},attach:function(e){i._fsm.transition("attaching",e)},detach:function(e,t){l("while detached - detach for receiver link "+i._linkAddress),i._safeCallback(e,t)},forceDetach:function(){l("while detached - force detach for receiver link "+i._linkAddress)},accept:function(e,t){return t(new u.errors.DeviceMessageLockLostError)},reject:function(e,t){return t(new u.errors.DeviceMessageLockLostError)},abandon:function(e,t){return t(new u.errors.DeviceMessageLockLostError)}},attaching:{_onEnter:function(e){i._attachingCallback=e,i._indicatedError=void 0,i._receiverCloseOccurred=!1,i._rheaReceiverName="rheaReceiver_"+a.v4(),i._combinedOptions.name=i._rheaReceiverName,l("attaching receiver name: "+i._rheaReceiverName+" with address: "+i._linkAddress),i._rheaReceiver=i._rheaSession.open_receiver(i._combinedOptions),f("on")},receiverOpenEvent:function(e){l("In receiver attaching state - open event for "+e.receiver.name);var t=i._attachingCallback;i._attachingCallback=null,i._fsm.transition("attached",t)},receiverErrorEvent:function(e){l("In receiver attaching state - error event for "+e.receiver.name+" error is: "+i._getErrorName(e.receiver.error)),i._indicatedError=e.receiver.error},receiverCloseEvent:function(e){l("in receiver attaching state - close event for "+e.receiver.name),f("removeListener");var t=i._indicatedError,r=i._attachingCallback;i._indicatedError=void 0,i._attachingCallback=void 0,i._receiverCloseOccurred=!0,i._fsm.transition("detached",r,t)},attach:null,detach:function(e,t){l("Detaching while attaching of rhea receiver link "+i._linkAddress),f("removeListener");var r=t||i._indicatedError||new Error("Unexpected link detach while attaching"),n=i._attachingCallback;i._indicatedError=void 0,i._attachingCallback=void 0,n&&n(r),i._fsm.transition("detached",e,r)},forceDetach:function(e){l("Force detaching while attaching of rhea receiver link "+i._linkAddress),f("removeListener");var t=e||i._indicatedError,r=i._attachingCallback;i._indicatedError=void 0,i._attachingCallback=void 0,r(t),i._fsm.transition("detached",void 0,t)},accept:function(e,t){return t(new u.errors.DeviceMessageLockLostError)},reject:function(e,t){return t(new u.errors.DeviceMessageLockLostError)},abandon:function(e,t){return t(new u.errors.DeviceMessageLockLostError)}},attached:{_onEnter:function(e,t){e&&e(t)},receiverErrorEvent:function(e){l("in receiver attached state - error event for "+e.receiver.name+" error is: "+i._getErrorName(e.receiver.error)),i._indicatedError=e.receiver.error},receiverCloseEvent:function(e){var t=i._indicatedError;i._indicatedError=void 0,i._receiverCloseOccurred=!0,l("in receiver attached state - close event for "+e.receiver.name+" already indicated error is: "+i._getErrorName(t)),t?e.container.emit("azure-iot-amqp-base:error-indicated",t):i._fsm.transition("detaching")},attach:function(e){i._safeCallback(e)},detach:function(e,t){l("while attached - detach for receiver link "+i._linkAddress+" callback: "+e+" error: "+i._getErrorName(t)),i._fsm.transition("detaching",e,t)},forceDetach:function(e){l("while attached - force detach for receiver link "+i._linkAddress),f("removeListener"),i._rheaReceiver.remove(),i._fsm.transition("detached",void 0,e)},accept:function(e,t){var r=i._findDeliveryRecord(e);r?(r.accept(),i._safeCallback(t,null,new u.results.MessageCompleted)):i._safeCallback(t,new u.errors.DeviceMessageLockLostError)},reject:function(e,t){var r=i._findDeliveryRecord(e);r?(r.reject(),i._safeCallback(t,null,new u.results.MessageRejected)):i._safeCallback(t,new u.errors.DeviceMessageLockLostError)},abandon:function(e,t){var r=i._findDeliveryRecord(e);r?(r.release(),i._safeCallback(t,null,new u.results.MessageAbandoned)):i._safeCallback(t,new u.errors.DeviceMessageLockLostError)}},detaching:{_onEnter:function(e,t){l("Detaching of rhea receiver link "+i._linkAddress),i._detachingCallback=e,i._indicatedError=t,i._rheaReceiver.close(),i._receiverCloseOccurred&&(i._detachingCallback=void 0,i._indicatedError=void 0,i._fsm.transition("detached",e,t))},receiverErrorEvent:function(e){l("in receiver detaching state - error event for "+e.receiver.name+" error is: "+i._getErrorName(e.receiver.error)),i._indicatedError=i._indicatedError||e.receiver.error},receiverCloseEvent:function(e){l("in receiver detaching state - close event for "+e.receiver.name+" already indicated error is: "+i._getErrorName(i._indicatedError));var t=i._indicatedError,r=i._detachingCallback;i._detachingCallback=void 0,i._indicatedError=void 0,f("removeListener"),i._fsm.transition("detached",r,t)},detach:function(e,t){l("while detaching - detach for receiver link "+i._linkAddress),e&&(t=t||new Error("Detached invoked while detaching."),i._safeCallback(e,t))},forceDetach:function(e){l("while detaching - Force detaching for receiver link "+i._linkAddress),i._rheaReceiver.remove();var t=i._detachingCallback,r=e||i._indicatedError||new Error("Detach preempted by force");i._detachingCallback=void 0,i._indicatedError=void 0,f("removeListener"),t&&t(r),i._fsm.transition("detached",void 0,e)},"*":function(){i._fsm.deferUntilTransition("detached")}}}}),i._fsm.on("transition",function(e){l(e.fromState+" -> "+e.toState+" (action:"+e.action+")")}),i.on("removeListener",function(e){"message"===e&&0===i.listeners("message").length&&i._fsm.handle("detach")}),i.on("newListener",function(e){"message"===e&&i._fsm.handle("attach")}),i}return i(ReceiverLink,e),ReceiverLink.prototype.detach=function(e,t){this._fsm.handle("detach",e,t)},ReceiverLink.prototype.forceDetach=function(e){this._fsm.handle("forceDetach",e)},ReceiverLink.prototype.attach=function(e){this._fsm.handle("attach",e)},ReceiverLink.prototype.accept=function(e,t){if(!e)throw new ReferenceError("Invalid message object.");this._fsm.handle("accept",e,t)},ReceiverLink.prototype.complete=function(e,t){this.accept(e,t)},ReceiverLink.prototype.reject=function(e,t){if(!e)throw new ReferenceError("Invalid message object.");this._fsm.handle("reject",e,t)},ReceiverLink.prototype.abandon=function(e,t){if(!e)throw new ReferenceError("Invalid message object.");this._fsm.handle("abandon",e,t)},ReceiverLink.prototype._findDeliveryRecord=function(e){for(var t=0;t<this._undisposedDeliveries.length;t++)if(this._undisposedDeliveries[t].msg===e){var r=this._undisposedDeliveries[t].delivery;return this._undisposedDeliveries.splice(t,1),r}},ReceiverLink.prototype._safeCallback=function(e,t,r){e&&process.nextTick(function(){return e(t,r)})},ReceiverLink.prototype._getErrorName=function(e){return e?e.condition?"(amqp error) "+e.condition:e.name?"(javascript error) "+e.name:"unknown error type":"error is falsy"},ReceiverLink}(c.EventEmitter);t.ReceiverLink=p},function(e,t,r){"use strict";const n=r(366),i=r(112),o=r(216),s=r(125),a=Buffer.from([0,0,255,255]),c=Buffer.from([0]),u=Symbol("permessage-deflate"),l=Symbol("write-in-progress"),p=Symbol("pending-close"),d=Symbol("total-length"),h=Symbol("callback"),f=Symbol("buffers"),m=Symbol("error");let g;function deflateOnData(e){this[f].push(e),this[d]+=e.length}function inflateOnData(e){this[d]+=e.length,this[u]._maxPayload<1||this[d]<=this[u]._maxPayload?this[f].push(e):(this[m]=new RangeError("Max payload size exceeded"),this[m][s.kStatusCode]=1009,this.removeListener("data",inflateOnData),this.reset())}function inflateOnError(e){this[u]._inflate=null,e[s.kStatusCode]=1007,this[h](e)}e.exports=class PerMessageDeflate{constructor(e,t,r){if(this._maxPayload=0|r,this._options=e||{},this._threshold=void 0!==this._options.threshold?this._options.threshold:1024,this._isServer=!!t,this._deflate=null,this._inflate=null,this.params=null,!g){const e=void 0!==this._options.concurrencyLimit?this._options.concurrencyLimit:10;g=new n({concurrency:e})}}static get extensionName(){return"permessage-deflate"}offer(){const e={};return this._options.serverNoContextTakeover&&(e.server_no_context_takeover=!0),this._options.clientNoContextTakeover&&(e.client_no_context_takeover=!0),this._options.serverMaxWindowBits&&(e.server_max_window_bits=this._options.serverMaxWindowBits),this._options.clientMaxWindowBits?e.client_max_window_bits=this._options.clientMaxWindowBits:null==this._options.clientMaxWindowBits&&(e.client_max_window_bits=!0),e}accept(e){return e=this.normalizeParams(e),this.params=this._isServer?this.acceptAsServer(e):this.acceptAsClient(e),this.params}cleanup(){this._inflate&&(this._inflate[l]?this._inflate[p]=!0:(this._inflate.close(),this._inflate=null)),this._deflate&&(this._deflate[l]?this._deflate[p]=!0:(this._deflate.close(),this._deflate=null))}acceptAsServer(e){const t=this._options,r=e.find(e=>!(!1===t.serverNoContextTakeover&&e.server_no_context_takeover||e.server_max_window_bits&&(!1===t.serverMaxWindowBits||"number"==typeof t.serverMaxWindowBits&&t.serverMaxWindowBits>e.server_max_window_bits)||"number"==typeof t.clientMaxWindowBits&&!e.client_max_window_bits));if(!r)throw new Error("None of the extension offers can be accepted");return t.serverNoContextTakeover&&(r.server_no_context_takeover=!0),t.clientNoContextTakeover&&(r.client_no_context_takeover=!0),"number"==typeof t.serverMaxWindowBits&&(r.server_max_window_bits=t.serverMaxWindowBits),"number"==typeof t.clientMaxWindowBits?r.client_max_window_bits=t.clientMaxWindowBits:!0!==r.client_max_window_bits&&!1!==t.clientMaxWindowBits||delete r.client_max_window_bits,r}acceptAsClient(e){const t=e[0];if(!1===this._options.clientNoContextTakeover&&t.client_no_context_takeover)throw new Error('Unexpected parameter "client_no_context_takeover"');if(t.client_max_window_bits){if(!1===this._options.clientMaxWindowBits||"number"==typeof this._options.clientMaxWindowBits&&t.client_max_window_bits>this._options.clientMaxWindowBits)throw new Error('Unexpected or invalid parameter "client_max_window_bits"')}else"number"==typeof this._options.clientMaxWindowBits&&(t.client_max_window_bits=this._options.clientMaxWindowBits);return t}normalizeParams(e){return e.forEach(e=>{Object.keys(e).forEach(t=>{var r=e[t];if(r.length>1)throw new Error(`Parameter "${t}" must have only a single value`);if(r=r[0],"client_max_window_bits"===t){if(!0!==r){const e=+r;if(!Number.isInteger(e)||e<8||e>15)throw new TypeError(`Invalid value for parameter "${t}": ${r}`);r=e}else if(!this._isServer)throw new TypeError(`Invalid value for parameter "${t}": ${r}`)}else if("server_max_window_bits"===t){const e=+r;if(!Number.isInteger(e)||e<8||e>15)throw new TypeError(`Invalid value for parameter "${t}": ${r}`);r=e}else{if("client_no_context_takeover"!==t&&"server_no_context_takeover"!==t)throw new Error(`Unknown parameter "${t}"`);if(!0!==r)throw new TypeError(`Invalid value for parameter "${t}": ${r}`)}e[t]=r})}),e}decompress(e,t,r){g.push(n=>{this._decompress(e,t,(e,t)=>{n(),r(e,t)})})}compress(e,t,r){g.push(n=>{this._compress(e,t,(e,t)=>{n(),r(e,t)})})}_decompress(e,t,r){const n=this._isServer?"client":"server";if(!this._inflate){const e=`${n}_max_window_bits`,t="number"!=typeof this.params[e]?i.Z_DEFAULT_WINDOWBITS:this.params[e];this._inflate=i.createInflateRaw(Object.assign({},this._options.zlibInflateOptions,{windowBits:t})),this._inflate[u]=this,this._inflate[d]=0,this._inflate[f]=[],this._inflate.on("error",inflateOnError),this._inflate.on("data",inflateOnData)}this._inflate[h]=r,this._inflate[l]=!0,this._inflate.write(e),t&&this._inflate.write(a),this._inflate.flush(()=>{const e=this._inflate[m];if(e)return this._inflate.close(),this._inflate=null,void r(e);const i=o.concat(this._inflate[f],this._inflate[d]);t&&this.params[`${n}_no_context_takeover`]||this._inflate[p]?(this._inflate.close(),this._inflate=null):(this._inflate[l]=!1,this._inflate[d]=0,this._inflate[f]=[]),r(null,i)})}_compress(e,t,r){if(!e||0===e.length)return void process.nextTick(r,null,c);const n=this._isServer?"server":"client";if(!this._deflate){const e=`${n}_max_window_bits`,t="number"!=typeof this.params[e]?i.Z_DEFAULT_WINDOWBITS:this.params[e];this._deflate=i.createDeflateRaw(Object.assign({},this._options.zlibDeflateOptions,{windowBits:t})),this._deflate[d]=0,this._deflate[f]=[],this._deflate.on("data",deflateOnData)}this._deflate[l]=!0,this._deflate.write(e),this._deflate.flush(i.Z_SYNC_FLUSH,()=>{var e=o.concat(this._deflate[f],this._deflate[d]);t&&(e=e.slice(0,e.length-4)),t&&this.params[`${n}_no_context_takeover`]||this._deflate[p]?(this._deflate.close(),this._deflate=null):(this._deflate[l]=!1,this._deflate[d]=0,this._deflate[f]=[]),r(null,e)})}}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.createResultWithIncomingMessage=function createResultWithIncomingMessage(e,t){return{result:e,message:t}}},function(e){e.exports={_args:[["azure-iothub@1.8.2","/home/travis/build/microsoft/vscode-azure-iot-toolkit"]],_from:"azure-iothub@1.8.2",_id:"azure-iothub@1.8.2",_inBundle:!1,_integrity:"sha512-qwepbdrJSgStnlZuYug098gnxgpjxOKcF2olLpT9Ww2J+et0d3/gVL8UlqhhS64OSokze3saT84logyb+5yRJA==",_location:"/azure-iothub",_phantomChildren:{lodash:"4.17.11"},_requested:{type:"version",registry:!0,raw:"azure-iothub@1.8.2",name:"azure-iothub",escapedName:"azure-iothub",rawSpec:"1.8.2",saveSpec:null,fetchSpec:"1.8.2"},_requiredBy:["/"],_resolved:"https://registry.npmjs.org/azure-iothub/-/azure-iothub-1.8.2.tgz",_spec:"1.8.2",_where:"/home/travis/build/microsoft/vscode-azure-iot-toolkit",author:{name:"Microsoft Corporation"},bugs:{url:"https://github.com/Azure/azure-iot-sdk-node/issues"},dependencies:{async:"^2.6.1","azure-iot-amqp-base":"2.1.2","azure-iot-common":"1.8.2","azure-iot-http-base":"1.8.2",debug:"^3.1.0",lodash:"^4.17.10",machina:"^4.0.1",rhea:"^0.2.17"},description:"Azure IoT SDK - IoT Hub",devDependencies:{"@types/debug":"0.0.29","@types/node":"^7.0.5",chai:"^3.5.0",istanbul:"^0.4.4",jshint:"^2.9.2",mocha:"^5.2.0",sinon:"^4.0.2",tslint:"^5.1.0",typescript:"2.9.2",uuid:"^3.2.1"},engines:{node:">= 0.10"},homepage:"https://github.com/Azure/azure-iot-sdk-node#readme",license:"MIT",main:"iothub.js",name:"azure-iothub",repository:{type:"git",url:"git+https://github.com/Azure/azure-iot-sdk-node.git"},scripts:{alltest:"istanbul cover node_modules/mocha/bin/_mocha -- --reporter spec test/_*_test*.js","alltest-min":"istanbul cover --report none node_modules/mocha/bin/_mocha -- --reporter dot test/_*_test*.js",build:"tsc","check-cover":"istanbul check-coverage --statements 96 --branches 92  --lines 97 --functions 90",ci:"npm -s run lint && npm -s run build && npm -s run alltest-min && npm -s run check-cover",cover:"istanbul cover node_modules/mocha/bin/_mocha -- --reporter spec test/_*_test*.js",lint:"tslint --exclude ./samples --project . -c ../tslint.json",test:"npm -s run lint && npm -s run build && npm -s run unittest",unittest:"istanbul cover node_modules/mocha/bin/_mocha -- --reporter spec test/_*_test.js","unittest-min":"istanbul cover --report none node_modules/mocha/bin/_mocha -- --reporter dot test/_*_test.js"},typings:"iothub.d.ts",version:"1.8.2"}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n=r(128),i=r(385);!function(e){e[e.Continue=100]="Continue",e[e.SwitchingProtocols=101]="SwitchingProtocols",e[e.OK=200]="OK",e[e.Created=201]="Created",e[e.Accepted=202]="Accepted",e[e.NonAuthoritativeInformation=203]="NonAuthoritativeInformation",e[e.NoContent=204]="NoContent",e[e.ResetContent=205]="ResetContent",e[e.PartialContent=206]="PartialContent",e[e.Ambiguous=300]="Ambiguous",e[e.MultipleChoices=300]="MultipleChoices",e[e.Moved=301]="Moved",e[e.MovedPermanently=301]="MovedPermanently",e[e.Found=302]="Found",e[e.Redirect=302]="Redirect",e[e.RedirectMethod=303]="RedirectMethod",e[e.SeeOther=303]="SeeOther",e[e.NotModified=304]="NotModified",e[e.UseProxy=305]="UseProxy",e[e.Unused=306]="Unused",e[e.RedirectKeepVerb=307]="RedirectKeepVerb",e[e.TemporaryRedirect=307]="TemporaryRedirect",e[e.BadRequest=400]="BadRequest",e[e.Unauthorized=401]="Unauthorized",e[e.PaymentRequired=402]="PaymentRequired",e[e.Forbidden=403]="Forbidden",e[e.NotFound=404]="NotFound",e[e.MethodNotAllowed=405]="MethodNotAllowed",e[e.NotAcceptable=406]="NotAcceptable",e[e.ProxyAuthenticationRequired=407]="ProxyAuthenticationRequired",e[e.RequestTimeout=408]="RequestTimeout",e[e.Conflict=409]="Conflict",e[e.Gone=410]="Gone",e[e.LengthRequired=411]="LengthRequired",e[e.PreconditionFailed=412]="PreconditionFailed",e[e.RequestEntityTooLarge=413]="RequestEntityTooLarge",e[e.RequestUriTooLong=414]="RequestUriTooLong",e[e.UnsupportedMediaType=415]="UnsupportedMediaType",e[e.RequestedRangeNotSatisfiable=416]="RequestedRangeNotSatisfiable",e[e.ExpectationFailed=417]="ExpectationFailed",e[e.UpgradeRequired=426]="UpgradeRequired",e[e.InternalServerError=500]="InternalServerError",e[e.NotImplemented=501]="NotImplemented",e[e.BadGateway=502]="BadGateway",e[e.ServiceUnavailable=503]="ServiceUnavailable",e[e.GatewayTimeout=504]="GatewayTimeout",e[e.HttpVersionNotSupported=505]="HttpVersionNotSupported"}(t.AmqpResponseStatusCode||(t.AmqpResponseStatusCode={})),t.messageProperties=["message_id","reply_to","to","correlation_id","content_type","absolute_expiry_time","group_id","group_sequence","reply_to_group_id","content_encoding","creation_time","subject","user_id"],t.messageHeader=["first_acquirer","delivery_count","ttl","durable","priority"],t.isAmqpError=function isAmqpError(e){if(!e||"object"!=typeof e)throw new Error("err is a required parameter and must be of type 'object'.");let t=!1;return(e.condition&&"string"==typeof e.condition&&e.description&&"string"==typeof e.description||e.value&&Array.isArray(e.value)||e.constructor&&"c"===e.constructor.name)&&(t=!0),t},t.delay=function delay(e,t){return new Promise(r=>setTimeout(()=>r(t),e))},t.parseConnectionString=function parseConnectionString(e,t){t||(t={});const r=t.entitySeperator||";",n=t.keyValueSeparator||"=";return e.split(r).reduce((e,t)=>{const r=t.indexOf(n);return Object.assign({},e,{[t.substring(0,r)]:t.substring(r+1)})},{})},t.emitEvent=function emitEvent(e){const t=()=>{n[e.emitterType]("[%s] %s got event: '%s'. Re-emitting the translated context.",e.connectionId,e.emitterType,e.eventName),e.emitter.emit(e.eventName,i.EventContext.translate(e.rheaContext,e.emitter,e.eventName))};-1!==e.eventName.indexOf("error")&&e.emitter.actionInitiated>0?(n[e.emitterType]("[%s] %s got event: '%s'. Will re-emit in the next tick, since this happened before the promise for create/close was resolved.",e.connectionId,e.emitterType,e.eventName),setTimeout(t)):t()}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n=r(129),i=r(99);t.ApplicationTokenCredentials=class ApplicationTokenCredentials extends n.TokenCredentialsBase{constructor(e,t,r,n,i,o){if(!Boolean(r)||"string"!=typeof r.valueOf())throw new Error("secret must be a non empty string.");super(e,t,n,i,o),this.secret=r}getToken(){return this.getTokenFromCache().then(e=>e).catch(e=>{if(e.message.startsWith(i.AuthConstants.SDK_INTERNAL_ERROR))return Promise.reject(e);const t=this.getActiveDirectoryResourceId();return new Promise((e,r)=>{this.authContext.acquireTokenWithClientCredentials(t,this.clientId,this.secret,(t,n)=>t?r(t):n.error||n.errorDescription?r(n):e(n))})})}getTokenFromCache(){const e=this;return super.getTokenFromCache(void 0).then(e=>Promise.resolve(e)).catch(t=>e.removeInvalidItemsFromCache({_clientId:e.clientId}).then(e=>{if(e.result)return Promise.reject(t);const r=e&&e.details&&e.details.message?e.details.message:e.details;return Promise.reject(new Error(i.AuthConstants.SDK_INTERNAL_ERROR+" : critical failure while removing expired token for service principal from token cache. "+r))}))}removeInvalidItemsFromCache(e){const t=this;return new Promise(r=>{t.tokenCache.find(e,(e,n)=>e?r({result:!1,details:e}):n&&n.length>0?new Promise(e=>t.tokenCache.remove(n,t=>e(t?{result:!1,details:t}:{result:!0}))):r({result:!0}))})}}},function(e,t,r){"use strict";var n=this&&this.__awaiter||function(e,t,r,n){return new(r||(r=Promise))(function(i,o){function fulfilled(e){try{step(n.next(e))}catch(e){o(e)}}function rejected(e){try{step(n.throw(e))}catch(e){o(e)}}function step(e){e.done?i(e.value):new r(function(t){t(e.value)}).then(fulfilled,rejected)}step((n=n.apply(e,t||[])).next())})};Object.defineProperty(t,"__esModule",{value:!0});const i=r(106),o=r(99);t.MSITokenCredentials=class MSITokenCredentials{constructor(e){if(e||(e={}),e.resource){if("string"!=typeof e.resource.valueOf())throw new Error("resource must be a uri.")}else e.resource=o.AuthConstants.RESOURCE_MANAGER_ENDPOINT;this.resource=e.resource,this._httpClient=e.httpClient||new i.DefaultHttpClient}parseTokenResponse(e){const t=JSON.parse(e);return t.accessToken=t.access_token,delete t.access_token,t.tokenType=t.token_type,delete t.token_type,t.refresh_token&&(t.refreshToken=t.refresh_token,delete t.refresh_token),t.expires_in&&(t.expiresIn=t.expires_in,"string"==typeof t.expires_in&&(t.expiresIn=parseInt(t.expires_in,10)),delete t.expires_in),t.not_before&&(t.notBefore=t.not_before,"string"==typeof t.not_before&&(t.notBefore=parseInt(t.not_before,10)),delete t.not_before),t.expires_on&&(t.expiresOn=t.expires_on,"string"==typeof t.expires_on&&(t.expires_on.includes(":")||t.expires_on.includes("/")?t.expiresOn=new Date(t.expires_on,10):t.expiresOn=new Date(parseInt(t.expires_on,10))),delete t.expires_on),t}signRequest(e){return n(this,void 0,void 0,function*(){const t=yield this.getToken();return e.headers.set(i.Constants.HeaderConstants.AUTHORIZATION,`${t.tokenType} ${t.accessToken}`),Promise.resolve(e)})}}},function(e,t,r){"use strict";e.exports={LongRunningOperationStates:{InProgress:"InProgress",Succeeded:"Succeeded",Failed:"Failed",Canceled:"Canceled"},DEFAULT_ADAL_CLIENT_ID:"04b07795-8ddb-461a-bbee-02f9e1bf7b46",AAD_COMMON_TENANT:"common",DEFAULT_LANGUAGE:"en-us",AZURE_AUTH_LOCATION:"AZURE_AUTH_LOCATION"}},function(e,t,r){"use strict";const n=r(8).Constants;e.exports=class MSITokenCredentials{constructor(e){if(e||(e={}),e.resource){if("string"!=typeof e.resource.valueOf())throw new Error("resource must be a uri.")}else e.resource="https://management.azure.com/";this.resource=e.resource}parseTokenResponse(e){let t=JSON.parse(e);return t.accessToken=t.access_token,delete t.access_token,t.tokenType=t.token_type,delete t.token_type,t.refresh_token&&(t.refreshToken=t.refresh_token,delete t.refresh_token),t.expires_in&&(t.expiresIn=t.expires_in,"string"==typeof t.expires_in&&(t.expiresIn=parseInt(t.expires_in,10)),delete t.expires_in),t.not_before&&(t.notBefore=t.not_before,"string"==typeof t.not_before&&(t.notBefore=parseInt(t.not_before,10)),delete t.not_before),t.expires_on&&(t.expiresOn=t.expires_on,"string"==typeof t.expires_on&&(t.expires_on.includes(":")||t.expires_on.includes("/")?t.expiresOn=new Date(t.expires_on):t.expiresOn=new Date(parseInt(t.expires_on,10))),delete t.expires_on),t}getToken(e){return e()}prepareRequestOptions(){return{headers:{},body:""}}signRequest(e,t){this.getToken(function(r,i){return r?t(r):(e.headers[n.HeaderConstants.AUTHORIZATION]=`${i.tokenType} ${i.accessToken}`,t(null))})}}},function(e,t,r){"use strict";e.exports=r(455)()?Object.setPrototypeOf:r(456)},function(e,t,r){"use strict";var n=Object.prototype.toString,i=n.call(function(){return arguments}());e.exports=function(e){return n.call(e)===i}},function(e,t,r){"use strict";var n=Object.prototype.toString,i=n.call("");e.exports=function(e){return"string"==typeof e||e&&"object"==typeof e&&(e instanceof String||n.call(e)===i)||!1}},function(e,t,r){var n=r(109),i=function(){},o=function(e,t,r){if("function"==typeof t)return o(e,null,t);t||(t={}),r=n(r||i);var s=e._writableState,a=e._readableState,c=t.readable||!1!==t.readable&&e.readable,u=t.writable||!1!==t.writable&&e.writable,l=function(){e.writable||p()},p=function(){u=!1,c||r.call(e)},d=function(){c=!1,u||r.call(e)},h=function(t){r.call(e,t?new Error("exited with error code: "+t):null)},f=function(t){r.call(e,t)},m=function(){return(!c||a&&a.ended)&&(!u||s&&s.ended)?void 0:r.call(e,new Error("premature close"))},g=function(){e.req.on("finish",p)};return!function(e){return e.setHeader&&"function"==typeof e.abort}(e)?u&&!s&&(e.on("end",l),e.on("close",l)):(e.on("complete",p),e.on("abort",m),e.req?g():e.on("request",g)),function(e){return e.stdio&&Array.isArray(e.stdio)&&3===e.stdio.length}(e)&&e.on("exit",h),e.on("end",d),e.on("finish",p),!1!==t.error&&e.on("error",f),e.on("close",m),function(){e.removeListener("complete",p),e.removeListener("abort",m),e.removeListener("request",g),e.req&&e.req.removeListener("finish",p),e.removeListener("end",l),e.removeListener("close",l),e.removeListener("finish",p),e.removeListener("exit",h),e.removeListener("end",d),e.removeListener("error",f),e.removeListener("close",m)}};e.exports=o},function(e,t,r){"use strict";const n=r(14),i=r(366),o=r(112),s=r(250),a=n.Buffer,c=a.from([0,0,255,255]),u=a.from([0]),l=Symbol("write-in-progress"),p=Symbol("pending-close"),d=Symbol("total-length"),h=Symbol("callback"),f=Symbol("buffers"),m=Symbol("error"),g=Symbol("owner");let y;function deflateOnData(e){this[f].push(e),this[d]+=e.length}function inflateOnData(e){this[d]+=e.length,this[g]._maxPayload<1||this[d]<=this[g]._maxPayload?this[f].push(e):(this[m]=new Error("max payload size exceeded"),this[m].closeCode=1009,this.removeListener("data",inflateOnData),this.reset())}function inflateOnError(e){this[g]._inflate=null,this[h](e)}e.exports=class PerMessageDeflate{constructor(e,t,r){if(this._maxPayload=0|r,this._options=e||{},this._threshold=void 0!==this._options.threshold?this._options.threshold:1024,this._isServer=!!t,this._deflate=null,this._inflate=null,this.params=null,!y){const e=void 0!==this._options.concurrencyLimit?this._options.concurrencyLimit:10;y=new i({concurrency:e})}}static get extensionName(){return"permessage-deflate"}offer(){const e={};return this._options.serverNoContextTakeover&&(e.server_no_context_takeover=!0),this._options.clientNoContextTakeover&&(e.client_no_context_takeover=!0),this._options.serverMaxWindowBits&&(e.server_max_window_bits=this._options.serverMaxWindowBits),this._options.clientMaxWindowBits?e.client_max_window_bits=this._options.clientMaxWindowBits:null==this._options.clientMaxWindowBits&&(e.client_max_window_bits=!0),e}accept(e){var t;return e=this.normalizeParams(e),t=this._isServer?this.acceptAsServer(e):this.acceptAsClient(e),this.params=t,t}cleanup(){this._inflate&&(this._inflate[l]?this._inflate[p]=!0:(this._inflate.close(),this._inflate=null)),this._deflate&&(this._deflate[l]?this._deflate[p]=!0:(this._deflate.close(),this._deflate=null))}acceptAsServer(e){const t={};if(!e.some(e=>{if(!(!1===this._options.serverNoContextTakeover&&e.server_no_context_takeover||!1===this._options.serverMaxWindowBits&&e.server_max_window_bits||"number"==typeof this._options.serverMaxWindowBits&&"number"==typeof e.server_max_window_bits&&this._options.serverMaxWindowBits>e.server_max_window_bits||"number"==typeof this._options.clientMaxWindowBits&&!e.client_max_window_bits))return(this._options.serverNoContextTakeover||e.server_no_context_takeover)&&(t.server_no_context_takeover=!0),(this._options.clientNoContextTakeover||!1!==this._options.clientNoContextTakeover&&e.client_no_context_takeover)&&(t.client_no_context_takeover=!0),"number"==typeof this._options.serverMaxWindowBits?t.server_max_window_bits=this._options.serverMaxWindowBits:"number"==typeof e.server_max_window_bits&&(t.server_max_window_bits=e.server_max_window_bits),"number"==typeof this._options.clientMaxWindowBits?t.client_max_window_bits=this._options.clientMaxWindowBits:!1!==this._options.clientMaxWindowBits&&"number"==typeof e.client_max_window_bits&&(t.client_max_window_bits=e.client_max_window_bits),!0}))throw new Error("Doesn't support the offered configuration");return t}acceptAsClient(e){const t=e[0];if(!1===this._options.clientNoContextTakeover&&t.client_no_context_takeover)throw new Error('Invalid value for "client_no_context_takeover"');if("number"==typeof this._options.clientMaxWindowBits&&(!t.client_max_window_bits||t.client_max_window_bits>this._options.clientMaxWindowBits)||!1===this._options.clientMaxWindowBits&&t.client_max_window_bits)throw new Error('Invalid value for "client_max_window_bits"');return t}normalizeParams(e){return e.map(e=>(Object.keys(e).forEach(t=>{var r=e[t];if(r.length>1)throw new Error(`Multiple extension parameters for ${t}`);switch(r=r[0],t){case"server_no_context_takeover":case"client_no_context_takeover":if(!0!==r)throw new Error(`invalid extension parameter value for ${t} (${r})`);e[t]=!0;break;case"server_max_window_bits":case"client_max_window_bits":if("string"==typeof r&&(r=parseInt(r,10),Number.isNaN(r)||r<o.Z_MIN_WINDOWBITS||r>o.Z_MAX_WINDOWBITS))throw new Error(`invalid extension parameter value for ${t} (${r})`);if(!this._isServer&&!0===r)throw new Error(`Missing extension parameter value for ${t}`);e[t]=r;break;default:throw new Error(`Not defined extension parameter (${t})`)}}),e))}decompress(e,t,r){y.push(n=>{this._decompress(e,t,(e,t)=>{n(),r(e,t)})})}compress(e,t,r){y.push(n=>{this._compress(e,t,(e,t)=>{n(),r(e,t)})})}_decompress(e,t,r){const n=this._isServer?"client":"server";if(!this._inflate){const e=`${n}_max_window_bits`,t="number"!=typeof this.params[e]?o.Z_DEFAULT_WINDOWBITS:this.params[e];this._inflate=o.createInflateRaw({windowBits:t}),this._inflate[d]=0,this._inflate[f]=[],this._inflate[g]=this,this._inflate.on("error",inflateOnError),this._inflate.on("data",inflateOnData)}this._inflate[h]=r,this._inflate[l]=!0,this._inflate.write(e),t&&this._inflate.write(c),this._inflate.flush(()=>{const e=this._inflate[m];if(e)return this._inflate.close(),this._inflate=null,void r(e);const i=s.concat(this._inflate[f],this._inflate[d]);t&&this.params[`${n}_no_context_takeover`]||this._inflate[p]?(this._inflate.close(),this._inflate=null):(this._inflate[l]=!1,this._inflate[d]=0,this._inflate[f]=[]),r(null,i)})}_compress(e,t,r){if(!e||0===e.length)return void process.nextTick(r,null,u);const n=this._isServer?"server":"client";if(!this._deflate){const e=`${n}_max_window_bits`,t="number"!=typeof this.params[e]?o.Z_DEFAULT_WINDOWBITS:this.params[e];this._deflate=o.createDeflateRaw({memLevel:this._options.memLevel,level:this._options.level,flush:o.Z_SYNC_FLUSH,windowBits:t}),this._deflate[d]=0,this._deflate[f]=[],this._deflate.on("data",deflateOnData)}this._deflate[l]=!0,this._deflate.write(e),this._deflate.flush(o.Z_SYNC_FLUSH,()=>{var e=s.concat(this._deflate[f],this._deflate[d]);t&&(e=e.slice(0,e.length-4)),t&&this.params[`${n}_no_context_takeover`]||this._deflate[p]?(this._deflate.close(),this._deflate=null):(this._deflate[l]=!1,this._deflate[d]=0,this._deflate[f]=[]),r(null,e)})}}},function(e,t,r){"use strict";const n=r(14).Buffer;t.BINARY_TYPES=["nodebuffer","arraybuffer","fragments"],t.GUID="258EAFA5-E914-47DA-95CA-C5AB0DC85B11",t.EMPTY_BUFFER=n.alloc(0),t.NOOP=(()=>{})},function(e,t,r){"use strict";e.exports=r(907)},function(e,t,r){"use strict";const n=r(37).fromCallback,i=r(519);e.exports={readJson:n(i.readFile),readJsonSync:i.readFileSync,writeJson:n(i.writeFile),writeJsonSync:i.writeFileSync}},function(e,t,r){e.exports=minimatch,minimatch.Minimatch=Minimatch;var n={sep:"/"};try{n=r(6)}catch(e){}var i=minimatch.GLOBSTAR=Minimatch.GLOBSTAR={},o=r(538),s={"!":{open:"(?:(?!(?:",close:"))[^/]*?)"},"?":{open:"(?:",close:")?"},"+":{open:"(?:",close:")+"},"*":{open:"(?:",close:")*"},"@":{open:"(?:",close:")"}},a="[^/]",c=a+"*?",u="(?:(?!(?:\\/|^)(?:\\.{1,2})($|\\/)).)*?",l="(?:(?!(?:\\/|^)\\.).)*?",p=function charSet(e){return e.split("").reduce(function(e,t){return e[t]=!0,e},{})}("().*{}+?[]^$\\!");var d=/\/+/;function ext(e,t){e=e||{},t=t||{};var r={};return Object.keys(t).forEach(function(e){r[e]=t[e]}),Object.keys(e).forEach(function(t){r[t]=e[t]}),r}function minimatch(e,t,r){if("string"!=typeof t)throw new TypeError("glob pattern string required");return r||(r={}),!(!r.nocomment&&"#"===t.charAt(0))&&(""===t.trim()?""===e:new Minimatch(t,r).match(e))}function Minimatch(e,t){if(!(this instanceof Minimatch))return new Minimatch(e,t);if("string"!=typeof e)throw new TypeError("glob pattern string required");t||(t={}),e=e.trim(),"/"!==n.sep&&(e=e.split(n.sep).join("/")),this.options=t,this.set=[],this.pattern=e,this.regexp=null,this.negate=!1,this.comment=!1,this.empty=!1,this.make()}function braceExpand(e,t){if(t||(t=this instanceof Minimatch?this.options:{}),void 0===(e=void 0===e?this.pattern:e))throw new TypeError("undefined pattern");return t.nobrace||!e.match(/\{.*\}/)?[e]:o(e)}minimatch.filter=function filter(e,t){return t=t||{},function(r,n,i){return minimatch(r,e,t)}},minimatch.defaults=function(e){if(!e||!Object.keys(e).length)return minimatch;var t=minimatch,r=function minimatch(r,n,i){return t.minimatch(r,n,ext(e,i))};return r.Minimatch=function Minimatch(r,n){return new t.Minimatch(r,ext(e,n))},r},Minimatch.defaults=function(e){return e&&Object.keys(e).length?minimatch.defaults(e).Minimatch:Minimatch},Minimatch.prototype.debug=function(){},Minimatch.prototype.make=function make(){if(this._made)return;var e=this.pattern,t=this.options;if(!t.nocomment&&"#"===e.charAt(0))return void(this.comment=!0);if(!e)return void(this.empty=!0);this.parseNegate();var r=this.globSet=this.braceExpand();t.debug&&(this.debug=console.error);this.debug(this.pattern,r),r=this.globParts=r.map(function(e){return e.split(d)}),this.debug(this.pattern,r),r=r.map(function(e,t,r){return e.map(this.parse,this)},this),this.debug(this.pattern,r),r=r.filter(function(e){return-1===e.indexOf(!1)}),this.debug(this.pattern,r),this.set=r},Minimatch.prototype.parseNegate=function parseNegate(){var e=this.pattern,t=!1,r=this.options,n=0;if(r.nonegate)return;for(var i=0,o=e.length;i<o&&"!"===e.charAt(i);i++)t=!t,n++;n&&(this.pattern=e.substr(n));this.negate=t},minimatch.braceExpand=function(e,t){return braceExpand(e,t)},Minimatch.prototype.braceExpand=braceExpand,Minimatch.prototype.parse=function parse(e,t){if(e.length>65536)throw new TypeError("pattern is too long");var r=this.options;if(!r.noglobstar&&"**"===e)return i;if(""===e)return"";var n,o="",u=!!r.nocase,l=!1,d=[],f=[],m=!1,g=-1,y=-1,v="."===e.charAt(0)?"":r.dot?"(?!(?:^|\\/)\\.{1,2}(?:$|\\/))":"(?!\\.)",b=this;function clearStateChar(){if(n){switch(n){case"*":o+=c,u=!0;break;case"?":o+=a,u=!0;break;default:o+="\\"+n}b.debug("clearStateChar %j %j",n,o),n=!1}}for(var _,w=0,E=e.length;w<E&&(_=e.charAt(w));w++)if(this.debug("%s\t%s %s %j",e,w,o,_),l&&p[_])o+="\\"+_,l=!1;else switch(_){case"/":return!1;case"\\":clearStateChar(),l=!0;continue;case"?":case"*":case"+":case"@":case"!":if(this.debug("%s\t%s %s %j <-- stateChar",e,w,o,_),m){this.debug("  in class"),"!"===_&&w===y+1&&(_="^"),o+=_;continue}b.debug("call clearStateChar %j",n),clearStateChar(),n=_,r.noext&&clearStateChar();continue;case"(":if(m){o+="(";continue}if(!n){o+="\\(";continue}d.push({type:n,start:w-1,reStart:o.length,open:s[n].open,close:s[n].close}),o+="!"===n?"(?:(?!(?:":"(?:",this.debug("plType %j %j",n,o),n=!1;continue;case")":if(m||!d.length){o+="\\)";continue}clearStateChar(),u=!0;var S=d.pop();o+=S.close,"!"===S.type&&f.push(S),S.reEnd=o.length;continue;case"|":if(m||!d.length||l){o+="\\|",l=!1;continue}clearStateChar(),o+="|";continue;case"[":if(clearStateChar(),m){o+="\\"+_;continue}m=!0,y=w,g=o.length,o+=_;continue;case"]":if(w===y+1||!m){o+="\\"+_,l=!1;continue}if(m){var C=e.substring(y+1,w);try{RegExp("["+C+"]")}catch(e){var x=this.parse(C,h);o=o.substr(0,g)+"\\["+x[0]+"\\]",u=u||x[1],m=!1;continue}}u=!0,m=!1,o+=_;continue;default:clearStateChar(),l?l=!1:!p[_]||"^"===_&&m||(o+="\\"),o+=_}m&&(C=e.substr(y+1),x=this.parse(C,h),o=o.substr(0,g)+"\\["+x[0],u=u||x[1]);for(S=d.pop();S;S=d.pop()){var k=o.slice(S.reStart+S.open.length);this.debug("setting tail",o,S),k=k.replace(/((?:\\{2}){0,64})(\\?)\|/g,function(e,t,r){return r||(r="\\"),t+t+r+"|"}),this.debug("tail=%j\n   %s",k,k,S,o);var R="*"===S.type?c:"?"===S.type?a:"\\"+S.type;u=!0,o=o.slice(0,S.reStart)+R+"\\("+k}clearStateChar(),l&&(o+="\\\\");var T=!1;switch(o.charAt(0)){case".":case"[":case"(":T=!0}for(var O=f.length-1;O>-1;O--){var I=f[O],N=o.slice(0,I.reStart),A=o.slice(I.reStart,I.reEnd-8),P=o.slice(I.reEnd-8,I.reEnd),L=o.slice(I.reEnd);P+=L;var D=N.split("(").length-1,M=L;for(w=0;w<D;w++)M=M.replace(/\)[+*?]?/,"");var j="";""===(L=M)&&t!==h&&(j="$");var q=N+A+L+j+P;o=q}""!==o&&u&&(o="(?=.)"+o);T&&(o=v+o);if(t===h)return[o,u];if(!u)return function globUnescape(e){return e.replace(/\\(.)/g,"$1")}(e);var F=r.nocase?"i":"";try{var z=new RegExp("^"+o+"$",F)}catch(e){return new RegExp("$.")}return z._glob=e,z._src=o,z};var h={};minimatch.makeRe=function(e,t){return new Minimatch(e,t||{}).makeRe()},Minimatch.prototype.makeRe=function makeRe(){if(this.regexp||!1===this.regexp)return this.regexp;var e=this.set;if(!e.length)return this.regexp=!1,this.regexp;var t=this.options,r=t.noglobstar?c:t.dot?u:l,n=t.nocase?"i":"",o=e.map(function(e){return e.map(function(e){return e===i?r:"string"==typeof e?function regExpEscape(e){return e.replace(/[-[\]{}()*+?.,\\^$|#\s]/g,"\\$&")}(e):e._src}).join("\\/")}).join("|");o="^(?:"+o+")$",this.negate&&(o="^(?!"+o+").*$");try{this.regexp=new RegExp(o,n)}catch(e){this.regexp=!1}return this.regexp},minimatch.match=function(e,t,r){var n=new Minimatch(t,r=r||{});return e=e.filter(function(e){return n.match(e)}),n.options.nonull&&!e.length&&e.push(t),e},Minimatch.prototype.match=function match(e,t){if(this.debug("match",e,this.pattern),this.comment)return!1;if(this.empty)return""===e;if("/"===e&&t)return!0;var r=this.options;"/"!==n.sep&&(e=e.split(n.sep).join("/"));e=e.split(d),this.debug(this.pattern,"split",e);var i,o,s=this.set;for(this.debug(this.pattern,"set",s),o=e.length-1;o>=0&&!(i=e[o]);o--);for(o=0;o<s.length;o++){var a=s[o],c=e;r.matchBase&&1===a.length&&(c=[i]);var u=this.matchOne(c,a,t);if(u)return!!r.flipNegate||!this.negate}return!r.flipNegate&&this.negate},Minimatch.prototype.matchOne=function(e,t,r){var n=this.options;this.debug("matchOne",{this:this,file:e,pattern:t}),this.debug("matchOne",e.length,t.length);for(var o=0,s=0,a=e.length,c=t.length;o<a&&s<c;o++,s++){this.debug("matchOne loop");var u,l=t[s],p=e[o];if(this.debug(t,l,p),!1===l)return!1;if(l===i){this.debug("GLOBSTAR",[t,l,p]);var d=o,h=s+1;if(h===c){for(this.debug("** at the end");o<a;o++)if("."===e[o]||".."===e[o]||!n.dot&&"."===e[o].charAt(0))return!1;return!0}for(;d<a;){var f=e[d];if(this.debug("\nglobstar while",e,d,t,h,f),this.matchOne(e.slice(d),t.slice(h),r))return this.debug("globstar found match!",d,a,f),!0;if("."===f||".."===f||!n.dot&&"."===f.charAt(0)){this.debug("dot detected!",e,d,t,h);break}this.debug("globstar swallow a segment, and continue"),d++}return!(!r||(this.debug("\n>>> no match, partial?",e,d,t,h),d!==a))}if("string"==typeof l?(u=n.nocase?p.toLowerCase()===l.toLowerCase():p===l,this.debug("string match",l,p,u)):(u=p.match(l),this.debug("pattern match",l,p,u)),!u)return!1}if(o===a&&s===c)return!0;if(o===a)return r;if(s===c)return o===a-1&&""===e[o];throw new Error("wtf?")}},function(e,t,r){"use strict";function posix(e){return"/"===e.charAt(0)}function win32(e){var t=/^([a-zA-Z]:|[\\\/]{2}[^\\\/]+[\\\/]+[^\\\/]+)?([\\\/])?([\s\S]*?)$/.exec(e),r=t[1]||"",n=Boolean(r&&":"!==r.charAt(1));return Boolean(t[2]||n)}e.exports="win32"===process.platform?win32:posix,e.exports.posix=posix,e.exports.win32=win32},function(e,t,r){"use strict";var n=r(23),i=r(21),o=r(50),s=r(83),a=r(111),c=r(590),u=r(110),l=r(591),p=r(592),d=r(593),h=r(594);r(276);var f=function(){function AutoCollectHttpDependencies(e){if(AutoCollectHttpDependencies.INSTANCE)throw new Error("Client request tracking should be configured from the applicationInsights object");AutoCollectHttpDependencies.INSTANCE=this,this._client=e}return AutoCollectHttpDependencies.prototype.enable=function(e){this._isEnabled=e,this._isEnabled&&!this._isInitialized&&this._initialize(),l.enable(e,this._client),p.enable(e,this._client),d.enable(e,this._client),h.enable(e,this._client)},AutoCollectHttpDependencies.prototype.isInitialized=function(){return this._isInitialized},AutoCollectHttpDependencies.prototype._initialize=function(){var e=this;this._isInitialized=!0;n.get;var t=n.request,r=i.request,o=function(t,r){var n=!r[AutoCollectHttpDependencies.disableCollectionRequestOption]&&!t[AutoCollectHttpDependencies.alreadyAutoCollectedFlag];t[AutoCollectHttpDependencies.alreadyAutoCollectedFlag]=!0,t&&r&&n&&AutoCollectHttpDependencies.trackRequest(e._client,r,t)};n.request=function(e){for(var r=[],i=1;i<arguments.length;i++)r[i-1]=arguments[i];var s=t.call.apply(t,[n,e].concat(r));return o(s,e),s},i.request=function(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];var s=r.call.apply(r,[i,e].concat(t));return o(s,e),s},n.get=function(e){for(var t=[],r=1;r<arguments.length;r++)t[r-1]=arguments[r];var i,o=(i=n.request).call.apply(i,[n,e].concat(t));return o.end(),o},i.get=function(e){for(var t=[],r=1;r<arguments.length;r++)t[r-1]=arguments[r];var n,o=(n=i.request).call.apply(n,[i,e].concat(t));return o.end(),o}},AutoCollectHttpDependencies.trackRequest=function(e,t,r,n){if(t&&r&&e){var i=new c(t,r),l=u.CorrelationContextManager.getCurrentContext(),p=l&&l.operation&&l.operation.parentId+AutoCollectHttpDependencies.requestNumber+++".";if(s.canIncludeCorrelationHeader(e,i.getUrl())&&r.getHeader&&r.setHeader){if(e.config&&e.config.correlationId){var d=r.getHeader(a.requestContextHeader);if(d){var h=d.split(","),f=a.requestContextSourceKey+"=";a.requestContextSourceRoleNameKey;h.some(function(e){return e.substring(0,f.length)===f})||r.setHeader(a.requestContextHeader,d+","+a.requestContextSourceKey+"="+e.config.correlationId+","+a.requestContextSourceRoleNameKey+"="+e.context.tags[e.context.keys.cloudRole])}else r.setHeader(a.requestContextHeader,a.requestContextSourceKey+"="+e.config.correlationId+","+a.requestContextSourceRoleNameKey+"="+e.context.tags[e.context.keys.cloudRole])}if(l&&l.operation){r.setHeader(a.requestIdHeader,p),r.setHeader(a.parentIdHeader,l.operation.id),r.setHeader(a.rootIdHeader,p);var m=l.customProperties.serializeToHeader();m&&r.setHeader(a.correlationContextHeader,m)}}r.on&&(r.on("response",function(o){i.onResponse(o,n);var s={"http.RequestOptions":t,"http.ClientRequest":r,"http.ClientResponse":o},a=i.getDependencyTelemetry(p);a.contextObjects=s,e.trackDependency(a)}),r.on("error",function(o){i.onError(o,n);var s={"http.RequestOptions":t,"http.ClientRequest":r,Error:o},a=i.getDependencyTelemetry(p);a.contextObjects=s,e.trackDependency(a)}))}else o.info("AutoCollectHttpDependencies.trackRequest was called with invalid parameters: ",!t,!r,!e)},AutoCollectHttpDependencies.prototype.dispose=function(){AutoCollectHttpDependencies.INSTANCE=null,this.enable(!1),this._isInitialized=!1},AutoCollectHttpDependencies.disableCollectionRequestOption="disableAppInsightsAutoCollection",AutoCollectHttpDependencies.requestNumber=1,AutoCollectHttpDependencies.alreadyAutoCollectedFlag="_appInsightsAutoCollected",AutoCollectHttpDependencies}();e.exports=f},function(e,t,r){"use strict";var n=r(21),i=r(23),o=r(7),s=r(83),a=function(){function CorrelationIdManager(){}return CorrelationIdManager.queryCorrelationId=function(e,t,r,s){var a=e+"/api/profiles/"+t+"/appId",c=o.parse(a);if(CorrelationIdManager.completedLookups.hasOwnProperty(a))s(CorrelationIdManager.completedLookups[a]);else if(CorrelationIdManager.pendingLookups[a])CorrelationIdManager.pendingLookups[a].push(s);else{CorrelationIdManager.pendingLookups[a]=[s];var u={protocol:c.protocol,hostname:c.host,path:c.pathname,method:"GET",disableAppInsightsAutoCollection:!0},l="https:"===c.protocol?n.request:i.request,p=function(){if(CorrelationIdManager.pendingLookups[a]){var e=l(u,function(e){if(200===e.statusCode){var t="";e.setEncoding("utf-8"),e.on("data",function(e){t+=e}),e.on("end",function(){var e=CorrelationIdManager.correlationIdPrefix+t;CorrelationIdManager.completedLookups[a]=e,CorrelationIdManager.pendingLookups[a]&&CorrelationIdManager.pendingLookups[a].forEach(function(t){return t(e)}),delete CorrelationIdManager.pendingLookups[a]})}else e.statusCode>=400&&e.statusCode<500?(CorrelationIdManager.completedLookups[a]=void 0,delete CorrelationIdManager.pendingLookups[a]):setTimeout(p,r)});e&&(e.on("error",function(){}),e.end())}};setTimeout(p,0)}},CorrelationIdManager.cancelCorrelationIdQuery=function(e,t,r){var n=e+"/api/profiles/"+t+"/appId",i=CorrelationIdManager.pendingLookups[n];i&&(CorrelationIdManager.pendingLookups[n]=i.filter(function(e){return e!=r}),0==CorrelationIdManager.pendingLookups[n].length&&delete CorrelationIdManager.pendingLookups[n])},CorrelationIdManager.generateRequestId=function(e){if(e){"."!==(e="|"==e[0]?e:"|"+e)[e.length-1]&&(e+=".");var t=(CorrelationIdManager.currentRootId++).toString(16);return CorrelationIdManager.appendSuffix(e,t,"_")}return CorrelationIdManager.generateRootId()},CorrelationIdManager.getRootId=function(e){var t=e.indexOf(".");t<0&&(t=e.length);var r="|"===e[0]?1:0;return e.substring(r,t)},CorrelationIdManager.generateRootId=function(){return"|"+s.newGuid()+"."},CorrelationIdManager.appendSuffix=function(e,t,r){if(e.length+t.length<CorrelationIdManager.requestIdMaxLength)return e+t+r;var n=CorrelationIdManager.requestIdMaxLength-9;if(e.length>n)for(;n>1;--n){var i=e[n-1];if("."===i||"_"===i)break}if(n<=1)return CorrelationIdManager.generateRootId();for(t=s.randomu32().toString(16);t.length<8;)t="0"+t;return e.substring(0,n)+t+"#"},CorrelationIdManager.correlationIdPrefix="cid-v1:",CorrelationIdManager.pendingLookups={},CorrelationIdManager.completedLookups={},CorrelationIdManager.requestIdMaxLength=1024,CorrelationIdManager.currentRootId=s.randomu32(),CorrelationIdManager}();e.exports=a},function(e,t,r){"use strict";
/*! Copyright (c) Microsoft. All rights reserved.
 *! Licensed under the MIT license. See LICENSE file in the project root for full license information.
 */var n=r(12);t.anHourFromNow=function anHourFromNow(){var e=Date.now()/1e3+3600;return Math.ceil(e)},t.encodeUriComponentStrict=function encodeUriComponentStrict(e){return encodeURIComponent(e).replace(/[!'()*]/g,function(e){return"%"+e.charCodeAt(0).toString(16)})},t.stringToSign=function stringToSign(e,t){return e+"\n"+t},t.hmacHash=function hmacHash(e,t){var r=n.createHmac("sha256",new Buffer(e,"base64"));return r.update(t),r.digest("base64")}},function(e,t,r){"use strict";var n=r(614),i=function(){return function ExponentialBackoffWithJitterParameters(){this.c=100,this.cMin=100,this.cMax=1e4,this.ju=.25,this.jd=.5}}();t.ExponentialBackoffWithJitterParameters=i;var o=function(){function ExponentialBackOffWithJitter(e,t){this._errorFilter=t||new n.DefaultErrorFilter,this.immediateFirstRetry=!1!==e,this.normalParameters=new i,this.throttledParameters=new i,this.throttledParameters.c=5e3,this.throttledParameters.cMin=1e4,this.throttledParameters.cMax=6e4}return ExponentialBackOffWithJitter.prototype.nextRetryTimeout=function(e,t){if(this.immediateFirstRetry&&0===e&&!t)return 0;var r=t?this.throttledParameters:this.normalParameters,n=r.c*(1-r.jd),i=r.c*(1-r.ju),o=Math.random()*(i-n);return Math.min(r.cMin+(Math.pow(2,e-1)-1)*o,r.cMax)},ExponentialBackOffWithJitter.prototype.shouldRetry=function(e){return this._errorFilter[e.name]},ExponentialBackOffWithJitter}();t.ExponentialBackOffWithJitter=o;var s=function(){function NoRetry(){}return NoRetry.prototype.nextRetryTimeout=function(e){return-1},NoRetry.prototype.shouldRetry=function(e){return!1},NoRetry}();t.NoRetry=s},function(e){e.exports={_args:[["azure-iot-device@1.8.2","/home/travis/build/microsoft/vscode-azure-iot-toolkit"]],_from:"azure-iot-device@1.8.2",_id:"azure-iot-device@1.8.2",_inBundle:!1,_integrity:"sha512-K5Jye10XmwcMWpW6/BVsMvEydd/oYN9LsjCt3sleQNqRmm/49UAbTwcwwWVCTCPQmhtCd2ee55z3Lm0UgiZYLw==",_location:"/azure-iot-device",_phantomChildren:{},_requested:{type:"version",registry:!0,raw:"azure-iot-device@1.8.2",name:"azure-iot-device",escapedName:"azure-iot-device",rawSpec:"1.8.2",saveSpec:null,fetchSpec:"1.8.2"},_requiredBy:["/","/azure-iot-device-mqtt"],_resolved:"https://registry.npmjs.org/azure-iot-device/-/azure-iot-device-1.8.2.tgz",_spec:"1.8.2",_where:"/home/travis/build/microsoft/vscode-azure-iot-toolkit",author:{name:"Microsoft Corporation"},bugs:{url:"https://github.com/Azure/azure-iot-sdk-node/issues"},dependencies:{"azure-iot-common":"1.8.2","azure-iot-http-base":"1.8.2","azure-storage":"^2.8.1",debug:"^3.1.0",lodash:"^4.17.10",machina:"^4.0.1",traverse:"^0.6.6"},description:"Azure IoT device SDK",devDependencies:{"@types/debug":"0.0.30","@types/node":"8.9.4","@types/traverse":"^0.6.29",chai:"^4.1.2","es5-shim":"^4.5.9",istanbul:"^0.4.5",mocha:"^5.2.0",sinon:"^4.0.2",tslint:"^5.7.0",typescript:"2.5.3"},engines:{node:">= 0.10"},homepage:"https://github.com/Azure/azure-iot-sdk-node#readme",license:"MIT",main:"device.js",name:"azure-iot-device",repository:{type:"git",url:"git+https://github.com/Azure/azure-iot-sdk-node.git"},scripts:{alltest:'istanbul cover node_modules/mocha/bin/_mocha -- --reporter spec "test/**/_*_test*.js"',"alltest-min":'istanbul cover --report none node_modules/mocha/bin/_mocha -- --reporter dot "test/**/_*_test*.js"',build:"tsc","check-cover":"istanbul check-coverage --statements 95 --branches 86 --lines 97 --functions 92",ci:"npm -s run lint && npm -s run build && npm -s run alltest-min && npm -s run check-cover",lint:"tslint --project . -c ../../tslint.json",test:"npm -s run lint && npm -s run build && npm -s run unittest",unittest:'istanbul cover node_modules/mocha/bin/_mocha -- --reporter spec "test/**/_*_test.js"',"unittest-min":'istanbul cover --report none node_modules/mocha/bin/_mocha -- --reporter dot "test/**/_*_test.js"'},typings:"device.d.ts",version:"1.8.2"}},function(e,t,r){"use strict";var n,i=this&&this.__extends||(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])},function(e,t){function __(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(__.prototype=t.prototype,new __)});Object.defineProperty(t,"__esModule",{value:!0});var o=r(113),s=r(5),a=r(641),c=r(137)("azure-iot-device:Twin"),u=r(4),l=function(e){function Twin(t,r,n){var i=e.call(this)||this;return i._transport=t,i._retryPolicy=r,i._maxOperationTimeout=n,i.desiredPropertiesUpdatesEnabled=!1,i.on("newListener",i._handleNewListener.bind(i)),i._transport.on("twinDesiredPropertiesUpdate",i._onDesiredPropertiesUpdate.bind(i)),i}return i(Twin,e),Twin.prototype.get=function(e){var t=this;return u.callbackToPromise(function(e){new u.RetryOperation(t._retryPolicy,t._maxOperationTimeout).retry(function(e){t._clearCachedProperties(),t._transport.getTwin(function(r,n){r?e(r):(t._mergePatch(t.properties.desired,n.desired),t._mergePatch(t.properties.reported,n.reported),t._fireChangeEvents(t.properties.desired),e(null,t))})},e)},e)},Twin.prototype.setRetryPolicy=function(e){this._retryPolicy=e},Twin.prototype.enableTwinDesiredPropertiesUpdates=function(e){var t=this;new u.RetryOperation(this._retryPolicy,this._maxOperationTimeout).retry(function(e){t._transport.enableTwinDesiredPropertiesUpdates(function(r){t.desiredPropertiesUpdatesEnabled=!r,e(r)})},e)},Twin.prototype._updateReportedProperties=function(e,t){var r=this;new u.RetryOperation(this._retryPolicy,this._maxOperationTimeout).retry(function(t){r._transport.updateTwinReportedProperties(e,function(n){n?t(n):(r._mergePatch(r.properties.reported,e),t())})},t)},Twin.prototype._mergePatch=function(e,t){o.merge(e,t),a(e).forEach(function(e){null===e&&this.remove()})},Twin.prototype._clearCachedProperties=function(){var e=this;this.properties={reported:{update:function(t,r){e._updateReportedProperties(t,r)}},desired:{}}},Twin.prototype._fireChangeEvents=function(e){var t=this;this.emit(Twin.desiredPath,e),a(e).forEach(function(){var r=this.path.join(".");r&&t.emit(Twin.desiredPath+"."+r,o.at(e,r)[0])})},Twin.prototype._onDesiredPropertiesUpdate=function(e){this._mergePatch(this.properties.desired,e),this._fireChangeEvents(e)},Twin.prototype._handleNewListener=function(e){var t=this,r=this;if(0===e.indexOf(Twin.desiredPath)){var n=o.at(this,e)[0];n&&process.nextTick(function(){r.emit(e,n)}),this.enableTwinDesiredPropertiesUpdates(function(e){e?(c("error enabling desired properties updates: "+e.toString()),t.emit("error",e)):c("desired properties updates enabled")})}},Twin.errorEvent="error",Twin.desiredPath="properties.desired",Twin}(s.EventEmitter);t.Twin=l},function(e,t){(function(){var t=function(e,t){return function(){return e.apply(t,arguments)}},r={}.hasOwnProperty;e.exports=function(){function XMLStringifier(e){var n,i,o;for(n in this.assertLegalChar=t(this.assertLegalChar,this),e||(e={}),this.noDoubleEncoding=e.noDoubleEncoding,i=e.stringify||{})r.call(i,n)&&(o=i[n],this[n]=o)}return XMLStringifier.prototype.eleName=function(e){return e=""+e||"",this.assertLegalChar(e)},XMLStringifier.prototype.eleText=function(e){return e=""+e||"",this.assertLegalChar(this.elEscape(e))},XMLStringifier.prototype.cdata=function(e){return e=(e=""+e||"").replace("]]>","]]]]><![CDATA[>"),this.assertLegalChar(e)},XMLStringifier.prototype.comment=function(e){if((e=""+e||"").match(/--/))throw new Error("Comment text cannot contain double-hypen: "+e);return this.assertLegalChar(e)},XMLStringifier.prototype.raw=function(e){return""+e||""},XMLStringifier.prototype.attName=function(e){return""+e||""},XMLStringifier.prototype.attValue=function(e){return e=""+e||"",this.attEscape(e)},XMLStringifier.prototype.insTarget=function(e){return""+e||""},XMLStringifier.prototype.insValue=function(e){if((e=""+e||"").match(/\?>/))throw new Error("Invalid processing instruction value: "+e);return e},XMLStringifier.prototype.xmlVersion=function(e){if(!(e=""+e||"").match(/1\.[0-9]+/))throw new Error("Invalid version number: "+e);return e},XMLStringifier.prototype.xmlEncoding=function(e){if(!(e=""+e||"").match(/^[A-Za-z](?:[A-Za-z0-9._-])*$/))throw new Error("Invalid encoding: "+e);return e},XMLStringifier.prototype.xmlStandalone=function(e){return e?"yes":"no"},XMLStringifier.prototype.dtdPubID=function(e){return""+e||""},XMLStringifier.prototype.dtdSysID=function(e){return""+e||""},XMLStringifier.prototype.dtdElementValue=function(e){return""+e||""},XMLStringifier.prototype.dtdAttType=function(e){return""+e||""},XMLStringifier.prototype.dtdAttDefault=function(e){return null!=e?""+e||"":e},XMLStringifier.prototype.dtdEntityValue=function(e){return""+e||""},XMLStringifier.prototype.dtdNData=function(e){return""+e||""},XMLStringifier.prototype.convertAttKey="@",XMLStringifier.prototype.convertPIKey="?",XMLStringifier.prototype.convertTextKey="#text",XMLStringifier.prototype.convertCDataKey="#cdata",XMLStringifier.prototype.convertCommentKey="#comment",XMLStringifier.prototype.convertRawKey="#raw",XMLStringifier.prototype.assertLegalChar=function(e){var t;if(t=e.match(/[\0\uFFFE\uFFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF]/))throw new Error("Invalid character in string: "+e+" at index "+t.index);return e},XMLStringifier.prototype.elEscape=function(e){var t;return t=this.noDoubleEncoding?/(?!&\S+;)&/g:/&/g,e.replace(t,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/\r/g,"&#xD;")},XMLStringifier.prototype.attEscape=function(e){var t;return t=this.noDoubleEncoding?/(?!&\S+;)&/g:/&/g,e.replace(t,"&amp;").replace(/</g,"&lt;").replace(/"/g,"&quot;").replace(/\t/g,"&#x9;").replace(/\n/g,"&#xA;").replace(/\r/g,"&#xD;")},XMLStringifier}()}).call(this)},function(e,t,r){(function(){var t,n,i,o,s,a,c,u,l,p,d,h,f,m={}.hasOwnProperty;c=r(144),u=r(145),t=r(142),n=r(143),l=r(141),d=r(150),h=r(151),p=r(152),i=r(146),o=r(148),s=r(147),a=r(149),f=r(295),e.exports=function(e){function XMLStringWriter(e){XMLStringWriter.__super__.constructor.call(this,e)}return function(e,t){for(var r in t)m.call(t,r)&&(e[r]=t[r]);function ctor(){this.constructor=e}ctor.prototype=t.prototype,e.prototype=new ctor,e.__super__=t.prototype}(XMLStringWriter,f),XMLStringWriter.prototype.document=function(e){var t,r,i,o,s;for(this.textispresent=!1,o="",r=0,i=(s=e.children).length;r<i;r++)t=s[r],o+=function(){switch(!1){case!(t instanceof c):return this.declaration(t);case!(t instanceof u):return this.docType(t);case!(t instanceof n):return this.comment(t);case!(t instanceof p):return this.processingInstruction(t);default:return this.element(t,0)}}.call(this);return this.pretty&&o.slice(-this.newline.length)===this.newline&&(o=o.slice(0,-this.newline.length)),o},XMLStringWriter.prototype.attribute=function(e){return" "+e.name+'="'+e.value+'"'},XMLStringWriter.prototype.cdata=function(e,t){return this.space(t)+"<![CDATA["+e.text+"]]>"+this.newline},XMLStringWriter.prototype.comment=function(e,t){return this.space(t)+"\x3c!-- "+e.text+" --\x3e"+this.newline},XMLStringWriter.prototype.declaration=function(e,t){var r;return r=this.space(t),r+='<?xml version="'+e.version+'"',null!=e.encoding&&(r+=' encoding="'+e.encoding+'"'),null!=e.standalone&&(r+=' standalone="'+e.standalone+'"'),r+=this.spacebeforeslash+"?>",r+=this.newline},XMLStringWriter.prototype.docType=function(e,r){var c,u,l,d,h;if(r||(r=0),d=this.space(r),d+="<!DOCTYPE "+e.root().name,e.pubID&&e.sysID?d+=' PUBLIC "'+e.pubID+'" "'+e.sysID+'"':e.sysID&&(d+=' SYSTEM "'+e.sysID+'"'),e.children.length>0){for(d+=" [",d+=this.newline,u=0,l=(h=e.children).length;u<l;u++)c=h[u],d+=function(){switch(!1){case!(c instanceof i):return this.dtdAttList(c,r+1);case!(c instanceof o):return this.dtdElement(c,r+1);case!(c instanceof s):return this.dtdEntity(c,r+1);case!(c instanceof a):return this.dtdNotation(c,r+1);case!(c instanceof t):return this.cdata(c,r+1);case!(c instanceof n):return this.comment(c,r+1);case!(c instanceof p):return this.processingInstruction(c,r+1);default:throw new Error("Unknown DTD node type: "+c.constructor.name)}}.call(this);d+="]"}return d+=this.spacebeforeslash+">",d+=this.newline},XMLStringWriter.prototype.element=function(e,r){var i,o,s,a,c,u,f,g,y,v,b,_,w;for(f in r||(r=0),w=!1,this.textispresent?(this.newline="",this.pretty=!1):(this.newline=this.newlinedefault,this.pretty=this.prettydefault),g="",g+=(_=this.space(r))+"<"+e.name,y=e.attributes)m.call(y,f)&&(i=y[f],g+=this.attribute(i));if(0===e.children.length||e.children.every(function(e){return""===e.value}))this.allowEmpty?g+="></"+e.name+">"+this.newline:g+=this.spacebeforeslash+"/>"+this.newline;else if(this.pretty&&1===e.children.length&&null!=e.children[0].value)g+=">",g+=e.children[0].value,g+="</"+e.name+">"+this.newline;else{if(this.dontprettytextnodes)for(s=0,c=(v=e.children).length;s<c;s++)if(null!=(o=v[s]).value){this.textispresent++,w=!0;break}for(this.textispresent&&(this.newline="",this.pretty=!1,_=this.space(r)),g+=">"+this.newline,a=0,u=(b=e.children).length;a<u;a++)o=b[a],g+=function(){switch(!1){case!(o instanceof t):return this.cdata(o,r+1);case!(o instanceof n):return this.comment(o,r+1);case!(o instanceof l):return this.element(o,r+1);case!(o instanceof d):return this.raw(o,r+1);case!(o instanceof h):return this.text(o,r+1);case!(o instanceof p):return this.processingInstruction(o,r+1);default:throw new Error("Unknown XML node type: "+o.constructor.name)}}.call(this);w&&this.textispresent--,this.textispresent||(this.newline=this.newlinedefault,this.pretty=this.prettydefault),g+=_+"</"+e.name+">"+this.newline}return g},XMLStringWriter.prototype.processingInstruction=function(e,t){var r;return r=this.space(t)+"<?"+e.target,e.value&&(r+=" "+e.value),r+=this.spacebeforeslash+"?>"+this.newline},XMLStringWriter.prototype.raw=function(e,t){return this.space(t)+e.value+this.newline},XMLStringWriter.prototype.text=function(e,t){return this.space(t)+e.value+this.newline},XMLStringWriter.prototype.dtdAttList=function(e,t){var r;return r=this.space(t)+"<!ATTLIST "+e.elementName+" "+e.attributeName+" "+e.attributeType,"#DEFAULT"!==e.defaultValueType&&(r+=" "+e.defaultValueType),e.defaultValue&&(r+=' "'+e.defaultValue+'"'),r+=this.spacebeforeslash+">"+this.newline},XMLStringWriter.prototype.dtdElement=function(e,t){return this.space(t)+"<!ELEMENT "+e.name+" "+e.value+this.spacebeforeslash+">"+this.newline},XMLStringWriter.prototype.dtdEntity=function(e,t){var r;return r=this.space(t)+"<!ENTITY",e.pe&&(r+=" %"),r+=" "+e.name,e.value?r+=' "'+e.value+'"':(e.pubID&&e.sysID?r+=' PUBLIC "'+e.pubID+'" "'+e.sysID+'"':e.sysID&&(r+=' SYSTEM "'+e.sysID+'"'),e.nData&&(r+=" NDATA "+e.nData)),r+=this.spacebeforeslash+">"+this.newline},XMLStringWriter.prototype.dtdNotation=function(e,t){var r;return r=this.space(t)+"<!NOTATION "+e.name,e.pubID&&e.sysID?r+=' PUBLIC "'+e.pubID+'" "'+e.sysID+'"':e.pubID?r+=' PUBLIC "'+e.pubID+'"':e.sysID&&(r+=' SYSTEM "'+e.sysID+'"'),r+=this.spacebeforeslash+">"+this.newline},XMLStringWriter.prototype.openNode=function(e,t){var r,n,i,o;if(t||(t=0),e instanceof l){for(n in i=this.space(t)+"<"+e.name,o=e.attributes)m.call(o,n)&&(r=o[n],i+=this.attribute(r));return i+=(e.children?">":"/>")+this.newline}return i=this.space(t)+"<!DOCTYPE "+e.rootNodeName,e.pubID&&e.sysID?i+=' PUBLIC "'+e.pubID+'" "'+e.sysID+'"':e.sysID&&(i+=' SYSTEM "'+e.sysID+'"'),i+=(e.children?" [":">")+this.newline},XMLStringWriter.prototype.closeNode=function(e,t){switch(t||(t=0),!1){case!(e instanceof l):return this.space(t)+"</"+e.name+">"+this.newline;case!(e instanceof u):return this.space(t)+"]>"+this.newline}},XMLStringWriter}()}).call(this)},function(e,t){e.exports=require("string_decoder")},function(e,t){function Logger(e,t){this.level=e,this.loggerFunction=t,this.loggerFunction||(this.loggerFunction=this.defaultLoggerFunction)}Logger.LogLevels={EMERGENCY:"emergency",ALERT:"alert",CRITICAL:"critical",ERROR:"error",WARNING:"warning",NOTICE:"notice",INFO:"info",DEBUG:"debug"},Logger.logPriority=[Logger.LogLevels.EMERGENCY,Logger.LogLevels.ALERT,Logger.LogLevels.CRITICAL,Logger.LogLevels.ERROR,Logger.LogLevels.WARNING,Logger.LogLevels.NOTICE,Logger.LogLevels.INFO,Logger.LogLevels.DEBUG],Logger.prototype.log=function(e,t){this.loggerFunction(e,t)},Logger.prototype.emergency=function(e){this.log(Logger.LogLevels.EMERGENCY,e)},Logger.prototype.critical=function(e){this.log(Logger.LogLevels.CRITICAL,e)},Logger.prototype.alert=function(e){this.log(Logger.LogLevels.ALERT,e)},Logger.prototype.error=function(e){this.log(Logger.LogLevels.ERROR,e)},Logger.prototype.warn=function(e){this.log(Logger.LogLevels.WARNING,e)},Logger.prototype.notice=function(e){this.log(Logger.LogLevels.NOTICE,e)},Logger.prototype.info=function(e){this.log(Logger.LogLevels.INFO,e)},Logger.prototype.debug=function(e){this.log(Logger.LogLevels.DEBUG,e)},Logger.prototype.defaultLoggerFunction=function(e,t){var r=Logger.logPriority.indexOf(this.level),n=Logger.logPriority.indexOf(e),i=(new Date).toISOString();n<=r&&console.log("["+i+"]"+this.level+" : "+t)},e.exports=Logger},function(e,t,r){"use strict";var n=r(659),i=r(12),o=r(14).Buffer,s="undefined"==typeof setImmediate?process.nextTick:setImmediate;t.paramsHaveRequestBody=function paramsHaveRequestBody(e){return e.body||e.requestBodyStream||e.json&&"boolean"!=typeof e.json||e.multipart},t.safeStringify=function safeStringify(e,t){var r;try{r=JSON.stringify(e,t)}catch(i){r=n(e,t)}return r},t.md5=function md5(e){return i.createHash("md5").update(e).digest("hex")},t.isReadStream=function isReadStream(e){return e.readable&&e.path&&e.mode},t.toBase64=function toBase64(e){return o.from(e||"","utf8").toString("base64")},t.copy=function copy(e){var t={};return Object.keys(e).forEach(function(r){t[r]=e[r]}),t},t.version=function version(){var e=process.version.replace("v","").split(".");return{major:parseInt(e[0],10),minor:parseInt(e[1],10),patch:parseInt(e[2],10)}},t.defer=s},function(e,t,r){var n=r(30),i=r(114),o=r(65),s=r(33),a=r(115),c=r(120),u=r(64);e.exports={Key:n,parseKey:n.parse,Fingerprint:i,parseFingerprint:i.parse,Signature:o,parseSignature:o.parse,PrivateKey:s,parsePrivateKey:s.parse,generatePrivateKey:s.generate,Certificate:a,parseCertificate:a.parse,createSelfSignedCertificate:a.createSelfSigned,createCertificate:a.create,Identity:c,identityFromDN:c.parseDN,identityForHost:c.forHost,identityForUser:c.forUser,identityForEmail:c.forEmail,identityFromArray:c.fromArray,FingerprintFormatError:u.FingerprintFormatError,InvalidAlgorithmError:u.InvalidAlgorithmError,KeyParseError:u.KeyParseError,SignatureParseError:u.SignatureParseError,KeyEncryptedError:u.KeyEncryptedError,CertificateParseError:u.CertificateParseError}},function(e,t,r){e.exports={DiffieHellman:DiffieHellman,generateECDSA:function generateECDSA(e){var t=[];if(p){var r={nistp256:"prime256v1",nistp384:"secp384r1",nistp521:"secp521r1"}[e],n=i.createECDH(r);return n.generateKeys(),t.push({name:"curve",data:o.from(e)}),t.push({name:"Q",data:n.getPublicKey()}),t.push({name:"d",data:n.getPrivateKey()}),new l({type:"ecdsa",curve:e,parts:t})}var s=new X9ECParameters(e),a=s.getN(),c=Math.ceil((a.bitLength()+64)/8),u=new h(i.randomBytes(c)),d=a.subtract(h.ONE),f=u.mod(d).add(h.ONE),m=s.getG().multiply(f);return f=o.from(f.toByteArray()),m=o.from(s.getCurve().encodePointHex(m),"hex"),t.push({name:"curve",data:o.from(e)}),t.push({name:"Q",data:m}),t.push({name:"d",data:f}),new l({type:"ecdsa",curve:e,parts:t})},generateED25519:function generateED25519(){var e=c.sign.keyPair(),t=o.from(e.secretKey),r=o.from(e.publicKey);n.strictEqual(t.length,64),n.strictEqual(r.length,32);var i=[];return i.push({name:"A",data:r}),i.push({name:"k",data:t.slice(0,32)}),new l({type:"ed25519",parts:i})}};var n=r(13),i=r(12),o=r(19).Buffer,s=r(32),a=r(26),c=r(116),u=r(30),l=r(33),p=void 0!==i.createECDH,d=(r(666),r(154)),h=r(117).BigInteger;function DiffieHellman(e){if(a.assertCompatible(e,u,[1,4],"key"),this._isPriv=l.isPrivateKey(e,[1,3]),this._algo=e.type,this._curve=e.curve,this._key=e,"dsa"===e.type){if(!p)throw new Error("Due to bugs in the node 0.10 crypto API, node 0.12.x or later is required to use DH");this._dh=i.createDiffieHellman(e.part.p.data,void 0,e.part.g.data,void 0),this._p=e.part.p,this._g=e.part.g,this._isPriv&&this._dh.setPrivateKey(e.part.x.data),this._dh.setPublicKey(e.part.y.data)}else if("ecdsa"===e.type){if(!p)return this._ecParams=new X9ECParameters(this._curve),void(this._isPriv&&(this._priv=new ECPrivate(this._ecParams,e.part.d.data)));var t={nistp256:"prime256v1",nistp384:"secp384r1",nistp521:"secp521r1"}[e.curve];if(this._dh=i.createECDH(t),"object"!=typeof this._dh||"function"!=typeof this._dh.setPrivateKey)return p=!1,void DiffieHellman.call(this,e);this._isPriv&&this._dh.setPrivateKey(e.part.d.data),this._dh.setPublicKey(e.part.Q.data)}else{if("curve25519"!==e.type)throw new Error("DH not supported for "+e.type+" keys");this._isPriv&&(a.assertCompatible(e,l,[1,5],"key"),this._priv=e.part.k.data)}}function X9ECParameters(e){var t=s.curves[e];n.object(t);var r=new h(t.p),i=new h(t.a),o=new h(t.b),a=new h(t.n),c=h.ONE,u=new d.ECCurveFp(r,i,o),l=u.decodePointHex(t.G.toString("hex"));this.curve=u,this.g=l,this.n=a,this.h=c}function ECPublic(e,t){this._params=e,0===t[0]&&(t=t.slice(1)),this._pub=e.getCurve().decodePointHex(t.toString("hex"))}function ECPrivate(e,t){this._params=e,this._priv=new h(a.mpNormalize(t))}DiffieHellman.prototype.getPublicKey=function(){return this._isPriv?this._key.toPublic():this._key},DiffieHellman.prototype.getPrivateKey=function(){return this._isPriv?this._key:void 0},DiffieHellman.prototype.getKey=DiffieHellman.prototype.getPrivateKey,DiffieHellman.prototype._keyCheck=function(e,t){if(n.object(e,"key"),t||a.assertCompatible(e,l,[1,3],"key"),a.assertCompatible(e,u,[1,4],"key"),e.type!==this._algo)throw new Error("A "+e.type+" key cannot be used in "+this._algo+" Diffie-Hellman");if(e.curve!==this._curve)throw new Error("A key from the "+e.curve+" curve cannot be used with a "+this._curve+" Diffie-Hellman");"dsa"===e.type&&(n.deepEqual(e.part.p,this._p,"DSA key prime does not match"),n.deepEqual(e.part.g,this._g,"DSA key generator does not match"))},DiffieHellman.prototype.setKey=function(e){if(this._keyCheck(e),"dsa"===e.type)this._dh.setPrivateKey(e.part.x.data),this._dh.setPublicKey(e.part.y.data);else if("ecdsa"===e.type)p?(this._dh.setPrivateKey(e.part.d.data),this._dh.setPublicKey(e.part.Q.data)):this._priv=new ECPrivate(this._ecParams,e.part.d.data);else if("curve25519"===e.type){var t=e.part.k;e.part.k||(t=e.part.r),this._priv=t.data,0===this._priv[0]&&(this._priv=this._priv.slice(1)),this._priv=this._priv.slice(0,32)}this._key=e,this._isPriv=!0},DiffieHellman.prototype.setPrivateKey=DiffieHellman.prototype.setKey,DiffieHellman.prototype.computeSecret=function(e){if(this._keyCheck(e,!0),!this._isPriv)throw new Error("DH exchange has not been initialized with a private key yet");var t;if("dsa"===this._algo)return this._dh.computeSecret(e.part.y.data);if("ecdsa"===this._algo)return p?this._dh.computeSecret(e.part.Q.data):(t=new ECPublic(this._ecParams,e.part.Q.data),this._priv.deriveSharedSecret(t));if("curve25519"===this._algo){for(t=e.part.A.data;0===t[0]&&t.length>32;)t=t.slice(1);var r=this._priv;n.strictEqual(t.length,32),n.strictEqual(r.length,32);var i=c.box.before(new Uint8Array(t),new Uint8Array(r));return o.from(i)}throw new Error("Invalid algorithm: "+this._algo)},DiffieHellman.prototype.generateKey=function(){var e,t,r=[];if("dsa"===this._algo)return this._dh.generateKeys(),r.push({name:"p",data:this._p.data}),r.push({name:"q",data:this._key.part.q.data}),r.push({name:"g",data:this._g.data}),r.push({name:"y",data:this._dh.getPublicKey()}),r.push({name:"x",data:this._dh.getPrivateKey()}),this._key=new l({type:"dsa",parts:r}),this._isPriv=!0,this._key;if("ecdsa"===this._algo){if(p)return this._dh.generateKeys(),r.push({name:"curve",data:o.from(this._curve)}),r.push({name:"Q",data:this._dh.getPublicKey()}),r.push({name:"d",data:this._dh.getPrivateKey()}),this._key=new l({type:"ecdsa",curve:this._curve,parts:r}),this._isPriv=!0,this._key;var s=this._ecParams.getN(),a=new h(i.randomBytes(s.bitLength())),u=s.subtract(h.ONE);return e=a.mod(u).add(h.ONE),t=this._ecParams.getG().multiply(e),e=o.from(e.toByteArray()),t=o.from(this._ecParams.getCurve().encodePointHex(t),"hex"),this._priv=new ECPrivate(this._ecParams,e),r.push({name:"curve",data:o.from(this._curve)}),r.push({name:"Q",data:t}),r.push({name:"d",data:e}),this._key=new l({type:"ecdsa",curve:this._curve,parts:r}),this._isPriv=!0,this._key}if("curve25519"===this._algo){var d=c.box.keyPair();return e=o.from(d.secretKey),t=o.from(d.publicKey),e=o.concat([e,t]),n.strictEqual(e.length,64),n.strictEqual(t.length,32),r.push({name:"A",data:t}),r.push({name:"k",data:e}),this._key=new l({type:"curve25519",parts:r}),this._isPriv=!0,this._key}throw new Error("Invalid algorithm: "+this._algo)},DiffieHellman.prototype.generateKeys=DiffieHellman.prototype.generateKey,X9ECParameters.prototype.getCurve=function(){return this.curve},X9ECParameters.prototype.getG=function(){return this.g},X9ECParameters.prototype.getN=function(){return this.n},X9ECParameters.prototype.getH=function(){return this.h},ECPrivate.prototype.deriveSharedSecret=function(e){n.ok(e instanceof ECPublic);var t=e._pub.multiply(this._priv);return o.from(t.getX().toBigInteger().toByteArray())}},function(e,t){e.exports={newInvalidAsn1Error:function(e){var t=new Error;return t.name="InvalidAsn1Error",t.message=e||"",t}}},function(e,t){e.exports={EOC:0,Boolean:1,Integer:2,BitString:3,OctetString:4,Null:5,OID:6,ObjectDescriptor:7,External:8,Real:9,Enumeration:10,PDV:11,Utf8String:12,RelativeOID:13,Sequence:16,Set:17,NumericString:18,PrintableString:19,T61String:20,VideotexString:21,IA5String:22,UTCTime:23,GeneralizedTime:24,GraphicString:25,VisibleString:26,GeneralString:28,UniversalString:29,CharacterString:30,BMPString:31,Constructor:32,Context:128}},function(e,t,r){e.exports={read:function read(e,t){return l.read(e,t,"pkcs1")},readPkcs1:function readPkcs1(e,t,r){switch(e){case"RSA":if("public"===t)return function readPkcs1RSAPublic(e){var t=readMPInt(e,"modulus"),r=readMPInt(e,"exponent");return new c({type:"rsa",parts:[{name:"e",data:r},{name:"n",data:t}]})}(r);if("private"===t)return function readPkcs1RSAPrivate(e){var t=readMPInt(e,"version");n.strictEqual(t[0],0);var r=readMPInt(e,"modulus"),i=readMPInt(e,"public exponent"),o=readMPInt(e,"private exponent"),s=readMPInt(e,"prime1"),a=readMPInt(e,"prime2"),c=readMPInt(e,"exponent1"),l=readMPInt(e,"exponent2"),p=readMPInt(e,"iqmp");return new u({type:"rsa",parts:[{name:"n",data:r},{name:"e",data:i},{name:"d",data:o},{name:"iqmp",data:p},{name:"p",data:s},{name:"q",data:a},{name:"dmodp",data:c},{name:"dmodq",data:l}]})}(r);throw new Error("Unknown key type: "+t);case"DSA":if("public"===t)return function readPkcs1DSAPublic(e){var t=readMPInt(e,"y"),r=readMPInt(e,"p"),n=readMPInt(e,"q"),i=readMPInt(e,"g");return new c({type:"dsa",parts:[{name:"y",data:t},{name:"p",data:r},{name:"q",data:n},{name:"g",data:i}]})}(r);if("private"===t)return function readPkcs1DSAPrivate(e){var t=readMPInt(e,"version");n.strictEqual(t.readUInt8(0),0);var r=readMPInt(e,"p"),i=readMPInt(e,"q"),o=readMPInt(e,"g"),s=readMPInt(e,"y"),a=readMPInt(e,"x");return new u({type:"dsa",parts:[{name:"p",data:r},{name:"q",data:i},{name:"g",data:o},{name:"y",data:s},{name:"x",data:a}]})}(r);throw new Error("Unknown key type: "+t);case"EC":case"ECDSA":if("private"===t)return function readPkcs1ECDSAPrivate(e){var t=readMPInt(e,"version");n.strictEqual(t.readUInt8(0),1);var r=e.readString(i.Ber.OctetString,!0);e.readSequence(160);var s=p(e);n.string(s,"a known elliptic curve"),e.readSequence(161);var c=e.readString(i.Ber.BitString,!0);c=a.ecNormalize(c);var l={type:"ecdsa",parts:[{name:"curve",data:o.from(s)},{name:"Q",data:c},{name:"d",data:r}]};return new u(l)}(r);if("public"===t)return function readPkcs1ECDSAPublic(e){e.readSequence();var t=e.readOID();n.strictEqual(t,"1.2.840.10045.2.1","must be ecPublicKey");for(var r,u=e.readOID(),l=Object.keys(s.curves),p=0;p<l.length;++p){var d=l[p],h=s.curves[d];if(h.pkcs8oid===u){r=d;break}}n.string(r,"a known ECDSA named curve");var f=e.readString(i.Ber.BitString,!0);f=a.ecNormalize(f);var m={type:"ecdsa",parts:[{name:"curve",data:o.from(r)},{name:"Q",data:f}]};return new c(m)}(r);throw new Error("Unknown key type: "+t);case"EDDSA":case"EdDSA":if("private"===t)return function readPkcs1EdDSAPrivate(e){var t=readMPInt(e,"version");n.strictEqual(t.readUInt8(0),1);var r=e.readString(i.Ber.OctetString,!0);e.readSequence(160);var o=e.readOID();n.strictEqual(o,"1.3.101.112","the ed25519 curve identifier"),e.readSequence(161);var s=a.readBitString(e),c={type:"ed25519",parts:[{name:"A",data:a.zeroPadToLength(s,32)},{name:"k",data:r}]};return new u(c)}(r);throw new Error(t+" keys not supported with EdDSA");default:throw new Error("Unknown key algo: "+e)}},write:function write(e,t){return l.write(e,t,"pkcs1")},writePkcs1:function writePkcs1(e,t){switch(e.startSequence(),t.type){case"rsa":u.isPrivateKey(t)?function writePkcs1RSAPrivate(e,t){var r=o.from([0]);e.writeBuffer(r,i.Ber.Integer),e.writeBuffer(t.part.n.data,i.Ber.Integer),e.writeBuffer(t.part.e.data,i.Ber.Integer),e.writeBuffer(t.part.d.data,i.Ber.Integer),e.writeBuffer(t.part.p.data,i.Ber.Integer),e.writeBuffer(t.part.q.data,i.Ber.Integer),t.part.dmodp&&t.part.dmodq||a.addRSAMissing(t);e.writeBuffer(t.part.dmodp.data,i.Ber.Integer),e.writeBuffer(t.part.dmodq.data,i.Ber.Integer),e.writeBuffer(t.part.iqmp.data,i.Ber.Integer)}(e,t):function writePkcs1RSAPublic(e,t){e.writeBuffer(t.part.n.data,i.Ber.Integer),e.writeBuffer(t.part.e.data,i.Ber.Integer)}(e,t);break;case"dsa":u.isPrivateKey(t)?function writePkcs1DSAPrivate(e,t){var r=o.from([0]);e.writeBuffer(r,i.Ber.Integer),e.writeBuffer(t.part.p.data,i.Ber.Integer),e.writeBuffer(t.part.q.data,i.Ber.Integer),e.writeBuffer(t.part.g.data,i.Ber.Integer),e.writeBuffer(t.part.y.data,i.Ber.Integer),e.writeBuffer(t.part.x.data,i.Ber.Integer)}(e,t):function writePkcs1DSAPublic(e,t){e.writeBuffer(t.part.y.data,i.Ber.Integer),e.writeBuffer(t.part.p.data,i.Ber.Integer),e.writeBuffer(t.part.q.data,i.Ber.Integer),e.writeBuffer(t.part.g.data,i.Ber.Integer)}(e,t);break;case"ecdsa":u.isPrivateKey(t)?function writePkcs1ECDSAPrivate(e,t){var r=o.from([1]);e.writeBuffer(r,i.Ber.Integer),e.writeBuffer(t.part.d.data,i.Ber.OctetString),e.startSequence(160);var c=t.part.curve.data.toString(),u=s.curves[c].pkcs8oid;n.string(u,"a known ECDSA named curve"),e.writeOID(u),e.endSequence(),e.startSequence(161);var l=a.ecNormalize(t.part.Q.data,!0);e.writeBuffer(l,i.Ber.BitString),e.endSequence()}(e,t):function writePkcs1ECDSAPublic(e,t){e.startSequence(),e.writeOID("1.2.840.10045.2.1");var r=t.part.curve.data.toString(),o=s.curves[r].pkcs8oid;n.string(o,"a known ECDSA named curve"),e.writeOID(o),e.endSequence();var c=a.ecNormalize(t.part.Q.data,!0);e.writeBuffer(c,i.Ber.BitString)}(e,t);break;case"ed25519":u.isPrivateKey(t)?function writePkcs1EdDSAPrivate(e,t){var r=o.from([1]);e.writeBuffer(r,i.Ber.Integer),e.writeBuffer(t.part.k.data,i.Ber.OctetString),e.startSequence(160),e.writeOID("1.3.101.112"),e.endSequence(),e.startSequence(161),a.writeBitString(e,t.part.A.data),e.endSequence()}(e,t):function writePkcs1EdDSAPublic(e,t){throw new Error("Public keys are not supported for EdDSA PKCS#1")}();break;default:throw new Error("Unknown key algo: "+t.type)}e.endSequence()}};var n=r(13),i=r(66),o=r(19).Buffer,s=r(32),a=r(26),c=r(30),u=r(33),l=r(77),p=r(118).readECDSACurve;function readMPInt(e,t){return n.strictEqual(e.peek(),i.Ber.Integer,t+" is not an Integer"),a.mpNormalize(e.readString(i.Ber.Integer,!0))}},function(e,t,r){e.exports={read:function read(e,t){"string"!=typeof e&&(n.buffer(e,"buf"),e=e.toString("ascii"));var r=e.split("\n");if(r[0].match(/^Private-key-format\: v1/)){var c=r[1].split(" "),l=parseInt(c[1],10),p=c[2];if(!u[l])throw new Error("Unsupported algorithm: "+p);return function readDNSSECPrivateKey(e,t){if(u[e].match(/^RSA-/))return function readDNSSECRSAPrivateKey(e){var t={};e.forEach(function(e){"Modulus:"===e.split(" ")[0]?t.n=elementToBuf(e):"PublicExponent:"===e.split(" ")[0]?t.e=elementToBuf(e):"PrivateExponent:"===e.split(" ")[0]?t.d=elementToBuf(e):"Prime1:"===e.split(" ")[0]?t.p=elementToBuf(e):"Prime2:"===e.split(" ")[0]?t.q=elementToBuf(e):"Exponent1:"===e.split(" ")[0]?t.dmodp=elementToBuf(e):"Exponent2:"===e.split(" ")[0]?t.dmodq=elementToBuf(e):"Coefficient:"===e.split(" ")[0]&&(t.iqmp=elementToBuf(e))});var r={type:"rsa",parts:[{name:"e",data:a.mpNormalize(t.e)},{name:"n",data:a.mpNormalize(t.n)},{name:"d",data:a.mpNormalize(t.d)},{name:"p",data:a.mpNormalize(t.p)},{name:"q",data:a.mpNormalize(t.q)},{name:"dmodp",data:a.mpNormalize(t.dmodp)},{name:"dmodq",data:a.mpNormalize(t.dmodq)},{name:"iqmp",data:a.mpNormalize(t.iqmp)}]};return new s(r)}(t);if("ECDSA-P384-SHA384"===u[e]||"ECDSA-P256-SHA256"===u[e]){var r=i.from(t[0].split(" ")[1],"base64"),n="nistp384",o=384;"ECDSA-P256-SHA256"===u[e]&&(n="nistp256",o=256);var c=a.publicFromPrivateECDSA(n,r),l=c.part.Q.data,p={type:"ecdsa",curve:n,size:o,parts:[{name:"curve",data:i.from(n)},{name:"d",data:r},{name:"Q",data:l}]};return new s(p)}throw new Error("Unsupported algorithm: "+u[e])}(l,r.slice(2))}var d=0;for(;r[d].match(/^\;/);)d++;if((r[d].match(/\. IN KEY /)||r[d].match(/\. IN DNSKEY /))&&0===r[d+1].length)return function readRFC3110(e){var t=e.split(" "),r=parseInt(t[5],10);if(!u[r])throw new Error("Unsupported algorithm: "+r);var n=t.slice(6,t.length).join(),s=i.from(n,"base64");if(u[r].match(/^RSA-/)){var c=s.readUInt8(0);if(3!=c&&1!=c)throw new Error("Cannot parse dnssec key: unsupported exponent length");var l=s.slice(1,c+1);l=a.mpNormalize(l);var p=s.slice(1+c);p=a.mpNormalize(p);var d={type:"rsa",parts:[]};return d.parts.push({name:"e",data:l}),d.parts.push({name:"n",data:p}),new o(d)}if("ECDSA-P384-SHA384"===u[r]||"ECDSA-P256-SHA256"===u[r]){var h="nistp384",f=384;u[r].match(/^ECDSA-P256-SHA256/)&&(h="nistp256",f=256);var m={type:"ecdsa",curve:h,size:f,parts:[{name:"curve",data:i.from(h)},{name:"Q",data:a.ecNormalize(s)}]};return new o(m)}throw new Error("Unsupported algorithm: "+u[r])}(r[d]);throw new Error("Cannot parse dnssec key")},write:function write(e,t){if(s.isPrivateKey(e)){if("rsa"===e.type)return function writeRSA(e,t){e.part.dmodp&&e.part.dmodq||a.addRSAMissing(e);var r="";r+="Private-key-format: v1.3\n",r+="Algorithm: "+function rsaAlgFromOptions(e){if(e&&e.hashAlgo&&"sha1"!==e.hashAlgo){if("sha256"===e.hashAlgo)return"8 (RSASHA256)";if("sha512"===e.hashAlgo)return"10 (RSASHA512)";throw new Error("Unknown or unsupported hash: "+e.hashAlgo)}return"5 (RSASHA1)"}(t)+"\n";var n=a.mpDenormalize(e.part.n.data);r+="Modulus: "+n.toString("base64")+"\n";var o=a.mpDenormalize(e.part.e.data);r+="PublicExponent: "+o.toString("base64")+"\n";var s=a.mpDenormalize(e.part.d.data);r+="PrivateExponent: "+s.toString("base64")+"\n";var c=a.mpDenormalize(e.part.p.data);r+="Prime1: "+c.toString("base64")+"\n";var u=a.mpDenormalize(e.part.q.data);r+="Prime2: "+u.toString("base64")+"\n";var l=a.mpDenormalize(e.part.dmodp.data);r+="Exponent1: "+l.toString("base64")+"\n";var p=a.mpDenormalize(e.part.dmodq.data);r+="Exponent2: "+p.toString("base64")+"\n";var d=a.mpDenormalize(e.part.iqmp.data);r+="Coefficient: "+d.toString("base64")+"\n";var h=new Date;return r+="Created: "+dnssecTimestamp(h)+"\n",r+="Publish: "+dnssecTimestamp(h)+"\n",r+="Activate: "+dnssecTimestamp(h)+"\n",i.from(r,"ascii")}(e,t);if("ecdsa"===e.type)return function writeECDSA(e,t){var r="";if(r+="Private-key-format: v1.3\n","nistp256"===e.curve)r+="Algorithm: 13 (ECDSAP256SHA256)\n";else{if("nistp384"!==e.curve)throw new Error("Unsupported curve");r+="Algorithm: 14 (ECDSAP384SHA384)\n"}var n=e.part.d.data.toString("base64");r+="PrivateKey: "+n+"\n";var o=new Date;return r+="Created: "+dnssecTimestamp(o)+"\n",r+="Publish: "+dnssecTimestamp(o)+"\n",r+="Activate: "+dnssecTimestamp(o)+"\n",i.from(r,"ascii")}(e);throw new Error("Unsupported algorithm: "+e.type)}throw o.isKey(e)?new Error('Format "dnssec" only supports writing private keys'):new Error("key is not a Key or PrivateKey")}};var n=r(13),i=r(19).Buffer,o=r(30),s=r(33),a=r(26),c=(r(119),r(191),{"rsa-sha1":5,"rsa-sha256":8,"rsa-sha512":10,"ecdsa-p256-sha256":13,"ecdsa-p384-sha384":14}),u={};function elementToBuf(e){return i.from(e.split(" ")[1],"base64")}function dnssecTimestamp(e){var t=e.getFullYear()+""+(e.getMonth()+1)+e.getUTCDate();return t+=""+e.getUTCHours()+e.getUTCMinutes(),t+=e.getUTCSeconds()}Object.keys(c).forEach(function(e){u[c[e]]=e.toUpperCase()})},function(e,t){function Caseless(e){this.dict=e||{}}Caseless.prototype.set=function(e,t,r){if("object"!=typeof e){void 0===r&&(r=!0);var n=this.has(e);return!r&&n?this.dict[n]=this.dict[n]+","+t:this.dict[n||e]=t,n}for(var i in e)this.set(i,e[i],t)},Caseless.prototype.has=function(e){for(var t=Object.keys(this.dict),r=(e=e.toLowerCase(),0);r<t.length;r++)if(t[r].toLowerCase()===e)return t[r];return!1},Caseless.prototype.get=function(e){var t,r;e=e.toLowerCase();var n=this.dict;return Object.keys(n).forEach(function(i){r=i.toLowerCase(),e===r&&(t=n[i])}),t},Caseless.prototype.swap=function(e){var t=this.has(e);if(t!==e){if(!t)throw new Error('There is no header than matches "'+e+'"');this.dict[e]=this.dict[t],delete this.dict[t]}},Caseless.prototype.del=function(e){var t=this.has(e);return delete this.dict[t||e]},e.exports=function(e){return new Caseless(e)},e.exports.httpify=function(e,t){var r=new Caseless(t);return e.setHeader=function(e,t,n){if(void 0!==t)return r.set(e,t,n)},e.hasHeader=function(e){return r.has(e)},e.getHeader=function(e){return r.get(e)},e.removeHeader=function(e){return r.del(e)},e.headers=r.dict,r}},function(e,t,r){"use strict";var n=r(696),i=r(198),o=r(91),s=r(323),a=r(698);function resolve(e,t,r){var n=this._refs[r];if("string"==typeof n){if(!this._refs[n])return resolve.call(this,e,t,n);n=this._refs[n]}if((n=n||this._schemas[r])instanceof s)return inlineRef(n.schema,this._opts.inlineRefs)?n.schema:n.validate||this._compile(n);var i,o,a,c=resolveSchema.call(this,t,r);return c&&(i=c.schema,t=c.root,a=c.baseId),i instanceof s?o=i.validate||e.call(this,i.schema,t,void 0,a):void 0!==i&&(o=inlineRef(i,this._opts.inlineRefs)?i:e.call(this,i,t,void 0,a)),o}function resolveSchema(e,t){var r=n.parse(t),i=_getFullPath(r),o=getFullPath(this._getId(e.schema));if(0===Object.keys(e.schema).length||i!==o){var a=normalizeId(i),c=this._refs[a];if("string"==typeof c)return function resolveRecursive(e,t,r){var n=resolveSchema.call(this,e,t);if(n){var i=n.schema,o=n.baseId;e=n.root;var s=this._getId(i);return s&&(o=resolveUrl(o,s)),getJsonPointer.call(this,r,o,i,e)}}.call(this,e,c,r);if(c instanceof s)c.validate||this._compile(c),e=c;else{if(!((c=this._schemas[a])instanceof s))return;if(c.validate||this._compile(c),a==normalizeId(t))return{schema:c,root:e,baseId:o};e=c}if(!e.schema)return;o=getFullPath(this._getId(e.schema))}return getJsonPointer.call(this,r,o,e.schema,e)}e.exports=resolve,resolve.normalizeId=normalizeId,resolve.fullPath=getFullPath,resolve.url=resolveUrl,resolve.ids=function resolveIds(e){var t=normalizeId(this._getId(e)),r={"":t},s={"":getFullPath(t,!1)},c={},u=this;return a(e,{allKeys:!0},function(e,t,a,l,p,d,h){if(""!==t){var f=u._getId(e),m=r[l],g=s[l]+"/"+p;if(void 0!==h&&(g+="/"+("number"==typeof h?h:o.escapeFragment(h))),"string"==typeof f){f=m=normalizeId(m?n.resolve(m,f):f);var y=u._refs[f];if("string"==typeof y&&(y=u._refs[y]),y&&y.schema){if(!i(e,y.schema))throw new Error('id "'+f+'" resolves to more than one schema')}else if(f!=normalizeId(g))if("#"==f[0]){if(c[f]&&!i(e,c[f]))throw new Error('id "'+f+'" resolves to more than one schema');c[f]=e}else u._refs[f]=g}r[t]=m,s[t]=g}}),c},resolve.inlineRef=inlineRef,resolve.schema=resolveSchema;var c=o.toHash(["properties","patternProperties","enum","dependencies","definitions"]);function getJsonPointer(e,t,r,n){if(e.fragment=e.fragment||"","/"==e.fragment.slice(0,1)){for(var i=e.fragment.split("/"),s=1;s<i.length;s++){var a=i[s];if(a){if(void 0===(r=r[a=o.unescapeFragment(a)]))break;var u;if(!c[a]&&((u=this._getId(r))&&(t=resolveUrl(t,u)),r.$ref)){var l=resolveUrl(t,r.$ref),p=resolveSchema.call(this,n,l);p&&(r=p.schema,n=p.root,t=p.baseId)}}}return void 0!==r&&r!==n.schema?{schema:r,root:n,baseId:t}:void 0}}var u=o.toHash(["type","format","pattern","maxLength","minLength","maxProperties","minProperties","maxItems","minItems","maximum","minimum","uniqueItems","multipleOf","required","enum"]);function inlineRef(e,t){return!1!==t&&(void 0===t||!0===t?function checkNoRef(e){var t;if(Array.isArray(e)){for(var r=0;r<e.length;r++)if("object"==typeof(t=e[r])&&!checkNoRef(t))return!1}else for(var n in e){if("$ref"==n)return!1;if("object"==typeof(t=e[n])&&!checkNoRef(t))return!1}return!0}(e):t?function countKeys(e){var t,r=0;if(Array.isArray(e)){for(var n=0;n<e.length;n++)if("object"==typeof(t=e[n])&&(r+=countKeys(t)),r==1/0)return 1/0}else for(var i in e){if("$ref"==i)return 1/0;if(u[i])r++;else if("object"==typeof(t=e[i])&&(r+=countKeys(t)+1),r==1/0)return 1/0}return r}(e)<=t:void 0)}function getFullPath(e,t){return!1!==t&&(e=normalizeId(e)),_getFullPath(n.parse(e))}function _getFullPath(e){return n.serialize(e).split("#")[0]+"#"}var l=/#\/?$/;function normalizeId(e){return e?e.replace(l,""):""}function resolveUrl(e,t){return t=normalizeId(t),n.resolve(e,t)}},function(e,t,r){"use strict";var n=Array.isArray,i=Object.keys,o=Object.prototype.hasOwnProperty;e.exports=function equal(e,t){if(e===t)return!0;if(e&&t&&"object"==typeof e&&"object"==typeof t){var r,s,a,c=n(e),u=n(t);if(c&&u){if((s=e.length)!=t.length)return!1;for(r=s;0!=r--;)if(!equal(e[r],t[r]))return!1;return!0}if(c!=u)return!1;var l=e instanceof Date,p=t instanceof Date;if(l!=p)return!1;if(l&&p)return e.getTime()==t.getTime();var d=e instanceof RegExp,h=t instanceof RegExp;if(d!=h)return!1;if(d&&h)return e.toString()==t.toString();var f=i(e);if((s=f.length)!==i(t).length)return!1;for(r=s;0!=r--;)if(!o.call(t,f[r]))return!1;for(r=s;0!=r--;)if(!equal(e[a=f[r]],t[a]))return!1;return!0}return e!=e&&t!=t}},function(e,t,r){"use strict";var n=r(197);function MissingRefError(e,t,r){this.message=r||MissingRefError.message(e,t),this.missingRef=n.url(e,t),this.missingSchema=n.normalizeId(n.fullPath(this.missingRef))}function errorSubclass(e){return e.prototype=Object.create(Error.prototype),e.prototype.constructor=e,e}e.exports={Validation:errorSubclass(function ValidationError(e){this.message="validation failed",this.errors=e,this.ajv=this.validation=!0}),MissingRef:errorSubclass(MissingRefError)},MissingRefError.message=function(e,t){return"can't resolve reference "+t+" from id "+e}},function(e,t,r){var n=r(29),i=r(1),o=r(22).BlobConstants,s=r(121),a=r(331),c=r(36),u=r(63),l=r(332),p=r(76),d=p.ArgumentError,h=p.ArgumentNullError;function initCallback(e,t){var r;e?r=function(t){return e(t),!1}:(r=function(e){throw e},e=function(){}),t(r,e)}(t=e.exports).isValidEnumValue=function(e,t,r){var n;return initCallback(r,function(e,t){n=e,r=t}),t.some(function(t){return t.toLowerCase()===e.toLowerCase()})?(r(),!0):n(new RangeError(i.format("Invalid value: %s. Options are: %s.",e,t)))},t.isValidUri=function(e){if(!l.isURL(e,{require_tld:!1}))throw new URIError('The provided URI "'+e+'" is invalid.');return!0},t.isValidHost=function(e){if(c.objectIsNull(e))throw new h("host",u.STORAGE_HOST_LOCATION_REQUIRED);var t={};if(t.primaryHost=n.isString(e)?e:e.primaryHost,t.primaryHost&&!l.isURL(t.primaryHost,{require_tld:!1}))throw new URIError('The provided URI "'+t.primaryHost+'" is invalid.');if(t.secondaryHost=n.isString(e)?void 0:e.secondaryHost,t.secondaryHost&&!l.isURL(t.secondaryHost,{require_tld:!1}))throw new URIError('The provided URI "'+t.secondaryHost+'" is invalid.');if(!t.primaryHost&&!t.secondaryHost)throw new h("host",u.STORAGE_HOST_LOCATION_REQUIRED);return!0},t.isValidUuid=function(e,t){var r;return initCallback(t,function(e,n){r=e,t=n}),/^[a-zA-Z0-9]{8}\-[a-zA-Z0-9]{4}\-[a-zA-Z0-9]{4}\-[a-zA-Z0-9]{4}\-[a-zA-Z0-9]{12}$/.test(e)?(t(),!0):r(new SyntaxError("The value is not a valid UUID format."))},t.isBase64Encoded=function(e){if(e.match(/^([A-Za-z0-9+\/]{4})*([A-Za-z0-9+\/]{4}|[A-Za-z0-9+\/]{3}=|[A-Za-z0-9+\/]{2}==)$/))return!0;throw new SyntaxError("The provided account key "+e+" is not a valid base64 string.")},t.isValidFunction=function(e,t){if(!e)throw new h("functionObject",t+" must be specified.");if(!n.isFunction(e))throw new TypeError(t+" specified should be a function.");return!0};var f=function(e,t){return c.stringIsEmpty(e)?new h("name",i.format("%s name must be a non empty string.",t)):e.length<3||e.length>63?new d("name",i.format("%s name must be between 3 and 63 characters long.",t)):null===e.match(/^([a-z0-9]+(-[a-z0-9]+)*)$/)?new SyntaxError(i.format("%s name format is incorrect.",t)):null};function throwMissingArgument(e,t){throw new h(e,"Required argument "+e+" for function "+t+" is not defined")}function ArgumentValidator(e){this.func=e}t.containerNameIsValid=function(e,t){var r;initCallback(t,function(e,n){r=e,t=n});var n=f(e,"Container");return!n||e.match(/^(\$root|\$logs|\$web)$/)?(t(),!0):r(n)},t.blobNameIsValid=function(e,t,r){var n;return initCallback(r,function(e,t){n=e,r=t}),t?"$root"===e&&-1!==t.indexOf("/")?n(new SyntaxError("Blob name format is incorrect.")):(r(),!0):n(new h("blobName","Blob name is not specified."))},t.blobTierNameIsValid=function(e,t){var r;return initCallback(t,function(e,n){r=e,t=n}),e?n.chain(n.union(n.values(s.BlobTier.PremiumPageBlobTier),n.values(s.BlobTier.StandardBlobTier))).map(function(e){return e.toString().toUpperCase()}).contains(e.toString().toUpperCase()).value()?(t(),!0):r(new SyntaxError("Blob tier is incorrect. Refer to BlobUtilities.BlobTier for possible values.")):r(new h("blobTier","Blob tier is not specified."))},t.shareNameIsValid=function(e,t){var r;initCallback(t,function(e,n){r=e,t=n});var n=f(e,"Share");return n?r(n):(t(),!0)},t.queueNameIsValid=function(e,t){var r;initCallback(t,function(e,n){r=e,t=n});var n=f(e,"Queue");return n?r(n):(t(),!0)},t.tableNameIsValid=function(e,t){var r;return initCallback(t,function(e,n){r=e,t=n}),c.stringIsEmpty(e)?r(new h("table","Table name must be a non empty string.")):e.length<3||e.length>63?r(new d("table","Table name must be between 3 and 63 characters long.")):"tables"===e.toLowerCase()?r(new RangeError("Table name cannot be 'Tables'.")):null!==e.match(/^([A-Za-z][A-Za-z0-9]{2,62})$/)||"$MetricsCapacityBlob"===e||null!==e.match(/^(\$Metrics(HourPrimary|MinutePrimary|HourSecondary|MinuteSecondary)?(Transactions)(Blob|Queue|Table|File))$/)?(t(),!0):r(new SyntaxError("Table name format is incorrect."))},t.browserFileIsValid=function(e,t){var r;return initCallback(t,function(e,n){r=e,t=n}),c.isBrowser()&&e&&e.constructor&&(c.isIE()||e.constructor.name)&&(c.isIE()||"File"===e.constructor.name||"Blob"===e.constructor.name)&&c.objectIsInt(e.size)?(t(),!0):r(new d("type","Invalid HTML File object."))},t.pageRangesAreValid=function(e,t,r,n){var i;if(initCallback(n,function(e,t){i=e,n=t}),e%512!=0)return i(new RangeError("Start byte offset must be a multiple of 512."));if(!c.objectIsNull(t)){if((t+1)%512!=0)return i(new RangeError("End byte offset must be a multiple of 512 minus 1."));if(t-e+1>r)return i(new RangeError("Page blob size cannot be larger than "+r+" bytes."))}return n(),!0},t.blobTypeIsValid=function(e,t){return this.isValidEnumValue(e,function(e){var t=[];for(var r in e)e.hasOwnProperty(r)&&t.push(e[r]);return t}(o.BlobTypes),t)},t.shareACLIsValid=function(e,t){var r;return initCallback(t,function(e,n){r=e,t=n}),e!=a.SharePublicAccessType.OFF&&r(new d("type","The access type is not supported.")),t(),!0},t.shareQuotaIsValid=function(e,t){var r;return initCallback(t,function(e,n){r=e,t=n}),e&&e<=0&&r(new RangeError("The share quota value, in GB, must be greater than 0.")),t(),!0},n.extend(ArgumentValidator.prototype,{string:function(e,t){if(this.exists(e,t),"string"!=typeof e)throw new TypeError("Parameter "+t+" for function "+this.func+" should be a non-empty string")},stringAllowEmpty:function(e,t){if("string"!=typeof e)throw new TypeError("Parameter "+t+" for function "+this.func+" should be a string")},object:function(e,t){if(this.exists(e,t),"object"!=typeof e)throw new TypeError("Parameter "+t+" for function "+this.func+" should be an object")},exists:function(e,t){e||throwMissingArgument(t,this.func)},function:function(e,t){if(this.exists(e,t),"function"!=typeof e)throw new TypeError("Parameter "+t+" for function "+this.func+" should be a function")},value:function(e,t){e||0===e||throwMissingArgument(t,this.func)},nonEmptyArray:function(e,t){if(!e||0===e.length)throw new TypeError("Required array argument "+t+" for function "+this.func+" is either not defined or empty")},callback:function(e){this.exists(e,"callback"),this.function(e,"callback")},test:function(e,t){if(!e())throw new Error(t+" in function "+this.func)},tableNameIsValid:t.tableNameIsValid,browserFileIsValid:t.browserFileIsValid,containerNameIsValid:t.containerNameIsValid,shareNameIsValid:t.shareNameIsValid,blobNameIsValid:t.blobNameIsValid,blobTierNameIsValid:t.blobTierNameIsValid,pageRangesAreValid:t.pageRangesAreValid,queueNameIsValid:t.queueNameIsValid,blobTypeIsValid:t.blobTypeIsValid,shareACLIsValid:t.shareACLIsValid,shareQuotaIsValid:t.shareQuotaIsValid,isValidEnumValue:t.isValidEnumValue}),t.ArgumentValidator=ArgumentValidator,t.validateArgs=function validateArgs(e,t){t(new ArgumentValidator(e))}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function toDate(e){return(0,n.default)(e),e=Date.parse(e),isNaN(e)?null:new Date(e)};var n=function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}(r(2));e.exports=t.default},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};t.default=function toString(e){"object"===(void 0===e?"undefined":n(e))&&null!==e?e="function"==typeof e.toString?e.toString():"[object Object]":(null==e||isNaN(e)&&!e.length)&&(e="");return String(e)},e.exports=t.default},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function isFQDN(e,t){(0,n.default)(e),(t=(0,i.default)(t,o)).allow_trailing_dot&&"."===e[e.length-1]&&(e=e.substring(0,e.length-1));var r=e.split(".");if(t.require_tld){var s=r.pop();if(!r.length||!/^([a-z\u00a1-\uffff]{2,}|xn[a-z0-9-]{2,})$/i.test(s))return!1;if(/[\s\u2002-\u200B\u202F\u205F\u3000\uFEFF\uDB40\uDC20]/.test(s))return!1}for(var a,c=0;c<r.length;c++){if(a=r[c],t.allow_underscores&&(a=a.replace(/_/g,"")),!/^[a-z\u00a1-\uffff0-9-]+$/i.test(a))return!1;if(/[\uff01-\uff5e]/.test(a))return!1;if("-"===a[0]||"-"===a[a.length-1])return!1}return!0};var n=_interopRequireDefault(r(2)),i=_interopRequireDefault(r(92));function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}var o={require_tld:!0,allow_underscores:!1,allow_trailing_dot:!1};e.exports=t.default},function(e,t,r){var n=r(36),i=r(22),o=r(139),s=r(1)._extend;function RetryPolicyFilter(e,t){this.retryCount=e||RetryPolicyFilter.DEFAULT_CLIENT_RETRY_COUNT,this.retryInterval=t||RetryPolicyFilter.DEFAULT_CLIENT_RETRY_INTERVAL}RetryPolicyFilter.DEFAULT_CLIENT_RETRY_INTERVAL=3e4,RetryPolicyFilter.DEFAULT_CLIENT_RETRY_COUNT=3,RetryPolicyFilter.prototype.handle=function(e,t){RetryPolicyFilter._handle(this,e,t)},RetryPolicyFilter._handle=function(e,t,r){var a,c,u=s({},t);u.retryInterval=0,u.retryContext={retryCount:0,error:null,retryInterval:u.retryInterval,locationMode:u.locationMode,currentLocation:u.currentLocation};var l=function(){r&&r(u,function(t,r,s){t.error&&(u.retryContext.error&&(t.error.innerError=u.retryContext.error),u.retryContext.error=t.error);var p=u.currentLocation===i.StorageLocation.SECONDARY&&(t.response&&404===t.response.statusCode||t.error&&"ENOTFOUND"===t.error.code),d=!u.retryContext.retryCount||u.retryContext.retryCount<=e.retryCount,h=e.shouldRetry(p?500:n.objectIsNull(t.response)?306:t.response.statusCode,u);if(u.retryContext.retryCount++,h.ignore&&(t.error=null),n.objectIsNull(h.targetLocation)&&(h.targetLocation=n.getNextLocation(u.currentLocation,u.locationMode)),n.objectIsNull(h.retryInterval)&&(h.retryInterval=e.retryInterval),!t.outputStreamSent&&t.error&&n.objectIsNull(t.retryable)&&d&&(!n.objectIsNull(t.response)&&h.retryable||"ECONNREFUSED"===t.error.code||"ETIMEDOUT"===t.error.code||"ESOCKETTIMEDOUT"===t.error.code||"ECONNRESET"===t.error.code||"EAI_AGAIN"===t.error.code||"XHR error"===t.error.message)){u.currentLocation===i.StorageLocation.PRIMARY?a=t.operationEndTime:c=t.operationEndTime,p&&u.locationMode!==o.LocationMode.SECONDARY_ONLY&&(h.locationMode=o.LocationMode.PRIMARY_ONLY,h.targetLocation=i.StorageLocation.PRIMARY);var f=h.targetLocation===i.StorageLocation.PRIMARY?a:c;if(n.objectIsNull(f))u.retryInterval=0;else{var m=(new Date).getTime()-f.getTime();m<0&&(m=0),u.retryInterval=h.retryInterval-m}n.objectIsNull(h.locationMode)||(u.locationMode=h.locationMode),u.currentLocation=h.targetLocation,l()}else s?s(t):r&&r(t)})};l()},RetryPolicyFilter._shouldRetryOnError=function(e,t){var r=t&&t.retryContext?t.retryContext:{};if(e>=300&&408!=e){if(501==e||505==e)return r.retryable=!1,r;t&&t.absorbConditionalErrorsOnRetry?412==e?r.lastServerError?(r.ignore=!0,r.retryable=!0):r.retryable=!1:r.retryable&&e>=500&&e<600&&(r.retryable=!0,r.lastServerError=!0):e<500&&(r.retryable=!1)}return r},e.exports=RetryPolicyFilter},function(e,t,r){var n=r(20).Constants,i=n.TableConstants,o=n.HeaderConstants,s=r(353);(t=e.exports).serialize=function(e){return s.serializeJson(e)},t.parseQuery=function(e,t,r,n){var i={};return e.body&&(i=s.parseJsonEntities(e.body,t,r,n)),i},t.parseEntity=function(e,t,r,n){var a={};return e.body&&(a=s.parseJsonSingleEntity(e.body,t,r,n)),e.headers&&e.headers[o.ETAG.toLowerCase()]&&(a[i.ODATA_METADATA_MARKER]||(a[i.ODATA_METADATA_MARKER]={}),a[i.ODATA_METADATA_MARKER].etag=e.headers[o.ETAG.toLowerCase()]),a},t.getEtag=function(e){var t;return e&&e[i.ODATA_METADATA_MARKER]&&(t=e[i.ODATA_METADATA_MARKER].etag),t}},function(e,t,r){var n=r(20);n.FileReadStream=r(830),e.exports=n},function(e,t,r){var n=r(20).util,i=r(22),o=r(5).EventEmitter;function RangeStream(e,t,r,n){this.serviceClient=e,this._emitter=new o,this._paused=!1,this._emittedAll=!1,this._emittedRangeIndex=0,this._rangelist=[],this._resourcePath=[],this._isEmitting=!1,this._rangeStreamEnded=!1,this._lengthHeader=i.HeaderConstants.CONTENT_LENGTH,this._minRangeSize=i.BlobConstants.MIN_WRITE_PAGE_SIZE_IN_BYTES,this._maxRangeSize=i.BlobConstants.DEFAULT_WRITE_PAGE_SIZE_IN_BYTES,n.rangeStart?this._startOffset=n.rangeStart:this._startOffset=0,this._dataOffset=this._startOffset,n.rangeEnd?this._endOffset=n.rangeEnd:this._endOffset=Number.MAX_VALUE,t&&this._resourcePath.push(t),r&&this._resourcePath.push(r)}RangeStream.prototype.list=function(e,t){var r,n=this._startOffset,o=i.BlobConstants.MAX_SINGLE_GET_PAGE_RANGE_SIZE;void 0===this._listFunc?(this._listFunc=this._defaultListFunc,r=this._endOffset):r=Math.min(this._startOffset+o-1,this._endOffset),e.rangeStart=n,r!=Number.MAX_VALUE&&(e.rangeEnd=r);var s=this,a=Array.prototype.slice.call(this._resourcePath);a.push(e),a.push(function(i,a,c){if(i)t(i);else{if(s._rangeStreamEnded)return;var u=parseInt(c.headers[s._lengthHeader],10),l=Math.min(u-1,s._endOffset),p=Math.min(r,l);a.length?a[a.length-1].end!==p&&a.push({start:a[a.length-1].end+1,end:p,dataSize:0}):a.push({start:n,end:p,dataSize:0}),r>=l&&(s._rangeStreamEnded=!0),s.resizeAndSaveRanges(a),s._startOffset+=o,s._emitRange(),r<l&&!s._rangeStreamEnded&&process.nextTick(function(){a=null,s.list(e,t),s=null})}}),this._listFunc.apply(this.serviceClient,a)},RangeStream.prototype.resizeAndSaveRanges=function(e){for(var t=this._rangelist,r={type:"range",size:0,dataSize:0,start:this._startOffset,end:-1},n=null,i=0;i<e.length;i++)(n=e[i]).end-r.start+1<this._minRangeSize?this.mergeRanges(r,n):(-1!=r.end&&(this.splitAndSaveRanges(r,t),r=n),this._dataOffset!=n.start?(this.putZeroRange(this._dataOffset,n.start-1,t),r=n):-1==r.end&&(this.splitAndSaveRanges(n,t),r.start=n.end+1)),i==e.length-1&&r.end>r.start&&this.splitAndSaveRanges(r,t),this._dataOffset=n.end+1},RangeStream.prototype.putZeroRange=function(e,t,r){var n={type:"range",size:-1,dataSize:0,start:e,end:t};this.splitAndSaveRanges(n,r)},RangeStream.prototype.mergeRanges=function(e,t){return e.size=t.end-e.start+1,e.dataSize+=t.dataSize,e.end=t.end,e},RangeStream.prototype.splitAndSaveRanges=function(e,t){for(var r=e.end-e.start+1,n=e.start,i=0;r>0;){var o={type:"range",size:0,dataSize:0,start:-1,end:-1};i=Math.min(r,this._maxRangeSize),o.start=n,o.size=i,0===e.dataSize?o.dataSize=0:o.dataSize=i,n+=i,o.end=n-1,t.push(o),r-=i}},RangeStream.prototype._emitRange=function(){if(!(this._paused||this._emittedAll||this._isEmitting)){this._isEmitting=!0;try{for(;this._emittedRangeIndex<this._rangelist.length;this._emittedRangeIndex++){if(this._paused)return;var e=this._rangelist[this._emittedRangeIndex];this._emitter.emit("range",e),this._rangelist[this._emittedRangeIndex]=null}this._rangeStreamEnded&&(this._rangelist=null,this._emittedAll=!0,this._emitter.emit("end"))}finally{this._isEmitting=!1}}},RangeStream.prototype._defaultListFunc=function(e,t,r,i){var o;n.normalizeArgs(r,i,function(e,t){o=e,i=t}),this.getBlobProperties(e,t,o,function(e,t,r){if(e)i(e);else{var n=[{}];n[0].start=o.rangeStart?Math.max(o.rangeStart,0):0,n[0].end=o.rangeEnd?Math.min(o.rangeEnd,t.contentLength-1):t.contentLength-1,n[0].size=n[0].end-n[0].start+1,n[0].dataSize=n[0].size,i(e,n,r)}})},RangeStream.prototype.on=function(e,t){this._emitter.on(e,t)},RangeStream.prototype.pause=function(){this._paused=!0},RangeStream.prototype.resume=function(){this._paused=!1,this._isEmitting||this._emitRange()},RangeStream.prototype.stop=function(){this.pause(),this._emittedAll=!0,this._emitter.emit("end")},e.exports=RangeStream},function(e,t,r){"use strict";var n,i=this&&this.__extends||(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])},function(e,t){function __(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(__.prototype=t.prototype,new __)});Object.defineProperty(t,"__esModule",{value:!0});var o=r(5),s=r(4),a=function(e){function SharedAccessSignatureAuthenticationProvider(t){var r=e.call(this)||this;return r.type=s.AuthenticationType.Token,r._credentials=t,r}return i(SharedAccessSignatureAuthenticationProvider,e),SharedAccessSignatureAuthenticationProvider.prototype.getDeviceCredentials=function(e){var t=this;return s.callbackToPromise(function(e){e(null,t._credentials)},e)},SharedAccessSignatureAuthenticationProvider.prototype.stop=function(){},SharedAccessSignatureAuthenticationProvider.prototype.updateSharedAccessSignature=function(e){this._credentials.sharedAccessSignature=e,this.emit("newTokenAvailable",this._credentials)},SharedAccessSignatureAuthenticationProvider.fromSharedAccessSignature=function(e){if(!e)throw new ReferenceError("sharedAccessSignature cannot be '"+e+"'");var t=s.SharedAccessSignature.parse(e),r=decodeURIComponent(t.sr).split("/");return new SharedAccessSignatureAuthenticationProvider({host:r[0],deviceId:r[r.length-1],sharedAccessSignature:e})},SharedAccessSignatureAuthenticationProvider}(o.EventEmitter);t.SharedAccessSignatureAuthenticationProvider=a},function(e,t,r){"use strict";var n,i=this&&this.__extends||(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])},function(e,t){function __(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(__.prototype=t.prototype,new __)});Object.defineProperty(t,"__esModule",{value:!0});var o=r(5),s=r(856),a=r(78),c=r(860),u=r(4),l=r(210),p=r(883),d=r(884),h=r(162),f=u.errors.UnauthorizedError,m=u.errors.DeviceNotFoundError,g=u.errors.NotConnectedError,y=s("azure-iothub:Amqp"),v=r(163);function handleResult(e,t){return function(r,n){r?t(p.translateError(e,r)):t(null,n)}}var b=function(e){function Amqp(t,r){var n=e.call(this)||this;return n._renewalNumberOfMilliseconds=27e5,n._c2dEndpoint="/messages/devicebound",n._feedbackEndpoint="/messages/serviceBound/feedback",n._fileNotificationEndpoint="/messages/serviceBound/filenotifications",n._amqp=r||new l.Amqp(!0),n._config=t,n._renewalTimeout=null,n._amqp.setDisconnectHandler(function(e){n._fsm.handle("amqpError",e)}),n._c2dErrorListener=function(e){y("Error on the D2C link: "+e.toString()),n._c2dLink=null},n._feedbackErrorListener=function(e){y("Error on the message feedback link: "+e.toString()),n._feedbackReceiver=null},n._fileNotificationErrorListener=function(e){y("Error on the file notification link: "+e.toString()),n._fileNotificationReceiver=null},n._fsm=new a.Fsm({namespace:"azure-iothub:Amqp",initialState:"disconnected",states:{disconnected:{_onEnter:function(e,t){e?t?t(e):n.emit("disconnect",e):t&&t()},connect:function(e){n._fsm.transition("connecting",e)},disconnect:function(e){return e()},send:function(e,t,r){n._fsm.handle("connect",function(i){i?r(i):n._fsm.handle("send",e,t,r)})},getFeedbackReceiver:function(e){n._fsm.handle("connect",function(t){t?e(t):n._fsm.handle("getFeedbackReceiver",e)})},getFileNotificationReceiver:function(e){n._fsm.handle("connect",function(t){t?e(t):n._fsm.handle("getFileNotificationReceiver",e)})},updateSharedAccessSignature:function(e,t){t()},amqpError:function(e){y("error received while disconnected. likely a bug?"),e&&y(e.toString())}},connecting:{_onEnter:function(e){var t={uri:n._getConnectionUri(),userAgentString:v.name+"/"+v.version};n._amqp.connect(t,function(t,r){t?(y("failed to connect"+t.toString()),n._fsm.transition("disconnected",t,e)):(y("connected"),n._fsm.transition("authenticating",e))})},disconnect:function(e){n._fsm.transition("disconnecting",null,e)},amqpError:function(e){n._fsm.transition("disconnecting",e)},"*":function(){return n._fsm.deferUntilTransition()}},authenticating:{_onEnter:function(e){n._amqp.initializeCBS(function(t){if(t)y("error trying to initialize CBS: "+t.toString()),n._fsm.transition("disconnecting",t,e);else{y("CBS initialized");var r=u.SharedAccessSignature.parse(n._config.sharedAccessSignature.toString(),["sr","sig","se"]).sr,i="string"==typeof n._config.sharedAccessSignature,o=i?n._config.sharedAccessSignature:n._config.sharedAccessSignature.extend(u.anHourFromNow());n._amqp.putToken(r,o,function(t){t?n._fsm.transition("disconnecting",t,e):n._fsm.transition("authenticated",i,e)})}})},disconnect:function(e){n._fsm.transition("disconnecting",null,e)},amqpError:function(e){n._fsm.transition("disconnecting",e)},"*":function(){return n._fsm.deferUntilTransition()}},authenticated:{_onEnter:function(e,t){e||(n._renewalTimeout=setTimeout(n._handleSASRenewal.bind(n),n._renewalNumberOfMilliseconds)),t(null,new u.results.Connected)},_onExit:function(e){n._renewalTimeout&&clearTimeout(n._renewalTimeout)},connect:function(e){return e()},disconnect:function(e){return n._fsm.transition("disconnecting",null,e)},send:function(e,t,r){e.to=t,n._c2dLink?n._c2dLink.send(e,r):n._amqp.attachSenderLink(n._c2dEndpoint,null,function(t,i){t?r(t):(n._c2dLink=i,n._c2dLink.on("error",n._c2dErrorListener),n._c2dLink.send(e,r))})},getFeedbackReceiver:function(e){n._feedbackReceiver?e(null,n._feedbackReceiver):n._amqp.attachReceiverLink(n._feedbackEndpoint,null,function(t,r){t?e(t):(n._feedbackReceiver=new d.ServiceReceiver(r),n._feedbackReceiver.on("error",n._feedbackErrorListener),e(null,n._feedbackReceiver))})},getFileNotificationReceiver:function(e){n._fileNotificationReceiver?e(null,n._fileNotificationReceiver):n._amqp.attachReceiverLink(n._fileNotificationEndpoint,null,function(t,r){t?e(t):(n._fileNotificationReceiver=new d.ServiceReceiver(r),n._fileNotificationReceiver.on("error",n._fileNotificationErrorListener),e(null,n._fileNotificationReceiver))})},updateSharedAccessSignature:function(e,t){var r=u.SharedAccessSignature.parse(n._config.sharedAccessSignature.toString(),["sr","sig","se"]).sr;n._amqp.putToken(r,e,t)},amqpError:function(e){n._fsm.transition("disconnecting",e)}},disconnecting:{_onEnter:function(e,t){var r=e;c.series([function(t){if(n._c2dLink){var i=n._c2dLink;n._c2dLink=void 0,e?(y("force-detaching c2d links"),i.forceDetach(e),t()):i.detach(function(e){e?(y("error detaching the c2d link: "+e.toString()),r||(r=p.translateError("error while detaching the c2d link when disconnecting",e))):y("c2d link detached."),t()})}else t()},function(t){if(n._feedbackReceiver){var i=n._feedbackReceiver;n._feedbackReceiver=void 0,e?(i.forceDetach(e),i.removeListener("error",n._feedbackErrorListener),t()):i.detach(function(e){y(e?"error detaching the message feedback link: "+e.toString():"D2C link detached"),i.removeListener("error",n._feedbackErrorListener),!r&&e&&(r=p.translateError("error while detaching the message feedback link when disconnecting",e)),t()})}else t()},function(t){if(n._fileNotificationReceiver){var i=n._fileNotificationReceiver;n._fileNotificationReceiver=void 0,e?(i.forceDetach(e),i.removeListener("error",n._fileNotificationErrorListener),t()):i.detach(function(e){y(e?"error detaching the file upload notification link: "+e.toString():"D2C link detached"),i.removeListener("error",n._fileNotificationErrorListener),!r&&e&&(r=p.translateError("error while detaching the file upload notification link when disconnecting",e)),t()})}else t()},function(e){n._amqp.disconnect(function(t){y(t?"error disconnecting the AMQP connection: "+t.toString():"amqp connection successfully disconnected."),!r&&t&&(r=p.translateError("error while disconnecting the AMQP connection",t)),e()})}],function(){n._fsm.transition("disconnected",r,t)})},"*":function(){return n._fsm.deferUntilTransition()}}}}),n}return i(Amqp,e),Amqp.prototype.connect=function(e){var t=this;return u.callbackToPromise(function(e){t._fsm.handle("connect",function(t){t?e(p.translateError("AMQP Transport: Could not connect",t)):e(null,new u.results.Connected)})},e)},Amqp.prototype.disconnect=function(e){var t=this;return u.callbackToPromise(function(e){t._fsm.handle("disconnect",function(t){t?e(function getTranslatedError(e,t){return e instanceof f||e instanceof g||e instanceof m?e:p.translateError(t,e)}(t,"error while disconnecting")):e(null,new u.results.Disconnected)})},e)},Amqp.prototype.send=function(e,t,r){var n=this;return u.tripleValueCallbackToPromise(function(r){var i=u.endpoint.deviceMessagePath(encodeURIComponent(e)),o=l.AmqpMessage.fromMessage(t);n._fsm.handle("send",o,i,handleResult("AMQP Transport: Could not send message",r))},function(e,t){return h.createResultWithIncomingMessage(e,t)},r)},Amqp.prototype.getFeedbackReceiver=function(e){var t=this;return u.tripleValueCallbackToPromise(function(e){t._fsm.handle("getFeedbackReceiver",handleResult("AMQP Transport: Could not get feedback receiver",e))},function(e,t){return h.createResultWithIncomingMessage(e,t)},e)},Amqp.prototype.getFileNotificationReceiver=function(e){var t=this;return u.tripleValueCallbackToPromise(function(e){t._fsm.handle("getFileNotificationReceiver",handleResult("AMQP Transport: Could not get file notification receiver",e))},function(e,t){return h.createResultWithIncomingMessage(e,t)},e)},Amqp.prototype.updateSharedAccessSignature=function(e,t){var r=this;return u.callbackToPromise(function(t){if(!e)throw new ReferenceError("sharedAccessSignature cannot be '"+e+"'");r._config.sharedAccessSignature=e,r._fsm.handle("updateSharedAccessSignature",e,function(e){e?t(e):t(null,new u.results.SharedAccessSignatureUpdated(!1))})},t)},Amqp.prototype._getConnectionUri=function(){return"amqps://"+this._config.host},Amqp.prototype._handleSASRenewal=function(){var e=this,t=this._config.sharedAccessSignature.extend(u.anHourFromNow());this._fsm.handle("updateSharedAccessSignature",t,function(t){t?y("error automatically renewing the sas token: "+t.toString()):e._renewalTimeout=setTimeout(e._handleSASRenewal.bind(e),e._renewalNumberOfMilliseconds)})},Amqp}(o.EventEmitter);t.Amqp=b},function(e,t,r){"use strict";e.exports={Amqp:r(861).Amqp,AmqpMessage:r(211).AmqpMessage,AmqpReceiver:r(160).ReceiverLink,ReceiverLink:r(160).ReceiverLink,SenderLink:r(215).SenderLink,translateError:r(882).translateError}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(360),i=r(4);function encodeUuid(e){return"string"==typeof e&&e.match(/^[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}$/)?n.string_to_uuid(e):e}var o=function(){function AmqpMessage(){}return AmqpMessage.fromMessage=function(e){if(!e)throw new ReferenceError("message is '"+e+"'");var t=new AmqpMessage;function ensureApplicationPropertiesCreated(){t.application_properties||(t.application_properties={})}if(e.to&&(t.to=e.to),e.expiryTimeUtc&&(t.absolute_expiry_time=e.expiryTimeUtc),e.messageId&&(t.message_id=encodeUuid(e.messageId)),e.correlationId&&(t.correlation_id=encodeUuid(e.correlationId)),e.contentEncoding&&(t.content_encoding=e.contentEncoding),e.contentType&&(t.content_type=e.contentType),e.ack&&(ensureApplicationPropertiesCreated(),t.application_properties["iothub-ack"]=e.ack),e.properties){var r=e.properties,i=r.count();if(i>0){t.application_properties||ensureApplicationPropertiesCreated();for(var o=0;o<i;o++){var s=r.getItem(o);if(s){var a="IoThub-status"===s.key?n.types.wrap_int(parseInt(s.value)):s.value;t.application_properties[s.key]=a}}}}return void 0!==e.getData()&&(t.body=n.message.data_section(e.getBytes())),t},AmqpMessage.toMessage=function(e){if(!e)throw new ReferenceError("amqpMessage cannot be '"+e+"'");var t=e.body?new i.Message(e.body.content):new i.Message(void 0);if(e.to&&(t.to=e.to),e.absolute_expiry_time&&(t.expiryTimeUtc=e.absolute_expiry_time),e.message_id&&(e.message_id instanceof Buffer&&16===e.message_id.length?t.messageId=n.uuid_to_string(e.message_id):t.messageId=e.message_id),e.correlation_id&&(e.correlation_id instanceof Buffer&&16===e.correlation_id.length?t.correlationId=n.uuid_to_string(e.correlation_id):t.correlationId=e.correlation_id),e.content_type&&(t.contentType=e.content_type),e.content_encoding&&(t.contentEncoding=e.content_encoding),e.application_properties){var r=e.application_properties;for(var o in r)r.hasOwnProperty(o)&&("iothub-ack"===o?t.ack=r[o]:t.properties.add(o,r[o]))}return t.transportObj=e,t},AmqpMessage}();t.AmqpMessage=o},function(e,t,r){"use strict";var n=r(93),i={generate_uuid:function(){return i.uuid_to_string(i.uuid4())},uuid4:function(){for(var e=new Buffer(16),t=0;t<e.length;t++)e[t]=255*Math.random()|0;return e[7]&=15,e[7]|=64,e[8]&=63,e[8]|=128,e},uuid_to_string:function(e){if(16===e.length)return[e.slice(0,4),e.slice(4,6),e.slice(6,8),e.slice(8,10),e.slice(10,16)].map(function(e){return e.toString("hex")}).join("-");throw new n.TypeError("Not a UUID, expecting 16 byte buffer")}},o=/^([0-9a-f]{8})-([0-9a-f]{4})-([0-9a-f]{4})-([0-9a-f]{4})-([0-9a-f]{12})$/;i.string_to_uuid=function(e){var t=o.exec(e.toLowerCase());if(t)return Buffer.from(t.slice(1).join(""),"hex");throw new n.TypeError("Not a valid UUID string: "+e)},i.clone=function(e){for(var t=Object.create(e.prototype||{}),r=Object.getOwnPropertyNames(e),n=0;n<r.length;n++){var i=r[n];t[i]=e[i]}return t},i.and=function(e,t){return void 0===t?e:function(r){return e(r)&&t(r)}},i.is_sender=function(e){return e.is_sender()},i.is_receiver=function(e){return e.is_receiver()},i.sender_filter=function(e){return i.and(i.is_sender,e)},i.receiver_filter=function(e){return i.and(i.is_receiver,e)},i.is_defined=function(e){return null!=e},e.exports=i},function(e,t,r){"use strict";var n=function(){this.init()};n.prototype.init=function(){this.local_open=!1,this.remote_open=!1,this.open_requests=0,this.close_requests=0,this.initialised=!1,this.marker=void 0},n.prototype.mark=function(e){return this.marker=e||Date.now(),this.marker},n.prototype.open=function(){return this.marker=void 0,this.initialised=!0,!this.local_open&&(this.local_open=!0,this.open_requests++,!0)},n.prototype.close=function(){return this.marker=void 0,!!this.local_open&&(this.local_open=!1,this.close_requests++,!0)},n.prototype.disconnected=function(){var e=this.initialised;this.was_open=this.local_open,this.init(),this.initialised=e},n.prototype.reconnect=function(){this.was_open&&this.open()},n.prototype.remote_opened=function(){return!this.remote_open&&(this.remote_open=!0,!0)},n.prototype.remote_closed=function(){return!!this.remote_open&&(this.remote_open=!1,!0)},n.prototype.is_open=function(){return this.local_open&&this.remote_open},n.prototype.is_closed=function(){return this.initialised&&!this.local_open&&!this.remote_open},n.prototype.has_settled=function(){return 0===this.open_requests&&0===this.close_requests},n.prototype.need_open=function(){return this.open_requests>0&&(this.open_requests--,!0)},n.prototype.need_close=function(){return this.close_requests>0&&(this.close_requests--,!0)},e.exports=n},function(e,t,r){"use strict";var n=r(95),i=r(94),o={},s={},a=[],c={};function define_section(e,t,r){t.descriptor=e,s[e.symbolic]=t,s[Number(e.numeric).toString(10)]=t,r&&a.push(r)}function define_composite_section(e){var t=i.define_composite(e);c[e.name]=t.create,o[Number(t.descriptor.numeric).toString(10)]=t,o[t.descriptor.symbolic]=t;define_section(t.descriptor,function(r,n){for(var i=new t(n.value),o=0;o<e.fields.length;o++){var s=e.fields[o],a=i[s.name];null!=a&&(r[s.name]=a)}},function(e,r){e.push(t.create(r).described())})}function define_map_section(e,t){var r=t?i.wrap_symbolic_map:i.wrap_map,n={numeric:e.code};n.symbolic="amqp:"+e.name.replace(/_/g,"-")+":map";define_section(n,function(t,r){t[e.name]=i.unwrap_map_simple(r)},function(t,o){o[e.name]&&t.push(i.described_nc(i.wrap_ulong(n.numeric),r(o[e.name])))})}function Section(e,t,r){this.typecode=e,this.content=t,this.multiple=r}function unwrap_body_section(e,t,r){void 0===e.body?e.body=new Section(r,i.unwrap(t)):e.body.constructor===Section&&e.body.typecode===r&&(e.body.multiple?e.body.content.push(i.unwrap(t)):(e.body.multiple=!0,e.body.content=[e.body.content,i.unwrap(t)]))}function Message(e){e&&function copy(e,t){for(var r in e){var n=e[r];"object"==typeof n?copy(n,t[r]):t[r]=n}}(e,this)}Section.prototype.described=function(e){return i.described(i.wrap_ulong(this.typecode),i.wrap(e||this.content))},Section.prototype.collect_sections=function(e){if(this.multiple)for(var t=0;t<this.content.length;t++)e.push(this.described(this.content[t]));else e.push(this.described())},define_composite_section({name:"header",code:112,fields:[{name:"durable",type:"boolean",default_value:!1},{name:"priority",type:"ubyte",default_value:4},{name:"ttl",type:"uint"},{name:"first_acquirer",type:"boolean",default_value:!1},{name:"delivery_count",type:"uint",default_value:0}]}),define_map_section({name:"delivery_annotations",code:113},!0),define_map_section({name:"message_annotations",code:114},!0),define_composite_section({name:"properties",code:115,fields:[{name:"message_id",type:"message_id"},{name:"user_id",type:"binary"},{name:"to",type:"string"},{name:"subject",type:"string"},{name:"reply_to",type:"string"},{name:"correlation_id",type:"message_id"},{name:"content_type",type:"symbol"},{name:"content_encoding",type:"symbol"},{name:"absolute_expiry_time",type:"timestamp"},{name:"creation_time",type:"timestamp"},{name:"group_id",type:"string"},{name:"group_sequence",type:"uint"},{name:"reply_to_group_id",type:"string"}]}),define_map_section({name:"application_properties",code:116}),define_section({numeric:117,symbolic:"amqp:data:binary"},function(e,t){unwrap_body_section(e,t,117)}),define_section({numeric:118,symbolic:"amqp:amqp-sequence:list"},function(e,t){unwrap_body_section(e,t,118)}),define_section({numeric:119,symbolic:"amqp:value:*"},function(e,t){e.body=i.unwrap(t)}),define_map_section({name:"footer",code:120}),a.push(function wrap_body(e,t){t.body&&t.body.collect_sections?t.body.collect_sections(e):e.push(i.described(i.wrap_ulong(119),i.wrap(t.body)))}),c.data_section=function(e){return new Section(117,e)},c.sequence_section=function(e){return new Section(118,e)},c.data_sections=function(e){return new Section(117,e,!0)},c.sequence_sections=function(e){return new Section(118,e,!0)},Message.prototype.toJSON=function(){var e={};for(var t in this)"function"!=typeof this[t]&&(e[t]=this[t]);return e},Message.prototype.inspect=function(){return JSON.stringify(this.toJSON())},Message.prototype.toString=function(){return JSON.stringify(this.toJSON())},c.encode=function(e){var t=[];a.forEach(function(r){r(t,e)});for(var r=new i.Writer,o=0;o<t.length;o++)n.message("Encoding section %d of %d: %o",o+1,t.length,t[o]),r.write(t[o]);var s=r.toBuffer();return n.message("encoded %d bytes",s.length),s},c.decode=function(e){for(var t=new Message,r=new i.Reader(e);r.remaining();){var o=r.read();if(n.message("decoding section: %o of type: %o",o,o.descriptor),o.descriptor){var a=s[o.descriptor.value];a?a(t,o):console.warn("WARNING: did not recognise message section with descriptor "+o.descriptor)}else console.warn("WARNING: expected described message section got "+JSON.stringify(o))}return t};var u={};function define_outcome(e){var t=i.define_composite(e);t.composite_type=e.name,c[e.name]=t.create,u[Number(t.descriptor.numeric).toString(10)]=t,u[t.descriptor.symbolic]=t,c["is_"+e.name]=function(t){if(t&&t.descriptor){var r=u[t.descriptor.value];if(r)return r.descriptor.numeric===e.code}return!1}}c.unwrap_outcome=function(e){if(e&&e.descriptor){var t=u[e.descriptor.value];if(t)return new t(e.value)}return console.error("unrecognised outcome: "+JSON.stringify(e)),e},c.are_outcomes_equivalent=function(e,t){return void 0===e&&void 0===t||void 0!==e&&void 0!==t&&(e.descriptor.value===t.descriptor.value&&36===e.descriptor.value)},define_outcome({name:"received",code:35,fields:[{name:"section_number",type:"uint",mandatory:!0},{name:"section_offset",type:"ulong",mandatory:!0}]}),define_outcome({name:"accepted",code:36,fields:[]}),define_outcome({name:"rejected",code:37,fields:[{name:"error",type:"error"}]}),define_outcome({name:"released",code:38,fields:[]}),define_outcome({name:"modified",code:39,fields:[{name:"delivery_failed",type:"boolean"},{name:"undeliverable_here",type:"boolean"},{name:"message_annotations",type:"map"}]}),e.exports=c},function(e,t,r){"use strict";var n,i=this&&this.__extends||(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])},function(e,t){function __(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(__.prototype=t.prototype,new __)});Object.defineProperty(t,"__esModule",{value:!0});var o=r(78),s=r(159),a=r(35),c=r(5),u=r(4),l=s("azure-iot-amqp-base:SenderLink"),p=function(e){function SenderLink(t,r,n){var i=e.call(this)||this;if(i._senderCloseOccurred=!1,i._linkAddress=t,i._rheaSession=n,i._unsentMessageQueue=[],i._pendingMessageDictionary={},i._combinedOptions={target:t},r)for(var s in r)i._combinedOptions[s]=r[s];var c=function(e){i._fsm.handle("senderOpenEvent",e)},p=function(e){i._fsm.handle("senderCloseEvent",e)},d=function(e){l("handling error event: "+i._getErrorName(e.sender.error)),i._fsm.handle("senderErrorEvent",e)},h=function(e){i._fsm.handle("senderAcceptedEvent",e)},f=function(e){i._fsm.handle("senderRejectedEvent",e)},m=function(e){i._fsm.handle("send")},g=function(e){i._fsm.handle("senderReleasedEvent",e)},y=function(e){i._rheaSender[e]("sender_error",d),i._rheaSender[e]("sender_open",c),i._rheaSender[e]("sender_close",p),i._rheaSender[e]("accepted",h),i._rheaSender[e]("rejected",f),i._rheaSender[e]("released",g),i._rheaSender[e]("sendable",m)};return i._fsm=new o.Fsm({initialState:"detached",namespace:"senderLink",states:{detached:{_onEnter:function(e,t){var r=t||new Error("Link Detached");if(i._rheaSender=null,i._rheaSenderName=null,l("link detached: "+i._linkAddress),l("unsent message queue length: "+i._unsentMessageQueue.length),i._unsentMessageQueue.length>0){l("dequeuing and failing unsent messages");for(var n=i._unsentMessageQueue.shift();n;)n.callback&&n.callback(r),n=i._unsentMessageQueue.shift()}Object.keys(i._pendingMessageDictionary).forEach(function(e){var t=i._pendingMessageDictionary[e];delete i._pendingMessageDictionary[e],t.callback&&t.callback(r)}),e?e(t):t&&i.emit("error",t)},attach:function(e){return i._fsm.transition("attaching",e)},detach:function(e,t){l("detach: link already detached"),e(t)},forceDetach:function(){l("forceDetach: link already detached")},send:function(){i._unsentMessageQueue.length>0&&i._fsm.handle("attach")}},attaching:{_onEnter:function(e){i._attachingCallback=e,i._indicatedError=void 0,i._senderCloseOccurred=!1,i._rheaSenderName="rheaSender_"+a.v4(),i._combinedOptions.name=i._rheaSenderName,l("attaching sender name: "+i._rheaSenderName+" with address: "+i._linkAddress),i._rheaSender=i._rheaSession.open_sender(i._combinedOptions),y("on")},senderOpenEvent:function(e){var t=i._attachingCallback;i._attachingCallback=null,i._fsm.transition("attached",t)},senderErrorEvent:function(e){l("in sender attaching state - error event for "+e.sender.name+" error is: "+i._getErrorName(e.sender.error)),i._indicatedError=e.sender.error},senderCloseEvent:function(e){l("in sender attaching state - close event for "+e.sender.name),y("removeListener");var t=i._indicatedError,r=i._attachingCallback;i._indicatedError=void 0,i._attachingCallback=void 0,i._senderCloseOccurred=!0,i._fsm.transition("detached",r,t)},attach:null,detach:function(e,t){l("Detaching while attaching of rhea sender link "+i._linkAddress),y("removeListener");var r=t||i._indicatedError||new Error("Unexpected link detach while attaching"),n=i._attachingCallback;i._indicatedError=void 0,i._attachingCallback=void 0,n(r),i._fsm.transition("detached",e,r)},forceDetach:function(e){l("Force detaching while attaching of rhea sender link "+i._linkAddress),y("removeListener");var t=e||i._indicatedError,r=i._attachingCallback;i._indicatedError=void 0,i._attachingCallback=void 0,r(t),i._fsm.transition("detached",void 0,t)}},attached:{_onEnter:function(e){l("link attached. processing unsent message queue"),e&&e(),i._unsentMessageQueue.length>0&&i._fsm.handle("send")},senderErrorEvent:function(e){l("in sender attached state - error event for "+e.sender.name+" error is: "+i._getErrorName(e.sender.error)),i._indicatedError=e.sender.error},senderCloseEvent:function(e){var t=i._indicatedError;i._indicatedError=void 0,i._senderCloseOccurred=!0,l("in sender attached state - close event for "+e.sender.name+" already indicated error is: "+i._getErrorName(t)),t?e.container.emit("azure-iot-amqp-base:error-indicated",t):i._fsm.transition("detaching")},senderAcceptedEvent:function(e){l("in sender attached state - accepted event for "+e.sender.name);var t=i._pendingMessageDictionary[e.delivery.id];t&&(delete i._pendingMessageDictionary[e.delivery.id],t.callback&&t.callback(null,new u.results.MessageEnqueued))},senderRejectedEvent:function(e){l("in sender attached state - rejected event for "+e.sender.name+" with a condition of "+i._getErrorName(e.delivery.remote_state.error));var t=i._pendingMessageDictionary[e.delivery.id];t&&(delete i._pendingMessageDictionary[e.delivery.id],t.callback&&t.callback(e.delivery.remote_state.error))},senderReleasedEvent:function(e){l("in sender attached state - released event for "+e.sender.name+" with a condition of "+i._getErrorName(e.delivery.remote_state.error));var t=i._pendingMessageDictionary[e.delivery.id];t&&(delete i._pendingMessageDictionary[e.delivery.id],t.callback&&t.callback(e.delivery.remote_state.error))},attach:function(e){return e()},detach:function(e,t){l("while attached - detach for receiver link "+i._linkAddress+" callback: "+e+" error: "+i._getErrorName(t)),i._fsm.transition("detaching",e,t)},forceDetach:function(e){l("Force detaching while attached of rhea sender link "+i._linkAddress),y("removeListener"),i._rheaSender.remove(),i._fsm.transition("detached",void 0,e)},send:function(){for(;i._unsentMessageQueue.length>0&&i._rheaSender.sendable();){l("unsent message queue length is: "+i._unsentMessageQueue.length);var e=i._unsentMessageQueue.shift(),t=i._rheaSender.send(e.message);t.settled?(l("message sent as settled"),e.callback&&e.callback(null,new u.results.MessageEnqueued)):(l("message placed in dictionary for lookup later."),i._pendingMessageDictionary[t.id]=e)}}},detaching:{_onEnter:function(e,t){l("Detaching of rhea sender link "+i._linkAddress),i._detachingCallback=e,i._indicatedError=t,i._rheaSender.close(),i._senderCloseOccurred&&(i._detachingCallback=void 0,i._indicatedError=void 0,i._fsm.transition("detached",e,t))},senderErrorEvent:function(e){l("in sender detaching state - error event for "+e.sender.name+" error is: "+i._getErrorName(e.sender.error)),i._indicatedError=i._indicatedError||e.sender.error},senderCloseEvent:function(e){l("in sender detaching state - close event for "+e.sender.name+" already indicated error is: "+i._getErrorName(i._indicatedError));var t=i._indicatedError,r=i._detachingCallback;i._detachingCallback=void 0,i._indicatedError=void 0,i._senderCloseOccurred=!0,y("removeListener"),i._fsm.transition("detached",r,t)},senderAcceptedEvent:function(e){l("in sender detaching state - accepted event for "+e.sender.name);var t=i._pendingMessageDictionary[e.delivery.id];t&&(delete i._pendingMessageDictionary[e.delivery.id],t.callback&&t.callback(null,new u.results.MessageEnqueued))},detach:function(e,t){l("while detaching - detach for sender link "+i._linkAddress),e(t||new Error("Detached invoked while detaching."))},forceDetach:function(e){l("while detaching - Force detaching for sender link "+i._linkAddress),i._rheaSender.remove();var t=i._detachingCallback,r=e||i._indicatedError||new Error("Detach preempted by force");i._detachingCallback=void 0,i._indicatedError=void 0,y("removeListener"),t&&t(r),i._fsm.transition("detached",void 0,e)},"*":function(){i._fsm.deferUntilTransition("detached")}}}}),i._fsm.on("transition",function(e){l(e.fromState+" -> "+e.toState+" (action:"+e.action+")")}),i}return i(SenderLink,e),SenderLink.prototype.detach=function(e,t){this._fsm.handle("detach",e,t)},SenderLink.prototype.forceDetach=function(e){this._fsm.handle("forceDetach",e)},SenderLink.prototype.attach=function(e){this._fsm.handle("attach",e)},SenderLink.prototype.send=function(e,t){l("placing a message in the unsent message queue."),this._unsentMessageQueue.push({message:e,callback:t}),this._fsm.handle("send")},SenderLink.prototype._getErrorName=function(e){return e?e.condition?"(amqp error) "+e.condition:e.name?"(javascript error) "+e.name:"unknown error type":"error is falsy"},SenderLink}(c.EventEmitter);t.SenderLink=p},function(e,t,r){"use strict";function concat(e,t){const r=Buffer.allocUnsafe(t);for(var n=0,i=0;i<e.length;i++){const t=e[i];t.copy(r,n),n+=t.length}return r}function _mask(e,t,r,n,i){for(var o=0;o<i;o++)r[n+o]=e[o]^t[3&o]}function _unmask(e,t){const r=e.length;for(var n=0;n<r;n++)e[n]^=t[3&n]}try{const t=r(367),n=t.BufferUtil||t;e.exports={mask(e,t,r,i,o){o<48?_mask(e,t,r,i,o):n.mask(e,t,r,i,o)},unmask(e,t){e.length<32?_unmask(e,t):n.unmask(e,t)},concat:concat}}catch(t){e.exports={concat:concat,mask:_mask,unmask:_unmask}}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(4),i=r(113),o=r(162),s=function(){function Twin(e,t){if(null==e||""===e)throw new ReferenceError("'device' cannot be '"+e+"'");if(!t)throw new ReferenceError("'registryClient' cannot be '"+t+"'");if("string"==typeof e)this.deviceId=e;else{if(!e.deviceId)throw new n.errors.ArgumentError("'device' must have a deviceId property");i.merge(this,e)}this.etag=this.etag||"*",this.tags=this.tags||{},this.properties=i.assign({desired:{}},this.properties),this._registry=t}return Twin.prototype.get=function(e){var t=this;return n.tripleValueCallbackToPromise(function(e){(t.moduleId?function(e){return t._registry.getModuleTwin(t.deviceId,t.moduleId,e)}:function(e){return t._registry.getTwin(t.deviceId,e)})(function(r,n,i){r?e(r):(t.properties=n.properties,t.tags=n.tags,t.etag=n.etag,e(null,t,i))})},function(e,t){return o.createResultWithIncomingMessage(e,t)},e)},Twin.prototype.update=function(e,t){var r=this;return n.tripleValueCallbackToPromise(function(t){(r.moduleId?function(t){return r._registry.updateModuleTwin(r.deviceId,r.moduleId,e,r.etag,t)}:function(t){return r._registry.updateTwin(r.deviceId,e,r.etag,t)})(function(e,n,i){e?t(e):(r.properties=n.properties,r.tags=n.tags,r.etag=n.etag,t(null,r,i))})},function(e,t){return o.createResultWithIncomingMessage(e,t)},t)},Twin.prototype.toJSON=function(){var e={};return i.merge(e,this),e._registry=void 0,e},Twin}();t.Twin=s},function(e,t,r){"use strict";var n=r(96),i={generate_uuid:function(){return i.uuid_to_string(i.uuid4())},uuid4:function(){for(var e=Buffer.alloc(16),t=0;t<e.length;t++)e[t]=255*Math.random()|0;return e[7]&=15,e[7]|=64,e[8]&=63,e[8]|=128,e},uuid_to_string:function(e){if(16===e.length)return[e.slice(0,4),e.slice(4,6),e.slice(6,8),e.slice(8,10),e.slice(10,16)].map(function(e){return e.toString("hex")}).join("-");throw new n.TypeError("Not a UUID, expecting 16 byte buffer")}},o=/^([0-9a-f]{8})-([0-9a-f]{4})-([0-9a-f]{4})-([0-9a-f]{4})-([0-9a-f]{12})$/;i.string_to_uuid=function(e){var t=o.exec(e.toLowerCase());if(t)return Buffer.from(t.slice(1).join(""),"hex");throw new n.TypeError("Not a valid UUID string: "+e)},i.clone=function(e){for(var t=Object.create(e.prototype||{}),r=Object.getOwnPropertyNames(e),n=0;n<r.length;n++){var i=r[n];t[i]=e[i]}return t},i.and=function(e,t){return void 0===t?e:function(r){return e(r)&&t(r)}},i.is_sender=function(e){return e.is_sender()},i.is_receiver=function(e){return e.is_receiver()},i.sender_filter=function(e){return i.and(i.is_sender,e)},i.receiver_filter=function(e){return i.and(i.is_receiver,e)},i.is_defined=function(e){return null!=e},e.exports=i},function(e,t,r){"use strict";var n=function(){this.init()};n.prototype.init=function(){this.local_open=!1,this.remote_open=!1,this.open_requests=0,this.close_requests=0,this.initialised=!1,this.marker=void 0},n.prototype.mark=function(e){return this.marker=e||Date.now(),this.marker},n.prototype.open=function(){return this.marker=void 0,this.initialised=!0,!this.local_open&&(this.local_open=!0,this.open_requests++,!0)},n.prototype.close=function(){return this.marker=void 0,!!this.local_open&&(this.local_open=!1,this.close_requests++,!0)},n.prototype.disconnected=function(){var e=this.initialised;this.was_open=this.local_open,this.init(),this.initialised=e},n.prototype.reconnect=function(){this.was_open&&(this.open(),this.was_open=void 0)},n.prototype.remote_opened=function(){return!this.remote_open&&(this.remote_open=!0,!0)},n.prototype.remote_closed=function(){return!!this.remote_open&&(this.remote_open=!1,!0)},n.prototype.is_open=function(){return this.local_open&&this.remote_open},n.prototype.is_closed=function(){return this.initialised&&!(this.local_open||this.was_open)&&!this.remote_open},n.prototype.has_settled=function(){return 0===this.open_requests&&0===this.close_requests},n.prototype.need_open=function(){return this.open_requests>0&&(this.open_requests--,!0)},n.prototype.need_close=function(){return this.close_requests>0&&(this.close_requests--,!0)},e.exports=n},function(e,t,r){"use strict";var n=r(98),i=r(97),o={},s={},a=[],c={};function define_section(e,t,r){t.descriptor=e,s[e.symbolic]=t,s[Number(e.numeric).toString(10)]=t,r&&a.push(r)}function define_composite_section(e){var t=i.define_composite(e);c[e.name]=t.create,o[Number(t.descriptor.numeric).toString(10)]=t,o[t.descriptor.symbolic]=t;define_section(t.descriptor,function(r,n){for(var i=new t(n.value),o=0;o<e.fields.length;o++){var s=e.fields[o],a=i[s.name];null!=a&&(r[s.name]=a)}},function(e,r){e.push(t.create(r).described())})}function define_map_section(e,t){var r=t?i.wrap_symbolic_map:i.wrap_map,n={numeric:e.code};n.symbolic="amqp:"+e.name.replace(/_/g,"-")+":map";define_section(n,function(t,r){t[e.name]=i.unwrap_map_simple(r)},function(t,o){o[e.name]&&t.push(i.described_nc(i.wrap_ulong(n.numeric),r(o[e.name])))})}function Section(e,t,r){this.typecode=e,this.content=t,this.multiple=r}function unwrap_body_section(e,t,r){void 0===e.body?e.body=new Section(r,i.unwrap(t)):e.body.constructor===Section&&e.body.typecode===r&&(e.body.multiple?e.body.content.push(i.unwrap(t)):(e.body.multiple=!0,e.body.content=[e.body.content,i.unwrap(t)]))}function Message(e){e&&function copy(e,t){for(var r in e){var n=e[r];"object"==typeof n?copy(n,t[r]):t[r]=n}}(e,this)}Section.prototype.described=function(e){return i.described(i.wrap_ulong(this.typecode),i.wrap(e||this.content))},Section.prototype.collect_sections=function(e){if(this.multiple)for(var t=0;t<this.content.length;t++)e.push(this.described(this.content[t]));else e.push(this.described())},define_composite_section({name:"header",code:112,fields:[{name:"durable",type:"boolean",default_value:!1},{name:"priority",type:"ubyte",default_value:4},{name:"ttl",type:"uint"},{name:"first_acquirer",type:"boolean",default_value:!1},{name:"delivery_count",type:"uint",default_value:0}]}),define_map_section({name:"delivery_annotations",code:113},!0),define_map_section({name:"message_annotations",code:114},!0),define_composite_section({name:"properties",code:115,fields:[{name:"message_id",type:"message_id"},{name:"user_id",type:"binary"},{name:"to",type:"string"},{name:"subject",type:"string"},{name:"reply_to",type:"string"},{name:"correlation_id",type:"message_id"},{name:"content_type",type:"symbol"},{name:"content_encoding",type:"symbol"},{name:"absolute_expiry_time",type:"timestamp"},{name:"creation_time",type:"timestamp"},{name:"group_id",type:"string"},{name:"group_sequence",type:"uint"},{name:"reply_to_group_id",type:"string"}]}),define_map_section({name:"application_properties",code:116}),define_section({numeric:117,symbolic:"amqp:data:binary"},function(e,t){unwrap_body_section(e,t,117)}),define_section({numeric:118,symbolic:"amqp:amqp-sequence:list"},function(e,t){unwrap_body_section(e,t,118)}),define_section({numeric:119,symbolic:"amqp:value:*"},function(e,t){e.body=i.unwrap(t)}),define_map_section({name:"footer",code:120}),a.push(function wrap_body(e,t){t.body&&t.body.collect_sections?t.body.collect_sections(e):e.push(i.described(i.wrap_ulong(119),i.wrap(t.body)))}),c.data_section=function(e){return new Section(117,e)},c.sequence_section=function(e){return new Section(118,e)},c.data_sections=function(e){return new Section(117,e,!0)},c.sequence_sections=function(e){return new Section(118,e,!0)},Message.prototype.toJSON=function(){var e={};for(var t in this)"function"!=typeof this[t]&&(e[t]=this[t]);return e},Message.prototype.toString=function(){return JSON.stringify(this.toJSON())},c.encode=function(e){var t=[];a.forEach(function(r){r(t,e)});for(var r=new i.Writer,o=0;o<t.length;o++)n.message("Encoding section %d of %d: %o",o+1,t.length,t[o]),r.write(t[o]);var s=r.toBuffer();return n.message("encoded %d bytes",s.length),s},c.decode=function(e){for(var t=new Message,r=new i.Reader(e);r.remaining();){var o=r.read();if(n.message("decoding section: %o of type: %o",o,o.descriptor),o.descriptor){var a=s[o.descriptor.value];a?a(t,o):console.warn("WARNING: did not recognise message section with descriptor "+o.descriptor)}else console.warn("WARNING: expected described message section got "+JSON.stringify(o))}return t};var u={};function define_outcome(e){var t=i.define_composite(e);t.composite_type=e.name,c[e.name]=t.create,u[Number(t.descriptor.numeric).toString(10)]=t,u[t.descriptor.symbolic]=t,c["is_"+e.name]=function(t){if(t&&t.descriptor){var r=u[t.descriptor.value];if(r)return r.descriptor.numeric===e.code}return!1}}c.unwrap_outcome=function(e){if(e&&e.descriptor){var t=u[e.descriptor.value];if(t)return new t(e.value)}return console.error("unrecognised outcome: "+JSON.stringify(e)),e},c.are_outcomes_equivalent=function(e,t){return void 0===e&&void 0===t||void 0!==e&&void 0!==t&&(e.descriptor.value===t.descriptor.value&&36===e.descriptor.value)},define_outcome({name:"received",code:35,fields:[{name:"section_number",type:"uint",mandatory:!0},{name:"section_offset",type:"ulong",mandatory:!0}]}),define_outcome({name:"accepted",code:36,fields:[]}),define_outcome({name:"rejected",code:37,fields:[{name:"error",type:"error"}]}),define_outcome({name:"released",code:38,fields:[]}),define_outcome({name:"modified",code:39,fields:[{name:"delivery_failed",type:"boolean"},{name:"undeliverable_here",type:"boolean"},{name:"message_annotations",type:"map"}]}),e.exports=c},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n=r(0),i=r(128),o=r(222),s=r(388),a=r(906),c=r(164),u=r(126),l=r(224),p=r(225);t.Connection=class Connection extends l.Entity{constructor(e){if(super(),e||(e={}),null==e.operationTimeoutInSeconds&&(e.operationTimeoutInSeconds=a.defaultOperationTimeoutInSeconds),function isCreatedRheaConnectionOptions(e){return e&&"object"==typeof e.container&&"object"==typeof e.rheaConnection}(e))this._connection=e.rheaConnection,this.container=e.container;else{const t=e;if(t.webSocketOptions){const e=u.websocket_connect(t.webSocketOptions.webSocket);t.connection_details=e(t.webSocketOptions.url,t.webSocketOptions.protocol,t.webSocketOptions.options)}this._connection=u.create_connection(t),this.container=s.Container.copyFromContainerInstance(this._connection.container)}this.options=this._connection.options,this.options.operationTimeoutInSeconds=e.operationTimeoutInSeconds,this._initializeEventListeners()}get id(){return this._connection.options.id}get properties(){return this._connection.properties}get maxFrameSize(){return this._connection.max_frame_size}get idleTimeout(){return this._connection.idle_time_out}get channelMax(){return this._connection.channel_max}get error(){return this._connection.error}removeSession(e){return e.remove()}open(){return new Promise((e,t)=>{if(this.isOpen())return e(this);{let r,n,o;const s=()=>{clearTimeout(o),this.actionInitiated--,this._connection.removeListener(u.ConnectionEvents.connectionOpen,r),this._connection.removeListener(u.ConnectionEvents.connectionClose,n),this._connection.removeListener(u.ConnectionEvents.disconnected,n)};r=(t=>(s(),i.connection("[%s] Resolving the promise with amqp connection.",this.id),e(this))),n=(e=>{s();const r=e.error||e.connection.error;return i.error("[%s] Error occurred while establishing amqp connection: %O",this.id,r),t(r)});const a=()=>{s();const e=`Unable to open the amqp connection "${this.id}" due to operation timeout.`;return i.error("[%s] %s",this.id,e),t(new Error(e))};this._connection.once(u.ConnectionEvents.connectionOpen,r),this._connection.once(u.ConnectionEvents.connectionClose,n),this._connection.once(u.ConnectionEvents.disconnected,n),o=setTimeout(a,1e3*this.options.operationTimeoutInSeconds),i.connection("[%s] Trying to create a new amqp connection.",this.id),this._connection.connect(),this.actionInitiated++}})}close(){return new Promise((e,t)=>{if(i.error("[%s] The connection is open ? -> %s",this.id,this.isOpen()),!this.isOpen())return e();{let r,n,o;const s=()=>{clearTimeout(o),this.actionInitiated--,this._connection.removeListener(u.ConnectionEvents.connectionError,n),this._connection.removeListener(u.ConnectionEvents.connectionClose,r)};r=(t=>(s(),i.connection("[%s] Resolving the promise as the connection has been successfully closed.",this.id),e())),n=(e=>(s(),i.error("[%s] Error occurred while closing amqp connection: %O.",this.id,e.connection.error),t(e.connection.error)));const a=()=>{s();const e=`Unable to close the amqp connection "${this.id}" due to operation timeout.`;return i.error("[%s] %s",this.id,e),t(new Error(e))};this._connection.once(u.ConnectionEvents.connectionClose,r),this._connection.once(u.ConnectionEvents.connectionError,n),o=setTimeout(a,1e3*this.options.operationTimeoutInSeconds),this._connection.close(),this.actionInitiated++}})}isOpen(){let e=!1;return this._connection&&this._connection.is_open&&this._connection.is_open()&&(e=!0),e}removeAllSessions(){this._connection&&this._connection.remove_all_sessions()}isRemoteOpen(){return this._connection.is_remote_open()}getError(){return this._connection.get_error()}getPeerCertificate(){return this._connection.get_peer_certificate()}getTlsSocket(){return this._connection.get_tls_socket()}wasCloseInitiated(){return this._connection.is_closed()}createSession(){return new Promise((e,t)=>{const r=this._connection.create_session(),n=new o.Session(this,r);let s,a,c;n.actionInitiated++;const l=()=>{clearTimeout(c),n.actionInitiated--,r.removeListener(u.SessionEvents.sessionOpen,s),r.removeListener(u.SessionEvents.sessionClose,a)};s=(t=>(l(),i.session("[%s] Resolving the promise with amqp session.",this.id),e(n))),a=(e=>(l(),i.error("[%s] Error occurred while establishing a session over amqp connection: %O.",this.id,e.session.error),t(e.session.error))),r.once(u.SessionEvents.sessionOpen,s),r.once(u.SessionEvents.sessionClose,a),i.session("[%s] Calling amqp session.begin().",this.id),c=setTimeout(()=>{l();const e="Unable to create the amqp session due to operation timeout.";return i.error("[%s] %s",this.id,e),t(new p.OperationTimeoutError(e))},1e3*this.options.operationTimeoutInSeconds),r.begin()})}createSender(e){return n.__awaiter(this,void 0,void 0,function*(){return e&&e.session&&e.session.createSender?e.session.createSender(e):(yield this.createSession()).createSender(e)})}createReceiver(e){return n.__awaiter(this,void 0,void 0,function*(){return e&&e.session&&e.session.createReceiver?e.session.createReceiver(e):(yield this.createSession()).createReceiver(e)})}createRequestResponseLink(e,t,r){return n.__awaiter(this,void 0,void 0,function*(){if(!e)throw new Error("Please provide sender options.");if(!t)throw new Error("Please provide receiver options.");const n=r||(yield this.createSession()),[o,s]=yield Promise.all([n.createSender(e),n.createReceiver(t)]);return i.connection("[%s] Successfully created the sender and receiver links on the same session.",this.id),{session:n,sender:o,receiver:s}})}_initializeEventListeners(){for(const e in u.ConnectionEvents)this._connection.on(u.ConnectionEvents[e],t=>{const r={rheaContext:t,emitter:this,eventName:u.ConnectionEvents[e],emitterType:"connection",connectionId:this.id};c.emitEvent(r)});this._connection.on(u.SenderEvents.senderError,e=>{const t={rheaContext:e,emitter:this,eventName:u.SenderEvents.senderError,emitterType:"connection",connectionId:this.id};c.emitEvent(t)}),this._connection.on(u.SenderEvents.senderClose,e=>{const t={rheaContext:e,emitter:this,eventName:u.SenderEvents.senderClose,emitterType:"connection",connectionId:this.id};c.emitEvent(t)}),this._connection.on(u.ReceiverEvents.receiverError,e=>{const t={rheaContext:e,emitter:this,eventName:u.ReceiverEvents.receiverError,emitterType:"connection",connectionId:this.id};c.emitEvent(t)}),this._connection.on(u.ReceiverEvents.receiverClose,e=>{const t={rheaContext:e,emitter:this,eventName:u.ReceiverEvents.receiverClose,emitterType:"connection",connectionId:this.id};c.emitEvent(t)}),this._connection.on(u.SessionEvents.sessionError,e=>{const t={rheaContext:e,emitter:this,eventName:u.SessionEvents.sessionError,emitterType:"connection",connectionId:this.id};c.emitEvent(t)}),this._connection.on(u.SessionEvents.sessionClose,e=>{const t={rheaContext:e,emitter:this,eventName:u.SessionEvents.sessionClose,emitterType:"connection",connectionId:this.id};c.emitEvent(t)}),"function"==typeof this._connection.eventNames&&i.eventHandler("[%s] rhea-promise 'connection' object is listening for events: %o emitted by rhea's 'connection' object.",this.id,this._connection.eventNames())}}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n=r(128),i=r(386),o=r(387),s=r(126),a=r(164),c=r(224),u=r(225);t.Session=class Session extends c.Entity{constructor(e,t){super(),this._connection=e,this._session=t,this._initializeEventListeners()}get connection(){return this._connection}get outgoing(){return this._session.outgoing}get error(){return this._session.error}isOpen(){let e=!1;return this._connection.isOpen()&&this._session.is_open()&&(e=!0),e}isClosed(){return this._session.is_closed()}isItselfClosed(){return this._session.is_itself_closed()}remove(){this._session&&(this.removeAllListeners(),this._session.removeAllListeners(),this._session.remove())}begin(){this._session&&this._session.begin()}close(){return this.removeAllListeners(),new Promise((e,t)=>{if(n.error("[%s] The session is open ? -> %s",this.connection.id,this.isOpen()),!this.isOpen())return e();{let r,i,o;const a=()=>{clearTimeout(o),this.actionInitiated--,this._session.removeListener(s.SessionEvents.sessionError,r),this._session.removeListener(s.SessionEvents.sessionClose,i)};i=(t=>(a(),n.session("[%s] Resolving the promise as the amqp session has been closed.",this.connection.id),e())),r=(e=>{a(),n.error("[%s] Error occurred while closing amqp session.",this.connection.id,e.session.error),t(e.session.error)});const c=()=>{a();const e="Unable to close the amqp session due to operation timeout.";n.error("[%s] %s",this.connection.id,e),t(new u.OperationTimeoutError(e))};this._session.once(s.SessionEvents.sessionClose,i),this._session.once(s.SessionEvents.sessionError,r),n.session("[%s] Calling session.close()",this.connection.id),o=setTimeout(c,1e3*this.connection.options.operationTimeoutInSeconds),this._session.close(),this.actionInitiated++}})}createReceiver(e){return new Promise((t,r)=>{if(e&&(e.onMessage&&!e.onError||e.onError&&!e.onMessage)&&0!==e.credit_window)return r(new Error("Either provide both 'onMessage' and 'onError' handlers, or please set the credit_window to 0, if you want to provide only the 'onError' handler. This ensures no messages are lost between the receiver getting created  and the 'onMessage' handler being added."));e&&e.onSessionError&&(this.on(s.SessionEvents.sessionError,e.onSessionError),n.session("[%s] Added event handler for event '%s' on rhea-promise 'session', while creating the 'receiver'.",this.connection.id,s.SessionEvents.sessionError)),e&&e.onSessionClose&&(this.on(s.SessionEvents.sessionClose,e.onSessionClose),n.session("[%s] Added event handler for event '%s' on rhea-promise 'session',  while creating the 'receiver'.",this.connection.id,s.SessionEvents.sessionClose));const o=this._session.attach_receiver(e),a=new i.Receiver(this,o,e);let c,l,p;a.actionInitiated++,e&&e.onMessage&&(a.on(s.ReceiverEvents.message,e.onMessage),n.receiver("[%s] Added event handler for event '%s' on rhea-promise 'receiver'.",this.connection.id,s.ReceiverEvents.message)),e&&e.onError&&(a.on(s.ReceiverEvents.receiverError,e.onError),n.receiver("[%s] Added event handler for event '%s' on rhea-promise 'receiver'.",this.connection.id,s.ReceiverEvents.receiverError)),e&&e.onClose&&(a.on(s.ReceiverEvents.receiverClose,e.onClose),n.receiver("[%s] Added event handler for event '%s' on rhea-promise 'receiver'.",this.connection.id,s.ReceiverEvents.receiverClose)),e&&e.onSettled&&(a.on(s.ReceiverEvents.settled,e.onSettled),n.receiver("[%s] Added event handler for event '%s' on rhea-promise 'receiver'.",this.connection.id,s.ReceiverEvents.settled));const d=()=>{clearTimeout(p),a.actionInitiated--,o.removeListener(s.ReceiverEvents.receiverOpen,c),o.removeListener(s.ReceiverEvents.receiverClose,l)};c=(e=>(d(),n.receiver("[%s] Resolving the promise with amqp receiver '%s'.",this.connection.id,a.name),t(a))),l=(e=>(d(),n.error("[%s] Error occurred while creating a receiver over amqp connection: %O.",this.connection.id,e.receiver.error),r(e.receiver.error))),o.once(s.ReceiverEvents.receiverOpen,c),o.once(s.ReceiverEvents.receiverClose,l),p=setTimeout(()=>{d();const e=`Unable to create the amqp receiver ${a.name} due to `+"operation timeout.";return n.error("[%s] %s",this.connection.id,e),r(new u.OperationTimeoutError(e))},1e3*this.connection.options.operationTimeoutInSeconds)})}createSender(e){return new Promise((t,r)=>{e&&e.onSessionError&&(this.on(s.SessionEvents.sessionError,e.onSessionError),n.session("[%s] Added event handler for event '%s' on rhea-promise 'session', while creating the sender.",this.connection.id,s.SessionEvents.sessionError)),e&&e.onSessionClose&&(this.on(s.SessionEvents.sessionClose,e.onSessionClose),n.session("[%s] Added event handler for event '%s' on rhea-promise 'session', while creating the sender.",this.connection.id,s.SessionEvents.sessionClose));const i=this._session.attach_sender(e),a=new o.Sender(this,i,e);let c,l,p;a.actionInitiated++,e&&(e.onError&&a.on(s.SenderEvents.senderError,e.onError),e.onClose&&a.on(s.SenderEvents.senderClose,e.onClose),e.onAccepted&&a.on(s.SenderEvents.accepted,e.onAccepted),e.onRejected&&a.on(s.SenderEvents.rejected,e.onRejected),e.onReleased&&a.on(s.SenderEvents.released,e.onReleased),e.onModified&&a.on(s.SenderEvents.modified,e.onModified));const d=()=>{clearTimeout(p),a.actionInitiated--,i.removeListener(s.SenderEvents.senderOpen,c),i.removeListener(s.SenderEvents.senderClose,l)};c=(e=>(d(),n.sender("[%s] Resolving the promise with amqp sender '%s'.",this.connection.id,a.name),t(a))),l=(e=>(d(),n.error("[%s] Error occurred while creating a sender over amqp connection: %O.",this.connection.id,e.sender.error),r(e.sender.error))),i.once(s.SenderEvents.sendable,c),i.once(s.SenderEvents.senderClose,l),p=setTimeout(()=>{d();const e=`Unable to create the amqp sender ${a.name} due to `+"operation timeout.";return n.error("[%s] %s",this.connection.id,e),r(new u.OperationTimeoutError(e))},1e3*this.connection.options.operationTimeoutInSeconds)})}_initializeEventListeners(){for(const e in s.SessionEvents)this._session.on(s.SessionEvents[e],t=>{const r={rheaContext:t,emitter:this,eventName:s.SessionEvents[e],emitterType:"session",connectionId:this.connection.id};a.emitEvent(r)});this._session.on(s.SenderEvents.senderError,e=>{const t={rheaContext:e,emitter:this,eventName:s.SenderEvents.senderError,emitterType:"session",connectionId:this.connection.id};a.emitEvent(t)}),this._session.on(s.SenderEvents.senderClose,e=>{const t={rheaContext:e,emitter:this,eventName:s.SenderEvents.senderClose,emitterType:"session",connectionId:this.connection.id};a.emitEvent(t)}),this._session.on(s.ReceiverEvents.receiverError,e=>{const t={rheaContext:e,emitter:this,eventName:s.ReceiverEvents.receiverError,emitterType:"session",connectionId:this.connection.id};a.emitEvent(t)}),this._session.on(s.ReceiverEvents.receiverClose,e=>{const t={rheaContext:e,emitter:this,eventName:s.ReceiverEvents.receiverClose,emitterType:"session",connectionId:this.connection.id};a.emitEvent(t)}),"function"==typeof this._session.eventNames&&n.eventHandler("[%s] rhea-promise 'session' object is listening for events: %o emitted by rhea's 'session' object.",this.connection.id,this._session.eventNames())}}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n=r(0),i=r(128),o=r(126),s=r(164),a=r(224),c=r(225);var u;!function(e){e.sender="sender",e.receiver="receiver"}(u=t.LinkType||(t.LinkType={}));t.Link=class Link extends a.Entity{constructor(e,t,r,n){super(),this.type=e,this._session=t,this._link=r,this.linkOptions=n,this._initializeEventListeners()}get name(){return this._link.name}get error(){return this._link.error}get properties(){return this._link.properties}get sendSettleMode(){return this._link.snd_settle_mode}get receiveSettleMode(){return this._link.rcv_settle_mode}get source(){return this._link.source}set source(e){this._link.set_source(e)}get target(){return this._link.target}set target(e){this._link.set_source(e)}get maxMessageSize(){return this._link.max_message_size}get offeredCapabilities(){return this._link.offered_capabilities}get desiredCapabilities(){return this._link.desired_capabilities}get address(){return this.source.address}get credit(){return this._link.credit}get session(){return this._session}get connection(){return this._session.connection}isOpen(){let e=!1;return this._session.isOpen()&&this._link.is_open()&&(e=!0),e}isRemoteOpen(){return this._link.is_remote_open()}hasCredit(){return this._link.has_credit()}isSender(){return this._link.is_sender()}isReceiver(){return this._link.is_receiver()}isClosed(){return this._link.is_closed()}isItselfClosed(){return this._link.is_itself_closed()}isSessionClosed(){return this._session.isClosed()}isSessionItselfClosed(){return this._session.isItselfClosed()}remove(){this._link&&(this.removeAllListeners(),this._link.removeAllListeners(),this._link.remove()),this._session&&this._session.remove()}close(){return n.__awaiter(this,void 0,void 0,function*(){return this.removeAllListeners(),yield new Promise((e,t)=>{if(i.error("[%s] The %s is open ? -> %s",this.connection.id,this.type,this.isOpen()),!this.isOpen())return e();{const r=this.type===u.sender?o.SenderEvents.senderError:o.ReceiverEvents.receiverError,n=this.type===u.sender?o.SenderEvents.senderClose:o.ReceiverEvents.receiverClose;let s,a,l;const p=()=>{clearTimeout(l),this.actionInitiated--,this._link.removeListener(r,s),this._link.removeListener(n,a)};a=(t=>(p(),i[this.type]("[%s] Resolving the promise as the amqp %s has been closed.",this.connection.id,this.type),e())),s=(e=>(p(),i.error("[%s] Error occurred while closing amqp %s: %O.",this.connection.id,this.type,e.session.error),t(e.session.error)));const d=()=>{p();const e=`Unable to close the amqp %s ${this.name} due to operation timeout.`;return i.error("[%s] %s",this.connection.id,this.type,e),t(new c.OperationTimeoutError(e))};this._link.once(n,a),this._link.once(r,s),l=setTimeout(d,1e3*this.connection.options.operationTimeoutInSeconds),this._link.close(),this.actionInitiated++}}),i[this.type]("[%s] %s has been closed, now closing it's session.",this.connection.id,this.type),this._session.close()})}_initializeEventListeners(){const e=this.type===u.sender?o.SenderEvents:o.ReceiverEvents;for(const t in e)this._link.on(e[t],r=>{const n={rheaContext:r,emitter:this,eventName:e[t],emitterType:this.type,connectionId:this.connection.id};s.emitEvent(n)});"function"==typeof this._link.eventNames&&i.eventHandler("[%s] rhea-promise '%s' object is listening for events: %o emitted by rhea's '%s' object.",this.connection.id,this.type,this._link.eventNames(),this.type),"function"==typeof this._link.listenerCount&&i.eventHandler("[%s] ListenerCount for event '%s_error' on rhea's '%s' object is: %d.",this.connection.id,this.type,this.type,this._link.listenerCount(`${this.type}_error`))}}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n=r(5);t.Entity=class Entity extends n.EventEmitter{constructor(){super(),this.actionInitiated=0}}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.OperationTimeoutError=class OperationTimeoutError extends Error{constructor(e){super(e),this.name="OperationTimeoutError",this.condition="amqp:operation-timeout",this.description=e}}},function(e,t){function isBuffer(e){return!!e.constructor&&"function"==typeof e.constructor.isBuffer&&e.constructor.isBuffer(e)}
/*!
 * Determine if an object is a Buffer
 *
 * @author   Feross Aboukhadijeh <https://feross.org>
 * @license  MIT
 */
e.exports=function(e){return null!=e&&(isBuffer(e)||function isSlowBuffer(e){return"function"==typeof e.readFloatLE&&"function"==typeof e.slice&&isBuffer(e.slice(0,0))}(e)||!!e._isBuffer)}},function(e,t,r){"use strict";var n=r(42),i=r(913),o={"Content-Type":"application/x-www-form-urlencoded"};function setContentTypeIfUnset(e,t){!n.isUndefined(e)&&n.isUndefined(e["Content-Type"])&&(e["Content-Type"]=t)}var s={adapter:function getDefaultAdapter(){var e;return"undefined"!=typeof XMLHttpRequest?e=r(914):"undefined"!=typeof process&&(e=r(919)),e}(),transformRequest:[function transformRequest(e,t){return i(t,"Content-Type"),n.isFormData(e)||n.isArrayBuffer(e)||n.isBuffer(e)||n.isStream(e)||n.isFile(e)||n.isBlob(e)?e:n.isArrayBufferView(e)?e.buffer:n.isURLSearchParams(e)?(setContentTypeIfUnset(t,"application/x-www-form-urlencoded;charset=utf-8"),e.toString()):n.isObject(e)?(setContentTypeIfUnset(t,"application/json;charset=utf-8"),JSON.stringify(e)):e}],transformResponse:[function transformResponse(e){if("string"==typeof e)try{e=JSON.parse(e)}catch(e){}return e}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,validateStatus:function validateStatus(e){return e>=200&&e<300},headers:{common:{Accept:"application/json, text/plain, */*"}}};n.forEach(["delete","get","head"],function forEachMethodNoData(e){s.headers[e]={}}),n.forEach(["post","put","patch"],function forEachMethodWithData(e){s.headers[e]=n.merge(o)}),e.exports=s},function(e,t,r){"use strict";var n=r(392);e.exports=function createError(e,t,r,i,o){var s=new Error(e);return n(s,t,r,i,o)}},function(e,t){(function(){t.defaults={.1:{explicitCharkey:!1,trim:!0,normalize:!0,normalizeTags:!1,attrkey:"@",charkey:"#",explicitArray:!1,ignoreAttrs:!1,mergeAttrs:!1,explicitRoot:!1,validator:null,xmlns:!1,explicitChildren:!1,childkey:"@@",charsAsChildren:!1,includeWhiteChars:!1,async:!1,strict:!0,attrNameProcessors:null,attrValueProcessors:null,tagNameProcessors:null,valueProcessors:null,emptyTag:""},.2:{explicitCharkey:!1,trim:!1,normalize:!1,normalizeTags:!1,attrkey:"$",charkey:"_",explicitArray:!0,ignoreAttrs:!1,mergeAttrs:!1,explicitRoot:!0,validator:null,xmlns:!1,explicitChildren:!1,preserveChildrenOrder:!1,childkey:"$$",charsAsChildren:!1,includeWhiteChars:!1,async:!1,strict:!0,attrNameProcessors:null,attrValueProcessors:null,tagNameProcessors:null,valueProcessors:null,rootName:"root",xmldec:{version:"1.0",encoding:"UTF-8",standalone:!0},doctype:null,renderOpts:{pretty:!0,indent:"  ",newline:"\n"},headless:!1,chunkSize:1e4,emptyTag:"",cdata:!1}}}).call(this)},function(e,t,r){!function(){var r,n=[],i=[],o=[],s=[],a={},c=[],u=[];o=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],s=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],a={su:0,sun:0,sunday:0,mo:1,mon:1,monday:1,tu:2,tue:2,tuesday:2,we:3,wed:3,wednesday:3,th:4,thu:4,thursday:4,fr:5,fri:5,friday:5,sa:6,sat:6,saturday:6},r=(i=["January","February","March","April","May","June","July","August","September","October","November","December"]).concat(n=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]),c=["su","sun","sunday","mo","mon","monday","tu","tue","tuesday","we","wed","wednesday","th","thu","thursday","fr","fri","friday","sa","sat","saturday"],u={jan:0,january:0,feb:1,february:1,mar:2,march:2,apr:3,april:3,may:4,jun:5,june:5,jul:6,july:6,aug:7,august:7,sep:8,september:8,oct:9,october:9,nov:10,november:10,dec:11,december:11};var l=[31,28,31,30,31,30,31,31,30,31,30,31];function pad(e,t){for(e=String(e);e.length<t;)e="0"+e;return e}var p=function(e){return!!e.match(/^(\d+)$/)},d=function(e,t,r,n){for(var i=n;i>=r;i--){var o=e.substring(t,t+i);if(o.length<r)return null;if(p(o))return o}return null},h=Date.parse;function polyfill(e,t){void 0===Date.prototype[e]&&(Date.prototype[e]=t)}Date.parse=function(e,t){if(t)return function(e,t){e+="",t+="";for(var n,i,o=0,s=0,a="",u="",l=new Date,p=l.getYear(),h=l.getMonth()+1,f=1,m=0,g=0,y=0,v="";s<t.length;){for(a=t.charAt(s),u="";t.charAt(s)===a&&s<t.length;)u+=t.charAt(s++);if("yyyy"===u||"yy"===u||"y"===u){if("yyyy"===u&&(n=4,i=4),"yy"===u&&(n=2,i=2),"y"===u&&(n=2,i=4),null===(p=d(e,o,n,i)))return NaN;o+=p.length,2===p.length&&(p=p>70?p-0+1900:p-0+2e3)}else if("MMM"===u||"NNN"===u){h=0;for(var b=0;b<r.length;b++){var _=r[b];if(e.substring(o,o+_.length).toLowerCase()===_.toLowerCase()&&("MMM"===u||"NNN"===u&&b>11)){(h=b+1)>12&&(h-=12),o+=_.length;break}}if(h<1||h>12)return NaN}else if("EE"===u||"E"===u)for(var w=0;w<c.length;w++){var E=c[w];if(e.substring(o,o+E.length).toLowerCase()===E.toLowerCase()){o+=E.length;break}}else if("MM"===u||"M"===u){if(null===(h=d(e,o,u.length,2))||h<1||h>12)return NaN;o+=h.length}else if("dd"===u||"d"===u){if(null===(f=d(e,o,u.length,2))||f<1||f>31)return NaN;o+=f.length}else if("hh"===u||"h"===u){if(null===(m=d(e,o,u.length,2))||m<1||m>12)return NaN;o+=m.length}else if("HH"===u||"H"===u){if(null===(m=d(e,o,u.length,2))||m<0||m>23)return NaN;o+=m.length}else if("KK"===u||"K"===u){if(null===(m=d(e,o,u.length,2))||m<0||m>11)return NaN;o+=m.length}else if("kk"===u||"k"===u){if(null===(m=d(e,o,u.length,2))||m<1||m>24)return NaN;o+=m.length,m--}else if("mm"===u||"m"===u){if(null===(g=d(e,o,u.length,2))||g<0||g>59)return NaN;o+=g.length}else if("ss"===u||"s"===u){if(null===(y=d(e,o,u.length,2))||y<0||y>59)return NaN;o+=y.length}else if("a"===u){if("am"===e.substring(o,o+2).toLowerCase())v="AM";else{if("pm"!==e.substring(o,o+2).toLowerCase())return NaN;v="PM"}o+=2}else{if(e.substring(o,o+u.length)!==u)return NaN;o+=u.length}}if(o!==e.length)return NaN;if(2===h)if(p%4==0&&p%100!=0||p%400==0){if(f>29)return NaN}else if(f>28)return NaN;return(4===h||6===h||9===h||11===h)&&f>30?NaN:(m<12&&"PM"===v?m=m-0+12:m>11&&"AM"===v&&(m-=12),new Date(p,h-1,f,m,g,y).getTime())}(e,t);var n,i=h(e),o=0;return isNaN(i)&&(n=/^(\d{4}|[+\-]\d{6})-(\d{2})-(\d{2})(?:[T ](\d{2}):(\d{2})(?::(\d{2})(?:\.(\d{3,}))?)?(?:(Z)|([+\-])(\d{2})(?::?(\d{2}))?))?/.exec(e))&&("Z"!==n[8]&&(o=60*+n[10]+ +n[11],"+"===n[9]&&(o=0-o)),n[7]=n[7]||"000",i=Date.UTC(+n[1],+n[2]-1,+n[3],+n[4],+n[5]+o,+n[6],+n[7].substr(0,3))),i},Date.today=function(){return(new Date).clearTime()},Date.UTCtoday=function(){return(new Date).clearUTCTime()},Date.tomorrow=function(){return Date.today().add({days:1})},Date.UTCtomorrow=function(){return Date.UTCtoday().add({days:1})},Date.yesterday=function(){return Date.today().add({days:-1})},Date.UTCyesterday=function(){return Date.UTCtoday().add({days:-1})},Date.validateDay=function(e,t,r){var n=new Date(t,r,e);return n.getFullYear()===t&&n.getMonth()===r&&n.getDate()===e},Date.validateYear=function(e){return e>=0&&e<=9999},Date.validateSecond=function(e){return e>=0&&e<60},Date.validateMonth=function(e){return e>=0&&e<12},Date.validateMinute=function(e){return e>=0&&e<60},Date.validateMillisecond=function(e){return e>=0&&e<1e3},Date.validateHour=function(e){return e>=0&&e<24},Date.compare=function(e,t){return e.valueOf()<t.valueOf()?-1:e.valueOf()>t.valueOf()?1:0},Date.equals=function(e,t){return e.valueOf()===t.valueOf()},Date.equalsDay=function(e,t){return e.toYMD()===t.toYMD()},Date.getDayNumberFromName=function(e){return a[e.toLowerCase()]},Date.getMonthNumberFromName=function(e){return u[e.toLowerCase()]},Date.getMonthNameFromNumber=function(e){return i[e]},Date.getMonthAbbrFromNumber=function(e){return n[e]},Date.isLeapYear=function(e){return 29===new Date(e,1,29).getDate()},Date.getDaysInMonth=function(e,t){return 1===t?Date.isLeapYear(e)?29:28:l[t]},polyfill("getMonthAbbr",function(){return n[this.getMonth()]}),polyfill("getMonthName",function(){return i[this.getMonth()]}),polyfill("getLastMonthName",function(){var e=this.getMonth();return i[e=0===e?11:e-1]}),polyfill("getUTCOffset",function(){var e=pad(Math.abs(this.getTimezoneOffset()/.6),4);return this.getTimezoneOffset()>0&&(e="-"+e),e}),polyfill("toCLFString",function(){return pad(this.getDate(),2)+"/"+this.getMonthAbbr()+"/"+this.getFullYear()+":"+pad(this.getHours(),2)+":"+pad(this.getMinutes(),2)+":"+pad(this.getSeconds(),2)+" "+this.getUTCOffset()}),polyfill("toYMD",function(e){return e=void 0===e?"-":e,this.getFullYear()+e+pad(this.getMonth()+1,2)+e+pad(this.getDate(),2)}),polyfill("toDBString",function(){return this.getUTCFullYear()+"-"+pad(this.getUTCMonth()+1,2)+"-"+pad(this.getUTCDate(),2)+" "+pad(this.getUTCHours(),2)+":"+pad(this.getUTCMinutes(),2)+":"+pad(this.getUTCSeconds(),2)}),polyfill("clearTime",function(){return this.setHours(0),this.setMinutes(0),this.setSeconds(0),this.setMilliseconds(0),this}),polyfill("clearUTCTime",function(){return this.setUTCHours(0),this.setUTCMinutes(0),this.setUTCSeconds(0),this.setUTCMilliseconds(0),this}),polyfill("add",function(e){return void 0!==e.milliseconds&&this.setMilliseconds(this.getMilliseconds()+e.milliseconds),void 0!==e.seconds&&this.setSeconds(this.getSeconds()+e.seconds),void 0!==e.minutes&&this.setMinutes(this.getMinutes()+e.minutes),void 0!==e.hours&&this.setHours(this.getHours()+e.hours),void 0!==e.days&&this.setDate(this.getDate()+e.days),void 0!==e.weeks&&this.setDate(this.getDate()+7*e.weeks),void 0!==e.months&&this.setMonth(this.getMonth()+e.months),void 0!==e.years&&this.setFullYear(this.getFullYear()+e.years),this}),polyfill("addMilliseconds",function(e){return this.add({milliseconds:e})}),polyfill("addSeconds",function(e){return this.add({seconds:e})}),polyfill("addMinutes",function(e){return this.add({minutes:e})}),polyfill("addHours",function(e){return this.add({hours:e})}),polyfill("addDays",function(e){return this.add({days:e})}),polyfill("addWeeks",function(e){return this.add({days:7*e})}),polyfill("addMonths",function(e){return this.add({months:e})}),polyfill("addYears",function(e){return this.add({years:e})}),polyfill("remove",function(e){return void 0!==e.seconds&&this.setSeconds(this.getSeconds()-e.seconds),void 0!==e.minutes&&this.setMinutes(this.getMinutes()-e.minutes),void 0!==e.hours&&this.setHours(this.getHours()-e.hours),void 0!==e.days&&this.setDate(this.getDate()-e.days),void 0!==e.weeks&&this.setDate(this.getDate()-7*e.weeks),void 0!==e.months&&this.setMonth(this.getMonth()-e.months),void 0!==e.years&&this.setFullYear(this.getFullYear()-e.years),this}),polyfill("removeMilliseconds",function(e){throw new Error("Not implemented")}),polyfill("removeSeconds",function(e){return this.remove({seconds:e})}),polyfill("removeMinutes",function(e){return this.remove({minutes:e})}),polyfill("removeHours",function(e){return this.remove({hours:e})}),polyfill("removeDays",function(e){return this.remove({days:e})}),polyfill("removeWeeks",function(e){return this.remove({days:7*e})}),polyfill("removeMonths",function(e){return this.remove({months:e})}),polyfill("removeYears",function(e){return this.remove({years:e})}),polyfill("addWeekdays",function(e){var t=this.getDay();0===t&&(t=7);var r=e,n=Math.floor((e+t-1)/5);return e>0?(r+=2*n,t>5&&(r-=t-5)):(r+=Math.min(2*n,0),t>6&&(r-=1)),this.addDays(r)}),polyfill("setTimeToNow",function(){var e=new Date;this.setMilliseconds(e.getMilliseconds()),this.setSeconds(e.getSeconds()),this.setMinutes(e.getMinutes()),this.setHours(e.getHours())}),polyfill("clone",function(){return new Date(this.valueOf())}),polyfill("between",function(e,t){return this.valueOf()>=e.valueOf()&&this.valueOf()<=t.valueOf()}),polyfill("compareTo",function(e){return Date.compare(this,e)}),polyfill("equals",function(e){return Date.equals(this,e)}),polyfill("equalsDay",function(e){return Date.equalsDay(this,e)}),polyfill("isToday",function(){return Date.equalsDay(this,Date.today())}),polyfill("isAfter",function(e){return e=e||new Date,this.compareTo(e)>0}),polyfill("isBefore",function(e){return e=e||new Date,this.compareTo(e)<0}),polyfill("isWeekend",function(e){return this.getDay()%6==0}),polyfill("getDaysBetween",function(e){return(e.clone().valueOf()-this.valueOf())/864e5|0}),polyfill("getHoursBetween",function(e){return(e.clone().valueOf()-this.valueOf())/36e5|0}),polyfill("getMinutesBetween",function(e){return(e.clone().valueOf()-this.valueOf())/6e4|0}),polyfill("getSecondsBetween",function(e){return(e.clone().valueOf()-this.valueOf())/1e3|0}),polyfill("getMillisecondsBetween",function(e){return e.clone().valueOf()-this.valueOf()|0}),polyfill("getMonthsBetween",function(e){Math.abs(+this/864e5-+e/864e5);for(var t=new Date(+e<+this?+e:+this),r=new Date(e>+this?+e:+this),n=0;+t<+r;)n++,t=t.addMonths(1);return n-Math.abs(+t/864e5-+r/864e5)/31}),polyfill("getOrdinalNumber",function(){return Math.ceil((this.clone().clearTime()-new Date(this.getFullYear(),0,1))/864e5)+1}),polyfill("toFormat",function(e){return f(e,m(this))}),polyfill("toUTCFormat",function(e){return f(e,g(this))}),polyfill("getWeekNumber",function(){var e=new Date(this.getFullYear(),0,1);return Math.ceil(((this-e)/864e5+e.getDay()+1)/7)}),polyfill("getFullWeekNumber",function(){var e=""+this.getWeekNumber();return 1===e.length&&(e="0"+e),e});var f=function(e,t){var r,n,i=[e],o=function(e,t){for(var r,n,o,s=0,a=i.length,c=[];s<a;s++)if("string"==typeof i[s]){for(r=0,n=(o=i[s].split(e)).length-1;r<n;r++)c.push(o[r]),c.push([t]);c.push(o[n])}else c.push(i[s]);i=c};for(r in t)o(r,t[r]);for("",r=0,n=i.length;r<n;r++)"string"==typeof i[r]?i[r]:i[r][0];return i.join("")},m=function(e){var t=e.getHours()%12?e.getHours()%12:12;return{YYYY:e.getFullYear(),YY:String(e.getFullYear()).slice(-2),MMMM:i[e.getMonth()],MMM:n[e.getMonth()],MM:pad(e.getMonth()+1,2),MI:pad(e.getMinutes(),2),M:e.getMonth()+1,DDDD:s[e.getDay()],DDD:o[e.getDay()],DD:pad(e.getDate(),2),D:e.getDate(),HH24:pad(e.getHours(),2),HH:pad(t,2),H:t,SS:pad(e.getSeconds(),2),PP:e.getHours()>=12?"PM":"AM",P:e.getHours()>=12?"pm":"am",LL:pad(e.getMilliseconds(),3)}},g=function(e){var t=e.getUTCHours()%12?e.getUTCHours()%12:12;return{YYYY:e.getUTCFullYear(),YY:String(e.getUTCFullYear()).slice(-2),MMMM:i[e.getUTCMonth()],MMM:n[e.getUTCMonth()],MM:pad(e.getUTCMonth()+1,2),MI:pad(e.getUTCMinutes(),2),M:e.getUTCMonth()+1,DDDD:s[e.getUTCDay()],DDD:o[e.getUTCDay()],DD:pad(e.getUTCDate(),2),D:e.getUTCDate(),HH24:pad(e.getUTCHours(),2),HH:pad(t,2),H:t,SS:pad(e.getUTCSeconds(),2),PP:e.getUTCHours()>=12?"PM":"AM",P:e.getUTCHours()>=12?"pm":"am",LL:pad(e.getUTCMilliseconds(),3)}},y=function(e){"es"==e?(o=["Dom","Lun","Mar","Mie","Jue","Vie","Sab"],s=["Domingo","Lunes","Martes","Mircoles","Jueves","Viernes","Sbado"],a={do:0,dom:0,domingo:0,lu:1,lun:1,lunes:1,ma:2,mar:2,martes:2,mi:3,mie:3,miercoles:3,ju:4,jue:4,jueves:4,vi:5,vie:5,viernes:5,sa:6,sab:6,sabado:6},r=(i=["Enero","Febrero","Marzo","Abril","Mayo","Junio","Julio","Agosto","Septiembre","Octubre","Noviembre","Diciembre"]).concat(n=["Ene","Feb","Mar","Abr","May","Jun","Jul","Ago","Sep","Oct","Nov","Dic"]),c=["do","dom","domingo","lu","lun","lunes","ma","mar","martes","mi","mie","mircoles","ju","jue","jueves","vi","vie","viernes","sa","sab","sbado"],u={ene:0,enero:0,feb:1,febrero:1,mar:2,marzo:2,abr:3,abril:3,may:4,mayo:4,jun:5,junio:5,jul:6,julio:6,ago:7,agosto:7,sep:8,septiembre:8,oct:9,octubre:9,nov:10,noviembre:10,dic:11,diciembre:11}):"fr"==e?(o=["Dim","Lun","Mar","Mer","Jeu","Ven","Sam"],s=["Dimanchi","Lundi","Mardi","Mercredi","Jeudi","Vendredi","Samedi"],a={di:0,dim:0,dimanchi:0,lu:1,lun:1,lundi:1,ma:2,mar:2,mardi:2,me:3,mer:3,mercredi:3,je:4,jeu:4,jeudi:4,ve:5,ven:5,vendredi:5,sa:6,sam:6,samedi:6},r=(i=["Janvier","Fvrier","Mars","Avril","Mai","Juin","Juillet","Aot","Septembre","Octobre","Novembre","Dcembre"]).concat(n=["Jan","Fv","Mar","Avr","Mai","Jui","Jul","Ao","Sep","Oct","Nov","Dc"]),c=["di","dim","dimanchi","lu","lun","lundi","ma","mar","mardi","me","mer","mercredi","je","jeu","jeudi","ve","ven","vendredi","sa","sam","samedi"],u={jan:0,janvier:0,"fv":1,"fvrier":1,mar:2,mars:2,avr:3,avril:3,mai:4,jui:5,juin:5,jul:6,juillet:6,"ao":7,"aot":7,sep:8,septembre:8,oct:9,octobre:9,nov:10,novembre:10,"dc":11,"dcembre":11}):"pt-BR"==e&&(o=["Dom","Seg","Ter","Qua","Qui","Sex","Sab"],s=["Domingo","Segunda","Tera","Quarta","Quinta","Sexta","Sbado"],a={do:0,dom:0,domingo:0,se:1,seg:1,segunda:1,te:2,ter:2,terca:2,qa:3,qua:3,quarta:3,qi:4,qui:4,quinta:4,se:5,sex:5,sexta:5,sa:6,sab:6,sabado:6},r=(i=["Janeiro","Fevereiro","Maro","Abril","Maio","Junho","Julho","Agosto","Setembro","Outubro","Novembro","Dezembro"]).concat(n=["Jan","Fev","Mar","Abr","Mai","Jun","Jul","Ago","Set","Out","Nov","Dez"]),c=["do","dom","domingo","se","seg","segunda","te","ter","tera","qa","qua","quarta","qi","qui","quinta","se","sex","sexta","sa","sab","sbado"],u={jan:0,janeiro:0,fev:1,fevereiro:1,mar:2,"maro":2,abr:3,abril:3,mai:4,jun:5,junho:5,jul:6,julho:6,ago:7,agosto:7,set:8,setembro:8,out:9,outubro:9,nov:10,novembro:10,dez:11,dezembro:11})};"object"==typeof e.exports?e.exports.language=y:t.language=y}()},function(e,t,r){function DOMParser(e){this.options=e||{locator:{}}}function DOMHandler(){this.cdata=!1}function position(e,t){t.lineNumber=e.lineNumber,t.columnNumber=e.columnNumber}function _locator(e){if(e)return"\n@"+(e.systemId||"")+"#[line:"+e.lineNumber+",col:"+e.columnNumber+"]"}function _toString(e,t,r){return"string"==typeof e?e.substr(t,r):e.length>=t+r||t?new java.lang.String(e,t,r)+"":e}function appendElement(e,t){e.currentElement?e.currentElement.appendChild(t):e.doc.appendChild(t)}DOMParser.prototype.parseFromString=function(e,t){var r=this.options,i=new n,o=r.domBuilder||new DOMHandler,s=r.errorHandler,a=r.locator,c=r.xmlns||{},u={lt:"<",gt:">",amp:"&",quot:'"',apos:"'"};return a&&o.setDocumentLocator(a),i.errorHandler=function buildErrorHandler(e,t,r){if(!e){if(t instanceof DOMHandler)return t;e=t}var n={},i=e instanceof Function;function build(t){var o=e[t];!o&&i&&(o=2==e.length?function(r){e(t,r)}:e),n[t]=o&&function(e){o("[xmldom "+t+"]\t"+e+_locator(r))}||function(){}}return r=r||{},build("warning"),build("error"),build("fatalError"),n}(s,o,a),i.domBuilder=r.domBuilder||o,/\/x?html?$/.test(t)&&(u.nbsp="",u.copy="",c[""]="http://www.w3.org/1999/xhtml"),c.xml=c.xml||"http://www.w3.org/XML/1998/namespace",e?i.parse(e,c,u):i.errorHandler.error("invalid doc source"),o.doc},DOMHandler.prototype={startDocument:function(){this.doc=(new i).createDocument(null,null,null),this.locator&&(this.doc.documentURI=this.locator.systemId)},startElement:function(e,t,r,n){var i=this.doc,o=i.createElementNS(e,r||t),s=n.length;appendElement(this,o),this.currentElement=o,this.locator&&position(this.locator,o);for(var a=0;a<s;a++){e=n.getURI(a);var c=n.getValue(a),u=(r=n.getQName(a),i.createAttributeNS(e,r));this.locator&&position(n.getLocator(a),u),u.value=u.nodeValue=c,o.setAttributeNode(u)}},endElement:function(e,t,r){var n=this.currentElement;n.tagName;this.currentElement=n.parentNode},startPrefixMapping:function(e,t){},endPrefixMapping:function(e){},processingInstruction:function(e,t){var r=this.doc.createProcessingInstruction(e,t);this.locator&&position(this.locator,r),appendElement(this,r)},ignorableWhitespace:function(e,t,r){},characters:function(e,t,r){if(e=_toString.apply(this,arguments)){if(this.cdata)var n=this.doc.createCDATASection(e);else n=this.doc.createTextNode(e);this.currentElement?this.currentElement.appendChild(n):/^\s*$/.test(e)&&this.doc.appendChild(n),this.locator&&position(this.locator,n)}},skippedEntity:function(e){},endDocument:function(){this.doc.normalize()},setDocumentLocator:function(e){(this.locator=e)&&(e.lineNumber=0)},comment:function(e,t,r){e=_toString.apply(this,arguments);var n=this.doc.createComment(e);this.locator&&position(this.locator,n),appendElement(this,n)},startCDATA:function(){this.cdata=!0},endCDATA:function(){this.cdata=!1},startDTD:function(e,t,r){var n=this.doc.implementation;if(n&&n.createDocumentType){var i=n.createDocumentType(e,t,r);this.locator&&position(this.locator,i),appendElement(this,i)}},warning:function(e){console.warn("[xmldom warning]\t"+e,_locator(this.locator))},error:function(e){console.error("[xmldom error]\t"+e,_locator(this.locator))},fatalError:function(e){throw console.error("[xmldom fatalError]\t"+e,_locator(this.locator)),e}},"endDTD,startEntity,endEntity,attributeDecl,elementDecl,externalEntityDecl,internalEntityDecl,resolveEntity,getExternalSubset,notationDecl,unparsedEntityDecl".replace(/\w+/g,function(e){DOMHandler.prototype[e]=function(){return null}});var n=r(942).XMLReader,i=t.DOMImplementation=r(402).DOMImplementation;t.XMLSerializer=r(402).XMLSerializer,t.DOMParser=DOMParser},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n=r(129),i=r(99);t.DeviceTokenCredentials=class DeviceTokenCredentials extends n.TokenCredentialsBase{constructor(e,t,r,n,o,s){r||(r="user@example.com"),t||(t=i.AuthConstants.AAD_COMMON_TENANT),e||(e=i.AuthConstants.DEFAULT_ADAL_CLIENT_ID),super(e,t,n,o,s),this.username=r}getToken(){return this.getTokenFromCache(this.username)}}},function(e,t,r){"use strict";var n=this&&this.__awaiter||function(e,t,r,n){return new(r||(r=Promise))(function(i,o){function fulfilled(e){try{step(n.next(e))}catch(e){o(e)}}function rejected(e){try{step(n.throw(e))}catch(e){o(e)}}function step(e){e.done?i(e.value):new r(function(t){t(e.value)}).then(fulfilled,rejected)}step((n=n.apply(e,t||[])).next())})};Object.defineProperty(t,"__esModule",{value:!0});const i=r(166),o=r(106);t.MSIAppServiceTokenCredentials=class MSIAppServiceTokenCredentials extends i.MSITokenCredentials{constructor(e){if(e||(e={}),super(e),e.msiEndpoint=e.msiEndpoint||process.env.MSI_ENDPOINT,e.msiSecret=e.msiSecret||process.env.MSI_SECRET,!e.msiEndpoint||e.msiEndpoint&&"string"!=typeof e.msiEndpoint.valueOf())throw new Error('Either provide "msiEndpoint" as a property of the "options" object or set the environment variable "MSI_ENDPOINT" and it must be of type "string".');if(!e.msiSecret||e.msiSecret&&"string"!=typeof e.msiSecret.valueOf())throw new Error('Either provide "msiSecret" as a property of the "options" object or set the environment variable "MSI_SECRET" and it must be of type "string".');if(e.msiApiVersion){if("string"!=typeof e.msiApiVersion.valueOf())throw new Error("msiApiVersion must be a uri.")}else e.msiApiVersion="2017-09-01";this.msiEndpoint=e.msiEndpoint,this.msiSecret=e.msiSecret,this.msiApiVersion=e.msiApiVersion}getToken(){return n(this,void 0,void 0,function*(){const e=this.prepareRequestOptions();let t,r;if(void 0===(t=yield this._httpClient.sendRequest(e)).bodyAsText||-1!==t.bodyAsText.indexOf("ExceptionMessage"))throw new Error(`MSI: Failed to retrieve a token from "${e.url}" with an error: ${t.bodyAsText}`);if(!(r=this.parseTokenResponse(t.bodyAsText)).tokenType)throw new Error(`Invalid token response, did not find tokenType. Response body is: ${t.bodyAsText}`);if(!r.accessToken)throw new Error(`Invalid token response, did not find accessToken. Response body is: ${t.bodyAsText}`);return r})}prepareRequestOptions(){const e={url:`${this.msiEndpoint.endsWith("/")?this.msiEndpoint:`${this.msiEndpoint}/`}?resource=${encodeURIComponent(this.resource)}&api-version=${this.msiApiVersion}`,headers:{secret:this.msiSecret},method:"GET"};return(new o.WebResource).prepare(e)}}},function(e,t,r){"use strict";var n=this&&this.__awaiter||function(e,t,r,n){return new(r||(r=Promise))(function(i,o){function fulfilled(e){try{step(n.next(e))}catch(e){o(e)}}function rejected(e){try{step(n.throw(e))}catch(e){o(e)}}function step(e){e.done?i(e.value):new r(function(t){t(e.value)}).then(fulfilled,rejected)}step((n=n.apply(e,t||[])).next())})};Object.defineProperty(t,"__esModule",{value:!0});const i=r(166),o=r(106);t.MSIVmTokenCredentials=class MSIVmTokenCredentials extends i.MSITokenCredentials{constructor(e){if(e||(e={}),super(e),e.msiEndpoint){if("string"!=typeof e.msiEndpoint)throw new Error("msiEndpoint must be a string.")}else e.msiEndpoint="http://169.254.169.254/metadata/identity/oauth2/token";if(o.URLBuilder.parse(e.msiEndpoint).getScheme()||(e.msiEndpoint=`http://${e.msiEndpoint}`),e.apiVersion){if("string"!=typeof e.apiVersion)throw new Error("apiVersion must be a string.")}else e.apiVersion="2018-02-01";e.httpMethod||(e.httpMethod="GET"),this.apiVersion=e.apiVersion,this.msiEndpoint=e.msiEndpoint,this.httpMethod=e.httpMethod}getToken(){return n(this,void 0,void 0,function*(){const e=this.prepareRequestOptions();let t,r;if(t=yield this._httpClient.sendRequest(e),!(r=this.parseTokenResponse(t.bodyAsText)).tokenType)throw new Error(`Invalid token response, did not find tokenType. Response body is: ${t.bodyAsText}`);if(!r.accessToken)throw new Error(`Invalid token response, did not find accessToken. Response body is: ${t.bodyAsText}`);return r})}prepareRequestOptions(){const e={url:this.msiEndpoint,headers:{"Content-Type":"application/x-www-form-urlencoded; charset=UTF-8",Metadata:"true"},method:this.httpMethod,queryParameters:{"api-version":this.apiVersion,resource:this.resource}};return(new o.WebResource).prepare(e)}}},function(e,t,r){"use strict";var n=this&&this.__awaiter||function(e,t,r,n){return new(r||(r=Promise))(function(i,o){function fulfilled(e){try{step(n.next(e))}catch(e){o(e)}}function rejected(e){try{step(n.throw(e))}catch(e){o(e)}}function step(e){e.done?i(e.value):new r(function(t){t(e.value)}).then(fulfilled,rejected)}step((n=n.apply(e,t||[])).next())})};Object.defineProperty(t,"__esModule",{value:!0});const i=r(129);t.UserTokenCredentials=class UserTokenCredentials extends i.TokenCredentialsBase{constructor(e,t,r,n,i,o,s){if(!Boolean(e)||"string"!=typeof e.valueOf())throw new Error("clientId must be a non empty string.");if(!Boolean(t)||"string"!=typeof t.valueOf())throw new Error("domain must be a non empty string.");if(!Boolean(r)||"string"!=typeof r.valueOf())throw new Error("username must be a non empty string.");if(!Boolean(n)||"string"!=typeof n.valueOf())throw new Error("password must be a non empty string.");super(e,t,i,o,s),this.username=r,this.password=n}crossCheckUserNameWithToken(e,t){return e.toLowerCase()===t.toLowerCase()}getToken(){return n(this,void 0,void 0,function*(){try{return yield this.getTokenFromCache(this.username)}catch(e){const t=this,r=this.getActiveDirectoryResourceId();return new Promise((e,n)=>{t.authContext.acquireTokenWithUsernamePassword(r,t.username,t.password,t.clientId,(r,i)=>r?n(r):i.error||i.errorDescription?n(i):(i=i,t.crossCheckUserNameWithToken(t.username,i.userId)?e(i):n(`The userId "${i.userId}" in access token doesn"t match the username "${t.username}" provided during authentication.`)))})}})}}},function(e,t,r){"use strict";const n=r(41),i=r(417),o=r(418),s=r(70),a=r(69),c=s.HttpConstants.HttpVerbs;t.createWithSink=function(e){let t=e;function runFilteredRequest(e,r){return t(e,r)}runFilteredRequest.add=function add(){a.objectValues(arguments).forEach(e=>{t=function makeFilteredPipeline(e){let r=t;return function(t,n){return e(t,r,n)}}(e)})},Object.keys(c).forEach(e=>{runFilteredRequest[e]=(e=>(r,n)=>(r.method=e,t(r,n)))(e)});for(let e=1;e<arguments.length;++e)runFilteredRequest.add(arguments[e]);return runFilteredRequest},t.requestLibrarySink=function requestLibrarySink(e){return(t,r)=>{let i,o,s,a=n.defaults(e);return t.headersOnly?((s=a(t)).on("error",e=>r(e)),s.on("response",e=>{s.on("end",()=>r(null,e))}),s):t.streamedResponse?(t.body&&"function"==typeof t.body.pipe?(o=t.body,t.body=null,i=o.pipe(a(t))):i=a(t),i.on("error",e=>r(e)),i.on("response",e=>r(null,e)),i):t.body&&"function"==typeof t.body.pipe?(o=t.body,t.body=null,o.pipe(a(t,(e,t,n)=>e?r(e):r(null,t,n)))):a(t,(e,t,n)=>e?r(e):r(null,t,n))}},t.create=function(e){return function(){return 0===arguments.length?t.createWithSink(t.requestLibrarySink(e)):t.createWithSink.apply(null,[t.requestLibrarySink(e)].concat(a.objectValues(arguments)))}},t.createCompositeFilter=function createCompositeFilter(){let e=arguments[0];function makePairedFilter(e,t){return(r,n,i)=>{return t(r,function callFilterA(t,r){return e(t,n,r)},i)}}for(let t=1;t<arguments.length;++t)e=makePairedFilter(e,arguments[t]);return e},t.interimStream=function(e){let t=i(),r=i(),n=o(t,r);return e(t,r),n},t=e.exports},function(e,t,r){"use strict";const n=r(41),i=r(417),o=r(418),s=r(72),a=r(71),c=s.HttpConstants.HttpVerbs;t.createWithSink=function(e){let t=e;function runFilteredRequest(e,r){return t(e,r)}runFilteredRequest.add=function add(){a.objectValues(arguments).forEach(e=>{t=function makeFilteredPipeline(e){let r=t;return function(t,n){return e(t,r,n)}}(e)})},Object.keys(c).forEach(e=>{runFilteredRequest[e]=(e=>(r,n)=>(r.method=e,t(r,n)))(e)});for(let e=1;e<arguments.length;++e)runFilteredRequest.add(arguments[e]);return runFilteredRequest},t.requestLibrarySink=function requestLibrarySink(e){return(t,r)=>{let i,o,s,a=n.defaults(e);return t.headersOnly?((s=a(t)).on("error",e=>r(e)),s.on("response",e=>{s.on("end",()=>r(null,e))}),s):t.streamedResponse?(t.body&&"function"==typeof t.body.pipe?(o=t.body,t.body=null,i=o.pipe(a(t))):i=a(t),i.on("error",e=>r(e)),i.on("response",e=>r(null,e)),i):t.body&&"function"==typeof t.body.pipe?(o=t.body,t.body=null,o.pipe(a(t,(e,t,n)=>e?r(e):r(null,t,n)))):a(t,(e,t,n)=>e?r(e):r(null,t,n))}},t.create=function(e){return function(){return 0===arguments.length?t.createWithSink(t.requestLibrarySink(e)):t.createWithSink.apply(null,[t.requestLibrarySink(e)].concat(a.objectValues(arguments)))}},t.createCompositeFilter=function createCompositeFilter(){let e=arguments[0];function makePairedFilter(e,t){return(r,n,i)=>{return t(r,function callFilterA(t,r){return e(t,n,r)},i)}}for(let t=1;t<arguments.length;++t)e=makePairedFilter(e,arguments[t]);return e},t.interimStream=function(e){let t=i(),r=i(),n=o(t,r);return e(t,r),n},t=e.exports},function(e,t,r){"use strict";const n=r(8),i=r(79),o=n.Constants,s=r(130);function _retrieveTokenFromCache(e){let t=this,r=this.environment.activeDirectoryResourceId;t.tokenAudience&&(r=t.tokenAudience,"graph"===t.tokenAudience.toLowerCase()?r=t.environment.activeDirectoryGraphResourceId:"batch"===t.tokenAudience.toLowerCase()&&(r=t.environment.batchResourceId)),this.context.acquireToken(r,this.username,this.clientId,function(t,r){return t?e(t):e(null,r)})}e.exports=class UserTokenCredentials{constructor(e,t,r,n,a){if(!Boolean(e)||"string"!=typeof e.valueOf())throw new Error("clientId must be a non empty string.");if(!Boolean(t)||"string"!=typeof t.valueOf())throw new Error("domain must be a non empty string.");if(!Boolean(r)||"string"!=typeof r.valueOf())throw new Error("username must be a non empty string.");if(!Boolean(n)||"string"!=typeof n.valueOf())throw new Error("password must be a non empty string.");if(a||(a={}),a.environment||(a.environment=s.Azure),a.authorizationScheme||(a.authorizationScheme=o.HeaderConstants.AUTHORIZATION_SCHEME),a.tokenCache||(a.tokenCache=new i.MemoryCache),a.tokenAudience&&"graph"===a.tokenAudience.toLowerCase()&&"common"===t.toLowerCase())throw new Error("If the tokenAudience is specified as 'graph' then 'domain' cannot be the default 'commmon' tenant. It must be the actual tenant (preferrably a string in a guid format).");this.tokenAudience=a.tokenAudience,this.environment=a.environment,this.authorizationScheme=a.authorizationScheme,this.tokenCache=a.tokenCache,this.clientId=e,this.domain=t,this.username=r,this.password=n;let c=this.environment.activeDirectoryEndpointUrl+this.domain;this.context=new i.AuthenticationContext(c,this.environment.validateAuthority,this.tokenCache),this._retrieveTokenFromCache=_retrieveTokenFromCache}getToken(e){let t=this;t._retrieveTokenFromCache(function(r,n){if(!r)return e(null,n);{let r=t.environment.activeDirectoryResourceId;t.tokenAudience&&(r=t.tokenAudience,"graph"===t.tokenAudience.toLowerCase()?r=t.environment.activeDirectoryGraphResourceId:"batch"===t.tokenAudience.toLowerCase()&&(r=t.environment.batchResourceId)),t.context.acquireTokenWithUsernamePassword(r,t.username,t.password,t.clientId,function(t,r){return t?e(new Error("Failed to acquire token for the user. \n"+t)):e(null,r)})}})}signRequest(e,t){this.getToken(function(r,n){return r?t(r):(e.headers[o.HeaderConstants.AUTHORIZATION]=`${n.tokenType} ${n.accessToken}`,t(null))})}}},function(e,t,r){"use strict";const n=r(8),i=r(79),o=n.Constants,s=r(130);function _removeInvalidEntry(e,t){let r=this;r.tokenCache.find(e,function(e,n){return e?t(e):n&&n.length>0?r.tokenCache.remove(n,t):t()})}function _retrieveTokenFromCache(e){let t=this,r=t.environment.activeDirectoryResourceId;t.tokenAudience&&(r=t.tokenAudience,"graph"===t.tokenAudience.toLowerCase()?r=t.environment.activeDirectoryGraphResourceId:"batch"===t.tokenAudience.toLowerCase()&&(r=t.environment.batchResourceId)),t.context.acquireToken(r,null,t.clientId,function(r,n){if(!r)return e(null,n);t._removeInvalidEntry({_clientId:t.clientId},function(t){return e(t?new Error("Error occurred while removing the expired token for service principal from token cache.\n"+t.message):r)})})}e.exports=class ApplicationTokenCredentials{constructor(e,t,r,n){if(!Boolean(e)||"string"!=typeof e.valueOf())throw new Error("clientId must be a non empty string.");if(!Boolean(t)||"string"!=typeof t.valueOf())throw new Error("domain must be a non empty string.");if(!Boolean(r)||"string"!=typeof r.valueOf())throw new Error("secret must be a non empty string.");if(n||(n={}),n.environment||(n.environment=s.Azure),n.authorizationScheme||(n.authorizationScheme=o.HeaderConstants.AUTHORIZATION_SCHEME),n.tokenCache||(n.tokenCache=new i.MemoryCache),n.tokenAudience&&"graph"===n.tokenAudience.toLowerCase()&&"common"===t.toLowerCase())throw new Error("If the tokenAudience is specified as 'graph' then 'domain' cannot be the default 'commmon' tenant. It must be the actual tenant (preferrably a string in a guid format).");this.tokenAudience=n.tokenAudience,this.environment=n.environment,this.authorizationScheme=n.authorizationScheme,this.tokenCache=n.tokenCache,this.clientId=e,this.domain=t,this.secret=r;let a=this.environment.activeDirectoryEndpointUrl+this.domain;this.context=new i.AuthenticationContext(a,this.environment.validateAuthority,this.tokenCache),this._removeInvalidEntry=_removeInvalidEntry,this._retrieveTokenFromCache=_retrieveTokenFromCache}getToken(e){let t=this;t._retrieveTokenFromCache(function(r,n){if(!r)return e(null,n);if(null!==r.message.match(/.*while removing the expired token for service principal.*/i))return e(r);{let r=t.environment.activeDirectoryResourceId;t.tokenAudience&&(r=t.tokenAudience,"graph"===t.tokenAudience.toLowerCase()?r=t.environment.activeDirectoryGraphResourceId:"batch"===t.tokenAudience.toLowerCase()&&(r=t.environment.batchResourceId)),t.context.acquireTokenWithClientCredentials(r,t.clientId,t.secret,function(t,r){return t?e(new Error("Failed to acquire token for application with the provided secret. \n"+t)):e(null,r)})}})}signRequest(e,t){this.getToken(function(r,n){return r?t(r):(e.headers[o.HeaderConstants.AUTHORIZATION]=`${n.tokenType} ${n.accessToken}`,t(null))})}}},function(e,t,r){"use strict";const n=r(8),i=r(79),o=n.Constants,s=r(167),a=r(130);e.exports=class DeviceTokenCredentials{constructor(e){if(e||(e={}),e.username||(e.username="user@example.com"),e.environment||(e.environment=a.Azure),e.domain||(e.domain=s.AAD_COMMON_TENANT),e.clientId||(e.clientId=s.DEFAULT_ADAL_CLIENT_ID),e.authorizationScheme||(e.authorizationScheme=o.HeaderConstants.AUTHORIZATION_SCHEME),e.tokenCache||(e.tokenCache=new i.MemoryCache),e.tokenAudience&&"graph"===e.tokenAudience.toLowerCase()&&"common"===e.domain.toLowerCase())throw new Error("If the tokenAudience is specified as 'graph' then 'domain' cannot be the default 'commmon' tenant. It must be the actual tenant (preferrably a string in a guid format).");this.tokenAudience=e.tokenAudience,this.username=e.username,this.environment=e.environment,this.domain=e.domain,this.clientId=e.clientId,this.authorizationScheme=e.authorizationScheme,this.tokenCache=e.tokenCache;let t=this.environment.activeDirectoryEndpointUrl+this.domain;this.context=new i.AuthenticationContext(t,this.environment.validateAuthority,this.tokenCache)}retrieveTokenFromCache(e){let t=this,r=t.environment.activeDirectoryResourceId;t.tokenAudience&&(r=t.tokenAudience,"graph"===t.tokenAudience.toLowerCase()?r=t.environment.activeDirectoryGraphResourceId:"batch"===t.tokenAudience.toLowerCase()&&(r=t.environment.batchResourceId)),t.context.acquireToken(r,t.username,t.clientId,function(t,r){return t?e(t):e(null,r.tokenType,r.accessToken,r)})}getToken(e){this.retrieveTokenFromCache(function(t,r,n,i){return t?e(t):e(null,i)})}signRequest(e,t){return this.retrieveTokenFromCache(function(r,n,i){return r?t(r):(e.headers[o.HeaderConstants.AUTHORIZATION]=`${n} ${i}`,t(null))})}}},function(e,t,r){"use strict";r(8);const n=r(41),i=r(168);e.exports=class MSIVmTokenCredentials extends i{constructor(e){if(e||(e={}),super(e),e.port){if("number"!=typeof e.port.valueOf())throw new Error("port must be a number.")}else e.port=50342;this.port=e.port}getToken(e){const t=`http://localhost:${this.port}/oauth2/token`,r=this.prepareRequestOptions();n.post(t,r,(t,r,n)=>{if(t)return e(t);try{let t=this.parseTokenResponse(n);if(!t.tokenType)throw new Error(`Invalid token response, did not find tokenType. Response body is: ${n}`);if(!t.accessToken)throw new Error(`Invalid token response, did not find accessToken. Response body is: ${n}`);return e(null,t)}catch(t){return e(t)}})}prepareRequestOptions(){const e=encodeURIComponent(this.resource);encodeURIComponent("/");let t={headers:{},body:""};return t.headers["Content-Type"]="application/x-www-form-urlencoded; charset=UTF-8",t.headers.Metadata="true",t.body=`resource=${e}`,t}}},function(e,t,r){"use strict";r(8);const n=r(41),i=r(168);e.exports=class MSIAppServiceTokenCredentials extends i{constructor(e){if(e||(e={}),super(e),e.msiEndpoint=e.msiEndpoint||process.env.MSI_ENDPOINT,e.msiSecret=e.msiSecret||process.env.MSI_SECRET,!e.msiEndpoint||e.msiEndpoint&&"string"!=typeof e.msiEndpoint.valueOf())throw new Error('Either provide "msiEndpoint" as a property of the "options" object or set the environment variable "MSI_ENDPOINT" and it must be of type "string".');if(!e.msiSecret||e.msiSecret&&"string"!=typeof e.msiSecret.valueOf())throw new Error('Either provide "msiSecret" as a property of the "options" object or set the environment variable "MSI_SECRET" and it must be of type "string".');if(e.msiApiVersion){if("string"!=typeof e.msiApiVersion.valueOf())throw new Error("msiApiVersion must be a uri.")}else e.msiApiVersion="2017-09-01";this.msiEndpoint=e.msiEndpoint,this.msiSecret=e.msiSecret,this.msiApiVersion=e.msiApiVersion}getToken(e){const t=`${this.msiEndpoint.endsWith("/")?this.msiEndpoint:`${this.msiEndpoint}/`}?resource=${this.resource}&api-version=${this.msiApiVersion}`,r=this.prepareRequestOptions();n.get(t,r,(r,n,i)=>{if(r)return e(r);try{if(-1!==i.indexOf("ExceptionMessage"))throw new Error(`MSI: Failed to retrieve a token from "${t}" with an error: ${i}`);let r=this.parseTokenResponse(i);if(!r.tokenType)throw new Error(`Invalid token response, did not find tokenType. Response body is: ${i}`);if(!r.accessToken)throw new Error(`Invalid token response, did not find accessToken. Response body is: ${i}`);return e(null,r)}catch(t){return e(t)}})}prepareRequestOptions(){return{headers:{secret:this.msiSecret}}}}},function(e,t,r){"use strict";var n=r(35);t.generateUuid=function(){return n.v4()},t=e.exports},function(e,t,r){"use strict";var n=this&&this.__awaiter||function(e,t,r,n){return new(r||(r=Promise))(function(i,o){function fulfilled(e){try{step(n.next(e))}catch(e){o(e)}}function rejected(e){try{step(n.throw(e))}catch(e){o(e)}}function step(e){e.done?i(e.value):new r(function(t){t(e.value)}).then(fulfilled,rejected)}step((n=n.apply(e,t||[])).next())})};Object.defineProperty(t,"__esModule",{value:!0});const i=r(10),o=r(68),s=r(18);t.IoTHubMessageBaseExplorer=class IoTHubMessageBaseExplorer extends o.BaseExplorer{constructor(e,t,r){super(e),this._isMonitoring=!1,this._monitorStatusBarItem=i.window.createStatusBarItem(i.StatusBarAlignment.Left,-1),this._monitorStatusBarItem.text=t,this._monitorStatusBarItem.command=r}updateMonitorStatus(e){e?(this._isMonitoring=!0,this._monitorStatusBarItem.show()):(this._isMonitoring=!1,this._monitorStatusBarItem.hide())}stopMonitorEventHubEndpoint(e,t,r,i){return n(this,void 0,void 0,function*(){s.TelemetryClient.sendEvent(t),this._outputChannel.show(),this._isMonitoring?(this.outputLine(e,`Stopping ${i} monitoring...`),this._monitorStatusBarItem.hide(),yield r.close(),this.outputLine(e,`${i.charAt(0).toUpperCase()+i.substr(1)} monitoring stopped.`),this.updateMonitorStatus(!1)):this.outputLine(e,`No ${i} monitor job running.`)})}}},function(e,t,r){"use strict";(function(e){var t=r(445),n=r(1103),i=r(246);e.exports.connect=n,e.exports.MqttClient=t,e.exports.Client=t,e.exports.Store=i,r.c[r.s]===e&&function cli(){var e=r(1109)(),t=r(251)();e.register("publish",r(1134)),e.register("subscribe",r(1140)),e.register("version",function(){console.log("MQTT.js version:",r(1141).version)}),e.register("help",t.toStdout),null!==e.parse(process.argv.slice(2))&&(console.log("No such command:",process.argv[2],"\n"),t.toStdout())}()}).call(this,r(48)(e))},function(e,t,r){"use strict";var n=r(102),i=r(55).Readable,o={objectMode:!0},s={clean:!0},a=r(1050);function Store(e){if(!(this instanceof Store))return new Store(e);this.options=e||{},this.options=n(s,e),this._inflights=new a}Store.prototype.put=function(e,t){return this._inflights.set(e.messageId,e),t&&t(),this},Store.prototype.createStream=function(){var e=new i(o),t=!1,r=[],n=0;return this._inflights.forEach(function(e,t){r.push(e)}),e._read=function(){!t&&n<r.length?this.push(r[n++]):this.push(null)},e.destroy=function(){if(!t){var e=this;t=!0,process.nextTick(function(){e.emit("close")})}},e},Store.prototype.del=function(e,t){return(e=this._inflights.get(e.messageId))?(this._inflights.delete(e.messageId),t(null,e)):t&&t(new Error("missing packet")),this},Store.prototype.get=function(e,t){return(e=this._inflights.get(e.messageId))?t(null,e):t&&t(new Error("missing packet")),this},Store.prototype.close=function(e){this.options.clean&&(this._inflights=null),e&&e()},e.exports=Store},function(e,t,r){"use strict";e.exports=r(1063)()?Object.assign:r(1064)},function(e,t,r){"use strict";var n,i=r(452),o=r(247),s=r(73),a=r(61),c=r(87),u=r(1080),l=r(81),p=Object.defineProperty,d=Object.defineProperties;e.exports=n=function(e,t){if(!(this instanceof n))throw new TypeError("Constructor requires 'new'");d(this,{__list__:c("w",a(e)),__context__:c("w",t),__nextIndex__:c("w",0)}),t&&(s(t.on),t.on("_add",this._onAdd),t.on("_delete",this._onDelete),t.on("_clear",this._onClear))},delete n.prototype.constructor,d(n.prototype,o({_next:c(function(){var e;if(this.__list__)return this.__redo__&&void 0!==(e=this.__redo__.shift())?e:this.__nextIndex__<this.__list__.length?this.__nextIndex__++:void this._unBind()}),next:c(function(){return this._createResult(this._next())}),_createResult:c(function(e){return void 0===e?{done:!0,value:void 0}:{done:!1,value:this._resolve(e)}}),_resolve:c(function(e){return this.__list__[e]}),_unBind:c(function(){this.__list__=null,delete this.__redo__,this.__context__&&(this.__context__.off("_add",this._onAdd),this.__context__.off("_delete",this._onDelete),this.__context__.off("_clear",this._onClear),this.__context__=null)}),toString:c(function(){return"[object "+(this[l.toStringTag]||"Object")+"]"})},u({_onAdd:c(function(e){e>=this.__nextIndex__||(++this.__nextIndex__,this.__redo__?(this.__redo__.forEach(function(t,r){t>=e&&(this.__redo__[r]=++t)},this),this.__redo__.push(e)):p(this,"__redo__",c("c",[e])))}),_onDelete:c(function(e){var t;e>=this.__nextIndex__||(--this.__nextIndex__,this.__redo__&&(-1!==(t=this.__redo__.indexOf(e))&&this.__redo__.splice(t,1),this.__redo__.forEach(function(t,r){t>e&&(this.__redo__[r]=--t)},this)))}),_onClear:c(function(){this.__redo__&&i.call(this.__redo__),this.__nextIndex__=0})}))),p(n.prototype,l.iterator,c(function(){return this}))},function(e,t,r){"use strict";var n=r(59);e.exports=function buildBuilder(e,t){var r;function handleTLSerrors(n){t.rejectUnauthorized&&e.emit("error",n),r.end()}return t.port=t.port||8883,t.host=t.hostname||t.host||"localhost",t.rejectUnauthorized=!1!==t.rejectUnauthorized,delete t.path,(r=n.connect(t)).on("secureConnect",function(){t.rejectUnauthorized&&!r.authorized?r.emit("error",new Error("TLS not authorized")):r.removeListener("error",handleTLSerrors)}),r.on("error",handleTLSerrors),r}},function(e,t,r){"use strict";
/*!
 * ws: a node.js websocket client
 * Copyright(c) 2011 Einar Otto Stangvik <einaros@gmail.com>
 * MIT Licensed
 */const n=r(14).Buffer,i=(e,t)=>{const r=n.allocUnsafe(t);for(var i=0,o=0;o<e.length;o++){const t=e[o];t.copy(r,i),i+=t.length}return r};try{const t=r(367);e.exports=Object.assign({concat:i},t.BufferUtil||t)}catch(t){const r=(e,t,r,n,i)=>{for(var o=0;o<i;o++)r[n+o]=e[o]^t[3&o]},n=(e,t)=>{const r=e.length;for(var n=0;n<r;n++)e[n]^=t[3&n]};e.exports={concat:i,mask:r,unmask:n}}},function(e,t,r){"use strict";var n=r(11),i=r(6),o=r(252),s=r(1111),a=r(1133),c=r(102),u={dir:i.join(i.dirname(r.c[r.s].filename),"doc"),ext:".txt",help:"help"};e.exports=function helpMe(e){if(!(e=c(u,e)).dir)throw new Error("missing directory");return{createStream:createStream,toStdout:function toStdout(e){createStream(e).on("error",function(){console.log("no such help file\n"),toStdout()}).pipe(process.stdout)}};function createStream(t){"string"==typeof t?t=t.split(" "):t&&0!==t.length||(t=[e.help]);var r=o(),i=s([e.dir+"/**/*"+e.ext]),c=new RegExp(t.map(function(e){return e+"[a-zA-Z0-9]*"}).join("[ /]+"));return i.pipe(a({objectMode:!0},function(t,i){return t?r.emit("error",t):0===(i=i.map(function(e){return e.relative=e.path.replace(e.base,"").replace(/^\//,""),e}).filter(function(e){return e.relative.match(c)})).length?r.emit("error",new Error("no such help file")):i.length>1?(r.write("There are "+i.length+" help pages "),r.write("that matches the given request, please disambiguate:\n"),i.forEach(function(t){r.write("  * "),r.write(t.relative.replace(e.ext,"")),r.write("\n")}),void r.end()):void n.createReadStream(i[0].path).on("error",function(e){r.emit("error",e)}).pipe(r)})),r}}},function(e,t,r){var n=r(55).Transform,i=r(1).inherits,o=r(102);function DestroyableTransform(e){n.call(this,e),this._destroyed=!1}function noop(e,t,r){r(null,e)}function through2(e){return function(t,r,n){return"function"==typeof t&&(n=r,r=t,t={}),"function"!=typeof r&&(r=noop),"function"!=typeof n&&(n=null),e(t,r,n)}}i(DestroyableTransform,n),DestroyableTransform.prototype.destroy=function(e){if(!this._destroyed){this._destroyed=!0;var t=this;process.nextTick(function(){e&&t.emit("error",e),t.emit("close")})}},e.exports=through2(function(e,t,r){var n=new DestroyableTransform(e);return n._transform=t,r&&(n._flush=r),n}),e.exports.ctor=through2(function(e,t,r){function Through2(t){if(!(this instanceof Through2))return new Through2(t);this.options=o(e,t),DestroyableTransform.call(this,this.options)}return i(Through2,DestroyableTransform),Through2.prototype._transform=t,r&&(Through2.prototype._flush=r),Through2}),e.exports.obj=through2(function(e,t,r){var n=new DestroyableTransform(o({objectMode:!0,highWaterMark:16},e));return n._transform=t,r&&(n._flush=r),n})},function(e,t,r){"use strict";var n=r(9);t.BaseResource=n.BaseResource,t.CloudError=n.CloudError,t.PolicyDefinition=r(1284),t.PolicyDefinitionListResult=r(492),t.PolicyAssignment=r(1285),t.PolicyAssignmentListResult=r(493),t.PolicyAssignmentListResult=r(493),t.PolicyDefinitionListResult=r(492)},function(e,t,r){"use strict";
/*!
 * Copyright (c) 2015, Salesforce.com, Inc.
 * All rights reserved.
 *
 * Redistribution and use in source and binary forms, with or without
 * modification, are permitted provided that the following conditions are met:
 *
 * 1. Redistributions of source code must retain the above copyright notice,
 * this list of conditions and the following disclaimer.
 *
 * 2. Redistributions in binary form must reproduce the above copyright notice,
 * this list of conditions and the following disclaimer in the documentation
 * and/or other materials provided with the distribution.
 *
 * 3. Neither the name of Salesforce.com nor the names of its contributors may
 * be used to endorse or promote products derived from this software without
 * specific prior written permission.
 *
 * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS IS"
 * AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE
 * IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE
 * ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT HOLDER OR CONTRIBUTORS BE
 * LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR
 * CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF
 * SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS
 * INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN
 * CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE)
 * ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE
 * POSSIBILITY OF SUCH DAMAGE.
 */var n,i=r(47),o=r(7).parse,s=r(1),a=r(299),c=r(301).Store,u=r(657).MemoryCookieStore,l=r(303).pathMatch,p=r(658).version;try{n=r(300)}catch(e){console.warn("tough-cookie: can't load punycode; won't use punycode for domain normalization")}var d=/^[\x21\x23-\x2B\x2D-\x3A\x3C-\x5B\x5D-\x7E]+$/,h=/[\x00-\x1F]/,f=["\n","\r","\0"],m=/[\x20-\x3A\x3C-\x7E]+/,g=/[\x09\x20-\x2F\x3B-\x40\x5B-\x60\x7B-\x7E]/,y={jan:0,feb:1,mar:2,apr:3,may:4,jun:5,jul:6,aug:7,sep:8,oct:9,nov:10,dec:11},v=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],b=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],_=2147483647e3;function parseDigits(e,t,r,n){for(var i=0;i<e.length;){var o=e.charCodeAt(i);if(o<=47||o>=58)break;i++}return i<t||i>r?null:n||i==e.length?parseInt(e.substr(0,i),10):null}function parseTime(e){var t=e.split(":"),r=[0,0,0];if(3!==t.length)return null;for(var n=0;n<3;n++){var i=2==n,o=parseDigits(t[n],1,2,i);if(null===o)return null;r[n]=o}return r}function parseMonth(e){e=String(e).substr(0,3).toLowerCase();var t=y[e];return t>=0?t:null}function parseDate(e){if(e){var t=e.split(g);if(t){for(var r=null,n=null,i=null,o=null,s=null,a=null,c=0;c<t.length;c++){var u,l=t[c].trim();if(l.length)null===i&&(u=parseTime(l))?(r=u[0],n=u[1],i=u[2]):null!==o||null===(u=parseDigits(l,1,2,!0))?null!==s||null===(u=parseMonth(l))?null===a&&null!==(u=parseDigits(l,2,4,!0))&&((a=u)>=70&&a<=99?a+=1900:a>=0&&a<=69&&(a+=2e3)):s=u:o=u}if(!(null===o||null===s||null===a||null===i||o<1||o>31||a<1601||r>23||n>59||i>59))return new Date(Date.UTC(a,s,o,r,n,i))}}}function formatDate(e){var t=e.getUTCDate();t=t>=10?t:"0"+t;var r=e.getUTCHours();r=r>=10?r:"0"+r;var n=e.getUTCMinutes();n=n>=10?n:"0"+n;var i=e.getUTCSeconds();return i=i>=10?i:"0"+i,b[e.getUTCDay()]+", "+t+" "+v[e.getUTCMonth()]+" "+e.getUTCFullYear()+" "+r+":"+n+":"+i+" GMT"}function canonicalDomain(e){return null==e?null:(e=e.trim().replace(/^\./,""),n&&/[^\u0001-\u007f]/.test(e)&&(e=n.toASCII(e)),e.toLowerCase())}function domainMatch(e,t,r){if(null==e||null==t)return null;if(!1!==r&&(e=canonicalDomain(e),t=canonicalDomain(t)),e==t)return!0;if(i.isIP(e))return!1;var n=e.indexOf(t);return!(n<=0)&&(e.length===t.length+n&&"."===e.substr(n-1,1))}function defaultPath(e){if(!e||"/"!==e.substr(0,1))return"/";if("/"===e)return e;var t=e.lastIndexOf("/");return 0===t?"/":e.slice(0,t)}function parseCookiePair(e,t){var r,n,i=(e=function trimTerminator(e){for(var t=0;t<f.length;t++){var r=e.indexOf(f[t]);-1!==r&&(e=e.substr(0,r))}return e}(e)).indexOf("=");if(t)0===i&&(i=(e=e.substr(1)).indexOf("="));else if(i<=0)return;if(i<=0?(r="",n=e.trim()):(r=e.substr(0,i).trim(),n=e.substr(i+1).trim()),!h.test(r)&&!h.test(n)){var o=new Cookie;return o.key=r,o.value=n,o}}function parse(e,t){t&&"object"==typeof t||(t={});var r=(e=e.trim()).indexOf(";"),n=parseCookiePair(-1===r?e:e.substr(0,r),!!t.loose);if(n){if(-1===r)return n;var i=e.slice(r+1).trim();if(0===i.length)return n;for(var o=i.split(";");o.length;){var s=o.shift().trim();if(0!==s.length){var a,c,u=s.indexOf("=");switch(-1===u?(a=s,c=null):(a=s.substr(0,u),c=s.substr(u+1)),a=a.trim().toLowerCase(),c&&(c=c.trim()),a){case"expires":if(c){var l=parseDate(c);l&&(n.expires=l)}break;case"max-age":if(c&&/^-?[0-9]+$/.test(c)){var p=parseInt(c,10);n.setMaxAge(p)}break;case"domain":if(c){var d=c.trim().replace(/^\./,"");d&&(n.domain=d.toLowerCase())}break;case"path":n.path=c&&"/"===c[0]?c:null;break;case"secure":n.secure=!0;break;case"httponly":n.httpOnly=!0;break;default:n.extensions=n.extensions||[],n.extensions.push(s)}}}return n}}function jsonParse(e){var t;try{t=JSON.parse(e)}catch(e){return e}return t}function fromJSON(e){if(!e)return null;var t;if("string"==typeof e){if((t=jsonParse(e))instanceof Error)return null}else t=e;for(var r=new Cookie,n=0;n<Cookie.serializableProperties.length;n++){var i=Cookie.serializableProperties[n];void 0!==t[i]&&t[i]!==Cookie.prototype[i]&&("expires"===i||"creation"===i||"lastAccessed"===i?null===t[i]?r[i]=null:r[i]="Infinity"==t[i]?"Infinity":new Date(t[i]):r[i]=t[i])}return r}function cookieCompare(e,t){var r=0,n=e.path?e.path.length:0;return 0!==(r=(t.path?t.path.length:0)-n)?r:0!==(r=(e.creation?e.creation.getTime():_)-(t.creation?t.creation.getTime():_))?r:r=e.creationIndex-t.creationIndex}function getCookieContext(e){if(e instanceof Object)return e;try{e=decodeURI(e)}catch(e){}return o(e)}function Cookie(e){e=e||{},Object.keys(e).forEach(function(t){Cookie.prototype.hasOwnProperty(t)&&Cookie.prototype[t]!==e[t]&&"_"!==t.substr(0,1)&&(this[t]=e[t])},this),this.creation=this.creation||new Date,Object.defineProperty(this,"creationIndex",{configurable:!1,enumerable:!1,writable:!0,value:++Cookie.cookiesCreated})}function CookieJar(e,t){"boolean"==typeof t?t={rejectPublicSuffixes:t}:null==t&&(t={}),null!=t.rejectPublicSuffixes&&(this.rejectPublicSuffixes=t.rejectPublicSuffixes),null!=t.looseMode&&(this.enableLooseMode=t.looseMode),e||(e=new u),this.store=e}Cookie.cookiesCreated=0,Cookie.parse=parse,Cookie.fromJSON=fromJSON,Cookie.prototype.key="",Cookie.prototype.value="",Cookie.prototype.expires="Infinity",Cookie.prototype.maxAge=null,Cookie.prototype.domain=null,Cookie.prototype.path=null,Cookie.prototype.secure=!1,Cookie.prototype.httpOnly=!1,Cookie.prototype.extensions=null,Cookie.prototype.hostOnly=null,Cookie.prototype.pathIsDefault=null,Cookie.prototype.creation=null,Cookie.prototype.lastAccessed=null,Object.defineProperty(Cookie.prototype,"creationIndex",{configurable:!0,enumerable:!1,writable:!0,value:0}),Cookie.serializableProperties=Object.keys(Cookie.prototype).filter(function(e){return!(Cookie.prototype[e]instanceof Function||"creationIndex"===e||"_"===e.substr(0,1))}),Cookie.prototype.inspect=function inspect(){var e=Date.now();return'Cookie="'+this.toString()+"; hostOnly="+(null!=this.hostOnly?this.hostOnly:"?")+"; aAge="+(this.lastAccessed?e-this.lastAccessed.getTime()+"ms":"?")+"; cAge="+(this.creation?e-this.creation.getTime()+"ms":"?")+'"'},s.inspect.custom&&(Cookie.prototype[s.inspect.custom]=Cookie.prototype.inspect),Cookie.prototype.toJSON=function(){for(var e={},t=Cookie.serializableProperties,r=0;r<t.length;r++){var n=t[r];this[n]!==Cookie.prototype[n]&&("expires"===n||"creation"===n||"lastAccessed"===n?null===this[n]?e[n]=null:e[n]="Infinity"==this[n]?"Infinity":this[n].toISOString():"maxAge"===n?null!==this[n]&&(e[n]=this[n]==1/0||this[n]==-1/0?this[n].toString():this[n]):this[n]!==Cookie.prototype[n]&&(e[n]=this[n]))}return e},Cookie.prototype.clone=function(){return fromJSON(this.toJSON())},Cookie.prototype.validate=function validate(){if(!d.test(this.value))return!1;if(!(this.expires==1/0||this.expires instanceof Date||parseDate(this.expires)))return!1;if(null!=this.maxAge&&this.maxAge<=0)return!1;if(null!=this.path&&!m.test(this.path))return!1;var e=this.cdomain();if(e){if(e.match(/\.$/))return!1;if(null==a.getPublicSuffix(e))return!1}return!0},Cookie.prototype.setExpires=function setExpires(e){e instanceof Date?this.expires=e:this.expires=parseDate(e)||"Infinity"},Cookie.prototype.setMaxAge=function setMaxAge(e){this.maxAge=e===1/0||e===-1/0?e.toString():e},Cookie.prototype.cookieString=function cookieString(){var e=this.value;return null==e&&(e=""),""===this.key?e:this.key+"="+e},Cookie.prototype.toString=function toString(){var e=this.cookieString();return this.expires!=1/0&&(this.expires instanceof Date?e+="; Expires="+formatDate(this.expires):e+="; Expires="+this.expires),null!=this.maxAge&&this.maxAge!=1/0&&(e+="; Max-Age="+this.maxAge),this.domain&&!this.hostOnly&&(e+="; Domain="+this.domain),this.path&&(e+="; Path="+this.path),this.secure&&(e+="; Secure"),this.httpOnly&&(e+="; HttpOnly"),this.extensions&&this.extensions.forEach(function(t){e+="; "+t}),e},Cookie.prototype.TTL=function TTL(e){if(null!=this.maxAge)return this.maxAge<=0?0:1e3*this.maxAge;var t=this.expires;return t!=1/0?(t instanceof Date||(t=parseDate(t)||1/0),t==1/0?1/0:t.getTime()-(e||Date.now())):1/0},Cookie.prototype.expiryTime=function expiryTime(e){if(null!=this.maxAge){var t=e||this.creation||new Date,r=this.maxAge<=0?-1/0:1e3*this.maxAge;return t.getTime()+r}return this.expires==1/0?1/0:this.expires.getTime()},Cookie.prototype.expiryDate=function expiryDate(e){var t=this.expiryTime(e);return t==1/0?new Date(_):t==-1/0?new Date(0):new Date(t)},Cookie.prototype.isPersistent=function isPersistent(){return null!=this.maxAge||this.expires!=1/0},Cookie.prototype.cdomain=Cookie.prototype.canonicalizedDomain=function canonicalizedDomain(){return null==this.domain?null:canonicalDomain(this.domain)},CookieJar.prototype.store=null,CookieJar.prototype.rejectPublicSuffixes=!0,CookieJar.prototype.enableLooseMode=!1;var w=[];w.push("setCookie"),CookieJar.prototype.setCookie=function(e,t,r,n){var i,o=getCookieContext(t);r instanceof Function&&(n=r,r={});var s=canonicalDomain(o.hostname),c=this.enableLooseMode;if(null!=r.loose&&(c=r.loose),e instanceof Cookie||(e=Cookie.parse(e,{loose:c})),!e)return i=new Error("Cookie failed to parse"),n(r.ignoreError?null:i);var u=r.now||new Date;if(this.rejectPublicSuffixes&&e.domain&&null==a.getPublicSuffix(e.cdomain()))return i=new Error("Cookie has domain set to a public suffix"),n(r.ignoreError?null:i);if(e.domain){if(!domainMatch(s,e.cdomain(),!1))return i=new Error("Cookie not in this host's domain. Cookie:"+e.cdomain()+" Request:"+s),n(r.ignoreError?null:i);null==e.hostOnly&&(e.hostOnly=!1)}else e.hostOnly=!0,e.domain=s;if(e.path&&"/"===e.path[0]||(e.path=defaultPath(o.pathname),e.pathIsDefault=!0),!1===r.http&&e.httpOnly)return i=new Error("Cookie is HttpOnly and this isn't an HTTP API"),n(r.ignoreError?null:i);var l=this.store;l.updateCookie||(l.updateCookie=function(e,t,r){this.putCookie(t,r)}),l.findCookie(e.domain,e.path,e.key,function withCookie(t,i){if(t)return n(t);var o=function(t){if(t)return n(t);n(null,e)};if(i){if(!1===r.http&&i.httpOnly)return t=new Error("old Cookie is HttpOnly and this isn't an HTTP API"),n(r.ignoreError?null:t);e.creation=i.creation,e.creationIndex=i.creationIndex,e.lastAccessed=u,l.updateCookie(i,e,o)}else e.creation=e.lastAccessed=u,l.putCookie(e,o)})},w.push("getCookies"),CookieJar.prototype.getCookies=function(e,t,r){var n=getCookieContext(e);t instanceof Function&&(r=t,t={});var i=canonicalDomain(n.hostname),o=n.pathname||"/",s=t.secure;null!=s||!n.protocol||"https:"!=n.protocol&&"wss:"!=n.protocol||(s=!0);var a=t.http;null==a&&(a=!0);var c=t.now||Date.now(),u=!1!==t.expire,p=!!t.allPaths,d=this.store;function matchingCookie(e){if(e.hostOnly){if(e.domain!=i)return!1}else if(!domainMatch(i,e.domain,!1))return!1;return!(!p&&!l(o,e.path))&&(!(e.secure&&!s)&&(!(e.httpOnly&&!a)&&(!(u&&e.expiryTime()<=c)||(d.removeCookie(e.domain,e.path,e.key,function(){}),!1))))}d.findCookies(i,p?null:o,function(e,n){if(e)return r(e);n=n.filter(matchingCookie),!1!==t.sort&&(n=n.sort(cookieCompare));var i=new Date;n.forEach(function(e){e.lastAccessed=i}),r(null,n)})},w.push("getCookieString"),CookieJar.prototype.getCookieString=function(){var e=Array.prototype.slice.call(arguments,0),t=e.pop();e.push(function(e,r){e?t(e):t(null,r.sort(cookieCompare).map(function(e){return e.cookieString()}).join("; "))}),this.getCookies.apply(this,e)},w.push("getSetCookieStrings"),CookieJar.prototype.getSetCookieStrings=function(){var e=Array.prototype.slice.call(arguments,0),t=e.pop();e.push(function(e,r){e?t(e):t(null,r.map(function(e){return e.toString()}))}),this.getCookies.apply(this,e)},w.push("serialize"),CookieJar.prototype.serialize=function(e){var t=this.store.constructor.name;"Object"===t&&(t=null);var r={version:"tough-cookie@"+p,storeType:t,rejectPublicSuffixes:!!this.rejectPublicSuffixes,cookies:[]};if(!this.store.getAllCookies||"function"!=typeof this.store.getAllCookies)return e(new Error("store does not support getAllCookies and cannot be serialized"));this.store.getAllCookies(function(t,n){return t?e(t):(r.cookies=n.map(function(e){return delete(e=e instanceof Cookie?e.toJSON():e).creationIndex,e}),e(null,r))})},CookieJar.prototype.toJSON=function(){return this.serializeSync()},w.push("_importCookies"),CookieJar.prototype._importCookies=function(e,t){var r=this,n=e.cookies;if(!n||!Array.isArray(n))return t(new Error("serialized jar has no cookies array"));n=n.slice(),function putNext(e){if(e)return t(e);if(!n.length)return t(e,r);var i;try{i=fromJSON(n.shift())}catch(e){return t(e)}if(null===i)return putNext(null);r.store.putCookie(i,putNext)}()},CookieJar.deserialize=function(e,t,r){var n;if(3!==arguments.length&&(r=t,t=null),"string"==typeof e){if((n=jsonParse(e))instanceof Error)return r(n)}else n=e;var i=new CookieJar(t,n.rejectPublicSuffixes);i._importCookies(n,function(e){if(e)return r(e);r(null,i)})},CookieJar.deserializeSync=function(e,t){var r="string"==typeof e?JSON.parse(e):e,n=new CookieJar(t,r.rejectPublicSuffixes);if(!n.store.synchronous)throw new Error("CookieJar store is not synchronous; use async API instead.");return n._importCookiesSync(r),n},CookieJar.fromJSON=CookieJar.deserializeSync,w.push("clone"),CookieJar.prototype.clone=function(e,t){1===arguments.length&&(t=e,e=null),this.serialize(function(r,n){if(r)return t(r);CookieJar.deserialize(e,n,t)})},w.forEach(function(e){CookieJar.prototype[e+"Sync"]=function syncWrap(e){return function(){if(!this.store.synchronous)throw new Error("CookieJar store is not synchronous; use async API instead.");var t,r,n=Array.prototype.slice.call(arguments);if(n.push(function syncCb(e,n){t=e,r=n}),this[e].apply(this,n),t)throw t;return r}}(e)}),t.CookieJar=CookieJar,t.Cookie=Cookie,t.Store=c,t.MemoryCookieStore=u,t.parseDate=parseDate,t.formatDate=formatDate,t.parse=parse,t.fromJSON=fromJSON,t.domainMatch=domainMatch,t.defaultPath=defaultPath,t.pathMatch=l,t.getPublicSuffix=a.getPublicSuffix,t.cookieCompare=cookieCompare,t.permuteDomain=r(302).permuteDomain,t.permutePath=function permutePath(e){if("/"===e)return["/"];e.lastIndexOf("/")===e.length-1&&(e=e.substr(0,e.length-1));for(var t=[e];e.length>1;){var r=e.lastIndexOf("/");if(0===r)break;e=e.substr(0,r),t.push(e)}return t.push("/"),t},t.canonicalDomain=canonicalDomain},function(e,t,r){var n=r(311),i=r(1),o=r(6),s=r(23),a=r(21),c=r(7).parse,u=r(11),l=r(310),p=r(683),d=r(687);function FormData(e){if(!(this instanceof FormData))return new FormData;for(var t in this._overheadLength=0,this._valueLength=0,this._valuesToMeasure=[],n.call(this),e=e||{})this[t]=e[t]}e.exports=FormData,i.inherits(FormData,n),FormData.LINE_BREAK="\r\n",FormData.DEFAULT_CONTENT_TYPE="application/octet-stream",FormData.prototype.append=function(e,t,r){"string"==typeof(r=r||{})&&(r={filename:r});var o=n.prototype.append.bind(this);if("number"==typeof t&&(t=""+t),i.isArray(t))this._error(new Error("Arrays are not supported."));else{var s=this._multiPartHeader(e,t,r),a=this._multiPartFooter();o(s),o(t),o(a),this._trackLength(s,t,r)}},FormData.prototype._trackLength=function(e,t,r){var n=0;null!=r.knownLength?n+=+r.knownLength:Buffer.isBuffer(t)?n=t.length:"string"==typeof t&&(n=Buffer.byteLength(t)),this._valueLength+=n,this._overheadLength+=Buffer.byteLength(e)+FormData.LINE_BREAK.length,t&&(t.path||t.readable&&t.hasOwnProperty("httpVersion"))&&(r.knownLength||this._valuesToMeasure.push(t))},FormData.prototype._lengthRetriever=function(e,t){e.hasOwnProperty("fd")?null!=e.end&&e.end!=1/0&&null!=e.start?t(null,e.end+1-(e.start?e.start:0)):u.stat(e.path,function(r,n){var i;r?t(r):(i=n.size-(e.start?e.start:0),t(null,i))}):e.hasOwnProperty("httpVersion")?t(null,+e.headers["content-length"]):e.hasOwnProperty("httpModule")?(e.on("response",function(r){e.pause(),t(null,+r.headers["content-length"])}),e.resume()):t("Unknown stream")},FormData.prototype._multiPartHeader=function(e,t,r){if("string"==typeof r.header)return r.header;var n,i=this._getContentDisposition(t,r),o=this._getContentType(t,r),s="",a={"Content-Disposition":["form-data",'name="'+e+'"'].concat(i||[]),"Content-Type":[].concat(o||[])};for(var c in"object"==typeof r.header&&d(a,r.header),a)a.hasOwnProperty(c)&&null!=(n=a[c])&&(Array.isArray(n)||(n=[n]),n.length&&(s+=c+": "+n.join("; ")+FormData.LINE_BREAK));return"--"+this.getBoundary()+FormData.LINE_BREAK+s+FormData.LINE_BREAK},FormData.prototype._getContentDisposition=function(e,t){var r,n;return"string"==typeof t.filepath?r=o.normalize(t.filepath).replace(/\\/g,"/"):t.filename||e.name||e.path?r=o.basename(t.filename||e.name||e.path):e.readable&&e.hasOwnProperty("httpVersion")&&(r=o.basename(e.client._httpMessage.path)),r&&(n='filename="'+r+'"'),n},FormData.prototype._getContentType=function(e,t){var r=t.contentType;return!r&&e.name&&(r=l.lookup(e.name)),!r&&e.path&&(r=l.lookup(e.path)),!r&&e.readable&&e.hasOwnProperty("httpVersion")&&(r=e.headers["content-type"]),r||!t.filepath&&!t.filename||(r=l.lookup(t.filepath||t.filename)),r||"object"!=typeof e||(r=FormData.DEFAULT_CONTENT_TYPE),r},FormData.prototype._multiPartFooter=function(){return function(e){var t=FormData.LINE_BREAK;0===this._streams.length&&(t+=this._lastBoundary()),e(t)}.bind(this)},FormData.prototype._lastBoundary=function(){return"--"+this.getBoundary()+"--"+FormData.LINE_BREAK},FormData.prototype.getHeaders=function(e){var t,r={"content-type":"multipart/form-data; boundary="+this.getBoundary()};for(t in e)e.hasOwnProperty(t)&&(r[t.toLowerCase()]=e[t]);return r},FormData.prototype.getBoundary=function(){return this._boundary||this._generateBoundary(),this._boundary},FormData.prototype._generateBoundary=function(){for(var e="--------------------------",t=0;t<24;t++)e+=Math.floor(10*Math.random()).toString(16);this._boundary=e},FormData.prototype.getLengthSync=function(){var e=this._overheadLength+this._valueLength;return this._streams.length&&(e+=this._lastBoundary().length),this.hasKnownLength()||this._error(new Error("Cannot calculate proper length in synchronous way.")),e},FormData.prototype.hasKnownLength=function(){var e=!0;return this._valuesToMeasure.length&&(e=!1),e},FormData.prototype.getLength=function(e){var t=this._overheadLength+this._valueLength;this._streams.length&&(t+=this._lastBoundary().length),this._valuesToMeasure.length?p.parallel(this._valuesToMeasure,this._lengthRetriever,function(r,n){r?e(r):(n.forEach(function(e){t+=e}),e(null,t))}):process.nextTick(e.bind(this,null,t))},FormData.prototype.submit=function(e,t){var r,n,i={method:"post"};return"string"==typeof e?(e=c(e),n=d({port:e.port,path:e.pathname,host:e.hostname,protocol:e.protocol},i)):(n=d(e,i)).port||(n.port="https:"==n.protocol?443:80),n.headers=this.getHeaders(e.headers),r="https:"==n.protocol?a.request(n):s.request(n),this.getLength(function(e,n){e?this._error(e):(r.setHeader("Content-Length",n),this.pipe(r),t&&(r.on("error",t),r.on("response",t.bind(this,null))))}.bind(this)),r},FormData.prototype._error=function(e){this.error||(this.error=e,this.pause(),this.emit("error",e))},FormData.prototype.toString=function(){return"[object FormData]"}},function(e,r,n){"use strict";var i;!function(o){function C(e,t,r){var n,i,o,s,a,c,u,l,p,d=0,h=[],f=0,m=!1,g=[],y=[],v=!1,b=!1,_=-1;if(n=(r=r||{}).encoding||"UTF8",(p=r.numRounds||1)!==parseInt(p,10)||1>p)throw Error("numRounds must a integer >= 1");if("SHA-1"===e)a=512,c=K,u=Z,s=160,l=function(e){return e.slice()};else if(0===e.lastIndexOf("SHA-",0))if(c=function(t,r){return L(t,r,e)},u=function(t,r,n,i){var o,s;if("SHA-224"===e||"SHA-256"===e)o=15+(r+65>>>9<<4),s=16;else{if("SHA-384"!==e&&"SHA-512"!==e)throw Error("Unexpected error in SHA-2 implementation");o=31+(r+129>>>10<<5),s=32}for(;t.length<=o;)t.push(0);for(t[r>>>5]|=128<<24-r%32,r+=n,t[o]=4294967295&r,t[o-1]=r/4294967296|0,n=t.length,r=0;r<n;r+=s)i=L(t.slice(r,r+s),i,e);if("SHA-224"===e)t=[i[0],i[1],i[2],i[3],i[4],i[5],i[6]];else if("SHA-256"===e)t=i;else if("SHA-384"===e)t=[i[0].a,i[0].b,i[1].a,i[1].b,i[2].a,i[2].b,i[3].a,i[3].b,i[4].a,i[4].b,i[5].a,i[5].b];else{if("SHA-512"!==e)throw Error("Unexpected error in SHA-2 implementation");t=[i[0].a,i[0].b,i[1].a,i[1].b,i[2].a,i[2].b,i[3].a,i[3].b,i[4].a,i[4].b,i[5].a,i[5].b,i[6].a,i[6].b,i[7].a,i[7].b]}return t},l=function(e){return e.slice()},"SHA-224"===e)a=512,s=224;else if("SHA-256"===e)a=512,s=256;else if("SHA-384"===e)a=1024,s=384;else{if("SHA-512"!==e)throw Error("Chosen SHA variant is not supported");a=1024,s=512}else{if(0!==e.lastIndexOf("SHA3-",0)&&0!==e.lastIndexOf("SHAKE",0))throw Error("Chosen SHA variant is not supported");var w=6;if(c=D,l=function(e){var t,r=[];for(t=0;5>t;t+=1)r[t]=e[t].slice();return r},_=1,"SHA3-224"===e)a=1152,s=224;else if("SHA3-256"===e)a=1088,s=256;else if("SHA3-384"===e)a=832,s=384;else if("SHA3-512"===e)a=576,s=512;else if("SHAKE128"===e)a=1344,s=-1,w=31,b=!0;else{if("SHAKE256"!==e)throw Error("Chosen SHA variant is not supported");a=1088,s=-1,w=31,b=!0}u=function(e,t,r,n,i){var o,s=w,c=[],u=(r=a)>>>5,l=0,p=t>>>5;for(o=0;o<p&&t>=r;o+=u)n=D(e.slice(o,o+u),n),t-=r;for(e=e.slice(o),t%=r;e.length<u;)e.push(0);for(e[(o=t>>>3)>>2]^=s<<o%4*8,e[u-1]^=2147483648,n=D(e,n);32*c.length<i&&(e=n[l%5][l/5|0],c.push(e.b),!(32*c.length>=i));)c.push(e.a),0==64*(l+=1)%r&&D(null,n);return c}}o=M(t,n,_),i=A(e),this.setHMACKey=function(t,r,o){var l;if(!0===m)throw Error("HMAC key already set");if(!0===v)throw Error("Cannot set HMAC key after calling update");if(!0===b)throw Error("SHAKE is not supported for HMAC");if(t=(r=M(r,n=(o||{}).encoding||"UTF8",_)(t)).binLen,r=r.value,o=(l=a>>>3)/4-1,l<t/8){for(r=u(r,t,0,A(e),s);r.length<=o;)r.push(0);r[o]&=4294967040}else if(l>t/8){for(;r.length<=o;)r.push(0);r[o]&=4294967040}for(t=0;t<=o;t+=1)g[t]=909522486^r[t],y[t]=1549556828^r[t];i=c(g,i),d=a,m=!0},this.update=function(e){var t,r,n,s=0,u=a>>>5;for(e=(t=o(e,h,f)).binLen,r=t.value,t=e>>>5,n=0;n<t;n+=u)s+a<=e&&(i=c(r.slice(n,n+u),i),s+=a);d+=s,h=r.slice(s>>>5),f=e%a,v=!0},this.getHash=function(t,r){var n,o,a,c;if(!0===m)throw Error("Cannot call getHash after setting HMAC key");if(a=N(r),!0===b){if(-1===a.shakeLen)throw Error("shakeLen must be specified in options");s=a.shakeLen}switch(t){case"HEX":n=function(e){return O(e,s,_,a)};break;case"B64":n=function(e){return P(e,s,_,a)};break;case"BYTES":n=function(e){return Q(e,s,_)};break;case"ARRAYBUFFER":try{o=new ArrayBuffer(0)}catch(e){throw Error("ARRAYBUFFER not supported by this environment")}n=function(e){return R(e,s,_)};break;default:throw Error("format must be HEX, B64, BYTES, or ARRAYBUFFER")}for(c=u(h.slice(),f,d,l(i),s),o=1;o<p;o+=1)!0===b&&0!=s%32&&(c[c.length-1]&=16777215>>>24-s%32),c=u(c,s,0,A(e),s);return n(c)},this.getHMAC=function(t,r){var n,o,p,g;if(!1===m)throw Error("Cannot call getHMAC without first setting HMAC key");switch(p=N(r),t){case"HEX":n=function(e){return O(e,s,_,p)};break;case"B64":n=function(e){return P(e,s,_,p)};break;case"BYTES":n=function(e){return Q(e,s,_)};break;case"ARRAYBUFFER":try{n=new ArrayBuffer(0)}catch(e){throw Error("ARRAYBUFFER not supported by this environment")}n=function(e){return R(e,s,_)};break;default:throw Error("outputFormat must be HEX, B64, BYTES, or ARRAYBUFFER")}return o=u(h.slice(),f,d,l(i),s),g=c(y,A(e)),n(g=u(o,s,a,g,s))}}function b(e,t){this.a=e,this.b=t}function O(e,t,r,n){var i,o,s,a="";for(t/=8,s=-1===r?3:0,i=0;i<t;i+=1)o=e[i>>>2]>>>8*(s+i%4*r),a+="0123456789abcdef".charAt(o>>>4&15)+"0123456789abcdef".charAt(15&o);return n.outputUpper?a.toUpperCase():a}function P(e,t,r,n){var i,o,s,a,c="",u=t/8;for(a=-1===r?3:0,i=0;i<u;i+=3)for(o=i+1<u?e[i+1>>>2]:0,s=i+2<u?e[i+2>>>2]:0,s=(e[i>>>2]>>>8*(a+i%4*r)&255)<<16|(o>>>8*(a+(i+1)%4*r)&255)<<8|s>>>8*(a+(i+2)%4*r)&255,o=0;4>o;o+=1)c+=8*i+6*o<=t?"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".charAt(s>>>6*(3-o)&63):n.b64Pad;return c}function Q(e,t,r){var n,i,o,s="";for(t/=8,o=-1===r?3:0,n=0;n<t;n+=1)i=e[n>>>2]>>>8*(o+n%4*r)&255,s+=String.fromCharCode(i);return s}function R(e,t,r){t/=8;var n,i,o,s=new ArrayBuffer(t);for(o=new Uint8Array(s),i=-1===r?3:0,n=0;n<t;n+=1)o[n]=e[n>>>2]>>>8*(i+n%4*r)&255;return s}function N(e){var t={outputUpper:!1,b64Pad:"=",shakeLen:-1};if(e=e||{},t.outputUpper=e.outputUpper||!1,!0===e.hasOwnProperty("b64Pad")&&(t.b64Pad=e.b64Pad),!0===e.hasOwnProperty("shakeLen")){if(0!=e.shakeLen%8)throw Error("shakeLen must be a multiple of 8");t.shakeLen=e.shakeLen}if("boolean"!=typeof t.outputUpper)throw Error("Invalid outputUpper formatting option");if("string"!=typeof t.b64Pad)throw Error("Invalid b64Pad formatting option");return t}function M(e,t,r){switch(t){case"UTF8":case"UTF16BE":case"UTF16LE":break;default:throw Error("encoding must be UTF8, UTF16BE, or UTF16LE")}switch(e){case"HEX":e=function(e,t,n){var i,o,s,a,c,u,l=e.length;if(0!=l%2)throw Error("String of HEX type must be in byte increments");for(t=t||[0],c=(n=n||0)>>>3,u=-1===r?3:0,i=0;i<l;i+=2){if(o=parseInt(e.substr(i,2),16),isNaN(o))throw Error("String of HEX type contains invalid characters");for(s=(a=(i>>>1)+c)>>>2;t.length<=s;)t.push(0);t[s]|=o<<8*(u+a%4*r)}return{value:t,binLen:4*l+n}};break;case"TEXT":e=function(e,n,i){var o,s,a,c,u,l,p,d,h=0;if(n=n||[0],u=(i=i||0)>>>3,"UTF8"===t)for(d=-1===r?3:0,a=0;a<e.length;a+=1)for(s=[],128>(o=e.charCodeAt(a))?s.push(o):2048>o?(s.push(192|o>>>6),s.push(128|63&o)):55296>o||57344<=o?s.push(224|o>>>12,128|o>>>6&63,128|63&o):(a+=1,o=65536+((1023&o)<<10|1023&e.charCodeAt(a)),s.push(240|o>>>18,128|o>>>12&63,128|o>>>6&63,128|63&o)),c=0;c<s.length;c+=1){for(l=(p=h+u)>>>2;n.length<=l;)n.push(0);n[l]|=s[c]<<8*(d+p%4*r),h+=1}else if("UTF16BE"===t||"UTF16LE"===t)for(d=-1===r?2:0,s="UTF16LE"===t&&1!==r||"UTF16LE"!==t&&1===r,a=0;a<e.length;a+=1){for(o=e.charCodeAt(a),!0===s&&(o=(c=255&o)<<8|o>>>8),l=(p=h+u)>>>2;n.length<=l;)n.push(0);n[l]|=o<<8*(d+p%4*r),h+=2}return{value:n,binLen:8*h+i}};break;case"B64":e=function(e,t,n){var i,o,s,a,c,u,l,p,d=0;if(-1===e.search(/^[a-zA-Z0-9=+\/]+$/))throw Error("Invalid character in base-64 string");if(o=e.indexOf("="),e=e.replace(/\=/g,""),-1!==o&&o<e.length)throw Error("Invalid '=' found in base-64 string");for(t=t||[0],u=(n=n||0)>>>3,p=-1===r?3:0,o=0;o<e.length;o+=4){for(c=e.substr(o,4),s=a=0;s<c.length;s+=1)a|=(i="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".indexOf(c[s]))<<18-6*s;for(s=0;s<c.length-1;s+=1){for(i=(l=d+u)>>>2;t.length<=i;)t.push(0);t[i]|=(a>>>16-8*s&255)<<8*(p+l%4*r),d+=1}}return{value:t,binLen:8*d+n}};break;case"BYTES":e=function(e,t,n){var i,o,s,a,c,u;for(t=t||[0],s=(n=n||0)>>>3,u=-1===r?3:0,o=0;o<e.length;o+=1)i=e.charCodeAt(o),a=(c=o+s)>>>2,t.length<=a&&t.push(0),t[a]|=i<<8*(u+c%4*r);return{value:t,binLen:8*e.length+n}};break;case"ARRAYBUFFER":try{e=new ArrayBuffer(0)}catch(e){throw Error("ARRAYBUFFER not supported by this environment")}e=function(e,t,n){var i,o,s,a,c,u;for(t=t||[0],o=(n=n||0)>>>3,c=-1===r?3:0,u=new Uint8Array(e),i=0;i<e.byteLength;i+=1)s=(a=i+o)>>>2,t.length<=s&&t.push(0),t[s]|=u[i]<<8*(c+a%4*r);return{value:t,binLen:8*e.byteLength+n}};break;default:throw Error("format must be HEX, TEXT, B64, BYTES, or ARRAYBUFFER")}return e}function y(e,t){return e<<t|e>>>32-t}function S(e,t){return 32<t?(t-=32,new b(e.b<<t|e.a>>>32-t,e.a<<t|e.b>>>32-t)):0!==t?new b(e.a<<t|e.b>>>32-t,e.b<<t|e.a>>>32-t):e}function w(e,t){return e>>>t|e<<32-t}function t(e,t){var r=null;r=new b(e.a,e.b);return 32>=t?new b(r.a>>>t|r.b<<32-t&4294967295,r.b>>>t|r.a<<32-t&4294967295):new b(r.b>>>t-32|r.a<<64-t&4294967295,r.a>>>t-32|r.b<<64-t&4294967295)}function T(e,t){return 32>=t?new b(e.a>>>t,e.b>>>t|e.a<<32-t&4294967295):new b(0,e.a>>>t-32)}function aa(e,t,r){return e&t^~e&r}function ba(e,t,r){return new b(e.a&t.a^~e.a&r.a,e.b&t.b^~e.b&r.b)}function U(e,t,r){return e&t^e&r^t&r}function ca(e,t,r){return new b(e.a&t.a^e.a&r.a^t.a&r.a,e.b&t.b^e.b&r.b^t.b&r.b)}function da(e){return w(e,2)^w(e,13)^w(e,22)}function ea(e){var r=t(e,28),n=t(e,34);return e=t(e,39),new b(r.a^n.a^e.a,r.b^n.b^e.b)}function fa(e){return w(e,6)^w(e,11)^w(e,25)}function ga(e){var r=t(e,14),n=t(e,18);return e=t(e,41),new b(r.a^n.a^e.a,r.b^n.b^e.b)}function ha(e){return w(e,7)^w(e,18)^e>>>3}function ia(e){var r=t(e,1),n=t(e,8);return e=T(e,7),new b(r.a^n.a^e.a,r.b^n.b^e.b)}function ja(e){return w(e,17)^w(e,19)^e>>>10}function ka(e){var r=t(e,19),n=t(e,61);return e=T(e,6),new b(r.a^n.a^e.a,r.b^n.b^e.b)}function G(e,t){var r=(65535&e)+(65535&t);return((e>>>16)+(t>>>16)+(r>>>16)&65535)<<16|65535&r}function la(e,t,r,n){var i=(65535&e)+(65535&t)+(65535&r)+(65535&n);return((e>>>16)+(t>>>16)+(r>>>16)+(n>>>16)+(i>>>16)&65535)<<16|65535&i}function H(e,t,r,n,i){var o=(65535&e)+(65535&t)+(65535&r)+(65535&n)+(65535&i);return((e>>>16)+(t>>>16)+(r>>>16)+(n>>>16)+(i>>>16)+(o>>>16)&65535)<<16|65535&o}function ma(e,t){var r,n,i;return r=(65535&e.b)+(65535&t.b),i=(65535&(n=(e.b>>>16)+(t.b>>>16)+(r>>>16)))<<16|65535&r,r=(65535&e.a)+(65535&t.a)+(n>>>16),new b((65535&(n=(e.a>>>16)+(t.a>>>16)+(r>>>16)))<<16|65535&r,i)}function na(e,t,r,n){var i,o,s;return i=(65535&e.b)+(65535&t.b)+(65535&r.b)+(65535&n.b),s=(65535&(o=(e.b>>>16)+(t.b>>>16)+(r.b>>>16)+(n.b>>>16)+(i>>>16)))<<16|65535&i,i=(65535&e.a)+(65535&t.a)+(65535&r.a)+(65535&n.a)+(o>>>16),new b((65535&(o=(e.a>>>16)+(t.a>>>16)+(r.a>>>16)+(n.a>>>16)+(i>>>16)))<<16|65535&i,s)}function oa(e,t,r,n,i){var o,s,a;return o=(65535&e.b)+(65535&t.b)+(65535&r.b)+(65535&n.b)+(65535&i.b),a=(65535&(s=(e.b>>>16)+(t.b>>>16)+(r.b>>>16)+(n.b>>>16)+(i.b>>>16)+(o>>>16)))<<16|65535&o,o=(65535&e.a)+(65535&t.a)+(65535&r.a)+(65535&n.a)+(65535&i.a)+(s>>>16),new b((65535&(s=(e.a>>>16)+(t.a>>>16)+(r.a>>>16)+(n.a>>>16)+(i.a>>>16)+(o>>>16)))<<16|65535&o,a)}function B(e,t){return new b(e.a^t.a,e.b^t.b)}function A(e){var t,r=[];if("SHA-1"===e)r=[1732584193,4023233417,2562383102,271733878,3285377520];else if(0===e.lastIndexOf("SHA-",0))switch(r=[3238371032,914150663,812702999,4144912697,4290775857,1750603025,1694076839,3204075428],t=[1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225],e){case"SHA-224":break;case"SHA-256":r=t;break;case"SHA-384":r=[new b(3418070365,r[0]),new b(1654270250,r[1]),new b(2438529370,r[2]),new b(355462360,r[3]),new b(1731405415,r[4]),new b(41048885895,r[5]),new b(3675008525,r[6]),new b(1203062813,r[7])];break;case"SHA-512":r=[new b(t[0],4089235720),new b(t[1],2227873595),new b(t[2],4271175723),new b(t[3],1595750129),new b(t[4],2917565137),new b(t[5],725511199),new b(t[6],4215389547),new b(t[7],327033209)];break;default:throw Error("Unknown SHA variant")}else{if(0!==e.lastIndexOf("SHA3-",0)&&0!==e.lastIndexOf("SHAKE",0))throw Error("No SHA variants supported");for(e=0;5>e;e+=1)r[e]=[new b(0,0),new b(0,0),new b(0,0),new b(0,0),new b(0,0)]}return r}function K(e,t){var r,n,i,o,s,a,c,u=[];for(r=t[0],n=t[1],i=t[2],o=t[3],s=t[4],c=0;80>c;c+=1)u[c]=16>c?e[c]:y(u[c-3]^u[c-8]^u[c-14]^u[c-16],1),a=20>c?H(y(r,5),n&i^~n&o,s,1518500249,u[c]):40>c?H(y(r,5),n^i^o,s,1859775393,u[c]):60>c?H(y(r,5),U(n,i,o),s,2400959708,u[c]):H(y(r,5),n^i^o,s,3395469782,u[c]),s=o,o=i,i=y(n,30),n=r,r=a;return t[0]=G(r,t[0]),t[1]=G(n,t[1]),t[2]=G(i,t[2]),t[3]=G(o,t[3]),t[4]=G(s,t[4]),t}function Z(e,t,r,n){var i;for(i=15+(t+65>>>9<<4);e.length<=i;)e.push(0);for(e[t>>>5]|=128<<24-t%32,t+=r,e[i]=4294967295&t,e[i-1]=t/4294967296|0,t=e.length,i=0;i<t;i+=16)n=K(e.slice(i,i+16),n);return n}function L(e,t,r){var n,i,o,c,u,l,p,d,h,f,m,g,y,v,_,w,E,S,C,x,k,R,T,O=[];if("SHA-224"===r||"SHA-256"===r)f=64,g=1,R=Number,y=G,v=la,_=H,w=ha,E=ja,S=da,C=fa,k=U,x=aa,T=s;else{if("SHA-384"!==r&&"SHA-512"!==r)throw Error("Unexpected error in SHA-2 implementation");f=80,g=2,R=b,y=ma,v=na,_=oa,w=ia,E=ka,S=ea,C=ga,k=ca,x=ba,T=a}for(r=t[0],n=t[1],i=t[2],o=t[3],c=t[4],u=t[5],l=t[6],p=t[7],m=0;m<f;m+=1)16>m?(h=m*g,d=e.length<=h?0:e[h],h=e.length<=h+1?0:e[h+1],O[m]=new R(d,h)):O[m]=v(E(O[m-2]),O[m-7],w(O[m-15]),O[m-16]),d=_(p,C(c),x(c,u,l),T[m],O[m]),h=y(S(r),k(r,n,i)),p=l,l=u,u=c,c=y(o,d),o=i,i=n,n=r,r=y(d,h);return t[0]=y(r,t[0]),t[1]=y(n,t[1]),t[2]=y(i,t[2]),t[3]=y(o,t[3]),t[4]=y(c,t[4]),t[5]=y(u,t[5]),t[6]=y(l,t[6]),t[7]=y(p,t[7]),t}function D(e,t){var r,n,i,o,s=[],a=[];if(null!==e)for(n=0;n<e.length;n+=2)t[(n>>>1)%5][(n>>>1)/5|0]=B(t[(n>>>1)%5][(n>>>1)/5|0],new b(e[n+1],e[n]));for(r=0;24>r;r+=1){for(o=A("SHA3-"),n=0;5>n;n+=1){i=t[n][0];var l=t[n][1],p=t[n][2],d=t[n][3],h=t[n][4];s[n]=new b(i.a^l.a^p.a^d.a^h.a,i.b^l.b^p.b^d.b^h.b)}for(n=0;5>n;n+=1)a[n]=B(s[(n+4)%5],S(s[(n+1)%5],1));for(n=0;5>n;n+=1)for(i=0;5>i;i+=1)t[n][i]=B(t[n][i],a[n]);for(n=0;5>n;n+=1)for(i=0;5>i;i+=1)o[i][(2*n+3*i)%5]=S(t[n][i],c[n][i]);for(n=0;5>n;n+=1)for(i=0;5>i;i+=1)t[n][i]=B(o[n][i],new b(~o[(n+1)%5][i].a&o[(n+2)%5][i].a,~o[(n+1)%5][i].b&o[(n+2)%5][i].b));t[0][0]=B(t[0][0],u[r])}return t}var s,a,c,u;a=[new b((s=[1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298])[0],3609767458),new b(s[1],602891725),new b(s[2],3964484399),new b(s[3],2173295548),new b(s[4],4081628472),new b(s[5],3053834265),new b(s[6],2937671579),new b(s[7],3664609560),new b(s[8],2734883394),new b(s[9],1164996542),new b(s[10],1323610764),new b(s[11],3590304994),new b(s[12],4068182383),new b(s[13],991336113),new b(s[14],633803317),new b(s[15],3479774868),new b(s[16],2666613458),new b(s[17],944711139),new b(s[18],2341262773),new b(s[19],2007800933),new b(s[20],1495990901),new b(s[21],1856431235),new b(s[22],3175218132),new b(s[23],2198950837),new b(s[24],3999719339),new b(s[25],766784016),new b(s[26],2566594879),new b(s[27],3203337956),new b(s[28],1034457026),new b(s[29],2466948901),new b(s[30],3758326383),new b(s[31],168717936),new b(s[32],1188179964),new b(s[33],1546045734),new b(s[34],1522805485),new b(s[35],2643833823),new b(s[36],2343527390),new b(s[37],1014477480),new b(s[38],1206759142),new b(s[39],344077627),new b(s[40],1290863460),new b(s[41],3158454273),new b(s[42],3505952657),new b(s[43],106217008),new b(s[44],3606008344),new b(s[45],1432725776),new b(s[46],1467031594),new b(s[47],851169720),new b(s[48],3100823752),new b(s[49],1363258195),new b(s[50],3750685593),new b(s[51],3785050280),new b(s[52],3318307427),new b(s[53],3812723403),new b(s[54],2003034995),new b(s[55],3602036899),new b(s[56],1575990012),new b(s[57],1125592928),new b(s[58],2716904306),new b(s[59],442776044),new b(s[60],593698344),new b(s[61],3733110249),new b(s[62],2999351573),new b(s[63],3815920427),new b(3391569614,3928383900),new b(3515267271,566280711),new b(3940187606,3454069534),new b(4118630271,4000239992),new b(116418474,1914138554),new b(174292421,2731055270),new b(289380356,3203993006),new b(460393269,320620315),new b(685471733,587496836),new b(852142971,1086792851),new b(1017036298,365543100),new b(1126000580,2618297676),new b(1288033470,3409855158),new b(1501505948,4234509866),new b(1607167915,987167468),new b(1816402316,1246189591)],u=[new b(0,1),new b(0,32898),new b(2147483648,32906),new b(2147483648,2147516416),new b(0,32907),new b(0,2147483649),new b(2147483648,2147516545),new b(2147483648,32777),new b(0,138),new b(0,136),new b(0,2147516425),new b(0,2147483658),new b(0,2147516555),new b(2147483648,139),new b(2147483648,32905),new b(2147483648,32771),new b(2147483648,32770),new b(2147483648,128),new b(0,32778),new b(2147483648,2147483658),new b(2147483648,2147516545),new b(2147483648,32896),new b(0,2147483649),new b(2147483648,2147516424)],c=[[0,36,3,41,18],[1,44,10,45,2],[62,6,43,15,61],[28,55,25,21,56],[27,20,39,8,14]],void 0===(i=function(){return C}.call(r,n,r,e))||(e.exports=i)}()},function(e,t,r){(function(){"use strict";var e,n,i,o,s={}.hasOwnProperty;n=r(229),e=r(933),i=r(934),o=r(398),t.defaults=n.defaults,t.processors=o,t.ValidationError=function(e){function ValidationError(e){this.message=e}return function(e,t){for(var r in t)s.call(t,r)&&(e[r]=t[r]);function ctor(){this.constructor=e}ctor.prototype=t.prototype,e.prototype=new ctor,e.__super__=t.prototype}(ValidationError,Error),ValidationError}(),t.Builder=e.Builder,t.Parser=i.Parser,t.parseString=i.parseString}).call(this)},function(e,t,r){"use strict";const n=r(37).fromCallback,i=r(27),o=["access","appendFile","chmod","chown","close","copyFile","fchmod","fchown","fdatasync","fstat","fsync","ftruncate","futimes","lchown","lchmod","link","lstat","mkdir","mkdtemp","open","readFile","readdir","readlink","realpath","rename","rmdir","stat","symlink","truncate","unlink","utimes","writeFile"].filter(e=>"function"==typeof i[e]);Object.keys(i).forEach(e=>{"promises"!==e&&(t[e]=i[e])}),o.forEach(e=>{t[e]=n(i[e])}),t.exists=function(e,t){return"function"==typeof t?i.exists(e,t):new Promise(t=>i.exists(e,t))},t.read=function(e,t,r,n,o,s){return"function"==typeof s?i.read(e,t,r,n,o,s):new Promise((s,a)=>{i.read(e,t,r,n,o,(e,t,r)=>{if(e)return a(e);s({bytesRead:t,buffer:r})})})},t.write=function(e,t,...r){return"function"==typeof r[r.length-1]?i.write(e,t,...r):new Promise((n,o)=>{i.write(e,t,...r,(e,t,r)=>{if(e)return o(e);n({bytesWritten:t,buffer:r})})})}},function(e,t,r){"use strict";e.exports={copySync:r(506)}},function(e,t,r){"use strict";const n=r(6);function getRootPath(e){return(e=n.normalize(n.resolve(e)).split(n.sep)).length>0?e[0]:null}const i=/[<>:"|?*]/;e.exports={getRootPath:getRootPath,invalidWin32Path:function invalidWin32Path(e){const t=getRootPath(e);return e=e.replace(t,""),i.test(e)}}},function(e,t,r){"use strict";const n=r(27),i=r(17),o=r(6);e.exports={hasMillisRes:function hasMillisRes(e){let t=o.join("millis-test"+Date.now().toString()+Math.random().toString().slice(2));t=o.join(i.tmpdir(),t);const r=new Date(1435410243862);n.writeFile(t,"https://github.com/jprichardson/node-fs-extra/pull/141",i=>{if(i)return e(i);n.open(t,"r+",(i,o)=>{if(i)return e(i);n.futimes(o,r,r,r=>{if(r)return e(r);n.close(o,r=>{if(r)return e(r);n.stat(t,(t,r)=>{if(t)return e(t);e(null,r.mtime>1435410243e3)})})})})})},hasMillisResSync:function hasMillisResSync(){let e=o.join("millis-test-sync"+Date.now().toString()+Math.random().toString().slice(2));e=o.join(i.tmpdir(),e);const t=new Date(1435410243862);n.writeFileSync(e,"https://github.com/jprichardson/node-fs-extra/pull/141");const r=n.openSync(e,"r+");return n.futimesSync(r,t,t),n.closeSync(r),n.statSync(e).mtime>1435410243e3},timeRemoveMillis:function timeRemoveMillis(e){if("number"==typeof e)return 1e3*Math.floor(e/1e3);if(e instanceof Date)return new Date(1e3*Math.floor(e.getTime()/1e3));throw new Error("fs-extra: timeRemoveMillis() unknown parameter type")},utimesMillis:function utimesMillis(e,t,r,i){n.open(e,"r+",(e,o)=>{if(e)return i(e);n.futimes(o,t,r,e=>{n.close(o,t=>{i&&i(e||t)})})})},utimesMillisSync:function utimesMillisSync(e,t,r){const i=n.openSync(e,"r+");return n.futimesSync(i,t,r),n.closeSync(i)}}},function(e,t,r){"use strict";e.exports=function(e){if("function"==typeof Buffer.allocUnsafe)try{return Buffer.allocUnsafe(e)}catch(t){return new Buffer(e)}return new Buffer(e)}},function(e,t,r){"use strict";const n=r(37).fromCallback;e.exports={copy:n(r(509))}},function(e,t,r){var n=r(531),i={};for(var o in n)n.hasOwnProperty(o)&&(i[n[o]]=o);var s=e.exports={rgb:{channels:3,labels:"rgb"},hsl:{channels:3,labels:"hsl"},hsv:{channels:3,labels:"hsv"},hwb:{channels:3,labels:"hwb"},cmyk:{channels:4,labels:"cmyk"},xyz:{channels:3,labels:"xyz"},lab:{channels:3,labels:"lab"},lch:{channels:3,labels:"lch"},hex:{channels:1,labels:["hex"]},keyword:{channels:1,labels:["keyword"]},ansi16:{channels:1,labels:["ansi16"]},ansi256:{channels:1,labels:["ansi256"]},hcg:{channels:3,labels:["h","c","g"]},apple:{channels:3,labels:["r16","g16","b16"]},gray:{channels:1,labels:["gray"]}};for(var a in s)if(s.hasOwnProperty(a)){if(!("channels"in s[a]))throw new Error("missing channels property: "+a);if(!("labels"in s[a]))throw new Error("missing channel labels property: "+a);if(s[a].labels.length!==s[a].channels)throw new Error("channel and label counts mismatch: "+a);var c=s[a].channels,u=s[a].labels;delete s[a].channels,delete s[a].labels,Object.defineProperty(s[a],"channels",{value:c}),Object.defineProperty(s[a],"labels",{value:u})}s.rgb.hsl=function(e){var t,r,n=e[0]/255,i=e[1]/255,o=e[2]/255,s=Math.min(n,i,o),a=Math.max(n,i,o),c=a-s;return a===s?t=0:n===a?t=(i-o)/c:i===a?t=2+(o-n)/c:o===a&&(t=4+(n-i)/c),(t=Math.min(60*t,360))<0&&(t+=360),r=(s+a)/2,[t,100*(a===s?0:r<=.5?c/(a+s):c/(2-a-s)),100*r]},s.rgb.hsv=function(e){var t,r,n,i,o,s=e[0]/255,a=e[1]/255,c=e[2]/255,u=Math.max(s,a,c),l=u-Math.min(s,a,c),p=function(e){return(u-e)/6/l+.5};return 0===l?i=o=0:(o=l/u,t=p(s),r=p(a),n=p(c),s===u?i=n-r:a===u?i=1/3+t-n:c===u&&(i=2/3+r-t),i<0?i+=1:i>1&&(i-=1)),[360*i,100*o,100*u]},s.rgb.hwb=function(e){var t=e[0],r=e[1],n=e[2];return[s.rgb.hsl(e)[0],100*(1/255*Math.min(t,Math.min(r,n))),100*(n=1-1/255*Math.max(t,Math.max(r,n)))]},s.rgb.cmyk=function(e){var t,r=e[0]/255,n=e[1]/255,i=e[2]/255;return[100*((1-r-(t=Math.min(1-r,1-n,1-i)))/(1-t)||0),100*((1-n-t)/(1-t)||0),100*((1-i-t)/(1-t)||0),100*t]},s.rgb.keyword=function(e){var t=i[e];if(t)return t;var r,o,s,a=1/0;for(var c in n)if(n.hasOwnProperty(c)){var u=n[c],l=(o=e,s=u,Math.pow(o[0]-s[0],2)+Math.pow(o[1]-s[1],2)+Math.pow(o[2]-s[2],2));l<a&&(a=l,r=c)}return r},s.keyword.rgb=function(e){return n[e]},s.rgb.xyz=function(e){var t=e[0]/255,r=e[1]/255,n=e[2]/255;return[100*(.4124*(t=t>.04045?Math.pow((t+.055)/1.055,2.4):t/12.92)+.3576*(r=r>.04045?Math.pow((r+.055)/1.055,2.4):r/12.92)+.1805*(n=n>.04045?Math.pow((n+.055)/1.055,2.4):n/12.92)),100*(.2126*t+.7152*r+.0722*n),100*(.0193*t+.1192*r+.9505*n)]},s.rgb.lab=function(e){var t=s.rgb.xyz(e),r=t[0],n=t[1],i=t[2];return n/=100,i/=108.883,r=(r/=95.047)>.008856?Math.pow(r,1/3):7.787*r+16/116,[116*(n=n>.008856?Math.pow(n,1/3):7.787*n+16/116)-16,500*(r-n),200*(n-(i=i>.008856?Math.pow(i,1/3):7.787*i+16/116))]},s.hsl.rgb=function(e){var t,r,n,i,o,s=e[0]/360,a=e[1]/100,c=e[2]/100;if(0===a)return[o=255*c,o,o];t=2*c-(r=c<.5?c*(1+a):c+a-c*a),i=[0,0,0];for(var u=0;u<3;u++)(n=s+1/3*-(u-1))<0&&n++,n>1&&n--,o=6*n<1?t+6*(r-t)*n:2*n<1?r:3*n<2?t+(r-t)*(2/3-n)*6:t,i[u]=255*o;return i},s.hsl.hsv=function(e){var t=e[0],r=e[1]/100,n=e[2]/100,i=r,o=Math.max(n,.01);return r*=(n*=2)<=1?n:2-n,i*=o<=1?o:2-o,[t,100*(0===n?2*i/(o+i):2*r/(n+r)),100*((n+r)/2)]},s.hsv.rgb=function(e){var t=e[0]/60,r=e[1]/100,n=e[2]/100,i=Math.floor(t)%6,o=t-Math.floor(t),s=255*n*(1-r),a=255*n*(1-r*o),c=255*n*(1-r*(1-o));switch(n*=255,i){case 0:return[n,c,s];case 1:return[a,n,s];case 2:return[s,n,c];case 3:return[s,a,n];case 4:return[c,s,n];case 5:return[n,s,a]}},s.hsv.hsl=function(e){var t,r,n,i=e[0],o=e[1]/100,s=e[2]/100,a=Math.max(s,.01);return n=(2-o)*s,r=o*a,[i,100*(r=(r/=(t=(2-o)*a)<=1?t:2-t)||0),100*(n/=2)]},s.hwb.rgb=function(e){var t,r,n,i,o,s,a,c=e[0]/360,u=e[1]/100,l=e[2]/100,p=u+l;switch(p>1&&(u/=p,l/=p),n=6*c-(t=Math.floor(6*c)),0!=(1&t)&&(n=1-n),i=u+n*((r=1-l)-u),t){default:case 6:case 0:o=r,s=i,a=u;break;case 1:o=i,s=r,a=u;break;case 2:o=u,s=r,a=i;break;case 3:o=u,s=i,a=r;break;case 4:o=i,s=u,a=r;break;case 5:o=r,s=u,a=i}return[255*o,255*s,255*a]},s.cmyk.rgb=function(e){var t=e[0]/100,r=e[1]/100,n=e[2]/100,i=e[3]/100;return[255*(1-Math.min(1,t*(1-i)+i)),255*(1-Math.min(1,r*(1-i)+i)),255*(1-Math.min(1,n*(1-i)+i))]},s.xyz.rgb=function(e){var t,r,n,i=e[0]/100,o=e[1]/100,s=e[2]/100;return r=-.9689*i+1.8758*o+.0415*s,n=.0557*i+-.204*o+1.057*s,t=(t=3.2406*i+-1.5372*o+-.4986*s)>.0031308?1.055*Math.pow(t,1/2.4)-.055:12.92*t,r=r>.0031308?1.055*Math.pow(r,1/2.4)-.055:12.92*r,n=n>.0031308?1.055*Math.pow(n,1/2.4)-.055:12.92*n,[255*(t=Math.min(Math.max(0,t),1)),255*(r=Math.min(Math.max(0,r),1)),255*(n=Math.min(Math.max(0,n),1))]},s.xyz.lab=function(e){var t=e[0],r=e[1],n=e[2];return r/=100,n/=108.883,t=(t/=95.047)>.008856?Math.pow(t,1/3):7.787*t+16/116,[116*(r=r>.008856?Math.pow(r,1/3):7.787*r+16/116)-16,500*(t-r),200*(r-(n=n>.008856?Math.pow(n,1/3):7.787*n+16/116))]},s.lab.xyz=function(e){var t,r,n,i=e[0];t=e[1]/500+(r=(i+16)/116),n=r-e[2]/200;var o=Math.pow(r,3),s=Math.pow(t,3),a=Math.pow(n,3);return r=o>.008856?o:(r-16/116)/7.787,t=s>.008856?s:(t-16/116)/7.787,n=a>.008856?a:(n-16/116)/7.787,[t*=95.047,r*=100,n*=108.883]},s.lab.lch=function(e){var t,r=e[0],n=e[1],i=e[2];return(t=360*Math.atan2(i,n)/2/Math.PI)<0&&(t+=360),[r,Math.sqrt(n*n+i*i),t]},s.lch.lab=function(e){var t,r=e[0],n=e[1];return t=e[2]/360*2*Math.PI,[r,n*Math.cos(t),n*Math.sin(t)]},s.rgb.ansi16=function(e){var t=e[0],r=e[1],n=e[2],i=1 in arguments?arguments[1]:s.rgb.hsv(e)[2];if(0===(i=Math.round(i/50)))return 30;var o=30+(Math.round(n/255)<<2|Math.round(r/255)<<1|Math.round(t/255));return 2===i&&(o+=60),o},s.hsv.ansi16=function(e){return s.rgb.ansi16(s.hsv.rgb(e),e[2])},s.rgb.ansi256=function(e){var t=e[0],r=e[1],n=e[2];return t===r&&r===n?t<8?16:t>248?231:Math.round((t-8)/247*24)+232:16+36*Math.round(t/255*5)+6*Math.round(r/255*5)+Math.round(n/255*5)},s.ansi16.rgb=function(e){var t=e%10;if(0===t||7===t)return e>50&&(t+=3.5),[t=t/10.5*255,t,t];var r=.5*(1+~~(e>50));return[(1&t)*r*255,(t>>1&1)*r*255,(t>>2&1)*r*255]},s.ansi256.rgb=function(e){if(e>=232){var t=10*(e-232)+8;return[t,t,t]}var r;return e-=16,[Math.floor(e/36)/5*255,Math.floor((r=e%36)/6)/5*255,r%6/5*255]},s.rgb.hex=function(e){var t=(((255&Math.round(e[0]))<<16)+((255&Math.round(e[1]))<<8)+(255&Math.round(e[2]))).toString(16).toUpperCase();return"000000".substring(t.length)+t},s.hex.rgb=function(e){var t=e.toString(16).match(/[a-f0-9]{6}|[a-f0-9]{3}/i);if(!t)return[0,0,0];var r=t[0];3===t[0].length&&(r=r.split("").map(function(e){return e+e}).join(""));var n=parseInt(r,16);return[n>>16&255,n>>8&255,255&n]},s.rgb.hcg=function(e){var t,r=e[0]/255,n=e[1]/255,i=e[2]/255,o=Math.max(Math.max(r,n),i),s=Math.min(Math.min(r,n),i),a=o-s;return t=a<=0?0:o===r?(n-i)/a%6:o===n?2+(i-r)/a:4+(r-n)/a+4,t/=6,[360*(t%=1),100*a,100*(a<1?s/(1-a):0)]},s.hsl.hcg=function(e){var t=e[1]/100,r=e[2]/100,n=1,i=0;return(n=r<.5?2*t*r:2*t*(1-r))<1&&(i=(r-.5*n)/(1-n)),[e[0],100*n,100*i]},s.hsv.hcg=function(e){var t=e[1]/100,r=e[2]/100,n=t*r,i=0;return n<1&&(i=(r-n)/(1-n)),[e[0],100*n,100*i]},s.hcg.rgb=function(e){var t=e[0]/360,r=e[1]/100,n=e[2]/100;if(0===r)return[255*n,255*n,255*n];var i,o=[0,0,0],s=t%1*6,a=s%1,c=1-a;switch(Math.floor(s)){case 0:o[0]=1,o[1]=a,o[2]=0;break;case 1:o[0]=c,o[1]=1,o[2]=0;break;case 2:o[0]=0,o[1]=1,o[2]=a;break;case 3:o[0]=0,o[1]=c,o[2]=1;break;case 4:o[0]=a,o[1]=0,o[2]=1;break;default:o[0]=1,o[1]=0,o[2]=c}return i=(1-r)*n,[255*(r*o[0]+i),255*(r*o[1]+i),255*(r*o[2]+i)]},s.hcg.hsv=function(e){var t=e[1]/100,r=t+e[2]/100*(1-t),n=0;return r>0&&(n=t/r),[e[0],100*n,100*r]},s.hcg.hsl=function(e){var t=e[1]/100,r=e[2]/100*(1-t)+.5*t,n=0;return r>0&&r<.5?n=t/(2*r):r>=.5&&r<1&&(n=t/(2*(1-r))),[e[0],100*n,100*r]},s.hcg.hwb=function(e){var t=e[1]/100,r=t+e[2]/100*(1-t);return[e[0],100*(r-t),100*(1-r)]},s.hwb.hcg=function(e){var t=e[1]/100,r=1-e[2]/100,n=r-t,i=0;return n<1&&(i=(r-n)/(1-n)),[e[0],100*n,100*i]},s.apple.rgb=function(e){return[e[0]/65535*255,e[1]/65535*255,e[2]/65535*255]},s.rgb.apple=function(e){return[e[0]/255*65535,e[1]/255*65535,e[2]/255*65535]},s.gray.rgb=function(e){return[e[0]/100*255,e[0]/100*255,e[0]/100*255]},s.gray.hsl=s.gray.hsv=function(e){return[0,0,e[0]]},s.gray.hwb=function(e){return[0,100,e[0]]},s.gray.cmyk=function(e){return[0,0,0,e[0]]},s.gray.lab=function(e){return[e[0],0,0]},s.gray.hex=function(e){var t=255&Math.round(e[0]/100*255),r=((t<<16)+(t<<8)+t).toString(16).toUpperCase();return"000000".substring(r.length)+r},s.rgb.gray=function(e){return[(e[0]+e[1]+e[2])/3/255*100]}},function(e,t,r){e.exports=realpath,realpath.realpath=realpath,realpath.sync=realpathSync,realpath.realpathSync=realpathSync,realpath.monkeypatch=function monkeypatch(){n.realpath=realpath,n.realpathSync=realpathSync},realpath.unmonkeypatch=function unmonkeypatch(){n.realpath=i,n.realpathSync=o};var n=r(11),i=n.realpath,o=n.realpathSync,s=process.version,a=/^v[0-5]\./.test(s),c=r(537);function newError(e){return e&&"realpath"===e.syscall&&("ELOOP"===e.code||"ENOMEM"===e.code||"ENAMETOOLONG"===e.code)}function realpath(e,t,r){if(a)return i(e,t,r);"function"==typeof t&&(r=t,t=null),i(e,t,function(n,i){newError(n)?c.realpath(e,t,r):r(n,i)})}function realpathSync(e,t){if(a)return o(e,t);try{return o(e,t)}catch(r){if(newError(r))return c.realpathSync(e,t);throw r}}},function(e,t,r){function ownProp(e,t){return Object.prototype.hasOwnProperty.call(e,t)}t.alphasort=alphasort,t.alphasorti=alphasorti,t.setopts=function setopts(e,t,r){r||(r={});if(r.matchBase&&-1===t.indexOf("/")){if(r.noglobstar)throw new Error("base matching requires globstar");t="**/"+t}e.silent=!!r.silent,e.pattern=t,e.strict=!1!==r.strict,e.realpath=!!r.realpath,e.realpathCache=r.realpathCache||Object.create(null),e.follow=!!r.follow,e.dot=!!r.dot,e.mark=!!r.mark,e.nodir=!!r.nodir,e.nodir&&(e.mark=!0);e.sync=!!r.sync,e.nounique=!!r.nounique,e.nonull=!!r.nonull,e.nosort=!!r.nosort,e.nocase=!!r.nocase,e.stat=!!r.stat,e.noprocess=!!r.noprocess,e.absolute=!!r.absolute,e.maxLength=r.maxLength||1/0,e.cache=r.cache||Object.create(null),e.statCache=r.statCache||Object.create(null),e.symlinks=r.symlinks||Object.create(null),function setupIgnores(e,t){e.ignore=t.ignore||[],Array.isArray(e.ignore)||(e.ignore=[e.ignore]);e.ignore.length&&(e.ignore=e.ignore.map(ignoreMap))}(e,r),e.changedCwd=!1;var i=process.cwd();ownProp(r,"cwd")?(e.cwd=n.resolve(r.cwd),e.changedCwd=e.cwd!==i):e.cwd=i;e.root=r.root||n.resolve(e.cwd,"/"),e.root=n.resolve(e.root),"win32"===process.platform&&(e.root=e.root.replace(/\\/g,"/"));e.cwdAbs=o(e.cwd)?e.cwd:makeAbs(e,e.cwd),"win32"===process.platform&&(e.cwdAbs=e.cwdAbs.replace(/\\/g,"/"));e.nomount=!!r.nomount,r.nonegate=!0,r.nocomment=!0,e.minimatch=new s(t,r),e.options=e.minimatch.options},t.ownProp=ownProp,t.makeAbs=makeAbs,t.finish=function finish(e){for(var t=e.nounique,r=t?[]:Object.create(null),n=0,i=e.matches.length;n<i;n++){var o=e.matches[n];if(o&&0!==Object.keys(o).length){var s=Object.keys(o);t?r.push.apply(r,s):s.forEach(function(e){r[e]=!0})}else if(e.nonull){var a=e.minimatch.globSet[n];t?r.push(a):r[a]=!0}}t||(r=Object.keys(r));e.nosort||(r=r.sort(e.nocase?alphasorti:alphasort));if(e.mark){for(var n=0;n<r.length;n++)r[n]=e._mark(r[n]);e.nodir&&(r=r.filter(function(t){var r=!/\/$/.test(t),n=e.cache[t]||e.cache[makeAbs(e,t)];return r&&n&&(r="DIR"!==n&&!Array.isArray(n)),r}))}e.ignore.length&&(r=r.filter(function(t){return!isIgnored(e,t)}));e.found=r},t.mark=function mark(e,t){var r=makeAbs(e,t),n=e.cache[r],i=t;if(n){var o="DIR"===n||Array.isArray(n),s="/"===t.slice(-1);if(o&&!s?i+="/":!o&&s&&(i=i.slice(0,-1)),i!==t){var a=makeAbs(e,i);e.statCache[a]=e.statCache[r],e.cache[a]=e.cache[r]}}return i},t.isIgnored=isIgnored,t.childrenIgnored=function childrenIgnored(e,t){return!!e.ignore.length&&e.ignore.some(function(e){return!(!e.gmatcher||!e.gmatcher.match(t))})};var n=r(6),i=r(177),o=r(178),s=i.Minimatch;function alphasorti(e,t){return e.toLowerCase().localeCompare(t.toLowerCase())}function alphasort(e,t){return e.localeCompare(t)}function ignoreMap(e){var t=null;if("/**"===e.slice(-3)){var r=e.replace(/(\/\*\*)+$/,"");t=new s(r,{dot:!0})}return{matcher:new s(e,{dot:!0}),gmatcher:t}}function makeAbs(e,t){var r=t;return r="/"===t.charAt(0)?n.join(e.root,t):o(t)||""===t?t:e.changedCwd?n.resolve(e.cwd,t):n.resolve(t),"win32"===process.platform&&(r=r.replace(/\\/g,"/")),r}function isIgnored(e,t){return!!e.ignore.length&&e.ignore.some(function(e){return e.matcher.match(t)||!(!e.gmatcher||!e.gmatcher.match(t))})}},function(e,t){e.exports=function wrappy(e,t){if(e&&t)return wrappy(e)(t);if("function"!=typeof e)throw new TypeError("need wrapper function");Object.keys(e).forEach(function(t){wrapper[t]=e[t]});return wrapper;function wrapper(){for(var t=new Array(arguments.length),r=0;r<t.length;r++)t[r]=arguments[r];var n=e.apply(this,t),i=t[t.length-1];return"function"==typeof n&&n!==i&&Object.keys(i).forEach(function(e){n[e]=i[e]}),n}}},function(e,t,r){"use strict";e.exports=function makeReplacements(e,t,r,n){Array.isArray(t)||(t=[t]);const i=Array.isArray(r);return t.forEach((t,o)=>{"function"==typeof t&&(t=t(n));let s=function getReplacement(e,t,r){return t&&void 0===e[r]?null:t?e[r]:e}(r,i,o);if(null!==s){if("function"==typeof s){const e=s;s=((...t)=>e(...t,n))}e=e.replace(t,s)}}),e}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(6),i=r(550),o=r(270),s=Object.keys(process.binding("natives")),a=o.prototype.require;t.makePatchingRequire=function makePatchingRequire(e){var t={};return function patchedRequire(r){var c=a.apply(this,arguments);if(e[r]){var u=o._resolveFilename(r,this);if(t.hasOwnProperty(u))return t[u];var l=void 0;if(s.indexOf(r)<0)try{l=a.call(this,n.join(r,"package.json")).version}catch(e){return c}else l=process.version.substring(1);var p=l.indexOf("-");p>=0&&(l=l.substring(0,p));for(var d=c,h=0,f=e[r];h<f.length;h++){var m=f[h];i.satisfies(l,m.versionSpecifier)&&(d=m.patch(d,u))}return t[u]=d}return c}}},function(e,t){e.exports=require("module")},function(e,t){e.exports=require("timers")},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.AvailabilityData=r(558),t.Base=r(273),t.ContextTagKeys=r(559),t.Data=r(560),t.DataPoint=r(561),t.DataPointType=r(274),t.Domain=r(74),t.Envelope=r(562),t.EventData=r(275),t.ExceptionData=r(563),t.ExceptionDetails=r(564),t.MessageData=r(565),t.MetricData=r(566),t.PageViewData=r(567),t.RemoteDependencyData=r(568),t.RequestData=r(569),t.SeverityLevel=r(570),t.StackFrame=r(571)},function(e,t,r){"use strict";var n=function(){return function Base(){}}();e.exports=n},function(e,t,r){"use strict";var n;!function(e){e[e.Measurement=0]="Measurement",e[e.Aggregation=1]="Aggregation"}(n||(n={})),e.exports=n},function(e,t,r){"use strict";var n,i=this&&this.__extends||(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])},function(e,t){function __(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(__.prototype=t.prototype,new __)}),o=function(e){function EventData(){var t=e.call(this)||this;return t.ver=2,t.properties={},t.measurements={},t}return i(EventData,e),EventData}(r(74));e.exports=o},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(576);if(!process.env.APPLICATION_INSIGHTS_NO_DIAGNOSTIC_CHANNEL){var i=(process.env.APPLICATION_INSIGHTS_NO_PATCH_MODULES||"").split(","),o={bunyan:n.bunyan,console:n.console,mongodb:n.mongodb,mongodbCore:n.mongodbCore,mysql:n.mysql,redis:n.redis,pg:n.pg,pgPool:n.pgPool,winston:n.winston};for(var s in o)-1===i.indexOf(s)&&o[s].enable()}},function(e,t,r){"use strict";var n=r(17),i=r(50),o=function(){function AutoCollectPerformance(e){if(AutoCollectPerformance.INSTANCE)throw new Error("Performance tracking should be configured from the applicationInsights object");AutoCollectPerformance.INSTANCE=this,this._isInitialized=!1,this._client=e}return AutoCollectPerformance.prototype.enable=function(e){var t=this;this._isEnabled=e,this._isEnabled&&!this._isInitialized&&(this._isInitialized=!0),e?this._handle||(this._lastCpus=n.cpus(),this._lastRequests={totalRequestCount:AutoCollectPerformance._totalRequestCount,totalFailedRequestCount:AutoCollectPerformance._totalFailedRequestCount,time:+new Date},this._handle=setInterval(function(){return t.trackPerformance()},6e4),this._handle.unref()):this._handle&&(clearInterval(this._handle),this._handle=void 0)},AutoCollectPerformance.countRequest=function(e,t){var r=this;if(AutoCollectPerformance.isEnabled()){var n=+new Date;e&&t?"function"==typeof t.once&&t.once("finish",function(){var e=+new Date;r._lastRequestExecutionTime=e-n,AutoCollectPerformance._totalRequestCount++,t.statusCode>=400&&AutoCollectPerformance._totalFailedRequestCount++}):i.warn("AutoCollectPerformance.countRequest was called with invalid parameters: ",!!e,!!t)}},AutoCollectPerformance.prototype.isInitialized=function(){return this._isInitialized},AutoCollectPerformance.isEnabled=function(){return AutoCollectPerformance.INSTANCE&&AutoCollectPerformance.INSTANCE._isEnabled},AutoCollectPerformance.prototype.trackPerformance=function(){this._trackCpu(),this._trackMemory(),this._trackNetwork()},AutoCollectPerformance.prototype._trackCpu=function(){var e=n.cpus();if(e&&e.length&&this._lastCpus&&e.length===this._lastCpus.length){for(var t=0,r=0,i=0,o=0,s=0,a=0;e&&a<e.length;a++){var c=e[a],u=this._lastCpus[a],l=(c.model,c.speed,c.times),p=u.times;t+=l.user-p.user||0,r+=l.sys-p.sys||0,i+=l.nice-p.nice||0,o+=l.idle-p.idle||0,s+=l.irq-p.irq||0}var d=t+r+i+o+s||1;this._client.trackMetric({name:"\\Processor(_Total)\\% Processor Time",value:(d-o)/d*100}),this._client.trackMetric({name:"\\Process(??APP_WIN32_PROC??)\\% Processor Time",value:t/d*100})}this._lastCpus=e},AutoCollectPerformance.prototype._trackMemory=function(){var e=n.totalmem(),t=n.freemem(),r=e-t;this._client.trackMetric({name:"\\Process(??APP_WIN32_PROC??)\\Private Bytes",value:r}),this._client.trackMetric({name:"\\Memory\\Available Bytes",value:t})},AutoCollectPerformance.prototype._trackNetwork=function(){var e=this._lastRequests,t={totalRequestCount:AutoCollectPerformance._totalRequestCount,totalFailedRequestCount:AutoCollectPerformance._totalFailedRequestCount,time:+new Date},r=t.totalRequestCount-e.totalRequestCount||0,n=(e.totalFailedRequestCount,t.time-e.time),i=n/1e3;if(n>0){var o=r/i;this._client.trackMetric({name:"\\ASP.NET Applications(??APP_W3SVC_PROC??)\\Requests/Sec",value:o}),this._client.trackMetric({name:"\\ASP.NET Applications(??APP_W3SVC_PROC??)\\Request Execution Time",value:AutoCollectPerformance._lastRequestExecutionTime})}this._lastRequests=t},AutoCollectPerformance.prototype.dispose=function(){AutoCollectPerformance.INSTANCE=null,this.enable(!1),this._isInitialized=!1},AutoCollectPerformance._totalRequestCount=0,AutoCollectPerformance._totalFailedRequestCount=0,AutoCollectPerformance._lastRequestExecutionTime=0,AutoCollectPerformance}();e.exports=o},function(e,t,r){"use strict";var n=function(){function RequestParser(){}return RequestParser.prototype.getUrl=function(){return this.url},RequestParser.prototype.RequestParser=function(){this.startTime=+new Date},RequestParser.prototype._setStatus=function(e,t,r){var n=+new Date;if(this.duration=n-this.startTime,this.statusCode=e,t)if(r||(r={}),"string"==typeof t)r.error=t;else if(t instanceof Error)r.error=t.message;else if("object"==typeof t)for(var i in t)r[i]=t[i]&&t[i].toString&&t[i].toString();this.properties=r},RequestParser.prototype._isSuccess=function(){return 0<this.statusCode&&this.statusCode<400},RequestParser}();e.exports=n},function(e,t,r){"use strict";var n=r(23),i=r(21),o=r(50),s=r(83),a=r(111),c=r(595),u=r(110),l=r(277),p=function(){function AutoCollectHttpRequests(e){if(AutoCollectHttpRequests.INSTANCE)throw new Error("Server request tracking should be configured from the applicationInsights object");AutoCollectHttpRequests.INSTANCE=this,this._client=e}return AutoCollectHttpRequests.prototype.enable=function(e){this._isEnabled=e,(this._isAutoCorrelating||this._isEnabled||l.isEnabled())&&!this._isInitialized&&(this.useAutoCorrelation(this._isAutoCorrelating),this._initialize())},AutoCollectHttpRequests.prototype.useAutoCorrelation=function(e){e&&!this._isAutoCorrelating?u.CorrelationContextManager.enable():!e&&this._isAutoCorrelating&&u.CorrelationContextManager.disable(),this._isAutoCorrelating=e},AutoCollectHttpRequests.prototype.isInitialized=function(){return this._isInitialized},AutoCollectHttpRequests.prototype.isAutoCorrelating=function(){return this._isAutoCorrelating},AutoCollectHttpRequests.prototype._generateCorrelationContext=function(e){if(this._isAutoCorrelating)return u.CorrelationContextManager.generateContextObject(e.getOperationId(this._client.context.tags),e.getRequestId(),e.getOperationName(this._client.context.tags),e.getCorrelationContextHeader())},AutoCollectHttpRequests.prototype._initialize=function(){var e=this;this._isInitialized=!0;var t=function(t){if(t){if("function"!=typeof t)throw new Error("onRequest handler must be a function");return function(r,n){var i=new c(r),o=e._generateCorrelationContext(i);u.CorrelationContextManager.runWithContext(o,function(){e._isEnabled&&AutoCollectHttpRequests.trackRequest(e._client,r,n,null,i),l.countRequest(r,n),"function"==typeof t&&t(r,n)})}}},r=function(e){var r=e.addListener.bind(e);e.addListener=function(e,n){switch(e){case"request":case"checkContinue":return r(e,t(n));default:return r(e,n)}},e.on=e.addListener},o=n.createServer;n.createServer=function(e){var n=o(t(e));return r(n),n};var s=i.createServer;i.createServer=function(e,n){var i=s(e,t(n));return r(i),i}},AutoCollectHttpRequests.trackRequestSync=function(e,t,r,n,i,s){if(t&&r&&e){AutoCollectHttpRequests.addResponseCorrelationIdHeader(e,r);var a=u.CorrelationContextManager.getCurrentContext(),l=new c(t,a&&a.operation.parentId);a&&(a.operation.id=l.getOperationId(e.context.tags)||a.operation.id,a.operation.name=l.getOperationName(e.context.tags)||a.operation.name,a.operation.parentId=l.getRequestId()||a.operation.parentId,a.customProperties.addHeaderData(l.getCorrelationContextHeader())),AutoCollectHttpRequests.endRequest(e,l,t,r,n,i,s)}else o.info("AutoCollectHttpRequests.trackRequestSync was called with invalid parameters: ",!t,!r,!e)},AutoCollectHttpRequests.trackRequest=function(e,t,r,n,i){if(t&&r&&e){var a=u.CorrelationContextManager.getCurrentContext(),l=i||new c(t,a&&a.operation.parentId);s.canIncludeCorrelationHeader(e,l.getUrl())&&AutoCollectHttpRequests.addResponseCorrelationIdHeader(e,r),a&&!i&&(a.operation.id=l.getOperationId(e.context.tags)||a.operation.id,a.operation.name=l.getOperationName(e.context.tags)||a.operation.name,a.operation.parentId=l.getOperationParentId(e.context.tags)||a.operation.parentId,a.customProperties.addHeaderData(l.getCorrelationContextHeader())),r.once&&r.once("finish",function(){AutoCollectHttpRequests.endRequest(e,l,t,r,null,n,null)}),t.on&&t.on("error",function(i){AutoCollectHttpRequests.endRequest(e,l,t,r,null,n,i)})}else o.info("AutoCollectHttpRequests.trackRequest was called with invalid parameters: ",!t,!r,!e)},AutoCollectHttpRequests.addResponseCorrelationIdHeader=function(e,t){if(e.config&&e.config.correlationId&&t.getHeader&&t.setHeader&&!t.headersSent){var r=t.getHeader(a.requestContextHeader);if(r){var n=r.split(","),i=a.requestContextSourceKey+"=";n.some(function(e){return e.substring(0,i.length)===i})||t.setHeader(a.requestContextHeader,r+","+a.requestContextSourceKey+"="+e.config.correlationId+","+a.requestContextSourceRoleNameKey+"="+e.context.tags[e.context.keys.cloudRole])}else t.setHeader(a.requestContextHeader,a.requestContextSourceKey+"="+e.config.correlationId+","+a.requestContextSourceRoleNameKey+"="+e.context.tags[e.context.keys.cloudRole])}},AutoCollectHttpRequests.endRequest=function(e,t,r,n,i,o,s){s?t.onError(s,o,i):t.onResponse(n,o,i);var a={"http.ServerRequest":r,"http.ServerResponse":n},c=t.getRequestTelemetry();c.tagOverrides=t.getRequestTags(e.context.tags),c.contextObjects=a,e.trackRequest(c)},AutoCollectHttpRequests.prototype.dispose=function(){AutoCollectHttpRequests.INSTANCE=null,this.enable(!1),this._isInitialized=!1},AutoCollectHttpRequests}();e.exports=p},function(e,t,r){"use strict";
/*! Copyright (c) Microsoft. All rights reserved.
 *! Licensed under the MIT license. See LICENSE file in the project root for full license information.
 */t.createDictionary=function createDictionary(e,t){var r={};return String(e).split(String(t)).forEach(function(e){var t=e.indexOf("=");if(!(t<0)){var n=e.substring(0,t),i=e.substring(t+1);n&&i&&(r[n]=i)}}),r}},function(e,t,r){"use strict";
/*! Copyright (c) Microsoft. All rights reserved.
 *! Licensed under the MIT license. See LICENSE file in the project root for full license information.
 */var n=function(){return function MessageEnqueued(e){this.transportObj=e}}();t.MessageEnqueued=n;var i=function(){return function MessageCompleted(e){this.transportObj=e}}();t.MessageCompleted=i;var o=function(){return function MessageRejected(e){this.transportObj=e}}();t.MessageRejected=o;var s=function(){return function MessageAbandoned(e){this.transportObj=e}}();t.MessageAbandoned=s;var a=function(){return function Connected(e){this.transportObj=e}}();t.Connected=a;var c=function(){return function Disconnected(e,t){this.transportObj=e,this.reason=t}}();t.Disconnected=c;var u=function(){return function TransportConfigured(e){this.transportObj=e}}();t.TransportConfigured=u;var l=function(){return function SharedAccessSignatureUpdated(e){this.needToReconnect=e}}();t.SharedAccessSignatureUpdated=l},function(e,t,r){"use strict";!function(e){e[e.X509=0]="X509",e[e.Token=1]="Token"}(t.AuthenticationType||(t.AuthenticationType={}));t.AuthenticationType},function(e,t){var r=/release ([^ ]+)/,n=/\((.*)\)/;e.exports=function centosCustomLogic(e,t,i){var o=t.match(r);o&&2===o.length&&(e.release=o[1]);var s=t.match(n);s&&2===s.length&&(e.codename=s[1]),i(null,e)}},function(e,t){e.exports=require("child_process")},function(e,t,r){"use strict";e.exports=function setup(e){function selectColor(e){for(var t=0,r=0;r<e.length;r++)t=(t<<5)-t+e.charCodeAt(r),t|=0;return createDebug.colors[Math.abs(t)%createDebug.colors.length]}function createDebug(e){var t;function debug(){if(debug.enabled){for(var e=arguments.length,r=new Array(e),n=0;n<e;n++)r[n]=arguments[n];var i=debug,o=Number(new Date),s=o-(t||o);i.diff=s,i.prev=t,i.curr=o,t=o,r[0]=createDebug.coerce(r[0]),"string"!=typeof r[0]&&r.unshift("%O");var a=0;r[0]=r[0].replace(/%([a-zA-Z%])/g,function(e,t){if("%%"===e)return e;a++;var n=createDebug.formatters[t];if("function"==typeof n){var o=r[a];e=n.call(i,o),r.splice(a,1),a--}return e}),createDebug.formatArgs.call(i,r),(i.log||createDebug.log).apply(i,r)}}return debug.namespace=e,debug.enabled=createDebug.enabled(e),debug.useColors=createDebug.useColors(),debug.color=selectColor(e),debug.destroy=destroy,debug.extend=extend,"function"==typeof createDebug.init&&createDebug.init(debug),createDebug.instances.push(debug),debug}function destroy(){var e=createDebug.instances.indexOf(this);return-1!==e&&(createDebug.instances.splice(e,1),!0)}function extend(e,t){return createDebug(this.namespace+(void 0===t?":":t)+e)}return createDebug.debug=createDebug,createDebug.default=createDebug,createDebug.coerce=function coerce(e){return e instanceof Error?e.stack||e.message:e},createDebug.disable=function disable(){createDebug.enable("")},createDebug.enable=function enable(e){var t;createDebug.save(e),createDebug.names=[],createDebug.skips=[];var r=("string"==typeof e?e:"").split(/[\s,]+/),n=r.length;for(t=0;t<n;t++)r[t]&&("-"===(e=r[t].replace(/\*/g,".*?"))[0]?createDebug.skips.push(new RegExp("^"+e.substr(1)+"$")):createDebug.names.push(new RegExp("^"+e+"$")));for(t=0;t<createDebug.instances.length;t++){var i=createDebug.instances[t];i.enabled=createDebug.enabled(i.namespace)}},createDebug.enabled=function enabled(e){if("*"===e[e.length-1])return!0;var t,r;for(t=0,r=createDebug.skips.length;t<r;t++)if(createDebug.skips[t].test(e))return!1;for(t=0,r=createDebug.names.length;t<r;t++)if(createDebug.names[t].test(e))return!0;return!1},createDebug.humanize=r(631),Object.keys(e).forEach(function(t){createDebug[t]=e[t]}),createDebug.instances=[],createDebug.names=[],createDebug.skips=[],createDebug.formatters={},createDebug.selectColor=selectColor,createDebug.enable(createDebug.load()),createDebug}},function(e,t,r){"use strict";var n,i=this&&this.__extends||(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])},function(e,t){function __(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(__.prototype=t.prototype,new __)});Object.defineProperty(t,"__esModule",{value:!0});var o=r(5),s=r(11),a=r(137)("azure-iot-device:InternalClient"),c=r(4),u=r(4),l=r(138),p=r(184),d=24e4;function safeCallback(e,t,r){e&&e(t,r)}var h=function(e){function InternalClient(t,r){var n=this;if(!t)throw new ReferenceError("transport is '"+t+"'");if((n=e.call(this)||this)._methodsEnabled=!1,r)throw new c.errors.InvalidOperationError("the connectionString parameter of the constructor is not used - users of the SDK should be using the `fromConnectionString` factory method.");return n._transport=t,n._transport.on("error",function(e){a("Transport error: "+e.toString())}),n._methodCallbackMap={},n._disconnectHandler=function(e){a("transport disconnect event: "+(e?e.toString():"no error")),e&&n._retryPolicy.shouldRetry(e)?(n._methodsEnabled&&(n._methodsEnabled=!1,a("re-enabling Methods link"),n._enableMethods(function(e){e&&n.emit("disconnect",new c.results.Disconnected(e))})),n._twin&&n._twin.desiredPropertiesUpdatesEnabled&&(a("re-enabling Twin"),n._twin.enableTwinDesiredPropertiesUpdates(function(e){e&&n.emit("disconnect",new c.results.Disconnected(e))}))):n.emit("disconnect",new c.results.Disconnected(e))},n._transport.on("disconnect",n._disconnectHandler),n._retryPolicy=new u.ExponentialBackOffWithJitter,n._maxOperationTimeout=d,n}return i(InternalClient,e),InternalClient.prototype.updateSharedAccessSignature=function(e,t){var r=this;if(!e)throw new ReferenceError("sharedAccessSignature is falsy");new u.RetryOperation(this._retryPolicy,this._maxOperationTimeout).retry(function(t){r._transport.updateSharedAccessSignature(e,t)},function(e,n){e||r.emit("_sharedAccessSignatureUpdated"),safeCallback(t,e,n)})},InternalClient.prototype.open=function(e){var t=this;return c.callbackToPromise(function(e){new u.RetryOperation(t._retryPolicy,t._maxOperationTimeout).retry(function(e){t._transport.connect(e)},function(t,r){safeCallback(e,t,r)})},e)},InternalClient.prototype.sendEvent=function(e,t){var r=this;return c.callbackToPromise(function(t){new u.RetryOperation(r._retryPolicy,r._maxOperationTimeout).retry(function(t){r._transport.sendEvent(e,t)},function(e,r){safeCallback(t,e,r)})},t)},InternalClient.prototype.sendEventBatch=function(e,t){var r=this;return c.callbackToPromise(function(t){new u.RetryOperation(r._retryPolicy,r._maxOperationTimeout).retry(function(t){r._transport.sendEventBatch(e,t)},function(e,r){safeCallback(t,e,r)})},t)},InternalClient.prototype.close=function(e){var t=this;return c.callbackToPromise(function(e){t._closeTransport(function(t,r){safeCallback(e,t,r)})},e)},InternalClient.prototype.setTransportOptions=function(e,t){var r=this;return c.callbackToPromise(function(t){if(!e)throw new ReferenceError("options cannot be falsy.");if("function"!=typeof r._transport.setOptions)throw new c.errors.NotImplementedError("setOptions does not exist on this transport");var n={http:{receivePolicy:e}};new u.RetryOperation(r._retryPolicy,r._maxOperationTimeout).retry(function(e){r._transport.setOptions(n,e)},function(e){e?safeCallback(t,e):safeCallback(t,null,new c.results.TransportConfigured)})},t)},InternalClient.prototype.setOptions=function(e,t){var r=this;return c.callbackToPromise(function(t){if(!e)throw new ReferenceError("options cannot be falsy.");e.ca?s.readFile(e.ca,"utf8",function(n,i){if(n)r._invokeSetOptions(e,t);else{var o={};for(var s in e)o[s]=e[s];o.ca=i,r._invokeSetOptions(o,t)}}):r._invokeSetOptions(e,t)},t)},InternalClient.prototype.complete=function(e,t){var r=this;return c.callbackToPromise(function(t){if(!e)throw new ReferenceError("message is '"+e+"'");new u.RetryOperation(r._retryPolicy,r._maxOperationTimeout).retry(function(t){r._transport.complete(e,t)},function(e,r){safeCallback(t,e,r)})},t)},InternalClient.prototype.reject=function(e,t){var r=this;return c.callbackToPromise(function(t){if(!e)throw new ReferenceError("message is '"+e+"'");new u.RetryOperation(r._retryPolicy,r._maxOperationTimeout).retry(function(t){r._transport.reject(e,t)},function(e,r){safeCallback(t,e,r)})},t)},InternalClient.prototype.abandon=function(e,t){var r=this;return c.callbackToPromise(function(t){if(!e)throw new ReferenceError("message is '"+e+"'");new u.RetryOperation(r._retryPolicy,r._maxOperationTimeout).retry(function(t){r._transport.abandon(e,t)},function(e,r){safeCallback(t,e,r)})},t)},InternalClient.prototype.getTwin=function(e){var t=this;return c.callbackToPromise(function(e){t._twin||(t._twin=new p.Twin(t._transport,t._retryPolicy,t._maxOperationTimeout)),t._twin.get(e)},e)},InternalClient.prototype.setRetryPolicy=function(e){if(!e)throw new ReferenceError("'policy' cannot be '"+e+"'");if("function"!=typeof e.shouldRetry||"function"!=typeof e.nextRetryTimeout)throw new c.errors.ArgumentError("A policy object must have a maxTimeout property that is a number and a nextRetryTimeout method.");this._retryPolicy=e,this._twin&&this._twin.setRetryPolicy(e)},InternalClient.prototype._onDeviceMethod=function(e,t){var r=this;this._validateDeviceMethodInputs(e,t),this._methodCallbackMap[e]=t,this._addMethodCallback(e,t),this._enableMethods(function(e){e&&r.emit("error",e)})},InternalClient.prototype._invokeSetOptions=function(e,t){var r=this;new u.RetryOperation(this._retryPolicy,this._maxOperationTimeout).retry(function(t){r._transport.setOptions(e,t)},function(e){safeCallback(t,e)})},InternalClient.prototype._validateDeviceMethodInputs=function(e,t){if(!e)throw new ReferenceError("methodName cannot be '"+e+"'");if("string"!=typeof e)throw new TypeError("methodName's type is '"+typeof e+"'. A string was expected.");if(!t)throw new ReferenceError("callback cannot be '"+t+"'");if("function"!=typeof t)throw new TypeError("callback's type is '"+typeof t+"'. A function reference was expected.");if(this._methodCallbackMap[e])throw new Error("A handler for this method has already been registered with the client.")},InternalClient.prototype._addMethodCallback=function(e,t){var r=this;this._transport.onDeviceMethod(e,function(e){var n=new l.DeviceMethodRequest(e.requestId,e.methods.methodName,e.body),i=new l.DeviceMethodResponse(e.requestId,r._transport);t(n,i)})},InternalClient.prototype._enableMethods=function(e){var t=this;this._methodsEnabled?e():new u.RetryOperation(this._retryPolicy,this._maxOperationTimeout).retry(function(e){t._transport.enableMethods(e)},function(r){r||(t._methodsEnabled=!0),e(r)})},InternalClient.prototype._closeTransport=function(e){this._transport.removeListener("disconnect",this._disconnectHandler),this._transport.disconnect(function(t,r){safeCallback(e,t,r)})},InternalClient.sasRenewalInterval=27e5,InternalClient}(o.EventEmitter);t.InternalClient=h},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(23),i=r(21),o=r(4),s=r(288)("azure-iot-http-base.Http"),a=function(){function Http(){}return Http.prototype.buildRequest=function(e,t,r,o,s,a){a||"function"!=typeof s||(a=s,s=void 0);var c=null;s&&this.isHttpRequestOptions(s)&&(c=s,s=void 0);var u=null;s&&this.isX509Options(s)&&(u=s,s=void 0);var l={path:t,method:e,headers:r},p=i.request;c&&c.request&&(p=c.request),"string"==typeof o?(l.host=o,c&&c.port&&(l.port=c.port)):(l.socketPath=o.socketPath,p=n.request),this._options&&this._options.http&&this._options.http.agent&&(l.agent=this._options.http.agent),u&&(l.cert=u.cert,l.key=u.key,l.passphrase=u.passphrase),this._options&&this._options.ca&&(l.ca=this._options.ca);var d=p(l,function(e){var t="";e.on("error",function(e){a(e)}),e.on("data",function(e){t+=e}),e.on("end",function(){var r=e.statusCode>=300?new Error(e.statusMessage):null;a(r,t,e)})});return d.on("error",a),d},Http.prototype.toMessage=function(e,t){var r;if(e.statusCode<300)for(var n in r=new o.Message(t),e.headers)if(-1!==n.search("iothub-"))"iothub-messageid"===n.toLowerCase()?r.messageId=e.headers[n]:"iothub-to"===n.toLowerCase()?r.to=e.headers[n]:"iothub-expiry"===n.toLowerCase()?r.expiryTimeUtc=e.headers[n]:"iothub-correlationid"===n.toLowerCase()?r.correlationId=e.headers[n]:-1!==n.search("iothub-app-")&&r.properties.add(n,e.headers[n]);else if("etag"===n.toLowerCase()){var i=e.headers[n].length;r.lockToken=e.headers[n].substring(1,i-1)}return r},Http.prototype.setOptions=function(e){this._options=e},Http.prototype.isX509Options=function(e){return!!e&&"object"==typeof e&&(e.cert||e.key||e.passphrase||e.certFile||e.keyFile)},Http.prototype.isHttpRequestOptions=function(e){return!!e&&"object"==typeof e&&("number"==typeof e.port||"function"==typeof e.request)},Http.parseErrorBody=function(e){var t=null;try{var r=JSON.parse(e).Message.split(";"),n=r[1],i=r[0].split(":")[1];i&&n&&(t={message:n,code:i})}catch(e){if(e instanceof SyntaxError)s("Could not parse error body: Invalid JSON");else{if(!(e instanceof TypeError))throw e;s("Could not parse error body: Unknown body format")}}return t},Http}();t.Http=a},function(e,t,r){"use strict";"undefined"==typeof process||"renderer"===process.type||!0===process.browser||process.__nwjs?e.exports=r(637):e.exports=r(639)},function(e,t,r){"use strict";e.exports=function setup(e){function selectColor(e){for(var t=0,r=0;r<e.length;r++)t=(t<<5)-t+e.charCodeAt(r),t|=0;return createDebug.colors[Math.abs(t)%createDebug.colors.length]}function createDebug(e){var t;function debug(){if(debug.enabled){for(var e=arguments.length,r=new Array(e),n=0;n<e;n++)r[n]=arguments[n];var i=debug,o=Number(new Date),s=o-(t||o);i.diff=s,i.prev=t,i.curr=o,t=o,r[0]=createDebug.coerce(r[0]),"string"!=typeof r[0]&&r.unshift("%O");var a=0;r[0]=r[0].replace(/%([a-zA-Z%])/g,function(e,t){if("%%"===e)return e;a++;var n=createDebug.formatters[t];if("function"==typeof n){var o=r[a];e=n.call(i,o),r.splice(a,1),a--}return e}),createDebug.formatArgs.call(i,r),(i.log||createDebug.log).apply(i,r)}}return debug.namespace=e,debug.enabled=createDebug.enabled(e),debug.useColors=createDebug.useColors(),debug.color=selectColor(e),debug.destroy=destroy,debug.extend=extend,"function"==typeof createDebug.init&&createDebug.init(debug),createDebug.instances.push(debug),debug}function destroy(){var e=createDebug.instances.indexOf(this);return-1!==e&&(createDebug.instances.splice(e,1),!0)}function extend(e,t){return createDebug(this.namespace+(void 0===t?":":t)+e)}return createDebug.debug=createDebug,createDebug.default=createDebug,createDebug.coerce=function coerce(e){return e instanceof Error?e.stack||e.message:e},createDebug.disable=function disable(){createDebug.enable("")},createDebug.enable=function enable(e){var t;createDebug.save(e),createDebug.names=[],createDebug.skips=[];var r=("string"==typeof e?e:"").split(/[\s,]+/),n=r.length;for(t=0;t<n;t++)r[t]&&("-"===(e=r[t].replace(/\*/g,".*?"))[0]?createDebug.skips.push(new RegExp("^"+e.substr(1)+"$")):createDebug.names.push(new RegExp("^"+e+"$")));for(t=0;t<createDebug.instances.length;t++){var i=createDebug.instances[t];i.enabled=createDebug.enabled(i.namespace)}},createDebug.enabled=function enabled(e){if("*"===e[e.length-1])return!0;var t,r;for(t=0,r=createDebug.skips.length;t<r;t++)if(createDebug.skips[t].test(e))return!1;for(t=0,r=createDebug.names.length;t<r;t++)if(createDebug.names[t].test(e))return!0;return!1},createDebug.humanize=r(638),Object.keys(e).forEach(function(t){createDebug[t]=e[t]}),createDebug.instances=[],createDebug.names=[],createDebug.skips=[],createDebug.formatters={},createDebug.selectColor=selectColor,createDebug.enable(createDebug.load()),createDebug}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(4),i=r(287),o=r(35),s=r(288)("azure-iot-http-base.RestApiClient"),a=function(){function RestApiClient(e,t,r){if(!e)throw new ReferenceError("config cannot be '"+e+"'");if(!e.host)throw new n.errors.ArgumentError("config.host cannot be '"+e.host+"'");if(!t)throw new ReferenceError("userAgent cannot be '"+t+"'");this._config=e,this._userAgent=t,this._http=r||new i.Http}return RestApiClient.prototype.executeApiCall=function(e,t,r,i,a,c,u){if(!e)throw new ReferenceError("method cannot be '"+e+"'");if(!t)throw new ReferenceError("path cannot be '"+t+"'");void 0===u&&"function"==typeof a&&(u=a,c=a=void 0),void 0===u&&"function"==typeof c&&(u=c,c=void 0),"object"==typeof a&&void 0===c&&(c=a,a=void 0);var l,p=r||{};if(this._config.sharedAccessSignature&&(p.Authorization="string"==typeof this._config.sharedAccessSignature?this._config.sharedAccessSignature:this._config.sharedAccessSignature.extend(n.anHourFromNow())),p["Request-Id"]=o.v4(),p["User-Agent"]=this._userAgent,i){if(r["Content-Type"]&&r["Content-Type"].indexOf("application/json")>=0)l="string"==typeof i?i:JSON.stringify(i);else if(r["Content-Type"]&&r["Content-Type"].indexOf("text/plain")>=0){if("string"!=typeof i)throw new TypeError("requestBody must be a string");l=i}var d=Buffer.byteLength(l,"utf8");r["Content-Length"]=d}var h,f=function(r,n,i){if(s(e+" call to "+t+" returned "+(r||"success")),r)u(i?RestApiClient.translateError(n,i):r);else{var o=n?JSON.parse(n):"";u(null,o,i)}};h=this._config.x509?this._http.buildRequest(e,t,p,this._config.host,this._config.x509,f):c?this._http.buildRequest(e,t,p,this._config.host,c,f):this._http.buildRequest(e,t,p,this._config.host,f),a&&h.setTimeout(a),s("sending "+e+" call to "+t),l&&(s("with body "+l),h.write(l)),h.end()},RestApiClient.prototype.updateSharedAccessSignature=function(e){if(!e)throw new ReferenceError("sharedAccessSignature cannot be '"+e+"'");this._config.sharedAccessSignature=e},RestApiClient.prototype.setOptions=function(e){this._http.setOptions(e)},RestApiClient.translateError=function(e,t){var r,o=i.Http.parseErrorBody(e),s=o?o.message:"Error: "+e;switch(t.statusCode){case 400:r=new n.errors.ArgumentError(s);break;case 401:r=new n.errors.UnauthorizedError(s);break;case 403:r=new n.errors.TooManyDevicesError(s);break;case 404:r=o&&"DeviceNotFound"===o.code?new n.errors.DeviceNotFoundError(s):o&&"IotHubNotFound"===o.code?new n.errors.IotHubNotFoundError(s):new Error("Not found");break;case 408:r=new n.errors.DeviceTimeoutError(s);break;case 409:r=new n.errors.DeviceAlreadyExistsError(s);break;case 412:r=new n.errors.InvalidEtagError(s);break;case 429:r=new n.errors.ThrottlingError(s);break;case 500:r=new n.errors.InternalServerError(s);break;case 502:r=new n.errors.BadDeviceResponseError(s);break;case 503:r=new n.errors.ServiceUnavailableError(s);break;case 504:r=new n.errors.GatewayTimeoutError(s);break;default:r=new Error(s)}return r.response=t,r.responseBody=e,r},RestApiClient}();t.RestApiClient=a},function(e,t,r){var n=r(12);e.exports=function nodeRNG(){return n.randomBytes(16)}},function(e,t){for(var r=[],n=0;n<256;++n)r[n]=(n+256).toString(16).substr(1);e.exports=function bytesToUuid(e,t){var n=t||0,i=r;return[i[e[n++]],i[e[n++]],i[e[n++]],i[e[n++]],"-",i[e[n++]],i[e[n++]],"-",i[e[n++]],i[e[n++]],"-",i[e[n++]],i[e[n++]],"-",i[e[n++]],i[e[n++]],i[e[n++]],i[e[n++]],i[e[n++]],i[e[n++]]].join("")}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(4),i=r(4),o=r(183);t.getUserAgentString=function getUserAgentString(e){return i.noErrorCallbackToPromise(function(e){n.getAgentPlatformString(function(t){e(o.name+"/"+o.version+" ("+t+")")})},e)}},function(e,t){(function(){e.exports=function(){function XMLAttribute(e,t,r){if(this.options=e.options,this.stringify=e.stringify,null==t)throw new Error("Missing attribute name of element "+e.name);if(null==r)throw new Error("Missing attribute value for attribute "+t+" of element "+e.name);this.name=this.stringify.attName(t),this.value=this.stringify.attValue(r)}return XMLAttribute.prototype.clone=function(){return Object.create(this)},XMLAttribute.prototype.toString=function(e){return this.options.writer.set(e).attribute(this)},XMLAttribute}()}).call(this)},function(e,t){(function(){var t={}.hasOwnProperty;e.exports=function(){function XMLWriterBase(e){var r,n,i,o,s,a,c,u,l;for(r in e||(e={}),this.pretty=e.pretty||!1,this.allowEmpty=null!=(n=e.allowEmpty)&&n,this.pretty?(this.indent=null!=(i=e.indent)?i:"  ",this.newline=null!=(o=e.newline)?o:"\n",this.offset=null!=(s=e.offset)?s:0,this.dontprettytextnodes=null!=(a=e.dontprettytextnodes)?a:0):(this.indent="",this.newline="",this.offset=0,this.dontprettytextnodes=0),this.spacebeforeslash=null!=(c=e.spacebeforeslash)?c:"",!0===this.spacebeforeslash&&(this.spacebeforeslash=" "),this.newlinedefault=this.newline,this.prettydefault=this.pretty,u=e.writer||{})t.call(u,r)&&(l=u[r],this[r]=l)}return XMLWriterBase.prototype.set=function(e){var r,n,i;for(r in e||(e={}),"pretty"in e&&(this.pretty=e.pretty),"allowEmpty"in e&&(this.allowEmpty=e.allowEmpty),this.pretty?(this.indent="indent"in e?e.indent:"  ",this.newline="newline"in e?e.newline:"\n",this.offset="offset"in e?e.offset:0,this.dontprettytextnodes="dontprettytextnodes"in e?e.dontprettytextnodes:0):(this.indent="",this.newline="",this.offset=0,this.dontprettytextnodes=0),this.spacebeforeslash="spacebeforeslash"in e?e.spacebeforeslash:"",!0===this.spacebeforeslash&&(this.spacebeforeslash=" "),this.newlinedefault=this.newline,this.prettydefault=this.pretty,n=e.writer||{})t.call(n,r)&&(i=n[r],this[r]=i);return this},XMLWriterBase.prototype.space=function(e){var t;return this.pretty&&(t=(e||0)+this.offset+1)>0?new Array(t).join(this.indent):""},XMLWriterBase}()}).call(this)},function(e,t,r){(function(){var e,n,i,o={}.hasOwnProperty,s=function(e,t){for(var r in t)o.call(t,r)&&(e[r]=t[r]);function ctor(){this.constructor=e}return ctor.prototype=t.prototype,e.prototype=new ctor,e.__super__=t.prototype,e},a=function(e,t){return function(){return e.apply(t,arguments)}};i=r(652),e=r(5),n=function(e){return"object"==typeof e&&null!=e&&0===Object.keys(e).length},t.defaults={.1:{explicitCharkey:!1,trim:!0,normalize:!0,normalizeTags:!1,attrkey:"@",charkey:"#",explicitArray:!1,ignoreAttrs:!1,mergeAttrs:!1,explicitRoot:!1,validator:null,xmlns:!1,explicitChildren:!1,childkey:"@@",charsAsChildren:!1,async:!1,strict:!0},.2:{explicitCharkey:!1,trim:!1,normalize:!1,normalizeTags:!1,attrkey:"$",charkey:"_",explicitArray:!0,ignoreAttrs:!1,mergeAttrs:!1,explicitRoot:!0,validator:null,xmlns:!1,explicitChildren:!1,childkey:"$$",charsAsChildren:!1,async:!1,strict:!0}},t.ValidationError=function(e){function ValidationError(e){this.message=e}return s(ValidationError,e),ValidationError}(Error),t.Parser=function(e){function Parser(e){var r,n,i;if(this.parseString=a(this.parseString,this),this.reset=a(this.reset,this),!(this instanceof t.Parser))return new t.Parser(e);for(r in this.options={},i=t.defaults[.2])o.call(i,r)&&(n=i[r],this.options[r]=n);for(r in e)o.call(e,r)&&(n=e[r],this.options[r]=n);this.options.xmlns&&(this.options.xmlnskey=this.options.attrkey+"ns"),this.reset()}return s(Parser,e),Parser.prototype.reset=function(){var e,t,r,s,a,c=this;return this.removeAllListeners(),this.saxParser=i.parser(this.options.strict,{trim:!1,normalize:!1,xmlns:this.options.xmlns}),r=!1,this.saxParser.onerror=function(e){if(!r)return r=!0,c.emit("error",e)},this.EXPLICIT_CHARKEY=this.options.explicitCharkey,this.resultObject=null,a=[],e=this.options.attrkey,t=this.options.charkey,this.saxParser.onopentag=function(r){var n,i,s;if((i={})[t]="",!c.options.ignoreAttrs)for(n in s=r.attributes)o.call(s,n)&&(e in i||c.options.mergeAttrs||(i[e]={}),c.options.mergeAttrs?i[n]=r.attributes[n]:i[e][n]=r.attributes[n]);return i["#name"]=c.options.normalizeTags?r.name.toLowerCase():r.name,c.options.xmlns&&(i[c.options.xmlnskey]={uri:r.uri,local:r.local}),a.push(i)},this.saxParser.onclosetag=function(){var e,i,o,s,u,l,p,d;if(s=(u=a.pop())["#name"],delete u["#name"],e=u.cdata,delete u.cdata,p=a[a.length-1],u[t].match(/^\s*$/)&&!e?(i=u[t],delete u[t]):(c.options.trim&&(u[t]=u[t].trim()),c.options.normalize&&(u[t]=u[t].replace(/\s{2,}/g," ").trim()),1===Object.keys(u).length&&t in u&&!c.EXPLICIT_CHARKEY&&(u=u[t])),n(u)&&(u=void 0!==c.options.emptyTag?c.options.emptyTag:i),null!=c.options.validator){d="/"+function(){var e,t,r;for(r=[],e=0,t=a.length;e<t;e++)o=a[e],r.push(o["#name"]);return r}().concat(s).join("/");try{u=c.options.validator(d,p&&p[s],u)}catch(e){r=e,c.emit("error",r)}}return c.options.explicitChildren&&!c.options.mergeAttrs&&"object"==typeof u&&(o={},c.options.attrkey in u&&(o[c.options.attrkey]=u[c.options.attrkey],delete u[c.options.attrkey]),!c.options.charsAsChildren&&c.options.charkey in u&&(o[c.options.charkey]=u[c.options.charkey],delete u[c.options.charkey]),Object.getOwnPropertyNames(u).length>0&&(o[c.options.childkey]=u),u=o),a.length>0?c.options.explicitArray?(p[s]instanceof Array||(p[s]=[]),p[s].push(u)):s in p?p[s]instanceof Array?p[s].push(u):(l=p[s],p[s]=[l],p[s].push(u)):p[s]=u:(c.options.explicitRoot&&(l=u,(u={})[s]=l),c.resultObject=u,c.emit("end",c.resultObject))},s=function(e){var r;if(r=a[a.length-1])return r[t]+=e,r},this.saxParser.ontext=s,this.saxParser.oncdata=function(e){var t;if(t=s(e))return t.cdata=!0}},Parser.prototype.parseString=function(e,t){return null!=t&&"function"==typeof t&&(this.on("end",function(e){return this.reset(),this.options.async?process.nextTick(function(){return t(null,e)}):t(null,e)}),this.on("error",function(e){return this.reset(),this.options.async?process.nextTick(function(){return t(e)}):t(e)})),""===e.toString().trim()?(this.emit("end",null),!0):this.saxParser.write(e.toString())},Parser}(e.EventEmitter),t.parseString=function(e,r,n){var i,o;return null!=n?("function"==typeof n&&(i=n),"object"==typeof r&&(o=r)):("function"==typeof r&&(i=r),o={}),new t.Parser(o).parseString(e,i)}}).call(this)},function(e,t,r){var n=r(36),i=r(63),o=r(22),s=r(76).ArgumentError,a=o.HeaderConstants,c=o.HttpConstants,u=(c=o.HttpConstants).HttpVerbs;function encodeSpecialCharacters(e){return e.replace(/'/g,"%27")}function WebResource(){this.rawResponse=!1,this.queryString={}}WebResource.put=function(e){var t=new WebResource;return t.path=e?encodeSpecialCharacters(e):null,t.method=c.HttpVerbs.PUT,t},WebResource.get=function(e){var t=new WebResource;return t.path=e?encodeSpecialCharacters(e):null,t.method=c.HttpVerbs.GET,t},WebResource.head=function(e){var t=new WebResource;return t.path=e?encodeSpecialCharacters(e):null,t.method=c.HttpVerbs.HEAD,t},WebResource.del=function(e){var t=new WebResource;return t.path=e?encodeSpecialCharacters(e):null,t.method=c.HttpVerbs.DELETE,t},WebResource.post=function(e){var t=new WebResource;return t.path=e?encodeSpecialCharacters(e):null,t.method=c.HttpVerbs.POST,t},WebResource.merge=function(e){var t=new WebResource;return t.path=e?encodeSpecialCharacters(e):null,t.method=c.HttpVerbs.MERGE,t},WebResource.prototype.withProperty=function(e,t){return this.properties||(this.properties={}),this.properties[e]=t,this},WebResource.prototype.withRawResponse=function(e){return this.rawResponse=e,n.objectIsNull(this.rawResponse)&&(this.rawResponse=!0),this},WebResource.prototype.withHeadersOnly=function(e){return this.headersOnly=void 0===e||e,this},WebResource.prototype.withQueryOption=function(e,t,r){return n.objectIsNull(t)?r&&(this.queryString[e]=r):this.queryString[e]=t,this},WebResource.prototype.withQueryOptions=function(e){if(e)for(var t=1;t<arguments.length;t++)e[arguments[t]]&&this.withQueryOption(arguments[t],e[arguments[t]]);return this},WebResource.prototype.withHeader=function(e,t){return this.headers||(this.headers={}),n.IsNullOrEmptyOrUndefinedOrWhiteSpace(t)||(t=t instanceof Date?t.toUTCString():t,this.headers[e]=t),this},WebResource.prototype.withBody=function(e){return this.body=e,this},WebResource.prototype.withHeaders=function(e){if(e)for(var t=1;t<arguments.length;t++)e[arguments[t]]&&this.withHeader(arguments[t],e[arguments[t]]);return this},WebResource.prototype.addOptionalMetadataHeaders=function(e){var t=this;return e&&Object.keys(e).forEach(function(r){if(n.IsNullOrEmptyOrUndefinedOrWhiteSpace(r))throw new s("metadata",i.METADATA_KEY_INVALID);var o=e[r];if(n.IsNullOrEmptyOrUndefinedOrWhiteSpace(o))throw new s("metadata",i.METADATA_VALUE_INVALID);var c=a.PREFIX_FOR_STORAGE_METADATA+r,u="",l=t.headers?t.headers:{};Object.keys(l).some(function(e){return u=e,e.toString().toLowerCase()===c.toLowerCase()})?t.withHeader(u,t.headers[u]+","+o):t.withHeader(c,o)}),this},WebResource.validResponse=function(e){return e>=200&&e<300},WebResource.prototype.pipeInput=function(e,t){return function isMethodWithBody(e){return e===u.PUT||e===u.POST||e===u.MERGE}(this.method)&&!this.hasOwnProperty("body")&&e.pipe(t),t},e.exports=WebResource},function(e,t,r){"use strict";var n=r(254),i=n.Cookie,o=n.CookieJar;function RequestJar(e){this._jar=new o(e,{looseMode:!0})}t.parse=function(e){if(e&&e.uri&&(e=e.uri),"string"!=typeof e)throw new Error("The cookie function only accepts STRING as param");return i.parse(e,{loose:!0})},RequestJar.prototype.setCookie=function(e,t,r){return this._jar.setCookieSync(e,t,r||{})},RequestJar.prototype.getCookieString=function(e){return this._jar.getCookieStringSync(e)},RequestJar.prototype.getCookies=function(e){return this._jar.getCookiesSync(e)},t.jar=function(e){return new RequestJar(e)}},function(e,t,r){"use strict";
/*!
 * Copyright (c) 2018, Salesforce.com, Inc.
 * All rights reserved.
 *
 * Redistribution and use in source and binary forms, with or without
 * modification, are permitted provided that the following conditions are met:
 *
 * 1. Redistributions of source code must retain the above copyright notice,
 * this list of conditions and the following disclaimer.
 *
 * 2. Redistributions in binary form must reproduce the above copyright notice,
 * this list of conditions and the following disclaimer in the documentation
 * and/or other materials provided with the distribution.
 *
 * 3. Neither the name of Salesforce.com nor the names of its contributors may
 * be used to endorse or promote products derived from this software without
 * specific prior written permission.
 *
 * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS IS"
 * AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE
 * IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE
 * ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT HOLDER OR CONTRIBUTORS BE
 * LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR
 * CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF
 * SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS
 * INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN
 * CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE)
 * ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE
 * POSSIBILITY OF SUCH DAMAGE.
 */var n=r(655);t.getPublicSuffix=function getPublicSuffix(e){return n.get(e)}},function(e,t){e.exports=require("punycode")},function(e,t,r){"use strict";
/*!
 * Copyright (c) 2015, Salesforce.com, Inc.
 * All rights reserved.
 *
 * Redistribution and use in source and binary forms, with or without
 * modification, are permitted provided that the following conditions are met:
 *
 * 1. Redistributions of source code must retain the above copyright notice,
 * this list of conditions and the following disclaimer.
 *
 * 2. Redistributions in binary form must reproduce the above copyright notice,
 * this list of conditions and the following disclaimer in the documentation
 * and/or other materials provided with the distribution.
 *
 * 3. Neither the name of Salesforce.com nor the names of its contributors may
 * be used to endorse or promote products derived from this software without
 * specific prior written permission.
 *
 * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS IS"
 * AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE
 * IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE
 * ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT HOLDER OR CONTRIBUTORS BE
 * LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR
 * CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF
 * SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS
 * INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN
 * CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE)
 * ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE
 * POSSIBILITY OF SUCH DAMAGE.
 */function Store(){}t.Store=Store,Store.prototype.synchronous=!1,Store.prototype.findCookie=function(e,t,r,n){throw new Error("findCookie is not implemented")},Store.prototype.findCookies=function(e,t,r){throw new Error("findCookies is not implemented")},Store.prototype.putCookie=function(e,t){throw new Error("putCookie is not implemented")},Store.prototype.updateCookie=function(e,t,r){throw new Error("updateCookie is not implemented")},Store.prototype.removeCookie=function(e,t,r,n){throw new Error("removeCookie is not implemented")},Store.prototype.removeCookies=function(e,t,r){throw new Error("removeCookies is not implemented")},Store.prototype.getAllCookies=function(e){throw new Error("getAllCookies is not implemented (therefore jar cannot be serialized)")}},function(e,t,r){"use strict";
/*!
 * Copyright (c) 2015, Salesforce.com, Inc.
 * All rights reserved.
 *
 * Redistribution and use in source and binary forms, with or without
 * modification, are permitted provided that the following conditions are met:
 *
 * 1. Redistributions of source code must retain the above copyright notice,
 * this list of conditions and the following disclaimer.
 *
 * 2. Redistributions in binary form must reproduce the above copyright notice,
 * this list of conditions and the following disclaimer in the documentation
 * and/or other materials provided with the distribution.
 *
 * 3. Neither the name of Salesforce.com nor the names of its contributors may
 * be used to endorse or promote products derived from this software without
 * specific prior written permission.
 *
 * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS IS"
 * AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE
 * IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE
 * ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT HOLDER OR CONTRIBUTORS BE
 * LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR
 * CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF
 * SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS
 * INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN
 * CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE)
 * ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE
 * POSSIBILITY OF SUCH DAMAGE.
 */var n=r(299);t.permuteDomain=function permuteDomain(e){var t=n.getPublicSuffix(e);if(!t)return null;if(t==e)return[e];for(var r=e.slice(0,-(t.length+1)).split(".").reverse(),i=t,o=[i];r.length;)i=r.shift()+"."+i,o.push(i);return o}},function(e,t,r){"use strict";
/*!
 * Copyright (c) 2015, Salesforce.com, Inc.
 * All rights reserved.
 *
 * Redistribution and use in source and binary forms, with or without
 * modification, are permitted provided that the following conditions are met:
 *
 * 1. Redistributions of source code must retain the above copyright notice,
 * this list of conditions and the following disclaimer.
 *
 * 2. Redistributions in binary form must reproduce the above copyright notice,
 * this list of conditions and the following disclaimer in the documentation
 * and/or other materials provided with the distribution.
 *
 * 3. Neither the name of Salesforce.com nor the names of its contributors may
 * be used to endorse or promote products derived from this software without
 * specific prior written permission.
 *
 * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS IS"
 * AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE
 * IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE
 * ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT HOLDER OR CONTRIBUTORS BE
 * LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR
 * CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF
 * SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS
 * INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN
 * CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE)
 * ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE
 * POSSIBILITY OF SUCH DAMAGE.
 */t.pathMatch=function pathMatch(e,t){if(t===e)return!0;if(0===e.indexOf(t)){if("/"===t.substr(-1))return!0;if("/"===e.substr(t.length,1))return!0}return!1}},function(e,t,r){e.exports={Verifier:Verifier,Signer:Signer};var n=r(116),i=r(15),o=r(1),s=r(13),a=r(19).Buffer,c=r(65);function Verifier(e,t){if("sha512"!==t.toLowerCase())throw new Error("ED25519 only supports the use of SHA-512 hashes");this.key=e,this.chunks=[],i.Writable.call(this,{})}function Signer(e,t){if("sha512"!==t.toLowerCase())throw new Error("ED25519 only supports the use of SHA-512 hashes");this.key=e,this.chunks=[],i.Writable.call(this,{})}o.inherits(Verifier,i.Writable),Verifier.prototype._write=function(e,t,r){this.chunks.push(e),r()},Verifier.prototype.update=function(e){"string"==typeof e&&(e=a.from(e,"binary")),this.chunks.push(e)},Verifier.prototype.verify=function(e,t){var r;if(c.isSignature(e,[2,0])){if("ed25519"!==e.type)return!1;r=e.toBuffer("raw")}else if("string"==typeof e)r=a.from(e,"base64");else if(c.isSignature(e,[1,0]))throw new Error("signature was created by too old a version of sshpk and cannot be verified");return s.buffer(r),n.sign.detached.verify(new Uint8Array(a.concat(this.chunks)),new Uint8Array(r),new Uint8Array(this.key.part.A.data))},o.inherits(Signer,i.Writable),Signer.prototype._write=function(e,t,r){this.chunks.push(e),r()},Signer.prototype.update=function(e){"string"==typeof e&&(e=a.from(e,"binary")),this.chunks.push(e)},Signer.prototype.sign=function(){var e=n.sign.detached(new Uint8Array(a.concat(this.chunks)),new Uint8Array(a.concat([this.key.part.k.data,this.key.part.A.data]))),t=a.from(e),r=c.parse(t,"ed25519","raw");return r.hashAlgorithm="sha512",r}},function(e,t,r){e.exports={read:function read(e,t){if("string"==typeof e){if(e.trim().match(/^[-]+[ ]*BEGIN/))return o.read(e,t);if(e.match(/^\s*ssh-[a-z]/))return s.read(e,t);if(e.match(/^\s*ecdsa-/))return s.read(e,t);if(findDNSSECHeader(e))return c.read(e,t);e=i.from(e,"binary")}else{if(n.buffer(e),function findPEMHeader(e){var t=0;for(;t<e.length&&(32===e[t]||10===e[t]);)++t;if(45!==e[t])return!1;for(;t<e.length&&45===e[t];)++t;for(;t<e.length&&32===e[t];)++t;return!(t+5>e.length||"BEGIN"!==e.slice(t,t+5).toString("ascii"))}(e))return o.read(e,t);if(function findSSHHeader(e){var t=0;for(;t<e.length&&(32===e[t]||10===e[t]||9===e[t]);)++t;return t+4<=e.length&&"ssh-"===e.slice(t,t+4).toString("ascii")||t+6<=e.length&&"ecdsa-"===e.slice(t,t+6).toString("ascii")}(e))return s.read(e,t);if(findDNSSECHeader(e))return c.read(e,t)}if(e.readUInt32BE(0)<e.length)return a.read(e,t);throw new Error("Failed to auto-detect format of key")},write:function write(e,t){throw new Error('"auto" format cannot be used for writing')}};var n=r(13),i=r(19).Buffer,o=(r(26),r(30),r(33),r(77)),s=r(307),a=r(85),c=r(195),u="Private-key-format: v1";function findDNSSECHeader(e){if(e.length<=u.length)return!1;if(e.slice(0,u.length).toString("ascii")===u)return!0;"string"!=typeof e&&(e=e.toString("ascii"));for(var t=e.split("\n"),r=0;t[r].match(/^\;/);)r++;return!!t[r].toString("ascii").match(/\. IN KEY /)||!!t[r].toString("ascii").match(/\. IN DNSKEY /)}},function(e,t,r){"use strict";var n=r(116).lowlevel.crypto_hash,i=0,o=function(){this.S=[new Uint32Array([3509652390,2564797868,805139163,3491422135,3101798381,1780907670,3128725573,4046225305,614570311,3012652279,134345442,2240740374,1667834072,1901547113,2757295779,4103290238,227898511,1921955416,1904987480,2182433518,2069144605,3260701109,2620446009,720527379,3318853667,677414384,3393288472,3101374703,2390351024,1614419982,1822297739,2954791486,3608508353,3174124327,2024746970,1432378464,3864339955,2857741204,1464375394,1676153920,1439316330,715854006,3033291828,289532110,2706671279,2087905683,3018724369,1668267050,732546397,1947742710,3462151702,2609353502,2950085171,1814351708,2050118529,680887927,999245976,1800124847,3300911131,1713906067,1641548236,4213287313,1216130144,1575780402,4018429277,3917837745,3693486850,3949271944,596196993,3549867205,258830323,2213823033,772490370,2760122372,1774776394,2652871518,566650946,4142492826,1728879713,2882767088,1783734482,3629395816,2517608232,2874225571,1861159788,326777828,3124490320,2130389656,2716951837,967770486,1724537150,2185432712,2364442137,1164943284,2105845187,998989502,3765401048,2244026483,1075463327,1455516326,1322494562,910128902,469688178,1117454909,936433444,3490320968,3675253459,1240580251,122909385,2157517691,634681816,4142456567,3825094682,3061402683,2540495037,79693498,3249098678,1084186820,1583128258,426386531,1761308591,1047286709,322548459,995290223,1845252383,2603652396,3431023940,2942221577,3202600964,3727903485,1712269319,422464435,3234572375,1170764815,3523960633,3117677531,1434042557,442511882,3600875718,1076654713,1738483198,4213154764,2393238008,3677496056,1014306527,4251020053,793779912,2902807211,842905082,4246964064,1395751752,1040244610,2656851899,3396308128,445077038,3742853595,3577915638,679411651,2892444358,2354009459,1767581616,3150600392,3791627101,3102740896,284835224,4246832056,1258075500,768725851,2589189241,3069724005,3532540348,1274779536,3789419226,2764799539,1660621633,3471099624,4011903706,913787905,3497959166,737222580,2514213453,2928710040,3937242737,1804850592,3499020752,2949064160,2386320175,2390070455,2415321851,4061277028,2290661394,2416832540,1336762016,1754252060,3520065937,3014181293,791618072,3188594551,3933548030,2332172193,3852520463,3043980520,413987798,3465142937,3030929376,4245938359,2093235073,3534596313,375366246,2157278981,2479649556,555357303,3870105701,2008414854,3344188149,4221384143,3956125452,2067696032,3594591187,2921233993,2428461,544322398,577241275,1471733935,610547355,4027169054,1432588573,1507829418,2025931657,3646575487,545086370,48609733,2200306550,1653985193,298326376,1316178497,3007786442,2064951626,458293330,2589141269,3591329599,3164325604,727753846,2179363840,146436021,1461446943,4069977195,705550613,3059967265,3887724982,4281599278,3313849956,1404054877,2845806497,146425753,1854211946]),new Uint32Array([1266315497,3048417604,3681880366,3289982499,290971e4,1235738493,2632868024,2414719590,3970600049,1771706367,1449415276,3266420449,422970021,1963543593,2690192192,3826793022,1062508698,1531092325,1804592342,2583117782,2714934279,4024971509,1294809318,4028980673,1289560198,2221992742,1669523910,35572830,157838143,1052438473,1016535060,1802137761,1753167236,1386275462,3080475397,2857371447,1040679964,2145300060,2390574316,1461121720,2956646967,4031777805,4028374788,33600511,2920084762,1018524850,629373528,3691585981,3515945977,2091462646,2486323059,586499841,988145025,935516892,3367335476,2599673255,2839830854,265290510,3972581182,2759138881,3795373465,1005194799,847297441,406762289,1314163512,1332590856,1866599683,4127851711,750260880,613907577,1450815602,3165620655,3734664991,3650291728,3012275730,3704569646,1427272223,778793252,1343938022,2676280711,2052605720,1946737175,3164576444,3914038668,3967478842,3682934266,1661551462,3294938066,4011595847,840292616,3712170807,616741398,312560963,711312465,1351876610,322626781,1910503582,271666773,2175563734,1594956187,70604529,3617834859,1007753275,1495573769,4069517037,2549218298,2663038764,504708206,2263041392,3941167025,2249088522,1514023603,1998579484,1312622330,694541497,2582060303,2151582166,1382467621,776784248,2618340202,3323268794,2497899128,2784771155,503983604,4076293799,907881277,423175695,432175456,1378068232,4145222326,3954048622,3938656102,3820766613,2793130115,2977904593,26017576,3274890735,3194772133,1700274565,1756076034,4006520079,3677328699,720338349,1533947780,354530856,688349552,3973924725,1637815568,332179504,3949051286,53804574,2852348879,3044236432,1282449977,3583942155,3416972820,4006381244,1617046695,2628476075,3002303598,1686838959,431878346,2686675385,1700445008,1080580658,1009431731,832498133,3223435511,2605976345,2271191193,2516031870,1648197032,4164389018,2548247927,300782431,375919233,238389289,3353747414,2531188641,2019080857,1475708069,455242339,2609103871,448939670,3451063019,1395535956,2413381860,1841049896,1491858159,885456874,4264095073,4001119347,1565136089,3898914787,1108368660,540939232,1173283510,2745871338,3681308437,4207628240,3343053890,4016749493,1699691293,1103962373,3625875870,2256883143,3830138730,1031889488,3479347698,1535977030,4236805024,3251091107,2132092099,1774941330,1199868427,1452454533,157007616,2904115357,342012276,595725824,1480756522,206960106,497939518,591360097,863170706,2375253569,3596610801,1814182875,2094937945,3421402208,1082520231,3463918190,2785509508,435703966,3908032597,1641649973,2842273706,3305899714,1510255612,2148256476,2655287854,3276092548,4258621189,236887753,3681803219,274041037,1734335097,3815195456,3317970021,1899903192,1026095262,4050517792,356393447,2410691914,3873677099,3682840055]),new Uint32Array([3913112168,2491498743,4132185628,2489919796,1091903735,1979897079,3170134830,3567386728,3557303409,857797738,1136121015,1342202287,507115054,2535736646,337727348,3213592640,1301675037,2528481711,1895095763,1721773893,3216771564,62756741,2142006736,835421444,2531993523,1442658625,3659876326,2882144922,676362277,1392781812,170690266,3921047035,1759253602,3611846912,1745797284,664899054,1329594018,3901205900,3045908486,2062866102,2865634940,3543621612,3464012697,1080764994,553557557,3656615353,3996768171,991055499,499776247,1265440854,648242737,3940784050,980351604,3713745714,1749149687,3396870395,4211799374,3640570775,1161844396,3125318951,1431517754,545492359,4268468663,3499529547,1437099964,2702547544,3433638243,2581715763,2787789398,1060185593,1593081372,2418618748,4260947970,69676912,2159744348,86519011,2512459080,3838209314,1220612927,3339683548,133810670,1090789135,1078426020,1569222167,845107691,3583754449,4072456591,1091646820,628848692,1613405280,3757631651,526609435,236106946,48312990,2942717905,3402727701,1797494240,859738849,992217954,4005476642,2243076622,3870952857,3732016268,765654824,3490871365,2511836413,1685915746,3888969200,1414112111,2273134842,3281911079,4080962846,172450625,2569994100,980381355,4109958455,2819808352,2716589560,2568741196,3681446669,3329971472,1835478071,660984891,3704678404,4045999559,3422617507,3040415634,1762651403,1719377915,3470491036,2693910283,3642056355,3138596744,1364962596,2073328063,1983633131,926494387,3423689081,2150032023,4096667949,1749200295,3328846651,309677260,2016342300,1779581495,3079819751,111262694,1274766160,443224088,298511866,1025883608,3806446537,1145181785,168956806,3641502830,3584813610,1689216846,3666258015,3200248200,1692713982,2646376535,4042768518,1618508792,1610833997,3523052358,4130873264,2001055236,3610705100,2202168115,4028541809,2961195399,1006657119,2006996926,3186142756,1430667929,3210227297,1314452623,4074634658,4101304120,2273951170,1399257539,3367210612,3027628629,1190975929,2062231137,2333990788,2221543033,2438960610,1181637006,548689776,2362791313,3372408396,3104550113,3145860560,296247880,1970579870,3078560182,3769228297,1714227617,3291629107,3898220290,166772364,1251581989,493813264,448347421,195405023,2709975567,677966185,3703036547,1463355134,2715995803,1338867538,1343315457,2802222074,2684532164,233230375,2599980071,2000651841,3277868038,1638401717,4028070440,3237316320,6314154,819756386,300326615,590932579,1405279636,3267499572,3150704214,2428286686,3959192993,3461946742,1862657033,1266418056,963775037,2089974820,2263052895,1917689273,448879540,3550394620,3981727096,150775221,3627908307,1303187396,508620638,2975983352,2726630617,1817252668,1876281319,1457606340,908771278,3720792119,3617206836,2455994898,1729034894,1080033504]),new Uint32Array([976866871,3556439503,2881648439,1522871579,1555064734,1336096578,3548522304,2579274686,3574697629,3205460757,3593280638,3338716283,3079412587,564236357,2993598910,1781952180,1464380207,3163844217,3332601554,1699332808,1393555694,1183702653,3581086237,1288719814,691649499,2847557200,2895455976,3193889540,2717570544,1781354906,1676643554,2592534050,3230253752,1126444790,2770207658,2633158820,2210423226,2615765581,2414155088,3127139286,673620729,2805611233,1269405062,4015350505,3341807571,4149409754,1057255273,2012875353,2162469141,2276492801,2601117357,993977747,3918593370,2654263191,753973209,36408145,2530585658,25011837,3520020182,2088578344,530523599,2918365339,1524020338,1518925132,3760827505,3759777254,1202760957,3985898139,3906192525,674977740,4174734889,2031300136,2019492241,3983892565,4153806404,3822280332,352677332,2297720250,60907813,90501309,3286998549,1016092578,2535922412,2839152426,457141659,509813237,4120667899,652014361,1966332200,2975202805,55981186,2327461051,676427537,3255491064,2882294119,3433927263,1307055953,942726286,933058658,2468411793,3933900994,4215176142,1361170020,2001714738,2830558078,3274259782,1222529897,1679025792,2729314320,3714953764,1770335741,151462246,3013232138,1682292957,1483529935,471910574,1539241949,458788160,3436315007,1807016891,3718408830,978976581,1043663428,3165965781,1927990952,4200891579,2372276910,3208408903,3533431907,1412390302,2931980059,4132332400,1947078029,3881505623,4168226417,2941484381,1077988104,1320477388,886195818,18198404,3786409e3,2509781533,112762804,3463356488,1866414978,891333506,18488651,661792760,1628790961,3885187036,3141171499,876946877,2693282273,1372485963,791857591,2686433993,3759982718,3167212022,3472953795,2716379847,445679433,3561995674,3504004811,3574258232,54117162,3331405415,2381918588,3769707343,4154350007,1140177722,4074052095,668550556,3214352940,367459370,261225585,2610173221,4209349473,3468074219,3265815641,314222801,3066103646,3808782860,282218597,3406013506,3773591054,379116347,1285071038,846784868,2669647154,3771962079,3550491691,2305946142,453669953,1268987020,3317592352,3279303384,3744833421,2610507566,3859509063,266596637,3847019092,517658769,3462560207,3443424879,370717030,4247526661,2224018117,4143653529,4112773975,2788324899,2477274417,1456262402,2901442914,1517677493,1846949527,2295493580,3734397586,2176403920,1280348187,1908823572,3871786941,846861322,1172426758,3287448474,3383383037,1655181056,3139813346,901632758,1897031941,2986607138,3066810236,3447102507,1393639104,373351379,950779232,625454576,3124240540,4148612726,2007998917,544563296,2244738638,2330496472,2058025392,1291430526,424198748,50039436,29584100,3605783033,2429876329,2791104160,1057563949,3255363231,3075367218,3463963227,1469046755,985887462])],this.P=new Uint32Array([608135816,2242054355,320440878,57701188,2752067618,698298832,137296536,3964562569,1160258022,953160567,3193202383,887688300,3232508343,3380367581,1065670069,3041331479,2450970073,2306472731])};function F(e,t,r){return(e[0][t[r+3]]+e[1][t[r+2]]^e[2][t[r+1]])+e[3][t[r]]}function stream2word(e,t){var r,n=0;for(r=0;r<4;r++,i++)i>=t&&(i=0),n=n<<8|e[i];return n}o.prototype.encipher=function(e,t){void 0===t&&(t=new Uint8Array(e.buffer),0!==e.byteOffset&&(t=t.subarray(e.byteOffset))),e[0]^=this.P[0];for(var r=1;r<16;r+=2)e[1]^=F(this.S,t,0)^this.P[r],e[0]^=F(this.S,t,4)^this.P[r+1];var n=e[0];e[0]=e[1]^this.P[17],e[1]=n},o.prototype.decipher=function(e){var t=new Uint8Array(e.buffer);0!==e.byteOffset&&(t=t.subarray(e.byteOffset)),e[0]^=this.P[17];for(var r=16;r>0;r-=2)e[1]^=F(this.S,t,0)^this.P[r],e[0]^=F(this.S,t,4)^this.P[r-1];var n=e[0];e[0]=e[1]^this.P[0],e[1]=n},o.prototype.expand0state=function(e,t){var r,n,o=new Uint32Array(2),s=new Uint8Array(o.buffer);for(r=0,i=0;r<18;r++)this.P[r]^=stream2word(e,t);for(i=0,r=0;r<18;r+=2)this.encipher(o,s),this.P[r]=o[0],this.P[r+1]=o[1];for(r=0;r<4;r++)for(n=0;n<256;n+=2)this.encipher(o,s),this.S[r][n]=o[0],this.S[r][n+1]=o[1]},o.prototype.expandstate=function(e,t,r,n){var o,s,a=new Uint32Array(2);for(o=0,i=0;o<18;o++)this.P[o]^=stream2word(r,n);for(o=0,i=0;o<18;o+=2)a[0]^=stream2word(e,t),a[1]^=stream2word(e,t),this.encipher(a),this.P[o]=a[0],this.P[o+1]=a[1];for(o=0;o<4;o++)for(s=0;s<256;s+=2)a[0]^=stream2word(e,t),a[1]^=stream2word(e,t),this.encipher(a),this.S[o][s]=a[0],this.S[o][s+1]=a[1];i=0},o.prototype.enc=function(e,t){for(var r=0;r<t;r++)this.encipher(e.subarray(2*r))},o.prototype.dec=function(e,t){for(var r=0;r<t;r++)this.decipher(e.subarray(2*r))};var s=8,a=32;function bcrypt_hash(e,t,r){var n,i=new o,a=new Uint32Array(s),c=new Uint8Array([79,120,121,99,104,114,111,109,97,116,105,99,66,108,111,119,102,105,115,104,83,119,97,116,68,121,110,97,109,105,116,101]);for(i.expandstate(t,64,e,64),n=0;n<64;n++)i.expand0state(t,64),i.expand0state(e,64);for(n=0;n<s;n++)a[n]=stream2word(c,c.byteLength);for(n=0;n<64;n++)i.enc(a,a.byteLength/8);for(n=0;n<s;n++)r[4*n+3]=a[n]>>>24,r[4*n+2]=a[n]>>>16,r[4*n+1]=a[n]>>>8,r[4*n+0]=a[n]}e.exports={BLOCKS:s,HASHSIZE:a,hash:bcrypt_hash,pbkdf:function bcrypt_pbkdf(e,t,r,i,o,s,c){var u,l,p,d,h,f,m=new Uint8Array(64),g=new Uint8Array(64),y=new Uint8Array(a),v=new Uint8Array(a),b=new Uint8Array(i+4),_=s;if(c<1)return-1;if(0===t||0===i||0===s||s>y.byteLength*y.byteLength||i>1<<20)return-1;for(d=Math.floor((s+y.byteLength-1)/y.byteLength),p=Math.floor((s+d-1)/d),u=0;u<i;u++)b[u]=r[u];for(n(m,e,t),f=1;s>0;f++){for(b[i+0]=f>>>24,b[i+1]=f>>>16,b[i+2]=f>>>8,b[i+3]=f,n(g,b,i+4),bcrypt_hash(m,g,v),u=y.byteLength;u--;)y[u]=v[u];for(u=1;u<c;u++)for(n(g,v,v.byteLength),bcrypt_hash(m,g,v),l=0;l<y.byteLength;l++)y[l]^=v[l];for(p=Math.min(p,s),u=0;u<p&&!((h=u*d+(f-1))>=_);u++)o[h]=y[u];s-=u}return 0}}},function(e,t,r){e.exports={read:function read(e,t){"string"!=typeof e&&(n.buffer(e,"buf"),e=e.toString("ascii"));var r=e.trim().replace(/[\\\r]/g,""),s=r.match(a);s||(s=r.match(c));n.ok(s,"key must match regex");var u,l=o.algToKeyType(s[1]),p=i.from(s[2],"base64"),d={};if(s[4])try{u=o.read(p)}catch(e){s=r.match(c),n.ok(s,"key must match regex"),p=i.from(s[2],"base64"),u=o.readInternal(d,"public",p)}else u=o.readInternal(d,"public",p);if(n.strictEqual(l,u.type),s[4]&&s[4].length>0)u.comment=s[4];else if(d.consumed){var h=s[2]+(s[3]?s[3]:""),f=4*Math.ceil(d.consumed/3);h=h.slice(0,f-2).replace(/[^a-zA-Z0-9+\/=]/g,"")+h.slice(f-2);var m=d.consumed%3;for(m>0&&"="!==h.slice(f-1,f)&&f--;"="===h.slice(f,f+1);)f++;var g=h.slice(f);(g=g.replace(/[\r\n]/g," ").replace(/^\s+/,"")).match(/^[a-zA-Z0-9]/)&&(u.comment=g)}return u},write:function write(e,t){if(n.object(e),!s.isKey(e))throw new Error("Must be a public key");var r=[],a=o.keyTypeToAlg(e);r.push(a);var c=o.write(e);r.push(c.toString("base64")),e.comment&&r.push(e.comment);return i.from(r.join(" "))}};var n=r(13),i=r(19).Buffer,o=r(85),s=(r(26),r(30)),a=(r(33),r(155),/^([a-z0-9-]+)[ \t]+([a-zA-Z0-9+\/]+[=]*)([ \t]+([^ \t][^\n]*[\n]*)?)?$/),c=/^([a-z0-9-]+)[ \t\n]+([a-zA-Z0-9+\/][a-zA-Z0-9+\/ \t\n=]*)([^a-zA-Z0-9+\/ \t\n=].*)?$/},function(e,t,r){e.exports={read:function read(e,t){"string"==typeof e&&(e=o.from(e,"binary"));n.buffer(e,"buf");var r=new i.BerReader(e);if(r.readSequence(),Math.abs(r.length-r.remain)>1)throw new Error("DER sequence does not contain whole byte stream");var d=r.offset;r.readSequence();var h=r.offset+r.length,f=h;if(r.peek()===Local(0)){r.readSequence(Local(0));var m=r.readInt();n.ok(m<=3,"only x.509 versions up to v3 supported")}var g={signatures:{}},y=g.signatures.x509={};y.extras={},g.serial=function readMPInt(e,t){return n.strictEqual(e.peek(),i.Ber.Integer,t+" is not an Integer"),s.mpNormalize(e.readString(i.Ber.Integer,!0))}(r,"serial"),r.readSequence();var v=r.offset+r.length,b=r.readOID();if(void 0===p[b])throw new Error("unknown signature algorithm "+b);r._offset=v,g.issuer=a.parseAsn1(r),r.readSequence(),g.validFrom=readDate(r),g.validUntil=readDate(r),g.subjects=[a.parseAsn1(r)],r.readSequence(),v=r.offset+r.length,g.subjectKey=l.readPkcs8(void 0,"public",r),r._offset=v,r.peek()===Local(1)&&(r.readSequence(Local(1)),y.extras.issuerUniqueID=e.slice(r.offset,r.offset+r.length),r._offset+=r.length);r.peek()===Local(2)&&(r.readSequence(Local(2)),y.extras.subjectUniqueID=e.slice(r.offset,r.offset+r.length),r._offset+=r.length);if(r.peek()===Local(3)){r.readSequence(Local(3));var _=r.offset+r.length;for(r.readSequence();r.offset<_;)readExtension(g,e,r);n.strictEqual(r.offset,_)}n.strictEqual(r.offset,h),r.readSequence(),v=r.offset+r.length;var w=r.readOID(),E=p[w];if(void 0===E)throw new Error("unknown signature algorithm "+w);r._offset=v;var S=r.readString(i.Ber.BitString,!0);0===S[0]&&(S=S.slice(1));var C=E.split("-");return y.signature=c.parse(S,C[0],"asn1"),y.signature.hashAlgorithm=C[1],y.algo=E,y.cache=e.slice(d,f),new u(g)},verify:function verify(e,t){var r=e.signatures.x509;n.object(r,"x509 signature");var o=r.algo.split("-");if(o[0]!==t.type)return!1;var s=r.cache;if(void 0===s){var a=new i.BerWriter;writeTBSCert(e,a),s=a.buffer}var c=t.createVerify(o[1]);return c.write(s),c.verify(r.signature)},sign:function sign(e,t){void 0===e.signatures.x509&&(e.signatures.x509={});var r=e.signatures.x509;if(r.algo=t.type+"-"+t.defaultHashAlgorithm(),void 0===p[r.algo])return!1;var n=new i.BerWriter;writeTBSCert(e,n);var o=n.buffer;r.cache=o;var s=t.createSign();return s.write(o),e.signatures.x509.signature=s.sign(),!0},signAsync:function signAsync(e,t,r){void 0===e.signatures.x509&&(e.signatures.x509={});var n=e.signatures.x509,o=new i.BerWriter;writeTBSCert(e,o);var s=o.buffer;n.cache=s,t(s,function(e,t){e?r(e):(n.algo=t.type+"-"+t.hashAlgorithm,void 0!==p[n.algo]?(n.signature=t,r()):r(new Error('Invalid signing algorithm "'+n.algo+'"')))})},write:function write(e,t){var r=e.signatures.x509;n.object(r,"x509 signature");var s=new i.BerWriter;s.startSequence(),r.cache?(s._ensure(r.cache.length),r.cache.copy(s._buf,s._offset),s._offset+=r.cache.length):writeTBSCert(e,s);s.startSequence(),s.writeOID(p[r.algo]),r.algo.match(/^rsa-/)&&s.writeNull();s.endSequence();var a=r.signature.toBuffer("asn1"),c=o.alloc(a.length+1);return c[0]=0,a.copy(c,1),s.writeBuffer(c,i.Ber.BitString),s.endSequence(),s.buffer}};var n=r(13),i=r(66),o=r(19).Buffer,s=(r(32),r(26)),a=(r(30),r(33),r(77),r(120)),c=r(65),u=r(115),l=r(118);function Local(e){return i.Ber.Context|i.Ber.Constructor|e}function Context(e){return i.Ber.Context|e}var p={"rsa-md5":"1.2.840.113549.1.1.4","rsa-sha1":"1.2.840.113549.1.1.5","rsa-sha256":"1.2.840.113549.1.1.11","rsa-sha384":"1.2.840.113549.1.1.12","rsa-sha512":"1.2.840.113549.1.1.13","dsa-sha1":"1.2.840.10040.4.3","dsa-sha256":"2.16.840.1.101.3.4.3.2","ecdsa-sha1":"1.2.840.10045.4.1","ecdsa-sha256":"1.2.840.10045.4.3.2","ecdsa-sha384":"1.2.840.10045.4.3.3","ecdsa-sha512":"1.2.840.10045.4.3.4","ed25519-sha512":"1.3.101.112"};Object.keys(p).forEach(function(e){p[p[e]]=e}),p["1.3.14.3.2.3"]="rsa-md5",p["1.3.14.3.2.29"]="rsa-sha1";var d={issuerKeyId:"2.5.29.35",altName:"2.5.29.17",basicConstraints:"2.5.29.19",keyUsage:"2.5.29.15",extKeyUsage:"2.5.29.37"};function readDate(e){if(e.peek()===i.Ber.UTCTime)return function utcTimeToDate(e){var t=e.match(y);n.ok(t,"timestamps must be in UTC");var r=new Date,i=r.getUTCFullYear(),o=100*Math.floor(i/100),s=parseInt(t[1],10);s+=i%100<50&&s>=60?o-1:o;r.setUTCFullYear(s,parseInt(t[2],10)-1,parseInt(t[3],10)),r.setUTCHours(parseInt(t[4],10),parseInt(t[5],10)),t[6]&&t[6].length>0&&r.setUTCSeconds(parseInt(t[6],10));return r}(e.readString(i.Ber.UTCTime));if(e.peek()===i.Ber.GeneralizedTime)return function gTimeToDate(e){var t=e.match(v);n.ok(t);var r=new Date;r.setUTCFullYear(parseInt(t[1],10),parseInt(t[2],10)-1,parseInt(t[3],10)),r.setUTCHours(parseInt(t[4],10),parseInt(t[5],10)),t[6]&&t[6].length>0&&r.setUTCSeconds(parseInt(t[6],10));return r}(e.readString(i.Ber.GeneralizedTime));throw new Error("Unsupported date format")}var h={OtherName:Local(0),RFC822Name:Context(1),DNSName:Context(2),X400Address:Local(3),DirectoryName:Local(4),EDIPartyName:Local(5),URI:Context(6),IPAddress:Context(7),OID:Context(8)},f={serverAuth:"1.3.6.1.5.5.7.3.1",clientAuth:"1.3.6.1.5.5.7.3.2",codeSigning:"1.3.6.1.5.5.7.3.3",joyentDocker:"1.3.6.1.4.1.38678.1.4.1",joyentCmon:"1.3.6.1.4.1.38678.1.4.2"},m={};Object.keys(f).forEach(function(e){m[f[e]]=e});var g=["signature","identity","keyEncryption","encryption","keyAgreement","ca","crl"];function readExtension(e,t,r){r.readSequence();var n,o,s=r.offset+r.length,c=r.readOID(),u=e.signatures.x509;switch(u.extras.exts||(u.extras.exts=[]),r.peek()===i.Ber.Boolean&&(o=r.readBoolean()),c){case d.basicConstraints:r.readSequence(i.Ber.OctetString),r.readSequence();var l=r.offset+r.length,p=!1;r.peek()===i.Ber.Boolean&&(p=r.readBoolean()),void 0===e.purposes&&(e.purposes=[]),!0===p&&e.purposes.push("ca");var f={oid:c,critical:o};r.offset<l&&r.peek()===i.Ber.Integer&&(f.pathLen=r.readInt()),u.extras.exts.push(f);break;case d.extKeyUsage:r.readSequence(i.Ber.OctetString),r.readSequence(),void 0===e.purposes&&(e.purposes=[]);for(var y=r.offset+r.length;r.offset<y;){var v=r.readOID();e.purposes.push(m[v]||v)}-1!==e.purposes.indexOf("serverAuth")&&-1===e.purposes.indexOf("clientAuth")?e.subjects.forEach(function(e){"host"!==e.type&&(e.type="host",e.hostname=e.uid||e.email||e.components[0].value)}):-1!==e.purposes.indexOf("clientAuth")&&-1===e.purposes.indexOf("serverAuth")&&e.subjects.forEach(function(e){"user"!==e.type&&(e.type="user",e.uid=e.hostname||e.email||e.components[0].value)}),u.extras.exts.push({oid:c,critical:o});break;case d.keyUsage:r.readSequence(i.Ber.OctetString);var b=r.readString(i.Ber.BitString,!0);(function readBitField(e,t){for(var r=8*(e.length-1)-e[0],n={},i=0;i<r;++i){var o=1+Math.floor(i/8),s=7-i%8,a=1<<s,c=0!=(e[o]&a),u=t[i];c&&"string"==typeof u&&(n[u]=!0)}return Object.keys(n)})(b,g).forEach(function(t){void 0===e.purposes&&(e.purposes=[]),-1===e.purposes.indexOf(t)&&e.purposes.push(t)}),u.extras.exts.push({oid:c,critical:o,bits:b});break;case d.altName:r.readSequence(i.Ber.OctetString),r.readSequence();for(var _=r.offset+r.length;r.offset<_;)switch(r.peek()){case h.OtherName:case h.EDIPartyName:r.readSequence(),r._offset+=r.length;break;case h.OID:r.readOID(h.OID);break;case h.RFC822Name:var w=r.readString(h.RFC822Name);n=a.forEmail(w),e.subjects[0].equals(n)||e.subjects.push(n);break;case h.DirectoryName:r.readSequence(h.DirectoryName),n=a.parseAsn1(r),e.subjects[0].equals(n)||e.subjects.push(n);break;case h.DNSName:var E=r.readString(h.DNSName);n=a.forHost(E),e.subjects[0].equals(n)||e.subjects.push(n);break;default:r.readString(r.peek())}u.extras.exts.push({oid:c,critical:o});break;default:u.extras.exts.push({oid:c,critical:o,data:r.readString(i.Ber.OctetString,!0)})}r._offset=s}var y=/^([0-9]{2})([0-9]{2})([0-9]{2})([0-9]{2})([0-9]{2})([0-9]{2})?Z$/;var v=/^([0-9]{4})([0-9]{2})([0-9]{2})([0-9]{2})([0-9]{2})([0-9]{2})?Z$/;function zeroPad(e){for(var t=""+e;t.length<2;)t="0"+t;return t}function dateToUTCTime(e){var t="";return t+=zeroPad(e.getUTCFullYear()%100),t+=zeroPad(e.getUTCMonth()+1),t+=zeroPad(e.getUTCDate()),t+=zeroPad(e.getUTCHours()),t+=zeroPad(e.getUTCMinutes()),t+=zeroPad(e.getUTCSeconds()),t+="Z"}function writeTBSCert(e,t){var r=e.signatures.x509;n.object(r,"x509 signature"),t.startSequence(),t.startSequence(Local(0)),t.writeInt(2),t.endSequence(),t.writeBuffer(s.mpNormalize(e.serial),i.Ber.Integer),t.startSequence(),t.writeOID(p[r.algo]),r.algo.match(/^rsa-/)&&t.writeNull(),t.endSequence(),e.issuer.toAsn1(t),t.startSequence(),t.writeString(dateToUTCTime(e.validFrom),i.Ber.UTCTime),t.writeString(dateToUTCTime(e.validUntil),i.Ber.UTCTime),t.endSequence();var o=e.subjects[0],a=e.subjects.slice(1);if(o.toAsn1(t),l.writePkcs8(t,e.subjectKey),r.extras&&r.extras.issuerUniqueID&&t.writeBuffer(r.extras.issuerUniqueID,Local(1)),r.extras&&r.extras.subjectUniqueID&&t.writeBuffer(r.extras.subjectUniqueID,Local(2)),a.length>0||"host"===o.type||void 0!==e.purposes&&e.purposes.length>0||r.extras&&r.extras.exts){t.startSequence(Local(3)),t.startSequence();var c=[];void 0!==e.purposes&&e.purposes.length>0&&(c.push({oid:d.basicConstraints,critical:!0}),c.push({oid:d.keyUsage,critical:!0}),c.push({oid:d.extKeyUsage,critical:!0})),c.push({oid:d.altName}),r.extras&&r.extras.exts&&(c=r.extras.exts);for(var u=0;u<c.length;++u){if(t.startSequence(),t.writeOID(c[u].oid),void 0!==c[u].critical&&t.writeBoolean(c[u].critical),c[u].oid===d.altName){t.startSequence(i.Ber.OctetString),t.startSequence(),"host"===o.type&&t.writeString(o.hostname,Context(2));for(var m=0;m<a.length;++m)"host"===a[m].type?t.writeString(a[m].hostname,h.DNSName):"email"===a[m].type?t.writeString(a[m].email,h.RFC822Name):(t.startSequence(h.DirectoryName),a[m].toAsn1(t),t.endSequence());t.endSequence(),t.endSequence()}else if(c[u].oid===d.basicConstraints){t.startSequence(i.Ber.OctetString),t.startSequence();var y=-1!==e.purposes.indexOf("ca"),v=c[u].pathLen;t.writeBoolean(y),void 0!==v&&t.writeInt(v),t.endSequence(),t.endSequence()}else if(c[u].oid===d.extKeyUsage)t.startSequence(i.Ber.OctetString),t.startSequence(),e.purposes.forEach(function(e){if("ca"!==e&&-1===g.indexOf(e)){var r=e;void 0!==f[e]&&(r=f[e]),t.writeOID(r)}}),t.endSequence(),t.endSequence();else if(c[u].oid===d.keyUsage){if(t.startSequence(i.Ber.OctetString),void 0!==c[u].bits)t.writeBuffer(c[u].bits,i.Ber.BitString);else{var b=writeBitField(e.purposes,g);t.writeBuffer(b,i.Ber.BitString)}t.endSequence()}else t.writeBuffer(c[u].data,i.Ber.OctetString);t.endSequence()}t.endSequence(),t.endSequence()}t.endSequence()}function writeBitField(e,t){var r=t.length,n=Math.ceil(r/8),i=8*n-r,s=o.alloc(1+n);s[0]=i;for(var a=0;a<r;++a){var c=1+Math.floor(a/8),u=1<<7-a%8,l=t[a];if(void 0!==l)-1!==e.indexOf(l)&&(s[c]|=u)}return s}},function(e,t,r){var n=r(44),i=r(1);function jsSprintf(e){var t,r,o,s,a,c,u,l,p,d=["([^%]*)","%","(['\\-+ #0]*?)","([1-9]\\d*)?","(\\.([1-9]\\d*))?","[lhjztL]*?","([diouxXfFeEgGaAcCsSp%jr])"].join(""),h=new RegExp(d),f=Array.prototype.slice.call(arguments,1),m="",g=1;for(n.equal("string",typeof e);null!==(p=h.exec(e));)if(m+=p[1],e=e.substring(p[0].length),t=p[2]||"",r=p[3]||0,o=p[4]||"",a=!1,u=!1,c=" ","%"!=(s=p[6])){if(0===f.length)throw new Error("too few args to sprintf");if(l=f.shift(),g++,t.match(/[\' #]/))throw new Error("unsupported flags: "+t);if(o.length>0)throw new Error("non-zero precision not supported");switch(t.match(/-/)&&(a=!0),t.match(/0/)&&(c="0"),t.match(/\+/)&&(u=!0),s){case"s":if(null==l)throw new Error("argument "+g+": attempted to print undefined or null as a string");m+=doPad(c,r,a,l.toString());break;case"d":l=Math.floor(l);case"f":m+=(u=u&&l>0?"+":"")+doPad(c,r,a,l.toString());break;case"x":m+=doPad(c,r,a,l.toString(16));break;case"j":0===r&&(r=10),m+=i.inspect(l,!1,r);break;case"r":m+=dumpException(l);break;default:throw new Error("unsupported conversion: "+s)}}else m+="%";return m+=e}function jsFprintf(e){var t=Array.prototype.slice.call(arguments,1);return e.write(jsSprintf.apply(this,t))}function doPad(e,t,r,n){for(var i=n;i.length<t;)r?i+=e:i=e+i;return i}function dumpException(e){var t;if(!(e instanceof Error))throw new Error(jsSprintf("invalid type for %%r: %j",e));if(t="EXCEPTION: "+e.constructor.name+": "+e.stack,e.cause&&"function"==typeof e.cause){var r=e.cause();r&&(t+="\nCaused by: "+dumpException(r))}return t}t.sprintf=jsSprintf,t.printf=function jsPrintf(){var e=Array.prototype.slice.call(arguments);e.unshift(process.stdout),jsFprintf.apply(null,e)},t.fprintf=jsFprintf},function(e,t,r){"use strict";
/*!
 * mime-types
 * Copyright(c) 2014 Jonathan Ong
 * Copyright(c) 2015 Douglas Christopher Wilson
 * MIT Licensed
 */var n=r(678),i=r(6).extname,o=/^\s*([^;\s]*)(?:;|\s|$)/,s=/^text\//i;function charset(e){if(!e||"string"!=typeof e)return!1;var t=o.exec(e),r=t&&n[t[1].toLowerCase()];return r&&r.charset?r.charset:!(!t||!s.test(t[1]))&&"UTF-8"}t.charset=charset,t.charsets={lookup:charset},t.contentType=function contentType(e){if(!e||"string"!=typeof e)return!1;var r=-1===e.indexOf("/")?t.lookup(e):e;if(!r)return!1;if(-1===r.indexOf("charset")){var n=t.charset(r);n&&(r+="; charset="+n.toLowerCase())}return r},t.extension=function extension(e){if(!e||"string"!=typeof e)return!1;var r=o.exec(e),n=r&&t.extensions[r[1].toLowerCase()];if(!n||!n.length)return!1;return n[0]},t.extensions=Object.create(null),t.lookup=function lookup(e){if(!e||"string"!=typeof e)return!1;var r=i("x."+e).toLowerCase().substr(1);if(!r)return!1;return t.types[r]||!1},t.types=Object.create(null),function populateMaps(e,t){var r=["nginx","apache",void 0,"iana"];Object.keys(n).forEach(function forEachMimeType(i){var o=n[i],s=o.extensions;if(s&&s.length){e[i]=s;for(var a=0;a<s.length;a++){var c=s[a];if(t[c]){var u=r.indexOf(n[t[c]].source),l=r.indexOf(o.source);if("application/octet-stream"!==t[c]&&(u>l||u===l&&"application/"===t[c].substr(0,12)))continue}t[c]=i}}})}(t.extensions,t.types)},function(e,t,r){var n=r(1),i=r(15).Stream,o=r(681),s=r(682);function CombinedStream(){this.writable=!1,this.readable=!0,this.dataSize=0,this.maxDataSize=2097152,this.pauseStreams=!0,this._released=!1,this._streams=[],this._currentStream=null}e.exports=CombinedStream,n.inherits(CombinedStream,i),CombinedStream.create=function(e){var t=new this;for(var r in e=e||{})t[r]=e[r];return t},CombinedStream.isStreamLike=function(e){return"function"!=typeof e&&"string"!=typeof e&&"boolean"!=typeof e&&"number"!=typeof e&&!Buffer.isBuffer(e)},CombinedStream.prototype.append=function(e){if(CombinedStream.isStreamLike(e)){if(!(e instanceof o)){var t=o.create(e,{maxDataSize:1/0,pauseStream:this.pauseStreams});e.on("data",this._checkDataSize.bind(this)),e=t}this._handleErrors(e),this.pauseStreams&&e.pause()}return this._streams.push(e),this},CombinedStream.prototype.pipe=function(e,t){return i.prototype.pipe.call(this,e,t),this.resume(),e},CombinedStream.prototype._getNext=function(){this._currentStream=null;var e=this._streams.shift();void 0!==e?"function"==typeof e?e(function(e){CombinedStream.isStreamLike(e)&&(e.on("data",this._checkDataSize.bind(this)),this._handleErrors(e)),s(this._pipeNext.bind(this,e))}.bind(this)):this._pipeNext(e):this.end()},CombinedStream.prototype._pipeNext=function(e){if(this._currentStream=e,CombinedStream.isStreamLike(e))return e.on("end",this._getNext.bind(this)),void e.pipe(this,{end:!1});var t=e;this.write(t),this._getNext()},CombinedStream.prototype._handleErrors=function(e){var t=this;e.on("error",function(e){t._emitError(e)})},CombinedStream.prototype.write=function(e){this.emit("data",e)},CombinedStream.prototype.pause=function(){this.pauseStreams&&(this.pauseStreams&&this._currentStream&&"function"==typeof this._currentStream.pause&&this._currentStream.pause(),this.emit("pause"))},CombinedStream.prototype.resume=function(){this._released||(this._released=!0,this.writable=!0,this._getNext()),this.pauseStreams&&this._currentStream&&"function"==typeof this._currentStream.resume&&this._currentStream.resume(),this.emit("resume")},CombinedStream.prototype.end=function(){this._reset(),this.emit("end")},CombinedStream.prototype.destroy=function(){this._reset(),this.emit("close")},CombinedStream.prototype._reset=function(){this.writable=!1,this._streams=[],this._currentStream=null},CombinedStream.prototype._checkDataSize=function(){if(this._updateDataSize(),!(this.dataSize<=this.maxDataSize)){var e="DelayedStream#maxDataSize of "+this.maxDataSize+" bytes exceeded.";this._emitError(new Error(e))}},CombinedStream.prototype._updateDataSize=function(){this.dataSize=0;var e=this;this._streams.forEach(function(t){t.dataSize&&(e.dataSize+=t.dataSize)}),this._currentStream&&this._currentStream.dataSize&&(this.dataSize+=this._currentStream.dataSize)},CombinedStream.prototype._emitError=function(e){this._reset(),this.emit("error",e)}},function(e,t,r){var n=r(313),i=r(314);e.exports=function iterate(e,t,r,o){var s=r.keyedList?r.keyedList[r.index]:r.index;r.jobs[s]=function runJob(e,t,r,i){var o;o=2==e.length?e(r,n(i)):e(r,t,n(i));return o}(t,s,e[s],function(e,t){s in r.jobs&&(delete r.jobs[s],e?i(r):r.results[s]=t,o(e,r.results))})}},function(e,t,r){var n=r(685);e.exports=function async(e){var t=!1;return n(function(){t=!0}),function async_callback(r,i){t?e(r,i):n(function nextTick_callback(){e(r,i)})}}},function(e,t){e.exports=function abort(e){Object.keys(e.jobs).forEach(function clean(e){"function"==typeof this.jobs[e]&&this.jobs[e]()}.bind(e)),e.jobs={}}},function(e,t){e.exports=function state(e,t){var r=!Array.isArray(e),n={index:0,keyedList:r||t?Object.keys(e):null,jobs:{},results:r?{}:[],size:r?Object.keys(e).length:e.length};t&&n.keyedList.sort(r?t:function(r,n){return t(e[r],e[n])});return n}},function(e,t,r){var n=r(314),i=r(313);e.exports=function terminator(e){if(!Object.keys(this.jobs).length)return;this.index=this.size,n(this),i(e)(null,this.results)}},function(e,t,r){var n=r(312),i=r(315),o=r(316);function ascending(e,t){return e<t?-1:e>t?1:0}e.exports=function serialOrdered(e,t,r,s){var a=i(e,r);return n(e,t,a,function iteratorHandler(r,i){r?s(r,i):(a.index++,a.index<(a.keyedList||e).length?n(e,t,a,iteratorHandler):s(null,a.results))}),o.bind(a,s)},e.exports.ascending=ascending,e.exports.descending=function descending(e,t){return-1*ascending(e,t)}},function(e,t,r){var n=r(15);function isStream(e){return e instanceof n.Stream}function isReadable(e){return isStream(e)&&"function"==typeof e._read&&"object"==typeof e._readableState}function isWritable(e){return isStream(e)&&"function"==typeof e._write&&"object"==typeof e._writableState}e.exports=isStream,e.exports.isReadable=isReadable,e.exports.isWritable=isWritable,e.exports.isDuplex=function isDuplex(e){return isReadable(e)&&isWritable(e)}},function(e,t,r){"use strict";var n=r(691),i=r(692),o=r(321);e.exports={formats:o,parse:i,stringify:n}},function(e,t,r){"use strict";var n=Object.prototype.hasOwnProperty,i=function(){for(var e=[],t=0;t<256;++t)e.push("%"+((t<16?"0":"")+t.toString(16)).toUpperCase());return e}(),o=function arrayToObject(e,t){for(var r=t&&t.plainObjects?Object.create(null):{},n=0;n<e.length;++n)void 0!==e[n]&&(r[n]=e[n]);return r};e.exports={arrayToObject:o,assign:function assignSingleSource(e,t){return Object.keys(t).reduce(function(e,r){return e[r]=t[r],e},e)},compact:function compact(e){for(var t=[{obj:{o:e},prop:"o"}],r=[],n=0;n<t.length;++n)for(var i=t[n],o=i.obj[i.prop],s=Object.keys(o),a=0;a<s.length;++a){var c=s[a],u=o[c];"object"==typeof u&&null!==u&&-1===r.indexOf(u)&&(t.push({obj:o,prop:c}),r.push(u))}return function compactQueue(e){for(var t;e.length;){var r=e.pop();if(t=r.obj[r.prop],Array.isArray(t)){for(var n=[],i=0;i<t.length;++i)void 0!==t[i]&&n.push(t[i]);r.obj[r.prop]=n}}return t}(t)},decode:function(e){try{return decodeURIComponent(e.replace(/\+/g," "))}catch(t){return e}},encode:function encode(e){if(0===e.length)return e;for(var t="string"==typeof e?e:String(e),r="",n=0;n<t.length;++n){var o=t.charCodeAt(n);45===o||46===o||95===o||126===o||o>=48&&o<=57||o>=65&&o<=90||o>=97&&o<=122?r+=t.charAt(n):o<128?r+=i[o]:o<2048?r+=i[192|o>>6]+i[128|63&o]:o<55296||o>=57344?r+=i[224|o>>12]+i[128|o>>6&63]+i[128|63&o]:(n+=1,o=65536+((1023&o)<<10|1023&t.charCodeAt(n)),r+=i[240|o>>18]+i[128|o>>12&63]+i[128|o>>6&63]+i[128|63&o])}return r},isBuffer:function isBuffer(e){return null!=e&&!!(e.constructor&&e.constructor.isBuffer&&e.constructor.isBuffer(e))},isRegExp:function isRegExp(e){return"[object RegExp]"===Object.prototype.toString.call(e)},merge:function merge(e,t,r){if(!t)return e;if("object"!=typeof t){if(Array.isArray(e))e.push(t);else{if("object"!=typeof e)return[e,t];(r.plainObjects||r.allowPrototypes||!n.call(Object.prototype,t))&&(e[t]=!0)}return e}if("object"!=typeof e)return[e].concat(t);var i=e;return Array.isArray(e)&&!Array.isArray(t)&&(i=o(e,r)),Array.isArray(e)&&Array.isArray(t)?(t.forEach(function(t,i){n.call(e,i)?e[i]&&"object"==typeof e[i]?e[i]=merge(e[i],t,r):e.push(t):e[i]=t}),e):Object.keys(t).reduce(function(e,i){var o=t[i];return n.call(e,i)?e[i]=merge(e[i],o,r):e[i]=o,e},i)}}},function(e,t,r){"use strict";var n=String.prototype.replace,i=/%20/g;e.exports={default:"RFC3986",formatters:{RFC1738:function(e){return n.call(e,i,"+")},RFC3986:function(e){return e}},RFC1738:"RFC1738",RFC3986:"RFC3986"}},function(e,t,r){"use strict";var n=r(695),i=r(197),o=r(699),s=r(323),a=r(324),c=r(700),u=r(701),l=r(722),p=r(91);e.exports=Ajv,Ajv.prototype.validate=function validate(e,t){var r;if("string"==typeof e){if(!(r=this.getSchema(e)))throw new Error('no schema with key or ref "'+e+'"')}else{var n=this._addSchema(e);r=n.validate||this._compile(n)}var i=r(t);!0!==r.$async&&(this.errors=r.errors);return i},Ajv.prototype.compile=function compile(e,t){var r=this._addSchema(e,void 0,t);return r.validate||this._compile(r)},Ajv.prototype.addSchema=function addSchema(e,t,r,n){if(Array.isArray(e)){for(var o=0;o<e.length;o++)this.addSchema(e[o],void 0,r,n);return this}var s=this._getId(e);if(void 0!==s&&"string"!=typeof s)throw new Error("schema id must be string");return checkUnique(this,t=i.normalizeId(t||s)),this._schemas[t]=this._addSchema(e,r,n,!0),this},Ajv.prototype.addMetaSchema=function addMetaSchema(e,t,r){return this.addSchema(e,t,r,!0),this},Ajv.prototype.validateSchema=function validateSchema(e,t){var r=e.$schema;if(void 0!==r&&"string"!=typeof r)throw new Error("$schema must be a string");if(!(r=r||this._opts.defaultMeta||function defaultMeta(e){var t=e._opts.meta;return e._opts.defaultMeta="object"==typeof t?e._getId(t)||t:e.getSchema(f)?f:void 0,e._opts.defaultMeta}(this)))return this.logger.warn("meta-schema not available"),this.errors=null,!0;var n=this.validate(r,e);if(!n&&t){var i="schema is invalid: "+this.errorsText();if("log"!=this._opts.validateSchema)throw new Error(i);this.logger.error(i)}return n},Ajv.prototype.getSchema=function getSchema(e){var t=_getSchemaObj(this,e);switch(typeof t){case"object":return t.validate||this._compile(t);case"string":return this.getSchema(t);case"undefined":return function _getSchemaFragment(e,t){var r=i.schema.call(e,{schema:{}},t);if(r){var o=r.schema,a=r.root,c=r.baseId,u=n.call(e,o,a,void 0,c);return e._fragments[t]=new s({ref:t,fragment:!0,schema:o,root:a,baseId:c,validate:u}),u}}(this,e)}},Ajv.prototype.removeSchema=function removeSchema(e){if(e instanceof RegExp)return _removeAllSchemas(this,this._schemas,e),_removeAllSchemas(this,this._refs,e),this;switch(typeof e){case"undefined":return _removeAllSchemas(this,this._schemas),_removeAllSchemas(this,this._refs),this._cache.clear(),this;case"string":var t=_getSchemaObj(this,e);return t&&this._cache.del(t.cacheKey),delete this._schemas[e],delete this._refs[e],this;case"object":var r=this._opts.serialize,n=r?r(e):e;this._cache.del(n);var o=this._getId(e);o&&(o=i.normalizeId(o),delete this._schemas[o],delete this._refs[o])}return this},Ajv.prototype.addFormat=function addFormat(e,t){"string"==typeof t&&(t=new RegExp(t));return this._formats[e]=t,this},Ajv.prototype.errorsText=function errorsText(e,t){if(!(e=e||this.errors))return"No errors";for(var r=void 0===(t=t||{}).separator?", ":t.separator,n=void 0===t.dataVar?"data":t.dataVar,i="",o=0;o<e.length;o++){var s=e[o];s&&(i+=n+s.dataPath+" "+s.message+r)}return i.slice(0,-r.length)},Ajv.prototype._addSchema=function _addSchema(e,t,r,n){if("object"!=typeof e&&"boolean"!=typeof e)throw new Error("schema should be object or boolean");var o=this._opts.serialize,a=o?o(e):e,c=this._cache.get(a);if(c)return c;n=n||!1!==this._opts.addUsedSchema;var u=i.normalizeId(this._getId(e));u&&n&&checkUnique(this,u);var l,p=!1!==this._opts.validateSchema&&!t;p&&!(l=u&&u==i.normalizeId(e.$schema))&&this.validateSchema(e,!0);var d=i.ids.call(this,e),h=new s({id:u,schema:e,localRefs:d,cacheKey:a,meta:r});"#"!=u[0]&&n&&(this._refs[u]=h);this._cache.put(a,h),p&&l&&this.validateSchema(e,!0);return h},Ajv.prototype._compile=function _compile(e,t){if(e.compiling)return e.validate=callValidate,callValidate.schema=e.schema,callValidate.errors=null,callValidate.root=t||callValidate,!0===e.schema.$async&&(callValidate.$async=!0),callValidate;var r,i;e.compiling=!0,e.meta&&(r=this._opts,this._opts=this._metaOpts);try{i=n.call(this,e.schema,t,e.localRefs)}catch(t){throw delete e.validate,t}finally{e.compiling=!1,e.meta&&(this._opts=r)}return e.validate=i,e.refs=i.refs,e.refVal=i.refVal,e.root=i.root,i;function callValidate(){var t=e.validate,r=t.apply(this,arguments);return callValidate.errors=t.errors,r}},Ajv.prototype.compileAsync=r(723);var d=r(724);Ajv.prototype.addKeyword=d.add,Ajv.prototype.getKeyword=d.get,Ajv.prototype.removeKeyword=d.remove,Ajv.prototype.validateKeyword=d.validate;var h=r(199);Ajv.ValidationError=h.Validation,Ajv.MissingRefError=h.MissingRef,Ajv.$dataMetaSchema=l;var f="http://json-schema.org/draft-07/schema",m=["removeAdditional","useDefaults","coerceTypes","strictDefaults"],g=["/properties"];function Ajv(e){if(!(this instanceof Ajv))return new Ajv(e);e=this._opts=p.copy(e)||{},function setLogger(e){var t=e._opts.logger;if(!1===t)e.logger={log:noop,warn:noop,error:noop};else{if(void 0===t&&(t=console),!("object"==typeof t&&t.log&&t.warn&&t.error))throw new Error("logger must implement log, warn and error methods");e.logger=t}}(this),this._schemas={},this._refs={},this._fragments={},this._formats=c(e.format),this._cache=e.cache||new o,this._loadingSchemas={},this._compilations=[],this.RULES=u(),this._getId=function chooseGetId(e){switch(e.schemaId){case"auto":return _get$IdOrId;case"id":return _getId;default:return _get$Id}}(e),e.loopRequired=e.loopRequired||1/0,"property"==e.errorDataPath&&(e._errorDataPathProperty=!0),void 0===e.serialize&&(e.serialize=a),this._metaOpts=function getMetaSchemaOptions(e){for(var t=p.copy(e._opts),r=0;r<m.length;r++)delete t[m[r]];return t}(this),e.formats&&function addInitialFormats(e){for(var t in e._opts.formats){var r=e._opts.formats[t];e.addFormat(t,r)}}(this),function addDefaultMetaSchema(e){var t;e._opts.$data&&(t=r(726),e.addMetaSchema(t,t.$id,!0));if(!1===e._opts.meta)return;var n=r(330);e._opts.$data&&(n=l(n,g));e.addMetaSchema(n,f,!0),e._refs["http://json-schema.org/schema"]=f}(this),"object"==typeof e.meta&&this.addMetaSchema(e.meta),e.nullable&&this.addKeyword("nullable",{metaSchema:{type:"boolean"}}),function addInitialSchemas(e){var t=e._opts.schemas;if(!t)return;if(Array.isArray(t))e.addSchema(t);else for(var r in t)e.addSchema(t[r],r)}(this)}function _getSchemaObj(e,t){return t=i.normalizeId(t),e._schemas[t]||e._refs[t]||e._fragments[t]}function _removeAllSchemas(e,t,r){for(var n in t){var i=t[n];i.meta||r&&!r.test(n)||(e._cache.del(i.cacheKey),delete t[n])}}function _getId(e){return e.$id&&this.logger.warn("schema $id ignored",e.$id),e.id}function _get$Id(e){return e.id&&this.logger.warn("schema id ignored",e.id),e.$id}function _get$IdOrId(e){if(e.$id&&e.id&&e.$id!=e.id)throw new Error("schema $id is different from id");return e.$id||e.id}function checkUnique(e,t){if(e._schemas[t]||e._refs[t])throw new Error('schema with key or id "'+t+'" already exists')}function noop(){}},function(e,t,r){"use strict";var n=r(91);e.exports=function SchemaObject(e){n.copy(e,this)}},function(e,t,r){"use strict";e.exports=function(e,t){t||(t={}),"function"==typeof t&&(t={cmp:t});var r,n="boolean"==typeof t.cycles&&t.cycles,i=t.cmp&&(r=t.cmp,function(e){return function(t,n){var i={key:t,value:e[t]},o={key:n,value:e[n]};return r(i,o)}}),o=[];return function stringify(e){if(e&&e.toJSON&&"function"==typeof e.toJSON&&(e=e.toJSON()),void 0!==e){if("number"==typeof e)return isFinite(e)?""+e:"null";if("object"!=typeof e)return JSON.stringify(e);var t,r;if(Array.isArray(e)){for(r="[",t=0;t<e.length;t++)t&&(r+=","),r+=stringify(e[t])||"null";return r+"]"}if(null===e)return"null";if(-1!==o.indexOf(e)){if(n)return JSON.stringify("__cycle__");throw new TypeError("Converting circular structure to JSON")}var s=o.push(e)-1,a=Object.keys(e).sort(i&&i(e));for(r="",t=0;t<a.length;t++){var c=a[t],u=stringify(e[c]);u&&(r&&(r+=","),r+=JSON.stringify(c)+":"+u)}return o.splice(s,1),"{"+r+"}"}}(e)}},function(e,t,r){"use strict";e.exports=function generate_validate(e,t,r){var n="",i=!0===e.schema.$async,o=e.util.schemaHasRulesExcept(e.schema,e.RULES.all,"$ref"),s=e.self._getId(e.schema);if(e.opts.strictKeywords){var a=e.util.schemaUnknownRules(e.schema,e.RULES.keywords);if(a){var c="unknown keyword: "+a;if("log"!==e.opts.strictKeywords)throw new Error(c);e.logger.warn(c)}}if(e.isTop&&(n+=" var validate = ",i&&(e.async=!0,n+="async "),n+="function(data, dataPath, parentData, parentDataProperty, rootData) { 'use strict'; ",s&&(e.opts.sourceCode||e.opts.processCode)&&(n+=" /*# sourceURL="+s+" */ ")),"boolean"==typeof e.schema||!o&&!e.schema.$ref){var u=e.level,l=e.dataLevel,p=e.schema["false schema"],d=e.schemaPath+e.util.getProperty("false schema"),h=e.errSchemaPath+"/false schema",f=!e.opts.allErrors,m="data"+(l||""),g="valid"+u;if(!1===e.schema){e.isTop?f=!0:n+=" var "+g+" = false; ",(K=K||[]).push(n),n="",!1!==e.createErrors?(n+=" { keyword: 'false schema' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(h)+" , params: {} ",!1!==e.opts.messages&&(n+=" , message: 'boolean schema is false' "),e.opts.verbose&&(n+=" , schema: false , parentSchema: validate.schema"+e.schemaPath+" , data: "+m+" "),n+=" } "):n+=" {} ";var y=n;n=K.pop(),!e.compositeRule&&f?e.async?n+=" throw new ValidationError(["+y+"]); ":n+=" validate.errors = ["+y+"]; return false; ":n+=" var err = "+y+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; "}else e.isTop?n+=i?" return data; ":" validate.errors = null; return true; ":n+=" var "+g+" = true; ";return e.isTop&&(n+=" }; return validate; "),n}if(e.isTop){var v=e.isTop;u=e.level=0,l=e.dataLevel=0,m="data";if(e.rootId=e.resolve.fullPath(e.self._getId(e.root.schema)),e.baseId=e.baseId||e.rootId,delete e.isTop,e.dataPathArr=[void 0],void 0!==e.schema.default&&e.opts.useDefaults&&e.opts.strictDefaults){var b="default is ignored in the schema root";if("log"!==e.opts.strictDefaults)throw new Error(b);e.logger.warn(b)}n+=" var vErrors = null; ",n+=" var errors = 0;     ",n+=" if (rootData === undefined) rootData = data; "}else{u=e.level,m="data"+((l=e.dataLevel)||"");if(s&&(e.baseId=e.resolve.url(e.baseId,s)),i&&!e.async)throw new Error("async schema in sync schema");n+=" var errs_"+u+" = errors;"}g="valid"+u,f=!e.opts.allErrors;var _="",w="",E=e.schema.type,S=Array.isArray(E);if(E&&e.opts.nullable&&!0===e.schema.nullable&&(S?-1==E.indexOf("null")&&(E=E.concat("null")):"null"!=E&&(E=[E,"null"],S=!0)),S&&1==E.length&&(E=E[0],S=!1),e.schema.$ref&&o){if("fail"==e.opts.extendRefs)throw new Error('$ref: validation keywords used in schema at path "'+e.errSchemaPath+'" (see option extendRefs)');!0!==e.opts.extendRefs&&(o=!1,e.logger.warn('$ref: keywords ignored in schema at path "'+e.errSchemaPath+'"'))}if(e.schema.$comment&&e.opts.$comment&&(n+=" "+e.RULES.all.$comment.code(e,"$comment")),E){if(e.opts.coerceTypes)var C=e.util.coerceToTypes(e.opts.coerceTypes,E);var x=e.RULES.types[E];if(C||S||!0===x||x&&!$shouldUseGroup(x)){d=e.schemaPath+".type",h=e.errSchemaPath+"/type",d=e.schemaPath+".type",h=e.errSchemaPath+"/type";var k=S?"checkDataTypes":"checkDataType";if(n+=" if ("+e.util[k](E,m,!0)+") { ",C){var R="dataType"+u,T="coerced"+u;n+=" var "+R+" = typeof "+m+"; ","array"==e.opts.coerceTypes&&(n+=" if ("+R+" == 'object' && Array.isArray("+m+")) "+R+" = 'array'; "),n+=" var "+T+" = undefined; ";var O="",I=C;if(I)for(var N,A=-1,P=I.length-1;A<P;)N=I[A+=1],A&&(n+=" if ("+T+" === undefined) { ",O+="}"),"array"==e.opts.coerceTypes&&"array"!=N&&(n+=" if ("+R+" == 'array' && "+m+".length == 1) { "+T+" = "+m+" = "+m+"[0]; "+R+" = typeof "+m+";  } "),"string"==N?n+=" if ("+R+" == 'number' || "+R+" == 'boolean') "+T+" = '' + "+m+"; else if ("+m+" === null) "+T+" = ''; ":"number"==N||"integer"==N?(n+=" if ("+R+" == 'boolean' || "+m+" === null || ("+R+" == 'string' && "+m+" && "+m+" == +"+m+" ","integer"==N&&(n+=" && !("+m+" % 1)"),n+=")) "+T+" = +"+m+"; "):"boolean"==N?n+=" if ("+m+" === 'false' || "+m+" === 0 || "+m+" === null) "+T+" = false; else if ("+m+" === 'true' || "+m+" === 1) "+T+" = true; ":"null"==N?n+=" if ("+m+" === '' || "+m+" === 0 || "+m+" === false) "+T+" = null; ":"array"==e.opts.coerceTypes&&"array"==N&&(n+=" if ("+R+" == 'string' || "+R+" == 'number' || "+R+" == 'boolean' || "+m+" == null) "+T+" = ["+m+"]; ");n+=" "+O+" if ("+T+" === undefined) {   ",(K=K||[]).push(n),n="",!1!==e.createErrors?(n+=" { keyword: 'type' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(h)+" , params: { type: '",n+=S?""+E.join(","):""+E,n+="' } ",!1!==e.opts.messages&&(n+=" , message: 'should be ",n+=S?""+E.join(","):""+E,n+="' "),e.opts.verbose&&(n+=" , schema: validate.schema"+d+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+m+" "),n+=" } "):n+=" {} ";y=n;n=K.pop(),!e.compositeRule&&f?e.async?n+=" throw new ValidationError(["+y+"]); ":n+=" validate.errors = ["+y+"]; return false; ":n+=" var err = "+y+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",n+=" } else {  ";var L=l?"data"+(l-1||""):"parentData";n+=" "+m+" = "+T+"; ",l||(n+="if ("+L+" !== undefined)"),n+=" "+L+"["+(l?e.dataPathArr[l]:"parentDataProperty")+"] = "+T+"; } "}else{(K=K||[]).push(n),n="",!1!==e.createErrors?(n+=" { keyword: 'type' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(h)+" , params: { type: '",n+=S?""+E.join(","):""+E,n+="' } ",!1!==e.opts.messages&&(n+=" , message: 'should be ",n+=S?""+E.join(","):""+E,n+="' "),e.opts.verbose&&(n+=" , schema: validate.schema"+d+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+m+" "),n+=" } "):n+=" {} ";y=n;n=K.pop(),!e.compositeRule&&f?e.async?n+=" throw new ValidationError(["+y+"]); ":n+=" validate.errors = ["+y+"]; return false; ":n+=" var err = "+y+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; "}n+=" } "}}if(e.schema.$ref&&!o)n+=" "+e.RULES.all.$ref.code(e,"$ref")+" ",f&&(n+=" } if (errors === ",n+=v?"0":"errs_"+u,n+=") { ",w+="}");else{var D=e.RULES;if(D)for(var M=-1,j=D.length-1;M<j;)if($shouldUseGroup(x=D[M+=1])){if(x.type&&(n+=" if ("+e.util.checkDataType(x.type,m)+") { "),e.opts.useDefaults)if("object"==x.type&&e.schema.properties){p=e.schema.properties;var q=Object.keys(p);if(q)for(var F,z=-1,U=q.length-1;z<U;){if(void 0!==($=p[F=q[z+=1]]).default){var B=m+e.util.getProperty(F);if(e.compositeRule){if(e.opts.strictDefaults){b="default is ignored for: "+B;if("log"!==e.opts.strictDefaults)throw new Error(b);e.logger.warn(b)}}else n+=" if ("+B+" === undefined ","empty"==e.opts.useDefaults&&(n+=" || "+B+" === null || "+B+" === '' "),n+=" ) "+B+" = ","shared"==e.opts.useDefaults?n+=" "+e.useDefault($.default)+" ":n+=" "+JSON.stringify($.default)+" ",n+="; "}}}else if("array"==x.type&&Array.isArray(e.schema.items)){var H=e.schema.items;if(H){A=-1;for(var $,V=H.length-1;A<V;)if(void 0!==($=H[A+=1]).default){B=m+"["+A+"]";if(e.compositeRule){if(e.opts.strictDefaults){b="default is ignored for: "+B;if("log"!==e.opts.strictDefaults)throw new Error(b);e.logger.warn(b)}}else n+=" if ("+B+" === undefined ","empty"==e.opts.useDefaults&&(n+=" || "+B+" === null || "+B+" === '' "),n+=" ) "+B+" = ","shared"==e.opts.useDefaults?n+=" "+e.useDefault($.default)+" ":n+=" "+JSON.stringify($.default)+" ",n+="; "}}}var G=x.rules;if(G)for(var W,J=-1,X=G.length-1;J<X;)if($shouldUseRule(W=G[J+=1])){var Y=W.code(e,W.keyword,x.type);Y&&(n+=" "+Y+" ",f&&(_+="}"))}if(f&&(n+=" "+_+" ",_=""),x.type&&(n+=" } ",E&&E===x.type&&!C)){n+=" else { ";var K;d=e.schemaPath+".type",h=e.errSchemaPath+"/type";(K=K||[]).push(n),n="",!1!==e.createErrors?(n+=" { keyword: 'type' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(h)+" , params: { type: '",n+=S?""+E.join(","):""+E,n+="' } ",!1!==e.opts.messages&&(n+=" , message: 'should be ",n+=S?""+E.join(","):""+E,n+="' "),e.opts.verbose&&(n+=" , schema: validate.schema"+d+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+m+" "),n+=" } "):n+=" {} ";y=n;n=K.pop(),!e.compositeRule&&f?e.async?n+=" throw new ValidationError(["+y+"]); ":n+=" validate.errors = ["+y+"]; return false; ":n+=" var err = "+y+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",n+=" } "}f&&(n+=" if (errors === ",n+=v?"0":"errs_"+u,n+=") { ",w+="}")}}function $shouldUseGroup(e){for(var t=e.rules,r=0;r<t.length;r++)if($shouldUseRule(t[r]))return!0}function $shouldUseRule(t){return void 0!==e.schema[t.keyword]||t.implements&&function $ruleImplementsSomeKeyword(t){for(var r=t.implements,n=0;n<r.length;n++)if(void 0!==e.schema[r[n]])return!0}(t)}return f&&(n+=" "+w+" "),v?(i?(n+=" if (errors === 0) return data;           ",n+=" else throw new ValidationError(vErrors); "):(n+=" validate.errors = vErrors; ",n+=" return errors === 0;       "),n+=" }; return validate;"):n+=" var "+g+" = errors === errs_"+u+";",n=e.util.cleanUpCode(n),v&&(n=e.util.finalCleanUpCode(n,i)),n}},function(e,t,r){"use strict";e.exports=function generate__limit(e,t,r){var n,i=" ",o=e.level,s=e.dataLevel,a=e.schema[t],c=e.schemaPath+e.util.getProperty(t),u=e.errSchemaPath+"/"+t,l=!e.opts.allErrors,p="data"+(s||""),d=e.opts.$data&&a&&a.$data;d?(i+=" var schema"+o+" = "+e.util.getData(a.$data,s,e.dataPathArr)+"; ",n="schema"+o):n=a;var h="maximum"==t,f=h?"exclusiveMaximum":"exclusiveMinimum",m=e.schema[f],g=e.opts.$data&&m&&m.$data,y=h?"<":">",v=h?">":"<",b=void 0;if(g){var _=e.util.getData(m.$data,s,e.dataPathArr),w="exclusive"+o,E="exclType"+o,S="exclIsNumber"+o,C="' + "+(R="op"+o)+" + '";i+=" var schemaExcl"+o+" = "+_+"; ",i+=" var "+w+"; var "+E+" = typeof "+(_="schemaExcl"+o)+"; if ("+E+" != 'boolean' && "+E+" != 'undefined' && "+E+" != 'number') { ";var x;b=f;(x=x||[]).push(i),i="",!1!==e.createErrors?(i+=" { keyword: '"+(b||"_exclusiveLimit")+"' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(u)+" , params: {} ",!1!==e.opts.messages&&(i+=" , message: '"+f+" should be boolean' "),e.opts.verbose&&(i+=" , schema: validate.schema"+c+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+p+" "),i+=" } "):i+=" {} ";var k=i;i=x.pop(),!e.compositeRule&&l?e.async?i+=" throw new ValidationError(["+k+"]); ":i+=" validate.errors = ["+k+"]; return false; ":i+=" var err = "+k+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",i+=" } else if ( ",d&&(i+=" ("+n+" !== undefined && typeof "+n+" != 'number') || "),i+=" "+E+" == 'number' ? ( ("+w+" = "+n+" === undefined || "+_+" "+y+"= "+n+") ? "+p+" "+v+"= "+_+" : "+p+" "+v+" "+n+" ) : ( ("+w+" = "+_+" === true) ? "+p+" "+v+"= "+n+" : "+p+" "+v+" "+n+" ) || "+p+" !== "+p+") { var op"+o+" = "+w+" ? '"+y+"' : '"+y+"='; ",void 0===a&&(b=f,u=e.errSchemaPath+"/"+f,n=_,d=g)}else{C=y;if((S="number"==typeof m)&&d){var R="'"+C+"'";i+=" if ( ",d&&(i+=" ("+n+" !== undefined && typeof "+n+" != 'number') || "),i+=" ( "+n+" === undefined || "+m+" "+y+"= "+n+" ? "+p+" "+v+"= "+m+" : "+p+" "+v+" "+n+" ) || "+p+" !== "+p+") { "}else{S&&void 0===a?(w=!0,b=f,u=e.errSchemaPath+"/"+f,n=m,v+="="):(S&&(n=Math[h?"min":"max"](m,a)),m===(!S||n)?(w=!0,b=f,u=e.errSchemaPath+"/"+f,v+="="):(w=!1,C+="="));R="'"+C+"'";i+=" if ( ",d&&(i+=" ("+n+" !== undefined && typeof "+n+" != 'number') || "),i+=" "+p+" "+v+" "+n+" || "+p+" !== "+p+") { "}}b=b||t,(x=x||[]).push(i),i="",!1!==e.createErrors?(i+=" { keyword: '"+(b||"_limit")+"' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(u)+" , params: { comparison: "+R+", limit: "+n+", exclusive: "+w+" } ",!1!==e.opts.messages&&(i+=" , message: 'should be "+C+" ",i+=d?"' + "+n:n+"'"),e.opts.verbose&&(i+=" , schema:  ",i+=d?"validate.schema"+c:""+a,i+="         , parentSchema: validate.schema"+e.schemaPath+" , data: "+p+" "),i+=" } "):i+=" {} ";k=i;return i=x.pop(),!e.compositeRule&&l?e.async?i+=" throw new ValidationError(["+k+"]); ":i+=" validate.errors = ["+k+"]; return false; ":i+=" var err = "+k+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",i+=" } ",l&&(i+=" else { "),i}},function(e,t,r){"use strict";e.exports=function generate__limitItems(e,t,r){var n,i=" ",o=e.level,s=e.dataLevel,a=e.schema[t],c=e.schemaPath+e.util.getProperty(t),u=e.errSchemaPath+"/"+t,l=!e.opts.allErrors,p="data"+(s||""),d=e.opts.$data&&a&&a.$data;d?(i+=" var schema"+o+" = "+e.util.getData(a.$data,s,e.dataPathArr)+"; ",n="schema"+o):n=a,i+="if ( ",d&&(i+=" ("+n+" !== undefined && typeof "+n+" != 'number') || "),i+=" "+p+".length "+("maxItems"==t?">":"<")+" "+n+") { ";var h=t,f=f||[];f.push(i),i="",!1!==e.createErrors?(i+=" { keyword: '"+(h||"_limitItems")+"' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(u)+" , params: { limit: "+n+" } ",!1!==e.opts.messages&&(i+=" , message: 'should NOT have ",i+="maxItems"==t?"more":"fewer",i+=" than ",i+=d?"' + "+n+" + '":""+a,i+=" items' "),e.opts.verbose&&(i+=" , schema:  ",i+=d?"validate.schema"+c:""+a,i+="         , parentSchema: validate.schema"+e.schemaPath+" , data: "+p+" "),i+=" } "):i+=" {} ";var m=i;return i=f.pop(),!e.compositeRule&&l?e.async?i+=" throw new ValidationError(["+m+"]); ":i+=" validate.errors = ["+m+"]; return false; ":i+=" var err = "+m+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",i+="} ",l&&(i+=" else { "),i}},function(e,t,r){"use strict";e.exports=function generate__limitLength(e,t,r){var n,i=" ",o=e.level,s=e.dataLevel,a=e.schema[t],c=e.schemaPath+e.util.getProperty(t),u=e.errSchemaPath+"/"+t,l=!e.opts.allErrors,p="data"+(s||""),d=e.opts.$data&&a&&a.$data;d?(i+=" var schema"+o+" = "+e.util.getData(a.$data,s,e.dataPathArr)+"; ",n="schema"+o):n=a;var h="maxLength"==t?">":"<";i+="if ( ",d&&(i+=" ("+n+" !== undefined && typeof "+n+" != 'number') || "),!1===e.opts.unicode?i+=" "+p+".length ":i+=" ucs2length("+p+") ",i+=" "+h+" "+n+") { ";var f=t,m=m||[];m.push(i),i="",!1!==e.createErrors?(i+=" { keyword: '"+(f||"_limitLength")+"' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(u)+" , params: { limit: "+n+" } ",!1!==e.opts.messages&&(i+=" , message: 'should NOT be ",i+="maxLength"==t?"longer":"shorter",i+=" than ",i+=d?"' + "+n+" + '":""+a,i+=" characters' "),e.opts.verbose&&(i+=" , schema:  ",i+=d?"validate.schema"+c:""+a,i+="         , parentSchema: validate.schema"+e.schemaPath+" , data: "+p+" "),i+=" } "):i+=" {} ";var g=i;return i=m.pop(),!e.compositeRule&&l?e.async?i+=" throw new ValidationError(["+g+"]); ":i+=" validate.errors = ["+g+"]; return false; ":i+=" var err = "+g+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",i+="} ",l&&(i+=" else { "),i}},function(e,t,r){"use strict";e.exports=function generate__limitProperties(e,t,r){var n,i=" ",o=e.level,s=e.dataLevel,a=e.schema[t],c=e.schemaPath+e.util.getProperty(t),u=e.errSchemaPath+"/"+t,l=!e.opts.allErrors,p="data"+(s||""),d=e.opts.$data&&a&&a.$data;d?(i+=" var schema"+o+" = "+e.util.getData(a.$data,s,e.dataPathArr)+"; ",n="schema"+o):n=a,i+="if ( ",d&&(i+=" ("+n+" !== undefined && typeof "+n+" != 'number') || "),i+=" Object.keys("+p+").length "+("maxProperties"==t?">":"<")+" "+n+") { ";var h=t,f=f||[];f.push(i),i="",!1!==e.createErrors?(i+=" { keyword: '"+(h||"_limitProperties")+"' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(u)+" , params: { limit: "+n+" } ",!1!==e.opts.messages&&(i+=" , message: 'should NOT have ",i+="maxProperties"==t?"more":"fewer",i+=" than ",i+=d?"' + "+n+" + '":""+a,i+=" properties' "),e.opts.verbose&&(i+=" , schema:  ",i+=d?"validate.schema"+c:""+a,i+="         , parentSchema: validate.schema"+e.schemaPath+" , data: "+p+" "),i+=" } "):i+=" {} ";var m=i;return i=f.pop(),!e.compositeRule&&l?e.async?i+=" throw new ValidationError(["+m+"]); ":i+=" validate.errors = ["+m+"]; return false; ":i+=" var err = "+m+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",i+="} ",l&&(i+=" else { "),i}},function(e){e.exports={$schema:"http://json-schema.org/draft-07/schema#",$id:"http://json-schema.org/draft-07/schema#",title:"Core schema meta-schema",definitions:{schemaArray:{type:"array",minItems:1,items:{$ref:"#"}},nonNegativeInteger:{type:"integer",minimum:0},nonNegativeIntegerDefault0:{allOf:[{$ref:"#/definitions/nonNegativeInteger"},{default:0}]},simpleTypes:{enum:["array","boolean","integer","null","number","object","string"]},stringArray:{type:"array",items:{type:"string"},uniqueItems:!0,default:[]}},type:["object","boolean"],properties:{$id:{type:"string",format:"uri-reference"},$schema:{type:"string",format:"uri"},$ref:{type:"string",format:"uri-reference"},$comment:{type:"string"},title:{type:"string"},description:{type:"string"},default:!0,readOnly:{type:"boolean",default:!1},examples:{type:"array",items:!0},multipleOf:{type:"number",exclusiveMinimum:0},maximum:{type:"number"},exclusiveMaximum:{type:"number"},minimum:{type:"number"},exclusiveMinimum:{type:"number"},maxLength:{$ref:"#/definitions/nonNegativeInteger"},minLength:{$ref:"#/definitions/nonNegativeIntegerDefault0"},pattern:{type:"string",format:"regex"},additionalItems:{$ref:"#"},items:{anyOf:[{$ref:"#"},{$ref:"#/definitions/schemaArray"}],default:!0},maxItems:{$ref:"#/definitions/nonNegativeInteger"},minItems:{$ref:"#/definitions/nonNegativeIntegerDefault0"},uniqueItems:{type:"boolean",default:!1},contains:{$ref:"#"},maxProperties:{$ref:"#/definitions/nonNegativeInteger"},minProperties:{$ref:"#/definitions/nonNegativeIntegerDefault0"},required:{$ref:"#/definitions/stringArray"},additionalProperties:{$ref:"#"},definitions:{type:"object",additionalProperties:{$ref:"#"},default:{}},properties:{type:"object",additionalProperties:{$ref:"#"},default:{}},patternProperties:{type:"object",additionalProperties:{$ref:"#"},propertyNames:{format:"regex"},default:{}},dependencies:{type:"object",additionalProperties:{anyOf:[{$ref:"#"},{$ref:"#/definitions/stringArray"}]}},propertyNames:{$ref:"#"},const:!0,enum:{type:"array",items:!0,minItems:1,uniqueItems:!0},type:{anyOf:[{$ref:"#/definitions/simpleTypes"},{type:"array",items:{$ref:"#/definitions/simpleTypes"},minItems:1,uniqueItems:!0}]},format:{type:"string"},contentMediaType:{type:"string"},contentEncoding:{type:"string"},if:{$ref:"#"},then:{$ref:"#"},else:{$ref:"#"},allOf:{$ref:"#/definitions/schemaArray"},anyOf:{$ref:"#/definitions/schemaArray"},oneOf:{$ref:"#/definitions/schemaArray"},not:{$ref:"#"}},default:!0}},function(e,t){e.exports;e.exports={SharedAccessPermissions:{READ:"r",CREATE:"c",WRITE:"w",DELETE:"d",LIST:"l"},ListingDetails:{METADATA:"metadata"},SharePublicAccessType:{OFF:null,SHARE:"share",FILE:"file"},ShareSnapshotDeleteOptions:{SHARE_AND_SNAPSHOTS:"include"}}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=_interopRequireDefault(r(201)),i=_interopRequireDefault(r(333)),o=_interopRequireDefault(r(759)),s=_interopRequireDefault(r(760)),a=_interopRequireDefault(r(761)),c=_interopRequireDefault(r(762)),u=_interopRequireDefault(r(763)),l=_interopRequireDefault(r(764)),p=_interopRequireDefault(r(765)),d=_interopRequireDefault(r(766)),h=_interopRequireDefault(r(335)),f=_interopRequireDefault(r(203)),m=_interopRequireDefault(r(767)),g=_interopRequireDefault(r(768)),y=_interopRequireDefault(r(769)),v=_interopRequireDefault(r(770)),b=_interopRequireDefault(r(771)),_=_interopRequireDefault(r(772)),w=_interopRequireDefault(r(773)),E=_interopRequireDefault(r(774)),S=_interopRequireDefault(r(337)),C=_interopRequireDefault(r(338)),x=_interopRequireDefault(r(775)),k=_interopRequireDefault(r(776)),R=_interopRequireDefault(r(777)),T=_interopRequireDefault(r(336)),O=_interopRequireDefault(r(778)),I=_interopRequireDefault(r(779)),N=_interopRequireDefault(r(339)),A=_interopRequireDefault(r(780)),P=_interopRequireDefault(r(781)),L=_interopRequireDefault(r(782)),D=_interopRequireDefault(r(783)),M=_interopRequireDefault(r(784)),j=_interopRequireDefault(r(785)),q=_interopRequireDefault(r(786)),F=_interopRequireDefault(r(787)),z=_interopRequireDefault(r(334)),U=_interopRequireDefault(r(788)),B=_interopRequireDefault(r(789)),H=_interopRequireDefault(r(790)),$=_interopRequireDefault(r(791)),V=_interopRequireDefault(r(792)),G=_interopRequireDefault(r(793)),W=_interopRequireDefault(r(794)),J=_interopRequireDefault(r(795)),X=_interopRequireDefault(r(796)),Y=_interopRequireDefault(r(797)),K=_interopRequireDefault(r(798)),Q=_interopRequireDefault(r(799)),Z=_interopRequireDefault(r(800)),ee=_interopRequireDefault(r(801)),te=_interopRequireDefault(r(802)),re=_interopRequireDefault(r(803)),ne=_interopRequireDefault(r(804)),ie=_interopRequireDefault(r(805)),oe=_interopRequireDefault(r(340)),se=_interopRequireDefault(r(341)),ae=_interopRequireDefault(r(806)),ce=_interopRequireDefault(r(807)),ue=_interopRequireDefault(r(808)),le=_interopRequireDefault(r(809)),pe=_interopRequireDefault(r(810)),de=_interopRequireDefault(r(342)),he=_interopRequireDefault(r(811)),fe=_interopRequireDefault(r(812)),me=_interopRequireDefault(r(202));function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}var ge={version:"9.4.1",toDate:n.default,toFloat:i.default,toInt:o.default,toBoolean:s.default,equals:a.default,contains:c.default,matches:u.default,isEmail:l.default,isURL:p.default,isMACAddress:d.default,isIP:h.default,isFQDN:f.default,isBoolean:m.default,isAlpha:g.default,isAlphanumeric:y.default,isNumeric:v.default,isPort:b.default,isLowercase:_.default,isUppercase:w.default,isAscii:E.default,isFullWidth:S.default,isHalfWidth:C.default,isVariableWidth:x.default,isMultibyte:k.default,isSurrogatePair:R.default,isInt:T.default,isFloat:O.default,isDecimal:I.default,isHexadecimal:N.default,isDivisibleBy:A.default,isHexColor:P.default,isISRC:L.default,isMD5:D.default,isHash:M.default,isJSON:j.default,isEmpty:q.default,isLength:F.default,isByteLength:z.default,isUUID:U.default,isMongoId:B.default,isAfter:H.default,isBefore:$.default,isIn:V.default,isCreditCard:G.default,isISIN:W.default,isISBN:J.default,isISSN:X.default,isMobilePhone:Y.default,isPostalCode:ie.default,isCurrency:K.default,isISO8601:Q.default,isISO31661Alpha2:Z.default,isBase64:ee.default,isDataURI:te.default,isMimeType:re.default,isLatLong:ne.default,ltrim:oe.default,rtrim:se.default,trim:ae.default,escape:ce.default,unescape:ue.default,stripLow:le.default,whitelist:pe.default,blacklist:de.default,isWhitelisted:he.default,normalizeEmail:fe.default,toString:me.default};t.default=ge,e.exports=t.default},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function toFloat(e){return(0,n.default)(e),parseFloat(e)};var n=function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}(r(2));e.exports=t.default},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};t.default=function isByteLength(e,t){(0,i.default)(e);var r=void 0,o=void 0;"object"===(void 0===t?"undefined":n(t))?(r=t.min||0,o=t.max):(r=arguments[1],o=arguments[2]);var s=encodeURI(e).split(/%..|./).length-1;return s>=r&&(void 0===o||s<=o)};var i=function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}(r(2));e.exports=t.default},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function isIP(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";(0,n.default)(e);t=String(t);if(!t)return isIP(e,4)||isIP(e,6);if("4"===t){if(!i.test(e))return!1;var r=e.split(".").sort(function(e,t){return e-t});return r[3]<=255}if("6"===t){var s=e.split(":"),a=!1,c=isIP(s[s.length-1],4),u=c?7:8;if(s.length>u)return!1;if("::"===e)return!0;"::"===e.substr(0,2)?(s.shift(),s.shift(),a=!0):"::"===e.substr(e.length-2)&&(s.pop(),s.pop(),a=!0);for(var l=0;l<s.length;++l)if(""===s[l]&&l>0&&l<s.length-1){if(a)return!1;a=!0}else if(c&&l===s.length-1);else if(!o.test(s[l]))return!1;return a?s.length>=1:s.length===u}return!1};var n=function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}(r(2));var i=/^(\d{1,3})\.(\d{1,3})\.(\d{1,3})\.(\d{1,3})$/,o=/^[0-9A-F]{1,4}$/i;e.exports=t.default},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function isInt(e,t){(0,n.default)(e);var r=(t=t||{}).hasOwnProperty("allow_leading_zeroes")&&!t.allow_leading_zeroes?i:o,s=!t.hasOwnProperty("min")||e>=t.min,a=!t.hasOwnProperty("max")||e<=t.max,c=!t.hasOwnProperty("lt")||e<t.lt,u=!t.hasOwnProperty("gt")||e>t.gt;return r.test(e)&&s&&a&&c&&u};var n=function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}(r(2));var i=/^(?:[-+]?(?:0|[1-9][0-9]*))$/,o=/^[-+]?[0-9]+$/;e.exports=t.default},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.fullWidth=void 0,t.default=function isFullWidth(e){return(0,n.default)(e),i.test(e)};var n=function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}(r(2));var i=t.fullWidth=/[^\u0020-\u007E\uFF61-\uFF9F\uFFA0-\uFFDC\uFFE8-\uFFEE0-9a-zA-Z]/},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.halfWidth=void 0,t.default=function isHalfWidth(e){return(0,n.default)(e),i.test(e)};var n=function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}(r(2));var i=t.halfWidth=/[\u0020-\u007E\uFF61-\uFF9F\uFFA0-\uFFDC\uFFE8-\uFFEE0-9a-zA-Z]/},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function isHexadecimal(e){return(0,n.default)(e),i.test(e)};var n=function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}(r(2));var i=/^[0-9A-F]+$/i;e.exports=t.default},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function ltrim(e,t){(0,n.default)(e);var r=t?new RegExp("^["+t+"]+","g"):/^\s+/g;return e.replace(r,"")};var n=function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}(r(2));e.exports=t.default},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function rtrim(e,t){(0,n.default)(e);var r=t?new RegExp("["+t+"]"):/\s/,i=e.length-1;for(;i>=0&&r.test(e[i]);)i--;return i<e.length?e.substr(0,i+1):e};var n=function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}(r(2));e.exports=t.default},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function blacklist(e,t){return(0,n.default)(e),e.replace(new RegExp("["+t+"]+","g"),"")};var n=function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}(r(2));e.exports=t.default},function(e,t,r){var n=r(15);function BufferStream(e,t){n.Readable.call(this,t),this._buffer=e,this._offset=0,this._chunkSize=4194304,this._bufferSize=e.length}r(1).inherits(BufferStream,n.Readable),BufferStream.prototype._read=function(){for(;this.push(this._readNextChunk()););},BufferStream.prototype._readNextChunk=function(){var e=null;if(this._offset<this._bufferSize){var t=this._offset+this._chunkSize;t=t>this._bufferSize?this._bufferSize:t,e=this._buffer.slice(this._offset,t),this._offset=t}return e},e.exports=BufferStream},function(e,t,r){var n=r(1),i=r(36),o=r(76),s=r(63),a=r(22);(t=e.exports).DEFAULT_PROTOCOL=a.HTTPS;var c=function(e,t){o.captureStackTrace(this,t||this),this.message=e||"Error"};n.inherits(c,Error),c.prototype.name="NoMatchError",t.NoMatchError=c,t.noMatchConnectionString=function(e){throw new c('The provided connection string "'+e+'" does not have complete configuration settings.')},t.noMatchSettings=function(e){throw new c("The provided settings "+JSON.stringify(e)+" are not complete.")},t.parseAndValidateKeys=function(e,t){for(var r={},o=e.split(";"),a=0;a<o.length;a++)if(0!==o[a].length){var c=o[a].indexOf("=");if(c<0)throw new SyntaxError(s.INVALID_CONNECTION_STRING);if(0===c)throw new SyntaxError(s.INVALID_CONNECTION_STRING_EMPTY_KEY);var u=o[a].substring(0,c);if(!i.inArrayInsensitive(u,t))throw new SyntaxError(n.format(s.INVALID_CONNECTION_STRING_BAD_KEY,u));var l=o[a].substring(c+1);if(void 0!==r[u])throw new SyntaxError(n.format(s.INVALID_CONNECTION_STRING_DUPLICATE_KEY,u));r[u]=l}return r},t.getValidator=function(e,t,r){return function(n){var i=!1,o={};for(var s in n)n.hasOwnProperty(s)&&(o[s.toLowerCase()]=n[s]);for(var a in e)if(e.hasOwnProperty(a)){var c=e[a].SettingName.toLowerCase();if(o[c])(0,e[a].SettingConstraint)(o[c])&&(delete o[c],i=!0);else if(t)return null}return r?i?o:null:o}},t.setting=function(e){var r=Array.prototype.slice.call(arguments,1,arguments.length);return t.settingWithFunc(e,function(e){var t=JSON.stringify(r);if(0===r.length)return!0;for(var n=0;n<r.length;n++)if(e.toString()==r[n].toString())return!0;throw new RangeError("The provided config value "+e+" does not belong to the valid values subset:\n"+t)})},t.atLeastOne=function(){var e=arguments;return t.getValidator(e,!1,!0)},t.optional=function(){var e=arguments;return t.getValidator(e,!1,!1)},t.allRequired=function(){var e=arguments;return t.getValidator(e,!0,!1)},t.settingWithFunc=function(e,t){var r={};return r.SettingName=e,r.SettingConstraint=t,r},t.matchedSpecification=function(e){var t=Array.prototype.slice.call(arguments,1,arguments.length);for(var r in t)if(t.hasOwnProperty(r)){var n=t[r](e);if(!n)return!1;e=n}return 0===i.objectKeysLength(e)}},function(e,t){function TokenCredential(e){this.token=e}TokenCredential.prototype.get=function(){return this.token},TokenCredential.prototype.set=function(e){this.token=e},e.exports=TokenCredential},function(e,t,r){var n=r(29),i=r(140),o=r(22).ServicePropertiesConstants;function serializeRetentionPolicy(e,t){null!==t&&(void 0===t&&(t={}),e=e.ele(o.RETENTION_POLICY_ELEMENT),e=void 0!==t.Enabled?e.ele(o.ENABLED_ELEMENT).txt(t.Enabled).up():e.ele(o.ENABLED_ELEMENT).txt(!1).up(),void 0!==t.Days?e=e.ele(o.DAYS_ELEMENT).txt(t.Days).up():!0===t.Enabled&&(e=e.ele(o.DAYS_ELEMENT).txt(1).up()),e=e.up())}function serializeMetrics(e,t){e=void 0!==t.Version?e.ele(o.VERSION_ELEMENT).txt(t.Version).up():e.ele(o.VERSION_ELEMENT).txt(o.DEFAULT_ANALYTICS_VERSION).up(),e=void 0!==t.Enabled?e.ele(o.ENABLED_ELEMENT).txt(t.Enabled).up():e.ele(o.ENABLED_ELEMENT).txt(!1).up(),t.Enabled&&(void 0!==t.IncludeAPIs?e=e.ele(o.INCLUDE_APIS_ELEMENT).txt(t.IncludeAPIs).up():!0===t.Enabled&&(e=e.ele(o.INCLUDE_APIS_ELEMENT).txt(!1).up())),serializeRetentionPolicy(e,t.RetentionPolicy)}function parseRetentionPolicy(e){var t={};return void 0!==e.Enabled&&(t.Enabled="true"===e.Enabled),void 0!==e.Days&&(t.Days=parseInt(e.Days,10)),t}function parseMetrics(e){var t={};return void 0!==e.Version&&(t.Version=e.Version),void 0!==e.Enabled&&(t.Enabled="true"===e.Enabled),void 0!==e.IncludeAPIs&&(t.IncludeAPIs="true"===e.IncludeAPIs),void 0!==e.RetentionPolicy&&(t.RetentionPolicy=parseRetentionPolicy(e.RetentionPolicy)),t}(t=e.exports).serialize=function(e){var t=i.create(o.STORAGE_SERVICE_PROPERTIES_ELEMENT,{version:"1.0",encoding:"utf-8"});return e.Logging&&(function serializeLogging(e,t){e=void 0!==t.Version?e.ele(o.VERSION_ELEMENT).txt(t.Version).up():e.ele(o.VERSION_ELEMENT).txt(o.DEFAULT_ANALYTICS_VERSION).up(),e=void 0!==t.Delete?e.ele(o.DELETE_ELEMENT).txt(t.Delete).up():e.ele(o.DELETE_ELEMENT).txt(!1).up(),e=void 0!==t.Read?e.ele(o.READ_ELEMENT).txt(t.Read).up():e.ele(o.READ_ELEMENT).txt(!1).up(),serializeRetentionPolicy(e=void 0!==t.Write?e.ele(o.WRITE_ELEMENT).txt(t.Write).up():e.ele(o.WRITE_ELEMENT).txt(!1).up(),t.RetentionPolicy),e=e.up()}(t=t.ele(o.LOGGING_ELEMENT),e.Logging),t=t.up()),e.HourMetrics&&(serializeMetrics(t=t.ele(o.HOUR_METRICS_ELEMENT),e.HourMetrics),t=t.up()),e.MinuteMetrics&&(serializeMetrics(t=t.ele(o.MINUTE_METRICS_ELEMENT),e.MinuteMetrics),t=t.up()),e.Cors&&(function serializeCorsRules(e,t){null!=t&&n.isArray(t)&&t.forEach(function(t){e=e.ele(o.CORS_RULE_ELEMENT),void 0!==t.AllowedMethods&&n.isArray(t.AllowedMethods)&&(e=e.ele(o.ALLOWED_METHODS_ELEMENT).txt(t.AllowedMethods.join(",")).up()),void 0!==t.AllowedOrigins&&n.isArray(t.AllowedOrigins)&&(e=e.ele(o.ALLOWED_ORIGINS_ELEMENT).txt(t.AllowedOrigins.join(",")).up()),e=void 0!==t.AllowedHeaders&&n.isArray(t.AllowedHeaders)?e.ele(o.ALLOWED_HEADERS_ELEMENT).txt(t.AllowedHeaders.join(",")).up():e.ele(o.ALLOWED_HEADERS_ELEMENT).txt("").up(),e=void 0!==t.ExposedHeaders&&n.isArray(t.ExposedHeaders)?e.ele(o.EXPOSED_HEADERS_ELEMENT).txt(t.ExposedHeaders.join(",")).up():e.ele(o.EXPOSED_HEADERS_ELEMENT).txt("").up(),e=(e=void 0!==t.MaxAgeInSeconds?e.ele(o.MAX_AGE_IN_SECONDS_ELEMENT).txt(t.MaxAgeInSeconds).up():e.ele(o.MAX_AGE_IN_SECONDS_ELEMENT).txt("0").up()).up()})}(t=t.ele(o.CORS_ELEMENT),e.Cors.CorsRule),t=t.up()),e.DefaultServiceVersion&&(t=t.ele(o.DEFAULT_SERVICE_VERSION_ELEMENT).txt(e.DefaultServiceVersion).up()),e.DeleteRetentionPolicy&&(function serializeDeleteRetentionPolicy(e,t){null!==t&&(void 0===t&&(t={}),e=void 0!==t.Enabled?e.ele(o.ENABLED_ELEMENT).txt(t.Enabled).up():e.ele(o.ENABLED_ELEMENT).txt(!1).up(),void 0!==t.Days?e=e.ele(o.DAYS_ELEMENT).txt(t.Days).up():!0===t.Enabled&&(e=e.ele(o.DAYS_ELEMENT).txt(1).up()),e=e.up())}(t=t.ele(o.DEFAULT_DELETE_RETENTION_POLICY_ELEMENT),e.DeleteRetentionPolicy),t=t.up()),e.StaticWebsite&&(function serializeStaticWebsite(e,t){null!==t&&(void 0===t&&(t={}),e=void 0!==t.Enabled?e.ele(o.ENABLED_ELEMENT).txt(t.Enabled).up():e.ele(o.ENABLED_ELEMENT).txt(!1).up(),void 0!==t.IndexDocument&&(e=e.ele(o.DEFAULT_INDEX_DOCUMENT_ELEMENT).txt(t.IndexDocument).up()),void 0!==t.ErrorDocument404Path&&(e=e.ele(o.DEFAULT_ERROR_DOCUMENT_404_PATH_ELEMENT).txt(t.ErrorDocument404Path).up()),e=e.up())}(t=t.ele(o.DEFAULT_STATIC_WEBSITE_ELEMENT),e.StaticWebsite),t=t.up()),t.doc().toString()},t.parse=function(e){var t={};return void 0!==e.Logging&&(t.Logging=function parseLogging(e){var t={};return void 0!==e.Version&&(t.Version=e.Version),void 0!==e.Delete&&(t.Delete="true"===e.Delete),void 0!==e.Read&&(t.Read="true"===e.Read),void 0!==e.Write&&(t.Write="true"===e.Write),void 0!==e.RetentionPolicy&&(t.RetentionPolicy=parseRetentionPolicy(e.RetentionPolicy)),t}(e.Logging)),void 0!==e.HourMetrics&&(t.HourMetrics=parseMetrics(e.HourMetrics)),void 0!==e.MinuteMetrics&&(t.MinuteMetrics=parseMetrics(e.MinuteMetrics)),void 0!==e.Cors&&(t.Cors=function parseCors(e){var t={};if(void 0!==e.CorsRule){var r=e.CorsRule;n.isArray(r)||(r=[r]),t.CorsRule=[],r.forEach(function(e){var r={};void 0!==e.AllowedMethods&&(""!==e.AllowedMethods?r.AllowedMethods=e.AllowedMethods.split(","):r.AllowedMethods=[]),void 0!==e.AllowedOrigins&&(""!==e.AllowedOrigins?r.AllowedOrigins=e.AllowedOrigins.split(","):r.AllowedOrigins=[]),void 0!==e.AllowedHeaders&&(""!==e.AllowedHeaders?r.AllowedHeaders=e.AllowedHeaders.split(","):r.AllowedHeaders=[]),void 0!==e.ExposedHeaders&&(""!==e.ExposedHeaders?r.ExposedHeaders=e.ExposedHeaders.split(","):r.ExposedHeaders=[]),void 0!==e.MaxAgeInSeconds&&(r.MaxAgeInSeconds=parseInt(e.MaxAgeInSeconds,10)),t.CorsRule.push(r)})}return t}(e.Cors)),void 0!==e.DefaultServiceVersion&&(t.DefaultServiceVersion=e.DefaultServiceVersion),void 0!==e.DeleteRetentionPolicy&&(t.DeleteRetentionPolicy=function parseDeleteRetentionPolicy(e){var t={};return void 0!==e.Enabled&&(t.Enabled="true"===e.Enabled),void 0!==e.Days&&(t.Days=parseInt(e.Days)),t}(e.DeleteRetentionPolicy)),void 0!==e.StaticWebsite&&(t.StaticWebsite=function parseStaticWebsite(e){var t={};return void 0!==e.Enabled&&(t.Enabled="true"===e.Enabled),void 0!==e.IndexDocument&&(t.IndexDocument=e.IndexDocument),void 0!==e.ErrorDocument404Path&&(t.ErrorDocument404Path=e.ErrorDocument404Path),t}(e.StaticWebsite)),t}},function(e,t,r){var n=r(29),i=r(52),o=r(36),s=r(348),a=r(63),c=r(76).ArgumentError,u=r(22),l=u.HeaderConstants,p=u.QueryStringConstants,d=(l=u.HeaderConstants,u.CompatibleVersionConstants);function SharedKey(e,t,r){this.storageAccount=e,this.storageAccessKey=t,this.usePathStyleUri=r,this.signer=new s(t)}SharedKey.prototype.generateAccountSignedQueryString=function(e){var t,r=function(e,t,r){o.objectIsNull(t)||o.objectIsNull(r)||(e[t]=r)},s={};return r(s,p.SIGNED_VERSION,l.TARGET_STORAGE_VERSION),e.AccessPolicy&&(t=e.AccessPolicy,o.objectIsNull(t.Start)||(n.isDate(t.Start)||(t.Start=new Date(t.Start)),t.Start=o.truncatedISO8061Date(t.Start)),o.objectIsNull(t.Expiry)||(n.isDate(t.Expiry)||(t.Expiry=new Date(t.Expiry)),t.Expiry=o.truncatedISO8061Date(t.Expiry)),r(s,p.SIGNED_SERVICES,e.AccessPolicy.Services),r(s,p.SIGNED_RESOURCE_TYPES,e.AccessPolicy.ResourceTypes),r(s,p.SIGNED_PERMISSIONS,e.AccessPolicy.Permissions),r(s,p.SIGNED_START,e.AccessPolicy.Start),r(s,p.SIGNED_EXPIRY,e.AccessPolicy.Expiry),r(s,p.SIGNED_IP,e.AccessPolicy.IPAddressOrRange),r(s,p.SIGNED_PROTOCOL,e.AccessPolicy.Protocols)),r(s,p.SIGNATURE,this._generateAccountSharedAccessSignature(e)),i.stringify(s)},SharedKey.prototype._generateAccountSharedAccessSignature=function(e){var t=function(e,t){var r="";return o.objectIsNull(e)||(r=e),!0!==t&&(r+="\n"),r},r=t(this.storageAccount)+t(e.AccessPolicy?e.AccessPolicy.Permissions:"")+t(e.AccessPolicy?e.AccessPolicy.Services:"")+t(e.AccessPolicy?e.AccessPolicy.ResourceTypes:"")+t(e.AccessPolicy?e.AccessPolicy.Start:"")+t(e.AccessPolicy?e.AccessPolicy.Expiry:"")+t(e.AccessPolicy?e.AccessPolicy.IPAddressOrRange:"")+t(e.AccessPolicy?e.AccessPolicy.Protocols:"")+t(l.TARGET_STORAGE_VERSION);return this.signer.sign(r)},SharedKey.prototype.signRequest=function(e,t){var r=function(e,t){return t!==l.CONTENT_LENGTH||!o.objectIsNull(e[t])&&"0"!==e[t].toString()?o.objectIsNull(e)||o.objectIsNull(e[t])?"\n":e[t]+"\n":"\n"},n=e.method+"\n"+r(e.headers,l.CONTENT_ENCODING)+r(e.headers,l.CONTENT_LANGUAGE)+r(e.headers,l.CONTENT_LENGTH)+r(e.headers,l.CONTENT_MD5)+r(e.headers,l.CONTENT_TYPE)+r(e.headers,l.DATE)+r(e.headers,l.IF_MODIFIED_SINCE)+r(e.headers,l.IF_MATCH)+r(e.headers,l.IF_NONE_MATCH)+r(e.headers,l.IF_UNMODIFIED_SINCE)+r(e.headers,l.RANGE)+this._getCanonicalizedHeaders(e)+this._getCanonicalizedResource(e),i=this.signer.sign(n);e.withHeader(l.AUTHORIZATION,"SharedKey "+this.storageAccount+":"+i),t(null)},SharedKey.prototype._getCanonicalizedResource=function(e){var t="/";e.path&&(t=e.path);var r="/"+this.storageAccount+t,n=e.queryString;if(n){var i=[];Object.keys(n).forEach(function(e){i.push(e)}),i=i.sort(),Object.keys(i).forEach(function(e){r+="\n"+i[e]+":"+n[i[e]]})}return r},SharedKey.prototype._getCanonicalizedHeaders=function(e){var t="";if(e.headers){var r=[];for(var i in e.headers)if(0===i.indexOf(l.PREFIX_FOR_STORAGE)){var s={canonicalized:i.toLowerCase(),original:i};r.push(s)}r.sort(function(e,t){return e.canonicalized.localeCompare(t.canonicalized)}),n.each(r,function(r){var n=e.headers[r.original];o.IsNullOrEmptyOrUndefinedOrWhiteSpace(n)?t+=r.canonicalized+":\n":t+=r.canonicalized+":"+n+"\n"})}return t},SharedKey.prototype.generateSignedQueryString=function(e,t,r,s,u){var h,f,m,g,y,v=function(e,t,r){o.objectIsNull(t)||o.objectIsNull(r)||(e[t]=r)};u&&(h=u.queryString,f=u.resourceType,g=u.tableName,m=u.headers),h||(h={}),r.AccessPolicy&&(y=r.AccessPolicy,o.objectIsNull(y.Start)||(n.isDate(y.Start)||(y.Start=new Date(y.Start)),y.Start=o.truncatedISO8061Date(y.Start)),o.objectIsNull(y.Expiry)||(n.isDate(y.Expiry)||(y.Expiry=new Date(y.Expiry)),y.Expiry=o.truncatedISO8061Date(y.Expiry)),v(h,p.SIGNED_START,r.AccessPolicy.Start),v(h,p.SIGNED_EXPIRY,r.AccessPolicy.Expiry),v(h,p.SIGNED_PERMISSIONS,r.AccessPolicy.Permissions),v(h,p.SIGNED_IP,r.AccessPolicy.IPAddressOrRange),v(h,p.SIGNED_PROTOCOL,r.AccessPolicy.Protocols),v(h,p.STARTPK,r.AccessPolicy.StartPk),v(h,p.ENDPK,r.AccessPolicy.EndPk),v(h,p.STARTRK,r.AccessPolicy.StartRk),v(h,p.ENDRK,r.AccessPolicy.EndRk));var b=function(e){if(o.objectIsNull(e))return l.TARGET_STORAGE_VERSION;var t=n.values(d);if(t.some(function(t){return t.toLowerCase()===e.toLowerCase()}))return e;throw new c("sasVersion",o.stringFormat(a.INVALID_SAS_VERSION,e,t))}(s);return v(h,p.SIGNED_VERSION,b),v(h,p.SIGNED_IDENTIFIER,r.Id),v(h,p.SIGNED_RESOURCE,f),m&&(v(h,p.CACHE_CONTROL,m.cacheControl),v(h,p.CONTENT_TYPE,m.contentType),v(h,p.CONTENT_ENCODING,m.contentEncoding),v(h,p.CONTENT_LANGUAGE,m.contentLanguage),v(h,p.CONTENT_DISPOSITION,m.contentDisposition)),v(h,p.TABLENAME,g),v(h,p.SIGNATURE,this._generateSignature(e,t,r,b,{resourceType:f,headers:m,tableName:g})),i.stringify(h)},SharedKey.prototype._generateSignature=function(e,t,r,n,i){var s,u,l,p,h=function(e,t){var r="";return o.objectIsNull(e)||(r=e),!0!==t&&(r+="\n"),r};i&&(s=i.resourceType,u=i.tableName,l=i.headers),"/"!==t.substr(0,1)&&(t="/"+t),p=n===d.FEBRUARY_2012||n===d.AUGUST_2013?"/"+this.storageAccount+t:"/"+e+"/"+this.storageAccount+t;var f=h(r.AccessPolicy?r.AccessPolicy.Permissions:"")+h(r.AccessPolicy?r.AccessPolicy.Start:"")+h(r.AccessPolicy?r.AccessPolicy.Expiry:"")+h(p)+h(r.Id)+h(r.AccessPolicy?r.AccessPolicy.IPAddressOrRange:"")+h(r.AccessPolicy?r.AccessPolicy.Protocols:"")+n;if(n==d.FEBRUARY_2012){if(l)throw new c("args.headers",a.INVALID_HEADERS)}else s&&(f+="\n"+h(l?l.cacheControl:"")+h(l?l.contentDisposition:"")+h(l?l.contentEncoding:"")+h(l?l.contentLanguage:"")+h(l?l.contentType:"",!0));return u&&(f+="\n"+h(r.AccessPolicy?r.AccessPolicy.StartPk:"")+h(r.AccessPolicy?r.AccessPolicy.StartRk:"")+h(r.AccessPolicy?r.AccessPolicy.EndPk:"")+h(r.AccessPolicy?r.AccessPolicy.EndRk:"",!0)),this.signer.sign(f)},e.exports=SharedKey},function(e,t,r){var n=r(12);function HmacSha256Sign(e){this._accessKey=e,this._decodedAccessKey=Buffer.from(this._accessKey,"base64")}HmacSha256Sign.prototype.sign=function(e){return n.createHmac("sha256",this._decodedAccessKey).update(e,"utf-8").digest("base64")},e.exports=HmacSha256Sign},function(e,t,r){var n=r(348),i=r(22),o=r(63);function SharedAccessSignature(e){this.sasToken=e,this.signer=new n(e)}SharedAccessSignature.prototype.signRequest=function(e,t){if(-1===e.uri.indexOf("?")?e.uri+="?":e.uri+="&",e.uri+=this.sasToken,-1!=this.sasToken.indexOf("api-version"))throw new SyntaxError(o.INVALID_SAS_TOKEN);e.uri+="&"+i.QueryStringConstants.API_VERSION+"="+i.HeaderConstants.TARGET_STORAGE_VERSION,t(null)},e.exports=SharedAccessSignature},function(e,t){t.format=function(e){var t=e.toISOString();return t.substring(0,t.length-1)+"0000Z"},t.parse=function(e){var t=e.split("T"),r=t[0].split("-"),n=t[1].split("."),i=n[0].split(":"),o=0;return n[1]&&(o=n[1].split("Z")),new Date(Date.UTC(parseInt(r[0],10),parseInt(r[1],10)-1,parseInt(r[2],10),parseInt(i[0],10),parseInt(i[1],10),parseInt(i[2],10),Math.round(parseInt(function(e,t){for(var r=""+e;r.length<t;)r+="0";return r}(o[0],7),10)/1e4)))}},function(e,t,r){var n=r(15),i=r(1),o=r(36),s=r(84),a=r(22).BlobConstants.DEFAULT_WRITE_BLOCK_SIZE_IN_BYTES;function ChunkStream(e){n.Stream.call(this),this.writable=this.readable=!0,e||(e={}),this._highWaterMark=e.highWaterMark||a,this._paused=void 0,this._isStreamOpened=!1,this._offset=0,this._allocator=e.allocator,this._streamEnded=!1,this._md5hash=null,this._buffer=null,this._internalBufferSize=0,this._outputLengthLimit=0,this._md5sum=void 0,e.calcContentMd5&&(this._md5hash=(new s).createMd5Hash())}i.inherits(ChunkStream,n.Stream),ChunkStream.prototype.setMemoryAllocator=function(e){this._allocator=e},ChunkStream.prototype.setOutputLength=function(e){e&&(this._outputLengthLimit=e)},ChunkStream.prototype.end=function(e,t,r){"function"==typeof e?(r=e,e=null,t=null):"function"==typeof t&&(r=t,t=null),e&&this.write(e,t),this._streamEnded=!0,this._flushInternalBuffer(),r&&this.once("end",r),this.emit("end")},ChunkStream.prototype.finish=function(){this.emit("finish"),this.destroy()},ChunkStream.prototype.error=function(){this.emit("error"),this.destroy()},ChunkStream.prototype.destroy=function(){this.writable=this.readable=!1,this._allocator&&o.objectIsFunction(this._allocator.destroy)&&this._allocator.destroy(),this.emit("close")},ChunkStream.prototype.stop=function(){this.destroy(),this._streamEnded=!0,this.emit("end")},ChunkStream.prototype.write=function(e,t){return this._isStreamOpened||(this._isStreamOpened=!0),this._buildChunk(e,t),!this._paused},ChunkStream.prototype._buildChunk=function(e){"string"==typeof e&&(e=Buffer.from(e));var t=e.length,r=0;do{var n=null,i=this._internalBufferSize+t;if(i<this._highWaterMark)return void this._copyToInternalBuffer(e,r,e.length);if(i==this._highWaterMark){var o=this._stream&&this._stream._allocator&&this._stream._allocator.releaseBuffer;0!==this._internalBufferSize||e.length!==this._highWaterMark||o?(this._copyToInternalBuffer(e,r,e.length),n=this._popInternalBuffer()):n=e,t=0}else{var s=this._highWaterMark-this._internalBufferSize;this._copyToInternalBuffer(e,r,r+s),t-=s,r+=s,n=this._popInternalBuffer()}this._emitBufferData(n)}while(t>0)},ChunkStream.prototype._emitBufferData=function(e){var t=this._offset+e.length,r={start:this._offset,end:t-1,size:e.length};this._offset=t,this._outputLengthLimit>0?r.start<=this._outputLengthLimit&&(this._offset>this._outputLengthLimit&&(e=e.slice(0,e.length-(this._offset-this._outputLengthLimit))),this._md5hash&&this._md5hash.update(e)):this._md5hash&&this._md5hash.update(e),this.emit("data",e,r)},ChunkStream.prototype._copyToInternalBuffer=function(e,t,r){void 0===t&&(t=0),void 0===r&&(r=e.length),this._buffer||(this._buffer=this._allocateNewBuffer(),this._internalBufferSize=0);var n=e.copy(this._buffer,this._internalBufferSize,t,r);if(this._internalBufferSize+=n,this._stream&&this._stream._allocator&&this._stream._allocator.releaseBuffer&&this._stream._allocator.releaseBuffer(e),n!=r-t)throw new Error("Can not copy entire data to buffer")},ChunkStream.prototype._flushInternalBuffer=function(){var e=this._popInternalBuffer();e&&this._emitBufferData(e)},ChunkStream.prototype._popInternalBuffer=function(){var e=null;return e=this._buffer&&0!==this._internalBufferSize?this._internalBufferSize==this._highWaterMark?this._buffer:this._buffer.slice(0,this._internalBufferSize):null,this._buffer=null,this._internalBufferSize=0,e},ChunkStream.prototype._allocateNewBuffer=function(){var e=this._highWaterMark;return this._allocator&&o.objectIsFunction(this._allocator.getBuffer)?this._allocator.getBuffer(e):Buffer.alloc(e)},ChunkStream.prototype.getContentMd5=function(e){if(e||(e="base64"),this._md5hash){if(this._streamEnded)return this._md5sum||(this._md5sum=this._md5hash.digest(e)),this._md5sum;throw new Error("Stream has not ended.")}throw new Error("Can't get content md5, please set the calcContentMd5 option for FileReadStream.")},ChunkStream.prototype.pause=function(){this._paused=!0},ChunkStream.prototype.resume=function(){this._paused&&(this._paused=!1,this.emit("drain"))},e.exports=ChunkStream},function(e,t,r){var n=r(1),i=r(20),o=i.WebResource,s=i.SR,a=i.Constants,c=a.HeaderConstants,u=a.TableConstants,l=r(205);(t=e.exports).constructEntityWebResource=function(e,r,i,a){var p,d=null;if(e===u.Operations.INSERT)d=o.post(r).withHeader(c.PREFER,a.echoContent?c.PREFER_CONTENT:c.PREFER_NO_CONTENT);else{var h=function getEntityPath(e,t,r){var n="/"+e;if("string"!=typeof t||"string"!=typeof r)throw new Error(s.INCORRECT_ENTITY_KEYS);return t=t.replace(/'/g,"''"),r=r.replace(/'/g,"''"),n=n+"(PartitionKey='"+encodeURIComponent(t.toString("utf8"))+"',RowKey='"+encodeURIComponent(r.toString("utf8"))+"')"}(r,"string"==typeof i.PartitionKey?i.PartitionKey:i.PartitionKey[u.ODATA_VALUE_MARKER],"string"==typeof i.RowKey?i.RowKey:i.RowKey[u.ODATA_VALUE_MARKER]);if(e===u.Operations.DELETE)d=o.del(h);else if(e===u.Operations.MERGE||e===u.Operations.INSERT_OR_MERGE)d=o.merge(h);else if(e===u.Operations.REPLACE||e===u.Operations.INSERT_OR_REPLACE)d=o.put(h);else{if(e!==u.Operations.RETRIEVE)throw new Error(n.format(s.INVALID_TABLE_OPERATION,e));d=o.get(h)}}return e!==u.Operations.DELETE&&e!==u.Operations.REPLACE&&e!==u.Operations.MERGE||d.withHeader(c.IF_MATCH,l.getEtag(i)||"*"),e!==u.Operations.DELETE&&e!==u.Operations.RETRIEVE&&(p=l.serialize(i)),t.setTableRequestHeadersAndBody(d,p,a.payloadFormat),d},t.setTableRequestHeadersAndBody=function(e,t,r){t&&e.withHeader(c.CONTENT_LENGTH,Buffer.byteLength(t,"utf8")).withBody(t).withHeader(c.CONTENT_TYPE,c.JSON_CONTENT_TYPE_VALUE),e.withHeader(c.ACCEPT,r).withHeader(c.MAX_DATA_SERVICE_VERSION,u.DEFAULT_DATA_SERVICE_VERSION)}},function(e,t,r){var n=r(1),i=r(20),o=i.util,s=i.SR,a=i.Constants,c=r(354),u=a.TableConstants.ODATA_PREFIX.length,l=a.TableConstants.ODATA_TYPE_SUFFIX.length;(t=e.exports).serializeJson=function(e){function normalizeEntityProperty(e){if(o.objectIsNull(e))return{_:e};if("object"==typeof e&&e.hasOwnProperty(a.TableConstants.ODATA_VALUE_MARKER))return e;var t={_:e};return t[a.TableConstants.ODATA_TYPE_MARKER]=c.propertyType(e,!0),t}var t={};for(var r in e)if(r!==a.TableConstants.ODATA_METADATA_MARKER){var n=normalizeEntityProperty(e[r]);if(!o.objectIsNull(n[a.TableConstants.ODATA_VALUE_MARKER])){var i=n[a.TableConstants.ODATA_VALUE_MARKER],s=n[a.TableConstants.ODATA_TYPE_MARKER];void 0===s&&(s=c.propertyType(i,!0)),t[r]=c.serializeValue(s,i),c.isTypeRequired(s,i)&&(t[r+a.TableConstants.ODATA_TYPE_SUFFIX]=s)}}return JSON.stringify(t,function(e,t){return t===Number.POSITIVE_INFINITY?"Infinity":t===Number.NEGATIVE_INFINITY?"-Infinity":o.objectIsNaN(t)?"NaN":t})},t.parseJsonTables=function(e){var t=[];if(e.value)for(var r=0;r<e.value.length;r++){var n=e.value[r].TableName;t.push(n)}return t},t.parseJsonEntities=function(e,r,n,i){if(e.value){for(var o=[],s=0;s<e.value.length;s++){var a=e.value[s],c=t.parseJsonSingleEntity(a,r,n,i);o.push(c)}return o}return[t.parseJsonSingleEntity(e,r,n,i)]},t.parseJsonSingleEntity=function(e,t,r,i){var p={},d={PartitionKey:"Edm.String",RowKey:"Edm.String",Timestamp:"Edm.DateTime"},h={};for(var f in e)o.stringStartsWith(f,a.TableConstants.ODATA_PREFIX)?h[f.slice(u)]=e[f]:o.stringEndsWith(f,a.TableConstants.ODATA_TYPE_SUFFIX)?d[f.slice(0,f.length-l)]=e[f]:p[f]=e[f];if(!h.etag&&p.Timestamp){var m=Buffer.from(p.Timestamp).toString();h.etag="W/\"datetime'"+m+"'\""}var g={};for(var f in p)if(p.hasOwnProperty(f)){var y=d[f];g[f]={},r&&(y=r(p.PartitionKey,p.RowKey,f,p[f],y)),!y&&t&&(y=c.propertyType(p[f],!1)),y&&(g[f][a.TableConstants.ODATA_TYPE_MARKER]=y);try{g[f][a.TableConstants.ODATA_VALUE_MARKER]=c.deserializeValueFromJson(y,p[f])}catch(e){throw r?new Error(n.format(s.INVALID_PROPERTY_RESOLVER,f,y,p[f])):e}}return g[a.TableConstants.ODATA_METADATA_MARKER]=h,i&&(g=i(g)),g}},function(e,t,r){var n=r(29),i=r(1),o=r(35),s=r(20),a=s.util,c=s.SR,u=r(122).EdmType;t.propertyType=function(e,t){return n.isNumber(e)?t?a.objectIsInt(e)?"Edm.Int32":"Edm.Double":null:n.isBoolean(e)?"Edm.Boolean":n.isDate(e)?"Edm.DateTime":"Edm.String"},t.deserializeValueFromJson=function(e,t){if(!e)return t;switch(e){case u.BINARY:return Buffer.from(t,"base64");case u.DATETIME:return new Date(t);case u.GUID:return t;case u.DOUBLE:return"number"!=typeof t?parseFloat(t):t;case u.INT32:case u.INT64:case u.STRING:case u.BOOLEAN:return t;default:throw new Error(i.format(c.TYPE_NOT_SUPPORTED,e))}},t.serializeValue=function(e,t){switch(e){case u.BINARY:return Buffer.isBuffer(t)?t.toString("base64"):t;case u.DATETIME:return n.isDate(t)?t.toISOString():t;case u.GUID:return Buffer.isBuffer(t)||n.isArray(t)?o.unparse(t):t;case u.INT64:case u.DOUBLE:return t.toString();case u.INT32:return t===Number.POSITIVE_INFINITY?"Infinity":t===Number.NEGATIVE_INFINITY?"-Infinity":a.objectIsNaN(t)?"NaN":t;case u.STRING:case u.BOOLEAN:return t;default:throw new Error(c.TYPE_NOT_SUPPORTED+e)}},t.isTypeRequired=function(e,t){switch(e){case u.BINARY:case u.INT64:case u.DATETIME:case u.GUID:case u.DOUBLE:return!0;case u.INT32:return!("number"==typeof t&&t!==Number.POSITIVE_INFINITY&&t!==Number.NEGATIVE_INFINITY&&!a.objectIsNaN(t));case u.STRING:case u.BOOLEAN:return!1;default:throw new Error(i.format(c.TYPE_NOT_SUPPORTED,e))}},t.serializeQueryValue=function(e,r){switch(r||t.propertyType(e,!0)){case u.INT32:return e.toString();case u.BOOLEAN:return e?"true":"false";case u.DOUBLE:return e.toString();case u.INT64:return e.toString()+"L";case u.DATETIME:if(n.isDate(e))return"datetime'"+e.toISOString()+"'";throw new Error(i.format(c.INVALID_EDM_TYPE,e,r));case u.GUID:return"guid'"+e.toString()+"'";case u.BINARY:return"X'"+e.toString("hex")+"'";default:return"'"+e.toString().replace(/'/g,"''")+"'"}}},function(e,t,r){var n=r(29),i=r(1),o=r(20),s=o.util,a=o.SR,c=o.Constants.QueryStringConstants,u=r(354),l=r(122),p=l.QueryComparisons,d=l.TableOperators,h=l.EdmType;function TableQuery(){this._fields=[],this._where=[],this._top=null}TableQuery.prototype.select=function(){var e=this;return arguments&&n.each(arguments,function(t){e._fields.push(t)}),this},TableQuery.prototype.top=function(e){return this._top=e,this},TableQuery.prototype.where=function(e){return this._where.push(TableQuery._encodeConditionString(e,arguments)),this},TableQuery.int32Filter=function(e,t,r){return TableQuery._concatFilterString(e,t,r,h.INT32)},TableQuery.int64Filter=function(e,t,r){return TableQuery._concatFilterString(e,t,r,h.INT64)},TableQuery.doubleFilter=function(e,t,r){return TableQuery._concatFilterString(e,t,r,h.DOUBLE)},TableQuery.booleanFilter=function(e,t,r){return TableQuery._concatFilterString(e,t,r,h.BOOLEAN)},TableQuery.dateFilter=function(e,t,r){return TableQuery._concatFilterString(e,t,r,h.DATETIME)},TableQuery.guidFilter=function(e,t,r){return TableQuery._concatFilterString(e,t,r,h.GUID)},TableQuery.binaryFilter=function(e,t,r){return TableQuery._concatFilterString(e,t,r,h.BINARY)},TableQuery.stringFilter=function(e,t,r){return TableQuery._concatFilterString(e,t,r,h.STRING)},TableQuery.combineFilters=function(e,t,r){return e+" "+t+" "+r},TableQuery.prototype.and=function(e){if(0===this._where.length)throw new Error(i.format(a.QUERY_OPERATOR_REQUIRES_WHERE,"AND"));return this._where.push(" and "+TableQuery._encodeConditionString(e,arguments)),this},TableQuery.prototype.or=function(e){if(0===this._where.length)throw new Error(i.format(a.QUERY_OPERATOR_REQUIRES_WHERE,"OR"));return this._where.push(" or "+TableQuery._encodeConditionString(e,arguments)),this},TableQuery.prototype.toQueryObject=function(){var e={};return this._fields.length>0&&(e[c.SELECT]=this._fields.join(",")),this._where.length>0&&(e[c.FILTER]=this._where.join("")),this._top&&(e[c.TOP]=this._top),e},TableQuery._concatFilterString=function(e,t,r,n){if(s.objectIsNull(e))throw new Error(i.format(a.ARGUMENT_NULL_OR_UNDEFINED,"propertyName"));if(s.objectIsNull(t))throw new Error(i.format(a.ARGUMENT_NULL_OR_UNDEFINED,"operation"));if(s.objectIsNull(r))throw new Error(i.format(a.ARGUMENT_NULL_OR_UNDEFINED,"value"));return e+" "+t+" "+u.serializeQueryValue(r,n)},TableQuery._encodeConditionString=function(e,t){var r=TableQuery._replaceOperators(e);if(t.length>1){for(var n=r.split(/(\?string\?|\?int32\?|\?int64\?|\?bool\?|\?double\?|\?date\?|\?binary\?|\?guid\?|\?)/),i=1,o=0;o<n.length&&i<t.length;o++)if(0===n[o].indexOf("?")){var s=TableQuery._getEdmType(n[o]);n[o]=u.serializeQueryValue(t[i],s),i++}r=n.join("")}return r},TableQuery._getEdmType=function(e){switch(e){case"?binary?":return h.BINARY;case"?int64?":return h.INT64;case"?date?":return h.DATETIME;case"?guid?":return h.GUID;case"?int32?":return h.INT32;case"?double?":return h.DOUBLE;case"?bool?":return h.BOOLEAN;case"?string?":return h.STRING;default:return}},TableQuery._replaceOperators=function(e){var t=e.replace(/ == /g," "+p.EQUAL+" ");return t=(t=(t=(t=(t=(t=(t=(t=t.replace(/ != /g," "+p.NOT_EQUAL+" ")).replace(/ >= /g," "+p.GREATER_THAN_OR_EQUAL+" ")).replace(/ > /g," "+p.GREATER_THAN+" ")).replace(/ <= /g," "+p.LESS_THAN_OR_EQUAL+" ")).replace(/ < /g," "+p.LESS_THAN+" ")).replace(/ \&\& /g," "+d.AND+" ")).replace(/ \|\| /g," "+d.OR+" ")).replace(/!/g,d.NOT)},e.exports=TableQuery},function(e,t,r){var n=r(1);function QueueMessageEncoder(){}function TextBase64QueueMessageEncoder(){}function BinaryBase64QueueMessageEncoder(){}function TextXmlQueueMessageEncoder(){}QueueMessageEncoder.prototype.encode=function(e){return e},QueueMessageEncoder.prototype.decode=function(e){return e},n.inherits(TextBase64QueueMessageEncoder,QueueMessageEncoder),TextBase64QueueMessageEncoder.prototype.encode=function(e){return Buffer.from(e,"utf8").toString("base64")},TextBase64QueueMessageEncoder.prototype.decode=function(e){return Buffer.from(e,"base64").toString("utf8")},n.inherits(BinaryBase64QueueMessageEncoder,QueueMessageEncoder),BinaryBase64QueueMessageEncoder.prototype.encode=function(e){return e.toString("base64")},BinaryBase64QueueMessageEncoder.prototype.decode=function(e){return Buffer.from(e,"base64")},n.inherits(TextXmlQueueMessageEncoder,QueueMessageEncoder),TextXmlQueueMessageEncoder.prototype.encode=function(e){return e.replace(/&/gm,"&amp;").replace(/</gm,"&lt;").replace(/>/gm,"&gt;").replace(/"/gm,"&quot;").replace(/'/gm,"&apos;")},TextXmlQueueMessageEncoder.prototype.decode=function(e){return e.replace(/&amp;/gm,"&").replace(/&lt;/gm,"<").replace(/&gt;/gm,">").replace(/&quot;/gm,'"').replace(/&apos;/gm,"'")},e.exports=QueueMessageEncoder,e.exports.TextBase64QueueMessageEncoder=TextBase64QueueMessageEncoder,e.exports.BinaryBase64QueueMessageEncoder=BinaryBase64QueueMessageEncoder,e.exports.TextXmlQueueMessageEncoder=TextXmlQueueMessageEncoder},function(e,t,r){"use strict";var n,i=this&&this.__extends||(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])},function(e,t){function __(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(__.prototype=t.prototype,new __)});Object.defineProperty(t,"__esModule",{value:!0});var o=function(e){function BlobSasError(t){var r=e.call(this,t)||this;return r.name="BlobSasError",r.message=t,Error.captureStackTrace(r,r.constructor),r}return i(BlobSasError,e),BlobSasError}(Error);t.BlobSasError=o;var s=function(e){function BlobUploadNotificationError(t){var r=e.call(this,t)||this;return r.message=t,r.name="BlobUploadNotificationError",Error.captureStackTrace(r,r.constructor),r}return i(BlobUploadNotificationError,e),BlobUploadNotificationError}(Error);t.BlobUploadNotificationError=s},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(4),i=function(){function X509AuthenticationProvider(e){this.type=n.AuthenticationType.X509,this._credentials=e}return X509AuthenticationProvider.prototype.getDeviceCredentials=function(e){var t=this;return n.callbackToPromise(function(e){e(null,t._credentials)},e)},X509AuthenticationProvider.prototype.setX509Options=function(e){this._credentials.x509=e},X509AuthenticationProvider.fromX509Options=function(e,t,r){if(!e)throw new ReferenceError("deviceId cannot be '"+e+"'");if(!t)throw new ReferenceError("iotHubHostname cannot be '"+t+"'");if(!r)throw new ReferenceError("x509info cannot be '"+r+"'");if(!r.cert)throw new n.errors.ArgumentError("x509info.cert cannot be '"+r.cert+"'");if(!r.key)throw new n.errors.ArgumentError("x509info.key cannot be '"+r.key+"'");return new X509AuthenticationProvider({deviceId:e,host:t,x509:r})},X509AuthenticationProvider}();t.X509AuthenticationProvider=i},function(e,t,r){"use strict";e.exports=function setup(e){function selectColor(e){for(var t=0,r=0;r<e.length;r++)t=(t<<5)-t+e.charCodeAt(r),t|=0;return createDebug.colors[Math.abs(t)%createDebug.colors.length]}function createDebug(e){var t;function debug(){if(debug.enabled){for(var e=arguments.length,r=new Array(e),n=0;n<e;n++)r[n]=arguments[n];var i=debug,o=Number(new Date),s=o-(t||o);i.diff=s,i.prev=t,i.curr=o,t=o,r[0]=createDebug.coerce(r[0]),"string"!=typeof r[0]&&r.unshift("%O");var a=0;r[0]=r[0].replace(/%([a-zA-Z%])/g,function(e,t){if("%%"===e)return e;a++;var n=createDebug.formatters[t];if("function"==typeof n){var o=r[a];e=n.call(i,o),r.splice(a,1),a--}return e}),createDebug.formatArgs.call(i,r),(i.log||createDebug.log).apply(i,r)}}return debug.namespace=e,debug.enabled=createDebug.enabled(e),debug.useColors=createDebug.useColors(),debug.color=selectColor(e),debug.destroy=destroy,debug.extend=extend,"function"==typeof createDebug.init&&createDebug.init(debug),createDebug.instances.push(debug),debug}function destroy(){var e=createDebug.instances.indexOf(this);return-1!==e&&(createDebug.instances.splice(e,1),!0)}function extend(e,t){return createDebug(this.namespace+(void 0===t?":":t)+e)}return createDebug.debug=createDebug,createDebug.default=createDebug,createDebug.coerce=function coerce(e){return e instanceof Error?e.stack||e.message:e},createDebug.disable=function disable(){createDebug.enable("")},createDebug.enable=function enable(e){var t;createDebug.save(e),createDebug.names=[],createDebug.skips=[];var r=("string"==typeof e?e:"").split(/[\s,]+/),n=r.length;for(t=0;t<n;t++)r[t]&&("-"===(e=r[t].replace(/\*/g,".*?"))[0]?createDebug.skips.push(new RegExp("^"+e.substr(1)+"$")):createDebug.names.push(new RegExp("^"+e+"$")));for(t=0;t<createDebug.instances.length;t++){var i=createDebug.instances[t];i.enabled=createDebug.enabled(i.namespace)}},createDebug.enabled=function enabled(e){if("*"===e[e.length-1])return!0;var t,r;for(t=0,r=createDebug.skips.length;t<r;t++)if(createDebug.skips[t].test(e))return!1;for(t=0,r=createDebug.names.length;t<r;t++)if(createDebug.names[t].test(e))return!0;return!1},createDebug.humanize=r(858),Object.keys(e).forEach(function(t){createDebug[t]=e[t]}),createDebug.instances=[],createDebug.names=[],createDebug.skips=[],createDebug.formatters={},createDebug.selectColor=selectColor,createDebug.enable(createDebug.load()),createDebug}},function(e,t,r){"use strict";var n=r(862),i=r(95),o=r(870),s=r(362),a=r(212),c=r(871),u=r(47),l=r(59),p=r(5).EventEmitter,d=function(e){this.options=e?Object.create(e):{},this.options.id||(this.options.id=a.generate_uuid()),this.id=this.options.id,this.sasl_server_mechanisms=s.server_mechanisms()};(d.prototype=Object.create(p.prototype)).constructor=d,d.prototype.dispatch=function(e){return i.events("[%s] Container got event: "+e,this.id),p.prototype.emit.apply(this,arguments),!!this.listeners(e).length},d.prototype.connect=function(e){return new n(e,this).connect()},d.prototype.create_connection=function(e){return new n(e,this)},d.prototype.listen=function(e){var t,r=this;if(void 0===e.transport||"tcp"===e.transport)(t=u.createServer()).on("connection",function(t){new n(e,r).accept(t)});else{if("tls"!==e.transport&&"ssl"!==e.transport)throw Error("Unrecognised transport: "+e.transport);(t=l.createServer(e)).on("secureConnection",function(t){new n(e,r).accept(t)})}return process.version.match(/v0\.10\.\d+/)?t.listen(e.port,e.host):t.listen(e),t},d.prototype.create_container=function(e){return new d(e)},d.prototype.get_option=function(e,t){return void 0!==this.options[e]?this.options[e]:t},d.prototype.generate_uuid=a.generate_uuid,d.prototype.string_to_uuid=a.string_to_uuid,d.prototype.uuid_to_string=a.uuid_to_string,d.prototype.rpc_server=function(e,t){return o.server(this,e,t)},d.prototype.rpc_client=function(e){return o.client(this,e)};var h=r(872);d.prototype.websocket_accept=function(e,t){new n(t,this).accept(h.wrap(e))},d.prototype.websocket_connect=h.connect,d.prototype.filter=r(873),d.prototype.types=r(94),d.prototype.message=r(214),d.prototype.sasl=s,d.prototype.ReceiverEvents=c.ReceiverEvents,d.prototype.SenderEvents=c.SenderEvents,d.prototype.SessionEvents=c.SessionEvents,d.prototype.ConnectionEvents=c.ConnectionEvents,e.exports=new d},function(e,t,r){var n;function createDebug(e){function debug(){if(debug.enabled){var e=debug,r=+new Date,i=r-(n||r);e.diff=i,e.prev=n,e.curr=r,n=r;for(var o=new Array(arguments.length),s=0;s<o.length;s++)o[s]=arguments[s];o[0]=t.coerce(o[0]),"string"!=typeof o[0]&&o.unshift("%O");var a=0;o[0]=o[0].replace(/%([a-zA-Z%])/g,function(r,n){if("%%"===r)return r;a++;var i=t.formatters[n];if("function"==typeof i){var s=o[a];r=i.call(e,s),o.splice(a,1),a--}return r}),t.formatArgs.call(e,o),(debug.log||t.log||console.log.bind(console)).apply(e,o)}}return debug.namespace=e,debug.enabled=t.enabled(e),debug.useColors=t.useColors(),debug.color=function selectColor(e){var r,n=0;for(r in e)n=(n<<5)-n+e.charCodeAt(r),n|=0;return t.colors[Math.abs(n)%t.colors.length]}(e),"function"==typeof t.init&&t.init(debug),debug}(t=e.exports=createDebug.debug=createDebug.default=createDebug).coerce=function coerce(e){return e instanceof Error?e.stack||e.message:e},t.disable=function disable(){t.enable("")},t.enable=function enable(e){t.save(e),t.names=[],t.skips=[];for(var r=("string"==typeof e?e:"").split(/[\s,]+/),n=r.length,i=0;i<n;i++)r[i]&&("-"===(e=r[i].replace(/\*/g,".*?"))[0]?t.skips.push(new RegExp("^"+e.substr(1)+"$")):t.names.push(new RegExp("^"+e+"$")))},t.enabled=function enabled(e){var r,n;for(r=0,n=t.skips.length;r<n;r++)if(t.skips[r].test(e))return!1;for(r=0,n=t.names.length;r<n;r++)if(t.names[r].test(e))return!0;return!1},t.humanize=r(865),t.names=[],t.skips=[],t.formatters={}},function(e,t,r){"use strict";var n=r(93),i=r(123),o=r(363),s=0,a=1;var c=function(e){this.callback=e,this.outcome=void 0,this.username=void 0};c.prototype.start=function(e,t){var r=function extract(e){for(var t=[],r=0,n=0;n<e.length;)0===e[n]?(n>r?t.push(e.toString("utf8",r,n)):t.push(null),r=++n):++n;return n>r?t.push(e.toString("utf8",r,n)):t.push(null),t}(e);3!==r.length&&this.connection.sasl_failed("Unexpected response in PLAIN, got "+r.length+" fields, expected 3"),this.callback(r[1],r[2],t)?(this.outcome=!0,this.username=r[1]):this.outcome=!1};var u=function(e,t){this.username=e,this.password=t};u.prototype.start=function(){var e=new Buffer(1+this.username.length+1+this.password.length);return e.writeUInt8(0,0),e.write(this.username,1),e.writeUInt8(0,1+this.username.length),e.write(this.password,1+this.username.length+1),e};var l=function(){this.outcome=void 0,this.username=void 0};l.prototype.start=function(e){this.outcome=!0,this.username=e?e.toString("utf8"):"anonymous"};var p=function(e){this.username=e||"anonymous"};p.prototype.start=function(){var e=new Buffer(1+this.username.length);return e.writeUInt8(0,0),e.write(this.username,1),e};var d=function(){this.outcome=void 0,this.username=void 0};d.prototype.start=function(){this.outcome=!0};var h=function(){this.username=void 0};h.prototype.start=function(){return""},h.prototype.step=function(){return""};var f=function(e,t){this.username=e,this.token=t};f.prototype.start=function(){var e=new Buffer(this.username.length+this.token.length+5+12+3),t=0;return e.write("user=",t),t+=5,e.write(this.username,t),t+=this.username.length,e.writeUInt8(1,t),t+=1,e.write("auth=Bearer ",t),t+=12,e.write(this.token,t),t+=this.token.length,e.writeUInt8(1,t),t+=1,e.writeUInt8(1,t),t+=1,e};var m=function(e,t){this.connection=e,this.transport=new o(e.amqp_transport.identifier,3,i.TYPE_SASL,this),this.next=e.amqp_transport,this.mechanisms=t,this.mechanism=void 0,this.outcome=void 0,this.username=void 0;var r=Object.getOwnPropertyNames(t);this.transport.encode(i.sasl_frame(i.sasl_mechanisms({sasl_server_mechanisms:r}).described()))};m.prototype.do_step=function(e){void 0===this.mechanism.outcome?this.transport.encode(i.sasl_frame(i.sasl_challenge({challenge:e}).described())):(this.outcome=this.mechanism.outcome?s:a,this.transport.encode(i.sasl_frame(i.sasl_outcome({code:this.outcome}).described())),this.outcome===s&&(this.username=this.mechanism.username,this.transport.write_complete=!0,this.transport.read_complete=!0))},m.prototype.on_sasl_init=function(e){var t=this.mechanisms[e.performative.mechanism];if(t){this.mechanism=t();var r=this.mechanism.start(e.performative.initial_response,e.performative.hostname);this.do_step(r)}else this.outcome=a,this.transport.encode(i.sasl_frame(i.sasl_outcome({code:this.outcome}).described()))},m.prototype.on_sasl_response=function(e){this.do_step(this.mechanism.step(e.performative.response))},m.prototype.has_writes_pending=function(){return this.transport.has_writes_pending()||this.next.has_writes_pending()},m.prototype.write=function(e){return this.transport.write_complete&&0===this.transport.pending.length?this.next.write(e):this.transport.write(e)},m.prototype.read=function(e){return this.transport.read_complete?this.next.read(e):this.transport.read(e)};var g=function(e,t,r){this.connection=e,this.transport=new o(e.amqp_transport.identifier,3,i.TYPE_SASL,this),this.next=e.amqp_transport,this.mechanisms=t,this.mechanism=void 0,this.mechanism_name=void 0,this.hostname=r,this.failed=!1};g.prototype.on_sasl_mechanisms=function(e){for(var t=0;void 0===this.mechanism&&t<e.performative.sasl_server_mechanisms.length;t++){var r=e.performative.sasl_server_mechanisms[t],n=this.mechanisms[r];n&&(this.mechanism=n(),this.mechanism_name=r)}if(this.mechanism){var o=this.mechanism.start(),s={mechanism:this.mechanism_name,initial_response:o};this.hostname&&(s.hostname=this.hostname),this.transport.encode(i.sasl_frame(i.sasl_init(s).described()))}else this.failed=!0,this.connection.sasl_failed("No suitable mechanism; server supports "+e.performative.sasl_server_mechanisms)},g.prototype.on_sasl_challenge=function(e){var t=this.mechanism.step(e.performative.challenge);this.transport.encode(i.sasl_frame(i.sasl_response({response:t}).described()))},g.prototype.on_sasl_outcome=function(e){switch(e.performative.code){case s:this.transport.read_complete=!0,this.transport.write_complete=!0;break;default:this.transport.write_complete=!0,this.connection.sasl_failed("Failed to authenticate: "+e.performative.code)}},g.prototype.has_writes_pending=function(){return this.transport.has_writes_pending()||this.next.has_writes_pending()},g.prototype.write=function(e){return this.transport.write_complete?this.next.write(e):this.transport.write(e)},g.prototype.read=function(e){return this.transport.read_complete?this.next.read(e):this.transport.read(e)};var y=function(e,t){this.header_received=!1,this.transports={0:e.amqp_transport,3:new m(e,t)},this.selected=void 0};y.prototype.has_writes_pending=function(){return this.header_received&&this.selected.has_writes_pending()},y.prototype.write=function(e){return this.selected?this.selected.write(e):0},y.prototype.read=function(e){if(!this.header_received){if(e.length<8)return 0;if(this.header_received=i.read_header(e),this.selected=this.transports[this.header_received.protocol_id],void 0===this.selected)throw new n.ProtocolError("Invalid AMQP protocol id "+this.header_received.protocol_id)}return this.selected.read(e)};var v={enable_anonymous:function(){this.ANONYMOUS=function(){return new l}},enable_plain:function(e){this.PLAIN=function(){return new c(e)}}},b={enable_anonymous:function(e){this.ANONYMOUS=function(){return new p(e)}},enable_plain:function(e,t){this.PLAIN=function(){return new u(e,t)}},enable_external:function(){this.EXTERNAL=function(){return new h}},enable_xoauth2:function(e,t){if(e&&t)this.XOAUTH2=function(){return new f(e,t)};else{if(void 0===t)throw Error("token must be specified");if(void 0===e)throw Error("username must be specified")}}};e.exports={Client:g,Server:m,Selective:y,server_mechanisms:function(){return Object.create(v)},client_mechanisms:function(){return Object.create(b)},server_add_external:function(e){return e.EXTERNAL=function(){return new d},e}}},function(e,t,r){"use strict";var n=r(93),i=r(123),o=r(95),s=function(e,t,r,n){this.identifier=e,this.protocol_id=t,this.frame_type=r,this.handler=n,this.pending=[],this.header_sent=void 0,this.header_received=void 0,this.write_complete=!1,this.read_complete=!1};s.prototype.has_writes_pending=function(){return this.pending.length>0},s.prototype.encode=function(e){this.pending.push(e)},s.prototype.write=function(e){if(!this.header_sent){var t=new Buffer(8),r={protocol_id:this.protocol_id,major:1,minor:0,revision:0};o.frames("[%s] -> %o",this.identifier,r),i.write_header(t,r),e.write(t),this.header_sent=r}for(var n=0;n<this.pending.length;n++){var s=this.pending[n];t=i.write_frame(s);e.write(t),s.performative?o.frames("[%s]:%s -> %s %j",this.identifier,s.channel,s.performative.constructor,s.performative,s.payload||""):o.frames("[%s]:%s -> empty",this.identifier,s.channel),o.raw("[%s] SENT: %d %h",this.identifier,t.length,t)}this.pending=[]},s.prototype.read=function(e){var t=0;if(!this.header_received){if(e.length<8)return t;if(this.header_received=i.read_header(e),o.frames("[%s] <- %o",this.identifier,this.header_received),this.header_received.protocol_id!==this.protocol_id)throw 3===this.protocol_id&&0===this.header_received.protocol_id?new n.ProtocolError("Expecting SASL layer"):0===this.protocol_id&&3===this.header_received.protocol_id?new n.ProtocolError("SASL layer not enabled"):new n.ProtocolError("Invalid AMQP protocol id "+this.header_received.protocol_id+" expecting: "+this.protocol_id);t=8}for(;t<e.length-4&&!this.read_complete;){var r=e.readUInt32BE(t);if(o.io("[%s] got frame of size %d",this.identifier,r),e.length<t+r){o.io("[%s] incomplete frame; have only %d of %d",this.identifier,e.length-t,r);break}var s=e.slice(t,t+r);o.raw("[%s] RECV: %d %h",this.identifier,s.length,s);var a=i.read_frame(s);if(a.performative?o.frames("[%s]:%s <- %s %j",this.identifier,a.channel,a.performative.constructor,a.performative,a.payload||""):o.frames("[%s]:%s <- empty",this.identifier,a.channel),a.type!==this.frame_type)throw new n.ProtocolError("Invalid frame type: "+a.type);t+=r,a.performative&&a.performative.dispatch(this.handler,a)}return t},e.exports=s},function(e,t,r){"use strict";e.exports=function setup(e){function selectColor(e){for(var t=0,r=0;r<e.length;r++)t=(t<<5)-t+e.charCodeAt(r),t|=0;return createDebug.colors[Math.abs(t)%createDebug.colors.length]}function createDebug(e){var t;function debug(){if(debug.enabled){for(var e=arguments.length,r=new Array(e),n=0;n<e;n++)r[n]=arguments[n];var i=debug,o=Number(new Date),s=o-(t||o);i.diff=s,i.prev=t,i.curr=o,t=o,r[0]=createDebug.coerce(r[0]),"string"!=typeof r[0]&&r.unshift("%O");var a=0;r[0]=r[0].replace(/%([a-zA-Z%])/g,function(e,t){if("%%"===e)return e;a++;var n=createDebug.formatters[t];if("function"==typeof n){var o=r[a];e=n.call(i,o),r.splice(a,1),a--}return e}),createDebug.formatArgs.call(i,r),(i.log||createDebug.log).apply(i,r)}}return debug.namespace=e,debug.enabled=createDebug.enabled(e),debug.useColors=createDebug.useColors(),debug.color=selectColor(e),debug.destroy=destroy,debug.extend=extend,"function"==typeof createDebug.init&&createDebug.init(debug),createDebug.instances.push(debug),debug}function destroy(){var e=createDebug.instances.indexOf(this);return-1!==e&&(createDebug.instances.splice(e,1),!0)}function extend(e,t){return createDebug(this.namespace+(void 0===t?":":t)+e)}return createDebug.debug=createDebug,createDebug.default=createDebug,createDebug.coerce=function coerce(e){return e instanceof Error?e.stack||e.message:e},createDebug.disable=function disable(){createDebug.enable("")},createDebug.enable=function enable(e){var t;createDebug.save(e),createDebug.names=[],createDebug.skips=[];var r=("string"==typeof e?e:"").split(/[\s,]+/),n=r.length;for(t=0;t<n;t++)r[t]&&("-"===(e=r[t].replace(/\*/g,".*?"))[0]?createDebug.skips.push(new RegExp("^"+e.substr(1)+"$")):createDebug.names.push(new RegExp("^"+e+"$")));for(t=0;t<createDebug.instances.length;t++){var i=createDebug.instances[t];i.enabled=createDebug.enabled(i.namespace)}},createDebug.enabled=function enabled(e){if("*"===e[e.length-1])return!0;var t,r;for(t=0,r=createDebug.skips.length;t<r;t++)if(createDebug.skips[t].test(e))return!1;for(t=0,r=createDebug.names.length;t<r;t++)if(createDebug.names[t].test(e))return!0;return!1},createDebug.humanize=r(876),Object.keys(e).forEach(function(t){createDebug[t]=e[t]}),createDebug.instances=[],createDebug.names=[],createDebug.skips=[],createDebug.formatters={},createDebug.selectColor=selectColor,createDebug.enable(createDebug.load()),createDebug}},function(e,t,r){"use strict";const n=r(5),i=r(12),o=r(21),s=r(23),a=r(47),c=r(59),u=r(7),l=r(161),p=r(880),d=r(368),h=r(125),f=r(369),m=r(372),g=["CONNECTING","OPEN","CLOSING","CLOSED"],y=h.kWebSocket,v=[8,13],b=3e4;class WebSocket extends n{constructor(e,t,r){super(),this.readyState=WebSocket.CONNECTING,this.protocol="",this._binaryType=h.BINARY_TYPES[0],this._closeFrameReceived=!1,this._closeFrameSent=!1,this._closeMessage="",this._closeTimer=null,this._closeCode=1006,this._extensions={},this._isServer=!0,this._receiver=null,this._sender=null,this._socket=null,null!==e&&(Array.isArray(t)?t=t.join(", "):"object"==typeof t&&null!==t&&(r=t,t=void 0),function initAsClient(e,t,r){if(r=Object.assign({protocolVersion:v[1],perMessageDeflate:!0,maxPayload:104857600},r,{createConnection:void 0,socketPath:void 0,hostname:void 0,protocol:void 0,timeout:void 0,method:void 0,auth:void 0,host:void 0,path:void 0,port:void 0}),-1===v.indexOf(r.protocolVersion))throw new RangeError(`Unsupported protocol version: ${r.protocolVersion} `+`(supported versions: ${v.join(", ")})`);var n;this._isServer=!1,"object"==typeof e&&void 0!==e.href?(n=e,this.url=e.href):(n=u.URL?new u.URL(e):u.parse(e),this.url=e);const a="ws+unix:"===n.protocol;if(!(n.host||a&&n.pathname))throw new Error(`Invalid URL: ${this.url}`);const c="wss:"===n.protocol||"https:"===n.protocol,p=i.randomBytes(16).toString("base64"),f=c?o:s,m=n.search?`${n.pathname||"/"}${n.search}`:n.pathname||"/";var g;r.createConnection=c?tlsConnect:netConnect,r.port=n.port||(c?443:80),r.host=n.hostname.startsWith("[")?n.hostname.slice(1,-1):n.hostname,r.headers=Object.assign({"Sec-WebSocket-Version":r.protocolVersion,"Sec-WebSocket-Key":p,Connection:"Upgrade",Upgrade:"websocket"},r.headers),r.path=m,r.perMessageDeflate&&(g=new l(!0!==r.perMessageDeflate?r.perMessageDeflate:{},!1,r.maxPayload),r.headers["Sec-WebSocket-Extensions"]=d.format({[l.extensionName]:g.offer()}));t&&(r.headers["Sec-WebSocket-Protocol"]=t);r.origin&&(r.protocolVersion<13?r.headers["Sec-WebSocket-Origin"]=r.origin:r.headers.Origin=r.origin);n.auth?r.auth=n.auth:(n.username||n.password)&&(r.auth=`${n.username}:${n.password}`);if(a){const e=m.split(":");r.socketPath=e[0],r.path=e[1]}var y=this._req=f.get(r);r.handshakeTimeout&&y.setTimeout(r.handshakeTimeout,()=>abortHandshake(this,y,"Opening handshake has timed out"));y.on("error",e=>{this._req.aborted||(y=this._req=null,this.readyState=WebSocket.CLOSING,this.emit("error",e),this.emitClose())}),y.on("response",e=>{this.emit("unexpected-response",y,e)||abortHandshake(this,y,`Unexpected server response: ${e.statusCode}`)}),y.on("upgrade",(e,n,o)=>{if(this.emit("upgrade",e),this.readyState!==WebSocket.CONNECTING)return;y=this._req=null;const s=i.createHash("sha1").update(p+h.GUID,"binary").digest("base64");if(e.headers["sec-websocket-accept"]!==s)return void abortHandshake(this,n,"Invalid Sec-WebSocket-Accept header");const a=e.headers["sec-websocket-protocol"],c=(t||"").split(/, */);var u;if(!t&&a?u="Server sent a subprotocol but none was requested":t&&!a?u="Server sent no subprotocol":a&&-1===c.indexOf(a)&&(u="Server sent an invalid subprotocol"),u)abortHandshake(this,n,u);else{if(a&&(this.protocol=a),g)try{const t=d.parse(e.headers["sec-websocket-extensions"]);t[l.extensionName]&&(g.accept(t[l.extensionName]),this._extensions[l.extensionName]=g)}catch(e){return void abortHandshake(this,n,"Invalid Sec-WebSocket-Extensions header")}this.setSocket(n,o,r.maxPayload)}})}.call(this,e,t,r))}get CONNECTING(){return WebSocket.CONNECTING}get CLOSING(){return WebSocket.CLOSING}get CLOSED(){return WebSocket.CLOSED}get OPEN(){return WebSocket.OPEN}get binaryType(){return this._binaryType}set binaryType(e){h.BINARY_TYPES.indexOf(e)<0||(this._binaryType=e,this._receiver&&(this._receiver._binaryType=e))}get bufferedAmount(){return this._socket?(this._socket.bufferSize||0)+this._sender._bufferedBytes:0}get extensions(){return Object.keys(this._extensions).join()}setSocket(e,t,r){const n=new f(this._binaryType,this._extensions,r);this._sender=new m(e,this._extensions),this._receiver=n,this._socket=e,n[y]=this,e[y]=this,n.on("conclude",receiverOnConclude),n.on("drain",receiverOnDrain),n.on("error",receiverOnError),n.on("message",receiverOnMessage),n.on("ping",receiverOnPing),n.on("pong",receiverOnPong),e.setTimeout(0),e.setNoDelay(),t.length>0&&e.unshift(t),e.on("close",socketOnClose),e.on("data",socketOnData),e.on("end",socketOnEnd),e.on("error",socketOnError),this.readyState=WebSocket.OPEN,this.emit("open")}emitClose(){this.readyState=WebSocket.CLOSED,this._socket?(this._extensions[l.extensionName]&&this._extensions[l.extensionName].cleanup(),this._receiver.removeAllListeners(),this.emit("close",this._closeCode,this._closeMessage)):this.emit("close",this._closeCode,this._closeMessage)}close(e,t){if(this.readyState!==WebSocket.CLOSED){if(this.readyState===WebSocket.CONNECTING){const e="WebSocket was closed before the connection was established";return abortHandshake(this,this._req,e)}this.readyState!==WebSocket.CLOSING?(this.readyState=WebSocket.CLOSING,this._sender.close(e,t,!this._isServer,e=>{e||(this._closeFrameSent=!0,this._socket.writable&&(this._closeFrameReceived&&this._socket.end(),this._closeTimer=setTimeout(this._socket.destroy.bind(this._socket),b)))})):this._closeFrameSent&&this._closeFrameReceived&&this._socket.end()}}ping(e,t,r){if("function"==typeof e?(r=e,e=t=void 0):"function"==typeof t&&(r=t,t=void 0),this.readyState!==WebSocket.OPEN){const e=new Error(`WebSocket is not open: readyState ${this.readyState} `+`(${g[this.readyState]})`);if(r)return r(e);throw e}"number"==typeof e&&(e=e.toString()),void 0===t&&(t=!this._isServer),this._sender.ping(e||h.EMPTY_BUFFER,t,r)}pong(e,t,r){if("function"==typeof e?(r=e,e=t=void 0):"function"==typeof t&&(r=t,t=void 0),this.readyState!==WebSocket.OPEN){const e=new Error(`WebSocket is not open: readyState ${this.readyState} `+`(${g[this.readyState]})`);if(r)return r(e);throw e}"number"==typeof e&&(e=e.toString()),void 0===t&&(t=!this._isServer),this._sender.pong(e||h.EMPTY_BUFFER,t,r)}send(e,t,r){if("function"==typeof t&&(r=t,t={}),this.readyState!==WebSocket.OPEN){const e=new Error(`WebSocket is not open: readyState ${this.readyState} `+`(${g[this.readyState]})`);if(r)return r(e);throw e}"number"==typeof e&&(e=e.toString());const n=Object.assign({binary:"string"!=typeof e,mask:!this._isServer,compress:!0,fin:!0},t);this._extensions[l.extensionName]||(n.compress=!1),this._sender.send(e||h.EMPTY_BUFFER,n,r)}terminate(){if(this.readyState!==WebSocket.CLOSED){if(this.readyState===WebSocket.CONNECTING){const e="WebSocket was closed before the connection was established";return abortHandshake(this,this._req,e)}this._socket&&(this.readyState=WebSocket.CLOSING,this._socket.destroy())}}}function netConnect(e){return e.protocolVersion&&(e.path=e.socketPath),a.connect(e)}function tlsConnect(e){return e.path=void 0,e.servername=e.servername||e.host,c.connect(e)}function abortHandshake(e,t,r){e.readyState=WebSocket.CLOSING;const n=new Error(r);Error.captureStackTrace(n,abortHandshake),t.setHeader?(t.abort(),t.once("abort",e.emitClose.bind(e)),e.emit("error",n)):(t.destroy(n),t.once("error",e.emit.bind(e,"error")),t.once("close",e.emitClose.bind(e)))}function receiverOnConclude(e,t){const r=this[y];r._socket.removeListener("data",socketOnData),r._socket.resume(),r._closeFrameReceived=!0,r._closeMessage=t,r._closeCode=e,1005===e?r.close():r.close(e,t)}function receiverOnDrain(){this[y]._socket.resume()}function receiverOnError(e){const t=this[y];t._socket.removeListener("data",socketOnData),t.readyState=WebSocket.CLOSING,t._closeCode=e[h.kStatusCode],t.emit("error",e),t._socket.destroy()}function receiverOnFinish(){this[y].emitClose()}function receiverOnMessage(e){this[y].emit("message",e)}function receiverOnPing(e){const t=this[y];t.pong(e,!t._isServer,h.NOOP),t.emit("ping",e)}function receiverOnPong(e){this[y].emit("pong",e)}function socketOnClose(){const e=this[y];this.removeListener("close",socketOnClose),this.removeListener("end",socketOnEnd),e.readyState=WebSocket.CLOSING,e._socket.read(),e._receiver.end(),this.removeListener("data",socketOnData),this[y]=void 0,clearTimeout(e._closeTimer),e._receiver._writableState.finished||e._receiver._writableState.errorEmitted?e.emitClose():(e._receiver.on("error",receiverOnFinish),e._receiver.on("finish",receiverOnFinish))}function socketOnData(e){this[y]._receiver.write(e)||this.pause()}function socketOnEnd(){const e=this[y];e.readyState=WebSocket.CLOSING,e._receiver.end(),this.end()}function socketOnError(){const e=this[y];this.removeListener("error",socketOnError),this.on("error",h.NOOP),e&&(e.readyState=WebSocket.CLOSING,this.destroy())}g.forEach((e,t)=>{WebSocket[g[t]]=t}),["open","error","close","message"].forEach(e=>{Object.defineProperty(WebSocket.prototype,`on${e}`,{get(){const t=this.listeners(e);for(var r=0;r<t.length;r++)if(t[r]._listener)return t[r]._listener},set(t){const r=this.listeners(e);for(var n=0;n<r.length;n++)r[n]._listener&&this.removeListener(e,r[n]);this.addEventListener(e,t)}})}),WebSocket.prototype.addEventListener=p.addEventListener,WebSocket.prototype.removeEventListener=p.removeEventListener,e.exports=WebSocket},function(e,t,r){"use strict";function Queue(e){if(!(this instanceof Queue))return new Queue(e);e=e||{},this.concurrency=e.concurrency||1/0,this.pending=0,this.jobs=[],this.cbs=[],this._done=function done(){this.pending--,this._run()}.bind(this)}["push","unshift","splice"].forEach(function(e){Queue.prototype[e]=function(){var t=Array.prototype[e].apply(this.jobs,arguments);return this._run(),t}}),Object.defineProperty(Queue.prototype,"length",{get:function(){return this.pending+this.jobs.length}}),Queue.prototype._run=function(){if(this.pending!==this.concurrency){if(this.jobs.length){var e=this.jobs.shift();this.pending++,e(this._done),this._run()}if(0===this.pending)for(;0!==this.cbs.length;){var t=this.cbs.pop();process.nextTick(t)}}},Queue.prototype.onDone=function(e){"function"==typeof e&&(this.cbs.push(e),this._run())},e.exports=Queue},function(e,t){e.exports=require("bufferutil")},function(e,t,r){"use strict";const n=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,1,1,1,1,1,0,0,1,1,0,1,1,0,1,1,1,1,1,1,1,1,1,1,0,0,0,0,0,0,0,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,0,0,0,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,0,1,0,1,0];function push(e,t,r){Object.prototype.hasOwnProperty.call(e,t)?e[t].push(r):e[t]=[r]}e.exports={format:function format(e){return Object.keys(e).map(t=>{var r=e[t];return Array.isArray(r)||(r=[r]),r.map(e=>[t].concat(Object.keys(e).map(t=>{var r=e[t];return Array.isArray(r)||(r=[r]),r.map(e=>!0===e?t:`${t}=${e}`).join("; ")})).join("; ")).join(", ")}).join(", ")},parse:function parse(e){const t={};if(void 0===e||""===e)return t;for(var r,i,o={},s=!1,a=!1,c=!1,u=-1,l=-1,p=0;p<e.length;p++){const h=e.charCodeAt(p);if(void 0===r)if(-1===l&&1===n[h])-1===u&&(u=p);else if(32===h||9===h)-1===l&&-1!==u&&(l=p);else{if(59!==h&&44!==h)throw new SyntaxError(`Unexpected character at index ${p}`);{if(-1===u)throw new SyntaxError(`Unexpected character at index ${p}`);-1===l&&(l=p);const n=e.slice(u,l);44===h?(push(t,n,o),o={}):r=n,u=l=-1}}else if(void 0===i)if(-1===l&&1===n[h])-1===u&&(u=p);else if(32===h||9===h)-1===l&&-1!==u&&(l=p);else if(59===h||44===h){if(-1===u)throw new SyntaxError(`Unexpected character at index ${p}`);-1===l&&(l=p),push(o,e.slice(u,l),!0),44===h&&(push(t,r,o),o={},r=void 0),u=l=-1}else{if(61!==h||-1===u||-1!==l)throw new SyntaxError(`Unexpected character at index ${p}`);i=e.slice(u,p),u=l=-1}else if(a){if(1!==n[h])throw new SyntaxError(`Unexpected character at index ${p}`);-1===u?u=p:s||(s=!0),a=!1}else if(c)if(1===n[h])-1===u&&(u=p);else if(34===h&&-1!==u)c=!1,l=p;else{if(92!==h)throw new SyntaxError(`Unexpected character at index ${p}`);a=!0}else if(34===h&&61===e.charCodeAt(p-1))c=!0;else if(-1===l&&1===n[h])-1===u&&(u=p);else if(-1===u||32!==h&&9!==h){if(59!==h&&44!==h)throw new SyntaxError(`Unexpected character at index ${p}`);if(-1===u)throw new SyntaxError(`Unexpected character at index ${p}`);-1===l&&(l=p);var d=e.slice(u,l);s&&(d=d.replace(/\\/g,""),s=!1),push(o,i,d),44===h&&(push(t,r,o),o={},r=void 0),i=void 0,u=l=-1}else-1===l&&(l=p)}if(-1===u||c)throw new SyntaxError("Unexpected end of input");-1===l&&(l=p);const h=e.slice(u,l);return void 0===r?push(t,h,{}):(void 0===i?push(o,h,!0):push(o,i,s?h.replace(/\\/g,""):h),push(t,r,o)),t}}},function(e,t,r){"use strict";const n=r(15),i=r(161),o=r(216),s=r(370),a=r(125),c=0,u=1,l=2,p=3,d=4,h=5;function error(e,t,r,n){const i=new e(r?`Invalid WebSocket frame: ${t}`:t);return Error.captureStackTrace(i,error),i[a.kStatusCode]=n,i}function toBuffer(e,t){return 1===e.length?e[0]:e.length>1?o.concat(e,t):a.EMPTY_BUFFER}e.exports=class Receiver extends n.Writable{constructor(e,t,r){super(),this._binaryType=e||a.BINARY_TYPES[0],this[a.kWebSocket]=void 0,this._extensions=t||{},this._maxPayload=0|r,this._bufferedBytes=0,this._buffers=[],this._compressed=!1,this._payloadLength=0,this._mask=void 0,this._fragmented=0,this._masked=!1,this._fin=!1,this._opcode=0,this._totalPayloadLength=0,this._messageLength=0,this._fragments=[],this._state=c,this._loop=!1}_write(e,t,r){if(8===this._opcode)return r();this._bufferedBytes+=e.length,this._buffers.push(e),this.startLoop(r)}consume(e){if(this._bufferedBytes-=e,e===this._buffers[0].length)return this._buffers.shift();if(e<this._buffers[0].length){const t=this._buffers[0];return this._buffers[0]=t.slice(e),t.slice(0,e)}const t=Buffer.allocUnsafe(e);do{const r=this._buffers[0];e>=r.length?this._buffers.shift().copy(t,t.length-e):(r.copy(t,t.length-e,0,e),this._buffers[0]=r.slice(e)),e-=r.length}while(e>0);return t}startLoop(e){var t;this._loop=!0;do{switch(this._state){case c:t=this.getInfo();break;case u:t=this.getPayloadLength16();break;case l:t=this.getPayloadLength64();break;case p:this.getMask();break;case d:t=this.getData(e);break;default:return void(this._loop=!1)}}while(this._loop);e(t)}getInfo(){if(this._bufferedBytes<2)return void(this._loop=!1);const e=this.consume(2);if(0!=(48&e[0]))return this._loop=!1,error(RangeError,"RSV2 and RSV3 must be clear",!0,1002);const t=64==(64&e[0]);if(t&&!this._extensions[i.extensionName])return this._loop=!1,error(RangeError,"RSV1 must be clear",!0,1002);if(this._fin=128==(128&e[0]),this._opcode=15&e[0],this._payloadLength=127&e[1],0===this._opcode){if(t)return this._loop=!1,error(RangeError,"RSV1 must be clear",!0,1002);if(!this._fragmented)return this._loop=!1,error(RangeError,"invalid opcode 0",!0,1002);this._opcode=this._fragmented}else if(1===this._opcode||2===this._opcode){if(this._fragmented)return this._loop=!1,error(RangeError,`invalid opcode ${this._opcode}`,!0,1002);this._compressed=t}else{if(!(this._opcode>7&&this._opcode<11))return this._loop=!1,error(RangeError,`invalid opcode ${this._opcode}`,!0,1002);if(!this._fin)return this._loop=!1,error(RangeError,"FIN must be set",!0,1002);if(t)return this._loop=!1,error(RangeError,"RSV1 must be clear",!0,1002);if(this._payloadLength>125)return this._loop=!1,error(RangeError,`invalid payload length ${this._payloadLength}`,!0,1002)}if(this._fin||this._fragmented||(this._fragmented=this._opcode),this._masked=128==(128&e[1]),126===this._payloadLength)this._state=u;else{if(127!==this._payloadLength)return this.haveLength();this._state=l}}getPayloadLength16(){if(!(this._bufferedBytes<2))return this._payloadLength=this.consume(2).readUInt16BE(0),this.haveLength();this._loop=!1}getPayloadLength64(){if(this._bufferedBytes<8)return void(this._loop=!1);const e=this.consume(8),t=e.readUInt32BE(0);return t>Math.pow(2,21)-1?(this._loop=!1,error(RangeError,"Unsupported WebSocket frame: payload length > 2^53 - 1",!1,1009)):(this._payloadLength=t*Math.pow(2,32)+e.readUInt32BE(4),this.haveLength())}haveLength(){if(this._payloadLength&&this._opcode<8&&(this._totalPayloadLength+=this._payloadLength,this._totalPayloadLength>this._maxPayload&&this._maxPayload>0))return this._loop=!1,error(RangeError,"Max payload size exceeded",!1,1009);this._masked?this._state=p:this._state=d}getMask(){this._bufferedBytes<4?this._loop=!1:(this._mask=this.consume(4),this._state=d)}getData(e){var t=a.EMPTY_BUFFER;if(this._payloadLength){if(this._bufferedBytes<this._payloadLength)return void(this._loop=!1);t=this.consume(this._payloadLength),this._masked&&o.unmask(t,this._mask)}return this._opcode>7?this.controlMessage(t):this._compressed?(this._state=h,void this.decompress(t,e)):(t.length&&(this._messageLength=this._totalPayloadLength,this._fragments.push(t)),this.dataMessage())}decompress(e,t){this._extensions[i.extensionName].decompress(e,this._fin,(e,r)=>{if(e)return t(e);if(r.length){if(this._messageLength+=r.length,this._messageLength>this._maxPayload&&this._maxPayload>0)return t(error(RangeError,"Max payload size exceeded",!1,1009));this._fragments.push(r)}const n=this.dataMessage();if(n)return t(n);this.startLoop(t)})}dataMessage(){if(this._fin){const t=this._messageLength,r=this._fragments;if(this._totalPayloadLength=0,this._messageLength=0,this._fragmented=0,this._fragments=[],2===this._opcode){var e;e="nodebuffer"===this._binaryType?toBuffer(r,t):"arraybuffer"===this._binaryType?function toArrayBuffer(e){return 0===e.byteOffset&&e.byteLength===e.buffer.byteLength?e.buffer:e.buffer.slice(e.byteOffset,e.byteOffset+e.byteLength)}(toBuffer(r,t)):r,this.emit("message",e)}else{const e=toBuffer(r,t);if(!s.isValidUTF8(e))return this._loop=!1,error(Error,"invalid UTF-8 sequence",!0,1007);this.emit("message",e.toString())}}this._state=c}controlMessage(e){if(8!==this._opcode)9===this._opcode?this.emit("ping",e):this.emit("pong",e),this._state=c;else if(this._loop=!1,0===e.length)this.emit("conclude",1005,""),this.end();else{if(1===e.length)return error(RangeError,"invalid payload length 1",!0,1002);{const t=e.readUInt16BE(0);if(!s.isValidStatusCode(t))return error(RangeError,`invalid status code ${t}`,!0,1002);const r=e.slice(2);if(!s.isValidUTF8(r))return error(Error,"invalid UTF-8 sequence",!0,1007);this.emit("conclude",t,r.toString()),this.end()}}}}},function(e,t,r){"use strict";try{const e=r(371);t.isValidUTF8="object"==typeof e?e.Validation.isValidUTF8:e}catch(e){t.isValidUTF8=(()=>!0)}t.isValidStatusCode=(e=>e>=1e3&&e<=1013&&1004!==e&&1005!==e&&1006!==e||e>=3e3&&e<=4999)},function(e,t){e.exports=require("utf-8-validate")},function(e,t,r){"use strict";const n=r(12),i=r(161),o=r(216),s=r(370),a=r(125);class Sender{constructor(e,t){this._extensions=t||{},this._socket=e,this._firstFragment=!0,this._compress=!1,this._bufferedBytes=0,this._deflating=!1,this._queue=[]}static frame(e,t){const r=e.length<1024||t.mask&&t.readOnly;var i=t.mask?6:2,s=e.length;e.length>=65536?(i+=8,s=127):e.length>125&&(i+=2,s=126);const a=Buffer.allocUnsafe(r?e.length+i:i);if(a[0]=t.fin?128|t.opcode:t.opcode,t.rsv1&&(a[0]|=64),126===s?a.writeUInt16BE(e.length,2):127===s&&(a.writeUInt32BE(0,2),a.writeUInt32BE(e.length,6)),!t.mask)return a[1]=s,r?(e.copy(a,i),[a]):[a,e];const c=n.randomBytes(4);return a[1]=128|s,a[i-4]=c[0],a[i-3]=c[1],a[i-2]=c[2],a[i-1]=c[3],r?(o.mask(e,c,a,i,e.length),[a]):(o.mask(e,c,e,0,e.length),[a,e])}close(e,t,r,n){var i;if(void 0===e)i=a.EMPTY_BUFFER;else{if("number"!=typeof e||!s.isValidStatusCode(e))throw new TypeError("First argument must be a valid error code number");void 0===t||""===t?(i=Buffer.allocUnsafe(2)).writeUInt16BE(e,0):((i=Buffer.allocUnsafe(2+Buffer.byteLength(t))).writeUInt16BE(e,0),i.write(t,2))}this._deflating?this.enqueue([this.doClose,i,r,n]):this.doClose(i,r,n)}doClose(e,t,r){this.sendFrame(Sender.frame(e,{fin:!0,rsv1:!1,opcode:8,mask:t,readOnly:!1}),r)}ping(e,t,r){var n=!0;Buffer.isBuffer(e)||(e instanceof ArrayBuffer?e=Buffer.from(e):ArrayBuffer.isView(e)?e=viewToBuffer(e):(e=Buffer.from(e),n=!1)),this._deflating?this.enqueue([this.doPing,e,t,n,r]):this.doPing(e,t,n,r)}doPing(e,t,r,n){this.sendFrame(Sender.frame(e,{fin:!0,rsv1:!1,opcode:9,mask:t,readOnly:r}),n)}pong(e,t,r){var n=!0;Buffer.isBuffer(e)||(e instanceof ArrayBuffer?e=Buffer.from(e):ArrayBuffer.isView(e)?e=viewToBuffer(e):(e=Buffer.from(e),n=!1)),this._deflating?this.enqueue([this.doPong,e,t,n,r]):this.doPong(e,t,n,r)}doPong(e,t,r,n){this.sendFrame(Sender.frame(e,{fin:!0,rsv1:!1,opcode:10,mask:t,readOnly:r}),n)}send(e,t,r){var n=t.binary?2:1,o=t.compress,s=!0;Buffer.isBuffer(e)||(e instanceof ArrayBuffer?e=Buffer.from(e):ArrayBuffer.isView(e)?e=viewToBuffer(e):(e=Buffer.from(e),s=!1));const a=this._extensions[i.extensionName];if(this._firstFragment?(this._firstFragment=!1,o&&a&&(o=e.length>=a._threshold),this._compress=o):(o=!1,n=0),t.fin&&(this._firstFragment=!0),a){const i={fin:t.fin,rsv1:o,opcode:n,mask:t.mask,readOnly:s};this._deflating?this.enqueue([this.dispatch,e,this._compress,i,r]):this.dispatch(e,this._compress,i,r)}else this.sendFrame(Sender.frame(e,{fin:t.fin,rsv1:!1,opcode:n,mask:t.mask,readOnly:s}),r)}dispatch(e,t,r,n){if(!t)return void this.sendFrame(Sender.frame(e,r),n);const o=this._extensions[i.extensionName];this._deflating=!0,o.compress(e,r.fin,(e,t)=>{if(this._deflating=!1,!this._socket.readable&&!this._socket.writable)return this._bufferedBytes=0,void(this._queue.length=0);r.readOnly=!1,this.sendFrame(Sender.frame(t,r),n),this.dequeue()})}dequeue(){for(;!this._deflating&&this._queue.length;){const e=this._queue.shift();this._bufferedBytes-=e[1].length,e[0].apply(this,e.slice(1))}}enqueue(e){this._bufferedBytes+=e[1].length,this._queue.push(e)}sendFrame(e,t){2===e.length?(this._socket.write(e[0]),this._socket.write(e[1],t)):this._socket.write(e[0],t)}}function viewToBuffer(e){const t=Buffer.from(e.buffer);return e.byteLength!==e.buffer.byteLength?t.slice(e.byteOffset,e.byteOffset+e.byteLength):t}e.exports=Sender},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(4),i=r(4),o=function(){function DeviceMethod(e,t){if(!e)throw new ReferenceError("params cannot be '"+e+"'");if(null===e.methodName||void 0===e.methodName||""===e.methodName)throw new ReferenceError("params.methodName cannot be '"+e.methodName+"'");if("string"!=typeof e.methodName)throw new TypeError("methodName must be a string");this._client=t,this.params=e,this.params.responseTimeoutInSeconds=this.params.responseTimeoutInSeconds||DeviceMethod.defaultResponseTimeout,this.params.connectTimeoutInSeconds=this.params.connectTimeoutInSeconds||DeviceMethod.defaultConnectTimeout,this.params.payload=void 0===this.params.payload||null===this.params.payload?DeviceMethod.defaultPayload:this.params.payload}return DeviceMethod.prototype.invokeOn=function(e,t){var r=this;return i.tripleValueCallbackToPromise(function(t){if(null==e||""===e)throw new ReferenceError("deviceId cannot be '"+e+"'");var i="/twins/"+encodeURIComponent(e)+"/methods"+n.endpoint.versionQueryString(),o=1e3*(r.params.responseTimeoutInSeconds+r.params.connectTimeoutInSeconds);r._client.executeApiCall("POST",i,{"Content-Type":"application/json; charset=utf-8"},r.params,o,t)},function(e,t){return{device:e,response:t}},t)},DeviceMethod.prototype.invokeOnModule=function(e,t,r){var o=this;return i.tripleValueCallbackToPromise(function(r){if(!e)throw new ReferenceError("deviceId cannot be '"+e+"'");if(!t)throw new ReferenceError("moduleId cannot be '"+t+"'");var i="/twins/"+encodeURIComponent(e)+"/modules/"+encodeURIComponent(t)+"/methods"+n.endpoint.versionQueryString(),s=1e3*(o.params.responseTimeoutInSeconds+o.params.connectTimeoutInSeconds);o._client.executeApiCall("POST",i,{"Content-Type":"application/json; charset=utf-8"},o.params,s,r)},function(e,t){return{device:e,response:t}},r)},DeviceMethod.defaultResponseTimeout=30,DeviceMethod.defaultConnectTimeout=0,DeviceMethod.defaultPayload=null,DeviceMethod}();t.DeviceMethod=o},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(217),i=r(162),o=r(4),s=function(){function Query(e,t){if(!e)throw new ReferenceError("executeQueryFn cannot be '"+e+"'");if("function"!=typeof e)throw new TypeError("executeQueryFn cannot be '"+typeof e+"'");this._executeQueryFn=e,this._registry=t,this.hasMoreResults=!0,this.continuationToken=null}return Query.prototype.next=function(e,t){var r,n=this,s=this.continuationToken;return"function"!=typeof e||t?(s=e,r=t):r=e,o.tripleValueCallbackToPromise(function(e){n._executeQueryFn(s,function(t,r,i){t?e(t):(n.continuationToken=i.headers["x-ms-continuation"],n.hasMoreResults=void 0!==n.continuationToken,e(null,r,i))})},function(e,t){return i.createResultWithIncomingMessage(e,t)},r)},Query.prototype.nextAsTwin=function(e,t){var r=this;return"function"!=typeof e||t||(t=e,e=null),o.tripleValueCallbackToPromise(function(t){var i=e||r.continuationToken;r.next(i,function(e,i,o){if(e)t(e);else if(i){var s=i.map(function(e){return new n.Twin(e,r._registry)});t(null,s,o)}else t(null,null,o)})},function(e,t){return i.createResultWithIncomingMessage(e,t)},t)},Query}();t.Query=s},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(113),i=function(){return function Device(e){if(this.deviceId=null,this.generationId=null,this.etag=null,this.connectionState="disconnected",this.status="enabled",this.statusReason=null,this.connectionStateUpdatedTime=null,this.statusUpdatedTime=null,this.lastActivityTime=null,this.cloudToDeviceMessageCount="0",this.capabilities={},this.authentication={symmetricKey:{primaryKey:null,secondaryKey:null},x509Thumbprint:{primaryThumbprint:null,secondaryThumbprint:null}},e){var t="string"==typeof e?JSON.parse(e):e;if(!t.deviceId)throw new ReferenceError("The 'deviceId' property cannot be '"+t.deviceId+"'");n.merge(this,t)}Object.defineProperty(this.authentication,"SymmetricKey",{enumerable:!0,get:function(){return this.symmetricKey}})}}();t.Device=i},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(4);t.create=function create(e,t,r,i){return n.SharedAccessSignature.create(e,t,r,i)},t.parse=function parse(e){return n.SharedAccessSignature.parse(e,["sr","sig","skn","se"])}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n=r(10);t.CommandNode=class CommandNode{constructor(e,t,r){this.label=e,this.command=t,this.args=r}getTreeItem(){return this.createCommandItem(this.label,this.command,this.args)}getChildren(){return[]}createCommandItem(e,t,r){const i=new n.TreeItem(e);return i.command={command:t,title:"",arguments:r},i}}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.InfoNode=class InfoNode{constructor(e){this.label=e}getTreeItem(){return{label:this.label}}getChildren(){return[]}}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n=r(10),i=r(16),o=r(893),s=r(894);t.DistributedTracingLabelNode=class DistributedTracingLabelNode{constructor(e){this.deviceNode=e,this.label="Distributed Tracing Setting (Preview)"}getTreeItem(){return{label:this.label,contextValue:"distributed-tracing-setting",collapsibleState:n.TreeItemCollapsibleState.Collapsed}}getChildren(){let e=[];return e.push(new s.TwinNode(new o.TwinItem("Desired",i.DeviceTwinPropertyType.Desired),this.deviceNode)),e.push(new s.TwinNode(new o.TwinItem("Reported",i.DeviceTwinPropertyType.Reported),this.deviceNode)),e}}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.DistributedTracingSettingNode=class DistributedTracingSettingNode{constructor(e,t,r,n){this.label=e,this.parent=t,this.contextValue=r,this.deviceNode=n}getTreeItem(){return{label:this.label,contextValue:this.contextValue}}getChildren(){return[]}}},function(e,t,r){"use strict";"undefined"==typeof process||"renderer"===process.type||!0===process.browser||process.__nwjs?e.exports=r(897):e.exports=r(899)},function(e,t,r){"use strict";e.exports=function setup(e){function selectColor(e){for(var t=0,r=0;r<e.length;r++)t=(t<<5)-t+e.charCodeAt(r),t|=0;return createDebug.colors[Math.abs(t)%createDebug.colors.length]}function createDebug(e){var t;function debug(){if(debug.enabled){for(var e=arguments.length,r=new Array(e),n=0;n<e;n++)r[n]=arguments[n];var i=debug,o=Number(new Date),s=o-(t||o);i.diff=s,i.prev=t,i.curr=o,t=o,r[0]=createDebug.coerce(r[0]),"string"!=typeof r[0]&&r.unshift("%O");var a=0;r[0]=r[0].replace(/%([a-zA-Z%])/g,function(e,t){if("%%"===e)return e;a++;var n=createDebug.formatters[t];if("function"==typeof n){var o=r[a];e=n.call(i,o),r.splice(a,1),a--}return e}),createDebug.formatArgs.call(i,r),(i.log||createDebug.log).apply(i,r)}}return debug.namespace=e,debug.enabled=createDebug.enabled(e),debug.useColors=createDebug.useColors(),debug.color=selectColor(e),debug.destroy=destroy,debug.extend=extend,"function"==typeof createDebug.init&&createDebug.init(debug),createDebug.instances.push(debug),debug}function destroy(){var e=createDebug.instances.indexOf(this);return-1!==e&&(createDebug.instances.splice(e,1),!0)}function extend(e,t){return createDebug(this.namespace+(void 0===t?":":t)+e)}return createDebug.debug=createDebug,createDebug.default=createDebug,createDebug.coerce=function coerce(e){return e instanceof Error?e.stack||e.message:e},createDebug.disable=function disable(){createDebug.enable("")},createDebug.enable=function enable(e){var t;createDebug.save(e),createDebug.names=[],createDebug.skips=[];var r=("string"==typeof e?e:"").split(/[\s,]+/),n=r.length;for(t=0;t<n;t++)r[t]&&("-"===(e=r[t].replace(/\*/g,".*?"))[0]?createDebug.skips.push(new RegExp("^"+e.substr(1)+"$")):createDebug.names.push(new RegExp("^"+e+"$")));for(t=0;t<createDebug.instances.length;t++){var i=createDebug.instances[t];i.enabled=createDebug.enabled(i.namespace)}},createDebug.enabled=function enabled(e){if("*"===e[e.length-1])return!0;var t,r;for(t=0,r=createDebug.skips.length;t<r;t++)if(createDebug.skips[t].test(e))return!1;for(t=0,r=createDebug.names.length;t<r;t++)if(createDebug.names[t].test(e))return!0;return!1},createDebug.humanize=r(898),Object.keys(e).forEach(function(t){createDebug[t]=e[t]}),createDebug.instances=[],createDebug.names=[],createDebug.skips=[],createDebug.formatters={},createDebug.selectColor=selectColor,createDebug.enable(createDebug.load()),createDebug}},function(e,t,r){"use strict";var n=r(96),i=r(127),o=r(384),s=0,a=1;var c=function(e){this.callback=e,this.outcome=void 0,this.username=void 0};c.prototype.start=function(e,t){var r=function extract(e){for(var t=[],r=0,n=0;n<e.length;)0===e[n]?(n>r?t.push(e.toString("utf8",r,n)):t.push(null),r=++n):++n;return n>r?t.push(e.toString("utf8",r,n)):t.push(null),t}(e);3!==r.length&&this.connection.sasl_failed("Unexpected response in PLAIN, got "+r.length+" fields, expected 3"),this.callback(r[1],r[2],t)?(this.outcome=!0,this.username=r[1]):this.outcome=!1};var u=function(e,t){this.username=e,this.password=t};u.prototype.start=function(e){var t=Buffer.alloc(1+this.username.length+1+this.password.length);t.writeUInt8(0,0),t.write(this.username,1),t.writeUInt8(0,1+this.username.length),t.write(this.password,1+this.username.length+1),e(void 0,t)};var l=function(){this.outcome=void 0,this.username=void 0};l.prototype.start=function(e){this.outcome=!0,this.username=e?e.toString("utf8"):"anonymous"};var p=function(e){this.username=e||"anonymous"};p.prototype.start=function(e){var t=Buffer.alloc(1+this.username.length);t.writeUInt8(0,0),t.write(this.username,1),e(void 0,t)};var d=function(){this.outcome=void 0,this.username=void 0};d.prototype.start=function(){this.outcome=!0};var h=function(){this.username=void 0};h.prototype.start=function(e){e(void 0,"")},h.prototype.step=function(e){e(void 0,"")};var f=function(e,t){this.username=e,this.token=t};f.prototype.start=function(e){var t=Buffer.alloc(this.username.length+this.token.length+5+12+3),r=0;t.write("user=",r),r+=5,t.write(this.username,r),r+=this.username.length,t.writeUInt8(1,r),r+=1,t.write("auth=Bearer ",r),r+=12,t.write(this.token,r),r+=this.token.length,t.writeUInt8(1,r),r+=1,t.writeUInt8(1,r),r+=1,e(void 0,t)};var m=function(e,t){this.connection=e,this.transport=new o(e.amqp_transport.identifier,3,i.TYPE_SASL,this),this.next=e.amqp_transport,this.mechanisms=t,this.mechanism=void 0,this.outcome=void 0,this.username=void 0;var r=Object.getOwnPropertyNames(t);this.transport.encode(i.sasl_frame(i.sasl_mechanisms({sasl_server_mechanisms:r})))};m.prototype.do_step=function(e){void 0===this.mechanism.outcome?this.transport.encode(i.sasl_frame(i.sasl_challenge({challenge:e}))):(this.outcome=this.mechanism.outcome?s:a,this.transport.encode(i.sasl_frame(i.sasl_outcome({code:this.outcome}))),this.outcome===s&&(this.username=this.mechanism.username,this.transport.write_complete=!0,this.transport.read_complete=!0))},m.prototype.on_sasl_init=function(e){var t=this.mechanisms[e.performative.mechanism];if(t){this.mechanism=t();var r=this.mechanism.start(e.performative.initial_response,e.performative.hostname);this.do_step(r)}else this.outcome=a,this.transport.encode(i.sasl_frame(i.sasl_outcome({code:this.outcome})))},m.prototype.on_sasl_response=function(e){this.do_step(this.mechanism.step(e.performative.response))},m.prototype.has_writes_pending=function(){return this.transport.has_writes_pending()||this.next.has_writes_pending()},m.prototype.write=function(e){return this.transport.write_complete&&0===this.transport.pending.length?this.next.write(e):this.transport.write(e)},m.prototype.read=function(e){return this.transport.read_complete?this.next.read(e):this.transport.read(e)};var g=function(e,t,r){this.connection=e,this.transport=new o(e.amqp_transport.identifier,3,i.TYPE_SASL,this),this.next=e.amqp_transport,this.mechanisms=t,this.mechanism=void 0,this.mechanism_name=void 0,this.hostname=r,this.failed=!1};g.prototype.on_sasl_mechanisms=function(e){var t=[];Array.isArray(e.performative.sasl_server_mechanisms)?t=e.performative.sasl_server_mechanisms:e.performative.sasl_server_mechanisms&&(t=[e.performative.sasl_server_mechanisms]);for(var r=0;void 0===this.mechanism&&r<t.length;r++){var n=t[r],o=this.mechanisms[n];o&&(this.mechanism="function"==typeof o?o():o,this.mechanism_name=n)}if(this.mechanism){var s=this;this.mechanism.start(function(e,t){if(e)s.failed=!0,s.connection.sasl_failed("SASL mechanism init failed: "+e);else{var r={mechanism:s.mechanism_name,initial_response:t};s.hostname&&(r.hostname=s.hostname),s.transport.encode(i.sasl_frame(i.sasl_init(r))),s.connection.output()}})}else this.failed=!0,this.connection.sasl_failed("No suitable mechanism; server supports "+e.performative.sasl_server_mechanisms)},g.prototype.on_sasl_challenge=function(e){var t=this;this.mechanism.step(e.performative.challenge,function(e,r){e?(t.failed=!0,t.connection.sasl_failed("SASL mechanism challenge failed: "+e)):(t.transport.encode(i.sasl_frame(i.sasl_response({response:r}))),t.connection.output())})},g.prototype.on_sasl_outcome=function(e){switch(e.performative.code){case s:this.transport.read_complete=!0,this.transport.write_complete=!0;break;default:this.transport.write_complete=!0,this.connection.sasl_failed("Failed to authenticate: "+e.performative.code)}},g.prototype.has_writes_pending=function(){return this.transport.has_writes_pending()||this.next.has_writes_pending()},g.prototype.write=function(e){return this.transport.write_complete?this.next.write(e):this.transport.write(e)},g.prototype.read=function(e){return this.transport.read_complete?this.next.read(e):this.transport.read(e)};var y=function(e,t){this.header_received=!1,this.transports={0:e.amqp_transport,3:new m(e,t)},this.selected=void 0};y.prototype.has_writes_pending=function(){return this.header_received&&this.selected.has_writes_pending()},y.prototype.write=function(e){return this.selected?this.selected.write(e):0},y.prototype.read=function(e){if(!this.header_received){if(e.length<8)return 0;if(this.header_received=i.read_header(e),this.selected=this.transports[this.header_received.protocol_id],void 0===this.selected)throw new n.ProtocolError("Invalid AMQP protocol id "+this.header_received.protocol_id)}return this.selected.read(e)};var v={enable_anonymous:function(){this.ANONYMOUS=function(){return new l}},enable_plain:function(e){this.PLAIN=function(){return new c(e)}}},b={enable_anonymous:function(e){this.ANONYMOUS=function(){return new p(e)}},enable_plain:function(e,t){this.PLAIN=function(){return new u(e,t)}},enable_external:function(){this.EXTERNAL=function(){return new h}},enable_xoauth2:function(e,t){if(e&&t)this.XOAUTH2=function(){return new f(e,t)};else{if(void 0===t)throw Error("token must be specified");if(void 0===e)throw Error("username must be specified")}}};e.exports={Client:g,Server:m,Selective:y,server_mechanisms:function(){return Object.create(v)},client_mechanisms:function(){return Object.create(b)},server_add_external:function(e){return e.EXTERNAL=function(){return new d},e}}},function(e,t,r){"use strict";var n=r(96),i=r(127),o=r(98),s=function(e,t,r,n){this.identifier=e,this.protocol_id=t,this.frame_type=r,this.handler=n,this.pending=[],this.header_sent=void 0,this.header_received=void 0,this.write_complete=!1,this.read_complete=!1};s.prototype.has_writes_pending=function(){return this.pending.length>0||!this.header_sent},s.prototype.encode=function(e){this.pending.push(e)},s.prototype.write=function(e){if(!this.header_sent){var t=Buffer.alloc(8),r={protocol_id:this.protocol_id,major:1,minor:0,revision:0};o.frames("[%s] -> %o",this.identifier,r),i.write_header(t,r),e.write(t),this.header_sent=r}for(var n=0;n<this.pending.length;n++){var s=this.pending[n];t=i.write_frame(s);e.write(t),s.performative?o.frames("[%s]:%s -> %s %j",this.identifier,s.channel,s.performative.constructor,s.performative,s.payload||""):o.frames("[%s]:%s -> empty",this.identifier,s.channel),o.raw("[%s] SENT: %d %h",this.identifier,t.length,t)}this.pending=[]},s.prototype.read=function(e){var t=0;if(!this.header_received){if(e.length<8)return t;if(this.header_received=i.read_header(e),o.frames("[%s] <- %o",this.identifier,this.header_received),this.header_received.protocol_id!==this.protocol_id)throw 3===this.protocol_id&&0===this.header_received.protocol_id?new n.ProtocolError("Expecting SASL layer"):0===this.protocol_id&&3===this.header_received.protocol_id?new n.ProtocolError("SASL layer not enabled"):new n.ProtocolError("Invalid AMQP protocol id "+this.header_received.protocol_id+" expecting: "+this.protocol_id);t=8}for(;t<e.length-4&&!this.read_complete;){var r=e.readUInt32BE(t);if(o.io("[%s] got frame of size %d",this.identifier,r),e.length<t+r){o.io("[%s] incomplete frame; have only %d of %d",this.identifier,e.length-t,r);break}var s=e.slice(t,t+r);o.raw("[%s] RECV: %d %h",this.identifier,s.length,s);var a=i.read_frame(s);if(a.performative?o.frames("[%s]:%s <- %s %j",this.identifier,a.channel,a.performative.constructor,a.performative,a.payload||""):o.frames("[%s]:%s <- empty",this.identifier,a.channel),a.type!==this.frame_type)throw new n.ProtocolError("Invalid frame type: "+a.type);t+=r,a.performative&&a.performative.dispatch(this.handler,a)}return t},e.exports=s},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n=r(221),i=r(222),o=r(223),s=r(128);!function(e){e.translate=function translate(e,t,r){const a=e.connection&&e.connection.options?e.connection.options.id:"";s.contextTranslator("[%s] Translating the context for event: '%s'.",a,r);const c=Object.assign({_context:e},e),u=t instanceof n.Connection?t:t.connection;return c.connection=u,c.container=u.container,t instanceof o.Link?(c.session=t.session,t.type===o.LinkType.receiver&&e.receiver?c.receiver=t:t.type===o.LinkType.sender&&e.sender&&(c.sender=t)):t instanceof i.Session&&(c.session=t),c}}(t.EventContext||(t.EventContext={}))},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n=r(223);t.Receiver=class Receiver extends n.Link{constructor(e,t,r){super(n.LinkType.receiver,e,t,r)}get drain(){return this._link.drain}set drain(e){this._link.drain=e}addCredit(e){this._link.add_credit(e)}setCreditWindow(e){this._link.set_credit_window(e)}}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n=r(223);t.Sender=class Sender extends n.Link{constructor(e,t,r){super(n.LinkType.sender,e,t,r)}setDrained(e){this._link.set_drained(e)}sendable(){return this._link.sendable()}send(e,t,r){return this._link.send(e,t,r)}}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n=r(0),i=r(126),o=r(5),s=r(221);class Container extends o.EventEmitter{constructor(e){e||(e={}),super(),e.createdInstance?(this._container=e.createdInstance,delete e.createdInstance):this._container=i.create_container(e),this.options=this._container.options}get id(){return this._container.id}get filter(){return this._container.filter}get types(){return this._container.types}get message(){return this._container.message}get sasl(){return this._container.sasl}get saslServerMechanisms(){return this._container.sasl_server_mechanisms}createConnection(e){const t=this._container.create_connection(e);return new s.Connection({rheaConnection:t,container:this})}connect(e){return n.__awaiter(this,void 0,void 0,function*(){return this.createConnection(e).open()})}listen(e){return this._container.listen(e)}generateUUid(){return this._container.generate_uuid()}stringToUuid(e){return this._container.string_to_uuid(e)}uuidToString(e){return this._container.uuid_to_string(e)}websocketAccept(e,t){return this._container.websocket_accept(e,t)}websocketConnect(e){return this._container.websocket_connect(e)}static create(e){return new Container(e)}static copyFromContainerInstance(e){return new Container({createdInstance:e})}}t.Container=Container},function(e,t,r){"use strict";e.exports=function setup(e){function selectColor(e){for(var t=0,r=0;r<e.length;r++)t=(t<<5)-t+e.charCodeAt(r),t|=0;return createDebug.colors[Math.abs(t)%createDebug.colors.length]}function createDebug(e){var t;function debug(){if(debug.enabled){for(var e=arguments.length,r=new Array(e),n=0;n<e;n++)r[n]=arguments[n];var i=debug,o=Number(new Date),s=o-(t||o);i.diff=s,i.prev=t,i.curr=o,t=o,r[0]=createDebug.coerce(r[0]),"string"!=typeof r[0]&&r.unshift("%O");var a=0;r[0]=r[0].replace(/%([a-zA-Z%])/g,function(e,t){if("%%"===e)return e;a++;var n=createDebug.formatters[t];if("function"==typeof n){var o=r[a];e=n.call(i,o),r.splice(a,1),a--}return e}),createDebug.formatArgs.call(i,r),(i.log||createDebug.log).apply(i,r)}}return debug.namespace=e,debug.enabled=createDebug.enabled(e),debug.useColors=createDebug.useColors(),debug.color=selectColor(e),debug.destroy=destroy,debug.extend=extend,"function"==typeof createDebug.init&&createDebug.init(debug),createDebug.instances.push(debug),debug}function destroy(){var e=createDebug.instances.indexOf(this);return-1!==e&&(createDebug.instances.splice(e,1),!0)}function extend(e,t){return createDebug(this.namespace+(void 0===t?":":t)+e)}return createDebug.debug=createDebug,createDebug.default=createDebug,createDebug.coerce=function coerce(e){return e instanceof Error?e.stack||e.message:e},createDebug.disable=function disable(){createDebug.enable("")},createDebug.enable=function enable(e){var t;createDebug.save(e),createDebug.names=[],createDebug.skips=[];var r=("string"==typeof e?e:"").split(/[\s,]+/),n=r.length;for(t=0;t<n;t++)r[t]&&("-"===(e=r[t].replace(/\*/g,".*?"))[0]?createDebug.skips.push(new RegExp("^"+e.substr(1)+"$")):createDebug.names.push(new RegExp("^"+e+"$")));for(t=0;t<createDebug.instances.length;t++){var i=createDebug.instances[t];i.enabled=createDebug.enabled(i.namespace)}},createDebug.enabled=function enabled(e){if("*"===e[e.length-1])return!0;var t,r;for(t=0,r=createDebug.skips.length;t<r;t++)if(createDebug.skips[t].test(e))return!1;for(t=0,r=createDebug.names.length;t<r;t++)if(createDebug.names[t].test(e))return!0;return!1},createDebug.humanize=r(909),Object.keys(e).forEach(function(t){createDebug[t]=e[t]}),createDebug.instances=[],createDebug.names=[],createDebug.skips=[],createDebug.formatters={},createDebug.selectColor=selectColor,createDebug.enable(createDebug.load()),createDebug}},function(e,t,r){"use strict";e.exports=function bind(e,t){return function wrap(){for(var r=new Array(arguments.length),n=0;n<r.length;n++)r[n]=arguments[n];return e.apply(t,r)}}},function(e,t,r){"use strict";var n=r(228);e.exports=function settle(e,t,r){var i=r.config.validateStatus;r.status&&i&&!i(r.status)?t(n("Request failed with status code "+r.status,r.config,null,r.request,r)):e(r)}},function(e,t,r){"use strict";e.exports=function enhanceError(e,t,r,n,i){return e.config=t,r&&(e.code=r),e.request=n,e.response=i,e}},function(e,t,r){"use strict";var n=r(42);function encode(e){return encodeURIComponent(e).replace(/%40/gi,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}e.exports=function buildURL(e,t,r){if(!t)return e;var i;if(r)i=r(t);else if(n.isURLSearchParams(t))i=t.toString();else{var o=[];n.forEach(t,function serialize(e,t){null!=e&&(n.isArray(e)?t+="[]":e=[e],n.forEach(e,function parseValue(e){n.isDate(e)?e=e.toISOString():n.isObject(e)&&(e=JSON.stringify(e)),o.push(encode(t)+"="+encode(e))}))}),i=o.join("&")}return i&&(e+=(-1===e.indexOf("?")?"?":"&")+i),e}},function(e,t,r){var n=r(7),i=n.URL,o=r(23),s=r(21),a=r(44),c=r(15).Writable,u=r(920)("follow-redirects"),l={GET:!0,HEAD:!0,OPTIONS:!0,TRACE:!0},p=Object.create(null);function RedirectableRequest(e,t){c.call(this),e.headers=e.headers||{},this._options=e,this._ended=!1,this._ending=!1,this._redirectCount=0,this._redirects=[],this._requestBodyLength=0,this._requestBodyBuffers=[],e.host&&(e.hostname||(e.hostname=e.host),delete e.host),t&&this.on("response",t);var r=this;if(this._onNativeResponse=function(e){r._processResponse(e)},!e.pathname&&e.path){var n=e.path.indexOf("?");n<0?e.pathname=e.path:(e.pathname=e.path.substring(0,n),e.search=e.path.substring(n))}this._performRequest()}function startTimer(e,t){clearTimeout(e._timeout),e._timeout=setTimeout(function(){e.emit("timeout")},t)}function clearTimer(){clearTimeout(this._timeout)}function wrap(e){var t={maxRedirects:21,maxBodyLength:10485760},r={};return Object.keys(e).forEach(function(o){var s=o+":",c=r[s]=e[o],l=t[o]=Object.create(c);l.request=function(e,o,c){if("string"==typeof e){var l=e;try{e=urlToOptions(new i(l))}catch(t){e=n.parse(l)}}else i&&e instanceof i?e=urlToOptions(e):(c=o,o=e,e={protocol:s});return"function"==typeof o&&(c=o,o=null),(o=Object.assign({maxRedirects:t.maxRedirects,maxBodyLength:t.maxBodyLength},e,o)).nativeProtocols=r,a.equal(o.protocol,s,"protocol mismatch"),u("options",o),new RedirectableRequest(o,c)},l.get=function(e,t,r){var n=l.request(e,t,r);return n.end(),n}}),t}function noop(){}function urlToOptions(e){var t={protocol:e.protocol,hostname:e.hostname.startsWith("[")?e.hostname.slice(1,-1):e.hostname,hash:e.hash,search:e.search,pathname:e.pathname,path:e.pathname+e.search,href:e.href};return""!==e.port&&(t.port=Number(e.port)),t}["abort","aborted","error","socket","timeout"].forEach(function(e){p[e]=function(t){this._redirectable.emit(e,t)}}),RedirectableRequest.prototype=Object.create(c.prototype),RedirectableRequest.prototype.write=function(e,t,r){if(this._ending)throw new Error("write after end");if(!("string"==typeof e||"object"==typeof e&&"length"in e))throw new Error("data should be a string, Buffer or Uint8Array");"function"==typeof t&&(r=t,t=null),0!==e.length?this._requestBodyLength+e.length<=this._options.maxBodyLength?(this._requestBodyLength+=e.length,this._requestBodyBuffers.push({data:e,encoding:t}),this._currentRequest.write(e,t,r)):(this.emit("error",new Error("Request body larger than maxBodyLength limit")),this.abort()):r&&r()},RedirectableRequest.prototype.end=function(e,t,r){if("function"==typeof e?(r=e,e=t=null):"function"==typeof t&&(r=t,t=null),e){var n=this,i=this._currentRequest;this.write(e,t,function(){n._ended=!0,i.end(null,null,r)}),this._ending=!0}else this._ended=this._ending=!0,this._currentRequest.end(null,null,r)},RedirectableRequest.prototype.setHeader=function(e,t){this._options.headers[e]=t,this._currentRequest.setHeader(e,t)},RedirectableRequest.prototype.removeHeader=function(e){delete this._options.headers[e],this._currentRequest.removeHeader(e)},RedirectableRequest.prototype.setTimeout=function(e,t){if(t&&this.once("timeout",t),this.socket)startTimer(this,e);else{var r=this;this._currentRequest.once("socket",function(){startTimer(r,e)})}return this.once("response",clearTimer),this.once("error",clearTimer),this},["abort","flushHeaders","getHeader","setNoDelay","setSocketKeepAlive"].forEach(function(e){RedirectableRequest.prototype[e]=function(t,r){return this._currentRequest[e](t,r)}}),["aborted","connection","socket"].forEach(function(e){Object.defineProperty(RedirectableRequest.prototype,e,{get:function(){return this._currentRequest[e]}})}),RedirectableRequest.prototype._performRequest=function(){var e=this._options.protocol,t=this._options.nativeProtocols[e];if(t){if(this._options.agents){var r=e.substr(0,e.length-1);this._options.agent=this._options.agents[r]}var i=this._currentRequest=t.request(this._options,this._onNativeResponse);for(var o in this._currentUrl=n.format(this._options),i._redirectable=this,p)o&&i.on(o,p[o]);if(this._isRedirect){var s=0,a=this,c=this._requestBodyBuffers;!function writeNext(e){if(i===a._currentRequest)if(e)a.emit("error",e);else if(s<c.length){var t=c[s++];i.finished||i.write(t.data,t.encoding,writeNext)}else a._ended&&i.end()}()}}else this.emit("error",new Error("Unsupported protocol "+e))},RedirectableRequest.prototype._processResponse=function(e){this._options.trackRedirects&&this._redirects.push({url:this._currentUrl,headers:e.headers,statusCode:e.statusCode});var t=e.headers.location;if(t&&!1!==this._options.followRedirects&&e.statusCode>=300&&e.statusCode<400){if(this._currentRequest.removeAllListeners(),this._currentRequest.on("error",noop),this._currentRequest.abort(),++this._redirectCount>this._options.maxRedirects)return void this.emit("error",new Error("Max redirects exceeded."));var r,i=this._options.headers;if(307!==e.statusCode&&!(this._options.method in l))for(r in this._options.method="GET",this._requestBodyBuffers=[],i)/^content-/i.test(r)&&delete i[r];if(!this._isRedirect)for(r in i)/^host$/i.test(r)&&delete i[r];var o=n.resolve(this._currentUrl,t);u("redirecting to",o),Object.assign(this._options,n.parse(o)),this._isRedirect=!0,this._performRequest(),e.destroy()}else e.responseUrl=this._currentUrl,e.redirects=this._redirects,this.emit("response",e),this._requestBodyBuffers=[]},e.exports=wrap({http:o,https:s}),e.exports.wrap=wrap},function(e,t,r){"use strict";e.exports=function setup(e){function selectColor(e){for(var t=0,r=0;r<e.length;r++)t=(t<<5)-t+e.charCodeAt(r),t|=0;return createDebug.colors[Math.abs(t)%createDebug.colors.length]}function createDebug(e){var t;function debug(){if(debug.enabled){for(var e=arguments.length,r=new Array(e),n=0;n<e;n++)r[n]=arguments[n];var i=debug,o=Number(new Date),s=o-(t||o);i.diff=s,i.prev=t,i.curr=o,t=o,r[0]=createDebug.coerce(r[0]),"string"!=typeof r[0]&&r.unshift("%O");var a=0;r[0]=r[0].replace(/%([a-zA-Z%])/g,function(e,t){if("%%"===e)return e;a++;var n=createDebug.formatters[t];if("function"==typeof n){var o=r[a];e=n.call(i,o),r.splice(a,1),a--}return e}),createDebug.formatArgs.call(i,r),(i.log||createDebug.log).apply(i,r)}}return debug.namespace=e,debug.enabled=createDebug.enabled(e),debug.useColors=createDebug.useColors(),debug.color=selectColor(e),debug.destroy=destroy,debug.extend=extend,"function"==typeof createDebug.init&&createDebug.init(debug),createDebug.instances.push(debug),debug}function destroy(){var e=createDebug.instances.indexOf(this);return-1!==e&&(createDebug.instances.splice(e,1),!0)}function extend(e,t){return createDebug(this.namespace+(void 0===t?":":t)+e)}return createDebug.debug=createDebug,createDebug.default=createDebug,createDebug.coerce=function coerce(e){return e instanceof Error?e.stack||e.message:e},createDebug.disable=function disable(){createDebug.enable("")},createDebug.enable=function enable(e){var t;createDebug.save(e),createDebug.names=[],createDebug.skips=[];var r=("string"==typeof e?e:"").split(/[\s,]+/),n=r.length;for(t=0;t<n;t++)r[t]&&("-"===(e=r[t].replace(/\*/g,".*?"))[0]?createDebug.skips.push(new RegExp("^"+e.substr(1)+"$")):createDebug.names.push(new RegExp("^"+e+"$")));for(t=0;t<createDebug.instances.length;t++){var i=createDebug.instances[t];i.enabled=createDebug.enabled(i.namespace)}},createDebug.enabled=function enabled(e){if("*"===e[e.length-1])return!0;var t,r;for(t=0,r=createDebug.skips.length;t<r;t++)if(createDebug.skips[t].test(e))return!1;for(t=0,r=createDebug.names.length;t<r;t++)if(createDebug.names[t].test(e))return!0;return!1},createDebug.humanize=r(922),Object.keys(e).forEach(function(t){createDebug[t]=e[t]}),createDebug.instances=[],createDebug.names=[],createDebug.skips=[],createDebug.formatters={},createDebug.selectColor=selectColor,createDebug.enable(createDebug.load()),createDebug}},function(e,t,r){"use strict";e.exports=function isCancel(e){return!(!e||!e.__CANCEL__)}},function(e,t,r){"use strict";function Cancel(e){this.message=e}Cancel.prototype.toString=function toString(){return"Cancel"+(this.message?": "+this.message:"")},Cancel.prototype.__CANCEL__=!0,e.exports=Cancel},function(e,t){(function(){"use strict";var e;e=new RegExp(/(?!xmlns)^.*:/),t.normalize=function(e){return e.toLowerCase()},t.firstCharLowerCase=function(e){return e.charAt(0).toLowerCase()+e.slice(1)},t.stripPrefix=function(t){return t.replace(e,"")},t.parseNumbers=function(e){return isNaN(e)||(e=e%1==0?parseInt(e,10):parseFloat(e)),e},t.parseBooleans=function(e){return/^(?:true|false)$/i.test(e)&&(e="true"===e.toLowerCase()),e}}).call(this)},function(e,t,r){"use strict";r.r(t),r.d(t,"Environment",function(){return n});var n=function(){function Environment(e){if(this.validateAuthority=!0,!e||"object"!=typeof e)throw new Error("'parameters' is a required parameter and must be of type 'object'.");["name","portalUrl","managementEndpointUrl","resourceManagerEndpointUrl","activeDirectoryEndpointUrl","activeDirectoryResourceId"].forEach(function(t){if(!e[t]||"string"!=typeof e[t].valueOf())throw new Error('Please provide "'+t+'" for the environment and it must be of type "string".')}),this.name=e.name,this.portalUrl=e.portalUrl,this.managementEndpointUrl=e.managementEndpointUrl,this.resourceManagerEndpointUrl=e.resourceManagerEndpointUrl,this.activeDirectoryEndpointUrl=e.activeDirectoryEndpointUrl,this.activeDirectoryResourceId=e.activeDirectoryResourceId,this.activeDirectoryGraphApiVersion&&(this.activeDirectoryGraphApiVersion=e.activeDirectoryGraphApiVersion),this.activeDirectoryGraphResourceId&&(this.activeDirectoryGraphResourceId=e.activeDirectoryGraphResourceId),this.azureDataLakeAnalyticsCatalogAndJobEndpointSuffix&&(this.azureDataLakeAnalyticsCatalogAndJobEndpointSuffix=e.azureDataLakeAnalyticsCatalogAndJobEndpointSuffix),this.azureDataLakeStoreFileSystemEndpointSuffix&&(this.azureDataLakeStoreFileSystemEndpointSuffix=e.azureDataLakeStoreFileSystemEndpointSuffix),this.batchResourceId&&(this.batchResourceId=e.batchResourceId),this.galleryEndpointUrl&&(this.galleryEndpointUrl=e.galleryEndpointUrl),this.keyVaultDnsSuffix&&(this.keyVaultDnsSuffix=e.keyVaultDnsSuffix),this.publishingProfileUrl&&(this.publishingProfileUrl=e.publishingProfileUrl),this.sqlManagementEndpointUrl&&(this.sqlManagementEndpointUrl=e.sqlManagementEndpointUrl),this.sqlServerHostnameSuffix&&(this.sqlServerHostnameSuffix=e.sqlServerHostnameSuffix),this.storageEndpointSuffix&&(this.storageEndpointSuffix=e.storageEndpointSuffix)}return Environment.add=function(e){var t={},r=new Environment(e);t[e.name]=r,Object.assign(Environment,t)},Environment.get=function(e){if(!e)throw new TypeError("name cannot be null or undefined and must be of type string.");return Environment[e]},Environment.AzureCloud={name:"AzureCloud",portalUrl:"https://portal.azure.com",publishingProfileUrl:"https://go.microsoft.com/fwlink/?LinkId=254432",managementEndpointUrl:"https://management.core.windows.net",resourceManagerEndpointUrl:"https://management.azure.com/",sqlManagementEndpointUrl:"https://management.core.windows.net:8443/",sqlServerHostnameSuffix:".database.windows.net",galleryEndpointUrl:"https://gallery.azure.com/",activeDirectoryEndpointUrl:"https://login.microsoftonline.com/",activeDirectoryResourceId:"https://management.core.windows.net/",activeDirectoryGraphResourceId:"https://graph.windows.net/",batchResourceId:"https://batch.core.windows.net/",activeDirectoryGraphApiVersion:"2013-04-05",storageEndpointSuffix:".core.windows.net",keyVaultDnsSuffix:".vault.azure.net",azureDataLakeStoreFileSystemEndpointSuffix:"azuredatalakestore.net",azureDataLakeAnalyticsCatalogAndJobEndpointSuffix:"azuredatalakeanalytics.net",validateAuthority:!0},Environment.ChinaCloud={name:"AzureChinaCloud",portalUrl:"https://portal.azure.cn",publishingProfileUrl:"https://go.microsoft.com/fwlink/?LinkID=301774",managementEndpointUrl:"https://management.core.chinacloudapi.cn",resourceManagerEndpointUrl:"https://management.chinacloudapi.cn",sqlManagementEndpointUrl:"https://management.core.chinacloudapi.cn:8443/",sqlServerHostnameSuffix:".database.chinacloudapi.cn",galleryEndpointUrl:"https://gallery.chinacloudapi.cn/",activeDirectoryEndpointUrl:"https://login.chinacloudapi.cn/",activeDirectoryResourceId:"https://management.core.chinacloudapi.cn/",activeDirectoryGraphResourceId:"https://graph.chinacloudapi.cn/",activeDirectoryGraphApiVersion:"2013-04-05",batchResourceId:"https://batch.chinacloudapi.cn/",storageEndpointSuffix:".core.chinacloudapi.cn",keyVaultDnsSuffix:".vault.azure.cn",azureDataLakeStoreFileSystemEndpointSuffix:"N/A",azureDataLakeAnalyticsCatalogAndJobEndpointSuffix:"N/A",validateAuthority:!0},Environment.USGovernment={name:"AzureUSGovernment",portalUrl:"https://portal.azure.us",publishingProfileUrl:"https://manage.windowsazure.us/publishsettings/index",managementEndpointUrl:"https://management.core.usgovcloudapi.net",resourceManagerEndpointUrl:"https://management.usgovcloudapi.net",sqlManagementEndpointUrl:"https://management.core.usgovcloudapi.net:8443/",sqlServerHostnameSuffix:".database.usgovcloudapi.net",galleryEndpointUrl:"https://gallery.usgovcloudapi.net/",activeDirectoryEndpointUrl:"https://login.microsoftonline.us/",activeDirectoryResourceId:"https://management.core.usgovcloudapi.net/",activeDirectoryGraphResourceId:"https://graph.windows.net/",batchResourceId:"https://batch.core.usgovcloudapi.net/",activeDirectoryGraphApiVersion:"2013-04-05",storageEndpointSuffix:".core.usgovcloudapi.net",keyVaultDnsSuffix:".vault.usgovcloudapi.net",azureDataLakeStoreFileSystemEndpointSuffix:"N/A",azureDataLakeAnalyticsCatalogAndJobEndpointSuffix:"N/A",validateAuthority:!0},Environment.GermanCloud={name:"AzureGermanCloud",portalUrl:"https://portal.microsoftazure.de/",publishingProfileUrl:"https://manage.microsoftazure.de/publishsettings/index",managementEndpointUrl:"https://management.core.cloudapi.de",resourceManagerEndpointUrl:"https://management.microsoftazure.de",sqlManagementEndpointUrl:"https://management.core.cloudapi.de:8443/",sqlServerHostnameSuffix:".database.cloudapi.de",galleryEndpointUrl:"https://gallery.cloudapi.de/",activeDirectoryEndpointUrl:"https://login.microsoftonline.de/",activeDirectoryResourceId:"https://management.core.cloudapi.de/",activeDirectoryGraphResourceId:"https://graph.cloudapi.de/",batchResourceId:"https://batch.microsoftazure.de/",activeDirectoryGraphApiVersion:"2013-04-05",storageEndpointSuffix:".core.cloudapi.de",keyVaultDnsSuffix:".vault.microsoftazure.de",azureDataLakeStoreFileSystemEndpointSuffix:"N/A",azureDataLakeAnalyticsCatalogAndJobEndpointSuffix:"N/A",validateAuthority:!0},Environment}()},function(e,t,r){"use strict";var n=r(53),i=r(34).UserCodeResponseFields,o={validateStringParameter:function(e,t){if(!e)throw new Error("The "+t+" parameter is required.");if(!n.isString(e))throw new Error("The "+t+" parameter must be of type String.")},validateCallbackType:function(e){if(!e||!n.isFunction(e))throw new Error("acquireToken requires a function callback parameter.")},validateUserCodeInfo:function(e){if(!e)throw new Error("The userCodeInfo parameter is required");if(!e.hasOwnProperty(i.DEVICE_CODE))throw new Error("The userCodeInfo is missing device_code");if(!e.hasOwnProperty(i.INTERVAL))throw new Error("The userCodeInfo is missing interval");if(!e.hasOwnProperty(i.EXPIRES_IN))throw new Error("The userCodeInfo is missing expires_in")}};e.exports=o},function(e,t,r){"use strict";var n=r(41),i=r(7),o=r(231).DOMParser,s=r(53),a=r(43).Logger,c=r(80),u=r(403),l=u.xpathSelect,p=r(34).XmlNamespaces,d=r(34).WSTrustVersion;function Mex(e,t){this._log=new a("MEX",e._logContext),this._callContext=e,this._url=t,this._dom=null,this._mexDoc=null,this._usernamePasswordPolicy={},this._log.verbose("Mex created"),this._log.verbose("Mex created with url: "+t,!0)}Object.defineProperty(Mex.prototype,"usernamePasswordPolicy",{get:function(){return this._usernamePasswordPolicy}}),Mex.prototype.discover=function(e){this._log.verbose("Retrieving mex"),this._log.verbose("Retrieving mex at: "+this._url);var t=this,r=c.createRequestOptions(t,{headers:{"Content-Type":"application/soap+xml"}});n.get(this._url,r,c.createRequestHandler("Mex Get",this._log,e,function(r,n){try{t._mexDoc=n;var i={errorHandler:t._log.error};return t._dom=new o(i).parseFromString(t._mexDoc),void t._parse(e)}catch(r){t._log.error("Failed to parse mex response in to DOM",r,!0),e(r)}}))};Mex.prototype._checkPolicy=function(e){var t=null,r=e.getAttributeNS(p.wsu,"Id"),n=l(e,"wsp:ExactlyOne/wsp:All/sp:TransportBinding");return 0===n.length&&(n=l(e,"wsp:ExactlyOne/wsp:All/sp2005:TransportBinding")),0!==n.length&&r&&(t=r),t?(this._log.verbose("found matching policy id"),this._log.verbose("found matching policy id: "+t,!0)):(r||(r="<no id>"),this._log.verbose("potential policy did not match required transport binding"),this._log.verbose("potential policy did not match required transport binding: "+r,!0)),t},Mex.prototype._selectUsernamePasswordPolicies=function(e){var t={},r=l(this._dom,e);if(r.length){for(var n=0;n<r.length;n++){var i=r[n].parentNode.parentNode.parentNode.parentNode.parentNode.parentNode.parentNode,o=this._checkPolicy(i);if(o){var a="#"+o;t[a]={id:a}}}return s.isEmpty(t)?null:t}this._log.warn("no username token policy nodes found")};Mex.prototype._checkSoapActionAndTransport=function(e){var t,r,n,i=e.getAttribute("name"),o=l(e,"wsdl:operation/soap12:operation/@soapAction");if(o.length&&(r=o[0].value,t=l(e,"soap12:binding/@transport")),t.length&&(n=t[0].value),"http://schemas.xmlsoap.org/soap/http"===n){if("http://docs.oasis-open.org/ws-sx/ws-trust/200512/RST/Issue"===r)return this._log.verbose("foud binding matching Action and Transport: "+i),d.WSTRUST13;if("http://schemas.xmlsoap.org/ws/2005/02/trust/RST/Issue"===r)return this._log.verbose("found binding matching Action and Transport: "+i),d.WSTRUST2005}return this._log.verbose("binding node did not match soap Action or Transport: "+i),d.UNDEFINED},Mex.prototype._getMatchingBindings=function(e){for(var t={},r=l(this._dom,"//wsdl:definitions/wsdl:binding/wsp:PolicyReference"),n=0;n<r.length;n++){var i=r[n],o=i.getAttribute("URI");if(e[o]){var a=i.parentNode,c=a.getAttribute("name"),u=this._checkSoapActionAndTransport(a);if(u!==d.UNDEFINED){var p={};p.url=o,p.version=u,t[c]=p}}}return s.isEmpty(t)?null:t},Mex.prototype._urlIsSecure=function(e){return"https:"===i.parse(e).protocol};Mex.prototype._getPortsForPolicyBindings=function(e,t){var r=l(this._dom,"//wsdl:definitions/wsdl:service/wsdl:port");0===r.length&&this._log.warning("no ports found");for(var n=0;n<r.length;n++){var i=r[n],o=i.getAttribute("binding"),s=o.split(":"),a=e[o=s[s.length-1]];if(a){var c=t[a.url];if(c&&!c.url){c.version=a.version;var p=l(i,"wsa10:EndpointReference/wsa10:Address");if(0===p)throw this._log.createError("no address nodes on port.");var d=u.findElementText(p[0]);this._urlIsSecure(d)?c.url=d:this._log.warn("skipping insecure endpoint: "+d)}}}},Mex.prototype._selectSingleMatchingPolicy=function(e){var t=s.filter(e,function(e){return!!e.url});if(t){for(var r=null,n=null,i=0;i<t.length;++i){var o=t[i];d.WSTRUST13===o.version?r=o:d.WSTRUST2005===o.version&&(n=o)}if(!r&&!n)return this._log.warn("no policies found with an url"),void(this._usernamePasswordPolicy=null);this._usernamePasswordPolicy=r||n}else this._log.warn("no policies found with an url")},Mex.prototype._parse=function(e){var t="//wsdl:definitions/wsp:Policy/wsp:ExactlyOne/wsp:All/sp:SignedEncryptedSupportingTokens/wsp:Policy/sp:UsernameToken/wsp:Policy/sp:WssUsernameToken10",r=this._selectUsernamePasswordPolicies(t);if(t="//wsdl:definitions/wsp:Policy/wsp:ExactlyOne/wsp:All/sp2005:SignedSupportingTokens/wsp:Policy/sp2005:UsernameToken/wsp:Policy/sp2005:WssUsernameToken10",r?s.extend(r,this._selectUsernamePasswordPolicies(t)):r=this._selectUsernamePasswordPolicies(t),r){var n=this._getMatchingBindings(r);if(n)this._getPortsForPolicyBindings(n,r),this._selectSingleMatchingPolicy(r),e(this._url?void 0:this._log.createError("No ws-trust endpoints match requirements."));else e(this._log.createError("No matching bindings"))}else e(this._log.createError("No matching policies"))},e.exports=Mex},function(e,r){function copy(e,t){for(var r in e)t[r]=e[r]}function _extends(e,r){var n=e.prototype;if(Object.create){var i=Object.create(r.prototype);n.__proto__=i}if(!(n instanceof r)){function t(){}t.prototype=r.prototype,copy(n,t=new t),e.prototype=n=t}n.constructor!=e&&("function"!=typeof e&&console.error("unknow Class:"+e),n.constructor=e)}var n="http://www.w3.org/1999/xhtml",i={},o=i.ELEMENT_NODE=1,s=i.ATTRIBUTE_NODE=2,a=i.TEXT_NODE=3,c=i.CDATA_SECTION_NODE=4,u=i.ENTITY_REFERENCE_NODE=5,l=i.ENTITY_NODE=6,p=i.PROCESSING_INSTRUCTION_NODE=7,d=i.COMMENT_NODE=8,h=i.DOCUMENT_NODE=9,f=i.DOCUMENT_TYPE_NODE=10,m=i.DOCUMENT_FRAGMENT_NODE=11,g=i.NOTATION_NODE=12,y={},v={},b=(y.INDEX_SIZE_ERR=(v[1]="Index size error",1),y.DOMSTRING_SIZE_ERR=(v[2]="DOMString size error",2),y.HIERARCHY_REQUEST_ERR=(v[3]="Hierarchy request error",3)),_=(y.WRONG_DOCUMENT_ERR=(v[4]="Wrong document",4),y.INVALID_CHARACTER_ERR=(v[5]="Invalid character",5),y.NO_DATA_ALLOWED_ERR=(v[6]="No data allowed",6),y.NO_MODIFICATION_ALLOWED_ERR=(v[7]="No modification allowed",7),y.NOT_FOUND_ERR=(v[8]="Not found",8)),w=(y.NOT_SUPPORTED_ERR=(v[9]="Not supported",9),y.INUSE_ATTRIBUTE_ERR=(v[10]="Attribute in use",10));y.INVALID_STATE_ERR=(v[11]="Invalid state",11),y.SYNTAX_ERR=(v[12]="Syntax error",12),y.INVALID_MODIFICATION_ERR=(v[13]="Invalid modification",13),y.NAMESPACE_ERR=(v[14]="Invalid namespace",14),y.INVALID_ACCESS_ERR=(v[15]="Invalid access",15);function DOMException(e,t){if(t instanceof Error)var r=t;else r=this,Error.call(this,v[e]),this.message=v[e],Error.captureStackTrace&&Error.captureStackTrace(this,DOMException);return r.code=e,t&&(this.message=this.message+": "+t),r}function NodeList(){}function LiveNodeList(e,t){this._node=e,this._refresh=t,_updateLiveList(this)}function _updateLiveList(e){var t=e._node._inc||e._node.ownerDocument._inc;if(e._inc!=t){var r=e._refresh(e._node);__set__(e,"length",r.length),copy(r,e),e._inc=t}}function NamedNodeMap(){}function _findNodeIndex(e,t){for(var r=e.length;r--;)if(e[r]===t)return r}function _addNamedNode(e,t,r,n){if(n?t[_findNodeIndex(t,n)]=r:t[t.length++]=r,e){r.ownerElement=e;var i=e.ownerDocument;i&&(n&&_onRemoveAttribute(i,e,n),function _onAddAttribute(e,t,r){e&&e._inc++,"http://www.w3.org/2000/xmlns/"==r.namespaceURI&&(t._nsMap[r.prefix?r.localName:""]=r.value)}(i,e,r))}}function _removeNamedNode(e,t,r){var n=_findNodeIndex(t,r);if(!(n>=0))throw DOMException(_,new Error(e.tagName+"@"+r));for(var i=t.length-1;n<i;)t[n]=t[++n];if(t.length=i,e){var o=e.ownerDocument;o&&(_onRemoveAttribute(o,e,r),r.ownerElement=null)}}function DOMImplementation(e){if(this._features={},e)for(var t in e)this._features=e[t]}function Node(){}function _xmlEncoder(e){return("<"==e?"&lt;":">"==e&&"&gt;")||"&"==e&&"&amp;"||'"'==e&&"&quot;"||"&#"+e.charCodeAt()+";"}function _visitNode(e,t){if(t(e))return!0;if(e=e.firstChild)do{if(_visitNode(e,t))return!0}while(e=e.nextSibling)}function Document(){}function _onRemoveAttribute(e,t,r,n){e&&e._inc++,"http://www.w3.org/2000/xmlns/"==r.namespaceURI&&delete t._nsMap[r.prefix?r.localName:""]}function _onUpdateChild(e,t,r){if(e&&e._inc){e._inc++;var n=t.childNodes;if(r)n[n.length++]=r;else{for(var i=t.firstChild,o=0;i;)n[o++]=i,i=i.nextSibling;n.length=o}}}function _removeChild(e,t){var r=t.previousSibling,n=t.nextSibling;return r?r.nextSibling=n:e.firstChild=n,n?n.previousSibling=r:e.lastChild=r,_onUpdateChild(e.ownerDocument,e),t}function _insertBefore(e,t,r){var n=t.parentNode;if(n&&n.removeChild(t),t.nodeType===m){var i=t.firstChild;if(null==i)return t;var o=t.lastChild}else i=o=t;var s=r?r.previousSibling:e.lastChild;i.previousSibling=s,o.nextSibling=r,s?s.nextSibling=i:e.firstChild=i,null==r?e.lastChild=o:r.previousSibling=o;do{i.parentNode=e}while(i!==o&&(i=i.nextSibling));return _onUpdateChild(e.ownerDocument||e,e),t.nodeType==m&&(t.firstChild=t.lastChild=null),t}function Element(){this._nsMap={}}function Attr(){}function CharacterData(){}function Text(){}function Comment(){}function CDATASection(){}function DocumentType(){}function Notation(){}function Entity(){}function EntityReference(){}function DocumentFragment(){}function ProcessingInstruction(){}function XMLSerializer(){}function nodeSerializeToString(e,t){var r=[],n=9==this.nodeType?this.documentElement:this,i=n.prefix,o=n.namespaceURI;if(o&&null==i&&null==(i=n.lookupPrefix(o)))var s=[{namespace:o,prefix:null}];return serializeToString(this,r,e,t,s),r.join("")}function needNamespaceDefine(e,t,r){var n=e.prefix||"",i=e.namespaceURI;if(!n&&!i)return!1;if("xml"===n&&"http://www.w3.org/XML/1998/namespace"===i||"http://www.w3.org/2000/xmlns/"==i)return!1;for(var o=r.length;o--;){var s=r[o];if(s.prefix==n)return s.namespace!=i}return!0}function serializeToString(e,t,r,i,l){if(i){if(!(e=i(e)))return;if("string"==typeof e)return void t.push(e)}switch(e.nodeType){case o:l||(l=[]);l.length;var g=e.attributes,y=g.length,v=e.firstChild,b=e.tagName;r=n===e.namespaceURI||r,t.push("<",b);for(var _=0;_<y;_++){"xmlns"==(w=g.item(_)).prefix?l.push({prefix:w.localName,namespace:w.value}):"xmlns"==w.nodeName&&l.push({prefix:"",namespace:w.value})}for(_=0;_<y;_++){var w;if(needNamespaceDefine(w=g.item(_),0,l)){var E=w.prefix||"",S=w.namespaceURI,C=E?" xmlns:"+E:" xmlns";t.push(C,'="',S,'"'),l.push({prefix:E,namespace:S})}serializeToString(w,t,r,i,l)}if(needNamespaceDefine(e,0,l)){E=e.prefix||"",S=e.namespaceURI,C=E?" xmlns:"+E:" xmlns";t.push(C,'="',S,'"'),l.push({prefix:E,namespace:S})}if(v||r&&!/^(?:meta|link|img|br|hr|input)$/i.test(b)){if(t.push(">"),r&&/^script$/i.test(b))for(;v;)v.data?t.push(v.data):serializeToString(v,t,r,i,l),v=v.nextSibling;else for(;v;)serializeToString(v,t,r,i,l),v=v.nextSibling;t.push("</",b,">")}else t.push("/>");return;case h:case m:for(v=e.firstChild;v;)serializeToString(v,t,r,i,l),v=v.nextSibling;return;case s:return t.push(" ",e.name,'="',e.value.replace(/[<&"]/g,_xmlEncoder),'"');case a:return t.push(e.data.replace(/[<&]/g,_xmlEncoder));case c:return t.push("<![CDATA[",e.data,"]]>");case d:return t.push("\x3c!--",e.data,"--\x3e");case f:var x=e.publicId,k=e.systemId;if(t.push("<!DOCTYPE ",e.name),x)t.push(' PUBLIC "',x),k&&"."!=k&&t.push('" "',k),t.push('">');else if(k&&"."!=k)t.push(' SYSTEM "',k,'">');else{var R=e.internalSubset;R&&t.push(" [",R,"]"),t.push(">")}return;case p:return t.push("<?",e.target," ",e.data,"?>");case u:return t.push("&",e.nodeName,";");default:t.push("??",e.nodeName)}}function __set__(e,t,r){e[t]=r}DOMException.prototype=Error.prototype,copy(y,DOMException),NodeList.prototype={length:0,item:function(e){return this[e]||null},toString:function(e,t){for(var r=[],n=0;n<this.length;n++)serializeToString(this[n],r,e,t);return r.join("")}},LiveNodeList.prototype.item=function(e){return _updateLiveList(this),this[e]},_extends(LiveNodeList,NodeList),NamedNodeMap.prototype={length:0,item:NodeList.prototype.item,getNamedItem:function(e){for(var t=this.length;t--;){var r=this[t];if(r.nodeName==e)return r}},setNamedItem:function(e){var t=e.ownerElement;if(t&&t!=this._ownerElement)throw new DOMException(w);var r=this.getNamedItem(e.nodeName);return _addNamedNode(this._ownerElement,this,e,r),r},setNamedItemNS:function(e){var t,r=e.ownerElement;if(r&&r!=this._ownerElement)throw new DOMException(w);return t=this.getNamedItemNS(e.namespaceURI,e.localName),_addNamedNode(this._ownerElement,this,e,t),t},removeNamedItem:function(e){var t=this.getNamedItem(e);return _removeNamedNode(this._ownerElement,this,t),t},removeNamedItemNS:function(e,t){var r=this.getNamedItemNS(e,t);return _removeNamedNode(this._ownerElement,this,r),r},getNamedItemNS:function(e,t){for(var r=this.length;r--;){var n=this[r];if(n.localName==t&&n.namespaceURI==e)return n}return null}},DOMImplementation.prototype={hasFeature:function(e,t){var r=this._features[e.toLowerCase()];return!(!r||t&&!(t in r))},createDocument:function(e,t,r){var n=new Document;if(n.implementation=this,n.childNodes=new NodeList,n.doctype=r,r&&n.appendChild(r),t){var i=n.createElementNS(e,t);n.appendChild(i)}return n},createDocumentType:function(e,t,r){var n=new DocumentType;return n.name=e,n.nodeName=e,n.publicId=t,n.systemId=r,n}},Node.prototype={firstChild:null,lastChild:null,previousSibling:null,nextSibling:null,attributes:null,parentNode:null,childNodes:null,ownerDocument:null,nodeValue:null,namespaceURI:null,prefix:null,localName:null,insertBefore:function(e,t){return _insertBefore(this,e,t)},replaceChild:function(e,t){this.insertBefore(e,t),t&&this.removeChild(t)},removeChild:function(e){return _removeChild(this,e)},appendChild:function(e){return this.insertBefore(e,null)},hasChildNodes:function(){return null!=this.firstChild},cloneNode:function(e){return function cloneNode(e,t,r){var n=new t.constructor;for(var i in t){var a=t[i];"object"!=typeof a&&a!=n[i]&&(n[i]=a)}t.childNodes&&(n.childNodes=new NodeList);n.ownerDocument=e;switch(n.nodeType){case o:var c=t.attributes,u=n.attributes=new NamedNodeMap,l=c.length;u._ownerElement=n;for(var p=0;p<l;p++)n.setAttributeNode(cloneNode(e,c.item(p),!0));break;case s:r=!0}if(r)for(var d=t.firstChild;d;)n.appendChild(cloneNode(e,d,r)),d=d.nextSibling;return n}(this.ownerDocument||this,this,e)},normalize:function(){for(var e=this.firstChild;e;){var t=e.nextSibling;t&&t.nodeType==a&&e.nodeType==a?(this.removeChild(t),e.appendData(t.data)):(e.normalize(),e=t)}},isSupported:function(e,t){return this.ownerDocument.implementation.hasFeature(e,t)},hasAttributes:function(){return this.attributes.length>0},lookupPrefix:function(e){for(var t=this;t;){var r=t._nsMap;if(r)for(var n in r)if(r[n]==e)return n;t=t.nodeType==s?t.ownerDocument:t.parentNode}return null},lookupNamespaceURI:function(e){for(var t=this;t;){var r=t._nsMap;if(r&&e in r)return r[e];t=t.nodeType==s?t.ownerDocument:t.parentNode}return null},isDefaultNamespace:function(e){return null==this.lookupPrefix(e)}},copy(i,Node),copy(i,Node.prototype),Document.prototype={nodeName:"#document",nodeType:h,doctype:null,documentElement:null,_inc:1,insertBefore:function(e,t){if(e.nodeType==m){for(var r=e.firstChild;r;){var n=r.nextSibling;this.insertBefore(r,t),r=n}return e}return null==this.documentElement&&e.nodeType==o&&(this.documentElement=e),_insertBefore(this,e,t),e.ownerDocument=this,e},removeChild:function(e){return this.documentElement==e&&(this.documentElement=null),_removeChild(this,e)},importNode:function(e,t){return function importNode(e,t,r){var n;switch(t.nodeType){case o:(n=t.cloneNode(!1)).ownerDocument=e;case m:break;case s:r=!0}n||(n=t.cloneNode(!1));n.ownerDocument=e;n.parentNode=null;if(r)for(var i=t.firstChild;i;)n.appendChild(importNode(e,i,r)),i=i.nextSibling;return n}(this,e,t)},getElementById:function(e){var t=null;return _visitNode(this.documentElement,function(r){if(r.nodeType==o&&r.getAttribute("id")==e)return t=r,!0}),t},createElement:function(e){var t=new Element;return t.ownerDocument=this,t.nodeName=e,t.tagName=e,t.childNodes=new NodeList,(t.attributes=new NamedNodeMap)._ownerElement=t,t},createDocumentFragment:function(){var e=new DocumentFragment;return e.ownerDocument=this,e.childNodes=new NodeList,e},createTextNode:function(e){var t=new Text;return t.ownerDocument=this,t.appendData(e),t},createComment:function(e){var t=new Comment;return t.ownerDocument=this,t.appendData(e),t},createCDATASection:function(e){var t=new CDATASection;return t.ownerDocument=this,t.appendData(e),t},createProcessingInstruction:function(e,t){var r=new ProcessingInstruction;return r.ownerDocument=this,r.tagName=r.target=e,r.nodeValue=r.data=t,r},createAttribute:function(e){var t=new Attr;return t.ownerDocument=this,t.name=e,t.nodeName=e,t.localName=e,t.specified=!0,t},createEntityReference:function(e){var t=new EntityReference;return t.ownerDocument=this,t.nodeName=e,t},createElementNS:function(e,t){var r=new Element,n=t.split(":"),i=r.attributes=new NamedNodeMap;return r.childNodes=new NodeList,r.ownerDocument=this,r.nodeName=t,r.tagName=t,r.namespaceURI=e,2==n.length?(r.prefix=n[0],r.localName=n[1]):r.localName=t,i._ownerElement=r,r},createAttributeNS:function(e,t){var r=new Attr,n=t.split(":");return r.ownerDocument=this,r.nodeName=t,r.name=t,r.namespaceURI=e,r.specified=!0,2==n.length?(r.prefix=n[0],r.localName=n[1]):r.localName=t,r}},_extends(Document,Node),Element.prototype={nodeType:o,hasAttribute:function(e){return null!=this.getAttributeNode(e)},getAttribute:function(e){var t=this.getAttributeNode(e);return t&&t.value||""},getAttributeNode:function(e){return this.attributes.getNamedItem(e)},setAttribute:function(e,t){var r=this.ownerDocument.createAttribute(e);r.value=r.nodeValue=""+t,this.setAttributeNode(r)},removeAttribute:function(e){var t=this.getAttributeNode(e);t&&this.removeAttributeNode(t)},appendChild:function(e){return e.nodeType===m?this.insertBefore(e,null):function _appendSingleChild(e,t){var r=t.parentNode;if(r){var n=e.lastChild;r.removeChild(t),n=e.lastChild}return n=e.lastChild,t.parentNode=e,t.previousSibling=n,t.nextSibling=null,n?n.nextSibling=t:e.firstChild=t,e.lastChild=t,_onUpdateChild(e.ownerDocument,e,t),t}(this,e)},setAttributeNode:function(e){return this.attributes.setNamedItem(e)},setAttributeNodeNS:function(e){return this.attributes.setNamedItemNS(e)},removeAttributeNode:function(e){return this.attributes.removeNamedItem(e.nodeName)},removeAttributeNS:function(e,t){var r=this.getAttributeNodeNS(e,t);r&&this.removeAttributeNode(r)},hasAttributeNS:function(e,t){return null!=this.getAttributeNodeNS(e,t)},getAttributeNS:function(e,t){var r=this.getAttributeNodeNS(e,t);return r&&r.value||""},setAttributeNS:function(e,t,r){var n=this.ownerDocument.createAttributeNS(e,t);n.value=n.nodeValue=""+r,this.setAttributeNode(n)},getAttributeNodeNS:function(e,t){return this.attributes.getNamedItemNS(e,t)},getElementsByTagName:function(e){return new LiveNodeList(this,function(t){var r=[];return _visitNode(t,function(n){n===t||n.nodeType!=o||"*"!==e&&n.tagName!=e||r.push(n)}),r})},getElementsByTagNameNS:function(e,t){return new LiveNodeList(this,function(r){var n=[];return _visitNode(r,function(i){i===r||i.nodeType!==o||"*"!==e&&i.namespaceURI!==e||"*"!==t&&i.localName!=t||n.push(i)}),n})}},Document.prototype.getElementsByTagName=Element.prototype.getElementsByTagName,Document.prototype.getElementsByTagNameNS=Element.prototype.getElementsByTagNameNS,_extends(Element,Node),Attr.prototype.nodeType=s,_extends(Attr,Node),CharacterData.prototype={data:"",substringData:function(e,t){return this.data.substring(e,e+t)},appendData:function(e){e=this.data+e,this.nodeValue=this.data=e,this.length=e.length},insertData:function(e,t){this.replaceData(e,0,t)},appendChild:function(e){throw new Error(v[b])},deleteData:function(e,t){this.replaceData(e,t,"")},replaceData:function(e,t,r){r=this.data.substring(0,e)+r+this.data.substring(e+t),this.nodeValue=this.data=r,this.length=r.length}},_extends(CharacterData,Node),Text.prototype={nodeName:"#text",nodeType:a,splitText:function(e){var t=this.data,r=t.substring(e);t=t.substring(0,e),this.data=this.nodeValue=t,this.length=t.length;var n=this.ownerDocument.createTextNode(r);return this.parentNode&&this.parentNode.insertBefore(n,this.nextSibling),n}},_extends(Text,CharacterData),Comment.prototype={nodeName:"#comment",nodeType:d},_extends(Comment,CharacterData),CDATASection.prototype={nodeName:"#cdata-section",nodeType:c},_extends(CDATASection,CharacterData),DocumentType.prototype.nodeType=f,_extends(DocumentType,Node),Notation.prototype.nodeType=g,_extends(Notation,Node),Entity.prototype.nodeType=l,_extends(Entity,Node),EntityReference.prototype.nodeType=u,_extends(EntityReference,Node),DocumentFragment.prototype.nodeName="#document-fragment",DocumentFragment.prototype.nodeType=m,_extends(DocumentFragment,Node),ProcessingInstruction.prototype.nodeType=p,_extends(ProcessingInstruction,Node),XMLSerializer.prototype.serializeToString=function(e,t,r){return nodeSerializeToString.call(e,t,r)},Node.prototype.toString=nodeSerializeToString;try{if(Object.defineProperty){Object.defineProperty(LiveNodeList.prototype,"length",{get:function(){return _updateLiveList(this),this.$$length}}),Object.defineProperty(Node.prototype,"textContent",{get:function(){return function getTextContent(e){switch(e.nodeType){case o:case m:var t=[];for(e=e.firstChild;e;)7!==e.nodeType&&8!==e.nodeType&&t.push(getTextContent(e)),e=e.nextSibling;return t.join("");default:return e.nodeValue}}(this)},set:function(e){switch(this.nodeType){case o:case m:for(;this.firstChild;)this.removeChild(this.firstChild);(e||String(e))&&this.appendChild(this.ownerDocument.createTextNode(e));break;default:this.data=e,this.value=e,this.nodeValue=e}}}),__set__=function(e,t,r){e["$$"+t]=r}}}catch(e){}r.DOMImplementation=DOMImplementation,r.XMLSerializer=XMLSerializer},function(e,t,r){"use strict";var n=r(53),i=r(943),o=r(231).XMLSerializer,s=r(34),a="*[local-name() = 'LOCAL_NAME' and namespace-uri() = 'NAMESPACE']";t={xpathSelect:function(e,t){return i(e,function expandQNames(e){for(var t=s.XmlNamespaces,r=e.split("/"),n=0;n<r.length;n++)if(-1!==r[n].indexOf(":")){var i=r[n].split(":");if(2!==i.length)throw new Error("Unable to parse XPath string : "+e+" : with QName : "+r[n]);var o=a.replace("LOCAL_NAME",i[1]);o=o.replace("NAMESPACE",t[i[0]]),r[n]=o}return r.join("/")}(t))},serializeNodeChildren:function(e){for(var t="",r=e.firstChild,n=new o;r;)this.isElementNode(r)&&(t+=n.serializeToString(r)),r=r.nextSibling;return""!==t?t:null},isElementNode:function(e){return n.has(e,"tagName")},findElementText:function(e){for(var t=e.firstChild;t&&!t.data;)t=t.nextSibling;return t.data?t.data:null}};e.exports=t},function(e,t,r){"use strict";var n=r(53);r(230);var i=r(52),o=r(35),s=r(41),a=r(7),c=r(124),u=r(34),l=r(43).Logger,p=r(80),d=u.OAuth2.Parameters,h=u.OAuth2.ResponseParameters,f=u.OAuth2.DeviceCodeResponseParameters,m=u.OAuth2.IdTokenMap,g=u.TokenResponseFields,y=u.UserCodeResponseFields,v=u.IdTokenFields,b={};b[h.TOKEN_TYPE]=g.TOKEN_TYPE,b[h.ACCESS_TOKEN]=g.ACCESS_TOKEN,b[h.REFRESH_TOKEN]=g.REFRESH_TOKEN,b[h.CREATED_ON]=g.CREATED_ON,b[h.EXPIRES_ON]=g.EXPIRES_ON,b[h.EXPIRES_IN]=g.EXPIRES_IN,b[h.RESOURCE]=g.RESOURCE,b[h.ERROR]=g.ERROR,b[h.ERROR_DESCRIPTION]=g.ERROR_DESCRIPTION;var _={};function OAuth2Client(e,t){this._tokenEndpoint=t.tokenEndpoint,this._deviceCodeEndpoint=t.deviceCodeEndpoint,this._log=new l("OAuth2Client",e._logContext),this._callContext=e,this._cancelPollingRequest=!1}function mapFields(e,t,r){for(var n in e){if(r[n])t[r[n]]=e[n]}}_[f.DEVICE_CODE]=y.DEVICE_CODE,_[f.USER_CODE]=y.USER_CODE,_[f.VERIFICATION_URL]=y.VERIFICATION_URL,_[f.INTERVAL]=y.INTERVAL,_[f.EXPIRES_IN]=y.EXPIRES_IN,_[f.MESSAGE]=y.MESSAGE,_[f.ERROR]=y.ERROR,_[f.ERROR_DESCRIPTION]=y.ERROR_DESCRIPTION,OAuth2Client.prototype._createTokenUrl=function(){var e=a.parse(this._tokenEndpoint),t={};return t[d.AAD_API_VERSION]="1.0",e.search=i.stringify(t),e},OAuth2Client.prototype._createDeviceCodeUrl=function(){var e=a.parse(this._deviceCodeEndpoint),t={};return t[d.AAD_API_VERSION]="1.0",e.search=i.stringify(t),e},OAuth2Client.prototype._parseOptionalInts=function(e,t){var r=this;t.forEach(function(t){if(n.has(e,t)&&(e[t]=parseInt(e[t],10),isNaN(e[t])))throw r._log.createError(t+" could not be parsed as an int.")})},OAuth2Client.prototype._crackJwt=function(e){var t=/^([^\.\s]*)\.([^\.\s]+)\.([^\.\s]*)$/.exec(e);if(t&&!(t.length<4))return{header:t[1],JWSPayload:t[2],JWSSig:t[3]};this._log.warn("The returned id_token is not parseable.")},OAuth2Client.prototype._getUserId=function(e){var t,r;e.upn?(t=e.upn,r=!0):e.email?(t=e.email,r=!0):e.sub&&(t=e.sub),t||(t=o.v4());var n={};return n[v.USER_ID]=t,r&&(n[v.IS_USER_ID_DISPLAYABLE]=!0),n},OAuth2Client.prototype._extractIdTokenValues=function(e){var t={};return n.extend(t,this._getUserId(e)),mapFields(e,t,m),t},OAuth2Client.prototype._parseIdToken=function(e){var t=this._crackJwt(e);if(t){var r;try{var n=t.JWSPayload,i=p.base64DecodeStringUrlSafe(n);if(!i)return void this._log.warn("The returned id_token could not be base64 url safe decoded.");r=JSON.parse(i)}catch(e){return this._log.warn("the returned id_token could not be decoded"),void this._log.warn("The returned id_token could not be decoded: "+e.stack,!0)}return this._extractIdTokenValues(r)}},OAuth2Client.prototype._validateTokenResponse=function(e){var t,r={};try{t=JSON.parse(e)}catch(e){throw new Error("The token response returned from the server is unparseable as JSON")}var i=[h.EXPIRES_ON,h.EXPIRES_IN,h.CREATED_ON];if(this._parseOptionalInts(t,i),t[h.EXPIRES_IN]){var o=t[h.EXPIRES_IN],s=new Date;t[h.EXPIRES_ON]=s.add({seconds:o})}if(t[h.CREATED_ON]){var a=new Date,c=t[h.CREATED_ON];a.setTime(c),t[h.CREATED_ON]=a}if(!t[h.TOKEN_TYPE])throw this._log.createError("wireResponse is missing token_type");if(!t[h.ACCESS_TOKEN])throw this._log.createError("wireResponse missing access_token");if(mapFields(t,r,b),t[h.ID_TOKEN]){var u=this._parseIdToken(t[h.ID_TOKEN]);u&&n.extend(r,u)}return r},OAuth2Client.prototype._validateDeviceCodeResponse=function(e){var t,r={};try{t=JSON.parse(e)}catch(e){throw new Error("The device code response returned from the server is unparseable as JSON.")}var n=[f.EXPIRES_IN,f.INTERVAL];if(this._parseOptionalInts(t,n),!t[f.EXPIRES_IN])throw this._log.createError("wireResponse is missing expires_in");if(!t[f.DEVICE_CODE])throw this._log.createError("wireResponse is missing device code");if(!t[f.USER_CODE])throw this._log.createError("wireResponse is missing user code");return mapFields(t,r,_),r},OAuth2Client.prototype._handlePollingResponse=function(e){var t=this._handlePollingRequestErrorResponse(e);return n.isEmpty(t)&&(t=this._validateTokenResponse(e)),t},OAuth2Client.prototype._handlePollingRequestErrorResponse=function(e){var t,r={};try{t=JSON.parse(e)}catch(e){throw new Error("The token response returned from the server is unparsable as JSON")}return t[h.ERROR]&&mapFields(t,r,b),r},OAuth2Client.prototype._handleGetTokenResponse=function(e,t,r){var n;try{n=this._validateTokenResponse(t)}catch(e){return this._log.error("Error validating get token response",e,!0),void r(e)}r(null,n)},OAuth2Client.prototype._handleGetDeviceCodeResponse=function(e,t,r){var n;try{n=this._validateDeviceCodeResponse(t)}catch(e){return this._log.error("Error validating get user code response",e,!0),void r(e)}r(null,n)},OAuth2Client.prototype._getTokenWithPolling=function(e,t){var r=this;!0!==r._cancelPollingRequest?s.post(e,p.createRequestHandler("Get Token",this._log,function(e,r){r&&r.hasOwnProperty(g.ERROR)&&"authorization_pending"===r[g.ERROR]?t(new Error(r[g.ERROR]),r):t(null,r)},function(e,n){var i;try{i=r._handlePollingResponse(n)}catch(e){return r._log.error("Error validating get token response",e,!0),void t(null,e)}t(null,i)})):t(null,new Error("Polling_Request_Cancelled"))},OAuth2Client.prototype._createPostOption=function(e,t){return p.createRequestOptions(this,{url:a.format(e),body:t,headers:{"Content-Type":"application/x-www-form-urlencoded"},followRedirect:!1,encoding:"utf8"})},OAuth2Client.prototype.getToken=function(e,t){var r=this,n=r._createTokenUrl(),o=i.stringify(e),a=r._createPostOption(n,o);s.post(a,p.createRequestHandler("Get Token",this._log,t,function(e,n){r._handleGetTokenResponse(e,n,t)}))},OAuth2Client.prototype.getTokenWithPolling=function(e,t,r,n){var o=this,s=Math.floor(r/t),a=o._createTokenUrl(),u=i.stringify(e),l=o._createPostOption(a,u),p={times:s,interval:1e3*t};c.retry(p,function(e,t){o._getTokenWithPolling(l,e)},function(e,t){t&&t instanceof Error?n(t):t&&t.hasOwnProperty(f.ERROR)?n(t):n(e,t)})},OAuth2Client.prototype.getUserCodeInfo=function(e,t){var r=this,n=r._createDeviceCodeUrl(),o=i.stringify(e),a=r._createPostOption(n,o);s.post(a,p.createRequestHandler("Get Device Code ",this._log,t,function(e,n){r._handleGetDeviceCodeResponse(e,n,t)}))},OAuth2Client.prototype.cancelPollingRequest=function(){this._cancelPollingRequest=!0},e.exports=OAuth2Client},function(e,t,r){var n=r(14).Buffer,i=r(15);function DataStream(e){if(this.buffer=null,this.writable=!0,this.readable=!0,!e)return this.buffer=n.alloc(0),this;if("function"==typeof e.pipe)return this.buffer=n.alloc(0),e.pipe(this),this;if(e.length||"object"==typeof e)return this.buffer=e,this.writable=!1,process.nextTick(function(){this.emit("end",e),this.readable=!1,this.emit("close")}.bind(this)),this;throw new TypeError("Unexpected data type ("+typeof e+")")}r(1).inherits(DataStream,i),DataStream.prototype.write=function write(e){this.buffer=n.concat([this.buffer,n.from(e)]),this.emit("data",e)},DataStream.prototype.end=function end(e){e&&this.write(e),this.emit("end",e),this.emit("close"),this.writable=!1,this.readable=!1},e.exports=DataStream},function(e,t,r){var n=r(947),i=r(14).Buffer,o=r(12),s=r(948),a=r(1),c="secret must be a string or buffer",u="key must be a string or a buffer",l="key must be a string, a buffer or an object";function fromBase64(e){return e.replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}function typeError(e){var t=[].slice.call(arguments,1),r=a.format.bind(a,e).apply(null,t);return new TypeError(r)}function bufferOrString(e){return i.isBuffer(e)||"string"==typeof e}function normalizeInput(e){return bufferOrString(e)||(e=JSON.stringify(e)),e}function createHmacSigner(e){return function sign(t,r){if(!bufferOrString(r))throw typeError(c);t=normalizeInput(t);var n=o.createHmac("sha"+e,r);return fromBase64((n.update(t),n.digest("base64")))}}function createHmacVerifier(e){return function verify(t,r,o){var s=createHmacSigner(e)(t,o);return n(i.from(r),i.from(s))}}function createKeySigner(e){return function sign(t,r){if(!bufferOrString(r)&&"object"!=typeof r)throw typeError(l);t=normalizeInput(t);var n=o.createSign("RSA-SHA"+e);return fromBase64((n.update(t),n.sign(r,"base64")))}}function createKeyVerifier(e){return function verify(t,r,n){if(!bufferOrString(n))throw typeError(u);t=normalizeInput(t),r=function toBase64(e){var t=4-(e=e.toString()).length%4;if(4!==t)for(var r=0;r<t;++r)e+="=";return e.replace(/\-/g,"+").replace(/_/g,"/")}(r);var i=o.createVerify("RSA-SHA"+e);return i.update(t),i.verify(n,r,"base64")}}function createECDSASigner(e){var t=createKeySigner(e);return function sign(){var r=t.apply(null,arguments);return r=s.derToJose(r,"ES"+e)}}function createECDSAVerifer(e){var t=createKeyVerifier(e);return function verify(r,n,i){return n=s.joseToDer(n,"ES"+e).toString("base64"),t(r,n,i)}}function createNoneSigner(){return function sign(){return""}}function createNoneVerifier(){return function verify(e,t){return""===t}}e.exports=function jwa(e){var t={hs:createHmacSigner,rs:createKeySigner,es:createECDSASigner,none:createNoneSigner},r={hs:createHmacVerifier,rs:createKeyVerifier,es:createECDSAVerifer,none:createNoneVerifier},n=e.match(/^(RS|ES|HS)(256|384|512)$|^(none)$/i);if(!n)throw typeError('"%s" is not a valid algorithm.\n  Supported algorithms are:\n  "HS256", "HS384", "HS512", "RS256", "RS384", "RS512" and "none".',e);var i=(n[1]||n[3]).toLowerCase(),o=n[2];return{sign:t[i](o),verify:r[i](o)}}},function(e,t,r){var n=r(56).Buffer;e.exports=function toString(e){return"string"==typeof e?e:"number"==typeof e||n.isBuffer(e)?e.toString():JSON.stringify(e)}},function(e,t,r){"use strict";var n=r(53);function MemoryCache(){this._entries=[]}MemoryCache.prototype.remove=function(e,t){var r=n.filter(this._entries,function(t){return!n.findWhere(e,t)});this._entries=r,t()},MemoryCache.prototype.add=function(e,t){n.each(this._entries,function(t){n.each(e,function(r,i){n.isEqual(t,r)&&(e[i]=null)})}),e=n.compact(e);for(var r=0;r<e.length;r++)this._entries.push(e[r]);t(null,!0)},MemoryCache.prototype.find=function(e,t){t(null,n.where(this._entries,e))},e.exports=MemoryCache},function(e,t,r){"use strict";e.exports=function setup(e){function selectColor(e){for(var t=0,r=0;r<e.length;r++)t=(t<<5)-t+e.charCodeAt(r),t|=0;return createDebug.colors[Math.abs(t)%createDebug.colors.length]}function createDebug(e){var t;function debug(){if(debug.enabled){for(var e=arguments.length,r=new Array(e),n=0;n<e;n++)r[n]=arguments[n];var i=debug,o=Number(new Date),s=o-(t||o);i.diff=s,i.prev=t,i.curr=o,t=o,r[0]=createDebug.coerce(r[0]),"string"!=typeof r[0]&&r.unshift("%O");var a=0;r[0]=r[0].replace(/%([a-zA-Z%])/g,function(e,t){if("%%"===e)return e;a++;var n=createDebug.formatters[t];if("function"==typeof n){var o=r[a];e=n.call(i,o),r.splice(a,1),a--}return e}),createDebug.formatArgs.call(i,r),(i.log||createDebug.log).apply(i,r)}}return debug.namespace=e,debug.enabled=createDebug.enabled(e),debug.useColors=createDebug.useColors(),debug.color=selectColor(e),debug.destroy=destroy,debug.extend=extend,"function"==typeof createDebug.init&&createDebug.init(debug),createDebug.instances.push(debug),debug}function destroy(){var e=createDebug.instances.indexOf(this);return-1!==e&&(createDebug.instances.splice(e,1),!0)}function extend(e,t){return createDebug(this.namespace+(void 0===t?":":t)+e)}return createDebug.debug=createDebug,createDebug.default=createDebug,createDebug.coerce=function coerce(e){return e instanceof Error?e.stack||e.message:e},createDebug.disable=function disable(){createDebug.enable("")},createDebug.enable=function enable(e){var t;createDebug.save(e),createDebug.names=[],createDebug.skips=[];var r=("string"==typeof e?e:"").split(/[\s,]+/),n=r.length;for(t=0;t<n;t++)r[t]&&("-"===(e=r[t].replace(/\*/g,".*?"))[0]?createDebug.skips.push(new RegExp("^"+e.substr(1)+"$")):createDebug.names.push(new RegExp("^"+e+"$")));for(t=0;t<createDebug.instances.length;t++){var i=createDebug.instances[t];i.enabled=createDebug.enabled(i.namespace)}},createDebug.enabled=function enabled(e){if("*"===e[e.length-1])return!0;var t,r;for(t=0,r=createDebug.skips.length;t<r;t++)if(createDebug.skips[t].test(e))return!1;for(t=0,r=createDebug.names.length;t<r;t++)if(createDebug.names[t].test(e))return!0;return!1},createDebug.humanize=r(960),Object.keys(e).forEach(function(t){createDebug[t]=e[t]}),createDebug.instances=[],createDebug.names=[],createDebug.skips=[],createDebug.formatters={},createDebug.selectColor=selectColor,createDebug.enable(createDebug.load()),createDebug}},function(e,t,r){"use strict";const n=r(69),i=r(70).HttpConstants.HttpVerbs,o=r(100);e.exports=class WebResource{constructor(){this.rawResponse=!1,this.queryString={},this.url=null,this.method=null,this.headers={},this.body=null}pipeInput(e,t){return function isMethodWithBody(e){return e===i.PUT||e===i.POST||e===i.MERGE}(this.method)&&!this.hasOwnProperty("body")&&e.pipe(t),t}validateRequestProperties(){if(!(this.method&&this.url&&this.headers["Content-Type"]&&this.headers["accept-language"]))throw new Error("method, url, headers['Content-Type'], headers['accept-language'] are required properties before making a request. Either provide them or use WebResource.prepare() method.")}prepare(e){if(null==e||"object"!=typeof e)throw new Error("options cannot be null or undefined and must be of type object");if(null===e.method||void 0===e.method||"string"!=typeof e.method.valueOf())throw new Error("options.method cannot be null or undefined and it must be of type string.");if(e.url&&e.pathTemplate)throw new Error("options.url and options.pathTemplate are mutually exclusive. Please provide either of them.");if(!(null!==e.pathTemplate&&void 0!==e.pathTemplate&&"string"==typeof e.pathTemplate.valueOf()||null!==e.url&&void 0!==e.url&&"string"==typeof e.url.valueOf()))throw new Error("Please provide either options.pathTemplate or options.url. Currently none of them were provided.");if(e.url){if("string"!=typeof e.url)throw new Error("options.url must be of type 'string'.");this.url=e.url}if(e.method){let t=["GET","PUT","HEAD","DELETE","OPTIONS","POST","PATCH","TRACE"];if(-1===t.indexOf(e.method.toUpperCase()))throw new Error("The provided method '"+e.method+"' is invalid. Supported HTTP methods are: "+JSON.stringify(t))}if(this.method=e.method.toUpperCase(),e.pathTemplate){if("string"!=typeof e.pathTemplate)throw new Error("options.pathTemplate must be of type 'string'.");e.baseUrl||(e.baseUrl="https://management.azure.com");let t=e.baseUrl,r=t+(t.endsWith("/")?"":"/")+(e.pathTemplate.startsWith("/")?e.pathTemplate.slice(1):e.pathTemplate),n=r.match(/({\w*\s*\w*})/gi);if(n&&n.length){if(null===e.pathParameters||void 0===e.pathParameters||"object"!=typeof e.pathParameters)throw new Error(`pathTemplate: ${e.pathTemplate} has been provided. Hence, options.pathParameters `+'cannot be null or undefined and must be of type "object".');n.forEach(function(t){let n=t.slice(1,-1),i=e.pathParameters[n];if(null==i||"string"!=typeof i&&"object"!=typeof i)throw new Error(`pathTemplate: ${e.pathTemplate} contains the path parameter ${n}`+` however, it is not present in ${e.pathParameters} - ${JSON.stringify(e.pathParameters,null,2)}.`+`The value of the path parameter can either be a "string" of the form { ${n}: "some sample value" } or `+`it can be an "object" of the form { "${n}": { value: "some sample value", skipUrlEncoding: true } }.`);if("string"==typeof i.valueOf()&&(r=r.replace(t,encodeURIComponent(i))),"object"==typeof i.valueOf()){if(!i.value)throw new Error(`options.pathParameters[${n}] is of type "object" but it does not contain a "value" property.`);r=i.skipUrlEncoding?r.replace(t,i.value):r.replace(t,encodeURIComponent(i.value))}})}this.url=r}if(e.queryParameters){if("object"!=typeof e.queryParameters)throw new Error('options.queryParameters must be of type object. It should be a JSON object of "query-parameter-name" as the key and the "query-parameter-value" as the value. The "query-parameter-value" may be fo type "string" or an "object" of the form { value: "query-parameter-value", skipUrlEncoding: true }.');this.url&&-1===this.url.indexOf("?")&&(this.url+="?");let t=[],r=e.queryParameters;this.query={};for(let e in r){let n=r[e];if(n)if("string"==typeof n)t.push(e+"="+encodeURIComponent(n)),this.query[e]=encodeURIComponent(n);else if("object"==typeof n){if(!n.value)throw new Error(`options.queryParameters[${e}] is of type "object" but it does not contain a "value" property.`);n.skipUrlEncoding?(t.push(e+"="+n.value),this.query[e]=n.value):(t.push(e+"="+encodeURIComponent(n.value)),this.query[e]=encodeURIComponent(n.value))}}this.url+=t.join("&")}if(e.formData&&(e.headers&&"application/x-www-form-urlencoded"===e.headers["Content-Type"]?(this.form=e.formData,this.headers["Content-Type"]="application/x-www-form-urlencoded"):(this.formData=e.formData,this.headers["Content-Type"]="multipart/form-data")),e.headers){let t=e.headers;for(let e in t)t.hasOwnProperty(e)&&(this.headers[e]=t[e])}if(this.headers["accept-language"]||(this.headers["accept-language"]="en-US"),this.headers["x-ms-client-request-id"]||e.disableClientRequestId||(this.headers["x-ms-client-request-id"]=n.generateUuid()),this.headers["Content-Type"]||(this.headers["Content-Type"]="application/json; charset=utf-8"),this.body=null,null!==e.body&&void 0!==e.body)if(e.bodyIsStream)this.body=e.body,this.headers["Transfer-Encoding"]||(this.headers["Transfer-Encoding"]="chunked"),"application/octet-stream"!==this.headers["Content-Type"]&&(this.headers["Content-Type"]="application/octet-stream");else{let t=null;e.serializationMapper&&(t=o.serialize(e.serializationMapper,e.body,"requestBody")),e.disableJsonStringifyOnBody?this.body=t||e.body:this.body=t?JSON.stringify(t):JSON.stringify(e.body)}return this}}},function(e,t,r){(function(e){e.exports=function(){"use strict";var t,r;function hooks(){return t.apply(null,arguments)}function isArray(e){return e instanceof Array||"[object Array]"===Object.prototype.toString.call(e)}function isObject(e){return null!=e&&"[object Object]"===Object.prototype.toString.call(e)}function isUndefined(e){return void 0===e}function isNumber(e){return"number"==typeof e||"[object Number]"===Object.prototype.toString.call(e)}function isDate(e){return e instanceof Date||"[object Date]"===Object.prototype.toString.call(e)}function map(e,t){var r,n=[];for(r=0;r<e.length;++r)n.push(t(e[r],r));return n}function hasOwnProp(e,t){return Object.prototype.hasOwnProperty.call(e,t)}function extend(e,t){for(var r in t)hasOwnProp(t,r)&&(e[r]=t[r]);return hasOwnProp(t,"toString")&&(e.toString=t.toString),hasOwnProp(t,"valueOf")&&(e.valueOf=t.valueOf),e}function createUTC(e,t,r,n){return createLocalOrUTC(e,t,r,n,!0).utc()}function getParsingFlags(e){return null==e._pf&&(e._pf={empty:!1,unusedTokens:[],unusedInput:[],overflow:-2,charsLeftOver:0,nullInput:!1,invalidMonth:null,invalidFormat:!1,userInvalidated:!1,iso:!1,parsedDateParts:[],meridiem:null,rfc2822:!1,weekdayMismatch:!1}),e._pf}function isValid(e){if(null==e._isValid){var t=getParsingFlags(e),n=r.call(t.parsedDateParts,function(e){return null!=e}),i=!isNaN(e._d.getTime())&&t.overflow<0&&!t.empty&&!t.invalidMonth&&!t.invalidWeekday&&!t.weekdayMismatch&&!t.nullInput&&!t.invalidFormat&&!t.userInvalidated&&(!t.meridiem||t.meridiem&&n);if(e._strict&&(i=i&&0===t.charsLeftOver&&0===t.unusedTokens.length&&void 0===t.bigHour),null!=Object.isFrozen&&Object.isFrozen(e))return i;e._isValid=i}return e._isValid}function createInvalid(e){var t=createUTC(NaN);return null!=e?extend(getParsingFlags(t),e):getParsingFlags(t).userInvalidated=!0,t}r=Array.prototype.some?Array.prototype.some:function(e){for(var t=Object(this),r=t.length>>>0,n=0;n<r;n++)if(n in t&&e.call(this,t[n],n,t))return!0;return!1};var n=hooks.momentProperties=[];function copyConfig(e,t){var r,i,o;if(isUndefined(t._isAMomentObject)||(e._isAMomentObject=t._isAMomentObject),isUndefined(t._i)||(e._i=t._i),isUndefined(t._f)||(e._f=t._f),isUndefined(t._l)||(e._l=t._l),isUndefined(t._strict)||(e._strict=t._strict),isUndefined(t._tzm)||(e._tzm=t._tzm),isUndefined(t._isUTC)||(e._isUTC=t._isUTC),isUndefined(t._offset)||(e._offset=t._offset),isUndefined(t._pf)||(e._pf=getParsingFlags(t)),isUndefined(t._locale)||(e._locale=t._locale),n.length>0)for(r=0;r<n.length;r++)i=n[r],isUndefined(o=t[i])||(e[i]=o);return e}var i=!1;function Moment(e){copyConfig(this,e),this._d=new Date(null!=e._d?e._d.getTime():NaN),this.isValid()||(this._d=new Date(NaN)),!1===i&&(i=!0,hooks.updateOffset(this),i=!1)}function isMoment(e){return e instanceof Moment||null!=e&&null!=e._isAMomentObject}function absFloor(e){return e<0?Math.ceil(e)||0:Math.floor(e)}function toInt(e){var t=+e,r=0;return 0!==t&&isFinite(t)&&(r=absFloor(t)),r}function compareArrays(e,t,r){var n,i=Math.min(e.length,t.length),o=Math.abs(e.length-t.length),s=0;for(n=0;n<i;n++)(r&&e[n]!==t[n]||!r&&toInt(e[n])!==toInt(t[n]))&&s++;return s+o}function warn(e){!1===hooks.suppressDeprecationWarnings&&"undefined"!=typeof console&&console.warn&&console.warn("Deprecation warning: "+e)}function deprecate(e,t){var r=!0;return extend(function(){if(null!=hooks.deprecationHandler&&hooks.deprecationHandler(null,e),r){for(var n,i=[],o=0;o<arguments.length;o++){if(n="","object"==typeof arguments[o]){for(var s in n+="\n["+o+"] ",arguments[0])n+=s+": "+arguments[0][s]+", ";n=n.slice(0,-2)}else n=arguments[o];i.push(n)}warn(e+"\nArguments: "+Array.prototype.slice.call(i).join("")+"\n"+(new Error).stack),r=!1}return t.apply(this,arguments)},t)}var o,s={};function deprecateSimple(e,t){null!=hooks.deprecationHandler&&hooks.deprecationHandler(e,t),s[e]||(warn(t),s[e]=!0)}function isFunction(e){return e instanceof Function||"[object Function]"===Object.prototype.toString.call(e)}function mergeConfigs(e,t){var r,n=extend({},e);for(r in t)hasOwnProp(t,r)&&(isObject(e[r])&&isObject(t[r])?(n[r]={},extend(n[r],e[r]),extend(n[r],t[r])):null!=t[r]?n[r]=t[r]:delete n[r]);for(r in e)hasOwnProp(e,r)&&!hasOwnProp(t,r)&&isObject(e[r])&&(n[r]=extend({},n[r]));return n}function Locale(e){null!=e&&this.set(e)}hooks.suppressDeprecationWarnings=!1,hooks.deprecationHandler=null,o=Object.keys?Object.keys:function(e){var t,r=[];for(t in e)hasOwnProp(e,t)&&r.push(t);return r};var a={};function addUnitAlias(e,t){var r=e.toLowerCase();a[r]=a[r+"s"]=a[t]=e}function normalizeUnits(e){return"string"==typeof e?a[e]||a[e.toLowerCase()]:void 0}function normalizeObjectUnits(e){var t,r,n={};for(r in e)hasOwnProp(e,r)&&(t=normalizeUnits(r))&&(n[t]=e[r]);return n}var c={};function addUnitPriority(e,t){c[e]=t}function zeroFill(e,t,r){var n=""+Math.abs(e),i=t-n.length,o=e>=0;return(o?r?"+":"":"-")+Math.pow(10,Math.max(0,i)).toString().substr(1)+n}var u=/(\[[^\[]*\])|(\\)?([Hh]mm(ss)?|Mo|MM?M?M?|Do|DDDo|DD?D?D?|ddd?d?|do?|w[o|w]?|W[o|W]?|Qo?|YYYYYY|YYYYY|YYYY|YY|gg(ggg?)?|GG(GGG?)?|e|E|a|A|hh?|HH?|kk?|mm?|ss?|S{1,9}|x|X|zz?|ZZ?|.)/g,l=/(\[[^\[]*\])|(\\)?(LTS|LT|LL?L?L?|l{1,4})/g,p={},d={};function addFormatToken(e,t,r,n){var i=n;"string"==typeof n&&(i=function(){return this[n]()}),e&&(d[e]=i),t&&(d[t[0]]=function(){return zeroFill(i.apply(this,arguments),t[1],t[2])}),r&&(d[r]=function(){return this.localeData().ordinal(i.apply(this,arguments),e)})}function formatMoment(e,t){return e.isValid()?(t=expandFormat(t,e.localeData()),p[t]=p[t]||function makeFormatFunction(e){var t,r,n,i=e.match(u);for(t=0,r=i.length;t<r;t++)d[i[t]]?i[t]=d[i[t]]:i[t]=(n=i[t]).match(/\[[\s\S]/)?n.replace(/^\[|\]$/g,""):n.replace(/\\/g,"");return function(t){var n,o="";for(n=0;n<r;n++)o+=isFunction(i[n])?i[n].call(t,e):i[n];return o}}(t),p[t](e)):e.localeData().invalidDate()}function expandFormat(e,t){var r=5;function replaceLongDateFormatTokens(e){return t.longDateFormat(e)||e}for(l.lastIndex=0;r>=0&&l.test(e);)e=e.replace(l,replaceLongDateFormatTokens),l.lastIndex=0,r-=1;return e}var h=/\d/,f=/\d\d/,m=/\d{3}/,g=/\d{4}/,y=/[+-]?\d{6}/,v=/\d\d?/,b=/\d\d\d\d?/,_=/\d\d\d\d\d\d?/,w=/\d{1,3}/,E=/\d{1,4}/,S=/[+-]?\d{1,6}/,C=/\d+/,x=/[+-]?\d+/,k=/Z|[+-]\d\d:?\d\d/gi,R=/Z|[+-]\d\d(?::?\d\d)?/gi,T=/[0-9]{0,256}['a-z\u00A0-\u05FF\u0700-\uD7FF\uF900-\uFDCF\uFDF0-\uFF07\uFF10-\uFFEF]{1,256}|[\u0600-\u06FF\/]{1,256}(\s*?[\u0600-\u06FF]{1,256}){1,2}/i,O={};function addRegexToken(e,t,r){O[e]=isFunction(t)?t:function(e,n){return e&&r?r:t}}function getParseRegexForToken(e,t){return hasOwnProp(O,e)?O[e](t._strict,t._locale):new RegExp(function unescapeFormat(e){return regexEscape(e.replace("\\","").replace(/\\(\[)|\\(\])|\[([^\]\[]*)\]|\\(.)/g,function(e,t,r,n,i){return t||r||n||i}))}(e))}function regexEscape(e){return e.replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&")}var I={};function addParseToken(e,t){var r,n=t;for("string"==typeof e&&(e=[e]),isNumber(t)&&(n=function(e,r){r[t]=toInt(e)}),r=0;r<e.length;r++)I[e[r]]=n}function addWeekParseToken(e,t){addParseToken(e,function(e,r,n,i){n._w=n._w||{},t(e,n._w,n,i)})}function addTimeToArrayFromToken(e,t,r){null!=t&&hasOwnProp(I,e)&&I[e](t,r._a,r,e)}var N=0,A=1,P=2,L=3,D=4,M=5,j=6,q=7,F=8;function daysInYear(e){return isLeapYear(e)?366:365}function isLeapYear(e){return e%4==0&&e%100!=0||e%400==0}addFormatToken("Y",0,0,function(){var e=this.year();return e<=9999?""+e:"+"+e}),addFormatToken(0,["YY",2],0,function(){return this.year()%100}),addFormatToken(0,["YYYY",4],0,"year"),addFormatToken(0,["YYYYY",5],0,"year"),addFormatToken(0,["YYYYYY",6,!0],0,"year"),addUnitAlias("year","y"),addUnitPriority("year",1),addRegexToken("Y",x),addRegexToken("YY",v,f),addRegexToken("YYYY",E,g),addRegexToken("YYYYY",S,y),addRegexToken("YYYYYY",S,y),addParseToken(["YYYYY","YYYYYY"],N),addParseToken("YYYY",function(e,t){t[N]=2===e.length?hooks.parseTwoDigitYear(e):toInt(e)}),addParseToken("YY",function(e,t){t[N]=hooks.parseTwoDigitYear(e)}),addParseToken("Y",function(e,t){t[N]=parseInt(e,10)}),hooks.parseTwoDigitYear=function(e){return toInt(e)+(toInt(e)>68?1900:2e3)};var z,U=makeGetSet("FullYear",!0);function makeGetSet(e,t){return function(r){return null!=r?(set$1(this,e,r),hooks.updateOffset(this,t),this):get(this,e)}}function get(e,t){return e.isValid()?e._d["get"+(e._isUTC?"UTC":"")+t]():NaN}function set$1(e,t,r){e.isValid()&&!isNaN(r)&&("FullYear"===t&&isLeapYear(e.year())&&1===e.month()&&29===e.date()?e._d["set"+(e._isUTC?"UTC":"")+t](r,e.month(),daysInMonth(r,e.month())):e._d["set"+(e._isUTC?"UTC":"")+t](r))}function daysInMonth(e,t){if(isNaN(e)||isNaN(t))return NaN;var r=function mod(e,t){return(e%t+t)%t}(t,12);return e+=(t-r)/12,1===r?isLeapYear(e)?29:28:31-r%7%2}z=Array.prototype.indexOf?Array.prototype.indexOf:function(e){var t;for(t=0;t<this.length;++t)if(this[t]===e)return t;return-1},addFormatToken("M",["MM",2],"Mo",function(){return this.month()+1}),addFormatToken("MMM",0,0,function(e){return this.localeData().monthsShort(this,e)}),addFormatToken("MMMM",0,0,function(e){return this.localeData().months(this,e)}),addUnitAlias("month","M"),addUnitPriority("month",8),addRegexToken("M",v),addRegexToken("MM",v,f),addRegexToken("MMM",function(e,t){return t.monthsShortRegex(e)}),addRegexToken("MMMM",function(e,t){return t.monthsRegex(e)}),addParseToken(["M","MM"],function(e,t){t[A]=toInt(e)-1}),addParseToken(["MMM","MMMM"],function(e,t,r,n){var i=r._locale.monthsParse(e,n,r._strict);null!=i?t[A]=i:getParsingFlags(r).invalidMonth=e});var B=/D[oD]?(\[[^\[\]]*\]|\s)+MMMM?/,H="January_February_March_April_May_June_July_August_September_October_November_December".split("_"),$="Jan_Feb_Mar_Apr_May_Jun_Jul_Aug_Sep_Oct_Nov_Dec".split("_");function setMonth(e,t){var r;if(!e.isValid())return e;if("string"==typeof t)if(/^\d+$/.test(t))t=toInt(t);else if(!isNumber(t=e.localeData().monthsParse(t)))return e;return r=Math.min(e.date(),daysInMonth(e.year(),t)),e._d["set"+(e._isUTC?"UTC":"")+"Month"](t,r),e}function getSetMonth(e){return null!=e?(setMonth(this,e),hooks.updateOffset(this,!0),this):get(this,"Month")}var V=T,G=T;function computeMonthsParse(){function cmpLenRev(e,t){return t.length-e.length}var e,t,r=[],n=[],i=[];for(e=0;e<12;e++)t=createUTC([2e3,e]),r.push(this.monthsShort(t,"")),n.push(this.months(t,"")),i.push(this.months(t,"")),i.push(this.monthsShort(t,""));for(r.sort(cmpLenRev),n.sort(cmpLenRev),i.sort(cmpLenRev),e=0;e<12;e++)r[e]=regexEscape(r[e]),n[e]=regexEscape(n[e]);for(e=0;e<24;e++)i[e]=regexEscape(i[e]);this._monthsRegex=new RegExp("^("+i.join("|")+")","i"),this._monthsShortRegex=this._monthsRegex,this._monthsStrictRegex=new RegExp("^("+n.join("|")+")","i"),this._monthsShortStrictRegex=new RegExp("^("+r.join("|")+")","i")}function createUTCDate(e){var t=new Date(Date.UTC.apply(null,arguments));return e<100&&e>=0&&isFinite(t.getUTCFullYear())&&t.setUTCFullYear(e),t}function firstWeekOffset(e,t,r){var n=7+t-r,i=(7+createUTCDate(e,0,n).getUTCDay()-t)%7;return-i+n-1}function dayOfYearFromWeeks(e,t,r,n,i){var o,s,a=(7+r-n)%7,c=firstWeekOffset(e,n,i),u=1+7*(t-1)+a+c;return u<=0?s=daysInYear(o=e-1)+u:u>daysInYear(e)?(o=e+1,s=u-daysInYear(e)):(o=e,s=u),{year:o,dayOfYear:s}}function weekOfYear(e,t,r){var n,i,o=firstWeekOffset(e.year(),t,r),s=Math.floor((e.dayOfYear()-o-1)/7)+1;return s<1?(i=e.year()-1,n=s+weeksInYear(i,t,r)):s>weeksInYear(e.year(),t,r)?(n=s-weeksInYear(e.year(),t,r),i=e.year()+1):(i=e.year(),n=s),{week:n,year:i}}function weeksInYear(e,t,r){var n=firstWeekOffset(e,t,r),i=firstWeekOffset(e+1,t,r);return(daysInYear(e)-n+i)/7}addFormatToken("w",["ww",2],"wo","week"),addFormatToken("W",["WW",2],"Wo","isoWeek"),addUnitAlias("week","w"),addUnitAlias("isoWeek","W"),addUnitPriority("week",5),addUnitPriority("isoWeek",5),addRegexToken("w",v),addRegexToken("ww",v,f),addRegexToken("W",v),addRegexToken("WW",v,f),addWeekParseToken(["w","ww","W","WW"],function(e,t,r,n){t[n.substr(0,1)]=toInt(e)}),addFormatToken("d",0,"do","day"),addFormatToken("dd",0,0,function(e){return this.localeData().weekdaysMin(this,e)}),addFormatToken("ddd",0,0,function(e){return this.localeData().weekdaysShort(this,e)}),addFormatToken("dddd",0,0,function(e){return this.localeData().weekdays(this,e)}),addFormatToken("e",0,0,"weekday"),addFormatToken("E",0,0,"isoWeekday"),addUnitAlias("day","d"),addUnitAlias("weekday","e"),addUnitAlias("isoWeekday","E"),addUnitPriority("day",11),addUnitPriority("weekday",11),addUnitPriority("isoWeekday",11),addRegexToken("d",v),addRegexToken("e",v),addRegexToken("E",v),addRegexToken("dd",function(e,t){return t.weekdaysMinRegex(e)}),addRegexToken("ddd",function(e,t){return t.weekdaysShortRegex(e)}),addRegexToken("dddd",function(e,t){return t.weekdaysRegex(e)}),addWeekParseToken(["dd","ddd","dddd"],function(e,t,r,n){var i=r._locale.weekdaysParse(e,n,r._strict);null!=i?t.d=i:getParsingFlags(r).invalidWeekday=e}),addWeekParseToken(["d","e","E"],function(e,t,r,n){t[n]=toInt(e)});var W="Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),J="Sun_Mon_Tue_Wed_Thu_Fri_Sat".split("_"),X="Su_Mo_Tu_We_Th_Fr_Sa".split("_"),Y=T,K=T,Q=T;function computeWeekdaysParse(){function cmpLenRev(e,t){return t.length-e.length}var e,t,r,n,i,o=[],s=[],a=[],c=[];for(e=0;e<7;e++)t=createUTC([2e3,1]).day(e),r=this.weekdaysMin(t,""),n=this.weekdaysShort(t,""),i=this.weekdays(t,""),o.push(r),s.push(n),a.push(i),c.push(r),c.push(n),c.push(i);for(o.sort(cmpLenRev),s.sort(cmpLenRev),a.sort(cmpLenRev),c.sort(cmpLenRev),e=0;e<7;e++)s[e]=regexEscape(s[e]),a[e]=regexEscape(a[e]),c[e]=regexEscape(c[e]);this._weekdaysRegex=new RegExp("^("+c.join("|")+")","i"),this._weekdaysShortRegex=this._weekdaysRegex,this._weekdaysMinRegex=this._weekdaysRegex,this._weekdaysStrictRegex=new RegExp("^("+a.join("|")+")","i"),this._weekdaysShortStrictRegex=new RegExp("^("+s.join("|")+")","i"),this._weekdaysMinStrictRegex=new RegExp("^("+o.join("|")+")","i")}function hFormat(){return this.hours()%12||12}function meridiem(e,t){addFormatToken(e,0,0,function(){return this.localeData().meridiem(this.hours(),this.minutes(),t)})}function matchMeridiem(e,t){return t._meridiemParse}addFormatToken("H",["HH",2],0,"hour"),addFormatToken("h",["hh",2],0,hFormat),addFormatToken("k",["kk",2],0,function kFormat(){return this.hours()||24}),addFormatToken("hmm",0,0,function(){return""+hFormat.apply(this)+zeroFill(this.minutes(),2)}),addFormatToken("hmmss",0,0,function(){return""+hFormat.apply(this)+zeroFill(this.minutes(),2)+zeroFill(this.seconds(),2)}),addFormatToken("Hmm",0,0,function(){return""+this.hours()+zeroFill(this.minutes(),2)}),addFormatToken("Hmmss",0,0,function(){return""+this.hours()+zeroFill(this.minutes(),2)+zeroFill(this.seconds(),2)}),meridiem("a",!0),meridiem("A",!1),addUnitAlias("hour","h"),addUnitPriority("hour",13),addRegexToken("a",matchMeridiem),addRegexToken("A",matchMeridiem),addRegexToken("H",v),addRegexToken("h",v),addRegexToken("k",v),addRegexToken("HH",v,f),addRegexToken("hh",v,f),addRegexToken("kk",v,f),addRegexToken("hmm",b),addRegexToken("hmmss",_),addRegexToken("Hmm",b),addRegexToken("Hmmss",_),addParseToken(["H","HH"],L),addParseToken(["k","kk"],function(e,t,r){var n=toInt(e);t[L]=24===n?0:n}),addParseToken(["a","A"],function(e,t,r){r._isPm=r._locale.isPM(e),r._meridiem=e}),addParseToken(["h","hh"],function(e,t,r){t[L]=toInt(e),getParsingFlags(r).bigHour=!0}),addParseToken("hmm",function(e,t,r){var n=e.length-2;t[L]=toInt(e.substr(0,n)),t[D]=toInt(e.substr(n)),getParsingFlags(r).bigHour=!0}),addParseToken("hmmss",function(e,t,r){var n=e.length-4,i=e.length-2;t[L]=toInt(e.substr(0,n)),t[D]=toInt(e.substr(n,2)),t[M]=toInt(e.substr(i)),getParsingFlags(r).bigHour=!0}),addParseToken("Hmm",function(e,t,r){var n=e.length-2;t[L]=toInt(e.substr(0,n)),t[D]=toInt(e.substr(n))}),addParseToken("Hmmss",function(e,t,r){var n=e.length-4,i=e.length-2;t[L]=toInt(e.substr(0,n)),t[D]=toInt(e.substr(n,2)),t[M]=toInt(e.substr(i))});var Z,ee=makeGetSet("Hours",!0),te={calendar:{sameDay:"[Today at] LT",nextDay:"[Tomorrow at] LT",nextWeek:"dddd [at] LT",lastDay:"[Yesterday at] LT",lastWeek:"[Last] dddd [at] LT",sameElse:"L"},longDateFormat:{LTS:"h:mm:ss A",LT:"h:mm A",L:"MM/DD/YYYY",LL:"MMMM D, YYYY",LLL:"MMMM D, YYYY h:mm A",LLLL:"dddd, MMMM D, YYYY h:mm A"},invalidDate:"Invalid date",ordinal:"%d",dayOfMonthOrdinalParse:/\d{1,2}/,relativeTime:{future:"in %s",past:"%s ago",s:"a few seconds",ss:"%d seconds",m:"a minute",mm:"%d minutes",h:"an hour",hh:"%d hours",d:"a day",dd:"%d days",M:"a month",MM:"%d months",y:"a year",yy:"%d years"},months:H,monthsShort:$,week:{dow:0,doy:6},weekdays:W,weekdaysMin:X,weekdaysShort:J,meridiemParse:/[ap]\.?m?\.?/i},re={},ne={};function normalizeLocale(e){return e?e.toLowerCase().replace("_","-"):e}function loadLocale(t){var r=null;if(!re[t]&&void 0!==e&&e&&e.exports)try{r=Z._abbr,!function webpackMissingModule(){var e=new Error("Cannot find module 'undefined'");throw e.code="MODULE_NOT_FOUND",e}(),getSetGlobalLocale(r)}catch(e){}return re[t]}function getSetGlobalLocale(e,t){var r;return e&&((r=isUndefined(t)?getLocale(e):defineLocale(e,t))?Z=r:"undefined"!=typeof console&&console.warn&&console.warn("Locale "+e+" not found. Did you forget to load it?")),Z._abbr}function defineLocale(e,t){if(null!==t){var r,n=te;if(t.abbr=e,null!=re[e])deprecateSimple("defineLocaleOverride","use moment.updateLocale(localeName, config) to change an existing locale. moment.defineLocale(localeName, config) should only be used for creating a new locale See http://momentjs.com/guides/#/warnings/define-locale/ for more info."),n=re[e]._config;else if(null!=t.parentLocale)if(null!=re[t.parentLocale])n=re[t.parentLocale]._config;else{if(null==(r=loadLocale(t.parentLocale)))return ne[t.parentLocale]||(ne[t.parentLocale]=[]),ne[t.parentLocale].push({name:e,config:t}),null;n=r._config}return re[e]=new Locale(mergeConfigs(n,t)),ne[e]&&ne[e].forEach(function(e){defineLocale(e.name,e.config)}),getSetGlobalLocale(e),re[e]}return delete re[e],null}function getLocale(e){var t;if(e&&e._locale&&e._locale._abbr&&(e=e._locale._abbr),!e)return Z;if(!isArray(e)){if(t=loadLocale(e))return t;e=[e]}return function chooseLocale(e){for(var t,r,n,i,o=0;o<e.length;){for(i=normalizeLocale(e[o]).split("-"),t=i.length,r=(r=normalizeLocale(e[o+1]))?r.split("-"):null;t>0;){if(n=loadLocale(i.slice(0,t).join("-")))return n;if(r&&r.length>=t&&compareArrays(i,r,!0)>=t-1)break;t--}o++}return Z}(e)}function checkOverflow(e){var t,r=e._a;return r&&-2===getParsingFlags(e).overflow&&(t=r[A]<0||r[A]>11?A:r[P]<1||r[P]>daysInMonth(r[N],r[A])?P:r[L]<0||r[L]>24||24===r[L]&&(0!==r[D]||0!==r[M]||0!==r[j])?L:r[D]<0||r[D]>59?D:r[M]<0||r[M]>59?M:r[j]<0||r[j]>999?j:-1,getParsingFlags(e)._overflowDayOfYear&&(t<N||t>P)&&(t=P),getParsingFlags(e)._overflowWeeks&&-1===t&&(t=q),getParsingFlags(e)._overflowWeekday&&-1===t&&(t=F),getParsingFlags(e).overflow=t),e}function defaults(e,t,r){return null!=e?e:null!=t?t:r}function configFromArray(e){var t,r,n,i,o,s=[];if(!e._d){for(n=function currentDateArray(e){var t=new Date(hooks.now());return e._useUTC?[t.getUTCFullYear(),t.getUTCMonth(),t.getUTCDate()]:[t.getFullYear(),t.getMonth(),t.getDate()]}(e),e._w&&null==e._a[P]&&null==e._a[A]&&function dayOfYearFromWeekInfo(e){var t,r,n,i,o,s,a,c;if(null!=(t=e._w).GG||null!=t.W||null!=t.E)o=1,s=4,r=defaults(t.GG,e._a[N],weekOfYear(createLocal(),1,4).year),n=defaults(t.W,1),((i=defaults(t.E,1))<1||i>7)&&(c=!0);else{o=e._locale._week.dow,s=e._locale._week.doy;var u=weekOfYear(createLocal(),o,s);r=defaults(t.gg,e._a[N],u.year),n=defaults(t.w,u.week),null!=t.d?((i=t.d)<0||i>6)&&(c=!0):null!=t.e?(i=t.e+o,(t.e<0||t.e>6)&&(c=!0)):i=o}n<1||n>weeksInYear(r,o,s)?getParsingFlags(e)._overflowWeeks=!0:null!=c?getParsingFlags(e)._overflowWeekday=!0:(a=dayOfYearFromWeeks(r,n,i,o,s),e._a[N]=a.year,e._dayOfYear=a.dayOfYear)}(e),null!=e._dayOfYear&&(o=defaults(e._a[N],n[N]),(e._dayOfYear>daysInYear(o)||0===e._dayOfYear)&&(getParsingFlags(e)._overflowDayOfYear=!0),r=createUTCDate(o,0,e._dayOfYear),e._a[A]=r.getUTCMonth(),e._a[P]=r.getUTCDate()),t=0;t<3&&null==e._a[t];++t)e._a[t]=s[t]=n[t];for(;t<7;t++)e._a[t]=s[t]=null==e._a[t]?2===t?1:0:e._a[t];24===e._a[L]&&0===e._a[D]&&0===e._a[M]&&0===e._a[j]&&(e._nextDay=!0,e._a[L]=0),e._d=(e._useUTC?createUTCDate:function createDate(e,t,r,n,i,o,s){var a=new Date(e,t,r,n,i,o,s);return e<100&&e>=0&&isFinite(a.getFullYear())&&a.setFullYear(e),a}).apply(null,s),i=e._useUTC?e._d.getUTCDay():e._d.getDay(),null!=e._tzm&&e._d.setUTCMinutes(e._d.getUTCMinutes()-e._tzm),e._nextDay&&(e._a[L]=24),e._w&&void 0!==e._w.d&&e._w.d!==i&&(getParsingFlags(e).weekdayMismatch=!0)}}var ie=/^\s*((?:[+-]\d{6}|\d{4})-(?:\d\d-\d\d|W\d\d-\d|W\d\d|\d\d\d|\d\d))(?:(T| )(\d\d(?::\d\d(?::\d\d(?:[.,]\d+)?)?)?)([\+\-]\d\d(?::?\d\d)?|\s*Z)?)?$/,oe=/^\s*((?:[+-]\d{6}|\d{4})(?:\d\d\d\d|W\d\d\d|W\d\d|\d\d\d|\d\d))(?:(T| )(\d\d(?:\d\d(?:\d\d(?:[.,]\d+)?)?)?)([\+\-]\d\d(?::?\d\d)?|\s*Z)?)?$/,se=/Z|[+-]\d\d(?::?\d\d)?/,ae=[["YYYYYY-MM-DD",/[+-]\d{6}-\d\d-\d\d/],["YYYY-MM-DD",/\d{4}-\d\d-\d\d/],["GGGG-[W]WW-E",/\d{4}-W\d\d-\d/],["GGGG-[W]WW",/\d{4}-W\d\d/,!1],["YYYY-DDD",/\d{4}-\d{3}/],["YYYY-MM",/\d{4}-\d\d/,!1],["YYYYYYMMDD",/[+-]\d{10}/],["YYYYMMDD",/\d{8}/],["GGGG[W]WWE",/\d{4}W\d{3}/],["GGGG[W]WW",/\d{4}W\d{2}/,!1],["YYYYDDD",/\d{7}/]],ce=[["HH:mm:ss.SSSS",/\d\d:\d\d:\d\d\.\d+/],["HH:mm:ss,SSSS",/\d\d:\d\d:\d\d,\d+/],["HH:mm:ss",/\d\d:\d\d:\d\d/],["HH:mm",/\d\d:\d\d/],["HHmmss.SSSS",/\d\d\d\d\d\d\.\d+/],["HHmmss,SSSS",/\d\d\d\d\d\d,\d+/],["HHmmss",/\d\d\d\d\d\d/],["HHmm",/\d\d\d\d/],["HH",/\d\d/]],ue=/^\/?Date\((\-?\d+)/i;function configFromISO(e){var t,r,n,i,o,s,a=e._i,c=ie.exec(a)||oe.exec(a);if(c){for(getParsingFlags(e).iso=!0,t=0,r=ae.length;t<r;t++)if(ae[t][1].exec(c[1])){i=ae[t][0],n=!1!==ae[t][2];break}if(null==i)return void(e._isValid=!1);if(c[3]){for(t=0,r=ce.length;t<r;t++)if(ce[t][1].exec(c[3])){o=(c[2]||" ")+ce[t][0];break}if(null==o)return void(e._isValid=!1)}if(!n&&null!=o)return void(e._isValid=!1);if(c[4]){if(!se.exec(c[4]))return void(e._isValid=!1);s="Z"}e._f=i+(o||"")+(s||""),configFromStringAndFormat(e)}else e._isValid=!1}var le=/^(?:(Mon|Tue|Wed|Thu|Fri|Sat|Sun),?\s)?(\d{1,2})\s(Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec)\s(\d{2,4})\s(\d\d):(\d\d)(?::(\d\d))?\s(?:(UT|GMT|[ECMP][SD]T)|([Zz])|([+-]\d{4}))$/;function untruncateYear(e){var t=parseInt(e,10);return t<=49?2e3+t:t<=999?1900+t:t}var pe={UT:0,GMT:0,EDT:-240,EST:-300,CDT:-300,CST:-360,MDT:-360,MST:-420,PDT:-420,PST:-480};function configFromRFC2822(e){var t=le.exec(function preprocessRFC2822(e){return e.replace(/\([^)]*\)|[\n\t]/g," ").replace(/(\s\s+)/g," ").replace(/^\s\s*/,"").replace(/\s\s*$/,"")}(e._i));if(t){var r=function extractFromRFC2822Strings(e,t,r,n,i,o){var s=[untruncateYear(e),$.indexOf(t),parseInt(r,10),parseInt(n,10),parseInt(i,10)];return o&&s.push(parseInt(o,10)),s}(t[4],t[3],t[2],t[5],t[6],t[7]);if(!function checkWeekday(e,t,r){if(e){var n=J.indexOf(e),i=new Date(t[0],t[1],t[2]).getDay();if(n!==i)return getParsingFlags(r).weekdayMismatch=!0,r._isValid=!1,!1}return!0}(t[1],r,e))return;e._a=r,e._tzm=function calculateOffset(e,t,r){if(e)return pe[e];if(t)return 0;var n=parseInt(r,10),i=n%100,o=(n-i)/100;return 60*o+i}(t[8],t[9],t[10]),e._d=createUTCDate.apply(null,e._a),e._d.setUTCMinutes(e._d.getUTCMinutes()-e._tzm),getParsingFlags(e).rfc2822=!0}else e._isValid=!1}function configFromStringAndFormat(e){if(e._f!==hooks.ISO_8601)if(e._f!==hooks.RFC_2822){e._a=[],getParsingFlags(e).empty=!0;var t,r,n,i,o,s=""+e._i,a=s.length,c=0;for(n=expandFormat(e._f,e._locale).match(u)||[],t=0;t<n.length;t++)i=n[t],(r=(s.match(getParseRegexForToken(i,e))||[])[0])&&((o=s.substr(0,s.indexOf(r))).length>0&&getParsingFlags(e).unusedInput.push(o),s=s.slice(s.indexOf(r)+r.length),c+=r.length),d[i]?(r?getParsingFlags(e).empty=!1:getParsingFlags(e).unusedTokens.push(i),addTimeToArrayFromToken(i,r,e)):e._strict&&!r&&getParsingFlags(e).unusedTokens.push(i);getParsingFlags(e).charsLeftOver=a-c,s.length>0&&getParsingFlags(e).unusedInput.push(s),e._a[L]<=12&&!0===getParsingFlags(e).bigHour&&e._a[L]>0&&(getParsingFlags(e).bigHour=void 0),getParsingFlags(e).parsedDateParts=e._a.slice(0),getParsingFlags(e).meridiem=e._meridiem,e._a[L]=function meridiemFixWrap(e,t,r){var n;return null==r?t:null!=e.meridiemHour?e.meridiemHour(t,r):null!=e.isPM?((n=e.isPM(r))&&t<12&&(t+=12),n||12!==t||(t=0),t):t}(e._locale,e._a[L],e._meridiem),configFromArray(e),checkOverflow(e)}else configFromRFC2822(e);else configFromISO(e)}function prepareConfig(e){var t=e._i,r=e._f;return e._locale=e._locale||getLocale(e._l),null===t||void 0===r&&""===t?createInvalid({nullInput:!0}):("string"==typeof t&&(e._i=t=e._locale.preparse(t)),isMoment(t)?new Moment(checkOverflow(t)):(isDate(t)?e._d=t:isArray(r)?function configFromStringAndArray(e){var t,r,n,i,o;if(0===e._f.length)return getParsingFlags(e).invalidFormat=!0,void(e._d=new Date(NaN));for(i=0;i<e._f.length;i++)o=0,t=copyConfig({},e),null!=e._useUTC&&(t._useUTC=e._useUTC),t._f=e._f[i],configFromStringAndFormat(t),isValid(t)&&(o+=getParsingFlags(t).charsLeftOver,o+=10*getParsingFlags(t).unusedTokens.length,getParsingFlags(t).score=o,(null==n||o<n)&&(n=o,r=t));extend(e,r||t)}(e):r?configFromStringAndFormat(e):function configFromInput(e){var t=e._i;isUndefined(t)?e._d=new Date(hooks.now()):isDate(t)?e._d=new Date(t.valueOf()):"string"==typeof t?function configFromString(e){var t=ue.exec(e._i);null===t?(configFromISO(e),!1===e._isValid&&(delete e._isValid,configFromRFC2822(e),!1===e._isValid&&(delete e._isValid,hooks.createFromInputFallback(e)))):e._d=new Date(+t[1])}(e):isArray(t)?(e._a=map(t.slice(0),function(e){return parseInt(e,10)}),configFromArray(e)):isObject(t)?function configFromObject(e){if(!e._d){var t=normalizeObjectUnits(e._i);e._a=map([t.year,t.month,t.day||t.date,t.hour,t.minute,t.second,t.millisecond],function(e){return e&&parseInt(e,10)}),configFromArray(e)}}(e):isNumber(t)?e._d=new Date(t):hooks.createFromInputFallback(e)}(e),isValid(e)||(e._d=null),e))}function createLocalOrUTC(e,t,r,n,i){var o={};return!0!==r&&!1!==r||(n=r,r=void 0),(isObject(e)&&function isObjectEmpty(e){if(Object.getOwnPropertyNames)return 0===Object.getOwnPropertyNames(e).length;var t;for(t in e)if(e.hasOwnProperty(t))return!1;return!0}(e)||isArray(e)&&0===e.length)&&(e=void 0),o._isAMomentObject=!0,o._useUTC=o._isUTC=i,o._l=r,o._i=e,o._f=t,o._strict=n,function createFromConfig(e){var t=new Moment(checkOverflow(prepareConfig(e)));return t._nextDay&&(t.add(1,"d"),t._nextDay=void 0),t}(o)}function createLocal(e,t,r,n){return createLocalOrUTC(e,t,r,n,!1)}hooks.createFromInputFallback=deprecate("value provided is not in a recognized RFC2822 or ISO format. moment construction falls back to js Date(), which is not reliable across all browsers and versions. Non RFC2822/ISO date formats are discouraged and will be removed in an upcoming major release. Please refer to http://momentjs.com/guides/#/warnings/js-date/ for more info.",function(e){e._d=new Date(e._i+(e._useUTC?" UTC":""))}),hooks.ISO_8601=function(){},hooks.RFC_2822=function(){};var de=deprecate("moment().min is deprecated, use moment.max instead. http://momentjs.com/guides/#/warnings/min-max/",function(){var e=createLocal.apply(null,arguments);return this.isValid()&&e.isValid()?e<this?this:e:createInvalid()}),he=deprecate("moment().max is deprecated, use moment.min instead. http://momentjs.com/guides/#/warnings/min-max/",function(){var e=createLocal.apply(null,arguments);return this.isValid()&&e.isValid()?e>this?this:e:createInvalid()});function pickBy(e,t){var r,n;if(1===t.length&&isArray(t[0])&&(t=t[0]),!t.length)return createLocal();for(r=t[0],n=1;n<t.length;++n)t[n].isValid()&&!t[n][e](r)||(r=t[n]);return r}var fe=["year","quarter","month","week","day","hour","minute","second","millisecond"];function Duration(e){var t=normalizeObjectUnits(e),r=t.year||0,n=t.quarter||0,i=t.month||0,o=t.week||0,s=t.day||0,a=t.hour||0,c=t.minute||0,u=t.second||0,l=t.millisecond||0;this._isValid=function isDurationValid(e){for(var t in e)if(-1===z.call(fe,t)||null!=e[t]&&isNaN(e[t]))return!1;for(var r=!1,n=0;n<fe.length;++n)if(e[fe[n]]){if(r)return!1;parseFloat(e[fe[n]])!==toInt(e[fe[n]])&&(r=!0)}return!0}(t),this._milliseconds=+l+1e3*u+6e4*c+1e3*a*60*60,this._days=+s+7*o,this._months=+i+3*n+12*r,this._data={},this._locale=getLocale(),this._bubble()}function isDuration(e){return e instanceof Duration}function absRound(e){return e<0?-1*Math.round(-1*e):Math.round(e)}function offset(e,t){addFormatToken(e,0,0,function(){var e=this.utcOffset(),r="+";return e<0&&(e=-e,r="-"),r+zeroFill(~~(e/60),2)+t+zeroFill(~~e%60,2)})}offset("Z",":"),offset("ZZ",""),addRegexToken("Z",R),addRegexToken("ZZ",R),addParseToken(["Z","ZZ"],function(e,t,r){r._useUTC=!0,r._tzm=offsetFromString(R,e)});var me=/([\+\-]|\d\d)/gi;function offsetFromString(e,t){var r=(t||"").match(e);if(null===r)return null;var n=r[r.length-1]||[],i=(n+"").match(me)||["-",0,0],o=60*i[1]+toInt(i[2]);return 0===o?0:"+"===i[0]?o:-o}function cloneWithOffset(e,t){var r,n;return t._isUTC?(r=t.clone(),n=(isMoment(e)||isDate(e)?e.valueOf():createLocal(e).valueOf())-r.valueOf(),r._d.setTime(r._d.valueOf()+n),hooks.updateOffset(r,!1),r):createLocal(e).local()}function getDateOffset(e){return 15*-Math.round(e._d.getTimezoneOffset()/15)}function isUtc(){return!!this.isValid()&&this._isUTC&&0===this._offset}hooks.updateOffset=function(){};var ge=/^(\-|\+)?(?:(\d*)[. ])?(\d+)\:(\d+)(?:\:(\d+)(\.\d*)?)?$/,ye=/^(-|\+)?P(?:([-+]?[0-9,.]*)Y)?(?:([-+]?[0-9,.]*)M)?(?:([-+]?[0-9,.]*)W)?(?:([-+]?[0-9,.]*)D)?(?:T(?:([-+]?[0-9,.]*)H)?(?:([-+]?[0-9,.]*)M)?(?:([-+]?[0-9,.]*)S)?)?$/;function createDuration(e,t){var r,n,i,o=e,s=null;return isDuration(e)?o={ms:e._milliseconds,d:e._days,M:e._months}:isNumber(e)?(o={},t?o[t]=e:o.milliseconds=e):(s=ge.exec(e))?(r="-"===s[1]?-1:1,o={y:0,d:toInt(s[P])*r,h:toInt(s[L])*r,m:toInt(s[D])*r,s:toInt(s[M])*r,ms:toInt(absRound(1e3*s[j]))*r}):(s=ye.exec(e))?(r="-"===s[1]?-1:(s[1],1),o={y:parseIso(s[2],r),M:parseIso(s[3],r),w:parseIso(s[4],r),d:parseIso(s[5],r),h:parseIso(s[6],r),m:parseIso(s[7],r),s:parseIso(s[8],r)}):null==o?o={}:"object"==typeof o&&("from"in o||"to"in o)&&(i=function momentsDifference(e,t){var r;return e.isValid()&&t.isValid()?(t=cloneWithOffset(t,e),e.isBefore(t)?r=positiveMomentsDifference(e,t):((r=positiveMomentsDifference(t,e)).milliseconds=-r.milliseconds,r.months=-r.months),r):{milliseconds:0,months:0}}(createLocal(o.from),createLocal(o.to)),(o={}).ms=i.milliseconds,o.M=i.months),n=new Duration(o),isDuration(e)&&hasOwnProp(e,"_locale")&&(n._locale=e._locale),n}function parseIso(e,t){var r=e&&parseFloat(e.replace(",","."));return(isNaN(r)?0:r)*t}function positiveMomentsDifference(e,t){var r={milliseconds:0,months:0};return r.months=t.month()-e.month()+12*(t.year()-e.year()),e.clone().add(r.months,"M").isAfter(t)&&--r.months,r.milliseconds=+t-+e.clone().add(r.months,"M"),r}function createAdder(e,t){return function(r,n){var i;return null===n||isNaN(+n)||(deprecateSimple(t,"moment()."+t+"(period, number) is deprecated. Please use moment()."+t+"(number, period). See http://momentjs.com/guides/#/warnings/add-inverted-param/ for more info."),i=r,r=n,n=i),addSubtract(this,createDuration(r="string"==typeof r?+r:r,n),e),this}}function addSubtract(e,t,r,n){var i=t._milliseconds,o=absRound(t._days),s=absRound(t._months);e.isValid()&&(n=null==n||n,s&&setMonth(e,get(e,"Month")+s*r),o&&set$1(e,"Date",get(e,"Date")+o*r),i&&e._d.setTime(e._d.valueOf()+i*r),n&&hooks.updateOffset(e,o||s))}createDuration.fn=Duration.prototype,createDuration.invalid=function createInvalid$1(){return createDuration(NaN)};var ve=createAdder(1,"add"),be=createAdder(-1,"subtract");function monthDiff(e,t){var r,n,i=12*(t.year()-e.year())+(t.month()-e.month()),o=e.clone().add(i,"months");return t-o<0?(r=e.clone().add(i-1,"months"),n=(t-o)/(o-r)):(r=e.clone().add(i+1,"months"),n=(t-o)/(r-o)),-(i+n)||0}function locale(e){var t;return void 0===e?this._locale._abbr:(null!=(t=getLocale(e))&&(this._locale=t),this)}hooks.defaultFormat="YYYY-MM-DDTHH:mm:ssZ",hooks.defaultFormatUtc="YYYY-MM-DDTHH:mm:ss[Z]";var _e=deprecate("moment().lang() is deprecated. Instead, use moment().localeData() to get the language configuration. Use moment().locale() to change languages.",function(e){return void 0===e?this.localeData():this.locale(e)});function localeData(){return this._locale}function addWeekYearFormatToken(e,t){addFormatToken(0,[e,e.length],0,t)}function getSetWeekYearHelper(e,t,r,n,i){var o;return null==e?weekOfYear(this,n,i).year:(o=weeksInYear(e,n,i),t>o&&(t=o),function setWeekAll(e,t,r,n,i){var o=dayOfYearFromWeeks(e,t,r,n,i),s=createUTCDate(o.year,0,o.dayOfYear);return this.year(s.getUTCFullYear()),this.month(s.getUTCMonth()),this.date(s.getUTCDate()),this}.call(this,e,t,r,n,i))}addFormatToken(0,["gg",2],0,function(){return this.weekYear()%100}),addFormatToken(0,["GG",2],0,function(){return this.isoWeekYear()%100}),addWeekYearFormatToken("gggg","weekYear"),addWeekYearFormatToken("ggggg","weekYear"),addWeekYearFormatToken("GGGG","isoWeekYear"),addWeekYearFormatToken("GGGGG","isoWeekYear"),addUnitAlias("weekYear","gg"),addUnitAlias("isoWeekYear","GG"),addUnitPriority("weekYear",1),addUnitPriority("isoWeekYear",1),addRegexToken("G",x),addRegexToken("g",x),addRegexToken("GG",v,f),addRegexToken("gg",v,f),addRegexToken("GGGG",E,g),addRegexToken("gggg",E,g),addRegexToken("GGGGG",S,y),addRegexToken("ggggg",S,y),addWeekParseToken(["gggg","ggggg","GGGG","GGGGG"],function(e,t,r,n){t[n.substr(0,2)]=toInt(e)}),addWeekParseToken(["gg","GG"],function(e,t,r,n){t[n]=hooks.parseTwoDigitYear(e)}),addFormatToken("Q",0,"Qo","quarter"),addUnitAlias("quarter","Q"),addUnitPriority("quarter",7),addRegexToken("Q",h),addParseToken("Q",function(e,t){t[A]=3*(toInt(e)-1)}),addFormatToken("D",["DD",2],"Do","date"),addUnitAlias("date","D"),addUnitPriority("date",9),addRegexToken("D",v),addRegexToken("DD",v,f),addRegexToken("Do",function(e,t){return e?t._dayOfMonthOrdinalParse||t._ordinalParse:t._dayOfMonthOrdinalParseLenient}),addParseToken(["D","DD"],P),addParseToken("Do",function(e,t){t[P]=toInt(e.match(v)[0])});var we=makeGetSet("Date",!0);addFormatToken("DDD",["DDDD",3],"DDDo","dayOfYear"),addUnitAlias("dayOfYear","DDD"),addUnitPriority("dayOfYear",4),addRegexToken("DDD",w),addRegexToken("DDDD",m),addParseToken(["DDD","DDDD"],function(e,t,r){r._dayOfYear=toInt(e)}),addFormatToken("m",["mm",2],0,"minute"),addUnitAlias("minute","m"),addUnitPriority("minute",14),addRegexToken("m",v),addRegexToken("mm",v,f),addParseToken(["m","mm"],D);var Ee=makeGetSet("Minutes",!1);addFormatToken("s",["ss",2],0,"second"),addUnitAlias("second","s"),addUnitPriority("second",15),addRegexToken("s",v),addRegexToken("ss",v,f),addParseToken(["s","ss"],M);var Se,Ce=makeGetSet("Seconds",!1);for(addFormatToken("S",0,0,function(){return~~(this.millisecond()/100)}),addFormatToken(0,["SS",2],0,function(){return~~(this.millisecond()/10)}),addFormatToken(0,["SSS",3],0,"millisecond"),addFormatToken(0,["SSSS",4],0,function(){return 10*this.millisecond()}),addFormatToken(0,["SSSSS",5],0,function(){return 100*this.millisecond()}),addFormatToken(0,["SSSSSS",6],0,function(){return 1e3*this.millisecond()}),addFormatToken(0,["SSSSSSS",7],0,function(){return 1e4*this.millisecond()}),addFormatToken(0,["SSSSSSSS",8],0,function(){return 1e5*this.millisecond()}),addFormatToken(0,["SSSSSSSSS",9],0,function(){return 1e6*this.millisecond()}),addUnitAlias("millisecond","ms"),addUnitPriority("millisecond",16),addRegexToken("S",w,h),addRegexToken("SS",w,f),addRegexToken("SSS",w,m),Se="SSSS";Se.length<=9;Se+="S")addRegexToken(Se,C);function parseMs(e,t){t[j]=toInt(1e3*("0."+e))}for(Se="S";Se.length<=9;Se+="S")addParseToken(Se,parseMs);var xe=makeGetSet("Milliseconds",!1);addFormatToken("z",0,0,"zoneAbbr"),addFormatToken("zz",0,0,"zoneName");var ke=Moment.prototype;function preParsePostFormat(e){return e}ke.add=ve,ke.calendar=function calendar$1(e,t){var r=e||createLocal(),n=cloneWithOffset(r,this).startOf("day"),i=hooks.calendarFormat(this,n)||"sameElse",o=t&&(isFunction(t[i])?t[i].call(this,r):t[i]);return this.format(o||this.localeData().calendar(i,this,createLocal(r)))},ke.clone=function clone(){return new Moment(this)},ke.diff=function diff(e,t,r){var n,i,o;if(!this.isValid())return NaN;if(!(n=cloneWithOffset(e,this)).isValid())return NaN;switch(i=6e4*(n.utcOffset()-this.utcOffset()),t=normalizeUnits(t)){case"year":o=monthDiff(this,n)/12;break;case"month":o=monthDiff(this,n);break;case"quarter":o=monthDiff(this,n)/3;break;case"second":o=(this-n)/1e3;break;case"minute":o=(this-n)/6e4;break;case"hour":o=(this-n)/36e5;break;case"day":o=(this-n-i)/864e5;break;case"week":o=(this-n-i)/6048e5;break;default:o=this-n}return r?o:absFloor(o)},ke.endOf=function endOf(e){return void 0===(e=normalizeUnits(e))||"millisecond"===e?this:("date"===e&&(e="day"),this.startOf(e).add(1,"isoWeek"===e?"week":e).subtract(1,"ms"))},ke.format=function format(e){e||(e=this.isUtc()?hooks.defaultFormatUtc:hooks.defaultFormat);var t=formatMoment(this,e);return this.localeData().postformat(t)},ke.from=function from(e,t){return this.isValid()&&(isMoment(e)&&e.isValid()||createLocal(e).isValid())?createDuration({to:this,from:e}).locale(this.locale()).humanize(!t):this.localeData().invalidDate()},ke.fromNow=function fromNow(e){return this.from(createLocal(),e)},ke.to=function to(e,t){return this.isValid()&&(isMoment(e)&&e.isValid()||createLocal(e).isValid())?createDuration({from:this,to:e}).locale(this.locale()).humanize(!t):this.localeData().invalidDate()},ke.toNow=function toNow(e){return this.to(createLocal(),e)},ke.get=function stringGet(e){return isFunction(this[e=normalizeUnits(e)])?this[e]():this},ke.invalidAt=function invalidAt(){return getParsingFlags(this).overflow},ke.isAfter=function isAfter(e,t){var r=isMoment(e)?e:createLocal(e);return!(!this.isValid()||!r.isValid())&&("millisecond"===(t=normalizeUnits(isUndefined(t)?"millisecond":t))?this.valueOf()>r.valueOf():r.valueOf()<this.clone().startOf(t).valueOf())},ke.isBefore=function isBefore(e,t){var r=isMoment(e)?e:createLocal(e);return!(!this.isValid()||!r.isValid())&&("millisecond"===(t=normalizeUnits(isUndefined(t)?"millisecond":t))?this.valueOf()<r.valueOf():this.clone().endOf(t).valueOf()<r.valueOf())},ke.isBetween=function isBetween(e,t,r,n){return("("===(n=n||"()")[0]?this.isAfter(e,r):!this.isBefore(e,r))&&(")"===n[1]?this.isBefore(t,r):!this.isAfter(t,r))},ke.isSame=function isSame(e,t){var r,n=isMoment(e)?e:createLocal(e);return!(!this.isValid()||!n.isValid())&&("millisecond"===(t=normalizeUnits(t||"millisecond"))?this.valueOf()===n.valueOf():(r=n.valueOf(),this.clone().startOf(t).valueOf()<=r&&r<=this.clone().endOf(t).valueOf()))},ke.isSameOrAfter=function isSameOrAfter(e,t){return this.isSame(e,t)||this.isAfter(e,t)},ke.isSameOrBefore=function isSameOrBefore(e,t){return this.isSame(e,t)||this.isBefore(e,t)},ke.isValid=function isValid$2(){return isValid(this)},ke.lang=_e,ke.locale=locale,ke.localeData=localeData,ke.max=he,ke.min=de,ke.parsingFlags=function parsingFlags(){return extend({},getParsingFlags(this))},ke.set=function stringSet(e,t){if("object"==typeof e)for(var r=function getPrioritizedUnits(e){var t=[];for(var r in e)t.push({unit:r,priority:c[r]});return t.sort(function(e,t){return e.priority-t.priority}),t}(e=normalizeObjectUnits(e)),n=0;n<r.length;n++)this[r[n].unit](e[r[n].unit]);else if(isFunction(this[e=normalizeUnits(e)]))return this[e](t);return this},ke.startOf=function startOf(e){switch(e=normalizeUnits(e)){case"year":this.month(0);case"quarter":case"month":this.date(1);case"week":case"isoWeek":case"day":case"date":this.hours(0);case"hour":this.minutes(0);case"minute":this.seconds(0);case"second":this.milliseconds(0)}return"week"===e&&this.weekday(0),"isoWeek"===e&&this.isoWeekday(1),"quarter"===e&&this.month(3*Math.floor(this.month()/3)),this},ke.subtract=be,ke.toArray=function toArray(){var e=this;return[e.year(),e.month(),e.date(),e.hour(),e.minute(),e.second(),e.millisecond()]},ke.toObject=function toObject(){var e=this;return{years:e.year(),months:e.month(),date:e.date(),hours:e.hours(),minutes:e.minutes(),seconds:e.seconds(),milliseconds:e.milliseconds()}},ke.toDate=function toDate(){return new Date(this.valueOf())},ke.toISOString=function toISOString(e){if(!this.isValid())return null;var t=!0!==e,r=t?this.clone().utc():this;return r.year()<0||r.year()>9999?formatMoment(r,t?"YYYYYY-MM-DD[T]HH:mm:ss.SSS[Z]":"YYYYYY-MM-DD[T]HH:mm:ss.SSSZ"):isFunction(Date.prototype.toISOString)?t?this.toDate().toISOString():new Date(this.valueOf()+60*this.utcOffset()*1e3).toISOString().replace("Z",formatMoment(r,"Z")):formatMoment(r,t?"YYYY-MM-DD[T]HH:mm:ss.SSS[Z]":"YYYY-MM-DD[T]HH:mm:ss.SSSZ")},ke.inspect=function inspect(){if(!this.isValid())return"moment.invalid(/* "+this._i+" */)";var e="moment",t="";this.isLocal()||(e=0===this.utcOffset()?"moment.utc":"moment.parseZone",t="Z");var r="["+e+'("]',n=0<=this.year()&&this.year()<=9999?"YYYY":"YYYYYY",i=t+'[")]';return this.format(r+n+"-MM-DD[T]HH:mm:ss.SSS"+i)},ke.toJSON=function toJSON(){return this.isValid()?this.toISOString():null},ke.toString=function toString(){return this.clone().locale("en").format("ddd MMM DD YYYY HH:mm:ss [GMT]ZZ")},ke.unix=function unix(){return Math.floor(this.valueOf()/1e3)},ke.valueOf=function valueOf(){return this._d.valueOf()-6e4*(this._offset||0)},ke.creationData=function creationData(){return{input:this._i,format:this._f,locale:this._locale,isUTC:this._isUTC,strict:this._strict}},ke.year=U,ke.isLeapYear=function getIsLeapYear(){return isLeapYear(this.year())},ke.weekYear=function getSetWeekYear(e){return getSetWeekYearHelper.call(this,e,this.week(),this.weekday(),this.localeData()._week.dow,this.localeData()._week.doy)},ke.isoWeekYear=function getSetISOWeekYear(e){return getSetWeekYearHelper.call(this,e,this.isoWeek(),this.isoWeekday(),1,4)},ke.quarter=ke.quarters=function getSetQuarter(e){return null==e?Math.ceil((this.month()+1)/3):this.month(3*(e-1)+this.month()%3)},ke.month=getSetMonth,ke.daysInMonth=function getDaysInMonth(){return daysInMonth(this.year(),this.month())},ke.week=ke.weeks=function getSetWeek(e){var t=this.localeData().week(this);return null==e?t:this.add(7*(e-t),"d")},ke.isoWeek=ke.isoWeeks=function getSetISOWeek(e){var t=weekOfYear(this,1,4).week;return null==e?t:this.add(7*(e-t),"d")},ke.weeksInYear=function getWeeksInYear(){var e=this.localeData()._week;return weeksInYear(this.year(),e.dow,e.doy)},ke.isoWeeksInYear=function getISOWeeksInYear(){return weeksInYear(this.year(),1,4)},ke.date=we,ke.day=ke.days=function getSetDayOfWeek(e){if(!this.isValid())return null!=e?this:NaN;var t=this._isUTC?this._d.getUTCDay():this._d.getDay();return null!=e?(e=function parseWeekday(e,t){return"string"!=typeof e?e:isNaN(e)?"number"==typeof(e=t.weekdaysParse(e))?e:null:parseInt(e,10)}(e,this.localeData()),this.add(e-t,"d")):t},ke.weekday=function getSetLocaleDayOfWeek(e){if(!this.isValid())return null!=e?this:NaN;var t=(this.day()+7-this.localeData()._week.dow)%7;return null==e?t:this.add(e-t,"d")},ke.isoWeekday=function getSetISODayOfWeek(e){if(!this.isValid())return null!=e?this:NaN;if(null!=e){var t=function parseIsoWeekday(e,t){return"string"==typeof e?t.weekdaysParse(e)%7||7:isNaN(e)?null:e}(e,this.localeData());return this.day(this.day()%7?t:t-7)}return this.day()||7},ke.dayOfYear=function getSetDayOfYear(e){var t=Math.round((this.clone().startOf("day")-this.clone().startOf("year"))/864e5)+1;return null==e?t:this.add(e-t,"d")},ke.hour=ke.hours=ee,ke.minute=ke.minutes=Ee,ke.second=ke.seconds=Ce,ke.millisecond=ke.milliseconds=xe,ke.utcOffset=function getSetOffset(e,t,r){var n,i=this._offset||0;if(!this.isValid())return null!=e?this:NaN;if(null!=e){if("string"==typeof e){if(null===(e=offsetFromString(R,e)))return this}else Math.abs(e)<16&&!r&&(e*=60);return!this._isUTC&&t&&(n=getDateOffset(this)),this._offset=e,this._isUTC=!0,null!=n&&this.add(n,"m"),i!==e&&(!t||this._changeInProgress?addSubtract(this,createDuration(e-i,"m"),1,!1):this._changeInProgress||(this._changeInProgress=!0,hooks.updateOffset(this,!0),this._changeInProgress=null)),this}return this._isUTC?i:getDateOffset(this)},ke.utc=function setOffsetToUTC(e){return this.utcOffset(0,e)},ke.local=function setOffsetToLocal(e){return this._isUTC&&(this.utcOffset(0,e),this._isUTC=!1,e&&this.subtract(getDateOffset(this),"m")),this},ke.parseZone=function setOffsetToParsedOffset(){if(null!=this._tzm)this.utcOffset(this._tzm,!1,!0);else if("string"==typeof this._i){var e=offsetFromString(k,this._i);null!=e?this.utcOffset(e):this.utcOffset(0,!0)}return this},ke.hasAlignedHourOffset=function hasAlignedHourOffset(e){return!!this.isValid()&&(e=e?createLocal(e).utcOffset():0,(this.utcOffset()-e)%60==0)},ke.isDST=function isDaylightSavingTime(){return this.utcOffset()>this.clone().month(0).utcOffset()||this.utcOffset()>this.clone().month(5).utcOffset()},ke.isLocal=function isLocal(){return!!this.isValid()&&!this._isUTC},ke.isUtcOffset=function isUtcOffset(){return!!this.isValid()&&this._isUTC},ke.isUtc=isUtc,ke.isUTC=isUtc,ke.zoneAbbr=function getZoneAbbr(){return this._isUTC?"UTC":""},ke.zoneName=function getZoneName(){return this._isUTC?"Coordinated Universal Time":""},ke.dates=deprecate("dates accessor is deprecated. Use date instead.",we),ke.months=deprecate("months accessor is deprecated. Use month instead",getSetMonth),ke.years=deprecate("years accessor is deprecated. Use year instead",U),ke.zone=deprecate("moment().zone is deprecated, use moment().utcOffset instead. http://momentjs.com/guides/#/warnings/zone/",function getSetZone(e,t){return null!=e?("string"!=typeof e&&(e=-e),this.utcOffset(e,t),this):-this.utcOffset()}),ke.isDSTShifted=deprecate("isDSTShifted is deprecated. See http://momentjs.com/guides/#/warnings/dst-shifted/ for more information",function isDaylightSavingTimeShifted(){if(!isUndefined(this._isDSTShifted))return this._isDSTShifted;var e={};if(copyConfig(e,this),(e=prepareConfig(e))._a){var t=e._isUTC?createUTC(e._a):createLocal(e._a);this._isDSTShifted=this.isValid()&&compareArrays(e._a,t.toArray())>0}else this._isDSTShifted=!1;return this._isDSTShifted});var Re=Locale.prototype;function get$1(e,t,r,n){var i=getLocale(),o=createUTC().set(n,t);return i[r](o,e)}function listMonthsImpl(e,t,r){if(isNumber(e)&&(t=e,e=void 0),e=e||"",null!=t)return get$1(e,t,r,"month");var n,i=[];for(n=0;n<12;n++)i[n]=get$1(e,n,r,"month");return i}function listWeekdaysImpl(e,t,r,n){"boolean"==typeof e?(isNumber(t)&&(r=t,t=void 0),t=t||""):(r=t=e,e=!1,isNumber(t)&&(r=t,t=void 0),t=t||"");var i,o=getLocale(),s=e?o._week.dow:0;if(null!=r)return get$1(t,(r+s)%7,n,"day");var a=[];for(i=0;i<7;i++)a[i]=get$1(t,(i+s)%7,n,"day");return a}Re.calendar=function calendar(e,t,r){var n=this._calendar[e]||this._calendar.sameElse;return isFunction(n)?n.call(t,r):n},Re.longDateFormat=function longDateFormat(e){var t=this._longDateFormat[e],r=this._longDateFormat[e.toUpperCase()];return t||!r?t:(this._longDateFormat[e]=r.replace(/MMMM|MM|DD|dddd/g,function(e){return e.slice(1)}),this._longDateFormat[e])},Re.invalidDate=function invalidDate(){return this._invalidDate},Re.ordinal=function ordinal(e){return this._ordinal.replace("%d",e)},Re.preparse=preParsePostFormat,Re.postformat=preParsePostFormat,Re.relativeTime=function relativeTime(e,t,r,n){var i=this._relativeTime[r];return isFunction(i)?i(e,t,r,n):i.replace(/%d/i,e)},Re.pastFuture=function pastFuture(e,t){var r=this._relativeTime[e>0?"future":"past"];return isFunction(r)?r(t):r.replace(/%s/i,t)},Re.set=function set(e){var t,r;for(r in e)isFunction(t=e[r])?this[r]=t:this["_"+r]=t;this._config=e,this._dayOfMonthOrdinalParseLenient=new RegExp((this._dayOfMonthOrdinalParse.source||this._ordinalParse.source)+"|"+/\d{1,2}/.source)},Re.months=function localeMonths(e,t){return e?isArray(this._months)?this._months[e.month()]:this._months[(this._months.isFormat||B).test(t)?"format":"standalone"][e.month()]:isArray(this._months)?this._months:this._months.standalone},Re.monthsShort=function localeMonthsShort(e,t){return e?isArray(this._monthsShort)?this._monthsShort[e.month()]:this._monthsShort[B.test(t)?"format":"standalone"][e.month()]:isArray(this._monthsShort)?this._monthsShort:this._monthsShort.standalone},Re.monthsParse=function localeMonthsParse(e,t,r){var n,i,o;if(this._monthsParseExact)return function handleStrictParse(e,t,r){var n,i,o,s=e.toLocaleLowerCase();if(!this._monthsParse)for(this._monthsParse=[],this._longMonthsParse=[],this._shortMonthsParse=[],n=0;n<12;++n)o=createUTC([2e3,n]),this._shortMonthsParse[n]=this.monthsShort(o,"").toLocaleLowerCase(),this._longMonthsParse[n]=this.months(o,"").toLocaleLowerCase();return r?"MMM"===t?-1!==(i=z.call(this._shortMonthsParse,s))?i:null:-1!==(i=z.call(this._longMonthsParse,s))?i:null:"MMM"===t?-1!==(i=z.call(this._shortMonthsParse,s))?i:-1!==(i=z.call(this._longMonthsParse,s))?i:null:-1!==(i=z.call(this._longMonthsParse,s))?i:-1!==(i=z.call(this._shortMonthsParse,s))?i:null}.call(this,e,t,r);for(this._monthsParse||(this._monthsParse=[],this._longMonthsParse=[],this._shortMonthsParse=[]),n=0;n<12;n++){if(i=createUTC([2e3,n]),r&&!this._longMonthsParse[n]&&(this._longMonthsParse[n]=new RegExp("^"+this.months(i,"").replace(".","")+"$","i"),this._shortMonthsParse[n]=new RegExp("^"+this.monthsShort(i,"").replace(".","")+"$","i")),r||this._monthsParse[n]||(o="^"+this.months(i,"")+"|^"+this.monthsShort(i,""),this._monthsParse[n]=new RegExp(o.replace(".",""),"i")),r&&"MMMM"===t&&this._longMonthsParse[n].test(e))return n;if(r&&"MMM"===t&&this._shortMonthsParse[n].test(e))return n;if(!r&&this._monthsParse[n].test(e))return n}},Re.monthsRegex=function monthsRegex(e){return this._monthsParseExact?(hasOwnProp(this,"_monthsRegex")||computeMonthsParse.call(this),e?this._monthsStrictRegex:this._monthsRegex):(hasOwnProp(this,"_monthsRegex")||(this._monthsRegex=G),this._monthsStrictRegex&&e?this._monthsStrictRegex:this._monthsRegex)},Re.monthsShortRegex=function monthsShortRegex(e){return this._monthsParseExact?(hasOwnProp(this,"_monthsRegex")||computeMonthsParse.call(this),e?this._monthsShortStrictRegex:this._monthsShortRegex):(hasOwnProp(this,"_monthsShortRegex")||(this._monthsShortRegex=V),this._monthsShortStrictRegex&&e?this._monthsShortStrictRegex:this._monthsShortRegex)},Re.week=function localeWeek(e){return weekOfYear(e,this._week.dow,this._week.doy).week},Re.firstDayOfYear=function localeFirstDayOfYear(){return this._week.doy},Re.firstDayOfWeek=function localeFirstDayOfWeek(){return this._week.dow},Re.weekdays=function localeWeekdays(e,t){return e?isArray(this._weekdays)?this._weekdays[e.day()]:this._weekdays[this._weekdays.isFormat.test(t)?"format":"standalone"][e.day()]:isArray(this._weekdays)?this._weekdays:this._weekdays.standalone},Re.weekdaysMin=function localeWeekdaysMin(e){return e?this._weekdaysMin[e.day()]:this._weekdaysMin},Re.weekdaysShort=function localeWeekdaysShort(e){return e?this._weekdaysShort[e.day()]:this._weekdaysShort},Re.weekdaysParse=function localeWeekdaysParse(e,t,r){var n,i,o;if(this._weekdaysParseExact)return function handleStrictParse$1(e,t,r){var n,i,o,s=e.toLocaleLowerCase();if(!this._weekdaysParse)for(this._weekdaysParse=[],this._shortWeekdaysParse=[],this._minWeekdaysParse=[],n=0;n<7;++n)o=createUTC([2e3,1]).day(n),this._minWeekdaysParse[n]=this.weekdaysMin(o,"").toLocaleLowerCase(),this._shortWeekdaysParse[n]=this.weekdaysShort(o,"").toLocaleLowerCase(),this._weekdaysParse[n]=this.weekdays(o,"").toLocaleLowerCase();return r?"dddd"===t?-1!==(i=z.call(this._weekdaysParse,s))?i:null:"ddd"===t?-1!==(i=z.call(this._shortWeekdaysParse,s))?i:null:-1!==(i=z.call(this._minWeekdaysParse,s))?i:null:"dddd"===t?-1!==(i=z.call(this._weekdaysParse,s))?i:-1!==(i=z.call(this._shortWeekdaysParse,s))?i:-1!==(i=z.call(this._minWeekdaysParse,s))?i:null:"ddd"===t?-1!==(i=z.call(this._shortWeekdaysParse,s))?i:-1!==(i=z.call(this._weekdaysParse,s))?i:-1!==(i=z.call(this._minWeekdaysParse,s))?i:null:-1!==(i=z.call(this._minWeekdaysParse,s))?i:-1!==(i=z.call(this._weekdaysParse,s))?i:-1!==(i=z.call(this._shortWeekdaysParse,s))?i:null}.call(this,e,t,r);for(this._weekdaysParse||(this._weekdaysParse=[],this._minWeekdaysParse=[],this._shortWeekdaysParse=[],this._fullWeekdaysParse=[]),n=0;n<7;n++){if(i=createUTC([2e3,1]).day(n),r&&!this._fullWeekdaysParse[n]&&(this._fullWeekdaysParse[n]=new RegExp("^"+this.weekdays(i,"").replace(".","\\.?")+"$","i"),this._shortWeekdaysParse[n]=new RegExp("^"+this.weekdaysShort(i,"").replace(".","\\.?")+"$","i"),this._minWeekdaysParse[n]=new RegExp("^"+this.weekdaysMin(i,"").replace(".","\\.?")+"$","i")),this._weekdaysParse[n]||(o="^"+this.weekdays(i,"")+"|^"+this.weekdaysShort(i,"")+"|^"+this.weekdaysMin(i,""),this._weekdaysParse[n]=new RegExp(o.replace(".",""),"i")),r&&"dddd"===t&&this._fullWeekdaysParse[n].test(e))return n;if(r&&"ddd"===t&&this._shortWeekdaysParse[n].test(e))return n;if(r&&"dd"===t&&this._minWeekdaysParse[n].test(e))return n;if(!r&&this._weekdaysParse[n].test(e))return n}},Re.weekdaysRegex=function weekdaysRegex(e){return this._weekdaysParseExact?(hasOwnProp(this,"_weekdaysRegex")||computeWeekdaysParse.call(this),e?this._weekdaysStrictRegex:this._weekdaysRegex):(hasOwnProp(this,"_weekdaysRegex")||(this._weekdaysRegex=Y),this._weekdaysStrictRegex&&e?this._weekdaysStrictRegex:this._weekdaysRegex)},Re.weekdaysShortRegex=function weekdaysShortRegex(e){return this._weekdaysParseExact?(hasOwnProp(this,"_weekdaysRegex")||computeWeekdaysParse.call(this),e?this._weekdaysShortStrictRegex:this._weekdaysShortRegex):(hasOwnProp(this,"_weekdaysShortRegex")||(this._weekdaysShortRegex=K),this._weekdaysShortStrictRegex&&e?this._weekdaysShortStrictRegex:this._weekdaysShortRegex)},Re.weekdaysMinRegex=function weekdaysMinRegex(e){return this._weekdaysParseExact?(hasOwnProp(this,"_weekdaysRegex")||computeWeekdaysParse.call(this),e?this._weekdaysMinStrictRegex:this._weekdaysMinRegex):(hasOwnProp(this,"_weekdaysMinRegex")||(this._weekdaysMinRegex=Q),this._weekdaysMinStrictRegex&&e?this._weekdaysMinStrictRegex:this._weekdaysMinRegex)},Re.isPM=function localeIsPM(e){return"p"===(e+"").toLowerCase().charAt(0)},Re.meridiem=function localeMeridiem(e,t,r){return e>11?r?"pm":"PM":r?"am":"AM"},getSetGlobalLocale("en",{dayOfMonthOrdinalParse:/\d{1,2}(th|st|nd|rd)/,ordinal:function(e){var t=e%10,r=1===toInt(e%100/10)?"th":1===t?"st":2===t?"nd":3===t?"rd":"th";return e+r}}),hooks.lang=deprecate("moment.lang is deprecated. Use moment.locale instead.",getSetGlobalLocale),hooks.langData=deprecate("moment.langData is deprecated. Use moment.localeData instead.",getLocale);var Te=Math.abs;function addSubtract$1(e,t,r,n){var i=createDuration(t,r);return e._milliseconds+=n*i._milliseconds,e._days+=n*i._days,e._months+=n*i._months,e._bubble()}function absCeil(e){return e<0?Math.floor(e):Math.ceil(e)}function daysToMonths(e){return 4800*e/146097}function monthsToDays(e){return 146097*e/4800}function makeAs(e){return function(){return this.as(e)}}var Oe=makeAs("ms"),Ie=makeAs("s"),Ne=makeAs("m"),Ae=makeAs("h"),Pe=makeAs("d"),Le=makeAs("w"),De=makeAs("M"),Me=makeAs("y");function makeGetter(e){return function(){return this.isValid()?this._data[e]:NaN}}var je=makeGetter("milliseconds"),qe=makeGetter("seconds"),Fe=makeGetter("minutes"),ze=makeGetter("hours"),Ue=makeGetter("days"),Be=makeGetter("months"),He=makeGetter("years"),$e=Math.round,Ve={ss:44,s:45,m:45,h:22,d:26,M:11},Ge=Math.abs;function sign(e){return(e>0)-(e<0)||+e}function toISOString$1(){if(!this.isValid())return this.localeData().invalidDate();var e,t,r=Ge(this._milliseconds)/1e3,n=Ge(this._days),i=Ge(this._months);e=absFloor(r/60),t=absFloor(e/60),r%=60,e%=60;var o=absFloor(i/12),s=i%=12,a=n,c=t,u=e,l=r?r.toFixed(3).replace(/\.?0+$/,""):"",p=this.asSeconds();if(!p)return"P0D";var d=p<0?"-":"",h=sign(this._months)!==sign(p)?"-":"",f=sign(this._days)!==sign(p)?"-":"",m=sign(this._milliseconds)!==sign(p)?"-":"";return d+"P"+(o?h+o+"Y":"")+(s?h+s+"M":"")+(a?f+a+"D":"")+(c||u||l?"T":"")+(c?m+c+"H":"")+(u?m+u+"M":"")+(l?m+l+"S":"")}var We=Duration.prototype;return We.isValid=function isValid$1(){return this._isValid},We.abs=function abs(){var e=this._data;return this._milliseconds=Te(this._milliseconds),this._days=Te(this._days),this._months=Te(this._months),e.milliseconds=Te(e.milliseconds),e.seconds=Te(e.seconds),e.minutes=Te(e.minutes),e.hours=Te(e.hours),e.months=Te(e.months),e.years=Te(e.years),this},We.add=function add$1(e,t){return addSubtract$1(this,e,t,1)},We.subtract=function subtract$1(e,t){return addSubtract$1(this,e,t,-1)},We.as=function as(e){if(!this.isValid())return NaN;var t,r,n=this._milliseconds;if("month"===(e=normalizeUnits(e))||"year"===e)return t=this._days+n/864e5,r=this._months+daysToMonths(t),"month"===e?r:r/12;switch(t=this._days+Math.round(monthsToDays(this._months)),e){case"week":return t/7+n/6048e5;case"day":return t+n/864e5;case"hour":return 24*t+n/36e5;case"minute":return 1440*t+n/6e4;case"second":return 86400*t+n/1e3;case"millisecond":return Math.floor(864e5*t)+n;default:throw new Error("Unknown unit "+e)}},We.asMilliseconds=Oe,We.asSeconds=Ie,We.asMinutes=Ne,We.asHours=Ae,We.asDays=Pe,We.asWeeks=Le,We.asMonths=De,We.asYears=Me,We.valueOf=function valueOf$1(){return this.isValid()?this._milliseconds+864e5*this._days+this._months%12*2592e6+31536e6*toInt(this._months/12):NaN},We._bubble=function bubble(){var e,t,r,n,i,o=this._milliseconds,s=this._days,a=this._months,c=this._data;return o>=0&&s>=0&&a>=0||o<=0&&s<=0&&a<=0||(o+=864e5*absCeil(monthsToDays(a)+s),s=0,a=0),c.milliseconds=o%1e3,e=absFloor(o/1e3),c.seconds=e%60,t=absFloor(e/60),c.minutes=t%60,r=absFloor(t/60),c.hours=r%24,s+=absFloor(r/24),i=absFloor(daysToMonths(s)),a+=i,s-=absCeil(monthsToDays(i)),n=absFloor(a/12),a%=12,c.days=s,c.months=a,c.years=n,this},We.clone=function clone$1(){return createDuration(this)},We.get=function get$2(e){return e=normalizeUnits(e),this.isValid()?this[e+"s"]():NaN},We.milliseconds=je,We.seconds=qe,We.minutes=Fe,We.hours=ze,We.days=Ue,We.weeks=function weeks(){return absFloor(this.days()/7)},We.months=Be,We.years=He,We.humanize=function humanize(e){if(!this.isValid())return this.localeData().invalidDate();var t=this.localeData(),r=function relativeTime$1(e,t,r){var n=createDuration(e).abs(),i=$e(n.as("s")),o=$e(n.as("m")),s=$e(n.as("h")),a=$e(n.as("d")),c=$e(n.as("M")),u=$e(n.as("y")),l=i<=Ve.ss&&["s",i]||i<Ve.s&&["ss",i]||o<=1&&["m"]||o<Ve.m&&["mm",o]||s<=1&&["h"]||s<Ve.h&&["hh",s]||a<=1&&["d"]||a<Ve.d&&["dd",a]||c<=1&&["M"]||c<Ve.M&&["MM",c]||u<=1&&["y"]||["yy",u];return l[2]=t,l[3]=+e>0,l[4]=r,function substituteTimeAgo(e,t,r,n,i){return i.relativeTime(t||1,!!r,e,n)}.apply(null,l)}(this,!e,t);return e&&(r=t.pastFuture(+this,r)),t.postformat(r)},We.toISOString=toISOString$1,We.toString=toISOString$1,We.toJSON=toISOString$1,We.locale=locale,We.localeData=localeData,We.toIsoString=deprecate("toIsoString() is deprecated. Please use toISOString() instead (notice the capitals)",toISOString$1),We.lang=_e,addFormatToken("X",0,0,"unix"),addFormatToken("x",0,0,"valueOf"),addRegexToken("x",x),addRegexToken("X",/[+-]?\d+(\.\d{1,3})?/),addParseToken("X",function(e,t,r){r._d=new Date(1e3*parseFloat(e,10))}),addParseToken("x",function(e,t,r){r._d=new Date(toInt(e))}),hooks.version="2.22.2",function setHookCallback(e){t=e}(createLocal),hooks.fn=ke,hooks.min=function min(){return pickBy("isBefore",[].slice.call(arguments,0))},hooks.max=function max(){return pickBy("isAfter",[].slice.call(arguments,0))},hooks.now=function(){return Date.now?Date.now():+new Date},hooks.utc=createUTC,hooks.unix=function createUnix(e){return createLocal(1e3*e)},hooks.months=function listMonths(e,t){return listMonthsImpl(e,t,"months")},hooks.isDate=isDate,hooks.locale=getSetGlobalLocale,hooks.invalid=createInvalid,hooks.duration=createDuration,hooks.isMoment=isMoment,hooks.weekdays=function listWeekdays(e,t,r){return listWeekdaysImpl(e,t,r,"weekdays")},hooks.parseZone=function createInZone(){return createLocal.apply(null,arguments).parseZone()},hooks.localeData=getLocale,hooks.isDuration=isDuration,hooks.monthsShort=function listMonthsShort(e,t){return listMonthsImpl(e,t,"monthsShort")},hooks.weekdaysMin=function listWeekdaysMin(e,t,r){return listWeekdaysImpl(e,t,r,"weekdaysMin")},hooks.defineLocale=defineLocale,hooks.updateLocale=function updateLocale(e,t){if(null!=t){var r,n,i=te;null!=(n=loadLocale(e))&&(i=n._config),t=mergeConfigs(i,t),(r=new Locale(t)).parentLocale=re[e],re[e]=r,getSetGlobalLocale(e)}else null!=re[e]&&(null!=re[e].parentLocale?re[e]=re[e].parentLocale:null!=re[e]&&delete re[e]);return re[e]},hooks.locales=function listLocales(){return o(re)},hooks.weekdaysShort=function listWeekdaysShort(e,t,r){return listWeekdaysImpl(e,t,r,"weekdaysShort")},hooks.normalizeUnits=normalizeUnits,hooks.relativeTimeRounding=function getSetRelativeTimeRounding(e){return void 0===e?$e:"function"==typeof e&&($e=e,!0)},hooks.relativeTimeThreshold=function getSetRelativeTimeThreshold(e,t){return void 0!==Ve[e]&&(void 0===t?Ve[e]:(Ve[e]=t,"s"===e&&(Ve.ss=t-1),!0))},hooks.calendarFormat=function getCalendarFormat(e,t){var r=e.diff(t,"days",!0);return r<-6?"sameElse":r<-1?"lastWeek":r<0?"lastDay":r<1?"sameDay":r<2?"nextDay":r<7?"nextWeek":"sameElse"},hooks.prototype=ke,hooks.HTML5_FMT={DATETIME_LOCAL:"YYYY-MM-DDTHH:mm",DATETIME_LOCAL_SECONDS:"YYYY-MM-DDTHH:mm:ss",DATETIME_LOCAL_MS:"YYYY-MM-DDTHH:mm:ss.SSS",DATE:"YYYY-MM-DD",TIME:"HH:mm",TIME_SECONDS:"HH:mm:ss",TIME_MS:"HH:mm:ss.SSS",WEEK:"YYYY-[W]WW",MONTH:"YYYY-MM"},hooks}()}).call(this,r(48)(e))},function(e,t,r){"use strict";var n=e.exports=function(e){return null!==e&&"object"==typeof e&&"function"==typeof e.pipe};n.writable=function(e){return n(e)&&!1!==e.writable&&"function"==typeof e._write&&"object"==typeof e._writableState},n.readable=function(e){return n(e)&&!1!==e.readable&&"function"==typeof e._read&&"object"==typeof e._readableState},n.duplex=function(e){return n.writable(e)&&n.readable(e)},n.transform=function(e){return n.duplex(e)&&"function"==typeof e._transform&&"object"==typeof e._transformState}},function(e,t,r){"use strict";var n=r(414),i=r(21),o=r(7),s=r(69);t.create=function(e){if(!(e&&e instanceof Object))throw new Error("Invalid proxy argument");if(!e.host)throw new Error("Invalid proxy host");if(!e.port)throw new Error("Invalid proxy port");if(!e.protocol)throw new Error("Invalid proxy protocol");return function handle(r,n,i){return t.setAgent(r,e),n(r,i)}},t.setAgent=function(e,t){var r=o.parse(e.url),a=s.urlIsHTTPS(r);if(t){e.strictSSL=!1;var c={proxy:t};e.key&&(c.key=e.key),e.cert&&(c.cert=e.cert);var u=s.urlIsHTTPS(t);e.agent=a?u?n.httpsOverHttps(c):n.httpsOverHttp(c):u?n.httpOverHttps(c):n.httpOverHttp(c)}else a&&(e.agent=new i.Agent(e))}},function(e,t,r){e.exports=r(964)},function(e,t,r){"use strict";var n=r(17),i=r(70).HeaderConstants;t.create=function(e){return function handle(r,n,o){var s=n(r,o);return r.headers[i.USER_AGENT]||t.tagRequest(r,e),s}},t.tagRequest=function(e,t){var r=`(${n.arch()}-${n.type()}-${n.release()})`;-1===t.indexOf(r)&&t.unshift(r);var o=`Node/${process.version}`;-1===t.indexOf(o)&&t.unshift(o);if(-1===t.indexOf("Azure-SDK-For-Node")){var s=t.indexOf("ms-rest-azure");s=s<0?t.length:s+1,t.splice(s,0,"Azure-SDK-For-Node")}e.headers[i.USER_AGENT]=t.join(" ")}},function(e,t,r){"use strict";var n=r(236);t.create=function(e){return function(t,r,i){return n.interimStream(function(n,o){n.pause(),e.signRequest(t,function(e){if(e)return n.resume(),i(e);var s=r(t,i);t.pipeInput(n,s).pipe(o),n.resume()})})}}},function(e,t,r){var n=r(15);function through(e,t,r){e=e||function(e){this.queue(e)},t=t||function(){this.queue(null)};var i=!1,o=!1,s=[],a=!1,c=new n;function drain(){for(;s.length&&!c.paused;){var e=s.shift();if(null===e)return c.emit("end");c.emit("data",e)}}return c.readable=c.writable=!0,c.paused=!1,c.autoDestroy=!(r&&!1===r.autoDestroy),c.write=function(t){return e.call(this,t),!c.paused},c.queue=c.push=function(e){return a?c:(null===e&&(a=!0),s.push(e),drain(),c)},c.on("end",function(){c.readable=!1,!c.writable&&c.autoDestroy&&process.nextTick(function(){c.destroy()})}),c.end=function(e){if(!i)return i=!0,arguments.length&&c.write(e),function _end(){c.writable=!1,t.call(c),!c.readable&&c.autoDestroy&&c.destroy()}(),c},c.destroy=function(){if(!o)return o=!0,i=!0,s.length=0,c.writable=c.readable=!1,c.emit("close"),c},c.pause=function(){if(!c.paused)return c.paused=!0,c},c.resume=function(){return c.paused&&(c.paused=!1,c.emit("resume")),drain(),c.paused||c.emit("drain"),c},c}e.exports=through,through.through=through},function(e,t,r){var n=r(15),i=["write","end","destroy"],o=["resume","pause"],s=["data","close"],a=Array.prototype.slice;function forEach(e,t){if(e.forEach)return e.forEach(t);for(var r=0;r<e.length;r++)t(e[r],r)}e.exports=function duplex(e,t){var r=new n,c=!1;return forEach(i,function proxyWriter(t){r[t]=function method(){return e[t].apply(e,arguments)}}),forEach(o,function proxyReader(e){r[e]=function method(){r.emit(e);var n=t[e];if(n)return n.apply(t,arguments);t.emit(e)}}),forEach(s,function proxyStream(e){t.on(e,function reemit(){var t=a.call(arguments);t.unshift(e),r.emit.apply(r,t)})}),t.on("end",function handleEnd(){if(!c){c=!0;var e=a.call(arguments);e.unshift("end"),r.emit.apply(r,e)}}),e.on("drain",function(){r.emit("drain")}),e.on("error",reemit),t.on("error",reemit),r.writable=e.writable,r.readable=t.readable,r;function reemit(e){r.emit("error",e)}}},function(e,t,r){"use strict";const n=r(70).HeaderConstants;t.create=function(){return function handle(e,t,r){if(e&&e.headers){let t=e.headers;if((t["Content-Type"]||t["content-type"])===n.FORM_URL_ENCODED&&e.formData){let t=e.formData;e.form=t,delete e.formData}}return t(e,function(e,t,n){return r(e,t,n)})}}},function(e,t,r){"use strict";var n=r(69);function shouldRetry(e,t){if(e<500&&408!==e||501===e||505===e)return!1;if(!t)throw new Error("retryData for the ExponentialRetryPolicyFilter cannot be null.");return(t&&t.retryCount)<this.retryCount}function updateRetryData(e,t){e||(e={retryCount:0,error:null}),t&&(e.error&&(t.innerError=e.error),e.error=t),e.retryCount++;var r=Math.pow(2,e.retryCount)-1;return r*=.8*this.retryInterval+Math.floor(Math.random()*(1.2*this.retryInterval-.8*this.retryInterval)),e.retryInterval=Math.min(this.minRetryInterval+r,this.maxRetryInterval),e}function handle(e,t){var r=this,i=null,o=function(){t&&t(e,function(e,t,s){i=r.updateRetryData(i,e.error),!n.objectIsNull(e.response)&&r.shouldRetry(e.response.statusCode,i)?setTimeout(function(){o()},i.retryInterval):(n.objectIsNull(e.error)||(e.error=i.error),s?s(e):t&&t(e))})};o()}function ExponentialRetryPolicyFilter(e,t,r,i){function newFilter(e,t,r){var i=null;return t(e,function retryCallback(o,s,a){i=newFilter.updateRetryData(i,o),!n.objectIsNull(s)&&newFilter.shouldRetry(s.statusCode,i)?setTimeout(function(){t(e,retryCallback)},i.retryInterval):(n.objectIsNull(o)||(o=i.error),r(o,s,a))})}return newFilter.retryCount=isNaN(parseInt(e))?ExponentialRetryPolicyFilter.prototype.DEFAULT_CLIENT_RETRY_COUNT:e,newFilter.retryInterval=isNaN(parseInt(t))?ExponentialRetryPolicyFilter.prototype.DEFAULT_CLIENT_RETRY_INTERVAL:t,newFilter.minRetryInterval=isNaN(parseInt(r))?ExponentialRetryPolicyFilter.prototype.DEFAULT_CLIENT_MIN_RETRY_INTERVAL:r,newFilter.maxRetryInterval=isNaN(parseInt(i))?ExponentialRetryPolicyFilter.prototype.DEFAULT_CLIENT_MAX_RETRY_INTERVAL:i,newFilter.handle=handle,newFilter.shouldRetry=shouldRetry,newFilter.updateRetryData=updateRetryData,newFilter}ExponentialRetryPolicyFilter.prototype.DEFAULT_CLIENT_RETRY_INTERVAL=3e4,ExponentialRetryPolicyFilter.prototype.DEFAULT_CLIENT_RETRY_COUNT=3,ExponentialRetryPolicyFilter.prototype.DEFAULT_CLIENT_MAX_RETRY_INTERVAL=9e4,ExponentialRetryPolicyFilter.prototype.DEFAULT_CLIENT_MIN_RETRY_INTERVAL=3e3,e.exports=ExponentialRetryPolicyFilter},function(e,t,r){"use strict";var n=r(41),i=r(69);function getRequestEssentials(e,t){let r={headers:{}};t&&(r.url=e.url);for(let t in e.headers)r.headers[t]=e.headers[t];return r.headers["x-ms-client-request-id"]=i.generateUuid(),r.headers["Content-Type"]="application/json; charset=utf-8",r}t.retryTimeout=30,t.create=function create(e){return null!=e&&(t.retryTimeout=e),function handle(e,r,o){return r(e,function(r,s,a){if(r)return o(r);let c,u;return 409===s.statusCode&&(c=t.checkRPNotRegisteredError(a))?(u=t.extractSubscriptionUrl(e.url),t.registerRP(u,c,e,(t,c)=>t?o(r,s,a):c?(e.headers["x-ms-client-request-id"]=i.generateUuid(),n(e.url,e,(e,t)=>o(e,t,t.body))):o(r,s,a))):o(r,s,a)})}},t.checkRPNotRegisteredError=function checkRPNotRegisteredError(e){let t,r;if(e){try{r=JSON.parse(e)}catch(e){}if(r&&r.error&&r.error.message&&r.error.code&&"MissingSubscriptionRegistration"===r.error.code){let e=r.error.message.match(/.*'(.*)'/i);e&&(t=e.pop())}}return t},t.extractSubscriptionUrl=function extractSubscriptionUrl(e){let t,r=e.match(/.*\/subscriptions\/[a-f0-9-]+\//gi);if(!r||!r[0])throw new Error(`Unable to extract subscriptionId from the given url - ${e}.`);return t=r[0]},t.registerRP=function registerRP(e,r,i,o){let s=`${e}providers/${r}/register?api-version=2016-02-01`,a=`${e}providers/${r}?api-version=2016-02-01`,c=getRequestEssentials(i);return n.post(s,c,(e,n)=>200!==n.statusCode?o(new Error(`Autoregistration of ${r} failed. Please try registering manually.`)):t.getRegistrationStatus(a,i,(e,t)=>o(e||null,t)))},t.getRegistrationStatus=function getRegistrationStatus(e,r,i){let o=getRequestEssentials(r);return n.get(e,o,(n,o,s)=>{if(n)return i(n);let a={};try{a=JSON.parse(s)}catch(t){return i(new Error("An error occurred while parsing the response body for "+`getting registration status ${e}. The response body was ${s}.`))}if(a.registrationState&&"Registered"===a.registrationState)return i(null,!0);setTimeout(()=>t.getRegistrationStatus(e,r,i),1e3*t.retryTimeout)})}},function(e,t,r){"use strict";e.exports=class HttpOperationResponse{constructor(e,t){this.request=e,this.response=t,this.body=null}}},function(e,t,r){"use strict";const n=r(124),i=r(8),o=r(982),s=r(167).LongRunningOperationStates,a=i.WebResource,c=r(983),u=c.name,l=c.version;function _sendLongRunningRequest(e,t){let r=this;return r.sendRequest(e,(n,o,s,a)=>{if(n)return t(n);let c=new i.HttpOperationResponse;c.request=s,c.response=a,c.body=a.body,r.getLongRunningOperationResult(c,e,(r,n)=>{if(r)return t(r);let o=null;s=n.request,a=n.response;let c=n.body;""===c&&(c=null);let u=null;try{u=JSON.parse(c),o=JSON.parse(c),null!=u&&e.deserializationMapperForTerminalResponse&&(o=i.deserialize(e.deserializationMapperForTerminalResponse,u,"result"))}catch(e){let r=new Error(`Error "${JSON.stringify(e,null,2)}" occurred in deserializing the responseBody - "${c}".`);return r.request=i.stripRequest(s),r.response=i.stripResponse(a),t(r)}return t(null,o,s,a)})})}function _checkResponseStatusCodeFailed(e){let t=e.response.statusCode,r=e.request.method;return 200!==t&&202!==t&&(201!==t||"PUT"!==r)&&(204!==t||"DELETE"!==r&&"POST"!==r)}function _getLongRunningOperationResult(e,t,r){let i=this;if(r||"function"!=typeof t||(r=t,t=null),!r)throw new Error("Missing callback");if(!e)return r(new Error("Missing resultOfInitialRequest parameter"));if(!e.response)return r(new Error("Missing resultOfInitialRequest.response"));if(!e.request)return r(new Error("Missing resultOfInitialRequest.request"));if(!e.request.method)return r(new Error("Missing resultOfInitialRequest.request.method"));let a=e.request.method;if(i._checkResponseStatusCodeFailed(e))return r(new Error("Unexpected polling status code from long running operation "+`"${e.response.statusCode}" for method "${a}"`));let c=null;try{c=new o(e,i.longRunningOperationRetryTimeout)}catch(e){r(e)}let u=e.request.url;i._options=t,n.whilst(function(){return![s.Succeeded,s.Failed,s.Canceled].some(function(e){return c.status?e.toLowerCase()===c.status.toLowerCase():e===c.status})},function(e){setTimeout(function(){if(c.azureAsyncOperationHeaderLink)i._updateStateFromAzureAsyncOperationHeader(c,!0,function(t){return e(t)});else if(c.locationHeaderLink)i._updateStateFromLocationHeader(a,c,function(t){return e(t)});else{if("PUT"!==a)return e(new Error("Location header is missing from long running operation."));i._updateStateFromGetResourceOperation(u,c,function(t){return e(t)})}},c.getTimeout())},function(e){return c.status.toLowerCase()!==s.Succeeded.toLowerCase()?r(c.getCloudError(e)):!c.azureAsyncOperationHeaderLink&&c.resource||"PUT"!==a&&"PATCH"!==a?r(null,c.getOperationResponse()):void i._updateStateFromGetResourceOperation(u,c,e=>r(e,c.getOperationResponse()))})}function _updateStateFromAzureAsyncOperationHeader(e,t,r){this._getStatus(e.azureAsyncOperationHeaderLink,(n,i)=>n?r(n):i.body&&i.body.status?(e.status=i.body.status,e.error=i.body.error,e.response=i.response,e.request=i.request,e.resource=null,t&&(e.resource=i.body),void r(null)):r(new Error("The response from long running operation does not contain a body.")))}function _updateStateFromLocationHeader(e,t,r){this._getStatus(t.locationHeaderLink,(n,i)=>{if(n)return r(n);t.updateResponse(i.response),t.request=i.request;let o=i.response.statusCode;if(202===o)t.status=s.InProgress;else{if(200!==o&&(201!==o||"PUT"!==e&&"PATCH"!==e)&&(204!==o||"DELETE"!==e&&"POST"!==e))return r(new Error("The response from long running operation does not have a valid status code."));t.status=s.Succeeded,t.error={code:t.Status,message:`Long running operation failed with status "${t.status}".`},t.resource=i.body}r(null)})}function _updateStateFromGetResourceOperation(e,t,r){this._getStatus(e,function(e,n){return e?r(e):n.body?(n.body.properties&&n.body.properties.provisioningState?t.status=n.body.properties.provisioningState:t.status=s.Succeeded,t.error={code:t.status,message:`Long running operation failed with status "${t.status}".`},t.updateResponse(n.response),t.request=n.request,t.resource=n.body,void r(null)):r(new Error("The response from long running operation does not contain a body."))})}function _getStatus(e,t){let r=this;if(!e)return t(new Error("operationUrl cannot be null."));let n=e.replace(" ","%20"),o=new a;if(o.method="GET",o.headers={},o.url=n,r._options)for(let e in r._options.customHeaders)r._options.customHeaders.hasOwnProperty(e)&&(o.headers[e]=r._options.customHeaders[e]);return r.pipeline(o,function(e,r,n){if(e)return t(e);let s=r.statusCode;if(200!==s&&201!==s&&202!==s&&204!==s){let e=new Error(`Invalid status code with response body "${n}" occurred `+"when polling for operation status.");e.statusCode=r.statusCode,e.request=i.stripRequest(o),e.response=i.stripResponse(r),""===n&&(n=null);try{e.body=JSON.parse(n)}catch(t){e.message+=` Could not deserialize error response body - "${n}".`,e.body=n}return t(e)}let a=new i.HttpOperationResponse;if(a.request=o,a.response=r,""===n&&(n=null),200===s||201===s||202===s)try{a.body=JSON.parse(n)}catch(e){let s=new Error(`Error "${e}" occurred in deserializing the response body - "${n}" -`+" when polling for operation status.");return s.request=i.stripRequest(o),s.response=i.stripResponse(r),s.body=n,t(s)}return t(null,a)})}e.exports=class AzureServiceClient extends i.ServiceClient{constructor(e,t){if(!e)throw new Error("Azure clients require credentials.");t||(t={}),super(e,t),this.acceptLanguage="en-US",this.generateClientRequestId=!0,this.longRunningOperationRetryTimeout=30,null!==t.acceptLanguage&&void 0!==t.acceptLanguage&&(this.acceptLanguage=t.acceptLanguage),null!==t.generateClientRequestId&&void 0!==t.generateClientRequestId&&(this.generateClientRequestId=t.generateClientRequestId),null!==t.longRunningOperationRetryTimeout&&void 0!==t.longRunningOperationRetryTimeout&&(this.longRunningOperationRetryTimeout=t.longRunningOperationRetryTimeout),this.addUserAgentInfo(`${u}/${l}`),this._getLongRunningOperationResult=_getLongRunningOperationResult,this._sendLongRunningRequest=_sendLongRunningRequest,this._checkResponseStatusCodeFailed=_checkResponseStatusCodeFailed,this._getStatus=_getStatus,this._updateStateFromGetResourceOperation=_updateStateFromGetResourceOperation,this._updateStateFromLocationHeader=_updateStateFromLocationHeader,this._updateStateFromAzureAsyncOperationHeader=_updateStateFromAzureAsyncOperationHeader}getPutOrPatchOperationResult(e,t,r){return this.getLongRunningOperationResult(e,t,r)}getPostOrDeleteOperationResult(e,t,r){return this.getLongRunningOperationResult(e,t,r)}getLongRunningOperationResult(e,t,r){let n=this;return r||"function"!=typeof t||(r=t,t=null),r?n._getLongRunningOperationResult(e,t,r):new Promise((r,i)=>{n._getLongRunningOperationResult(e,t,(e,t)=>{e?i(e):r(t)})})}sendLongRunningRequest(e,t){let r=this;return t||"function"!=typeof e||(t=e,e={}),t?r._sendLongRunningRequest(e,t):new Promise((t,n)=>{r._sendLongRunningRequest(e,(e,r)=>{e?n(e):t(r)})})}sendLongRunningRequestWithHttpOperationResponse(e){let t=this;return new Promise((r,n)=>{t._sendLongRunningRequest(e,(e,t,o,s)=>{let a=new i.HttpOperationResponse(o,s);a.body=t,e?n(e):r(a)})})}}},function(e,t,r){"use strict";const n=r(71),i=r(72).HttpConstants.HttpVerbs,o=r(101);e.exports=class WebResource{constructor(){this.rawResponse=!1,this.queryString={},this.url=null,this.method=null,this.headers={},this.body=null}pipeInput(e,t){return function isMethodWithBody(e){return e===i.PUT||e===i.POST||e===i.MERGE}(this.method)&&!this.hasOwnProperty("body")&&e.pipe(t),t}validateRequestProperties(){if(!(this.method&&this.url&&this.headers["Content-Type"]&&this.headers["accept-language"]))throw new Error("method, url, headers['Content-Type'], headers['accept-language'] are required properties before making a request. Either provide them or use WebResource.prepare() method.")}prepare(e){if(null==e||"object"!=typeof e)throw new Error("options cannot be null or undefined and must be of type object");if(null===e.method||void 0===e.method||"string"!=typeof e.method.valueOf())throw new Error("options.method cannot be null or undefined and it must be of type string.");if(e.url&&e.pathTemplate)throw new Error("options.url and options.pathTemplate are mutually exclusive. Please provide either of them.");if(!(null!==e.pathTemplate&&void 0!==e.pathTemplate&&"string"==typeof e.pathTemplate.valueOf()||null!==e.url&&void 0!==e.url&&"string"==typeof e.url.valueOf()))throw new Error("Please provide either options.pathTemplate or options.url. Currently none of them were provided.");if(e.url){if("string"!=typeof e.url)throw new Error("options.url must be of type 'string'.");this.url=e.url}if(e.method){let t=["GET","PUT","HEAD","DELETE","OPTIONS","POST","PATCH","TRACE"];if(-1===t.indexOf(e.method.toUpperCase()))throw new Error("The provided method '"+e.method+"' is invalid. Supported HTTP methods are: "+JSON.stringify(t))}if(this.method=e.method.toUpperCase(),e.pathTemplate){if("string"!=typeof e.pathTemplate)throw new Error("options.pathTemplate must be of type 'string'.");e.baseUrl||(e.baseUrl="https://management.azure.com");let t=e.baseUrl,r=t+(t.endsWith("/")?"":"/")+(e.pathTemplate.startsWith("/")?e.pathTemplate.slice(1):e.pathTemplate),n=r.match(/({\w*\s*\w*})/gi);if(n&&n.length){if(null===e.pathParameters||void 0===e.pathParameters||"object"!=typeof e.pathParameters)throw new Error(`pathTemplate: ${e.pathTemplate} has been provided. Hence, options.pathParameters `+'cannot be null or undefined and must be of type "object".');n.forEach(function(t){let n=t.slice(1,-1),i=e.pathParameters[n];if(null==i||"string"!=typeof i&&"object"!=typeof i)throw new Error(`pathTemplate: ${e.pathTemplate} contains the path parameter ${n}`+` however, it is not present in ${e.pathParameters} - ${JSON.stringify(e.pathParameters,null,2)}.`+`The value of the path parameter can either be a "string" of the form { ${n}: "some sample value" } or `+`it can be an "object" of the form { "${n}": { value: "some sample value", skipUrlEncoding: true } }.`);if("string"==typeof i.valueOf()&&(r=r.replace(t,encodeURIComponent(i))),"object"==typeof i.valueOf()){if(!i.value)throw new Error(`options.pathParameters[${n}] is of type "object" but it does not contain a "value" property.`);r=i.skipUrlEncoding?r.replace(t,i.value):r.replace(t,encodeURIComponent(i.value))}})}this.url=r}if(e.queryParameters){if("object"!=typeof e.queryParameters)throw new Error('options.queryParameters must be of type object. It should be a JSON object of "query-parameter-name" as the key and the "query-parameter-value" as the value. The "query-parameter-value" may be fo type "string" or an "object" of the form { value: "query-parameter-value", skipUrlEncoding: true }.');this.url&&-1===this.url.indexOf("?")&&(this.url+="?");let t=[],r=e.queryParameters;this.query={};for(let e in r){let n=r[e];if(n)if("string"==typeof n)t.push(e+"="+encodeURIComponent(n)),this.query[e]=encodeURIComponent(n);else if("object"==typeof n){if(!n.value)throw new Error(`options.queryParameters[${e}] is of type "object" but it does not contain a "value" property.`);n.skipUrlEncoding?(t.push(e+"="+n.value),this.query[e]=n.value):(t.push(e+"="+encodeURIComponent(n.value)),this.query[e]=encodeURIComponent(n.value))}}this.url+=t.join("&")}if(e.formData&&(e.headers&&"application/x-www-form-urlencoded"===e.headers["Content-Type"]?(this.form=e.formData,this.headers["Content-Type"]="application/x-www-form-urlencoded"):(this.formData=e.formData,this.headers["Content-Type"]="multipart/form-data")),e.headers){let t=e.headers;for(let e in t)t.hasOwnProperty(e)&&(this.headers[e]=t[e])}if(this.headers["accept-language"]||(this.headers["accept-language"]="en-US"),this.headers["x-ms-client-request-id"]||e.disableClientRequestId||(this.headers["x-ms-client-request-id"]=n.generateUuid()),this.headers["Content-Type"]||(this.headers["Content-Type"]="application/json; charset=utf-8"),this.body=null,null!==e.body&&void 0!==e.body)if(e.bodyIsStream)this.body=e.body,this.headers["Transfer-Encoding"]||(this.headers["Transfer-Encoding"]="chunked"),"application/octet-stream"!==this.headers["Content-Type"]&&(this.headers["Content-Type"]="application/octet-stream");else{let t=null;e.serializationMapper&&(t=o.serialize(e.serializationMapper,e.body,"requestBody")),e.disableJsonStringifyOnBody?this.body=t||e.body:this.body=t?JSON.stringify(t):JSON.stringify(e.body)}return this}}},function(e,t,r){"use strict";var n=r(414),i=r(21),o=r(7),s=r(71);t.create=function(e){if(!(e&&e instanceof Object))throw new Error("Invalid proxy argument");if(!e.host)throw new Error("Invalid proxy host");if(!e.port)throw new Error("Invalid proxy port");if(!e.protocol)throw new Error("Invalid proxy protocol");return function handle(r,n,i){return t.setAgent(r,e),n(r,i)}},t.setAgent=function(e,t){var r=o.parse(e.url),a=s.urlIsHTTPS(r);if(t){e.strictSSL=!1;var c={proxy:t};e.key&&(c.key=e.key),e.cert&&(c.cert=e.cert);var u=s.urlIsHTTPS(t);e.agent=a?u?n.httpsOverHttps(c):n.httpsOverHttp(c):u?n.httpOverHttps(c):n.httpOverHttp(c)}else a&&(e.agent=new i.Agent(e))}},function(e,t,r){"use strict";var n=r(17),i=r(72).HeaderConstants;t.create=function(e){return function handle(r,n,o){var s=n(r,o);return r.headers[i.USER_AGENT]||t.tagRequest(r,e),s}},t.tagRequest=function(e,t){var r=`(${n.arch()}-${n.type()}-${n.release()})`;-1===t.indexOf(r)&&t.unshift(r);var o=`Node/${process.version}`;-1===t.indexOf(o)&&t.unshift(o);if(-1===t.indexOf("Azure-SDK-For-Node")){var s=t.indexOf("ms-rest-azure");s=s<0?t.length:s+1,t.splice(s,0,"Azure-SDK-For-Node")}e.headers[i.USER_AGENT]=t.join(" ")}},function(e,t,r){"use strict";var n=r(237);t.create=function(e){return function(t,r,i){return n.interimStream(function(n,o){n.pause(),e.signRequest(t,function(e){if(e)return n.resume(),i(e);var s=r(t,i);t.pipeInput(n,s).pipe(o),n.resume()})})}}},function(e,t,r){"use strict";const n=r(72).HeaderConstants;t.create=function(){return function handle(e,t,r){if(e&&e.headers){let t=e.headers;if((t["Content-Type"]||t["content-type"])===n.FORM_URL_ENCODED&&e.formData){let t=e.formData;e.form=t,delete e.formData}}return t(e,function(e,t,n){return r(e,t,n)})}}},function(e,t,r){"use strict";var n=r(71);function shouldRetry(e,t){if(e<500&&408!==e||501===e||505===e)return!1;if(!t)throw new Error("retryData for the ExponentialRetryPolicyFilter cannot be null.");return(t&&t.retryCount)<this.retryCount}function updateRetryData(e,t){e||(e={retryCount:0,error:null}),t&&(e.error&&(t.innerError=e.error),e.error=t),e.retryCount++;var r=Math.pow(2,e.retryCount)-1;return r*=.8*this.retryInterval+Math.floor(Math.random()*(1.2*this.retryInterval-.8*this.retryInterval)),e.retryInterval=Math.min(this.minRetryInterval+r,this.maxRetryInterval),e}function handle(e,t){var r=this,i=null,o=function(){t&&t(e,function(e,t,s){i=r.updateRetryData(i,e.error),!n.objectIsNull(e.response)&&r.shouldRetry(e.response.statusCode,i)?setTimeout(function(){o()},i.retryInterval):(n.objectIsNull(e.error)||(e.error=i.error),s?s(e):t&&t(e))})};o()}function ExponentialRetryPolicyFilter(e,t,r,i){function newFilter(e,t,r){var i=null;return t(e,function retryCallback(o,s,a){i=newFilter.updateRetryData(i,o),!n.objectIsNull(s)&&newFilter.shouldRetry(s.statusCode,i)?setTimeout(function(){t(e,retryCallback)},i.retryInterval):(n.objectIsNull(o)||(o=i.error),r(o,s,a))})}return newFilter.retryCount=isNaN(parseInt(e))?ExponentialRetryPolicyFilter.prototype.DEFAULT_CLIENT_RETRY_COUNT:e,newFilter.retryInterval=isNaN(parseInt(t))?ExponentialRetryPolicyFilter.prototype.DEFAULT_CLIENT_RETRY_INTERVAL:t,newFilter.minRetryInterval=isNaN(parseInt(r))?ExponentialRetryPolicyFilter.prototype.DEFAULT_CLIENT_MIN_RETRY_INTERVAL:r,newFilter.maxRetryInterval=isNaN(parseInt(i))?ExponentialRetryPolicyFilter.prototype.DEFAULT_CLIENT_MAX_RETRY_INTERVAL:i,newFilter.handle=handle,newFilter.shouldRetry=shouldRetry,newFilter.updateRetryData=updateRetryData,newFilter}ExponentialRetryPolicyFilter.prototype.DEFAULT_CLIENT_RETRY_INTERVAL=3e4,ExponentialRetryPolicyFilter.prototype.DEFAULT_CLIENT_RETRY_COUNT=3,ExponentialRetryPolicyFilter.prototype.DEFAULT_CLIENT_MAX_RETRY_INTERVAL=9e4,ExponentialRetryPolicyFilter.prototype.DEFAULT_CLIENT_MIN_RETRY_INTERVAL=3e3,e.exports=ExponentialRetryPolicyFilter},function(e,t,r){"use strict";var n=r(41),i=r(71);function getRequestEssentials(e,t){let r={headers:{}};t&&(r.url=e.url);for(let t in e.headers)r.headers[t]=e.headers[t];return r.headers["x-ms-client-request-id"]=i.generateUuid(),r.headers["Content-Type"]="application/json; charset=utf-8",r}t.retryTimeout=30,t.create=function create(e){return null!=e&&(t.retryTimeout=e),function handle(e,r,o){return r(e,function(r,s,a){if(r)return o(r);let c,u;return 409===s.statusCode&&(c=t.checkRPNotRegisteredError(a))?(u=t.extractSubscriptionUrl(e.url),t.registerRP(u,c,e,(t,c)=>t?o(r,s,a):c?(e.headers["x-ms-client-request-id"]=i.generateUuid(),n(e.url,e,(e,t)=>o(e,t,t.body))):o(r,s,a))):o(r,s,a)})}},t.checkRPNotRegisteredError=function checkRPNotRegisteredError(e){let t,r;if(e){try{r=JSON.parse(e)}catch(e){}if(r&&r.error&&r.error.message&&r.error.code&&"MissingSubscriptionRegistration"===r.error.code){let e=r.error.message.match(/.*'(.*)'/i);e&&(t=e.pop())}}return t},t.extractSubscriptionUrl=function extractSubscriptionUrl(e){let t,r=e.match(/.*\/subscriptions\/[a-f0-9-]+\//gi);if(!r||!r[0])throw new Error(`Unable to extract subscriptionId from the given url - ${e}.`);return t=r[0]},t.registerRP=function registerRP(e,r,i,o){let s=`${e}providers/${r}/register?api-version=2016-02-01`,a=`${e}providers/${r}?api-version=2016-02-01`,c=getRequestEssentials(i);return n.post(s,c,(e,n)=>200!==n.statusCode?o(new Error(`Autoregistration of ${r} failed. Please try registering manually.`)):t.getRegistrationStatus(a,i,(e,t)=>o(e||null,t)))},t.getRegistrationStatus=function getRegistrationStatus(e,r,i){let o=getRequestEssentials(r);return n.get(e,o,(n,o,s)=>{if(n)return i(n);let a={};try{a=JSON.parse(s)}catch(t){return i(new Error("An error occurred while parsing the response body for "+`getting registration status ${e}. The response body was ${s}.`))}if(a.registrationState&&"Registered"===a.registrationState)return i(null,!0);setTimeout(()=>t.getRegistrationStatus(e,r,i),1e3*t.retryTimeout)})}},function(e,t,r){"use strict";e.exports=class HttpOperationResponse{constructor(e,t){this.request=e,this.response=t,this.body=null}}},function(e,t,r){"use strict";e.exports=class BaseResource{constructor(){}mapper(){return{required:!1,serializedName:"BaseResource",type:{name:"Composite",className:"BaseResource",modelProperties:{}}}}serialize(){return{}}deserialize(e){return e}}},function(e,t,r){"use strict";class CloudError extends Error{constructor(e){if(super(),this.name=this.constructor.name,e){if(e.code&&(this.code=e.code),e.message&&(this.message=e.message),e.target&&(this.target=e.target),e.details){var t=[];e.details.forEach(function(e){e&&(e=new CloudError(e)),t.push(e)}),this.details=t}e.innererror&&(this.innererror=JSON.parse(JSON.stringify(e.innererror))),e.additionalInfo&&(this.additionalInfo=e.additionalInfo)}}mapper(){return{required:!1,serializedName:"CloudError",type:{name:"Composite",className:"CloudError",modelProperties:{code:{required:!1,serializedName:"code",type:{name:"String"}},message:{required:!1,serializedName:"message",type:{name:"String"}},target:{required:!1,serializedName:"target",type:{name:"String"}},details:{required:!1,serializedName:"details",type:{name:"Sequence",element:{required:!1,serializedName:"CloudErrorElementType",type:{name:"Composite",className:"CloudError"}}}},innererror:{required:!1,serializedName:"innererror",type:{name:"Object"}},additionalInfo:{required:!1,serializedName:"additionalInfo",type:{name:"Sequence",element:{required:!1,serializedName:"AdditionalInfoElementType",type:{name:"Composite",className:"AdditionalInfoElement",modelProperties:{type:{required:!0,serializedName:"type",type:{name:"String"}},info:{required:!1,serializedName:"info",type:{name:"Object"}}}}}}}}}}}serialize(){var e={error:{}};if(this.code&&(e.error.code=this.code),this.message&&(e.error.message=this.message),this.target&&(e.error.target=this.target),this.details){var t=[];this.details.forEach(function(e){e&&(e=this.serialize(e)),t.push(e)}),e.error.details=t}return this.innererror&&(e.error.innererror=JSON.parse(JSON.stringify(this.innererror))),this.additionalInfo&&(e.error.additionalInfo=JSON.parse(JSON.stringify(this.additionalInfo))),e}deserialize(e){if(e&&e.error){if(e.error.code&&(this.code=e.error.code),e.error.message&&(this.message=e.error.message),e.error.target&&(this.target=e.error.target),e.error.details){var t=[];e.error.details.forEach(function(e){e&&(e=this.deserialize(e)),t.push(e)}),this.details=t}e.error.innererror&&(this.innererror=JSON.parse(JSON.stringify(e.error.innererror))),e.error.additionalInfo&&(this.additionalInfo=JSON.parse(JSON.stringify(e.error.additionalInfo)))}return this}}e.exports=CloudError},function(e,t,r){"use strict";e.exports=class LocationListResult extends Array{constructor(){super()}mapper(){return{required:!1,serializedName:"LocationListResult",type:{name:"Composite",className:"LocationListResult",modelProperties:{value:{required:!1,serializedName:"",type:{name:"Sequence",element:{required:!1,serializedName:"LocationElementType",type:{name:"Composite",className:"Location"}}}}}}}}}},function(e,t,r){"use strict";e.exports=class SubscriptionListResult extends Array{constructor(){super()}mapper(){return{required:!1,serializedName:"SubscriptionListResult",type:{name:"Composite",className:"SubscriptionListResult",modelProperties:{value:{required:!1,serializedName:"",type:{name:"Sequence",element:{required:!1,serializedName:"SubscriptionElementType",type:{name:"Composite",className:"Subscription"}}}},nextLink:{required:!0,serializedName:"nextLink",type:{name:"String"}}}}}}}},function(e,t,r){"use strict";e.exports=class TenantListResult extends Array{constructor(){super()}mapper(){return{required:!1,serializedName:"TenantListResult",type:{name:"Composite",className:"TenantListResult",modelProperties:{value:{required:!1,serializedName:"",type:{name:"Sequence",element:{required:!1,serializedName:"TenantIdDescriptionElementType",type:{name:"Composite",className:"TenantIdDescription"}}}},nextLink:{required:!0,serializedName:"nextLink",type:{name:"String"}}}}}}}},function(e,t,r){"use strict";var n=this&&this.__awaiter||function(e,t,r,n){return new(r||(r=Promise))(function(i,o){function fulfilled(e){try{step(n.next(e))}catch(e){o(e)}}function rejected(e){try{step(n.throw(e))}catch(e){o(e)}}function step(e){e.done?i(e.value):new r(function(t){t(e.value)}).then(fulfilled,rejected)}step((n=n.apply(e,t||[])).next())})};Object.defineProperty(t,"__esModule",{value:!0});const i=r(16),o=r(18),s=r(379),a=r(1036);t.DeviceNode=class DeviceNode{constructor(e){this.deviceItem=e,this.deviceId=e.deviceId,this.connectionString=e.connectionString}getTreeItem(){return this.deviceItem}getChildren(e,t){return n(this,void 0,void 0,function*(){let e=[];return e.push(new a.ModuleLabelNode(this)),"device"===this.deviceItem.contextValue&&t.toLowerCase().indexOf("azure-devices.cn;")<0&&e.push(new s.DistributedTracingLabelNode(this)),o.TelemetryClient.sendEvent(i.Constants.IoTHubAILoadLabelInDeviceTreeDoneEvent,{Result:"Success"}),e})}}},function(e,t,r){"use strict";var n=r(88),i=r(439).Mqtt,o=r(1144).MqttWs;e.exports={Mqtt:i,MqttWs:o,clientFromConnectionString:function(e){return n.Client.fromConnectionString(e,i)}}},function(e,t,r){"use strict";var n,i=this&&this.__extends||(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])},function(e,t){function __(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(__.prototype=t.prototype,new __)});Object.defineProperty(t,"__esModule",{value:!0});var o=r(52),s=r(7),a=r(78),c=r(4),u=r(88),l=r(5),p=r(1),d=r(440)("azure-iot-device-mqtt:Mqtt"),h=r(442),f=r(1143),m="$iothub/%s/res/%d/?$rid=%s",g=function(e){function Mqtt(t,r){var n=e.call(this)||this;return n._authenticationProvider=t,n._authenticationProvider.type===c.AuthenticationType.Token&&n._authenticationProvider.on("newTokenAvailable",function(e){n._fsm.handle("updateSharedAccessSignature",e.sharedAccessSignature,function(e){e&&n.emit("disconnect",e)})}),n._mqtt=r||new h.MqttBase,n._mqtt.on("error",function(e){d("on close"),n._fsm.handle("disconnect",function(){n.emit("disconnect",e)})}),n._mqtt.on("message",n._dispatchMqttMessage.bind(n)),n._twinClient=new f.MqttTwinClient(n._mqtt),n._twinClient.on("twinDesiredPropertiesUpdate",function(e){return n.emit("twinDesiredPropertiesUpdate",e)}),n._fsm=new a.Fsm({initialState:"disconnected",states:{disconnected:{_onEnter:function(e,t,r){n._authenticationProvider.type===c.AuthenticationType.Token&&n._authenticationProvider.stop(),e?t?e(h.translateError(t)):e(void 0,r):n.emit("disconnect",t)},disconnect:function(e){return e(null,new c.results.Disconnected)},connect:function(e){n._fsm.transition("connecting",e)},sendEvent:function(e,t,r){n._fsm.handle("connect",function(i){i?r(h.translateError(i)):n._fsm.handle("sendEvent",e,t,r)})},updateSharedAccessSignature:function(e,t){t(null,new c.results.SharedAccessSignatureUpdated(!1))},sendMethodResponse:function(e,t){t(new c.errors.NotConnectedError("device disconnected: the service already considers the method has failed"))},getTwin:function(e){n._fsm.handle("connect",function(t){t?e(t):n._fsm.handle("getTwin",e)})},updateTwinReportedProperties:function(e,t){n._fsm.handle("connect",function(r){r?t(r):n._fsm.handle("updateTwinReportedProperties",e,t)})},enableC2D:function(e){n._fsm.handle("connect",function(t){t?e(t):n._fsm.handle("enableC2D",e)})},enableMethods:function(e){n._fsm.handle("connect",function(t){t?e(t):n._fsm.handle("enableMethods",e)})},enableInputMessages:function(e){n._fsm.handle("connect",function(t){t?e(t):n._fsm.handle("enableInputMessages",e)})},disableC2D:function(e){e()},disableMethods:function(e){e()},enableTwinDesiredPropertiesUpdates:function(e){n._fsm.handle("connect",function(t){t?e(t):n._fsm.handle("enableTwinDesiredPropertiesUpdates",e)})},disableTwinDesiredPropertiesUpdates:function(e){return e()},disableInputMessages:function(e){e()}},connecting:{_onEnter:function(e){n._authenticationProvider.getDeviceCredentials(function(t,r){t?n._fsm.transition("disconnected",e,t):(n._configureEndpoints(r),n._ensureAgentString(function(){var t=n._getBaseTransportConfig(r);n._mqtt.connect(t,function(t,r){d("connect"),t?n._fsm.transition("disconnected",e,t):n._fsm.transition("connected",e,r)})}))})},disconnect:function(e){n._fsm.transition("disconnecting",e)},"*":function(){return n._fsm.deferUntilTransition()}},connected:{_onEnter:function(e,t){e&&e(null,new c.results.Connected(t))},connect:function(e){return e(null,new c.results.Connected)},disconnect:function(e){n._fsm.transition("disconnecting",e)},sendEvent:function(e,t,r){var i=n._getEventTopicFromMessage(e,t);t&&(i+="/"),n._mqtt.publish(i,e.data,{qos:1,retain:!1},function(e,t){e?r(h.translateError(e)):r(null,new c.results.MessageEnqueued(t))})},updateSharedAccessSignature:function(e,t){n._mqtt.updateSharedAccessSignature(e,function(e){e?n._fsm.transition("disconnected",t,e):t(null,new c.results.SharedAccessSignatureUpdated(!1))})},sendMethodResponse:function(e,t){var r=p.format(m,"methods",e.status,e.requestId);d("sending response using topic: "+r),d(JSON.stringify(e.payload)),n._mqtt.publish(r,JSON.stringify(e.payload),{qos:0,retain:!1},function(e){t(e?h.translateError(e):null)})},enableC2D:function(e){n._setupSubscription(n._topics.message,1,e)},enableMethods:function(e){n._setupSubscription(n._topics.method,0,e)},enableInputMessages:function(e){n._setupSubscription(n._topics.inputMessage,1,e)},disableC2D:function(e){n._removeSubscription(n._topics.message,e)},disableMethods:function(e){n._removeSubscription(n._topics.method,e)},getTwin:function(e){return n._twinClient.getTwin(e)},updateTwinReportedProperties:function(e,t){return n._twinClient.updateTwinReportedProperties(e,t)},enableTwinDesiredPropertiesUpdates:function(e){return n._twinClient.enableTwinDesiredPropertiesUpdates(e)},disableTwinDesiredPropertiesUpdates:function(e){return n._twinClient.disableTwinDesiredPropertiesUpdates(e)},disableInputMessages:function(e){n._removeSubscription(n._topics.inputMessage,e)}},disconnecting:{_onEnter:function(e,t){n._mqtt.disconnect(function(t,r){n._fsm.transition("disconnected",e,t,new c.results.Disconnected(r))})},"*":function(){return n._fsm.deferUntilTransition()}}}}),n._fsm.on("transition",function(e){d(e.fromState+" -> "+e.toState+" ("+e.action+")")}),n}return i(Mqtt,e),Mqtt.prototype.connect=function(e){this._fsm.handle("connect",e)},Mqtt.prototype.disconnect=function(e){this._fsm.handle("disconnect",e)},Mqtt.prototype.sendEvent=function(e,t){d("sendEvent "+JSON.stringify(e)),this._fsm.handle("sendEvent",e,void 0,function(e,r){e?(d("send error: "+e.toString()),t(e)):(d("PUBACK: "+JSON.stringify(r)),t(null,new c.results.MessageEnqueued(r)))})},Mqtt.prototype.sendEventBatch=function(e,t){throw new c.errors.NotImplementedError("MQTT Transport does not support batching yet")},Mqtt.prototype.complete=function(e,t){t(null,new c.results.MessageCompleted)},Mqtt.prototype.reject=function(){throw new c.errors.NotImplementedError("the MQTT transport does not support rejecting messages.")},Mqtt.prototype.abandon=function(){throw new c.errors.NotImplementedError("The MQTT transport does not support abandoning messages.")},Mqtt.prototype.updateSharedAccessSignature=function(e,t){d("updateSharedAccessSignature"),this._authenticationProvider.updateSharedAccessSignature(e),this._fsm.handle("updateSharedAccessSignature",e,function(e,r){t(e,r)})},Mqtt.prototype.setOptions=function(e,t){var r=this;if(!e)throw new ReferenceError("The options parameter can not be '"+e+"'");if(this._authenticationProvider.type===c.AuthenticationType.Token&&e.cert)throw new c.errors.ArgumentError("Cannot set x509 options on a device that uses token authentication.");this._mqtt.setOptions(e),e.cert?this._authenticationProvider.getDeviceCredentials(function(n,i){n?t&&t(n):(r._authenticationProvider.setX509Options(e),t&&t(null))}):t&&t(null)},Mqtt.prototype.sendMethodResponse=function(e,t){if(!e)throw new Error("Parameter 'response' is falsy");if(!e.requestId)throw new Error("Parameter 'response.requestId' is falsy");if("string"!=typeof e.requestId)throw new Error("Parameter 'response.requestId' is not a string.");if(!e.status)throw new Error("Parameter 'response.status' is falsy");if("number"!=typeof e.status)throw new Error("Parameter 'response.status' is not a number");this._fsm.handle("sendMethodResponse",e,t)},Mqtt.prototype.onDeviceMethod=function(e,t){this.on("method_"+e,t)},Mqtt.prototype.enableC2D=function(e){this._fsm.handle("enableC2D",e)},Mqtt.prototype.disableC2D=function(e){this._fsm.handle("disableC2D",e)},Mqtt.prototype.enableInputMessages=function(e){this._fsm.handle("enableInputMessages",e)},Mqtt.prototype.disableInputMessages=function(e){this._fsm.handle("disableInputMessages",e)},Mqtt.prototype.enableMethods=function(e){this._fsm.handle("enableMethods",e)},Mqtt.prototype.disableMethods=function(e){this._fsm.handle("disableMethods",e)},Mqtt.prototype.getTwin=function(e){this._fsm.handle("getTwin",e)},Mqtt.prototype.updateTwinReportedProperties=function(e,t){this._fsm.handle("updateTwinReportedProperties",e,t)},Mqtt.prototype.enableTwinDesiredPropertiesUpdates=function(e){this._fsm.handle("enableTwinDesiredPropertiesUpdates",e)},Mqtt.prototype.disableTwinDesiredPropertiesUpdates=function(e){this._fsm.handle("disableTwinDesiredPropertiesUpdates",e)},Mqtt.prototype.sendOutputEvent=function(e,t,r){d("sendOutputEvent "+JSON.stringify(t)),this._fsm.handle("sendEvent",t,{"$.on":e},function(e,t){e?(d("send error: "+e.toString()),r(e)):(d("PUBACK: "+JSON.stringify(t)),r(null,new c.results.MessageEnqueued(t)))})},Mqtt.prototype.sendOutputEventBatch=function(e,t,r){throw new c.errors.NotImplementedError("MQTT Transport does not support batching yet")},Mqtt.prototype._getBaseTransportConfig=function(e){var t;return t=e.moduleId?e.deviceId+"/"+e.moduleId:e.deviceId,{uri:"mqtts://"+(e.gatewayHostName||e.host),username:e.host+"/"+t+"/"+c.endpoint.versionQueryString()+"&DeviceClientType="+encodeURIComponent(this._userAgentString),clientId:t,sharedAccessSignature:e.sharedAccessSignature,x509:e.x509}},Mqtt.prototype._configureEndpoints=function(e){e.moduleId?this._topicTelemetryPublish=c.endpoint.moduleEventPath(e.deviceId,e.moduleId).substring(1)+"/":this._topicTelemetryPublish=c.endpoint.deviceEventPath(e.deviceId).substring(1)+"/",d("topic publish: "+this._topicTelemetryPublish),this._topics={},this._topics.method={name:"$iothub/methods/POST/#",subscribeInProgress:!1,subscribed:!1,topicMatchRegex:/^\$iothub\/methods\/POST\/.*$/g,handler:this._onDeviceMethod.bind(this)},e.moduleId?(this._topics.inputMessage={name:c.endpoint.moduleInputMessagePath(e.deviceId,e.moduleId).substring(1)+"/#",subscribeInProgress:!1,subscribed:!1,topicMatchRegex:/^devices\/.*\/modules\/.*\/inputs\/.*\/.*$/g,handler:this._onInputMessage.bind(this)},d("inputMessage topic subscribe: "+this._topics.inputMessage.name)):(this._topics.message={name:c.endpoint.deviceMessagePath(e.deviceId).substring(1)+"/#",subscribeInProgress:!1,subscribed:!1,topicMatchRegex:/^devices\/.*\/messages\/devicebound\/.*$/g,handler:this._onC2DMessage.bind(this)},d("message topic subscribe: "+this._topics.message.name))},Mqtt.prototype._setupSubscription=function(e,t,r){d("subscribe: "+JSON.stringify(e)),e.subscribeInProgress=!0,this._mqtt.subscribe(e.name,{qos:t},function(t){e.subscribeInProgress=!1,e.subscribed=!0,r(t)})},Mqtt.prototype._removeSubscription=function(e,t){d("unsubscribe "+JSON.stringify(e)),this._mqtt.unsubscribe(e.name,function(r){e.subscribed=!r,t(r)})},Mqtt.prototype._dispatchMqttMessage=function(e,t){var r=this;d("message received on "+e),d(JSON.stringify(t?t.toString():null));var n=null;Object.keys(this._topics).some(function(t){var i=r._topics[t];return i.topicMatchRegex.lastIndex=0,i.topicMatchRegex.test(e)&&(n=i),null!==n}),n&&n.handler(e,t)},Mqtt.prototype._onC2DMessage=function(e,t){var r=new c.Message(t),n=e.split("/");n[4]&&this._extractPropertiesFromTopicPart(n[4],r),this.emit("message",r)},Mqtt.prototype._extractPropertiesFromTopicPart=function(e,t){for(var r=e.split("&"),n=0;n<r.length;n++){var i=r[n].split("="),o=decodeURIComponent(i[0]),s=decodeURIComponent(i[1]);switch(o){case"$.mid":t.messageId=s;break;case"$.to":t.to=s;break;case"$.exp":t.expiryTimeUtc=s;break;case"$.cid":t.correlationId=s;break;case"$.uid":t.userId=s;break;case"$.ct":t.contentType=s;break;case"$.ce":t.contentEncoding=s;break;default:t.properties.add(o,s)}}},Mqtt.prototype._onInputMessage=function(e,t){var r=new c.Message(t),n=e.split("/");n[6]&&this._extractPropertiesFromTopicPart(n[6],r);var i=n[5];this.emit("inputMessage",i,r)},Mqtt.prototype._onDeviceMethod=function(e,t){var r=function _parseMessage(e,t){var r,n,i;try{r=s.parse(e),n=r.path.split("/"),i=o.parse(r.query)}catch(t){return void d("could not parse topic for received message: "+e)}var a=n[n.length-1];-1!==a.indexOf("?")&&(n[n.length-1]=a.substr(0,a.indexOf("?")));if(n.length>0&&"$iothub"===n[0]){var c=new v;if(n.length>1&&n[1].length>0){var u=c[n[1]]=new y;if(i.$rid&&(c.requestId=i.$rid),c.properties=i,delete c.properties.$rid,c.body=t,n.length>2&&n[2].length>0){if(u.verb=n[2],!(n.length>3&&n[3].length>0))throw new Error("Device method call's MQTT topic name does not include the method name.");u.methodName=n[3]}}return c}return}(e,t);r&&this.emit("method_"+r.methods.methodName,r)},Mqtt.prototype._getEventTopicFromMessage=function(e,t){var r=this._topicTelemetryPublish,n=t||{};if(e.messageId&&(n["$.mid"]=e.messageId),e.correlationId&&(n["$.cid"]=e.correlationId),e.userId&&(n["$.uid"]=e.userId),e.to&&(n["$.to"]=e.to),e.contentType&&(n["$.ct"]=e.contentType),e.contentEncoding&&(n["$.ce"]=e.contentEncoding),e.expiryTimeUtc){var i=e.expiryTimeUtc instanceof Date?e.expiryTimeUtc.toISOString():e.expiryTimeUtc;n["$.exp"]=i||void 0}var s=o.stringify(n);if(r+=s,e.properties&&e.properties.count()>0)for(var a=0;a<e.properties.count();a++)(a>0||s)&&(r+="&"),r+=encodeURIComponent(e.properties.propertyList[a].key)+"="+encodeURIComponent(e.properties.propertyList[a].value);return r},Mqtt.prototype._ensureAgentString=function(e){var t=this;this._userAgentString?e():u.getUserAgentString(function(r){t._userAgentString=r,e()})},Mqtt}(l.EventEmitter);t.Mqtt=g;var y=function(){return function MethodDescription(){}}(),v=function(){return function MethodMessageImpl(){}}()},function(e,t,r){"use strict";"undefined"==typeof process||"renderer"===process.type||!0===process.browser||process.__nwjs?e.exports=r(1039):e.exports=r(1041)},function(e,t,r){"use strict";e.exports=function setup(e){function selectColor(e){for(var t=0,r=0;r<e.length;r++)t=(t<<5)-t+e.charCodeAt(r),t|=0;return createDebug.colors[Math.abs(t)%createDebug.colors.length]}function createDebug(e){var t;function debug(){if(debug.enabled){for(var e=arguments.length,r=new Array(e),n=0;n<e;n++)r[n]=arguments[n];var i=debug,o=Number(new Date),s=o-(t||o);i.diff=s,i.prev=t,i.curr=o,t=o,r[0]=createDebug.coerce(r[0]),"string"!=typeof r[0]&&r.unshift("%O");var a=0;r[0]=r[0].replace(/%([a-zA-Z%])/g,function(e,t){if("%%"===e)return e;a++;var n=createDebug.formatters[t];if("function"==typeof n){var o=r[a];e=n.call(i,o),r.splice(a,1),a--}return e}),createDebug.formatArgs.call(i,r),(i.log||createDebug.log).apply(i,r)}}return debug.namespace=e,debug.enabled=createDebug.enabled(e),debug.useColors=createDebug.useColors(),debug.color=selectColor(e),debug.destroy=destroy,debug.extend=extend,"function"==typeof createDebug.init&&createDebug.init(debug),createDebug.instances.push(debug),debug}function destroy(){var e=createDebug.instances.indexOf(this);return-1!==e&&(createDebug.instances.splice(e,1),!0)}function extend(e,t){return createDebug(this.namespace+(void 0===t?":":t)+e)}return createDebug.debug=createDebug,createDebug.default=createDebug,createDebug.coerce=function coerce(e){return e instanceof Error?e.stack||e.message:e},createDebug.disable=function disable(){createDebug.enable("")},createDebug.enable=function enable(e){var t;createDebug.save(e),createDebug.names=[],createDebug.skips=[];var r=("string"==typeof e?e:"").split(/[\s,]+/),n=r.length;for(t=0;t<n;t++)r[t]&&("-"===(e=r[t].replace(/\*/g,".*?"))[0]?createDebug.skips.push(new RegExp("^"+e.substr(1)+"$")):createDebug.names.push(new RegExp("^"+e+"$")));for(t=0;t<createDebug.instances.length;t++){var i=createDebug.instances[t];i.enabled=createDebug.enabled(i.namespace)}},createDebug.enabled=function enabled(e){if("*"===e[e.length-1])return!0;var t,r;for(t=0,r=createDebug.skips.length;t<r;t++)if(createDebug.skips[t].test(e))return!1;for(t=0,r=createDebug.names.length;t<r;t++)if(createDebug.names[t].test(e))return!0;return!1},createDebug.humanize=r(1040),Object.keys(e).forEach(function(t){createDebug[t]=e[t]}),createDebug.instances=[],createDebug.names=[],createDebug.skips=[],createDebug.formatters={},createDebug.selectColor=selectColor,createDebug.enable(createDebug.load()),createDebug}},function(e,t,r){"use strict";e.exports={MqttBase:r(1042).MqttBase,translateError:r(1142).translateError}},function(e,t,r){"use strict";"undefined"==typeof process||"renderer"===process.type||!0===process.browser||process.__nwjs?e.exports=r(1043):e.exports=r(1045)},function(e,t,r){"use strict";e.exports=function setup(e){function selectColor(e){for(var t=0,r=0;r<e.length;r++)t=(t<<5)-t+e.charCodeAt(r),t|=0;return createDebug.colors[Math.abs(t)%createDebug.colors.length]}function createDebug(e){var t;function debug(){if(debug.enabled){for(var e=arguments.length,r=new Array(e),n=0;n<e;n++)r[n]=arguments[n];var i=debug,o=Number(new Date),s=o-(t||o);i.diff=s,i.prev=t,i.curr=o,t=o,r[0]=createDebug.coerce(r[0]),"string"!=typeof r[0]&&r.unshift("%O");var a=0;r[0]=r[0].replace(/%([a-zA-Z%])/g,function(e,t){if("%%"===e)return e;a++;var n=createDebug.formatters[t];if("function"==typeof n){var o=r[a];e=n.call(i,o),r.splice(a,1),a--}return e}),createDebug.formatArgs.call(i,r),(i.log||createDebug.log).apply(i,r)}}return debug.namespace=e,debug.enabled=createDebug.enabled(e),debug.useColors=createDebug.useColors(),debug.color=selectColor(e),debug.destroy=destroy,debug.extend=extend,"function"==typeof createDebug.init&&createDebug.init(debug),createDebug.instances.push(debug),debug}function destroy(){var e=createDebug.instances.indexOf(this);return-1!==e&&(createDebug.instances.splice(e,1),!0)}function extend(e,t){return createDebug(this.namespace+(void 0===t?":":t)+e)}return createDebug.debug=createDebug,createDebug.default=createDebug,createDebug.coerce=function coerce(e){return e instanceof Error?e.stack||e.message:e},createDebug.disable=function disable(){createDebug.enable("")},createDebug.enable=function enable(e){var t;createDebug.save(e),createDebug.names=[],createDebug.skips=[];var r=("string"==typeof e?e:"").split(/[\s,]+/),n=r.length;for(t=0;t<n;t++)r[t]&&("-"===(e=r[t].replace(/\*/g,".*?"))[0]?createDebug.skips.push(new RegExp("^"+e.substr(1)+"$")):createDebug.names.push(new RegExp("^"+e+"$")));for(t=0;t<createDebug.instances.length;t++){var i=createDebug.instances[t];i.enabled=createDebug.enabled(i.namespace)}},createDebug.enabled=function enabled(e){if("*"===e[e.length-1])return!0;var t,r;for(t=0,r=createDebug.skips.length;t<r;t++)if(createDebug.skips[t].test(e))return!1;for(t=0,r=createDebug.names.length;t<r;t++)if(createDebug.names[t].test(e))return!0;return!1},createDebug.humanize=r(1044),Object.keys(e).forEach(function(t){createDebug[t]=e[t]}),createDebug.instances=[],createDebug.names=[],createDebug.skips=[],createDebug.formatters={},createDebug.selectColor=selectColor,createDebug.enable(createDebug.load()),createDebug}},function(e,t,r){"use strict";var n=r(5),i=r(246),o=r(172),s=r(1094),a=r(55).Writable,c=r(38),u=r(1101),l=r(1102),p=r(102),d=global.setImmediate||function(e){process.nextTick(e)},h={keepalive:60,reschedulePings:!0,protocolId:"MQTT",protocolVersion:4,reconnectPeriod:1e3,connectTimeout:3e4,clean:!0,resubscribe:!0};function sendPacket(e,t,r){e.emit("packetsend",t),!s.writeToStream(t,e.stream)&&r?e.stream.once("drain",r):r&&r()}function storeAndSend(e,t,r){e.outgoingStore.put(t,function storedPacket(n){if(n)return r&&r(n);sendPacket(e,t,r)})}function nop(){}function MqttClient(e,t){var r,o=this;if(!(this instanceof MqttClient))return new MqttClient(e,t);for(r in this.options=t||{},h)void 0===this.options[r]?this.options[r]=h[r]:this.options[r]=t[r];this.options.clientId="string"==typeof this.options.clientId?this.options.clientId:function defaultId(){return"mqttjs_"+Math.random().toString(16).substr(2,8)}(),this.streamBuilder=e,this.outgoingStore=this.options.outgoingStore||new i,this.incomingStore=this.options.incomingStore||new i,this.queueQoSZero=void 0===this.options.queueQoSZero||this.options.queueQoSZero,this._resubscribeTopics={},this.messageIdToTopic={},this.pingTimer=null,this.connected=!1,this.disconnecting=!1,this.queue=[],this.connackTimer=null,this.reconnectTimer=null,this.nextId=Math.max(1,Math.floor(65535*Math.random())),this.outgoing={},this.on("connect",function(){if(!this.disconnected){this.connected=!0;var e=this.outgoingStore.createStream();this.once("close",remove),e.on("end",function(){o.removeListener("close",remove)}),e.on("error",function(e){o.removeListener("close",remove),o.emit("error",e)}),function storeDeliver(){if(e){var t,r=e.read(1);r?o.disconnecting||o.reconnectTimer?e.destroy&&e.destroy():(t=o.outgoing[r.messageId],o.outgoing[r.messageId]=function(e,r){t&&t(e,r),storeDeliver()},o._sendPacket(r)):e.once("readable",storeDeliver)}}()}function remove(){e.destroy(),e=null}}),this.on("close",function(){this.connected=!1,clearTimeout(this.connackTimer)}),this.on("connect",this._setupPingTimer),this.on("connect",function(){var e=this.queue;!function deliver(){var t,r=e.shift();r&&(t=r.packet,o._sendPacket(t,function(e){r.cb&&r.cb(e),deliver()}))}()});var s=!0;this.on("connect",function(){!s&&this.options.clean&&Object.keys(this._resubscribeTopics).length>0&&(this.options.resubscribe?(this._resubscribeTopics.resubscribe=!0,this.subscribe(this._resubscribeTopics)):this._resubscribeTopics={}),s=!1}),this.on("close",function(){null!==o.pingTimer&&(o.pingTimer.clear(),o.pingTimer=null)}),this.on("close",this._setupReconnect),n.EventEmitter.call(this),this._setupStream()}c(MqttClient,n.EventEmitter),MqttClient.prototype._setupStream=function(){var e,t=this,r=new a,n=s.parser(this.options),i=null,c=[];function nextTickWork(){process.nextTick(work)}function work(){var e=c.shift(),r=i;e?t._handlePacket(e,nextTickWork):(i=null,r())}this._clearReconnect(),this.stream=this.streamBuilder(this),n.on("packet",function(e){c.push(e)}),r._write=function(e,t,r){i=r,n.parse(e),work()},this.stream.pipe(r),this.stream.on("error",nop),o(this.stream,this.emit.bind(this,"close")),(e=Object.create(this.options)).cmd="connect",sendPacket(this,e),n.on("error",this.emit.bind(this,"error")),this.stream.setMaxListeners(1e3),clearTimeout(this.connackTimer),this.connackTimer=setTimeout(function(){t._cleanUp(!0)},this.options.connectTimeout)},MqttClient.prototype._handlePacket=function(e,t){switch(this.emit("packetreceive",e),e.cmd){case"publish":this._handlePublish(e,t);break;case"puback":case"pubrec":case"pubcomp":case"suback":case"unsuback":this._handleAck(e),t();break;case"pubrel":this._handlePubrel(e,t);break;case"connack":this._handleConnack(e),t();break;case"pingresp":this._handlePingresp(e),t()}},MqttClient.prototype._checkDisconnecting=function(e){return this.disconnecting&&(e?e(new Error("client disconnecting")):this.emit("error",new Error("client disconnecting"))),this.disconnecting},MqttClient.prototype.publish=function(e,t,r,n){var i;"function"==typeof r&&(n=r,r=null);if(r=p({qos:0,retain:!1,dup:!1},r),this._checkDisconnecting(n))return this;switch(i={cmd:"publish",topic:e,payload:t,qos:r.qos,retain:r.retain,messageId:this._nextId(),dup:r.dup},r.qos){case 1:case 2:this.outgoing[i.messageId]=n||nop,this._sendPacket(i);break;default:this._sendPacket(i,n)}return this},MqttClient.prototype.subscribe=function(){var e,t,r=Array.prototype.slice.call(arguments),n=[],i=r.shift(),o=i.resubscribe,s=r.pop()||nop,a=r.pop(),c=this;if(delete i.resubscribe,"string"==typeof i&&(i=[i]),"function"!=typeof s&&(a=s,s=nop),null!==(t=l.validateTopics(i)))return d(s,new Error("Invalid topic "+t)),this;if(this._checkDisconnecting(s))return this;if(a=p({qos:0},a),Array.isArray(i)?i.forEach(function(e){(c._resubscribeTopics[e]<a.qos||!c._resubscribeTopics.hasOwnProperty(e)||o)&&n.push({topic:e,qos:a.qos})}):Object.keys(i).forEach(function(e){(c._resubscribeTopics[e]<i[e]||!c._resubscribeTopics.hasOwnProperty(e)||o)&&n.push({topic:e,qos:i[e]})}),e={cmd:"subscribe",subscriptions:n,qos:1,retain:!1,dup:!1,messageId:this._nextId()},n.length){if(this.options.resubscribe){var u=[];n.forEach(function(e){c.options.reconnectPeriod>0&&(c._resubscribeTopics[e.topic]=e.qos,u.push(e.topic))}),c.messageIdToTopic[e.messageId]=u}return this.outgoing[e.messageId]=function(e,t){if(!e)for(var r=t.granted,i=0;i<r.length;i+=1)n[i].qos=r[i];s(e,n)},this._sendPacket(e),this}s(null,[])},MqttClient.prototype.unsubscribe=function(e,t){var r={cmd:"unsubscribe",qos:1,messageId:this._nextId()},n=this;return t=t||nop,this._checkDisconnecting(t)?this:("string"==typeof e?r.unsubscriptions=[e]:"object"==typeof e&&e.length&&(r.unsubscriptions=e),this.options.resubscribe&&r.unsubscriptions.forEach(function(e){delete n._resubscribeTopics[e]}),this.outgoing[r.messageId]=t,this._sendPacket(r),this)},MqttClient.prototype.end=function(e,t){var r=this;function closeStores(){r.disconnected=!0,r.incomingStore.close(function(){r.outgoingStore.close(function(){t&&t.apply(null,arguments),r.emit("end")})}),r._deferredReconnect&&r._deferredReconnect()}function finish(){r._cleanUp(e,d.bind(null,closeStores))}return"function"==typeof e&&(t=e,e=!1),this.disconnecting?this:(this._clearReconnect(),this.disconnecting=!0,!e&&Object.keys(this.outgoing).length>0?this.once("outgoingEmpty",setTimeout.bind(null,finish,10)):finish(),this)},MqttClient.prototype.removeOutgoingMessage=function(e){var t=this.outgoing[e];return delete this.outgoing[e],this.outgoingStore.del({messageId:e},function(){t(new Error("Message removed"))}),this},MqttClient.prototype.reconnect=function(e){var t=this,r=function(){e?(t.options.incomingStore=e.incomingStore,t.options.outgoingStore=e.outgoingStore):(t.options.incomingStore=null,t.options.outgoingStore=null),t.incomingStore=t.options.incomingStore||new i,t.outgoingStore=t.options.outgoingStore||new i,t.disconnecting=!1,t.disconnected=!1,t._deferredReconnect=null,t._reconnect()};return this.disconnecting&&!this.disconnected?this._deferredReconnect=r:r(),this},MqttClient.prototype._reconnect=function(){this.emit("reconnect"),this._setupStream()},MqttClient.prototype._setupReconnect=function(){var e=this;!e.disconnecting&&!e.reconnectTimer&&e.options.reconnectPeriod>0&&(this.reconnecting||(this.emit("offline"),this.reconnecting=!0),e.reconnectTimer=setInterval(function(){e._reconnect()},e.options.reconnectPeriod))},MqttClient.prototype._clearReconnect=function(){this.reconnectTimer&&(clearInterval(this.reconnectTimer),this.reconnectTimer=null)},MqttClient.prototype._cleanUp=function(e,t){t&&this.stream.on("close",t),e?(0===this.options.reconnectPeriod&&this.options.clean&&function flush(e){e&&Object.keys(e).forEach(function(t){"function"==typeof e[t]&&(e[t](new Error("Connection closed")),delete e[t])})}(this.outgoing),this.stream.destroy()):this._sendPacket({cmd:"disconnect"},d.bind(null,this.stream.end.bind(this.stream))),this.disconnecting||(this._clearReconnect(),this._setupReconnect()),null!==this.pingTimer&&(this.pingTimer.clear(),this.pingTimer=null),t&&!this.connected&&(this.stream.removeListener("close",t),t())},MqttClient.prototype._sendPacket=function(e,t){if(this.connected){switch(this._shiftPingInterval(),e.cmd){case"publish":break;case"pubrel":return void storeAndSend(this,e,t);default:return void sendPacket(this,e,t)}switch(e.qos){case 2:case 1:storeAndSend(this,e,t);break;case 0:default:sendPacket(this,e,t)}}else 0===(e.qos||0)&&this.queueQoSZero||"publish"!==e.cmd?this.queue.push({packet:e,cb:t}):e.qos>0?(t=this.outgoing[e.messageId],this.outgoingStore.put(e,function(e){if(e)return t&&t(e)})):t&&t(new Error("No connection to broker"))},MqttClient.prototype._setupPingTimer=function(){var e=this;!this.pingTimer&&this.options.keepalive&&(this.pingResp=!0,this.pingTimer=u(function(){e._checkPing()},1e3*this.options.keepalive))},MqttClient.prototype._shiftPingInterval=function(){this.pingTimer&&this.options.keepalive&&this.options.reschedulePings&&this.pingTimer.reschedule(1e3*this.options.keepalive)},MqttClient.prototype._checkPing=function(){this.pingResp?(this.pingResp=!1,this._sendPacket({cmd:"pingreq"})):this._cleanUp(!0)},MqttClient.prototype._handlePingresp=function(){this.pingResp=!0},MqttClient.prototype._handleConnack=function(e){var t=e.returnCode;if(clearTimeout(this.connackTimer),0===t)this.reconnecting=!1,this.emit("connect",e);else if(t>0){var r=new Error("Connection refused: "+["","Unacceptable protocol version","Identifier rejected","Server unavailable","Bad username or password","Not authorized"][t]);r.code=t,this.emit("error",r)}},MqttClient.prototype._handlePublish=function(e,t){t=void 0!==t?t:nop;var r=e.topic.toString(),n=e.payload,i=e.qos,o=e.messageId,s=this;switch(i){case 2:this.incomingStore.put(e,function(e){if(e)return t(e);s._sendPacket({cmd:"pubrec",messageId:o},t)});break;case 1:this.emit("message",r,n,e),this.handleMessage(e,function(e){if(e)return t(e);s._sendPacket({cmd:"puback",messageId:o},t)});break;case 0:this.emit("message",r,n,e),this.handleMessage(e,t)}},MqttClient.prototype.handleMessage=function(e,t){t()},MqttClient.prototype._handleAck=function(e){var t=e.messageId,r=e.cmd,n=null,i=this.outgoing[t],o=this;if(i){switch(r){case"pubcomp":case"puback":delete this.outgoing[t],this.outgoingStore.del(e,i);break;case"pubrec":n={cmd:"pubrel",qos:2,messageId:t},this._sendPacket(n);break;case"suback":if(delete this.outgoing[t],1===e.granted.length&&0!=(128&e.granted[0])){var s=this.messageIdToTopic[t];s&&s.forEach(function(e){delete o._resubscribeTopics[e]})}i(null,e);break;case"unsuback":delete this.outgoing[t],i(null);break;default:o.emit("error",new Error("unrecognized packet type"))}this.disconnecting&&0===Object.keys(this.outgoing).length&&this.emit("outgoingEmpty")}},MqttClient.prototype._handlePubrel=function(e,t){t=void 0!==t?t:nop;var r=e.messageId,n=this,i={cmd:"pubcomp",messageId:r};n.incomingStore.get(e,function(r,o){r||"pubrel"===o.cmd?n._sendPacket(i,t):(n.emit("message",o.topic,o.payload,o),n.incomingStore.put(e,function(e){if(e)return t(e);n.handleMessage(o,function(e){if(e)return t(e);n._sendPacket(i,t)})}))})},MqttClient.prototype._nextId=function(){var e=this.nextId++;return 65536===this.nextId&&(this.nextId=1),e},MqttClient.prototype.getLastMessageId=function(){return 1===this.nextId?65535:this.nextId-1},e.exports=MqttClient},function(e,t,r){"use strict";var n=r(131);e.exports=Readable;var i,o=r(1046);Readable.ReadableState=ReadableState;r(5).EventEmitter;var s=function(e,t){return e.listeners(t).length},a=r(447),c=r(14).Buffer,u=global.Uint8Array||function(){};var l=r(90);l.inherits=r(38);var p=r(1),d=void 0;d=p&&p.debuglog?p.debuglog("stream"):function(){};var h,f=r(1047),m=r(448);l.inherits(Readable,a);var g=["error","close","destroy","pause","resume"];function ReadableState(e,t){e=e||{};var n=t instanceof(i=i||r(103));this.objectMode=!!e.objectMode,n&&(this.objectMode=this.objectMode||!!e.readableObjectMode);var o=e.highWaterMark,s=e.readableHighWaterMark,a=this.objectMode?16:16384;this.highWaterMark=o||0===o?o:n&&(s||0===s)?s:a,this.highWaterMark=Math.floor(this.highWaterMark),this.buffer=new f,this.length=0,this.pipes=null,this.pipesCount=0,this.flowing=null,this.ended=!1,this.endEmitted=!1,this.reading=!1,this.sync=!0,this.needReadable=!1,this.emittedReadable=!1,this.readableListening=!1,this.resumeScheduled=!1,this.destroyed=!1,this.defaultEncoding=e.defaultEncoding||"utf8",this.awaitDrain=0,this.readingMore=!1,this.decoder=null,this.encoding=null,e.encoding&&(h||(h=r(450).StringDecoder),this.decoder=new h(e.encoding),this.encoding=e.encoding)}function Readable(e){if(i=i||r(103),!(this instanceof Readable))return new Readable(e);this._readableState=new ReadableState(e,this),this.readable=!0,e&&("function"==typeof e.read&&(this._read=e.read),"function"==typeof e.destroy&&(this._destroy=e.destroy)),a.call(this)}function readableAddChunk(e,t,r,n,i){var o,s=e._readableState;null===t?(s.reading=!1,function onEofChunk(e,t){if(t.ended)return;if(t.decoder){var r=t.decoder.end();r&&r.length&&(t.buffer.push(r),t.length+=t.objectMode?1:r.length)}t.ended=!0,emitReadable(e)}(e,s)):(i||(o=function chunkInvalid(e,t){var r;(function _isUint8Array(e){return c.isBuffer(e)||e instanceof u})(t)||"string"==typeof t||void 0===t||e.objectMode||(r=new TypeError("Invalid non-string/buffer chunk"));return r}(s,t)),o?e.emit("error",o):s.objectMode||t&&t.length>0?("string"==typeof t||s.objectMode||Object.getPrototypeOf(t)===c.prototype||(t=function _uint8ArrayToBuffer(e){return c.from(e)}(t)),n?s.endEmitted?e.emit("error",new Error("stream.unshift() after end event")):addChunk(e,s,t,!0):s.ended?e.emit("error",new Error("stream.push() after EOF")):(s.reading=!1,s.decoder&&!r?(t=s.decoder.write(t),s.objectMode||0!==t.length?addChunk(e,s,t,!1):maybeReadMore(e,s)):addChunk(e,s,t,!1))):n||(s.reading=!1));return function needMoreData(e){return!e.ended&&(e.needReadable||e.length<e.highWaterMark||0===e.length)}(s)}function addChunk(e,t,r,n){t.flowing&&0===t.length&&!t.sync?(e.emit("data",r),e.read(0)):(t.length+=t.objectMode?1:r.length,n?t.buffer.unshift(r):t.buffer.push(r),t.needReadable&&emitReadable(e)),maybeReadMore(e,t)}Object.defineProperty(Readable.prototype,"destroyed",{get:function(){return void 0!==this._readableState&&this._readableState.destroyed},set:function(e){this._readableState&&(this._readableState.destroyed=e)}}),Readable.prototype.destroy=m.destroy,Readable.prototype._undestroy=m.undestroy,Readable.prototype._destroy=function(e,t){this.push(null),t(e)},Readable.prototype.push=function(e,t){var r,n=this._readableState;return n.objectMode?r=!0:"string"==typeof e&&((t=t||n.defaultEncoding)!==n.encoding&&(e=c.from(e,t),t=""),r=!0),readableAddChunk(this,e,t,!1,r)},Readable.prototype.unshift=function(e){return readableAddChunk(this,e,null,!0,!1)},Readable.prototype.isPaused=function(){return!1===this._readableState.flowing},Readable.prototype.setEncoding=function(e){return h||(h=r(450).StringDecoder),this._readableState.decoder=new h(e),this._readableState.encoding=e,this};var y=8388608;function howMuchToRead(e,t){return e<=0||0===t.length&&t.ended?0:t.objectMode?1:e!=e?t.flowing&&t.length?t.buffer.head.data.length:t.length:(e>t.highWaterMark&&(t.highWaterMark=function computeNewHighWaterMark(e){return e>=y?e=y:(e--,e|=e>>>1,e|=e>>>2,e|=e>>>4,e|=e>>>8,e|=e>>>16,e++),e}(e)),e<=t.length?e:t.ended?t.length:(t.needReadable=!0,0))}function emitReadable(e){var t=e._readableState;t.needReadable=!1,t.emittedReadable||(d("emitReadable",t.flowing),t.emittedReadable=!0,t.sync?n.nextTick(emitReadable_,e):emitReadable_(e))}function emitReadable_(e){d("emit readable"),e.emit("readable"),flow(e)}function maybeReadMore(e,t){t.readingMore||(t.readingMore=!0,n.nextTick(maybeReadMore_,e,t))}function maybeReadMore_(e,t){for(var r=t.length;!t.reading&&!t.flowing&&!t.ended&&t.length<t.highWaterMark&&(d("maybeReadMore read 0"),e.read(0),r!==t.length);)r=t.length;t.readingMore=!1}function nReadingNextTick(e){d("readable nexttick read 0"),e.read(0)}function resume_(e,t){t.reading||(d("resume read 0"),e.read(0)),t.resumeScheduled=!1,t.awaitDrain=0,e.emit("resume"),flow(e),t.flowing&&!t.reading&&e.read(0)}function flow(e){var t=e._readableState;for(d("flow",t.flowing);t.flowing&&null!==e.read(););}function fromList(e,t){return 0===t.length?null:(t.objectMode?r=t.buffer.shift():!e||e>=t.length?(r=t.decoder?t.buffer.join(""):1===t.buffer.length?t.buffer.head.data:t.buffer.concat(t.length),t.buffer.clear()):r=function fromListPartial(e,t,r){var n;e<t.head.data.length?(n=t.head.data.slice(0,e),t.head.data=t.head.data.slice(e)):n=e===t.head.data.length?t.shift():r?function copyFromBufferString(e,t){var r=t.head,n=1,i=r.data;e-=i.length;for(;r=r.next;){var o=r.data,s=e>o.length?o.length:e;if(s===o.length?i+=o:i+=o.slice(0,e),0===(e-=s)){s===o.length?(++n,r.next?t.head=r.next:t.head=t.tail=null):(t.head=r,r.data=o.slice(s));break}++n}return t.length-=n,i}(e,t):function copyFromBuffer(e,t){var r=c.allocUnsafe(e),n=t.head,i=1;n.data.copy(r),e-=n.data.length;for(;n=n.next;){var o=n.data,s=e>o.length?o.length:e;if(o.copy(r,r.length-e,0,s),0===(e-=s)){s===o.length?(++i,n.next?t.head=n.next:t.head=t.tail=null):(t.head=n,n.data=o.slice(s));break}++i}return t.length-=i,r}(e,t);return n}(e,t.buffer,t.decoder),r);var r}function endReadable(e){var t=e._readableState;if(t.length>0)throw new Error('"endReadable()" called on non-empty stream');t.endEmitted||(t.ended=!0,n.nextTick(endReadableNT,t,e))}function endReadableNT(e,t){e.endEmitted||0!==e.length||(e.endEmitted=!0,t.readable=!1,t.emit("end"))}function indexOf(e,t){for(var r=0,n=e.length;r<n;r++)if(e[r]===t)return r;return-1}Readable.prototype.read=function(e){d("read",e),e=parseInt(e,10);var t=this._readableState,r=e;if(0!==e&&(t.emittedReadable=!1),0===e&&t.needReadable&&(t.length>=t.highWaterMark||t.ended))return d("read: emitReadable",t.length,t.ended),0===t.length&&t.ended?endReadable(this):emitReadable(this),null;if(0===(e=howMuchToRead(e,t))&&t.ended)return 0===t.length&&endReadable(this),null;var n,i=t.needReadable;return d("need readable",i),(0===t.length||t.length-e<t.highWaterMark)&&d("length less than watermark",i=!0),t.ended||t.reading?d("reading or ended",i=!1):i&&(d("do read"),t.reading=!0,t.sync=!0,0===t.length&&(t.needReadable=!0),this._read(t.highWaterMark),t.sync=!1,t.reading||(e=howMuchToRead(r,t))),null===(n=e>0?fromList(e,t):null)?(t.needReadable=!0,e=0):t.length-=e,0===t.length&&(t.ended||(t.needReadable=!0),r!==e&&t.ended&&endReadable(this)),null!==n&&this.emit("data",n),n},Readable.prototype._read=function(e){this.emit("error",new Error("_read() is not implemented"))},Readable.prototype.pipe=function(e,t){var r=this,i=this._readableState;switch(i.pipesCount){case 0:i.pipes=e;break;case 1:i.pipes=[i.pipes,e];break;default:i.pipes.push(e)}i.pipesCount+=1,d("pipe count=%d opts=%j",i.pipesCount,t);var a=(!t||!1!==t.end)&&e!==process.stdout&&e!==process.stderr?onend:unpipe;function onunpipe(t,n){d("onunpipe"),t===r&&n&&!1===n.hasUnpiped&&(n.hasUnpiped=!0,function cleanup(){d("cleanup"),e.removeListener("close",onclose),e.removeListener("finish",onfinish),e.removeListener("drain",c),e.removeListener("error",onerror),e.removeListener("unpipe",onunpipe),r.removeListener("end",onend),r.removeListener("end",unpipe),r.removeListener("data",ondata),u=!0,!i.awaitDrain||e._writableState&&!e._writableState.needDrain||c()}())}function onend(){d("onend"),e.end()}i.endEmitted?n.nextTick(a):r.once("end",a),e.on("unpipe",onunpipe);var c=function pipeOnDrain(e){return function(){var t=e._readableState;d("pipeOnDrain",t.awaitDrain),t.awaitDrain&&t.awaitDrain--,0===t.awaitDrain&&s(e,"data")&&(t.flowing=!0,flow(e))}}(r);e.on("drain",c);var u=!1;var l=!1;function ondata(t){d("ondata"),l=!1,!1!==e.write(t)||l||((1===i.pipesCount&&i.pipes===e||i.pipesCount>1&&-1!==indexOf(i.pipes,e))&&!u&&(d("false write response, pause",r._readableState.awaitDrain),r._readableState.awaitDrain++,l=!0),r.pause())}function onerror(t){d("onerror",t),unpipe(),e.removeListener("error",onerror),0===s(e,"error")&&e.emit("error",t)}function onclose(){e.removeListener("finish",onfinish),unpipe()}function onfinish(){d("onfinish"),e.removeListener("close",onclose),unpipe()}function unpipe(){d("unpipe"),r.unpipe(e)}return r.on("data",ondata),function prependListener(e,t,r){if("function"==typeof e.prependListener)return e.prependListener(t,r);e._events&&e._events[t]?o(e._events[t])?e._events[t].unshift(r):e._events[t]=[r,e._events[t]]:e.on(t,r)}(e,"error",onerror),e.once("close",onclose),e.once("finish",onfinish),e.emit("pipe",r),i.flowing||(d("pipe resume"),r.resume()),e},Readable.prototype.unpipe=function(e){var t=this._readableState,r={hasUnpiped:!1};if(0===t.pipesCount)return this;if(1===t.pipesCount)return e&&e!==t.pipes?this:(e||(e=t.pipes),t.pipes=null,t.pipesCount=0,t.flowing=!1,e&&e.emit("unpipe",this,r),this);if(!e){var n=t.pipes,i=t.pipesCount;t.pipes=null,t.pipesCount=0,t.flowing=!1;for(var o=0;o<i;o++)n[o].emit("unpipe",this,r);return this}var s=indexOf(t.pipes,e);return-1===s?this:(t.pipes.splice(s,1),t.pipesCount-=1,1===t.pipesCount&&(t.pipes=t.pipes[0]),e.emit("unpipe",this,r),this)},Readable.prototype.on=function(e,t){var r=a.prototype.on.call(this,e,t);if("data"===e)!1!==this._readableState.flowing&&this.resume();else if("readable"===e){var i=this._readableState;i.endEmitted||i.readableListening||(i.readableListening=i.needReadable=!0,i.emittedReadable=!1,i.reading?i.length&&emitReadable(this):n.nextTick(nReadingNextTick,this))}return r},Readable.prototype.addListener=Readable.prototype.on,Readable.prototype.resume=function(){var e=this._readableState;return e.flowing||(d("resume"),e.flowing=!0,function resume(e,t){t.resumeScheduled||(t.resumeScheduled=!0,n.nextTick(resume_,e,t))}(this,e)),this},Readable.prototype.pause=function(){return d("call pause flowing=%j",this._readableState.flowing),!1!==this._readableState.flowing&&(d("pause"),this._readableState.flowing=!1,this.emit("pause")),this},Readable.prototype.wrap=function(e){var t=this,r=this._readableState,n=!1;for(var i in e.on("end",function(){if(d("wrapped end"),r.decoder&&!r.ended){var e=r.decoder.end();e&&e.length&&t.push(e)}t.push(null)}),e.on("data",function(i){(d("wrapped data"),r.decoder&&(i=r.decoder.write(i)),r.objectMode&&null==i)||(r.objectMode||i&&i.length)&&(t.push(i)||(n=!0,e.pause()))}),e)void 0===this[i]&&"function"==typeof e[i]&&(this[i]=function(t){return function(){return e[t].apply(e,arguments)}}(i));for(var o=0;o<g.length;o++)e.on(g[o],this.emit.bind(this,g[o]));return this._read=function(t){d("wrapped _read",t),n&&(n=!1,e.resume())},this},Object.defineProperty(Readable.prototype,"readableHighWaterMark",{enumerable:!1,get:function(){return this._readableState.highWaterMark}}),Readable._fromList=fromList},function(e,t,r){e.exports=r(15)},function(e,t,r){"use strict";var n=r(131);function emitErrorNT(e,t){e.emit("error",t)}e.exports={destroy:function destroy(e,t){var r=this,i=this._readableState&&this._readableState.destroyed,o=this._writableState&&this._writableState.destroyed;return i||o?(t?t(e):!e||this._writableState&&this._writableState.errorEmitted||n.nextTick(emitErrorNT,this,e),this):(this._readableState&&(this._readableState.destroyed=!0),this._writableState&&(this._writableState.destroyed=!0),this._destroy(e||null,function(e){!t&&e?(n.nextTick(emitErrorNT,r,e),r._writableState&&(r._writableState.errorEmitted=!0)):t&&t(e)}),this)},undestroy:function undestroy(){this._readableState&&(this._readableState.destroyed=!1,this._readableState.reading=!1,this._readableState.ended=!1,this._readableState.endEmitted=!1),this._writableState&&(this._writableState.destroyed=!1,this._writableState.ended=!1,this._writableState.ending=!1,this._writableState.finished=!1,this._writableState.errorEmitted=!1)}}},function(e,t,r){"use strict";var n=r(131);function CorkedRequest(e){var t=this;this.next=null,this.entry=null,this.finish=function(){!function onCorkedFinish(e,t,r){var n=e.entry;e.entry=null;for(;n;){var i=n.callback;t.pendingcb--,i(r),n=n.next}t.corkedRequestsFree?t.corkedRequestsFree.next=e:t.corkedRequestsFree=e}(t,e)}}e.exports=Writable;var i,o=!process.browser&&["v0.10","v0.9."].indexOf(process.version.slice(0,5))>-1?setImmediate:n.nextTick;Writable.WritableState=WritableState;var s=r(90);s.inherits=r(38);var a={deprecate:r(1048)},c=r(447),u=r(14).Buffer,l=global.Uint8Array||function(){};var p,d=r(448);function nop(){}function WritableState(e,t){i=i||r(103),e=e||{};var s=t instanceof i;this.objectMode=!!e.objectMode,s&&(this.objectMode=this.objectMode||!!e.writableObjectMode);var a=e.highWaterMark,c=e.writableHighWaterMark,u=this.objectMode?16:16384;this.highWaterMark=a||0===a?a:s&&(c||0===c)?c:u,this.highWaterMark=Math.floor(this.highWaterMark),this.finalCalled=!1,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1,this.destroyed=!1;var l=!1===e.decodeStrings;this.decodeStrings=!l,this.defaultEncoding=e.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=function(e){!function onwrite(e,t){var r=e._writableState,i=r.sync,s=r.writecb;if(function onwriteStateUpdate(e){e.writing=!1,e.writecb=null,e.length-=e.writelen,e.writelen=0}(r),t)!function onwriteError(e,t,r,i,o){--t.pendingcb,r?(n.nextTick(o,i),n.nextTick(finishMaybe,e,t),e._writableState.errorEmitted=!0,e.emit("error",i)):(o(i),e._writableState.errorEmitted=!0,e.emit("error",i),finishMaybe(e,t))}(e,r,i,t,s);else{var a=needFinish(r);a||r.corked||r.bufferProcessing||!r.bufferedRequest||clearBuffer(e,r),i?o(afterWrite,e,r,a,s):afterWrite(e,r,a,s)}}(t,e)},this.writecb=null,this.writelen=0,this.bufferedRequest=null,this.lastBufferedRequest=null,this.pendingcb=0,this.prefinished=!1,this.errorEmitted=!1,this.bufferedRequestCount=0,this.corkedRequestsFree=new CorkedRequest(this)}function Writable(e){if(i=i||r(103),!(p.call(Writable,this)||this instanceof i))return new Writable(e);this._writableState=new WritableState(e,this),this.writable=!0,e&&("function"==typeof e.write&&(this._write=e.write),"function"==typeof e.writev&&(this._writev=e.writev),"function"==typeof e.destroy&&(this._destroy=e.destroy),"function"==typeof e.final&&(this._final=e.final)),c.call(this)}function doWrite(e,t,r,n,i,o,s){t.writelen=n,t.writecb=s,t.writing=!0,t.sync=!0,r?e._writev(i,t.onwrite):e._write(i,o,t.onwrite),t.sync=!1}function afterWrite(e,t,r,n){r||function onwriteDrain(e,t){0===t.length&&t.needDrain&&(t.needDrain=!1,e.emit("drain"))}(e,t),t.pendingcb--,n(),finishMaybe(e,t)}function clearBuffer(e,t){t.bufferProcessing=!0;var r=t.bufferedRequest;if(e._writev&&r&&r.next){var n=t.bufferedRequestCount,i=new Array(n),o=t.corkedRequestsFree;o.entry=r;for(var s=0,a=!0;r;)i[s]=r,r.isBuf||(a=!1),r=r.next,s+=1;i.allBuffers=a,doWrite(e,t,!0,t.length,i,"",o.finish),t.pendingcb++,t.lastBufferedRequest=null,o.next?(t.corkedRequestsFree=o.next,o.next=null):t.corkedRequestsFree=new CorkedRequest(t),t.bufferedRequestCount=0}else{for(;r;){var c=r.chunk,u=r.encoding,l=r.callback;if(doWrite(e,t,!1,t.objectMode?1:c.length,c,u,l),r=r.next,t.bufferedRequestCount--,t.writing)break}null===r&&(t.lastBufferedRequest=null)}t.bufferedRequest=r,t.bufferProcessing=!1}function needFinish(e){return e.ending&&0===e.length&&null===e.bufferedRequest&&!e.finished&&!e.writing}function callFinal(e,t){e._final(function(r){t.pendingcb--,r&&e.emit("error",r),t.prefinished=!0,e.emit("prefinish"),finishMaybe(e,t)})}function finishMaybe(e,t){var r=needFinish(t);return r&&(!function prefinish(e,t){t.prefinished||t.finalCalled||("function"==typeof e._final?(t.pendingcb++,t.finalCalled=!0,n.nextTick(callFinal,e,t)):(t.prefinished=!0,e.emit("prefinish")))}(e,t),0===t.pendingcb&&(t.finished=!0,e.emit("finish"))),r}s.inherits(Writable,c),WritableState.prototype.getBuffer=function getBuffer(){for(var e=this.bufferedRequest,t=[];e;)t.push(e),e=e.next;return t},function(){try{Object.defineProperty(WritableState.prototype,"buffer",{get:a.deprecate(function(){return this.getBuffer()},"_writableState.buffer is deprecated. Use _writableState.getBuffer instead.","DEP0003")})}catch(e){}}(),"function"==typeof Symbol&&Symbol.hasInstance&&"function"==typeof Function.prototype[Symbol.hasInstance]?(p=Function.prototype[Symbol.hasInstance],Object.defineProperty(Writable,Symbol.hasInstance,{value:function(e){return!!p.call(this,e)||this===Writable&&(e&&e._writableState instanceof WritableState)}})):p=function(e){return e instanceof this},Writable.prototype.pipe=function(){this.emit("error",new Error("Cannot pipe, not readable"))},Writable.prototype.write=function(e,t,r){var i=this._writableState,o=!1,s=!i.objectMode&&function _isUint8Array(e){return u.isBuffer(e)||e instanceof l}(e);return s&&!u.isBuffer(e)&&(e=function _uint8ArrayToBuffer(e){return u.from(e)}(e)),"function"==typeof t&&(r=t,t=null),s?t="buffer":t||(t=i.defaultEncoding),"function"!=typeof r&&(r=nop),i.ended?function writeAfterEnd(e,t){var r=new Error("write after end");e.emit("error",r),n.nextTick(t,r)}(this,r):(s||function validChunk(e,t,r,i){var o=!0,s=!1;return null===r?s=new TypeError("May not write null values to stream"):"string"==typeof r||void 0===r||t.objectMode||(s=new TypeError("Invalid non-string/buffer chunk")),s&&(e.emit("error",s),n.nextTick(i,s),o=!1),o}(this,i,e,r))&&(i.pendingcb++,o=function writeOrBuffer(e,t,r,n,i,o){if(!r){var s=function decodeChunk(e,t,r){e.objectMode||!1===e.decodeStrings||"string"!=typeof t||(t=u.from(t,r));return t}(t,n,i);n!==s&&(r=!0,i="buffer",n=s)}var a=t.objectMode?1:n.length;t.length+=a;var c=t.length<t.highWaterMark;c||(t.needDrain=!0);if(t.writing||t.corked){var l=t.lastBufferedRequest;t.lastBufferedRequest={chunk:n,encoding:i,isBuf:r,callback:o,next:null},l?l.next=t.lastBufferedRequest:t.bufferedRequest=t.lastBufferedRequest,t.bufferedRequestCount+=1}else doWrite(e,t,!1,a,n,i,o);return c}(this,i,s,e,t,r)),o},Writable.prototype.cork=function(){this._writableState.corked++},Writable.prototype.uncork=function(){var e=this._writableState;e.corked&&(e.corked--,e.writing||e.corked||e.finished||e.bufferProcessing||!e.bufferedRequest||clearBuffer(this,e))},Writable.prototype.setDefaultEncoding=function setDefaultEncoding(e){if("string"==typeof e&&(e=e.toLowerCase()),!(["hex","utf8","utf-8","ascii","binary","base64","ucs2","ucs-2","utf16le","utf-16le","raw"].indexOf((e+"").toLowerCase())>-1))throw new TypeError("Unknown encoding: "+e);return this._writableState.defaultEncoding=e,this},Object.defineProperty(Writable.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),Writable.prototype._write=function(e,t,r){r(new Error("_write() is not implemented"))},Writable.prototype._writev=null,Writable.prototype.end=function(e,t,r){var i=this._writableState;"function"==typeof e?(r=e,e=null,t=null):"function"==typeof t&&(r=t,t=null),null!=e&&this.write(e,t),i.corked&&(i.corked=1,this.uncork()),i.ending||i.finished||function endWritable(e,t,r){t.ending=!0,finishMaybe(e,t),r&&(t.finished?n.nextTick(r):e.once("finish",r));t.ended=!0,e.writable=!1}(this,i,r)},Object.defineProperty(Writable.prototype,"destroyed",{get:function(){return void 0!==this._writableState&&this._writableState.destroyed},set:function(e){this._writableState&&(this._writableState.destroyed=e)}}),Writable.prototype.destroy=d.destroy,Writable.prototype._undestroy=d.undestroy,Writable.prototype._destroy=function(e,t){this.end(),t(e)}},function(e,t,r){"use strict";var n=r(14).Buffer,i=n.isEncoding||function(e){switch((e=""+e)&&e.toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":case"raw":return!0;default:return!1}};function StringDecoder(e){var t;switch(this.encoding=function normalizeEncoding(e){var t=function _normalizeEncoding(e){if(!e)return"utf8";for(var t;;)switch(e){case"utf8":case"utf-8":return"utf8";case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return"utf16le";case"latin1":case"binary":return"latin1";case"base64":case"ascii":case"hex":return e;default:if(t)return;e=(""+e).toLowerCase(),t=!0}}(e);if("string"!=typeof t&&(n.isEncoding===i||!i(e)))throw new Error("Unknown encoding: "+e);return t||e}(e),this.encoding){case"utf16le":this.text=utf16Text,this.end=utf16End,t=4;break;case"utf8":this.fillLast=utf8FillLast,t=4;break;case"base64":this.text=base64Text,this.end=base64End,t=3;break;default:return this.write=simpleWrite,void(this.end=simpleEnd)}this.lastNeed=0,this.lastTotal=0,this.lastChar=n.allocUnsafe(t)}function utf8CheckByte(e){return e<=127?0:e>>5==6?2:e>>4==14?3:e>>3==30?4:e>>6==2?-1:-2}function utf8FillLast(e){var t=this.lastTotal-this.lastNeed,r=function utf8CheckExtraBytes(e,t,r){if(128!=(192&t[0]))return e.lastNeed=0,"";if(e.lastNeed>1&&t.length>1){if(128!=(192&t[1]))return e.lastNeed=1,"";if(e.lastNeed>2&&t.length>2&&128!=(192&t[2]))return e.lastNeed=2,""}}(this,e);return void 0!==r?r:this.lastNeed<=e.length?(e.copy(this.lastChar,t,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal)):(e.copy(this.lastChar,t,0,e.length),void(this.lastNeed-=e.length))}function utf16Text(e,t){if((e.length-t)%2==0){var r=e.toString("utf16le",t);if(r){var n=r.charCodeAt(r.length-1);if(n>=55296&&n<=56319)return this.lastNeed=2,this.lastTotal=4,this.lastChar[0]=e[e.length-2],this.lastChar[1]=e[e.length-1],r.slice(0,-1)}return r}return this.lastNeed=1,this.lastTotal=2,this.lastChar[0]=e[e.length-1],e.toString("utf16le",t,e.length-1)}function utf16End(e){var t=e&&e.length?this.write(e):"";if(this.lastNeed){var r=this.lastTotal-this.lastNeed;return t+this.lastChar.toString("utf16le",0,r)}return t}function base64Text(e,t){var r=(e.length-t)%3;return 0===r?e.toString("base64",t):(this.lastNeed=3-r,this.lastTotal=3,1===r?this.lastChar[0]=e[e.length-1]:(this.lastChar[0]=e[e.length-2],this.lastChar[1]=e[e.length-1]),e.toString("base64",t,e.length-r))}function base64End(e){var t=e&&e.length?this.write(e):"";return this.lastNeed?t+this.lastChar.toString("base64",0,3-this.lastNeed):t}function simpleWrite(e){return e.toString(this.encoding)}function simpleEnd(e){return e&&e.length?this.write(e):""}t.StringDecoder=StringDecoder,StringDecoder.prototype.write=function(e){if(0===e.length)return"";var t,r;if(this.lastNeed){if(void 0===(t=this.fillLast(e)))return"";r=this.lastNeed,this.lastNeed=0}else r=0;return r<e.length?t?t+this.text(e,r):this.text(e,r):t||""},StringDecoder.prototype.end=function utf8End(e){var t=e&&e.length?this.write(e):"";return this.lastNeed?t+"":t},StringDecoder.prototype.text=function utf8Text(e,t){var r=function utf8CheckIncomplete(e,t,r){var n=t.length-1;if(n<r)return 0;var i=utf8CheckByte(t[n]);if(i>=0)return i>0&&(e.lastNeed=i-1),i;if(--n<r||-2===i)return 0;if((i=utf8CheckByte(t[n]))>=0)return i>0&&(e.lastNeed=i-2),i;if(--n<r||-2===i)return 0;if((i=utf8CheckByte(t[n]))>=0)return i>0&&(2===i?i=0:e.lastNeed=i-3),i;return 0}(this,e,t);if(!this.lastNeed)return e.toString("utf8",t);this.lastTotal=r;var n=e.length-(r-this.lastNeed);return e.copy(this.lastChar,0,n),e.toString("utf8",t,n)},StringDecoder.prototype.fillLast=function(e){if(this.lastNeed<=e.length)return e.copy(this.lastChar,this.lastTotal-this.lastNeed,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);e.copy(this.lastChar,this.lastTotal-this.lastNeed,0,e.length),this.lastNeed-=e.length}},function(e,t,r){"use strict";e.exports=Transform;var n=r(103),i=r(90);function afterTransform(e,t){var r=this._transformState;r.transforming=!1;var n=r.writecb;if(!n)return this.emit("error",new Error("write callback called multiple times"));r.writechunk=null,r.writecb=null,null!=t&&this.push(t),n(e);var i=this._readableState;i.reading=!1,(i.needReadable||i.length<i.highWaterMark)&&this._read(i.highWaterMark)}function Transform(e){if(!(this instanceof Transform))return new Transform(e);n.call(this,e),this._transformState={afterTransform:afterTransform.bind(this),needTransform:!1,transforming:!1,writecb:null,writechunk:null,writeencoding:null},this._readableState.needReadable=!0,this._readableState.sync=!1,e&&("function"==typeof e.transform&&(this._transform=e.transform),"function"==typeof e.flush&&(this._flush=e.flush)),this.on("prefinish",prefinish)}function prefinish(){var e=this;"function"==typeof this._flush?this._flush(function(t,r){done(e,t,r)}):done(this,null,null)}function done(e,t,r){if(t)return e.emit("error",t);if(null!=r&&e.push(r),e._writableState.length)throw new Error("Calling transform done when ws.length != 0");if(e._transformState.transforming)throw new Error("Calling transform done when still transforming");return e.push(null)}i.inherits=r(38),i.inherits(Transform,n),Transform.prototype.push=function(e,t){return this._transformState.needTransform=!1,n.prototype.push.call(this,e,t)},Transform.prototype._transform=function(e,t,r){throw new Error("_transform() is not implemented")},Transform.prototype._write=function(e,t,r){var n=this._transformState;if(n.writecb=r,n.writechunk=e,n.writeencoding=t,!n.transforming){var i=this._readableState;(n.needTransform||i.needReadable||i.length<i.highWaterMark)&&this._read(i.highWaterMark)}},Transform.prototype._read=function(e){var t=this._transformState;null!==t.writechunk&&t.writecb&&!t.transforming?(t.transforming=!0,this._transform(t.writechunk,t.writeencoding,t.afterTransform)):t.needTransform=!0},Transform.prototype._destroy=function(e,t){var r=this;n.prototype._destroy.call(this,e,function(e){t(e),r.emit("close")})}},function(e,t,r){"use strict";var n=r(61);e.exports=function(){return n(this).length=0,this}},function(e,t,r){"use strict";e.exports=function(){}},function(e,t,r){"use strict";var n=r(1057),i=Math.max;e.exports=function(e){return i(0,n(e))}},function(e,t,r){"use strict";var n=Object.create,i=Object.getPrototypeOf,o={};e.exports=function(){var e=Object.setPrototypeOf,t=arguments[0]||n;return"function"==typeof e&&i(e(t(null),o))===o}},function(e,t,r){"use strict";var n,i,o,s,a=r(1061),c=r(61),u=Object.prototype.isPrototypeOf,l=Object.defineProperty,p={configurable:!0,enumerable:!1,writable:!0,value:void 0};n=function(e,t){if(c(e),null===t||a(t))return e;throw new TypeError("Prototype must be null or an object")},e.exports=(i=function(){var e,t=Object.create(null),r={},n=Object.getOwnPropertyDescriptor(Object.prototype,"__proto__");if(n){try{(e=n.set).call(t,r)}catch(e){}if(Object.getPrototypeOf(t)===r)return{set:e,level:2}}return t.__proto__=r,Object.getPrototypeOf(t)===r?{level:2}:((t={}).__proto__=r,Object.getPrototypeOf(t)===r&&{level:1})}())?(2===i.level?i.set?(s=i.set,o=function(e,t){return s.call(n(e,t),t),e}):o=function(e,t){return n(e,t).__proto__=t,e}:o=function self(e,t){var r;return n(e,t),(r=u.call(self.nullPolyfill,e))&&delete self.nullPolyfill.__proto__,null===t&&(t=self.nullPolyfill),e.__proto__=t,r&&l(self.nullPolyfill,"__proto__",p),e},Object.defineProperty(o,"level",{configurable:!1,enumerable:!1,writable:!1,value:i.level})):null,r(1062)},function(e,t,r){"use strict";var n=r(104),i=Array.prototype.forEach,o=Object.create;e.exports=function(e){var t=o(null);return i.call(arguments,function(e){n(e)&&function(e,t){var r;for(r in e)t[r]=e[r]}(Object(e),t)}),t}},function(e,t,r){"use strict";e.exports=r(1069)()?String.prototype.contains:r(1070)},function(e,t,r){"use strict";var n=r(1076);e.exports=function(e){if(!n(e))throw new TypeError(e+" is not iterable");return e}},function(e,t,r){"use strict";var n=r(14).Buffer,i=e.exports;for(var o in i.types={0:"reserved",1:"connect",2:"connack",3:"publish",4:"puback",5:"pubrec",6:"pubrel",7:"pubcomp",8:"subscribe",9:"suback",10:"unsubscribe",11:"unsuback",12:"pingreq",13:"pingresp",14:"disconnect",15:"reserved"},i.codes={},i.types){var s=i.types[o];i.codes[s]=o}function genHeader(e){return[0,1,2].map(function(t){return[0,1].map(function(r){return[0,1].map(function(o){var s=new n(1);return s.writeUInt8(i.codes[e]<<i.CMD_SHIFT|(r?i.DUP_MASK:0)|t<<i.QOS_SHIFT|o,0,!0),s})})})}i.CMD_SHIFT=4,i.CMD_MASK=240,i.DUP_MASK=8,i.QOS_MASK=3,i.QOS_SHIFT=1,i.RETAIN_MASK=1,i.LENGTH_MASK=127,i.LENGTH_FIN_MASK=128,i.SESSIONPRESENT_MASK=1,i.SESSIONPRESENT_HEADER=n.from([i.SESSIONPRESENT_MASK]),i.CONNACK_HEADER=n.from([i.codes.connack<<i.CMD_SHIFT]),i.USERNAME_MASK=128,i.PASSWORD_MASK=64,i.WILL_RETAIN_MASK=32,i.WILL_QOS_MASK=24,i.WILL_QOS_SHIFT=3,i.WILL_FLAG_MASK=4,i.CLEAN_SESSION_MASK=2,i.CONNECT_HEADER=n.from([i.codes.connect<<i.CMD_SHIFT]),i.PUBLISH_HEADER=genHeader("publish"),i.SUBSCRIBE_HEADER=genHeader("subscribe"),i.UNSUBSCRIBE_HEADER=genHeader("unsubscribe"),i.ACKS={unsuback:genHeader("unsuback"),puback:genHeader("puback"),pubcomp:genHeader("pubcomp"),pubrel:genHeader("pubrel"),pubrec:genHeader("pubrec")},i.SUBACK_HEADER=n.from([i.codes.suback<<i.CMD_SHIFT]),i.VERSION3=n.from([3]),i.VERSION4=n.from([4]),i.QOS=[0,1,2].map(function(e){return n.from([e])}),i.EMPTY={pingreq:n.from([i.codes.pingreq<<4,0]),pingresp:n.from([i.codes.pingresp<<4,0]),disconnect:n.from([i.codes.disconnect<<4,0])}},function(e,t,r){"use strict";var n=r(460),i=r(14).Buffer,o=i.allocUnsafe(0),s=i.from([0]),a=r(1100),c=r(131).nextTick,u=a.cache,l=a.generateNumber,p=a.generateCache,d=writeNumberCached,h=!0;function generate(e,t){switch(t.cork&&(t.cork(),c(uncork,t)),h&&(h=!1,p()),e.cmd){case"connect":return function connect(e,t){var r=e||{},o=r.protocolId||"MQTT",s=r.protocolVersion||4,a=r.will,c=r.clean,u=r.keepalive||0,l=r.clientId||"",p=r.username,h=r.password;void 0===c&&(c=!0);var f=0;if(!o||"string"!=typeof o&&!i.isBuffer(o))return t.emit("error",new Error("Invalid protocolId")),!1;f+=o.length+2;if(3!==s&&4!==s)return t.emit("error",new Error("Invalid protocol version")),!1;f+=1;if("string"!=typeof l&&!i.isBuffer(l)||!l&&4!==s||!l&&!c){if(s<4)return t.emit("error",new Error("clientId must be supplied before 3.1.1")),!1;if(1*c==0)return t.emit("error",new Error("clientId must be given if cleanSession set to 0")),!1}else f+=l.length+2;if("number"!=typeof u||u<0||u>65535||u%1!=0)return t.emit("error",new Error("Invalid keepalive")),!1;f+=2;if(f+=1,a){if("object"!=typeof a)return t.emit("error",new Error("Invalid will")),!1;if(!a.topic||"string"!=typeof a.topic)return t.emit("error",new Error("Invalid will topic")),!1;if(f+=i.byteLength(a.topic)+2,a.payload&&a.payload){if(!(a.payload.length>=0))return t.emit("error",new Error("Invalid will payload")),!1;"string"==typeof a.payload?f+=i.byteLength(a.payload)+2:f+=a.payload.length+2}else f+=2}var m=!1;if(null!=p){if(!isStringOrBuffer(p))return t.emit("error",new Error("Invalid username")),!1;m=!0,f+=i.byteLength(p)+2}if(null!=h){if(!m)return t.emit("error",new Error("Username is required to use password")),!1;if(!isStringOrBuffer(h))return t.emit("error",new Error("Invalid password")),!1;f+=byteLength(h)+2}t.write(n.CONNECT_HEADER),writeLength(t,f),writeStringOrBuffer(t,o),t.write(4===s?n.VERSION4:n.VERSION3);var g=0;g|=null!=p?n.USERNAME_MASK:0,g|=null!=h?n.PASSWORD_MASK:0,g|=a&&a.retain?n.WILL_RETAIN_MASK:0,g|=a&&a.qos?a.qos<<n.WILL_QOS_SHIFT:0,g|=a?n.WILL_FLAG_MASK:0,g|=c?n.CLEAN_SESSION_MASK:0,t.write(i.from([g])),d(t,u),writeStringOrBuffer(t,l),a&&(writeString(t,a.topic),writeStringOrBuffer(t,a.payload));null!=p&&writeStringOrBuffer(t,p);null!=h&&writeStringOrBuffer(t,h);return!0}(e,t);case"connack":return function connack(e,t){var r=(e||{}).returnCode;if("number"!=typeof r)return t.emit("error",new Error("Invalid return code")),!1;return t.write(n.CONNACK_HEADER),writeLength(t,2),t.write(e.sessionPresent?n.SESSIONPRESENT_HEADER:s),t.write(i.from([r]))}(e,t);case"publish":return function publish(e,t){var r=e||{},s=r.qos||0,a=r.retain?n.RETAIN_MASK:0,c=r.topic,u=r.payload||o,l=r.messageId,p=0;if("string"==typeof c)p+=i.byteLength(c)+2;else{if(!i.isBuffer(c))return t.emit("error",new Error("Invalid topic")),!1;p+=c.length+2}i.isBuffer(u)?p+=u.length:p+=i.byteLength(u);if(s&&"number"!=typeof l)return t.emit("error",new Error("Invalid messageId")),!1;s&&(p+=2);t.write(n.PUBLISH_HEADER[s][e.dup?1:0][a?1:0]),writeLength(t,p),d(t,byteLength(c)),t.write(c),s>0&&d(t,l);return t.write(u)}(e,t);case"puback":case"pubrec":case"pubrel":case"pubcomp":case"unsuback":return function confirmation(e,t){var r=e||{},i=r.cmd||"puback",o=r.messageId,s=r.dup&&"pubrel"===i?n.DUP_MASK:0,a=0;"pubrel"===i&&(a=1);if("number"!=typeof o)return t.emit("error",new Error("Invalid messageId")),!1;return t.write(n.ACKS[i][a][s][0]),writeLength(t,2),d(t,o)}(e,t);case"subscribe":return function subscribe(e,t){var r=e||{},o=r.dup?n.DUP_MASK:0,s=r.messageId,a=r.subscriptions,c=0;if("number"!=typeof s)return t.emit("error",new Error("Invalid messageId")),!1;c+=2;if("object"!=typeof a||!a.length)return t.emit("error",new Error("Invalid subscriptions")),!1;for(var u=0;u<a.length;u+=1){var l=a[u].topic,p=a[u].qos;if("string"!=typeof l)return t.emit("error",new Error("Invalid subscriptions - invalid topic")),!1;if("number"!=typeof p)return t.emit("error",new Error("Invalid subscriptions - invalid qos")),!1;c+=i.byteLength(l)+2+1}t.write(n.SUBSCRIBE_HEADER[1][o?1:0][0]),writeLength(t,c),d(t,s);for(var h=!0,f=0;f<a.length;f++){var m=a[f],g=m.topic,y=m.qos;writeString(t,g),h=t.write(n.QOS[y])}return h}(e,t);case"suback":return function suback(e,t){var r=e||{},o=r.messageId,s=r.granted,a=0;if("number"!=typeof o)return t.emit("error",new Error("Invalid messageId")),!1;a+=2;if("object"!=typeof s||!s.length)return t.emit("error",new Error("Invalid qos vector")),!1;for(var c=0;c<s.length;c+=1){if("number"!=typeof s[c])return t.emit("error",new Error("Invalid qos vector")),!1;a+=1}return t.write(n.SUBACK_HEADER),writeLength(t,a),d(t,o),t.write(i.from(s))}(e,t);case"unsubscribe":return function unsubscribe(e,t){var r=e||{},o=r.messageId,s=r.dup?n.DUP_MASK:0,a=r.unsubscriptions,c=0;if("number"!=typeof o)return t.emit("error",new Error("Invalid messageId")),!1;c+=2;if("object"!=typeof a||!a.length)return t.emit("error",new Error("Invalid unsubscriptions")),!1;for(var u=0;u<a.length;u+=1){if("string"!=typeof a[u])return t.emit("error",new Error("Invalid unsubscriptions")),!1;c+=i.byteLength(a[u])+2}t.write(n.UNSUBSCRIBE_HEADER[1][s?1:0][0]),writeLength(t,c),d(t,o);for(var l=!0,p=0;p<a.length;p++)l=writeString(t,a[p]);return l}(e,t);case"pingreq":case"pingresp":case"disconnect":return function emptyPacket(e,t){return t.write(n.EMPTY[e.cmd])}(e,t);default:return t.emit("error",new Error("Unknown command")),!1}}function uncork(e){e.uncork()}Object.defineProperty(generate,"cacheNumbers",{get:function(){return d===writeNumberCached},set:function(e){e?(u&&0!==Object.keys(u).length||(h=!0),d=writeNumberCached):(h=!1,d=writeNumberGenerated)}});var f={};function writeLength(e,t){var r=f[t];r||(r=function genBufLength(e){var t=0,r=0,n=i.allocUnsafe(function calcLengthLength(e){return e>=0&&e<128?1:e>=128&&e<16384?2:e>=16384&&e<2097152?3:e>=2097152&&e<268435456?4:0}(e));do{t=e%128|0,(e=e/128|0)>0&&(t|=128),n.writeUInt8(t,r++)}while(e>0);return n}(t),t<16384&&(f[t]=r)),e.write(r)}function writeString(e,t){var r=i.byteLength(t);d(e,r),e.write(t,"utf8")}function writeNumberCached(e,t){return e.write(u[t])}function writeNumberGenerated(e,t){return e.write(l(t))}function writeStringOrBuffer(e,t){"string"==typeof t?writeString(e,t):t?(d(e,t.length),e.write(t)):d(e,0)}function byteLength(e){return e?e instanceof i?e.length:i.byteLength(e):0}function isStringOrBuffer(e){return"string"==typeof e||e instanceof i}e.exports=generate},function(e,t,r){"use strict";var n=r(47);e.exports=function buildBuilder(e,t){var r,i;return t.port=t.port||1883,t.hostname=t.hostname||t.host||"localhost",r=t.port,i=t.hostname,n.createConnection(r,i)}},function(e,t,r){"use strict";var n=!1,i=[];function sendSocketMessage(e){n?wx.sendSocketMessage({data:e.buffer||e}):i.push(e)}var o=r(464);function createWebSocket(e,t){var r="MQIsdp"===t.protocolId&&3===t.protocolVersion?"mqttv3.1":"mqtt";!function setDefaultOpts(e){e.hostname||(e.hostname="localhost"),e.path||(e.path="/"),e.wsOptions||(e.wsOptions={})}(t);var s=function buildUrl(e,t){var r="wxs"===e.protocol?"wss":"ws",n=r+"://"+e.hostname+e.path;return e.port&&80!==e.port&&443!==e.port&&(n=r+"://"+e.hostname+":"+e.port+e.path),"function"==typeof e.transformWsUrl&&(n=e.transformWsUrl(n,e,t)),n}(t,e);return o(function WebSocket(e,t){var r={OPEN:1,CLOSING:2,CLOSED:3,readyState:n?1:0,send:sendSocketMessage,close:wx.closeSocket,onopen:null,onmessage:null,onclose:null,onerror:null};return wx.connectSocket({url:e,protocols:t}),wx.onSocketOpen(function(e){r.readyState=r.OPEN,n=!0;for(var t=0;t<i.length;t++)sendSocketMessage(i[t]);i=[],r.onopen&&r.onopen.apply(r,arguments)}),wx.onSocketMessage(function(e){r.onmessage&&r.onmessage.apply(r,arguments)}),wx.onSocketClose(function(){r.onclose&&r.onclose.apply(r,arguments),r.readyState=r.CLOSED,n=!1}),wx.onSocketError(function(){r.onerror&&r.onerror.apply(r,arguments),r.readyState=r.CLOSED,n=!1}),r}(s,[r]))}e.exports=function buildBuilder(e,t){if(t.hostname=t.hostname||t.host,!t.hostname)throw new Error("Could not determine host. Specify host manually.");return createWebSocket(e,t)}},function(e,t,r){var n=r(1104);e.exports=r(472),e.exports.Server=n.Server,e.exports.createServer=n.createServer},function(e,t,r){"use strict";
/*!
 * ws: a node.js websocket client
 * Copyright(c) 2011 Einar Otto Stangvik <einaros@gmail.com>
 * MIT Licensed
 */const n=r(466);n.Server=r(1107),n.Receiver=r(469),n.Sender=r(471),e.exports=n},function(e,t,r){"use strict";
/*!
 * ws: a node.js websocket client
 * Copyright(c) 2011 Einar Otto Stangvik <einaros@gmail.com>
 * MIT Licensed
 */const n=r(5),i=r(12),o=r(467),s=r(21),a=r(23),c=r(7),u=r(173),l=r(1105),p=r(468),d=r(174),h=r(469),f=r(471),m=[8,13],g=3e4;class WebSocket extends n{constructor(e,t,r){super(),t?"string"==typeof t?t=[t]:Array.isArray(t)||(r=t,t=[]):t=[],this.readyState=WebSocket.CONNECTING,this.bytesReceived=0,this.extensions={},this.protocol="",this._binaryType=d.BINARY_TYPES[0],this._finalize=this.finalize.bind(this),this._closeFrameReceived=!1,this._closeFrameSent=!1,this._closeMessage="",this._closeTimer=null,this._finalized=!1,this._closeCode=1006,this._receiver=null,this._sender=null,this._socket=null,this._ultron=null,Array.isArray(e)?function initAsServerClient(e,t,r){this.protocolVersion=r.protocolVersion,this._maxPayload=r.maxPayload,this.extensions=r.extensions,this.protocol=r.protocol,this._isServer=!0,this.setSocket(e,t)}.call(this,e[0],e[1],r):function initAsClient(e,t,r){if(r=Object.assign({protocolVersion:m[1],protocol:t.join(","),perMessageDeflate:!0,handshakeTimeout:null,localAddress:null,headers:null,family:null,origin:null,agent:null,host:null,checkServerIdentity:null,rejectUnauthorized:null,passphrase:null,ciphers:null,ecdhCurve:null,cert:null,key:null,pfx:null,ca:null},r),-1===m.indexOf(r.protocolVersion))throw new Error(`unsupported protocol version: ${r.protocolVersion} `+`(supported versions: ${m.join(", ")})`);this.protocolVersion=r.protocolVersion,this._isServer=!1,this.url=e;const n=c.parse(e),o="ws+unix:"===n.protocol;if(!(n.host||o&&n.path))throw new Error("invalid url");const l="wss:"===n.protocol||"https:"===n.protocol,h=i.randomBytes(16).toString("base64"),f=l?s:a;var g;const y={port:n.port||(l?443:80),host:n.hostname,path:"/",headers:{"Sec-WebSocket-Version":r.protocolVersion,"Sec-WebSocket-Key":h,Connection:"Upgrade",Upgrade:"websocket"}};r.headers&&Object.assign(y.headers,r.headers);r.perMessageDeflate&&(g=new u(!0!==r.perMessageDeflate?r.perMessageDeflate:{},!1),y.headers["Sec-WebSocket-Extensions"]=p.format({[u.extensionName]:g.offer()}));r.protocol&&(y.headers["Sec-WebSocket-Protocol"]=r.protocol);r.origin&&(r.protocolVersion<13?y.headers["Sec-WebSocket-Origin"]=r.origin:y.headers.Origin=r.origin);r.host&&(y.headers.Host=r.host);n.auth&&(y.auth=n.auth);r.localAddress&&(y.localAddress=r.localAddress);r.family&&(y.family=r.family);if(o){const e=n.path.split(":");y.socketPath=e[0],y.path=e[1]}else n.path&&("/"!==n.path.charAt(0)?y.path=`/${n.path}`:y.path=n.path);var v=r.agent;(null!=r.rejectUnauthorized||r.checkServerIdentity||r.passphrase||r.ciphers||r.ecdhCurve||r.cert||r.key||r.pfx||r.ca)&&(r.passphrase&&(y.passphrase=r.passphrase),r.ciphers&&(y.ciphers=r.ciphers),r.ecdhCurve&&(y.ecdhCurve=r.ecdhCurve),r.cert&&(y.cert=r.cert),r.key&&(y.key=r.key),r.pfx&&(y.pfx=r.pfx),r.ca&&(y.ca=r.ca),r.checkServerIdentity&&(y.checkServerIdentity=r.checkServerIdentity),null!=r.rejectUnauthorized&&(y.rejectUnauthorized=r.rejectUnauthorized),v||(v=new f.Agent(y)));v&&(y.agent=v);this._req=f.get(y),r.handshakeTimeout&&this._req.setTimeout(r.handshakeTimeout,()=>{this._req.abort(),this.finalize(new Error("opening handshake has timed out"))});this._req.on("error",e=>{this._req.aborted||(this._req=null,this.finalize(e))}),this._req.on("response",e=>{this.emit("unexpected-response",this._req,e)||(this._req.abort(),this.finalize(new Error(`unexpected server response (${e.statusCode})`)))}),this._req.on("upgrade",(e,t,n)=>{if(this.emit("headers",e.headers,e),this.readyState!==WebSocket.CONNECTING)return;this._req=null;const o=i.createHash("sha1").update(h+d.GUID,"binary").digest("base64");if(e.headers["sec-websocket-accept"]!==o)return t.destroy(),this.finalize(new Error("invalid server key"));const s=e.headers["sec-websocket-protocol"],a=(r.protocol||"").split(/, */);var c;if(!r.protocol&&s?c="server sent a subprotocol even though none requested":r.protocol&&!s?c="server sent no subprotocol even though requested":s&&-1===a.indexOf(s)&&(c="server responded with an invalid protocol"),c)return t.destroy(),this.finalize(new Error(c));if(s&&(this.protocol=s),g)try{const r=p.parse(e.headers["sec-websocket-extensions"]);r[u.extensionName]&&(g.accept(r[u.extensionName]),this.extensions[u.extensionName]=g)}catch(e){return t.destroy(),void this.finalize(new Error("invalid Sec-WebSocket-Extensions header"))}this.setSocket(t,n)})}.call(this,e,t,r)}get CONNECTING(){return WebSocket.CONNECTING}get CLOSING(){return WebSocket.CLOSING}get CLOSED(){return WebSocket.CLOSED}get OPEN(){return WebSocket.OPEN}get bufferedAmount(){var e=0;return this._socket&&(e=this._socket.bufferSize+this._sender._bufferedBytes),e}get binaryType(){return this._binaryType}set binaryType(e){d.BINARY_TYPES.indexOf(e)<0||(this._binaryType=e,this._receiver&&(this._receiver._binaryType=e))}setSocket(e,t){e.setTimeout(0),e.setNoDelay(),this._receiver=new h(this.extensions,this._maxPayload,this.binaryType),this._sender=new f(e,this.extensions),this._ultron=new o(e),this._socket=e,this._ultron.on("close",this._finalize),this._ultron.on("error",this._finalize),this._ultron.on("end",this._finalize),t.length>0&&e.unshift(t),this._ultron.on("data",e=>{this.bytesReceived+=e.length,this._receiver.add(e)}),this._receiver.onmessage=(e=>this.emit("message",e)),this._receiver.onping=(e=>{this.pong(e,!this._isServer,!0),this.emit("ping",e)}),this._receiver.onpong=(e=>this.emit("pong",e)),this._receiver.onclose=((e,t)=>{this._closeFrameReceived=!0,this._closeMessage=t,this._closeCode=e,this._finalized||this.close(e,t)}),this._receiver.onerror=((e,t)=>{this._closeMessage="",this._closeCode=t,this.readyState=WebSocket.CLOSING,this.emit("error",e),this.finalize(!0)}),this.readyState=WebSocket.OPEN,this.emit("open")}finalize(e){if(!this._finalized){if(this.readyState=WebSocket.CLOSING,this._finalized=!0,"object"==typeof e&&this.emit("error",e),!this._socket)return this.emitClose();clearTimeout(this._closeTimer),this._closeTimer=null,this._ultron.destroy(),this._ultron=null,this._socket.on("error",d.NOOP),e?this._socket.destroy():this._socket.end(),this._socket=null,this._sender=null,this._receiver.cleanup(()=>this.emitClose()),this._receiver=null}}emitClose(){this.readyState=WebSocket.CLOSED,this.emit("close",this._closeCode,this._closeMessage),this.extensions[u.extensionName]&&this.extensions[u.extensionName].cleanup(),this.extensions=null,this.removeAllListeners()}pause(){if(this.readyState!==WebSocket.OPEN)throw new Error("not opened");this._socket.pause()}resume(){if(this.readyState!==WebSocket.OPEN)throw new Error("not opened");this._socket.resume()}close(e,t){if(this.readyState!==WebSocket.CLOSED)return this.readyState===WebSocket.CONNECTING?(this._req.abort(),void this.finalize(new Error("closed before the connection is established"))):void(this.readyState!==WebSocket.CLOSING?(this.readyState=WebSocket.CLOSING,this._sender.close(e,t,!this._isServer,e=>{e||(this._closeFrameSent=!0,this._finalized||(this._closeFrameReceived&&this._socket.end(),this._closeTimer=setTimeout(this._finalize,g,!0)))})):this._closeFrameSent&&this._closeFrameReceived&&this._socket.end())}ping(e,t,r){if(this.readyState!==WebSocket.OPEN){if(r)return;throw new Error("not opened")}"number"==typeof e&&(e=e.toString()),void 0===t&&(t=!this._isServer),this._sender.ping(e||d.EMPTY_BUFFER,t)}pong(e,t,r){if(this.readyState!==WebSocket.OPEN){if(r)return;throw new Error("not opened")}"number"==typeof e&&(e=e.toString()),void 0===t&&(t=!this._isServer),this._sender.pong(e||d.EMPTY_BUFFER,t)}send(e,t,r){if("function"==typeof t&&(r=t,t={}),this.readyState!==WebSocket.OPEN){if(!r)throw new Error("not opened");return void r(new Error("not opened"))}"number"==typeof e&&(e=e.toString());const n=Object.assign({binary:"string"!=typeof e,mask:!this._isServer,compress:!0,fin:!0},t);this.extensions[u.extensionName]||(n.compress=!1),this._sender.send(e||d.EMPTY_BUFFER,n,r)}terminate(){if(this.readyState!==WebSocket.CLOSED)return this.readyState===WebSocket.CONNECTING?(this._req.abort(),void this.finalize(new Error("closed before the connection is established"))):void this.finalize(!0)}}WebSocket.CONNECTING=0,WebSocket.OPEN=1,WebSocket.CLOSING=2,WebSocket.CLOSED=3,["open","error","close","message"].forEach(e=>{Object.defineProperty(WebSocket.prototype,`on${e}`,{get(){const t=this.listeners(e);for(var r=0;r<t.length;r++)if(t[r]._listener)return t[r]._listener},set(t){const r=this.listeners(e);for(var n=0;n<r.length;n++)r[n]._listener&&this.removeListener(e,r[n]);this.addEventListener(e,t)}})}),WebSocket.prototype.addEventListener=l.addEventListener,WebSocket.prototype.removeEventListener=l.removeEventListener,e.exports=WebSocket},function(e,t,r){"use strict";var n=Object.prototype.hasOwnProperty,i=0;function Ultron(e){if(!(this instanceof Ultron))return new Ultron(e);this.id=i++,this.ee=e}Ultron.prototype.on=function on(e,t,r){return t.__ultron=this.id,this.ee.on(e,t,r),this},Ultron.prototype.once=function once(e,t,r){return t.__ultron=this.id,this.ee.once(e,t,r),this},Ultron.prototype.remove=function remove(){var e,t=arguments,r=this.ee;if(1===t.length&&"string"==typeof t[0])t=t[0].split(/[, ]+/);else if(!t.length)if(r.eventNames)t=r.eventNames();else if(r._events){for(e in t=[],r._events)n.call(r._events,e)&&t.push(e);Object.getOwnPropertySymbols&&(t=t.concat(Object.getOwnPropertySymbols(r._events)))}for(var i=0;i<t.length;i++)for(var o=r.listeners(t[i]),s=0;s<o.length;s++){if((e=o[s]).listener){if(e.listener.__ultron!==this.id)continue}else if(e.__ultron!==this.id)continue;r.removeListener(t[i],e)}return this},Ultron.prototype.destroy=function destroy(){return!!this.ee&&(this.remove(),this.ee=null,!0)},e.exports=Ultron},function(e,t,r){"use strict";const n=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,1,1,1,1,1,0,0,1,1,0,1,1,0,1,1,1,1,1,1,1,1,1,1,0,0,0,0,0,0,0,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,0,0,0,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,0,1,0,1,0];function push(e,t,r){Object.prototype.hasOwnProperty.call(e,t)?e[t].push(r):e[t]=[r]}e.exports={format:function format(e){return Object.keys(e).map(t=>{var r=e[t];return Array.isArray(r)||(r=[r]),r.map(e=>[t].concat(Object.keys(e).map(t=>{var r=e[t];return Array.isArray(r)||(r=[r]),r.map(e=>!0===e?t:`${t}=${e}`).join("; ")})).join("; ")).join(", ")}).join(", ")},parse:function parse(e){const t={};if(void 0===e||""===e)return t;for(var r,i,o={},s=!1,a=!1,c=!1,u=-1,l=-1,p=0;p<e.length;p++){const h=e.charCodeAt(p);if(void 0===r)if(-1===l&&1===n[h])-1===u&&(u=p);else if(32===h||9===h)-1===l&&-1!==u&&(l=p);else{if(59!==h&&44!==h)throw new Error(`unexpected character at index ${p}`);{if(-1===u)throw new Error(`unexpected character at index ${p}`);-1===l&&(l=p);const n=e.slice(u,l);44===h?(push(t,n,o),o={}):r=n,u=l=-1}}else if(void 0===i)if(-1===l&&1===n[h])-1===u&&(u=p);else if(32===h||9===h)-1===l&&-1!==u&&(l=p);else if(59===h||44===h){if(-1===u)throw new Error(`unexpected character at index ${p}`);-1===l&&(l=p),push(o,e.slice(u,l),!0),44===h&&(push(t,r,o),o={},r=void 0),u=l=-1}else{if(61!==h||-1===u||-1!==l)throw new Error(`unexpected character at index ${p}`);i=e.slice(u,p),u=l=-1}else if(a){if(1!==n[h])throw new Error(`unexpected character at index ${p}`);-1===u?u=p:s||(s=!0),a=!1}else if(c)if(1===n[h])-1===u&&(u=p);else if(34===h&&-1!==u)c=!1,l=p;else{if(92!==h)throw new Error(`unexpected character at index ${p}`);a=!0}else if(34===h&&61===e.charCodeAt(p-1))c=!0;else if(-1===l&&1===n[h])-1===u&&(u=p);else if(-1===u||32!==h&&9!==h){if(59!==h&&44!==h)throw new Error(`unexpected character at index ${p}`);if(-1===u)throw new Error(`unexpected character at index ${p}`);-1===l&&(l=p);var d=e.slice(u,l);s&&(d=d.replace(/\\/g,""),s=!1),push(o,i,d),44===h&&(push(t,r,o),o={},r=void 0),i=void 0,u=l=-1}else-1===l&&(l=p)}if(-1===u||c)throw new Error("unexpected end of input");-1===l&&(l=p);const h=e.slice(u,l);return void 0===r?push(t,h,{}):(void 0===i?push(o,h,!0):push(o,i,s?h.replace(/\\/g,""):h),push(t,r,o)),t}}},function(e,t,r){"use strict";
/*!
 * ws: a node.js websocket client
 * Copyright(c) 2011 Einar Otto Stangvik <einaros@gmail.com>
 * MIT Licensed
 */const n=r(14),i=r(173),o=r(1106),s=r(250),a=r(470),c=r(174),u=n.Buffer,l=0,p=1,d=2,h=3,f=4,m=5;function toBuffer(e,t){return 1===e.length?e[0]:e.length>1?s.concat(e,t):c.EMPTY_BUFFER}e.exports=class Receiver{constructor(e,t,r){this._binaryType=r||c.BINARY_TYPES[0],this._extensions=e||{},this._maxPayload=0|t,this._bufferedBytes=0,this._buffers=[],this._compressed=!1,this._payloadLength=0,this._fragmented=0,this._masked=!1,this._fin=!1,this._mask=null,this._opcode=0,this._totalPayloadLength=0,this._messageLength=0,this._fragments=[],this._cleanupCallback=null,this._hadError=!1,this._dead=!1,this._loop=!1,this.onmessage=null,this.onclose=null,this.onerror=null,this.onping=null,this.onpong=null,this._state=l}readBuffer(e){var t,r,n=0;if(this._bufferedBytes-=e,e===this._buffers[0].length)return this._buffers.shift();if(e<this._buffers[0].length)return t=this._buffers[0].slice(0,e),this._buffers[0]=this._buffers[0].slice(e),t;for(t=u.allocUnsafe(e);e>0;)e>=(r=this._buffers[0].length)?(this._buffers[0].copy(t,n),n+=r,this._buffers.shift()):(this._buffers[0].copy(t,n,0,e),this._buffers[0]=this._buffers[0].slice(e)),e-=r;return t}hasBufferedBytes(e){return this._bufferedBytes>=e||(this._loop=!1,this._dead&&this.cleanup(this._cleanupCallback),!1)}add(e){this._dead||(this._bufferedBytes+=e.length,this._buffers.push(e),this.startLoop())}startLoop(){for(this._loop=!0;this._loop;)switch(this._state){case l:this.getInfo();break;case p:this.getPayloadLength16();break;case d:this.getPayloadLength64();break;case h:this.getMask();break;case f:this.getData();break;default:this._loop=!1}}getInfo(){if(!this.hasBufferedBytes(2))return;const e=this.readBuffer(2);if(0!=(48&e[0]))return void this.error(new Error("RSV2 and RSV3 must be clear"),1002);const t=64==(64&e[0]);if(!t||this._extensions[i.extensionName]){if(this._fin=128==(128&e[0]),this._opcode=15&e[0],this._payloadLength=127&e[1],0===this._opcode){if(t)return void this.error(new Error("RSV1 must be clear"),1002);if(!this._fragmented)return void this.error(new Error(`invalid opcode: ${this._opcode}`),1002);this._opcode=this._fragmented}else if(1===this._opcode||2===this._opcode){if(this._fragmented)return void this.error(new Error(`invalid opcode: ${this._opcode}`),1002);this._compressed=t}else{if(!(this._opcode>7&&this._opcode<11))return void this.error(new Error(`invalid opcode: ${this._opcode}`),1002);if(!this._fin)return void this.error(new Error("FIN must be set"),1002);if(t)return void this.error(new Error("RSV1 must be clear"),1002);if(this._payloadLength>125)return void this.error(new Error("invalid payload length"),1002)}this._fin||this._fragmented||(this._fragmented=this._opcode),this._masked=128==(128&e[1]),126===this._payloadLength?this._state=p:127===this._payloadLength?this._state=d:this.haveLength()}else this.error(new Error("RSV1 must be clear"),1002)}getPayloadLength16(){this.hasBufferedBytes(2)&&(this._payloadLength=this.readBuffer(2).readUInt16BE(0,!0),this.haveLength())}getPayloadLength64(){if(!this.hasBufferedBytes(8))return;const e=this.readBuffer(8),t=e.readUInt32BE(0,!0);t>Math.pow(2,21)-1?this.error(new Error("max payload size exceeded"),1009):(this._payloadLength=t*Math.pow(2,32)+e.readUInt32BE(4,!0),this.haveLength())}haveLength(){this._opcode<8&&this.maxPayloadExceeded(this._payloadLength)||(this._masked?this._state=h:this._state=f)}getMask(){this.hasBufferedBytes(4)&&(this._mask=this.readBuffer(4),this._state=f)}getData(){var e=c.EMPTY_BUFFER;if(this._payloadLength){if(!this.hasBufferedBytes(this._payloadLength))return;e=this.readBuffer(this._payloadLength),this._masked&&s.unmask(e,this._mask)}this._opcode>7?this.controlMessage(e):this._compressed?(this._state=m,this.decompress(e)):this.pushFragment(e)&&this.dataMessage()}decompress(e){this._extensions[i.extensionName].decompress(e,this._fin,(e,t)=>{e?this.error(e,1009===e.closeCode?1009:1007):(this.pushFragment(t)&&this.dataMessage(),this.startLoop())})}dataMessage(){if(this._fin){const t=this._messageLength,r=this._fragments;if(this._totalPayloadLength=0,this._messageLength=0,this._fragmented=0,this._fragments=[],2===this._opcode){var e;e="nodebuffer"===this._binaryType?toBuffer(r,t):"arraybuffer"===this._binaryType?function toArrayBuffer(e){return 0===e.byteOffset&&e.byteLength===e.buffer.byteLength?e.buffer:e.buffer.slice(e.byteOffset,e.byteOffset+e.byteLength)}(toBuffer(r,t)):r,this.onmessage(e)}else{const e=toBuffer(r,t);if(!o(e))return void this.error(new Error("invalid utf8 sequence"),1007);this.onmessage(e.toString())}}this._state=l}controlMessage(e){if(8!==this._opcode)9===this._opcode?this.onping(e):this.onpong(e),this._state=l;else if(0===e.length)this.onclose(1e3,""),this._loop=!1,this.cleanup(this._cleanupCallback);else if(1===e.length)this.error(new Error("invalid payload length"),1002);else{const t=e.readUInt16BE(0,!0);if(!a.isValidErrorCode(t))return void this.error(new Error(`invalid status code: ${t}`),1002);const r=e.slice(2);if(!o(r))return void this.error(new Error("invalid utf8 sequence"),1007);this.onclose(t,r.toString()),this._loop=!1,this.cleanup(this._cleanupCallback)}}error(e,t){this.onerror(e,t),this._hadError=!0,this._loop=!1,this.cleanup(this._cleanupCallback)}maxPayloadExceeded(e){if(0===e||this._maxPayload<1)return!1;const t=this._totalPayloadLength+e;return t<=this._maxPayload?(this._totalPayloadLength=t,!1):(this.error(new Error("max payload size exceeded"),1009),!0)}pushFragment(e){if(0===e.length)return!0;const t=this._messageLength+e.length;return this._maxPayload<1||t<=this._maxPayload?(this._messageLength=t,this._fragments.push(e),!0):(this.error(new Error("max payload size exceeded"),1009),!1)}cleanup(e){this._dead=!0,this._hadError||!this._loop&&this._state!==m?(this._extensions=null,this._fragments=null,this._buffers=null,this._mask=null,this._cleanupCallback=null,this.onmessage=null,this.onclose=null,this.onerror=null,this.onping=null,this.onpong=null,e&&e()):this._cleanupCallback=e}}},function(e,t,r){"use strict";
/*!
 * ws: a node.js websocket client
 * Copyright(c) 2011 Einar Otto Stangvik <einaros@gmail.com>
 * MIT Licensed
 */e.exports={isValidErrorCode:function(e){return e>=1e3&&e<=1013&&1004!==e&&1005!==e&&1006!==e||e>=3e3&&e<=4999},1000:"normal",1001:"going away",1002:"protocol error",1003:"unsupported data",1004:"reserved",1005:"reserved for extensions",1006:"reserved for extensions",1007:"inconsistent or invalid data",1008:"policy violation",1009:"message too big",1010:"extension handshake missing",1011:"an unexpected condition prevented the request from being fulfilled",1012:"service restart",1013:"try again later"}},function(e,t,r){"use strict";
/*!
 * ws: a node.js websocket client
 * Copyright(c) 2011 Einar Otto Stangvik <einaros@gmail.com>
 * MIT Licensed
 */const n=r(14),i=r(12),o=r(173),s=r(250),a=r(470),c=r(174),u=n.Buffer;class Sender{constructor(e,t){this._extensions=t||{},this._socket=e,this._firstFragment=!0,this._compress=!1,this._bufferedBytes=0,this._deflating=!1,this._queue=[]}static frame(e,t){const r=e.length<1024||t.mask&&t.readOnly;var n=t.mask?6:2,o=e.length;e.length>=65536?(n+=8,o=127):e.length>125&&(n+=2,o=126);const a=u.allocUnsafe(r?e.length+n:n);if(a[0]=t.fin?128|t.opcode:t.opcode,t.rsv1&&(a[0]|=64),126===o?a.writeUInt16BE(e.length,2,!0):127===o&&(a.writeUInt32BE(0,2,!0),a.writeUInt32BE(e.length,6,!0)),!t.mask)return a[1]=o,r?(e.copy(a,n),[a]):[a,e];const c=i.randomBytes(4);return a[1]=128|o,a[n-4]=c[0],a[n-3]=c[1],a[n-2]=c[2],a[n-1]=c[3],r?(s.mask(e,c,a,n,e.length),[a]):(s.mask(e,c,e,0,e.length),[a,e])}close(e,t,r,n){var i;if(void 0===e)e=1e3;else if("number"!=typeof e||!a.isValidErrorCode(e))throw new Error("first argument must be a valid error code number");void 0===t||""===t?1e3===e?i=c.EMPTY_BUFFER:(i=u.allocUnsafe(2)).writeUInt16BE(e,0,!0):((i=u.allocUnsafe(2+u.byteLength(t))).writeUInt16BE(e,0,!0),i.write(t,2)),this._deflating?this.enqueue([this.doClose,i,r,n]):this.doClose(i,r,n)}doClose(e,t,r){this.sendFrame(Sender.frame(e,{fin:!0,rsv1:!1,opcode:8,mask:t,readOnly:!1}),r)}ping(e,t){var r=!0;u.isBuffer(e)||(e instanceof ArrayBuffer?e=u.from(e):ArrayBuffer.isView(e)?e=viewToBuffer(e):(e=u.from(e),r=!1)),this._deflating?this.enqueue([this.doPing,e,t,r]):this.doPing(e,t,r)}doPing(e,t,r){this.sendFrame(Sender.frame(e,{fin:!0,rsv1:!1,opcode:9,mask:t,readOnly:r}))}pong(e,t){var r=!0;u.isBuffer(e)||(e instanceof ArrayBuffer?e=u.from(e):ArrayBuffer.isView(e)?e=viewToBuffer(e):(e=u.from(e),r=!1)),this._deflating?this.enqueue([this.doPong,e,t,r]):this.doPong(e,t,r)}doPong(e,t,r){this.sendFrame(Sender.frame(e,{fin:!0,rsv1:!1,opcode:10,mask:t,readOnly:r}))}send(e,t,r){var n=t.binary?2:1,i=t.compress,s=!0;u.isBuffer(e)||(e instanceof ArrayBuffer?e=u.from(e):ArrayBuffer.isView(e)?e=viewToBuffer(e):(e=u.from(e),s=!1));const a=this._extensions[o.extensionName];if(this._firstFragment?(this._firstFragment=!1,i&&a&&(i=e.length>=a._threshold),this._compress=i):(i=!1,n=0),t.fin&&(this._firstFragment=!0),a){const o={fin:t.fin,rsv1:i,opcode:n,mask:t.mask,readOnly:s};this._deflating?this.enqueue([this.dispatch,e,this._compress,o,r]):this.dispatch(e,this._compress,o,r)}else this.sendFrame(Sender.frame(e,{fin:t.fin,rsv1:!1,opcode:n,mask:t.mask,readOnly:s}),r)}dispatch(e,t,r,n){if(!t)return void this.sendFrame(Sender.frame(e,r),n);const i=this._extensions[o.extensionName];this._deflating=!0,i.compress(e,r.fin,(e,t)=>{r.readOnly=!1,this.sendFrame(Sender.frame(t,r),n),this._deflating=!1,this.dequeue()})}dequeue(){for(;!this._deflating&&this._queue.length;){const e=this._queue.shift();this._bufferedBytes-=e[1].length,e[0].apply(this,e.slice(1))}}enqueue(e){this._bufferedBytes+=e[1].length,this._queue.push(e)}sendFrame(e,t){2===e.length?(this._socket.write(e[0]),this._socket.write(e[1],t)):this._socket.write(e[0],t)}}function viewToBuffer(e){const t=u.from(e.buffer);return e.byteLength!==e.buffer.byteLength?t.slice(e.byteOffset,e.byteOffset+e.byteLength):t}e.exports=Sender},function(e,t,r){"use strict";var n=r(55).Transform,i=r(473),o=r(465),s=r(14).Buffer;e.exports=function WebSocketStream(e,t,r){var a,c,u="browser"===process.title,l=!!global.WebSocket,p=u?function socketWriteBrowser(e,t,r){if(c.bufferedAmount>h)return void setTimeout(socketWriteBrowser,f,e,t,r);m&&"string"==typeof e&&(e=s.from(e,"utf8"));try{c.send(e)}catch(e){return r(e)}r()}:function socketWriteNode(e,t,r){if(c.readyState!==c.OPEN)return void r();m&&"string"==typeof e&&(e=s.from(e,"utf8"));c.send(e,r)};t&&!Array.isArray(t)&&"object"==typeof t&&(r=t,t=null,("string"==typeof r.protocol||Array.isArray(r.protocol))&&(t=r.protocol));r||(r={});void 0===r.objectMode&&(r.objectMode=!(!0===r.binary||void 0===r.binary));var d=function buildProxy(e,t,r){var i=new n({objectMode:e.objectMode});return i._write=t,i._flush=r,i}(r,p,function socketEnd(e){c.close(),e()});r.objectMode||(d._writev=function writev(e,t){for(var r=new Array(e.length),n=0;n<e.length;n++)"string"==typeof e[n].chunk?r[n]=s.from(e[n],"utf8"):r[n]=e[n].chunk;this._write(s.concat(r),"binary",t)});var h=r.browserBufferSize||524288,f=r.browserBufferTimeout||1e3;"object"==typeof e?c=e:(c=l&&u?new o(e,t):new o(e,t,r)).binaryType="arraybuffer";c.readyState===c.OPEN?a=d:(a=i.obj(),c.onopen=function onopen(){a.setReadable(d),a.setWritable(d),a.emit("connect")});a.socket=c,c.onclose=function onclose(){a.end(),a.destroy()},c.onerror=function onerror(e){a.destroy(e)},c.onmessage=function onmessage(e){var t=e.data;t=t instanceof ArrayBuffer?s.from(t):s.from(t,"utf8");d.push(t)},d.on("close",function destroy(){c.close()});var m=!r.objectMode;return a}},function(e,t,r){var n=r(55),i=r(172),o=r(38),s=r(1108),a=Buffer.from&&Buffer.from!==Uint8Array.from?Buffer.from([0]):new Buffer([0]),c=function(e,t){e._corked?e.once("uncork",t):t()},u=function(e,t){return function(r){r?function(e,t){e._autoDestroy&&e.destroy(t)}(e,"premature close"===r.message?null:r):t&&!e._ended&&e.end()}},l=function(e,t,r){if(!(this instanceof l))return new l(e,t,r);n.Duplex.call(this,r),this._writable=null,this._readable=null,this._readable2=null,this._autoDestroy=!r||!1!==r.autoDestroy,this._forwardDestroy=!r||!1!==r.destroy,this._forwardEnd=!r||!1!==r.end,this._corked=1,this._ondrain=null,this._drained=!1,this._forwarding=!1,this._unwrite=null,this._unread=null,this._ended=!1,this.destroyed=!1,e&&this.setWritable(e),t&&this.setReadable(t)};o(l,n.Duplex),l.obj=function(e,t,r){return r||(r={}),r.objectMode=!0,r.highWaterMark=16,new l(e,t,r)},l.prototype.cork=function(){1==++this._corked&&this.emit("cork")},l.prototype.uncork=function(){this._corked&&0==--this._corked&&this.emit("uncork")},l.prototype.setWritable=function(e){if(this._unwrite&&this._unwrite(),this.destroyed)e&&e.destroy&&e.destroy();else if(null!==e&&!1!==e){var t=this,r=i(e,{writable:!0,readable:!1},u(this,this._forwardEnd)),n=function(){var e=t._ondrain;t._ondrain=null,e&&e()};this._unwrite&&process.nextTick(n),this._writable=e,this._writable.on("drain",n),this._unwrite=function(){t._writable.removeListener("drain",n),r()},this.uncork()}else this.end()},l.prototype.setReadable=function(e){if(this._unread&&this._unread(),this.destroyed)e&&e.destroy&&e.destroy();else{if(null===e||!1===e)return this.push(null),void this.resume();var t,r=this,o=i(e,{writable:!1,readable:!0},u(this)),s=function(){r._forward()},a=function(){r.push(null)};this._drained=!0,this._readable=e,this._readable2=e._readableState?e:(t=e,new n.Readable({objectMode:!0,highWaterMark:16}).wrap(t)),this._readable2.on("readable",s),this._readable2.on("end",a),this._unread=function(){r._readable2.removeListener("readable",s),r._readable2.removeListener("end",a),o()},this._forward()}},l.prototype._read=function(){this._drained=!0,this._forward()},l.prototype._forward=function(){if(!this._forwarding&&this._readable2&&this._drained){var e;for(this._forwarding=!0;this._drained&&null!==(e=s(this._readable2));)this.destroyed||(this._drained=this.push(e));this._forwarding=!1}},l.prototype.destroy=function(e){if(!this.destroyed){this.destroyed=!0;var t=this;process.nextTick(function(){t._destroy(e)})}},l.prototype._destroy=function(e){if(e){var t=this._ondrain;this._ondrain=null,t?t(e):this.emit("error",e)}this._forwardDestroy&&(this._readable&&this._readable.destroy&&this._readable.destroy(),this._writable&&this._writable.destroy&&this._writable.destroy()),this.emit("close")},l.prototype._write=function(e,t,r){return this.destroyed?r():this._corked?c(this,this._write.bind(this,e,t,r)):e===a?this._finish(r):this._writable?void(!1===this._writable.write(e)?this._ondrain=r:r()):r()},l.prototype._finish=function(e){var t=this;this.emit("preend"),c(this,function(){var r,n;r=t._forwardEnd&&t._writable,n=function(){!1===t._writableState.prefinished&&(t._writableState.prefinished=!0),t.emit("prefinish"),c(t,e)},r?r._writableState&&r._writableState.finished?n():r._writableState?r.end(n):(r.end(),n()):n()})},l.prototype.end=function(e,t,r){return"function"==typeof e?this.end(null,null,e):"function"==typeof t?this.end(e,null,t):(this._ended=!0,e&&this.write(e),this._writableState.ending||this.write(a),n.Writable.prototype.end.call(this,r))},e.exports=l},function(e,t,r){"use strict";var n=r(464),i=r(7),o=["rejectUnauthorized","ca","cert","key","pfx","passphrase"],s="browser"===process.title;function createWebSocket(e,t){var r="MQIsdp"===t.protocolId&&3===t.protocolVersion?"mqttv3.1":"mqtt";!function setDefaultOpts(e){e.hostname||(e.hostname="localhost"),e.port||("wss"===e.protocol?e.port=443:e.port=80),e.path||(e.path="/"),e.wsOptions||(e.wsOptions={}),s||"wss"!==e.protocol||o.forEach(function(t){e.hasOwnProperty(t)&&!e.wsOptions.hasOwnProperty(t)&&(e.wsOptions[t]=e[t])})}(t);var i=function buildUrl(e,t){var r=e.protocol+"://"+e.hostname+":"+e.port+e.path;return"function"==typeof e.transformWsUrl&&(r=e.transformWsUrl(r,e,t)),r}(t,e);return n(i,[r],t.wsOptions)}e.exports=s?function buildBuilderBrowser(e,t){if(t.hostname||(t.hostname=t.host),!t.hostname){if("undefined"==typeof document)throw new Error("Could not determine host. Specify host manually.");var r=i.parse(document.URL);t.hostname=r.hostname,t.port||(t.port=r.port)}return createWebSocket(e,t)}:function buildBuilder(e,t){return createWebSocket(e,t)}},function(e,t,r){"use strict";e.exports=function(e){if("string"!=typeof e)throw new TypeError("expected a string");var t={negated:!1,pattern:e,original:e};return"!"===e.charAt(0)&&"("!==e.charAt(1)&&(t.negated=!0,t.pattern=e.slice(1)),t}},function(e,t){function isNumber(e){return"number"==typeof e||(!!/^0x[0-9a-f]+$/i.test(e)||/^[-+]?(?:\d+(?:\.\d*)?|\.\d+)(e[-+]?\d+)?$/.test(e))}e.exports=function(e,t){t||(t={});var r={bools:{},strings:{},unknownFn:null};"function"==typeof t.unknown&&(r.unknownFn=t.unknown),"boolean"==typeof t.boolean&&t.boolean?r.allBools=!0:[].concat(t.boolean).filter(Boolean).forEach(function(e){r.bools[e]=!0});var n={};Object.keys(t.alias||{}).forEach(function(e){n[e]=[].concat(t.alias[e]),n[e].forEach(function(t){n[t]=[e].concat(n[e].filter(function(e){return t!==e}))})}),[].concat(t.string).filter(Boolean).forEach(function(e){r.strings[e]=!0,n[e]&&(r.strings[n[e]]=!0)});var i=t.default||{},o={_:[]};Object.keys(r.bools).forEach(function(e){setArg(e,void 0!==i[e]&&i[e])});var s=[];function setArg(e,t,i){if(!i||!r.unknownFn||function argDefined(e,t){return r.allBools&&/^--[^=]+$/.test(t)||r.strings[e]||r.bools[e]||n[e]}(e,i)||!1!==r.unknownFn(i)){var s=!r.strings[e]&&isNumber(t)?Number(t):t;setKey(o,e.split("."),s),(n[e]||[]).forEach(function(e){setKey(o,e.split("."),s)})}}function setKey(e,t,n){var i=e;t.slice(0,-1).forEach(function(e){void 0===i[e]&&(i[e]={}),i=i[e]});var o=t[t.length-1];void 0===i[o]||r.bools[o]||"boolean"==typeof i[o]?i[o]=n:Array.isArray(i[o])?i[o].push(n):i[o]=[i[o],n]}function aliasIsBoolean(e){return n[e].some(function(e){return r.bools[e]})}-1!==e.indexOf("--")&&(s=e.slice(e.indexOf("--")+1),e=e.slice(0,e.indexOf("--")));for(var a=0;a<e.length;a++){var c=e[a];if(/^--.+=/.test(c)){var u=c.match(/^--([^=]+)=([\s\S]*)$/),l=u[1],p=u[2];r.bools[l]&&(p="false"!==p),setArg(l,p,c)}else if(/^--no-.+/.test(c)){setArg(l=c.match(/^--no-(.+)/)[1],!1,c)}else if(/^--.+/.test(c)){l=c.match(/^--(.+)/)[1];void 0===(m=e[a+1])||/^-/.test(m)||r.bools[l]||r.allBools||n[l]&&aliasIsBoolean(l)?/^(true|false)$/.test(m)?(setArg(l,"true"===m,c),a++):setArg(l,!r.strings[l]||"",c):(setArg(l,m,c),a++)}else if(/^-[^-]+/.test(c)){for(var d=c.slice(1,-1).split(""),h=!1,f=0;f<d.length;f++){var m;if("-"!==(m=c.slice(f+2))){if(/[A-Za-z]/.test(d[f])&&/=/.test(m)){setArg(d[f],m.split("=")[1],c),h=!0;break}if(/[A-Za-z]/.test(d[f])&&/-?\d+(\.\d*)?(e-?\d+)?$/.test(m)){setArg(d[f],m,c),h=!0;break}if(d[f+1]&&d[f+1].match(/\W/)){setArg(d[f],c.slice(f+2),c),h=!0;break}setArg(d[f],!r.strings[d[f]]||"",c)}else setArg(d[f],m,c)}l=c.slice(-1)[0];h||"-"===l||(!e[a+1]||/^(-|--)[^-]/.test(e[a+1])||r.bools[l]||n[l]&&aliasIsBoolean(l)?e[a+1]&&/true|false/.test(e[a+1])?(setArg(l,"true"===e[a+1],c),a++):setArg(l,!r.strings[l]||"",c):(setArg(l,e[a+1],c),a++))}else if(r.unknownFn&&!1===r.unknownFn(c)||o._.push(r.strings._||!isNumber(c)?c:Number(c)),t.stopEarly){o._.push.apply(o._,e.slice(a+1));break}}return Object.keys(i).forEach(function(e){(function hasKey(e,t){var r=e;return t.slice(0,-1).forEach(function(e){r=r[e]||{}}),t[t.length-1]in r})(o,e.split("."))||(setKey(o,e.split("."),i[e]),(n[e]||[]).forEach(function(t){setKey(o,t.split("."),i[e])}))}),t["--"]?(o["--"]=new Array,s.forEach(function(e){o["--"].push(e)})):s.forEach(function(e){o._.push(e)}),o}},function(e,t,r){"use strict";const n=r(8),i=r(9).AzureServiceClient,o=r(105),s=r(1213);class IotHubClient extends i{constructor(e,t,r,i){if(null==e)throw new Error("'credentials' cannot be null.");if(null==t)throw new Error("'subscriptionId' cannot be null.");i||(i={}),super(e,i),this.apiVersion="2018-04-01",this.acceptLanguage="en-US",this.longRunningOperationRetryTimeout=30,this.generateClientRequestId=!0,this.baseUri=r,this.baseUri||(this.baseUri="https://management.azure.com"),this.credentials=e,this.subscriptionId=t;let a=this.getPackageJsonInfo(__dirname);this.addUserAgentInfo(`${a.name}/${a.version}`),null!==i.acceptLanguage&&void 0!==i.acceptLanguage&&(this.acceptLanguage=i.acceptLanguage),null!==i.longRunningOperationRetryTimeout&&void 0!==i.longRunningOperationRetryTimeout&&(this.longRunningOperationRetryTimeout=i.longRunningOperationRetryTimeout),null!==i.generateClientRequestId&&void 0!==i.generateClientRequestId&&(this.generateClientRequestId=i.generateClientRequestId),this.operations=new s.Operations(this),this.iotHubResource=new s.IotHubResource(this),this.resourceProviderCommon=new s.ResourceProviderCommon(this),this.certificates=new s.Certificates(this),this.models=o,n.addSerializationMixin(this)}}e.exports=IotHubClient,e.exports.default=IotHubClient,e.exports.IotHubClient=IotHubClient,e.exports.IotHubModels=o},function(e,t,r){"use strict";var n=r(9);t.BaseResource=n.BaseResource,t.CloudError=n.CloudError,t.ManagementLockOwner=r(1220),t.ManagementLockObject=r(1221),t.ManagementLockListResult=r(479),t.ManagementLockListResult=r(479)},function(e,t,r){"use strict";e.exports=class ManagementLockListResult extends Array{constructor(){super()}mapper(){return{required:!1,serializedName:"ManagementLockListResult",type:{name:"Composite",className:"ManagementLockListResult",modelProperties:{value:{required:!1,serializedName:"",type:{name:"Sequence",element:{required:!1,serializedName:"ManagementLockObjectElementType",type:{name:"Composite",className:"ManagementLockObject"}}}},nextLink:{required:!1,serializedName:"nextLink",type:{name:"String"}}}}}}}},function(e,t,r){"use strict";var n=r(9);t.BaseResource=n.BaseResource,t.CloudError=n.CloudError,t.FeatureProperties=r(1225),t.FeatureResult=r(1226),t.FeatureOperationsListResult=r(481),t.FeatureOperationsListResult=r(481)},function(e,t,r){"use strict";e.exports=class FeatureOperationsListResult extends Array{constructor(){super()}mapper(){return{required:!1,serializedName:"FeatureOperationsListResult",type:{name:"Composite",className:"FeatureOperationsListResult",modelProperties:{value:{required:!1,serializedName:"",type:{name:"Sequence",element:{required:!1,serializedName:"FeatureResultElementType",type:{name:"Composite",className:"FeatureResult"}}}},nextLink:{required:!1,serializedName:"nextLink",type:{name:"String"}}}}}}}},function(e,t,r){"use strict";var n=r(9);t.BaseResource=n.BaseResource,t.CloudError=n.CloudError,t.Location=r(1230),t.LocationListResult=r(483),t.SubscriptionPolicies=r(1231),t.Subscription=r(1232),t.SubscriptionListResult=r(484),t.TenantIdDescription=r(1233),t.TenantListResult=r(485),t.LocationListResult=r(483),t.SubscriptionListResult=r(484),t.TenantListResult=r(485)},function(e,t,r){"use strict";e.exports=class LocationListResult extends Array{constructor(){super()}mapper(){return{required:!1,serializedName:"LocationListResult",type:{name:"Composite",className:"LocationListResult",modelProperties:{value:{required:!1,serializedName:"",type:{name:"Sequence",element:{required:!1,serializedName:"LocationElementType",type:{name:"Composite",className:"Location"}}}}}}}}}},function(e,t,r){"use strict";e.exports=class SubscriptionListResult extends Array{constructor(){super()}mapper(){return{required:!1,serializedName:"SubscriptionListResult",type:{name:"Composite",className:"SubscriptionListResult",modelProperties:{value:{required:!1,serializedName:"",type:{name:"Sequence",element:{required:!1,serializedName:"SubscriptionElementType",type:{name:"Composite",className:"Subscription"}}}},nextLink:{required:!0,serializedName:"nextLink",type:{name:"String"}}}}}}}},function(e,t,r){"use strict";e.exports=class TenantListResult extends Array{constructor(){super()}mapper(){return{required:!1,serializedName:"TenantListResult",type:{name:"Composite",className:"TenantListResult",modelProperties:{value:{required:!1,serializedName:"",type:{name:"Sequence",element:{required:!1,serializedName:"TenantIdDescriptionElementType",type:{name:"Composite",className:"TenantIdDescription"}}}},nextLink:{required:!0,serializedName:"nextLink",type:{name:"String"}}}}}}}},function(e,t,r){"use strict";e.exports=class DeploymentListResult extends Array{constructor(){super()}mapper(){return{required:!1,serializedName:"DeploymentListResult",type:{name:"Composite",className:"DeploymentListResult",modelProperties:{value:{required:!1,serializedName:"",type:{name:"Sequence",element:{required:!1,serializedName:"DeploymentExtendedElementType",type:{name:"Composite",className:"DeploymentExtended"}}}},nextLink:{required:!1,readOnly:!0,serializedName:"nextLink",type:{name:"String"}}}}}}}},function(e,t,r){"use strict";e.exports=class ProviderListResult extends Array{constructor(){super()}mapper(){return{required:!1,serializedName:"ProviderListResult",type:{name:"Composite",className:"ProviderListResult",modelProperties:{value:{required:!1,serializedName:"",type:{name:"Sequence",element:{required:!1,serializedName:"ProviderElementType",type:{name:"Composite",className:"Provider"}}}},nextLink:{required:!1,readOnly:!0,serializedName:"nextLink",type:{name:"String"}}}}}}}},function(e,t,r){"use strict";e.exports=class ResourceListResult extends Array{constructor(){super()}mapper(){return{required:!1,serializedName:"ResourceListResult",type:{name:"Composite",className:"ResourceListResult",modelProperties:{value:{required:!1,serializedName:"",type:{name:"Sequence",element:{required:!1,serializedName:"GenericResourceElementType",type:{name:"Composite",className:"GenericResource"}}}},nextLink:{required:!1,readOnly:!0,serializedName:"nextLink",type:{name:"String"}}}}}}}},function(e,t,r){"use strict";e.exports=class ResourceGroupListResult extends Array{constructor(){super()}mapper(){return{required:!1,serializedName:"ResourceGroupListResult",type:{name:"Composite",className:"ResourceGroupListResult",modelProperties:{value:{required:!1,serializedName:"",type:{name:"Sequence",element:{required:!1,serializedName:"ResourceGroupElementType",type:{name:"Composite",className:"ResourceGroup"}}}},nextLink:{required:!1,readOnly:!0,serializedName:"nextLink",type:{name:"String"}}}}}}}},function(e,t,r){"use strict";e.exports=class TagsListResult extends Array{constructor(){super()}mapper(){return{required:!1,serializedName:"TagsListResult",type:{name:"Composite",className:"TagsListResult",modelProperties:{value:{required:!1,serializedName:"",type:{name:"Sequence",element:{required:!1,serializedName:"TagDetailsElementType",type:{name:"Composite",className:"TagDetails"}}}},nextLink:{required:!1,readOnly:!0,serializedName:"nextLink",type:{name:"String"}}}}}}}},function(e,t,r){"use strict";e.exports=class DeploymentOperationsListResult extends Array{constructor(){super()}mapper(){return{required:!1,serializedName:"DeploymentOperationsListResult",type:{name:"Composite",className:"DeploymentOperationsListResult",modelProperties:{value:{required:!1,serializedName:"",type:{name:"Sequence",element:{required:!1,serializedName:"DeploymentOperationElementType",type:{name:"Composite",className:"DeploymentOperation"}}}},nextLink:{required:!1,readOnly:!0,serializedName:"nextLink",type:{name:"String"}}}}}}}},function(e,t,r){"use strict";e.exports=class PolicyDefinitionListResult extends Array{constructor(){super()}mapper(){return{required:!1,serializedName:"PolicyDefinitionListResult",type:{name:"Composite",className:"PolicyDefinitionListResult",modelProperties:{value:{required:!1,serializedName:"",type:{name:"Sequence",element:{required:!1,serializedName:"PolicyDefinitionElementType",type:{name:"Composite",className:"PolicyDefinition"}}}},nextLink:{required:!1,serializedName:"nextLink",type:{name:"String"}}}}}}}},function(e,t,r){"use strict";e.exports=class PolicyAssignmentListResult extends Array{constructor(){super()}mapper(){return{required:!1,serializedName:"PolicyAssignmentListResult",type:{name:"Composite",className:"PolicyAssignmentListResult",modelProperties:{value:{required:!1,serializedName:"",type:{name:"Sequence",element:{required:!1,serializedName:"PolicyAssignmentElementType",type:{name:"Composite",className:"PolicyAssignment"}}}},nextLink:{required:!1,serializedName:"nextLink",type:{name:"String"}}}}}}}},function(e,t,r){"use strict";var n=r(9);t.BaseResource=n.BaseResource,t.CloudError=n.CloudError,t.ResourceLinkFilter=r(1290),t.ResourceLinkProperties=r(1291),t.ResourceLink=r(1292),t.ResourceLinkResult=r(495),t.ResourceLinkResult=r(495)},function(e,t,r){"use strict";e.exports=class ResourceLinkResult extends Array{constructor(){super()}mapper(){return{required:!1,serializedName:"ResourceLinkResult",type:{name:"Composite",className:"ResourceLinkResult",modelProperties:{value:{required:!0,serializedName:"",type:{name:"Sequence",element:{required:!1,serializedName:"ResourceLinkElementType",type:{name:"Composite",className:"ResourceLink"}}}},nextLink:{required:!1,readOnly:!0,serializedName:"nextLink",type:{name:"String"}}}}}}}},function(e,t,r){"use strict";r.r(t);var n={};r.r(n),r.d(n,"partitionKey",function(){return s}),r.d(n,"sequenceNumber",function(){return a}),r.d(n,"enqueueSequenceNumber",function(){return c}),r.d(n,"enqueuedTime",function(){return u}),r.d(n,"scheduledEnqueueTime",function(){return l}),r.d(n,"offset",function(){return p}),r.d(n,"lockedUntil",function(){return d}),r.d(n,"partitionIdName",function(){return h}),r.d(n,"publisher",function(){return f}),r.d(n,"viaPartitionKey",function(){return m}),r.d(n,"deadLetterSource",function(){return g}),r.d(n,"enqueuedTimeAnnotation",function(){return y}),r.d(n,"offsetAnnotation",function(){return v}),r.d(n,"sequenceNumberAnnotation",function(){return b}),r.d(n,"guidSize",function(){return _}),r.d(n,"message",function(){return w}),r.d(n,"error",function(){return E}),r.d(n,"statusCode",function(){return S}),r.d(n,"statusDescription",function(){return C}),r.d(n,"errorCondition",function(){return x}),r.d(n,"management",function(){return k}),r.d(n,"partition",function(){return R}),r.d(n,"partitionId",function(){return T}),r.d(n,"readOperation",function(){return O}),r.d(n,"TLS",function(){return I}),r.d(n,"establishConnection",function(){return N}),r.d(n,"defaultConsumerGroup",function(){return A}),r.d(n,"eventHub",function(){return P}),r.d(n,"cbsEndpoint",function(){return L}),r.d(n,"cbsReplyTo",function(){return D}),r.d(n,"operationPutToken",function(){return M}),r.d(n,"aadEventHubsAudience",function(){return j}),r.d(n,"maxUserAgentLength",function(){return q}),r.d(n,"vendorString",function(){return F}),r.d(n,"attachEpoch",function(){return z}),r.d(n,"receiverIdentifierName",function(){return U}),r.d(n,"enableReceiverRuntimeMetricName",function(){return B}),r.d(n,"timespan",function(){return H}),r.d(n,"uri",function(){return $}),r.d(n,"dateTimeOffset",function(){return V}),r.d(n,"sessionFilterName",function(){return G}),r.d(n,"receiverError",function(){return W}),r.d(n,"senderError",function(){return J}),r.d(n,"sessionError",function(){return X}),r.d(n,"connectionError",function(){return Y}),r.d(n,"defaultOperationTimeoutInSeconds",function(){return K}),r.d(n,"managementRequestKey",function(){return Q}),r.d(n,"negotiateCbsKey",function(){return Z}),r.d(n,"negotiateClaim",function(){return ee}),r.d(n,"ensureContainerAndBlob",function(){return te}),r.d(n,"defaultPrefetchCount",function(){return re}),r.d(n,"reconnectLimit",function(){return ne}),r.d(n,"maxMessageIdLength",function(){return ie}),r.d(n,"maxPartitionKeyLength",function(){return oe}),r.d(n,"maxSessionIdLength",function(){return se}),r.d(n,"pathDelimiter",function(){return ae}),r.d(n,"ruleNameMaximumLength",function(){return ce}),r.d(n,"maximumSqlFilterStatementLength",function(){return ue}),r.d(n,"maximumSqlRuleActionStatementLength",function(){return le}),r.d(n,"maxDeadLetterReasonLength",function(){return pe}),r.d(n,"maxDurationValue",function(){return de}),r.d(n,"minDurationValue",function(){return he}),r.d(n,"maxAbsoluteExpiryTime",function(){return fe}),r.d(n,"aadTokenValidityMarginSeconds",function(){return me}),r.d(n,"connectionReconnectDelay",function(){return ge}),r.d(n,"defaultRetryAttempts",function(){return ye}),r.d(n,"defaultConnectionRetryAttempts",function(){return ve}),r.d(n,"defaultDelayBetweenOperationRetriesInSeconds",function(){return be}),r.d(n,"defaultDelayBetweenRetriesInSeconds",function(){return _e}),r.d(n,"receiverSettleMode",function(){return we}),r.d(n,"dispositionStatus",function(){return Ee}),r.d(n,"fromSequenceNumber",function(){return Se}),r.d(n,"messageCount",function(){return Ce}),r.d(n,"lockTokens",function(){return xe}),r.d(n,"messageIdMapKey",function(){return ke}),r.d(n,"sequenceNumberMapKey",function(){return Re}),r.d(n,"lockTokenMapKey",function(){return Te}),r.d(n,"sessionIdMapKey",function(){return Oe}),r.d(n,"sequenceNumbers",function(){return Ie}),r.d(n,"deadLetterReason",function(){return Ne}),r.d(n,"deadLetterDescription",function(){return Ae}),r.d(n,"propertiesToModify",function(){return Pe}),r.d(n,"deadLetterName",function(){return Le}),r.d(n,"trackingId",function(){return De}),r.d(n,"serverTimeout",function(){return Me}),r.d(n,"operations",function(){return je}),r.d(n,"descriptorCodes",function(){return qe});var i=r(3),o=r(0);const s="x-opt-partition-key",a="x-opt-sequence-number",c="x-opt-enqueue-sequence-number",u="x-opt-enqueued-time",l="x-opt-scheduled-enqueue-time",p="x-opt-offset",d="x-opt-locked-until",h="x-opt-partition-id",f="x-opt-publisher-name",m="x-opt-via-partition-key",g="x-opt-deadletter-source",y=`amqp.annotation.${u}`,v=`amqp.annotation.${p}`,b=`amqp.annotation.${a}`,_=16,w="message",E="error",S="status-code",C="status-description",x="error-condition",k="$management",R="partition",T="partitionId",O="READ",I="tls",N="establishConnection",A="$default",P="eventhub",L="$cbs",D="cbs",M="put-token",j="https://eventhubs.azure.net/",q=128,F="com.microsoft",z=`${F}:epoch`,U=`${F}:receiver-name`,B=`${F}:enable-receiver-runtime-metric`,H=`${F}:timespan`,$=`${F}:uri`,V=`${F}:datetime-offset`,G=`${F}:session-filter`,W="receiver_error",J="sender_error",X="session_error",Y="connection_error",K=60,Q="managementRequest",Z="negotiateCbs",ee="negotiateClaim",te="ensureContainerAndBlob",re=1e3,ne=100,ie=128,oe=128,se=128,ae="/",ce=50,ue=1024,le=1024,pe=4096,de=922337203685477,he=-922337203685477,fe=new Date("9999-12-31T07:59:59.000Z").getTime(),me=5,ge=300,ye=3,ve=150,be=5,_e=15,we="receiver-settle-mode",Ee="disposition-status",Se="from-sequence-number",Ce="message-count",xe="lock-tokens",ke="message-id",Re="sequence-number",Te="lock-token",Oe="session-id",Ie="sequence-numbers",Ne="deadletter-reason",Ae="deadletter-description",Pe="properties-to-modify",Le="com.microsoft:dead-letter",De="com.microsoft:tracking-id",Me="com.microsoft:server-timeout",je={putToken:"put-token",read:"READ",cancelScheduledMessage:"com.microsoft:cancel-scheduled-message",scheduleMessage:"com.microsoft:schedule-message",renewLock:"com.microsoft:renew-lock",peekMessage:"com.microsoft:peek-message",receiveBySequenceNumber:"com.microsoft:receive-by-sequence-number",updateDisposition:"com.microsoft:update-disposition",renewSessionLock:"com.microsoft:renew-session-lock",setSessionState:"com.microsoft:set-session-state",getSessionState:"com.microsoft:get-session-state",enumerateSessions:"com.microsoft:get-message-sessions",addRule:"com.microsoft:add-rule",removeRule:"com.microsoft:remove-rule",enumerateRules:"com.microsoft:enumerate-rules"},qe={ruleDescriptionList:1335734829060,sqlFilterList:83483426822,correlationFilterList:83483426825,sqlRuleActionList:1335734829062,trueFilterList:83483426823,falseFilterList:83483426824};var Fe,ze,Ue;!function(e){e[e["com.microsoft:timeout"]=408]="com.microsoft:timeout",e[e["amqp:not-found"]=404]="amqp:not-found",e[e["amqp:not-implemented"]=501]="amqp:not-implemented",e[e["com.microsoft:entity-already-exists"]=409]="com.microsoft:entity-already-exists",e[e["com.microsoft:message-lock-lost"]=410]="com.microsoft:message-lock-lost",e[e["com.microsoft:session-lock-lost"]=410]="com.microsoft:session-lock-lost",e[e["com.microsoft:no-matching-subscription"]=500]="com.microsoft:no-matching-subscription",e[e["amqp:link:message-size-exceeded"]=403]="amqp:link:message-size-exceeded",e[e["com.microsoft:server-busy"]=503]="com.microsoft:server-busy",e[e["com.microsoft:argument-error"]=400]="com.microsoft:argument-error",e[e["com.microsoft:argument-out-of-range"]=400]="com.microsoft:argument-out-of-range",e[e["com.microsoft:store-lock-lost"]=410]="com.microsoft:store-lock-lost",e[e["com.microsoft:session-cannot-be-locked"]=410]="com.microsoft:session-cannot-be-locked",e[e["com.microsoft:partition-not-owned"]=410]="com.microsoft:partition-not-owned",e[e["com.microsoft:entity-disabled"]=400]="com.microsoft:entity-disabled",e[e["com.microsoft:publisher-revoked"]=401]="com.microsoft:publisher-revoked",e[e["amqp:link:stolen"]=410]="amqp:link:stolen",e[e["amqp:not-allowed"]=400]="amqp:not-allowed",e[e["amqp:unauthorized-access"]=401]="amqp:unauthorized-access",e[e["amqp:resource-limit-exceeded"]=403]="amqp:resource-limit-exceeded"}(Fe||(Fe={})),function(e){e["com.microsoft:address-already-in-use"]="AddressAlreadyInUseError",e["com.microsoft:store-lock-lost"]="StoreLockLostError",e["com.microsoft:no-matching-subscription"]="NoMatchingSubscriptionError",e["com.microsoft:partition-not-owned"]="PartitionNotOwnedError",e["com.microsoft:publisher-revoked"]="PublisherRevokedError",e["com.microsoft:entity-already-exists"]="MessagingEntityAlreadyExistsError",e["com.microsoft:entity-disabled"]="MessagingEntityDisabledError",e["com.microsoft:message-lock-lost"]="MessageLockLostError",e["com.microsoft:session-lock-lost"]="SessionLockLostError",e["com.microsoft:session-cannot-be-locked"]="SessionCannotBeLockedError",e["amqp:internal-error"]="InternalServerError",e["amqp:not-found"]="ServiceCommunicationError",e["com.microsoft:message-not-found"]="MessageNotFoundError",e["com.microsoft:relay-not-found"]="RelayNotFoundError",e["amqp:not-implemented"]="NotImplementedError",e["amqp:not-allowed"]="InvalidOperationError",e["amqp:resource-limit-exceeded"]="QuotaExceededError",e["amqp:unauthorized-access"]="UnauthorizedError",e["com.microsoft:auth-failed"]="UnauthorizedError",e["com.microsoft:timeout"]="ServiceUnavailableError",e["com.microsoft:message-wait-timeout"]="MessageWaitTimeout",e["amqp:operation-timeout"]="OperationTimeoutError",e["com.microsoft:argument-out-of-range"]="ArgumentOutOfRangeError",e["amqp:precondition-failed"]="PreconditionFailedError",e["com.microsoft:precondition-failed"]="PreconditionFailedError",e["amqp:decode-error"]="DecodeError",e["amqp:invalid-field"]="InvalidFieldError",e["amqp:resource-locked"]="ResourceLockedError",e["amqp:resource-deleted"]="ResourceDeletedError",e["amqp:illegal-state"]="IllegalStateError",e["amqp:frame-size-too-small"]="FrameSizeTooSmallError",e["amqp:link:detach-forced"]="DetachForcedError",e["amqp:link:transfer-limit-exceeded"]="TransferLimitExceededError",e["amqp:link:message-size-exceeded"]="MessageTooLargeError",e["amqp:link:redirect"]="LinkRedirectError",e["amqp:link:stolen"]="ReceiverDisconnectedError",e["amqp:session:window-violation"]="SessionWindowViolationError",e["amqp:session:errant-link"]="ErrantLinkError",e["amqp:session:handle-in-use"]="HandleInUseError",e["amqp:session:unattached-handle"]="UnattachedHandleError",e["amqp:connection:forced"]="ConnectionForcedError",e["amqp:connection:framing-error"]="FramingError",e["amqp:connection:redirect"]="ConnectionRedirectError",e["com.microsoft:server-busy"]="ServerBusyError",e["com.microsoft:argument-error"]="ArgumentError",e["com.microsoft:operation-cancelled"]="OperationCancelledError",e["client.sender:not-enough-link-credit"]="SenderBusyError",e["system:error"]="SystemError"}(ze||(ze={})),function(e){e.AddressAlreadyInUseError="com.microsoft:address-already-in-use",e.StoreLockLostError="com.microsoft:store-lock-lost",e.NoMatchingSubscriptionError="com.microsoft:no-matching-subscription",e.PartitionNotOwnedError="com.microsoft:partition-not-owned",e.PublisherRevokedError="com.microsoft:publisher-revoked",e.MessagingEntityAlreadyExistsError="com.microsoft:entity-already-exists",e.MessagingEntityDisabledError="com.microsoft:entity-disabled",e.MessageLockLostError="com.microsoft:message-lock-lost",e.SessionLockLostError="com.microsoft:session-lock-lost",e.SessionCannotBeLockedError="com.microsoft:session-cannot-be-locked",e.InternalServerError="amqp:internal-error",e.ServiceCommunicationError="amqp:not-found",e.MessageNotFoundError="com.microsoft:message-not-found",e.RelayNotFoundError="com.microsoft:relay-not-found",e.NotImplementedError="amqp:not-implemented",e.InvalidOperationError="amqp:not-allowed",e.QuotaExceededError="amqp:resource-limit-exceeded",e.UnauthorizedError="amqp:unauthorized-access",e.ServiceUnavailableError="com.microsoft:timeout",e.MessageWaitTimeout="com.microsoft:message-wait-timeout",e.OperationTimeoutError="amqp:operation-timeout",e.ArgumentOutOfRangeError="com.microsoft:argument-out-of-range",e.PreconditionFailedError="amqp:precondition-failed",e.DecodeError="amqp:decode-error",e.InvalidFieldError="amqp:invalid-field",e.ResourceLockedError="amqp:resource-locked",e.ResourceDeletedError="amqp:resource-deleted",e.IllegalStateError="amqp:illegal-state",e.FrameSizeTooSmallError="amqp:frame-size-too-small",e.DetachForcedError="amqp:link:detach-forced",e.TransferLimitExceededError="amqp:link:transfer-limit-exceeded",e.MessageTooLargeError="amqp:link:message-size-exceeded",e.LinkRedirectError="amqp:link:redirect",e.ReceiverDisconnectedError="amqp:link:stolen",e.SessionWindowViolationError="amqp:session:window-violation",e.ErrantLinkError="amqp:session:errant-link",e.HandleInUseError="amqp:session:handle-in-use",e.UnattachedHandleError="amqp:session:unattached-handle",e.ConnectionForcedError="amqp:connection:forced",e.FramingError="amqp:connection:framing-error",e.ConnectionRedirectError="amqp:connection:redirect",e.ServerBusyError="com.microsoft:server-busy",e.ArgumentError="com.microsoft:argument-error",e.OperationCancelledError="com.microsoft:operation-cancelled",e.SenderBusyError="client.sender:not-enough-link-credit",e.SystemError="system:error"}(Ue||(Ue={}));class MessagingError extends Error{constructor(e){super(e),this.name="MessagingError",this.translated=!0,this.retryable=!0}}const Be=["InternalServerError","ServerBusyError","ServiceUnavailableError","OperationCancelledError","SenderBusyError","MessagingError","DetachForcedError","ConnectionForcedError","TransferLimitExceededError"];var He;function translate(e){let t=e;if(e.translated)return e;if(Object(i.isAmqpError)(e)){const r=e.condition,n=e.description;t=new MessagingError(n),e.stack&&(t.stack=e.stack),t.info=e.info,t.condition=r,r&&(t.name=ze[r]),t.name||(t.name="MessagingError"),n&&(n.includes("status-code: 404")||null!==n.match(/The messaging entity .* could not be found.*/i))&&(t.name="MessagingEntityNotFoundError"),-1===Be.indexOf(t.name)&&(t.retryable=!1)}else if(function isSystemError(e){if(!e||"object"!=typeof e)throw new Error("err is a required parameter and must be of type 'object'.");let t=!1;return e.code&&"string"==typeof e.code&&e.syscall&&"string"==typeof e.syscall&&e.errno&&("string"==typeof e.errno||"number"==typeof e.errno)&&(t=!0),t}(e)){const r=e.code,n=e.message;if(t=new MessagingError(n),e.stack&&(t.stack=e.stack),r){const e=He[r];t.name=ze[e]}t.name||(t.name="SystemError"),-1===Be.indexOf(t.name)&&(t.retryable=!1)}else(t=new MessagingError(e.message)).stack=e.stack;return t}!function(e){e.ENOTFOUND="amqp:not-found",e.EBUSY="com.microsoft:server-busy",e.ECONNREFUSED="amqp:connection:forced",e.ETIMEDOUT="com.microsoft:timeout",e.ECONNRESET="com.microsoft:timeout",e.ENETDOWN="com.microsoft:timeout",e.EHOSTDOWN="com.microsoft:timeout",e.ENETRESET="com.microsoft:timeout",e.ENETUNREACH="com.microsoft:timeout",e.ENONET="com.microsoft:timeout"}(He||(He={}));var $e=r(175),Ve=r.n($e);const Ge="undefined"==typeof navigator&&"undefined"!=typeof process;function parseConnectionString(e){const t={},r=e.trim().split(";");for(let e of r){if(""===(e=e.trim()))continue;const r=e.indexOf("=");if(-1===r)throw new Error("Connection string malformed: each part of the connection string must have an `=` assignment.");const n=e.substring(0,r).trim();if(""===n)throw new Error("Connection string malformed: missing key for assignment");const i=e.substring(r+1).trim();t[n]=i}return t}const We=new Ve.a({maxPending:1e4});class Timeout{set(e,t){return new Promise((r,n)=>{this.clear();const i=t?()=>n(new Error(`${t}`)):r;this._timer=setTimeout(i,e)})}clear(){this._timer&&clearTimeout(this._timer)}wrap(e,t,r){const n=this._promiseFinally(e,()=>this.clear()),i=this.set(t,r);return Promise.race([n,i])}_promiseFinally(e,t){return Promise.resolve(e).then(e=>(t(),e),e=>(t(),Promise.reject(e)))}static set(e,t){return(new Timeout).set(e,t)}static wrap(e,t,r){return(new Timeout).wrap(e,t,r)}}function delay(e,t){return new Promise(r=>setTimeout(()=>r(t),e))}function isIotHubConnectionString(e){if(!e||"string"!=typeof e)throw new Error("connectionString is a required parameter and must be of type string.");let t=!1;const r=parseConnectionString(e);return r&&r.HostName&&r.SharedAccessKey&&r.SharedAccessKeyName&&(t=!0),t}var Je=r(82),Xe=r.n(Je);const Ye=Xe()("azure:amqp-common:cbs"),Ke=Xe()("azure:amqp-common:error"),Qe=Xe()("azure:amqp-common:datatransformer"),Ze=Xe()("azure:amqp-common:messageHeader"),et=Xe()("azure:amqp-common:messageProperties"),tt=Xe()("azure:amqp-common:retry"),rt=Xe()("azure:amqp-common:reqreslink");var nt,it=r(497);function isDelivery(e){let t=!1;return e&&"number"==typeof e.id&&"boolean"==typeof e.settled&&"boolean"==typeof e.remote_settled&&"number"==typeof e.format&&(t=!0),t}function checkNetworkConnection(e){return o.__awaiter(this,void 0,void 0,function*(){return Ge?new Promise(t=>{Object(it.resolve)(e,function(e){e&&"ECONNREFUSED"===e.code?t(!1):t(!0)})}):window.navigator.onLine})}function retry_retry(e){return o.__awaiter(this,void 0,void 0,function*(){let t,r;!function validateRetryConfig(e){if(!e.operation||"function"!=typeof e.operation)throw new Error("'operation' is a required property and must be of type 'function' that returns a Promise.");if(!e.connectionId||"string"!=typeof e.connectionId)throw new Error("'connectionId' is a required property and must be of type 'string'.");if(!e.operationType||"string"!=typeof e.operationType)throw new Error("'operationType' is a required property and must be of type 'string'.");if(e.times&&"number"!=typeof e.times)throw new Error("'times' must be of type 'number'.");if(e.delayInSeconds&&"number"!=typeof e.delayInSeconds)throw new Error("'delayInSeconds' must be of type 'number'.")}(e),null==e.times&&(e.times=ye),null==e.delayInSeconds&&(e.delayInSeconds=_e);let n=!1;for(let i=0;i<e.times;i++){const o=i+1;tt("[%s] Retry for '%s', attempt number: %d",e.connectionId,e.operationType,o);try{r=yield e.operation(),n=!0,tt("[%s] Success for '%s', after attempt number: %d.",e.connectionId,e.operationType,o),r&&!isDelivery(r)&&tt("[%s] Success result for '%s': %O",e.connectionId,e.operationType,r);break}catch(r){if(r.translated||(r=translate(r)),!r.retryable&&"ServiceCommunicationError"===r.name&&e.connectionHost){(yield checkNetworkConnection(e.connectionHost))||(r.name="ConnectionLostError",r.retryable=!0)}if(t=r,Ke("[%s] Error occured for '%s' in attempt number %d: %O",e.connectionId,e.operationType,o,r),t&&t.retryable){Ke("[%s] Sleeping for %d seconds for '%s'.",e.connectionId,e.delayInSeconds,e.operationType),yield delay(1e3*e.delayInSeconds);continue}break}}if(n)return r;throw t})}!function(e){e.cbsAuth="cbsAuth",e.connection="connection",e.management="management",e.receiverLink="receiverLink",e.senderLink="senderLink",e.sendMessage="sendMessage",e.session="session"}(nt||(nt={}));class requestResponseLink_RequestResponseLink{constructor(e,t,r){this.session=e,this.sender=t,this.receiver=r,this.session=e,this.sender=t,this.receiver=r}get connection(){return this.session.connection}isOpen(){return this.session.isOpen()&&this.sender.isOpen()&&this.receiver.isOpen()}sendRequest(e,t){if(!e)throw new Error("request is a required parameter and must be of type 'object'.");t||(t={}),t.timeoutInSeconds||(t.timeoutInSeconds=10);let r=0;return retry_retry({operation:()=>new Promise((n,o)=>{let s,a=!1;1!=++r?e.message_id=Object(i.generate_uuid)():e.message_id||(e.message_id=Object(i.generate_uuid)());const c=t=>{this.receiver.removeListener(i.ReceiverEvents.message,c);const r=(e=>(e||(e={}),{statusCode:e[S]||e.statusCode,statusDescription:e[C]||e.statusDescription,errorCondition:e[x]||e.errorCondition}))(t.message.application_properties),u=t.message.correlation_id;if(rt("[%s] %s response: ",this.connection.id,e.to||"$management",t.message),!(r.statusCode>199&&r.statusCode<300)){const e=translate({condition:r.errorCondition||Fe[r.statusCode]||"amqp:internal-error",description:r.statusDescription});return Ke(e),o(e)}if(e.message_id===u||e.correlation_id===u)return a||clearTimeout(s),rt("[%s] request-messageId | '%s' == '%s' | response-correlationId.",this.connection.id,e.message_id,u),n(t.message);Ke("[%s] request-messageId | '%s' != '%s' | response-correlationId. Hence dropping this response and waiting for the next one.",this.connection.id,e.message_id,u)};this.receiver.on(i.ReceiverEvents.message,c),s=setTimeout(()=>{a=!0,this.receiver.removeListener(i.ReceiverEvents.message,c);const t=this.receiver.address||"address",r=`The request with message_id "${e.message_id}" to "${t}" `+"endpoint timed out. Please try again later.",n={condition:Fe[408],description:r};return o(translate(n))},1e3*t.timeoutInSeconds),rt("[%s] %s request sent: %O",this.connection.id,e.to||"$managment",e),this.sender.send(e)}),connectionId:this.connection.id,operationType:e.to&&e.to===L?nt.cbsAuth:nt.management,delayInSeconds:t.delayInSeconds,times:t.times})}close(){return o.__awaiter(this,void 0,void 0,function*(){yield this.sender.close(),yield this.receiver.close(),yield this.session.close()})}remove(){this.sender.remove(),this.receiver.remove(),this.session.remove()}static create(e,t,r){return o.__awaiter(this,void 0,void 0,function*(){if(!e)throw new Error("Please provide a connection to create the sender/receiver link on the same session.");if(!t)throw new Error("Please provide sender options.");if(!r)throw new Error("Please provide receiver options.");const n=yield e.createSession(),i=yield n.createSender(t),o=yield n.createReceiver(r);return rt("[%s] Successfully created the sender and receiver links on the same session.",e.id),new requestResponseLink_RequestResponseLink(n,i,o)})}}var ot,st=r(132),at=r.n(st),ct=r(56);class dataTransformer_DefaultDataTransformer{encode(e){let t;if(Qe("[encode] The given message body that needs to be encoded is: ",e),at()(e))t=i.message.data_section(e);else{void 0===e&&(e=null);try{const r=JSON.stringify(e);t=i.message.data_section(ct.Buffer.from(r,"utf8"))}catch(t){const r="An error occurred while executing JSON.stringify() on the given body "+e+`${t?t.stack:JSON.stringify(t)}`;throw Ke("[encode] "+r),new Error(r)}}return Qe("[encode] The encoded message body is: %O.",t),t}decode(e){let t=e;try{Qe("[decode] Received message body for decoding is: %O",e),e.content&&at()(e.content)&&(t=e.content);try{const e=t.toString("utf8");t=JSON.parse(e)}catch(e){Ke("[decode] An error occurred while trying JSON.parse() on the received body. The error is %O",e)}}catch(e){Ke("[decode] An error occurred while decoding the received message body. The error is: %O",e)}return Qe("[decode] The decoded message body is: %O",t),t}}!function(e){e.CbsTokenTypeJwt="jwt",e.CbsTokenTypeSas="servicebus.windows.net:sastoken"}(ot||(ot={}));var ut=r(256),lt=r.n(ut);class sas_SasTokenProvider{constructor(e,t,r,n,i){if(this.namespace=e,this.keyName=t,this.key=r,this.tokenValidTimeInSeconds=n||3600,this.tokenRenewalMarginInSeconds=i||900,this.tokenValidTimeInSeconds<=this.tokenRenewalMarginInSeconds)throw new Error("tokenRenewalMarginInSeconds must be less than tokenValidTimeInSeconds")}getToken(e){return o.__awaiter(this,void 0,void 0,function*(){return this._createToken(Math.floor(Date.now()/1e3)+this.tokenValidTimeInSeconds,e)})}_createToken(e,t,r){t||(t=this.namespace),t=encodeURIComponent(t);const n=encodeURIComponent(this.keyName),i=t+"\n"+e;let o;return r=r||this.key,at()(r)?((o=new lt.a("SHA-256","ARRAYBUFFER")).setHMACKey(r,"ARRAYBUFFER"),o.update(ct.Buffer.from(i))):((o=new lt.a("SHA-256","TEXT")).setHMACKey(r,"TEXT"),o.update(i)),{token:`SharedAccessSignature sr=${t}&sig=${encodeURIComponent(o.getHMAC("B64"))}&se=${e}&skn=${n}`,tokenType:ot.CbsTokenTypeSas,expiry:e}}static fromConnectionString(e){const t=parseConnectionString(e);return new sas_SasTokenProvider(t.Endpoint,t.SharedAccessKeyName,t.SharedAccessKey)}}class iotSas_IotSasTokenProvider extends sas_SasTokenProvider{getToken(e){return o.__awaiter(this,void 0,void 0,function*(){return this._createToken(Math.floor(Date.now()/1e3)+this.tokenValidTimeInSeconds,e,ct.Buffer.from(this.key,"base64"))})}}var pt,dt,ht,ft,mt,gt=r(108);class aad_AadTokenProvider{constructor(e){if(this.tokenRenewalMarginInSeconds=270,this.tokenValidTimeInSeconds=3599,!e||e&&!(e instanceof gt.ApplicationTokenCredentials||e instanceof gt.UserTokenCredentials||e instanceof gt.DeviceTokenCredentials||e instanceof gt.MSITokenCredentials))throw new Error("'credentials' is a required parameter and must be an instance of ApplicationTokenCredentials | UserTokenCredentials | DeviceTokenCredentials | MSITokenCredentials.");e instanceof gt.MSITokenCredentials&&(e.resource=j),this.credentials=e}getToken(e){return o.__awaiter(this,void 0,void 0,function*(){const e=yield this.credentials.getToken();let t=Date.now();return e.expiresOn&&e.expiresOn instanceof Date&&(t=e.expiresOn.getTime()),{expiry:Math.floor(t/1e3)+this.tokenValidTimeInSeconds-me,tokenType:ot.CbsTokenTypeJwt,token:e.accessToken}})}}!function(e){e.create=function create(e,t){if(!e||e&&"string"!=typeof e)throw new Error("'connectionString' is a required parameter and must be of type: 'string'.");const r=parseConnectionString(e);if(!r.Endpoint)throw new Error("Connection string is missing Endpoint.");r.Endpoint.endsWith("/")||(r.Endpoint+="/");const n={connectionString:e,endpoint:r.Endpoint,host:r&&r.Endpoint?(r.Endpoint.match("sb://([^/]*)")||[])[1]:"",sharedAccessKeyName:r.SharedAccessKeyName,sharedAccessKey:r.SharedAccessKey};return(t||r.EntityPath)&&(n.entityPath=t||r.EntityPath),n},e.validate=function validate(e,t){if(t||(t={}),!e||e&&"object"!=typeof e)throw new Error("'config' is a required parameter and must be of type: 'object'.");if(!e.endpoint||e.endpoint&&"string"!=typeof e.endpoint)throw new Error("'endpoint' is a required property of ConnectionConfig.");if(e.entityPath&&"string"!=typeof e.entityPath)throw new Error("'entityPath' must be of type 'string'.");if(t.isEntityPathRequired&&!e.entityPath)throw new Error("'entityPath' is a required property of ConnectionConfig.");if(!e.sharedAccessKeyName||e.sharedAccessKeyName&&"string"!=typeof e.sharedAccessKeyName)throw new Error("'sharedAccessKeyName' is a required property of ConnectionConfig.");if(!e.sharedAccessKey||e.sharedAccessKey&&"string"!=typeof e.sharedAccessKey)throw new Error("'sharedAccessKey' is a required property of ConnectionConfig.")}}(pt||(pt={})),function(e){function createFromConnectionConfig(e){return pt.validate(e,{isEntityPathRequired:!0}),e.getManagementAudience=(()=>`${e.endpoint}${e.entityPath}/$management`),e.getManagementAddress=(()=>`${e.entityPath}/$management`),e.getSenderAudience=(t=>{if(null!=t){if("string"!=typeof t&&"number"!=typeof t)throw new TypeError("'partitionId' must be of type 'string' or 'number'.");return`${e.endpoint}${e.entityPath}/Partitions/${t}`}return`${e.endpoint}${e.entityPath}`}),e.getSenderAddress=(t=>{if(null!=t){if("string"!=typeof t&&"number"!=typeof t)throw new TypeError("'partitionId' must be of type 'string' or 'number'.");return`${e.entityPath}/Partitions/${t}`}return`${e.entityPath}`}),e.getReceiverAudience=((t,r)=>{if(null==t||"string"!=typeof t&&"number"!=typeof t)throw new TypeError("'partitionId' is a required parameter and must be of type 'string' or 'number'");return r||(r="$default"),`${e.endpoint}${e.entityPath}/ConsumerGroups/${r}/`+`Partitions/${t}`}),e.getReceiverAddress=((t,r)=>{if(null==t||"string"!=typeof t&&"number"!=typeof t)throw new TypeError("'partitionId' is a required parameter and must be of type 'string' or 'number'");return r||(r="$default"),`${e.entityPath}/ConsumerGroups/${r}/Partitions/${t}`}),e}e.create=function create(e,t){const r=pt.create(e,t);if(!r.entityPath)throw new Error(`Either provide "path" or the "connectionString": "${e}", `+'must contain EntityPath="<path-to-the-entity>".');return createFromConnectionConfig(r)},e.createFromConnectionConfig=createFromConnectionConfig,e.validate=function validate(e){return pt.validate(e,{isEntityPathRequired:!0})}}(dt||(dt={})),function(e){function validate(e){if(!e||e&&"object"!=typeof e)throw new Error("'config' is a required parameter and must be of type: 'object'.");if(!e.hostName||e.hostName&&"string"!=typeof e.hostName)throw new Error("'hostName' is a required property of the ConnectionConfig.");if(!e.entityPath||e.entityPath&&"string"!=typeof e.entityPath)throw new Error("'entityPath' is a required property of the ConnectionConfig.");if(!e.sharedAccessKeyName||e.sharedAccessKeyName&&"string"!=typeof e.sharedAccessKeyName)throw new Error("'sharedAccessKeyName' is a required property of the ConnectionConfig.");if(!e.sharedAccessKey||e.sharedAccessKey&&"string"!=typeof e.sharedAccessKey)throw new Error("'sharedAccessKey' is a required property of the ConnectionConfig.");if(null!=e.deviceId&&"string"!=typeof e.deviceId)throw new Error("'deviceId' must be of type 'string'.")}e.create=function create(e,t){if(!e||e&&"string"!=typeof e)throw new Error("'connectionString' is a required parameter and must be of type: 'string'.");const r=parseConnectionString(e);return t||(t="messages/events"),{connectionString:e,hostName:r.HostName,host:r&&r.HostName?r.HostName.split(".")[0]:"",entityPath:t,sharedAccessKeyName:r.SharedAccessKeyName,sharedAccessKey:r.SharedAccessKey,deviceId:r.DeviceId}},e.validate=validate,e.convertToEventHubConnectionConfig=function convertToEventHubConnectionConfig(e){if(!e||e&&"object"!=typeof e)throw new Error("'iotHubConfig' is a required parameter and must be of type: 'object'.");validate(e);const t={sharedAccessKey:e.sharedAccessKey,sharedAccessKeyName:e.sharedAccessKeyName,entityPath:e.entityPath,host:e.hostName,endpoint:`sb://${e.hostName}/`,connectionString:e.connectionString};return dt.createFromConnectionConfig(t)}}(ht||(ht={}));class cbs_CbsClient{constructor(e,t){this.endpoint=L,this.replyTo=`${D}-${Object(i.generate_uuid)()}`,this.cbsLock=`${Z}-${Object(i.generate_uuid)()}`,this.connection=e,this.connectionLock=t}init(){return o.__awaiter(this,void 0,void 0,function*(){try{if(this.connection.isOpen()||(Ye("The CBS client is trying to establish an AMQP connection."),yield We.acquire(this.connectionLock,()=>this.connection.open())),this._isCbsSenderReceiverLinkOpen())Ye("[%s] CBS session is already present. Reusing the cbs sender '%s' and receiver '%s' links over cbs session.",this.connection.id,this._cbsSenderReceiverLink.sender.name,this._cbsSenderReceiverLink.receiver.name);else{const e={source:{address:this.endpoint},name:this.replyTo,onSessionError:e=>{const t=e.connection.options.id,r=translate(e.session.error);Ke("[%s] An error occurred on the session for request/response links for $cbs: %O",t,r)}},t={target:{address:this.endpoint}};Ye("[%s] Creating sender/receiver links on a session for $cbs endpoint.",this.connection.id),this._cbsSenderReceiverLink=yield requestResponseLink_RequestResponseLink.create(this.connection,t,e),this._cbsSenderReceiverLink.sender.on(i.SenderEvents.senderError,e=>{const t=e.connection.options.id,r=translate(e.sender.error);Ke("[%s] An error occurred on the cbs sender link.. %O",t,r)}),this._cbsSenderReceiverLink.receiver.on(i.ReceiverEvents.receiverError,e=>{const t=e.connection.options.id,r=translate(e.receiver.error);Ke("[%s] An error occurred on the cbs receiver link.. %O",t,r)}),Ye("[%s] Successfully created the cbs sender '%s' and receiver '%s' links over cbs session.",this.connection.id,this._cbsSenderReceiverLink.sender.name,this._cbsSenderReceiverLink.receiver.name)}}catch(e){throw e=translate(e),Ke("[%s] An error occured while establishing the cbs links: %O",this.connection.id,e),e}})}negotiateClaim(e,t){return o.__awaiter(this,void 0,void 0,function*(){try{const r={body:t.token,message_id:Object(i.generate_uuid)(),reply_to:this.replyTo,to:this.endpoint,application_properties:{operation:M,name:e,type:t.tokenType}},n=yield this._cbsSenderReceiverLink.sendRequest(r);return Ye("[%s] The CBS response is: %O",this.connection.id,n),this._fromAmqpMessageResponse(n)}catch(e){throw Ke("[%s] An error occurred while negotiating the cbs claim: %O",this.connection.id,e),e}})}close(){return o.__awaiter(this,void 0,void 0,function*(){try{if(this._isCbsSenderReceiverLinkOpen()){const e=this._cbsSenderReceiverLink;this._cbsSenderReceiverLink=void 0,yield e.close(),Ye("[%s] Successfully closed the cbs session.",this.connection.id)}}catch(e){const t=`An error occurred while closing the cbs link: ${e.stack||JSON.stringify(e)}.`;throw Ke("[%s] %s",this.connection.id,t),new Error(t)}})}remove(){try{if(this._cbsSenderReceiverLink){const e=this._cbsSenderReceiverLink;this._cbsSenderReceiverLink=void 0,e.remove(),Ye("[%s] Successfully removed the cbs session.",this.connection.id)}}catch(e){const t=`An error occurred while removing the cbs link: ${e.stack||JSON.stringify(e)}.`;throw Ke("[%s] %s",this.connection.id,t),new Error(t)}}_isCbsSenderReceiverLinkOpen(){return this._cbsSenderReceiverLink&&this._cbsSenderReceiverLink.isOpen()}_fromAmqpMessageResponse(e){const t={correlationId:e.correlation_id,statusCode:e.application_properties?e.application_properties["status-code"]:"",satusDescription:e.application_properties?e.application_properties["status-description"]:""};return Ye("[%s] The deserialized CBS response is: %o",this.connection.id,t),t}}!function(e){e.toAmqpMessageHeader=function toAmqpMessageHeader(e){const t={};return null!=e.deliveryCount&&(t.delivery_count=e.deliveryCount),null!=e.durable&&(t.durable=e.durable),null!=e.firstAcquirer&&(t.first_acquirer=e.firstAcquirer),null!=e.priority&&(t.priority=e.priority),null!=e.ttl&&(t.ttl=e.ttl),Ze("To AmqpMessageHeader: %O",t),t},e.fromAmqpMessageHeader=function fromAmqpMessageHeader(e){const t={};return null!=e.delivery_count&&(t.deliveryCount=e.delivery_count),null!=e.durable&&(t.durable=e.durable),null!=e.first_acquirer&&(t.firstAcquirer=e.first_acquirer),null!=e.priority&&(t.priority=e.priority),null!=e.ttl&&(t.ttl=e.ttl),Ze("From AmqpMessageHeader: %O",t),t}}(ft||(ft={})),function(e){e.toAmqpMessageProperties=function toAmqpMessageProperties(e){const t={};return null!=e.absoluteExpiryTime&&(t.absolute_expiry_time=e.absoluteExpiryTime),null!=e.contentEncoding&&(t.content_encoding=e.contentEncoding),null!=e.contentType&&(t.content_type=e.contentType),null!=e.correlationId&&(t.correlation_id=e.correlationId),null!=e.creationTime&&(t.creation_time=e.creationTime),null!=e.groupId&&(t.group_id=e.groupId),null!=e.groupSequence&&(t.group_sequence=e.groupSequence),null!=e.messageId&&(t.message_id=e.messageId),null!=e.replyTo&&(t.reply_to=e.replyTo),null!=e.replyToGroupId&&(t.reply_to_group_id=e.replyToGroupId),null!=e.subject&&(t.subject=e.subject),null!=e.to&&(t.to=e.to),null!=e.userId&&(t.user_id=e.userId),et("To AmqpMessageProperties: %O",t),t},e.fromAmqpMessageProperties=function fromAmqpMessageProperties(e){const t={};return null!=e.absolute_expiry_time&&(t.absoluteExpiryTime=e.absolute_expiry_time),null!=e.content_encoding&&(t.contentEncoding=e.content_encoding),null!=e.content_type&&(t.contentType=e.content_type),null!=e.correlation_id&&(t.correlationId=e.correlation_id),null!=e.creation_time&&(t.creationTime=e.creation_time),null!=e.group_id&&(t.groupId=e.group_id),null!=e.group_sequence&&(t.groupSequence=e.group_sequence),null!=e.message_id&&(t.messageId=e.message_id),null!=e.reply_to&&(t.replyTo=e.reply_to),null!=e.reply_to_group_id&&(t.replyToGroupId=e.reply_to_group_id),null!=e.subject&&(t.subject=e.subject),null!=e.to&&(t.to=e.to),null!=e.user_id&&(t.userId=e.user_id),et("From AmqpMessageProperties: %O",t),t}}(mt||(mt={}));var yt,vt,bt=r(17);!function(e){(yt||(yt={})).create=function create(e){if(!e||"object"!=typeof e)throw new Error("'parameters' is a required parameter and must be of type 'object'.");pt.validate(e.config,{isEntityPathRequired:e.isEntityPathRequired||!1});const t=e.connectionProperties.userAgent;if(t.length>q)throw new Error("The user-agent string cannot be more than 128 characters in length."+`The given user-agent string is: ${t} with length: ${t.length}`);const r={transport:I,host:e.config.host,hostname:e.config.host,username:e.config.sharedAccessKeyName,port:5671,reconnect:!1,properties:{product:e.connectionProperties.product,version:e.connectionProperties.version,"user-agent":t,platform:`(${bt.arch()}-${bt.type()}-${bt.release()})`,framework:`Node/${process.version}`},operationTimeoutInSeconds:e.operationTimeoutInSeconds};if(e.config.webSocket||"undefined"!=typeof window&&window.WebSocket){const t=e.config.webSocket||window.WebSocket,n=e.config.host,i=e.config.webSocketEndpointPath||"";r.webSocketOptions={webSocket:t,url:`wss://${n}:443/${i}`,protocol:["AMQPWSB10"]}}const n=new i.Connection(r),o=`${N}-${Object(i.generate_uuid)()}`;return{wasConnectionCloseCalled:!1,connectionLock:o,negotiateClaimLock:`${ee}-${Object(i.generate_uuid)()}`,connection:n,connectionId:n.id,cbsSession:new cbs_CbsClient(n,o),config:e.config,tokenProvider:e.tokenProvider||new sas_SasTokenProvider(e.config.endpoint,e.config.sharedAccessKeyName,e.config.sharedAccessKey),dataTransformer:e.dataTransformer||new dataTransformer_DefaultDataTransformer}}}(),function(e){e.fromAmqpMessage=function fromAmqpMessage(e){const t={body:e.body,_raw_amqp_mesage:e};e.message_annotations&&(t.annotations=e.message_annotations,null!=e.message_annotations[n.partitionKey]&&(t.partitionKey=e.message_annotations[n.partitionKey]),null!=e.message_annotations[n.sequenceNumber]&&(t.sequenceNumber=e.message_annotations[n.sequenceNumber]),null!=e.message_annotations[n.enqueuedTime]&&(t.enqueuedTimeUtc=new Date(e.message_annotations[n.enqueuedTime])),null!=e.message_annotations[n.offset]&&(t.offset=e.message_annotations[n.offset]));for(const r of i.messageProperties)null!=e[r]&&(t.properties||(t.properties={}),t.properties[r]=e[r]);for(const r of i.messageHeader)null!=e[r]&&(t.header||(t.header={}),t.header[r]=e[r]);return e.application_properties&&(t.applicationProperties=e.application_properties),e.delivery_annotations&&(t.lastEnqueuedOffset=e.delivery_annotations.last_enqueued_offset,t.lastSequenceNumber=e.delivery_annotations.last_enqueued_sequence_number,t.lastEnqueuedTime=new Date(e.delivery_annotations.last_enqueued_time_utc),t.retrievalTime=new Date(e.delivery_annotations.runtime_info_retrieval_time_utc)),t},e.toAmqpMessage=function toAmqpMessage(e){const t={body:e.body,message_annotations:{},delivery_annotations:{}};if(e.annotations&&(t.message_annotations=e.annotations),e.properties)for(const r in e.properties)t[r]=e.properties[r];if(e.applicationProperties&&(t.application_properties=e.applicationProperties),null!=e.partitionKey&&(t.message_annotations[n.partitionKey]=e.partitionKey,t.durable=!0),null!=e.sequenceNumber&&(t.message_annotations[n.sequenceNumber]=e.sequenceNumber),null!=e.enqueuedTimeUtc&&(t.message_annotations[n.enqueuedTime]=e.enqueuedTimeUtc.getTime()),null!=e.offset&&(t.message_annotations[n.offset]=e.offset),null!=e.lastEnqueuedOffset&&(t.delivery_annotations.last_enqueued_offset=e.lastEnqueuedOffset),null!=e.lastSequenceNumber&&(t.delivery_annotations.last_enqueued_sequence_number=e.lastSequenceNumber),null!=e.lastEnqueuedTime&&(t.delivery_annotations.last_enqueued_time_utc=e.lastEnqueuedTime.getTime()),null!=e.retrievalTime&&(t.delivery_annotations.runtime_info_retrieval_time_utc=e.retrievalTime.getTime()),e.header)for(const r in e.header)t[r]=e.header[r];return t}}(vt||(vt={}));var _t=r(31),wt=r.n(_t),Et=r(57),St=r.n(Et);const Ct=St()("azure:event-hubs:error"),xt=St()("azure:event-hubs:management"),kt=St()("azure:event-hubs:sender"),Rt=St()("azure:event-hubs:receiver"),Tt=St()("azure:event-hubs:receiverbatching"),Ot=St()("azure:event-hubs:receiverstreaming"),It=St()("azure:event-hubs:linkEntity"),Nt=St()("azure:event-hubs:connectionContext"),At=St()("azure:event-hubs:client"),Pt=St()("azure:event-hubs:iothubClient");class linkEntity_LinkEntity{constructor(e,t){this.isConnecting=!1,t||(t={}),this._context=e,this.address=t.address||"",this.audience=t.audience||"",this.name=t.name||wt()(),this.partitionId=t.partitionId}_negotiateClaim(e){return o.__awaiter(this,void 0,void 0,function*(){It("[%s] Acquiring cbs lock: '%s' for creating the cbs session while creating the %s: '%s' with address: '%s'.",this._context.connectionId,this._context.cbsSession.cbsLock,this._type,this.name,this.address),yield We.acquire(this._context.cbsSession.cbsLock,()=>this._context.cbsSession.init());const t=yield this._context.tokenProvider.getToken(this.audience);It("[%s] %s: calling negotiateClaim for audience '%s'.",this._context.connectionId,this._type,this.audience),It("[%s] Acquiring cbs lock: '%s' for cbs auth for %s: '%s' with address '%s'.",this._context.connectionId,this._context.negotiateClaimLock,this._type,this.name,this.address),yield We.acquire(this._context.negotiateClaimLock,()=>this._context.cbsSession.negotiateClaim(this.audience,t)),It("[%s] Negotiated claim for %s '%s' with with address: %s",this._context.connectionId,this._type,this.name,this.address),e&&(yield this._ensureTokenRenewal())})}_ensureTokenRenewal(){return o.__awaiter(this,void 0,void 0,function*(){const e=1e3*(this._context.tokenProvider.tokenValidTimeInSeconds-this._context.tokenProvider.tokenRenewalMarginInSeconds);this._tokenRenewalTimer=setTimeout(()=>o.__awaiter(this,void 0,void 0,function*(){try{yield this._negotiateClaim(!0)}catch(e){Ct("[%s] %s '%s' with address %s, an error occurred while renewing the token: %O",this._context.connectionId,this._type,this.name,this.address,e)}}),e),It("[%s] %s '%s' with address %s, has next token renewal in %d seconds @(%s).",this._context.connectionId,this._type,this.name,this.address,e/1e3,new Date(Date.now()+e).toString())})}_closeLink(e){return o.__awaiter(this,void 0,void 0,function*(){if(clearTimeout(this._tokenRenewalTimer),e)try{yield e.close(),It("[%s] %s '%s' with address '%s' closed.",this._context.connectionId,this._type,this.name,this.address)}catch(e){Ct("[%s] An error occurred while closing the %s '%s' with address '%s': %O",this._context.connectionId,this._type,this.name,this.address,e)}})}get _type(){let e="LinkEntity";return this.constructor&&this.constructor.name&&(e=this.constructor.name),e}}class eventPosition_EventPosition{constructor(e){this.isInclusive=!1,e&&(this.offset=e.offset,this.enqueuedTime=e.enqueuedTime,this.sequenceNumber=e.sequenceNumber,this.isInclusive=e.isInclusive||!1,this.customFilter=e.customFilter)}getExpression(){let e;if(null!=this.offset)e=this.isInclusive?`${n.offsetAnnotation} >= '${this.offset}'`:`${n.offsetAnnotation} > '${this.offset}'`;else if(null!=this.sequenceNumber)e=this.isInclusive?`${n.sequenceNumberAnnotation} >= '${this.sequenceNumber}'`:`${n.sequenceNumberAnnotation} > '${this.sequenceNumber}'`;else if(null!=this.enqueuedTime){const t=this.enqueuedTime instanceof Date?this.enqueuedTime.getTime():this.enqueuedTime;e=`${n.enqueuedTimeAnnotation} > '${t}'`}else null!=this.customFilter&&(e=this.customFilter);if(!e)throw translate({condition:Ue.ArgumentError,description:"No starting position was set in the EventPosition."});return e}static fromOffset(e,t){if(!e||"string"!=typeof e)throw new Error("'offset' is a required parameter and must be a non-empty string.");return new eventPosition_EventPosition({offset:e,isInclusive:t})}static fromSequenceNumber(e,t){if(null==e||"number"!=typeof e)throw new Error("'sequenceNumber' is a required parameter and must be of type 'number'.");return new eventPosition_EventPosition({sequenceNumber:e,isInclusive:t})}static fromEnqueuedTime(e){if(null==e||"number"!=typeof e&&!(e instanceof Date))throw new Error("'enqueuedTime' is a required parameter and must be an instance of 'Date' or of type 'number'.");return new eventPosition_EventPosition({enqueuedTime:e})}static withCustomFilter(e){if(!e||"string"!=typeof e)throw new Error("'customFilter' is a required parameter and must be a non-empty string.");return new eventPosition_EventPosition({customFilter:e})}static fromStart(){return eventPosition_EventPosition.fromOffset(eventPosition_EventPosition.startOfStream)}static fromEnd(){return eventPosition_EventPosition.fromOffset(eventPosition_EventPosition.endOfStream)}}eventPosition_EventPosition.startOfStream="-1",eventPosition_EventPosition.endOfStream="@latest";class eventHubReceiver_EventHubReceiver extends linkEntity_LinkEntity{constructor(e,t,r){super(e,{partitionId:t,name:r?r.name:void 0}),this.prefetchCount=n.defaultPrefetchCount,this.receiverRuntimeMetricEnabled=!1,r||(r={}),this.consumerGroup=r.consumerGroup?r.consumerGroup:n.defaultConsumerGroup,this.address=e.config.getReceiverAddress(t,this.consumerGroup),this.audience=e.config.getReceiverAudience(t,this.consumerGroup),this.prefetchCount=null!=r.prefetchCount?r.prefetchCount:n.defaultPrefetchCount,this.epoch=r.epoch,this.identifier=r.identifier,this.options=r,this.receiverRuntimeMetricEnabled=r.enableReceiverRuntimeMetric||!1,this.runtimeInfo={partitionId:`${t}`},this._checkpoint={enqueuedTimeUtc:new Date,offset:"0",sequenceNumber:-1},this._onAmqpMessage=(e=>{const t=vt.fromAmqpMessage(e.message);t.body=this._context.dataTransformer.decode(e.message.body),this._checkpoint={enqueuedTimeUtc:t.enqueuedTimeUtc,offset:t.offset,sequenceNumber:t.sequenceNumber},this.receiverRuntimeMetricEnabled&&t&&(this.runtimeInfo.lastSequenceNumber=t.lastSequenceNumber,this.runtimeInfo.lastEnqueuedTimeUtc=t.lastEnqueuedTime,this.runtimeInfo.lastEnqueuedOffset=t.lastEnqueuedOffset,this.runtimeInfo.retrievalTime=t.retrievalTime,Rt("[%s] RuntimeInfo of Receiver '%s' is %O",this._context.connectionId,this.name,this.runtimeInfo)),this._onMessage(t)}),this._onAmqpError=(e=>{const t=this._receiver||e.receiver,r=e.receiver&&e.receiver.error;if(r){const e=translate(r);Ct("[%s] An error occurred for Receiver '%s': %O.",this._context.connectionId,this.name,e),e.retryable?Ct("[%s] Since received error is retryable, we will NOT notify the user's error handler.",this._context.connectionId):t&&!t.isItselfClosed()?(Ct("[%s] Since the user did not close the receiver and the error is not retryable, we let the user know about it by calling the user's error handler.",this._context.connectionId),this._onError(e)):Ct("[%s] The received error is not retryable. However, the receiver was closed by the user. Hence not notifying the user's error handler.",this._context.connectionId)}}),this._onSessionError=(e=>{const t=this._receiver||e.receiver,r=e.session&&e.session.error;if(r){const e=translate(r);Ct("[%s] An error occurred on the session for Receiver '%s': %O.",this._context.connectionId,this.name,e),!t||t.isSessionItselfClosed()||e.retryable||(Ct("[%s] Since the user did not close the receiver and the session error is not retryable, we let the user know about it by calling the user's error handler.",this._context.connectionId),this._onError(e))}}),this._onAmqpClose=(e=>o.__awaiter(this,void 0,void 0,function*(){const t=e.receiver&&e.receiver.error,r=this._receiver||e.receiver;t&&Ct("[%s] 'receiver_close' event occurred for receiver '%s' with address '%s'. The associated error is: %O",this._context.connectionId,this.name,this.address,t),r&&!r.isItselfClosed()?this.isConnecting?Ct("[%s] 'receiver_close' event occurred on the receiver '%s' with address '%s' and the sdk did not initate this. Moreover the receiver is already re-connecting. Hence not calling detached from the _onAmqpClose() handler.",this._context.connectionId,this.name,this.address):(Ct("[%s] 'receiver_close' event occurred on the receiver '%s' with address '%s' and the sdk did not initiate this. The receiver is not reconnecting. Hence, calling detached from the _onAmqpClose() handler.",this._context.connectionId,this.name,this.address),yield this.detached(t)):Ct("[%s] 'receiver_close' event occurred on the receiver '%s' with address '%s' because the sdk initiated it. Hence not calling detached from the _onAmqpClose() handler.",this._context.connectionId,this.name,this.address)})),this._onSessionClose=(e=>o.__awaiter(this,void 0,void 0,function*(){const t=this._receiver||e.receiver,r=e.session&&e.session.error;r&&Ct("[%s] 'session_close' event occurred for receiver '%s' with address '%s'. The associated error is: %O",this._context.connectionId,this.name,this.address,r),t&&!t.isSessionItselfClosed()?this.isConnecting?Ct("[%s] 'session_close' event occurred on the session of receiver '%s' with address '%s' and the sdk did not initiate this. Moreover the receiver is already re-connecting. Hence not calling detached from the _onSessionClose() handler.",this._context.connectionId,this.name,this.address):(Ct("[%s] 'session_close' event occurred on the session of receiver '%s' with address '%s' and the sdk did not initiate this. Hence calling detached from the _onSessionClose() handler.",this._context.connectionId,this.name,this.address),yield this.detached(r)):Ct("[%s] 'session_close' event occurred on the session of receiver '%s' with address '%s' because the sdk initiated it. Hence not calling detached from the _onSessionClose() handler.",this._context.connectionId,this.name,this.address)}))}detached(e){return o.__awaiter(this,void 0,void 0,function*(){try{const t=this._receiver&&this._receiver.isItselfClosed();yield this._closeLink(this._receiver);let r=!1;if(e&&!t){translate(e).retryable?(r=!0,Ct("[%s] close() method of Receiver '%s' with address '%s' was not called. There was an accompanying error and it is retryable. This is a candidate for re-establishing the receiver link.",this._context.connectionId,this.name,this.address)):Ct("[%s] close() method of Receiver '%s' with address '%s' was not called. There was an accompanying error and it is NOT retryable. Hence NOT re-establishing the receiver link.",this._context.connectionId,this.name,this.address)}else if(t){const r={wasCloseInitiated:t,receiverError:e,_receiver:this._receiver};Ct("[%s] Something went wrong. State of Receiver '%s' with address '%s' is: %O",this._context.connectionId,this.name,this.address,r)}else r=!0,Ct("[%s] close() method of Receiver '%s' with address '%s' was not called. There was no accompanying error as well. This is a candidate for re-establishing the receiver link.",this._context.connectionId,this.name,this.address);if(r){const e={onMessage:this._onAmqpMessage,onError:this._onAmqpError,onClose:this._onAmqpClose,onSessionError:this._onSessionError,onSessionClose:this._onSessionClose,newName:!0};this._checkpoint.sequenceNumber>-1&&(e.eventPosition=eventPosition_EventPosition.fromSequenceNumber(this._checkpoint.sequenceNumber));const t=this._createReceiverOptions(e),r={operation:()=>this._init(t),connectionId:this._context.connectionId,operationType:nt.receiverLink,times:n.defaultConnectionRetryAttempts,connectionHost:this._context.config.host,delayInSeconds:15};yield retry_retry(r)}}catch(e){Ct("[%s] An error occurred while processing detached() of Receiver '%s' with address '%s': %O",this._context.connectionId,this.name,this.address,e)}})}close(){return o.__awaiter(this,void 0,void 0,function*(){if(this._receiver){const e=this._receiver;this._deleteFromCache(),yield this._closeLink(e)}})}isOpen(){const e=this._receiver&&this._receiver.isOpen();return Ct("[%s] Receiver '%s' with address '%s' is open? -> %s",this._context.connectionId,this.name,this.address,e),e}_deleteFromCache(){this._receiver=void 0,delete this._context.receivers[this.name],Ct("[%s] Deleted the receiver '%s' from the client cache.",this._context.connectionId,this.name)}_init(e){return o.__awaiter(this,void 0,void 0,function*(){try{this.isOpen()||this.isConnecting?Ct("[%s] The receiver '%s' with address '%s' is open -> %s and is connecting -> %s. Hence not reconnecting.",this._context.connectionId,this.name,this.address,this.isOpen(),this.isConnecting):(Ct("[%s] The receiver '%s' with address '%s' is not open and is not currently establishing itself. Hence let's try to connect.",this._context.connectionId,this.name,this.address),this.isConnecting=!0,yield this._negotiateClaim(),e||(e=this._createReceiverOptions({onMessage:this._onAmqpMessage,onError:this._onAmqpError,onClose:this._onAmqpClose,onSessionError:this._onSessionError,onSessionClose:this._onSessionClose})),Ct("[%s] Trying to create receiver '%s' with options %O",this._context.connectionId,this.name,e),this._receiver=yield this._context.connection.createReceiver(e),this.isConnecting=!1,Ct("[%s] Receiver '%s' with address '%s' has established itself.",this._context.connectionId,this.name,this.address),Rt("Promise to create the receiver resolved. Created receiver with name: ",this.name),Rt("[%s] Receiver '%s' created with receiver options: %O",this._context.connectionId,this.name,e),this._context.receivers[this.name]||(this._context.receivers[this.name]=this),yield this._ensureTokenRenewal())}catch(e){throw this.isConnecting=!1,e=translate(e),Ct("[%s] An error occured while creating the receiver '%s': %O",this._context.connectionId,this.name,e),e}})}_createReceiverOptions(e){e.newName&&(this.name=`${wt()()}`);const t={name:this.name,autoaccept:!0,source:{address:this.address},credit_window:this.prefetchCount,onMessage:e.onMessage||this._onAmqpMessage,onError:e.onError||this._onAmqpError,onClose:e.onClose||this._onAmqpClose,onSessionError:e.onSessionError||this._onSessionError,onSessionClose:e.onSessionClose||this._onSessionClose};void 0!==this.epoch&&null!==this.epoch&&(t.properties||(t.properties={}),t.properties[n.attachEpoch]=i.types.wrap_long(this.epoch)),this.identifier&&(t.properties||(t.properties={}),t.properties[n.receiverIdentifierName]=this.identifier),this.receiverRuntimeMetricEnabled&&(t.desired_capabilities=n.enableReceiverRuntimeMetricName);const r=e.eventPosition||this.options.eventPosition;if(r){const e=r.getExpression();e&&(t.source.filter={"apache.org:selector-filter:string":i.types.wrap_described(e,77567109365764)})}return t}}class streamingReceiver_ReceiveHandler{constructor(e){this._receiver=e,this.name=e?e.name:"ReceiveHandler"}get partitionId(){return this._receiver?this._receiver.partitionId:void 0}get consumerGroup(){return this._receiver?this._receiver.consumerGroup:void 0}get address(){return this._receiver?this._receiver.address:void 0}get epoch(){return this._receiver?this._receiver.epoch:void 0}get identifier(){return this._receiver?this._receiver.identifier:void 0}get runtimeInfo(){return this._receiver?this._receiver.runtimeInfo:void 0}get isReceiverOpen(){return!!this._receiver&&this._receiver.isOpen()}stop(){return o.__awaiter(this,void 0,void 0,function*(){if(this._receiver)try{yield this._receiver.close()}catch(e){Ct("An error occurred while stopping the receiver '%s' with address '%s': %O",this._receiver.name,this._receiver.address,e)}})}}class streamingReceiver_StreamingReceiver extends eventHubReceiver_EventHubReceiver{constructor(e,t,r){super(e,t,r),this.receiveHandler=new streamingReceiver_ReceiveHandler(this)}receive(e,t){if(!e||"function"!=typeof e)throw new Error("'onMessage' is a required parameter and must be of type 'function'.");if(!t||"function"!=typeof t)throw new Error("'onError' is a required parameter and must be of type 'function'.");return this._onMessage=e,this._onError=t,this.isOpen()?(Ot("[%s] Receiver link is already present for '%s' due to previous receive() calls. Hence reusing it and attaching message and error handlers.",this._context.connectionId,this.name),this._receiver.on(i.ReceiverEvents.message,this._onAmqpMessage),this._receiver.on(i.ReceiverEvents.receiverError,this._onAmqpError),this._receiver.setCreditWindow(n.defaultPrefetchCount),this._receiver.addCredit(n.defaultPrefetchCount),Ot("[%s] Receiver '%s', set the prefetch count to 1000 and providing a credit of the same amount.",this._context.connectionId,this.name)):this._init().catch(e=>{this._onError(e)}),this.receiveHandler}static create(e,t,r){const n=new streamingReceiver_StreamingReceiver(e,t,r);return e.receivers[n.name]=n,n}}const Lt={name:"@azure/event-hubs",version:"1.0.5"};class managementClient_ManagementClient extends linkEntity_LinkEntity{constructor(e,t){super(e,{address:t&&t.address?t.address:n.management,audience:t&&t.audience?t.audience:e.config.getManagementAudience()}),this.managementLock=`${n.managementRequestKey}-${wt()()}`,this.replyTo=wt()(),this._context=e,this.entityPath=e.config.entityPath}getHubRuntimeInformation(){return o.__awaiter(this,void 0,void 0,function*(){const e=yield this._makeManagementRequest(n.eventHub),t={path:e.name,createdAt:new Date(e.created_at),partitionCount:e.partition_count,partitionIds:e.partition_ids,type:e.type};return xt("[%s] The hub runtime info is: %O",this._context.connectionId,t),t})}getPartitionIds(){return o.__awaiter(this,void 0,void 0,function*(){return(yield this.getHubRuntimeInformation()).partitionIds})}getPartitionInformation(e){return o.__awaiter(this,void 0,void 0,function*(){if("string"!=typeof e&&"number"!=typeof e)throw new Error("'partitionId' is a required parameter and must be of type: 'string' | 'number'.");const t=yield this._makeManagementRequest(n.partition,e),r={beginningSequenceNumber:t.begin_sequence_number,hubPath:t.name,lastEnqueuedOffset:t.last_enqueued_offset,lastEnqueuedTimeUtc:new Date(t.last_enqueued_time_utc),lastSequenceNumber:t.last_enqueued_sequence_number,partitionId:t.partition,type:t.type};return xt("[%s] The partition info is: %O.",this._context.connectionId,r),r})}close(){return o.__awaiter(this,void 0,void 0,function*(){try{if(this._isMgmtRequestResponseLinkOpen()){const e=this._mgmtReqResLink;this._mgmtReqResLink=void 0,clearTimeout(this._tokenRenewalTimer),yield e.close(),xt("Successfully closed the management session.")}}catch(e){const t=`An error occurred while closing the management session: ${e}`;throw Ct(t),new Error(t)}})}_init(){return o.__awaiter(this,void 0,void 0,function*(){try{if(!this._isMgmtRequestResponseLinkOpen()){yield this._negotiateClaim();const e={source:{address:this.address},name:this.replyTo,target:{address:this.replyTo},onSessionError:e=>{const t=e.connection.options.id,r=translate(e.session.error);Ct("[%s] An error occurred on the session for request/response links for $management: %O",t,r)}},t={target:{address:this.address}};xt("[%s] Creating sender/receiver links on a session for $management endpoint with srOpts: %o, receiverOpts: %O.",this._context.connectionId,t,e),this._mgmtReqResLink=yield requestResponseLink_RequestResponseLink.create(this._context.connection,t,e),this._mgmtReqResLink.sender.on(i.SenderEvents.senderError,e=>{const t=e.connection.options.id,r=translate(e.sender.error);Ct("[%s] An error occurred on the $management sender link.. %O",t,r)}),this._mgmtReqResLink.receiver.on(i.ReceiverEvents.receiverError,e=>{const t=e.connection.options.id,r=translate(e.receiver.error);Ct("[%s] An error occurred on the $management receiver link.. %O",t,r)}),xt("[%s] Created sender '%s' and receiver '%s' links for $management endpoint.",this._context.connectionId,this._mgmtReqResLink.sender.name,this._mgmtReqResLink.receiver.name),yield this._ensureTokenRenewal()}}catch(e){throw e=translate(e),Ct("[%s] An error occured while establishing the $management links: %O",this._context.connectionId,e),e}})}_makeManagementRequest(e,t){return o.__awaiter(this,void 0,void 0,function*(){if(null!=t&&"string"!=typeof t&&"number"!=typeof t)throw new Error("'partitionId' is a required parameter and must be of type: 'string' | 'number'.");try{const r={body:Buffer.from(JSON.stringify([])),message_id:wt()(),reply_to:this.replyTo,application_properties:{operation:n.readOperation,name:this.entityPath,type:`${n.vendorString}:${e}`}};return null!=t&&e===n.partition&&(r.application_properties.partition=`${t}`),xt("[%s] Acquiring lock to get the management req res link.",this._context.connectionId),yield We.acquire(this.managementLock,()=>this._init()),(yield this._mgmtReqResLink.sendRequest(r)).body}catch(e){throw e=translate(e),Ct("An error occurred while making the request to $management endpoint: %O",e),e}})}_isMgmtRequestResponseLinkOpen(){return this._mgmtReqResLink&&this._mgmtReqResLink.isOpen()}}var Dt;!function(e){const t="/js-event-hubs";function getUserAgent(e){const r=e.userAgent?`${t},${e.userAgent}`:t;if(r.length>n.maxUserAgentLength)throw new Error("The user-agent string cannot be more than 128 characters in length."+`The given user-agent string is: ${r} with length: ${r.length}`);return r}e.getUserAgent=getUserAgent,e.create=function create(e,t){t||(t={});const r={config:e,tokenProvider:t.tokenProvider,dataTransformer:t.dataTransformer,isEntityPathRequired:!0,connectionProperties:{product:"MSJSClient",userAgent:getUserAgent(t),version:Lt.version}},s=yt.create(r);s.wasConnectionCloseCalled=!1,s.senders={},s.receivers={};const a={address:t.managementSessionAddress,audience:t.managementSessionAudience};return s.managementSession=new managementClient_ManagementClient(s,a),s.connection.on(i.ConnectionEvents.connectionOpen,e=>{s.wasConnectionCloseCalled=!1,Nt("[%s] setting 'wasConnectionCloseCalled' property of connection context to %s.",s.connection.id,s.wasConnectionCloseCalled)}),s.connection.on(i.ConnectionEvents.disconnected,e=>o.__awaiter(this,void 0,void 0,function*(){const t=e.connection&&e.connection.error?e.connection.error:void 0;t&&Ct("[%s] Error (context.connection.error) occurred on the amqp connection: %O",s.connection.id,t);const r=e.error;r&&Ct("[%s] Error (context.error) occurred on the amqp connection: %O",s.connection.id,r);const i={wasConnectionCloseCalled:s.wasConnectionCloseCalled,numSenders:Object.keys(s.senders).length,numReceivers:Object.keys(s.receivers).length};if(s.connection.removeAllSessions(),yield s.cbsSession.close(),yield s.managementSession.close(),Ct("[%s] state: %O",s.connection.id,i),!i.wasConnectionCloseCalled&&(i.numSenders||i.numReceivers)){Ct("[%s] connection.close() was not called from the sdk and there were some sender or receiver links or both. We should reconnect.",s.connection.id),yield delay(n.connectionReconnectDelay);for(const e of Object.keys(s.senders)){const n=s.senders[e];n.isConnecting?Ct("[%s] sender '%s' with address '%s' is already reconnecting. Hence not calling detached on the sender.",s.connection.id,n.name,n.address):(Ct("[%s] calling detached on sender '%s' with address '%s'.",s.connection.id,n.name,n.address),n.detached(t||r).catch(e=>{Ct("[%s] An error occurred while reconnecting the sender '%s' with adress '%s' %O.",s.connection.id,n.name,n.address,e)}))}for(const e of Object.keys(s.receivers)){const n=s.receivers[e];n.isConnecting?Ct("[%s] receiver '%s' with address '%s' is already reconnecting. Hence not calling detached on the receiver.",s.connection.id,n.name,n.address):(Ct("[%s] calling detached on receiver '%s' with address '%s'.",s.connection.id,n.name,n.address),n.detached(t||r).catch(e=>{Ct("[%s] An error occurred while reconnecting the receiver '%s' with adress '%s' %O.",s.connection.id,n.name,n.address,e)}))}}})),Nt("[%s] Created connection context successfully.",s.connectionId),s}}(Dt||(Dt={}));class eventHubSender_EventHubSender extends linkEntity_LinkEntity{constructor(e,t,r){super(e,{name:r,partitionId:t}),this.senderLock=`sender-${wt()()}`,this.address=e.config.getSenderAddress(t),this.audience=e.config.getSenderAudience(t),this._onAmqpError=(e=>{const t=e.sender&&e.sender.error;if(t){const e=translate(t);Ct("[%s] An error occurred for sender '%s': %O.",this._context.connectionId,this.name,e)}}),this._onSessionError=(e=>{const t=e.session&&e.session.error;if(t){const e=translate(t);Ct("[%s] An error occurred on the session of sender '%s': %O.",this._context.connectionId,this.name,e)}}),this._onAmqpClose=(e=>o.__awaiter(this,void 0,void 0,function*(){const t=this._sender||e.sender,r=e.sender&&e.sender.error;r&&Ct("[%s] 'sender_close' event occurred for sender '%s' with address '%s'. The associated error is: %O",this._context.connectionId,this.name,this.address,r),t&&!t.isItselfClosed()?this.isConnecting?Ct("[%s] 'sender_close' event occurred on the sender '%s' with address '%s' and the sdk did not initate this. Moreover the sender is already re-connecting. Hence not calling detached from the _onAmqpClose() handler.",this._context.connectionId,this.name,this.address):(Ct("[%s] 'sender_close' event occurred on the sender '%s' with address '%s' and the sdk did not initiate this. The sender is not reconnecting. Hence, calling detached from the _onAmqpClose() handler.",this._context.connectionId,this.name,this.address),yield this.detached(r)):Ct("[%s] 'sender_close' event occurred on the sender '%s' with address '%s' because the sdk initiated it. Hence not calling detached from the _onAmqpClose() handler.",this._context.connectionId,this.name,this.address)})),this._onSessionClose=(e=>o.__awaiter(this,void 0,void 0,function*(){const t=this._sender||e.sender,r=e.session&&e.session.error;r&&Ct("[%s] 'session_close' event occurred for sender '%s' with address '%s'. The associated error is: %O",this._context.connectionId,this.name,this.address,r),t&&!t.isSessionItselfClosed()?this.isConnecting?Ct("[%s] 'session_close' event occurred on the session of sender '%s' with address '%s' and the sdk did not initiate this. Moreover the sender is already re-connecting. Hence not calling detached from the _onSessionClose() handler.",this._context.connectionId,this.name,this.address):(Ct("[%s] 'session_close' event occurred on the session of sender '%s' with address '%s' and the sdk did not initiate this. Hence calling detached from the _onSessionClose() handler.",this._context.connectionId,this.name,this.address),yield this.detached(r)):Ct("[%s] 'session_close' event occurred on the session of sender '%s' with address '%s' because the sdk initiated it. Hence not calling detached from the _onSessionClose() handler.",this._context.connectionId,this.name,this.address)}))}detached(e){return o.__awaiter(this,void 0,void 0,function*(){try{const t=this._sender&&this._sender.isItselfClosed();yield this._closeLink(this._sender);let r=!1;if(e&&!t){translate(e).retryable?(r=!0,Ct("[%s] close() method of Sender '%s' with address '%s' was not called. There was an accompanying error an it is retryable. This is a candidate for re-establishing the sender link.",this._context.connectionId,this.name,this.address)):Ct("[%s] close() method of Sender '%s' with address '%s' was not called. There was an accompanying error and it is NOT retryable. Hence NOT re-establishing the sender link.",this._context.connectionId,this.name,this.address)}else if(t){const r={wasCloseInitiated:t,senderError:e,_sender:this._sender};Ct("[%s] Something went wrong. State of sender '%s' with address '%s' is: %O",this._context.connectionId,this.name,this.address,r)}else r=!0,Ct("[%s] close() method of Sender '%s' with address '%s' was not called. There was no accompanying error as well. This is a candidate for re-establishing the sender link.",this._context.connectionId,this.name,this.address);r&&(yield We.acquire(this.senderLock,()=>{const e=this._createSenderOptions({newName:!0});return retry_retry({operation:()=>this._init(e),connectionId:this._context.connectionId,operationType:nt.senderLink,times:n.defaultConnectionRetryAttempts,connectionHost:this._context.config.host,delayInSeconds:15})}))}catch(e){Ct("[%s] An error occurred while processing detached() of Sender '%s' with address '%s': %O",this._context.connectionId,this.name,this.address,e)}})}close(){return o.__awaiter(this,void 0,void 0,function*(){if(this._sender){const e=this._sender;this._deleteFromCache(),yield this._closeLink(e)}})}isOpen(){const e=this._sender&&this._sender.isOpen();return Ct("[%s] Sender '%s' with address '%s' is open? -> %s",this._context.connectionId,this.name,this.address,e),e}send(e){return o.__awaiter(this,void 0,void 0,function*(){try{if(!e||e&&"object"!=typeof e)throw new Error("data is required and it must be of type object.");if(e.partitionKey&&"string"!=typeof e.partitionKey)throw new Error("'partitionKey' must be of type 'string'.");this.isOpen()||(kt("Acquiring lock %s for initializing the session, sender and possibly the connection.",this.senderLock),yield We.acquire(this.senderLock,()=>this._init()));const t=vt.toAmqpMessage(e);return t.body=this._context.dataTransformer.encode(e.body),yield this._trySend(t,t.message_id)}catch(e){throw Ct("An error occurred while sending the message %O",e),e}})}sendBatch(e){return o.__awaiter(this,void 0,void 0,function*(){try{if(!e||e&&!Array.isArray(e))throw new Error("data is required and it must be an Array.");this.isOpen()||(kt("Acquiring lock %s for initializing the session, sender and possibly the connection.",this.senderLock),yield We.acquire(this.senderLock,()=>this._init())),kt("[%s] Sender '%s', trying to send EventData[].",this._context.connectionId,this.name);const t=[];for(let r=0;r<e.length;r++){const n=vt.toAmqpMessage(e[r]);n.body=this._context.dataTransformer.encode(e[r].body),t[r]=n}const r={body:message.data_sections(t.map(message.encode))};t[0].message_annotations&&(r.message_annotations=t[0].message_annotations),t[0].application_properties&&(r.application_properties=t[0].application_properties);for(const e of i.messageProperties)t[0][e]&&(r[e]=t[0][e]);const n=message.encode(r);return kt("[%s] Sender '%s', sending encoded batch message.",this._context.connectionId,this.name,n),yield this._trySend(n,r.message_id,2147563264)}catch(e){throw Ct("An error occurred while sending the batch message %O",e),e}})}_deleteFromCache(){this._sender=void 0,delete this._context.senders[this.address],Ct("[%s] Deleted the sender '%s' with address '%s' from the client cache.",this._context.connectionId,this.name,this.address)}_createSenderOptions(e){e.newName&&(this.name=`${wt()()}`);const t={name:this.name,target:{address:this.address},onError:this._onAmqpError,onClose:this._onAmqpClose,onSessionError:this._onSessionError,onSessionClose:this._onSessionClose};return kt("Creating sender with options: %O",t),t}_trySend(e,t,r){const o=function randomNumberFromInterval(e,t){return Math.floor(Math.random()*(t-e+1)+e)}(1,4);return retry_retry({operation:()=>new Promise((o,s)=>{let a;if(kt("[%s] Sender '%s', credit: %d available: %d",this._context.connectionId,this.name,this._sender.credit,this._sender.session.outgoing.available()),this._sender.sendable()){let c,u,l,p;kt("[%s] Sender '%s', sending message with id '%s'.",this._context.connectionId,this.name,e.message_id||t||"<not specified>");const d=()=>{clearTimeout(a),this._sender.removeListener(i.SenderEvents.rejected,c),this._sender.removeListener(i.SenderEvents.accepted,p),this._sender.removeListener(i.SenderEvents.released,u),this._sender.removeListener(i.SenderEvents.modified,l)};p=(e=>{d(),kt("[%s] Sender '%s', got event accepted.",this._context.connectionId,this.name),o(e.delivery)}),c=(e=>{d(),Ct("[%s] Sender '%s', got event rejected.",this._context.connectionId,this.name);const t=translate(e.delivery.remote_state.error);Ct(t),s(t)}),u=(e=>{let t;d(),Ct("[%s] Sender '%s', got event released.",this._context.connectionId,this.name),t=e.delivery.remote_state.error?translate(e.delivery.remote_state.error):new Error(`[${this._context.connectionId}] Sender '${this.name}', `+"received a release disposition.Hence we are rejecting the promise."),Ct(t),s(t)}),l=(e=>{let t;d(),Ct("[%s] Sender '%s', got event modified.",this._context.connectionId,this.name),t=e.delivery.remote_state.error?translate(e.delivery.remote_state.error):new Error(`[${this._context.connectionId}] Sender "${this.name}", `+"received a modified disposition.Hence we are rejecting the promise."),Ct(t),s(t)});const h=()=>{d();const e=`[${this._context.connectionId}] Sender "${this.name}" with `+`address "${this.address}", was not able to send the message right now, due `+"to operation timeout.";Ct(e);const t={condition:Ue.ServiceUnavailableError,description:e};return s(translate(t))};this._sender.on(i.SenderEvents.accepted,p),this._sender.on(i.SenderEvents.rejected,c),this._sender.on(i.SenderEvents.modified,l),this._sender.on(i.SenderEvents.released,u),a=setTimeout(h,1e3*n.defaultOperationTimeoutInSeconds);const f=this._sender.send(e,t,r);kt("[%s] Sender '%s', sent message with delivery id: %d and tag: %s",this._context.connectionId,this.name,f.id,f.tag.toString())}else{const e=`[${this._context.connectionId}] Sender "${this.name}", `+"cannot send the message right now. Please try later.";Ct(e);const t={condition:Ue.SenderBusyError,description:e};s(translate(t))}}),connectionId:this._context.connectionId,operationType:nt.sendMessage,times:n.defaultRetryAttempts,delayInSeconds:n.defaultDelayBetweenOperationRetriesInSeconds+o})}_init(e){return o.__awaiter(this,void 0,void 0,function*(){try{this.isOpen()||this.isConnecting?Ct("[%s] The sender '%s' with address '%s' is open -> %s and is connecting -> %s. Hence not reconnecting.",this._context.connectionId,this.name,this.address,this.isOpen(),this.isConnecting):(Ct("[%s] The sender '%s' with address '%s' is not open and is not currently establishing itself. Hence let's try to connect.",this._context.connectionId,this.name,this.address),this.isConnecting=!0,yield this._negotiateClaim(),Ct("[%s] Trying to create sender '%s'...",this._context.connectionId,this.name),e||(e=this._createSenderOptions({})),this._sender=yield this._context.connection.createSender(e),this.isConnecting=!1,Ct("[%s] Sender '%s' with address '%s' has established itself.",this._context.connectionId,this.name,this.address),this._sender.setMaxListeners(1e3),Ct("[%s] Promise to create the sender resolved. Created sender with name: %s",this._context.connectionId,this.name),Ct("[%s] Sender '%s' created with sender options: %O",this._context.connectionId,this.name,e),this._context.senders[this.address]||(this._context.senders[this.address]=this),yield this._ensureTokenRenewal())}catch(e){throw this.isConnecting=!1,e=translate(e),Ct("[%s] An error occurred while creating the sender %s",this._context.connectionId,this.name,e),e}})}static create(e,t){if(t&&"string"!=typeof t&&"number"!=typeof t)throw new Error("'partitionId' must be of type: 'string' | 'number'.");const r=new eventHubSender_EventHubSender(e,t);return e.senders[r.address]||(e.senders[r.address]=r),e.senders[r.address]}}class batchingReceiver_BatchingReceiver extends eventHubReceiver_EventHubReceiver{constructor(e,t,r){super(e,t,r)}receive(e,t){if(!e||e&&"number"!=typeof e)throw new Error("'maxMessageCount' is a required parameter of type number with a value greater than 0.");null==t&&(t=n.defaultOperationTimeoutInSeconds);const r=[];let s=!1;return new Promise((n,a)=>{let c,u,l,p,d,h,f;const m=(e,t)=>{this._receiver&&(this._receiver.removeListener(i.ReceiverEvents.receiverError,u),this._receiver.removeListener(i.ReceiverEvents.message,c)),t||(t=r.length?r[r.length-1]:void 0),e||clearTimeout(h),this.receiverRuntimeMetricEnabled&&t&&(this.runtimeInfo.lastSequenceNumber=t.lastSequenceNumber,this.runtimeInfo.lastEnqueuedTimeUtc=t.lastEnqueuedTime,this.runtimeInfo.lastEnqueuedOffset=t.lastEnqueuedOffset,this.runtimeInfo.retrievalTime=t.retrievalTime),n(r)};f=(()=>(s=!0,Tt("[%s] Batching Receiver '%s', %d messages received when max wait time in seconds %d is over.",this._context.connectionId,this.name,r.length,t),m(s))),c=(n=>{const i=vt.fromAmqpMessage(n.message);i.body=this._context.dataTransformer.decode(n.message.body),r.length<=e&&r.push(i),r.length===e&&(Tt("[%s] Batching Receiver '%s', %d messages received within %d seconds.",this._context.connectionId,this.name,r.length,t),m(s,i))}),u=(e=>{const t=this._receiver||e.receiver;t.removeListener(i.ReceiverEvents.receiverError,u),t.removeListener(i.ReceiverEvents.message,c),t.session.removeListener(i.SessionEvents.sessionError,p);const r=e.receiver&&e.receiver.error;let n=new MessagingError("An error occuured while receiving messages.");r&&(n=translate(r),Ct("[%s] Receiver '%s' received an error:\n%O",this._context.connectionId,this.name,n)),h&&clearTimeout(h),a(n)}),l=(e=>o.__awaiter(this,void 0,void 0,function*(){const t=e.receiver&&e.receiver.error;t&&Ct("[%s] 'receiver_close' event occurred. The associated error is: %O",this._context.connectionId,t)})),d=(e=>o.__awaiter(this,void 0,void 0,function*(){const t=e.session&&e.session.error;t&&Ct("[%s] 'session_close' event occurred for receiver '%s'. The associated error is: %O",this._context.connectionId,this.name,t)})),p=(e=>{const t=this._receiver||e.receiver;t.removeListener(i.ReceiverEvents.receiverError,u),t.removeListener(i.ReceiverEvents.message,c),t.session.removeListener(i.SessionEvents.sessionError,u);const r=e.session&&e.session.error;let n=new MessagingError("An error occuured while receiving messages.");r&&(n=translate(r),Ct("[%s] 'session_close' event occurred for Receiver '%s' received an error:\n%O",this._context.connectionId,this.name,n)),h&&clearTimeout(h),a(n)});const g=r=>{Tt("[%s] Receiver '%s', adding credit for receiving %d messages.",this._context.connectionId,this.name,e),this._receiver.addCredit(e);let n="[%s] Setting the wait timer for %d seconds for receiver '%s'.";r&&(n+=" Receiver link already present, hence reusing it."),Tt(n,this._context.connectionId,t,this.name),h=setTimeout(f,1e3*t)};if(this.isOpen())g(!0),this._receiver.on(i.ReceiverEvents.message,c),this._receiver.on(i.ReceiverEvents.receiverError,u),this._receiver.session.on(i.SessionEvents.sessionError,u);else{Tt("[%s] Receiver '%s', setting the prefetch count to 0.",this._context.connectionId,this.name),this.prefetchCount=0;const e=this._createReceiverOptions({onMessage:c,onError:u,onClose:l,onSessionError:p,onSessionClose:d});this._init(e).then(()=>g()).catch(a)}})}static create(e,t,r){const n=new batchingReceiver_BatchingReceiver(e,t,r);return e.receivers[n.name]=n,n}}class iothubClient_IotHubClient{constructor(e){this.connectionString=e}getEventHubConnectionString(e){return o.__awaiter(this,void 0,void 0,function*(){const t=ht.create(this.connectionString),r=ht.convertToEventHubConnectionConfig(t);let n="";e||(e={}),e.tokenProvider=new iotSas_IotSasTokenProvider(r.endpoint,r.sharedAccessKeyName,r.sharedAccessKey),e.managementSessionAddress="/messages/events/$management";const i=Dt.create(r,e);try{Pt("Getting the hub runtime info from the iothub connection string to get the redirect error."),yield i.managementSession.getHubRuntimeInformation()}catch(e){const t=translate(e);Ct("IotHubClient received the error: %O",t);const i=this._parseRedirectError(e);Ct("Parsed info from redirect error is: %O",i),n=this._buildConnectionString({sharedAccessKey:r.sharedAccessKey,sharedAccessKeyName:r.sharedAccessKeyName,endpoint:i.endpoint,entityPath:i.entityPath})}return Pt("The EventHub ConnectionString is: '%s'.",n),yield this.close(i),n})}close(e){return o.__awaiter(this,void 0,void 0,function*(){try{e.connection.isOpen()&&(Pt("Closing the IotHubClient connection..."),yield e.cbsSession.close(),Pt("IotHub cbs session closed."),yield e.managementSession.close(),Pt("IotHub management client closed."),yield e.connection.close(),Pt("Closed the amqp connection '%s' on the iothub client.",e.connectionId))}catch(t){const r=`An error occurred while closing the connection "${e.connectionId}": ${t.stack}`;Ct(r)}})}_parseRedirectError(e){if(!e)throw new Error("'error' is a required parameter and must be of type 'object'.");if("LinkRedirectError"!==e.name||!e.info)throw e;if(!e.info.hostname||!e.info.address){const t=`The received redirect error from IotHub is malformed. ${e.stack}\n${e.info}`;throw new Error(t)}const t=e.info.address,r=t.match(/5671\/(.*)\/\$management/i);if(null==r||r&&null==r[1]){const n=`Cannot parse the EventHub name from the given address: ${t} in the error: `+`${e.stack}\n${JSON.stringify(e.info)}.\nThe parsed result is: ${JSON.stringify(r)}.`;throw new Error(n)}return{endpoint:e.info.hostname,entityPath:r[1]}}_buildConnectionString(e){const t=new Map;return t.set("Endpoint",`sb://${e.endpoint}/`),t.set("SharedAccessKeyName",e.sharedAccessKeyName),t.set("SharedAccessKey",e.sharedAccessKey),t.set("EntityPath",e.entityPath),Array.from(t).map(e=>`${e[0]}=${e[1]}`).join(";")}}class eventHubClient_EventHubClient{get eventhubName(){return this._context.config.entityPath}constructor(e,t){t||(t={}),this._context=Dt.create(e,t)}close(){return o.__awaiter(this,void 0,void 0,function*(){try{if(this._context.connection.isOpen()){for(const e of Object.keys(this._context.senders))yield this._context.senders[e].close();for(const e of Object.keys(this._context.receivers))yield this._context.receivers[e].close();yield this._context.cbsSession.close(),yield this._context.managementSession.close(),yield this._context.connection.close(),this._context.wasConnectionCloseCalled=!0,At("Closed the amqp connection '%s' on the client.",this._context.connectionId)}}catch(e){const t=`An error occurred while closing the connection "${this._context.connectionId}": ${JSON.stringify(e)}`;throw Ct(t),new Error(t)}})}send(e,t){return o.__awaiter(this,void 0,void 0,function*(){return eventHubSender_EventHubSender.create(this._context,t).send(e)})}sendBatch(e,t){return o.__awaiter(this,void 0,void 0,function*(){return eventHubSender_EventHubSender.create(this._context,t).sendBatch(e)})}receive(e,t,r,n){if("string"!=typeof e&&"number"!=typeof e)throw new Error("'partitionId' is a required parameter and must be of type: 'string' | 'number'.");const i=streamingReceiver_StreamingReceiver.create(this._context,e,n);return this._context.receivers[i.name]=i,i.receive(t,r)}receiveBatch(e,t,r,n){return o.__awaiter(this,void 0,void 0,function*(){if("string"!=typeof e&&"number"!=typeof e)throw new Error("'partitionId' is a required parameter and must be of type: 'string' | 'number'.");const i=batchingReceiver_BatchingReceiver.create(this._context,e,n);let o;this._context.receivers[i.name]=i;let s=[];try{s=yield i.receive(t,r)}catch(e){o=e,Ct("[%s] Receiver '%s', an error occurred while receiving %d messages for %d max time:\n %O",this._context.connectionId,i.name,t,r,e)}try{yield i.close()}catch(e){}if(o)throw o;return s})}getHubRuntimeInformation(){return o.__awaiter(this,void 0,void 0,function*(){try{return yield this._context.managementSession.getHubRuntimeInformation()}catch(e){throw Ct("An error occurred while getting the hub runtime information: %O",e),e}})}getPartitionIds(){return o.__awaiter(this,void 0,void 0,function*(){try{return(yield this.getHubRuntimeInformation()).partitionIds}catch(e){throw Ct("An error occurred while getting the partition ids: %O",e),e}})}getPartitionInformation(e){return o.__awaiter(this,void 0,void 0,function*(){if("string"!=typeof e&&"number"!=typeof e)throw new Error("'partitionId' is a required parameter and must be of type: 'string' | 'number'.");try{return yield this._context.managementSession.getPartitionInformation(e)}catch(e){throw Ct("An error occurred while getting the partition information: %O",e),e}})}static createFromConnectionString(e,t,r){if(!e||e&&"string"!=typeof e)throw new Error("'connectionString' is a required parameter and must be of type: 'string'.");const n=dt.create(e,t);if(!n.entityPath)throw new Error('Either the connectionString must have "EntityPath=<path-to-entity>" or you must provide "path", while creating the client');return new eventHubClient_EventHubClient(n,r)}static createFromIotHubConnectionString(e,t){return o.__awaiter(this,void 0,void 0,function*(){if(!e||e&&"string"!=typeof e)throw new Error("'connectionString' is a required parameter and must be of type: 'string'.");const r=yield new iothubClient_IotHubClient(e).getEventHubConnectionString();return eventHubClient_EventHubClient.createFromConnectionString(r,void 0,t)})}static createFromTokenProvider(e,t,r,n){if(!e||e&&"string"!=typeof e)throw new Error("'host' is a required parameter and must be of type: 'string'.");if(!t||t&&"string"!=typeof t)throw new Error("'entityPath' is a required parameter and must be of type: 'string'.");if(!r||r&&"object"!=typeof r)throw new Error("'tokenProvider' is a required parameter and must be of type: 'object'.");e.endsWith("/")||(e+="/");const i=`Endpoint=sb://${e};SharedAccessKeyName=defaultKeyName;`+"SharedAccessKey=defaultKeyValue";n||(n={});const o=n;return o.tokenProvider=r,eventHubClient_EventHubClient.createFromConnectionString(i,t,o)}static createFromAadTokenCredentials(e,t,r,n){if(!r||r&&"object"!=typeof r)throw new Error("'credentials' is a required parameter and must be an instance of ApplicationTokenCredentials | UserTokenCredentials | DeviceTokenCredentials | MSITokenCredentials.");const i=new aad_AadTokenProvider(r);return eventHubClient_EventHubClient.createFromTokenProvider(e,t,i,n)}}r.d(t,"aadEventHubsAudience",function(){return Mt}),r.d(t,"EventData",function(){return vt}),r.d(t,"ReceiveHandler",function(){return streamingReceiver_ReceiveHandler}),r.d(t,"EventHubClient",function(){return eventHubClient_EventHubClient}),r.d(t,"EventPosition",function(){return eventPosition_EventPosition}),r.d(t,"delay",function(){return delay}),r.d(t,"Timeout",function(){return Timeout}),r.d(t,"parseConnectionString",function(){return parseConnectionString}),r.d(t,"isIotHubConnectionString",function(){return isIotHubConnectionString}),r.d(t,"ErrorNameConditionMapper",function(){return Ue}),r.d(t,"ConditionStatusMapper",function(){return Fe}),r.d(t,"ConditionErrorNameMapper",function(){return ze}),r.d(t,"MessagingError",function(){return MessagingError}),r.d(t,"DefaultDataTransformer",function(){return dataTransformer_DefaultDataTransformer}),r.d(t,"TokenType",function(){return ot}),r.d(t,"AadTokenProvider",function(){return aad_AadTokenProvider}),r.d(t,"SasTokenProvider",function(){return sas_SasTokenProvider}),r.d(t,"ConnectionConfig",function(){return pt}),r.d(t,"EventHubConnectionConfig",function(){return dt});const Mt=n.aadEventHubsAudience},function(e,t){e.exports=require("dns")},function(e,t,r){"use strict";var n=this&&this.__awaiter||function(e,t,r,n){return new(r||(r=Promise))(function(i,o){function fulfilled(e){try{step(n.next(e))}catch(e){o(e)}}function rejected(e){try{step(n.throw(e))}catch(e){o(e)}}function step(e){e.done?i(e.value):new r(function(t){t(e.value)}).then(fulfilled,rejected)}step((n=n.apply(e,t||[])).next())})};Object.defineProperty(t,"__esModule",{value:!0});const i=r(10),o=r(499),s=r(16),a=r(1301),c=r(1312),u=r(1313),l=r(1314),p=r(18);t.activate=function activate(e){p.TelemetryClient.sendEvent("extensionActivated"),p.TelemetryClient.initialize(e),s.Constants.initialize(e);let t=new o.AzureIoTExplorer(e),r=new a.DeviceTree(e);i.window.registerTreeDataProvider("iotHubDevices",r),t.checkAndShowWelcomePage(),e.subscriptions.push(i.languages.registerCodeLensProvider({pattern:`**/${s.Constants.ModuleTwinJosnFileName}`},new l.ModuleTwinCodeLensProvider)),e.subscriptions.push(i.languages.registerCodeLensProvider({pattern:`**/${s.Constants.DeviceTwinJosnFileName}`},new u.DeviceTwinCodeLensProvider)),e.subscriptions.push(i.commands.registerCommand("azure-iot-toolkit.refresh",e=>{r.refresh(e)})),e.subscriptions.push(i.commands.registerCommand("azure-iot-toolkit.setIoTHubConnectionString",()=>{r.setIoTHubConnectionString()})),e.subscriptions.push(i.commands.registerCommand("azure-iot-toolkit.getDevice",e=>n(this,void 0,void 0,function*(){return t.getDevice(e?e.deviceItem:void 0)})));let d=i.commands.registerCommand("azure-iot-toolkit.sendD2CMessage",e=>{t.sendD2CMessage(e?e.deviceItem:void 0)}),h=i.commands.registerCommand("azure-iot-toolkit.startMonitorIoTHubMessage",e=>{t.startMonitorIoTHubMessage(e?e.deviceItem:void 0)}),f=i.commands.registerCommand("azure-iot-toolkit.stopMonitorIoTHubMessage",()=>{t.stopMonitorIoTHubMessage()}),m=i.commands.registerCommand("azure-iot-toolkit.sendC2DMessage",e=>{t.sendC2DMessage(e?e.deviceItem:void 0)}),g=i.commands.registerCommand("azure-iot-toolkit.startMonitorC2DMessage",e=>{t.startMonitorC2DMessage(e?e.deviceItem:void 0)}),y=i.commands.registerCommand("azure-iot-toolkit.stopMonitorC2DMessage",()=>{t.stopMonitorC2DMessage()}),v=i.commands.registerCommand("azure-iot-toolkit.listDevice",()=>{t.listDevice()}),b=i.commands.registerCommand("azure-iot-toolkit.createDevice",()=>n(this,void 0,void 0,function*(){return t.createDevice()})),_=i.commands.registerCommand("azure-iot-toolkit.deleteDevice",e=>n(this,void 0,void 0,function*(){yield t.deleteDevice(e?e.deviceItem:void 0)})),w=i.commands.registerCommand("azure-iot-toolkit.invokeDeviceMethod",e=>{t.invokeDeviceDirectMethod(e?e.deviceItem:void 0)});e.subscriptions.push(i.commands.registerCommand("azure-iot-toolkit.invokeModuleDirectMethod",e=>{t.invokeModuleDirectMethod(e?e.moduleItem:void 0)}));let E=i.commands.registerCommand("azure-iot-toolkit.getDeviceTwin",e=>{t.getDeviceTwin(e?e.deviceItem:void 0)}),S=i.commands.registerCommand("azure-iot-toolkit.updateDistributedTracingSetting",e=>{t.updateDistributedTracingSetting(e)}),C=i.commands.registerCommand("azure-iot-toolkit.editDistributedTracingMode",e=>{t.updateDistributedTracingSetting(e,s.DistributedSettingUpdateType.OnlyMode)}),x=i.commands.registerCommand("azure-iot-toolkit.editDistributedTracingSamplingRate",e=>{t.updateDistributedTracingSetting(e,s.DistributedSettingUpdateType.OnlySamplingRate)}),k=i.commands.registerCommand("azure-iot-toolkit.updateDeviceTwin",()=>{t.updateDeviceTwin()});e.subscriptions.push(i.commands.registerCommand("azure-iot-toolkit.createIoTHub",()=>{t.createIoTHub()}));let R=i.commands.registerCommand("azure-iot-toolkit.selectIoTHub",()=>{t.selectIoTHub()}),T=i.commands.registerCommand("azure-iot-toolkit.copyIoTHubConnectionString",()=>n(this,void 0,void 0,function*(){yield t.copyIoTHubConnectionString()})),O=i.commands.registerCommand("azure-iot-toolkit.copyDeviceConnectionString",e=>n(this,void 0,void 0,function*(){yield t.copyDeviceConnectionString(e?e.deviceItem:void 0)}));e.subscriptions.push(i.commands.registerCommand("azure-iot-toolkit.createEdgeDevice",()=>n(this,void 0,void 0,function*(){yield t.createDevice(!0)})));let I=i.commands.registerCommand("azure-iot-toolkit.createDeployment",e=>{t.createDeployment(e)});return e.subscriptions.push(i.commands.registerCommand("azure-iot-toolkit.createDeploymentAtScale",e=>{t.createDeploymentAtScale(e)})),e.subscriptions.push(i.commands.registerCommand("azure-iot-toolkit.getModuleTwin",e=>n(this,void 0,void 0,function*(){yield t.getModuleTwin(e?e.moduleItem:void 0)}))),e.subscriptions.push(i.commands.registerCommand("azure-iot-toolkit.updateModuleTwin",()=>n(this,void 0,void 0,function*(){yield t.updateModuleTwin()}))),e.subscriptions.push(i.commands.registerCommand("azure-iot-toolkit.generateSasTokenForIotHub",()=>{t.generateSasTokenForIotHub()})),e.subscriptions.push(i.commands.registerCommand("azure-iot-toolkit.generateSasTokenForDevice",e=>{t.generateSasTokenForDevice(e?e.deviceItem:void 0)})),e.subscriptions.push(i.commands.registerCommand("azure-iot-toolkit.showWelcomePage",()=>{p.TelemetryClient.sendEvent(s.Constants.IoTHubAIShowWelcomePagetEvent,{trigger:"manual"}),t.showWelcomePage()})),e.subscriptions.push(i.commands.registerCommand("azure-iot-toolkit.generateCode",e=>{t.generateCode(e?e.deviceItem:void 0)})),e.subscriptions.push(i.commands.registerCommand("azure-iot-toolkit.createModule",e=>{t.createModule(e?e.deviceNode:void 0)})),e.subscriptions.push(i.commands.registerCommand("azure-iot-toolkit.deleteModule",e=>{t.deleteModule(e)})),e.subscriptions.push(i.commands.registerCommand("azure-iot-toolkit.getModule",e=>{t.getModule(e?e.moduleItem:void 0)})),e.subscriptions.push(i.commands.registerCommand("azure-iot-toolkit.copyModuleConnectionString",e=>n(this,void 0,void 0,function*(){yield t.copyModuleConnectionString(e?e.moduleItem:void 0)}))),e.subscriptions.push(i.commands.registerCommand("azure-iot-toolkit.startMonitorCustomEventHubEndpoint",e=>n(this,void 0,void 0,function*(){yield t.startMonitorCustomEventHubEndpoint(e?e.eventHubItem:void 0)}))),e.subscriptions.push(i.commands.registerCommand("azure-iot-toolkit.stopMonitorCustomEventHubEndpoint",()=>{t.stopMonitorCustomEventHubEndpoint()})),e.subscriptions.push(i.commands.registerCommand("azure-iot-toolkit.startMonitorIoTHubMessageWithAbbreviation",()=>{p.TelemetryClient.sendEvent(s.Constants.IoTHubAIStartMonitorEvent,{entry:"built-in-events"}),i.commands.executeCommand("azure-iot-toolkit.startMonitorIoTHubMessage")})),i.workspace.onDidChangeTextDocument(e=>t.replaceConnectionString(e)),e.subscriptions.push(i.window.onDidCloseTerminal(e=>{c.Executor.onDidCloseTerminal(e)})),e.subscriptions.push(d),e.subscriptions.push(h),e.subscriptions.push(f),e.subscriptions.push(m),e.subscriptions.push(g),e.subscriptions.push(y),e.subscriptions.push(v),e.subscriptions.push(b),e.subscriptions.push(_),e.subscriptions.push(w),e.subscriptions.push(E),e.subscriptions.push(k),e.subscriptions.push(R),e.subscriptions.push(T),e.subscriptions.push(O),e.subscriptions.push(I),e.subscriptions.push(S),e.subscriptions.push(C),e.subscriptions.push(x),{azureIoTExplorer:t}},t.deactivate=function deactivate(){}},function(e,t,r){"use strict";var n=this&&this.__awaiter||function(e,t,r,n){return new(r||(r=Promise))(function(i,o){function fulfilled(e){try{step(n.next(e))}catch(e){o(e)}}function rejected(e){try{step(n.throw(e))}catch(e){o(e)}}function step(e){e.done?i(e.value):new r(function(t){t(e.value)}).then(fulfilled,rejected)}step((n=n.apply(e,t||[])).next())})};Object.defineProperty(t,"__esModule",{value:!0});const i=r(10),o=r(500),s=r(16),a=r(890),c=r(891),u=r(895),l=r(1034),p=r(1038),d=r(1145),h=r(1146),f=r(1147),m=r(1148),g=r(1149),y=r(1299),v=r(1300);t.AzureIoTExplorer=class AzureIoTExplorer{constructor(e){this.context=e;let t=i.window.createOutputChannel("Azure IoT Hub Toolkit");this._iotHubC2DMessageExplorer=new p.IotHubC2DMessageExplorer(t),this._iotHubMessageExplorer=new f.IoTHubMessageExplorer(t),this._deviceExplorer=new a.DeviceExplorer(t),this._distributedTracingManager=new c.DistributedTracingManager(t),this._snippetManager=new y.SnippetManager(t),this._iotHubDirectMethodExplorer=new h.IotHubDirectMethodExplorer(t),this._iotHubDeviceTwinExplorer=new d.IotHubDeviceTwinExplorer(t),this._iotHubResourceExplorer=new g.IoTHubResourceExplorer(t),this._iotEdgeExplorer=new l.IoTEdgeExplorer(t),this._welcomePage=new v.WelcomePage(this.context),this._codeManager=new o.CodeManager(this.context),this._iotHubModuleExplorer=new m.IotHubModuleExplorer(t),this._eventHubManager=new u.EventHubManager(t)}sendD2CMessage(e){this._iotHubMessageExplorer.sendD2CMessage(e)}startMonitorIoTHubMessage(e){this._iotHubMessageExplorer.startMonitorIoTHubMessage(e)}stopMonitorIoTHubMessage(){this._iotHubMessageExplorer.stopMonitorIoTHubMessage()}sendC2DMessage(e){this._iotHubC2DMessageExplorer.sendC2DMessage(e)}startMonitorC2DMessage(e){this._iotHubC2DMessageExplorer.startMonitorC2DMessage(e)}stopMonitorC2DMessage(){this._iotHubC2DMessageExplorer.stopMonitorC2DMessage()}listDevice(){this._deviceExplorer.listDevice()}getDevice(e,t,r){return n(this,void 0,void 0,function*(){return this._deviceExplorer.getDevice(e,t,r)})}createDevice(e=!1,t,r){return n(this,void 0,void 0,function*(){return this._deviceExplorer.createDevice(e,t,r)})}deleteDevice(e){return n(this,void 0,void 0,function*(){return this._deviceExplorer.deleteDevice(e)})}updateDistributedTracingSetting(e,t=s.DistributedSettingUpdateType.All){this._distributedTracingManager.updateDistributedTracingSetting(e,t)}invokeDeviceDirectMethod(e){this._iotHubDirectMethodExplorer.invokeDeviceDirectMethod(e)}invokeModuleDirectMethod(e){this._iotHubDirectMethodExplorer.invokeModuleDirectMethod(e)}getDeviceTwin(e){this._iotHubDeviceTwinExplorer.getDeviceTwin(e)}updateDeviceTwin(){this._iotHubDeviceTwinExplorer.updateDeviceTwin()}createIoTHub(e,t,r){return n(this,void 0,void 0,function*(){return this._iotHubResourceExplorer.createIoTHub(e,t,r)})}selectIoTHub(e,t){return this._iotHubResourceExplorer.selectIoTHub(e,t)}copyIoTHubConnectionString(){return n(this,void 0,void 0,function*(){yield this._iotHubResourceExplorer.copyIoTHubConnectionString()})}copyDeviceConnectionString(e){return n(this,void 0,void 0,function*(){yield this._iotHubResourceExplorer.copyDeviceConnectionString(e)})}replaceConnectionString(e){this._snippetManager.replaceConnectionString(e)}createDeployment(e){this._iotEdgeExplorer.createDeployment(e)}createDeploymentAtScale(e){this._iotEdgeExplorer.createDeploymentAtScale(e)}getModuleTwin(e){return n(this,void 0,void 0,function*(){yield this._iotEdgeExplorer.getModuleTwin(e)})}updateModuleTwin(){return n(this,void 0,void 0,function*(){yield this._iotEdgeExplorer.updateModuleTwin()})}generateSasTokenForIotHub(){this._iotHubResourceExplorer.generateSasTokenForIotHub()}generateSasTokenForDevice(e){this._iotHubResourceExplorer.generateSasTokenForDevice(e)}checkAndShowWelcomePage(){this._welcomePage.checkAndShow()}showWelcomePage(){this._welcomePage.show()}generateCode(e){this._codeManager.generateCode(e)}createModule(e){this._iotHubModuleExplorer.createModule(e)}deleteModule(e){this._iotHubModuleExplorer.deleteModule(e)}getModule(e){this._iotHubModuleExplorer.getModule(e)}copyModuleConnectionString(e){return n(this,void 0,void 0,function*(){yield this._iotHubModuleExplorer.copyModuleConnectionString(e)})}startMonitorCustomEventHubEndpoint(e){return n(this,void 0,void 0,function*(){this._eventHubManager.startMonitorCustomEventHubEndpoint(e)})}stopMonitorCustomEventHubEndpoint(){return n(this,void 0,void 0,function*(){this._eventHubManager.stopMonitorCustomEventHubEndpoint()})}}},function(e,t,r){"use strict";var n=this&&this.__awaiter||function(e,t,r,n){return new(r||(r=Promise))(function(i,o){function fulfilled(e){try{step(n.next(e))}catch(e){o(e)}}function rejected(e){try{step(n.throw(e))}catch(e){o(e)}}function step(e){e.done?i(e.value):new r(function(t){t(e.value)}).then(fulfilled,rejected)}step((n=n.apply(e,t||[])).next())})};Object.defineProperty(t,"__esModule",{value:!0});const i=r(501),o=r(6),s=r(525),a=r(10),c=r(16),u=r(18),l=r(25);t.CodeManager=class CodeManager{constructor(e){this.context=e}generateCode(e){return n(this,void 0,void 0,function*(){if(!(e=yield l.Utility.getInputDevice(e,"AZ.Generate.Code.Start")))return;const t=yield a.window.showQuickPick(Object.keys(c.Constants.CodeTemplates),{placeHolder:"Select language",ignoreFocusOut:!0});if(!t)return;const r=yield a.window.showQuickPick(Object.keys(c.Constants.CodeTemplates[t]),{placeHolder:"Select code type",ignoreFocusOut:!0});if(!r)return;const n=l.Utility.getConnectionStringWithId(c.Constants.IotHubConnectionStringKey),p=this.context.asAbsolutePath(o.join("resources","code-template",c.Constants.CodeTemplates[t][r])),d=new Map([[/{{deviceConnectionString}}/g,e.connectionString],[/{{iotHubConnectionString}}/g,n],[/{{deviceId}}/g,e.deviceId],[/{{iotHubHostName}}/g,l.Utility.getHostName(n)],[/{{deviceSasToken}}/g,l.Utility.generateSasTokenForDevice(e.connectionString)]]);if((yield i.stat(p)).isFile()){let e=yield i.readFile(p,"utf8");for(const[t,r]of d)e=e.replace(t,r);const r=yield a.workspace.openTextDocument({content:e,language:c.Constants.LanguageIds[t]});a.window.showTextDocument(r)}else{const e=yield a.window.showOpenDialog({canSelectFiles:!1,canSelectFolders:!0});if(!e)return;const t=e[0].fsPath;yield i.copy(p,t),yield s({files:`${t}/**/*`,from:[...d.keys()],to:[...d.values()]}),yield a.commands.executeCommand("vscode.openFolder",a.Uri.file(t),!0)}u.TelemetryClient.sendEvent("AZ.Generate.Code.Done",{language:t,codeType:r})})}}},function(e,t,r){"use strict";e.exports=Object.assign({},r(258),r(259),r(263),r(510),r(512),r(518),r(45),r(522),r(523),r(524),r(62),r(134));const n=r(11);Object.getOwnPropertyDescriptor(n,"promises")&&Object.defineProperty(e.exports,"promises",{get:()=>n.promises})},function(e,t,r){var n=r(503),i=process.cwd,o=null,s=process.env.GRACEFUL_FS_PLATFORM||process.platform;process.cwd=function(){return o||(o=i.call(process)),o};try{process.cwd()}catch(e){}var a=process.chdir;process.chdir=function(e){o=null,a.call(process,e)},e.exports=function patch(e){n.hasOwnProperty("O_SYMLINK")&&process.version.match(/^v0\.6\.[0-2]|^v0\.5\./)&&function patchLchmod(e){e.lchmod=function(t,r,i){e.open(t,n.O_WRONLY|n.O_SYMLINK,r,function(t,n){t?i&&i(t):e.fchmod(n,r,function(t){e.close(n,function(e){i&&i(t||e)})})})},e.lchmodSync=function(t,r){var i,o=e.openSync(t,n.O_WRONLY|n.O_SYMLINK,r),s=!0;try{i=e.fchmodSync(o,r),s=!1}finally{if(s)try{e.closeSync(o)}catch(e){}else e.closeSync(o)}return i}}(e);e.lutimes||function patchLutimes(e){n.hasOwnProperty("O_SYMLINK")?(e.lutimes=function(t,r,i,o){e.open(t,n.O_SYMLINK,function(t,n){t?o&&o(t):e.futimes(n,r,i,function(t){e.close(n,function(e){o&&o(t||e)})})})},e.lutimesSync=function(t,r,i){var o,s=e.openSync(t,n.O_SYMLINK),a=!0;try{o=e.futimesSync(s,r,i),a=!1}finally{if(a)try{e.closeSync(s)}catch(e){}else e.closeSync(s)}return o}):(e.lutimes=function(e,t,r,n){n&&process.nextTick(n)},e.lutimesSync=function(){})}(e);e.chown=chownFix(e.chown),e.fchown=chownFix(e.fchown),e.lchown=chownFix(e.lchown),e.chmod=chmodFix(e.chmod),e.fchmod=chmodFix(e.fchmod),e.lchmod=chmodFix(e.lchmod),e.chownSync=chownFixSync(e.chownSync),e.fchownSync=chownFixSync(e.fchownSync),e.lchownSync=chownFixSync(e.lchownSync),e.chmodSync=chmodFixSync(e.chmodSync),e.fchmodSync=chmodFixSync(e.fchmodSync),e.lchmodSync=chmodFixSync(e.lchmodSync),e.stat=statFix(e.stat),e.fstat=statFix(e.fstat),e.lstat=statFix(e.lstat),e.statSync=statFixSync(e.statSync),e.fstatSync=statFixSync(e.fstatSync),e.lstatSync=statFixSync(e.lstatSync),e.lchmod||(e.lchmod=function(e,t,r){r&&process.nextTick(r)},e.lchmodSync=function(){});e.lchown||(e.lchown=function(e,t,r,n){n&&process.nextTick(n)},e.lchownSync=function(){});"win32"===s&&(e.rename=(t=e.rename,function(r,n,i){var o=Date.now(),s=0;t(r,n,function CB(a){if(a&&("EACCES"===a.code||"EPERM"===a.code)&&Date.now()-o<6e4)return setTimeout(function(){e.stat(n,function(e,o){e&&"ENOENT"===e.code?t(r,n,CB):i(a)})},s),void(s<100&&(s+=10));i&&i(a)})}));var t;function chmodFix(t){return t?function(r,n,i){return t.call(e,r,n,function(e){chownErOk(e)&&(e=null),i&&i.apply(this,arguments)})}:t}function chmodFixSync(t){return t?function(r,n){try{return t.call(e,r,n)}catch(e){if(!chownErOk(e))throw e}}:t}function chownFix(t){return t?function(r,n,i,o){return t.call(e,r,n,i,function(e){chownErOk(e)&&(e=null),o&&o.apply(this,arguments)})}:t}function chownFixSync(t){return t?function(r,n,i){try{return t.call(e,r,n,i)}catch(e){if(!chownErOk(e))throw e}}:t}function statFix(t){return t?function(r,n){return t.call(e,r,function(e,t){if(!t)return n.apply(this,arguments);t.uid<0&&(t.uid+=4294967296),t.gid<0&&(t.gid+=4294967296),n&&n.apply(this,arguments)})}:t}function statFixSync(t){return t?function(r){var n=t.call(e,r);return n.uid<0&&(n.uid+=4294967296),n.gid<0&&(n.gid+=4294967296),n}:t}function chownErOk(e){if(!e)return!0;if("ENOSYS"===e.code)return!0;var t=!process.getuid||0!==process.getuid();return!(!t||"EINVAL"!==e.code&&"EPERM"!==e.code)}e.read=(i=e.read,function(t,r,n,o,s,a){var c;if(a&&"function"==typeof a){var u=0;c=function(l,p,d){if(l&&"EAGAIN"===l.code&&u<10)return u++,i.call(e,t,r,n,o,s,c);a.apply(this,arguments)}}return i.call(e,t,r,n,o,s,c)}),e.readSync=(r=e.readSync,function(t,n,i,o,s){for(var a=0;;)try{return r.call(e,t,n,i,o,s)}catch(e){if("EAGAIN"===e.code&&a<10){a++;continue}throw e}});var r;var i}},function(e,t){e.exports=require("constants")},function(e,t,r){var n=r(15).Stream;e.exports=function legacy(e){return{ReadStream:function ReadStream(t,r){if(!(this instanceof ReadStream))return new ReadStream(t,r);n.call(this);var i=this;this.path=t;this.fd=null;this.readable=!0;this.paused=!1;this.flags="r";this.mode=438;this.bufferSize=65536;r=r||{};var o=Object.keys(r);for(var s=0,a=o.length;s<a;s++){var c=o[s];this[c]=r[c]}this.encoding&&this.setEncoding(this.encoding);if(void 0!==this.start){if("number"!=typeof this.start)throw TypeError("start must be a Number");if(void 0===this.end)this.end=1/0;else if("number"!=typeof this.end)throw TypeError("end must be a Number");if(this.start>this.end)throw new Error("start must be <= end");this.pos=this.start}if(null!==this.fd)return void process.nextTick(function(){i._read()});e.open(this.path,this.flags,this.mode,function(e,t){if(e)return i.emit("error",e),void(i.readable=!1);i.fd=t,i.emit("open",t),i._read()})},WriteStream:function WriteStream(t,r){if(!(this instanceof WriteStream))return new WriteStream(t,r);n.call(this);this.path=t;this.fd=null;this.writable=!0;this.flags="w";this.encoding="binary";this.mode=438;this.bytesWritten=0;r=r||{};var i=Object.keys(r);for(var o=0,s=i.length;o<s;o++){var a=i[o];this[a]=r[a]}if(void 0!==this.start){if("number"!=typeof this.start)throw TypeError("start must be a Number");if(this.start<0)throw new Error("start must be >= zero");this.pos=this.start}this.busy=!1;this._queue=[];null===this.fd&&(this._open=e.open,this._queue.push([this._open,this.path,this.flags,this.mode,void 0]),this.flush())}}}},function(e,t,r){"use strict";e.exports=function clone(e){if(null===e||"object"!=typeof e)return e;if(e instanceof Object)var t={__proto__:e.__proto__};else var t=Object.create(null);return Object.getOwnPropertyNames(e).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(e,r))}),t}},function(e,t,r){"use strict";const n=r(27),i=r(6),o=r(45).mkdirsSync,s=r(261).utimesMillisSync,a=Symbol("notExist");function startCopy(e,t,r,o){if(!o.filter||o.filter(t,r))return function getStats(e,t,r,o){const s=(o.dereference?n.statSync:n.lstatSync)(t);if(s.isDirectory())return function onDir(e,t,r,i,o){if(t===a)return function mkDirAndCopy(e,t,r,i){return n.mkdirSync(r),copyDir(t,r,i),n.chmodSync(r,e.mode)}(e,r,i,o);if(t&&!t.isDirectory())throw new Error(`Cannot overwrite non-directory '${i}' with directory '${r}'.`);return copyDir(r,i,o)}(s,e,t,r,o);if(s.isFile()||s.isCharacterDevice()||s.isBlockDevice())return function onFile(e,t,r,i,o){return t===a?copyFile(e,r,i,o):function mayCopyFile(e,t,r,i){if(i.overwrite)return n.unlinkSync(r),copyFile(e,t,r,i);if(i.errorOnExist)throw new Error(`'${r}' already exists`)}(e,r,i,o)}(s,e,t,r,o);if(s.isSymbolicLink())return function onLink(e,t,r,o){let s=n.readlinkSync(t);o.dereference&&(s=i.resolve(process.cwd(),s));if(e===a)return n.symlinkSync(s,r);{let e;try{e=n.readlinkSync(r)}catch(e){if("EINVAL"===e.code||"UNKNOWN"===e.code)return n.symlinkSync(s,r);throw e}if(o.dereference&&(e=i.resolve(process.cwd(),e)),isSrcSubdir(s,e))throw new Error(`Cannot copy '${s}' to a subdirectory of itself, '${e}'.`);if(n.statSync(r).isDirectory()&&isSrcSubdir(e,s))throw new Error(`Cannot overwrite '${e}' with '${s}'.`);return function copyLink(e,t){return n.unlinkSync(t),n.symlinkSync(e,t)}(s,r)}}(e,t,r,o)}(e,t,r,o)}function copyFile(e,t,i,o){return"function"==typeof n.copyFileSync?(n.copyFileSync(t,i),n.chmodSync(i,e.mode),o.preserveTimestamps?s(i,e.atime,e.mtime):void 0):function copyFileFallback(e,t,i,o){const s=r(262)(65536),a=n.openSync(t,"r"),c=n.openSync(i,"w",e.mode);let u=0;for(;u<e.size;){const e=n.readSync(a,s,0,65536,u);n.writeSync(c,s,0,e),u+=e}o.preserveTimestamps&&n.futimesSync(c,e.atime,e.mtime);n.closeSync(a),n.closeSync(c)}(e,t,i,o)}function copyDir(e,t,r){n.readdirSync(e).forEach(n=>(function copyDirItem(e,t,r,n){const o=i.join(t,e),s=i.join(r,e);return startCopy(checkPaths(o,s),o,s,n)})(n,e,t,r))}function isSrcSubdir(e,t){const r=i.resolve(e).split(i.sep),n=i.resolve(t).split(i.sep);return r.reduce((e,t,r)=>e&&n[r]===t,!0)}function checkPaths(e,t){const{srcStat:r,destStat:i}=function checkStats(e,t){const r=n.statSync(e);let i;try{i=n.statSync(t)}catch(e){if("ENOENT"===e.code)return{srcStat:r,destStat:a};throw e}return{srcStat:r,destStat:i}}(e,t);if(i.ino&&i.ino===r.ino)throw new Error("Source and destination must not be the same.");if(r.isDirectory()&&isSrcSubdir(e,t))throw new Error(`Cannot copy '${e}' to a subdirectory of itself, '${t}'.`);return i}e.exports=function copySync(e,t,r){"function"==typeof r&&(r={filter:r}),(r=r||{}).clobber=!("clobber"in r&&!r.clobber),r.overwrite="overwrite"in r?!!r.overwrite:r.clobber,r.preserveTimestamps&&"ia32"===process.arch&&console.warn("fs-extra: Using the preserveTimestamps option in 32-bit node is not recommended;\n\n    see https://github.com/jprichardson/node-fs-extra/issues/269");const s=checkPaths(e,t);if(r.filter&&!r.filter(e,t))return;const a=i.dirname(t);return n.existsSync(a)||o(a),startCopy(s,e,t,r)}},function(e,t,r){"use strict";const n=r(27),i=r(6),o=r(260).invalidWin32Path,s=parseInt("0777",8);e.exports=function mkdirs(e,t,r,a){if("function"==typeof t?(r=t,t={}):t&&"object"==typeof t||(t={mode:t}),"win32"===process.platform&&o(e)){const t=new Error(e+" contains invalid WIN32 path characters.");return t.code="EINVAL",r(t)}let c=t.mode;const u=t.fs||n;void 0===c&&(c=s&~process.umask()),a||(a=null),r=r||function(){},e=i.resolve(e),u.mkdir(e,c,n=>{if(!n)return r(null,a=a||e);switch(n.code){case"ENOENT":if(i.dirname(e)===e)return r(n);mkdirs(i.dirname(e),t,(n,i)=>{n?r(n,i):mkdirs(e,t,r,i)});break;default:u.stat(e,(e,t)=>{e||!t.isDirectory()?r(n,a):r(null,a)})}})}},function(e,t,r){"use strict";const n=r(27),i=r(6),o=r(260).invalidWin32Path,s=parseInt("0777",8);e.exports=function mkdirsSync(e,t,r){t&&"object"==typeof t||(t={mode:t});let a=t.mode;const c=t.fs||n;if("win32"===process.platform&&o(e)){const t=new Error(e+" contains invalid WIN32 path characters.");throw t.code="EINVAL",t}void 0===a&&(a=s&~process.umask()),r||(r=null),e=i.resolve(e);try{c.mkdirSync(e,a),r=r||e}catch(n){if("ENOENT"===n.code){if(i.dirname(e)===e)throw n;r=mkdirsSync(i.dirname(e),t,r),mkdirsSync(e,t,r)}else{let t;try{t=c.statSync(e)}catch(e){throw n}if(!t.isDirectory())throw n}}return r}},function(e,t,r){"use strict";const n=r(27),i=r(6),o=r(45).mkdirs,s=r(62).pathExists,a=r(261).utimesMillis,c=Symbol("notExist");function checkParentDir(e,t,r,n,a){const c=i.dirname(r);s(c,(i,s)=>i?a(i):s?startCopy(e,t,r,n,a):void o(c,i=>i?a(i):startCopy(e,t,r,n,a)))}function handleFilter(e,t,r,n,i,o){Promise.resolve(i.filter(r,n)).then(s=>s?t?e(t,r,n,i,o):e(r,n,i,o):o(),e=>o(e))}function startCopy(e,t,r,n,i){return n.filter?handleFilter(getStats,e,t,r,n,i):getStats(e,t,r,n,i)}function getStats(e,t,r,o,s){(o.dereference?n.stat:n.lstat)(t,(a,u)=>a?s(a):u.isDirectory()?function onDir(e,t,r,i,o,s){if(t===c)return function mkDirAndCopy(e,t,r,i,o){n.mkdir(r,s=>{if(s)return o(s);copyDir(t,r,i,t=>t?o(t):n.chmod(r,e.mode,o))})}(e,r,i,o,s);if(t&&!t.isDirectory())return s(new Error(`Cannot overwrite non-directory '${i}' with directory '${r}'.`));return copyDir(r,i,o,s)}(u,e,t,r,o,s):u.isFile()||u.isCharacterDevice()||u.isBlockDevice()?function onFile(e,t,r,i,o,s){return t===c?copyFile(e,r,i,o,s):function mayCopyFile(e,t,r,i,o){if(!i.overwrite)return i.errorOnExist?o(new Error(`'${r}' already exists`)):o();n.unlink(r,n=>n?o(n):copyFile(e,t,r,i,o))}(e,r,i,o,s)}(u,e,t,r,o,s):u.isSymbolicLink()?function onLink(e,t,r,o,s){n.readlink(t,(t,a)=>t?s(t):(o.dereference&&(a=i.resolve(process.cwd(),a)),e===c?n.symlink(a,r,s):void n.readlink(r,(t,c)=>t?"EINVAL"===t.code||"UNKNOWN"===t.code?n.symlink(a,r,s):s(t):(o.dereference&&(c=i.resolve(process.cwd(),c)),isSrcSubdir(a,c)?s(new Error(`Cannot copy '${a}' to a subdirectory of itself, '${c}'.`)):e.isDirectory()&&isSrcSubdir(c,a)?s(new Error(`Cannot overwrite '${c}' with '${a}'.`)):function copyLink(e,t,r){n.unlink(t,i=>i?r(i):n.symlink(e,t,r))}(a,r,s)))))}(e,t,r,o,s):void 0)}function copyFile(e,t,r,i,o){return"function"==typeof n.copyFile?n.copyFile(t,r,t=>t?o(t):setDestModeAndTimestamps(e,r,i,o)):function copyFileFallback(e,t,r,i,o){const s=n.createReadStream(t);s.on("error",e=>o(e)).once("open",()=>{const t=n.createWriteStream(r,{mode:e.mode});t.on("error",e=>o(e)).on("open",()=>s.pipe(t)).once("close",()=>setDestModeAndTimestamps(e,r,i,o))})}(e,t,r,i,o)}function setDestModeAndTimestamps(e,t,r,i){n.chmod(t,e.mode,n=>n?i(n):r.preserveTimestamps?a(t,e.atime,e.mtime,i):i())}function copyDir(e,t,r,i){n.readdir(e,(n,o)=>n?i(n):copyDirItems(o,e,t,r,i))}function copyDirItems(e,t,r,n,o){const s=e.pop();return s?function copyDirItem(e,t,r,n,o,s){const a=i.join(r,t),c=i.join(n,t);checkPaths(a,c,(t,i)=>{if(t)return s(t);startCopy(i,a,c,o,t=>t?s(t):copyDirItems(e,r,n,o,s))})}(e,s,t,r,n,o):o()}function isSrcSubdir(e,t){const r=i.resolve(e).split(i.sep),n=i.resolve(t).split(i.sep);return r.reduce((e,t,r)=>e&&n[r]===t,!0)}function checkPaths(e,t,r){!function checkStats(e,t,r){n.stat(e,(e,i)=>{if(e)return r(e);n.stat(t,(e,t)=>e?"ENOENT"===e.code?r(null,{srcStat:i,destStat:c}):r(e):r(null,{srcStat:i,destStat:t}))})}(e,t,(n,i)=>{if(n)return r(n);const{srcStat:o,destStat:s}=i;return s.ino&&s.ino===o.ino?r(new Error("Source and destination must not be the same.")):o.isDirectory()&&isSrcSubdir(e,t)?r(new Error(`Cannot copy '${e}' to a subdirectory of itself, '${t}'.`)):r(null,s)})}e.exports=function copy(e,t,r,n){"function"!=typeof r||n?"function"==typeof r&&(r={filter:r}):(n=r,r={}),n=n||function(){},(r=r||{}).clobber=!("clobber"in r&&!r.clobber),r.overwrite="overwrite"in r?!!r.overwrite:r.clobber,r.preserveTimestamps&&"ia32"===process.arch&&console.warn("fs-extra: Using the preserveTimestamps option in 32-bit node is not recommended;\n\n    see https://github.com/jprichardson/node-fs-extra/issues/269"),checkPaths(e,t,(i,o)=>i?n(i):r.filter?handleFilter(checkParentDir,o,e,t,r,n):checkParentDir(o,e,t,r,n))}},function(e,t,r){"use strict";const n=r(37).fromCallback,i=r(11),o=r(6),s=r(45),a=r(134),c=n(function emptyDir(e,t){t=t||function(){},i.readdir(e,(r,n)=>{if(r)return s.mkdirs(e,t);n=n.map(t=>o.join(e,t)),function deleteItem(){const e=n.pop();if(!e)return t();a.remove(e,e=>{if(e)return t(e);deleteItem()})}()})});function emptyDirSync(e){let t;try{t=i.readdirSync(e)}catch(t){return s.mkdirsSync(e)}t.forEach(t=>{t=o.join(e,t),a.removeSync(t)})}e.exports={emptyDirSync:emptyDirSync,emptydirSync:emptyDirSync,emptyDir:c,emptydir:c}},function(e,t,r){"use strict";const n=r(27),i=r(6),o=r(44),s="win32"===process.platform;function defaults(e){["unlink","chmod","stat","lstat","rmdir","readdir"].forEach(t=>{e[t]=e[t]||n[t],e[t+="Sync"]=e[t]||n[t]}),e.maxBusyTries=e.maxBusyTries||3}function rimraf(e,t,r){let n=0;"function"==typeof t&&(r=t,t={}),o(e,"rimraf: missing path"),o.strictEqual(typeof e,"string","rimraf: path should be a string"),o.strictEqual(typeof r,"function","rimraf: callback function required"),o(t,"rimraf: invalid options argument provided"),o.strictEqual(typeof t,"object","rimraf: options should be object"),defaults(t),rimraf_(e,t,function CB(i){if(i){if(("EBUSY"===i.code||"ENOTEMPTY"===i.code||"EPERM"===i.code)&&n<t.maxBusyTries){return n++,setTimeout(()=>rimraf_(e,t,CB),100*n)}"ENOENT"===i.code&&(i=null)}r(i)})}function rimraf_(e,t,r){o(e),o(t),o("function"==typeof r),t.lstat(e,(n,i)=>n&&"ENOENT"===n.code?r(null):n&&"EPERM"===n.code&&s?fixWinEPERM(e,t,n,r):i&&i.isDirectory()?rmdir(e,t,n,r):void t.unlink(e,n=>{if(n){if("ENOENT"===n.code)return r(null);if("EPERM"===n.code)return s?fixWinEPERM(e,t,n,r):rmdir(e,t,n,r);if("EISDIR"===n.code)return rmdir(e,t,n,r)}return r(n)}))}function fixWinEPERM(e,t,r,n){o(e),o(t),o("function"==typeof n),r&&o(r instanceof Error),t.chmod(e,438,i=>{i?n("ENOENT"===i.code?null:r):t.stat(e,(i,o)=>{i?n("ENOENT"===i.code?null:r):o.isDirectory()?rmdir(e,t,r,n):t.unlink(e,n)})})}function fixWinEPERMSync(e,t,r){let n;o(e),o(t),r&&o(r instanceof Error);try{t.chmodSync(e,438)}catch(e){if("ENOENT"===e.code)return;throw r}try{n=t.statSync(e)}catch(e){if("ENOENT"===e.code)return;throw r}n.isDirectory()?rmdirSync(e,t,r):t.unlinkSync(e)}function rmdir(e,t,r,n){o(e),o(t),r&&o(r instanceof Error),o("function"==typeof n),t.rmdir(e,s=>{!s||"ENOTEMPTY"!==s.code&&"EEXIST"!==s.code&&"EPERM"!==s.code?s&&"ENOTDIR"===s.code?n(r):n(s):function rmkids(e,t,r){o(e),o(t),o("function"==typeof r),t.readdir(e,(n,o)=>{if(n)return r(n);let s,a=o.length;if(0===a)return t.rmdir(e,r);o.forEach(n=>{rimraf(i.join(e,n),t,n=>{if(!s)return n?r(s=n):void(0==--a&&t.rmdir(e,r))})})})}(e,t,n)})}function rimrafSync(e,t){let r;defaults(t=t||{}),o(e,"rimraf: missing path"),o.strictEqual(typeof e,"string","rimraf: path should be a string"),o(t,"rimraf: missing options"),o.strictEqual(typeof t,"object","rimraf: options should be object");try{r=t.lstatSync(e)}catch(r){if("ENOENT"===r.code)return;"EPERM"===r.code&&s&&fixWinEPERMSync(e,t,r)}try{r&&r.isDirectory()?rmdirSync(e,t,null):t.unlinkSync(e)}catch(r){if("ENOENT"===r.code)return;if("EPERM"===r.code)return s?fixWinEPERMSync(e,t,r):rmdirSync(e,t,r);if("EISDIR"!==r.code)throw r;rmdirSync(e,t,r)}}function rmdirSync(e,t,r){o(e),o(t),r&&o(r instanceof Error);try{t.rmdirSync(e)}catch(n){if("ENOTDIR"===n.code)throw r;if("ENOTEMPTY"===n.code||"EEXIST"===n.code||"EPERM"===n.code)!function rmkidsSync(e,t){if(o(e),o(t),t.readdirSync(e).forEach(r=>rimrafSync(i.join(e,r),t)),!s){const r=t.rmdirSync(e,t);return r}{const r=Date.now();do{try{const r=t.rmdirSync(e,t);return r}catch(e){}}while(Date.now()-r<500)}}(e,t);else if("ENOENT"!==n.code)throw n}}e.exports=rimraf,rimraf.sync=rimrafSync},function(e,t,r){"use strict";const n=r(513),i=r(514),o=r(515);e.exports={createFile:n.createFile,createFileSync:n.createFileSync,ensureFile:n.createFile,ensureFileSync:n.createFileSync,createLink:i.createLink,createLinkSync:i.createLinkSync,ensureLink:i.createLink,ensureLinkSync:i.createLinkSync,createSymlink:o.createSymlink,createSymlinkSync:o.createSymlinkSync,ensureSymlink:o.createSymlink,ensureSymlinkSync:o.createSymlinkSync}},function(e,t,r){"use strict";const n=r(37).fromCallback,i=r(6),o=r(27),s=r(45),a=r(62).pathExists;e.exports={createFile:n(function createFile(e,t){function makeFile(){o.writeFile(e,"",e=>{if(e)return t(e);t()})}o.stat(e,(r,n)=>{if(!r&&n.isFile())return t();const o=i.dirname(e);a(o,(e,r)=>e?t(e):r?makeFile():void s.mkdirs(o,e=>{if(e)return t(e);makeFile()}))})}),createFileSync:function createFileSync(e){let t;try{t=o.statSync(e)}catch(e){}if(t&&t.isFile())return;const r=i.dirname(e);o.existsSync(r)||s.mkdirsSync(r),o.writeFileSync(e,"")}}},function(e,t,r){"use strict";const n=r(37).fromCallback,i=r(6),o=r(27),s=r(45),a=r(62).pathExists;e.exports={createLink:n(function createLink(e,t,r){function makeLink(e,t){o.link(e,t,e=>{if(e)return r(e);r(null)})}a(t,(n,c)=>n?r(n):c?r(null):void o.lstat(e,n=>{if(n)return n.message=n.message.replace("lstat","ensureLink"),r(n);const o=i.dirname(t);a(o,(n,i)=>n?r(n):i?makeLink(e,t):void s.mkdirs(o,n=>{if(n)return r(n);makeLink(e,t)}))}))}),createLinkSync:function createLinkSync(e,t){if(o.existsSync(t))return;try{o.lstatSync(e)}catch(e){throw e.message=e.message.replace("lstat","ensureLink"),e}const r=i.dirname(t);return o.existsSync(r)?o.linkSync(e,t):(s.mkdirsSync(r),o.linkSync(e,t))}}},function(e,t,r){"use strict";const n=r(37).fromCallback,i=r(6),o=r(27),s=r(45),a=s.mkdirs,c=s.mkdirsSync,u=r(516),l=u.symlinkPaths,p=u.symlinkPathsSync,d=r(517),h=d.symlinkType,f=d.symlinkTypeSync,m=r(62).pathExists;e.exports={createSymlink:n(function createSymlink(e,t,r,n){n="function"==typeof r?r:n,r="function"!=typeof r&&r,m(t,(s,c)=>s?n(s):c?n(null):void l(e,t,(s,c)=>{if(s)return n(s);e=c.toDst,h(c.toCwd,r,(r,s)=>{if(r)return n(r);const c=i.dirname(t);m(c,(r,i)=>r?n(r):i?o.symlink(e,t,s,n):void a(c,r=>{if(r)return n(r);o.symlink(e,t,s,n)}))})}))}),createSymlinkSync:function createSymlinkSync(e,t,r){if(o.existsSync(t))return;const n=p(e,t);e=n.toDst,r=f(n.toCwd,r);const s=i.dirname(t);return o.existsSync(s)?o.symlinkSync(e,t,r):(c(s),o.symlinkSync(e,t,r))}}},function(e,t,r){"use strict";const n=r(6),i=r(27),o=r(62).pathExists;e.exports={symlinkPaths:function symlinkPaths(e,t,r){if(n.isAbsolute(e))return i.lstat(e,t=>t?(t.message=t.message.replace("lstat","ensureSymlink"),r(t)):r(null,{toCwd:e,toDst:e}));{const s=n.dirname(t),a=n.join(s,e);return o(a,(t,o)=>t?r(t):o?r(null,{toCwd:a,toDst:e}):i.lstat(e,t=>t?(t.message=t.message.replace("lstat","ensureSymlink"),r(t)):r(null,{toCwd:e,toDst:n.relative(s,e)})))}},symlinkPathsSync:function symlinkPathsSync(e,t){let r;if(n.isAbsolute(e)){if(!(r=i.existsSync(e)))throw new Error("absolute srcpath does not exist");return{toCwd:e,toDst:e}}{const o=n.dirname(t),s=n.join(o,e);if(r=i.existsSync(s))return{toCwd:s,toDst:e};if(!(r=i.existsSync(e)))throw new Error("relative srcpath does not exist");return{toCwd:e,toDst:n.relative(o,e)}}}}},function(e,t,r){"use strict";const n=r(27);e.exports={symlinkType:function symlinkType(e,t,r){if(r="function"==typeof t?t:r,t="function"!=typeof t&&t)return r(null,t);n.lstat(e,(e,n)=>{if(e)return r(null,"file");t=n&&n.isDirectory()?"dir":"file",r(null,t)})},symlinkTypeSync:function symlinkTypeSync(e,t){let r;if(t)return t;try{r=n.lstatSync(e)}catch(e){return"file"}return r&&r.isDirectory()?"dir":"file"}}},function(e,t,r){"use strict";const n=r(37).fromCallback,i=r(176);i.outputJson=n(r(520)),i.outputJsonSync=r(521),i.outputJSON=i.outputJson,i.outputJSONSync=i.outputJsonSync,i.writeJSON=i.writeJson,i.writeJSONSync=i.writeJsonSync,i.readJSON=i.readJson,i.readJSONSync=i.readJsonSync,e.exports=i},function(e,t,r){var n;try{n=r(27)}catch(e){n=r(11)}function stringify(e,t){var r,n="\n";return"object"==typeof t&&null!==t&&(t.spaces&&(r=t.spaces),t.EOL&&(n=t.EOL)),JSON.stringify(e,t?t.replacer:null,r).replace(/\n/g,n)+n}function stripBom(e){return Buffer.isBuffer(e)&&(e=e.toString("utf8")),e=e.replace(/^\uFEFF/,"")}var i={readFile:function readFile(e,t,r){null==r&&(r=t,t={}),"string"==typeof t&&(t={encoding:t});var i=(t=t||{}).fs||n,o=!0;"throws"in t&&(o=t.throws),i.readFile(e,t,function(n,i){if(n)return r(n);var s;i=stripBom(i);try{s=JSON.parse(i,t?t.reviver:null)}catch(t){return o?(t.message=e+": "+t.message,r(t)):r(null,null)}r(null,s)})},readFileSync:function readFileSync(e,t){"string"==typeof(t=t||{})&&(t={encoding:t});var r=t.fs||n,i=!0;"throws"in t&&(i=t.throws);try{var o=r.readFileSync(e,t);return o=stripBom(o),JSON.parse(o,t.reviver)}catch(t){if(i)throw t.message=e+": "+t.message,t;return null}},writeFile:function writeFile(e,t,r,i){null==i&&(i=r,r={});var o=(r=r||{}).fs||n,s="";try{s=stringify(t,r)}catch(e){return void(i&&i(e,null))}o.writeFile(e,s,r,i)},writeFileSync:function writeFileSync(e,t,r){var i=(r=r||{}).fs||n,o=stringify(t,r);return i.writeFileSync(e,o,r)}};e.exports=i},function(e,t,r){"use strict";const n=r(6),i=r(45),o=r(62).pathExists,s=r(176);e.exports=function outputJson(e,t,r,a){"function"==typeof r&&(a=r,r={});const c=n.dirname(e);o(c,(n,o)=>n?a(n):o?s.writeJson(e,t,r,a):void i.mkdirs(c,n=>{if(n)return a(n);s.writeJson(e,t,r,a)}))}},function(e,t,r){"use strict";const n=r(27),i=r(6),o=r(45),s=r(176);e.exports=function outputJsonSync(e,t,r){const a=i.dirname(e);n.existsSync(a)||o.mkdirsSync(a),s.writeJsonSync(e,t,r)}},function(e,t,r){"use strict";const n=r(27),i=r(6),o=r(259).copySync,s=r(134).removeSync,a=r(45).mkdirsSync,c=r(262);function moveSyncAcrossDevice(e,t,r){return n.statSync(e).isDirectory()?function moveDirSyncAcrossDevice(e,t,r){const n={overwrite:!1};r?(s(t),tryCopySync()):tryCopySync();function tryCopySync(){return o(e,t,n),s(e)}}(e,t,r):function moveFileSyncAcrossDevice(e,t,r){const i=c(65536),o=r?"w":"wx",s=n.openSync(e,"r"),a=n.fstatSync(s),u=n.openSync(t,o,a.mode);let l=0;for(;l<a.size;){const e=n.readSync(s,i,0,65536,l);n.writeSync(u,i,0,e),l+=e}return n.closeSync(s),n.closeSync(u),n.unlinkSync(e)}(e,t,r)}e.exports={moveSync:function moveSync(e,t,r){const o=(r=r||{}).overwrite||r.clobber||!1;if(e=i.resolve(e),t=i.resolve(t),e===t)return n.accessSync(e);if(function isSrcSubdir(e,t){try{return n.statSync(e).isDirectory()&&e!==t&&t.indexOf(e)>-1&&t.split(i.dirname(e)+i.sep)[1].split(i.sep)[0]===i.basename(e)}catch(e){return!1}}(e,t))throw new Error(`Cannot move '${e}' into itself '${t}'.`);a(i.dirname(t)),function tryRenameSync(){if(o)try{return n.renameSync(e,t)}catch(n){if("ENOTEMPTY"===n.code||"EEXIST"===n.code||"EPERM"===n.code)return s(t),r.overwrite=!1,moveSync(e,t,r);if("EXDEV"!==n.code)throw n;return moveSyncAcrossDevice(e,t,o)}else try{return n.linkSync(e,t),n.unlinkSync(e)}catch(r){if("EXDEV"===r.code||"EISDIR"===r.code||"EPERM"===r.code||"ENOTSUP"===r.code)return moveSyncAcrossDevice(e,t,o);throw r}}()}}},function(e,t,r){"use strict";const n=r(37).fromCallback,i=r(27),o=r(6),s=r(263).copy,a=r(134).remove,c=r(45).mkdirp,u=r(62).pathExists;function rename(e,t,r,n){i.rename(e,t,i=>i?"EXDEV"!==i.code?n(i):function moveAcrossDevice(e,t,r,n){s(e,t,{overwrite:r,errorOnExist:!0},t=>t?n(t):a(e,n))}(e,t,r,n):n())}e.exports={move:n(function move(e,t,r,n){"function"==typeof r&&(n=r,r={});const s=r.overwrite||r.clobber||!1;if(e=o.resolve(e),t=o.resolve(t),e===t)return i.access(e,n);i.stat(e,(r,i)=>r?n(r):i.isDirectory()&&function isSrcSubdir(e,t){const r=e.split(o.sep),n=t.split(o.sep);return r.reduce((e,t,r)=>e&&n[r]===t,!0)}(e,t)?n(new Error(`Cannot move '${e}' to a subdirectory of itself, '${t}'.`)):void c(o.dirname(t),r=>r?n(r):function doRename(e,t,r,n){if(r)return a(t,i=>i?n(i):rename(e,t,r,n));u(t,(i,o)=>i?n(i):o?n(new Error("dest already exists.")):rename(e,t,r,n))}(e,t,s,n)))})}},function(e,t,r){"use strict";const n=r(37).fromCallback,i=r(27),o=r(6),s=r(45),a=r(62).pathExists;e.exports={outputFile:n(function outputFile(e,t,r,n){"function"==typeof r&&(n=r,r="utf8");const c=o.dirname(e);a(c,(o,a)=>o?n(o):a?i.writeFile(e,t,r,n):void s.mkdirs(c,o=>{if(o)return n(o);i.writeFile(e,t,r,n)}))}),outputFileSync:function outputFileSync(e,...t){const r=o.dirname(e);if(i.existsSync(r))return i.writeFileSync(e,...t);s.mkdirsSync(r),i.writeFileSync(e,...t)}}},function(e,t,r){e.exports=r(526)},function(e,t,r){"use strict";const n=r(527),i=r(535),o=r(536),s=r(544),a=r(546),c=r(547);function replaceInFile(e,t){try{e=i(e)}catch(e){return t?t(e,null):Promise.reject(e)}const{files:r,from:o,to:a,encoding:u,ignore:l,allowEmptyPaths:p,disableGlobs:d,dry:h,verbose:f,glob:m}=e;return h&&f&&console.log(n.yellow("Dry run, not making actual changes")),s(r,l,d,p,m).then(e=>Promise.all(e.map(e=>c(e,o,a,u,h)))).then(e=>e.filter(e=>e.hasChanged).map(e=>e.file)).then(e=>(t&&t(null,e),e)).catch(e=>{if(!t)throw e;t(e)})}replaceInFile.sync=function(e){e=i(e);const{files:t,from:r,to:s,encoding:c,ignore:u,disableGlobs:l,dry:p,verbose:d,glob:h}=e,f=o(t,u,l,h),m=[];return p&&d&&console.log(n.yellow("Dry run, not making any changes")),f.forEach(e=>{a(e,r,s,c,p)&&m.push(e)}),m},e.exports=replaceInFile},function(e,t,r){"use strict";const n=r(528),i=r(529),o=r(49).stdout,s=r(534),a="win32"===process.platform&&!(process.env.TERM||"").toLowerCase().startsWith("xterm"),c=["ansi","ansi","ansi256","ansi16m"],u=new Set(["gray"]),l=Object.create(null);function applyOptions(e,t){t=t||{};const r=o?o.level:0;e.level=void 0===t.level?r:t.level,e.enabled="enabled"in t?t.enabled:e.level>0}function Chalk(e){if(!this||!(this instanceof Chalk)||this.template){const t={};return applyOptions(t,e),t.template=function(){const e=[].slice.call(arguments);return function chalkTag(e,t){if(!Array.isArray(t))return[].slice.call(arguments,1).join(" ");const r=[].slice.call(arguments,2),n=[t.raw[0]];for(let e=1;e<t.length;e++)n.push(String(r[e-1]).replace(/[{}\\]/g,"\\$&")),n.push(String(t.raw[e]));return s(e,n.join(""))}.apply(null,[t.template].concat(e))},Object.setPrototypeOf(t,Chalk.prototype),Object.setPrototypeOf(t.template,t),t.template.constructor=Chalk,t.template}applyOptions(this,e)}a&&(i.blue.open="[94m");for(const e of Object.keys(i))i[e].closeRe=new RegExp(n(i[e].close),"g"),l[e]={get(){const t=i[e];return build.call(this,this._styles?this._styles.concat(t):[t],this._empty,e)}};l.visible={get(){return build.call(this,this._styles||[],!0,"visible")}},i.color.closeRe=new RegExp(n(i.color.close),"g");for(const e of Object.keys(i.color.ansi))u.has(e)||(l[e]={get(){const t=this.level;return function(){const r={open:i.color[c[t]][e].apply(null,arguments),close:i.color.close,closeRe:i.color.closeRe};return build.call(this,this._styles?this._styles.concat(r):[r],this._empty,e)}}});i.bgColor.closeRe=new RegExp(n(i.bgColor.close),"g");for(const e of Object.keys(i.bgColor.ansi)){if(u.has(e))continue;l["bg"+e[0].toUpperCase()+e.slice(1)]={get(){const t=this.level;return function(){const r={open:i.bgColor[c[t]][e].apply(null,arguments),close:i.bgColor.close,closeRe:i.bgColor.closeRe};return build.call(this,this._styles?this._styles.concat(r):[r],this._empty,e)}}}}const p=Object.defineProperties(()=>{},l);function build(e,t,r){const n=function(){return function applyStyle(){const e=arguments,t=e.length;let r=String(arguments[0]);if(0===t)return"";if(t>1)for(let n=1;n<t;n++)r+=" "+e[n];if(!this.enabled||this.level<=0||!r)return this._empty?"":r;const n=i.dim.open;a&&this.hasGrey&&(i.dim.open="");for(const e of this._styles.slice().reverse())r=(r=e.open+r.replace(e.closeRe,e.open)+e.close).replace(/\r?\n/g,`${e.close}$&${e.open}`);return i.dim.open=n,r}.apply(n,arguments)};n._styles=e,n._empty=t;const o=this;return Object.defineProperty(n,"level",{enumerable:!0,get:()=>o.level,set(e){o.level=e}}),Object.defineProperty(n,"enabled",{enumerable:!0,get:()=>o.enabled,set(e){o.enabled=e}}),n.hasGrey=this.hasGrey||"gray"===r||"grey"===r,n.__proto__=p,n}Object.defineProperties(Chalk.prototype,l),e.exports=Chalk(),e.exports.supportsColor=o,e.exports.default=e.exports},function(e,t,r){"use strict";var n=/[|\\{}()[\]^$+*?.]/g;e.exports=function(e){if("string"!=typeof e)throw new TypeError("Expected a string");return e.replace(n,"\\$&")}},function(e,t,r){"use strict";(function(e){const t=r(530),n=(e,r)=>(function(){return`[${e.apply(t,arguments)+r}m`}),i=(e,r)=>(function(){const n=e.apply(t,arguments);return`[${38+r};5;${n}m`}),o=(e,r)=>(function(){const n=e.apply(t,arguments);return`[${38+r};2;${n[0]};${n[1]};${n[2]}m`});Object.defineProperty(e,"exports",{enumerable:!0,get:function assembleStyles(){const e=new Map,r={modifier:{reset:[0,0],bold:[1,22],dim:[2,22],italic:[3,23],underline:[4,24],inverse:[7,27],hidden:[8,28],strikethrough:[9,29]},color:{black:[30,39],red:[31,39],green:[32,39],yellow:[33,39],blue:[34,39],magenta:[35,39],cyan:[36,39],white:[37,39],gray:[90,39],redBright:[91,39],greenBright:[92,39],yellowBright:[93,39],blueBright:[94,39],magentaBright:[95,39],cyanBright:[96,39],whiteBright:[97,39]},bgColor:{bgBlack:[40,49],bgRed:[41,49],bgGreen:[42,49],bgYellow:[43,49],bgBlue:[44,49],bgMagenta:[45,49],bgCyan:[46,49],bgWhite:[47,49],bgBlackBright:[100,49],bgRedBright:[101,49],bgGreenBright:[102,49],bgYellowBright:[103,49],bgBlueBright:[104,49],bgMagentaBright:[105,49],bgCyanBright:[106,49],bgWhiteBright:[107,49]}};r.color.grey=r.color.gray;for(const t of Object.keys(r)){const n=r[t];for(const t of Object.keys(n)){const i=n[t];r[t]={open:`[${i[0]}m`,close:`[${i[1]}m`},n[t]=r[t],e.set(i[0],i[1])}Object.defineProperty(r,t,{value:n,enumerable:!1}),Object.defineProperty(r,"codes",{value:e,enumerable:!1})}const s=e=>e,a=(e,t,r)=>[e,t,r];r.color.close="[39m",r.bgColor.close="[49m",r.color.ansi={ansi:n(s,0)},r.color.ansi256={ansi256:i(s,0)},r.color.ansi16m={rgb:o(a,0)},r.bgColor.ansi={ansi:n(s,10)},r.bgColor.ansi256={ansi256:i(s,10)},r.bgColor.ansi16m={rgb:o(a,10)};for(let e of Object.keys(t)){if("object"!=typeof t[e])continue;const s=t[e];"ansi16"===e&&(e="ansi"),"ansi16"in s&&(r.color.ansi[e]=n(s.ansi16,0),r.bgColor.ansi[e]=n(s.ansi16,10)),"ansi256"in s&&(r.color.ansi256[e]=i(s.ansi256,0),r.bgColor.ansi256[e]=i(s.ansi256,10)),"rgb"in s&&(r.color.ansi16m[e]=o(s.rgb,0),r.bgColor.ansi16m[e]=o(s.rgb,10))}return r}})}).call(this,r(48)(e))},function(e,t,r){var n=r(264),i=r(532),o={};Object.keys(n).forEach(function(e){o[e]={},Object.defineProperty(o[e],"channels",{value:n[e].channels}),Object.defineProperty(o[e],"labels",{value:n[e].labels});var t=i(e);Object.keys(t).forEach(function(r){var n=t[r];o[e][r]=function wrapRounded(e){var t=function(t){if(null==t)return t;arguments.length>1&&(t=Array.prototype.slice.call(arguments));var r=e(t);if("object"==typeof r)for(var n=r.length,i=0;i<n;i++)r[i]=Math.round(r[i]);return r};return"conversion"in e&&(t.conversion=e.conversion),t}(n),o[e][r].raw=function wrapRaw(e){var t=function(t){return null==t?t:(arguments.length>1&&(t=Array.prototype.slice.call(arguments)),e(t))};return"conversion"in e&&(t.conversion=e.conversion),t}(n)})}),e.exports=o},function(e,t,r){"use strict";e.exports={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50]}},function(e,t,r){var n=r(264);function deriveBFS(e){var t=function buildGraph(){for(var e={},t=Object.keys(n),r=t.length,i=0;i<r;i++)e[t[i]]={distance:-1,parent:null};return e}(),r=[e];for(t[e].distance=0;r.length;)for(var i=r.pop(),o=Object.keys(n[i]),s=o.length,a=0;a<s;a++){var c=o[a],u=t[c];-1===u.distance&&(u.distance=t[i].distance+1,u.parent=i,r.unshift(c))}return t}function link(e,t){return function(r){return t(e(r))}}function wrapConversion(e,t){for(var r=[t[e].parent,e],i=n[t[e].parent][e],o=t[e].parent;t[o].parent;)r.unshift(t[o].parent),i=link(n[t[o].parent][o],i),o=t[o].parent;return i.conversion=r,i}e.exports=function(e){for(var t=deriveBFS(e),r={},n=Object.keys(t),i=n.length,o=0;o<i;o++){var s=n[o];null!==t[s].parent&&(r[s]=wrapConversion(s,t))}return r}},function(e,t,r){"use strict";e.exports=((e,t)=>{t=t||process.argv;const r=e.startsWith("-")?"":1===e.length?"-":"--",n=t.indexOf(r+e),i=t.indexOf("--");return-1!==n&&(-1===i||n<i)})},function(e,t,r){"use strict";const n=/(?:\\(u[a-f\d]{4}|x[a-f\d]{2}|.))|(?:\{(~)?(\w+(?:\([^)]*\))?(?:\.\w+(?:\([^)]*\))?)*)(?:[ \t]|(?=\r?\n)))|(\})|((?:.|[\r\n\f])+?)/gi,i=/(?:^|\.)(\w+)(?:\(([^)]*)\))?/g,o=/^(['"])((?:\\.|(?!\1)[^\\])*)\1$/,s=/\\(u[a-f\d]{4}|x[a-f\d]{2}|.)|([^\\])/gi,a=new Map([["n","\n"],["r","\r"],["t","\t"],["b","\b"],["f","\f"],["v","\v"],["0","\0"],["\\","\\"],["e",""],["a",""]]);function unescape(e){return"u"===e[0]&&5===e.length||"x"===e[0]&&3===e.length?String.fromCharCode(parseInt(e.slice(1),16)):a.get(e)||e}function parseArguments(e,t){const r=[],n=t.trim().split(/\s*,\s*/g);let i;for(const t of n)if(isNaN(t)){if(!(i=t.match(o)))throw new Error(`Invalid Chalk template style argument: ${t} (in style '${e}')`);r.push(i[2].replace(s,(e,t,r)=>t?unescape(t):r))}else r.push(Number(t));return r}function parseStyle(e){i.lastIndex=0;const t=[];let r;for(;null!==(r=i.exec(e));){const e=r[1];if(r[2]){const n=parseArguments(e,r[2]);t.push([e].concat(n))}else t.push([e])}return t}function buildStyle(e,t){const r={};for(const e of t)for(const t of e.styles)r[t[0]]=e.inverse?null:t.slice(1);let n=e;for(const e of Object.keys(r))if(Array.isArray(r[e])){if(!(e in n))throw new Error(`Unknown Chalk style: ${e}`);n=r[e].length>0?n[e].apply(n,r[e]):n[e]}return n}e.exports=((e,t)=>{const r=[],i=[];let o=[];if(t.replace(n,(t,n,s,a,c,u)=>{if(n)o.push(unescape(n));else if(a){const t=o.join("");o=[],i.push(0===r.length?t:buildStyle(e,r)(t)),r.push({inverse:s,styles:parseStyle(a)})}else if(c){if(0===r.length)throw new Error("Found extraneous } in Chalk template literal");i.push(buildStyle(e,r)(o.join(""))),o=[],r.pop()}else o.push(u)}),i.push(o.join("")),r.length>0){const e=`Chalk template literal is missing ${r.length} closing bracket${1===r.length?"":"s"} (\`}\`)`;throw new Error(e)}return i.join("")})},function(e,t,r){"use strict";const n={ignore:[],encoding:"utf-8",disableGlobs:!1,allowEmptyPaths:!1,isRegex:!1,verbose:!1,dry:!1,glob:{}};e.exports=function parseConfig(e){if("object"!=typeof e||null===e)throw new Error("Must specify configuration object");e.glob=e.glob||{};const{files:t,from:r,to:i,ignore:o,encoding:s,glob:a}=e;if(void 0===t)throw new Error("Must specify file or files");if(void 0===r)throw new Error("Must specify string or regex to replace");if(void 0===i)throw new Error("Must specify a replacement (can be blank string)");if("object"!=typeof a)throw new Error("Invalid glob config");return Array.isArray(t)||(e.files=[t]),Array.isArray(o)||(e.ignore=void 0===o?[]:[o]),"string"==typeof s&&""!==s||(e.encoding="utf-8"),Object.assign({},n,e)}},function(e,t,r){"use strict";const n=r(135);e.exports=function getPathsSync(e,t,r,i){if(r)return e;i=Object.assign({ignore:t},i,{nodir:!0});const o=e.map(e=>n.sync(e,i));return[].concat.apply([],o)}},function(e,t,r){var n=r(6),i="win32"===process.platform,o=r(11),s=process.env.NODE_DEBUG&&/fs/.test(process.env.NODE_DEBUG);function maybeCallback(e){return"function"==typeof e?e:function rethrow(){var e;if(s){var t=new Error;e=function debugCallback(e){e&&(t.message=e.message,missingCallback(e=t))}}else e=missingCallback;return e;function missingCallback(e){if(e){if(process.throwDeprecation)throw e;if(!process.noDeprecation){var t="fs: missing callback "+(e.stack||e.message);process.traceDeprecation?console.trace(t):console.error(t)}}}}()}n.normalize;if(i)var a=/(.*?)(?:[\/\\]+|$)/g;else a=/(.*?)(?:[\/]+|$)/g;if(i)var c=/^(?:[a-zA-Z]:|[\\\/]{2}[^\\\/]+[\\\/][^\\\/]+)?[\\\/]*/;else c=/^[\/]*/;t.realpathSync=function realpathSync(e,t){if(e=n.resolve(e),t&&Object.prototype.hasOwnProperty.call(t,e))return t[e];var r,s,u,l,p=e,d={},h={};function start(){var t=c.exec(e);r=t[0].length,s=t[0],u=t[0],l="",i&&!h[u]&&(o.lstatSync(u),h[u]=!0)}for(start();r<e.length;){a.lastIndex=r;var f=a.exec(e);if(l=s,s+=f[0],u=l+f[1],r=a.lastIndex,!(h[u]||t&&t[u]===u)){var m;if(t&&Object.prototype.hasOwnProperty.call(t,u))m=t[u];else{var g=o.lstatSync(u);if(!g.isSymbolicLink()){h[u]=!0,t&&(t[u]=u);continue}var y=null;if(!i){var v=g.dev.toString(32)+":"+g.ino.toString(32);d.hasOwnProperty(v)&&(y=d[v])}null===y&&(o.statSync(u),y=o.readlinkSync(u)),m=n.resolve(l,y),t&&(t[u]=m),i||(d[v]=y)}e=n.resolve(m,e.slice(r)),start()}}return t&&(t[p]=e),e},t.realpath=function realpath(e,t,r){if("function"!=typeof r&&(r=maybeCallback(t),t=null),e=n.resolve(e),t&&Object.prototype.hasOwnProperty.call(t,e))return process.nextTick(r.bind(null,null,t[e]));var s,u,l,p,d=e,h={},f={};function start(){var t=c.exec(e);s=t[0].length,u=t[0],l=t[0],p="",i&&!f[l]?o.lstat(l,function(e){if(e)return r(e);f[l]=!0,LOOP()}):process.nextTick(LOOP)}function LOOP(){if(s>=e.length)return t&&(t[d]=e),r(null,e);a.lastIndex=s;var n=a.exec(e);return p=u,u+=n[0],l=p+n[1],s=a.lastIndex,f[l]||t&&t[l]===l?process.nextTick(LOOP):t&&Object.prototype.hasOwnProperty.call(t,l)?gotResolvedLink(t[l]):o.lstat(l,gotStat)}function gotStat(e,n){if(e)return r(e);if(!n.isSymbolicLink())return f[l]=!0,t&&(t[l]=l),process.nextTick(LOOP);if(!i){var s=n.dev.toString(32)+":"+n.ino.toString(32);if(h.hasOwnProperty(s))return gotTarget(null,h[s],l)}o.stat(l,function(e){if(e)return r(e);o.readlink(l,function(e,t){i||(h[s]=t),gotTarget(e,t)})})}function gotTarget(e,i,o){if(e)return r(e);var s=n.resolve(p,i);t&&(t[o]=s),gotResolvedLink(s)}function gotResolvedLink(t){e=n.resolve(t,e.slice(s)),start()}start()}},function(e,t,r){var n=r(539),i=r(540);e.exports=function expandTop(e){if(!e)return[];"{}"===e.substr(0,2)&&(e="\\{\\}"+e.substr(2));return function expand(e,t){var r=[];var o=i("{","}",e);if(!o||/\$$/.test(o.pre))return[e];var s=/^-?\d+\.\.-?\d+(?:\.\.-?\d+)?$/.test(o.body);var c=/^[a-zA-Z]\.\.[a-zA-Z](?:\.\.-?\d+)?$/.test(o.body);var u=s||c;var l=o.body.indexOf(",")>=0;if(!u&&!l)return o.post.match(/,.*\}/)?(e=o.pre+"{"+o.body+a+o.post,expand(e)):[e];var p;if(u)p=o.body.split(/\.\./);else if(1===(p=function parseCommaParts(e){if(!e)return[""];var t=[];var r=i("{","}",e);if(!r)return e.split(",");var n=r.pre;var o=r.body;var s=r.post;var a=n.split(",");a[a.length-1]+="{"+o+"}";var c=parseCommaParts(s);s.length&&(a[a.length-1]+=c.shift(),a.push.apply(a,c));t.push.apply(t,a);return t}(o.body)).length&&1===(p=expand(p[0],!1).map(embrace)).length){var d=o.post.length?expand(o.post,!1):[""];return d.map(function(e){return o.pre+p[0]+e})}var h=o.pre;var d=o.post.length?expand(o.post,!1):[""];var f;if(u){var m=numeric(p[0]),g=numeric(p[1]),y=Math.max(p[0].length,p[1].length),v=3==p.length?Math.abs(numeric(p[2])):1,b=lte,_=g<m;_&&(v*=-1,b=gte);var w=p.some(isPadded);f=[];for(var E=m;b(E,g);E+=v){var S;if(c)"\\"===(S=String.fromCharCode(E))&&(S="");else if(S=String(E),w){var C=y-S.length;if(C>0){var x=new Array(C+1).join("0");S=E<0?"-"+x+S.slice(1):x+S}}f.push(S)}}else f=n(p,function(e){return expand(e,!1)});for(var k=0;k<f.length;k++)for(var R=0;R<d.length;R++){var T=h+f[k]+d[R];(!t||u||T)&&r.push(T)}return r}(function escapeBraces(e){return e.split("\\\\").join(o).split("\\{").join(s).split("\\}").join(a).split("\\,").join(c).split("\\.").join(u)}(e),!0).map(unescapeBraces)};var o="\0SLASH"+Math.random()+"\0",s="\0OPEN"+Math.random()+"\0",a="\0CLOSE"+Math.random()+"\0",c="\0COMMA"+Math.random()+"\0",u="\0PERIOD"+Math.random()+"\0";function numeric(e){return parseInt(e,10)==e?parseInt(e,10):e.charCodeAt(0)}function unescapeBraces(e){return e.split(o).join("\\").split(s).join("{").split(a).join("}").split(c).join(",").split(u).join(".")}function embrace(e){return"{"+e+"}"}function isPadded(e){return/^-?0\d/.test(e)}function lte(e,t){return e<=t}function gte(e,t){return e>=t}},function(e,t){e.exports=function(e,t){for(var n=[],i=0;i<e.length;i++){var o=t(e[i],i);r(o)?n.push.apply(n,o):n.push(o)}return n};var r=Array.isArray||function(e){return"[object Array]"===Object.prototype.toString.call(e)}},function(e,t,r){"use strict";function balanced(e,t,r){e instanceof RegExp&&(e=maybeMatch(e,r)),t instanceof RegExp&&(t=maybeMatch(t,r));var n=range(e,t,r);return n&&{start:n[0],end:n[1],pre:r.slice(0,n[0]),body:r.slice(n[0]+e.length,n[1]),post:r.slice(n[1]+t.length)}}function maybeMatch(e,t){var r=t.match(e);return r?r[0]:null}function range(e,t,r){var n,i,o,s,a,c=r.indexOf(e),u=r.indexOf(t,c+1),l=c;if(c>=0&&u>0){for(n=[],o=r.length;l>=0&&!a;)l==c?(n.push(l),c=r.indexOf(e,l+1)):1==n.length?a=[n.pop(),u]:((i=n.pop())<o&&(o=i,s=u),u=r.indexOf(t,l+1)),l=c<u&&c>=0?c:u;n.length&&(a=[o,s])}return a}e.exports=balanced,balanced.range=range},function(e,t){"function"==typeof Object.create?e.exports=function inherits(e,t){e.super_=t,e.prototype=Object.create(t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}})}:e.exports=function inherits(e,t){e.super_=t;var r=function(){};r.prototype=t.prototype,e.prototype=new r,e.prototype.constructor=e}},function(e,t,r){e.exports=globSync,globSync.GlobSync=GlobSync;var n=r(11),i=r(265),o=r(177),s=(o.Minimatch,r(135).Glob,r(1),r(6)),a=r(44),c=r(178),u=r(266),l=(u.alphasort,u.alphasorti,u.setopts),p=u.ownProp,d=u.childrenIgnored,h=u.isIgnored;function globSync(e,t){if("function"==typeof t||3===arguments.length)throw new TypeError("callback provided to sync glob\nSee: https://github.com/isaacs/node-glob/issues/167");return new GlobSync(e,t).found}function GlobSync(e,t){if(!e)throw new Error("must provide pattern");if("function"==typeof t||3===arguments.length)throw new TypeError("callback provided to sync glob\nSee: https://github.com/isaacs/node-glob/issues/167");if(!(this instanceof GlobSync))return new GlobSync(e,t);if(l(this,e,t),this.noprocess)return this;var r=this.minimatch.set.length;this.matches=new Array(r);for(var n=0;n<r;n++)this._process(this.minimatch.set[n],n,!1);this._finish()}GlobSync.prototype._finish=function(){if(a(this instanceof GlobSync),this.realpath){var e=this;this.matches.forEach(function(t,r){var n=e.matches[r]=Object.create(null);for(var o in t)try{o=e._makeAbs(o),n[i.realpathSync(o,e.realpathCache)]=!0}catch(t){if("stat"!==t.syscall)throw t;n[e._makeAbs(o)]=!0}})}u.finish(this)},GlobSync.prototype._process=function(e,t,r){a(this instanceof GlobSync);for(var n,i=0;"string"==typeof e[i];)i++;switch(i){case e.length:return void this._processSimple(e.join("/"),t);case 0:n=null;break;default:n=e.slice(0,i).join("/")}var s,u=e.slice(i);null===n?s=".":c(n)||c(e.join("/"))?(n&&c(n)||(n="/"+n),s=n):s=n;var l=this._makeAbs(s);d(this,s)||(u[0]===o.GLOBSTAR?this._processGlobStar(n,s,l,u,t,r):this._processReaddir(n,s,l,u,t,r))},GlobSync.prototype._processReaddir=function(e,t,r,n,i,o){var a=this._readdir(r,o);if(a){for(var c=n[0],u=!!this.minimatch.negate,l=c._glob,p=this.dot||"."===l.charAt(0),d=[],h=0;h<a.length;h++){if("."!==(g=a[h]).charAt(0)||p)(u&&!e?!g.match(c):g.match(c))&&d.push(g)}var f=d.length;if(0!==f)if(1!==n.length||this.mark||this.stat){n.shift();for(h=0;h<f;h++){var m;g=d[h];m=e?[e,g]:[g],this._process(m.concat(n),i,o)}}else{this.matches[i]||(this.matches[i]=Object.create(null));for(var h=0;h<f;h++){var g=d[h];e&&(g="/"!==e.slice(-1)?e+"/"+g:e+g),"/"!==g.charAt(0)||this.nomount||(g=s.join(this.root,g)),this._emitMatch(i,g)}}}},GlobSync.prototype._emitMatch=function(e,t){if(!h(this,t)){var r=this._makeAbs(t);if(this.mark&&(t=this._mark(t)),this.absolute&&(t=r),!this.matches[e][t]){if(this.nodir){var n=this.cache[r];if("DIR"===n||Array.isArray(n))return}this.matches[e][t]=!0,this.stat&&this._stat(t)}}},GlobSync.prototype._readdirInGlobStar=function(e){if(this.follow)return this._readdir(e,!1);var t,r;try{r=n.lstatSync(e)}catch(e){if("ENOENT"===e.code)return null}var i=r&&r.isSymbolicLink();return this.symlinks[e]=i,i||!r||r.isDirectory()?t=this._readdir(e,!1):this.cache[e]="FILE",t},GlobSync.prototype._readdir=function(e,t){if(t&&!p(this.symlinks,e))return this._readdirInGlobStar(e);if(p(this.cache,e)){var r=this.cache[e];if(!r||"FILE"===r)return null;if(Array.isArray(r))return r}try{return this._readdirEntries(e,n.readdirSync(e))}catch(t){return this._readdirError(e,t),null}},GlobSync.prototype._readdirEntries=function(e,t){if(!this.mark&&!this.stat)for(var r=0;r<t.length;r++){var n=t[r];n="/"===e?e+n:e+"/"+n,this.cache[n]=!0}return this.cache[e]=t,t},GlobSync.prototype._readdirError=function(e,t){switch(t.code){case"ENOTSUP":case"ENOTDIR":var r=this._makeAbs(e);if(this.cache[r]="FILE",r===this.cwdAbs){var n=new Error(t.code+" invalid cwd "+this.cwd);throw n.path=this.cwd,n.code=t.code,n}break;case"ENOENT":case"ELOOP":case"ENAMETOOLONG":case"UNKNOWN":this.cache[this._makeAbs(e)]=!1;break;default:if(this.cache[this._makeAbs(e)]=!1,this.strict)throw t;this.silent||console.error("glob error",t)}},GlobSync.prototype._processGlobStar=function(e,t,r,n,i,o){var s=this._readdir(r,o);if(s){var a=n.slice(1),c=e?[e]:[],u=c.concat(a);this._process(u,i,!1);var l=s.length;if(!this.symlinks[r]||!o)for(var p=0;p<l;p++){if("."!==s[p].charAt(0)||this.dot){var d=c.concat(s[p],a);this._process(d,i,!0);var h=c.concat(s[p],n);this._process(h,i,!0)}}}},GlobSync.prototype._processSimple=function(e,t){var r=this._stat(e);if(this.matches[t]||(this.matches[t]=Object.create(null)),r){if(e&&c(e)&&!this.nomount){var n=/[\/\\]$/.test(e);"/"===e.charAt(0)?e=s.join(this.root,e):(e=s.resolve(this.root,e),n&&(e+="/"))}"win32"===process.platform&&(e=e.replace(/\\/g,"/")),this._emitMatch(t,e)}},GlobSync.prototype._stat=function(e){var t=this._makeAbs(e),r="/"===e.slice(-1);if(e.length>this.maxLength)return!1;if(!this.stat&&p(this.cache,t)){var i=this.cache[t];if(Array.isArray(i)&&(i="DIR"),!r||"DIR"===i)return i;if(r&&"FILE"===i)return!1}var o=this.statCache[t];if(!o){var s;try{s=n.lstatSync(t)}catch(e){if(e&&("ENOENT"===e.code||"ENOTDIR"===e.code))return this.statCache[t]=!1,!1}if(s&&s.isSymbolicLink())try{o=n.statSync(t)}catch(e){o=s}else o=s}this.statCache[t]=o;i=!0;return o&&(i=o.isDirectory()?"DIR":"FILE"),this.cache[t]=this.cache[t]||i,(!r||"FILE"!==i)&&i},GlobSync.prototype._mark=function(e){return u.mark(this,e)},GlobSync.prototype._makeAbs=function(e){return u.makeAbs(this,e)}},function(e,t,r){var n=r(267),i=Object.create(null),o=r(109);e.exports=n(function inflight(e,t){return i[e]?(i[e].push(t),null):(i[e]=[t],function makeres(e){return o(function RES(){var t=i[e],r=t.length,n=function slice(e){for(var t=e.length,r=[],n=0;n<t;n++)r[n]=e[n];return r}(arguments);try{for(var o=0;o<r;o++)t[o].apply(null,n)}finally{t.length>r?(t.splice(0,r),process.nextTick(function(){RES.apply(null,n)})):delete i[e]}})}(e))})},function(e,t,r){"use strict";const n=r(545);e.exports=function getPathsAsync(e,t,r,i,o){return r?Promise.resolve(e):Promise.all(e.map(e=>n(e,t,i,o))).then(e=>[].concat.apply([],e))}},function(e,t,r){"use strict";const n=r(135);e.exports=function globAsync(e,t,r,i){return i=Object.assign({ignore:t},i,{nodir:!0}),new Promise((t,o)=>{n(e,i,(n,i)=>n?o(n):r||0!==i.length?void t(i):o(new Error("No files match the pattern: "+e)))})}},function(e,t,r){"use strict";const n=r(11),i=r(268);e.exports=function replaceSync(e,t,r,o,s){const a=n.readFileSync(e,o),c=i(a,t,r,e);return c!==a&&(!!s||(n.writeFileSync(e,c,o),!0))}},function(e,t,r){"use strict";const n=r(11),i=r(268);e.exports=function replaceAsync(e,t,r,o,s){return new Promise((a,c)=>{n.readFile(e,o,(u,l)=>{if(u)return c(u);let p=i(l,t,r,e);return p===l?a({file:e,hasChanged:!1}):s?a({file:e,hasChanged:!0}):void n.writeFile(e,p,o,t=>{if(t)return c(t);a({file:e,hasChanged:!0})})})})}},function(e,t,r){"use strict";var n,i=this&&this.__extends||(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])},function(e,t){function __(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(__.prototype=t.prototype,new __)});Object.defineProperty(t,"__esModule",{value:!0}),process.env.APPLICATION_INSIGHTS_NO_DIAGNOSTIC_CHANNEL=!0;var o=r(11),s=r(17),a=r(6),c=r(10),u=r(549),l=function(e){function TelemetryReporter(t,r,n){var i=e.call(this,function(){return i.toDispose.forEach(function(e){return e&&e.dispose()})})||this;i.extensionId=t,i.extensionVersion=r,i.userOptIn=!1,i.toDispose=[];var s=process.env.VSCODE_LOGS||"";return s&&t&&"trace"===process.env.VSCODE_LOG_LEVEL&&(s=a.join(s,t+".txt"),i.logStream=o.createWriteStream(s,{flags:"a",encoding:"utf8",autoClose:!0})),i.updateUserOptIn(n),i.toDispose.push(c.workspace.onDidChangeConfiguration(function(){return i.updateUserOptIn(n)})),i}return i(TelemetryReporter,e),TelemetryReporter.prototype.updateUserOptIn=function(e){var t=c.workspace.getConfiguration(TelemetryReporter.TELEMETRY_CONFIG_ID);this.userOptIn!==t.get(TelemetryReporter.TELEMETRY_CONFIG_ENABLED_ID,!0)&&(this.userOptIn=t.get(TelemetryReporter.TELEMETRY_CONFIG_ENABLED_ID,!0),this.userOptIn?this.createAppInsightsClient(e):this.dispose())},TelemetryReporter.prototype.createAppInsightsClient=function(e){u.defaultClient?(this.appInsightsClient=new u.TelemetryClient(e),this.appInsightsClient.channel.setUseDiskRetryCaching(!0)):(u.setup(e).setAutoCollectRequests(!1).setAutoCollectPerformance(!1).setAutoCollectExceptions(!1).setAutoCollectDependencies(!1).setAutoDependencyCorrelation(!1).setAutoCollectConsole(!1).setUseDiskRetryCaching(!0).start(),this.appInsightsClient=u.defaultClient),this.appInsightsClient.commonProperties=this.getCommonProperties(),e&&0===e.indexOf("AIF-")&&(this.appInsightsClient.config.endpointUrl="https://vortex.data.microsoft.com/collect/v1")},TelemetryReporter.prototype.getCommonProperties=function(){var e=Object.create(null);return e["common.os"]=s.platform(),e["common.platformversion"]=(s.release()||"").replace(/^(\d+)(\.\d+)?(\.\d+)?(.*)/,"$1$2$3"),e["common.extname"]=this.extensionId,e["common.extversion"]=this.extensionVersion,c&&c.env&&(e["common.vscodemachineid"]=c.env.machineId,e["common.vscodesessionid"]=c.env.sessionId,e["common.vscodeversion"]=c.version),e},TelemetryReporter.prototype.sendTelemetryEvent=function(e,t,r){this.userOptIn&&e&&this.appInsightsClient&&(this.appInsightsClient.trackEvent({name:this.extensionId+"/"+e,properties:t,measurements:r}),this.logStream&&this.logStream.write("telemetry/"+e+" "+JSON.stringify({properties:t,measurements:r})+"\n"))},TelemetryReporter.prototype.dispose=function(){var e=this,t=new Promise(function(t){if(!e.logStream)return t(void 0);e.logStream.on("finish",t),e.logStream.end()}),r=new Promise(function(t){e.appInsightsClient?e.appInsightsClient.flush({callback:function(){e.appInsightsClient=void 0,t(void 0)}}):t(void 0)});return Promise.all([r,t])},TelemetryReporter.TELEMETRY_CONFIG_ID="telemetry",TelemetryReporter.TELEMETRY_CONFIG_ENABLED_ID="enableTelemetry",TelemetryReporter}(c.Disposable);t.default=l},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(110),i=r(555),o=r(589),s=r(277),a=r(179),c=r(279),u=r(50);t.TelemetryClient=r(596),t.Contracts=r(58);var l,p,d,h,f,m=!0,g=!1,y=!0,v=!0,b=!0,_=!0,w=!0,E=!0,S=!1;function start(){return t.defaultClient?(S=!0,l.enable(m,g),p.enable(y),d.enable(v),h.useAutoCorrelation(E),h.enable(b),f.enable(_)):u.warn("Start cannot be called before setup"),C}t.setup=function setup(e){return t.defaultClient?u.info("The default client is already setup"):(t.defaultClient=new t.TelemetryClient(e),l=new i(t.defaultClient),p=new o(t.defaultClient),d=new s(t.defaultClient),h=new c(t.defaultClient),f=new a(t.defaultClient)),t.defaultClient&&t.defaultClient.channel&&t.defaultClient.channel.setUseDiskRetryCaching(w),C},t.start=start,t.getCorrelationContext=function getCorrelationContext(){return E?n.CorrelationContextManager.getCurrentContext():null},t.wrapWithCorrelationContext=function wrapWithCorrelationContext(e){return n.CorrelationContextManager.wrapCallback(e)};var C=function(){function Configuration(){}return Configuration.setAutoCollectConsole=function(e,t){return void 0===t&&(t=!1),m=e,g=t,S&&l.enable(e,t),Configuration},Configuration.setAutoCollectExceptions=function(e){return y=e,S&&p.enable(e),Configuration},Configuration.setAutoCollectPerformance=function(e){return v=e,S&&d.enable(e),Configuration},Configuration.setAutoCollectRequests=function(e){return b=e,S&&h.enable(e),Configuration},Configuration.setAutoCollectDependencies=function(e){return _=e,S&&f.enable(e),Configuration},Configuration.setAutoDependencyCorrelation=function(e){return E=e,S&&h.useAutoCorrelation(e),Configuration},Configuration.setUseDiskRetryCaching=function(e,r){return w=e,t.defaultClient&&t.defaultClient.channel&&t.defaultClient.channel.setUseDiskRetryCaching(e,r),Configuration},Configuration.setInternalLogging=function(e,t){return void 0===e&&(e=!1),void 0===t&&(t=!0),u.enableDebug=e,u.disableWarnings=!t,Configuration},Configuration.start=start,Configuration}();t.Configuration=C,t.dispose=function dispose(){t.defaultClient=null,S=!1,l&&l.dispose(),p&&p.dispose(),d&&d.dispose(),h&&h.dispose(),f&&f.dispose()}},function(e,t){var r;t=e.exports=SemVer,r="object"==typeof process&&process.env&&process.env.NODE_DEBUG&&/\bsemver\b/i.test(process.env.NODE_DEBUG)?function(){var e=Array.prototype.slice.call(arguments,0);e.unshift("SEMVER"),console.log.apply(console,e)}:function(){},t.SEMVER_SPEC_VERSION="2.0.0";var n=256,i=Number.MAX_SAFE_INTEGER||9007199254740991,o=t.re=[],s=t.src=[],a=0,c=a++;s[c]="0|[1-9]\\d*";var u=a++;s[u]="[0-9]+";var l=a++;s[l]="\\d*[a-zA-Z-][a-zA-Z0-9-]*";var p=a++;s[p]="("+s[c]+")\\.("+s[c]+")\\.("+s[c]+")";var d=a++;s[d]="("+s[u]+")\\.("+s[u]+")\\.("+s[u]+")";var h=a++;s[h]="(?:"+s[c]+"|"+s[l]+")";var f=a++;s[f]="(?:"+s[u]+"|"+s[l]+")";var m=a++;s[m]="(?:-("+s[h]+"(?:\\."+s[h]+")*))";var g=a++;s[g]="(?:-?("+s[f]+"(?:\\."+s[f]+")*))";var y=a++;s[y]="[0-9A-Za-z-]+";var v=a++;s[v]="(?:\\+("+s[y]+"(?:\\."+s[y]+")*))";var b=a++,_="v?"+s[p]+s[m]+"?"+s[v]+"?";s[b]="^"+_+"$";var w="[v=\\s]*"+s[d]+s[g]+"?"+s[v]+"?",E=a++;s[E]="^"+w+"$";var S=a++;s[S]="((?:<|>)?=?)";var C=a++;s[C]=s[u]+"|x|X|\\*";var x=a++;s[x]=s[c]+"|x|X|\\*";var k=a++;s[k]="[v=\\s]*("+s[x]+")(?:\\.("+s[x]+")(?:\\.("+s[x]+")(?:"+s[m]+")?"+s[v]+"?)?)?";var R=a++;s[R]="[v=\\s]*("+s[C]+")(?:\\.("+s[C]+")(?:\\.("+s[C]+")(?:"+s[g]+")?"+s[v]+"?)?)?";var T=a++;s[T]="^"+s[S]+"\\s*"+s[k]+"$";var O=a++;s[O]="^"+s[S]+"\\s*"+s[R]+"$";var I=a++;s[I]="(?:^|[^\\d])(\\d{1,16})(?:\\.(\\d{1,16}))?(?:\\.(\\d{1,16}))?(?:$|[^\\d])";var N=a++;s[N]="(?:~>?)";var A=a++;s[A]="(\\s*)"+s[N]+"\\s+",o[A]=new RegExp(s[A],"g");var P=a++;s[P]="^"+s[N]+s[k]+"$";var L=a++;s[L]="^"+s[N]+s[R]+"$";var D=a++;s[D]="(?:\\^)";var M=a++;s[M]="(\\s*)"+s[D]+"\\s+",o[M]=new RegExp(s[M],"g");var j=a++;s[j]="^"+s[D]+s[k]+"$";var q=a++;s[q]="^"+s[D]+s[R]+"$";var F=a++;s[F]="^"+s[S]+"\\s*("+w+")$|^$";var z=a++;s[z]="^"+s[S]+"\\s*("+_+")$|^$";var U=a++;s[U]="(\\s*)"+s[S]+"\\s*("+w+"|"+s[k]+")",o[U]=new RegExp(s[U],"g");var B=a++;s[B]="^\\s*("+s[k]+")\\s+-\\s+("+s[k]+")\\s*$";var H=a++;s[H]="^\\s*("+s[R]+")\\s+-\\s+("+s[R]+")\\s*$";var $=a++;s[$]="(<|>)?=?\\s*\\*";for(var V=0;V<35;V++)r(V,s[V]),o[V]||(o[V]=new RegExp(s[V]));function parse(e,t){if(t&&"object"==typeof t||(t={loose:!!t,includePrerelease:!1}),e instanceof SemVer)return e;if("string"!=typeof e)return null;if(e.length>n)return null;if(!(t.loose?o[E]:o[b]).test(e))return null;try{return new SemVer(e,t)}catch(e){return null}}function SemVer(e,t){if(t&&"object"==typeof t||(t={loose:!!t,includePrerelease:!1}),e instanceof SemVer){if(e.loose===t.loose)return e;e=e.version}else if("string"!=typeof e)throw new TypeError("Invalid Version: "+e);if(e.length>n)throw new TypeError("version is longer than "+n+" characters");if(!(this instanceof SemVer))return new SemVer(e,t);r("SemVer",e,t),this.options=t,this.loose=!!t.loose;var s=e.trim().match(t.loose?o[E]:o[b]);if(!s)throw new TypeError("Invalid Version: "+e);if(this.raw=e,this.major=+s[1],this.minor=+s[2],this.patch=+s[3],this.major>i||this.major<0)throw new TypeError("Invalid major version");if(this.minor>i||this.minor<0)throw new TypeError("Invalid minor version");if(this.patch>i||this.patch<0)throw new TypeError("Invalid patch version");s[4]?this.prerelease=s[4].split(".").map(function(e){if(/^[0-9]+$/.test(e)){var t=+e;if(t>=0&&t<i)return t}return e}):this.prerelease=[],this.build=s[5]?s[5].split("."):[],this.format()}t.parse=parse,t.valid=function valid(e,t){var r=parse(e,t);return r?r.version:null},t.clean=function clean(e,t){var r=parse(e.trim().replace(/^[=v]+/,""),t);return r?r.version:null},t.SemVer=SemVer,SemVer.prototype.format=function(){return this.version=this.major+"."+this.minor+"."+this.patch,this.prerelease.length&&(this.version+="-"+this.prerelease.join(".")),this.version},SemVer.prototype.toString=function(){return this.version},SemVer.prototype.compare=function(e){return r("SemVer.compare",this.version,this.options,e),e instanceof SemVer||(e=new SemVer(e,this.options)),this.compareMain(e)||this.comparePre(e)},SemVer.prototype.compareMain=function(e){return e instanceof SemVer||(e=new SemVer(e,this.options)),compareIdentifiers(this.major,e.major)||compareIdentifiers(this.minor,e.minor)||compareIdentifiers(this.patch,e.patch)},SemVer.prototype.comparePre=function(e){if(e instanceof SemVer||(e=new SemVer(e,this.options)),this.prerelease.length&&!e.prerelease.length)return-1;if(!this.prerelease.length&&e.prerelease.length)return 1;if(!this.prerelease.length&&!e.prerelease.length)return 0;var t=0;do{var n=this.prerelease[t],i=e.prerelease[t];if(r("prerelease compare",t,n,i),void 0===n&&void 0===i)return 0;if(void 0===i)return 1;if(void 0===n)return-1;if(n!==i)return compareIdentifiers(n,i)}while(++t)},SemVer.prototype.inc=function(e,t){switch(e){case"premajor":this.prerelease.length=0,this.patch=0,this.minor=0,this.major++,this.inc("pre",t);break;case"preminor":this.prerelease.length=0,this.patch=0,this.minor++,this.inc("pre",t);break;case"prepatch":this.prerelease.length=0,this.inc("patch",t),this.inc("pre",t);break;case"prerelease":0===this.prerelease.length&&this.inc("patch",t),this.inc("pre",t);break;case"major":0===this.minor&&0===this.patch&&0!==this.prerelease.length||this.major++,this.minor=0,this.patch=0,this.prerelease=[];break;case"minor":0===this.patch&&0!==this.prerelease.length||this.minor++,this.patch=0,this.prerelease=[];break;case"patch":0===this.prerelease.length&&this.patch++,this.prerelease=[];break;case"pre":if(0===this.prerelease.length)this.prerelease=[0];else{for(var r=this.prerelease.length;--r>=0;)"number"==typeof this.prerelease[r]&&(this.prerelease[r]++,r=-2);-1===r&&this.prerelease.push(0)}t&&(this.prerelease[0]===t?isNaN(this.prerelease[1])&&(this.prerelease=[t,0]):this.prerelease=[t,0]);break;default:throw new Error("invalid increment argument: "+e)}return this.format(),this.raw=this.version,this},t.inc=function inc(e,t,r,n){"string"==typeof r&&(n=r,r=void 0);try{return new SemVer(e,r).inc(t,n).version}catch(e){return null}},t.diff=function diff(e,t){if(eq(e,t))return null;var r=parse(e),n=parse(t);if(r.prerelease.length||n.prerelease.length){for(var i in r)if(("major"===i||"minor"===i||"patch"===i)&&r[i]!==n[i])return"pre"+i;return"prerelease"}for(var i in r)if(("major"===i||"minor"===i||"patch"===i)&&r[i]!==n[i])return i},t.compareIdentifiers=compareIdentifiers;var G=/^[0-9]+$/;function compareIdentifiers(e,t){var r=G.test(e),n=G.test(t);return r&&n&&(e=+e,t=+t),r&&!n?-1:n&&!r?1:e<t?-1:e>t?1:0}function compare(e,t,r){return new SemVer(e,r).compare(new SemVer(t,r))}function gt(e,t,r){return compare(e,t,r)>0}function lt(e,t,r){return compare(e,t,r)<0}function eq(e,t,r){return 0===compare(e,t,r)}function neq(e,t,r){return 0!==compare(e,t,r)}function gte(e,t,r){return compare(e,t,r)>=0}function lte(e,t,r){return compare(e,t,r)<=0}function cmp(e,t,r,n){var i;switch(t){case"===":"object"==typeof e&&(e=e.version),"object"==typeof r&&(r=r.version),i=e===r;break;case"!==":"object"==typeof e&&(e=e.version),"object"==typeof r&&(r=r.version),i=e!==r;break;case"":case"=":case"==":i=eq(e,r,n);break;case"!=":i=neq(e,r,n);break;case">":i=gt(e,r,n);break;case">=":i=gte(e,r,n);break;case"<":i=lt(e,r,n);break;case"<=":i=lte(e,r,n);break;default:throw new TypeError("Invalid operator: "+t)}return i}function Comparator(e,t){if(t&&"object"==typeof t||(t={loose:!!t,includePrerelease:!1}),e instanceof Comparator){if(e.loose===!!t.loose)return e;e=e.value}if(!(this instanceof Comparator))return new Comparator(e,t);r("comparator",e,t),this.options=t,this.loose=!!t.loose,this.parse(e),this.semver===W?this.value="":this.value=this.operator+this.semver.version,r("comp",this)}t.rcompareIdentifiers=function rcompareIdentifiers(e,t){return compareIdentifiers(t,e)},t.major=function major(e,t){return new SemVer(e,t).major},t.minor=function minor(e,t){return new SemVer(e,t).minor},t.patch=function patch(e,t){return new SemVer(e,t).patch},t.compare=compare,t.compareLoose=function compareLoose(e,t){return compare(e,t,!0)},t.rcompare=function rcompare(e,t,r){return compare(t,e,r)},t.sort=function sort(e,r){return e.sort(function(e,n){return t.compare(e,n,r)})},t.rsort=function rsort(e,r){return e.sort(function(e,n){return t.rcompare(e,n,r)})},t.gt=gt,t.lt=lt,t.eq=eq,t.neq=neq,t.gte=gte,t.lte=lte,t.cmp=cmp,t.Comparator=Comparator;var W={};function Range(e,t){if(t&&"object"==typeof t||(t={loose:!!t,includePrerelease:!1}),e instanceof Range)return e.loose===!!t.loose&&e.includePrerelease===!!t.includePrerelease?e:new Range(e.raw,t);if(e instanceof Comparator)return new Range(e.value,t);if(!(this instanceof Range))return new Range(e,t);if(this.options=t,this.loose=!!t.loose,this.includePrerelease=!!t.includePrerelease,this.raw=e,this.set=e.split(/\s*\|\|\s*/).map(function(e){return this.parseRange(e.trim())},this).filter(function(e){return e.length}),!this.set.length)throw new TypeError("Invalid SemVer Range: "+e);this.format()}function isX(e){return!e||"x"===e.toLowerCase()||"*"===e}function hyphenReplace(e,t,r,n,i,o,s,a,c,u,l,p,d){return((t=isX(r)?"":isX(n)?">="+r+".0.0":isX(i)?">="+r+"."+n+".0":">="+t)+" "+(a=isX(c)?"":isX(u)?"<"+(+c+1)+".0.0":isX(l)?"<"+c+"."+(+u+1)+".0":p?"<="+c+"."+u+"."+l+"-"+p:"<="+a)).trim()}function testSet(e,t,n){for(var i=0;i<e.length;i++)if(!e[i].test(t))return!1;if(n||(n={}),t.prerelease.length&&!n.includePrerelease){for(i=0;i<e.length;i++)if(r(e[i].semver),e[i].semver!==W&&e[i].semver.prerelease.length>0){var o=e[i].semver;if(o.major===t.major&&o.minor===t.minor&&o.patch===t.patch)return!0}return!1}return!0}function satisfies(e,t,r){try{t=new Range(t,r)}catch(e){return!1}return t.test(e)}function outside(e,t,r,n){var i,o,s,a,c;switch(e=new SemVer(e,n),t=new Range(t,n),r){case">":i=gt,o=lte,s=lt,a=">",c=">=";break;case"<":i=lt,o=gte,s=gt,a="<",c="<=";break;default:throw new TypeError('Must provide a hilo val of "<" or ">"')}if(satisfies(e,t,n))return!1;for(var u=0;u<t.set.length;++u){var l=t.set[u],p=null,d=null;if(l.forEach(function(e){e.semver===W&&(e=new Comparator(">=0.0.0")),p=p||e,d=d||e,i(e.semver,p.semver,n)?p=e:s(e.semver,d.semver,n)&&(d=e)}),p.operator===a||p.operator===c)return!1;if((!d.operator||d.operator===a)&&o(e,d.semver))return!1;if(d.operator===c&&s(e,d.semver))return!1}return!0}Comparator.prototype.parse=function(e){var t=this.options.loose?o[F]:o[z],r=e.match(t);if(!r)throw new TypeError("Invalid comparator: "+e);this.operator=r[1],"="===this.operator&&(this.operator=""),r[2]?this.semver=new SemVer(r[2],this.options.loose):this.semver=W},Comparator.prototype.toString=function(){return this.value},Comparator.prototype.test=function(e){return r("Comparator.test",e,this.options.loose),this.semver===W||("string"==typeof e&&(e=new SemVer(e,this.options)),cmp(e,this.operator,this.semver,this.options))},Comparator.prototype.intersects=function(e,t){if(!(e instanceof Comparator))throw new TypeError("a Comparator is required");var r;if(t&&"object"==typeof t||(t={loose:!!t,includePrerelease:!1}),""===this.operator)return r=new Range(e.value,t),satisfies(this.value,r,t);if(""===e.operator)return r=new Range(this.value,t),satisfies(e.semver,r,t);var n=!(">="!==this.operator&&">"!==this.operator||">="!==e.operator&&">"!==e.operator),i=!("<="!==this.operator&&"<"!==this.operator||"<="!==e.operator&&"<"!==e.operator),o=this.semver.version===e.semver.version,s=!(">="!==this.operator&&"<="!==this.operator||">="!==e.operator&&"<="!==e.operator),a=cmp(this.semver,"<",e.semver,t)&&(">="===this.operator||">"===this.operator)&&("<="===e.operator||"<"===e.operator),c=cmp(this.semver,">",e.semver,t)&&("<="===this.operator||"<"===this.operator)&&(">="===e.operator||">"===e.operator);return n||i||o&&s||a||c},t.Range=Range,Range.prototype.format=function(){return this.range=this.set.map(function(e){return e.join(" ").trim()}).join("||").trim(),this.range},Range.prototype.toString=function(){return this.range},Range.prototype.parseRange=function(e){var t=this.options.loose;e=e.trim();var n=t?o[H]:o[B];e=e.replace(n,hyphenReplace),r("hyphen replace",e),e=e.replace(o[U],"$1$2$3"),r("comparator trim",e,o[U]),e=(e=(e=e.replace(o[A],"$1~")).replace(o[M],"$1^")).split(/\s+/).join(" ");var i=t?o[F]:o[z],s=e.split(" ").map(function(e){return function parseComparator(e,t){return r("comp",e,t),e=function replaceCarets(e,t){return e.trim().split(/\s+/).map(function(e){return function replaceCaret(e,t){r("caret",e,t),t&&"object"==typeof t||(t={loose:!!t,includePrerelease:!1});var n=t.loose?o[q]:o[j];return e.replace(n,function(t,n,i,o,s){var a;return r("caret",e,t,n,i,o,s),isX(n)?a="":isX(i)?a=">="+n+".0.0 <"+(+n+1)+".0.0":isX(o)?a="0"===n?">="+n+"."+i+".0 <"+n+"."+(+i+1)+".0":">="+n+"."+i+".0 <"+(+n+1)+".0.0":s?(r("replaceCaret pr",s),"-"!==s.charAt(0)&&(s="-"+s),a="0"===n?"0"===i?">="+n+"."+i+"."+o+s+" <"+n+"."+i+"."+(+o+1):">="+n+"."+i+"."+o+s+" <"+n+"."+(+i+1)+".0":">="+n+"."+i+"."+o+s+" <"+(+n+1)+".0.0"):(r("no pr"),a="0"===n?"0"===i?">="+n+"."+i+"."+o+" <"+n+"."+i+"."+(+o+1):">="+n+"."+i+"."+o+" <"+n+"."+(+i+1)+".0":">="+n+"."+i+"."+o+" <"+(+n+1)+".0.0"),r("caret return",a),a})}(e,t)}).join(" ")}(e,t),r("caret",e),e=function replaceTildes(e,t){return e.trim().split(/\s+/).map(function(e){return function replaceTilde(e,t){t&&"object"==typeof t||(t={loose:!!t,includePrerelease:!1});var n=t.loose?o[L]:o[P];return e.replace(n,function(t,n,i,o,s){var a;return r("tilde",e,t,n,i,o,s),isX(n)?a="":isX(i)?a=">="+n+".0.0 <"+(+n+1)+".0.0":isX(o)?a=">="+n+"."+i+".0 <"+n+"."+(+i+1)+".0":s?(r("replaceTilde pr",s),"-"!==s.charAt(0)&&(s="-"+s),a=">="+n+"."+i+"."+o+s+" <"+n+"."+(+i+1)+".0"):a=">="+n+"."+i+"."+o+" <"+n+"."+(+i+1)+".0",r("tilde return",a),a})}(e,t)}).join(" ")}(e,t),r("tildes",e),e=function replaceXRanges(e,t){return r("replaceXRanges",e,t),e.split(/\s+/).map(function(e){return function replaceXRange(e,t){e=e.trim(),t&&"object"==typeof t||(t={loose:!!t,includePrerelease:!1});var n=t.loose?o[O]:o[T];return e.replace(n,function(t,n,i,o,s,a){r("xRange",e,t,n,i,o,s,a);var c=isX(i),u=c||isX(o),l=u||isX(s),p=l;return"="===n&&p&&(n=""),c?t=">"===n||"<"===n?"<0.0.0":"*":n&&p?(u&&(o=0),l&&(s=0),">"===n?(n=">=",u?(i=+i+1,o=0,s=0):l&&(o=+o+1,s=0)):"<="===n&&(n="<",u?i=+i+1:o=+o+1),t=n+i+"."+o+"."+s):u?t=">="+i+".0.0 <"+(+i+1)+".0.0":l&&(t=">="+i+"."+o+".0 <"+i+"."+(+o+1)+".0"),r("xRange return",t),t})}(e,t)}).join(" ")}(e,t),r("xrange",e),e=function replaceStars(e,t){return r("replaceStars",e,t),e.trim().replace(o[$],"")}(e,t),r("stars",e),e}(e,this.options)},this).join(" ").split(/\s+/);return this.options.loose&&(s=s.filter(function(e){return!!e.match(i)})),s=s.map(function(e){return new Comparator(e,this.options)},this)},Range.prototype.intersects=function(e,t){if(!(e instanceof Range))throw new TypeError("a Range is required");return this.set.some(function(r){return r.every(function(r){return e.set.some(function(e){return e.every(function(e){return r.intersects(e,t)})})})})},t.toComparators=function toComparators(e,t){return new Range(e,t).set.map(function(e){return e.map(function(e){return e.value}).join(" ").trim().split(" ")})},Range.prototype.test=function(e){if(!e)return!1;"string"==typeof e&&(e=new SemVer(e,this.options));for(var t=0;t<this.set.length;t++)if(testSet(this.set[t],e,this.options))return!0;return!1},t.satisfies=satisfies,t.maxSatisfying=function maxSatisfying(e,t,r){var n=null,i=null;try{var o=new Range(t,r)}catch(e){return null}return e.forEach(function(e){o.test(e)&&(n&&-1!==i.compare(e)||(i=new SemVer(n=e,r)))}),n},t.minSatisfying=function minSatisfying(e,t,r){var n=null,i=null;try{var o=new Range(t,r)}catch(e){return null}return e.forEach(function(e){o.test(e)&&(n&&1!==i.compare(e)||(i=new SemVer(n=e,r)))}),n},t.validRange=function validRange(e,t){try{return new Range(e,t).range||"*"}catch(e){return null}},t.ltr=function ltr(e,t,r){return outside(e,t,"<",r)},t.gtr=function gtr(e,t,r){return outside(e,t,">",r)},t.outside=outside,t.prerelease=function prerelease(e,t){var r=parse(e,t);return r&&r.prerelease.length?r.prerelease:null},t.intersects=function intersects(e,t,r){return e=new Range(e,r),t=new Range(t,r),e.intersects(t)},t.coerce=function coerce(e){if(e instanceof SemVer)return e;if("string"!=typeof e)return null;var t=e.match(o[I]);return null==t?null:parse((t[1]||"0")+"."+(t[2]||"0")+"."+(t[3]||"0"))}},function(e){e.exports={_args:[["diagnostic-channel@0.2.0","/home/travis/build/microsoft/vscode-azure-iot-toolkit"]],_from:"diagnostic-channel@0.2.0",_id:"diagnostic-channel@0.2.0",_inBundle:!1,_integrity:"sha1-zJmvlhLCP7H/8TYSxy8sv6qNWhc=",_location:"/diagnostic-channel",_phantomChildren:{},_requested:{type:"version",registry:!0,raw:"diagnostic-channel@0.2.0",name:"diagnostic-channel",escapedName:"diagnostic-channel",rawSpec:"0.2.0",saveSpec:null,fetchSpec:"0.2.0"},_requiredBy:["/applicationinsights"],_resolved:"https://registry.npmjs.org/diagnostic-channel/-/diagnostic-channel-0.2.0.tgz",_spec:"0.2.0",_where:"/home/travis/build/microsoft/vscode-azure-iot-toolkit",bugs:{url:"https://github.com/Microsoft/node-diagnostic-channel/issues"},dependencies:{semver:"^5.3.0"},description:"Provides a context-saving pub/sub channel to connect diagnostic event publishers and subscribers",devDependencies:{"@types/mocha":"^2.2.40","@types/node":"^7.0.12",mocha:"^3.2.0",rimraf:"^2.6.1",tslint:"^5.0.0",typescript:"^2.2.1"},files:["dist/src/**/*.d.ts","dist/src/**/*.js","LICENSE","README.md","package.json"],homepage:"https://github.com/Microsoft/node-diagnostic-channel",license:"MIT",main:"./dist/src/channel.js",name:"diagnostic-channel",repository:{type:"git",url:"git+https://github.com/Microsoft/node-diagnostic-channel.git"},scripts:{build:"tsc",clean:"rimraf ./dist",lint:"tslint -c tslint.json -p tsconfig.json",test:"mocha ./dist/tests/**/*.js"},types:"./dist/src/channel.d.ts",version:"0.2.0"}},function(e,t,r){(function(){"use strict";
/**
 * @license
 * Copyright Google Inc. All Rights Reserved.
 *
 * Use of this source code is governed by an MIT-style license that can be
 * found in the LICENSE file at https://angular.io/license
 */!function(e){if(e.Zone)throw new Error("Zone already loaded.");var t=function(){function Zone(e,t){this._properties=null,this._parent=e,this._name=t?t.name||"unnamed":"<root>",this._properties=t&&t.properties||{},this._zoneDelegate=new r(this,this._parent&&this._parent._zoneDelegate,t)}return Zone.assertZonePatched=function(){if(e.Promise!==w)throw new Error("Zone.js has detected that ZoneAwarePromise `(window|global).Promise` has been overwritten.\nMost likely cause is that a Promise polyfill has been loaded after Zone.js (Polyfilling Promise api is not necessary when zone.js is loaded. If you must load one, do so before loading zone.js.)")},Object.defineProperty(Zone,"current",{get:function(){return c.zone},enumerable:!0,configurable:!0}),Object.defineProperty(Zone,"currentTask",{get:function(){return u},enumerable:!0,configurable:!0}),Object.defineProperty(Zone.prototype,"parent",{get:function(){return this._parent},enumerable:!0,configurable:!0}),Object.defineProperty(Zone.prototype,"name",{get:function(){return this._name},enumerable:!0,configurable:!0}),Zone.prototype.get=function(e){var t=this.getZoneWith(e);if(t)return t._properties[e]},Zone.prototype.getZoneWith=function(e){for(var t=this;t;){if(t._properties.hasOwnProperty(e))return t;t=t._parent}return null},Zone.prototype.fork=function(e){if(!e)throw new Error("ZoneSpec required!");return this._zoneDelegate.fork(this,e)},Zone.prototype.wrap=function(e,t){if("function"!=typeof e)throw new Error("Expecting function got: "+e);var r=this._zoneDelegate.intercept(this,e,t),n=this;return function(){return n.runGuarded(r,this,arguments,t)}},Zone.prototype.run=function(e,t,r,n){void 0===t&&(t=null),void 0===r&&(r=null),void 0===n&&(n=null),c=new i(c,this);try{return this._zoneDelegate.invoke(this,e,t,r,n)}finally{c=c.parent}},Zone.prototype.runGuarded=function(e,t,r,n){void 0===t&&(t=null),void 0===r&&(r=null),void 0===n&&(n=null),c=new i(c,this);try{try{return this._zoneDelegate.invoke(this,e,t,r,n)}catch(e){if(this._zoneDelegate.handleError(this,e))throw e}}finally{c=c.parent}},Zone.prototype.runTask=function(e,t,r){if(e.runCount++,e.zone!=this)throw new Error("A task can only be run in the zone which created it! (Creation: "+e.zone.name+"; Execution: "+this.name+")");var n=u;u=e,c=new i(c,this);try{"macroTask"==e.type&&e.data&&!e.data.isPeriodic&&(e.cancelFn=null);try{return this._zoneDelegate.invokeTask(this,e,t,r)}catch(e){if(this._zoneDelegate.handleError(this,e))throw e}}finally{c=c.parent,u=n}},Zone.prototype.scheduleMicroTask=function(e,t,r,i){return this._zoneDelegate.scheduleTask(this,new n("microTask",this,e,t,r,i,null))},Zone.prototype.scheduleMacroTask=function(e,t,r,i,o){return this._zoneDelegate.scheduleTask(this,new n("macroTask",this,e,t,r,i,o))},Zone.prototype.scheduleEventTask=function(e,t,r,i,o){return this._zoneDelegate.scheduleTask(this,new n("eventTask",this,e,t,r,i,o))},Zone.prototype.cancelTask=function(e){var t=this._zoneDelegate.cancelTask(this,e);return e.runCount=-1,e.cancelFn=null,t},Zone}();t.__symbol__=__symbol__;var r=function(){function ZoneDelegate(e,t,r){this._taskCounts={microTask:0,macroTask:0,eventTask:0},this.zone=e,this._parentDelegate=t,this._forkZS=r&&(r&&r.onFork?r:t._forkZS),this._forkDlgt=r&&(r.onFork?t:t._forkDlgt),this._forkCurrZone=r&&(r.onFork?this.zone:t.zone),this._interceptZS=r&&(r.onIntercept?r:t._interceptZS),this._interceptDlgt=r&&(r.onIntercept?t:t._interceptDlgt),this._interceptCurrZone=r&&(r.onIntercept?this.zone:t.zone),this._invokeZS=r&&(r.onInvoke?r:t._invokeZS),this._invokeDlgt=r&&(r.onInvoke?t:t._invokeDlgt),this._invokeCurrZone=r&&(r.onInvoke?this.zone:t.zone),this._handleErrorZS=r&&(r.onHandleError?r:t._handleErrorZS),this._handleErrorDlgt=r&&(r.onHandleError?t:t._handleErrorDlgt),this._handleErrorCurrZone=r&&(r.onHandleError?this.zone:t.zone),this._scheduleTaskZS=r&&(r.onScheduleTask?r:t._scheduleTaskZS),this._scheduleTaskDlgt=r&&(r.onScheduleTask?t:t._scheduleTaskDlgt),this._scheduleTaskCurrZone=r&&(r.onScheduleTask?this.zone:t.zone),this._invokeTaskZS=r&&(r.onInvokeTask?r:t._invokeTaskZS),this._invokeTaskDlgt=r&&(r.onInvokeTask?t:t._invokeTaskDlgt),this._invokeTaskCurrZone=r&&(r.onInvokeTask?this.zone:t.zone),this._cancelTaskZS=r&&(r.onCancelTask?r:t._cancelTaskZS),this._cancelTaskDlgt=r&&(r.onCancelTask?t:t._cancelTaskDlgt),this._cancelTaskCurrZone=r&&(r.onCancelTask?this.zone:t.zone),this._hasTaskZS=r&&(r.onHasTask?r:t._hasTaskZS),this._hasTaskDlgt=r&&(r.onHasTask?t:t._hasTaskDlgt),this._hasTaskCurrZone=r&&(r.onHasTask?this.zone:t.zone)}return ZoneDelegate.prototype.fork=function(e,r){return this._forkZS?this._forkZS.onFork(this._forkDlgt,this.zone,e,r):new t(e,r)},ZoneDelegate.prototype.intercept=function(e,t,r){return this._interceptZS?this._interceptZS.onIntercept(this._interceptDlgt,this._interceptCurrZone,e,t,r):t},ZoneDelegate.prototype.invoke=function(e,t,r,n,i){return this._invokeZS?this._invokeZS.onInvoke(this._invokeDlgt,this._invokeCurrZone,e,t,r,n,i):t.apply(r,n)},ZoneDelegate.prototype.handleError=function(e,t){return!this._handleErrorZS||this._handleErrorZS.onHandleError(this._handleErrorDlgt,this._handleErrorCurrZone,e,t)},ZoneDelegate.prototype.scheduleTask=function(e,t){try{if(this._scheduleTaskZS)return this._scheduleTaskZS.onScheduleTask(this._scheduleTaskDlgt,this._scheduleTaskCurrZone,e,t);if(t.scheduleFn)t.scheduleFn(t);else{if("microTask"!=t.type)throw new Error("Task is missing scheduleFn.");!function scheduleMicroTask(e){scheduleQueueDrain(),l.push(e)}(t)}return t}finally{e==this.zone&&this._updateTaskCount(t.type,1)}},ZoneDelegate.prototype.invokeTask=function(e,t,r,n){try{return this._invokeTaskZS?this._invokeTaskZS.onInvokeTask(this._invokeTaskDlgt,this._invokeTaskCurrZone,e,t,r,n):t.callback.apply(r,n)}finally{e!=this.zone||"eventTask"==t.type||t.data&&t.data.isPeriodic||this._updateTaskCount(t.type,-1)}},ZoneDelegate.prototype.cancelTask=function(e,t){var r;if(this._cancelTaskZS)r=this._cancelTaskZS.onCancelTask(this._cancelTaskDlgt,this._cancelTaskCurrZone,e,t);else{if(!t.cancelFn)throw new Error("Task does not support cancellation, or is already canceled.");r=t.cancelFn(t)}return e==this.zone&&this._updateTaskCount(t.type,-1),r},ZoneDelegate.prototype.hasTask=function(e,t){return this._hasTaskZS&&this._hasTaskZS.onHasTask(this._hasTaskDlgt,this._hasTaskCurrZone,e,t)},ZoneDelegate.prototype._updateTaskCount=function(e,t){var r=this._taskCounts,n=r[e],i=r[e]=n+t;if(i<0)throw new Error("More tasks executed then were scheduled.");if(0==n||0==i){var o={microTask:r.microTask>0,macroTask:r.macroTask>0,eventTask:r.eventTask>0,change:e};try{this.hasTask(this.zone,o)}finally{this._parentDelegate&&this._parentDelegate._updateTaskCount(e,t)}}},ZoneDelegate}(),n=function(){function ZoneTask(e,t,r,n,i,o,s){this.runCount=0,this.type=e,this.zone=t,this.source=r,this.data=i,this.scheduleFn=o,this.cancelFn=s,this.callback=n;var a=this;this.invoke=function(){h++;try{return t.runTask(a,this,arguments)}finally{1==h&&drainMicroTaskQueue(),h--}}}return ZoneTask.prototype.toString=function(){return this.data&&void 0!==this.data.handleId?this.data.handleId:Object.prototype.toString.call(this)},ZoneTask.prototype.toJSON=function(){return{type:this.type,source:this.source,data:this.data,zone:this.zone.name,invoke:this.invoke,scheduleFn:this.scheduleFn,cancelFn:this.cancelFn,runCount:this.runCount,callback:this.callback}},ZoneTask}(),i=function(){return function ZoneFrame(e,t){this.parent=e,this.zone=t}}();function __symbol__(e){return"__zone_symbol__"+e}var o=__symbol__("setTimeout"),s=__symbol__("Promise"),a=__symbol__("then"),c=new i(null,new t(null,null)),u=null,l=[],p=!1,d=[],h=0;function scheduleQueueDrain(){0===h&&0===l.length&&(e[s]?e[s].resolve(0)[a](drainMicroTaskQueue):e[o](drainMicroTaskQueue,0))}function consoleError(e){var t=e&&e.rejection;t&&console.error("Unhandled Promise rejection:",t instanceof Error?t.message:t,"; Zone:",e.zone.name,"; Task:",e.task&&e.task.source,"; Value:",t,t instanceof Error?t.stack:void 0),console.error(e)}function drainMicroTaskQueue(){if(!p){for(p=!0;l.length;){var e=l;l=[];for(var t=0;t<e.length;t++){var r=e[t];try{r.zone.runTask(r,null,null)}catch(e){consoleError(e)}}}for(;d.length;)for(var n=function(){var e=d.shift();try{e.zone.runGuarded(function(){throw e})}catch(e){consoleError(e)}};d.length;)n();p=!1}}function isThenable(e){return e&&e.then}function forwardResolution(e){return e}function forwardRejection(e){return w.reject(e)}var f=__symbol__("state"),m=__symbol__("value"),g="Promise.then",y=null,v=!0,b=!1,_=0;function makeResolver(e,t){return function(r){resolvePromise(e,t,r)}}function resolvePromise(e,r,n){if(e[f]===y)if(n instanceof w&&n.hasOwnProperty(f)&&n.hasOwnProperty(m)&&n[f]!==y)clearRejectedNoCatch(n),resolvePromise(e,n[f],n[m]);else if(isThenable(n))n.then(makeResolver(e,r),makeResolver(e,!1));else{e[f]=r;var i=e[m];e[m]=n;for(var o=0;o<i.length;)scheduleResolveOrReject(e,i[o++],i[o++],i[o++],i[o++]);if(0==i.length&&r==b){e[f]=_;try{throw new Error("Uncaught (in promise): "+n+(n&&n.stack?"\n"+n.stack:""))}catch(r){var s=r;s.rejection=n,s.promise=e,s.zone=t.current,s.task=t.currentTask,d.push(s),scheduleQueueDrain()}}}return e}function clearRejectedNoCatch(e){if(e[f]===_){e[f]=b;for(var t=0;t<d.length;t++)if(e===d[t].promise){d.splice(t,1);break}}}function scheduleResolveOrReject(e,t,r,n,i){clearRejectedNoCatch(e);var o=e[f]?n||forwardResolution:i||forwardRejection;t.scheduleMicroTask(g,function(){try{resolvePromise(r,!0,t.run(o,null,[e[m]]))}catch(e){resolvePromise(r,!1,e)}})}var w=function(){function ZoneAwarePromise(e){if(!(this instanceof ZoneAwarePromise))throw new Error("Must be an instanceof Promise.");this[f]=y,this[m]=[];try{e&&e(makeResolver(this,v),makeResolver(this,b))}catch(e){resolvePromise(this,!1,e)}}return ZoneAwarePromise.toString=function(){return"function ZoneAwarePromise() { [native code] }"},ZoneAwarePromise.resolve=function(e){return resolvePromise(new this(null),v,e)},ZoneAwarePromise.reject=function(e){return resolvePromise(new this(null),b,e)},ZoneAwarePromise.race=function(e){var t,r,n=new this(function(e,n){var i;t=(i=[e,n])[0],r=i[1]});function onResolve(e){n&&(n=t(e))}function onReject(e){n&&(n=r(e))}for(var i=0,o=e;i<o.length;i++){var s=o[i];isThenable(s)||(s=this.resolve(s)),s.then(onResolve,onReject)}return n},ZoneAwarePromise.all=function(e){for(var t,r,n=new this(function(e,n){t=e,r=n}),i=0,o=[],s=0,a=e;s<a.length;s++){var c=a[s];isThenable(c)||(c=this.resolve(c)),c.then(function(e){return function(r){o[e]=r,--i||t(o)}}(i),r),i++}return i||t(o),n},ZoneAwarePromise.prototype.then=function(e,r){var n=new this.constructor(null),i=t.current;return this[f]==y?this[m].push(i,n,e,r):scheduleResolveOrReject(this,i,n,e,r),n},ZoneAwarePromise.prototype.catch=function(e){return this.then(null,e)},ZoneAwarePromise}();w.resolve=w.resolve,w.reject=w.reject,w.race=w.race,w.all=w.all;var E,S=e[__symbol__("Promise")]=e.Promise;function patchThen(e){var t=e.prototype,r=t[__symbol__("then")]=t.then;t.then=function(e,t){var n=this;return new w(function(e,t){r.call(n,e,t)}).then(e,t)}}if(e.Promise=w,S&&(patchThen(S),void 0!==e.fetch)){var C=void 0;try{C=e.fetch()}catch(t){C=e.fetch("about:blank")}C.then(function(){return null},function(){return null}),C.constructor!=S&&C.constructor!=w&&patchThen(C.constructor)}Promise[t.__symbol__("uncaughtPromiseErrors")]=d,function(e){e[e.blackList=0]="blackList",e[e.transition=1]="transition"}(E||(E={}));var x,k=e[__symbol__("Error")]=e.Error,R={};e.Error=ZoneAwareError;var T="stackRewrite",O=function(e,t){if(!e[t]){var r=__symbol__(t);e[t]={configurable:!0,enumerable:!0,get:function(){if(!this[r]){var e=this[__symbol__("error")];e&&(this[r]=e[t])}return this[r]},set:function(e){this[r]=e}}}},I=function(e,t){e[t]||(e[t]={configurable:!0,enumerable:!0,writable:!0,value:function(){var e=this[__symbol__("error")],r=e&&e[t]||this[t];if(r)return r.apply(e,arguments)}})},N=function(){for(var e=Object.create(null),t=new k,r=Object.getOwnPropertyNames(t),n=0;n<r.length;n++){var i=r[n];Object.prototype.hasOwnProperty.call(t,i)&&O(e,i)}var o=k.prototype;if(o){var s=Object.getOwnPropertyNames(o);for(n=0;n<s.length;n++)"constructor"!==(i=s[n])&&"toString"!==i&&"toSource"!==i&&O(e,i)}return O(e,"originalStack"),O(e,"zoneAwareStack"),I(e,"toString"),I(e,"toSource"),e}(),A=function(e){if(e===ZoneAwareError.prototype)return N;var t=Object.create(null),r=Object.getOwnPropertyNames(N),n=Object.getOwnPropertyNames(e);return r.forEach(function(e){0===n.filter(function(t){return t===e}).length&&(t[e]=N[e])}),t};function ZoneAwareError(){if(!(this instanceof ZoneAwareError))return ZoneAwareError.apply(Object.create(ZoneAwareError.prototype),arguments);var e=k.apply(this,arguments);if(this[__symbol__("error")]=e,e.originalStack=e.stack,ZoneAwareError[T]&&e.originalStack){for(var t=e.originalStack.split("\n"),r=c,n=0;t[n]!==x&&n<t.length;)n++;for(;n<t.length&&r;n++){var i=t[n];if(i.trim()){var o=R.hasOwnProperty(i)&&R[i];o===E.blackList?(t.splice(n,1),n--):o===E.transition?r.parent?(t[n]+=" ["+r.parent.zone.name+" => "+r.zone.name+"]",r=r.parent):r=null:t[n]+=" ["+r.zone.name+"]"}}e.stack=e.zoneAwareStack=t.join("\n")}return Object.defineProperties(this,A(Object.getPrototypeOf(this))),this}ZoneAwareError.prototype=k.prototype,ZoneAwareError[t.__symbol__("blacklistedStackFrames")]=R,ZoneAwareError[T]=!1,k.hasOwnProperty("stackTraceLimit")&&(k.stackTraceLimit=Math.max(k.stackTraceLimit,15),Object.defineProperty(ZoneAwareError,"stackTraceLimit",{get:function(){return k.stackTraceLimit},set:function(e){return k.stackTraceLimit=e}})),k.hasOwnProperty("captureStackTrace")&&Object.defineProperty(ZoneAwareError,"captureStackTrace",{value:function zoneCaptureStackTrace(e,t){k.captureStackTrace(e,t)}}),Object.defineProperty(ZoneAwareError,"prepareStackTrace",{get:function(){return k.prepareStackTrace},set:function(e){return k.prepareStackTrace=e&&"function"==typeof e?function(t,r){if(r)for(var n=0;n<r.length;n++){if("zoneCaptureStackTrace"===r[n].getFunctionName()){r.splice(n,1);break}}return e.apply(this,[t,r])}:e}});var P=t.current.fork({name:"detect",onInvoke:function(e,t,r,n,i,o,s){return e.invoke(r,n,i,o,s)},onHandleError:function(e,t,r,n){if(n.originalStack&&Error===ZoneAwareError)for(var i=n.originalStack.split(/\n/),o=!1,s=!1,a=!1;i.length;){var c=i.shift();if(/:\d+:\d+/.test(c)){var u=c.split("(")[0].split("@")[0],l=E.transition;if(-1!==u.indexOf("ZoneAwareError")&&(x=c),-1!==u.indexOf("runGuarded")?s=!0:-1!==u.indexOf("runTask")?a=!0:-1!==u.indexOf("run")?o=!0:l=E.blackList,R[c]=l,o&&s&&a){ZoneAwareError[T]=!0;break}}}return!1}});P.runTask(P.scheduleMacroTask("detect",function(){P.run(function(){P.runGuarded(function(){throw new Error("blacklistStackFrames")})})},null,function(){return null},null)),e.Zone=t}("object"==typeof window&&window||"object"==typeof self&&self||global);var e=function(e){return"__zone_symbol__"+e},t="object"==typeof window&&window||"object"==typeof self&&self||global;
/**
 * @license
 * Copyright Google Inc. All Rights Reserved.
 *
 * Use of this source code is governed by an MIT-style license that can be
 * found in the LICENSE file at https://angular.io/license
 */!("nw"in t)&&"undefined"!=typeof process&&{}.toString.call(process);var n=e("eventTasks");function findExistingRegisteredTask(e,t,r,i,o){var s=e[n];if(s)for(var a=0;a<s.length;a++){var c=s[a],u=c.data,l=u.handler;if((u.handler===t||l.listener===t)&&u.useCapturing===i&&u.eventName===r)return o&&s.splice(a,1),c}return null}var i=function(e,r){return{useCapturing:r[2],eventName:r[0],handler:r[1],target:e||t,name:r[0],invokeAddFunc:function(e,t){return t&&t.invoke?this.target[e](this.eventName,t.invoke,this.useCapturing):this.target[e](this.eventName,t,this.useCapturing)},invokeRemoveFunc:function(e,t){return t&&t.invoke?this.target[e](this.eventName,t.invoke,this.useCapturing):this.target[e](this.eventName,t,this.useCapturing)}}};function makeZoneAwareAddListener(t,r,o,s,a,c){void 0===o&&(o=!0),void 0===s&&(s=!1),void 0===a&&(a=!1),void 0===c&&(c=i);var u=e(t),l=e(r),p=!o&&void 0;function scheduleEventListener(e){var t=e.data;return function attachRegisteredEvent(e,t,r){var i=e[n];i||(i=e[n]=[]),r?i.unshift(t):i.push(t)}(t.target,e,a),t.invokeAddFunc(u,e)}function cancelEventListener(e){var t=e.data;return findExistingRegisteredTask(t.target,e.invoke,t.eventName,t.useCapturing,!0),t.invokeRemoveFunc(l,e)}return function zoneAwareAddListener(e,r){var n=c(e,r);n.useCapturing=n.useCapturing||p;var i=null;"function"==typeof n.handler?i=n.handler:n.handler&&n.handler.handleEvent&&(i=function(e){return n.handler.handleEvent(e)});var o=!1;try{o=n.handler&&"[object FunctionWrapper]"===n.handler.toString()}catch(e){return}if(!i||o)return n.invokeAddFunc(u,n.handler);if(!s){var a=findExistingRegisteredTask(n.target,n.handler,n.eventName,n.useCapturing,!1);if(a)return n.invokeAddFunc(u,a)}var l=Zone.current,d=n.target.constructor.name+"."+t+":"+n.eventName;l.scheduleEventTask(d,i,n,scheduleEventListener,cancelEventListener)}}function makeZoneAwareRemoveListener(t,r,n){void 0===r&&(r=!0),void 0===n&&(n=i);var o=e(t),s=!r&&void 0;return function zoneAwareRemoveListener(e,t){var r=n(e,t);r.useCapturing=r.useCapturing||s;var i=findExistingRegisteredTask(r.target,r.handler,r.eventName,r.useCapturing,!0);i?i.zone.cancelTask(i):r.invokeRemoveFunc(o,r.handler)}}function patchMethod(t,r,n){for(var i=t;i&&-1===Object.getOwnPropertyNames(i).indexOf(r);)i=Object.getPrototypeOf(i);!i&&t[r]&&(i=t);var o,s=e(r);return i&&!(o=i[s])&&(o=i[s]=i[r],i[r]=function createNamedFn(e,t){try{return Function("f","return function "+e+"(){return f(this, arguments)}")(t)}catch(e){return function(){return t(this,arguments)}}}(r,n(o,s,r))),o}makeZoneAwareAddListener("addEventListener","removeEventListener"),makeZoneAwareRemoveListener("removeEventListener"),e("originalInstance");
/**
 * @license
 * Copyright Google Inc. All Rights Reserved.
 *
 * Use of this source code is governed by an MIT-style license that can be
 * found in the LICENSE file at https://angular.io/license
 */
var o,s,a=function(e){return function(t,r){return e(t,r),t}},c="addListener",u="prependListener",l="removeListener",p="removeAllListeners",d="listeners",h="on",f=a(makeZoneAwareAddListener(c,l,!1,!0,!1)),m=a(makeZoneAwareAddListener(u,l,!1,!0,!0)),g=a(makeZoneAwareRemoveListener(l,!1)),y=a(function makeZoneAwareRemoveAllListeners(r,i){void 0===i&&(i=!0);var o=e(r),s=!i&&void 0;return function zoneAwareRemoveAllListener(e,r){var i=e||t;if(0===r.length)return i[n]=[],void i[o]();var a=r[0];!function findAllExistingRegisteredTasks(e,t,r,i){var o=e[n];if(o){for(var s=[],a=o.length-1;a>=0;a--){var c=o[a],u=c.data;u.eventName===t&&u.useCapturing===r&&(s.push(c),i&&o.splice(a,1))}return s}return null}(i,a,r[1]||s,!0),i[o](a)}}(p,!1)),v=function makeZoneAwareListeners(r){return e(r),function zoneAwareEventListeners(e,r){var i=r[0],o=e||t;return o[n]?o[n].filter(function(e){return e.data.eventName===i}).map(function(e){return e.data.handler}):[]}}(d);try{o=r(5)}catch(e){}o&&o.EventEmitter&&function patchEventEmitterMethods(e){return!(!e||!e.addListener||(patchMethod(e,c,function(){return f}),patchMethod(e,u,function(){return m}),patchMethod(e,l,function(){return g}),patchMethod(e,p,function(){return y}),patchMethod(e,d,function(){return v}),e[h]=e[c],0))}(o.EventEmitter.prototype)
/**
 * @license
 * Copyright Google Inc. All Rights Reserved.
 *
 * Use of this source code is governed by an MIT-style license that can be
 * found in the LICENSE file at https://angular.io/license
 */;try{s=r(11)}catch(e){}
/**
 * @license
 * Copyright Google Inc. All Rights Reserved.
 *
 * Use of this source code is governed by an MIT-style license that can be
 * found in the LICENSE file at https://angular.io/license
 */
function patchTimer(e,t,r,n){var i=null,o=null;r+=n;var s={};function scheduleTask(t){var r=t.data;return r.args[0]=function(){t.invoke.apply(this,arguments),delete s[r.handleId]},r.handleId=i.apply(e,r.args),s[r.handleId]=t,t}function clearTask(e){return delete s[e.data.handleId],o(e.data.handleId)}i=patchMethod(e,t+=n,function(r){return function(i,o){if("function"==typeof o[0]){var s=Zone.current,a={handleId:null,isPeriodic:"Interval"===n,delay:"Timeout"===n||"Interval"===n?o[1]||0:null,args:o},c=s.scheduleMacroTask(t,o[0],a,scheduleTask,clearTask);if(!c)return c;var u=c.data.handleId;return u.ref&&u.unref&&(c.ref=u.ref.bind(u),c.unref=u.unref.bind(u)),c}return r.apply(e,o)}}),o=patchMethod(e,r,function(t){return function(r,n){var i="number"==typeof n[0]?s[n[0]]:n[0];i&&"string"==typeof i.type?(i.cancelFn&&i.data.isPeriodic||0===i.runCount)&&i.zone.cancelTask(i):t.apply(e,n)}})}
/**
 * @license
 * Copyright Google Inc. All Rights Reserved.
 *
 * Use of this source code is governed by an MIT-style license that can be
 * found in the LICENSE file at https://angular.io/license
 */s&&["access","appendFile","chmod","chown","close","exists","fchmod","fchown","fdatasync","fstat","fsync","ftruncate","futimes","lchmod","lchown","link","lstat","mkdir","mkdtemp","open","read","readdir","readFile","readlink","realpath","rename","rmdir","stat","symlink","truncate","unlink","utimes","write","writeFile"].filter(function(e){return!!s[e]&&"function"==typeof s[e]}).forEach(function(e){!function patchMacroTask(e,t,r){var n=null;function scheduleTask(e){var t=e.data;return t.args[t.callbackIndex]=function(){e.invoke.apply(this,arguments)},n.apply(t.target,t.args),e}n=patchMethod(e,t,function(e){return function(t,n){var i=r(t,n);return i.callbackIndex>=0&&"function"==typeof n[i.callbackIndex]?Zone.current.scheduleMacroTask(i.name,n[i.callbackIndex],i,scheduleTask,null):e.apply(t,n)}})}(s,e,function(t,r){return{name:"fs."+e,args:r,callbackIndex:r.length>0?r.length-1:-1,target:t}})});var b,_,w="set",E="object"==typeof window&&window||"object"==typeof self&&self||global,S=r(271);patchTimer(S,w,"clear","Timeout"),patchTimer(S,w,"clear","Interval"),patchTimer(S,w,"clear","Immediate"),global.setTimeout!==S.setTimeout&&(patchTimer(E,w,"clear","Timeout"),patchTimer(E,w,"clear","Interval"),patchTimer(E,w,"clear","Immediate")),function patchNextTick(){var e=null;function scheduleTask(t){var r=t.data;return r[0]=function(){t.invoke.apply(this,arguments)},e.apply(process,r),t}e=patchMethod(process,"nextTick",function(e){return function(t,r){if("function"==typeof r[0]){var n=Zone.current,i=n.scheduleMicroTask("nextTick",r[0],r,scheduleTask);return i}return e.apply(process,r)}})}();try{b=r(12)}catch(e){}if(b){var C=b.randomBytes;b.randomBytes=function randomBytesZone(e,t){if(t){var r=Zone.current,n=b.constructor.name+".randomBytes";return C(e,r.wrap(t,n))}return C(e)}.bind(b);var x=b.pbkdf2;b.pbkdf2=function pbkdf2Zone(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var r=e[e.length-1];if("function"==typeof r){var n=Zone.current,i=b.constructor.name+".pbkdf2";return e[e.length-1]=n.wrap(r,i),x.apply(void 0,e)}return x.apply(void 0,e)}.bind(b)}try{_=r(553)}catch(e){}if(_&&_.ClientRequest){var k=_.ClientRequest.bind(_);_.ClientRequest=function(e,t){if(t){var r=Zone.current;return new k(e,r.wrap(t,"http.ClientRequest"))}return new k(e)}}})()},function(e,t){e.exports=require("_http_client")},function(e,t){function webpackEmptyContext(e){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}webpackEmptyContext.keys=function(){return[]},webpackEmptyContext.resolve=webpackEmptyContext,e.exports=webpackEmptyContext,webpackEmptyContext.id=554},function(e,t,r){"use strict";var n=r(556),i=r(574),o=r(575);r(276);var s=function(){function AutoCollectConsole(e){if(AutoCollectConsole.INSTANCE)throw new Error("Console logging adapter tracking should be configured from the applicationInsights object");this._client=e,AutoCollectConsole.INSTANCE=this}return AutoCollectConsole.prototype.enable=function(e,t){n.enable(e&&t,this._client),i.enable(e,this._client),o.enable(e,this._client)},AutoCollectConsole.prototype.isInitialized=function(){return this._isInitialized},AutoCollectConsole.prototype.dispose=function(){AutoCollectConsole.INSTANCE=null,this.enable(!1,!1)},AutoCollectConsole._methodNames=["debug","info","log","warn","error"],AutoCollectConsole}();e.exports=s},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(58),i=r(28),o=[],s=function(e){o.forEach(function(t){var r=e.data.message;r.lastIndexOf("\n")==r.length-1&&(r=r.substring(0,r.length-1)),t.trackTrace({message:r,severity:e.data.stderr?n.SeverityLevel.Warning:n.SeverityLevel.Information})})};t.enable=function enable(e,t){e?(0===o.length&&i.channel.subscribe("console",s),o.push(t)):0===(o=o.filter(function(e){return e!=t})).length&&i.channel.unsubscribe("console",s)}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(272),i=function(){function RemoteDependencyDataConstants(){}return RemoteDependencyDataConstants.TYPE_HTTP="Http",RemoteDependencyDataConstants.TYPE_AI="Http (tracked component)",RemoteDependencyDataConstants}();t.RemoteDependencyDataConstants=i,t.domainSupportsProperties=function domainSupportsProperties(e){return"properties"in e||e instanceof n.EventData||e instanceof n.ExceptionData||e instanceof n.MessageData||e instanceof n.MetricData||e instanceof n.PageViewData||e instanceof n.RemoteDependencyData||e instanceof n.RequestData}},function(e,t,r){"use strict";var n,i=this&&this.__extends||(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])},function(e,t){function __(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(__.prototype=t.prototype,new __)}),o=function(e){function AvailabilityData(){var t=e.call(this)||this;return t.ver=2,t.properties={},t.measurements={},t}return i(AvailabilityData,e),AvailabilityData}(r(74));e.exports=o},function(e,t,r){"use strict";var n=function(){return function ContextTagKeys(){this.applicationVersion="ai.application.ver",this.deviceId="ai.device.id",this.deviceLocale="ai.device.locale",this.deviceModel="ai.device.model",this.deviceOEMName="ai.device.oemName",this.deviceOSVersion="ai.device.osVersion",this.deviceType="ai.device.type",this.locationIp="ai.location.ip",this.operationId="ai.operation.id",this.operationName="ai.operation.name",this.operationParentId="ai.operation.parentId",this.operationSyntheticSource="ai.operation.syntheticSource",this.operationCorrelationVector="ai.operation.correlationVector",this.sessionId="ai.session.id",this.sessionIsFirst="ai.session.isFirst",this.userAccountId="ai.user.accountId",this.userId="ai.user.id",this.userAuthUserId="ai.user.authUserId",this.cloudRole="ai.cloud.role",this.cloudRoleInstance="ai.cloud.roleInstance",this.internalSdkVersion="ai.internal.sdkVersion",this.internalAgentVersion="ai.internal.agentVersion",this.internalNodeName="ai.internal.nodeName"}}();e.exports=n},function(e,t,r){"use strict";var n,i=this&&this.__extends||(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])},function(e,t){function __(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(__.prototype=t.prototype,new __)}),o=function(e){function Data(){return e.call(this)||this}return i(Data,e),Data}(r(273));e.exports=o},function(e,t,r){"use strict";var n=r(274),i=function(){return function DataPoint(){this.kind=n.Measurement}}();e.exports=i},function(e,t,r){"use strict";var n=function(){return function Envelope(){this.ver=1,this.sampleRate=100,this.tags={}}}();e.exports=n},function(e,t,r){"use strict";var n,i=this&&this.__extends||(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])},function(e,t){function __(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(__.prototype=t.prototype,new __)}),o=function(e){function ExceptionData(){var t=e.call(this)||this;return t.ver=2,t.exceptions=[],t.properties={},t.measurements={},t}return i(ExceptionData,e),ExceptionData}(r(74));e.exports=o},function(e,t,r){"use strict";var n=function(){return function ExceptionDetails(){this.hasFullStack=!0,this.parsedStack=[]}}();e.exports=n},function(e,t,r){"use strict";var n,i=this&&this.__extends||(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])},function(e,t){function __(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(__.prototype=t.prototype,new __)}),o=function(e){function MessageData(){var t=e.call(this)||this;return t.ver=2,t.properties={},t}return i(MessageData,e),MessageData}(r(74));e.exports=o},function(e,t,r){"use strict";var n,i=this&&this.__extends||(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])},function(e,t){function __(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(__.prototype=t.prototype,new __)}),o=function(e){function MetricData(){var t=e.call(this)||this;return t.ver=2,t.metrics=[],t.properties={},t}return i(MetricData,e),MetricData}(r(74));e.exports=o},function(e,t,r){"use strict";var n,i=this&&this.__extends||(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])},function(e,t){function __(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(__.prototype=t.prototype,new __)}),o=function(e){function PageViewData(){var t=e.call(this)||this;return t.ver=2,t.properties={},t.measurements={},t}return i(PageViewData,e),PageViewData}(r(275));e.exports=o},function(e,t,r){"use strict";var n,i=this&&this.__extends||(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])},function(e,t){function __(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(__.prototype=t.prototype,new __)}),o=function(e){function RemoteDependencyData(){var t=e.call(this)||this;return t.ver=2,t.success=!0,t.properties={},t.measurements={},t}return i(RemoteDependencyData,e),RemoteDependencyData}(r(74));e.exports=o},function(e,t,r){"use strict";var n,i=this&&this.__extends||(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])},function(e,t){function __(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(__.prototype=t.prototype,new __)}),o=function(e){function RequestData(){var t=e.call(this)||this;return t.ver=2,t.properties={},t.measurements={},t}return i(RequestData,e),RequestData}(r(74));e.exports=o},function(e,t,r){"use strict";var n;!function(e){e[e.Verbose=0]="Verbose",e[e.Information=1]="Information",e[e.Warning=2]="Warning",e[e.Error=3]="Error",e[e.Critical=4]="Critical"}(n||(n={})),e.exports=n},function(e,t,r){"use strict";var n=function(){return function StackFrame(){}}();e.exports=n},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),function __export(e){for(var r in e)t.hasOwnProperty(r)||(t[r]=e[r])}(r(573))},function(e,t,r){"use strict";var n;Object.defineProperty(t,"__esModule",{value:!0}),t.telemetryTypeToBaseType=function telemetryTypeToBaseType(e){switch(e){case n.Event:return"EventData";case n.Exception:return"ExceptionData";case n.Trace:return"MessageData";case n.Metric:return"MetricData";case n.Request:return"RequestData";case n.Dependency:return"RemoteDependencyData"}},t.baseTypeToTelemetryType=function baseTypeToTelemetryType(e){switch(e){case"EventData":return n.Event;case"ExceptionData":return n.Exception;case"MessageData":return n.Trace;case"MetricData":return n.Metric;case"RequestData":return n.Request;case"RemoteDependencyData":return n.Dependency}},function(e){e[e.Event=0]="Event",e[e.Exception=1]="Exception",e[e.Trace=2]="Trace",e[e.Metric=3]="Metric",e[e.Request=4]="Request",e[e.Dependency=5]="Dependency"}(n=t.TelemetryType||(t.TelemetryType={}))},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(58),i=r(28),o=[],s={10:n.SeverityLevel.Verbose,20:n.SeverityLevel.Verbose,30:n.SeverityLevel.Information,40:n.SeverityLevel.Warning,50:n.SeverityLevel.Error,60:n.SeverityLevel.Critical},a=function(e){o.forEach(function(t){var r=s[e.data.level];t.trackTrace({message:e.data.result,severity:r})})};t.enable=function enable(e,t){e?(0===o.length&&i.channel.subscribe("bunyan",a),o.push(t)):0===(o=o.filter(function(e){return e!=t})).length&&i.channel.unsubscribe("bunyan",a)}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(58),i=r(28),o=[],s={syslog:function(e){var t={emerg:n.SeverityLevel.Critical,alert:n.SeverityLevel.Critical,crit:n.SeverityLevel.Critical,error:n.SeverityLevel.Error,warning:n.SeverityLevel.Warning,notice:n.SeverityLevel.Information,info:n.SeverityLevel.Information,debug:n.SeverityLevel.Verbose};return void 0===t[e]?n.SeverityLevel.Information:t[e]},npm:function(e){var t={error:n.SeverityLevel.Error,warn:n.SeverityLevel.Warning,info:n.SeverityLevel.Information,verbose:n.SeverityLevel.Verbose,debug:n.SeverityLevel.Verbose,silly:n.SeverityLevel.Verbose};return void 0===t[e]?n.SeverityLevel.Information:t[e]},unknown:function(e){return n.SeverityLevel.Information}},a=function(e){o.forEach(function(t){var r=s[e.data.levelKind](e.data.level);t.trackTrace({message:e.data.message,severity:r,properties:e.data.meta})})};t.enable=function enable(e,t){e?(0===o.length&&i.channel.subscribe("winston",a),o.push(t)):0===(o=o.filter(function(e){return e!=t})).length&&i.channel.unsubscribe("winston",a)}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(577);t.bunyan=n;var i=r(578);t.console=i;var o=r(580);t.mongodbCore=o;var s=r(581);t.mongodb=s;var a=r(582);t.mysql=a;var c=r(585);t.pgPool=c;var u=r(586);t.pg=u;var l=r(587);t.redis=l;var p=r(588);t.winston=p,t.enable=function enable(){n.enable(),i.enable(),o.enable(),s.enable(),a.enable(),u.enable(),c.enable(),l.enable(),p.enable()}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(28);t.bunyan={versionSpecifier:">= 1.0.0 < 2.0.0",patch:function(e){var t=e.prototype._emit;return e.prototype._emit=function(e,r){var i=t.apply(this,arguments);if(!r){var o=i;o||(o=t.call(this,e,!0)),n.channel.publish("bunyan",{level:e.level,result:o})}return i},e}},t.enable=function enable(){n.channel.registerMonkeyPatch("bunyan",t.bunyan)}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(28),i=r(15);t.console={versionSpecifier:">= 4.0.0",patch:function(e){var t=new i.Writable,r=new i.Writable;t.write=function(e){if(!e)return!0;var t=e.toString();return n.channel.publish("console",{message:t}),!0},r.write=function(e){if(!e)return!0;var t=e.toString();return n.channel.publish("console",{message:t,stderr:!0}),!0};for(var o=new e.Console(t,r),s=function(t){var r=e[t];r&&(e[t]=function(){if(o[t])try{o[t].apply(o,arguments)}catch(e){}return r.apply(e,arguments)})},a=0,c=["log","info","warn","error","dir","time","timeEnd","trace","assert"];a<c.length;a++)s(c[a]);return e}},t.enable=function enable(){n.channel.registerMonkeyPatch("console",t.console),r(579)}},function(e,t){e.exports=require("console")},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(28);t.mongoCore2={versionSpecifier:">= 2.0.0 < 2.2.0",patch:function(e){var t=e.Server.prototype.connect;return e.Server.prototype.connect=function contextPreservingConnect(){var e=t.apply(this,arguments),r=this.s.pool.write;this.s.pool.write=function contextPreservingWrite(){var e="function"==typeof arguments[1]?1:2;return"function"==typeof arguments[e]&&(arguments[e]=n.channel.bindToContext(arguments[e])),r.apply(this,arguments)};var i=this.s.pool.logout;return this.s.pool.logout=function contextPreservingLogout(){return"function"==typeof arguments[1]&&(arguments[1]=n.channel.bindToContext(arguments[1])),i.apply(this,arguments)},e},e}},t.enable=function enable(){n.channel.registerMonkeyPatch("mongodb-core",t.mongoCore2)}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(28);t.mongo2={versionSpecifier:">= 2.0.0 <= 2.2.x",patch:function(e){var t=e.instrument({operationIdGenerator:{next:function(){return n.channel.bindToContext(function(e){return e()})}}}),r={};return t.on("started",function(e){r[e.requestId]||(r[e.requestId]=e)}),t.on("succeeded",function(e){var t=r[e.requestId];t&&delete r[e.requestId],e.operationId(function(){return n.channel.publish("mongodb",{startedData:t,event:e,succeeded:!0})})}),t.on("failed",function(e){var t=r[e.requestId];t&&delete r[e.requestId],e.operationId(function(){return n.channel.publish("mongodb",{startedData:t,event:e,succeeded:!1})})}),e}},t.enable=function enable(){n.channel.registerMonkeyPatch("mongodb",t.mongo2)}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(28),i=r(6);t.mysql={versionSpecifier:">= 2.0.0 <= 2.14.x",patch:function(e,t){var o=function(e,t){return function(t,r){var i=e[t];i&&(e[t]=function mysqlContextPreserver(){for(var e=arguments.length-1,t=arguments.length-1;t>=0;--t){if("function"==typeof arguments[t]){e=t;break}if(void 0!==arguments[t])break}var o=arguments[e],s={result:null,startTime:null};"function"==typeof o&&(r?(s.startTime=process.hrtime(),arguments[e]=n.channel.bindToContext(r(s,o))):arguments[e]=n.channel.bindToContext(o));var a=i.apply(this,arguments);return s.result=a,a})}},s=function(e,t){return o(e.prototype)},a=r(583)(i.dirname(t)+"/lib/Connection");["connect","changeUser","ping","statistics","end"].forEach(function(e){return s(a)(e)}),o(a)("createQuery",function(e,t){return function(r){var i=process.hrtime(e.startTime),o=1e3*i[0]+i[1]/1e6|0;n.channel.publish("mysql",{query:e.result,callbackArgs:arguments,err:r,duration:o}),t.apply(this,arguments)}});var c=r(584)(i.dirname(t)+"/lib/Pool");return["_enqueueCallback"].forEach(function(e){return s(c)(e)}),e}},t.enable=function enable(){n.channel.registerMonkeyPatch("mysql",t.mysql)}},function(e,t){function webpackEmptyContext(e){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}webpackEmptyContext.keys=function(){return[]},webpackEmptyContext.resolve=webpackEmptyContext,e.exports=webpackEmptyContext,webpackEmptyContext.id=583},function(e,t){function webpackEmptyContext(e){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}webpackEmptyContext.keys=function(){return[]},webpackEmptyContext.resolve=webpackEmptyContext,e.exports=webpackEmptyContext,webpackEmptyContext.id=584},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(28);t.postgresPool1={versionSpecifier:"1.x",patch:function postgresPool1PatchFunction(e){var t=e.prototype.connect;return e.prototype.connect=function connect(e){e&&(arguments[0]=n.channel.bindToContext(e)),t.apply(this,arguments)},e}},t.enable=function enable(){n.channel.registerMonkeyPatch("pg-pool",t.postgresPool1)}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(28),i=r(5);t.postgres6={versionSpecifier:"6.x",patch:function postgres6PatchFunction(e,t){var r=e.Client.prototype.query,o="__diagnosticOriginalFunc";return e.Client.prototype.query=function query(e,t,s){var a,c={query:{},database:{host:this.connectionParameters.host,port:this.connectionParameters.port},result:null,error:null,duration:0},u=process.hrtime();function patchCallback(e){e&&e[o]&&(e=e[o]);var t=n.channel.bindToContext(function(t,r){var o=process.hrtime(u);if(c.result=r&&{rowCount:r.rowCount,command:r.command},c.error=t,c.duration=Math.ceil(1e3*o[0]+o[1]/1e6),n.channel.publish("postgres",c),t){if(e)return e.apply(this,arguments);a&&a instanceof i.EventEmitter&&a.emit("error",t)}else e&&e.apply(this,arguments)});try{return Object.defineProperty(t,o,{value:e}),t}catch(t){return e}}try{"string"==typeof e?t instanceof Array?(c.query.preparable={text:e,args:t},s=patchCallback(s)):(c.query.text=e,s?s=patchCallback(s):t=patchCallback(t)):("string"==typeof e.name?c.query.plan=e.name:e.values instanceof Array?c.query.preparable={text:e.text,args:e.values}:c.query.text=e.text,s?s=patchCallback(s):t?t=patchCallback(t):e.callback=patchCallback(e.callback))}catch(e){return r.apply(this,arguments)}return arguments[0]=e,arguments[1]=t,arguments[2]=s,arguments.length=arguments.length>3?arguments.length:3,a=r.apply(this,arguments)},e}},t.enable=function enable(){n.channel.registerMonkeyPatch("pg",t.postgres6)}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(28);t.redis={versionSpecifier:">= 2.0.0 < 3.0.0",patch:function(e){var t=e.RedisClient.prototype.internal_send_command;return e.RedisClient.prototype.internal_send_command=function(e){if(e){var r=e.callback;if(!r||!r.pubsubBound){var i=this.address,o=process.hrtime();e.callback=n.channel.bindToContext(function(t,s){var a=process.hrtime(o),c=1e3*a[0]+a[1]/1e6|0;n.channel.publish("redis",{duration:c,address:i,commandObj:e,err:t,result:s}),"function"==typeof r&&r.apply(this,arguments)}),e.callback.pubsubBound=!0}}return t.call(this,e)},e}},t.enable=function enable(){n.channel.registerMonkeyPatch("redis",t.redis)}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(28);t.winston={versionSpecifier:"2.x",patch:function(e){var t,r=e.Logger.prototype.log,i=function(r,i,o){var s;return s=t===e.config.npm.levels?"npm":t===e.config.syslog.levels?"syslog":"unknown",n.channel.publish("winston",{level:r,message:i,meta:o,levelKind:s}),i};return e.Logger.prototype.log=function log(){return t=this.levels,this.filters&&0!==this.filters.length?this.filters[this.filters.length-1]!==i&&(this.filters=this.filters.filter(function(e){return e!==i}),this.filters.push(i)):this.filters=[i],r.apply(this,arguments)},e}},t.enable=function enable(){n.channel.registerMonkeyPatch("winston",t.winston)}},function(e,t,r){"use strict";var n=function(){function AutoCollectExceptions(e){if(AutoCollectExceptions.INSTANCE)throw new Error("Exception tracking should be configured from the applicationInsights object");AutoCollectExceptions.INSTANCE=this,this._client=e}return Object.defineProperty(AutoCollectExceptions,"UNCAUGHT_EXCEPTION_HANDLER_NAME",{get:function(){return"uncaughtException"},enumerable:!0,configurable:!0}),Object.defineProperty(AutoCollectExceptions,"UNHANDLED_REJECTION_HANDLER_NAME",{get:function(){return"unhandledRejection"},enumerable:!0,configurable:!0}),AutoCollectExceptions.prototype.isInitialized=function(){return this._isInitialized},AutoCollectExceptions.prototype.enable=function(e){var t=this;if(e){this._isInitialized=!0;if(!this._exceptionListenerHandle){var r=function(e,r){if(t._client.trackException({exception:r}),t._client.flush({isAppCrashing:!0}),e)throw r};this._exceptionListenerHandle=r.bind(this,!0),this._rejectionListenerHandle=r.bind(this,!1),process.on(AutoCollectExceptions.UNCAUGHT_EXCEPTION_HANDLER_NAME,this._exceptionListenerHandle),process.on(AutoCollectExceptions.UNHANDLED_REJECTION_HANDLER_NAME,this._rejectionListenerHandle)}}else this._exceptionListenerHandle&&(process.removeListener(AutoCollectExceptions.UNCAUGHT_EXCEPTION_HANDLER_NAME,this._exceptionListenerHandle),process.removeListener(AutoCollectExceptions.UNHANDLED_REJECTION_HANDLER_NAME,this._rejectionListenerHandle),this._exceptionListenerHandle=void 0,this._rejectionListenerHandle=void 0,delete this._exceptionListenerHandle,delete this._rejectionListenerHandle)},AutoCollectExceptions.prototype.dispose=function(){AutoCollectExceptions.INSTANCE=null,this.enable(!1),this._isInitialized=!1},AutoCollectExceptions.INSTANCE=null,AutoCollectExceptions}();e.exports=n},function(e,t,r){"use strict";var n,i=this&&this.__extends||(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])},function(e,t){function __(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(__.prototype=t.prototype,new __)}),o=r(7),s=r(58),a=r(83),c=r(111),u=r(278),l=r(180),p=function(e){function HttpDependencyParser(t,r){var n=e.call(this)||this;return r&&r.method&&t&&(n.method=r.method,n.url=HttpDependencyParser._getUrlFromRequestOptions(t,r),n.startTime=+new Date),n}return i(HttpDependencyParser,e),HttpDependencyParser.prototype.onError=function(e,t){this._setStatus(void 0,e,t)},HttpDependencyParser.prototype.onResponse=function(e,t){this._setStatus(e.statusCode,void 0,t),this.correlationId=a.getCorrelationContextTarget(e,c.requestContextTargetKey),this.targetRoleName=a.getCorrelationContextTarget(e,c.requestContextTargetRoleNameKey)},HttpDependencyParser.prototype.getDependencyTelemetry=function(e){var t=o.parse(this.url);t.search=void 0,t.hash=void 0;var r=this.method.toUpperCase()+" "+t.pathname,n=s.RemoteDependencyDataConstants.TYPE_HTTP,i=t.hostname;return this.correlationId?(n=s.RemoteDependencyDataConstants.TYPE_AI,this.correlationId!==l.correlationIdPrefix&&(i=t.hostname+" | "+this.correlationId+" | roleName:"+this.targetRoleName)):n=s.RemoteDependencyDataConstants.TYPE_HTTP,{id:e,name:r,data:this.url,duration:this.duration,success:this._isSuccess(),resultCode:this.statusCode?this.statusCode.toString():null,properties:this.properties||{},dependencyTypeName:n,target:i}},HttpDependencyParser._getUrlFromRequestOptions=function(e,t){if("string"==typeof e)e=o.parse(e);else{var r=e;e={},r&&Object.keys(r).forEach(function(t){e[t]=r[t]})}if(e.path){var n=o.parse(e.path);e.pathname=n.pathname,e.search=n.search}e.host&&e.port&&(!o.parse("http://"+e.host).port&&e.port&&(e.hostname=e.host,delete e.host));return e.protocol=e.protocol||t.agent.protocol,e.hostname=e.hostname||"localhost",o.format(e)},HttpDependencyParser}(u);e.exports=p},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(28),i=[];t.subscriber=function(e){i.forEach(function(t){var r=e.data.startedData&&e.data.startedData.databaseName||"Unknown database";t.trackDependency({target:r,data:e.data.event.commandName,name:e.data.event.commandName,duration:e.data.event.duration,success:e.data.succeeded,resultCode:e.data.succeeded?"0":"1",dependencyTypeName:"mongodb"})})},t.enable=function enable(e,r){e?(0===i.length&&n.channel.subscribe("mongodb",t.subscriber),i.push(r)):0===(i=i.filter(function(e){return e!=r})).length&&n.channel.unsubscribe("mongodb",t.subscriber)}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(28),i=[];t.subscriber=function(e){i.forEach(function(t){var r=e.data.query||{},n=r.sql||"Unknown query",i=!e.data.err,o=(r._connection||{}).config||{},s=o.socketPath?o.socketPath:(o.host||"localhost")+":"+o.port;t.trackDependency({target:s,data:n,name:n,duration:e.data.duration,success:i,resultCode:i?"0":"1",dependencyTypeName:"mysql"})})},t.enable=function enable(e,r){e?(0===i.length&&n.channel.subscribe("mysql",t.subscriber),i.push(r)):0===(i=i.filter(function(e){return e!=r})).length&&n.channel.unsubscribe("mysql",t.subscriber)}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(28),i=[];t.subscriber=function(e){i.forEach(function(t){"info"!==e.data.commandObj.command&&t.trackDependency({target:e.data.address,name:e.data.commandObj.command,data:e.data.commandObj.command,duration:e.data.duration,success:!e.data.err,resultCode:e.data.err?"1":"0",dependencyTypeName:"redis"})})},t.enable=function enable(e,r){e?(0===i.length&&n.channel.subscribe("redis",t.subscriber),i.push(r)):0===(i=i.filter(function(e){return e!=r})).length&&n.channel.unsubscribe("redis",t.subscriber)}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(28),i=[];t.subscriber=function(e){i.forEach(function(t){var r=e.data.query,n=r.preparable&&r.preparable.text||r.plan||r.text||"unknown query",i=!e.data.error,o=e.data.database.host+":"+e.data.database.port;t.trackDependency({target:o,data:n,name:n,duration:e.data.duration,success:i,resultCode:i?"0":"1",dependencyTypeName:"postgres"})})},t.enable=function enable(e,r){e?(0===i.length&&n.channel.subscribe("postgres",t.subscriber),i.push(r)):0===(i=i.filter(function(e){return e!=r})).length&&n.channel.unsubscribe("postgres",t.subscriber)}},function(e,t,r){"use strict";var n,i=this&&this.__extends||(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])},function(e,t){function __(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(__.prototype=t.prototype,new __)}),o=r(7),s=r(58),a=r(83),c=r(111),u=r(278),l=r(180),p=function(e){function HttpRequestParser(t,r){var n=e.call(this)||this;return t&&(n.method=t.method,n.url=n._getAbsoluteUrl(t),n.startTime=+new Date,n.socketRemoteAddress=t.socket&&t.socket.remoteAddress,n.parseHeaders(t,r),t.connection&&(n.connectionRemoteAddress=t.connection.remoteAddress,n.legacySocketRemoteAddress=t.connection.socket&&t.connection.socket.remoteAddress)),n}return i(HttpRequestParser,e),HttpRequestParser.prototype.onError=function(e,t,r){this._setStatus(void 0,e,t)},HttpRequestParser.prototype.onResponse=function(e,t,r){this._setStatus(e.statusCode,void 0,t),r&&(this.duration=r)},HttpRequestParser.prototype.getRequestTelemetry=function(){return{id:this.requestId,name:this.method+" "+o.parse(this.url).pathname,url:this.url,source:this.sourceCorrelationId+" | roleName:"+this.sourceRoleName,duration:this.duration,resultCode:this.statusCode?this.statusCode.toString():null,success:this._isSuccess(),properties:this.properties}},HttpRequestParser.prototype.getRequestTags=function(e){var t={};for(var r in e)t[r]=e[r];return t[HttpRequestParser.keys.locationIp]=e[HttpRequestParser.keys.locationIp]||this._getIp(),t[HttpRequestParser.keys.sessionId]=e[HttpRequestParser.keys.sessionId]||this._getId("ai_session"),t[HttpRequestParser.keys.userId]=e[HttpRequestParser.keys.userId]||this._getId("ai_user"),t[HttpRequestParser.keys.operationName]=this.getOperationName(e),t[HttpRequestParser.keys.operationParentId]=this.getOperationParentId(e),t[HttpRequestParser.keys.operationId]=this.getOperationId(e),t},HttpRequestParser.prototype.getOperationId=function(e){return e[HttpRequestParser.keys.operationId]||this.operationId},HttpRequestParser.prototype.getOperationParentId=function(e){return e[HttpRequestParser.keys.operationParentId]||this.parentId||this.getOperationId(e)},HttpRequestParser.prototype.getOperationName=function(e){return e[HttpRequestParser.keys.operationName]||this.method+" "+o.parse(this.url).pathname},HttpRequestParser.prototype.getRequestId=function(){return this.requestId},HttpRequestParser.prototype.getCorrelationContextHeader=function(){return this.correlationContextHeader},HttpRequestParser.prototype._getAbsoluteUrl=function(e){if(!e.headers)return e.url;var t=e.connection?e.connection.encrypted:null,r=o.parse(e.url),n=r.pathname,i=r.search;return o.format({protocol:t?"https":"http",host:e.headers.host,pathname:n,search:i})},HttpRequestParser.prototype._getIp=function(){var e=/[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}/,t=function(t){var r=e.exec(t);if(r)return r[0]},r=t(this.rawHeaders["x-forwarded-for"])||t(this.rawHeaders["x-client-ip"])||t(this.rawHeaders["x-real-ip"])||t(this.connectionRemoteAddress)||t(this.socketRemoteAddress)||t(this.legacySocketRemoteAddress);return!r&&this.connectionRemoteAddress&&this.connectionRemoteAddress.substr&&"::"===this.connectionRemoteAddress.substr(0,2)&&(r="127.0.0.1"),r},HttpRequestParser.prototype._getId=function(e){var t=this.rawHeaders&&this.rawHeaders.cookie&&"string"==typeof this.rawHeaders.cookie&&this.rawHeaders.cookie||"";return HttpRequestParser.parseId(a.getCookie(e,t))},HttpRequestParser.prototype.parseHeaders=function(e,t){if(this.rawHeaders=e.headers||e.rawHeaders,this.userAgent=e.headers&&e.headers["user-agent"],this.sourceCorrelationId=a.getCorrelationContextTarget(e,c.requestContextSourceKey),this.sourceRoleName=a.getCorrelationContextTarget(e,c.requestContextSourceRoleNameKey),e.headers){if(this.correlationContextHeader=e.headers[c.correlationContextHeader],e.headers[c.requestIdHeader])this.parentId=e.headers[c.requestIdHeader],this.requestId=l.generateRequestId(this.parentId),this.correlationContextHeader=e.headers[c.correlationContextHeader];else{var r=e.headers[c.rootIdHeader];this.parentId=e.headers[c.parentIdHeader],this.requestId=l.generateRequestId(r||this.parentId),this.correlationContextHeader=null}t&&(this.requestId=t),this.operationId=l.getRootId(this.requestId)}},HttpRequestParser.parseId=function(e){return e.substr(0,e.indexOf("|"))},HttpRequestParser.keys=new s.ContextTagKeys,HttpRequestParser}(u);e.exports=p},function(e,t,r){"use strict";var n,i=this&&this.__extends||(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])},function(e,t){function __(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(__.prototype=t.prototype,new __)}),o=r(597),s=r(279),a=r(179),c=r(50),u=function(e){function NodeClient(){return null!==e&&e.apply(this,arguments)||this}return i(NodeClient,e),NodeClient.prototype.trackNodeHttpRequestSync=function(e){e&&e.request&&e.response&&e.duration?s.trackRequestSync(this,e.request,e.response,e.duration,e.properties,e.error):c.warn("trackNodeHttpRequestSync requires NodeHttpRequestTelemetry object with request, response and duration specified.")},NodeClient.prototype.trackNodeHttpRequest=function(e){e&&e.request&&e.response?s.trackRequest(this,e.request,e.response,e.properties):c.warn("trackNodeHttpRequest requires NodeHttpRequestTelemetry object with request and response specified.")},NodeClient.prototype.trackNodeHttpDependency=function(e){e&&e.request?a.trackRequest(this,e.options,e.request,e.properties):c.warn("trackNodeHttpDependency requires NodeHttpDependencyTelemetry object with request specified.")},NodeClient}(o);e.exports=u},function(e,t,r){"use strict";var n=r(7),i=r(598),o=r(599),s=r(58),a=r(602),c=r(603),u=r(110),l=r(605),p=r(83),d=r(50),h=r(606),f=function(){function TelemetryClient(e){this._telemetryProcessors=[];var t=new i(e);this.config=t,this.context=new o,this.commonProperties={};var r=new l(this.config);this.channel=new a(function(){return t.disableAppInsights},function(){return t.maxBatchSize},function(){return t.maxBatchIntervalMs},r)}return TelemetryClient.prototype.trackTrace=function(e){this.track(e,s.TelemetryType.Trace)},TelemetryClient.prototype.trackMetric=function(e){this.track(e,s.TelemetryType.Metric)},TelemetryClient.prototype.trackException=function(e){e&&e.exception&&!p.isError(e.exception)&&(e.exception=new Error(e.exception.toString())),this.track(e,s.TelemetryType.Exception)},TelemetryClient.prototype.trackEvent=function(e){this.track(e,s.TelemetryType.Event)},TelemetryClient.prototype.trackRequest=function(e){this.track(e,s.TelemetryType.Request)},TelemetryClient.prototype.trackDependency=function(e){e&&!e.target&&e.data&&(e.target=n.parse(e.data).host),this.track(e,s.TelemetryType.Dependency)},TelemetryClient.prototype.flush=function(e){this.channel.triggerSend(!!e&&!!e.isAppCrashing,e?e.callback:void 0)},TelemetryClient.prototype.track=function(e,t){if(e&&s.telemetryTypeToBaseType(t)){var r=h.createEnvelope(e,t,this.commonProperties,this.context,this.config);e.time&&(r.time=e.time.toISOString());var n=this.runTelemetryProcessors(r,e.contextObjects);(n=n&&c.samplingTelemetryProcessor(r,{correlationContext:u.CorrelationContextManager.getCurrentContext()}))&&this.channel.send(r)}else d.warn("track() requires telemetry object and telemetryType to be specified.")},TelemetryClient.prototype.addTelemetryProcessor=function(e){this._telemetryProcessors.push(e)},TelemetryClient.prototype.clearTelemetryProcessors=function(){this._telemetryProcessors=[]},TelemetryClient.prototype.runTelemetryProcessors=function(e,t){var r=!0,n=this._telemetryProcessors.length;if(0===n)return r;(t=t||{}).correlationContext=u.CorrelationContextManager.getCurrentContext();for(var i=0;i<n;++i)try{var o=this._telemetryProcessors[i];if(o&&!1===o.apply(null,[e,t])){r=!1;break}}catch(t){r=!0,d.warn("One of telemetry processors failed, telemetry item will be sent.",t,e)}return r},TelemetryClient}();e.exports=f},function(e,t,r){"use strict";var n=r(180),i=function(){function Config(e){var t=this;this.endpointBase="https://dc.services.visualstudio.com",this.instrumentationKey=e||Config._getInstrumentationKey(),this.endpointUrl=this.endpointBase+"/v2/track",this.maxBatchSize=250,this.maxBatchIntervalMs=15e3,this.disableAppInsights=!1,this.samplingPercentage=100,this.correlationIdRetryIntervalMs=3e4,this.correlationHeaderExcludedDomains=["*.blob.core.windows.net","*.blob.core.chinacloudapi.cn","*.blob.core.cloudapi.de","*.blob.core.usgovcloudapi.net"],this.setCorrelationId=function(e){return t.correlationId=e},this.profileQueryEndpoint=process.env[Config.ENV_profileQueryEndpoint]||this.endpointBase}return Object.defineProperty(Config.prototype,"profileQueryEndpoint",{get:function(){return this._profileQueryEndpoint},set:function(e){n.cancelCorrelationIdQuery(this._profileQueryEndpoint,this.instrumentationKey,this.setCorrelationId),this._profileQueryEndpoint=e,this.correlationId=n.correlationIdPrefix,n.queryCorrelationId(this._profileQueryEndpoint,this.instrumentationKey,this.correlationIdRetryIntervalMs,this.setCorrelationId)},enumerable:!0,configurable:!0}),Config._getInstrumentationKey=function(){var e=process.env[Config.ENV_iKey]||process.env[Config.ENV_azurePrefix+Config.ENV_iKey]||process.env[Config.legacy_ENV_iKey]||process.env[Config.ENV_azurePrefix+Config.legacy_ENV_iKey];if(!e||""==e)throw new Error("Instrumentation key not found, pass the key in the config to this method or set the key in the environment variable APPINSIGHTS_INSTRUMENTATIONKEY before starting the server");return e},Config.ENV_azurePrefix="APPSETTING_",Config.ENV_iKey="APPINSIGHTS_INSTRUMENTATIONKEY",Config.legacy_ENV_iKey="APPINSIGHTS_INSTRUMENTATION_KEY",Config.ENV_profileQueryEndpoint="APPINSIGHTS_PROFILE_QUERY_ENDPOINT",Config}();e.exports=i},function(e,t,r){"use strict";var n=r(17),i=r(58),o=r(50),s=function(){function Context(e){this.keys=new i.ContextTagKeys,this.tags={},this._loadApplicationContext(),this._loadDeviceContext(),this._loadInternalContext()}return Context.prototype._loadApplicationContext=function(e){var t="unknown";try{var n=r(600)(e||"../../../../package.json");n&&("string"==typeof n.version&&(t=n.version),"string"==typeof n.description&&n.description)}catch(e){o.info("unable to read app version: ",e)}this.tags[this.keys.applicationVersion]=t},Context.prototype._loadDeviceContext=function(){this.tags[this.keys.deviceId]="",this.tags[this.keys.cloudRoleInstance]=n&&n.hostname(),this.tags[this.keys.deviceOSVersion]=n&&n.type()+" "+n.release(),this.tags[this.keys.cloudRole]=Context.DefaultRoleName,this.tags["ai.device.osArchitecture"]=n&&n.arch(),this.tags["ai.device.osPlatform"]=n&&n.platform()},Context.prototype._loadInternalContext=function(){var e="unknown";try{var t=r(601);t&&"string"==typeof t.version&&(e=t.version)}catch(e){o.info("unable to read SDK version: "+e)}this.tags[this.keys.internalSdkVersion]="node:"+e||!1},Context.DefaultRoleName="Web",Context}();e.exports=s},function(e,t){function webpackEmptyContext(e){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}webpackEmptyContext.keys=function(){return[]},webpackEmptyContext.resolve=webpackEmptyContext,e.exports=webpackEmptyContext,webpackEmptyContext.id=600},function(e){e.exports={_args:[["applicationinsights@1.0.1","/home/travis/build/microsoft/vscode-azure-iot-toolkit"]],_from:"applicationinsights@1.0.1",_id:"applicationinsights@1.0.1",_inBundle:!1,_integrity:"sha1-U0Rrgw/o1dYZ7uKieLMdPSUDCSc=",_location:"/applicationinsights",_phantomChildren:{},_requested:{type:"version",registry:!0,raw:"applicationinsights@1.0.1",name:"applicationinsights",escapedName:"applicationinsights",rawSpec:"1.0.1",saveSpec:null,fetchSpec:"1.0.1"},_requiredBy:["/vscode-extension-telemetry"],_resolved:"https://registry.npmjs.org/applicationinsights/-/applicationinsights-1.0.1.tgz",_spec:"1.0.1",_where:"/home/travis/build/microsoft/vscode-azure-iot-toolkit",bugs:{url:"https://github.com/Microsoft/ApplicationInsights-node.js/issues"},contributors:[{name:"Application Insights Developer Support",email:"aidevsupport@microsoft.com"},{name:"Application Insights SDK Maintainers",email:"appinsightssdk@microsoft.com"}],dependencies:{"diagnostic-channel":"0.2.0","diagnostic-channel-publishers":"0.2.1","zone.js":"0.7.6"},description:"Microsoft Application Insights module for Node.js",devDependencies:{"@types/mocha":"2.2.40","@types/node":"4.2.4","@types/sinon":"2.1.2",mocha:"3.1.2","node-mocks-http":"1.2.3",sinon:"1.17.6",typescript:"2.4.2"},homepage:"https://github.com/Microsoft/ApplicationInsights-node.js#readme",keywords:["exception monitoring","request monitoring","performance monitoring","application insights","microsoft","azure","tracing","telemetry","analytics","apm"],license:"MIT",main:"./out/applicationinsights.js",name:"applicationinsights",repository:{type:"git",url:"git+https://github.com/Microsoft/ApplicationInsights-node.js.git"},scripts:{backcompattest:"npm run build && npm pack && node --use_strict ./Tests/BackCompatibility/RunBackCompatTests.js",build:"npm run build:deps && npm run build:compile","build:compile":"tsc --project ./tsconfig.json","build:deps":"npm update --dev",clean:"rm -rf ./out && rm -rf ./node_modules",functionaltest:"npm run build && npm pack && node --use_strict ./Tests/FunctionalTests/RunFunctionalTests.js",prepare:"npm run build:compile",prepublishOnly:"npm run build",pretest:"npm run build",test:"npm run test:ts && npm run test:js","test:js":"mocha ./Tests/js --recursive","test:ts":"mocha ./out/Tests --recursive"},types:"./out/applicationinsights.d.ts",version:"1.0.1"}},function(e,t,r){"use strict";var n=r(50),i=function(){function Channel(e,t,r,n){this._buffer=[],this._lastSend=0,this._isDisabled=e,this._getBatchSize=t,this._getBatchIntervalMs=r,this._sender=n}return Channel.prototype.setUseDiskRetryCaching=function(e,t){this._sender.setDiskRetryMode(e,t)},Channel.prototype.send=function(e){var t=this;if(!this._isDisabled())if(e){var r=this._stringify(e);"string"==typeof r&&(this._buffer.push(r),this._buffer.length>=this._getBatchSize()?this.triggerSend(!1):!this._timeoutHandle&&this._buffer.length>0&&(this._timeoutHandle=setTimeout(function(){t._timeoutHandle=null,t.triggerSend(!1)},this._getBatchIntervalMs())))}else n.warn("Cannot send null/undefined telemetry")},Channel.prototype.triggerSend=function(e,t){var r=this._buffer.length<1;if(!r){var n=this._buffer.join("\n");e?(this._sender.saveOnCrash(n),"function"==typeof t&&t("data saved on crash")):this._sender.send(new Buffer(n),t)}this._lastSend=+new Date,this._buffer.length=0,clearTimeout(this._timeoutHandle),this._timeoutHandle=null,r&&"function"==typeof t&&t("no data to send")},Channel.prototype._stringify=function(e){try{return JSON.stringify(e)}catch(t){n.warn("Failed to serialize payload",t,e)}},Channel}();e.exports=i},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),function __export(e){for(var r in e)t.hasOwnProperty(r)||(t[r]=e[r])}(r(604))},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(58);function getSamplingHashCode(e){var t=5381;if(!e)return 0;for(;e.length<8;)e+=e;for(var r=0;r<e.length;r++)t=((t<<5)+t|0)+e.charCodeAt(r)|0;return(t=t<=-2147483648?2147483647:Math.abs(t))/2147483647*100}t.samplingTelemetryProcessor=function samplingTelemetryProcessor(e,t){var r=e.sampleRate;return null==r||r>=100||!(!e.data||n.TelemetryType.Metric!==n.baseTypeToTelemetryType(e.data.baseType))||(t.correlationContext&&t.correlationContext.operation?getSamplingHashCode(t.correlationContext.operation.id)<r:100*Math.random()<r)},t.getSamplingHashCode=getSamplingHashCode},function(e,t,r){"use strict";var n=r(11),i=r(23),o=r(21),s=r(17),a=r(6),c=r(7),u=r(112),l=r(50),p=r(179),d=function(){function Sender(e,t,r){this._config=e,this._onSuccess=t,this._onError=r,this._enableDiskRetryMode=!1,this._resendInterval=Sender.WAIT_BETWEEN_RESEND}return Sender.prototype.setDiskRetryMode=function(e,t){this._enableDiskRetryMode=e,"number"==typeof t&&t>=0&&(this._resendInterval=Math.floor(t))},Sender.prototype.send=function(e,t){var r=this,n=this._config.endpointUrl;n&&0===n.indexOf("//")&&(n="https:"+n);var s=c.parse(n),a={host:s.hostname,port:s.port,path:s.pathname,method:"POST",withCredentials:!1,headers:{"Content-Type":"application/x-json-stream"}};u.gzip(e,function(n,c){var u=c;n?(l.warn(n),u=e,a.headers["Content-Length"]=e.length.toString()):(a.headers["Content-Encoding"]="gzip",a.headers["Content-Length"]=c.length),l.info(Sender.TAG,a),a[p.disableCollectionRequestOption]=!0;var d=function(n){n.setEncoding("utf-8");var i="";n.on("data",function(e){i+=e}),n.on("end",function(){l.info(Sender.TAG,i),"function"==typeof r._onSuccess&&r._onSuccess(i),"function"==typeof t&&t(i),r._enableDiskRetryMode&&(200===n.statusCode?setTimeout(function(){return r._sendFirstFileOnDisk()},r._resendInterval):408!==n.statusCode&&429!==n.statusCode&&439!==n.statusCode&&500!==n.statusCode&&503!==n.statusCode||r._storeToDisk(e))})},h="https:"==s.protocol?o.request(a,d):i.request(a,d);h.on("error",function(n){if(l.warn(Sender.TAG,n),r._onErrorHelper(n),"function"==typeof t){var i="error sending telemetry";n&&"function"==typeof n.toString&&(i=n.toString()),t(i)}r._enableDiskRetryMode&&r._storeToDisk(e)}),h.write(u),h.end()})},Sender.prototype.saveOnCrash=function(e){this._enableDiskRetryMode&&this._storeToDiskSync(e)},Sender.prototype._confirmDirExists=function(e,t){n.exists(e,function(r){r?t(null):n.mkdir(e,function(e){t(e)})})},Sender.prototype._storeToDisk=function(e){var t=this,r=a.join(s.tmpdir(),Sender.TEMPDIR_PREFIX+this._config.instrumentationKey);this._confirmDirExists(r,function(i){if(i)t._onErrorHelper(i);else{var o=(new Date).getTime()+".ai.json",s=a.join(r,o);l.info(Sender.TAG,"saving data to disk at: "+s),n.writeFile(s,e,function(e){return t._onErrorHelper(e)})}})},Sender.prototype._storeToDiskSync=function(e){var t=a.join(s.tmpdir(),Sender.TEMPDIR_PREFIX+this._config.instrumentationKey);try{n.existsSync(t)||n.mkdirSync(t);var r=(new Date).getTime()+".ai.json",i=a.join(t,r);l.info(Sender.TAG,"saving data before crash to disk at: "+i),n.writeFileSync(i,e)}catch(e){this._onErrorHelper(e)}},Sender.prototype._sendFirstFileOnDisk=function(){var e=this,t=a.join(s.tmpdir(),Sender.TEMPDIR_PREFIX+this._config.instrumentationKey);n.exists(t,function(r){r&&n.readdir(t,function(r,i){if(r)e._onErrorHelper(r);else if((i=i.filter(function(e){return a.basename(e).indexOf(".ai.json")>-1})).length>0){var o=i[0],s=a.join(t,o);n.readFile(s,function(t,r){t?e._onErrorHelper(t):n.unlink(s,function(t){t?e._onErrorHelper(t):e.send(r)})})}})})},Sender.prototype._onErrorHelper=function(e){"function"==typeof this._onError&&this._onError(e)},Sender.TAG="Sender",Sender.WAIT_BETWEEN_RESEND=6e4,Sender.TEMPDIR_PREFIX="appInsights-node",Sender}();e.exports=d},function(e,t,r){"use strict";var n=r(58),i=r(83),o=r(110),s=function(){function EnvelopeFactory(){}return EnvelopeFactory.createEnvelope=function(e,t,r,o,s){var a=null;switch(t){case n.TelemetryType.Trace:a=EnvelopeFactory.createTraceData(e);break;case n.TelemetryType.Dependency:a=EnvelopeFactory.createDependencyData(e);break;case n.TelemetryType.Event:a=EnvelopeFactory.createEventData(e);break;case n.TelemetryType.Exception:a=EnvelopeFactory.createExceptionData(e);break;case n.TelemetryType.Request:a=EnvelopeFactory.createRequestData(e);break;case n.TelemetryType.Metric:a=EnvelopeFactory.createMetricData(e)}if(r&&n.domainSupportsProperties(a.baseData)){if(a&&a.baseData)if(a.baseData.properties)for(var c in r)a.baseData.properties[c]||(a.baseData.properties[c]=r[c]);else a.baseData.properties=r;a.baseData.properties=i.validateStringMap(a.baseData.properties)}var u=s&&s.instrumentationKey||"",l=new n.Envelope;return l.data=a,l.iKey=u,l.name="Microsoft.ApplicationInsights."+u.replace(/-/g,"")+"."+a.baseType.substr(0,a.baseType.length-4),l.tags=this.getTags(o,e.tagOverrides),l.time=(new Date).toISOString(),l.ver=1,l.sampleRate=s?s.samplingPercentage:100,t===n.TelemetryType.Metric&&(l.sampleRate=100),l},EnvelopeFactory.createTraceData=function(e){var t=new n.MessageData;t.message=e.message,t.properties=e.properties,isNaN(e.severity)?t.severityLevel=n.SeverityLevel.Information:t.severityLevel=e.severity;var r=new n.Data;return r.baseType=n.telemetryTypeToBaseType(n.TelemetryType.Trace),r.baseData=t,r},EnvelopeFactory.createDependencyData=function(e){var t=new n.RemoteDependencyData;t.name=e.name,t.data=e.data,t.target=e.target,t.duration=i.msToTimeSpan(e.duration),t.success=e.success,t.type=e.dependencyTypeName,t.properties=e.properties,t.resultCode=e.resultCode,e.id?t.id=e.id:t.id=i.newGuid();var r=new n.Data;return r.baseType=n.telemetryTypeToBaseType(n.TelemetryType.Dependency),r.baseData=t,r},EnvelopeFactory.createEventData=function(e){var t=new n.EventData;t.name=e.name,t.properties=e.properties,t.measurements=e.measurements;var r=new n.Data;return r.baseType=n.telemetryTypeToBaseType(n.TelemetryType.Event),r.baseData=t,r},EnvelopeFactory.createExceptionData=function(e){var t=new n.ExceptionData;t.properties=e.properties,t.severityLevel=n.SeverityLevel.Error,t.measurements=e.measurements,t.exceptions=[];var r=e.exception.stack,o=new n.ExceptionDetails;o.message=e.exception.message,o.typeName=e.exception.name,o.parsedStack=this.parseStack(r),o.hasFullStack=i.isArray(o.parsedStack)&&o.parsedStack.length>0,t.exceptions.push(o);var s=new n.Data;return s.baseType=n.telemetryTypeToBaseType(n.TelemetryType.Exception),s.baseData=t,s},EnvelopeFactory.createRequestData=function(e){var t=new n.RequestData;e.id?t.id=e.id:t.id=i.newGuid(),t.name=e.name,t.url=e.url,t.source=e.source,t.duration=i.msToTimeSpan(e.duration),t.responseCode=e.resultCode,t.success=e.success,t.properties=e.properties;var r=new n.Data;return r.baseType=n.telemetryTypeToBaseType(n.TelemetryType.Request),r.baseData=t,r},EnvelopeFactory.createMetricData=function(e){var t=new n.MetricData;t.metrics=[];var r=new n.DataPoint;r.count=isNaN(e.count)?1:e.count,r.kind=n.DataPointType.Aggregation,r.max=isNaN(e.max)?e.value:e.max,r.min=isNaN(e.min)?e.value:e.min,r.name=e.name,r.stdDev=isNaN(e.stdDev)?0:e.stdDev,r.value=e.value,t.metrics.push(r),t.properties=e.properties;var i=new n.Data;return i.baseType=n.telemetryTypeToBaseType(n.TelemetryType.Metric),i.baseData=t,i},EnvelopeFactory.getTags=function(e,t){var r=o.CorrelationContextManager.getCurrentContext(),n={};if(e&&e.tags)for(var i in e.tags)n[i]=e.tags[i];if(t)for(var i in t)n[i]=t[i];return r&&(n[e.keys.operationId]=n[e.keys.operationId]||r.operation.id,n[e.keys.operationName]=n[e.keys.operationName]||r.operation.name,n[e.keys.operationParentId]=n[e.keys.operationParentId]||r.operation.parentId),n},EnvelopeFactory.parseStack=function(e){var t=void 0;if("string"==typeof e){var r=e.split("\n");t=[];for(var n=0,i=0,o=0;o<=r.length;o++){var s=r[o];if(a.regex.test(s)){var c=new a(r[o],n++);i+=c.sizeInBytes,t.push(c)}}if(i>32768)for(var u=0,l=t.length-1,p=0,d=u,h=l;u<l;){if((p+=t[u].sizeInBytes+t[l].sizeInBytes)>32768){var f=h-d+1;t.splice(d,f);break}d=u,h=l,u++,l--}}return t},EnvelopeFactory}(),a=function(){function _StackFrame(e,t){this.sizeInBytes=0,this.level=t,this.method="<no_method>",this.assembly=i.trim(e);var r=e.match(_StackFrame.regex);r&&r.length>=5&&(this.method=i.trim(r[2])||this.method,this.fileName=i.trim(r[4])||"<no_filename>",this.line=parseInt(r[5])||0),this.sizeInBytes+=this.method.length,this.sizeInBytes+=this.fileName.length,this.sizeInBytes+=this.assembly.length,this.sizeInBytes+=_StackFrame.baseSize,this.sizeInBytes+=this.level.toString().length,this.sizeInBytes+=this.line.toString().length}return _StackFrame.regex=/^([\s]+at)?(.*?)(\@|\s\(|\s)([^\(\@\n]+):([0-9]+):([0-9]+)(\)?)$/,_StackFrame.baseSize=58,_StackFrame}();e.exports=s},function(e,t,r){"use strict";var n=this&&this.__awaiter||function(e,t,r,n){return new(r||(r=Promise))(function(i,o){function fulfilled(e){try{step(n.next(e))}catch(e){o(e)}}function rejected(e){try{step(n.throw(e))}catch(e){o(e)}}function step(e){e.done?i(e.value):new r(function(t){t(e.value)}).then(fulfilled,rejected)}step((n=n.apply(e,t||[])).next())})};Object.defineProperty(t,"__esModule",{value:!0});const i=r(10),o=r(16),s=r(18),a="https://www.surveymonkey.com/r/C9Y5M25",c=1,u=2,l="nsat/sessionCount",p="nsat/lastSessionDate",d="nsat/takeSurveyDate",h="nsat/dontShowDate",f="nsat/skipVersion",m="nsat/isCandidate";t.NSAT=class NSAT{static takeSurvey({globalState:e}){return n(this,void 0,void 0,function*(){if(e.get(f,""))return;const t=(new Date).toDateString(),r=e.get(p,new Date(0).toDateString());if(t===r)return;const g=e.get(l,0)+1;if(yield e.update(p,t),yield e.update(l,g),g<u)return;const y=e.get(m,!1)||Math.random()<c;yield e.update(m,y);const v=i.extensions.getExtension(o.Constants.ExtensionId).packageJSON.version||"unknown";if(!y)return void(yield e.update(f,v));const b={title:"Take Survey",run:()=>n(this,void 0,void 0,function*(){s.TelemetryClient.sendEvent("nsat.survey/takeShortSurvey"),i.commands.executeCommand("vscode.open",i.Uri.parse(`${a}?o=${encodeURIComponent(process.platform)}&v=${encodeURIComponent(v)}`)),yield e.update(m,!1),yield e.update(f,v),yield e.update(d,t)})},_={title:"Remind Me Later",run:()=>n(this,void 0,void 0,function*(){s.TelemetryClient.sendEvent("nsat.survey/remindMeLater"),yield e.update(l,0)})},w={title:"Don't Show Again",run:()=>n(this,void 0,void 0,function*(){s.TelemetryClient.sendEvent("nsat.survey/dontShowAgain"),yield e.update(m,!1),yield e.update(f,v),yield e.update(h,t)})};s.TelemetryClient.sendEvent("nsat.survey/userAsked");const E=yield i.window.showInformationMessage("Do you mind taking a quick feedback survey about the Azure IoT Hub Toolkit Extension for VS Code?",b,_,w);yield(E||_).run()})}}},function(e,t,r){"use strict";
/*! Copyright (c) Microsoft. All rights reserved.
 *! Licensed under the MIT license. See LICENSE file in the project root for full license information.
 */var n=r(280),i=r(136),o=function(){function ConnectionString(){}return ConnectionString.parse=function(e,t){var r=n.createDictionary(e,";");return(t=t||[]).forEach(function(e){if(!(e in r))throw new i.ArgumentError("The connection string is missing the property: "+e)}),r},ConnectionString}();t.ConnectionString=o},function(e,t,r){"use strict";
/*! Copyright (c) Microsoft. All rights reserved.
 *! Licensed under the MIT license. See LICENSE file in the project root for full license information.
 */function devicePath(e){return"/devices/"+e}function deviceMessagePath(e){return devicePath(e)+"/messages/devicebound"}function modulePath(e,t){return"/devices/"+e+"/modules/"+t}t.apiVersion="2018-06-30",t.devicePath=devicePath,t.deviceEventPath=function deviceEventPath(e){return devicePath(e)+"/messages/events"},t.deviceMessagePath=deviceMessagePath,t.deviceMethodPath=function deviceMethodPath(e){return devicePath(e)+"/methods/devicebound"},t.deviceTwinPath=function deviceTwinPath(e){return devicePath(e)+"/twin"},t.deviceFeedbackPath=function deviceFeedbackPath(e,t){return deviceMessagePath(e)+"/"+t},t.deviceBlobUploadPath=function deviceBlobUploadPath(e){return devicePath(e)+"/files"},t.deviceBlobUploadNotificationPath=function deviceBlobUploadNotificationPath(e,t){return devicePath(e)+"/files/notifications/"+encodeURIComponent(t)},t.modulePath=modulePath,t.moduleEventPath=function moduleEventPath(e,t){return modulePath(e,t)+"/messages/events"},t.moduleMessagePath=function moduleMessagePath(e,t){return modulePath(e,t)+"/messages/events"},t.moduleMethodPath=function moduleMethodPath(e,t){return modulePath(e,t)+"/methods/devicebound"},t.moduleTwinPath=function moduleTwinPath(e,t){return modulePath(e,t)+"/twin"},t.moduleInputMessagePath=function moduleInputMessagePath(e,t){return modulePath(e,t)+"/inputs"},t.versionQueryString=function versionQueryString(){return"?api-version="+t.apiVersion}},function(e,t,r){"use strict";
/*! Copyright (c) Microsoft. All rights reserved.
 *! Licensed under the MIT license. See LICENSE file in the project root for full license information.
 */var n=r(611),i=function(){function Message(e){this.data=e,this.properties=new n.Properties,this.messageId="",this.to="",this.expiryTimeUtc=void 0,this.lockToken="",this.correlationId="",this.userId="",this.contentEncoding=void 0,this.contentType=void 0}return Message.prototype.getData=function(){return this.data},Message.prototype.getBytes=function(){return Buffer.isBuffer(this.data)?this.data:new Buffer(this.data)},Message.isBufferConvertible=function(e){return!!Buffer.isBuffer(e)||("string"==typeof e||(e instanceof Array||e instanceof ArrayBuffer))},Message}();t.Message=i},function(e,t,r){"use strict";
/*! Copyright (c) Microsoft. All rights reserved.
 *! Licensed under the MIT license. See LICENSE file in the project root for full license information.
 */var n=function(){function Properties(){this.propertyList=[]}return Properties.prototype.add=function(e,t){return"Authorization"!==e&&"iothub-to"!==e&&(this.propertyList.push({key:e,value:t}),!0)},Properties.prototype.getItem=function(e){if(e>=0&&e<this.propertyList.length)return this.propertyList[e]},Properties.prototype.getValue=function(e){for(var t=0;t<this.propertyList.length;t++)if(this.propertyList[t].key===e)return this.propertyList[t].value},Properties.prototype.count=function(){return this.propertyList.length},Properties}();t.Properties=n},function(e,t,r){"use strict";
/*! Copyright (c) Microsoft. All rights reserved.
 *! Licensed under the MIT license. See LICENSE file in the project root for full license information.
 */var n=r(181),i=r(136),o=r(280),s=function(){function SharedAccessSignature(){}return SharedAccessSignature.prototype.extend=function(e){if(!e)throw new ReferenceError("expiry is "+e);return this.se=e,this.sig=n.encodeUriComponentStrict(n.hmacHash(this._key,n.stringToSign(this.sr,this.se.toString()))),this.toString()},SharedAccessSignature.prototype.toString=function(){var e=this,t="SharedAccessSignature ";return["sr","sig","skn","se"].forEach(function(r){e[r]&&(" "!==t[t.length-1]&&(t+="&"),t+=r+"="+e[r])}),t},SharedAccessSignature.create=function(e,t,r,i){function throwRef(e,t){throw new ReferenceError("Argument '"+e+"' is "+t)}e||throwRef("resourceUri",e),r||throwRef("key",r),i||throwRef("expiry",i);var o=new SharedAccessSignature;return o._key=r,o.sr=e,t&&(o.skn=n.encodeUriComponentStrict(t)),o.se=i,o.sig=n.encodeUriComponentStrict(n.hmacHash(o._key,n.stringToSign(o.sr,o.se.toString()))),o},SharedAccessSignature.createWithSigningFunction=function(e,t,r,i){function throwRef(e,t){throw new ReferenceError("Argument '"+e+"' is "+t)}e||throwRef("credentials",e),t||throwRef("expiry",t),r||throwRef("signingFunction",r),i||throwRef("callback",i);var o=new SharedAccessSignature,s=e.host+"/devices/"+e.deviceId;e.moduleId&&(s+="/modules/"+e.moduleId),o.sr=n.encodeUriComponentStrict(s),o.se=t,e.sharedAccessKeyName&&(o.skn=n.encodeUriComponentStrict(e.sharedAccessKeyName)),r(Buffer.from(n.stringToSign(o.sr,o.se.toString())),function(e,t){e?i(e):(o.sig=n.encodeUriComponentStrict(t.toString("base64")),i(null,o))})},SharedAccessSignature.parse=function(e,t){var r=String(e).split(/\s/);if(2!==r.length||!r[0].match(/SharedAccessSignature/))throw new i.FormatError("Malformed signature");var n=o.createDictionary(r[1],"&");(t=t||[]).forEach(function(e){if(!(e in n))throw new i.ArgumentError("The shared access signature is missing the property: "+e)});var s=new SharedAccessSignature;return Object.keys(n).forEach(function(e){s[e]=n[e]}),s},SharedAccessSignature}();t.SharedAccessSignature=s},function(e,t,r){"use strict";var n=r(136),i=function(){function RetryOperation(e,t){this._retryCount=0,this._totalRetryTime=0,this._policy=e,this._maxTimeout=t}return RetryOperation.prototype.retry=function(e,t){var r=this,i=function(){r._retryCount++,e(function(e,o,s){if(e)if(r._policy.shouldRetry(e)){var a=r._policy.nextRetryTimeout(r._retryCount,e instanceof n.ThrottlingError);r._totalRetryTime+=a,r._totalRetryTime>r._maxTimeout||a<0?t(e):r._currentTimeout=setTimeout(i,a)}else t(e);else t(null,o,s)})};i()},RetryOperation}();t.RetryOperation=i},function(e,t,r){"use strict";var n=function(){return function DefaultErrorFilter(){this.ArgumentError=!1,this.ArgumentOutOfRangeError=!1,this.DeviceMaximumQueueDepthExceededError=!1,this.DeviceNotFoundError=!1,this.FormatError=!1,this.UnauthorizedError=!1,this.NotImplementedError=!1,this.NotConnectedError=!0,this.IotHubQuotaExceededError=!1,this.MessageTooLargeError=!1,this.InternalServerError=!0,this.ServiceUnavailableError=!0,this.IotHubNotFoundError=!1,this.IoTHubSuspendedError=!1,this.JobNotFoundError=!1,this.TooManyDevicesError=!1,this.ThrottlingError=!0,this.DeviceAlreadyExistsError=!1,this.DeviceMessageLockLostError=!1,this.InvalidEtagError=!1,this.InvalidOperationError=!1,this.PreconditionFailedError=!1,this.TimeoutError=!0,this.BadDeviceResponseError=!1,this.GatewayTimeoutError=!1,this.DeviceTimeoutError=!1,this.TwinRequestError=!1}}();t.DefaultErrorFilter=n},function(e,t,r){"use strict";var n=r(17),i=r(616);t.getAgentPlatformString=function getAgentPlatformString(e){var t=[];t.push("node "+process.version),"linux"===n.platform()?i(function(r,i){if(r)t.push("unknown");else{var o=i;t.push(o.dist+" "+o.release)}t.push(n.arch()),e(t.join("; "))}):(t.push(n.type()+" "+n.release()),t.push(n.arch()),e(t.join("; ")))}},function(e,t,r){var n=r(617),i=r(618),o=r(11),s=r(17),a=null;function getName(e){for(var t=0,r="linux";"linux"===r;)r=e.split(" ")[t++].toLowerCase();return r}function customLogic(e,t,n,i){var o="./logic/"+t+".js";try{r(619)(o)(e,n,i)}catch(t){i(null,e)}}e.exports=function getOs(e){var t=s.platform();return"linux"===t?function getLinuxDistro(e){if(a)return e(null,a);!function getReleaseFile(e,t){var r=0;return function checkExists(){o.stat(e[r],function(n,i){if(n||!i.isFile())return r++,e.length<=r?t(new Error("No unique release file found!")):checkExists();t(null,e[r])})}}(Object.keys(i),function(t,r){if(t)return e(t);var s=i[r],c={os:"linux",dist:s[0]};o.readFile(r,"utf-8",function(t,r){return t?e(t):1===s.length?customLogic(c,getName(c.dist),r,function(t,r){return t?e(t):(a=r,e(null,r))}):(r=r.toLowerCase(),void n.each(s,function(e,t){var n=getName(e);return r.indexOf(n)>=0?(c.dist=e,customLogic(c,n,r,function(e,r){return e?t(e):(c=r,t())})):t()},function(t){return t?e(t):(a=c,e(null,c))}))})})()}(e):e(null,{os:t})}},function(e,t,r){(function(e){(function(t){"use strict";function slice(e,t){t|=0;for(var r=Math.max(e.length-t,0),n=Array(r),i=0;i<r;i++)n[i]=e[t+i];return n}var r=function(e){var t=slice(arguments,1);return function(){var r=slice(arguments);return e.apply(null,t.concat(r))}},n=function(e){return function(){var t=slice(arguments),r=t.pop();e.call(this,t,r)}};function isObject(e){var t=typeof e;return null!=e&&("object"==t||"function"==t)}var i="function"==typeof setImmediate&&setImmediate,o="object"==typeof process&&"function"==typeof process.nextTick;function fallback(e){setTimeout(e,0)}function wrap(e){return function(t){var r=slice(arguments,1);e(function(){t.apply(null,r)})}}var s=wrap(i?setImmediate:o?process.nextTick:fallback);function asyncify(e){return n(function(t,r){var n;try{n=e.apply(this,t)}catch(e){return r(e)}isObject(n)&&"function"==typeof n.then?n.then(function(e){invokeCallback(r,null,e)},function(e){invokeCallback(r,e.message?e:new Error(e))}):r(null,n)})}function invokeCallback(e,t,r){try{e(t,r)}catch(e){s(rethrow,e)}}function rethrow(e){throw e}var a="function"==typeof Symbol;function isAsync(e){return a&&"AsyncFunction"===e[Symbol.toStringTag]}function wrapAsync(e){return isAsync(e)?asyncify(e):e}function applyEach$1(e){return function(t){var r=slice(arguments,1),i=n(function(r,n){var i=this;return e(t,function(e,t){wrapAsync(e).apply(i,r.concat(t))},n)});return r.length?i.apply(this,r):i}}var c="object"==typeof global&&global&&global.Object===Object&&global,u="object"==typeof self&&self&&self.Object===Object&&self,l=c||u||Function("return this")(),p=l.Symbol,d=Object.prototype,h=d.hasOwnProperty,f=d.toString,m=p?p.toStringTag:void 0,g=Object.prototype.toString,y="[object Null]",v="[object Undefined]",b=p?p.toStringTag:void 0;function baseGetTag(e){return null==e?void 0===e?v:y:b&&b in Object(e)?function getRawTag(e){var t=h.call(e,m),r=e[m];try{e[m]=void 0;var n=!0}catch(e){}var i=f.call(e);return n&&(t?e[m]=r:delete e[m]),i}(e):function objectToString(e){return g.call(e)}(e)}var _="[object AsyncFunction]",w="[object Function]",E="[object GeneratorFunction]",S="[object Proxy]",C=9007199254740991;function isLength(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=C}function isArrayLike(e){return null!=e&&isLength(e.length)&&!function isFunction(e){if(!isObject(e))return!1;var t=baseGetTag(e);return t==w||t==E||t==_||t==S}(e)}var x={};function noop(){}function once(e){return function(){if(null!==e){var t=e;e=null,t.apply(this,arguments)}}}var k="function"==typeof Symbol&&Symbol.iterator,R=function(e){return k&&e[k]&&e[k]()};function isObjectLike(e){return null!=e&&"object"==typeof e}var T="[object Arguments]";function baseIsArguments(e){return isObjectLike(e)&&baseGetTag(e)==T}var O=Object.prototype,I=O.hasOwnProperty,N=O.propertyIsEnumerable,A=baseIsArguments(function(){return arguments}())?baseIsArguments:function(e){return isObjectLike(e)&&I.call(e,"callee")&&!N.call(e,"callee")},P=Array.isArray,L="object"==typeof t&&t&&!t.nodeType&&t,D=L&&"object"==typeof e&&e&&!e.nodeType&&e,M=D&&D.exports===L?l.Buffer:void 0,j=(M?M.isBuffer:void 0)||function stubFalse(){return!1},q=9007199254740991,F=/^(?:0|[1-9]\d*)$/;function isIndex(e,t){var r=typeof e;return!!(t=null==t?q:t)&&("number"==r||"symbol"!=r&&F.test(e))&&e>-1&&e%1==0&&e<t}var z={};z["[object Float32Array]"]=z["[object Float64Array]"]=z["[object Int8Array]"]=z["[object Int16Array]"]=z["[object Int32Array]"]=z["[object Uint8Array]"]=z["[object Uint8ClampedArray]"]=z["[object Uint16Array]"]=z["[object Uint32Array]"]=!0,z["[object Arguments]"]=z["[object Array]"]=z["[object ArrayBuffer]"]=z["[object Boolean]"]=z["[object DataView]"]=z["[object Date]"]=z["[object Error]"]=z["[object Function]"]=z["[object Map]"]=z["[object Number]"]=z["[object Object]"]=z["[object RegExp]"]=z["[object Set]"]=z["[object String]"]=z["[object WeakMap]"]=!1;var U="object"==typeof t&&t&&!t.nodeType&&t,B=U&&"object"==typeof e&&e&&!e.nodeType&&e,H=B&&B.exports===U&&c.process,$=function(){try{var e=B&&B.require&&B.require("util").types;return e||H&&H.binding&&H.binding("util")}catch(e){}}(),V=$&&$.isTypedArray,G=V?function baseUnary(e){return function(t){return e(t)}}(V):function baseIsTypedArray(e){return isObjectLike(e)&&isLength(e.length)&&!!z[baseGetTag(e)]},W=Object.prototype.hasOwnProperty;function arrayLikeKeys(e,t){var r=P(e),n=!r&&A(e),i=!r&&!n&&j(e),o=!r&&!n&&!i&&G(e),s=r||n||i||o,a=s?function baseTimes(e,t){for(var r=-1,n=Array(e);++r<e;)n[r]=t(r);return n}(e.length,String):[],c=a.length;for(var u in e)!t&&!W.call(e,u)||s&&("length"==u||i&&("offset"==u||"parent"==u)||o&&("buffer"==u||"byteLength"==u||"byteOffset"==u)||isIndex(u,c))||a.push(u);return a}var J=Object.prototype,X=function overArg(e,t){return function(r){return e(t(r))}}(Object.keys,Object),Y=Object.prototype.hasOwnProperty;function baseKeys(e){if(!function isPrototype(e){var t=e&&e.constructor;return e===("function"==typeof t&&t.prototype||J)}(e))return X(e);var t=[];for(var r in Object(e))Y.call(e,r)&&"constructor"!=r&&t.push(r);return t}function keys(e){return isArrayLike(e)?arrayLikeKeys(e):baseKeys(e)}function iterator(e){if(isArrayLike(e))return function createArrayIterator(e){var t=-1,r=e.length;return function next(){return++t<r?{value:e[t],key:t}:null}}(e);var t=R(e);return t?function createES2015Iterator(e){var t=-1;return function next(){var r=e.next();return r.done?null:(t++,{value:r.value,key:t})}}(t):function createObjectIterator(e){var t=keys(e),r=-1,n=t.length;return function next(){var i=t[++r];return r<n?{value:e[i],key:i}:null}}(e)}function onlyOnce(e){return function(){if(null===e)throw new Error("Callback was already called.");var t=e;e=null,t.apply(this,arguments)}}function _eachOfLimit(e){return function(t,r,n){if(n=once(n||noop),e<=0||!t)return n(null);var i=iterator(t),o=!1,s=0,a=!1;function iterateeCallback(e,t){if(s-=1,e)o=!0,n(e);else{if(t===x||o&&s<=0)return o=!0,n(null);a||replenish()}}function replenish(){for(a=!0;s<e&&!o;){var t=i();if(null===t)return o=!0,void(s<=0&&n(null));s+=1,r(t.value,t.key,onlyOnce(iterateeCallback))}a=!1}replenish()}}function eachOfLimit(e,t,r,n){_eachOfLimit(t)(e,wrapAsync(r),n)}function doLimit(e,t){return function(r,n,i){return e(r,t,n,i)}}function eachOfArrayLike(e,t,r){r=once(r||noop);var n=0,i=0,o=e.length;function iteratorCallback(e,t){e?r(e):++i!==o&&t!==x||r(null)}for(0===o&&r(null);n<o;n++)t(e[n],n,onlyOnce(iteratorCallback))}var K=doLimit(eachOfLimit,1/0),Q=function(e,t,r){(isArrayLike(e)?eachOfArrayLike:K)(e,wrapAsync(t),r)};function doParallel(e){return function(t,r,n){return e(Q,t,wrapAsync(r),n)}}function _asyncMap(e,t,r,n){n=n||noop,t=t||[];var i=[],o=0,s=wrapAsync(r);e(t,function(e,t,r){var n=o++;s(e,function(e,t){i[n]=t,r(e)})},function(e){n(e,i)})}var Z=doParallel(_asyncMap),ee=applyEach$1(Z);function doParallelLimit(e){return function(t,r,n,i){return e(_eachOfLimit(r),t,wrapAsync(n),i)}}var te=doParallelLimit(_asyncMap),re=doLimit(te,1),ne=applyEach$1(re);function arrayEach(e,t){for(var r=-1,n=null==e?0:e.length;++r<n&&!1!==t(e[r],r,e););return e}var ie=function createBaseFor(e){return function(t,r,n){for(var i=-1,o=Object(t),s=n(t),a=s.length;a--;){var c=s[e?a:++i];if(!1===r(o[c],c,o))break}return t}}();function baseForOwn(e,t){return e&&ie(e,t,keys)}function baseIsNaN(e){return e!=e}function baseIndexOf(e,t,r){return t==t?function strictIndexOf(e,t,r){for(var n=r-1,i=e.length;++n<i;)if(e[n]===t)return n;return-1}(e,t,r):function baseFindIndex(e,t,r,n){for(var i=e.length,o=r+(n?1:-1);n?o--:++o<i;)if(t(e[o],o,e))return o;return-1}(e,baseIsNaN,r)}var oe=function(e,t,r){"function"==typeof t&&(r=t,t=null),r=once(r||noop);var n=keys(e).length;if(!n)return r(null);t||(t=n);var i={},o=0,s=!1,a=Object.create(null),c=[],u=[],l={};function enqueueTask(e,t){c.push(function(){!function runTask(e,t){if(s)return;var n=onlyOnce(function(t,n){if(o--,arguments.length>2&&(n=slice(arguments,1)),t){var c={};baseForOwn(i,function(e,t){c[t]=e}),c[e]=n,s=!0,a=Object.create(null),r(t,c)}else i[e]=n,function taskComplete(e){arrayEach(a[e]||[],function(e){e()}),processQueue()}(e)});o++;var c=wrapAsync(t[t.length-1]);t.length>1?c(i,n):c(n)}(e,t)})}function processQueue(){if(0===c.length&&0===o)return r(null,i);for(;c.length&&o<t;){c.shift()()}}function getDependents(t){var r=[];return baseForOwn(e,function(e,n){P(e)&&baseIndexOf(e,t,0)>=0&&r.push(n)}),r}baseForOwn(e,function(t,r){if(!P(t))return enqueueTask(r,[t]),void u.push(r);var n=t.slice(0,t.length-1),i=n.length;if(0===i)return enqueueTask(r,t),void u.push(r);l[r]=i,arrayEach(n,function(o){if(!e[o])throw new Error("async.auto task `"+r+"` has a non-existent dependency `"+o+"` in "+n.join(", "));!function addListener(e,t){var r=a[e];r||(r=a[e]=[]);r.push(t)}(o,function(){0===--i&&enqueueTask(r,t)})})}),function checkForDeadlocks(){var e,t=0;for(;u.length;)e=u.pop(),t++,arrayEach(getDependents(e),function(e){0==--l[e]&&u.push(e)});if(t!==n)throw new Error("async.auto cannot execute tasks due to a recursive dependency")}(),processQueue()};function arrayMap(e,t){for(var r=-1,n=null==e?0:e.length,i=Array(n);++r<n;)i[r]=t(e[r],r,e);return i}var se="[object Symbol]",ae=1/0,ce=p?p.prototype:void 0,ue=ce?ce.toString:void 0;function baseToString(e){if("string"==typeof e)return e;if(P(e))return arrayMap(e,baseToString)+"";if(function isSymbol(e){return"symbol"==typeof e||isObjectLike(e)&&baseGetTag(e)==se}(e))return ue?ue.call(e):"";var t=e+"";return"0"==t&&1/e==-ae?"-0":t}function castSlice(e,t,r){var n=e.length;return r=void 0===r?n:r,!t&&r>=n?e:function baseSlice(e,t,r){var n=-1,i=e.length;t<0&&(t=-t>i?0:i+t),(r=r>i?i:r)<0&&(r+=i),i=t>r?0:r-t>>>0,t>>>=0;for(var o=Array(i);++n<i;)o[n]=e[n+t];return o}(e,t,r)}var le=RegExp("[\\u200d\\ud800-\\udfff\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff\\ufe0e\\ufe0f]"),pe="[\\ud800-\\udfff]",de="[\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff]",he="\\ud83c[\\udffb-\\udfff]",fe="[^\\ud800-\\udfff]",me="(?:\\ud83c[\\udde6-\\uddff]){2}",ge="[\\ud800-\\udbff][\\udc00-\\udfff]",ye="(?:"+de+"|"+he+")"+"?",ve="[\\ufe0e\\ufe0f]?"+ye+("(?:\\u200d(?:"+[fe,me,ge].join("|")+")[\\ufe0e\\ufe0f]?"+ye+")*"),be="(?:"+[fe+de+"?",de,me,ge,pe].join("|")+")",_e=RegExp(he+"(?="+he+")|"+be+ve,"g");function stringToArray(e){return function hasUnicode(e){return le.test(e)}(e)?function unicodeToArray(e){return e.match(_e)||[]}(e):function asciiToArray(e){return e.split("")}(e)}var we=/^\s+|\s+$/g;function trim(e,t,r){if((e=function toString(e){return null==e?"":baseToString(e)}(e))&&(r||void 0===t))return e.replace(we,"");if(!e||!(t=baseToString(t)))return e;var n=stringToArray(e),i=stringToArray(t);return castSlice(n,function charsStartIndex(e,t){for(var r=-1,n=e.length;++r<n&&baseIndexOf(t,e[r],0)>-1;);return r}(n,i),function charsEndIndex(e,t){for(var r=e.length;r--&&baseIndexOf(t,e[r],0)>-1;);return r}(n,i)+1).join("")}var Ee=/^(?:async\s+)?(function)?\s*[^\(]*\(\s*([^\)]*)\)/m,Se=/,/,Ce=/(=.+)?(\s*)$/,xe=/((\/\/.*$)|(\/\*[\s\S]*?\*\/))/gm;function autoInject(e,t){var r={};baseForOwn(e,function(e,t){var n,i=isAsync(e),o=!i&&1===e.length||i&&0===e.length;if(P(e))n=e.slice(0,-1),e=e[e.length-1],r[t]=n.concat(n.length>0?newTask:e);else if(o)r[t]=e;else{if(n=function parseParams(e){return e=(e=(e=(e=e.toString().replace(xe,"")).match(Ee)[2].replace(" ",""))?e.split(Se):[]).map(function(e){return trim(e.replace(Ce,""))})}(e),0===e.length&&!i&&0===n.length)throw new Error("autoInject task functions require explicit parameters.");i||n.pop(),r[t]=n.concat(newTask)}function newTask(t,r){var i=arrayMap(n,function(e){return t[e]});i.push(r),wrapAsync(e).apply(null,i)}}),oe(r,t)}function DLL(){this.head=this.tail=null,this.length=0}function setInitial(e,t){e.length=1,e.head=e.tail=t}function queue(e,t,r){if(null==t)t=1;else if(0===t)throw new Error("Concurrency must not be zero");var n=wrapAsync(e),i=0,o=[],a=!1;function _insert(e,t,r){if(null!=r&&"function"!=typeof r)throw new Error("task callback must be a function");if(u.started=!0,P(e)||(e=[e]),0===e.length&&u.idle())return s(function(){u.drain()});for(var n=0,i=e.length;n<i;n++){var o={data:e[n],callback:r||noop};t?u._tasks.unshift(o):u._tasks.push(o)}a||(a=!0,s(function(){a=!1,u.process()}))}function _next(e){return function(t){i-=1;for(var r=0,n=e.length;r<n;r++){var s=e[r],a=baseIndexOf(o,s,0);0===a?o.shift():a>0&&o.splice(a,1),s.callback.apply(s,arguments),null!=t&&u.error(t,s.data)}i<=u.concurrency-u.buffer&&u.unsaturated(),u.idle()&&u.drain(),u.process()}}var c=!1,u={_tasks:new DLL,concurrency:t,payload:r,saturated:noop,unsaturated:noop,buffer:t/4,empty:noop,drain:noop,error:noop,started:!1,paused:!1,push:function(e,t){_insert(e,!1,t)},kill:function(){u.drain=noop,u._tasks.empty()},unshift:function(e,t){_insert(e,!0,t)},remove:function(e){u._tasks.remove(e)},process:function(){if(!c){for(c=!0;!u.paused&&i<u.concurrency&&u._tasks.length;){var e=[],t=[],r=u._tasks.length;u.payload&&(r=Math.min(r,u.payload));for(var s=0;s<r;s++){var a=u._tasks.shift();e.push(a),o.push(a),t.push(a.data)}i+=1,0===u._tasks.length&&u.empty(),i===u.concurrency&&u.saturated();var l=onlyOnce(_next(e));n(t,l)}c=!1}},length:function(){return u._tasks.length},running:function(){return i},workersList:function(){return o},idle:function(){return u._tasks.length+i===0},pause:function(){u.paused=!0},resume:function(){!1!==u.paused&&(u.paused=!1,s(u.process))}};return u}function cargo(e,t){return queue(e,1,t)}DLL.prototype.removeLink=function(e){return e.prev?e.prev.next=e.next:this.head=e.next,e.next?e.next.prev=e.prev:this.tail=e.prev,e.prev=e.next=null,this.length-=1,e},DLL.prototype.empty=function(){for(;this.head;)this.shift();return this},DLL.prototype.insertAfter=function(e,t){t.prev=e,t.next=e.next,e.next?e.next.prev=t:this.tail=t,e.next=t,this.length+=1},DLL.prototype.insertBefore=function(e,t){t.prev=e.prev,t.next=e,e.prev?e.prev.next=t:this.head=t,e.prev=t,this.length+=1},DLL.prototype.unshift=function(e){this.head?this.insertBefore(this.head,e):setInitial(this,e)},DLL.prototype.push=function(e){this.tail?this.insertAfter(this.tail,e):setInitial(this,e)},DLL.prototype.shift=function(){return this.head&&this.removeLink(this.head)},DLL.prototype.pop=function(){return this.tail&&this.removeLink(this.tail)},DLL.prototype.toArray=function(){for(var e=Array(this.length),t=this.head,r=0;r<this.length;r++)e[r]=t.data,t=t.next;return e},DLL.prototype.remove=function(e){for(var t=this.head;t;){var r=t.next;e(t)&&this.removeLink(t),t=r}return this};var ke=doLimit(eachOfLimit,1);function reduce(e,t,r,n){n=once(n||noop);var i=wrapAsync(r);ke(e,function(e,r,n){i(t,e,function(e,r){t=r,n(e)})},function(e){n(e,t)})}function seq(){var e=arrayMap(arguments,wrapAsync);return function(){var t=slice(arguments),r=this,n=t[t.length-1];"function"==typeof n?t.pop():n=noop,reduce(e,t,function(e,t,n){t.apply(r,e.concat(function(e){var t=slice(arguments,1);n(e,t)}))},function(e,t){n.apply(r,[e].concat(t))})}}var Re=function(){return seq.apply(null,slice(arguments).reverse())},Te=Array.prototype.concat,Oe=function(e,t,r,n){n=n||noop;var i=wrapAsync(r);te(e,t,function(e,t){i(e,function(e){return e?t(e):t(null,slice(arguments,1))})},function(e,t){for(var r=[],i=0;i<t.length;i++)t[i]&&(r=Te.apply(r,t[i]));return n(e,r)})},Ie=doLimit(Oe,1/0),Ne=doLimit(Oe,1),Ae=function(){var e=slice(arguments),t=[null].concat(e);return function(){return arguments[arguments.length-1].apply(this,t)}};function identity(e){return e}function _createTester(e,t){return function(r,n,i,o){o=o||noop;var s,a=!1;r(n,function(r,n,o){i(r,function(n,i){n?o(n):e(i)&&!s?(a=!0,s=t(!0,r),o(null,x)):o()})},function(e){e?o(e):o(null,a?s:t(!1))})}}function _findGetResult(e,t){return t}var Pe=doParallel(_createTester(identity,_findGetResult)),Le=doParallelLimit(_createTester(identity,_findGetResult)),De=doLimit(Le,1);function consoleFunc(e){return function(t){var r=slice(arguments,1);r.push(function(t){var r=slice(arguments,1);"object"==typeof console&&(t?console.error&&console.error(t):console[e]&&arrayEach(r,function(t){console[e](t)}))}),wrapAsync(t).apply(null,r)}}var Me=consoleFunc("dir");function doDuring(e,t,r){r=onlyOnce(r||noop);var n=wrapAsync(e),i=wrapAsync(t);function next(e){if(e)return r(e);var t=slice(arguments,1);t.push(check),i.apply(this,t)}function check(e,t){return e?r(e):t?void n(next):r(null)}check(null,!0)}function doWhilst(e,t,r){r=onlyOnce(r||noop);var n=wrapAsync(e),i=function(e){if(e)return r(e);var o=slice(arguments,1);if(t.apply(this,o))return n(i);r.apply(null,[null].concat(o))};n(i)}function doUntil(e,t,r){doWhilst(e,function(){return!t.apply(this,arguments)},r)}function during(e,t,r){r=onlyOnce(r||noop);var n=wrapAsync(t),i=wrapAsync(e);function next(e){if(e)return r(e);i(check)}function check(e,t){return e?r(e):t?void n(next):r(null)}i(check)}function _withoutIndex(e){return function(t,r,n){return e(t,n)}}function eachLimit(e,t,r){Q(e,_withoutIndex(wrapAsync(t)),r)}function eachLimit$1(e,t,r,n){_eachOfLimit(t)(e,_withoutIndex(wrapAsync(r)),n)}var je=doLimit(eachLimit$1,1);function ensureAsync(e){return isAsync(e)?e:n(function(t,r){var n=!0;t.push(function(){var e=arguments;n?s(function(){r.apply(null,e)}):r.apply(null,e)}),e.apply(this,t),n=!1})}function notId(e){return!e}var qe=doParallel(_createTester(notId,notId)),Fe=doParallelLimit(_createTester(notId,notId)),ze=doLimit(Fe,1);function baseProperty(e){return function(t){return null==t?void 0:t[e]}}function filterArray(e,t,r,n){var i=new Array(t.length);e(t,function(e,t,n){r(e,function(e,r){i[t]=!!r,n(e)})},function(e){if(e)return n(e);for(var r=[],o=0;o<t.length;o++)i[o]&&r.push(t[o]);n(null,r)})}function filterGeneric(e,t,r,n){var i=[];e(t,function(e,t,n){r(e,function(r,o){r?n(r):(o&&i.push({index:t,value:e}),n())})},function(e){e?n(e):n(null,arrayMap(i.sort(function(e,t){return e.index-t.index}),baseProperty("value")))})}function _filter(e,t,r,n){(isArrayLike(t)?filterArray:filterGeneric)(e,t,wrapAsync(r),n||noop)}var Ue=doParallel(_filter),Be=doParallelLimit(_filter),He=doLimit(Be,1);function forever(e,t){var r=onlyOnce(t||noop),n=wrapAsync(ensureAsync(e));!function next(e){if(e)return r(e);n(next)}()}var $e=function(e,t,r,n){n=n||noop;var i=wrapAsync(r);te(e,t,function(e,t){i(e,function(r,n){return r?t(r):t(null,{key:n,val:e})})},function(e,t){for(var r={},i=Object.prototype.hasOwnProperty,o=0;o<t.length;o++)if(t[o]){var s=t[o].key,a=t[o].val;i.call(r,s)?r[s].push(a):r[s]=[a]}return n(e,r)})},Ve=doLimit($e,1/0),Ge=doLimit($e,1),We=consoleFunc("log");function mapValuesLimit(e,t,r,n){n=once(n||noop);var i={},o=wrapAsync(r);eachOfLimit(e,t,function(e,t,r){o(e,t,function(e,n){if(e)return r(e);i[t]=n,r()})},function(e){n(e,i)})}var Je=doLimit(mapValuesLimit,1/0),Xe=doLimit(mapValuesLimit,1);function has(e,t){return t in e}function memoize(e,t){var r=Object.create(null),i=Object.create(null);t=t||identity;var o=wrapAsync(e),a=n(function memoized(e,n){var a=t.apply(null,e);has(r,a)?s(function(){n.apply(null,r[a])}):has(i,a)?i[a].push(n):(i[a]=[n],o.apply(null,e.concat(function(){var e=slice(arguments);r[a]=e;var t=i[a];delete i[a];for(var n=0,o=t.length;n<o;n++)t[n].apply(null,e)})))});return a.memo=r,a.unmemoized=e,a}var Ye=wrap(o?process.nextTick:i?setImmediate:fallback);function _parallel(e,t,r){r=r||noop;var n=isArrayLike(t)?[]:{};e(t,function(e,t,r){wrapAsync(e)(function(e,i){arguments.length>2&&(i=slice(arguments,1)),n[t]=i,r(e)})},function(e){r(e,n)})}function parallelLimit(e,t){_parallel(Q,e,t)}function parallelLimit$1(e,t,r){_parallel(_eachOfLimit(t),e,r)}var Ke=function(e,t){var r=wrapAsync(e);return queue(function(e,t){r(e[0],t)},t,1)},Qe=function(e,t){var r=Ke(e,t);return r.push=function(e,t,n){if(null==n&&(n=noop),"function"!=typeof n)throw new Error("task callback must be a function");if(r.started=!0,P(e)||(e=[e]),0===e.length)return s(function(){r.drain()});t=t||0;for(var i=r._tasks.head;i&&t>=i.priority;)i=i.next;for(var o=0,a=e.length;o<a;o++){var c={data:e[o],priority:t,callback:n};i?r._tasks.insertBefore(i,c):r._tasks.push(c)}s(r.process)},delete r.unshift,r};function race(e,t){if(t=once(t||noop),!P(e))return t(new TypeError("First argument to race must be an array of functions"));if(!e.length)return t();for(var r=0,n=e.length;r<n;r++)wrapAsync(e[r])(t)}function reduceRight(e,t,r,n){reduce(slice(e).reverse(),t,r,n)}function reflect(e){var t=wrapAsync(e);return n(function reflectOn(e,r){return e.push(function callback(e,t){var n;e?r(null,{error:e}):(n=arguments.length<=2?t:slice(arguments,1),r(null,{value:n}))}),t.apply(this,e)})}function reflectAll(e){var t;return P(e)?t=arrayMap(e,reflect):(t={},baseForOwn(e,function(e,r){t[r]=reflect.call(this,e)})),t}function reject$1(e,t,r,n){_filter(e,t,function(e,t){r(e,function(e,r){t(e,!r)})},n)}var Ze=doParallel(reject$1),et=doParallelLimit(reject$1),tt=doLimit(et,1);function constant$1(e){return function(){return e}}function retry(e,t,r){var n=5,i=0,o={times:n,intervalFunc:constant$1(i)};if(arguments.length<3&&"function"==typeof e?(r=t||noop,t=e):(!function parseTimes(e,t){if("object"==typeof t)e.times=+t.times||n,e.intervalFunc="function"==typeof t.interval?t.interval:constant$1(+t.interval||i),e.errorFilter=t.errorFilter;else{if("number"!=typeof t&&"string"!=typeof t)throw new Error("Invalid arguments for async.retry");e.times=+t||n}}(o,e),r=r||noop),"function"!=typeof t)throw new Error("Invalid arguments for async.retry");var s=wrapAsync(t),a=1;!function retryAttempt(){s(function(e){e&&a++<o.times&&("function"!=typeof o.errorFilter||o.errorFilter(e))?setTimeout(retryAttempt,o.intervalFunc(a)):r.apply(null,arguments)})}()}var rt=function(e,t){t||(t=e,e=null);var r=wrapAsync(t);return n(function(t,n){function taskFn(e){r.apply(null,t.concat(e))}e?retry(e,taskFn,n):retry(taskFn,n)})};function series(e,t){_parallel(ke,e,t)}var nt=doParallel(_createTester(Boolean,identity)),it=doParallelLimit(_createTester(Boolean,identity)),ot=doLimit(it,1);function sortBy(e,t,r){var n=wrapAsync(t);function comparator(e,t){var r=e.criteria,n=t.criteria;return r<n?-1:r>n?1:0}Z(e,function(e,t){n(e,function(r,n){if(r)return t(r);t(null,{value:e,criteria:n})})},function(e,t){if(e)return r(e);r(null,arrayMap(t.sort(comparator),baseProperty("value")))})}function timeout(e,t,r){var i=wrapAsync(e);return n(function(n,o){var s,a=!1;n.push(function(){a||(o.apply(null,arguments),clearTimeout(s))}),s=setTimeout(function timeoutCallback(){var t=e.name||"anonymous",n=new Error('Callback function "'+t+'" timed out.');n.code="ETIMEDOUT",r&&(n.info=r),a=!0,o(n)},t),i.apply(null,n)})}var st=Math.ceil,at=Math.max;function timeLimit(e,t,r,n){var i=wrapAsync(r);te(function baseRange(e,t,r,n){for(var i=-1,o=at(st((t-e)/(r||1)),0),s=Array(o);o--;)s[n?o:++i]=e,e+=r;return s}(0,e,1),t,i,n)}var ct=doLimit(timeLimit,1/0),ut=doLimit(timeLimit,1);function transform(e,t,r,n){arguments.length<=3&&(n=r,r=t,t=P(e)?[]:{}),n=once(n||noop);var i=wrapAsync(r);Q(e,function(e,r,n){i(t,e,r,n)},function(e){n(e,t)})}function tryEach(e,t){var r,n=null;t=t||noop,je(e,function(e,t){wrapAsync(e)(function(e,i){r=arguments.length>2?slice(arguments,1):i,n=e,t(!e)})},function(){t(n,r)})}function unmemoize(e){return function(){return(e.unmemoized||e).apply(null,arguments)}}function whilst(e,t,r){r=onlyOnce(r||noop);var n=wrapAsync(t);if(!e())return r(null);var i=function(t){if(t)return r(t);if(e())return n(i);var o=slice(arguments,1);r.apply(null,[null].concat(o))};n(i)}function until(e,t,r){whilst(function(){return!e.apply(this,arguments)},t,r)}var lt=function(e,t){if(t=once(t||noop),!P(e))return t(new Error("First argument to waterfall must be an array of functions"));if(!e.length)return t();var r=0;function nextTask(t){var n=wrapAsync(e[r++]);t.push(onlyOnce(next)),n.apply(null,t)}function next(n){if(n||r===e.length)return t.apply(null,arguments);nextTask(slice(arguments,1))}nextTask([])},pt={apply:r,applyEach:ee,applyEachSeries:ne,asyncify:asyncify,auto:oe,autoInject:autoInject,cargo:cargo,compose:Re,concat:Ie,concatLimit:Oe,concatSeries:Ne,constant:Ae,detect:Pe,detectLimit:Le,detectSeries:De,dir:Me,doDuring:doDuring,doUntil:doUntil,doWhilst:doWhilst,during:during,each:eachLimit,eachLimit:eachLimit$1,eachOf:Q,eachOfLimit:eachOfLimit,eachOfSeries:ke,eachSeries:je,ensureAsync:ensureAsync,every:qe,everyLimit:Fe,everySeries:ze,filter:Ue,filterLimit:Be,filterSeries:He,forever:forever,groupBy:Ve,groupByLimit:$e,groupBySeries:Ge,log:We,map:Z,mapLimit:te,mapSeries:re,mapValues:Je,mapValuesLimit:mapValuesLimit,mapValuesSeries:Xe,memoize:memoize,nextTick:Ye,parallel:parallelLimit,parallelLimit:parallelLimit$1,priorityQueue:Qe,queue:Ke,race:race,reduce:reduce,reduceRight:reduceRight,reflect:reflect,reflectAll:reflectAll,reject:Ze,rejectLimit:et,rejectSeries:tt,retry:retry,retryable:rt,seq:seq,series:series,setImmediate:s,some:nt,someLimit:it,someSeries:ot,sortBy:sortBy,timeout:timeout,times:ct,timesLimit:timeLimit,timesSeries:ut,transform:transform,tryEach:tryEach,unmemoize:unmemoize,until:until,waterfall:lt,whilst:whilst,all:qe,allLimit:Fe,allSeries:ze,any:nt,anyLimit:it,anySeries:ot,find:Pe,findLimit:Le,findSeries:De,forEach:eachLimit,forEachSeries:je,forEachLimit:eachLimit$1,forEachOf:Q,forEachOfSeries:ke,forEachOfLimit:eachOfLimit,inject:reduce,foldl:reduce,foldr:reduceRight,select:Ue,selectLimit:Be,selectSeries:He,wrapSync:asyncify};t.default=pt,t.apply=r,t.applyEach=ee,t.applyEachSeries=ne,t.asyncify=asyncify,t.auto=oe,t.autoInject=autoInject,t.cargo=cargo,t.compose=Re,t.concat=Ie,t.concatLimit=Oe,t.concatSeries=Ne,t.constant=Ae,t.detect=Pe,t.detectLimit=Le,t.detectSeries=De,t.dir=Me,t.doDuring=doDuring,t.doUntil=doUntil,t.doWhilst=doWhilst,t.during=during,t.each=eachLimit,t.eachLimit=eachLimit$1,t.eachOf=Q,t.eachOfLimit=eachOfLimit,t.eachOfSeries=ke,t.eachSeries=je,t.ensureAsync=ensureAsync,t.every=qe,t.everyLimit=Fe,t.everySeries=ze,t.filter=Ue,t.filterLimit=Be,t.filterSeries=He,t.forever=forever,t.groupBy=Ve,t.groupByLimit=$e,t.groupBySeries=Ge,t.log=We,t.map=Z,t.mapLimit=te,t.mapSeries=re,t.mapValues=Je,t.mapValuesLimit=mapValuesLimit,t.mapValuesSeries=Xe,t.memoize=memoize,t.nextTick=Ye,t.parallel=parallelLimit,t.parallelLimit=parallelLimit$1,t.priorityQueue=Qe,t.queue=Ke,t.race=race,t.reduce=reduce,t.reduceRight=reduceRight,t.reflect=reflect,t.reflectAll=reflectAll,t.reject=Ze,t.rejectLimit=et,t.rejectSeries=tt,t.retry=retry,t.retryable=rt,t.seq=seq,t.series=series,t.setImmediate=s,t.some=nt,t.someLimit=it,t.someSeries=ot,t.sortBy=sortBy,t.timeout=timeout,t.times=ct,t.timesLimit=timeLimit,t.timesSeries=ut,t.transform=transform,t.tryEach=tryEach,t.unmemoize=unmemoize,t.until=until,t.waterfall=lt,t.whilst=whilst,t.all=qe,t.allLimit=Fe,t.allSeries=ze,t.any=nt,t.anyLimit=it,t.anySeries=ot,t.find=Pe,t.findLimit=Le,t.findSeries=De,t.forEach=eachLimit,t.forEachSeries=je,t.forEachLimit=eachLimit$1,t.forEachOf=Q,t.forEachOfSeries=ke,t.forEachOfLimit=eachOfLimit,t.inject=reduce,t.foldl=reduce,t.foldr=reduceRight,t.select=Ue,t.selectLimit=Be,t.selectSeries=He,t.wrapSync=asyncify,Object.defineProperty(t,"__esModule",{value:!0})})(t)}).call(this,r(48)(e))},function(e){e.exports={"/etc/fedora-release":["Fedora"],"/etc/redhat-release":["RHEL","RHAS","Red Hat Linux","Scientific Linux","ScientificSL","ScientificCERNSLC","ScientificFermiLTS","ScientificSLF","Centos"],"/etc/redhat_version":["RHEL","RHAS","Red Hat Linux","Scientific Linux","ScientificSL","ScientificCERNSLC","ScientificFermiLTS","ScientificSLF"],"/etc/SuSE-release":["SUSE Linux"],"/etc/lsb-release":["Ubuntu Linux","Chakra","IYCC","Linux Mint","elementary OS","Arch Linux","Manjaro Linux"],"/etc/debian_version":["Debian"],"/etc/debian_release":["Debian"],"/etc/arch-release":["Arch Linux"],"/etc/os-release":["Raspbian"],"/etc/NIXOS":["NixOS"],"/etc/annvix-release":["Annvix"],"/etc/arklinux-release":["Arklinux"],"/etc/aurox-release":["Aurox Linux"],"/etc/blackcat-release":["BlackCat"],"/etc/cobalt-release":["Cobalt"],"/etc/conectiva-release":["Conectiva"],"/etc/eos-version":["FreeEOS"],"/etc/gentoo-release":["Gentoo Linux"],"/etc/hlfs-release":["HLFS"],"/etc/hlfs_version":["HFLS"],"/etc/immunix-release":["Immunix"],"/knoppix_version":["Knoppix"],"/etc/lfs-release":["Linux-From-Scratch"],"/etc/lfs_version":["Linux-From-Scratch"],"/etc/linuxppc-release":["Linux-PPC"],"/etc/mageia-release":["Mageia"],"/etc/mandriva-release":["Mandriva Linux","Mandrake Linux"],"/etc/mandrake-release":["Mandrake"],"/etc/mandakelinux-release":["Mandriva Linux","Mandrake Linux"],"/etc/mklinux-release":["MkLinux"],"/etc/nld-release":["Novell Linux Desktop"],"/etc/pld-release":["PLD Linux"],"/etc/rubix-version":["Rubix"],"/etc/slackware-version":["Slackware"],"/etc/slackware-release":["Slackware"],"/etc/e-smith-release":["SME Server"],"/etc/release":["Solaris SPARC"],"/etc/sun-release":["Sun JDS"],"/etc/novell-release":["SUSE Linux"],"/etc/sles-release":["SUSE Linux ES9"],"/etc/synoinfo.conf":["Synology"],"/etc/tinysofa-release":["Tiny Sofa"],"/etc/trustix-release":["Trustix"],"/etc/trustix-version":["Trustix"],"/etc/turbolinux-release":["TurboLinux"],"/etc/ultrapenguin-release":["UltraPenguin"],"/etc/UnitedLinux-release":["UnitedLinux"],"/etc/va-release":["VA-Linux/RH-VALE"],"/etc/yellowdog-release":["Yellow Dog"],"/etc/alpine-release":["Alpine Linux"],"/etc/system-release":["Amazon Linux"]}},function(e,t,r){var n={"./logic/alpine.js":620,"./logic/amazon.js":621,"./logic/centos.js":283,"./logic/debian.js":622,"./logic/fedora.js":623,"./logic/manjaro.js":624,"./logic/raspbian.js":625,"./logic/red.js":626,"./logic/suse.js":627,"./logic/ubuntu.js":628};function webpackContext(e){var t=webpackContextResolve(e);return r(t)}function webpackContextResolve(e){var t=n[e];if(!(t+1)){var r=new Error("Cannot find module '"+e+"'");throw r.code="MODULE_NOT_FOUND",r}return t}webpackContext.keys=function webpackContextKeys(){return Object.keys(n)},webpackContext.resolve=webpackContextResolve,e.exports=webpackContext,webpackContext.id=619},function(e,t){var r=/(.*)/;e.exports=function alpineCustomLogic(e,t,n){var i=t.match(r);i&&2===i.length&&(e.release=i[1]),n(null,e)}},function(e,t){var r=/release (.*)/;e.exports=function amazonCustomLogic(e,t,n){var i=t.match(r);i&&2===i.length&&(e.release=i[1]),n(null,e)}},function(e,t,r){var n=r(284).exec,i=/Release:\t(.*)/,o=/Codename:\t(.*)/,s=/(.*)/;e.exports=function(e,t,r){return function lsbrelease(e,t,r){n("lsb_release -a",function(n,a,c){if(n)return function releasefile(e,t,r){var n=t.match(s);n&&2===n.length&&(e.release=n[1]);r(null,e)}(e,t,r);var u=a.match(i);u&&2===u.length&&(e.release=u[1]);var l=a.match(o);l&&2===u.length&&(e.codename=l[1]),r(null,e)})}(e,t,r)}},function(e,t){var r=/release (..)/,n=/\((.*)\)/;e.exports=function fedoraCustomLogic(e,t,i){var o=t.match(r);o&&2===o.length&&(e.release=o[1]);var s=t.match(n);s&&2===s.length&&(e.codename=s[1]),i(null,e)}},function(e,t){var r=/distrib_release=(.*)/,n=/distrib_codename=(.*)/;e.exports=function ubuntuCustomLogic(e,t,i){var o=t.match(n);o&&2===o.length&&(e.codename=o[1]);var s=t.match(r);s&&2===s.length&&(e.release=s[1]),i(null,e)}},function(e,t){var r=/VERSION_ID="(.*)"/,n=/VERSION="[0-9] \((.*)\)"/;e.exports=function raspbianCustomLogic(e,t,i){var o=t.match(r);o&&2===o.length&&(e.release=o[1]);var s=t.match(n);s&&2===s.length&&(e.codename=s[1]),i(null,e)}},function(e,t,r){e.exports=r(283)},function(e,t){var r=/VERSION = (.*)\n/;e.exports=function suseCustomLogic(e,t,n){var i=t.match(r);i&&2===i.length&&(e.release=i[1]),n(null,e)}},function(e,t){var r=/distrib_release=(.*)/,n=/distrib_codename=(.*)/;e.exports=function ubuntuCustomLogic(e,t,i){var o=t.match(n);o&&2===o.length&&(e.codename=o[1]);var s=t.match(r);s&&2===s.length&&(e.release=s[1]),i(null,e)}},function(e,t,r){"use strict";var n,i=this&&this.__extends||(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])},function(e,t){function __(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(__.prototype=t.prototype,new __)});Object.defineProperty(t,"__esModule",{value:!0});var o=r(137)("azure-iot-device:InternalClient"),s=r(4),a=r(286),c=r(642),u=r(208),l=r(358),p=r(157);var d=function(e){function Client(t,r,n){var i=e.call(this,t,r)||this;return i.blobUploadClient=n,i._c2dEnabled=!1,i.on("removeListener",function(e){"message"===e&&0===i.listeners("message").length&&i._disableC2D(function(e){e&&i.emit("error",e)})}),i.on("newListener",function(e){"message"===e&&i._enableC2D(function(e){e&&i.emit("error",e)})}),i._transport.on("message",function(e){i.emit("message",e)}),i._deviceDisconnectHandler=function(e){o("transport disconnect event: "+(e?e.toString():"no error")),e&&i._retryPolicy.shouldRetry(e)&&i._c2dEnabled&&(i._c2dEnabled=!1,o("re-enabling C2D link"),i._enableC2D(function(e){e&&i.emit("disconnect",new s.results.Disconnected(e))}))},i._transport.on("disconnect",i._deviceDisconnectHandler),i}return i(Client,e),Client.prototype.close=function(t){var r=this;return s.callbackToPromise(function(n){r._transport.removeListener("disconnect",r._deviceDisconnectHandler),e.prototype.close.call(r,t)},t)},Client.prototype.onDeviceMethod=function(e,t){this._onDeviceMethod(e,t)},Client.prototype.uploadToBlob=function(e,t,r,n){var i=this;return s.callbackToPromise(function(n){if(!e)throw new ReferenceError("blobName cannot be '"+e+"'");if(!t)throw new ReferenceError("stream cannot be '"+t+"'");if(!r)throw new ReferenceError("streamLength cannot be '"+r+"'");new s.RetryOperation(i._retryPolicy,i._maxOperationTimeout).retry(function(n){i.blobUploadClient.uploadToBlob(e,t,r,n)},function(e,t){!function safeCallback(e,t,r){e&&e(t,r)}(n,e,t)})},n)},Client.prototype._enableC2D=function(e){var t=this;this._c2dEnabled?e():new s.RetryOperation(this._retryPolicy,this._maxOperationTimeout).retry(function(e){t._transport.enableC2D(e)},function(r){r||(t._c2dEnabled=!0),e(r)})},Client.prototype._disableC2D=function(e){var t=this;this._c2dEnabled?this._transport.disableC2D(function(r){r||(t._c2dEnabled=!1),e(r)}):e()},Client.fromConnectionString=function(e,t){if(!e)throw new ReferenceError("connStr is '"+e+"'");var r,n=s.ConnectionString.parse(e);return new Client(new t(r=n.SharedAccessKey?p.SharedAccessKeyAuthenticationProvider.fromConnectionString(e):n.SharedAccessSignature?u.SharedAccessSignatureAuthenticationProvider.fromSharedAccessSignature(n.SharedAccessSignature):new l.X509AuthenticationProvider({host:n.HostName,deviceId:n.DeviceId})),null,new c.BlobUploadClient(r))},Client.fromSharedAccessSignature=function(e,t){if(!e)throw new ReferenceError("sharedAccessSignature is '"+e+"'");var r=u.SharedAccessSignatureAuthenticationProvider.fromSharedAccessSignature(e);return new Client(new t(r),null,new c.BlobUploadClient(r))},Client.fromAuthenticationProvider=function(e,t){if(!e)throw new ReferenceError("authenticationMethod cannot be '"+e+"'");if(!t)throw new ReferenceError("transportCtor cannot be '"+t+"'");return new Client(new t(e),null,new c.BlobUploadClient(e))},Client}(a.InternalClient);t.Client=d},function(e,t,r){"use strict";function _typeof(e){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function _typeof(e){return typeof e}:function _typeof(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}t.log=function log(){var e;return"object"===("undefined"==typeof console?"undefined":_typeof(console))&&console.log&&(e=console).log.apply(e,arguments)},t.formatArgs=function formatArgs(t){if(t[0]=(this.useColors?"%c":"")+this.namespace+(this.useColors?" %c":" ")+t[0]+(this.useColors?"%c ":" ")+"+"+e.exports.humanize(this.diff),!this.useColors)return;var r="color: "+this.color;t.splice(1,0,r,"color: inherit");var n=0,i=0;t[0].replace(/%[a-zA-Z%]/g,function(e){"%%"!==e&&(n++,"%c"===e&&(i=n))}),t.splice(i,0,r)},t.save=function save(e){try{e?t.storage.setItem("debug",e):t.storage.removeItem("debug")}catch(e){}},t.load=function load(){var e;try{e=t.storage.getItem("debug")}catch(e){}!e&&"undefined"!=typeof process&&"env"in process&&(e=process.env.DEBUG);return e},t.useColors=function useColors(){if("undefined"!=typeof window&&window.process&&("renderer"===window.process.type||window.process.__nwjs))return!0;if("undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/))return!1;return"undefined"!=typeof document&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||"undefined"!=typeof window&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||"undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31||"undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/)},t.storage=function localstorage(){try{return localStorage}catch(e){}}(),t.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"],e.exports=r(285)(t),e.exports.formatters.j=function(e){try{return JSON.stringify(e)}catch(e){return"[UnexpectedJSONParseError]: "+e.message}}},function(e,t){var r=1e3,n=60*r,i=60*n,o=24*i,s=7*o,a=365.25*o;function plural(e,t,r,n){var i=t>=1.5*r;return Math.round(e/r)+" "+n+(i?"s":"")}e.exports=function(e,t){t=t||{};var c=typeof e;if("string"===c&&e.length>0)return function parse(e){if((e=String(e)).length>100)return;var t=/^((?:\d+)?\-?\d?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(e);if(!t)return;var c=parseFloat(t[1]);switch((t[2]||"ms").toLowerCase()){case"years":case"year":case"yrs":case"yr":case"y":return c*a;case"weeks":case"week":case"w":return c*s;case"days":case"day":case"d":return c*o;case"hours":case"hour":case"hrs":case"hr":case"h":return c*i;case"minutes":case"minute":case"mins":case"min":case"m":return c*n;case"seconds":case"second":case"secs":case"sec":case"s":return c*r;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return c;default:return}}(e);if("number"===c&&!1===isNaN(e))return t.long?function fmtLong(e){var t=Math.abs(e);if(t>=o)return plural(e,t,o,"day");if(t>=i)return plural(e,t,i,"hour");if(t>=n)return plural(e,t,n,"minute");if(t>=r)return plural(e,t,r,"second");return e+" ms"}(e):function fmtShort(e){var t=Math.abs(e);if(t>=o)return Math.round(e/o)+"d";if(t>=i)return Math.round(e/i)+"h";if(t>=n)return Math.round(e/n)+"m";if(t>=r)return Math.round(e/r)+"s";return e+"ms"}(e);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(e))}},function(e,t,r){"use strict";var n=r(51),i=r(1);t.init=function init(e){e.inspectOpts={};for(var r=Object.keys(t.inspectOpts),n=0;n<r.length;n++)e.inspectOpts[r[n]]=t.inspectOpts[r[n]]},t.log=function log(){return process.stderr.write(i.format.apply(i,arguments)+"\n")},t.formatArgs=function formatArgs(r){var n=this.namespace;if(this.useColors){var i=this.color,o="[3"+(i<8?i:"8;5;"+i),s="  ".concat(o,";1m").concat(n," [0m");r[0]=s+r[0].split("\n").join("\n"+s),r.push(o+"m+"+e.exports.humanize(this.diff)+"[0m")}else r[0]=function getDate(){if(t.inspectOpts.hideDate)return"";return(new Date).toISOString()+" "}()+n+" "+r[0]},t.save=function save(e){e?process.env.DEBUG=e:delete process.env.DEBUG},t.load=function load(){return process.env.DEBUG},t.useColors=function useColors(){return"colors"in t.inspectOpts?Boolean(t.inspectOpts.colors):n.isatty(process.stderr.fd)},t.colors=[6,2,3,4,5,1];try{var o=r(49);o&&(o.stderr||o).level>=2&&(t.colors=[20,21,26,27,32,33,38,39,40,41,42,43,44,45,56,57,62,63,68,69,74,75,76,77,78,79,80,81,92,93,98,99,112,113,128,129,134,135,148,149,160,161,162,163,164,165,166,167,168,169,170,171,172,173,178,179,184,185,196,197,198,199,200,201,202,203,204,205,206,207,208,209,214,215,220,221])}catch(e){}t.inspectOpts=Object.keys(process.env).filter(function(e){return/^debug_/i.test(e)}).reduce(function(e,t){var r=t.substring(6).toLowerCase().replace(/_([a-z])/g,function(e,t){return t.toUpperCase()}),n=process.env[t];return n=!!/^(yes|on|true|enabled)$/i.test(n)||!/^(no|off|false|disabled)$/i.test(n)&&("null"===n?null:Number(n)),e[r]=n,e},{}),e.exports=r(285)(t);var s=e.exports.formatters;s.o=function(e){return this.inspectOpts.colors=this.useColors,i.inspect(e,this.inspectOpts).replace(/\s*\n\s*/g," ")},s.O=function(e){return this.inspectOpts.colors=this.useColors,i.inspect(e,this.inspectOpts)}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(){return function DeviceMethodRequest(e,t,r){if("string"==typeof e&&0===e.length)throw new Error("requestId must not be an empty string");if("string"!=typeof e)throw new ReferenceError("requestId must be a string");if("string"==typeof t&&0===t.length)throw new Error("methodName must not be an empty string");if("string"!=typeof t)throw new ReferenceError("methodName must be a string");this.requestId=e,this.methodName=t,r&&(this.payload=JSON.parse(r.toString()))}}();t.DeviceMethodRequest=n},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(4),i=function(){function DeviceMethodResponse(e,t){if(this.isResponseComplete=!1,"string"==typeof e&&0===e.length)throw new Error("requestId must not be an empty string");if("string"!=typeof e)throw new ReferenceError("requestId must be a string");if(!t)throw new ReferenceError("transport is '"+t+"'");this.requestId=e,this.isResponseComplete=!1,this.status=null,this.payload=null,this._transport=t}return DeviceMethodResponse.prototype.send=function(e,t,r){var i=this;if("function"==typeof t){if(void 0!==r)throw new Error("Callback must be the last argument");r=t,t=null}return n.errorCallbackToPromise(function(r){if(i.isResponseComplete)throw new Error("This response has already ended. Cannot end the same response more than once.");if("number"!=typeof e)throw new ReferenceError('"status" is "'+e+'". Expected a number.');i.status=e,i.payload=t,i.isResponseComplete=!0,i._transport.sendMethodResponse(i,r)},r)},DeviceMethodResponse}();t.DeviceMethodResponse=i},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.createDeviceMethodExchange=function createDeviceMethodExchange(e,t){return{request:e,response:t}}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(4),i=r(89),o=r(293),s=r(113),a=function(){function MethodClient(e){this._authProvider=e,this._options={},this._httpHeaders={"Content-Type":"application/json"}}return MethodClient.prototype.invokeMethod=function(e,t,r,i){var o=this;return n.callbackToPromise(function(i){o._init(function(s){if(s)i(s);else{o._restApiClient.setOptions(o._options);var a="/twins/"+n.encodeUriComponentStrict(e);t&&(a+="/modules/"+n.encodeUriComponentStrict(t)),a+="/methods";var c=JSON.stringify(r),u=1e3*(r.connectTimeoutInSeconds+r.responseTimeoutInSeconds);o._restApiClient.executeApiCall("POST",a,o._httpHeaders,c,u,function(e,t){e?i(e):i(null,t)})}})},i)},MethodClient.prototype.setOptions=function(e){this._options=s.merge(this._options,e)},MethodClient.prototype._init=function(e){var t=this;this._authProvider.getDeviceCredentials(function(r,n){r?e(r):(t._httpHeaders["x-ms-edge-moduleId"]=n.deviceId+"/"+n.moduleId,t._restApiClient?(t._restApiClient.updateSharedAccessSignature(n.sharedAccessSignature),e()):o.getUserAgentString(function(r){var o={host:n.gatewayHostName,sharedAccessSignature:n.sharedAccessSignature};t._restApiClient=new i.RestApiClient(o,r),e()}))})},MethodClient}();t.MethodClient=a},function(e,t,r){"use strict";function _typeof(e){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function _typeof(e){return typeof e}:function _typeof(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}t.log=function log(){var e;return"object"===("undefined"==typeof console?"undefined":_typeof(console))&&console.log&&(e=console).log.apply(e,arguments)},t.formatArgs=function formatArgs(t){if(t[0]=(this.useColors?"%c":"")+this.namespace+(this.useColors?" %c":" ")+t[0]+(this.useColors?"%c ":" ")+"+"+e.exports.humanize(this.diff),!this.useColors)return;var r="color: "+this.color;t.splice(1,0,r,"color: inherit");var n=0,i=0;t[0].replace(/%[a-zA-Z%]/g,function(e){"%%"!==e&&(n++,"%c"===e&&(i=n))}),t.splice(i,0,r)},t.save=function save(e){try{e?t.storage.setItem("debug",e):t.storage.removeItem("debug")}catch(e){}},t.load=function load(){var e;try{e=t.storage.getItem("debug")}catch(e){}!e&&"undefined"!=typeof process&&"env"in process&&(e=process.env.DEBUG);return e},t.useColors=function useColors(){if("undefined"!=typeof window&&window.process&&("renderer"===window.process.type||window.process.__nwjs))return!0;if("undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/))return!1;return"undefined"!=typeof document&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||"undefined"!=typeof window&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||"undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31||"undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/)},t.storage=function localstorage(){try{return localStorage}catch(e){}}(),t.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"],e.exports=r(289)(t),e.exports.formatters.j=function(e){try{return JSON.stringify(e)}catch(e){return"[UnexpectedJSONParseError]: "+e.message}}},function(e,t){var r=1e3,n=60*r,i=60*n,o=24*i,s=7*o,a=365.25*o;function plural(e,t,r,n){var i=t>=1.5*r;return Math.round(e/r)+" "+n+(i?"s":"")}e.exports=function(e,t){t=t||{};var c=typeof e;if("string"===c&&e.length>0)return function parse(e){if((e=String(e)).length>100)return;var t=/^((?:\d+)?\-?\d?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(e);if(!t)return;var c=parseFloat(t[1]);switch((t[2]||"ms").toLowerCase()){case"years":case"year":case"yrs":case"yr":case"y":return c*a;case"weeks":case"week":case"w":return c*s;case"days":case"day":case"d":return c*o;case"hours":case"hour":case"hrs":case"hr":case"h":return c*i;case"minutes":case"minute":case"mins":case"min":case"m":return c*n;case"seconds":case"second":case"secs":case"sec":case"s":return c*r;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return c;default:return}}(e);if("number"===c&&!1===isNaN(e))return t.long?function fmtLong(e){var t=Math.abs(e);if(t>=o)return plural(e,t,o,"day");if(t>=i)return plural(e,t,i,"hour");if(t>=n)return plural(e,t,n,"minute");if(t>=r)return plural(e,t,r,"second");return e+" ms"}(e):function fmtShort(e){var t=Math.abs(e);if(t>=o)return Math.round(e/o)+"d";if(t>=i)return Math.round(e/i)+"h";if(t>=n)return Math.round(e/n)+"m";if(t>=r)return Math.round(e/r)+"s";return e+"ms"}(e);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(e))}},function(e,t,r){"use strict";var n=r(51),i=r(1);t.init=function init(e){e.inspectOpts={};for(var r=Object.keys(t.inspectOpts),n=0;n<r.length;n++)e.inspectOpts[r[n]]=t.inspectOpts[r[n]]},t.log=function log(){return process.stderr.write(i.format.apply(i,arguments)+"\n")},t.formatArgs=function formatArgs(r){var n=this.namespace;if(this.useColors){var i=this.color,o="[3"+(i<8?i:"8;5;"+i),s="  ".concat(o,";1m").concat(n," [0m");r[0]=s+r[0].split("\n").join("\n"+s),r.push(o+"m+"+e.exports.humanize(this.diff)+"[0m")}else r[0]=function getDate(){if(t.inspectOpts.hideDate)return"";return(new Date).toISOString()+" "}()+n+" "+r[0]},t.save=function save(e){e?process.env.DEBUG=e:delete process.env.DEBUG},t.load=function load(){return process.env.DEBUG},t.useColors=function useColors(){return"colors"in t.inspectOpts?Boolean(t.inspectOpts.colors):n.isatty(process.stderr.fd)},t.colors=[6,2,3,4,5,1];try{var o=r(49);o&&(o.stderr||o).level>=2&&(t.colors=[20,21,26,27,32,33,38,39,40,41,42,43,44,45,56,57,62,63,68,69,74,75,76,77,78,79,80,81,92,93,98,99,112,113,128,129,134,135,148,149,160,161,162,163,164,165,166,167,168,169,170,171,172,173,178,179,184,185,196,197,198,199,200,201,202,203,204,205,206,207,208,209,214,215,220,221])}catch(e){}t.inspectOpts=Object.keys(process.env).filter(function(e){return/^debug_/i.test(e)}).reduce(function(e,t){var r=t.substring(6).toLowerCase().replace(/_([a-z])/g,function(e,t){return t.toUpperCase()}),n=process.env[t];return n=!!/^(yes|on|true|enabled)$/i.test(n)||!/^(no|off|false|disabled)$/i.test(n)&&("null"===n?null:Number(n)),e[r]=n,e},{}),e.exports=r(289)(t);var s=e.exports.formatters;s.o=function(e){return this.inspectOpts.colors=this.useColors,i.inspect(e,this.inspectOpts).replace(/\s*\n\s*/g," ")},s.O=function(e){return this.inspectOpts.colors=this.useColors,i.inspect(e,this.inspectOpts)}},function(e,t,r){var n,i,o=r(291),s=r(292),a=0,c=0;e.exports=function v1(e,t,r){var u=t&&r||0,l=t||[],p=(e=e||{}).node||n,d=void 0!==e.clockseq?e.clockseq:i;if(null==p||null==d){var h=o();null==p&&(p=n=[1|h[0],h[1],h[2],h[3],h[4],h[5]]),null==d&&(d=i=16383&(h[6]<<8|h[7]))}var f=void 0!==e.msecs?e.msecs:(new Date).getTime(),m=void 0!==e.nsecs?e.nsecs:c+1,g=f-a+(m-c)/1e4;if(g<0&&void 0===e.clockseq&&(d=d+1&16383),(g<0||f>a)&&void 0===e.nsecs&&(m=0),m>=1e4)throw new Error("uuid.v1(): Can't create more than 10M uuids/sec");a=f,c=m,i=d;var y=(1e4*(268435455&(f+=122192928e5))+m)%4294967296;l[u++]=y>>>24&255,l[u++]=y>>>16&255,l[u++]=y>>>8&255,l[u++]=255&y;var v=f/4294967296*1e4&268435455;l[u++]=v>>>8&255,l[u++]=255&v,l[u++]=v>>>24&15|16,l[u++]=v>>>16&255,l[u++]=d>>>8|128,l[u++]=255&d;for(var b=0;b<6;++b)l[u+b]=p[b];return t||s(l)}},function(e,t){var r=e.exports=function(e){return new Traverse(e)};function Traverse(e){this.value=e}function walk(e,t,r){var a=[],c=[],u=!0;return function walker(e){var l=r?copy(e):e,p={},d=!0,h={node:l,node_:e,path:[].concat(a),parent:c[c.length-1],parents:c,key:a.slice(-1)[0],isRoot:0===a.length,level:a.length,circular:null,update:function(e,t){h.isRoot||(h.parent.node[h.key]=e),h.node=e,t&&(d=!1)},delete:function(e){delete h.parent.node[h.key],e&&(d=!1)},remove:function(e){i(h.parent.node)?h.parent.node.splice(h.key,1):delete h.parent.node[h.key],e&&(d=!1)},keys:null,before:function(e){p.before=e},after:function(e){p.after=e},pre:function(e){p.pre=e},post:function(e){p.post=e},stop:function(){u=!1},block:function(){d=!1}};if(!u)return h;function updateState(){if("object"==typeof h.node&&null!==h.node){h.keys&&h.node_===h.node||(h.keys=n(h.node)),h.isLeaf=0==h.keys.length;for(var t=0;t<c.length;t++)if(c[t].node_===e){h.circular=c[t];break}}else h.isLeaf=!0,h.keys=null;h.notLeaf=!h.isLeaf,h.notRoot=!h.isRoot}updateState();var f=t.call(h,h.node);return void 0!==f&&h.update&&h.update(f),p.before&&p.before.call(h,h.node),d?("object"!=typeof h.node||null===h.node||h.circular||(c.push(h),updateState(),o(h.keys,function(e,t){a.push(e),p.pre&&p.pre.call(h,h.node[e],e);var n=walker(h.node[e]);r&&s.call(h.node,e)&&(h.node[e]=n.node),n.isLast=t==h.keys.length-1,n.isFirst=0==t,p.post&&p.post.call(h,n),a.pop()}),c.pop()),p.after&&p.after.call(h,h.node),h):h}(e).node}function copy(e){if("object"==typeof e&&null!==e){var t;if(i(e))t=[];else if(function isDate(e){return"[object Date]"===toS(e)}(e))t=new Date(e.getTime?e.getTime():e);else if(function isRegExp(e){return"[object RegExp]"===toS(e)}(e))t=new RegExp(e);else if(function isError(e){return"[object Error]"===toS(e)}(e))t={message:e.message};else if(function isBoolean(e){return"[object Boolean]"===toS(e)}(e))t=new Boolean(e);else if(function isNumber(e){return"[object Number]"===toS(e)}(e))t=new Number(e);else if(function isString(e){return"[object String]"===toS(e)}(e))t=new String(e);else if(Object.create&&Object.getPrototypeOf)t=Object.create(Object.getPrototypeOf(e));else if(e.constructor===Object)t={};else{var r=e.constructor&&e.constructor.prototype||e.__proto__||{},s=function(){};s.prototype=r,t=new s}return o(n(e),function(r){t[r]=e[r]}),t}return e}Traverse.prototype.get=function(e){for(var t=this.value,r=0;r<e.length;r++){var n=e[r];if(!t||!s.call(t,n)){t=void 0;break}t=t[n]}return t},Traverse.prototype.has=function(e){for(var t=this.value,r=0;r<e.length;r++){var n=e[r];if(!t||!s.call(t,n))return!1;t=t[n]}return!0},Traverse.prototype.set=function(e,t){for(var r=this.value,n=0;n<e.length-1;n++){var i=e[n];s.call(r,i)||(r[i]={}),r=r[i]}return r[e[n]]=t,t},Traverse.prototype.map=function(e){return walk(this.value,e,!0)},Traverse.prototype.forEach=function(e){return this.value=walk(this.value,e,!1),this.value},Traverse.prototype.reduce=function(e,t){var r=1===arguments.length,n=r?this.value:t;return this.forEach(function(t){this.isRoot&&r||(n=e.call(this,n,t))}),n},Traverse.prototype.paths=function(){var e=[];return this.forEach(function(t){e.push(this.path)}),e},Traverse.prototype.nodes=function(){var e=[];return this.forEach(function(t){e.push(this.node)}),e},Traverse.prototype.clone=function(){var e=[],t=[];return function clone(r){for(var i=0;i<e.length;i++)if(e[i]===r)return t[i];if("object"==typeof r&&null!==r){var s=copy(r);return e.push(r),t.push(s),o(n(r),function(e){s[e]=clone(r[e])}),e.pop(),t.pop(),s}return r}(this.value)};var n=Object.keys||function keys(e){var t=[];for(var r in e)t.push(r);return t};function toS(e){return Object.prototype.toString.call(e)}var i=Array.isArray||function isArray(e){return"[object Array]"===Object.prototype.toString.call(e)},o=function(e,t){if(e.forEach)return e.forEach(t);for(var r=0;r<e.length;r++)t(e[r],r,e)};o(n(Traverse.prototype),function(e){r[e]=function(t){var r=[].slice.call(arguments,1),n=new Traverse(t);return n[e].apply(n,r)}});var s=Object.hasOwnProperty||function(e,t){return t in e}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(643);t.BlobUploadClient=n.BlobUploadClient;var i=r(357);t.BlobSasError=i.BlobSasError,t.BlobUploadNotificationError=i.BlobUploadNotificationError},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(4),i=r(644),o=r(645),s=r(850),a=r(357),c=function(){function BlobUploadClient(e,t,r){if(!e)throw new ReferenceError("authenticationProvider cannot be '"+e+"'");this._authenticationProvider=e,this._fileUploadApi=t||new s.FileUploadApi(this._authenticationProvider),this._blobUploader=r||new o.BlobUploader}return BlobUploadClient.prototype.uploadToBlob=function(e,t,r,o){var s=this;return n.errorCallbackToPromise(function(n){s._fileUploadApi.getBlobSharedAccessSignature(e,function(e,o){if(e){var c=new a.BlobSasError("Could not obtain blob shared access signature.");c.innerError=e,n(c)}else s._blobUploader.uploadToBlob(o,t,r,function(e,t,r){var c=i.BlobUploadResult.fromAzureStorageCallbackArgs(e,t,r);s._fileUploadApi.notifyUploadComplete(o.correlationId,c,function(e){if(e){var t=new a.BlobUploadNotificationError("Could not notify the IoT Hub of the file upload completion.");t.innerError=e,n(t)}else n()})})})},o)},BlobUploadClient}();t.BlobUploadClient=c},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function BlobUploadResult(e,t,r){this.isSuccess=e,this.statusCode=t,this.statusDescription=r}return BlobUploadResult.fromAzureStorageCallbackArgs=function(e,t,r){if(!(e||t&&r))throw new ReferenceError("if err is null, body and response must be supplied");var n;e?n=new BlobUploadResult(!1,r?r.statusCode:-1,r?r.body:e.message):n=new BlobUploadResult(!0,r.statusCode,r.body);return n},BlobUploadResult}();t.BlobUploadResult=n},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(4),i=r(4),o=function(){function BlobUploader(e){this.storageApi=e||null}return BlobUploader.prototype.uploadToBlob=function(e,t,o,s){var a=this;i.tripleValueCallbackToPromise(function(i){if(!e)throw new ReferenceError("blobInfo cannot be '"+e+"'");if(!t)throw new ReferenceError("stream cannot be '"+t+"'");if(!o)throw new ReferenceError("streamLength cannot be '"+o+"'");if(!(e.hostName&&e.containerName&&e.blobName&&e.sasToken))throw new n.errors.ArgumentError("Invalid upload parameters");a.storageApi||(a.storageApi=r(646)),a.storageApi.createBlobServiceWithSas(e.hostName,e.sasToken).createBlockBlobFromStream(e.containerName,e.blobName,t,o,i)},function(e,t){return{body:e,result:t}},s)},BlobUploader}();t.BlobUploader=o},function(e,t,r){(t=e.exports).generateDevelopmentStorageCredentials=function(e){var t="UseDevelopmentStorage=true;";return e&&(t+="DevelopmentStorageProxyUri="+e),t};var n=r(647);t.TableService=n,t.TableQuery=r(355),t.TableBatch=r(828),t.TableUtilities=r(122),t.createTableService=function(e,t,r){return new n(e,t,r)},t.createTableServiceWithSas=function(e,t){return new n(null,null,e,t)};var i=r(829);t.BlobService=i,t.BlobUtilities=r(121),t.createBlobService=function(e,t,r){return new i(e,t,r,null)},t.createBlobServiceWithSas=function(e,t){return new i(null,null,e,t)},t.createBlobServiceWithTokenCredential=function(e,t){return new i(null,null,e,null,null,t)},t.createBlobServiceAnonymous=function(e){return new i(null,null,e,null)};var o=r(840);t.FileService=o,t.FileUtilities=r(331),t.createFileService=function(e,t,r){return new o(e,t,r)},t.createFileServiceWithSas=function(e,t){return new o(null,null,e,t)};var s=r(846);t.QueueService=s,t.QueueUtilities=r(849),t.QueueMessageEncoder=r(356),t.createQueueService=function(e,t,r){return new s(e,t,r)},t.createQueueServiceWithSas=function(e,t){return new s(null,null,e,t)},t.createQueueServiceWithTokenCredential=function(e,t){return new s(null,null,e,null,null,t)};var a=r(206),c=a.StorageServiceClient,u=a.SharedKey;t.generateAccountSharedAccessSignature=function(e,t,r){var n=c.getStorageSettings(e,t);return new u(n._name,n._key).generateAccountSignedQueryString(r)},t.Constants=a.Constants,t.StorageUtilities=a.StorageUtilities,t.AccessCondition=a.AccessCondition,t.SR=a.SR,t.StorageServiceClient=c,t.Logger=a.Logger,t.WebResource=a.WebResource,t.Validate=a.validate,t.date=a.date,t.TokenCredential=a.TokenCredential,t.LinearRetryPolicyFilter=a.LinearRetryPolicyFilter,t.ExponentialRetryPolicyFilter=a.ExponentialRetryPolicyFilter,t.RetryPolicyFilter=a.RetryPolicyFilter},function(e,t,r){var n=r(1),i=r(39),o=r(29),s=r(20),a=s.util,c=s.validate,u=s.SR,l=s.StorageServiceClient,p=r(825),d=r(352),h=r(355),f=s.WebResource,m=s.Constants,g=m.QueryStringConstants,y=m.HeaderConstants,v=m.TableConstants,b=m.RequestLocationMode,_=r(826),w=r(205),E=r(827),S=s.ServiceStatsParser,C=s.AclResult,x=r(122);function TableService(e,t,r,n,i){var o=l.getStorageSettings(e,t,r,n,i);if(TableService.super_.call(this,o._name,o._key,o._tableEndpoint,o._usePathStyleUri,o._sasToken),this.anonymous)throw new Error(u.ANONYMOUS_ACCESS_BLOBSERVICE_ONLY);this.storageAccount&&this.storageAccessKey&&(this.storageCredentials=new p(this.storageAccount,this.storageAccessKey,this.usePathStyleUri)),this.defaultPayloadFormat=x.PayloadFormat.MINIMAL_METADATA}n.inherits(TableService,l),TableService.prototype.getServiceStats=function(e,t){var r;a.normalizeArgs(e,t,function(e,n){r=e,t=n}),c.validateArgs("getServiceStats",function(e){e.callback(t)});var n=i(!0,{},r);n.requestLocationMode=m.RequestLocationMode.PRIMARY_OR_SECONDARY;var o=f.get().withQueryOption(g.COMP,"stats").withQueryOption(g.RESTYPE,"service");this.performRequest(o,null,n,function(e,r){e.serviceStatsResult=null,e.error||(e.serviceStatsResult=S.parse(e.response.body.StorageServiceStats));r(e,function(e){t(e.error,e.serviceStatsResult,e.response)})})},TableService.prototype.getServiceProperties=function(e,t){return this.getAccountServiceProperties(e,t)},TableService.prototype.setServiceProperties=function(e,t,r){return this.setAccountServiceProperties(e,t,r)},TableService.prototype.listTablesSegmented=function(e,t,r){this.listTablesSegmentedWithPrefix(null,e,t,r)},TableService.prototype.listTablesSegmentedWithPrefix=function(e,t,r,n){var o;a.normalizeArgs(r,n,function(e,t){o=e,n=t}),c.validateArgs("listTables",function(e){e.callback(n)});var s=i(!0,{},o);s.payloadFormat=s.payloadFormat||this.defaultPayloadFormat;var u=f.get(v.TABLE_SERVICE_TABLE_NAME);if(d.setTableRequestHeadersAndBody(u,null,s.payloadFormat),a.objectIsNull(t)||u.withQueryOption(v.NEXT_TABLE_NAME,t.nextTableName),!a.objectIsNull(e)){var l=(new h).where(v.TABLE_NAME+" >= ?",e).and(v.TABLE_NAME+" < ?",e+"{");u.withQueryOption(g.FILTER,l.toQueryObject().$filter)}if(!a.objectIsNull(s.maxResults)){l=(new h).top(s.maxResults);u.withQueryOption(g.TOP,l.toQueryObject().$top)}s.requestLocationMode=a.getNextListingLocationMode(t);this.performRequest(u,null,s,function(e,t){e.listTablesResult=null,e.error||(e.listTablesResult={entries:null,continuationToken:null},e.listTablesResult.entries=_.parse(e.response),e.response.headers[v.CONTINUATION_NEXT_TABLE_NAME]&&!a.objectIsEmpty(e.response.headers[v.CONTINUATION_NEXT_TABLE_NAME])&&(e.listTablesResult.continuationToken={nextTableName:null,targetLocation:null},e.listTablesResult.continuationToken.nextTableName=e.response.headers[v.CONTINUATION_NEXT_TABLE_NAME],e.listTablesResult.continuationToken.targetLocation=e.targetLocation));t(e,function(e){n(e.error,e.listTablesResult,e.response)})})},TableService.prototype.getTableAcl=function(e,t,r){var n;a.normalizeArgs(t,r,function(e,t){n=e,r=t}),c.validateArgs("getTableAcl",function(t){t.string(e,"table"),t.tableNameIsValid(e),t.callback(r)});var o=i(!0,{},n);o.requestLocationMode=m.RequestLocationMode.PRIMARY_OR_SECONDARY;var s=f.get(e).withQueryOption(g.COMP,"acl");this.performRequest(s,null,o,function(t,n){t.tableResult=null,t.error||(t.tableResult=new _(e),t.tableResult.signedIdentifiers=C.parse(t.response.body));n(t,function(e){r(e.error,e.tableResult,e.response)})})},TableService.prototype.setTableAcl=function(e,t,r,n){var s;a.normalizeArgs(r,n,function(e,t){s=e,n=t}),c.validateArgs("setTableAcl",function(t){t.string(e,"table"),t.tableNameIsValid(e),t.callback(n)});var l=i(!0,{},s),p=null;if(t){if(o.isArray(t))throw new TypeError(u.INVALID_SIGNED_IDENTIFIERS);p=C.serialize(t)}var d=f.put(e).withQueryOption(g.COMP,"acl").withHeader(y.CONTENT_LENGTH,a.objectIsNull(p)?0:Buffer.byteLength(p)).withBody(p);this.performRequest(d,d.body,l,function(r,i){r.tableResult=null,r.error||(r.tableResult=new _(e),t&&(r.tableResult.signedIdentifiers=t));i(r,function(e){n(e.error,e.tableResult,e.response)})})},TableService.prototype.generateSharedAccessSignature=function(e,t){if(!this.storageCredentials||!this.storageCredentials.generateSignedQueryString)throw new Error(u.CANNOT_CREATE_SAS_WITHOUT_ACCOUNT_KEY);c.validateArgs("generateSharedAccessSignature",function(r){r.string(e,"table"),r.tableNameIsValid(e),r.object(t,"sharedAccessPolicy")});var r=e.toLowerCase();return this.storageCredentials.generateSignedQueryString(m.ServiceType.Table,r,t,null,{tableName:r})},TableService.prototype.doesTableExist=function(e,t,r){this._doesTableExist(e,!1,t,r)},TableService.prototype.createTable=function(e,t,r){var n;a.normalizeArgs(t,r,function(e,t){n=e,r=t}),c.validateArgs("createTable",function(t){t.string(e,"table"),t.tableNameIsValid(e),t.callback(r)});var o=i(!0,{},n),s=_.serialize(e),u=f.post("Tables").withHeader(y.PREFER,y.PREFER_NO_CONTENT);d.setTableRequestHeadersAndBody(u,s,this.defaultPayloadFormat);this.performRequest(u,u.body,o,function(t,n){t.tableResponse={},t.tableResponse.isSuccessful=!t.error,t.tableResponse.statusCode=null===t.response||void 0===t.response?void 0:t.response.statusCode,t.error||(t.tableResponse.TableName=e);n(t,function(e){r(e.error,e.tableResponse,e.response)})})},TableService.prototype.createTableIfNotExists=function(e,t,r){var n;a.normalizeArgs(t,r,function(e,t){n=e,r=t}),c.validateArgs("createTableIfNotExists",function(t){t.string(e,"table"),t.tableNameIsValid(e),t.callback(r)});var o=i(!0,{},n),s=this;s._doesTableExist(e,!0,o,function(t,n,i){var a=n.exists;n.created=!1,delete n.exists,t?r(t,n,i):a?(i.isSuccessful=!0,r(t,n,i)):s.createTable(e,o,function(e,t,n){e?e&&e.statusCode===m.HttpConstants.HttpResponseCodes.Conflict&&e.code===m.TableErrorCodeStrings.TABLE_ALREADY_EXISTS&&(e=null,t.created=!1,t.isSuccessful=!0):t.created=!0,r(e,t,n)})})},TableService.prototype.deleteTable=function(e,t,r){var n;a.normalizeArgs(t,r,function(e,t){n=e,r=t}),c.validateArgs("deleteTable",function(t){t.string(e,"table"),t.tableNameIsValid(e),t.callback(r)});var o=i(!0,{},n),s=f.del("Tables('"+e+"')");d.setTableRequestHeadersAndBody(s,null,this.defaultPayloadFormat);this.performRequest(s,null,o,function(e,t){t(e,function(e){r(e.error,e.response)})})},TableService.prototype.deleteTableIfExists=function(e,t,r){var n;a.normalizeArgs(t,r,function(e,t){n=e,r=t}),c.validateArgs("deleteTableIfExists",function(t){t.string(e,"table"),t.tableNameIsValid(e),t.callback(r)});var o=i(!0,{},n),s=this;s._doesTableExist(e,!0,o,function(t,n,i){t?r(t,n.exists,i):n.exists?s.deleteTable(e,o,function(e,t){var n;e?e&&e.statusCode===m.HttpConstants.HttpResponseCodes.NotFound&&e.code===m.StorageErrorCodeStrings.RESOURCE_NOT_FOUND&&(n=!1,e=null,t.isSuccessful=!0):n=!0,r(e,n,t)}):(i.isSuccessful=!0,r(t,!1,i))})},TableService.prototype.queryEntities=function(e,t,r,n,o){var s;a.normalizeArgs(n,o,function(e,t){s=e,o=t}),c.validateArgs("queryEntities",function(t){t.string(e,"table"),t.callback(o)});var u=i(!0,{},s);u.payloadFormat=u.payloadFormat||this.defaultPayloadFormat;var l=f.get(e);if(d.setTableRequestHeadersAndBody(l,null,u.payloadFormat),t){var p=t.toQueryObject();Object.keys(p).forEach(function(e){l.withQueryOption(e,p[e])})}a.objectIsNull(r)||(l.withQueryOption(v.NEXT_PARTITION_KEY,r.nextPartitionKey),l.withQueryOption(v.NEXT_ROW_KEY,r.nextRowKey)),u.requestLocationMode=a.getNextListingLocationMode(r);this.performRequest(l,null,u,function(e,t){if(e.queryEntitiesResult=null,!e.error){e.queryEntitiesResult={entries:null,continuationToken:null},e.queryEntitiesResult.entries=w.parseQuery(e.response,u.autoResolveProperties,u.propertyResolver,u.entityResolver);var r={nextPartitionKey:e.response.headers[v.CONTINUATION_NEXT_PARTITION_KEY],nextRowKey:e.response.headers[v.CONTINUATION_NEXT_ROW_KEY],targetLocation:e.targetLocation};a.IsNullOrEmptyOrUndefinedOrWhiteSpace(r.nextPartitionKey)||(e.queryEntitiesResult.continuationToken=r)}t(e,function(e){o(e.error,e.queryEntitiesResult,e.response)})})},TableService.prototype.retrieveEntity=function(e,t,r,n,i){var o={PartitionKey:{_:t,$:"Edm.String"},RowKey:{_:r,$:"Edm.String"}};c.validateArgs("retrieveEntity",function(e){e.stringAllowEmpty(t,"partitionKey"),e.stringAllowEmpty(r,"rowKey")}),this._performEntityOperation(v.Operations.RETRIEVE,e,o,n,i)},TableService.prototype.insertEntity=function(e,t,r,n){this._performEntityOperation(v.Operations.INSERT,e,t,r,n)},TableService.prototype.insertOrReplaceEntity=function(e,t,r,n){this._performEntityOperation(v.Operations.INSERT_OR_REPLACE,e,t,r,n)},TableService.prototype.replaceEntity=function(e,t,r,n){this._performEntityOperation(v.Operations.REPLACE,e,t,r,n)},TableService.prototype.mergeEntity=function(e,t,r,n){this._performEntityOperation(v.Operations.MERGE,e,t,r,n)},TableService.prototype.insertOrMergeEntity=function(e,t,r,n){this._performEntityOperation(v.Operations.INSERT_OR_MERGE,e,t,r,n)},TableService.prototype.deleteEntity=function(e,t,r,n){this._performEntityOperation(v.Operations.DELETE,e,t,r,n)},TableService.prototype.executeBatch=function(e,t,r,n){var o;if(a.normalizeArgs(r,n,function(e,t){o=e,n=t}),c.validateArgs("executeBatch",function(r){r.string(e,"table"),r.tableNameIsValid(e),r.object(t,"batch"),r.callback(n)}),!t.hasOperations())throw new Error(u.EMPTY_BATCH);var s=i(!0,{},o),l=new E(this,e,t.operations),p=l.constructWebResource(),d=l.serialize();p.withBody(d),p.withHeader(y.CONTENT_LENGTH,Buffer.byteLength(d,"utf8"));this.performRequest(p,p.body,s,function(e,t){var r=l.parse(e),i=!0;r&&r.length>0&&r.forEach(function(t){i&&!t.response.isSuccessful&&(e=t,i=!1)}),i&&(e.operationResponses=r);t(e,function(e){n(e.error,e.operationResponses,e.response)})})},TableService.prototype._doesTableExist=function(e,t,r,n){var o;a.normalizeArgs(r,n,function(e,t){o=e,n=t}),c.validateArgs("doesTableExist",function(t){t.string(e,"table"),t.tableNameIsValid(e),t.callback(n)});var s=i(!0,{},o);!1===t&&(s.requestLocationMode=b.PRIMARY_OR_SECONDARY);var u=f.get("Tables('"+e+"')");u.withHeader(y.ACCEPT,this.defaultPayloadFormat);this.performRequest(u,null,s,function(t,r){t.tableResult={},t.tableResult.isSuccessful=!t.error,t.tableResult.statusCode=null===t.response||void 0===t.response?void 0:t.response.statusCode,t.tableResult.TableName=e,t.error?t.error&&t.error.statusCode===m.HttpConstants.HttpResponseCodes.NotFound&&(t.error=null,t.tableResult.exists=!1,t.response.isSuccessful=!0):t.tableResult.exists=!0;r(t,function(e){n(e.error,e.tableResult,e.response)})})},TableService.prototype._performEntityOperation=function(e,t,r,n,o){var s;a.normalizeArgs(n,o,function(e,t){s=e,o=t}),c.validateArgs("entityOperation",function(e){e.string(t,"table"),e.tableNameIsValid(t),e.object(r,"entityDescriptor"),"string"!=typeof r.PartitionKey&&(e.object(r.PartitionKey,"entityDescriptor.PartitionKey"),e.stringAllowEmpty(r.PartitionKey._,"entityDescriptor.PartitionKey._")),"string"!=typeof r.RowKey&&(e.object(r.RowKey,"entityDescriptor.RowKey"),e.stringAllowEmpty(r.RowKey._,"entityDescriptor.RowKey._")),e.callback(o)});var u=i(!0,{},s);u.payloadFormat=u.payloadFormat||this.defaultPayloadFormat;var l=d.constructEntityWebResource(e,t,r,u);this.performRequest(l,l.body,u,function(t,r){var n;e===v.Operations.DELETE?n=function(e){o(e.error,e.response)}:(t.entityResponse=null,t.error||(t.entityResponse=w.parseEntity(t.response,u.autoResolveProperties,u.propertyResolver,u.entityResolver)),n=function(e){o(e.error,e.entityResponse,e.response)}),r(t,n)})},TableService.prototype.getUrl=function(e,t,r){return c.validateArgs("getUrl",function(t){t.string(e,"table"),t.tableNameIsValid(e)}),this._getUrl(e,t,r)},e.exports=TableService},function(e,t,r){"use strict";r(185).prototype.assertLegalChar=function(e){var t,r;if(t=/[\u0000-\u0008\u000B-\u000C\u000E-\u001F\uFFFE-\uFFFF]/,r=e.match(t))throw new Error("Invalid character ("+r+") in string: "+e);return e}},function(e,t,r){(function(){var t,n,i,o,s={}.hasOwnProperty;o=r(75).isPlainObject,t=r(40),i=r(185),n=r(186),e.exports=function(e){function XMLDocument(e){XMLDocument.__super__.constructor.call(this,null),e||(e={}),e.writer||(e.writer=new n),this.options=e,this.stringify=new i(e),this.isDocument=!0}return function(e,t){for(var r in t)s.call(t,r)&&(e[r]=t[r]);function ctor(){this.constructor=e}ctor.prototype=t.prototype,e.prototype=new ctor,e.__super__=t.prototype}(XMLDocument,t),XMLDocument.prototype.end=function(e){var t;return e?o(e)&&(t=e,e=this.options.writer.set(t)):e=this.options.writer,e.document(this)},XMLDocument.prototype.toString=function(e){return this.options.writer.set(e).document(this)},XMLDocument}()}).call(this)},function(e,t,r){(function(){var t,n,i,o,s,a,c,u,l,p,d,h,f,m,g,y,v,b,_,w={}.hasOwnProperty;_=r(75),v=_.isObject,y=_.isFunction,b=_.isPlainObject,p=r(141),n=r(142),i=r(143),h=r(150),g=r(151),d=r(152),u=r(144),l=r(145),o=r(146),a=r(147),s=r(148),c=r(149),t=r(294),m=r(185),f=r(186),e.exports=function(){function XMLDocumentCB(e,t,r){var n;e||(e={}),e.writer?b(e.writer)&&(n=e.writer,e.writer=new f(n)):e.writer=new f(e),this.options=e,this.writer=e.writer,this.stringify=new m(e),this.onDataCallback=t||function(){},this.onEndCallback=r||function(){},this.currentNode=null,this.currentLevel=-1,this.openTags={},this.documentStarted=!1,this.documentCompleted=!1,this.root=null}return XMLDocumentCB.prototype.node=function(e,t,r){var n;if(null==e)throw new Error("Missing node name");if(this.root&&-1===this.currentLevel)throw new Error("Document can only have one root node");return this.openCurrent(),e=e.valueOf(),null==t&&(t={}),t=t.valueOf(),v(t)||(r=(n=[t,r])[0],t=n[1]),this.currentNode=new p(this,e,t),this.currentNode.children=!1,this.currentLevel++,this.openTags[this.currentLevel]=this.currentNode,null!=r&&this.text(r),this},XMLDocumentCB.prototype.element=function(e,t,r){return this.currentNode&&this.currentNode instanceof l?this.dtdElement.apply(this,arguments):this.node(e,t,r)},XMLDocumentCB.prototype.attribute=function(e,r){var n,i;if(!this.currentNode||this.currentNode.children)throw new Error("att() can only be used immediately after an ele() call in callback mode");if(null!=e&&(e=e.valueOf()),v(e))for(n in e)w.call(e,n)&&(i=e[n],this.attribute(n,i));else y(r)&&(r=r.apply()),this.options.skipNullAttributes&&null==r||(this.currentNode.attributes[e]=new t(this,e,r));return this},XMLDocumentCB.prototype.text=function(e){var t;return this.openCurrent(),t=new g(this,e),this.onData(this.writer.text(t,this.currentLevel+1)),this},XMLDocumentCB.prototype.cdata=function(e){var t;return this.openCurrent(),t=new n(this,e),this.onData(this.writer.cdata(t,this.currentLevel+1)),this},XMLDocumentCB.prototype.comment=function(e){var t;return this.openCurrent(),t=new i(this,e),this.onData(this.writer.comment(t,this.currentLevel+1)),this},XMLDocumentCB.prototype.raw=function(e){var t;return this.openCurrent(),t=new h(this,e),this.onData(this.writer.raw(t,this.currentLevel+1)),this},XMLDocumentCB.prototype.instruction=function(e,t){var r,n,i,o,s;if(this.openCurrent(),null!=e&&(e=e.valueOf()),null!=t&&(t=t.valueOf()),Array.isArray(e))for(r=0,o=e.length;r<o;r++)n=e[r],this.instruction(n);else if(v(e))for(n in e)w.call(e,n)&&(i=e[n],this.instruction(n,i));else y(t)&&(t=t.apply()),s=new d(this,e,t),this.onData(this.writer.processingInstruction(s,this.currentLevel+1));return this},XMLDocumentCB.prototype.declaration=function(e,t,r){var n;if(this.openCurrent(),this.documentStarted)throw new Error("declaration() must be the first node");return n=new u(this,e,t,r),this.onData(this.writer.declaration(n,this.currentLevel+1)),this},XMLDocumentCB.prototype.doctype=function(e,t,r){if(this.openCurrent(),null==e)throw new Error("Missing root node name");if(this.root)throw new Error("dtd() must come before the root node");return this.currentNode=new l(this,t,r),this.currentNode.rootNodeName=e,this.currentNode.children=!1,this.currentLevel++,this.openTags[this.currentLevel]=this.currentNode,this},XMLDocumentCB.prototype.dtdElement=function(e,t){var r;return this.openCurrent(),r=new s(this,e,t),this.onData(this.writer.dtdElement(r,this.currentLevel+1)),this},XMLDocumentCB.prototype.attList=function(e,t,r,n,i){var s;return this.openCurrent(),s=new o(this,e,t,r,n,i),this.onData(this.writer.dtdAttList(s,this.currentLevel+1)),this},XMLDocumentCB.prototype.entity=function(e,t){var r;return this.openCurrent(),r=new a(this,!1,e,t),this.onData(this.writer.dtdEntity(r,this.currentLevel+1)),this},XMLDocumentCB.prototype.pEntity=function(e,t){var r;return this.openCurrent(),r=new a(this,!0,e,t),this.onData(this.writer.dtdEntity(r,this.currentLevel+1)),this},XMLDocumentCB.prototype.notation=function(e,t){var r;return this.openCurrent(),r=new c(this,e,t),this.onData(this.writer.dtdNotation(r,this.currentLevel+1)),this},XMLDocumentCB.prototype.up=function(){if(this.currentLevel<0)throw new Error("The document node has no parent");return this.currentNode?(this.currentNode.children?this.closeNode(this.currentNode):this.openNode(this.currentNode),this.currentNode=null):this.closeNode(this.openTags[this.currentLevel]),delete this.openTags[this.currentLevel],this.currentLevel--,this},XMLDocumentCB.prototype.end=function(){for(;this.currentLevel>=0;)this.up();return this.onEnd()},XMLDocumentCB.prototype.openCurrent=function(){if(this.currentNode)return this.currentNode.children=!0,this.openNode(this.currentNode)},XMLDocumentCB.prototype.openNode=function(e){if(!e.isOpen)return!this.root&&0===this.currentLevel&&e instanceof p&&(this.root=e),this.onData(this.writer.openNode(e,this.currentLevel)),e.isOpen=!0},XMLDocumentCB.prototype.closeNode=function(e){if(!e.isClosed)return this.onData(this.writer.closeNode(e,this.currentLevel)),e.isClosed=!0},XMLDocumentCB.prototype.onData=function(e){return this.documentStarted=!0,this.onDataCallback(e)},XMLDocumentCB.prototype.onEnd=function(){return this.documentCompleted=!0,this.onEndCallback()},XMLDocumentCB.prototype.ele=function(){return this.element.apply(this,arguments)},XMLDocumentCB.prototype.nod=function(e,t,r){return this.node(e,t,r)},XMLDocumentCB.prototype.txt=function(e){return this.text(e)},XMLDocumentCB.prototype.dat=function(e){return this.cdata(e)},XMLDocumentCB.prototype.com=function(e){return this.comment(e)},XMLDocumentCB.prototype.ins=function(e,t){return this.instruction(e,t)},XMLDocumentCB.prototype.dec=function(e,t,r){return this.declaration(e,t,r)},XMLDocumentCB.prototype.dtd=function(e,t,r){return this.doctype(e,t,r)},XMLDocumentCB.prototype.e=function(e,t,r){return this.element(e,t,r)},XMLDocumentCB.prototype.n=function(e,t,r){return this.node(e,t,r)},XMLDocumentCB.prototype.t=function(e){return this.text(e)},XMLDocumentCB.prototype.d=function(e){return this.cdata(e)},XMLDocumentCB.prototype.c=function(e){return this.comment(e)},XMLDocumentCB.prototype.r=function(e){return this.raw(e)},XMLDocumentCB.prototype.i=function(e,t){return this.instruction(e,t)},XMLDocumentCB.prototype.att=function(){return this.currentNode&&this.currentNode instanceof l?this.attList.apply(this,arguments):this.attribute.apply(this,arguments)},XMLDocumentCB.prototype.a=function(){return this.currentNode&&this.currentNode instanceof l?this.attList.apply(this,arguments):this.attribute.apply(this,arguments)},XMLDocumentCB.prototype.ent=function(e,t){return this.entity(e,t)},XMLDocumentCB.prototype.pent=function(e,t){return this.pEntity(e,t)},XMLDocumentCB.prototype.not=function(e,t){return this.notation(e,t)},XMLDocumentCB}()}).call(this)},function(e,t,r){(function(){var t,n,i,o,s,a,c,u,l,p,d,h,f,m={}.hasOwnProperty;c=r(144),u=r(145),t=r(142),n=r(143),l=r(141),d=r(150),h=r(151),p=r(152),i=r(146),o=r(148),s=r(147),a=r(149),f=r(295),e.exports=function(e){function XMLStreamWriter(e,t){XMLStreamWriter.__super__.constructor.call(this,t),this.stream=e}return function(e,t){for(var r in t)m.call(t,r)&&(e[r]=t[r]);function ctor(){this.constructor=e}ctor.prototype=t.prototype,e.prototype=new ctor,e.__super__=t.prototype}(XMLStreamWriter,f),XMLStreamWriter.prototype.document=function(e){var t,r,i,o,s,a,l,d;for(r=0,o=(a=e.children).length;r<o;r++)(t=a[r]).isLastRootNode=!1;for(e.children[e.children.length-1].isLastRootNode=!0,d=[],i=0,s=(l=e.children).length;i<s;i++)switch(t=l[i],!1){case!(t instanceof c):d.push(this.declaration(t));break;case!(t instanceof u):d.push(this.docType(t));break;case!(t instanceof n):d.push(this.comment(t));break;case!(t instanceof p):d.push(this.processingInstruction(t));break;default:d.push(this.element(t))}return d},XMLStreamWriter.prototype.attribute=function(e){return this.stream.write(" "+e.name+'="'+e.value+'"')},XMLStreamWriter.prototype.cdata=function(e,t){return this.stream.write(this.space(t)+"<![CDATA["+e.text+"]]>"+this.endline(e))},XMLStreamWriter.prototype.comment=function(e,t){return this.stream.write(this.space(t)+"\x3c!-- "+e.text+" --\x3e"+this.endline(e))},XMLStreamWriter.prototype.declaration=function(e,t){return this.stream.write(this.space(t)),this.stream.write('<?xml version="'+e.version+'"'),null!=e.encoding&&this.stream.write(' encoding="'+e.encoding+'"'),null!=e.standalone&&this.stream.write(' standalone="'+e.standalone+'"'),this.stream.write(this.spacebeforeslash+"?>"),this.stream.write(this.endline(e))},XMLStreamWriter.prototype.docType=function(e,r){var c,u,l,d;if(r||(r=0),this.stream.write(this.space(r)),this.stream.write("<!DOCTYPE "+e.root().name),e.pubID&&e.sysID?this.stream.write(' PUBLIC "'+e.pubID+'" "'+e.sysID+'"'):e.sysID&&this.stream.write(' SYSTEM "'+e.sysID+'"'),e.children.length>0){for(this.stream.write(" ["),this.stream.write(this.endline(e)),u=0,l=(d=e.children).length;u<l;u++)switch(c=d[u],!1){case!(c instanceof i):this.dtdAttList(c,r+1);break;case!(c instanceof o):this.dtdElement(c,r+1);break;case!(c instanceof s):this.dtdEntity(c,r+1);break;case!(c instanceof a):this.dtdNotation(c,r+1);break;case!(c instanceof t):this.cdata(c,r+1);break;case!(c instanceof n):this.comment(c,r+1);break;case!(c instanceof p):this.processingInstruction(c,r+1);break;default:throw new Error("Unknown DTD node type: "+c.constructor.name)}this.stream.write("]")}return this.stream.write(this.spacebeforeslash+">"),this.stream.write(this.endline(e))},XMLStreamWriter.prototype.element=function(e,r){var i,o,s,a,c,u,f,g;for(c in r||(r=0),g=this.space(r),this.stream.write(g+"<"+e.name),u=e.attributes)m.call(u,c)&&(i=u[c],this.attribute(i));if(0===e.children.length||e.children.every(function(e){return""===e.value}))this.allowEmpty?this.stream.write("></"+e.name+">"):this.stream.write(this.spacebeforeslash+"/>");else if(this.pretty&&1===e.children.length&&null!=e.children[0].value)this.stream.write(">"),this.stream.write(e.children[0].value),this.stream.write("</"+e.name+">");else{for(this.stream.write(">"+this.newline),s=0,a=(f=e.children).length;s<a;s++)switch(o=f[s],!1){case!(o instanceof t):this.cdata(o,r+1);break;case!(o instanceof n):this.comment(o,r+1);break;case!(o instanceof l):this.element(o,r+1);break;case!(o instanceof d):this.raw(o,r+1);break;case!(o instanceof h):this.text(o,r+1);break;case!(o instanceof p):this.processingInstruction(o,r+1);break;default:throw new Error("Unknown XML node type: "+o.constructor.name)}this.stream.write(g+"</"+e.name+">")}return this.stream.write(this.endline(e))},XMLStreamWriter.prototype.processingInstruction=function(e,t){return this.stream.write(this.space(t)+"<?"+e.target),e.value&&this.stream.write(" "+e.value),this.stream.write(this.spacebeforeslash+"?>"+this.endline(e))},XMLStreamWriter.prototype.raw=function(e,t){return this.stream.write(this.space(t)+e.value+this.endline(e))},XMLStreamWriter.prototype.text=function(e,t){return this.stream.write(this.space(t)+e.value+this.endline(e))},XMLStreamWriter.prototype.dtdAttList=function(e,t){return this.stream.write(this.space(t)+"<!ATTLIST "+e.elementName+" "+e.attributeName+" "+e.attributeType),"#DEFAULT"!==e.defaultValueType&&this.stream.write(" "+e.defaultValueType),e.defaultValue&&this.stream.write(' "'+e.defaultValue+'"'),this.stream.write(this.spacebeforeslash+">"+this.endline(e))},XMLStreamWriter.prototype.dtdElement=function(e,t){return this.stream.write(this.space(t)+"<!ELEMENT "+e.name+" "+e.value),this.stream.write(this.spacebeforeslash+">"+this.endline(e))},XMLStreamWriter.prototype.dtdEntity=function(e,t){return this.stream.write(this.space(t)+"<!ENTITY"),e.pe&&this.stream.write(" %"),this.stream.write(" "+e.name),e.value?this.stream.write(' "'+e.value+'"'):(e.pubID&&e.sysID?this.stream.write(' PUBLIC "'+e.pubID+'" "'+e.sysID+'"'):e.sysID&&this.stream.write(' SYSTEM "'+e.sysID+'"'),e.nData&&this.stream.write(" NDATA "+e.nData)),this.stream.write(this.spacebeforeslash+">"+this.endline(e))},XMLStreamWriter.prototype.dtdNotation=function(e,t){return this.stream.write(this.space(t)+"<!NOTATION "+e.name),e.pubID&&e.sysID?this.stream.write(' PUBLIC "'+e.pubID+'" "'+e.sysID+'"'):e.pubID?this.stream.write(' PUBLIC "'+e.pubID+'"'):e.sysID&&this.stream.write(' SYSTEM "'+e.sysID+'"'),this.stream.write(this.spacebeforeslash+">"+this.endline(e))},XMLStreamWriter.prototype.endline=function(e){return e.isLastRootNode?"":this.newline},XMLStreamWriter}()}).call(this)},function(e,t,r){!function(e){e.parser=function(e,t){return new SAXParser(e,t)},e.SAXParser=SAXParser,e.SAXStream=SAXStream,e.createStream=function createStream(e,t){return new SAXStream(e,t)},e.MAX_BUFFER_LENGTH=65536;var t=["comment","sgmlDecl","textNode","tagName","doctype","procInstName","procInstBody","entity","attribName","attribValue","cdata","script"];function SAXParser(r,n){if(!(this instanceof SAXParser))return new SAXParser(r,n);!function clearBuffers(e){for(var r=0,n=t.length;r<n;r++)e[t[r]]=""}(this),this.q=this.c="",this.bufferCheckPosition=e.MAX_BUFFER_LENGTH,this.opt=n||{},this.opt.lowercase=this.opt.lowercase||this.opt.lowercasetags,this.looseCase=this.opt.lowercase?"toLowerCase":"toUpperCase",this.tags=[],this.closed=this.closedRoot=this.sawRoot=!1,this.tag=this.error=null,this.strict=!!r,this.noscript=!(!r&&!this.opt.noscript),this.state=v.BEGIN,this.ENTITIES=Object.create(e.ENTITIES),this.attribList=[],this.opt.xmlns&&(this.ns=Object.create(m)),this.trackPosition=!1!==this.opt.position,this.trackPosition&&(this.position=this.line=this.column=0),emit(this,"onready")}e.EVENTS=["text","processinginstruction","sgmldeclaration","doctype","comment","attribute","opentag","closetag","opencdata","cdata","closecdata","error","end","ready","script","opennamespace","closenamespace"],Object.create||(Object.create=function(e){function f(){this.__proto__=e}return f.prototype=e,new f}),Object.getPrototypeOf||(Object.getPrototypeOf=function(e){return e.__proto__}),Object.keys||(Object.keys=function(e){var t=[];for(var r in e)e.hasOwnProperty(r)&&t.push(r);return t}),SAXParser.prototype={end:function(){end(this)},write:function write(r){if(this.error)throw this.error;if(this.closed)return error(this,"Cannot write after close. Assign an onready handler.");if(null===r)return end(this);var n=0,i="";for(;this.c=i=r.charAt(n++);)switch(this.trackPosition&&(this.position++,"\n"===i?(this.line++,this.column=0):this.column++),this.state){case v.BEGIN:"<"===i?(this.state=v.OPEN_WAKA,this.startTagPosition=this.position):not(o,i)&&(strictFail(this,"Non-whitespace before first tag."),this.textNode=i,this.state=v.TEXT);continue;case v.TEXT:if(this.sawRoot&&!this.closedRoot){for(var s=n-1;i&&"<"!==i&&"&"!==i;)(i=r.charAt(n++))&&this.trackPosition&&(this.position++,"\n"===i?(this.line++,this.column=0):this.column++);this.textNode+=r.substring(s,n-1)}"<"===i?(this.state=v.OPEN_WAKA,this.startTagPosition=this.position):(!not(o,i)||this.sawRoot&&!this.closedRoot||strictFail(this,"Text data outside of root node."),"&"===i?this.state=v.TEXT_ENTITY:this.textNode+=i);continue;case v.SCRIPT:"<"===i?this.state=v.SCRIPT_ENDING:this.script+=i;continue;case v.SCRIPT_ENDING:"/"===i?this.state=v.CLOSE_TAG:(this.script+="<"+i,this.state=v.SCRIPT);continue;case v.OPEN_WAKA:if("!"===i)this.state=v.SGML_DECL,this.sgmlDecl="";else if(is(o,i));else if(is(g,i))this.state=v.OPEN_TAG,this.tagName=i;else if("/"===i)this.state=v.CLOSE_TAG,this.tagName="";else if("?"===i)this.state=v.PROC_INST,this.procInstName=this.procInstBody="";else{if(strictFail(this,"Unencoded <"),this.startTagPosition+1<this.position){var a=this.position-this.startTagPosition;i=new Array(a).join(" ")+i}this.textNode+="<"+i,this.state=v.TEXT}continue;case v.SGML_DECL:(this.sgmlDecl+i).toUpperCase()===p?(emitNode(this,"onopencdata"),this.state=v.CDATA,this.sgmlDecl="",this.cdata=""):this.sgmlDecl+i==="--"?(this.state=v.COMMENT,this.comment="",this.sgmlDecl=""):(this.sgmlDecl+i).toUpperCase()===d?(this.state=v.DOCTYPE,(this.doctype||this.sawRoot)&&strictFail(this,"Inappropriately located doctype declaration"),this.doctype="",this.sgmlDecl=""):">"===i?(emitNode(this,"onsgmldeclaration",this.sgmlDecl),this.sgmlDecl="",this.state=v.TEXT):is(c,i)?(this.state=v.SGML_DECL_QUOTED,this.sgmlDecl+=i):this.sgmlDecl+=i;continue;case v.SGML_DECL_QUOTED:i===this.q&&(this.state=v.SGML_DECL,this.q=""),this.sgmlDecl+=i;continue;case v.DOCTYPE:">"===i?(this.state=v.TEXT,emitNode(this,"ondoctype",this.doctype),this.doctype=!0):(this.doctype+=i,"["===i?this.state=v.DOCTYPE_DTD:is(c,i)&&(this.state=v.DOCTYPE_QUOTED,this.q=i));continue;case v.DOCTYPE_QUOTED:this.doctype+=i,i===this.q&&(this.q="",this.state=v.DOCTYPE);continue;case v.DOCTYPE_DTD:this.doctype+=i,"]"===i?this.state=v.DOCTYPE:is(c,i)&&(this.state=v.DOCTYPE_DTD_QUOTED,this.q=i);continue;case v.DOCTYPE_DTD_QUOTED:this.doctype+=i,i===this.q&&(this.state=v.DOCTYPE_DTD,this.q="");continue;case v.COMMENT:"-"===i?this.state=v.COMMENT_ENDING:this.comment+=i;continue;case v.COMMENT_ENDING:"-"===i?(this.state=v.COMMENT_ENDED,this.comment=textopts(this.opt,this.comment),this.comment&&emitNode(this,"oncomment",this.comment),this.comment=""):(this.comment+="-"+i,this.state=v.COMMENT);continue;case v.COMMENT_ENDED:">"!==i?(strictFail(this,"Malformed comment"),this.comment+="--"+i,this.state=v.COMMENT):this.state=v.TEXT;continue;case v.CDATA:"]"===i?this.state=v.CDATA_ENDING:this.cdata+=i;continue;case v.CDATA_ENDING:"]"===i?this.state=v.CDATA_ENDING_2:(this.cdata+="]"+i,this.state=v.CDATA);continue;case v.CDATA_ENDING_2:">"===i?(this.cdata&&emitNode(this,"oncdata",this.cdata),emitNode(this,"onclosecdata"),this.cdata="",this.state=v.TEXT):"]"===i?this.cdata+="]":(this.cdata+="]]"+i,this.state=v.CDATA);continue;case v.PROC_INST:"?"===i?this.state=v.PROC_INST_ENDING:is(o,i)?this.state=v.PROC_INST_BODY:this.procInstName+=i;continue;case v.PROC_INST_BODY:if(!this.procInstBody&&is(o,i))continue;"?"===i?this.state=v.PROC_INST_ENDING:this.procInstBody+=i;continue;case v.PROC_INST_ENDING:">"===i?(emitNode(this,"onprocessinginstruction",{name:this.procInstName,body:this.procInstBody}),this.procInstName=this.procInstBody="",this.state=v.TEXT):(this.procInstBody+="?"+i,this.state=v.PROC_INST_BODY);continue;case v.OPEN_TAG:is(y,i)?this.tagName+=i:(newTag(this),">"===i?openTag(this):"/"===i?this.state=v.OPEN_TAG_SLASH:(not(o,i)&&strictFail(this,"Invalid character in tag name"),this.state=v.ATTRIB));continue;case v.OPEN_TAG_SLASH:">"===i?(openTag(this,!0),closeTag(this)):(strictFail(this,"Forward-slash in opening tag not followed by >"),this.state=v.ATTRIB);continue;case v.ATTRIB:if(is(o,i))continue;">"===i?openTag(this):"/"===i?this.state=v.OPEN_TAG_SLASH:is(g,i)?(this.attribName=i,this.attribValue="",this.state=v.ATTRIB_NAME):strictFail(this,"Invalid attribute name");continue;case v.ATTRIB_NAME:"="===i?this.state=v.ATTRIB_VALUE:">"===i?(strictFail(this,"Attribute without value"),this.attribValue=this.attribName,attrib(this),openTag(this)):is(o,i)?this.state=v.ATTRIB_NAME_SAW_WHITE:is(y,i)?this.attribName+=i:strictFail(this,"Invalid attribute name");continue;case v.ATTRIB_NAME_SAW_WHITE:if("="===i)this.state=v.ATTRIB_VALUE;else{if(is(o,i))continue;strictFail(this,"Attribute without value"),this.tag.attributes[this.attribName]="",this.attribValue="",emitNode(this,"onattribute",{name:this.attribName,value:""}),this.attribName="",">"===i?openTag(this):is(g,i)?(this.attribName=i,this.state=v.ATTRIB_NAME):(strictFail(this,"Invalid attribute name"),this.state=v.ATTRIB)}continue;case v.ATTRIB_VALUE:if(is(o,i))continue;is(c,i)?(this.q=i,this.state=v.ATTRIB_VALUE_QUOTED):(strictFail(this,"Unquoted attribute value"),this.state=v.ATTRIB_VALUE_UNQUOTED,this.attribValue=i);continue;case v.ATTRIB_VALUE_QUOTED:if(i!==this.q){"&"===i?this.state=v.ATTRIB_VALUE_ENTITY_Q:this.attribValue+=i;continue}attrib(this),this.q="",this.state=v.ATTRIB_VALUE_CLOSED;continue;case v.ATTRIB_VALUE_CLOSED:is(o,i)?this.state=v.ATTRIB:">"===i?openTag(this):"/"===i?this.state=v.OPEN_TAG_SLASH:is(g,i)?(strictFail(this,"No whitespace between attributes"),this.attribName=i,this.attribValue="",this.state=v.ATTRIB_NAME):strictFail(this,"Invalid attribute name");continue;case v.ATTRIB_VALUE_UNQUOTED:if(not(l,i)){"&"===i?this.state=v.ATTRIB_VALUE_ENTITY_U:this.attribValue+=i;continue}attrib(this),">"===i?openTag(this):this.state=v.ATTRIB;continue;case v.CLOSE_TAG:if(this.tagName)">"===i?closeTag(this):is(y,i)?this.tagName+=i:this.script?(this.script+="</"+this.tagName,this.tagName="",this.state=v.SCRIPT):(not(o,i)&&strictFail(this,"Invalid tagname in closing tag"),this.state=v.CLOSE_TAG_SAW_WHITE);else{if(is(o,i))continue;not(g,i)?this.script?(this.script+="</"+i,this.state=v.SCRIPT):strictFail(this,"Invalid tagname in closing tag."):this.tagName=i}continue;case v.CLOSE_TAG_SAW_WHITE:if(is(o,i))continue;">"===i?closeTag(this):strictFail(this,"Invalid characters in closing tag");continue;case v.TEXT_ENTITY:case v.ATTRIB_VALUE_ENTITY_Q:case v.ATTRIB_VALUE_ENTITY_U:switch(this.state){case v.TEXT_ENTITY:var h=v.TEXT,f="textNode";break;case v.ATTRIB_VALUE_ENTITY_Q:var h=v.ATTRIB_VALUE_QUOTED,f="attribValue";break;case v.ATTRIB_VALUE_ENTITY_U:var h=v.ATTRIB_VALUE_UNQUOTED,f="attribValue"}";"===i?(this[f]+=parseEntity(this),this.entity="",this.state=h):is(u,i)?this.entity+=i:(strictFail(this,"Invalid character entity"),this[f]+="&"+this.entity+i,this.entity="",this.state=h);continue;default:throw new Error(this,"Unknown state: "+this.state)}this.position>=this.bufferCheckPosition&&function checkBufferLength(r){for(var n=Math.max(e.MAX_BUFFER_LENGTH,10),i=0,o=0,s=t.length;o<s;o++){var a=r[t[o]].length;if(a>n)switch(t[o]){case"textNode":closeText(r);break;case"cdata":emitNode(r,"oncdata",r.cdata),r.cdata="";break;case"script":emitNode(r,"onscript",r.script),r.script="";break;default:error(r,"Max buffer length exceeded: "+t[o])}i=Math.max(i,a)}r.bufferCheckPosition=e.MAX_BUFFER_LENGTH-i+r.position}(this);return this},resume:function(){return this.error=null,this},close:function(){return this.write(null)},flush:function(){!function flushBuffers(e){closeText(e),""!==e.cdata&&(emitNode(e,"oncdata",e.cdata),e.cdata=""),""!==e.script&&(emitNode(e,"onscript",e.script),e.script="")}(this)}};try{var n=r(15).Stream}catch(e){n=function(){}}var i=e.EVENTS.filter(function(e){return"error"!==e&&"end"!==e});function SAXStream(e,t){if(!(this instanceof SAXStream))return new SAXStream(e,t);n.apply(this),this._parser=new SAXParser(e,t),this.writable=!0,this.readable=!0;var r=this;this._parser.onend=function(){r.emit("end")},this._parser.onerror=function(e){r.emit("error",e),r._parser.error=null},this._decoder=null,i.forEach(function(e){Object.defineProperty(r,"on"+e,{get:function(){return r._parser["on"+e]},set:function(t){if(!t)return r.removeAllListeners(e),r._parser["on"+e]=t;r.on(e,t)},enumerable:!0,configurable:!1})})}SAXStream.prototype=Object.create(n.prototype,{constructor:{value:SAXStream}}),SAXStream.prototype.write=function(e){if("function"==typeof Buffer&&"function"==typeof Buffer.isBuffer&&Buffer.isBuffer(e)){if(!this._decoder){var t=r(187).StringDecoder;this._decoder=new t("utf8")}e=this._decoder.write(e)}return this._parser.write(e.toString()),this.emit("data",e),!0},SAXStream.prototype.end=function(e){return e&&e.length&&this.write(e),this._parser.end(),!0},SAXStream.prototype.on=function(e,t){var r=this;return r._parser["on"+e]||-1===i.indexOf(e)||(r._parser["on"+e]=function(){var t=1===arguments.length?[arguments[0]]:Array.apply(null,arguments);t.splice(0,0,e),r.emit.apply(r,t)}),n.prototype.on.call(r,e,t)};var o="\r\n\t ",s="0124356789",a="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ",c="'\"",u=s+a+"#",l=o+">",p="[CDATA[",d="DOCTYPE",h="http://www.w3.org/XML/1998/namespace",f="http://www.w3.org/2000/xmlns/",m={xml:h,xmlns:f};o=charClass(o),s=charClass(s),a=charClass(a);var g=/[:_A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD]/,y=/[:_A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\u00B7\u0300-\u036F\u203F-\u2040\.\d-]/;function charClass(e){return e.split("").reduce(function(e,t){return e[t]=!0,e},{})}function is(e,t){return function isRegExp(e){return"[object RegExp]"===Object.prototype.toString.call(e)}(e)?!!t.match(e):e[t]}function not(e,t){return!is(e,t)}c=charClass(c),u=charClass(u),l=charClass(l);var v=0;for(var v in e.STATE={BEGIN:v++,TEXT:v++,TEXT_ENTITY:v++,OPEN_WAKA:v++,SGML_DECL:v++,SGML_DECL_QUOTED:v++,DOCTYPE:v++,DOCTYPE_QUOTED:v++,DOCTYPE_DTD:v++,DOCTYPE_DTD_QUOTED:v++,COMMENT_STARTING:v++,COMMENT:v++,COMMENT_ENDING:v++,COMMENT_ENDED:v++,CDATA:v++,CDATA_ENDING:v++,CDATA_ENDING_2:v++,PROC_INST:v++,PROC_INST_BODY:v++,PROC_INST_ENDING:v++,OPEN_TAG:v++,OPEN_TAG_SLASH:v++,ATTRIB:v++,ATTRIB_NAME:v++,ATTRIB_NAME_SAW_WHITE:v++,ATTRIB_VALUE:v++,ATTRIB_VALUE_QUOTED:v++,ATTRIB_VALUE_CLOSED:v++,ATTRIB_VALUE_UNQUOTED:v++,ATTRIB_VALUE_ENTITY_Q:v++,ATTRIB_VALUE_ENTITY_U:v++,CLOSE_TAG:v++,CLOSE_TAG_SAW_WHITE:v++,SCRIPT:v++,SCRIPT_ENDING:v++},e.ENTITIES={amp:"&",gt:">",lt:"<",quot:'"',apos:"'",AElig:198,Aacute:193,Acirc:194,Agrave:192,Aring:197,Atilde:195,Auml:196,Ccedil:199,ETH:208,Eacute:201,Ecirc:202,Egrave:200,Euml:203,Iacute:205,Icirc:206,Igrave:204,Iuml:207,Ntilde:209,Oacute:211,Ocirc:212,Ograve:210,Oslash:216,Otilde:213,Ouml:214,THORN:222,Uacute:218,Ucirc:219,Ugrave:217,Uuml:220,Yacute:221,aacute:225,acirc:226,aelig:230,agrave:224,aring:229,atilde:227,auml:228,ccedil:231,eacute:233,ecirc:234,egrave:232,eth:240,euml:235,iacute:237,icirc:238,igrave:236,iuml:239,ntilde:241,oacute:243,ocirc:244,ograve:242,oslash:248,otilde:245,ouml:246,szlig:223,thorn:254,uacute:250,ucirc:251,ugrave:249,uuml:252,yacute:253,yuml:255,copy:169,reg:174,nbsp:160,iexcl:161,cent:162,pound:163,curren:164,yen:165,brvbar:166,sect:167,uml:168,ordf:170,laquo:171,not:172,shy:173,macr:175,deg:176,plusmn:177,sup1:185,sup2:178,sup3:179,acute:180,micro:181,para:182,middot:183,cedil:184,ordm:186,raquo:187,frac14:188,frac12:189,frac34:190,iquest:191,times:215,divide:247,OElig:338,oelig:339,Scaron:352,scaron:353,Yuml:376,fnof:402,circ:710,tilde:732,Alpha:913,Beta:914,Gamma:915,Delta:916,Epsilon:917,Zeta:918,Eta:919,Theta:920,Iota:921,Kappa:922,Lambda:923,Mu:924,Nu:925,Xi:926,Omicron:927,Pi:928,Rho:929,Sigma:931,Tau:932,Upsilon:933,Phi:934,Chi:935,Psi:936,Omega:937,alpha:945,beta:946,gamma:947,delta:948,epsilon:949,zeta:950,eta:951,theta:952,iota:953,kappa:954,lambda:955,mu:956,nu:957,xi:958,omicron:959,pi:960,rho:961,sigmaf:962,sigma:963,tau:964,upsilon:965,phi:966,chi:967,psi:968,omega:969,thetasym:977,upsih:978,piv:982,ensp:8194,emsp:8195,thinsp:8201,zwnj:8204,zwj:8205,lrm:8206,rlm:8207,ndash:8211,mdash:8212,lsquo:8216,rsquo:8217,sbquo:8218,ldquo:8220,rdquo:8221,bdquo:8222,dagger:8224,Dagger:8225,bull:8226,hellip:8230,permil:8240,prime:8242,Prime:8243,lsaquo:8249,rsaquo:8250,oline:8254,frasl:8260,euro:8364,image:8465,weierp:8472,real:8476,trade:8482,alefsym:8501,larr:8592,uarr:8593,rarr:8594,darr:8595,harr:8596,crarr:8629,lArr:8656,uArr:8657,rArr:8658,dArr:8659,hArr:8660,forall:8704,part:8706,exist:8707,empty:8709,nabla:8711,isin:8712,notin:8713,ni:8715,prod:8719,sum:8721,minus:8722,lowast:8727,radic:8730,prop:8733,infin:8734,ang:8736,and:8743,or:8744,cap:8745,cup:8746,int:8747,there4:8756,sim:8764,cong:8773,asymp:8776,ne:8800,equiv:8801,le:8804,ge:8805,sub:8834,sup:8835,nsub:8836,sube:8838,supe:8839,oplus:8853,otimes:8855,perp:8869,sdot:8901,lceil:8968,rceil:8969,lfloor:8970,rfloor:8971,lang:9001,rang:9002,loz:9674,spades:9824,clubs:9827,hearts:9829,diams:9830},Object.keys(e.ENTITIES).forEach(function(t){var r=e.ENTITIES[t],n="number"==typeof r?String.fromCharCode(r):r;e.ENTITIES[t]=n}),e.STATE)e.STATE[e.STATE[v]]=v;function emit(e,t,r){e[t]&&e[t](r)}function emitNode(e,t,r){e.textNode&&closeText(e),emit(e,t,r)}function closeText(e){e.textNode=textopts(e.opt,e.textNode),e.textNode&&emit(e,"ontext",e.textNode),e.textNode=""}function textopts(e,t){return e.trim&&(t=t.trim()),e.normalize&&(t=t.replace(/\s+/g," ")),t}function error(e,t){return closeText(e),e.trackPosition&&(t+="\nLine: "+e.line+"\nColumn: "+e.column+"\nChar: "+e.c),t=new Error(t),e.error=t,emit(e,"onerror",t),e}function end(e){return e.closedRoot||strictFail(e,"Unclosed root tag"),e.state!==v.BEGIN&&e.state!==v.TEXT&&error(e,"Unexpected end"),closeText(e),e.c="",e.closed=!0,emit(e,"onend"),SAXParser.call(e,e.strict,e.opt),e}function strictFail(e,t){if("object"!=typeof e||!(e instanceof SAXParser))throw new Error("bad call to strictFail");e.strict&&error(e,t)}function newTag(e){e.strict||(e.tagName=e.tagName[e.looseCase]());var t=e.tags[e.tags.length-1]||e,r=e.tag={name:e.tagName,attributes:{}};e.opt.xmlns&&(r.ns=t.ns),e.attribList.length=0}function qname(e,t){var r=e.indexOf(":")<0?["",e]:e.split(":"),n=r[0],i=r[1];return t&&"xmlns"===e&&(n="xmlns",i=""),{prefix:n,local:i}}function attrib(e){if(e.strict||(e.attribName=e.attribName[e.looseCase]()),-1!==e.attribList.indexOf(e.attribName)||e.tag.attributes.hasOwnProperty(e.attribName))return e.attribName=e.attribValue="";if(e.opt.xmlns){var t=qname(e.attribName,!0),r=t.prefix,n=t.local;if("xmlns"===r)if("xml"===n&&e.attribValue!==h)strictFail(e,"xml: prefix must be bound to "+h+"\nActual: "+e.attribValue);else if("xmlns"===n&&e.attribValue!==f)strictFail(e,"xmlns: prefix must be bound to "+f+"\nActual: "+e.attribValue);else{var i=e.tag,o=e.tags[e.tags.length-1]||e;i.ns===o.ns&&(i.ns=Object.create(o.ns)),i.ns[n]=e.attribValue}e.attribList.push([e.attribName,e.attribValue])}else e.tag.attributes[e.attribName]=e.attribValue,emitNode(e,"onattribute",{name:e.attribName,value:e.attribValue});e.attribName=e.attribValue=""}function openTag(e,t){if(e.opt.xmlns){var r=e.tag,n=qname(e.tagName);r.prefix=n.prefix,r.local=n.local,r.uri=r.ns[n.prefix]||"",r.prefix&&!r.uri&&(strictFail(e,"Unbound namespace prefix: "+JSON.stringify(e.tagName)),r.uri=n.prefix);var i=e.tags[e.tags.length-1]||e;r.ns&&i.ns!==r.ns&&Object.keys(r.ns).forEach(function(t){emitNode(e,"onopennamespace",{prefix:t,uri:r.ns[t]})});for(var o=0,s=e.attribList.length;o<s;o++){var a=e.attribList[o],c=a[0],u=a[1],l=qname(c,!0),p=l.prefix,d=l.local,h=""==p?"":r.ns[p]||"",f={name:c,value:u,prefix:p,local:d,uri:h};p&&"xmlns"!=p&&!h&&(strictFail(e,"Unbound namespace prefix: "+JSON.stringify(p)),f.uri=p),e.tag.attributes[c]=f,emitNode(e,"onattribute",f)}e.attribList.length=0}e.tag.isSelfClosing=!!t,e.sawRoot=!0,e.tags.push(e.tag),emitNode(e,"onopentag",e.tag),t||(e.noscript||"script"!==e.tagName.toLowerCase()?e.state=v.TEXT:e.state=v.SCRIPT,e.tag=null,e.tagName=""),e.attribName=e.attribValue="",e.attribList.length=0}function closeTag(e){if(!e.tagName)return strictFail(e,"Weird empty close tag."),e.textNode+="</>",void(e.state=v.TEXT);if(e.script){if("script"!==e.tagName)return e.script+="</"+e.tagName+">",e.tagName="",void(e.state=v.SCRIPT);emitNode(e,"onscript",e.script),e.script=""}var t=e.tags.length,r=e.tagName;e.strict||(r=r[e.looseCase]());for(var n=r;t--;){if(e.tags[t].name===n)break;strictFail(e,"Unexpected close tag")}if(t<0)return strictFail(e,"Unmatched closing tag: "+e.tagName),e.textNode+="</"+e.tagName+">",void(e.state=v.TEXT);e.tagName=r;for(var i=e.tags.length;i-- >t;){var o=e.tag=e.tags.pop();e.tagName=e.tag.name,emitNode(e,"onclosetag",e.tagName);var s={};for(var a in o.ns)s[a]=o.ns[a];var c=e.tags[e.tags.length-1]||e;e.opt.xmlns&&o.ns!==c.ns&&Object.keys(o.ns).forEach(function(t){var r=o.ns[t];emitNode(e,"onclosenamespace",{prefix:t,uri:r})})}0===t&&(e.closedRoot=!0),e.tagName=e.attribValue=e.attribName="",e.attribList.length=0,e.state=v.TEXT}function parseEntity(e){var t,r=e.entity,n=r.toLowerCase(),i="";return e.ENTITIES[r]?e.ENTITIES[r]:e.ENTITIES[n]?e.ENTITIES[n]:("#"===(r=n).charAt(0)&&("x"===r.charAt(1)?(r=r.slice(2),i=(t=parseInt(r,16)).toString(16)):(r=r.slice(1),i=(t=parseInt(r,10)).toString(10))),r=r.replace(/^0+/,""),i.toLowerCase()!==r?(strictFail(e,"Invalid character entity"),"&"+e.entity+";"):String.fromCharCode(t))}v=e.STATE}(t)},function(e,t,r){var n=r(654),i=r(7),o=r(52),s=r(1),a=r(296),c=r(5),u=r(29),l=r(35),p=r(17),d=r(39),h=r(757),f=r(84),m=r(36),g=r(200),y=r(63),v=r(297),b=r(343),_=r(344),w=r(813),E=r(22),S=r(139),C=r(346),x=r(122),k=r(347),R=r(349),T=r(814),O=E.HeaderConstants,I=E.QueryStringConstants,N=E.HttpConstants.HttpResponseCodes,A=E.StorageServiceClientConstants,P=E.RequestLocationMode.PRIMARY_ONLY,L=E.RequestLocationMode,D=r(188),M=r(76),j=M.ArgumentError,q=M.ArgumentNullError,F=M.TimeoutError,z=M.StorageError;function StorageServiceClient(e,t,r,n,i,o){StorageServiceClient.super_.call(this),e&&t?(this.storageAccount=e,this.storageAccessKey=t,this.storageCredentials=new k(this.storageAccount,this.storageAccessKey,n)):i?(this.sasToken=i,this.storageCredentials=new R(i)):o?(this.token=o,this.storageCredentials=new T(o)):(this.anonymous=!0,this.storageCredentials={signRequest:function(e,t){t(null)}}),r&&this.setHost(r),this.apiVersion=O.TARGET_STORAGE_VERSION,this.usePathStyleUri=n,this._initDefaultFilter(),this.logger=new D(D.LogLevels.INFO),this._setDefaultProxy(),this.xml2jsSettings=StorageServiceClient._getDefaultXml2jsSettings(),this.defaultLocationMode=S.LocationMode.PRIMARY_ONLY}s.inherits(StorageServiceClient,c.EventEmitter),StorageServiceClient._getDefaultXml2jsSettings=function(){var e=u.clone(a.defaults[.2]);return e.attrkey=E.TableConstants.XML_METADATA_MARKER,e.charkey=E.TableConstants.XML_VALUE_MARKER,e.explicitArray=!1,e},StorageServiceClient.prototype.setHost=function(e){var t=function(e){var t;return m.objectIsNull(e)||(-1===e.indexOf("http")&&0!==e.indexOf("//")&&(e="//"+e),(t=i.parse(e,!1,!0)).protocol||(t.protocol=_.DEFAULT_PROTOCOL),t.port||(t.protocol===E.HTTPS?t.port=E.DEFAULT_HTTPS_PORT:t.port=E.DEFAULT_HTTP_PORT),t=i.format({protocol:t.protocol,port:t.port,hostname:t.hostname,pathname:t.pathname})),t};g.isValidHost(e),this.host={primaryHost:t(e.primaryHost),secondaryHost:t(e.secondaryHost)}},StorageServiceClient.prototype.performRequest=function(e,t,r,n){this._performRequest(e,{outputData:t},r,n)},StorageServiceClient.prototype.performRequestOutputStream=function(e,t,r,n){this._performRequest(e,{outputStream:t},r,n)},StorageServiceClient.prototype.performRequestInputStream=function(e,t,r,n,i){this._performRequest(e,{outputData:t,inputStream:r},n,i)},StorageServiceClient.prototype._performRequest=function(e,t,r,i){var o=this;if(r.clientRequestId||(r.clientRequestId=l.v1()),e.withHeader(O.CLIENT_REQUEST_ID,r.clientRequestId),!process.browser){var a=s.format("(NODE-VERSION %s; %s %s)",process.version,p.type(),p.release());e.withHeader(O.USER_AGENT,E.USER_AGENT_PRODUCT_NAME+"/"+E.USER_AGENT_PRODUCT_VERSION+" "+a)}m.objectIsNull(r.locationMode)&&(r.locationMode=this.defaultLocationMode),m.objectIsNull(r.requestLocationMode)&&(r.requestLocationMode=P),m.objectIsNull(r.useNagleAlgorithm)&&(r.useNagleAlgorithm=this.useNagleAlgorithm),this._initializeLocation(r),this._setOperationExpiryTime(r);var c=!1,u=function(r,a){o._validateLocation(r);var u=r.currentLocation;o._buildRequestOptions(e,t,r,function(l,p){if(l)i({error:l,response:null},function(e,t){t(e)});else if(o.logger.log(D.LogLevels.DEBUG,"FINAL REQUEST OPTIONS:\n"+s.inspect(p)),o._maximumExecutionTimeExceeded(Date.now(),r.operationExpiryTime))i({error:new F(y.MAXIMUM_EXECUTION_TIMEOUT_EXCEPTION),response:null},function(e,t){t(e)});else{var d,h=function(t,n){var s;t?s={error:t,response:null}:((s=o._processResponse(e,n,r)).contentMD5=n.contentMD5,s.length=n.length),s.operationEndTime=new Date,s.targetLocation=u,s.outputStreamSent=c,i(s,a)},g=function(e,t){var i,s;o.proxy?void 0===s&&(s=n.defaults({proxy:o.proxy})):s=n,e?((i=s(p)).on("error",h),i.on("response",function(e){if(v.validResponse(e.statusCode)){t&&i.pipe(t);var n=0,o=(new f).createMd5Hash();e.on("data",function(e){n+=e.length,o.update(e)}),e.on("end",function(){(m.objectIsNull(r.disableContentMD5Validation)||!1===r.disableContentMD5Validation)&&(e.contentMD5=o.digest("base64")),e.length=n,d=e})}else{var s,a=parseInt(e.headers["content-length"]),c=0;void 0!==a&&(s=Buffer.alloc(a)),i.on("data",function(e){void 0!==a?(e.copy(s,c),c+=e.length):s=s?Buffer.concat([s,e]):e}),i.on("end",function(){s&&(s.length>3&&239===s[0]&&187===s[1]&&191===s[2]?e.body=s.toString("utf8",3):e.body=s.toString("utf8")),h(null,e)})}})):i=s(p,h),(m.objectIsNull(r.useNagleAlgorithm)||!1===r.useNagleAlgorithm)&&i.on("request",function(e){e.setNoDelay(!0)});var a=i.end;return i.end=function(){p.headers["content-length"]?i.headers["content-length"]=p.headers["content-length"]:i.headers["content-length"]&&delete i.headers["content-length"],a.call(i)},i.on("response",function(e){o.emit("receivedResponseEvent",e)}),i};if(t&&t.outputData&&(!m.isBrowser()&&Buffer.isBuffer(t.outputData)?p.body=new b(t.outputData):p.body=t.outputData),t&&t.inputStream)t.inputStream.on("close",function(){d&&(h(null,d),d=null)}),t.inputStream.on("end",function(){d&&(h(null,d),d=null)}),t.inputStream.on("finish",function(){d&&(h(null,d),d=null)}),g(!0,t.inputStream);else if(t&&t.outputStream){var _=function(){var e,n,i;!m.objectIsNull(p.headers["content-length"])&&p.headers["content-length"]<30408704?(t.outputStream.pipe(g()),c=!0,m.isStreamPaused(t.outputStream)&&t.outputStream.resume()):(e=p.headers["content-length"]?p.headers["content-length"]:E.BlobConstants.MAX_SINGLE_UPLOAD_BLOB_SIZE_IN_BYTES,n=Buffer.alloc(parseInt(e)),i=0,t.outputStream.on("data",function(e){c=!0,o._maximumExecutionTimeExceeded(Date.now(),r.operationExpiryTime)?h(new F(y.MAXIMUM_EXECUTION_TIMEOUT_EXCEPTION)):(e.copy(n,i),i+=e.length)}).on("end",function(){var e=g();e.write(n),e.end()}),m.isStreamPaused(t.outputStream)&&t.outputStream.resume())};t.outputStream.readable?_():0===p.headers["content-length"]?g():t.outputStream.on("open",function(){_()}),t.outputStream.on("error",function(e){h(e)})}else g()}})};o.filter(r,function(e,t){if(o._maximumExecutionTimeExceeded(Date.now()+e.retryInterval,e.operationExpiryTime))i({error:new F(y.MAXIMUM_EXECUTION_TIMEOUT_EXCEPTION),response:null},function(e,t){t(e)});else if(e.retryContext){setTimeout(function(){u(e,t)},e.retryInterval)}else u(e,t)})},StorageServiceClient.prototype._buildRequestOptions=function(e,t,r,n){e.withHeader(O.STORAGE_VERSION,this.apiVersion),e.withHeader(O.MS_DATE,(new Date).toUTCString()),e.headers[O.ACCEPT]||e.withHeader(O.ACCEPT,"application/atom+xml,application/xml"),e.withHeader(O.ACCEPT_CHARSET,"UTF-8"),!m.isBrowser()||e.method!==E.HttpConstants.HttpVerbs.GET&&e.method!==E.HttpConstants.HttpVerbs.HEAD||e.withQueryOption(O.FORCE_NO_CACHE_IN_BROWSER,(new Date).getTime()),m.objectIsNull(r.timeoutIntervalInMs)&&(r.timeoutIntervalInMs=this.defaultTimeoutIntervalInMs),m.objectIsNull(r.clientRequestTimeoutInMs)&&(r.clientRequestTimeoutInMs=this.defaultClientRequestTimeoutInMs),!m.objectIsNull(r.timeoutIntervalInMs)&&r.timeoutIntervalInMs>0&&e.withQueryOption(I.TIMEOUT,Math.ceil(r.timeoutIntervalInMs/1e3)),r.accessConditions&&(e.withHeader(O.IF_MATCH,r.accessConditions.EtagMatch),e.withHeader(O.IF_MODIFIED_SINCE,r.accessConditions.DateModifedSince),e.withHeader(O.IF_NONE_MATCH,r.accessConditions.EtagNonMatch),e.withHeader(O.IF_UNMODIFIED_SINCE,r.accessConditions.DateUnModifiedSince),e.withHeader(O.SEQUENCE_NUMBER_EQUAL,r.accessConditions.SequenceNumberEqual),e.withHeader(O.SEQUENCE_NUMBER_LESS_THAN,r.accessConditions.SequenceNumberLessThan),e.withHeader(O.SEQUENCE_NUMBER_LESS_THAN_OR_EQUAL,r.accessConditions.SequenceNumberLessThanOrEqual),e.withHeader(O.BLOB_CONDITION_MAX_SIZE,r.accessConditions.MaxBlobSize),e.withHeader(O.BLOB_CONDITION_APPEND_POSITION,r.accessConditions.MaxAppendPosition)),r.sourceAccessConditions&&(e.withHeader(O.SOURCE_IF_MATCH,r.sourceAccessConditions.EtagMatch),e.withHeader(O.SOURCE_IF_MODIFIED_SINCE,r.sourceAccessConditions.DateModifedSince),e.withHeader(O.SOURCE_IF_NONE_MATCH,r.sourceAccessConditions.EtagNonMatch),e.withHeader(O.SOURCE_IF_UNMODIFIED_SINCE,r.sourceAccessConditions.DateUnModifiedSince)),e.headers&&void 0!==e.headers[O.CONTENT_TYPE]?e.headers&&null===e.headers[O.CONTENT_TYPE]&&delete e.headers[O.CONTENT_TYPE]:e.headers[O.CONTENT_TYPE]="",e.headers&&void 0!==e.headers[O.CONTENT_LENGTH]?e.headers&&null===e.headers[O.CONTENT_LENGTH]&&delete e.headers[O.CONTENT_LENGTH]:t&&t.outputData?e.withHeader(O.CONTENT_LENGTH,Buffer.byteLength(t.outputData,"UTF8")):void 0===e.headers[O.CONTENT_LENGTH]&&e.withHeader(O.CONTENT_LENGTH,0);var o=this.enableGlobalHttpAgent;this._setRequestUrl(e,r),this.emit("sendingRequestEvent",e),this.storageCredentials.signRequest(e,function(t){var s=null;if(!t){var a=e.uri;s={uri:i.format(a),method:e.method,headers:e.headers,mode:"disable-fetch"},r&&(s.encoding=r.responseEncoding),r&&r.clientRequestTimeoutInMs?s.timeout=r.clientRequestTimeoutInMs:s.timeout=E.DEFAULT_CLIENT_REQUEST_TIMEOUT_IN_MS,!0!==o&&(s.forever=!0)}n(t,s)})},StorageServiceClient.prototype._processResponse=function(e,t,r){var n,i=v.validResponse(t.statusCode),o=StorageServiceClient._buildResponse(i,t.body,function convertRawHeadersToHeaders(e){var t={};if(e){for(var r=0;r<e.length;r++)t[0===e[r].indexOf(O.PREFIX_FOR_STORAGE_METADATA)?e[r]:e[r].toLowerCase()]=e[++r];return t}}(t.rawHeaders)||t.headers,t.statusCode,t.md5);if(i&&e.rawResponse)n={error:null,response:o};else if(o=StorageServiceClient._parseResponse(o,this.xml2jsSettings,r),i&&!o.error)n={error:null,response:o};else{o.isSuccessful=!1,(t.statusCode<400||t.statusCode>=500)&&this.logger.log(D.LogLevels.DEBUG,"ERROR code = "+t.statusCode+" :\n"+s.inspect(o.body));var a=o.body;if(o.error&&(a=o.error,delete o.error),!a)a={error:{code:Object.keys(N).filter(function(e){if(N[e]===o.statusCode)return e})[0]}};n={error:StorageServiceClient._normalizeError(a,t),response:o}}return this.logger.log(D.LogLevels.DEBUG,"RESPONSE:\n"+s.inspect(n)),n},StorageServiceClient.prototype.withFilter=function(e){var t=u.clone(this),r=this.filter,n=e;return void 0!==r&&(n=function(t,n){e.handle(t,function(e,t){r(e,function(e,r){n(e,function(e,n,i){r(e,i,function(e){t(e,n,i)})})})})}),t.filter=n,t},StorageServiceClient._buildResponse=function(e,t,r,n,i){var o={isSuccessful:e,statusCode:n,body:t,headers:r,md5:i};return m.objectIsNull(r)||void 0!==r[O.REQUEST_SERVER_ENCRYPTED]&&(o.requestServerEncrypted="true"===r[O.REQUEST_SERVER_ENCRYPTED]),o},StorageServiceClient._parseResponse=function(e,t,r){function parseXml(e){var r;return new a.Parser(t).parseString(m.removeBOM(e.toString()),function(e,t){if(e){var n=new SyntaxError("EXMLFORMAT");throw n.innerError=e,n}r=t}),r}if(e.body&&Buffer.byteLength(e.body.toString())>0){var n="";e.headers&&e.headers["content-type"]&&(n=e.headers["content-type"].toLowerCase());try{if(-1!==n.indexOf("application/json"))if(r&&r.payloadFormat&&r.payloadFormat!==x.PayloadFormat.NO_METADATA){var i=new h;i.onValue=function(t){e.body=t},i.write(e.body)}else e.body=JSON.parse(e.body);else-1!==n.indexOf("application/xml")||-1!==n.indexOf("application/atom+xml")?e.body=parseXml(e.body):-1!==n.indexOf("text/html")?e.body=e.body:e.body=parseXml(e.body)}catch(t){e.error=t}}return e},StorageServiceClient.getStorageSettings=function(e,t,r,n,i,o){return!e||t||n?e&&t||n||o||r?w.createExplicitly(e,t,r,n,i,o):w.createFromEnvironment():w.createFromConnectionString(e)},StorageServiceClient.prototype._setRequestUrl=function(e,t){if(e.originalPath=e.originalPath||e.path,e.path=this._getPath(e.originalPath),!this.host)throw new q("this.host",y.STORAGE_HOST_LOCATION_REQUIRED);var r=this.host.primaryHost;m.objectIsNull(t)||t.currentLocation!==E.StorageLocation.SECONDARY||(r=this.host.secondaryHost),r&&r.lastIndexOf("/")!==r.length-1&&(r+="/");var n=i.format({pathname:e.path,query:e.queryString});e.uri=i.resolve(r,n),e.path=i.parse(e.uri).pathname},StorageServiceClient.prototype._getPath=function(e){return null==e?e="":0===e.indexOf("/")&&(e=e.substring(1)),e},StorageServiceClient.prototype._getUrl=function(e,t,r){var n;n=m.objectIsNull(r)||!1!==r?this.host.primaryHost:this.host.secondaryHost,(n=m.trimPortFromUri(n))&&n.lastIndexOf("/")!==n.length-1&&(n+="/");var s=o.parse(t),a=i.format({pathname:this._getPath(e),query:s});return i.resolve(n,a)},StorageServiceClient.prototype._initDefaultFilter=function(){this.filter=function(e,t){t&&t(e,function(e,t,r){r?r(e):t&&t(e)})}},StorageServiceClient.prototype.parseMetadataHeaders=function(e){var t={};if(!e)return t;for(var r in e){if(0===r.indexOf(O.PREFIX_FOR_STORAGE_METADATA))t[r.substr(O.PREFIX_FOR_STORAGE_METADATA.length,r.length-O.PREFIX_FOR_STORAGE_METADATA.length)]=e[r]}return t},StorageServiceClient.prototype.getAccountServiceProperties=function(e,t){var r;m.normalizeArgs(e,t,function(e,n){r=e,t=n}),g.validateArgs("getServiceProperties",function(e){e.callback(t)});var n=d(!0,{},r),i=v.get().withQueryOption(I.COMP,"properties").withQueryOption(I.RESTYPE,"service");n.requestLocationMode=L.PRIMARY_OR_SECONDARY;this.performRequest(i,null,n,function(e,r){e.servicePropertiesResult=null,e.error||(e.servicePropertiesResult=C.parse(e.response.body.StorageServiceProperties));r(e,function(e){t(e.error,e.servicePropertiesResult,e.response)})})},StorageServiceClient.prototype.setAccountServiceProperties=function(e,t,r){var n;m.normalizeArgs(t,r,function(e,t){n=e,r=t}),g.validateArgs("setServiceProperties",function(t){t.object(e,"serviceProperties"),t.callback(r)});var i=d(!0,{},n),o=C.serialize(e),s=v.put().withQueryOption(I.COMP,"properties").withQueryOption(I.RESTYPE,"service").withHeader(O.CONTENT_TYPE,'application/xml;charset="utf-8"').withHeader(O.CONTENT_LENGTH,Buffer.byteLength(o)).withBody(o);this.performRequest(s,s.body,i,function(e,t){t(e,function(e){r(e.error,e.response)})})},StorageServiceClient._normalizeError=function(e,t){if(m.objectIsString(e))return new z(e,null);if(e){var r={},n=e.Error||e.error||e["odata.error"]||e["m:error"]||e;for(var i in r.code=n.message,n)if(n.hasOwnProperty(i)){var o=i.toLowerCase();0===o.indexOf("m:")&&(o=o.substring(2)),r[o]=n[i],"message"===o&&u.isObject(n[i])&&n[i].value&&(r[o]=n[i].value)}return t&&(t.statusCode&&(r.statusCode=t.statusCode),t.headers&&t.headers["x-ms-request-id"]&&(r.requestId=t.headers["x-ms-request-id"])),new z(r.code,r)}return null},StorageServiceClient.prototype.setProxy=function(e){this.proxy=e||null},StorageServiceClient.prototype._setDefaultProxy=function(){var e=StorageServiceClient._loadEnvironmentProxyValue();if(e){var t=i.parse(e);t.port||(t.port=80),this.setProxy(t)}else this.setProxy(null)},StorageServiceClient._loadEnvironmentProxyValue=function(){var e=null;return process.env[A.EnvironmentVariables.HTTPS_PROXY]?e=process.env[A.EnvironmentVariables.HTTPS_PROXY]:process.env[A.EnvironmentVariables.HTTPS_PROXY.toLowerCase()]?e=process.env[A.EnvironmentVariables.HTTPS_PROXY.toLowerCase()]:process.env[A.EnvironmentVariables.HTTP_PROXY]?e=process.env[A.EnvironmentVariables.HTTP_PROXY]:process.env[A.EnvironmentVariables.HTTP_PROXY.toLowerCase()]&&(e=process.env[A.EnvironmentVariables.HTTP_PROXY.toLowerCase()]),e},StorageServiceClient.prototype._initializeLocation=function(e){if(m.objectIsNull(e.locationMode))e.locationMode=S.LocationMode.PRIMARY_ONLY,e.currentLocation=E.StorageLocation.PRIMARY;else switch(e.locationMode){case S.LocationMode.PRIMARY_ONLY:case S.LocationMode.PRIMARY_THEN_SECONDARY:e.currentLocation=E.StorageLocation.PRIMARY;break;case S.LocationMode.SECONDARY_ONLY:case S.LocationMode.SECONDARY_THEN_PRIMARY:e.currentLocation=E.StorageLocation.SECONDARY;break;default:throw new RangeError(s.format(y.ARGUMENT_OUT_OF_RANGE_ERROR,"locationMode",e.locationMode))}},StorageServiceClient.prototype._validateLocation=function(e){if(this._invalidLocationMode(e.locationMode))throw new q("host",y.STORAGE_HOST_MISSING_LOCATION);switch(e.requestLocationMode){case E.RequestLocationMode.PRIMARY_ONLY:if(e.locationMode===S.LocationMode.SECONDARY_ONLY)throw new j("host.primaryHost",y.PRIMARY_ONLY_COMMAND);e.currentLocation=E.StorageLocation.PRIMARY,e.locationMode=S.LocationMode.PRIMARY_ONLY;break;case E.RequestLocationMode.SECONDARY_ONLY:if(e.locationMode===S.LocationMode.PRIMARY_ONLY)throw new j("host.secondaryHost",y.SECONDARY_ONLY_COMMAND);e.currentLocation=E.StorageLocation.SECONDARY,e.locationMode=S.LocationMode.SECONDARY_ONLY}},StorageServiceClient.prototype._invalidLocationMode=function(e){switch(e){case S.LocationMode.PRIMARY_ONLY:return m.objectIsNull(this.host.primaryHost);case S.LocationMode.SECONDARY_ONLY:return m.objectIsNull(this.host.secondaryHost);default:return m.objectIsNull(this.host.primaryHost)||m.objectIsNull(this.host.secondaryHost)}},StorageServiceClient.prototype._maximumExecutionTimeExceeded=function(e,t){return!m.objectIsNull(t)&&e>t},StorageServiceClient.prototype._setOperationExpiryTime=function(e){m.objectIsNull(e.operationExpiryTime)&&(m.objectIsNull(e.maximumExecutionTimeInMs)?this.defaultMaximumExecutionTimeInMs&&(e.operationExpiryTime=Date.now()+this.defaultMaximumExecutionTimeInMs):e.operationExpiryTime=Date.now()+e.maximumExecutionTimeInMs)},e.exports=StorageServiceClient},function(e,t,r){e.exports=r(41)},function(e,t,r){"use strict";var n=r(300),i={};i.rules=r(656).map(function(e){return{rule:e,suffix:e.replace(/^(\*\.|\!)/,""),punySuffix:-1,wildcard:"*"===e.charAt(0),exception:"!"===e.charAt(0)}}),i.endsWith=function(e,t){return-1!==e.indexOf(t,e.length-t.length)},i.findRule=function(e){var t=n.toASCII(e);return i.rules.reduce(function(e,r){return-1===r.punySuffix&&(r.punySuffix=n.toASCII(r.suffix)),i.endsWith(t,"."+r.punySuffix)||t===r.punySuffix?r:e},null)},t.errorCodes={DOMAIN_TOO_SHORT:"Domain name too short.",DOMAIN_TOO_LONG:"Domain name too long. It should be no more than 255 chars.",LABEL_STARTS_WITH_DASH:"Domain name label can not start with a dash.",LABEL_ENDS_WITH_DASH:"Domain name label can not end with a dash.",LABEL_TOO_LONG:"Domain name label should be at most 63 chars long.",LABEL_TOO_SHORT:"Domain name label should be at least 1 character long.",LABEL_INVALID_CHARS:"Domain name label can only contain alphanumeric characters or dashes."},i.validate=function(e){var t=n.toASCII(e);if(t.length<1)return"DOMAIN_TOO_SHORT";if(t.length>255)return"DOMAIN_TOO_LONG";for(var r,i=t.split("."),o=0;o<i.length;++o){if(!(r=i[o]).length)return"LABEL_TOO_SHORT";if(r.length>63)return"LABEL_TOO_LONG";if("-"===r.charAt(0))return"LABEL_STARTS_WITH_DASH";if("-"===r.charAt(r.length-1))return"LABEL_ENDS_WITH_DASH";if(!/^[a-z0-9\-]+$/.test(r))return"LABEL_INVALID_CHARS"}},t.parse=function(e){if("string"!=typeof e)throw new TypeError("Domain name must be a string.");var r=e.slice(0).toLowerCase();"."===r.charAt(r.length-1)&&(r=r.slice(0,r.length-1));var o=i.validate(r);if(o)return{input:e,error:{message:t.errorCodes[o],code:o}};var s={input:e,tld:null,sld:null,domain:null,subdomain:null,listed:!1},a=r.split(".");if("local"===a[a.length-1])return s;var c=function(){return/xn--/.test(r)?(s.domain&&(s.domain=n.toASCII(s.domain)),s.subdomain&&(s.subdomain=n.toASCII(s.subdomain)),s):s},u=i.findRule(r);if(!u)return a.length<2?s:(s.tld=a.pop(),s.sld=a.pop(),s.domain=[s.sld,s.tld].join("."),a.length&&(s.subdomain=a.pop()),c());s.listed=!0;var l=u.suffix.split("."),p=a.slice(0,a.length-l.length);return u.exception&&p.push(l.shift()),s.tld=l.join("."),p.length?(u.wildcard&&(l.unshift(p.pop()),s.tld=l.join(".")),p.length?(s.sld=p.pop(),s.domain=[s.sld,s.tld].join("."),p.length&&(s.subdomain=p.join(".")),c()):c()):c()},t.get=function(e){return e&&t.parse(e).domain||null},t.isValid=function(e){var r=t.parse(e);return Boolean(r.domain&&r.listed)}},function(e){e.exports=["ac","com.ac","edu.ac","gov.ac","net.ac","mil.ac","org.ac","ad","nom.ad","ae","co.ae","net.ae","org.ae","sch.ae","ac.ae","gov.ae","mil.ae","aero","accident-investigation.aero","accident-prevention.aero","aerobatic.aero","aeroclub.aero","aerodrome.aero","agents.aero","aircraft.aero","airline.aero","airport.aero","air-surveillance.aero","airtraffic.aero","air-traffic-control.aero","ambulance.aero","amusement.aero","association.aero","author.aero","ballooning.aero","broker.aero","caa.aero","cargo.aero","catering.aero","certification.aero","championship.aero","charter.aero","civilaviation.aero","club.aero","conference.aero","consultant.aero","consulting.aero","control.aero","council.aero","crew.aero","design.aero","dgca.aero","educator.aero","emergency.aero","engine.aero","engineer.aero","entertainment.aero","equipment.aero","exchange.aero","express.aero","federation.aero","flight.aero","freight.aero","fuel.aero","gliding.aero","government.aero","groundhandling.aero","group.aero","hanggliding.aero","homebuilt.aero","insurance.aero","journal.aero","journalist.aero","leasing.aero","logistics.aero","magazine.aero","maintenance.aero","media.aero","microlight.aero","modelling.aero","navigation.aero","parachuting.aero","paragliding.aero","passenger-association.aero","pilot.aero","press.aero","production.aero","recreation.aero","repbody.aero","res.aero","research.aero","rotorcraft.aero","safety.aero","scientist.aero","services.aero","show.aero","skydiving.aero","software.aero","student.aero","trader.aero","trading.aero","trainer.aero","union.aero","workinggroup.aero","works.aero","af","gov.af","com.af","org.af","net.af","edu.af","ag","com.ag","org.ag","net.ag","co.ag","nom.ag","ai","off.ai","com.ai","net.ai","org.ai","al","com.al","edu.al","gov.al","mil.al","net.al","org.al","am","ao","ed.ao","gv.ao","og.ao","co.ao","pb.ao","it.ao","aq","ar","com.ar","edu.ar","gob.ar","gov.ar","int.ar","mil.ar","musica.ar","net.ar","org.ar","tur.ar","arpa","e164.arpa","in-addr.arpa","ip6.arpa","iris.arpa","uri.arpa","urn.arpa","as","gov.as","asia","at","ac.at","co.at","gv.at","or.at","au","com.au","net.au","org.au","edu.au","gov.au","asn.au","id.au","info.au","conf.au","oz.au","act.au","nsw.au","nt.au","qld.au","sa.au","tas.au","vic.au","wa.au","act.edu.au","nsw.edu.au","nt.edu.au","qld.edu.au","sa.edu.au","tas.edu.au","vic.edu.au","wa.edu.au","qld.gov.au","sa.gov.au","tas.gov.au","vic.gov.au","wa.gov.au","aw","com.aw","ax","az","com.az","net.az","int.az","gov.az","org.az","edu.az","info.az","pp.az","mil.az","name.az","pro.az","biz.az","ba","com.ba","edu.ba","gov.ba","mil.ba","net.ba","org.ba","bb","biz.bb","co.bb","com.bb","edu.bb","gov.bb","info.bb","net.bb","org.bb","store.bb","tv.bb","*.bd","be","ac.be","bf","gov.bf","bg","a.bg","b.bg","c.bg","d.bg","e.bg","f.bg","g.bg","h.bg","i.bg","j.bg","k.bg","l.bg","m.bg","n.bg","o.bg","p.bg","q.bg","r.bg","s.bg","t.bg","u.bg","v.bg","w.bg","x.bg","y.bg","z.bg","0.bg","1.bg","2.bg","3.bg","4.bg","5.bg","6.bg","7.bg","8.bg","9.bg","bh","com.bh","edu.bh","net.bh","org.bh","gov.bh","bi","co.bi","com.bi","edu.bi","or.bi","org.bi","biz","bj","asso.bj","barreau.bj","gouv.bj","bm","com.bm","edu.bm","gov.bm","net.bm","org.bm","*.bn","bo","com.bo","edu.bo","gob.bo","int.bo","org.bo","net.bo","mil.bo","tv.bo","web.bo","academia.bo","agro.bo","arte.bo","blog.bo","bolivia.bo","ciencia.bo","cooperativa.bo","democracia.bo","deporte.bo","ecologia.bo","economia.bo","empresa.bo","indigena.bo","industria.bo","info.bo","medicina.bo","movimiento.bo","musica.bo","natural.bo","nombre.bo","noticias.bo","patria.bo","politica.bo","profesional.bo","plurinacional.bo","pueblo.bo","revista.bo","salud.bo","tecnologia.bo","tksat.bo","transporte.bo","wiki.bo","br","9guacu.br","abc.br","adm.br","adv.br","agr.br","aju.br","am.br","anani.br","aparecida.br","arq.br","art.br","ato.br","b.br","barueri.br","belem.br","bhz.br","bio.br","blog.br","bmd.br","boavista.br","bsb.br","campinagrande.br","campinas.br","caxias.br","cim.br","cng.br","cnt.br","com.br","contagem.br","coop.br","cri.br","cuiaba.br","curitiba.br","def.br","ecn.br","eco.br","edu.br","emp.br","eng.br","esp.br","etc.br","eti.br","far.br","feira.br","flog.br","floripa.br","fm.br","fnd.br","fortal.br","fot.br","foz.br","fst.br","g12.br","ggf.br","goiania.br","gov.br","ac.gov.br","al.gov.br","am.gov.br","ap.gov.br","ba.gov.br","ce.gov.br","df.gov.br","es.gov.br","go.gov.br","ma.gov.br","mg.gov.br","ms.gov.br","mt.gov.br","pa.gov.br","pb.gov.br","pe.gov.br","pi.gov.br","pr.gov.br","rj.gov.br","rn.gov.br","ro.gov.br","rr.gov.br","rs.gov.br","sc.gov.br","se.gov.br","sp.gov.br","to.gov.br","gru.br","imb.br","ind.br","inf.br","jab.br","jampa.br","jdf.br","joinville.br","jor.br","jus.br","leg.br","lel.br","londrina.br","macapa.br","maceio.br","manaus.br","maringa.br","mat.br","med.br","mil.br","morena.br","mp.br","mus.br","natal.br","net.br","niteroi.br","*.nom.br","not.br","ntr.br","odo.br","org.br","osasco.br","palmas.br","poa.br","ppg.br","pro.br","psc.br","psi.br","pvh.br","qsl.br","radio.br","rec.br","recife.br","ribeirao.br","rio.br","riobranco.br","riopreto.br","salvador.br","sampa.br","santamaria.br","santoandre.br","saobernardo.br","saogonca.br","sjc.br","slg.br","slz.br","sorocaba.br","srv.br","taxi.br","teo.br","the.br","tmp.br","trd.br","tur.br","tv.br","udi.br","vet.br","vix.br","vlog.br","wiki.br","zlg.br","bs","com.bs","net.bs","org.bs","edu.bs","gov.bs","bt","com.bt","edu.bt","gov.bt","net.bt","org.bt","bv","bw","co.bw","org.bw","by","gov.by","mil.by","com.by","of.by","bz","com.bz","net.bz","org.bz","edu.bz","gov.bz","ca","ab.ca","bc.ca","mb.ca","nb.ca","nf.ca","nl.ca","ns.ca","nt.ca","nu.ca","on.ca","pe.ca","qc.ca","sk.ca","yk.ca","gc.ca","cat","cc","cd","gov.cd","cf","cg","ch","ci","org.ci","or.ci","com.ci","co.ci","edu.ci","ed.ci","ac.ci","net.ci","go.ci","asso.ci","aroport.ci","int.ci","presse.ci","md.ci","gouv.ci","*.ck","!www.ck","cl","gov.cl","gob.cl","co.cl","mil.cl","cm","co.cm","com.cm","gov.cm","net.cm","cn","ac.cn","com.cn","edu.cn","gov.cn","net.cn","org.cn","mil.cn",".cn",".cn",".cn","ah.cn","bj.cn","cq.cn","fj.cn","gd.cn","gs.cn","gz.cn","gx.cn","ha.cn","hb.cn","he.cn","hi.cn","hl.cn","hn.cn","jl.cn","js.cn","jx.cn","ln.cn","nm.cn","nx.cn","qh.cn","sc.cn","sd.cn","sh.cn","sn.cn","sx.cn","tj.cn","xj.cn","xz.cn","yn.cn","zj.cn","hk.cn","mo.cn","tw.cn","co","arts.co","com.co","edu.co","firm.co","gov.co","info.co","int.co","mil.co","net.co","nom.co","org.co","rec.co","web.co","com","coop","cr","ac.cr","co.cr","ed.cr","fi.cr","go.cr","or.cr","sa.cr","cu","com.cu","edu.cu","org.cu","net.cu","gov.cu","inf.cu","cv","cw","com.cw","edu.cw","net.cw","org.cw","cx","gov.cx","cy","ac.cy","biz.cy","com.cy","ekloges.cy","gov.cy","ltd.cy","name.cy","net.cy","org.cy","parliament.cy","press.cy","pro.cy","tm.cy","cz","de","dj","dk","dm","com.dm","net.dm","org.dm","edu.dm","gov.dm","do","art.do","com.do","edu.do","gob.do","gov.do","mil.do","net.do","org.do","sld.do","web.do","dz","com.dz","org.dz","net.dz","gov.dz","edu.dz","asso.dz","pol.dz","art.dz","ec","com.ec","info.ec","net.ec","fin.ec","k12.ec","med.ec","pro.ec","org.ec","edu.ec","gov.ec","gob.ec","mil.ec","edu","ee","edu.ee","gov.ee","riik.ee","lib.ee","med.ee","com.ee","pri.ee","aip.ee","org.ee","fie.ee","eg","com.eg","edu.eg","eun.eg","gov.eg","mil.eg","name.eg","net.eg","org.eg","sci.eg","*.er","es","com.es","nom.es","org.es","gob.es","edu.es","et","com.et","gov.et","org.et","edu.et","biz.et","name.et","info.et","net.et","eu","fi","aland.fi","*.fj","*.fk","fm","fo","fr","com.fr","asso.fr","nom.fr","prd.fr","presse.fr","tm.fr","aeroport.fr","assedic.fr","avocat.fr","avoues.fr","cci.fr","chambagri.fr","chirurgiens-dentistes.fr","experts-comptables.fr","geometre-expert.fr","gouv.fr","greta.fr","huissier-justice.fr","medecin.fr","notaires.fr","pharmacien.fr","port.fr","veterinaire.fr","ga","gb","gd","ge","com.ge","edu.ge","gov.ge","org.ge","mil.ge","net.ge","pvt.ge","gf","gg","co.gg","net.gg","org.gg","gh","com.gh","edu.gh","gov.gh","org.gh","mil.gh","gi","com.gi","ltd.gi","gov.gi","mod.gi","edu.gi","org.gi","gl","co.gl","com.gl","edu.gl","net.gl","org.gl","gm","gn","ac.gn","com.gn","edu.gn","gov.gn","org.gn","net.gn","gov","gp","com.gp","net.gp","mobi.gp","edu.gp","org.gp","asso.gp","gq","gr","com.gr","edu.gr","net.gr","org.gr","gov.gr","gs","gt","com.gt","edu.gt","gob.gt","ind.gt","mil.gt","net.gt","org.gt","gu","com.gu","edu.gu","gov.gu","guam.gu","info.gu","net.gu","org.gu","web.gu","gw","gy","co.gy","com.gy","edu.gy","gov.gy","net.gy","org.gy","hk","com.hk","edu.hk","gov.hk","idv.hk","net.hk","org.hk",".hk",".hk",".hk",".hk",".hk",".hk",".hk",".hk",".hk",".hk",".hk",".hk",".hk",".hk",".hk","hm","hn","com.hn","edu.hn","org.hn","net.hn","mil.hn","gob.hn","hr","iz.hr","from.hr","name.hr","com.hr","ht","com.ht","shop.ht","firm.ht","info.ht","adult.ht","net.ht","pro.ht","org.ht","med.ht","art.ht","coop.ht","pol.ht","asso.ht","edu.ht","rel.ht","gouv.ht","perso.ht","hu","co.hu","info.hu","org.hu","priv.hu","sport.hu","tm.hu","2000.hu","agrar.hu","bolt.hu","casino.hu","city.hu","erotica.hu","erotika.hu","film.hu","forum.hu","games.hu","hotel.hu","ingatlan.hu","jogasz.hu","konyvelo.hu","lakas.hu","media.hu","news.hu","reklam.hu","sex.hu","shop.hu","suli.hu","szex.hu","tozsde.hu","utazas.hu","video.hu","id","ac.id","biz.id","co.id","desa.id","go.id","mil.id","my.id","net.id","or.id","sch.id","web.id","ie","gov.ie","il","ac.il","co.il","gov.il","idf.il","k12.il","muni.il","net.il","org.il","im","ac.im","co.im","com.im","ltd.co.im","net.im","org.im","plc.co.im","tt.im","tv.im","in","co.in","firm.in","net.in","org.in","gen.in","ind.in","nic.in","ac.in","edu.in","res.in","gov.in","mil.in","info","int","eu.int","io","com.io","iq","gov.iq","edu.iq","mil.iq","com.iq","org.iq","net.iq","ir","ac.ir","co.ir","gov.ir","id.ir","net.ir","org.ir","sch.ir",".ir",".ir","is","net.is","com.is","edu.is","gov.is","org.is","int.is","it","gov.it","edu.it","abr.it","abruzzo.it","aosta-valley.it","aostavalley.it","bas.it","basilicata.it","cal.it","calabria.it","cam.it","campania.it","emilia-romagna.it","emiliaromagna.it","emr.it","friuli-v-giulia.it","friuli-ve-giulia.it","friuli-vegiulia.it","friuli-venezia-giulia.it","friuli-veneziagiulia.it","friuli-vgiulia.it","friuliv-giulia.it","friulive-giulia.it","friulivegiulia.it","friulivenezia-giulia.it","friuliveneziagiulia.it","friulivgiulia.it","fvg.it","laz.it","lazio.it","lig.it","liguria.it","lom.it","lombardia.it","lombardy.it","lucania.it","mar.it","marche.it","mol.it","molise.it","piedmont.it","piemonte.it","pmn.it","pug.it","puglia.it","sar.it","sardegna.it","sardinia.it","sic.it","sicilia.it","sicily.it","taa.it","tos.it","toscana.it","trentin-sud-tirol.it","trentin-sud-tirol.it","trentin-sudtirol.it","trentin-sudtirol.it","trentin-sued-tirol.it","trentin-suedtirol.it","trentino-a-adige.it","trentino-aadige.it","trentino-alto-adige.it","trentino-altoadige.it","trentino-s-tirol.it","trentino-stirol.it","trentino-sud-tirol.it","trentino-sud-tirol.it","trentino-sudtirol.it","trentino-sudtirol.it","trentino-sued-tirol.it","trentino-suedtirol.it","trentino.it","trentinoa-adige.it","trentinoaadige.it","trentinoalto-adige.it","trentinoaltoadige.it","trentinos-tirol.it","trentinostirol.it","trentinosud-tirol.it","trentinosud-tirol.it","trentinosudtirol.it","trentinosudtirol.it","trentinosued-tirol.it","trentinosuedtirol.it","trentinsud-tirol.it","trentinsud-tirol.it","trentinsudtirol.it","trentinsudtirol.it","trentinsued-tirol.it","trentinsuedtirol.it","tuscany.it","umb.it","umbria.it","val-d-aosta.it","val-daosta.it","vald-aosta.it","valdaosta.it","valle-aosta.it","valle-d-aosta.it","valle-daosta.it","valleaosta.it","valled-aosta.it","valledaosta.it","vallee-aoste.it","vallee-aoste.it","vallee-d-aoste.it","vallee-d-aoste.it","valleeaoste.it","valleeaoste.it","valleedaoste.it","valleedaoste.it","vao.it","vda.it","ven.it","veneto.it","ag.it","agrigento.it","al.it","alessandria.it","alto-adige.it","altoadige.it","an.it","ancona.it","andria-barletta-trani.it","andria-trani-barletta.it","andriabarlettatrani.it","andriatranibarletta.it","ao.it","aosta.it","aoste.it","ap.it","aq.it","aquila.it","ar.it","arezzo.it","ascoli-piceno.it","ascolipiceno.it","asti.it","at.it","av.it","avellino.it","ba.it","balsan-sudtirol.it","balsan-sudtirol.it","balsan-suedtirol.it","balsan.it","bari.it","barletta-trani-andria.it","barlettatraniandria.it","belluno.it","benevento.it","bergamo.it","bg.it","bi.it","biella.it","bl.it","bn.it","bo.it","bologna.it","bolzano-altoadige.it","bolzano.it","bozen-sudtirol.it","bozen-sudtirol.it","bozen-suedtirol.it","bozen.it","br.it","brescia.it","brindisi.it","bs.it","bt.it","bulsan-sudtirol.it","bulsan-sudtirol.it","bulsan-suedtirol.it","bulsan.it","bz.it","ca.it","cagliari.it","caltanissetta.it","campidano-medio.it","campidanomedio.it","campobasso.it","carbonia-iglesias.it","carboniaiglesias.it","carrara-massa.it","carraramassa.it","caserta.it","catania.it","catanzaro.it","cb.it","ce.it","cesena-forli.it","cesena-forli.it","cesenaforli.it","cesenaforli.it","ch.it","chieti.it","ci.it","cl.it","cn.it","co.it","como.it","cosenza.it","cr.it","cremona.it","crotone.it","cs.it","ct.it","cuneo.it","cz.it","dell-ogliastra.it","dellogliastra.it","en.it","enna.it","fc.it","fe.it","fermo.it","ferrara.it","fg.it","fi.it","firenze.it","florence.it","fm.it","foggia.it","forli-cesena.it","forli-cesena.it","forlicesena.it","forlicesena.it","fr.it","frosinone.it","ge.it","genoa.it","genova.it","go.it","gorizia.it","gr.it","grosseto.it","iglesias-carbonia.it","iglesiascarbonia.it","im.it","imperia.it","is.it","isernia.it","kr.it","la-spezia.it","laquila.it","laspezia.it","latina.it","lc.it","le.it","lecce.it","lecco.it","li.it","livorno.it","lo.it","lodi.it","lt.it","lu.it","lucca.it","macerata.it","mantova.it","massa-carrara.it","massacarrara.it","matera.it","mb.it","mc.it","me.it","medio-campidano.it","mediocampidano.it","messina.it","mi.it","milan.it","milano.it","mn.it","mo.it","modena.it","monza-brianza.it","monza-e-della-brianza.it","monza.it","monzabrianza.it","monzaebrianza.it","monzaedellabrianza.it","ms.it","mt.it","na.it","naples.it","napoli.it","no.it","novara.it","nu.it","nuoro.it","og.it","ogliastra.it","olbia-tempio.it","olbiatempio.it","or.it","oristano.it","ot.it","pa.it","padova.it","padua.it","palermo.it","parma.it","pavia.it","pc.it","pd.it","pe.it","perugia.it","pesaro-urbino.it","pesarourbino.it","pescara.it","pg.it","pi.it","piacenza.it","pisa.it","pistoia.it","pn.it","po.it","pordenone.it","potenza.it","pr.it","prato.it","pt.it","pu.it","pv.it","pz.it","ra.it","ragusa.it","ravenna.it","rc.it","re.it","reggio-calabria.it","reggio-emilia.it","reggiocalabria.it","reggioemilia.it","rg.it","ri.it","rieti.it","rimini.it","rm.it","rn.it","ro.it","roma.it","rome.it","rovigo.it","sa.it","salerno.it","sassari.it","savona.it","si.it","siena.it","siracusa.it","so.it","sondrio.it","sp.it","sr.it","ss.it","suedtirol.it","sudtirol.it","sv.it","ta.it","taranto.it","te.it","tempio-olbia.it","tempioolbia.it","teramo.it","terni.it","tn.it","to.it","torino.it","tp.it","tr.it","trani-andria-barletta.it","trani-barletta-andria.it","traniandriabarletta.it","tranibarlettaandria.it","trapani.it","trento.it","treviso.it","trieste.it","ts.it","turin.it","tv.it","ud.it","udine.it","urbino-pesaro.it","urbinopesaro.it","va.it","varese.it","vb.it","vc.it","ve.it","venezia.it","venice.it","verbania.it","vercelli.it","verona.it","vi.it","vibo-valentia.it","vibovalentia.it","vicenza.it","viterbo.it","vr.it","vs.it","vt.it","vv.it","je","co.je","net.je","org.je","*.jm","jo","com.jo","org.jo","net.jo","edu.jo","sch.jo","gov.jo","mil.jo","name.jo","jobs","jp","ac.jp","ad.jp","co.jp","ed.jp","go.jp","gr.jp","lg.jp","ne.jp","or.jp","aichi.jp","akita.jp","aomori.jp","chiba.jp","ehime.jp","fukui.jp","fukuoka.jp","fukushima.jp","gifu.jp","gunma.jp","hiroshima.jp","hokkaido.jp","hyogo.jp","ibaraki.jp","ishikawa.jp","iwate.jp","kagawa.jp","kagoshima.jp","kanagawa.jp","kochi.jp","kumamoto.jp","kyoto.jp","mie.jp","miyagi.jp","miyazaki.jp","nagano.jp","nagasaki.jp","nara.jp","niigata.jp","oita.jp","okayama.jp","okinawa.jp","osaka.jp","saga.jp","saitama.jp","shiga.jp","shimane.jp","shizuoka.jp","tochigi.jp","tokushima.jp","tokyo.jp","tottori.jp","toyama.jp","wakayama.jp","yamagata.jp","yamaguchi.jp","yamanashi.jp",".jp",".jp",".jp",".jp",".jp",".jp",".jp",".jp",".jp",".jp",".jp",".jp",".jp",".jp",".jp",".jp",".jp",".jp",".jp",".jp",".jp",".jp",".jp",".jp",".jp",".jp",".jp",".jp",".jp",".jp",".jp",".jp",".jp",".jp",".jp",".jp",".jp",".jp",".jp",".jp",".jp",".jp",".jp",".jp",".jp",".jp",".jp","*.kawasaki.jp","*.kitakyushu.jp","*.kobe.jp","*.nagoya.jp","*.sapporo.jp","*.sendai.jp","*.yokohama.jp","!city.kawasaki.jp","!city.kitakyushu.jp","!city.kobe.jp","!city.nagoya.jp","!city.sapporo.jp","!city.sendai.jp","!city.yokohama.jp","aisai.aichi.jp","ama.aichi.jp","anjo.aichi.jp","asuke.aichi.jp","chiryu.aichi.jp","chita.aichi.jp","fuso.aichi.jp","gamagori.aichi.jp","handa.aichi.jp","hazu.aichi.jp","hekinan.aichi.jp","higashiura.aichi.jp","ichinomiya.aichi.jp","inazawa.aichi.jp","inuyama.aichi.jp","isshiki.aichi.jp","iwakura.aichi.jp","kanie.aichi.jp","kariya.aichi.jp","kasugai.aichi.jp","kira.aichi.jp","kiyosu.aichi.jp","komaki.aichi.jp","konan.aichi.jp","kota.aichi.jp","mihama.aichi.jp","miyoshi.aichi.jp","nishio.aichi.jp","nisshin.aichi.jp","obu.aichi.jp","oguchi.aichi.jp","oharu.aichi.jp","okazaki.aichi.jp","owariasahi.aichi.jp","seto.aichi.jp","shikatsu.aichi.jp","shinshiro.aichi.jp","shitara.aichi.jp","tahara.aichi.jp","takahama.aichi.jp","tobishima.aichi.jp","toei.aichi.jp","togo.aichi.jp","tokai.aichi.jp","tokoname.aichi.jp","toyoake.aichi.jp","toyohashi.aichi.jp","toyokawa.aichi.jp","toyone.aichi.jp","toyota.aichi.jp","tsushima.aichi.jp","yatomi.aichi.jp","akita.akita.jp","daisen.akita.jp","fujisato.akita.jp","gojome.akita.jp","hachirogata.akita.jp","happou.akita.jp","higashinaruse.akita.jp","honjo.akita.jp","honjyo.akita.jp","ikawa.akita.jp","kamikoani.akita.jp","kamioka.akita.jp","katagami.akita.jp","kazuno.akita.jp","kitaakita.akita.jp","kosaka.akita.jp","kyowa.akita.jp","misato.akita.jp","mitane.akita.jp","moriyoshi.akita.jp","nikaho.akita.jp","noshiro.akita.jp","odate.akita.jp","oga.akita.jp","ogata.akita.jp","semboku.akita.jp","yokote.akita.jp","yurihonjo.akita.jp","aomori.aomori.jp","gonohe.aomori.jp","hachinohe.aomori.jp","hashikami.aomori.jp","hiranai.aomori.jp","hirosaki.aomori.jp","itayanagi.aomori.jp","kuroishi.aomori.jp","misawa.aomori.jp","mutsu.aomori.jp","nakadomari.aomori.jp","noheji.aomori.jp","oirase.aomori.jp","owani.aomori.jp","rokunohe.aomori.jp","sannohe.aomori.jp","shichinohe.aomori.jp","shingo.aomori.jp","takko.aomori.jp","towada.aomori.jp","tsugaru.aomori.jp","tsuruta.aomori.jp","abiko.chiba.jp","asahi.chiba.jp","chonan.chiba.jp","chosei.chiba.jp","choshi.chiba.jp","chuo.chiba.jp","funabashi.chiba.jp","futtsu.chiba.jp","hanamigawa.chiba.jp","ichihara.chiba.jp","ichikawa.chiba.jp","ichinomiya.chiba.jp","inzai.chiba.jp","isumi.chiba.jp","kamagaya.chiba.jp","kamogawa.chiba.jp","kashiwa.chiba.jp","katori.chiba.jp","katsuura.chiba.jp","kimitsu.chiba.jp","kisarazu.chiba.jp","kozaki.chiba.jp","kujukuri.chiba.jp","kyonan.chiba.jp","matsudo.chiba.jp","midori.chiba.jp","mihama.chiba.jp","minamiboso.chiba.jp","mobara.chiba.jp","mutsuzawa.chiba.jp","nagara.chiba.jp","nagareyama.chiba.jp","narashino.chiba.jp","narita.chiba.jp","noda.chiba.jp","oamishirasato.chiba.jp","omigawa.chiba.jp","onjuku.chiba.jp","otaki.chiba.jp","sakae.chiba.jp","sakura.chiba.jp","shimofusa.chiba.jp","shirako.chiba.jp","shiroi.chiba.jp","shisui.chiba.jp","sodegaura.chiba.jp","sosa.chiba.jp","tako.chiba.jp","tateyama.chiba.jp","togane.chiba.jp","tohnosho.chiba.jp","tomisato.chiba.jp","urayasu.chiba.jp","yachimata.chiba.jp","yachiyo.chiba.jp","yokaichiba.chiba.jp","yokoshibahikari.chiba.jp","yotsukaido.chiba.jp","ainan.ehime.jp","honai.ehime.jp","ikata.ehime.jp","imabari.ehime.jp","iyo.ehime.jp","kamijima.ehime.jp","kihoku.ehime.jp","kumakogen.ehime.jp","masaki.ehime.jp","matsuno.ehime.jp","matsuyama.ehime.jp","namikata.ehime.jp","niihama.ehime.jp","ozu.ehime.jp","saijo.ehime.jp","seiyo.ehime.jp","shikokuchuo.ehime.jp","tobe.ehime.jp","toon.ehime.jp","uchiko.ehime.jp","uwajima.ehime.jp","yawatahama.ehime.jp","echizen.fukui.jp","eiheiji.fukui.jp","fukui.fukui.jp","ikeda.fukui.jp","katsuyama.fukui.jp","mihama.fukui.jp","minamiechizen.fukui.jp","obama.fukui.jp","ohi.fukui.jp","ono.fukui.jp","sabae.fukui.jp","sakai.fukui.jp","takahama.fukui.jp","tsuruga.fukui.jp","wakasa.fukui.jp","ashiya.fukuoka.jp","buzen.fukuoka.jp","chikugo.fukuoka.jp","chikuho.fukuoka.jp","chikujo.fukuoka.jp","chikushino.fukuoka.jp","chikuzen.fukuoka.jp","chuo.fukuoka.jp","dazaifu.fukuoka.jp","fukuchi.fukuoka.jp","hakata.fukuoka.jp","higashi.fukuoka.jp","hirokawa.fukuoka.jp","hisayama.fukuoka.jp","iizuka.fukuoka.jp","inatsuki.fukuoka.jp","kaho.fukuoka.jp","kasuga.fukuoka.jp","kasuya.fukuoka.jp","kawara.fukuoka.jp","keisen.fukuoka.jp","koga.fukuoka.jp","kurate.fukuoka.jp","kurogi.fukuoka.jp","kurume.fukuoka.jp","minami.fukuoka.jp","miyako.fukuoka.jp","miyama.fukuoka.jp","miyawaka.fukuoka.jp","mizumaki.fukuoka.jp","munakata.fukuoka.jp","nakagawa.fukuoka.jp","nakama.fukuoka.jp","nishi.fukuoka.jp","nogata.fukuoka.jp","ogori.fukuoka.jp","okagaki.fukuoka.jp","okawa.fukuoka.jp","oki.fukuoka.jp","omuta.fukuoka.jp","onga.fukuoka.jp","onojo.fukuoka.jp","oto.fukuoka.jp","saigawa.fukuoka.jp","sasaguri.fukuoka.jp","shingu.fukuoka.jp","shinyoshitomi.fukuoka.jp","shonai.fukuoka.jp","soeda.fukuoka.jp","sue.fukuoka.jp","tachiarai.fukuoka.jp","tagawa.fukuoka.jp","takata.fukuoka.jp","toho.fukuoka.jp","toyotsu.fukuoka.jp","tsuiki.fukuoka.jp","ukiha.fukuoka.jp","umi.fukuoka.jp","usui.fukuoka.jp","yamada.fukuoka.jp","yame.fukuoka.jp","yanagawa.fukuoka.jp","yukuhashi.fukuoka.jp","aizubange.fukushima.jp","aizumisato.fukushima.jp","aizuwakamatsu.fukushima.jp","asakawa.fukushima.jp","bandai.fukushima.jp","date.fukushima.jp","fukushima.fukushima.jp","furudono.fukushima.jp","futaba.fukushima.jp","hanawa.fukushima.jp","higashi.fukushima.jp","hirata.fukushima.jp","hirono.fukushima.jp","iitate.fukushima.jp","inawashiro.fukushima.jp","ishikawa.fukushima.jp","iwaki.fukushima.jp","izumizaki.fukushima.jp","kagamiishi.fukushima.jp","kaneyama.fukushima.jp","kawamata.fukushima.jp","kitakata.fukushima.jp","kitashiobara.fukushima.jp","koori.fukushima.jp","koriyama.fukushima.jp","kunimi.fukushima.jp","miharu.fukushima.jp","mishima.fukushima.jp","namie.fukushima.jp","nango.fukushima.jp","nishiaizu.fukushima.jp","nishigo.fukushima.jp","okuma.fukushima.jp","omotego.fukushima.jp","ono.fukushima.jp","otama.fukushima.jp","samegawa.fukushima.jp","shimogo.fukushima.jp","shirakawa.fukushima.jp","showa.fukushima.jp","soma.fukushima.jp","sukagawa.fukushima.jp","taishin.fukushima.jp","tamakawa.fukushima.jp","tanagura.fukushima.jp","tenei.fukushima.jp","yabuki.fukushima.jp","yamato.fukushima.jp","yamatsuri.fukushima.jp","yanaizu.fukushima.jp","yugawa.fukushima.jp","anpachi.gifu.jp","ena.gifu.jp","gifu.gifu.jp","ginan.gifu.jp","godo.gifu.jp","gujo.gifu.jp","hashima.gifu.jp","hichiso.gifu.jp","hida.gifu.jp","higashishirakawa.gifu.jp","ibigawa.gifu.jp","ikeda.gifu.jp","kakamigahara.gifu.jp","kani.gifu.jp","kasahara.gifu.jp","kasamatsu.gifu.jp","kawaue.gifu.jp","kitagata.gifu.jp","mino.gifu.jp","minokamo.gifu.jp","mitake.gifu.jp","mizunami.gifu.jp","motosu.gifu.jp","nakatsugawa.gifu.jp","ogaki.gifu.jp","sakahogi.gifu.jp","seki.gifu.jp","sekigahara.gifu.jp","shirakawa.gifu.jp","tajimi.gifu.jp","takayama.gifu.jp","tarui.gifu.jp","toki.gifu.jp","tomika.gifu.jp","wanouchi.gifu.jp","yamagata.gifu.jp","yaotsu.gifu.jp","yoro.gifu.jp","annaka.gunma.jp","chiyoda.gunma.jp","fujioka.gunma.jp","higashiagatsuma.gunma.jp","isesaki.gunma.jp","itakura.gunma.jp","kanna.gunma.jp","kanra.gunma.jp","katashina.gunma.jp","kawaba.gunma.jp","kiryu.gunma.jp","kusatsu.gunma.jp","maebashi.gunma.jp","meiwa.gunma.jp","midori.gunma.jp","minakami.gunma.jp","naganohara.gunma.jp","nakanojo.gunma.jp","nanmoku.gunma.jp","numata.gunma.jp","oizumi.gunma.jp","ora.gunma.jp","ota.gunma.jp","shibukawa.gunma.jp","shimonita.gunma.jp","shinto.gunma.jp","showa.gunma.jp","takasaki.gunma.jp","takayama.gunma.jp","tamamura.gunma.jp","tatebayashi.gunma.jp","tomioka.gunma.jp","tsukiyono.gunma.jp","tsumagoi.gunma.jp","ueno.gunma.jp","yoshioka.gunma.jp","asaminami.hiroshima.jp","daiwa.hiroshima.jp","etajima.hiroshima.jp","fuchu.hiroshima.jp","fukuyama.hiroshima.jp","hatsukaichi.hiroshima.jp","higashihiroshima.hiroshima.jp","hongo.hiroshima.jp","jinsekikogen.hiroshima.jp","kaita.hiroshima.jp","kui.hiroshima.jp","kumano.hiroshima.jp","kure.hiroshima.jp","mihara.hiroshima.jp","miyoshi.hiroshima.jp","naka.hiroshima.jp","onomichi.hiroshima.jp","osakikamijima.hiroshima.jp","otake.hiroshima.jp","saka.hiroshima.jp","sera.hiroshima.jp","seranishi.hiroshima.jp","shinichi.hiroshima.jp","shobara.hiroshima.jp","takehara.hiroshima.jp","abashiri.hokkaido.jp","abira.hokkaido.jp","aibetsu.hokkaido.jp","akabira.hokkaido.jp","akkeshi.hokkaido.jp","asahikawa.hokkaido.jp","ashibetsu.hokkaido.jp","ashoro.hokkaido.jp","assabu.hokkaido.jp","atsuma.hokkaido.jp","bibai.hokkaido.jp","biei.hokkaido.jp","bifuka.hokkaido.jp","bihoro.hokkaido.jp","biratori.hokkaido.jp","chippubetsu.hokkaido.jp","chitose.hokkaido.jp","date.hokkaido.jp","ebetsu.hokkaido.jp","embetsu.hokkaido.jp","eniwa.hokkaido.jp","erimo.hokkaido.jp","esan.hokkaido.jp","esashi.hokkaido.jp","fukagawa.hokkaido.jp","fukushima.hokkaido.jp","furano.hokkaido.jp","furubira.hokkaido.jp","haboro.hokkaido.jp","hakodate.hokkaido.jp","hamatonbetsu.hokkaido.jp","hidaka.hokkaido.jp","higashikagura.hokkaido.jp","higashikawa.hokkaido.jp","hiroo.hokkaido.jp","hokuryu.hokkaido.jp","hokuto.hokkaido.jp","honbetsu.hokkaido.jp","horokanai.hokkaido.jp","horonobe.hokkaido.jp","ikeda.hokkaido.jp","imakane.hokkaido.jp","ishikari.hokkaido.jp","iwamizawa.hokkaido.jp","iwanai.hokkaido.jp","kamifurano.hokkaido.jp","kamikawa.hokkaido.jp","kamishihoro.hokkaido.jp","kamisunagawa.hokkaido.jp","kamoenai.hokkaido.jp","kayabe.hokkaido.jp","kembuchi.hokkaido.jp","kikonai.hokkaido.jp","kimobetsu.hokkaido.jp","kitahiroshima.hokkaido.jp","kitami.hokkaido.jp","kiyosato.hokkaido.jp","koshimizu.hokkaido.jp","kunneppu.hokkaido.jp","kuriyama.hokkaido.jp","kuromatsunai.hokkaido.jp","kushiro.hokkaido.jp","kutchan.hokkaido.jp","kyowa.hokkaido.jp","mashike.hokkaido.jp","matsumae.hokkaido.jp","mikasa.hokkaido.jp","minamifurano.hokkaido.jp","mombetsu.hokkaido.jp","moseushi.hokkaido.jp","mukawa.hokkaido.jp","muroran.hokkaido.jp","naie.hokkaido.jp","nakagawa.hokkaido.jp","nakasatsunai.hokkaido.jp","nakatombetsu.hokkaido.jp","nanae.hokkaido.jp","nanporo.hokkaido.jp","nayoro.hokkaido.jp","nemuro.hokkaido.jp","niikappu.hokkaido.jp","niki.hokkaido.jp","nishiokoppe.hokkaido.jp","noboribetsu.hokkaido.jp","numata.hokkaido.jp","obihiro.hokkaido.jp","obira.hokkaido.jp","oketo.hokkaido.jp","okoppe.hokkaido.jp","otaru.hokkaido.jp","otobe.hokkaido.jp","otofuke.hokkaido.jp","otoineppu.hokkaido.jp","oumu.hokkaido.jp","ozora.hokkaido.jp","pippu.hokkaido.jp","rankoshi.hokkaido.jp","rebun.hokkaido.jp","rikubetsu.hokkaido.jp","rishiri.hokkaido.jp","rishirifuji.hokkaido.jp","saroma.hokkaido.jp","sarufutsu.hokkaido.jp","shakotan.hokkaido.jp","shari.hokkaido.jp","shibecha.hokkaido.jp","shibetsu.hokkaido.jp","shikabe.hokkaido.jp","shikaoi.hokkaido.jp","shimamaki.hokkaido.jp","shimizu.hokkaido.jp","shimokawa.hokkaido.jp","shinshinotsu.hokkaido.jp","shintoku.hokkaido.jp","shiranuka.hokkaido.jp","shiraoi.hokkaido.jp","shiriuchi.hokkaido.jp","sobetsu.hokkaido.jp","sunagawa.hokkaido.jp","taiki.hokkaido.jp","takasu.hokkaido.jp","takikawa.hokkaido.jp","takinoue.hokkaido.jp","teshikaga.hokkaido.jp","tobetsu.hokkaido.jp","tohma.hokkaido.jp","tomakomai.hokkaido.jp","tomari.hokkaido.jp","toya.hokkaido.jp","toyako.hokkaido.jp","toyotomi.hokkaido.jp","toyoura.hokkaido.jp","tsubetsu.hokkaido.jp","tsukigata.hokkaido.jp","urakawa.hokkaido.jp","urausu.hokkaido.jp","uryu.hokkaido.jp","utashinai.hokkaido.jp","wakkanai.hokkaido.jp","wassamu.hokkaido.jp","yakumo.hokkaido.jp","yoichi.hokkaido.jp","aioi.hyogo.jp","akashi.hyogo.jp","ako.hyogo.jp","amagasaki.hyogo.jp","aogaki.hyogo.jp","asago.hyogo.jp","ashiya.hyogo.jp","awaji.hyogo.jp","fukusaki.hyogo.jp","goshiki.hyogo.jp","harima.hyogo.jp","himeji.hyogo.jp","ichikawa.hyogo.jp","inagawa.hyogo.jp","itami.hyogo.jp","kakogawa.hyogo.jp","kamigori.hyogo.jp","kamikawa.hyogo.jp","kasai.hyogo.jp","kasuga.hyogo.jp","kawanishi.hyogo.jp","miki.hyogo.jp","minamiawaji.hyogo.jp","nishinomiya.hyogo.jp","nishiwaki.hyogo.jp","ono.hyogo.jp","sanda.hyogo.jp","sannan.hyogo.jp","sasayama.hyogo.jp","sayo.hyogo.jp","shingu.hyogo.jp","shinonsen.hyogo.jp","shiso.hyogo.jp","sumoto.hyogo.jp","taishi.hyogo.jp","taka.hyogo.jp","takarazuka.hyogo.jp","takasago.hyogo.jp","takino.hyogo.jp","tamba.hyogo.jp","tatsuno.hyogo.jp","toyooka.hyogo.jp","yabu.hyogo.jp","yashiro.hyogo.jp","yoka.hyogo.jp","yokawa.hyogo.jp","ami.ibaraki.jp","asahi.ibaraki.jp","bando.ibaraki.jp","chikusei.ibaraki.jp","daigo.ibaraki.jp","fujishiro.ibaraki.jp","hitachi.ibaraki.jp","hitachinaka.ibaraki.jp","hitachiomiya.ibaraki.jp","hitachiota.ibaraki.jp","ibaraki.ibaraki.jp","ina.ibaraki.jp","inashiki.ibaraki.jp","itako.ibaraki.jp","iwama.ibaraki.jp","joso.ibaraki.jp","kamisu.ibaraki.jp","kasama.ibaraki.jp","kashima.ibaraki.jp","kasumigaura.ibaraki.jp","koga.ibaraki.jp","miho.ibaraki.jp","mito.ibaraki.jp","moriya.ibaraki.jp","naka.ibaraki.jp","namegata.ibaraki.jp","oarai.ibaraki.jp","ogawa.ibaraki.jp","omitama.ibaraki.jp","ryugasaki.ibaraki.jp","sakai.ibaraki.jp","sakuragawa.ibaraki.jp","shimodate.ibaraki.jp","shimotsuma.ibaraki.jp","shirosato.ibaraki.jp","sowa.ibaraki.jp","suifu.ibaraki.jp","takahagi.ibaraki.jp","tamatsukuri.ibaraki.jp","tokai.ibaraki.jp","tomobe.ibaraki.jp","tone.ibaraki.jp","toride.ibaraki.jp","tsuchiura.ibaraki.jp","tsukuba.ibaraki.jp","uchihara.ibaraki.jp","ushiku.ibaraki.jp","yachiyo.ibaraki.jp","yamagata.ibaraki.jp","yawara.ibaraki.jp","yuki.ibaraki.jp","anamizu.ishikawa.jp","hakui.ishikawa.jp","hakusan.ishikawa.jp","kaga.ishikawa.jp","kahoku.ishikawa.jp","kanazawa.ishikawa.jp","kawakita.ishikawa.jp","komatsu.ishikawa.jp","nakanoto.ishikawa.jp","nanao.ishikawa.jp","nomi.ishikawa.jp","nonoichi.ishikawa.jp","noto.ishikawa.jp","shika.ishikawa.jp","suzu.ishikawa.jp","tsubata.ishikawa.jp","tsurugi.ishikawa.jp","uchinada.ishikawa.jp","wajima.ishikawa.jp","fudai.iwate.jp","fujisawa.iwate.jp","hanamaki.iwate.jp","hiraizumi.iwate.jp","hirono.iwate.jp","ichinohe.iwate.jp","ichinoseki.iwate.jp","iwaizumi.iwate.jp","iwate.iwate.jp","joboji.iwate.jp","kamaishi.iwate.jp","kanegasaki.iwate.jp","karumai.iwate.jp","kawai.iwate.jp","kitakami.iwate.jp","kuji.iwate.jp","kunohe.iwate.jp","kuzumaki.iwate.jp","miyako.iwate.jp","mizusawa.iwate.jp","morioka.iwate.jp","ninohe.iwate.jp","noda.iwate.jp","ofunato.iwate.jp","oshu.iwate.jp","otsuchi.iwate.jp","rikuzentakata.iwate.jp","shiwa.iwate.jp","shizukuishi.iwate.jp","sumita.iwate.jp","tanohata.iwate.jp","tono.iwate.jp","yahaba.iwate.jp","yamada.iwate.jp","ayagawa.kagawa.jp","higashikagawa.kagawa.jp","kanonji.kagawa.jp","kotohira.kagawa.jp","manno.kagawa.jp","marugame.kagawa.jp","mitoyo.kagawa.jp","naoshima.kagawa.jp","sanuki.kagawa.jp","tadotsu.kagawa.jp","takamatsu.kagawa.jp","tonosho.kagawa.jp","uchinomi.kagawa.jp","utazu.kagawa.jp","zentsuji.kagawa.jp","akune.kagoshima.jp","amami.kagoshima.jp","hioki.kagoshima.jp","isa.kagoshima.jp","isen.kagoshima.jp","izumi.kagoshima.jp","kagoshima.kagoshima.jp","kanoya.kagoshima.jp","kawanabe.kagoshima.jp","kinko.kagoshima.jp","kouyama.kagoshima.jp","makurazaki.kagoshima.jp","matsumoto.kagoshima.jp","minamitane.kagoshima.jp","nakatane.kagoshima.jp","nishinoomote.kagoshima.jp","satsumasendai.kagoshima.jp","soo.kagoshima.jp","tarumizu.kagoshima.jp","yusui.kagoshima.jp","aikawa.kanagawa.jp","atsugi.kanagawa.jp","ayase.kanagawa.jp","chigasaki.kanagawa.jp","ebina.kanagawa.jp","fujisawa.kanagawa.jp","hadano.kanagawa.jp","hakone.kanagawa.jp","hiratsuka.kanagawa.jp","isehara.kanagawa.jp","kaisei.kanagawa.jp","kamakura.kanagawa.jp","kiyokawa.kanagawa.jp","matsuda.kanagawa.jp","minamiashigara.kanagawa.jp","miura.kanagawa.jp","nakai.kanagawa.jp","ninomiya.kanagawa.jp","odawara.kanagawa.jp","oi.kanagawa.jp","oiso.kanagawa.jp","sagamihara.kanagawa.jp","samukawa.kanagawa.jp","tsukui.kanagawa.jp","yamakita.kanagawa.jp","yamato.kanagawa.jp","yokosuka.kanagawa.jp","yugawara.kanagawa.jp","zama.kanagawa.jp","zushi.kanagawa.jp","aki.kochi.jp","geisei.kochi.jp","hidaka.kochi.jp","higashitsuno.kochi.jp","ino.kochi.jp","kagami.kochi.jp","kami.kochi.jp","kitagawa.kochi.jp","kochi.kochi.jp","mihara.kochi.jp","motoyama.kochi.jp","muroto.kochi.jp","nahari.kochi.jp","nakamura.kochi.jp","nankoku.kochi.jp","nishitosa.kochi.jp","niyodogawa.kochi.jp","ochi.kochi.jp","okawa.kochi.jp","otoyo.kochi.jp","otsuki.kochi.jp","sakawa.kochi.jp","sukumo.kochi.jp","susaki.kochi.jp","tosa.kochi.jp","tosashimizu.kochi.jp","toyo.kochi.jp","tsuno.kochi.jp","umaji.kochi.jp","yasuda.kochi.jp","yusuhara.kochi.jp","amakusa.kumamoto.jp","arao.kumamoto.jp","aso.kumamoto.jp","choyo.kumamoto.jp","gyokuto.kumamoto.jp","kamiamakusa.kumamoto.jp","kikuchi.kumamoto.jp","kumamoto.kumamoto.jp","mashiki.kumamoto.jp","mifune.kumamoto.jp","minamata.kumamoto.jp","minamioguni.kumamoto.jp","nagasu.kumamoto.jp","nishihara.kumamoto.jp","oguni.kumamoto.jp","ozu.kumamoto.jp","sumoto.kumamoto.jp","takamori.kumamoto.jp","uki.kumamoto.jp","uto.kumamoto.jp","yamaga.kumamoto.jp","yamato.kumamoto.jp","yatsushiro.kumamoto.jp","ayabe.kyoto.jp","fukuchiyama.kyoto.jp","higashiyama.kyoto.jp","ide.kyoto.jp","ine.kyoto.jp","joyo.kyoto.jp","kameoka.kyoto.jp","kamo.kyoto.jp","kita.kyoto.jp","kizu.kyoto.jp","kumiyama.kyoto.jp","kyotamba.kyoto.jp","kyotanabe.kyoto.jp","kyotango.kyoto.jp","maizuru.kyoto.jp","minami.kyoto.jp","minamiyamashiro.kyoto.jp","miyazu.kyoto.jp","muko.kyoto.jp","nagaokakyo.kyoto.jp","nakagyo.kyoto.jp","nantan.kyoto.jp","oyamazaki.kyoto.jp","sakyo.kyoto.jp","seika.kyoto.jp","tanabe.kyoto.jp","uji.kyoto.jp","ujitawara.kyoto.jp","wazuka.kyoto.jp","yamashina.kyoto.jp","yawata.kyoto.jp","asahi.mie.jp","inabe.mie.jp","ise.mie.jp","kameyama.mie.jp","kawagoe.mie.jp","kiho.mie.jp","kisosaki.mie.jp","kiwa.mie.jp","komono.mie.jp","kumano.mie.jp","kuwana.mie.jp","matsusaka.mie.jp","meiwa.mie.jp","mihama.mie.jp","minamiise.mie.jp","misugi.mie.jp","miyama.mie.jp","nabari.mie.jp","shima.mie.jp","suzuka.mie.jp","tado.mie.jp","taiki.mie.jp","taki.mie.jp","tamaki.mie.jp","toba.mie.jp","tsu.mie.jp","udono.mie.jp","ureshino.mie.jp","watarai.mie.jp","yokkaichi.mie.jp","furukawa.miyagi.jp","higashimatsushima.miyagi.jp","ishinomaki.miyagi.jp","iwanuma.miyagi.jp","kakuda.miyagi.jp","kami.miyagi.jp","kawasaki.miyagi.jp","marumori.miyagi.jp","matsushima.miyagi.jp","minamisanriku.miyagi.jp","misato.miyagi.jp","murata.miyagi.jp","natori.miyagi.jp","ogawara.miyagi.jp","ohira.miyagi.jp","onagawa.miyagi.jp","osaki.miyagi.jp","rifu.miyagi.jp","semine.miyagi.jp","shibata.miyagi.jp","shichikashuku.miyagi.jp","shikama.miyagi.jp","shiogama.miyagi.jp","shiroishi.miyagi.jp","tagajo.miyagi.jp","taiwa.miyagi.jp","tome.miyagi.jp","tomiya.miyagi.jp","wakuya.miyagi.jp","watari.miyagi.jp","yamamoto.miyagi.jp","zao.miyagi.jp","aya.miyazaki.jp","ebino.miyazaki.jp","gokase.miyazaki.jp","hyuga.miyazaki.jp","kadogawa.miyazaki.jp","kawaminami.miyazaki.jp","kijo.miyazaki.jp","kitagawa.miyazaki.jp","kitakata.miyazaki.jp","kitaura.miyazaki.jp","kobayashi.miyazaki.jp","kunitomi.miyazaki.jp","kushima.miyazaki.jp","mimata.miyazaki.jp","miyakonojo.miyazaki.jp","miyazaki.miyazaki.jp","morotsuka.miyazaki.jp","nichinan.miyazaki.jp","nishimera.miyazaki.jp","nobeoka.miyazaki.jp","saito.miyazaki.jp","shiiba.miyazaki.jp","shintomi.miyazaki.jp","takaharu.miyazaki.jp","takanabe.miyazaki.jp","takazaki.miyazaki.jp","tsuno.miyazaki.jp","achi.nagano.jp","agematsu.nagano.jp","anan.nagano.jp","aoki.nagano.jp","asahi.nagano.jp","azumino.nagano.jp","chikuhoku.nagano.jp","chikuma.nagano.jp","chino.nagano.jp","fujimi.nagano.jp","hakuba.nagano.jp","hara.nagano.jp","hiraya.nagano.jp","iida.nagano.jp","iijima.nagano.jp","iiyama.nagano.jp","iizuna.nagano.jp","ikeda.nagano.jp","ikusaka.nagano.jp","ina.nagano.jp","karuizawa.nagano.jp","kawakami.nagano.jp","kiso.nagano.jp","kisofukushima.nagano.jp","kitaaiki.nagano.jp","komagane.nagano.jp","komoro.nagano.jp","matsukawa.nagano.jp","matsumoto.nagano.jp","miasa.nagano.jp","minamiaiki.nagano.jp","minamimaki.nagano.jp","minamiminowa.nagano.jp","minowa.nagano.jp","miyada.nagano.jp","miyota.nagano.jp","mochizuki.nagano.jp","nagano.nagano.jp","nagawa.nagano.jp","nagiso.nagano.jp","nakagawa.nagano.jp","nakano.nagano.jp","nozawaonsen.nagano.jp","obuse.nagano.jp","ogawa.nagano.jp","okaya.nagano.jp","omachi.nagano.jp","omi.nagano.jp","ookuwa.nagano.jp","ooshika.nagano.jp","otaki.nagano.jp","otari.nagano.jp","sakae.nagano.jp","sakaki.nagano.jp","saku.nagano.jp","sakuho.nagano.jp","shimosuwa.nagano.jp","shinanomachi.nagano.jp","shiojiri.nagano.jp","suwa.nagano.jp","suzaka.nagano.jp","takagi.nagano.jp","takamori.nagano.jp","takayama.nagano.jp","tateshina.nagano.jp","tatsuno.nagano.jp","togakushi.nagano.jp","togura.nagano.jp","tomi.nagano.jp","ueda.nagano.jp","wada.nagano.jp","yamagata.nagano.jp","yamanouchi.nagano.jp","yasaka.nagano.jp","yasuoka.nagano.jp","chijiwa.nagasaki.jp","futsu.nagasaki.jp","goto.nagasaki.jp","hasami.nagasaki.jp","hirado.nagasaki.jp","iki.nagasaki.jp","isahaya.nagasaki.jp","kawatana.nagasaki.jp","kuchinotsu.nagasaki.jp","matsuura.nagasaki.jp","nagasaki.nagasaki.jp","obama.nagasaki.jp","omura.nagasaki.jp","oseto.nagasaki.jp","saikai.nagasaki.jp","sasebo.nagasaki.jp","seihi.nagasaki.jp","shimabara.nagasaki.jp","shinkamigoto.nagasaki.jp","togitsu.nagasaki.jp","tsushima.nagasaki.jp","unzen.nagasaki.jp","ando.nara.jp","gose.nara.jp","heguri.nara.jp","higashiyoshino.nara.jp","ikaruga.nara.jp","ikoma.nara.jp","kamikitayama.nara.jp","kanmaki.nara.jp","kashiba.nara.jp","kashihara.nara.jp","katsuragi.nara.jp","kawai.nara.jp","kawakami.nara.jp","kawanishi.nara.jp","koryo.nara.jp","kurotaki.nara.jp","mitsue.nara.jp","miyake.nara.jp","nara.nara.jp","nosegawa.nara.jp","oji.nara.jp","ouda.nara.jp","oyodo.nara.jp","sakurai.nara.jp","sango.nara.jp","shimoichi.nara.jp","shimokitayama.nara.jp","shinjo.nara.jp","soni.nara.jp","takatori.nara.jp","tawaramoto.nara.jp","tenkawa.nara.jp","tenri.nara.jp","uda.nara.jp","yamatokoriyama.nara.jp","yamatotakada.nara.jp","yamazoe.nara.jp","yoshino.nara.jp","aga.niigata.jp","agano.niigata.jp","gosen.niigata.jp","itoigawa.niigata.jp","izumozaki.niigata.jp","joetsu.niigata.jp","kamo.niigata.jp","kariwa.niigata.jp","kashiwazaki.niigata.jp","minamiuonuma.niigata.jp","mitsuke.niigata.jp","muika.niigata.jp","murakami.niigata.jp","myoko.niigata.jp","nagaoka.niigata.jp","niigata.niigata.jp","ojiya.niigata.jp","omi.niigata.jp","sado.niigata.jp","sanjo.niigata.jp","seiro.niigata.jp","seirou.niigata.jp","sekikawa.niigata.jp","shibata.niigata.jp","tagami.niigata.jp","tainai.niigata.jp","tochio.niigata.jp","tokamachi.niigata.jp","tsubame.niigata.jp","tsunan.niigata.jp","uonuma.niigata.jp","yahiko.niigata.jp","yoita.niigata.jp","yuzawa.niigata.jp","beppu.oita.jp","bungoono.oita.jp","bungotakada.oita.jp","hasama.oita.jp","hiji.oita.jp","himeshima.oita.jp","hita.oita.jp","kamitsue.oita.jp","kokonoe.oita.jp","kuju.oita.jp","kunisaki.oita.jp","kusu.oita.jp","oita.oita.jp","saiki.oita.jp","taketa.oita.jp","tsukumi.oita.jp","usa.oita.jp","usuki.oita.jp","yufu.oita.jp","akaiwa.okayama.jp","asakuchi.okayama.jp","bizen.okayama.jp","hayashima.okayama.jp","ibara.okayama.jp","kagamino.okayama.jp","kasaoka.okayama.jp","kibichuo.okayama.jp","kumenan.okayama.jp","kurashiki.okayama.jp","maniwa.okayama.jp","misaki.okayama.jp","nagi.okayama.jp","niimi.okayama.jp","nishiawakura.okayama.jp","okayama.okayama.jp","satosho.okayama.jp","setouchi.okayama.jp","shinjo.okayama.jp","shoo.okayama.jp","soja.okayama.jp","takahashi.okayama.jp","tamano.okayama.jp","tsuyama.okayama.jp","wake.okayama.jp","yakage.okayama.jp","aguni.okinawa.jp","ginowan.okinawa.jp","ginoza.okinawa.jp","gushikami.okinawa.jp","haebaru.okinawa.jp","higashi.okinawa.jp","hirara.okinawa.jp","iheya.okinawa.jp","ishigaki.okinawa.jp","ishikawa.okinawa.jp","itoman.okinawa.jp","izena.okinawa.jp","kadena.okinawa.jp","kin.okinawa.jp","kitadaito.okinawa.jp","kitanakagusuku.okinawa.jp","kumejima.okinawa.jp","kunigami.okinawa.jp","minamidaito.okinawa.jp","motobu.okinawa.jp","nago.okinawa.jp","naha.okinawa.jp","nakagusuku.okinawa.jp","nakijin.okinawa.jp","nanjo.okinawa.jp","nishihara.okinawa.jp","ogimi.okinawa.jp","okinawa.okinawa.jp","onna.okinawa.jp","shimoji.okinawa.jp","taketomi.okinawa.jp","tarama.okinawa.jp","tokashiki.okinawa.jp","tomigusuku.okinawa.jp","tonaki.okinawa.jp","urasoe.okinawa.jp","uruma.okinawa.jp","yaese.okinawa.jp","yomitan.okinawa.jp","yonabaru.okinawa.jp","yonaguni.okinawa.jp","zamami.okinawa.jp","abeno.osaka.jp","chihayaakasaka.osaka.jp","chuo.osaka.jp","daito.osaka.jp","fujiidera.osaka.jp","habikino.osaka.jp","hannan.osaka.jp","higashiosaka.osaka.jp","higashisumiyoshi.osaka.jp","higashiyodogawa.osaka.jp","hirakata.osaka.jp","ibaraki.osaka.jp","ikeda.osaka.jp","izumi.osaka.jp","izumiotsu.osaka.jp","izumisano.osaka.jp","kadoma.osaka.jp","kaizuka.osaka.jp","kanan.osaka.jp","kashiwara.osaka.jp","katano.osaka.jp","kawachinagano.osaka.jp","kishiwada.osaka.jp","kita.osaka.jp","kumatori.osaka.jp","matsubara.osaka.jp","minato.osaka.jp","minoh.osaka.jp","misaki.osaka.jp","moriguchi.osaka.jp","neyagawa.osaka.jp","nishi.osaka.jp","nose.osaka.jp","osakasayama.osaka.jp","sakai.osaka.jp","sayama.osaka.jp","sennan.osaka.jp","settsu.osaka.jp","shijonawate.osaka.jp","shimamoto.osaka.jp","suita.osaka.jp","tadaoka.osaka.jp","taishi.osaka.jp","tajiri.osaka.jp","takaishi.osaka.jp","takatsuki.osaka.jp","tondabayashi.osaka.jp","toyonaka.osaka.jp","toyono.osaka.jp","yao.osaka.jp","ariake.saga.jp","arita.saga.jp","fukudomi.saga.jp","genkai.saga.jp","hamatama.saga.jp","hizen.saga.jp","imari.saga.jp","kamimine.saga.jp","kanzaki.saga.jp","karatsu.saga.jp","kashima.saga.jp","kitagata.saga.jp","kitahata.saga.jp","kiyama.saga.jp","kouhoku.saga.jp","kyuragi.saga.jp","nishiarita.saga.jp","ogi.saga.jp","omachi.saga.jp","ouchi.saga.jp","saga.saga.jp","shiroishi.saga.jp","taku.saga.jp","tara.saga.jp","tosu.saga.jp","yoshinogari.saga.jp","arakawa.saitama.jp","asaka.saitama.jp","chichibu.saitama.jp","fujimi.saitama.jp","fujimino.saitama.jp","fukaya.saitama.jp","hanno.saitama.jp","hanyu.saitama.jp","hasuda.saitama.jp","hatogaya.saitama.jp","hatoyama.saitama.jp","hidaka.saitama.jp","higashichichibu.saitama.jp","higashimatsuyama.saitama.jp","honjo.saitama.jp","ina.saitama.jp","iruma.saitama.jp","iwatsuki.saitama.jp","kamiizumi.saitama.jp","kamikawa.saitama.jp","kamisato.saitama.jp","kasukabe.saitama.jp","kawagoe.saitama.jp","kawaguchi.saitama.jp","kawajima.saitama.jp","kazo.saitama.jp","kitamoto.saitama.jp","koshigaya.saitama.jp","kounosu.saitama.jp","kuki.saitama.jp","kumagaya.saitama.jp","matsubushi.saitama.jp","minano.saitama.jp","misato.saitama.jp","miyashiro.saitama.jp","miyoshi.saitama.jp","moroyama.saitama.jp","nagatoro.saitama.jp","namegawa.saitama.jp","niiza.saitama.jp","ogano.saitama.jp","ogawa.saitama.jp","ogose.saitama.jp","okegawa.saitama.jp","omiya.saitama.jp","otaki.saitama.jp","ranzan.saitama.jp","ryokami.saitama.jp","saitama.saitama.jp","sakado.saitama.jp","satte.saitama.jp","sayama.saitama.jp","shiki.saitama.jp","shiraoka.saitama.jp","soka.saitama.jp","sugito.saitama.jp","toda.saitama.jp","tokigawa.saitama.jp","tokorozawa.saitama.jp","tsurugashima.saitama.jp","urawa.saitama.jp","warabi.saitama.jp","yashio.saitama.jp","yokoze.saitama.jp","yono.saitama.jp","yorii.saitama.jp","yoshida.saitama.jp","yoshikawa.saitama.jp","yoshimi.saitama.jp","aisho.shiga.jp","gamo.shiga.jp","higashiomi.shiga.jp","hikone.shiga.jp","koka.shiga.jp","konan.shiga.jp","kosei.shiga.jp","koto.shiga.jp","kusatsu.shiga.jp","maibara.shiga.jp","moriyama.shiga.jp","nagahama.shiga.jp","nishiazai.shiga.jp","notogawa.shiga.jp","omihachiman.shiga.jp","otsu.shiga.jp","ritto.shiga.jp","ryuoh.shiga.jp","takashima.shiga.jp","takatsuki.shiga.jp","torahime.shiga.jp","toyosato.shiga.jp","yasu.shiga.jp","akagi.shimane.jp","ama.shimane.jp","gotsu.shimane.jp","hamada.shimane.jp","higashiizumo.shimane.jp","hikawa.shimane.jp","hikimi.shimane.jp","izumo.shimane.jp","kakinoki.shimane.jp","masuda.shimane.jp","matsue.shimane.jp","misato.shimane.jp","nishinoshima.shimane.jp","ohda.shimane.jp","okinoshima.shimane.jp","okuizumo.shimane.jp","shimane.shimane.jp","tamayu.shimane.jp","tsuwano.shimane.jp","unnan.shimane.jp","yakumo.shimane.jp","yasugi.shimane.jp","yatsuka.shimane.jp","arai.shizuoka.jp","atami.shizuoka.jp","fuji.shizuoka.jp","fujieda.shizuoka.jp","fujikawa.shizuoka.jp","fujinomiya.shizuoka.jp","fukuroi.shizuoka.jp","gotemba.shizuoka.jp","haibara.shizuoka.jp","hamamatsu.shizuoka.jp","higashiizu.shizuoka.jp","ito.shizuoka.jp","iwata.shizuoka.jp","izu.shizuoka.jp","izunokuni.shizuoka.jp","kakegawa.shizuoka.jp","kannami.shizuoka.jp","kawanehon.shizuoka.jp","kawazu.shizuoka.jp","kikugawa.shizuoka.jp","kosai.shizuoka.jp","makinohara.shizuoka.jp","matsuzaki.shizuoka.jp","minamiizu.shizuoka.jp","mishima.shizuoka.jp","morimachi.shizuoka.jp","nishiizu.shizuoka.jp","numazu.shizuoka.jp","omaezaki.shizuoka.jp","shimada.shizuoka.jp","shimizu.shizuoka.jp","shimoda.shizuoka.jp","shizuoka.shizuoka.jp","susono.shizuoka.jp","yaizu.shizuoka.jp","yoshida.shizuoka.jp","ashikaga.tochigi.jp","bato.tochigi.jp","haga.tochigi.jp","ichikai.tochigi.jp","iwafune.tochigi.jp","kaminokawa.tochigi.jp","kanuma.tochigi.jp","karasuyama.tochigi.jp","kuroiso.tochigi.jp","mashiko.tochigi.jp","mibu.tochigi.jp","moka.tochigi.jp","motegi.tochigi.jp","nasu.tochigi.jp","nasushiobara.tochigi.jp","nikko.tochigi.jp","nishikata.tochigi.jp","nogi.tochigi.jp","ohira.tochigi.jp","ohtawara.tochigi.jp","oyama.tochigi.jp","sakura.tochigi.jp","sano.tochigi.jp","shimotsuke.tochigi.jp","shioya.tochigi.jp","takanezawa.tochigi.jp","tochigi.tochigi.jp","tsuga.tochigi.jp","ujiie.tochigi.jp","utsunomiya.tochigi.jp","yaita.tochigi.jp","aizumi.tokushima.jp","anan.tokushima.jp","ichiba.tokushima.jp","itano.tokushima.jp","kainan.tokushima.jp","komatsushima.tokushima.jp","matsushige.tokushima.jp","mima.tokushima.jp","minami.tokushima.jp","miyoshi.tokushima.jp","mugi.tokushima.jp","nakagawa.tokushima.jp","naruto.tokushima.jp","sanagochi.tokushima.jp","shishikui.tokushima.jp","tokushima.tokushima.jp","wajiki.tokushima.jp","adachi.tokyo.jp","akiruno.tokyo.jp","akishima.tokyo.jp","aogashima.tokyo.jp","arakawa.tokyo.jp","bunkyo.tokyo.jp","chiyoda.tokyo.jp","chofu.tokyo.jp","chuo.tokyo.jp","edogawa.tokyo.jp","fuchu.tokyo.jp","fussa.tokyo.jp","hachijo.tokyo.jp","hachioji.tokyo.jp","hamura.tokyo.jp","higashikurume.tokyo.jp","higashimurayama.tokyo.jp","higashiyamato.tokyo.jp","hino.tokyo.jp","hinode.tokyo.jp","hinohara.tokyo.jp","inagi.tokyo.jp","itabashi.tokyo.jp","katsushika.tokyo.jp","kita.tokyo.jp","kiyose.tokyo.jp","kodaira.tokyo.jp","koganei.tokyo.jp","kokubunji.tokyo.jp","komae.tokyo.jp","koto.tokyo.jp","kouzushima.tokyo.jp","kunitachi.tokyo.jp","machida.tokyo.jp","meguro.tokyo.jp","minato.tokyo.jp","mitaka.tokyo.jp","mizuho.tokyo.jp","musashimurayama.tokyo.jp","musashino.tokyo.jp","nakano.tokyo.jp","nerima.tokyo.jp","ogasawara.tokyo.jp","okutama.tokyo.jp","ome.tokyo.jp","oshima.tokyo.jp","ota.tokyo.jp","setagaya.tokyo.jp","shibuya.tokyo.jp","shinagawa.tokyo.jp","shinjuku.tokyo.jp","suginami.tokyo.jp","sumida.tokyo.jp","tachikawa.tokyo.jp","taito.tokyo.jp","tama.tokyo.jp","toshima.tokyo.jp","chizu.tottori.jp","hino.tottori.jp","kawahara.tottori.jp","koge.tottori.jp","kotoura.tottori.jp","misasa.tottori.jp","nanbu.tottori.jp","nichinan.tottori.jp","sakaiminato.tottori.jp","tottori.tottori.jp","wakasa.tottori.jp","yazu.tottori.jp","yonago.tottori.jp","asahi.toyama.jp","fuchu.toyama.jp","fukumitsu.toyama.jp","funahashi.toyama.jp","himi.toyama.jp","imizu.toyama.jp","inami.toyama.jp","johana.toyama.jp","kamiichi.toyama.jp","kurobe.toyama.jp","nakaniikawa.toyama.jp","namerikawa.toyama.jp","nanto.toyama.jp","nyuzen.toyama.jp","oyabe.toyama.jp","taira.toyama.jp","takaoka.toyama.jp","tateyama.toyama.jp","toga.toyama.jp","tonami.toyama.jp","toyama.toyama.jp","unazuki.toyama.jp","uozu.toyama.jp","yamada.toyama.jp","arida.wakayama.jp","aridagawa.wakayama.jp","gobo.wakayama.jp","hashimoto.wakayama.jp","hidaka.wakayama.jp","hirogawa.wakayama.jp","inami.wakayama.jp","iwade.wakayama.jp","kainan.wakayama.jp","kamitonda.wakayama.jp","katsuragi.wakayama.jp","kimino.wakayama.jp","kinokawa.wakayama.jp","kitayama.wakayama.jp","koya.wakayama.jp","koza.wakayama.jp","kozagawa.wakayama.jp","kudoyama.wakayama.jp","kushimoto.wakayama.jp","mihama.wakayama.jp","misato.wakayama.jp","nachikatsuura.wakayama.jp","shingu.wakayama.jp","shirahama.wakayama.jp","taiji.wakayama.jp","tanabe.wakayama.jp","wakayama.wakayama.jp","yuasa.wakayama.jp","yura.wakayama.jp","asahi.yamagata.jp","funagata.yamagata.jp","higashine.yamagata.jp","iide.yamagata.jp","kahoku.yamagata.jp","kaminoyama.yamagata.jp","kaneyama.yamagata.jp","kawanishi.yamagata.jp","mamurogawa.yamagata.jp","mikawa.yamagata.jp","murayama.yamagata.jp","nagai.yamagata.jp","nakayama.yamagata.jp","nanyo.yamagata.jp","nishikawa.yamagata.jp","obanazawa.yamagata.jp","oe.yamagata.jp","oguni.yamagata.jp","ohkura.yamagata.jp","oishida.yamagata.jp","sagae.yamagata.jp","sakata.yamagata.jp","sakegawa.yamagata.jp","shinjo.yamagata.jp","shirataka.yamagata.jp","shonai.yamagata.jp","takahata.yamagata.jp","tendo.yamagata.jp","tozawa.yamagata.jp","tsuruoka.yamagata.jp","yamagata.yamagata.jp","yamanobe.yamagata.jp","yonezawa.yamagata.jp","yuza.yamagata.jp","abu.yamaguchi.jp","hagi.yamaguchi.jp","hikari.yamaguchi.jp","hofu.yamaguchi.jp","iwakuni.yamaguchi.jp","kudamatsu.yamaguchi.jp","mitou.yamaguchi.jp","nagato.yamaguchi.jp","oshima.yamaguchi.jp","shimonoseki.yamaguchi.jp","shunan.yamaguchi.jp","tabuse.yamaguchi.jp","tokuyama.yamaguchi.jp","toyota.yamaguchi.jp","ube.yamaguchi.jp","yuu.yamaguchi.jp","chuo.yamanashi.jp","doshi.yamanashi.jp","fuefuki.yamanashi.jp","fujikawa.yamanashi.jp","fujikawaguchiko.yamanashi.jp","fujiyoshida.yamanashi.jp","hayakawa.yamanashi.jp","hokuto.yamanashi.jp","ichikawamisato.yamanashi.jp","kai.yamanashi.jp","kofu.yamanashi.jp","koshu.yamanashi.jp","kosuge.yamanashi.jp","minami-alps.yamanashi.jp","minobu.yamanashi.jp","nakamichi.yamanashi.jp","nanbu.yamanashi.jp","narusawa.yamanashi.jp","nirasaki.yamanashi.jp","nishikatsura.yamanashi.jp","oshino.yamanashi.jp","otsuki.yamanashi.jp","showa.yamanashi.jp","tabayama.yamanashi.jp","tsuru.yamanashi.jp","uenohara.yamanashi.jp","yamanakako.yamanashi.jp","yamanashi.yamanashi.jp","ke","ac.ke","co.ke","go.ke","info.ke","me.ke","mobi.ke","ne.ke","or.ke","sc.ke","kg","org.kg","net.kg","com.kg","edu.kg","gov.kg","mil.kg","*.kh","ki","edu.ki","biz.ki","net.ki","org.ki","gov.ki","info.ki","com.ki","km","org.km","nom.km","gov.km","prd.km","tm.km","edu.km","mil.km","ass.km","com.km","coop.km","asso.km","presse.km","medecin.km","notaires.km","pharmaciens.km","veterinaire.km","gouv.km","kn","net.kn","org.kn","edu.kn","gov.kn","kp","com.kp","edu.kp","gov.kp","org.kp","rep.kp","tra.kp","kr","ac.kr","co.kr","es.kr","go.kr","hs.kr","kg.kr","mil.kr","ms.kr","ne.kr","or.kr","pe.kr","re.kr","sc.kr","busan.kr","chungbuk.kr","chungnam.kr","daegu.kr","daejeon.kr","gangwon.kr","gwangju.kr","gyeongbuk.kr","gyeonggi.kr","gyeongnam.kr","incheon.kr","jeju.kr","jeonbuk.kr","jeonnam.kr","seoul.kr","ulsan.kr","kw","com.kw","edu.kw","emb.kw","gov.kw","ind.kw","net.kw","org.kw","ky","edu.ky","gov.ky","com.ky","org.ky","net.ky","kz","org.kz","edu.kz","net.kz","gov.kz","mil.kz","com.kz","la","int.la","net.la","info.la","edu.la","gov.la","per.la","com.la","org.la","lb","com.lb","edu.lb","gov.lb","net.lb","org.lb","lc","com.lc","net.lc","co.lc","org.lc","edu.lc","gov.lc","li","lk","gov.lk","sch.lk","net.lk","int.lk","com.lk","org.lk","edu.lk","ngo.lk","soc.lk","web.lk","ltd.lk","assn.lk","grp.lk","hotel.lk","ac.lk","lr","com.lr","edu.lr","gov.lr","org.lr","net.lr","ls","co.ls","org.ls","lt","gov.lt","lu","lv","com.lv","edu.lv","gov.lv","org.lv","mil.lv","id.lv","net.lv","asn.lv","conf.lv","ly","com.ly","net.ly","gov.ly","plc.ly","edu.ly","sch.ly","med.ly","org.ly","id.ly","ma","co.ma","net.ma","gov.ma","org.ma","ac.ma","press.ma","mc","tm.mc","asso.mc","md","me","co.me","net.me","org.me","edu.me","ac.me","gov.me","its.me","priv.me","mg","org.mg","nom.mg","gov.mg","prd.mg","tm.mg","edu.mg","mil.mg","com.mg","co.mg","mh","mil","mk","com.mk","org.mk","net.mk","edu.mk","gov.mk","inf.mk","name.mk","ml","com.ml","edu.ml","gouv.ml","gov.ml","net.ml","org.ml","presse.ml","*.mm","mn","gov.mn","edu.mn","org.mn","mo","com.mo","net.mo","org.mo","edu.mo","gov.mo","mobi","mp","mq","mr","gov.mr","ms","com.ms","edu.ms","gov.ms","net.ms","org.ms","mt","com.mt","edu.mt","net.mt","org.mt","mu","com.mu","net.mu","org.mu","gov.mu","ac.mu","co.mu","or.mu","museum","academy.museum","agriculture.museum","air.museum","airguard.museum","alabama.museum","alaska.museum","amber.museum","ambulance.museum","american.museum","americana.museum","americanantiques.museum","americanart.museum","amsterdam.museum","and.museum","annefrank.museum","anthro.museum","anthropology.museum","antiques.museum","aquarium.museum","arboretum.museum","archaeological.museum","archaeology.museum","architecture.museum","art.museum","artanddesign.museum","artcenter.museum","artdeco.museum","arteducation.museum","artgallery.museum","arts.museum","artsandcrafts.museum","asmatart.museum","assassination.museum","assisi.museum","association.museum","astronomy.museum","atlanta.museum","austin.museum","australia.museum","automotive.museum","aviation.museum","axis.museum","badajoz.museum","baghdad.museum","bahn.museum","bale.museum","baltimore.museum","barcelona.museum","baseball.museum","basel.museum","baths.museum","bauern.museum","beauxarts.museum","beeldengeluid.museum","bellevue.museum","bergbau.museum","berkeley.museum","berlin.museum","bern.museum","bible.museum","bilbao.museum","bill.museum","birdart.museum","birthplace.museum","bonn.museum","boston.museum","botanical.museum","botanicalgarden.museum","botanicgarden.museum","botany.museum","brandywinevalley.museum","brasil.museum","bristol.museum","british.museum","britishcolumbia.museum","broadcast.museum","brunel.museum","brussel.museum","brussels.museum","bruxelles.museum","building.museum","burghof.museum","bus.museum","bushey.museum","cadaques.museum","california.museum","cambridge.museum","can.museum","canada.museum","capebreton.museum","carrier.museum","cartoonart.museum","casadelamoneda.museum","castle.museum","castres.museum","celtic.museum","center.museum","chattanooga.museum","cheltenham.museum","chesapeakebay.museum","chicago.museum","children.museum","childrens.museum","childrensgarden.museum","chiropractic.museum","chocolate.museum","christiansburg.museum","cincinnati.museum","cinema.museum","circus.museum","civilisation.museum","civilization.museum","civilwar.museum","clinton.museum","clock.museum","coal.museum","coastaldefence.museum","cody.museum","coldwar.museum","collection.museum","colonialwilliamsburg.museum","coloradoplateau.museum","columbia.museum","columbus.museum","communication.museum","communications.museum","community.museum","computer.museum","computerhistory.museum","comunicaes.museum","contemporary.museum","contemporaryart.museum","convent.museum","copenhagen.museum","corporation.museum","correios-e-telecomunicaes.museum","corvette.museum","costume.museum","countryestate.museum","county.museum","crafts.museum","cranbrook.museum","creation.museum","cultural.museum","culturalcenter.museum","culture.museum","cyber.museum","cymru.museum","dali.museum","dallas.museum","database.museum","ddr.museum","decorativearts.museum","delaware.museum","delmenhorst.museum","denmark.museum","depot.museum","design.museum","detroit.museum","dinosaur.museum","discovery.museum","dolls.museum","donostia.museum","durham.museum","eastafrica.museum","eastcoast.museum","education.museum","educational.museum","egyptian.museum","eisenbahn.museum","elburg.museum","elvendrell.museum","embroidery.museum","encyclopedic.museum","england.museum","entomology.museum","environment.museum","environmentalconservation.museum","epilepsy.museum","essex.museum","estate.museum","ethnology.museum","exeter.museum","exhibition.museum","family.museum","farm.museum","farmequipment.museum","farmers.museum","farmstead.museum","field.museum","figueres.museum","filatelia.museum","film.museum","fineart.museum","finearts.museum","finland.museum","flanders.museum","florida.museum","force.museum","fortmissoula.museum","fortworth.museum","foundation.museum","francaise.museum","frankfurt.museum","franziskaner.museum","freemasonry.museum","freiburg.museum","fribourg.museum","frog.museum","fundacio.museum","furniture.museum","gallery.museum","garden.museum","gateway.museum","geelvinck.museum","gemological.museum","geology.museum","georgia.museum","giessen.museum","glas.museum","glass.museum","gorge.museum","grandrapids.museum","graz.museum","guernsey.museum","halloffame.museum","hamburg.museum","handson.museum","harvestcelebration.museum","hawaii.museum","health.museum","heimatunduhren.museum","hellas.museum","helsinki.museum","hembygdsforbund.museum","heritage.museum","histoire.museum","historical.museum","historicalsociety.museum","historichouses.museum","historisch.museum","historisches.museum","history.museum","historyofscience.museum","horology.museum","house.museum","humanities.museum","illustration.museum","imageandsound.museum","indian.museum","indiana.museum","indianapolis.museum","indianmarket.museum","intelligence.museum","interactive.museum","iraq.museum","iron.museum","isleofman.museum","jamison.museum","jefferson.museum","jerusalem.museum","jewelry.museum","jewish.museum","jewishart.museum","jfk.museum","journalism.museum","judaica.museum","judygarland.museum","juedisches.museum","juif.museum","karate.museum","karikatur.museum","kids.museum","koebenhavn.museum","koeln.museum","kunst.museum","kunstsammlung.museum","kunstunddesign.museum","labor.museum","labour.museum","lajolla.museum","lancashire.museum","landes.museum","lans.museum","lns.museum","larsson.museum","lewismiller.museum","lincoln.museum","linz.museum","living.museum","livinghistory.museum","localhistory.museum","london.museum","losangeles.museum","louvre.museum","loyalist.museum","lucerne.museum","luxembourg.museum","luzern.museum","mad.museum","madrid.museum","mallorca.museum","manchester.museum","mansion.museum","mansions.museum","manx.museum","marburg.museum","maritime.museum","maritimo.museum","maryland.museum","marylhurst.museum","media.museum","medical.museum","medizinhistorisches.museum","meeres.museum","memorial.museum","mesaverde.museum","michigan.museum","midatlantic.museum","military.museum","mill.museum","miners.museum","mining.museum","minnesota.museum","missile.museum","missoula.museum","modern.museum","moma.museum","money.museum","monmouth.museum","monticello.museum","montreal.museum","moscow.museum","motorcycle.museum","muenchen.museum","muenster.museum","mulhouse.museum","muncie.museum","museet.museum","museumcenter.museum","museumvereniging.museum","music.museum","national.museum","nationalfirearms.museum","nationalheritage.museum","nativeamerican.museum","naturalhistory.museum","naturalhistorymuseum.museum","naturalsciences.museum","nature.museum","naturhistorisches.museum","natuurwetenschappen.museum","naumburg.museum","naval.museum","nebraska.museum","neues.museum","newhampshire.museum","newjersey.museum","newmexico.museum","newport.museum","newspaper.museum","newyork.museum","niepce.museum","norfolk.museum","north.museum","nrw.museum","nuernberg.museum","nuremberg.museum","nyc.museum","nyny.museum","oceanographic.museum","oceanographique.museum","omaha.museum","online.museum","ontario.museum","openair.museum","oregon.museum","oregontrail.museum","otago.museum","oxford.museum","pacific.museum","paderborn.museum","palace.museum","paleo.museum","palmsprings.museum","panama.museum","paris.museum","pasadena.museum","pharmacy.museum","philadelphia.museum","philadelphiaarea.museum","philately.museum","phoenix.museum","photography.museum","pilots.museum","pittsburgh.museum","planetarium.museum","plantation.museum","plants.museum","plaza.museum","portal.museum","portland.museum","portlligat.museum","posts-and-telecommunications.museum","preservation.museum","presidio.museum","press.museum","project.museum","public.museum","pubol.museum","quebec.museum","railroad.museum","railway.museum","research.museum","resistance.museum","riodejaneiro.museum","rochester.museum","rockart.museum","roma.museum","russia.museum","saintlouis.museum","salem.museum","salvadordali.museum","salzburg.museum","sandiego.museum","sanfrancisco.museum","santabarbara.museum","santacruz.museum","santafe.museum","saskatchewan.museum","satx.museum","savannahga.museum","schlesisches.museum","schoenbrunn.museum","schokoladen.museum","school.museum","schweiz.museum","science.museum","scienceandhistory.museum","scienceandindustry.museum","sciencecenter.museum","sciencecenters.museum","science-fiction.museum","sciencehistory.museum","sciences.museum","sciencesnaturelles.museum","scotland.museum","seaport.museum","settlement.museum","settlers.museum","shell.museum","sherbrooke.museum","sibenik.museum","silk.museum","ski.museum","skole.museum","society.museum","sologne.museum","soundandvision.museum","southcarolina.museum","southwest.museum","space.museum","spy.museum","square.museum","stadt.museum","stalbans.museum","starnberg.museum","state.museum","stateofdelaware.museum","station.museum","steam.museum","steiermark.museum","stjohn.museum","stockholm.museum","stpetersburg.museum","stuttgart.museum","suisse.museum","surgeonshall.museum","surrey.museum","svizzera.museum","sweden.museum","sydney.museum","tank.museum","tcm.museum","technology.museum","telekommunikation.museum","television.museum","texas.museum","textile.museum","theater.museum","time.museum","timekeeping.museum","topology.museum","torino.museum","touch.museum","town.museum","transport.museum","tree.museum","trolley.museum","trust.museum","trustee.museum","uhren.museum","ulm.museum","undersea.museum","university.museum","usa.museum","usantiques.museum","usarts.museum","uscountryestate.museum","usculture.museum","usdecorativearts.museum","usgarden.museum","ushistory.museum","ushuaia.museum","uslivinghistory.museum","utah.museum","uvic.museum","valley.museum","vantaa.museum","versailles.museum","viking.museum","village.museum","virginia.museum","virtual.museum","virtuel.museum","vlaanderen.museum","volkenkunde.museum","wales.museum","wallonie.museum","war.museum","washingtondc.museum","watchandclock.museum","watch-and-clock.museum","western.museum","westfalen.museum","whaling.museum","wildlife.museum","williamsburg.museum","windmill.museum","workshop.museum","york.museum","yorkshire.museum","yosemite.museum","youth.museum","zoological.museum","zoology.museum",".museum",".museum","mv","aero.mv","biz.mv","com.mv","coop.mv","edu.mv","gov.mv","info.mv","int.mv","mil.mv","museum.mv","name.mv","net.mv","org.mv","pro.mv","mw","ac.mw","biz.mw","co.mw","com.mw","coop.mw","edu.mw","gov.mw","int.mw","museum.mw","net.mw","org.mw","mx","com.mx","org.mx","gob.mx","edu.mx","net.mx","my","com.my","net.my","org.my","gov.my","edu.my","mil.my","name.my","mz","ac.mz","adv.mz","co.mz","edu.mz","gov.mz","mil.mz","net.mz","org.mz","na","info.na","pro.na","name.na","school.na","or.na","dr.na","us.na","mx.na","ca.na","in.na","cc.na","tv.na","ws.na","mobi.na","co.na","com.na","org.na","name","nc","asso.nc","nom.nc","ne","net","nf","com.nf","net.nf","per.nf","rec.nf","web.nf","arts.nf","firm.nf","info.nf","other.nf","store.nf","ng","com.ng","edu.ng","gov.ng","i.ng","mil.ng","mobi.ng","name.ng","net.ng","org.ng","sch.ng","ni","ac.ni","biz.ni","co.ni","com.ni","edu.ni","gob.ni","in.ni","info.ni","int.ni","mil.ni","net.ni","nom.ni","org.ni","web.ni","nl","bv.nl","no","fhs.no","vgs.no","fylkesbibl.no","folkebibl.no","museum.no","idrett.no","priv.no","mil.no","stat.no","dep.no","kommune.no","herad.no","aa.no","ah.no","bu.no","fm.no","hl.no","hm.no","jan-mayen.no","mr.no","nl.no","nt.no","of.no","ol.no","oslo.no","rl.no","sf.no","st.no","svalbard.no","tm.no","tr.no","va.no","vf.no","gs.aa.no","gs.ah.no","gs.bu.no","gs.fm.no","gs.hl.no","gs.hm.no","gs.jan-mayen.no","gs.mr.no","gs.nl.no","gs.nt.no","gs.of.no","gs.ol.no","gs.oslo.no","gs.rl.no","gs.sf.no","gs.st.no","gs.svalbard.no","gs.tm.no","gs.tr.no","gs.va.no","gs.vf.no","akrehamn.no","krehamn.no","algard.no","lgrd.no","arna.no","brumunddal.no","bryne.no","bronnoysund.no","brnnysund.no","drobak.no","drbak.no","egersund.no","fetsund.no","floro.no","flor.no","fredrikstad.no","hokksund.no","honefoss.no","hnefoss.no","jessheim.no","jorpeland.no","jrpeland.no","kirkenes.no","kopervik.no","krokstadelva.no","langevag.no","langevg.no","leirvik.no","mjondalen.no","mjndalen.no","mo-i-rana.no","mosjoen.no","mosjen.no","nesoddtangen.no","orkanger.no","osoyro.no","osyro.no","raholt.no","rholt.no","sandnessjoen.no","sandnessjen.no","skedsmokorset.no","slattum.no","spjelkavik.no","stathelle.no","stavern.no","stjordalshalsen.no","stjrdalshalsen.no","tananger.no","tranby.no","vossevangen.no","afjord.no","fjord.no","agdenes.no","al.no","l.no","alesund.no","lesund.no","alstahaug.no","alta.no","lt.no","alaheadju.no","laheadju.no","alvdal.no","amli.no","mli.no","amot.no","mot.no","andebu.no","andoy.no","andy.no","andasuolo.no","ardal.no","rdal.no","aremark.no","arendal.no","s.no","aseral.no","seral.no","asker.no","askim.no","askvoll.no","askoy.no","asky.no","asnes.no","snes.no","audnedaln.no","aukra.no","aure.no","aurland.no","aurskog-holand.no","aurskog-hland.no","austevoll.no","austrheim.no","averoy.no","avery.no","balestrand.no","ballangen.no","balat.no","blt.no","balsfjord.no","bahccavuotna.no","bhccavuotna.no","bamble.no","bardu.no","beardu.no","beiarn.no","bajddar.no","bjddar.no","baidar.no","bidr.no","berg.no","bergen.no","berlevag.no","berlevg.no","bearalvahki.no","bearalvhki.no","bindal.no","birkenes.no","bjarkoy.no","bjarky.no","bjerkreim.no","bjugn.no","bodo.no","bod.no","badaddja.no","bdddj.no","budejju.no","bokn.no","bremanger.no","bronnoy.no","brnny.no","bygland.no","bykle.no","barum.no","brum.no","bo.telemark.no","b.telemark.no","bo.nordland.no","b.nordland.no","bievat.no","bievt.no","bomlo.no","bmlo.no","batsfjord.no","btsfjord.no","bahcavuotna.no","bhcavuotna.no","dovre.no","drammen.no","drangedal.no","dyroy.no","dyry.no","donna.no","dnna.no","eid.no","eidfjord.no","eidsberg.no","eidskog.no","eidsvoll.no","eigersund.no","elverum.no","enebakk.no","engerdal.no","etne.no","etnedal.no","evenes.no","evenassi.no","eveni.no","evje-og-hornnes.no","farsund.no","fauske.no","fuossko.no","fuoisku.no","fedje.no","fet.no","finnoy.no","finny.no","fitjar.no","fjaler.no","fjell.no","flakstad.no","flatanger.no","flekkefjord.no","flesberg.no","flora.no","fla.no","fl.no","folldal.no","forsand.no","fosnes.no","frei.no","frogn.no","froland.no","frosta.no","frana.no","frna.no","froya.no","frya.no","fusa.no","fyresdal.no","forde.no","frde.no","gamvik.no","gangaviika.no","ggaviika.no","gaular.no","gausdal.no","gildeskal.no","gildeskl.no","giske.no","gjemnes.no","gjerdrum.no","gjerstad.no","gjesdal.no","gjovik.no","gjvik.no","gloppen.no","gol.no","gran.no","grane.no","granvin.no","gratangen.no","grimstad.no","grong.no","kraanghke.no","kranghke.no","grue.no","gulen.no","hadsel.no","halden.no","halsa.no","hamar.no","hamaroy.no","habmer.no","hbmer.no","hapmir.no","hpmir.no","hammerfest.no","hammarfeasta.no","hmmrfeasta.no","haram.no","hareid.no","harstad.no","hasvik.no","aknoluokta.no","koluokta.no","hattfjelldal.no","aarborte.no","haugesund.no","hemne.no","hemnes.no","hemsedal.no","heroy.more-og-romsdal.no","hery.mre-og-romsdal.no","heroy.nordland.no","hery.nordland.no","hitra.no","hjartdal.no","hjelmeland.no","hobol.no","hobl.no","hof.no","hol.no","hole.no","holmestrand.no","holtalen.no","holtlen.no","hornindal.no","horten.no","hurdal.no","hurum.no","hvaler.no","hyllestad.no","hagebostad.no","hgebostad.no","hoyanger.no","hyanger.no","hoylandet.no","hylandet.no","ha.no","h.no","ibestad.no","inderoy.no","indery.no","iveland.no","jevnaker.no","jondal.no","jolster.no","jlster.no","karasjok.no","karasjohka.no","krjohka.no","karlsoy.no","galsa.no","gls.no","karmoy.no","karmy.no","kautokeino.no","guovdageaidnu.no","klepp.no","klabu.no","klbu.no","kongsberg.no","kongsvinger.no","kragero.no","krager.no","kristiansand.no","kristiansund.no","krodsherad.no","krdsherad.no","kvalsund.no","rahkkeravju.no","rhkkervju.no","kvam.no","kvinesdal.no","kvinnherad.no","kviteseid.no","kvitsoy.no","kvitsy.no","kvafjord.no","kvfjord.no","giehtavuoatna.no","kvanangen.no","kvnangen.no","navuotna.no","nvuotna.no","kafjord.no","kfjord.no","gaivuotna.no","givuotna.no","larvik.no","lavangen.no","lavagis.no","loabat.no","loabt.no","lebesby.no","davvesiida.no","leikanger.no","leirfjord.no","leka.no","leksvik.no","lenvik.no","leangaviika.no","leagaviika.no","lesja.no","levanger.no","lier.no","lierne.no","lillehammer.no","lillesand.no","lindesnes.no","lindas.no","linds.no","lom.no","loppa.no","lahppi.no","lhppi.no","lund.no","lunner.no","luroy.no","lury.no","luster.no","lyngdal.no","lyngen.no","ivgu.no","lardal.no","lerdal.no","lrdal.no","lodingen.no","ldingen.no","lorenskog.no","lrenskog.no","loten.no","lten.no","malvik.no","masoy.no","msy.no","muosat.no","muost.no","mandal.no","marker.no","marnardal.no","masfjorden.no","meland.no","meldal.no","melhus.no","meloy.no","mely.no","meraker.no","merker.no","moareke.no","moreke.no","midsund.no","midtre-gauldal.no","modalen.no","modum.no","molde.no","moskenes.no","moss.no","mosvik.no","malselv.no","mlselv.no","malatvuopmi.no","mlatvuopmi.no","namdalseid.no","aejrie.no","namsos.no","namsskogan.no","naamesjevuemie.no","nmesjevuemie.no","laakesvuemie.no","nannestad.no","narvik.no","narviika.no","naustdal.no","nedre-eiker.no","nes.akershus.no","nes.buskerud.no","nesna.no","nesodden.no","nesseby.no","unjarga.no","unjrga.no","nesset.no","nissedal.no","nittedal.no","nord-aurdal.no","nord-fron.no","nord-odal.no","norddal.no","nordkapp.no","davvenjarga.no","davvenjrga.no","nordre-land.no","nordreisa.no","raisa.no","risa.no","nore-og-uvdal.no","notodden.no","naroy.no","nry.no","notteroy.no","nttery.no","odda.no","oksnes.no","ksnes.no","oppdal.no","oppegard.no","oppegrd.no","orkdal.no","orland.no","rland.no","orskog.no","rskog.no","orsta.no","rsta.no","os.hedmark.no","os.hordaland.no","osen.no","osteroy.no","ostery.no","ostre-toten.no","stre-toten.no","overhalla.no","ovre-eiker.no","vre-eiker.no","oyer.no","yer.no","oygarden.no","ygarden.no","oystre-slidre.no","ystre-slidre.no","porsanger.no","porsangu.no","porsgu.no","porsgrunn.no","radoy.no","rady.no","rakkestad.no","rana.no","ruovat.no","randaberg.no","rauma.no","rendalen.no","rennebu.no","rennesoy.no","rennesy.no","rindal.no","ringebu.no","ringerike.no","ringsaker.no","rissa.no","risor.no","risr.no","roan.no","rollag.no","rygge.no","ralingen.no","rlingen.no","rodoy.no","rdy.no","romskog.no","rmskog.no","roros.no","rros.no","rost.no","rst.no","royken.no","ryken.no","royrvik.no","ryrvik.no","rade.no","rde.no","salangen.no","siellak.no","saltdal.no","salat.no","slt.no","slat.no","samnanger.no","sande.more-og-romsdal.no","sande.mre-og-romsdal.no","sande.vestfold.no","sandefjord.no","sandnes.no","sandoy.no","sandy.no","sarpsborg.no","sauda.no","sauherad.no","sel.no","selbu.no","selje.no","seljord.no","sigdal.no","siljan.no","sirdal.no","skaun.no","skedsmo.no","ski.no","skien.no","skiptvet.no","skjervoy.no","skjervy.no","skierva.no","skierv.no","skjak.no","skjk.no","skodje.no","skanland.no","sknland.no","skanit.no","sknit.no","smola.no","smla.no","snillfjord.no","snasa.no","snsa.no","snoasa.no","snaase.no","snase.no","sogndal.no","sokndal.no","sola.no","solund.no","songdalen.no","sortland.no","spydeberg.no","stange.no","stavanger.no","steigen.no","steinkjer.no","stjordal.no","stjrdal.no","stokke.no","stor-elvdal.no","stord.no","stordal.no","storfjord.no","omasvuotna.no","strand.no","stranda.no","stryn.no","sula.no","suldal.no","sund.no","sunndal.no","surnadal.no","sveio.no","svelvik.no","sykkylven.no","sogne.no","sgne.no","somna.no","smna.no","sondre-land.no","sndre-land.no","sor-aurdal.no","sr-aurdal.no","sor-fron.no","sr-fron.no","sor-odal.no","sr-odal.no","sor-varanger.no","sr-varanger.no","matta-varjjat.no","mtta-vrjjat.no","sorfold.no","srfold.no","sorreisa.no","srreisa.no","sorum.no","srum.no","tana.no","deatnu.no","time.no","tingvoll.no","tinn.no","tjeldsund.no","dielddanuorri.no","tjome.no","tjme.no","tokke.no","tolga.no","torsken.no","tranoy.no","trany.no","tromso.no","troms.no","tromsa.no","romsa.no","trondheim.no","troandin.no","trysil.no","trana.no","trna.no","trogstad.no","trgstad.no","tvedestrand.no","tydal.no","tynset.no","tysfjord.no","divtasvuodna.no","divttasvuotna.no","tysnes.no","tysvar.no","tysvr.no","tonsberg.no","tnsberg.no","ullensaker.no","ullensvang.no","ulvik.no","utsira.no","vadso.no","vads.no","cahcesuolo.no","hcesuolo.no","vaksdal.no","valle.no","vang.no","vanylven.no","vardo.no","vard.no","varggat.no","vrggt.no","vefsn.no","vaapste.no","vega.no","vegarshei.no","vegrshei.no","vennesla.no","verdal.no","verran.no","vestby.no","vestnes.no","vestre-slidre.no","vestre-toten.no","vestvagoy.no","vestvgy.no","vevelstad.no","vik.no","vikna.no","vindafjord.no","volda.no","voss.no","varoy.no","vry.no","vagan.no","vgan.no","voagat.no","vagsoy.no","vgsy.no","vaga.no","vg.no","valer.ostfold.no","vler.stfold.no","valer.hedmark.no","vler.hedmark.no","*.np","nr","biz.nr","info.nr","gov.nr","edu.nr","org.nr","net.nr","com.nr","nu","nz","ac.nz","co.nz","cri.nz","geek.nz","gen.nz","govt.nz","health.nz","iwi.nz","kiwi.nz","maori.nz","mil.nz","mori.nz","net.nz","org.nz","parliament.nz","school.nz","om","co.om","com.om","edu.om","gov.om","med.om","museum.om","net.om","org.om","pro.om","onion","org","pa","ac.pa","gob.pa","com.pa","org.pa","sld.pa","edu.pa","net.pa","ing.pa","abo.pa","med.pa","nom.pa","pe","edu.pe","gob.pe","nom.pe","mil.pe","org.pe","com.pe","net.pe","pf","com.pf","org.pf","edu.pf","*.pg","ph","com.ph","net.ph","org.ph","gov.ph","edu.ph","ngo.ph","mil.ph","i.ph","pk","com.pk","net.pk","edu.pk","org.pk","fam.pk","biz.pk","web.pk","gov.pk","gob.pk","gok.pk","gon.pk","gop.pk","gos.pk","info.pk","pl","com.pl","net.pl","org.pl","aid.pl","agro.pl","atm.pl","auto.pl","biz.pl","edu.pl","gmina.pl","gsm.pl","info.pl","mail.pl","miasta.pl","media.pl","mil.pl","nieruchomosci.pl","nom.pl","pc.pl","powiat.pl","priv.pl","realestate.pl","rel.pl","sex.pl","shop.pl","sklep.pl","sos.pl","szkola.pl","targi.pl","tm.pl","tourism.pl","travel.pl","turystyka.pl","gov.pl","ap.gov.pl","ic.gov.pl","is.gov.pl","us.gov.pl","kmpsp.gov.pl","kppsp.gov.pl","kwpsp.gov.pl","psp.gov.pl","wskr.gov.pl","kwp.gov.pl","mw.gov.pl","ug.gov.pl","um.gov.pl","umig.gov.pl","ugim.gov.pl","upow.gov.pl","uw.gov.pl","starostwo.gov.pl","pa.gov.pl","po.gov.pl","psse.gov.pl","pup.gov.pl","rzgw.gov.pl","sa.gov.pl","so.gov.pl","sr.gov.pl","wsa.gov.pl","sko.gov.pl","uzs.gov.pl","wiih.gov.pl","winb.gov.pl","pinb.gov.pl","wios.gov.pl","witd.gov.pl","wzmiuw.gov.pl","piw.gov.pl","wiw.gov.pl","griw.gov.pl","wif.gov.pl","oum.gov.pl","sdn.gov.pl","zp.gov.pl","uppo.gov.pl","mup.gov.pl","wuoz.gov.pl","konsulat.gov.pl","oirm.gov.pl","augustow.pl","babia-gora.pl","bedzin.pl","beskidy.pl","bialowieza.pl","bialystok.pl","bielawa.pl","bieszczady.pl","boleslawiec.pl","bydgoszcz.pl","bytom.pl","cieszyn.pl","czeladz.pl","czest.pl","dlugoleka.pl","elblag.pl","elk.pl","glogow.pl","gniezno.pl","gorlice.pl","grajewo.pl","ilawa.pl","jaworzno.pl","jelenia-gora.pl","jgora.pl","kalisz.pl","kazimierz-dolny.pl","karpacz.pl","kartuzy.pl","kaszuby.pl","katowice.pl","kepno.pl","ketrzyn.pl","klodzko.pl","kobierzyce.pl","kolobrzeg.pl","konin.pl","konskowola.pl","kutno.pl","lapy.pl","lebork.pl","legnica.pl","lezajsk.pl","limanowa.pl","lomza.pl","lowicz.pl","lubin.pl","lukow.pl","malbork.pl","malopolska.pl","mazowsze.pl","mazury.pl","mielec.pl","mielno.pl","mragowo.pl","naklo.pl","nowaruda.pl","nysa.pl","olawa.pl","olecko.pl","olkusz.pl","olsztyn.pl","opoczno.pl","opole.pl","ostroda.pl","ostroleka.pl","ostrowiec.pl","ostrowwlkp.pl","pila.pl","pisz.pl","podhale.pl","podlasie.pl","polkowice.pl","pomorze.pl","pomorskie.pl","prochowice.pl","pruszkow.pl","przeworsk.pl","pulawy.pl","radom.pl","rawa-maz.pl","rybnik.pl","rzeszow.pl","sanok.pl","sejny.pl","slask.pl","slupsk.pl","sosnowiec.pl","stalowa-wola.pl","skoczow.pl","starachowice.pl","stargard.pl","suwalki.pl","swidnica.pl","swiebodzin.pl","swinoujscie.pl","szczecin.pl","szczytno.pl","tarnobrzeg.pl","tgory.pl","turek.pl","tychy.pl","ustka.pl","walbrzych.pl","warmia.pl","warszawa.pl","waw.pl","wegrow.pl","wielun.pl","wlocl.pl","wloclawek.pl","wodzislaw.pl","wolomin.pl","wroclaw.pl","zachpomor.pl","zagan.pl","zarow.pl","zgora.pl","zgorzelec.pl","pm","pn","gov.pn","co.pn","org.pn","edu.pn","net.pn","post","pr","com.pr","net.pr","org.pr","gov.pr","edu.pr","isla.pr","pro.pr","biz.pr","info.pr","name.pr","est.pr","prof.pr","ac.pr","pro","aaa.pro","aca.pro","acct.pro","avocat.pro","bar.pro","cpa.pro","eng.pro","jur.pro","law.pro","med.pro","recht.pro","ps","edu.ps","gov.ps","sec.ps","plo.ps","com.ps","org.ps","net.ps","pt","net.pt","gov.pt","org.pt","edu.pt","int.pt","publ.pt","com.pt","nome.pt","pw","co.pw","ne.pw","or.pw","ed.pw","go.pw","belau.pw","py","com.py","coop.py","edu.py","gov.py","mil.py","net.py","org.py","qa","com.qa","edu.qa","gov.qa","mil.qa","name.qa","net.qa","org.qa","sch.qa","re","asso.re","com.re","nom.re","ro","arts.ro","com.ro","firm.ro","info.ro","nom.ro","nt.ro","org.ro","rec.ro","store.ro","tm.ro","www.ro","rs","ac.rs","co.rs","edu.rs","gov.rs","in.rs","org.rs","ru","ac.ru","edu.ru","gov.ru","int.ru","mil.ru","test.ru","rw","gov.rw","net.rw","edu.rw","ac.rw","com.rw","co.rw","int.rw","mil.rw","gouv.rw","sa","com.sa","net.sa","org.sa","gov.sa","med.sa","pub.sa","edu.sa","sch.sa","sb","com.sb","edu.sb","gov.sb","net.sb","org.sb","sc","com.sc","gov.sc","net.sc","org.sc","edu.sc","sd","com.sd","net.sd","org.sd","edu.sd","med.sd","tv.sd","gov.sd","info.sd","se","a.se","ac.se","b.se","bd.se","brand.se","c.se","d.se","e.se","f.se","fh.se","fhsk.se","fhv.se","g.se","h.se","i.se","k.se","komforb.se","kommunalforbund.se","komvux.se","l.se","lanbib.se","m.se","n.se","naturbruksgymn.se","o.se","org.se","p.se","parti.se","pp.se","press.se","r.se","s.se","t.se","tm.se","u.se","w.se","x.se","y.se","z.se","sg","com.sg","net.sg","org.sg","gov.sg","edu.sg","per.sg","sh","com.sh","net.sh","gov.sh","org.sh","mil.sh","si","sj","sk","sl","com.sl","net.sl","edu.sl","gov.sl","org.sl","sm","sn","art.sn","com.sn","edu.sn","gouv.sn","org.sn","perso.sn","univ.sn","so","com.so","net.so","org.so","sr","st","co.st","com.st","consulado.st","edu.st","embaixada.st","gov.st","mil.st","net.st","org.st","principe.st","saotome.st","store.st","su","sv","com.sv","edu.sv","gob.sv","org.sv","red.sv","sx","gov.sx","sy","edu.sy","gov.sy","net.sy","mil.sy","com.sy","org.sy","sz","co.sz","ac.sz","org.sz","tc","td","tel","tf","tg","th","ac.th","co.th","go.th","in.th","mi.th","net.th","or.th","tj","ac.tj","biz.tj","co.tj","com.tj","edu.tj","go.tj","gov.tj","int.tj","mil.tj","name.tj","net.tj","nic.tj","org.tj","test.tj","web.tj","tk","tl","gov.tl","tm","com.tm","co.tm","org.tm","net.tm","nom.tm","gov.tm","mil.tm","edu.tm","tn","com.tn","ens.tn","fin.tn","gov.tn","ind.tn","intl.tn","nat.tn","net.tn","org.tn","info.tn","perso.tn","tourism.tn","edunet.tn","rnrt.tn","rns.tn","rnu.tn","mincom.tn","agrinet.tn","defense.tn","turen.tn","to","com.to","gov.to","net.to","org.to","edu.to","mil.to","tr","com.tr","info.tr","biz.tr","net.tr","org.tr","web.tr","gen.tr","tv.tr","av.tr","dr.tr","bbs.tr","name.tr","tel.tr","gov.tr","bel.tr","pol.tr","mil.tr","k12.tr","edu.tr","kep.tr","nc.tr","gov.nc.tr","tt","co.tt","com.tt","org.tt","net.tt","biz.tt","info.tt","pro.tt","int.tt","coop.tt","jobs.tt","mobi.tt","travel.tt","museum.tt","aero.tt","name.tt","gov.tt","edu.tt","tv","tw","edu.tw","gov.tw","mil.tw","com.tw","net.tw","org.tw","idv.tw","game.tw","ebiz.tw","club.tw",".tw",".tw",".tw","tz","ac.tz","co.tz","go.tz","hotel.tz","info.tz","me.tz","mil.tz","mobi.tz","ne.tz","or.tz","sc.tz","tv.tz","ua","com.ua","edu.ua","gov.ua","in.ua","net.ua","org.ua","cherkassy.ua","cherkasy.ua","chernigov.ua","chernihiv.ua","chernivtsi.ua","chernovtsy.ua","ck.ua","cn.ua","cr.ua","crimea.ua","cv.ua","dn.ua","dnepropetrovsk.ua","dnipropetrovsk.ua","dominic.ua","donetsk.ua","dp.ua","if.ua","ivano-frankivsk.ua","kh.ua","kharkiv.ua","kharkov.ua","kherson.ua","khmelnitskiy.ua","khmelnytskyi.ua","kiev.ua","kirovograd.ua","km.ua","kr.ua","krym.ua","ks.ua","kv.ua","kyiv.ua","lg.ua","lt.ua","lugansk.ua","lutsk.ua","lv.ua","lviv.ua","mk.ua","mykolaiv.ua","nikolaev.ua","od.ua","odesa.ua","odessa.ua","pl.ua","poltava.ua","rivne.ua","rovno.ua","rv.ua","sb.ua","sebastopol.ua","sevastopol.ua","sm.ua","sumy.ua","te.ua","ternopil.ua","uz.ua","uzhgorod.ua","vinnica.ua","vinnytsia.ua","vn.ua","volyn.ua","yalta.ua","zaporizhzhe.ua","zaporizhzhia.ua","zhitomir.ua","zhytomyr.ua","zp.ua","zt.ua","ug","co.ug","or.ug","ac.ug","sc.ug","go.ug","ne.ug","com.ug","org.ug","uk","ac.uk","co.uk","gov.uk","ltd.uk","me.uk","net.uk","nhs.uk","org.uk","plc.uk","police.uk","*.sch.uk","us","dni.us","fed.us","isa.us","kids.us","nsn.us","ak.us","al.us","ar.us","as.us","az.us","ca.us","co.us","ct.us","dc.us","de.us","fl.us","ga.us","gu.us","hi.us","ia.us","id.us","il.us","in.us","ks.us","ky.us","la.us","ma.us","md.us","me.us","mi.us","mn.us","mo.us","ms.us","mt.us","nc.us","nd.us","ne.us","nh.us","nj.us","nm.us","nv.us","ny.us","oh.us","ok.us","or.us","pa.us","pr.us","ri.us","sc.us","sd.us","tn.us","tx.us","ut.us","vi.us","vt.us","va.us","wa.us","wi.us","wv.us","wy.us","k12.ak.us","k12.al.us","k12.ar.us","k12.as.us","k12.az.us","k12.ca.us","k12.co.us","k12.ct.us","k12.dc.us","k12.de.us","k12.fl.us","k12.ga.us","k12.gu.us","k12.ia.us","k12.id.us","k12.il.us","k12.in.us","k12.ks.us","k12.ky.us","k12.la.us","k12.ma.us","k12.md.us","k12.me.us","k12.mi.us","k12.mn.us","k12.mo.us","k12.ms.us","k12.mt.us","k12.nc.us","k12.ne.us","k12.nh.us","k12.nj.us","k12.nm.us","k12.nv.us","k12.ny.us","k12.oh.us","k12.ok.us","k12.or.us","k12.pa.us","k12.pr.us","k12.ri.us","k12.sc.us","k12.tn.us","k12.tx.us","k12.ut.us","k12.vi.us","k12.vt.us","k12.va.us","k12.wa.us","k12.wi.us","k12.wy.us","cc.ak.us","cc.al.us","cc.ar.us","cc.as.us","cc.az.us","cc.ca.us","cc.co.us","cc.ct.us","cc.dc.us","cc.de.us","cc.fl.us","cc.ga.us","cc.gu.us","cc.hi.us","cc.ia.us","cc.id.us","cc.il.us","cc.in.us","cc.ks.us","cc.ky.us","cc.la.us","cc.ma.us","cc.md.us","cc.me.us","cc.mi.us","cc.mn.us","cc.mo.us","cc.ms.us","cc.mt.us","cc.nc.us","cc.nd.us","cc.ne.us","cc.nh.us","cc.nj.us","cc.nm.us","cc.nv.us","cc.ny.us","cc.oh.us","cc.ok.us","cc.or.us","cc.pa.us","cc.pr.us","cc.ri.us","cc.sc.us","cc.sd.us","cc.tn.us","cc.tx.us","cc.ut.us","cc.vi.us","cc.vt.us","cc.va.us","cc.wa.us","cc.wi.us","cc.wv.us","cc.wy.us","lib.ak.us","lib.al.us","lib.ar.us","lib.as.us","lib.az.us","lib.ca.us","lib.co.us","lib.ct.us","lib.dc.us","lib.fl.us","lib.ga.us","lib.gu.us","lib.hi.us","lib.ia.us","lib.id.us","lib.il.us","lib.in.us","lib.ks.us","lib.ky.us","lib.la.us","lib.ma.us","lib.md.us","lib.me.us","lib.mi.us","lib.mn.us","lib.mo.us","lib.ms.us","lib.mt.us","lib.nc.us","lib.nd.us","lib.ne.us","lib.nh.us","lib.nj.us","lib.nm.us","lib.nv.us","lib.ny.us","lib.oh.us","lib.ok.us","lib.or.us","lib.pa.us","lib.pr.us","lib.ri.us","lib.sc.us","lib.sd.us","lib.tn.us","lib.tx.us","lib.ut.us","lib.vi.us","lib.vt.us","lib.va.us","lib.wa.us","lib.wi.us","lib.wy.us","pvt.k12.ma.us","chtr.k12.ma.us","paroch.k12.ma.us","ann-arbor.mi.us","cog.mi.us","dst.mi.us","eaton.mi.us","gen.mi.us","mus.mi.us","tec.mi.us","washtenaw.mi.us","uy","com.uy","edu.uy","gub.uy","mil.uy","net.uy","org.uy","uz","co.uz","com.uz","net.uz","org.uz","va","vc","com.vc","net.vc","org.vc","gov.vc","mil.vc","edu.vc","ve","arts.ve","co.ve","com.ve","e12.ve","edu.ve","firm.ve","gob.ve","gov.ve","info.ve","int.ve","mil.ve","net.ve","org.ve","rec.ve","store.ve","tec.ve","web.ve","vg","vi","co.vi","com.vi","k12.vi","net.vi","org.vi","vn","com.vn","net.vn","org.vn","edu.vn","gov.vn","int.vn","ac.vn","biz.vn","info.vn","name.vn","pro.vn","health.vn","vu","com.vu","edu.vu","net.vu","org.vu","wf","ws","com.ws","net.ws","org.ws","gov.ws","edu.ws","yt","","","","","","","","","","","","","",".",".",".",".",".",".","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","",".",".",".",".",".",".","","","","","","","","","","","","",".",".",".",".",".",".","","","","","","","xxx","*.ye","ac.za","agric.za","alt.za","co.za","edu.za","gov.za","grondar.za","law.za","mil.za","net.za","ngo.za","nis.za","nom.za","org.za","school.za","tm.za","web.za","zm","ac.zm","biz.zm","co.zm","com.zm","edu.zm","gov.zm","info.zm","mil.zm","net.zm","org.zm","sch.zm","zw","ac.zw","co.zw","gov.zw","mil.zw","org.zw","aaa","aarp","abarth","abb","abbott","abbvie","abc","able","abogado","abudhabi","academy","accenture","accountant","accountants","aco","active","actor","adac","ads","adult","aeg","aetna","afamilycompany","afl","africa","agakhan","agency","aig","aigo","airbus","airforce","airtel","akdn","alfaromeo","alibaba","alipay","allfinanz","allstate","ally","alsace","alstom","americanexpress","americanfamily","amex","amfam","amica","amsterdam","analytics","android","anquan","anz","aol","apartments","app","apple","aquarelle","arab","aramco","archi","army","art","arte","asda","associates","athleta","attorney","auction","audi","audible","audio","auspost","author","auto","autos","avianca","aws","axa","azure","baby","baidu","banamex","bananarepublic","band","bank","bar","barcelona","barclaycard","barclays","barefoot","bargains","baseball","basketball","bauhaus","bayern","bbc","bbt","bbva","bcg","bcn","beats","beauty","beer","bentley","berlin","best","bestbuy","bet","bharti","bible","bid","bike","bing","bingo","bio","black","blackfriday","blanco","blockbuster","blog","bloomberg","blue","bms","bmw","bnl","bnpparibas","boats","boehringer","bofa","bom","bond","boo","book","booking","bosch","bostik","boston","bot","boutique","box","bradesco","bridgestone","broadway","broker","brother","brussels","budapest","bugatti","build","builders","business","buy","buzz","bzh","cab","cafe","cal","call","calvinklein","cam","camera","camp","cancerresearch","canon","capetown","capital","capitalone","car","caravan","cards","care","career","careers","cars","cartier","casa","case","caseih","cash","casino","catering","catholic","cba","cbn","cbre","cbs","ceb","center","ceo","cern","cfa","cfd","chanel","channel","charity","chase","chat","cheap","chintai","christmas","chrome","chrysler","church","cipriani","circle","cisco","citadel","citi","citic","city","cityeats","claims","cleaning","click","clinic","clinique","clothing","cloud","club","clubmed","coach","codes","coffee","college","cologne","comcast","commbank","community","company","compare","computer","comsec","condos","construction","consulting","contact","contractors","cooking","cookingchannel","cool","corsica","country","coupon","coupons","courses","credit","creditcard","creditunion","cricket","crown","crs","cruise","cruises","csc","cuisinella","cymru","cyou","dabur","dad","dance","data","date","dating","datsun","day","dclk","dds","deal","dealer","deals","degree","delivery","dell","deloitte","delta","democrat","dental","dentist","desi","design","dev","dhl","diamonds","diet","digital","direct","directory","discount","discover","dish","diy","dnp","docs","doctor","dodge","dog","doha","domains","dot","download","drive","dtv","dubai","duck","dunlop","duns","dupont","durban","dvag","dvr","earth","eat","eco","edeka","education","email","emerck","energy","engineer","engineering","enterprises","epost","epson","equipment","ericsson","erni","esq","estate","esurance","etisalat","eurovision","eus","events","everbank","exchange","expert","exposed","express","extraspace","fage","fail","fairwinds","faith","family","fan","fans","farm","farmers","fashion","fast","fedex","feedback","ferrari","ferrero","fiat","fidelity","fido","film","final","finance","financial","fire","firestone","firmdale","fish","fishing","fit","fitness","flickr","flights","flir","florist","flowers","fly","foo","food","foodnetwork","football","ford","forex","forsale","forum","foundation","fox","free","fresenius","frl","frogans","frontdoor","frontier","ftr","fujitsu","fujixerox","fun","fund","furniture","futbol","fyi","gal","gallery","gallo","gallup","game","games","gap","garden","gbiz","gdn","gea","gent","genting","george","ggee","gift","gifts","gives","giving","glade","glass","gle","global","globo","gmail","gmbh","gmo","gmx","godaddy","gold","goldpoint","golf","goo","goodhands","goodyear","goog","google","gop","got","grainger","graphics","gratis","green","gripe","grocery","group","guardian","gucci","guge","guide","guitars","guru","hair","hamburg","hangout","haus","hbo","hdfc","hdfcbank","health","healthcare","help","helsinki","here","hermes","hgtv","hiphop","hisamitsu","hitachi","hiv","hkt","hockey","holdings","holiday","homedepot","homegoods","homes","homesense","honda","honeywell","horse","hospital","host","hosting","hot","hoteles","hotels","hotmail","house","how","hsbc","hughes","hyatt","hyundai","ibm","icbc","ice","icu","ieee","ifm","ikano","imamat","imdb","immo","immobilien","inc","industries","infiniti","ing","ink","institute","insurance","insure","intel","international","intuit","investments","ipiranga","irish","iselect","ismaili","ist","istanbul","itau","itv","iveco","jaguar","java","jcb","jcp","jeep","jetzt","jewelry","jio","jlc","jll","jmp","jnj","joburg","jot","joy","jpmorgan","jprs","juegos","juniper","kaufen","kddi","kerryhotels","kerrylogistics","kerryproperties","kfh","kia","kim","kinder","kindle","kitchen","kiwi","koeln","komatsu","kosher","kpmg","kpn","krd","kred","kuokgroup","kyoto","lacaixa","ladbrokes","lamborghini","lamer","lancaster","lancia","lancome","land","landrover","lanxess","lasalle","lat","latino","latrobe","law","lawyer","lds","lease","leclerc","lefrak","legal","lego","lexus","lgbt","liaison","lidl","life","lifeinsurance","lifestyle","lighting","like","lilly","limited","limo","lincoln","linde","link","lipsy","live","living","lixil","llc","loan","loans","locker","locus","loft","lol","london","lotte","lotto","love","lpl","lplfinancial","ltd","ltda","lundbeck","lupin","luxe","luxury","macys","madrid","maif","maison","makeup","man","management","mango","map","market","marketing","markets","marriott","marshalls","maserati","mattel","mba","mckinsey","med","media","meet","melbourne","meme","memorial","men","menu","merckmsd","metlife","miami","microsoft","mini","mint","mit","mitsubishi","mlb","mls","mma","mobile","mobily","moda","moe","moi","mom","monash","money","monster","mopar","mormon","mortgage","moscow","moto","motorcycles","mov","movie","movistar","msd","mtn","mtr","mutual","nab","nadex","nagoya","nationwide","natura","navy","nba","nec","netbank","netflix","network","neustar","new","newholland","news","next","nextdirect","nexus","nfl","ngo","nhk","nico","nike","nikon","ninja","nissan","nissay","nokia","northwesternmutual","norton","now","nowruz","nowtv","nra","nrw","ntt","nyc","obi","observer","off","office","okinawa","olayan","olayangroup","oldnavy","ollo","omega","one","ong","onl","online","onyourside","ooo","open","oracle","orange","organic","origins","osaka","otsuka","ott","ovh","page","panasonic","panerai","paris","pars","partners","parts","party","passagens","pay","pccw","pet","pfizer","pharmacy","phd","philips","phone","photo","photography","photos","physio","piaget","pics","pictet","pictures","pid","pin","ping","pink","pioneer","pizza","place","play","playstation","plumbing","plus","pnc","pohl","poker","politie","porn","pramerica","praxi","press","prime","prod","productions","prof","progressive","promo","properties","property","protection","pru","prudential","pub","pwc","qpon","quebec","quest","qvc","racing","radio","raid","read","realestate","realtor","realty","recipes","red","redstone","redumbrella","rehab","reise","reisen","reit","reliance","ren","rent","rentals","repair","report","republican","rest","restaurant","review","reviews","rexroth","rich","richardli","ricoh","rightathome","ril","rio","rip","rmit","rocher","rocks","rodeo","rogers","room","rsvp","rugby","ruhr","run","rwe","ryukyu","saarland","safe","safety","sakura","sale","salon","samsclub","samsung","sandvik","sandvikcoromant","sanofi","sap","sarl","sas","save","saxo","sbi","sbs","sca","scb","schaeffler","schmidt","scholarships","school","schule","schwarz","science","scjohnson","scor","scot","search","seat","secure","security","seek","select","sener","services","ses","seven","sew","sex","sexy","sfr","shangrila","sharp","shaw","shell","shia","shiksha","shoes","shop","shopping","shouji","show","showtime","shriram","silk","sina","singles","site","ski","skin","sky","skype","sling","smart","smile","sncf","soccer","social","softbank","software","sohu","solar","solutions","song","sony","soy","space","spiegel","sport","spot","spreadbetting","srl","srt","stada","staples","star","starhub","statebank","statefarm","statoil","stc","stcgroup","stockholm","storage","store","stream","studio","study","style","sucks","supplies","supply","support","surf","surgery","suzuki","swatch","swiftcover","swiss","sydney","symantec","systems","tab","taipei","talk","taobao","target","tatamotors","tatar","tattoo","tax","taxi","tci","tdk","team","tech","technology","telecity","telefonica","temasek","tennis","teva","thd","theater","theatre","tiaa","tickets","tienda","tiffany","tips","tires","tirol","tjmaxx","tjx","tkmaxx","tmall","today","tokyo","tools","top","toray","toshiba","total","tours","town","toyota","toys","trade","trading","training","travel","travelchannel","travelers","travelersinsurance","trust","trv","tube","tui","tunes","tushu","tvs","ubank","ubs","uconnect","unicom","university","uno","uol","ups","vacations","vana","vanguard","vegas","ventures","verisign","versicherung","vet","viajes","video","vig","viking","villas","vin","vip","virgin","visa","vision","vista","vistaprint","viva","vivo","vlaanderen","vodka","volkswagen","volvo","vote","voting","voto","voyage","vuelos","wales","walmart","walter","wang","wanggou","warman","watch","watches","weather","weatherchannel","webcam","weber","website","wed","wedding","weibo","weir","whoswho","wien","wiki","williamhill","win","windows","wine","winners","wme","wolterskluwer","woodside","work","works","world","wow","wtc","wtf","xbox","xerox","xfinity","xihuan","xin","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","vermgensberater","vermgensberatung","","","","","","","xyz","yachts","yahoo","yamaxun","yandex","yodobashi","yoga","yokohama","you","youtube","yun","zappos","zara","zero","zip","zippo","zone","zuerich","cc.ua","inf.ua","ltd.ua","beep.pl","*.compute.estate","*.alces.network","alwaysdata.net","cloudfront.net","*.compute.amazonaws.com","*.compute-1.amazonaws.com","*.compute.amazonaws.com.cn","us-east-1.amazonaws.com","cn-north-1.eb.amazonaws.com.cn","elasticbeanstalk.com","ap-northeast-1.elasticbeanstalk.com","ap-northeast-2.elasticbeanstalk.com","ap-northeast-3.elasticbeanstalk.com","ap-south-1.elasticbeanstalk.com","ap-southeast-1.elasticbeanstalk.com","ap-southeast-2.elasticbeanstalk.com","ca-central-1.elasticbeanstalk.com","eu-central-1.elasticbeanstalk.com","eu-west-1.elasticbeanstalk.com","eu-west-2.elasticbeanstalk.com","eu-west-3.elasticbeanstalk.com","sa-east-1.elasticbeanstalk.com","us-east-1.elasticbeanstalk.com","us-east-2.elasticbeanstalk.com","us-gov-west-1.elasticbeanstalk.com","us-west-1.elasticbeanstalk.com","us-west-2.elasticbeanstalk.com","*.elb.amazonaws.com","*.elb.amazonaws.com.cn","s3.amazonaws.com","s3-ap-northeast-1.amazonaws.com","s3-ap-northeast-2.amazonaws.com","s3-ap-south-1.amazonaws.com","s3-ap-southeast-1.amazonaws.com","s3-ap-southeast-2.amazonaws.com","s3-ca-central-1.amazonaws.com","s3-eu-central-1.amazonaws.com","s3-eu-west-1.amazonaws.com","s3-eu-west-2.amazonaws.com","s3-eu-west-3.amazonaws.com","s3-external-1.amazonaws.com","s3-fips-us-gov-west-1.amazonaws.com","s3-sa-east-1.amazonaws.com","s3-us-gov-west-1.amazonaws.com","s3-us-east-2.amazonaws.com","s3-us-west-1.amazonaws.com","s3-us-west-2.amazonaws.com","s3.ap-northeast-2.amazonaws.com","s3.ap-south-1.amazonaws.com","s3.cn-north-1.amazonaws.com.cn","s3.ca-central-1.amazonaws.com","s3.eu-central-1.amazonaws.com","s3.eu-west-2.amazonaws.com","s3.eu-west-3.amazonaws.com","s3.us-east-2.amazonaws.com","s3.dualstack.ap-northeast-1.amazonaws.com","s3.dualstack.ap-northeast-2.amazonaws.com","s3.dualstack.ap-south-1.amazonaws.com","s3.dualstack.ap-southeast-1.amazonaws.com","s3.dualstack.ap-southeast-2.amazonaws.com","s3.dualstack.ca-central-1.amazonaws.com","s3.dualstack.eu-central-1.amazonaws.com","s3.dualstack.eu-west-1.amazonaws.com","s3.dualstack.eu-west-2.amazonaws.com","s3.dualstack.eu-west-3.amazonaws.com","s3.dualstack.sa-east-1.amazonaws.com","s3.dualstack.us-east-1.amazonaws.com","s3.dualstack.us-east-2.amazonaws.com","s3-website-us-east-1.amazonaws.com","s3-website-us-west-1.amazonaws.com","s3-website-us-west-2.amazonaws.com","s3-website-ap-northeast-1.amazonaws.com","s3-website-ap-southeast-1.amazonaws.com","s3-website-ap-southeast-2.amazonaws.com","s3-website-eu-west-1.amazonaws.com","s3-website-sa-east-1.amazonaws.com","s3-website.ap-northeast-2.amazonaws.com","s3-website.ap-south-1.amazonaws.com","s3-website.ca-central-1.amazonaws.com","s3-website.eu-central-1.amazonaws.com","s3-website.eu-west-2.amazonaws.com","s3-website.eu-west-3.amazonaws.com","s3-website.us-east-2.amazonaws.com","t3l3p0rt.net","tele.amune.org","on-aptible.com","user.party.eus","pimienta.org","poivron.org","potager.org","sweetpepper.org","myasustor.com","myfritz.net","*.awdev.ca","*.advisor.ws","backplaneapp.io","betainabox.com","bnr.la","blackbaudcdn.net","boomla.net","boxfuse.io","square7.ch","bplaced.com","bplaced.de","square7.de","bplaced.net","square7.net","browsersafetymark.io","mycd.eu","ae.org","ar.com","br.com","cn.com","com.de","com.se","de.com","eu.com","gb.com","gb.net","hu.com","hu.net","jp.net","jpn.com","kr.com","mex.com","no.com","qc.com","ru.com","sa.com","se.net","uk.com","uk.net","us.com","uy.com","za.bz","za.com","africa.com","gr.com","in.net","us.org","co.com","c.la","certmgr.org","xenapponazure.com","virtueeldomein.nl","cleverapps.io","c66.me","cloud66.ws","jdevcloud.com","wpdevcloud.com","cloudaccess.host","freesite.host","cloudaccess.net","cloudcontrolled.com","cloudcontrolapp.com","co.ca","*.otap.co","co.cz","c.cdn77.org","cdn77-ssl.net","r.cdn77.net","rsc.cdn77.org","ssl.origin.cdn77-secure.org","cloudns.asia","cloudns.biz","cloudns.club","cloudns.cc","cloudns.eu","cloudns.in","cloudns.info","cloudns.org","cloudns.pro","cloudns.pw","cloudns.us","cloudeity.net","cnpy.gdn","co.nl","co.no","webhosting.be","hosting-cluster.nl","dyn.cosidns.de","dynamisches-dns.de","dnsupdater.de","internet-dns.de","l-o-g-i-n.de","dynamic-dns.info","feste-ip.net","knx-server.net","static-access.net","realm.cz","*.cryptonomic.net","cupcake.is","cyon.link","cyon.site","daplie.me","localhost.daplie.me","dattolocal.com","dattorelay.com","dattoweb.com","mydatto.com","dattolocal.net","mydatto.net","biz.dk","co.dk","firm.dk","reg.dk","store.dk","debian.net","dedyn.io","dnshome.de","drayddns.com","dreamhosters.com","mydrobo.com","drud.io","drud.us","duckdns.org","dy.fi","tunk.org","dyndns-at-home.com","dyndns-at-work.com","dyndns-blog.com","dyndns-free.com","dyndns-home.com","dyndns-ip.com","dyndns-mail.com","dyndns-office.com","dyndns-pics.com","dyndns-remote.com","dyndns-server.com","dyndns-web.com","dyndns-wiki.com","dyndns-work.com","dyndns.biz","dyndns.info","dyndns.org","dyndns.tv","at-band-camp.net","ath.cx","barrel-of-knowledge.info","barrell-of-knowledge.info","better-than.tv","blogdns.com","blogdns.net","blogdns.org","blogsite.org","boldlygoingnowhere.org","broke-it.net","buyshouses.net","cechire.com","dnsalias.com","dnsalias.net","dnsalias.org","dnsdojo.com","dnsdojo.net","dnsdojo.org","does-it.net","doesntexist.com","doesntexist.org","dontexist.com","dontexist.net","dontexist.org","doomdns.com","doomdns.org","dvrdns.org","dyn-o-saur.com","dynalias.com","dynalias.net","dynalias.org","dynathome.net","dyndns.ws","endofinternet.net","endofinternet.org","endoftheinternet.org","est-a-la-maison.com","est-a-la-masion.com","est-le-patron.com","est-mon-blogueur.com","for-better.biz","for-more.biz","for-our.info","for-some.biz","for-the.biz","forgot.her.name","forgot.his.name","from-ak.com","from-al.com","from-ar.com","from-az.net","from-ca.com","from-co.net","from-ct.com","from-dc.com","from-de.com","from-fl.com","from-ga.com","from-hi.com","from-ia.com","from-id.com","from-il.com","from-in.com","from-ks.com","from-ky.com","from-la.net","from-ma.com","from-md.com","from-me.org","from-mi.com","from-mn.com","from-mo.com","from-ms.com","from-mt.com","from-nc.com","from-nd.com","from-ne.com","from-nh.com","from-nj.com","from-nm.com","from-nv.com","from-ny.net","from-oh.com","from-ok.com","from-or.com","from-pa.com","from-pr.com","from-ri.com","from-sc.com","from-sd.com","from-tn.com","from-tx.com","from-ut.com","from-va.com","from-vt.com","from-wa.com","from-wi.com","from-wv.com","from-wy.com","ftpaccess.cc","fuettertdasnetz.de","game-host.org","game-server.cc","getmyip.com","gets-it.net","go.dyndns.org","gotdns.com","gotdns.org","groks-the.info","groks-this.info","ham-radio-op.net","here-for-more.info","hobby-site.com","hobby-site.org","home.dyndns.org","homedns.org","homeftp.net","homeftp.org","homeip.net","homelinux.com","homelinux.net","homelinux.org","homeunix.com","homeunix.net","homeunix.org","iamallama.com","in-the-band.net","is-a-anarchist.com","is-a-blogger.com","is-a-bookkeeper.com","is-a-bruinsfan.org","is-a-bulls-fan.com","is-a-candidate.org","is-a-caterer.com","is-a-celticsfan.org","is-a-chef.com","is-a-chef.net","is-a-chef.org","is-a-conservative.com","is-a-cpa.com","is-a-cubicle-slave.com","is-a-democrat.com","is-a-designer.com","is-a-doctor.com","is-a-financialadvisor.com","is-a-geek.com","is-a-geek.net","is-a-geek.org","is-a-green.com","is-a-guru.com","is-a-hard-worker.com","is-a-hunter.com","is-a-knight.org","is-a-landscaper.com","is-a-lawyer.com","is-a-liberal.com","is-a-libertarian.com","is-a-linux-user.org","is-a-llama.com","is-a-musician.com","is-a-nascarfan.com","is-a-nurse.com","is-a-painter.com","is-a-patsfan.org","is-a-personaltrainer.com","is-a-photographer.com","is-a-player.com","is-a-republican.com","is-a-rockstar.com","is-a-socialist.com","is-a-soxfan.org","is-a-student.com","is-a-teacher.com","is-a-techie.com","is-a-therapist.com","is-an-accountant.com","is-an-actor.com","is-an-actress.com","is-an-anarchist.com","is-an-artist.com","is-an-engineer.com","is-an-entertainer.com","is-by.us","is-certified.com","is-found.org","is-gone.com","is-into-anime.com","is-into-cars.com","is-into-cartoons.com","is-into-games.com","is-leet.com","is-lost.org","is-not-certified.com","is-saved.org","is-slick.com","is-uberleet.com","is-very-bad.org","is-very-evil.org","is-very-good.org","is-very-nice.org","is-very-sweet.org","is-with-theband.com","isa-geek.com","isa-geek.net","isa-geek.org","isa-hockeynut.com","issmarterthanyou.com","isteingeek.de","istmein.de","kicks-ass.net","kicks-ass.org","knowsitall.info","land-4-sale.us","lebtimnetz.de","leitungsen.de","likes-pie.com","likescandy.com","merseine.nu","mine.nu","misconfused.org","mypets.ws","myphotos.cc","neat-url.com","office-on-the.net","on-the-web.tv","podzone.net","podzone.org","readmyblog.org","saves-the-whales.com","scrapper-site.net","scrapping.cc","selfip.biz","selfip.com","selfip.info","selfip.net","selfip.org","sells-for-less.com","sells-for-u.com","sells-it.net","sellsyourhome.org","servebbs.com","servebbs.net","servebbs.org","serveftp.net","serveftp.org","servegame.org","shacknet.nu","simple-url.com","space-to-rent.com","stuff-4-sale.org","stuff-4-sale.us","teaches-yoga.com","thruhere.net","traeumtgerade.de","webhop.biz","webhop.info","webhop.net","webhop.org","worse-than.tv","writesthisblog.com","ddnss.de","dyn.ddnss.de","dyndns.ddnss.de","dyndns1.de","dyn-ip24.de","home-webserver.de","dyn.home-webserver.de","myhome-server.de","ddnss.org","definima.net","definima.io","bci.dnstrace.pro","ddnsfree.com","ddnsgeek.com","giize.com","gleeze.com","kozow.com","loseyourip.com","ooguy.com","theworkpc.com","casacam.net","dynu.net","accesscam.org","camdvr.org","freeddns.org","mywire.org","webredirect.org","myddns.rocks","blogsite.xyz","dynv6.net","e4.cz","mytuleap.com","enonic.io","customer.enonic.io","eu.org","al.eu.org","asso.eu.org","at.eu.org","au.eu.org","be.eu.org","bg.eu.org","ca.eu.org","cd.eu.org","ch.eu.org","cn.eu.org","cy.eu.org","cz.eu.org","de.eu.org","dk.eu.org","edu.eu.org","ee.eu.org","es.eu.org","fi.eu.org","fr.eu.org","gr.eu.org","hr.eu.org","hu.eu.org","ie.eu.org","il.eu.org","in.eu.org","int.eu.org","is.eu.org","it.eu.org","jp.eu.org","kr.eu.org","lt.eu.org","lu.eu.org","lv.eu.org","mc.eu.org","me.eu.org","mk.eu.org","mt.eu.org","my.eu.org","net.eu.org","ng.eu.org","nl.eu.org","no.eu.org","nz.eu.org","paris.eu.org","pl.eu.org","pt.eu.org","q-a.eu.org","ro.eu.org","ru.eu.org","se.eu.org","si.eu.org","sk.eu.org","tr.eu.org","uk.eu.org","us.eu.org","eu-1.evennode.com","eu-2.evennode.com","eu-3.evennode.com","eu-4.evennode.com","us-1.evennode.com","us-2.evennode.com","us-3.evennode.com","us-4.evennode.com","twmail.cc","twmail.net","twmail.org","mymailer.com.tw","url.tw","apps.fbsbx.com","ru.net","adygeya.ru","bashkiria.ru","bir.ru","cbg.ru","com.ru","dagestan.ru","grozny.ru","kalmykia.ru","kustanai.ru","marine.ru","mordovia.ru","msk.ru","mytis.ru","nalchik.ru","nov.ru","pyatigorsk.ru","spb.ru","vladikavkaz.ru","vladimir.ru","abkhazia.su","adygeya.su","aktyubinsk.su","arkhangelsk.su","armenia.su","ashgabad.su","azerbaijan.su","balashov.su","bashkiria.su","bryansk.su","bukhara.su","chimkent.su","dagestan.su","east-kazakhstan.su","exnet.su","georgia.su","grozny.su","ivanovo.su","jambyl.su","kalmykia.su","kaluga.su","karacol.su","karaganda.su","karelia.su","khakassia.su","krasnodar.su","kurgan.su","kustanai.su","lenug.su","mangyshlak.su","mordovia.su","msk.su","murmansk.su","nalchik.su","navoi.su","north-kazakhstan.su","nov.su","obninsk.su","penza.su","pokrovsk.su","sochi.su","spb.su","tashkent.su","termez.su","togliatti.su","troitsk.su","tselinograd.su","tula.su","tuva.su","vladikavkaz.su","vladimir.su","vologda.su","channelsdvr.net","fastlylb.net","map.fastlylb.net","freetls.fastly.net","map.fastly.net","a.prod.fastly.net","global.prod.fastly.net","a.ssl.fastly.net","b.ssl.fastly.net","global.ssl.fastly.net","fastpanel.direct","fastvps-server.com","fhapp.xyz","fedorainfracloud.org","fedorapeople.org","cloud.fedoraproject.org","app.os.fedoraproject.org","app.os.stg.fedoraproject.org","filegear.me","firebaseapp.com","flynnhub.com","flynnhosting.net","freebox-os.com","freeboxos.com","fbx-os.fr","fbxos.fr","freebox-os.fr","freeboxos.fr","freedesktop.org","*.futurecms.at","*.ex.futurecms.at","*.in.futurecms.at","futurehosting.at","futuremailing.at","*.ex.ortsinfo.at","*.kunden.ortsinfo.at","*.statics.cloud","service.gov.uk","github.io","githubusercontent.com","gitlab.io","homeoffice.gov.uk","ro.im","shop.ro","goip.de","*.0emm.com","appspot.com","blogspot.ae","blogspot.al","blogspot.am","blogspot.ba","blogspot.be","blogspot.bg","blogspot.bj","blogspot.ca","blogspot.cf","blogspot.ch","blogspot.cl","blogspot.co.at","blogspot.co.id","blogspot.co.il","blogspot.co.ke","blogspot.co.nz","blogspot.co.uk","blogspot.co.za","blogspot.com","blogspot.com.ar","blogspot.com.au","blogspot.com.br","blogspot.com.by","blogspot.com.co","blogspot.com.cy","blogspot.com.ee","blogspot.com.eg","blogspot.com.es","blogspot.com.mt","blogspot.com.ng","blogspot.com.tr","blogspot.com.uy","blogspot.cv","blogspot.cz","blogspot.de","blogspot.dk","blogspot.fi","blogspot.fr","blogspot.gr","blogspot.hk","blogspot.hr","blogspot.hu","blogspot.ie","blogspot.in","blogspot.is","blogspot.it","blogspot.jp","blogspot.kr","blogspot.li","blogspot.lt","blogspot.lu","blogspot.md","blogspot.mk","blogspot.mr","blogspot.mx","blogspot.my","blogspot.nl","blogspot.no","blogspot.pe","blogspot.pt","blogspot.qa","blogspot.re","blogspot.ro","blogspot.rs","blogspot.ru","blogspot.se","blogspot.sg","blogspot.si","blogspot.sk","blogspot.sn","blogspot.td","blogspot.tw","blogspot.ug","blogspot.vn","cloudfunctions.net","cloud.goog","codespot.com","googleapis.com","googlecode.com","pagespeedmobilizer.com","publishproxy.com","withgoogle.com","withyoutube.com","hashbang.sh","hasura.app","hasura-app.io","hepforge.org","herokuapp.com","herokussl.com","myravendb.com","ravendb.community","ravendb.me","development.run","ravendb.run","moonscale.net","iki.fi","biz.at","info.at","info.cx","ac.leg.br","al.leg.br","am.leg.br","ap.leg.br","ba.leg.br","ce.leg.br","df.leg.br","es.leg.br","go.leg.br","ma.leg.br","mg.leg.br","ms.leg.br","mt.leg.br","pa.leg.br","pb.leg.br","pe.leg.br","pi.leg.br","pr.leg.br","rj.leg.br","rn.leg.br","ro.leg.br","rr.leg.br","rs.leg.br","sc.leg.br","se.leg.br","sp.leg.br","to.leg.br","pixolino.com","ipifony.net","mein-iserv.de","test-iserv.de","myjino.ru","*.hosting.myjino.ru","*.landing.myjino.ru","*.spectrum.myjino.ru","*.vps.myjino.ru","*.triton.zone","*.cns.joyent.com","js.org","keymachine.de","knightpoint.systems","co.krd","edu.krd","git-repos.de","lcube-server.de","svn-repos.de","app.lmpm.com","linkitools.space","linkyard.cloud","linkyard-cloud.ch","we.bs","uklugs.org","glug.org.uk","lug.org.uk","lugs.org.uk","barsy.bg","barsy.co.uk","barsyonline.co.uk","barsycenter.com","barsyonline.com","barsy.club","barsy.de","barsy.eu","barsy.in","barsy.info","barsy.io","barsy.me","barsy.menu","barsy.mobi","barsy.net","barsy.online","barsy.org","barsy.pro","barsy.pub","barsy.shop","barsy.site","barsy.support","barsy.uk","*.magentosite.cloud","mayfirst.info","mayfirst.org","hb.cldmail.ru","miniserver.com","memset.net","cloud.metacentrum.cz","custom.metacentrum.cz","flt.cloud.muni.cz","usr.cloud.muni.cz","meteorapp.com","eu.meteorapp.com","co.pl","azurecontainer.io","azurewebsites.net","azure-mobile.net","cloudapp.net","mozilla-iot.org","bmoattachments.org","net.ru","org.ru","pp.ru","bitballoon.com","netlify.com","4u.com","ngrok.io","nh-serv.co.uk","nfshost.com","dnsking.ch","mypi.co","n4t.co","001www.com","ddnslive.com","myiphost.com","forumz.info","16-b.it","32-b.it","64-b.it","soundcast.me","tcp4.me","dnsup.net","hicam.net","now-dns.net","ownip.net","vpndns.net","dynserv.org","now-dns.org","x443.pw","now-dns.top","ntdll.top","freeddns.us","crafting.xyz","zapto.xyz","nsupdate.info","nerdpol.ovh","blogsyte.com","brasilia.me","cable-modem.org","ciscofreak.com","collegefan.org","couchpotatofries.org","damnserver.com","ddns.me","ditchyourip.com","dnsfor.me","dnsiskinky.com","dvrcam.info","dynns.com","eating-organic.net","fantasyleague.cc","geekgalaxy.com","golffan.us","health-carereform.com","homesecuritymac.com","homesecuritypc.com","hopto.me","ilovecollege.info","loginto.me","mlbfan.org","mmafan.biz","myactivedirectory.com","mydissent.net","myeffect.net","mymediapc.net","mypsx.net","mysecuritycamera.com","mysecuritycamera.net","mysecuritycamera.org","net-freaks.com","nflfan.org","nhlfan.net","no-ip.ca","no-ip.co.uk","no-ip.net","noip.us","onthewifi.com","pgafan.net","point2this.com","pointto.us","privatizehealthinsurance.net","quicksytes.com","read-books.org","securitytactics.com","serveexchange.com","servehumour.com","servep2p.com","servesarcasm.com","stufftoread.com","ufcfan.org","unusualperson.com","workisboring.com","3utilities.com","bounceme.net","ddns.net","ddnsking.com","gotdns.ch","hopto.org","myftp.biz","myftp.org","myvnc.com","no-ip.biz","no-ip.info","no-ip.org","noip.me","redirectme.net","servebeer.com","serveblog.net","servecounterstrike.com","serveftp.com","servegame.com","servehalflife.com","servehttp.com","serveirc.com","serveminecraft.net","servemp3.com","servepics.com","servequake.com","sytes.net","webhop.me","zapto.org","stage.nodeart.io","nodum.co","nodum.io","pcloud.host","nyc.mn","nom.ae","nom.af","nom.ai","nom.al","nym.by","nym.bz","nom.cl","nom.gd","nom.ge","nom.gl","nym.gr","nom.gt","nym.gy","nom.hn","nym.ie","nom.im","nom.ke","nym.kz","nym.la","nym.lc","nom.li","nym.li","nym.lt","nym.lu","nym.me","nom.mk","nym.mn","nym.mx","nom.nu","nym.nz","nym.pe","nym.pt","nom.pw","nom.qa","nym.ro","nom.rs","nom.si","nym.sk","nom.st","nym.su","nym.sx","nom.tj","nym.tw","nom.ug","nom.uy","nom.vc","nom.vg","cya.gg","cloudycluster.net","nid.io","opencraft.hosting","operaunite.com","outsystemscloud.com","ownprovider.com","own.pm","ox.rs","oy.lc","pgfog.com","pagefrontapp.com","art.pl","gliwice.pl","krakow.pl","poznan.pl","wroc.pl","zakopane.pl","pantheonsite.io","gotpantheon.com","mypep.link","on-web.fr","*.platform.sh","*.platformsh.site","xen.prgmr.com","priv.at","protonet.io","chirurgiens-dentistes-en-france.fr","byen.site","ras.ru","qa2.com","dev-myqnapcloud.com","alpha-myqnapcloud.com","myqnapcloud.com","*.quipelements.com","vapor.cloud","vaporcloud.io","rackmaze.com","rackmaze.net","rhcloud.com","resindevice.io","devices.resinstaging.io","hzc.io","wellbeingzone.eu","ptplus.fit","wellbeingzone.co.uk","sandcats.io","logoip.de","logoip.com","schokokeks.net","scrysec.com","firewall-gateway.com","firewall-gateway.de","my-gateway.de","my-router.de","spdns.de","spdns.eu","firewall-gateway.net","my-firewall.org","myfirewall.org","spdns.org","*.s5y.io","*.sensiosite.cloud","biz.ua","co.ua","pp.ua","shiftedit.io","myshopblocks.com","1kapp.com","appchizi.com","applinzi.com","sinaapp.com","vipsinaapp.com","bounty-full.com","alpha.bounty-full.com","beta.bounty-full.com","static.land","dev.static.land","sites.static.land","apps.lair.io","*.stolos.io","spacekit.io","customer.speedpartner.de","storj.farm","utwente.io","temp-dns.com","diskstation.me","dscloud.biz","dscloud.me","dscloud.mobi","dsmynas.com","dsmynas.net","dsmynas.org","familyds.com","familyds.net","familyds.org","i234.me","myds.me","synology.me","vpnplus.to","taifun-dns.de","gda.pl","gdansk.pl","gdynia.pl","med.pl","sopot.pl","gwiddle.co.uk","cust.dev.thingdust.io","cust.disrec.thingdust.io","cust.prod.thingdust.io","cust.testing.thingdust.io","bloxcms.com","townnews-staging.com","12hp.at","2ix.at","4lima.at","lima-city.at","12hp.ch","2ix.ch","4lima.ch","lima-city.ch","trafficplex.cloud","de.cool","12hp.de","2ix.de","4lima.de","lima-city.de","1337.pictures","clan.rip","lima-city.rocks","webspace.rocks","lima.zone","*.transurl.be","*.transurl.eu","*.transurl.nl","tuxfamily.org","dd-dns.de","diskstation.eu","diskstation.org","dray-dns.de","draydns.de","dyn-vpn.de","dynvpn.de","mein-vigor.de","my-vigor.de","my-wan.de","syno-ds.de","synology-diskstation.de","synology-ds.de","uber.space","*.uberspace.de","hk.com","hk.org","ltd.hk","inc.hk","virtualuser.de","virtual-user.de","lib.de.us","2038.io","router.management","v-info.info","wedeploy.io","wedeploy.me","wedeploy.sh","remotewd.com","wmflabs.org","half.host","xnbay.com","u2.xnbay.com","u2-local.xnbay.com","cistron.nl","demon.nl","xs4all.space","official.academy","yolasite.com","ybo.faith","yombo.me","homelink.one","ybo.party","ybo.review","ybo.science","ybo.trade","nohost.me","noho.st","za.net","za.org","now.sh","zone.id"]},function(e,t,r){"use strict";
/*!
 * Copyright (c) 2015, Salesforce.com, Inc.
 * All rights reserved.
 *
 * Redistribution and use in source and binary forms, with or without
 * modification, are permitted provided that the following conditions are met:
 *
 * 1. Redistributions of source code must retain the above copyright notice,
 * this list of conditions and the following disclaimer.
 *
 * 2. Redistributions in binary form must reproduce the above copyright notice,
 * this list of conditions and the following disclaimer in the documentation
 * and/or other materials provided with the distribution.
 *
 * 3. Neither the name of Salesforce.com nor the names of its contributors may
 * be used to endorse or promote products derived from this software without
 * specific prior written permission.
 *
 * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS IS"
 * AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE
 * IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE
 * ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT HOLDER OR CONTRIBUTORS BE
 * LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR
 * CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF
 * SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS
 * INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN
 * CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE)
 * ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE
 * POSSIBILITY OF SUCH DAMAGE.
 */var n=r(301).Store,i=r(302).permuteDomain,o=r(303).pathMatch,s=r(1);function MemoryCookieStore(){n.call(this),this.idx={}}s.inherits(MemoryCookieStore,n),t.MemoryCookieStore=MemoryCookieStore,MemoryCookieStore.prototype.idx=null,MemoryCookieStore.prototype.synchronous=!0,MemoryCookieStore.prototype.inspect=function(){return"{ idx: "+s.inspect(this.idx,!1,2)+" }"},s.inspect.custom&&(MemoryCookieStore.prototype[s.inspect.custom]=MemoryCookieStore.prototype.inspect),MemoryCookieStore.prototype.findCookie=function(e,t,r,n){return this.idx[e]&&this.idx[e][t]?n(null,this.idx[e][t][r]||null):n(null,void 0)},MemoryCookieStore.prototype.findCookies=function(e,t,r){var n,s=[];if(!e)return r(null,[]);n=t?function matchRFC(e){Object.keys(e).forEach(function(r){if(o(t,r)){var n=e[r];for(var i in n)s.push(n[i])}})}:function matchAll(e){for(var t in e){var r=e[t];for(var n in r)s.push(r[n])}};var a=i(e)||[e],c=this.idx;a.forEach(function(e){var t=c[e];t&&n(t)}),r(null,s)},MemoryCookieStore.prototype.putCookie=function(e,t){this.idx[e.domain]||(this.idx[e.domain]={}),this.idx[e.domain][e.path]||(this.idx[e.domain][e.path]={}),this.idx[e.domain][e.path][e.key]=e,t(null)},MemoryCookieStore.prototype.updateCookie=function(e,t,r){this.putCookie(t,r)},MemoryCookieStore.prototype.removeCookie=function(e,t,r,n){this.idx[e]&&this.idx[e][t]&&this.idx[e][t][r]&&delete this.idx[e][t][r],n(null)},MemoryCookieStore.prototype.removeCookies=function(e,t,r){return this.idx[e]&&(t?delete this.idx[e][t]:delete this.idx[e]),r(null)},MemoryCookieStore.prototype.getAllCookies=function(e){var t=[],r=this.idx;Object.keys(r).forEach(function(e){Object.keys(r[e]).forEach(function(n){Object.keys(r[e][n]).forEach(function(i){null!==i&&t.push(r[e][n][i])})})}),t.sort(function(e,t){return(e.creationIndex||0)-(t.creationIndex||0)}),e(null,t)}},function(e){e.exports={_args:[["tough-cookie@2.4.3","/home/travis/build/microsoft/vscode-azure-iot-toolkit"]],_from:"tough-cookie@2.4.3",_id:"tough-cookie@2.4.3",_inBundle:!1,_integrity:"sha512-Q5srk/4vDM54WJsJio3XNn6K2sCG+CQ8G5Wz6bZhRZoAe/+TxjWB/GlFAnYEbkYVlON9FMk/fE3h2RLpPXo4lQ==",_location:"/tough-cookie",_phantomChildren:{},_requested:{type:"version",registry:!0,raw:"tough-cookie@2.4.3",name:"tough-cookie",escapedName:"tough-cookie",rawSpec:"2.4.3",saveSpec:null,fetchSpec:"2.4.3"},_requiredBy:["/@azure/ms-rest-js","/request"],_resolved:"https://registry.npmjs.org/tough-cookie/-/tough-cookie-2.4.3.tgz",_spec:"2.4.3",_where:"/home/travis/build/microsoft/vscode-azure-iot-toolkit",author:{name:"Jeremy Stashewsky",email:"jstash@gmail.com"},bugs:{url:"https://github.com/salesforce/tough-cookie/issues"},contributors:[{name:"Alexander Savin"},{name:"Ian Livingstone"},{name:"Ivan Nikulin"},{name:"Lalit Kapoor"},{name:"Sam Thompson"},{name:"Sebastian Mayr"}],dependencies:{psl:"^1.1.24",punycode:"^1.4.1"},description:"RFC6265 Cookies and Cookie Jar for node.js",devDependencies:{async:"^1.4.2",nyc:"^11.6.0","string.prototype.repeat":"^0.2.0",vows:"^0.8.1"},engines:{node:">=0.8"},files:["lib"],homepage:"https://github.com/salesforce/tough-cookie",keywords:["HTTP","cookie","cookies","set-cookie","cookiejar","jar","RFC6265","RFC2965"],license:"BSD-3-Clause",main:"./lib/cookie",name:"tough-cookie",repository:{type:"git",url:"git://github.com/salesforce/tough-cookie.git"},scripts:{cover:"nyc --reporter=lcov --reporter=html vows test/*_test.js",test:"vows test/*_test.js"},version:"2.4.3"}},function(e,t){function serializer(e,t){var r=[],n=[];return null==t&&(t=function(e,t){return r[0]===t?"[Circular ~]":"[Circular ~."+n.slice(0,r.indexOf(t)).join(".")+"]"}),function(i,o){if(r.length>0){var s=r.indexOf(this);~s?r.splice(s+1):r.push(this),~s?n.splice(s,1/0,i):n.push(i),~r.indexOf(o)&&(o=t.call(this,i,o))}else r.push(o);return null==e?o:e.call(this,i,o)}}(e.exports=function stringify(e,t,r,n){return JSON.stringify(e,serializer(t,n),r)}).getSerialize=serializer},function(e,t,r){"use strict";var n=r(23),i=r(21),o=r(7),s=r(1),a=r(15),c=r(112),u=r(661),l=r(662),p=r(664),d=r(310),h=r(196),f=r(680),m=r(255),g=r(39),y=r(318),v=r(688).strict,b=r(189),_=r(298),w=r(689),E=r(690).Querystring,S=r(693).Har,C=r(748).Auth,x=r(749).OAuth,k=r(751),R=r(752).Multipart,T=r(753).Redirect,O=r(754).Tunnel,I=r(756),N=r(14).Buffer,A=b.safeStringify,P=b.isReadStream,L=b.toBase64,D=b.defer,M=b.copy,j=b.version,q=_.jar(),F={};function requestToJSON(){return{uri:this.uri,method:this.method,headers:this.headers}}function responseToJSON(){return{statusCode:this.statusCode,body:this.body,headers:this.headers,request:requestToJSON.call(this.request)}}function Request(e){e.har&&(this._har=new S(this),e=this._har.options(e)),a.Stream.call(this);var t=Object.keys(Request.prototype),r=function filterForNonReserved(e,t){var r={};for(var n in t)-1===e.indexOf(n)&&(r[n]=t[n]);return r}(t,e);g(this,r),e=function filterOutReservedFunctions(e,t){var r={};for(var n in t){var i=!(-1===e.indexOf(n)),o="function"==typeof t[n];i&&o||(r[n]=t[n])}return r}(t,e),this.readable=!0,this.writable=!0,e.method&&(this.explicitMethod=!0),this._qs=new E(this),this._auth=new C(this),this._oauth=new x(this),this._multipart=new R(this),this._redirect=new T(this),this._tunnel=new O(this),this.init(e)}function debug(){Request.debug&&console.error("REQUEST %s",s.format.apply(s,arguments))}s.inherits(Request,a.Stream),Request.debug=process.env.NODE_DEBUG&&/\brequest\b/.test(process.env.NODE_DEBUG),Request.prototype.debug=debug,Request.prototype.init=function(e){var t=this;for(var r in e||(e={}),t.headers=t.headers?M(t.headers):{},t.headers)void 0===t.headers[r]&&delete t.headers[r];if(h.httpify(t,t.headers),t.method||(t.method=e.method||"GET"),t.localAddress||(t.localAddress=e.localAddress),t._qs.init(e),debug(e),t.pool||!1===t.pool||(t.pool=F),t.dests=t.dests||[],t.__isRequestRequest=!0,!t._callback&&t.callback&&(t._callback=t.callback,t.callback=function(){t._callbackCalled||(t._callbackCalled=!0,t._callback.apply(t,arguments))},t.on("error",t.callback.bind()),t.on("complete",t.callback.bind(t,null))),!t.uri&&t.url&&(t.uri=t.url,delete t.url),t.baseUrl){if("string"!=typeof t.baseUrl)return t.emit("error",new Error("options.baseUrl must be a string"));if("string"!=typeof t.uri)return t.emit("error",new Error("options.uri must be a string when using options.baseUrl"));if(0===t.uri.indexOf("//")||-1!==t.uri.indexOf("://"))return t.emit("error",new Error("options.uri must be a path when using options.baseUrl"));var s=t.baseUrl.lastIndexOf("/")===t.baseUrl.length-1,a=0===t.uri.indexOf("/");s&&a?t.uri=t.baseUrl+t.uri.slice(1):s||a?t.uri=t.baseUrl+t.uri:""===t.uri?t.uri=t.baseUrl:t.uri=t.baseUrl+"/"+t.uri,delete t.baseUrl}if(!t.uri)return t.emit("error",new Error("options.uri is a required argument"));if("string"==typeof t.uri&&(t.uri=o.parse(t.uri)),t.uri.href||(t.uri.href=o.format(t.uri)),"unix:"===t.uri.protocol)return t.emit("error",new Error("`unix://` URL scheme is no longer supported. Please use the format `http://unix:SOCKET:PATH`"));if("unix"===t.uri.host&&t.enableUnixSocket(),!1===t.strictSSL&&(t.rejectUnauthorized=!1),t.uri.pathname||(t.uri.pathname="/"),!(t.uri.host||t.uri.hostname&&t.uri.port||t.uri.isUnix)){var c='Invalid URI "'+o.format(t.uri)+'"';return 0===Object.keys(e).length&&(c+=". This can be caused by a crappy redirection."),t.abort(),t.emit("error",new Error(c))}if(t.hasOwnProperty("proxy")||(t.proxy=w(t.uri)),t.tunnel=t._tunnel.isEnabled(),t.proxy&&t._tunnel.setup(e),t._redirect.onRequest(e),t.setHost=!1,!t.hasHeader("host")){var u=t.originalHostHeaderName||"host";t.setHeader(u,t.uri.host),t.uri.port&&("80"===t.uri.port&&"http:"===t.uri.protocol||"443"===t.uri.port&&"https:"===t.uri.protocol)&&t.setHeader(u,t.uri.hostname),t.setHost=!0}if(t.jar(t._jar||e.jar),t.uri.port||("http:"===t.uri.protocol?t.uri.port=80:"https:"===t.uri.protocol&&(t.uri.port=443)),t.proxy&&!t.tunnel?(t.port=t.proxy.port,t.host=t.proxy.hostname):(t.port=t.uri.port,t.host=t.uri.hostname),e.form&&t.form(e.form),e.formData){var l=e.formData,p=t.form(),m=function(e,t){t&&t.hasOwnProperty("value")&&t.hasOwnProperty("options")?p.append(e,t.value,t.options):p.append(e,t)};for(var g in l)if(l.hasOwnProperty(g)){var b=l[g];if(b instanceof Array)for(var _=0;_<b.length;_++)m(g,b[_]);else m(g,b)}}if(e.qs&&t.qs(e.qs),t.uri.path?t.path=t.uri.path:t.path=t.uri.pathname+(t.uri.search||""),0===t.path.length&&(t.path="/"),e.aws&&t.aws(e.aws),e.hawk&&t.hawk(e.hawk),e.httpSignature&&t.httpSignature(e.httpSignature),e.auth&&(Object.prototype.hasOwnProperty.call(e.auth,"username")&&(e.auth.user=e.auth.username),Object.prototype.hasOwnProperty.call(e.auth,"password")&&(e.auth.pass=e.auth.password),t.auth(e.auth.user,e.auth.pass,e.auth.sendImmediately,e.auth.bearer)),t.gzip&&!t.hasHeader("accept-encoding")&&t.setHeader("accept-encoding","gzip, deflate"),t.uri.auth&&!t.hasHeader("authorization")){var E=t.uri.auth.split(":").map(function(e){return t._qs.unescape(e)});t.auth(E[0],E.slice(1).join(":"),!0)}if(!t.tunnel&&t.proxy&&t.proxy.auth&&!t.hasHeader("proxy-authorization")){var S=t.proxy.auth.split(":").map(function(e){return t._qs.unescape(e)}),C="Basic "+L(S.join(":"));t.setHeader("proxy-authorization",C)}function setContentLength(){var e;(v(t.body)&&(t.body=N.from(t.body)),t.hasHeader("content-length"))||((e="string"==typeof t.body?N.byteLength(t.body):Array.isArray(t.body)?t.body.reduce(function(e,t){return e+t.length},0):t.body.length)?t.setHeader("content-length",e):t.emit("error",new Error("Argument error, options.body.")))}t.proxy&&!t.tunnel&&(t.path=t.uri.protocol+"//"+t.uri.host+t.path),e.json&&t.json(e.json),e.multipart&&t.multipart(e.multipart),e.time&&(t.timing=!0,t.elapsedTime=t.elapsedTime||0),t.body&&!y(t.body)&&setContentLength(),e.oauth?t.oauth(e.oauth):t._oauth.params&&t.hasHeader("authorization")&&t.oauth(t._oauth.params);var x=t.proxy&&!t.tunnel?t.proxy.protocol:t.uri.protocol,k={"http:":n,"https:":i},R=t.httpModules||{};if(t.httpModule=R[x]||k[x],!t.httpModule)return t.emit("error",new Error("Invalid protocol: "+x));if(e.ca&&(t.ca=e.ca),!t.agent)if(e.agentOptions&&(t.agentOptions=e.agentOptions),e.agentClass)t.agentClass=e.agentClass;else if(e.forever){var T=j();0===T.major&&T.minor<=10?t.agentClass="http:"===x?f:f.SSL:(t.agentClass=t.httpModule.Agent,t.agentOptions=t.agentOptions||{},t.agentOptions.keepAlive=!0)}else t.agentClass=t.httpModule.Agent;!1===t.pool?t.agent=!1:t.agent=t.agent||t.getNewAgent(),t.on("pipe",function(e){if(t.ntick&&t._started&&t.emit("error",new Error("You cannot pipe to this stream after the outbound request has started.")),t.src=e,P(e))t.hasHeader("content-type")||t.setHeader("content-type",d.lookup(e.path));else{if(e.headers)for(var r in e.headers)t.hasHeader(r)||t.setHeader(r,e.headers[r]);t._json&&!t.hasHeader("content-type")&&t.setHeader("content-type","application/json"),e.method&&!t.explicitMethod&&(t.method=e.method)}}),D(function(){if(!t._aborted){var e=function(){if(t._form&&(t._auth.hasAuth?t._auth.hasAuth&&t._auth.sentAuth&&t._form.pipe(t):t._form.pipe(t)),t._multipart&&t._multipart.chunked&&t._multipart.body.pipe(t),t.body)y(t.body)?t.body.pipe(t):(setContentLength(),Array.isArray(t.body)?t.body.forEach(function(e){t.write(e)}):t.write(t.body),t.end());else if(t.requestBodyStream)console.warn("options.requestBodyStream is deprecated, please pass the request object to stream.pipe."),t.requestBodyStream.pipe(t);else if(!t.src){if(t._auth.hasAuth&&!t._auth.sentAuth)return void t.end();"GET"!==t.method&&void 0!==t.method&&t.setHeader("content-length",0),t.end()}};t._form&&!t.hasHeader("content-length")?(t.setHeader(t._form.getHeaders(),!0),t._form.getLength(function(r,n){r||isNaN(n)||t.setHeader("content-length",n),e()})):e(),t.ntick=!0}})},Request.prototype.getNewAgent=function(){var e=this.agentClass,t={};if(this.agentOptions)for(var r in this.agentOptions)t[r]=this.agentOptions[r];this.ca&&(t.ca=this.ca),this.ciphers&&(t.ciphers=this.ciphers),this.secureProtocol&&(t.secureProtocol=this.secureProtocol),this.secureOptions&&(t.secureOptions=this.secureOptions),void 0!==this.rejectUnauthorized&&(t.rejectUnauthorized=this.rejectUnauthorized),this.cert&&this.key&&(t.key=this.key,t.cert=this.cert),this.pfx&&(t.pfx=this.pfx),this.passphrase&&(t.passphrase=this.passphrase);var n="";e!==this.httpModule.Agent&&(n+=e.name);var i=this.proxy;return"string"==typeof i&&(i=o.parse(i)),(i&&"https:"===i.protocol||"https:"===this.uri.protocol)&&(t.ca&&(n&&(n+=":"),n+=t.ca),void 0!==t.rejectUnauthorized&&(n&&(n+=":"),n+=t.rejectUnauthorized),t.cert&&(n&&(n+=":"),n+=t.cert.toString("ascii")+t.key.toString("ascii")),t.pfx&&(n&&(n+=":"),n+=t.pfx.toString("ascii")),t.ciphers&&(n&&(n+=":"),n+=t.ciphers),t.secureProtocol&&(n&&(n+=":"),n+=t.secureProtocol),t.secureOptions&&(n&&(n+=":"),n+=t.secureOptions)),this.pool===F&&!n&&0===Object.keys(t).length&&this.httpModule.globalAgent?this.httpModule.globalAgent:(n=this.uri.protocol+n,this.pool[n]||(this.pool[n]=new e(t),this.pool.maxSockets&&(this.pool[n].maxSockets=this.pool.maxSockets)),this.pool[n])},Request.prototype.start=function(){var e=this;if(e.timing)var t=(new Date).getTime(),r=I();if(!e._aborted){e._started=!0,e.method=e.method||"GET",e.href=e.uri.href,e.src&&e.src.stat&&e.src.stat.size&&!e.hasHeader("content-length")&&e.setHeader("content-length",e.src.stat.size),e._aws&&e.aws(e._aws,!0);var n,i=M(e);delete i.auth,debug("make request",e.uri.href),delete i.timeout;try{e.req=e.httpModule.request(i)}catch(t){return void e.emit("error",t)}e.timing&&(e.startTime=t,e.startTimeNow=r,e.timings={}),e.timeout&&!e.timeoutTimer&&(e.timeout<0?n=0:"number"==typeof e.timeout&&isFinite(e.timeout)&&(n=e.timeout)),e.req.on("response",e.onRequestResponse.bind(e)),e.req.on("error",e.onRequestError.bind(e)),e.req.on("drain",function(){e.emit("drain")}),e.req.on("socket",function(t){var r=t._connecting||t.connecting;if(e.timing&&(e.timings.socket=I()-e.startTimeNow,r)){var i=function(){e.timings.lookup=I()-e.startTimeNow},o=function(){e.timings.connect=I()-e.startTimeNow};t.once("lookup",i),t.once("connect",o),e.req.once("error",function(){t.removeListener("lookup",i),t.removeListener("connect",o)})}var s=function(){e.req.setTimeout(n,function(){if(e.req){e.abort();var t=new Error("ESOCKETTIMEDOUT");t.code="ESOCKETTIMEDOUT",t.connect=!1,e.emit("error",t)}})};if(void 0!==n)if(r){var a=function(){t.removeListener("connect",a),clearTimeout(e.timeoutTimer),e.timeoutTimer=null,s()};t.on("connect",a),e.req.on("error",function(e){t.removeListener("connect",a)}),e.timeoutTimer=setTimeout(function(){t.removeListener("connect",a),e.abort();var r=new Error("ETIMEDOUT");r.code="ETIMEDOUT",r.connect=!0,e.emit("error",r)},n)}else s();e.emit("socket",t)}),e.emit("request",e.req)}},Request.prototype.onRequestError=function(e){if(!this._aborted){if(this.req&&this.req._reusedSocket&&"ECONNRESET"===e.code&&this.agent.addRequestNoreuse)return this.agent={addRequest:this.agent.addRequestNoreuse.bind(this.agent)},this.start(),void this.req.end();this.timeout&&this.timeoutTimer&&(clearTimeout(this.timeoutTimer),this.timeoutTimer=null),this.emit("error",e)}},Request.prototype.onRequestResponse=function(e){var t=this;if(t.timing&&(t.timings.response=I()-t.startTimeNow),debug("onRequestResponse",t.uri.href,e.statusCode,e.headers),e.on("end",function(){t.timing&&(t.timings.end=I()-t.startTimeNow,e.timingStart=t.startTime,t.timings.socket||(t.timings.socket=0),t.timings.lookup||(t.timings.lookup=t.timings.socket),t.timings.connect||(t.timings.connect=t.timings.lookup),t.timings.response||(t.timings.response=t.timings.connect),debug("elapsed time",t.timings.end),t.elapsedTime+=Math.round(t.timings.end),e.elapsedTime=t.elapsedTime,e.timings=t.timings,e.timingPhases={wait:t.timings.socket,dns:t.timings.lookup-t.timings.socket,tcp:t.timings.connect-t.timings.lookup,firstByte:t.timings.response-t.timings.connect,download:t.timings.end-t.timings.response,total:t.timings.end}),debug("response end",t.uri.href,e.statusCode,e.headers)}),t._aborted)return debug("aborted",t.uri.href),void e.resume();if(t.response=e,e.request=t,e.toJSON=responseToJSON,t.httpModule!==i||!t.strictSSL||e.hasOwnProperty("socket")&&e.socket.authorized){t.originalHost=t.getHeader("host"),t.originalHostHeaderName||(t.originalHostHeaderName=t.hasHeader("host")),t.setHost&&t.removeHeader("host"),t.timeout&&t.timeoutTimer&&(clearTimeout(t.timeoutTimer),t.timeoutTimer=null);var r=t._jar&&t._jar.setCookie?t._jar:q,n=function(e){try{r.setCookie(e,t.uri.href,{ignoreError:!0})}catch(e){t.emit("error",e)}};if(e.caseless=h(e.headers),e.caseless.has("set-cookie")&&!t._disableCookies){var o=e.caseless.has("set-cookie");Array.isArray(e.headers[o])?e.headers[o].forEach(n):n(e.headers[o])}if(!t._redirect.onResponse(e)){e.on("close",function(){t._ended||t.response.emit("end")}),e.once("end",function(){t._ended=!0});var s,a;if(!t.gzip||(a=e.statusCode,"HEAD"===t.method||a>=100&&a<200||204===a||304===a))s=e;else{var u=e.headers["content-encoding"]||"identity";u=u.trim().toLowerCase();var l={flush:c.Z_SYNC_FLUSH,finishFlush:c.Z_SYNC_FLUSH};"gzip"===u?(s=c.createGunzip(l),e.pipe(s)):"deflate"===u?(s=c.createInflate(l),e.pipe(s)):("identity"!==u&&debug("ignoring unrecognized Content-Encoding "+u),s=e)}t.encoding&&(0!==t.dests.length?console.error("Ignoring encoding parameter as this stream is being piped to another stream which makes the encoding option invalid."):s.setEncoding(t.encoding)),t._paused&&s.pause(),t.responseContent=s,t.emit("response",e),t.dests.forEach(function(e){t.pipeDest(e)}),s.on("data",function(r){t.timing&&!t.responseStarted&&(t.responseStartTime=(new Date).getTime(),e.responseStartTime=t.responseStartTime),t._destdata=!0,t.emit("data",r)}),s.once("end",function(e){t.emit("end",e)}),s.on("error",function(e){t.emit("error",e)}),s.on("close",function(){t.emit("close")}),t.callback?t.readResponseBody(e):t.on("end",function(){t._aborted?debug("aborted",t.uri.href):t.emit("complete",e)}),debug("finish init function",t.uri.href)}}else{debug("strict ssl error",t.uri.href);var p=e.hasOwnProperty("socket")?e.socket.authorizationError:t.uri.href+" does not support SSL";t.emit("error",new Error("SSL Error: "+p))}},Request.prototype.readResponseBody=function(e){var t=this;debug("reading response's body");var r=[],n=0,i=[];t.on("data",function(e){N.isBuffer(e)?e.length&&(n+=e.length,r.push(e)):i.push(e)}),t.on("end",function(){if(debug("end event",t.uri.href),t._aborted)return debug("aborted",t.uri.href),r=[],void(n=0);if(n?(debug("has body",t.uri.href,n),e.body=N.concat(r,n),null!==t.encoding&&(e.body=e.body.toString(t.encoding)),r=[],n=0):i.length&&("utf8"===t.encoding&&i[0].length>0&&"\ufeff"===i[0][0]&&(i[0]=i[0].substring(1)),e.body=i.join("")),t._json)try{e.body=JSON.parse(e.body,t._jsonReviver)}catch(e){debug("invalid JSON received",t.uri.href)}debug("emitting complete",t.uri.href),void 0!==e.body||t._json||(e.body=null===t.encoding?N.alloc(0):""),t.emit("complete",e,e.body)})},Request.prototype.abort=function(){this._aborted=!0,this.req?this.req.abort():this.response&&this.response.destroy(),this.emit("abort")},Request.prototype.pipeDest=function(e){var t=this.response;if(e.headers&&!e.headersSent){if(t.caseless.has("content-type")){var r=t.caseless.has("content-type");e.setHeader?e.setHeader(r,t.headers[r]):e.headers[r]=t.headers[r]}if(t.caseless.has("content-length")){var n=t.caseless.has("content-length");e.setHeader?e.setHeader(n,t.headers[n]):e.headers[n]=t.headers[n]}}if(e.setHeader&&!e.headersSent){for(var i in t.headers)this.gzip&&"content-encoding"===i||e.setHeader(i,t.headers[i]);e.statusCode=t.statusCode}this.pipefilter&&this.pipefilter(t,e)},Request.prototype.qs=function(e,t){var r;for(var n in r=!t&&this.uri.query?this._qs.parse(this.uri.query):{},e)r[n]=e[n];var i=this._qs.stringify(r);return""===i?this:(this.uri=o.parse(this.uri.href.split("?")[0]+"?"+i),this.url=this.uri,this.path=this.uri.path,"unix"===this.uri.host&&this.enableUnixSocket(),this)},Request.prototype.form=function(e){var t=this;return e?(/^application\/x-www-form-urlencoded\b/.test(t.getHeader("content-type"))||t.setHeader("content-type","application/x-www-form-urlencoded"),t.body="string"==typeof e?t._qs.rfc3986(e.toString("utf8")):t._qs.stringify(e).toString("utf8"),t):(t._form=new m,t._form.on("error",function(e){e.message="form-data: "+e.message,t.emit("error",e),t.abort()}),t._form)},Request.prototype.multipart=function(e){return this._multipart.onRequest(e),this._multipart.chunked||(this.body=this._multipart.body),this},Request.prototype.json=function(e){return this.hasHeader("accept")||this.setHeader("accept","application/json"),"function"==typeof this.jsonReplacer&&(this._jsonReplacer=this.jsonReplacer),this._json=!0,"boolean"==typeof e?void 0!==this.body&&(/^application\/x-www-form-urlencoded\b/.test(this.getHeader("content-type"))?this.body=this._qs.rfc3986(this.body):this.body=A(this.body,this._jsonReplacer),this.hasHeader("content-type")||this.setHeader("content-type","application/json")):(this.body=A(e,this._jsonReplacer),this.hasHeader("content-type")||this.setHeader("content-type","application/json")),"function"==typeof this.jsonReviver&&(this._jsonReviver=this.jsonReviver),this},Request.prototype.getHeader=function(e,t){var r,n;return t||(t=this.headers),Object.keys(t).forEach(function(i){i.length===e.length&&(n=new RegExp(e,"i"),i.match(n)&&(r=t[i]))}),r},Request.prototype.enableUnixSocket=function(){var e=this.uri.path.split(":"),t=e[0],r=e[1];this.socketPath=t,this.uri.pathname=r,this.uri.path=r,this.uri.host=t,this.uri.hostname=t,this.uri.isUnix=!0},Request.prototype.auth=function(e,t,r,n){return this._auth.onRequest(e,t,r,n),this},Request.prototype.aws=function(e,t){if(!t)return this._aws=e,this;if(4===e.sign_version||"4"===e.sign_version){var r={host:this.uri.host,path:this.uri.path,method:this.method,headers:this.headers,body:this.body};e.service&&(r.service=e.service);var n=l.sign(r,{accessKeyId:e.key,secretAccessKey:e.secret,sessionToken:e.session});this.setHeader("authorization",n.headers.Authorization),this.setHeader("x-amz-date",n.headers["X-Amz-Date"]),n.headers["X-Amz-Security-Token"]&&this.setHeader("x-amz-security-token",n.headers["X-Amz-Security-Token"])}else{var i=new Date;this.setHeader("date",i.toUTCString());var o={key:e.key,secret:e.secret,verb:this.method.toUpperCase(),date:i,contentType:this.getHeader("content-type")||"",md5:this.getHeader("content-md5")||"",amazonHeaders:u.canonicalizeHeaders(this.headers)},s=this.uri.path;e.bucket&&s?o.resource="/"+e.bucket+s:e.bucket&&!s?o.resource="/"+e.bucket:!e.bucket&&s?o.resource=s:e.bucket||s||(o.resource="/"),o.resource=u.canonicalizeResource(o.resource),this.setHeader("authorization",u.authorization(o))}return this},Request.prototype.httpSignature=function(e){var t=this;return p.signRequest({getHeader:function(e){return t.getHeader(e,t.headers)},setHeader:function(e,r){t.setHeader(e,r)},method:t.method,path:t.path},e),debug("httpSignature authorization",t.getHeader("authorization")),t},Request.prototype.hawk=function(e){this.setHeader("Authorization",k.header(this.uri,this.method,e))},Request.prototype.oauth=function(e){return this._oauth.onRequest(e),this},Request.prototype.jar=function(e){var t;if(0===this._redirect.redirectsFollowed&&(this.originalCookieHeader=this.getHeader("cookie")),e){var r=e&&e.getCookieString?e:q,n=this.uri.href;r&&(t=r.getCookieString(n))}else t=!1,this._disableCookies=!0;return t&&t.length&&(this.originalCookieHeader?this.setHeader("cookie",this.originalCookieHeader+"; "+t):this.setHeader("cookie",t)),this._jar=e,this},Request.prototype.pipe=function(e,t){if(!this.response)return this.dests.push(e),a.Stream.prototype.pipe.call(this,e,t),e;if(this._destdata)this.emit("error",new Error("You cannot pipe after data has been emitted from the response."));else{if(!this._ended)return a.Stream.prototype.pipe.call(this,e,t),this.pipeDest(e),e;this.emit("error",new Error("You cannot pipe after the response has been ended."))}},Request.prototype.write=function(){if(!this._aborted)return this._started||this.start(),this.req?this.req.write.apply(this.req,arguments):void 0},Request.prototype.end=function(e){this._aborted||(e&&this.write(e),this._started||this.start(),this.req&&this.req.end())},Request.prototype.pause=function(){this.responseContent?this.responseContent.pause.apply(this.responseContent,arguments):this._paused=!0},Request.prototype.resume=function(){this.responseContent?this.responseContent.resume.apply(this.responseContent,arguments):this._paused=!1},Request.prototype.destroy=function(){this._ended?this.response&&this.response.destroy():this.end()},Request.defaultProxyHeaderWhiteList=O.defaultProxyHeaderWhiteList.slice(),Request.defaultProxyHeaderExclusiveList=O.defaultProxyHeaderExclusiveList.slice(),Request.prototype.toJSON=requestToJSON,e.exports=Request},function(e,t,r){
/*!
 *  Copyright 2010 LearnBoost <dev@learnboost.com>
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
var n=r(12),i=r(7).parse,o=["acl","location","logging","notification","partNumber","policy","requestPayment","torrent","uploadId","uploads","versionId","versioning","versions","website"];function authorization(e){return"AWS "+e.key+":"+sign(e)}function hmacSha1(e){return n.createHmac("sha1",e.secret).update(e.message).digest("base64")}function sign(e){return e.message=stringToSign(e),hmacSha1(e)}function stringToSign(e){var t=e.amazonHeaders||"";return t&&(t+="\n"),[e.verb,e.md5,e.contentType,e.date?e.date.toUTCString():"",t+e.resource].join("\n")}function queryStringToSign(e){return"GET\n\n\n"+e.date+"\n"+e.resource}e.exports=authorization,e.exports.authorization=authorization,e.exports.hmacSha1=hmacSha1,e.exports.sign=sign,e.exports.signQuery=function signQuery(e){return e.message=queryStringToSign(e),hmacSha1(e)},e.exports.stringToSign=stringToSign,e.exports.queryStringToSign=queryStringToSign,e.exports.canonicalizeHeaders=function canonicalizeHeaders(e){for(var t=[],r=Object.keys(e),n=0,i=r.length;n<i;++n){var o,s=e[o=r[n]];0===(o=o.toLowerCase()).indexOf("x-amz")&&t.push(o+":"+s)}return t.sort().join("\n")},e.exports.canonicalizeResource=function canonicalizeResource(e){var t=i(e,!0),r=t.pathname,n=[];return Object.keys(t.query).forEach(function(e){if(~o.indexOf(e)){var r=""==t.query[e]?"":"="+encodeURIComponent(t.query[e]);n.push(e+r)}}),r+(n.length?"?"+n.sort().join("&"):"")}},function(e,t,r){var n=t,i=r(7),o=r(52),s=r(12),a=r(663)(1e3);function hmac(e,t,r){return s.createHmac("sha256",e).update(t,"utf8").digest(r)}function hash(e,t){return s.createHash("sha256").update(e,"utf8").digest(t)}function encodeRfc3986(e){return e.replace(/[!'()*]/g,function(e){return"%"+e.charCodeAt(0).toString(16).toUpperCase()})}function RequestSigner(e,t){"string"==typeof e&&(e=i.parse(e));var r=e.headers=e.headers||{},n=this.matchHost(e.hostname||e.host||r.Host||r.host);this.request=e,this.credentials=t||this.defaultCredentials(),this.service=e.service||n[0]||"",this.region=e.region||n[1]||"us-east-1","email"===this.service&&(this.service="ses"),!e.method&&e.body&&(e.method="POST"),r.Host||r.host||(r.Host=e.hostname||e.host||this.createHost(),e.port&&(r.Host+=":"+e.port)),e.hostname||e.host||(e.hostname=r.Host||r.host),this.isCodeCommitGit="codecommit"===this.service&&"GIT"===e.method}RequestSigner.prototype.matchHost=function(e){var t=((e||"").match(/([^\.]+)\.(?:([^\.]*)\.)?amazonaws\.com(\.cn)?$/)||[]).slice(1,3);return"es"===t[1]&&(t=t.reverse()),t},RequestSigner.prototype.isSingleRegion=function(){return["s3","sdb"].indexOf(this.service)>=0&&"us-east-1"===this.region||["cloudfront","ls","route53","iam","importexport","sts"].indexOf(this.service)>=0},RequestSigner.prototype.createHost=function(){var e=this.isSingleRegion()?"":("s3"===this.service&&"us-east-1"!==this.region?"-":".")+this.region;return("ses"===this.service?"email":this.service)+e+".amazonaws.com"},RequestSigner.prototype.prepareRequest=function(){this.parsePath();var e,t=this.request,r=t.headers;t.signQuery?(this.parsedPath.query=e=this.parsedPath.query||{},this.credentials.sessionToken&&(e["X-Amz-Security-Token"]=this.credentials.sessionToken),"s3"!==this.service||e["X-Amz-Expires"]||(e["X-Amz-Expires"]=86400),e["X-Amz-Date"]?this.datetime=e["X-Amz-Date"]:e["X-Amz-Date"]=this.getDateTime(),e["X-Amz-Algorithm"]="AWS4-HMAC-SHA256",e["X-Amz-Credential"]=this.credentials.accessKeyId+"/"+this.credentialString(),e["X-Amz-SignedHeaders"]=this.signedHeaders()):(t.doNotModifyHeaders||this.isCodeCommitGit||(!t.body||r["Content-Type"]||r["content-type"]||(r["Content-Type"]="application/x-www-form-urlencoded; charset=utf-8"),!t.body||r["Content-Length"]||r["content-length"]||(r["Content-Length"]=Buffer.byteLength(t.body)),!this.credentials.sessionToken||r["X-Amz-Security-Token"]||r["x-amz-security-token"]||(r["X-Amz-Security-Token"]=this.credentials.sessionToken),"s3"!==this.service||r["X-Amz-Content-Sha256"]||r["x-amz-content-sha256"]||(r["X-Amz-Content-Sha256"]=hash(this.request.body||"","hex")),r["X-Amz-Date"]||r["x-amz-date"]?this.datetime=r["X-Amz-Date"]||r["x-amz-date"]:r["X-Amz-Date"]=this.getDateTime()),delete r.Authorization,delete r.authorization)},RequestSigner.prototype.sign=function(){return this.parsedPath||this.prepareRequest(),this.request.signQuery?this.parsedPath.query["X-Amz-Signature"]=this.signature():this.request.headers.Authorization=this.authHeader(),this.request.path=this.formatPath(),this.request},RequestSigner.prototype.getDateTime=function(){if(!this.datetime){var e=this.request.headers,t=new Date(e.Date||e.date||new Date);this.datetime=t.toISOString().replace(/[:\-]|\.\d{3}/g,""),this.isCodeCommitGit&&(this.datetime=this.datetime.slice(0,-1))}return this.datetime},RequestSigner.prototype.getDate=function(){return this.getDateTime().substr(0,8)},RequestSigner.prototype.authHeader=function(){return["AWS4-HMAC-SHA256 Credential="+this.credentials.accessKeyId+"/"+this.credentialString(),"SignedHeaders="+this.signedHeaders(),"Signature="+this.signature()].join(", ")},RequestSigner.prototype.signature=function(){var e,t,r,n=this.getDate(),i=[this.credentials.secretAccessKey,n,this.region,this.service].join(),o=a.get(i);return o||(e=hmac("AWS4"+this.credentials.secretAccessKey,n),t=hmac(e,this.region),r=hmac(t,this.service),o=hmac(r,"aws4_request"),a.set(i,o)),hmac(o,this.stringToSign(),"hex")},RequestSigner.prototype.stringToSign=function(){return["AWS4-HMAC-SHA256",this.getDateTime(),this.credentialString(),hash(this.canonicalString(),"hex")].join("\n")},RequestSigner.prototype.canonicalString=function(){this.parsedPath||this.prepareRequest();var e,t=this.parsedPath.path,r=this.parsedPath.query,n=this.request.headers,i="",s="s3"!==this.service,a="s3"===this.service||this.request.doNotEncodePath,c="s3"===this.service,u="s3"===this.service;return e="s3"===this.service&&this.request.signQuery?"UNSIGNED-PAYLOAD":this.isCodeCommitGit?"":n["X-Amz-Content-Sha256"]||n["x-amz-content-sha256"]||hash(this.request.body||"","hex"),r&&(i=encodeRfc3986(o.stringify(Object.keys(r).sort().reduce(function(e,t){return t?(e[t]=Array.isArray(r[t])?u?r[t][0]:r[t].slice().sort():r[t],e):e},{})))),"/"!==t&&(s&&(t=t.replace(/\/{2,}/g,"/")),"/"!==(t=t.split("/").reduce(function(e,t){return s&&".."===t?e.pop():s&&"."===t||(a&&(t=decodeURIComponent(t)),e.push(encodeRfc3986(encodeURIComponent(t)))),e},[]).join("/"))[0]&&(t="/"+t),c&&(t=t.replace(/%2F/g,"/"))),[this.request.method||"GET",t,i,this.canonicalHeaders()+"\n",this.signedHeaders(),e].join("\n")},RequestSigner.prototype.canonicalHeaders=function(){var e=this.request.headers;return Object.keys(e).sort(function(e,t){return e.toLowerCase()<t.toLowerCase()?-1:1}).map(function(t){return t.toLowerCase()+":"+function trimAll(e){return e.toString().trim().replace(/\s+/g," ")}(e[t])}).join("\n")},RequestSigner.prototype.signedHeaders=function(){return Object.keys(this.request.headers).map(function(e){return e.toLowerCase()}).sort().join(";")},RequestSigner.prototype.credentialString=function(){return[this.getDate(),this.region,this.service,"aws4_request"].join("/")},RequestSigner.prototype.defaultCredentials=function(){var e=process.env;return{accessKeyId:e.AWS_ACCESS_KEY_ID||e.AWS_ACCESS_KEY,secretAccessKey:e.AWS_SECRET_ACCESS_KEY||e.AWS_SECRET_KEY,sessionToken:e.AWS_SESSION_TOKEN}},RequestSigner.prototype.parsePath=function(){var e=this.request.path||"/",t=e.indexOf("?"),r=null;t>=0&&(r=o.parse(e.slice(t+1)),e=e.slice(0,t)),/[^0-9A-Za-z!'()*\-._~%\/]/.test(e)&&(e=e.split("/").map(function(e){return encodeURIComponent(decodeURIComponent(e))}).join("/")),this.parsedPath={path:e,query:r}},RequestSigner.prototype.formatPath=function(){var e=this.parsedPath.path,t=this.parsedPath.query;return t?(null!=t[""]&&delete t[""],e+"?"+encodeRfc3986(o.stringify(t))):e},n.RequestSigner=RequestSigner,n.sign=function(e,t){return new RequestSigner(e,t).sign()}},function(e,t){function LruCache(e){this.capacity=0|e,this.map=Object.create(null),this.list=new DoublyLinkedList}function DoublyLinkedList(){this.firstNode=null,this.lastNode=null}function DoublyLinkedNode(e,t){this.key=e,this.val=t,this.prev=null,this.next=null}e.exports=function(e){return new LruCache(e)},LruCache.prototype.get=function(e){var t=this.map[e];if(null!=t)return this.used(t),t.val},LruCache.prototype.set=function(e,t){var r=this.map[e];if(null!=r)r.val=t;else{if(this.capacity||this.prune(),!this.capacity)return!1;r=new DoublyLinkedNode(e,t),this.map[e]=r,this.capacity--}return this.used(r),!0},LruCache.prototype.used=function(e){this.list.moveToFront(e)},LruCache.prototype.prune=function(){var e=this.list.pop();null!=e&&(delete this.map[e.key],this.capacity++)},DoublyLinkedList.prototype.moveToFront=function(e){this.firstNode!=e&&(this.remove(e),null==this.firstNode?(this.firstNode=e,this.lastNode=e,e.prev=null,e.next=null):(e.prev=null,e.next=this.firstNode,e.next.prev=e,this.firstNode=e))},DoublyLinkedList.prototype.pop=function(){var e=this.lastNode;return null!=e&&this.remove(e),e},DoublyLinkedList.prototype.remove=function(e){this.firstNode==e?this.firstNode=e.next:null!=e.prev&&(e.prev.next=e.next),this.lastNode==e?this.lastNode=e.prev:null!=e.next&&(e.next.prev=e.prev)}},function(e,t,r){var n=r(665),i=r(673),o=r(677),s=r(153);e.exports={parse:n.parseRequest,parseRequest:n.parseRequest,sign:i.signRequest,signRequest:i.signRequest,createSigner:i.createSigner,isSigner:i.isSigner,sshKeyToPEM:s.sshKeyToPEM,sshKeyFingerprint:s.fingerprint,pemToRsaSSHKey:s.pemToRsaSSHKey,verify:o.verifySignature,verifySignature:o.verifySignature,verifyHMAC:o.verifyHMAC}},function(e,t,r){var n=r(13),i=r(1),o=r(153),s=(o.HASH_ALGOS,o.PK_ALGOS,o.HttpSignatureError),a=o.InvalidAlgorithmError,c=o.validateAlgorithm,u=0,l=1,p=0,d=1,h=2,f=3;function ExpiredRequestError(e){s.call(this,e,ExpiredRequestError)}function InvalidHeaderError(e){s.call(this,e,InvalidHeaderError)}function InvalidParamsError(e){s.call(this,e,InvalidParamsError)}function MissingHeaderError(e){s.call(this,e,MissingHeaderError)}function StrictParsingError(e){s.call(this,e,StrictParsingError)}i.inherits(ExpiredRequestError,s),i.inherits(InvalidHeaderError,s),i.inherits(InvalidParamsError,s),i.inherits(MissingHeaderError,s),i.inherits(StrictParsingError,s),e.exports={parseRequest:function parseRequest(e,t){n.object(e,"request"),n.object(e.headers,"request.headers"),void 0===t&&(t={}),void 0===t.headers&&(t.headers=[e.headers["x-date"]?"x-date":"date"]),n.object(t,"options"),n.arrayOfString(t.headers,"options.headers"),n.optionalFinite(t.clockSkew,"options.clockSkew");var r=t.authorizationHeaderName||"authorization";if(!e.headers[r])throw new MissingHeaderError("no "+r+" header present in the request");t.clockSkew=t.clockSkew||300;var i,o=0,s=u,m=p,g="",y="",v={scheme:"",params:{},signingString:""},b=e.headers[r];for(o=0;o<b.length;o++){var _=b.charAt(o);switch(Number(s)){case u:" "!==_?v.scheme+=_:s=l;break;case l:switch(Number(m)){case p:var w=_.charCodeAt(0);if(w>=65&&w<=90||w>=97&&w<=122)g+=_;else{if("="!==_)throw new InvalidHeaderError("bad param format");if(0===g.length)throw new InvalidHeaderError("bad param format");m=d}break;case d:if('"'!==_)throw new InvalidHeaderError("bad param format");y="",m=h;break;case h:'"'===_?(v.params[g]=y,m=f):y+=_;break;case f:if(","!==_)throw new InvalidHeaderError("bad param format");g="",m=p;break;default:throw new Error("Invalid substate")}break;default:throw new Error("Invalid substate")}}if(v.params.headers&&""!==v.params.headers?v.params.headers=v.params.headers.split(" "):e.headers["x-date"]?v.params.headers=["x-date"]:v.params.headers=["date"],!v.scheme||"Signature"!==v.scheme)throw new InvalidHeaderError('scheme was not "Signature"');if(!v.params.keyId)throw new InvalidHeaderError("keyId was not specified");if(!v.params.algorithm)throw new InvalidHeaderError("algorithm was not specified");if(!v.params.signature)throw new InvalidHeaderError("signature was not specified");v.params.algorithm=v.params.algorithm.toLowerCase();try{c(v.params.algorithm)}catch(e){throw e instanceof a?new InvalidParamsError(v.params.algorithm+" is not supported"):e}for(o=0;o<v.params.headers.length;o++){var E=v.params.headers[o].toLowerCase();if(v.params.headers[o]=E,"request-line"===E){if(t.strict)throw new StrictParsingError("request-line is not a valid header with strict parsing enabled.");v.signingString+=e.method+" "+e.url+" HTTP/"+e.httpVersion}else if("(request-target)"===E)v.signingString+="(request-target): "+e.method.toLowerCase()+" "+e.url;else{var S=e.headers[E];if(void 0===S)throw new MissingHeaderError(E+" was not in the request");v.signingString+=E+": "+S}o+1<v.params.headers.length&&(v.signingString+="\n")}if(e.headers.date||e.headers["x-date"]){i=e.headers["x-date"]?new Date(e.headers["x-date"]):new Date(e.headers.date);var C=new Date,x=Math.abs(C.getTime()-i.getTime());if(x>1e3*t.clockSkew)throw new ExpiredRequestError("clock skew of "+x/1e3+"s was greater than "+t.clockSkew+"s")}if(t.headers.forEach(function(e){if(v.params.headers.indexOf(e.toLowerCase())<0)throw new MissingHeaderError(e+" was not a signed header")}),t.algorithms&&-1===t.algorithms.indexOf(v.params.algorithm))throw new InvalidParamsError(v.params.algorithm+" is not a supported algorithm");return v.algorithm=v.params.algorithm.toUpperCase(),v.keyId=v.params.keyId,v}}},function(e,t,r){var n=r(12),i=r(117).BigInteger,o=(r(154).ECPointFp,r(19).Buffer);function unstupid(e,t){return e.length>=t?e:unstupid("0"+e,t)}t.ECCurves=r(667),t.ECKey=function(e,t,r){var s,a=e(),c=a.getN(),u=Math.floor(c.bitLength()/8);if(t)if(r){e=a.getCurve();this.P=e.decodePointHex(t.toString("hex"))}else{if(t.length!=u)return!1;s=new i(t.toString("hex"),16)}else{var l=c.subtract(i.ONE),p=new i(n.randomBytes(c.bitLength()));s=p.mod(l).add(i.ONE),this.P=a.getG().multiply(s)}this.P&&(this.PublicKey=o.from(a.getCurve().encodeCompressedPointHex(this.P),"hex")),s&&(this.PrivateKey=o.from(unstupid(s.toString(16),2*u),"hex"),this.deriveSharedSecret=function(e){if(!e||!e.P)return!1;var t=e.P.multiply(s);return o.from(unstupid(t.getX().toBigInteger().toString(16),2*u),"hex")})}},function(e,t,r){var n=r(117).BigInteger,i=r(154).ECCurveFp;function X9ECParameters(e,t,r,n){this.curve=e,this.g=t,this.n=r,this.h=n}function fromHex(e){return new n(e,16)}function secp128r1(){var e=fromHex("FFFFFFFDFFFFFFFFFFFFFFFFFFFFFFFF"),t=fromHex("FFFFFFFDFFFFFFFFFFFFFFFFFFFFFFFC"),r=fromHex("E87579C11079F43DD824993C2CEE5ED3"),o=fromHex("FFFFFFFE0000000075A30D1B9038A115"),s=n.ONE,a=new i(e,t,r),c=a.decodePointHex("04161FF7528B899B2D0C28607CA52C5B86CF5AC8395BAFEB13C02DA292DDED7A83");return new X9ECParameters(a,c,o,s)}function secp160k1(){var e=fromHex("FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFEFFFFAC73"),t=n.ZERO,r=fromHex("7"),o=fromHex("0100000000000000000001B8FA16DFAB9ACA16B6B3"),s=n.ONE,a=new i(e,t,r),c=a.decodePointHex("043B4C382CE37AA192A4019E763036F4F5DD4D7EBB938CF935318FDCED6BC28286531733C3F03C4FEE");return new X9ECParameters(a,c,o,s)}function secp160r1(){var e=fromHex("FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFF7FFFFFFF"),t=fromHex("FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFF7FFFFFFC"),r=fromHex("1C97BEFC54BD7A8B65ACF89F81D4D4ADC565FA45"),o=fromHex("0100000000000000000001F4C8F927AED3CA752257"),s=n.ONE,a=new i(e,t,r),c=a.decodePointHex("044A96B5688EF573284664698968C38BB913CBFC8223A628553168947D59DCC912042351377AC5FB32");return new X9ECParameters(a,c,o,s)}function secp192k1(){var e=fromHex("FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFEFFFFEE37"),t=n.ZERO,r=fromHex("3"),o=fromHex("FFFFFFFFFFFFFFFFFFFFFFFE26F2FC170F69466A74DEFD8D"),s=n.ONE,a=new i(e,t,r),c=a.decodePointHex("04DB4FF10EC057E9AE26B07D0280B7F4341DA5D1B1EAE06C7D9B2F2F6D9C5628A7844163D015BE86344082AA88D95E2F9D");return new X9ECParameters(a,c,o,s)}function secp192r1(){var e=fromHex("FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFEFFFFFFFFFFFFFFFF"),t=fromHex("FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFEFFFFFFFFFFFFFFFC"),r=fromHex("64210519E59C80E70FA7E9AB72243049FEB8DEECC146B9B1"),o=fromHex("FFFFFFFFFFFFFFFFFFFFFFFF99DEF836146BC9B1B4D22831"),s=n.ONE,a=new i(e,t,r),c=a.decodePointHex("04188DA80EB03090F67CBF20EB43A18800F4FF0AFD82FF101207192B95FFC8DA78631011ED6B24CDD573F977A11E794811");return new X9ECParameters(a,c,o,s)}function secp224r1(){var e=fromHex("FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFF000000000000000000000001"),t=fromHex("FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFEFFFFFFFFFFFFFFFFFFFFFFFE"),r=fromHex("B4050A850C04B3ABF54132565044B0B7D7BFD8BA270B39432355FFB4"),o=fromHex("FFFFFFFFFFFFFFFFFFFFFFFFFFFF16A2E0B8F03E13DD29455C5C2A3D"),s=n.ONE,a=new i(e,t,r),c=a.decodePointHex("04B70E0CBD6BB4BF7F321390B94A03C1D356C21122343280D6115C1D21BD376388B5F723FB4C22DFE6CD4375A05A07476444D5819985007E34");return new X9ECParameters(a,c,o,s)}function secp256r1(){var e=fromHex("FFFFFFFF00000001000000000000000000000000FFFFFFFFFFFFFFFFFFFFFFFF"),t=fromHex("FFFFFFFF00000001000000000000000000000000FFFFFFFFFFFFFFFFFFFFFFFC"),r=fromHex("5AC635D8AA3A93E7B3EBBD55769886BC651D06B0CC53B0F63BCE3C3E27D2604B"),o=fromHex("FFFFFFFF00000000FFFFFFFFFFFFFFFFBCE6FAADA7179E84F3B9CAC2FC632551"),s=n.ONE,a=new i(e,t,r),c=a.decodePointHex("046B17D1F2E12C4247F8BCE6E563A440F277037D812DEB33A0F4A13945D898C2964FE342E2FE1A7F9B8EE7EB4A7C0F9E162BCE33576B315ECECBB6406837BF51F5");return new X9ECParameters(a,c,o,s)}X9ECParameters.prototype.getCurve=function x9getCurve(){return this.curve},X9ECParameters.prototype.getG=function x9getG(){return this.g},X9ECParameters.prototype.getN=function x9getN(){return this.n},X9ECParameters.prototype.getH=function x9getH(){return this.h},e.exports={secp128r1:secp128r1,secp160k1:secp160k1,secp160r1:secp160r1,secp192k1:secp192k1,secp192r1:secp192r1,secp224r1:secp224r1,secp256r1:secp256r1}},function(e,t,r){var n=r(192),i=r(193),o=r(669),s=r(670);for(var a in e.exports={Reader:o,Writer:s},i)i.hasOwnProperty(a)&&(e.exports[a]=i[a]);for(var c in n)n.hasOwnProperty(c)&&(e.exports[c]=n[c])},function(e,t,r){var n=r(44),i=r(19).Buffer,o=r(193),s=r(192).newInvalidAsn1Error;function Reader(e){if(!e||!i.isBuffer(e))throw new TypeError("data must be a node Buffer");this._buf=e,this._size=e.length,this._len=0,this._offset=0}Object.defineProperty(Reader.prototype,"length",{enumerable:!0,get:function(){return this._len}}),Object.defineProperty(Reader.prototype,"offset",{enumerable:!0,get:function(){return this._offset}}),Object.defineProperty(Reader.prototype,"remain",{get:function(){return this._size-this._offset}}),Object.defineProperty(Reader.prototype,"buffer",{get:function(){return this._buf.slice(this._offset)}}),Reader.prototype.readByte=function(e){if(this._size-this._offset<1)return null;var t=255&this._buf[this._offset];return e||(this._offset+=1),t},Reader.prototype.peek=function(){return this.readByte(!0)},Reader.prototype.readLength=function(e){if(void 0===e&&(e=this._offset),e>=this._size)return null;var t=255&this._buf[e++];if(null===t)return null;if(128==(128&t)){if(0===(t&=127))throw s("Indefinite length not supported");if(t>4)throw s("encoding too long");if(this._size-e<t)return null;this._len=0;for(var r=0;r<t;r++)this._len=(this._len<<8)+(255&this._buf[e++])}else this._len=t;return e},Reader.prototype.readSequence=function(e){var t=this.peek();if(null===t)return null;if(void 0!==e&&e!==t)throw s("Expected 0x"+e.toString(16)+": got 0x"+t.toString(16));var r=this.readLength(this._offset+1);return null===r?null:(this._offset=r,t)},Reader.prototype.readInt=function(){return this._readTag(o.Integer)},Reader.prototype.readBoolean=function(){return 0!==this._readTag(o.Boolean)},Reader.prototype.readEnumeration=function(){return this._readTag(o.Enumeration)},Reader.prototype.readString=function(e,t){e||(e=o.OctetString);var r=this.peek();if(null===r)return null;if(r!==e)throw s("Expected 0x"+e.toString(16)+": got 0x"+r.toString(16));var n=this.readLength(this._offset+1);if(null===n)return null;if(this.length>this._size-n)return null;if(this._offset=n,0===this.length)return t?i.alloc(0):"";var a=this._buf.slice(this._offset,this._offset+this.length);return this._offset+=this.length,t?a:a.toString("utf8")},Reader.prototype.readOID=function(e){e||(e=o.OID);var t=this.readString(e,!0);if(null===t)return null;for(var r=[],n=0,i=0;i<t.length;i++){var s=255&t[i];n<<=7,n+=127&s,0==(128&s)&&(r.push(n),n=0)}return n=r.shift(),r.unshift(n%40),r.unshift(n/40>>0),r.join(".")},Reader.prototype._readTag=function(e){n.ok(void 0!==e);var t=this.peek();if(null===t)return null;if(t!==e)throw s("Expected 0x"+e.toString(16)+": got 0x"+t.toString(16));var r=this.readLength(this._offset+1);if(null===r)return null;if(this.length>4)throw s("Integer too long: "+this.length);if(this.length>this._size-r)return null;this._offset=r;for(var i=this._buf[this._offset],o=0,a=0;a<this.length;a++)o<<=8,o|=255&this._buf[this._offset++];return 128==(128&i)&&4!==a&&(o-=1<<8*a),o>>0},e.exports=Reader},function(e,t,r){var n=r(44),i=r(19).Buffer,o=r(193),s=r(192).newInvalidAsn1Error,a={size:1024,growthFactor:8};function Writer(e){e=function merge(e,t){return n.ok(e),n.equal(typeof e,"object"),n.ok(t),n.equal(typeof t,"object"),Object.getOwnPropertyNames(e).forEach(function(r){if(!t[r]){var n=Object.getOwnPropertyDescriptor(e,r);Object.defineProperty(t,r,n)}}),t}(a,e||{}),this._buf=i.alloc(e.size||1024),this._size=this._buf.length,this._offset=0,this._options=e,this._seq=[]}Object.defineProperty(Writer.prototype,"buffer",{get:function(){if(this._seq.length)throw s(this._seq.length+" unended sequence(s)");return this._buf.slice(0,this._offset)}}),Writer.prototype.writeByte=function(e){if("number"!=typeof e)throw new TypeError("argument must be a Number");this._ensure(1),this._buf[this._offset++]=e},Writer.prototype.writeInt=function(e,t){if("number"!=typeof e)throw new TypeError("argument must be a Number");"number"!=typeof t&&(t=o.Integer);for(var r=4;(0==(4286578688&e)||-8388608==(4286578688&e))&&r>1;)r--,e<<=8;if(r>4)throw s("BER ints cannot be > 0xffffffff");for(this._ensure(2+r),this._buf[this._offset++]=t,this._buf[this._offset++]=r;r-- >0;)this._buf[this._offset++]=(4278190080&e)>>>24,e<<=8},Writer.prototype.writeNull=function(){this.writeByte(o.Null),this.writeByte(0)},Writer.prototype.writeEnumeration=function(e,t){if("number"!=typeof e)throw new TypeError("argument must be a Number");return"number"!=typeof t&&(t=o.Enumeration),this.writeInt(e,t)},Writer.prototype.writeBoolean=function(e,t){if("boolean"!=typeof e)throw new TypeError("argument must be a Boolean");"number"!=typeof t&&(t=o.Boolean),this._ensure(3),this._buf[this._offset++]=t,this._buf[this._offset++]=1,this._buf[this._offset++]=e?255:0},Writer.prototype.writeString=function(e,t){if("string"!=typeof e)throw new TypeError("argument must be a string (was: "+typeof e+")");"number"!=typeof t&&(t=o.OctetString);var r=i.byteLength(e);this.writeByte(t),this.writeLength(r),r&&(this._ensure(r),this._buf.write(e,this._offset),this._offset+=r)},Writer.prototype.writeBuffer=function(e,t){if("number"!=typeof t)throw new TypeError("tag must be a number");if(!i.isBuffer(e))throw new TypeError("argument must be a buffer");this.writeByte(t),this.writeLength(e.length),this._ensure(e.length),e.copy(this._buf,this._offset,0,e.length),this._offset+=e.length},Writer.prototype.writeStringArray=function(e){if(!e instanceof Array)throw new TypeError("argument must be an Array[String]");var t=this;e.forEach(function(e){t.writeString(e)})},Writer.prototype.writeOID=function(e,t){if("string"!=typeof e)throw new TypeError("argument must be a string");if("number"!=typeof t&&(t=o.OID),!/^([0-9]+\.){3,}[0-9]+$/.test(e))throw new Error("argument is not a valid OID string");var r=e.split("."),n=[];n.push(40*parseInt(r[0],10)+parseInt(r[1],10)),r.slice(2).forEach(function(e){!function encodeOctet(e,t){t<128?e.push(t):t<16384?(e.push(t>>>7|128),e.push(127&t)):t<2097152?(e.push(t>>>14|128),e.push(255&(t>>>7|128)),e.push(127&t)):t<268435456?(e.push(t>>>21|128),e.push(255&(t>>>14|128)),e.push(255&(t>>>7|128)),e.push(127&t)):(e.push(255&(t>>>28|128)),e.push(255&(t>>>21|128)),e.push(255&(t>>>14|128)),e.push(255&(t>>>7|128)),e.push(127&t))}(n,parseInt(e,10))});var i=this;this._ensure(2+n.length),this.writeByte(t),this.writeLength(n.length),n.forEach(function(e){i.writeByte(e)})},Writer.prototype.writeLength=function(e){if("number"!=typeof e)throw new TypeError("argument must be a Number");if(this._ensure(4),e<=127)this._buf[this._offset++]=e;else if(e<=255)this._buf[this._offset++]=129,this._buf[this._offset++]=e;else if(e<=65535)this._buf[this._offset++]=130,this._buf[this._offset++]=e>>8,this._buf[this._offset++]=e;else{if(!(e<=16777215))throw s("Length too long (> 4 bytes)");this._buf[this._offset++]=131,this._buf[this._offset++]=e>>16,this._buf[this._offset++]=e>>8,this._buf[this._offset++]=e}},Writer.prototype.startSequence=function(e){"number"!=typeof e&&(e=o.Sequence|o.Constructor),this.writeByte(e),this._seq.push(this._offset),this._ensure(3),this._offset+=3},Writer.prototype.endSequence=function(){var e=this._seq.pop(),t=e+3,r=this._offset-t;if(r<=127)this._shift(t,r,-2),this._buf[e]=r;else if(r<=255)this._shift(t,r,-1),this._buf[e]=129,this._buf[e+1]=r;else if(r<=65535)this._buf[e]=130,this._buf[e+1]=r>>8,this._buf[e+2]=r;else{if(!(r<=16777215))throw s("Sequence too long");this._shift(t,r,1),this._buf[e]=131,this._buf[e+1]=r>>16,this._buf[e+2]=r>>8,this._buf[e+3]=r}},Writer.prototype._shift=function(e,t,r){n.ok(void 0!==e),n.ok(void 0!==t),n.ok(r),this._buf.copy(this._buf,e+r,e,e+t),this._offset+=r},Writer.prototype._ensure=function(e){if(n.ok(e),this._size-this._offset<e){var t=this._size*this._options.growthFactor;t-this._offset<e&&(t+=e);var r=i.alloc(t);this._buf.copy(r,0,0,this._offset),this._buf=r,this._size=t}},e.exports=Writer},function(e,t,r){e.exports={read:function read(e,t){s.isBuffer(e)&&(e=e.toString("ascii"));var r=e.trim().split(/[ \t\n]+/g);if(r.length<2||r.length>3)throw new Error("Not a valid SSH certificate line");var n=r[0],i=r[1];return fromBuffer(i=s.from(i,"base64"),n)},verify:function verify(e,t){return!1},sign:function sign(e,t){void 0===e.signatures.openssh&&(e.signatures.openssh={});try{var r=toBuffer(e,!0)}catch(t){return delete e.signatures.openssh,!1}var n=e.signatures.openssh,i=void 0;"rsa"!==t.type&&"dsa"!==t.type||(i="sha1");var o=t.createSign(i);return o.write(r),n.signature=o.sign(),!0},signAsync:function signAsync(e,t,r){void 0===e.signatures.openssh&&(e.signatures.openssh={});try{var n=toBuffer(e,!0)}catch(t){return delete e.signatures.openssh,void r(t)}var i=e.signatures.openssh;t(n,function(e,t){if(e)r(e);else{try{t.toBuffer("ssh")}catch(e){return void r(e)}i.signature=t,r()}})},write:function write(e,t){void 0===t&&(t={});var r=toBuffer(e),n=getCertType(e.subjectKey)+" "+r.toString("base64");t.comment&&(n=n+" "+t.comment);return n},fromBuffer:fromBuffer,toBuffer:toBuffer};var n=r(13),i=r(119),o=r(12),s=r(19).Buffer,a=r(32),c=r(30),u=(r(33),r(120)),l=r(85),p=r(65),d=r(26),h=r(115);var f={user:1,host:2};Object.keys(f).forEach(function(e){f[f[e]]=e});var m=/^ecdsa-sha2-([^@-]+)-cert-v01@openssh.com$/;function fromBuffer(e,t,r){var o=new i({buffer:e}),s=o.readString();if(void 0!==t&&s!==t)throw new Error("SSH certificate algorithm mismatch");void 0===t&&(t=s);var g={signatures:{}};g.signatures.openssh={},g.signatures.openssh.nonce=o.readBuffer();var y={},v=y.parts=[];y.type=function getAlg(e){if("ssh-rsa-cert-v01@openssh.com"===e)return"rsa";if("ssh-dss-cert-v01@openssh.com"===e)return"dsa";if(e.match(m))return"ecdsa";if("ssh-ed25519-cert-v01@openssh.com"===e)return"ed25519";throw new Error("Unsupported cert type "+e)}(t);for(var b=a.info[y.type].parts.length;v.length<b;)v.push(o.readPart());n.ok(v.length>=1,"key must have at least one part");var _=a.info[y.type];if("ecdsa"===y.type){var w=m.exec(t);n.ok(null!==w),n.strictEqual(w[1],v[0].data.toString())}for(var E=0;E<_.parts.length;++E)if(v[E].name=_.parts[E],"curve"!==v[E].name&&!1!==_.normalize){var S=v[E];S.data=d.mpNormalize(S.data)}g.subjectKey=new c(y),g.serial=o.readInt64();var C=f[o.readInt()];n.string(C,"valid cert type"),g.signatures.openssh.keyId=o.readString();for(var x=[],k=o.readBuffer(),R=new i({buffer:k});!R.atEnd();)x.push(R.readString());0===x.length&&(x=["*"]),g.subjects=x.map(function(e){if("user"===C)return u.forUser(e);if("host"===C)return u.forHost(e);throw new Error("Unknown identity type "+C)}),g.validFrom=int64ToDate(o.readInt64()),g.validUntil=int64ToDate(o.readInt64());for(var T,O=[],I=new i({buffer:o.readBuffer()});!I.atEnd();)(T={critical:!0}).name=I.readString(),T.data=I.readBuffer(),O.push(T);for(I=new i({buffer:o.readBuffer()});!I.atEnd();)(T={critical:!1}).name=I.readString(),T.data=I.readBuffer(),O.push(T);g.signatures.openssh.exts=O,o.readBuffer();var N=o.readBuffer();g.issuerKey=l.read(N),g.issuer=u.forHost("**");var A=o.readBuffer();return g.signatures.openssh.signature=p.parse(A,g.issuerKey.type,"ssh"),void 0!==r&&(r.remainder=o.remainder(),r.consumed=o._offset),new h(g)}function int64ToDate(e){var t=4294967296*e.readUInt32BE(0);t+=e.readUInt32BE(4);var r=new Date;return r.setTime(1e3*t),r.sourceInt64=e,r}function dateToInt64(e){if(void 0!==e.sourceInt64)return e.sourceInt64;var t=Math.round(e.getTime()/1e3),r=Math.floor(t/4294967296),n=Math.floor(t%4294967296),i=s.alloc(8);return i.writeUInt32BE(r,0),i.writeUInt32BE(n,4),i}function toBuffer(e,t){n.object(e.signatures.openssh,"signature for openssh format");var r=e.signatures.openssh;void 0===r.nonce&&(r.nonce=o.randomBytes(16));var c=new i({});c.writeString(getCertType(e.subjectKey)),c.writeBuffer(r.nonce);var u=e.subjectKey;a.info[u.type].parts.forEach(function(e){c.writePart(u.part[e])}),c.writeInt64(e.serial);var p=e.subjects[0].type;n.notStrictEqual(p,"unknown"),e.subjects.forEach(function(e){n.strictEqual(e.type,p)}),p=f[p],c.writeInt(p),void 0===r.keyId&&(r.keyId=e.subjects[0].type+"_"+(e.subjects[0].uid||e.subjects[0].hostname)),c.writeString(r.keyId);var d=new i({});e.subjects.forEach(function(e){p===f.host?d.writeString(e.hostname):p===f.user&&d.writeString(e.uid)}),c.writeBuffer(d.toBuffer()),c.writeInt64(dateToInt64(e.validFrom)),c.writeInt64(dateToInt64(e.validUntil));var h=r.exts;void 0===h&&(h=[]);var m=new i({});return h.forEach(function(e){!0===e.critical&&(m.writeString(e.name),m.writeBuffer(e.data))}),c.writeBuffer(m.toBuffer()),m=new i({}),h.forEach(function(e){!0!==e.critical&&(m.writeString(e.name),m.writeBuffer(e.data))}),c.writeBuffer(m.toBuffer()),c.writeBuffer(s.alloc(0)),d=l.write(e.issuerKey),c.writeBuffer(d),t||c.writeBuffer(r.signature.toBuffer("ssh")),c.toBuffer()}function getCertType(e){if("rsa"===e.type)return"ssh-rsa-cert-v01@openssh.com";if("dsa"===e.type)return"ssh-dss-cert-v01@openssh.com";if("ecdsa"===e.type)return"ecdsa-sha2-"+e.curve+"-cert-v01@openssh.com";if("ed25519"===e.type)return"ssh-ed25519-cert-v01@openssh.com";throw new Error("Unsupported key type "+e.type)}},function(e,t,r){var n=r(308);e.exports={read:function read(e,t){"string"!=typeof e&&(i.buffer(e,"buf"),e=e.toString("ascii"));var r=e.trim().split(/[\r\n]+/g),s=r[0].match(/[-]+[ ]*BEGIN CERTIFICATE[ ]*[-]+/);i.ok(s,"invalid PEM header");var a=r[r.length-1].match(/[-]+[ ]*END CERTIFICATE[ ]*[-]+/);i.ok(a,"invalid PEM footer");var c={};for(;r=r.slice(1),s=r[0].match(/^([A-Za-z0-9-]+): (.+)$/);)c[s[1].toLowerCase()]=s[2];return r=r.slice(0,-1).join(""),e=o.from(r,"base64"),n.read(e,t)},verify:n.verify,sign:n.sign,write:function write(e,t){var r=n.write(e,t),i=r.toString("base64"),s=i.length+i.length/64+18+16+2*"CERTIFICATE".length+10,a=o.alloc(s),c=0;c+=a.write("-----BEGIN CERTIFICATE-----\n",c);for(var u=0;u<i.length;){var l=u+64;l>i.length&&(l=i.length),c+=a.write(i.slice(u,l),c),a[c++]=10,u=l}return c+=a.write("-----END CERTIFICATE-----\n",c),a.slice(0,c)}};var i=r(13),o=(r(66),r(19).Buffer);r(32),r(26),r(30),r(33),r(77),r(120),r(65),r(115)},function(e,t,r){var n=r(13),i=r(12),o=(r(23),r(1)),s=r(190),a=r(674),c=r(153),u=r(1).format,l=c.HASH_ALGOS,p=c.PK_ALGOS,d=c.InvalidAlgorithmError,h=c.HttpSignatureError,f=c.validateAlgorithm,m='Signature keyId="%s",algorithm="%s",headers="%s",signature="%s"';function MissingHeaderError(e){h.call(this,e,MissingHeaderError)}function StrictParsingError(e){h.call(this,e,StrictParsingError)}function RequestSigner(e){n.object(e,"options");var t=[];if(void 0!==e.algorithm&&(n.string(e.algorithm,"options.algorithm"),t=f(e.algorithm)),this.rs_alg=t,void 0!==e.sign)n.func(e.sign,"options.sign"),this.rs_signFunc=e.sign;else if("hmac"===t[0]&&void 0!==e.key){if(n.string(e.keyId,"options.keyId"),this.rs_keyId=e.keyId,"string"!=typeof e.key&&!Buffer.isBuffer(e.key))throw new TypeError("options.key for HMAC must be a string or Buffer");this.rs_signer=i.createHmac(t[1].toUpperCase(),e.key),this.rs_signer.sign=function(){var e=this.digest("base64");return{hashAlgorithm:t[1],toString:function(){return e}}}}else{if(void 0===e.key)throw new TypeError("options.sign (func) or options.key is required");var r=e.key;if(("string"==typeof r||Buffer.isBuffer(r))&&(r=s.parsePrivateKey(r)),n.ok(s.PrivateKey.isPrivateKey(r,[1,2]),"options.key must be a sshpk.PrivateKey"),this.rs_key=r,n.string(e.keyId,"options.keyId"),this.rs_keyId=e.keyId,!p[r.type])throw new d(r.type.toUpperCase()+" type keys are not supported");if(void 0!==t[0]&&r.type!==t[0])throw new d("options.key must be a "+t[0].toUpperCase()+" key, was given a "+r.type.toUpperCase()+" key instead");this.rs_signer=r.createSign(t[1])}this.rs_headers=[],this.rs_lines=[]}o.inherits(MissingHeaderError,h),o.inherits(StrictParsingError,h),RequestSigner.prototype.writeHeader=function(e,t){if(n.string(e,"header"),e=e.toLowerCase(),n.string(t,"value"),this.rs_headers.push(e),this.rs_signFunc)this.rs_lines.push(e+": "+t);else{var r=e+": "+t;this.rs_headers.length>0&&(r="\n"+r),this.rs_signer.update(r)}return t},RequestSigner.prototype.writeDateHeader=function(){return this.writeHeader("date",a.rfc1123(new Date))},RequestSigner.prototype.writeTarget=function(e,t){n.string(e,"method"),n.string(t,"path"),e=e.toLowerCase(),this.writeHeader("(request-target)",e+" "+t)},RequestSigner.prototype.sign=function(e){if(n.func(e,"callback"),this.rs_headers.length<1)throw new Error("At least one header must be signed");var t,r;if(this.rs_signFunc){var i=this.rs_lines.join("\n"),o=this;this.rs_signFunc(i,function(i,s){if(i)e(i);else{try{n.object(s,"signature"),n.string(s.keyId,"signature.keyId"),n.string(s.algorithm,"signature.algorithm"),n.string(s.signature,"signature.signature"),t=f(s.algorithm),r=u(m,s.keyId,s.algorithm,o.rs_headers.join(" "),s.signature)}catch(t){return void e(t)}e(null,r)}})}else{try{var s=this.rs_signer.sign()}catch(t){return void e(t)}t=(this.rs_alg[0]||this.rs_key.type)+"-"+s.hashAlgorithm;var a=s.toString();r=u(m,this.rs_keyId,t,this.rs_headers.join(" "),a),e(null,r)}},e.exports={isSigner:function(e){return"object"==typeof e&&e instanceof RequestSigner},createSigner:function createSigner(e){return new RequestSigner(e)},signRequest:function signRequest(e,t){n.object(e,"request"),n.object(t,"options"),n.optionalString(t.algorithm,"options.algorithm"),n.string(t.keyId,"options.keyId"),n.optionalArrayOfString(t.headers,"options.headers"),n.optionalString(t.httpVersion,"options.httpVersion"),e.getHeader("Date")||e.setHeader("Date",a.rfc1123(new Date)),t.headers||(t.headers=["date"]),t.httpVersion||(t.httpVersion="1.1");var r,o=[];t.algorithm&&(t.algorithm=t.algorithm.toLowerCase(),o=f(t.algorithm));var c,h="";for(r=0;r<t.headers.length;r++){if("string"!=typeof t.headers[r])throw new TypeError("options.headers must be an array of Strings");var g=t.headers[r].toLowerCase();if("request-line"===g){if(t.strict)throw new StrictParsingError("request-line is not a valid header with strict parsing enabled.");h+=e.method+" "+e.path+" HTTP/"+t.httpVersion}else if("(request-target)"===g)h+="(request-target): "+e.method.toLowerCase()+" "+e.path;else{var y=e.getHeader(g);if(void 0===y||""===y)throw new MissingHeaderError(g+" was not in the request");h+=g+": "+y}r+1<t.headers.length&&(h+="\n")}if(e.hasOwnProperty("_stringToSign")&&(e._stringToSign=h),"hmac"===o[0]){if("string"!=typeof t.key&&!Buffer.isBuffer(t.key))throw new TypeError("options.key must be a string or Buffer");var v=i.createHmac(o[1].toUpperCase(),t.key);v.update(h),c=v.digest("base64")}else{var b=t.key;if(("string"==typeof b||Buffer.isBuffer(b))&&(b=s.parsePrivateKey(t.key)),n.ok(s.PrivateKey.isPrivateKey(b,[1,2]),"options.key must be a sshpk.PrivateKey"),!p[b.type])throw new d(b.type.toUpperCase()+" type keys are not supported");if(void 0!==o[0]&&b.type!==o[0])throw new d("options.key must be a "+o[0].toUpperCase()+" key, was given a "+b.type.toUpperCase()+" key instead");var _=b.createSign(o[1]);_.update(h);var w=_.sign();if(!l[w.hashAlgorithm])throw new d(w.hashAlgorithm.toUpperCase()+" is not a supported hash algorithm");t.algorithm=b.type+"-"+w.hashAlgorithm,c=w.toString(),n.notStrictEqual(c,"","empty signature produced")}var E=t.authorizationHeaderName||"Authorization";return e.setHeader(E,u(m,t.keyId,t.algorithm,t.headers.join(" "),c)),!0}}},function(e,t,r){var n=r(13),i=(r(1),r(309)),o=r(675),s=r(676);function hasKey(e,t){return n.equal(typeof t,"string"),Object.prototype.hasOwnProperty.call(e,t)}t.deepCopy=function deepCopy(e){var t,r;var n="__deepCopy";if(e&&e[n])throw new Error("attempted deep copy of cyclic object");if(e&&e.constructor==Object){for(r in t={},e[n]=!0,e)r!=n&&(t[r]=deepCopy(e[r]));return delete e[n],t}if(e&&e.constructor==Array){for(t=[],e[n]=!0,r=0;r<e.length;r++)t.push(deepCopy(e[r]));return delete e[n],t}return e},t.deepEqual=function deepEqual(e,t){if(typeof e!=typeof t)return!1;if(null===e||null===t||"object"!=typeof e)return e===t;if(e.constructor!=t.constructor)return!1;var r;for(r in e){if(!t.hasOwnProperty(r))return!1;if(!deepEqual(e[r],t[r]))return!1}for(r in t)if(!e.hasOwnProperty(r))return!1;return!0},t.isEmpty=function isEmpty(e){var t;for(t in e)return!1;return!0},t.hasKey=hasKey,t.forEachKey=function forEachKey(e,t){for(var r in e)hasKey(e,r)&&t(r,e[r])},t.pluck=function pluck(e,t){return n.equal(typeof t,"string"),function pluckv(e,t){if(null!==e&&"object"==typeof e){if(e.hasOwnProperty(t))return e[t];var r=t.indexOf(".");if(-1!=r){var n=t.substr(0,r);if(e.hasOwnProperty(n))return pluckv(e[n],t.substr(r+1))}}}(e,t)},t.flattenObject=function flattenObject(e,t){if(0===t)return[e];n.ok(null!==e);n.equal(typeof e,"object");n.equal(typeof t,"number");n.ok(t>=0);var r=[];var i;for(i in e)flattenObject(e[i],t-1).forEach(function(e){r.push([i].concat(e))});return r},t.flattenIter=function flattenIter(e,t,r){!function doFlattenIter(e,t,r,i){var o;var s;if(0===t)return(o=r.slice(0)).push(e),void i(o);n.ok(null!==e);n.equal(typeof e,"object");n.equal(typeof t,"number");n.ok(t>=0);for(s in e)(o=r.slice(0)).push(s),doFlattenIter(e[s],t-1,o,i)}(e,t,[],r)},t.validateJsonObject=validateJsonObjectJS,t.validateJsonObjectJS=validateJsonObjectJS,t.randElt=function randElt(e){return n.ok(Array.isArray(e)&&e.length>0,"randElt argument must be a non-empty array"),e[Math.floor(Math.random()*e.length)]},t.extraProperties=function extraProperties(e,t){n.ok("object"==typeof e&&null!==e,"obj argument must be a non-null object"),n.ok(Array.isArray(t),"allowed argument must be an array of strings");for(var r=0;r<t.length;r++)n.ok("string"==typeof t[r],"allowed argument must be an array of strings");return Object.keys(e).filter(function(e){return-1===t.indexOf(e)})},t.mergeObjects=mergeObjects,t.startsWith=function startsWith(e,t){return e.substr(0,t.length)==t},t.endsWith=function endsWith(e,t){return e.substr(e.length-t.length,t.length)==t},t.parseInteger=function parseInteger(e,t){n.string(e,"str"),n.optionalObject(t,"options");var r,i=!1,o=p;t&&(i=hasKey(t,"base"),o=mergeObjects(o,t),n.number(o.base,"options.base"),n.ok(o.base>=2,"options.base >= 2"),n.ok(o.base<=36,"options.base <= 36"),n.bool(o.allowSign,"options.allowSign"),n.bool(o.allowPrefix,"options.allowPrefix"),n.bool(o.allowTrailing,"options.allowTrailing"),n.bool(o.allowImprecise,"options.allowImprecise"),n.bool(o.trimWhitespace,"options.trimWhitespace"),n.bool(o.leadingZeroIsOctal,"options.leadingZeroIsOctal"),o.leadingZeroIsOctal&&n.ok(!i,'"base" and "leadingZeroIsOctal" are mutually exclusive'));var s,a=-1,c=o.base,d=1,h=0,f=0,b=e.length;if(o.trimWhitespace)for(;f<b&&isSpace(e.charCodeAt(f));)++f;o.allowSign&&("-"===e[f]?(f+=1,d=-1):"+"===e[f]&&(f+=1));"0"===e[f]&&(o.allowPrefix&&(-1===(a=function prefixToBase(e){return e===w||e===m?2:e===E||e===g?8:e===S||e===y?10:e===C||e===v?16:-1}(e.charCodeAt(f+1)))||i&&a!==c||(c=a,f+=2)),-1===a&&o.leadingZeroIsOctal&&(c=8));for(s=f;f<b&&(-1!==(r=translateDigit(e.charCodeAt(f)))&&r<c);++f)h*=c,h+=r;if(s===f)return new Error("invalid number: "+JSON.stringify(e));if(o.trimWhitespace)for(;f<b&&isSpace(e.charCodeAt(f));)++f;if(f<b&&!o.allowTrailing)return new Error("trailing characters after number: "+JSON.stringify(e.slice(f)));if(0===h)return 0;var _=h*d;if(!o.allowImprecise&&(h>u||_<l))return new Error("number is outside of the supported range: "+JSON.stringify(e.slice(s,f)));return _},t.iso8601=function iso8601(e){"number"==typeof e&&(e=new Date(e));return n.ok(e.constructor===Date),i.sprintf("%4d-%02d-%02dT%02d:%02d:%02d.%03dZ",e.getUTCFullYear(),e.getUTCMonth()+1,e.getUTCDate(),e.getUTCHours(),e.getUTCMinutes(),e.getUTCSeconds(),e.getUTCMilliseconds())},t.rfc1123=function rfc1123(e){return i.sprintf("%s, %02d %s %04d %02d:%02d:%02d GMT",c[e.getUTCDay()],e.getUTCDate(),a[e.getUTCMonth()],e.getUTCFullYear(),e.getUTCHours(),e.getUTCMinutes(),e.getUTCSeconds())},t.parseDateTime=function parseDateTime(e){var t=+e;return isNaN(t)?new Date(e):new Date(t)},t.hrtimediff=hrtimeDiff,t.hrtimeDiff=hrtimeDiff,t.hrtimeAccum=hrtimeAccum,t.hrtimeAdd=function hrtimeAdd(e,t){return assertHrtime(e),hrtimeAccum([e[0],e[1]],t)},t.hrtimeNanosec=function hrtimeNanosec(e){return assertHrtime(e),Math.floor(1e9*e[0]+e[1])},t.hrtimeMicrosec=function hrtimeMicrosec(e){return assertHrtime(e),Math.floor(1e6*e[0]+e[1]/1e3)},t.hrtimeMillisec=function hrtimeMillisec(e){return assertHrtime(e),Math.floor(1e3*e[0]+e[1]/1e6)};var a=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],c=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"];var u=Number.MAX_SAFE_INTEGER||9007199254740991,l=Number.MIN_SAFE_INTEGER||-9007199254740991,p={base:10,allowSign:!0,allowPrefix:!1,allowTrailing:!1,allowImprecise:!1,trimWhitespace:!1,leadingZeroIsOctal:!1},d=48,h=57,f=65,m=66,g=79,y=84,v=88,b=90,_=97,w=98,E=111,S=116,C=120,x=122,k=48,R=55,T=87;function translateDigit(e){return e>=d&&e<=h?e-k:e>=f&&e<=b?e-R:e>=_&&e<=x?e-T:-1}function isSpace(e){return 32===e||e>=9&&e<=13||160===e||5760===e||6158===e||e>=8192&&e<=8202||8232===e||8233===e||8239===e||8287===e||12288===e||65279===e}function validateJsonObjectJS(e,t){var r=s.validate(t,e);if(0===r.errors.length)return null;var n,i,a=r.errors[0],c=a.property,u=a.message.toLowerCase();-1!=(n=u.indexOf("the property "))&&-1!=(i=u.indexOf(" is not defined in the schema and the schema does not allow additional properties"))&&(n+="the property ".length,c=""===c?u.substr(n,i-n):c+"."+u.substr(n,i-n),u="unsupported property");var l=new o.VError('property "%s": %s',c,u);return l.jsv_details=a,l}function assertHrtime(e){n.ok(e[0]>=0&&e[1]>=0,"negative numbers not allowed in hrtimes"),n.ok(e[1]<1e9,"nanoseconds column overflow")}function hrtimeDiff(e,t){assertHrtime(e),assertHrtime(t),n.ok(e[0]>t[0]||e[0]==t[0]&&e[1]>=t[1],"negative differences not allowed");var r=[e[0]-t[0],0];return e[1]>=t[1]?r[1]=e[1]-t[1]:(r[0]--,r[1]=1e9-(t[1]-e[1])),r}function hrtimeAccum(e,t){return assertHrtime(e),assertHrtime(t),e[1]+=t[1],e[1]>=1e9&&(e[0]++,e[1]-=1e9),e[0]+=t[0],e}function mergeObjects(e,t,r){var n,i;if(n={},r)for(i in r)n[i]=r[i];if(e)for(i in e)n[i]=e[i];if(t)for(i in t)n[i]=t[i];return n}},function(e,t,r){var n=r(13),i=r(1),o=r(309),s=r(90).isError,a=o.sprintf;function parseConstructorArguments(e){var t,r,i,o;if(n.object(e,"args"),n.bool(e.strict,"args.strict"),n.array(e.argv,"args.argv"),0===(t=e.argv).length)r={},i=[];else if(s(t[0]))r={cause:t[0]},i=t.slice(1);else if("object"==typeof t[0]){for(o in r={},t[0])r[o]=t[0][o];i=t.slice(1)}else n.string(t[0],"first argument to VError, SError, or WError constructor must be a string, object, or Error"),r={},i=t;return n.object(r),r.strict||e.strict||(i=i.map(function(e){return null===e?"null":void 0===e?"undefined":e})),{options:r,shortmessage:0===i.length?"":a.apply(null,i)}}function VError(){var e,t,r,i,o,a,c;if(e=Array.prototype.slice.call(arguments,0),!(this instanceof VError))return t=Object.create(VError.prototype),VError.apply(t,arguments),t;if((r=parseConstructorArguments({argv:e,strict:!1})).options.name&&(n.string(r.options.name,'error\'s "name" must be a string'),this.name=r.options.name),this.jse_shortmsg=r.shortmessage,a=r.shortmessage,(i=r.options.cause)&&(n.ok(s(i),"cause is not an Error"),this.jse_cause=i,r.options.skipCauseMessage||(a+=": "+i.message)),this.jse_info={},r.options.info)for(c in r.options.info)this.jse_info[c]=r.options.info[c];return this.message=a,Error.call(this,a),Error.captureStackTrace&&(o=r.options.constructorOpt||this.constructor,Error.captureStackTrace(this,o)),this}function SError(){var e,t,r,n;return e=Array.prototype.slice.call(arguments,0),this instanceof SError?(n=(r=parseConstructorArguments({argv:e,strict:!0})).options,VError.call(this,n,"%s",r.shortmessage),this):(t=Object.create(SError.prototype),SError.apply(t,arguments),t)}function MultiError(e){n.array(e,"list of errors"),n.ok(e.length>0,"must be at least one error"),this.ase_errors=e,VError.call(this,{cause:e[0]},"first of %d error%s",e.length,1==e.length?"":"s")}function WError(){var e,t,r,n;return e=Array.prototype.slice.call(arguments,0),this instanceof WError?((n=(r=parseConstructorArguments({argv:e,strict:!1})).options).skipCauseMessage=!0,VError.call(this,n,"%s",r.shortmessage),this):(t=Object.create(WError.prototype),WError.apply(t,e),t)}e.exports=VError,VError.VError=VError,VError.SError=SError,VError.WError=WError,VError.MultiError=MultiError,i.inherits(VError,Error),VError.prototype.name="VError",VError.prototype.toString=function ve_toString(){var e=this.hasOwnProperty("name")&&this.name||this.constructor.name||this.constructor.prototype.name;return this.message&&(e+=": "+this.message),e},VError.prototype.cause=function ve_cause(){var e=VError.cause(this);return null===e?void 0:e},VError.cause=function(e){return n.ok(s(e),"err must be an Error"),s(e.jse_cause)?e.jse_cause:null},VError.info=function(e){var t,r,i;if(n.ok(s(e),"err must be an Error"),t=null!==(r=VError.cause(e))?VError.info(r):{},"object"==typeof e.jse_info&&null!==e.jse_info)for(i in e.jse_info)t[i]=e.jse_info[i];return t},VError.findCauseByName=function(e,t){var r;for(n.ok(s(e),"err must be an Error"),n.string(t,"name"),n.ok(t.length>0,"name cannot be empty"),r=e;null!==r;r=VError.cause(r))if(n.ok(s(r)),r.name==t)return r;return null},VError.hasCauseWithName=function(e,t){return null!==VError.findCauseByName(e,t)},VError.fullStack=function(e){n.ok(s(e),"err must be an Error");var t=VError.cause(e);return t?e.stack+"\ncaused by: "+VError.fullStack(t):e.stack},VError.errorFromList=function(e){return n.arrayOfObject(e,"errors"),0===e.length?null:(e.forEach(function(e){n.ok(s(e))}),1==e.length?e[0]:new MultiError(e))},VError.errorForEach=function(e,t){n.ok(s(e),"err must be an Error"),n.func(t,"func"),e instanceof MultiError?e.errors().forEach(function iterError(e){t(e)}):t(e)},i.inherits(SError,VError),i.inherits(MultiError,VError),MultiError.prototype.name="MultiError",MultiError.prototype.errors=function me_errors(){return this.ase_errors.slice(0)},i.inherits(WError,VError),WError.prototype.name="WError",WError.prototype.toString=function we_toString(){var e=this.hasOwnProperty("name")&&this.name||this.constructor.name||this.constructor.prototype.name;return this.message&&(e+=": "+this.message),this.jse_cause&&this.jse_cause.message&&(e+="; caused by "+this.jse_cause.toString()),e},WError.prototype.cause=function we_cause(e){return s(e)&&(this.jse_cause=e),this.jse_cause}},function(e,t,r){var n;void 0===(n=function(){return function(){var e=validate;e.Integer={type:"integer"};var t={String:String,Boolean:Boolean,Number:Number,Object:Object,Array:Array,Date:Date};function validate(e,t){return validate(e,t,{changing:!1})}e.validate=validate,e.checkPropertyChange=function(e,t,r){return validate(e,t,{changing:r||"property"})};var validate=e._validate=function(e,r,n){n||(n={});var i=n.changing;function getType(e){return e.type||t[e.name]==e&&e.name.toLowerCase()}var o=[];function checkProp(e,t,r,s){var a;function addError(e){o.push({property:r,message:e})}if(r+=r?"number"==typeof s?"["+s+"]":void 0===s?"":"."+s:s,("object"!=typeof t||t instanceof Array)&&(r||"function"!=typeof t)&&(!t||!getType(t)))return"function"==typeof t?e instanceof t||addError("is not an instance of the class/constructor "+t.name):t&&addError("Invalid schema/property definition "+t),null;function checkType(e,t){if(e){if(!("string"!=typeof e||"any"==e||("null"==e?null===t:typeof t==e)||t instanceof Array&&"array"==e||t instanceof Date&&"date"==e||"integer"==e&&t%1==0))return[{property:r,message:typeof t+" value found, but a "+e+" is required"}];if(e instanceof Array){for(var n=[],i=0;i<e.length&&(n=checkType(e[i],t)).length;i++);if(n.length)return n}else if("object"==typeof e){var s=o;o=[],checkProp(t,e,r);var a=o;return o=s,a}}return[]}if(i&&t.readonly&&addError("is a readonly field, it can not be changed"),t.extends&&checkProp(e,t.extends,r,s),void 0===e)t.required&&addError("is missing and it is required");else if(o=o.concat(checkType(getType(t),e)),t.disallow&&!checkType(t.disallow,e).length&&addError(" disallowed value was matched"),null!==e){if(e instanceof Array){if(t.items){var c=t.items instanceof Array,u=t.items;for(s=0,a=e.length;s<a;s+=1)c&&(u=t.items[s]),n.coerce&&(e[s]=n.coerce(e[s],u)),o.concat(checkProp(e[s],u,r,s))}t.minItems&&e.length<t.minItems&&addError("There must be a minimum of "+t.minItems+" in the array"),t.maxItems&&e.length>t.maxItems&&addError("There must be a maximum of "+t.maxItems+" in the array")}else(t.properties||t.additionalProperties)&&o.concat(function checkObj(e,t,r,s){if("object"==typeof t)for(var a in("object"!=typeof e||e instanceof Array)&&o.push({property:r,message:"an object is required"}),t)if(t.hasOwnProperty(a)){var c=e[a];if(void 0===c&&n.existingOnly)continue;var u=t[a];void 0===c&&u.default&&(c=e[a]=u.default),n.coerce&&a in e&&(c=e[a]=n.coerce(c,u)),checkProp(c,u,r,a)}for(a in e){if(e.hasOwnProperty(a)&&("_"!=a.charAt(0)||"_"!=a.charAt(1))&&t&&!t[a]&&!1===s){if(n.filter){delete e[a];continue}o.push({property:r,message:typeof c+"The property "+a+" is not defined in the schema and the schema does not allow additional properties"})}var l=t&&t[a]&&t[a].requires;!l||l in e||o.push({property:r,message:"the presence of the property "+a+" requires that "+l+" also be present"}),c=e[a],!s||t&&"object"==typeof t&&a in t||(n.coerce&&(c=e[a]=n.coerce(c,s)),checkProp(c,s,r,a)),!i&&c&&c.$schema&&(o=o.concat(checkProp(c,c.$schema,r,a)))}return o}(e,t.properties,r,t.additionalProperties));if(t.pattern&&"string"==typeof e&&!e.match(t.pattern)&&addError("does not match the regex pattern "+t.pattern),t.maxLength&&"string"==typeof e&&e.length>t.maxLength&&addError("may only be "+t.maxLength+" characters long"),t.minLength&&"string"==typeof e&&e.length<t.minLength&&addError("must be at least "+t.minLength+" characters long"),void 0!==typeof t.minimum&&typeof e==typeof t.minimum&&t.minimum>e&&addError("must have a minimum value of "+t.minimum),void 0!==typeof t.maximum&&typeof e==typeof t.maximum&&t.maximum<e&&addError("must have a maximum value of "+t.maximum),t.enum){var l,p=t.enum;a=p.length;for(var d=0;d<a;d++)if(p[d]===e){l=1;break}l||addError("does not have a value in the enumeration "+p.join(", "))}"number"==typeof t.maxDecimal&&e.toString().match(new RegExp("\\.[0-9]{"+(t.maxDecimal+1)+",}"))&&addError("may only have "+t.maxDecimal+" digits of decimal places")}return null}return r&&checkProp(e,r,"",i||""),!i&&e&&e.$schema&&checkProp(e,e.$schema,"",""),{valid:!o.length,errors:o}};return e.mustBeValid=function(e){if(!e.valid)throw new TypeError(e.errors.map(function(e){return"for property "+e.property+": "+e.message}).join(", \n"))},e}()}.apply(t,[]))||(e.exports=n)},function(e,t,r){var n=r(13),i=r(12),o=r(190),s=r(153),a=(s.HASH_ALGOS,s.PK_ALGOS,s.InvalidAlgorithmError,s.HttpSignatureError,s.validateAlgorithm);e.exports={verifySignature:function verifySignature(e,t){n.object(e,"parsedSignature"),("string"==typeof t||Buffer.isBuffer(t))&&(t=o.parseKey(t)),n.ok(o.Key.isKey(t,[1,1]),"pubkey must be a sshpk.Key");var r=a(e.algorithm);if("hmac"===r[0]||r[0]!==t.type)return!1;var i=t.createVerify(r[1]);return i.update(e.signingString),i.verify(e.params.signature,"base64")},verifyHMAC:function verifyHMAC(e,t){n.object(e,"parsedHMAC"),n.string(t,"secret");var r=a(e.algorithm);if("hmac"!==r[0])return!1;var o=r[1].toUpperCase(),s=i.createHmac(o,t);s.update(e.signingString);var c=i.createHmac(o,t);c.update(s.digest()),c=c.digest();var u=i.createHmac(o,t);return u.update(new Buffer(e.params.signature,"base64")),u=u.digest(),"string"==typeof c?c===u:Buffer.isBuffer(c)&&!c.equals?c.toString("binary")===u.toString("binary"):c.equals(u)}}},function(e,t,r){
/*!
 * mime-db
 * Copyright(c) 2014 Jonathan Ong
 * MIT Licensed
 */
e.exports=r(679)},function(e){e.exports={"application/1d-interleaved-parityfec":{source:"iana"},"application/3gpdash-qoe-report+xml":{source:"iana",compressible:!0},"application/3gpp-ims+xml":{source:"iana",compressible:!0},"application/a2l":{source:"iana"},"application/activemessage":{source:"iana"},"application/activity+json":{source:"iana",compressible:!0},"application/alto-costmap+json":{source:"iana",compressible:!0},"application/alto-costmapfilter+json":{source:"iana",compressible:!0},"application/alto-directory+json":{source:"iana",compressible:!0},"application/alto-endpointcost+json":{source:"iana",compressible:!0},"application/alto-endpointcostparams+json":{source:"iana",compressible:!0},"application/alto-endpointprop+json":{source:"iana",compressible:!0},"application/alto-endpointpropparams+json":{source:"iana",compressible:!0},"application/alto-error+json":{source:"iana",compressible:!0},"application/alto-networkmap+json":{source:"iana",compressible:!0},"application/alto-networkmapfilter+json":{source:"iana",compressible:!0},"application/aml":{source:"iana"},"application/andrew-inset":{source:"iana",extensions:["ez"]},"application/applefile":{source:"iana"},"application/applixware":{source:"apache",extensions:["aw"]},"application/atf":{source:"iana"},"application/atfx":{source:"iana"},"application/atom+xml":{source:"iana",compressible:!0,extensions:["atom"]},"application/atomcat+xml":{source:"iana",compressible:!0,extensions:["atomcat"]},"application/atomdeleted+xml":{source:"iana",compressible:!0},"application/atomicmail":{source:"iana"},"application/atomsvc+xml":{source:"iana",compressible:!0,extensions:["atomsvc"]},"application/atxml":{source:"iana"},"application/auth-policy+xml":{source:"iana",compressible:!0},"application/bacnet-xdd+zip":{source:"iana",compressible:!1},"application/batch-smtp":{source:"iana"},"application/bdoc":{compressible:!1,extensions:["bdoc"]},"application/beep+xml":{source:"iana",compressible:!0},"application/calendar+json":{source:"iana",compressible:!0},"application/calendar+xml":{source:"iana",compressible:!0},"application/call-completion":{source:"iana"},"application/cals-1840":{source:"iana"},"application/cbor":{source:"iana"},"application/cccex":{source:"iana"},"application/ccmp+xml":{source:"iana",compressible:!0},"application/ccxml+xml":{source:"iana",compressible:!0,extensions:["ccxml"]},"application/cdfx+xml":{source:"iana",compressible:!0},"application/cdmi-capability":{source:"iana",extensions:["cdmia"]},"application/cdmi-container":{source:"iana",extensions:["cdmic"]},"application/cdmi-domain":{source:"iana",extensions:["cdmid"]},"application/cdmi-object":{source:"iana",extensions:["cdmio"]},"application/cdmi-queue":{source:"iana",extensions:["cdmiq"]},"application/cdni":{source:"iana"},"application/cea":{source:"iana"},"application/cea-2018+xml":{source:"iana",compressible:!0},"application/cellml+xml":{source:"iana",compressible:!0},"application/cfw":{source:"iana"},"application/clue_info+xml":{source:"iana",compressible:!0},"application/cms":{source:"iana"},"application/cnrp+xml":{source:"iana",compressible:!0},"application/coap-group+json":{source:"iana",compressible:!0},"application/coap-payload":{source:"iana"},"application/commonground":{source:"iana"},"application/conference-info+xml":{source:"iana",compressible:!0},"application/cose":{source:"iana"},"application/cose-key":{source:"iana"},"application/cose-key-set":{source:"iana"},"application/cpl+xml":{source:"iana",compressible:!0},"application/csrattrs":{source:"iana"},"application/csta+xml":{source:"iana",compressible:!0},"application/cstadata+xml":{source:"iana",compressible:!0},"application/csvm+json":{source:"iana",compressible:!0},"application/cu-seeme":{source:"apache",extensions:["cu"]},"application/cwt":{source:"iana"},"application/cybercash":{source:"iana"},"application/dart":{compressible:!0},"application/dash+xml":{source:"iana",compressible:!0,extensions:["mpd"]},"application/dashdelta":{source:"iana"},"application/davmount+xml":{source:"iana",compressible:!0,extensions:["davmount"]},"application/dca-rft":{source:"iana"},"application/dcd":{source:"iana"},"application/dec-dx":{source:"iana"},"application/dialog-info+xml":{source:"iana",compressible:!0},"application/dicom":{source:"iana"},"application/dicom+json":{source:"iana",compressible:!0},"application/dicom+xml":{source:"iana",compressible:!0},"application/dii":{source:"iana"},"application/dit":{source:"iana"},"application/dns":{source:"iana"},"application/dns+json":{source:"iana",compressible:!0},"application/dns-message":{source:"iana"},"application/docbook+xml":{source:"apache",compressible:!0,extensions:["dbk"]},"application/dskpp+xml":{source:"iana",compressible:!0},"application/dssc+der":{source:"iana",extensions:["dssc"]},"application/dssc+xml":{source:"iana",compressible:!0,extensions:["xdssc"]},"application/dvcs":{source:"iana"},"application/ecmascript":{source:"iana",compressible:!0,extensions:["ecma","es"]},"application/edi-consent":{source:"iana"},"application/edi-x12":{source:"iana",compressible:!1},"application/edifact":{source:"iana",compressible:!1},"application/efi":{source:"iana"},"application/emergencycalldata.comment+xml":{source:"iana",compressible:!0},"application/emergencycalldata.control+xml":{source:"iana",compressible:!0},"application/emergencycalldata.deviceinfo+xml":{source:"iana",compressible:!0},"application/emergencycalldata.ecall.msd":{source:"iana"},"application/emergencycalldata.providerinfo+xml":{source:"iana",compressible:!0},"application/emergencycalldata.serviceinfo+xml":{source:"iana",compressible:!0},"application/emergencycalldata.subscriberinfo+xml":{source:"iana",compressible:!0},"application/emergencycalldata.veds+xml":{source:"iana",compressible:!0},"application/emma+xml":{source:"iana",compressible:!0,extensions:["emma"]},"application/emotionml+xml":{source:"iana",compressible:!0},"application/encaprtp":{source:"iana"},"application/epp+xml":{source:"iana",compressible:!0},"application/epub+zip":{source:"iana",compressible:!1,extensions:["epub"]},"application/eshop":{source:"iana"},"application/exi":{source:"iana",extensions:["exi"]},"application/fastinfoset":{source:"iana"},"application/fastsoap":{source:"iana"},"application/fdt+xml":{source:"iana",compressible:!0},"application/fhir+json":{source:"iana",compressible:!0},"application/fhir+xml":{source:"iana",compressible:!0},"application/fido.trusted-apps+json":{compressible:!0},"application/fits":{source:"iana"},"application/font-sfnt":{source:"iana"},"application/font-tdpfr":{source:"iana",extensions:["pfr"]},"application/font-woff":{source:"iana",compressible:!1},"application/framework-attributes+xml":{source:"iana",compressible:!0},"application/geo+json":{source:"iana",compressible:!0,extensions:["geojson"]},"application/geo+json-seq":{source:"iana"},"application/geopackage+sqlite3":{source:"iana"},"application/geoxacml+xml":{source:"iana",compressible:!0},"application/gltf-buffer":{source:"iana"},"application/gml+xml":{source:"iana",compressible:!0,extensions:["gml"]},"application/gpx+xml":{source:"apache",compressible:!0,extensions:["gpx"]},"application/gxf":{source:"apache",extensions:["gxf"]},"application/gzip":{source:"iana",compressible:!1,extensions:["gz"]},"application/h224":{source:"iana"},"application/held+xml":{source:"iana",compressible:!0},"application/hjson":{extensions:["hjson"]},"application/http":{source:"iana"},"application/hyperstudio":{source:"iana",extensions:["stk"]},"application/ibe-key-request+xml":{source:"iana",compressible:!0},"application/ibe-pkg-reply+xml":{source:"iana",compressible:!0},"application/ibe-pp-data":{source:"iana"},"application/iges":{source:"iana"},"application/im-iscomposing+xml":{source:"iana",compressible:!0},"application/index":{source:"iana"},"application/index.cmd":{source:"iana"},"application/index.obj":{source:"iana"},"application/index.response":{source:"iana"},"application/index.vnd":{source:"iana"},"application/inkml+xml":{source:"iana",compressible:!0,extensions:["ink","inkml"]},"application/iotp":{source:"iana"},"application/ipfix":{source:"iana",extensions:["ipfix"]},"application/ipp":{source:"iana"},"application/isup":{source:"iana"},"application/its+xml":{source:"iana",compressible:!0},"application/java-archive":{source:"apache",compressible:!1,extensions:["jar","war","ear"]},"application/java-serialized-object":{source:"apache",compressible:!1,extensions:["ser"]},"application/java-vm":{source:"apache",compressible:!1,extensions:["class"]},"application/javascript":{source:"iana",charset:"UTF-8",compressible:!0,extensions:["js","mjs"]},"application/jf2feed+json":{source:"iana",compressible:!0},"application/jose":{source:"iana"},"application/jose+json":{source:"iana",compressible:!0},"application/jrd+json":{source:"iana",compressible:!0},"application/json":{source:"iana",charset:"UTF-8",compressible:!0,extensions:["json","map"]},"application/json-patch+json":{source:"iana",compressible:!0},"application/json-seq":{source:"iana"},"application/json5":{extensions:["json5"]},"application/jsonml+json":{source:"apache",compressible:!0,extensions:["jsonml"]},"application/jwk+json":{source:"iana",compressible:!0},"application/jwk-set+json":{source:"iana",compressible:!0},"application/jwt":{source:"iana"},"application/kpml-request+xml":{source:"iana",compressible:!0},"application/kpml-response+xml":{source:"iana",compressible:!0},"application/ld+json":{source:"iana",compressible:!0,extensions:["jsonld"]},"application/lgr+xml":{source:"iana",compressible:!0},"application/link-format":{source:"iana"},"application/load-control+xml":{source:"iana",compressible:!0},"application/lost+xml":{source:"iana",compressible:!0,extensions:["lostxml"]},"application/lostsync+xml":{source:"iana",compressible:!0},"application/lxf":{source:"iana"},"application/mac-binhex40":{source:"iana",extensions:["hqx"]},"application/mac-compactpro":{source:"apache",extensions:["cpt"]},"application/macwriteii":{source:"iana"},"application/mads+xml":{source:"iana",compressible:!0,extensions:["mads"]},"application/manifest+json":{charset:"UTF-8",compressible:!0,extensions:["webmanifest"]},"application/marc":{source:"iana",extensions:["mrc"]},"application/marcxml+xml":{source:"iana",compressible:!0,extensions:["mrcx"]},"application/mathematica":{source:"iana",extensions:["ma","nb","mb"]},"application/mathml+xml":{source:"iana",compressible:!0,extensions:["mathml"]},"application/mathml-content+xml":{source:"iana",compressible:!0},"application/mathml-presentation+xml":{source:"iana",compressible:!0},"application/mbms-associated-procedure-description+xml":{source:"iana",compressible:!0},"application/mbms-deregister+xml":{source:"iana",compressible:!0},"application/mbms-envelope+xml":{source:"iana",compressible:!0},"application/mbms-msk+xml":{source:"iana",compressible:!0},"application/mbms-msk-response+xml":{source:"iana",compressible:!0},"application/mbms-protection-description+xml":{source:"iana",compressible:!0},"application/mbms-reception-report+xml":{source:"iana",compressible:!0},"application/mbms-register+xml":{source:"iana",compressible:!0},"application/mbms-register-response+xml":{source:"iana",compressible:!0},"application/mbms-schedule+xml":{source:"iana",compressible:!0},"application/mbms-user-service-description+xml":{source:"iana",compressible:!0},"application/mbox":{source:"iana",extensions:["mbox"]},"application/media-policy-dataset+xml":{source:"iana",compressible:!0},"application/media_control+xml":{source:"iana",compressible:!0},"application/mediaservercontrol+xml":{source:"iana",compressible:!0,extensions:["mscml"]},"application/merge-patch+json":{source:"iana",compressible:!0},"application/metalink+xml":{source:"apache",compressible:!0,extensions:["metalink"]},"application/metalink4+xml":{source:"iana",compressible:!0,extensions:["meta4"]},"application/mets+xml":{source:"iana",compressible:!0,extensions:["mets"]},"application/mf4":{source:"iana"},"application/mikey":{source:"iana"},"application/mmt-usd+xml":{source:"iana",compressible:!0},"application/mods+xml":{source:"iana",compressible:!0,extensions:["mods"]},"application/moss-keys":{source:"iana"},"application/moss-signature":{source:"iana"},"application/mosskey-data":{source:"iana"},"application/mosskey-request":{source:"iana"},"application/mp21":{source:"iana",extensions:["m21","mp21"]},"application/mp4":{source:"iana",extensions:["mp4s","m4p"]},"application/mpeg4-generic":{source:"iana"},"application/mpeg4-iod":{source:"iana"},"application/mpeg4-iod-xmt":{source:"iana"},"application/mrb-consumer+xml":{source:"iana",compressible:!0},"application/mrb-publish+xml":{source:"iana",compressible:!0},"application/msc-ivr+xml":{source:"iana",compressible:!0},"application/msc-mixer+xml":{source:"iana",compressible:!0},"application/msword":{source:"iana",compressible:!1,extensions:["doc","dot"]},"application/mud+json":{source:"iana",compressible:!0},"application/mxf":{source:"iana",extensions:["mxf"]},"application/n-quads":{source:"iana"},"application/n-triples":{source:"iana"},"application/nasdata":{source:"iana"},"application/news-checkgroups":{source:"iana"},"application/news-groupinfo":{source:"iana"},"application/news-transmission":{source:"iana"},"application/nlsml+xml":{source:"iana",compressible:!0},"application/node":{source:"iana"},"application/nss":{source:"iana"},"application/ocsp-request":{source:"iana"},"application/ocsp-response":{source:"iana"},"application/octet-stream":{source:"iana",compressible:!1,extensions:["bin","dms","lrf","mar","so","dist","distz","pkg","bpk","dump","elc","deploy","exe","dll","deb","dmg","iso","img","msi","msp","msm","buffer"]},"application/oda":{source:"iana",extensions:["oda"]},"application/odx":{source:"iana"},"application/oebps-package+xml":{source:"iana",compressible:!0,extensions:["opf"]},"application/ogg":{source:"iana",compressible:!1,extensions:["ogx"]},"application/omdoc+xml":{source:"apache",compressible:!0,extensions:["omdoc"]},"application/onenote":{source:"apache",extensions:["onetoc","onetoc2","onetmp","onepkg"]},"application/oxps":{source:"iana",extensions:["oxps"]},"application/p2p-overlay+xml":{source:"iana",compressible:!0},"application/parityfec":{source:"iana"},"application/passport":{source:"iana"},"application/patch-ops-error+xml":{source:"iana",compressible:!0,extensions:["xer"]},"application/pdf":{source:"iana",compressible:!1,extensions:["pdf"]},"application/pdx":{source:"iana"},"application/pgp-encrypted":{source:"iana",compressible:!1,extensions:["pgp"]},"application/pgp-keys":{source:"iana"},"application/pgp-signature":{source:"iana",extensions:["asc","sig"]},"application/pics-rules":{source:"apache",extensions:["prf"]},"application/pidf+xml":{source:"iana",compressible:!0},"application/pidf-diff+xml":{source:"iana",compressible:!0},"application/pkcs10":{source:"iana",extensions:["p10"]},"application/pkcs12":{source:"iana"},"application/pkcs7-mime":{source:"iana",extensions:["p7m","p7c"]},"application/pkcs7-signature":{source:"iana",extensions:["p7s"]},"application/pkcs8":{source:"iana",extensions:["p8"]},"application/pkcs8-encrypted":{source:"iana"},"application/pkix-attr-cert":{source:"iana",extensions:["ac"]},"application/pkix-cert":{source:"iana",extensions:["cer"]},"application/pkix-crl":{source:"iana",extensions:["crl"]},"application/pkix-pkipath":{source:"iana",extensions:["pkipath"]},"application/pkixcmp":{source:"iana",extensions:["pki"]},"application/pls+xml":{source:"iana",compressible:!0,extensions:["pls"]},"application/poc-settings+xml":{source:"iana",compressible:!0},"application/postscript":{source:"iana",compressible:!0,extensions:["ai","eps","ps"]},"application/ppsp-tracker+json":{source:"iana",compressible:!0},"application/problem+json":{source:"iana",compressible:!0},"application/problem+xml":{source:"iana",compressible:!0},"application/provenance+xml":{source:"iana",compressible:!0},"application/prs.alvestrand.titrax-sheet":{source:"iana"},"application/prs.cww":{source:"iana",extensions:["cww"]},"application/prs.hpub+zip":{source:"iana",compressible:!1},"application/prs.nprend":{source:"iana"},"application/prs.plucker":{source:"iana"},"application/prs.rdf-xml-crypt":{source:"iana"},"application/prs.xsf+xml":{source:"iana",compressible:!0},"application/pskc+xml":{source:"iana",compressible:!0,extensions:["pskcxml"]},"application/qsig":{source:"iana"},"application/raml+yaml":{compressible:!0,extensions:["raml"]},"application/raptorfec":{source:"iana"},"application/rdap+json":{source:"iana",compressible:!0},"application/rdf+xml":{source:"iana",compressible:!0,extensions:["rdf","owl"]},"application/reginfo+xml":{source:"iana",compressible:!0,extensions:["rif"]},"application/relax-ng-compact-syntax":{source:"iana",extensions:["rnc"]},"application/remote-printing":{source:"iana"},"application/reputon+json":{source:"iana",compressible:!0},"application/resource-lists+xml":{source:"iana",compressible:!0,extensions:["rl"]},"application/resource-lists-diff+xml":{source:"iana",compressible:!0,extensions:["rld"]},"application/rfc+xml":{source:"iana",compressible:!0},"application/riscos":{source:"iana"},"application/rlmi+xml":{source:"iana",compressible:!0},"application/rls-services+xml":{source:"iana",compressible:!0,extensions:["rs"]},"application/route-apd+xml":{source:"iana",compressible:!0},"application/route-s-tsid+xml":{source:"iana",compressible:!0},"application/route-usd+xml":{source:"iana",compressible:!0},"application/rpki-ghostbusters":{source:"iana",extensions:["gbr"]},"application/rpki-manifest":{source:"iana",extensions:["mft"]},"application/rpki-publication":{source:"iana"},"application/rpki-roa":{source:"iana",extensions:["roa"]},"application/rpki-updown":{source:"iana"},"application/rsd+xml":{source:"apache",compressible:!0,extensions:["rsd"]},"application/rss+xml":{source:"apache",compressible:!0,extensions:["rss"]},"application/rtf":{source:"iana",compressible:!0,extensions:["rtf"]},"application/rtploopback":{source:"iana"},"application/rtx":{source:"iana"},"application/samlassertion+xml":{source:"iana",compressible:!0},"application/samlmetadata+xml":{source:"iana",compressible:!0},"application/sbml+xml":{source:"iana",compressible:!0,extensions:["sbml"]},"application/scaip+xml":{source:"iana",compressible:!0},"application/scim+json":{source:"iana",compressible:!0},"application/scvp-cv-request":{source:"iana",extensions:["scq"]},"application/scvp-cv-response":{source:"iana",extensions:["scs"]},"application/scvp-vp-request":{source:"iana",extensions:["spq"]},"application/scvp-vp-response":{source:"iana",extensions:["spp"]},"application/sdp":{source:"iana",extensions:["sdp"]},"application/secevent+jwt":{source:"iana"},"application/senml+cbor":{source:"iana"},"application/senml+json":{source:"iana",compressible:!0},"application/senml+xml":{source:"iana",compressible:!0},"application/senml-exi":{source:"iana"},"application/sensml+cbor":{source:"iana"},"application/sensml+json":{source:"iana",compressible:!0},"application/sensml+xml":{source:"iana",compressible:!0},"application/sensml-exi":{source:"iana"},"application/sep+xml":{source:"iana",compressible:!0},"application/sep-exi":{source:"iana"},"application/session-info":{source:"iana"},"application/set-payment":{source:"iana"},"application/set-payment-initiation":{source:"iana",extensions:["setpay"]},"application/set-registration":{source:"iana"},"application/set-registration-initiation":{source:"iana",extensions:["setreg"]},"application/sgml":{source:"iana"},"application/sgml-open-catalog":{source:"iana"},"application/shf+xml":{source:"iana",compressible:!0,extensions:["shf"]},"application/sieve":{source:"iana"},"application/simple-filter+xml":{source:"iana",compressible:!0},"application/simple-message-summary":{source:"iana"},"application/simplesymbolcontainer":{source:"iana"},"application/slate":{source:"iana"},"application/smil":{source:"iana"},"application/smil+xml":{source:"iana",compressible:!0,extensions:["smi","smil"]},"application/smpte336m":{source:"iana"},"application/soap+fastinfoset":{source:"iana"},"application/soap+xml":{source:"iana",compressible:!0},"application/sparql-query":{source:"iana",extensions:["rq"]},"application/sparql-results+xml":{source:"iana",compressible:!0,extensions:["srx"]},"application/spirits-event+xml":{source:"iana",compressible:!0},"application/sql":{source:"iana"},"application/srgs":{source:"iana",extensions:["gram"]},"application/srgs+xml":{source:"iana",compressible:!0,extensions:["grxml"]},"application/sru+xml":{source:"iana",compressible:!0,extensions:["sru"]},"application/ssdl+xml":{source:"apache",compressible:!0,extensions:["ssdl"]},"application/ssml+xml":{source:"iana",compressible:!0,extensions:["ssml"]},"application/stix+json":{source:"iana",compressible:!0},"application/tamp-apex-update":{source:"iana"},"application/tamp-apex-update-confirm":{source:"iana"},"application/tamp-community-update":{source:"iana"},"application/tamp-community-update-confirm":{source:"iana"},"application/tamp-error":{source:"iana"},"application/tamp-sequence-adjust":{source:"iana"},"application/tamp-sequence-adjust-confirm":{source:"iana"},"application/tamp-status-query":{source:"iana"},"application/tamp-status-response":{source:"iana"},"application/tamp-update":{source:"iana"},"application/tamp-update-confirm":{source:"iana"},"application/tar":{compressible:!0},"application/taxii+json":{source:"iana",compressible:!0},"application/tei+xml":{source:"iana",compressible:!0,extensions:["tei","teicorpus"]},"application/thraud+xml":{source:"iana",compressible:!0,extensions:["tfi"]},"application/timestamp-query":{source:"iana"},"application/timestamp-reply":{source:"iana"},"application/timestamped-data":{source:"iana",extensions:["tsd"]},"application/tlsrpt+gzip":{source:"iana"},"application/tlsrpt+json":{source:"iana",compressible:!0},"application/tnauthlist":{source:"iana"},"application/trickle-ice-sdpfrag":{source:"iana"},"application/trig":{source:"iana"},"application/ttml+xml":{source:"iana",compressible:!0},"application/tve-trigger":{source:"iana"},"application/ulpfec":{source:"iana"},"application/urc-grpsheet+xml":{source:"iana",compressible:!0},"application/urc-ressheet+xml":{source:"iana",compressible:!0},"application/urc-targetdesc+xml":{source:"iana",compressible:!0},"application/urc-uisocketdesc+xml":{source:"iana",compressible:!0},"application/vcard+json":{source:"iana",compressible:!0},"application/vcard+xml":{source:"iana",compressible:!0},"application/vemmi":{source:"iana"},"application/vividence.scriptfile":{source:"apache"},"application/vnd.1000minds.decision-model+xml":{source:"iana",compressible:!0},"application/vnd.3gpp-prose+xml":{source:"iana",compressible:!0},"application/vnd.3gpp-prose-pc3ch+xml":{source:"iana",compressible:!0},"application/vnd.3gpp-v2x-local-service-information":{source:"iana"},"application/vnd.3gpp.access-transfer-events+xml":{source:"iana",compressible:!0},"application/vnd.3gpp.bsf+xml":{source:"iana",compressible:!0},"application/vnd.3gpp.gmop+xml":{source:"iana",compressible:!0},"application/vnd.3gpp.mc-signalling-ear":{source:"iana"},"application/vnd.3gpp.mcdata-payload":{source:"iana"},"application/vnd.3gpp.mcdata-signalling":{source:"iana"},"application/vnd.3gpp.mcptt-affiliation-command+xml":{source:"iana",compressible:!0},"application/vnd.3gpp.mcptt-floor-request+xml":{source:"iana",compressible:!0},"application/vnd.3gpp.mcptt-info+xml":{source:"iana",compressible:!0},"application/vnd.3gpp.mcptt-location-info+xml":{source:"iana",compressible:!0},"application/vnd.3gpp.mcptt-mbms-usage-info+xml":{source:"iana",compressible:!0},"application/vnd.3gpp.mcptt-signed+xml":{source:"iana",compressible:!0},"application/vnd.3gpp.mid-call+xml":{source:"iana",compressible:!0},"application/vnd.3gpp.pic-bw-large":{source:"iana",extensions:["plb"]},"application/vnd.3gpp.pic-bw-small":{source:"iana",extensions:["psb"]},"application/vnd.3gpp.pic-bw-var":{source:"iana",extensions:["pvb"]},"application/vnd.3gpp.sms":{source:"iana"},"application/vnd.3gpp.sms+xml":{source:"iana",compressible:!0},"application/vnd.3gpp.srvcc-ext+xml":{source:"iana",compressible:!0},"application/vnd.3gpp.srvcc-info+xml":{source:"iana",compressible:!0},"application/vnd.3gpp.state-and-event-info+xml":{source:"iana",compressible:!0},"application/vnd.3gpp.ussd+xml":{source:"iana",compressible:!0},"application/vnd.3gpp2.bcmcsinfo+xml":{source:"iana",compressible:!0},"application/vnd.3gpp2.sms":{source:"iana"},"application/vnd.3gpp2.tcap":{source:"iana",extensions:["tcap"]},"application/vnd.3lightssoftware.imagescal":{source:"iana"},"application/vnd.3m.post-it-notes":{source:"iana",extensions:["pwn"]},"application/vnd.accpac.simply.aso":{source:"iana",extensions:["aso"]},"application/vnd.accpac.simply.imp":{source:"iana",extensions:["imp"]},"application/vnd.acucobol":{source:"iana",extensions:["acu"]},"application/vnd.acucorp":{source:"iana",extensions:["atc","acutc"]},"application/vnd.adobe.air-application-installer-package+zip":{source:"apache",compressible:!1,extensions:["air"]},"application/vnd.adobe.flash.movie":{source:"iana"},"application/vnd.adobe.formscentral.fcdt":{source:"iana",extensions:["fcdt"]},"application/vnd.adobe.fxp":{source:"iana",extensions:["fxp","fxpl"]},"application/vnd.adobe.partial-upload":{source:"iana"},"application/vnd.adobe.xdp+xml":{source:"iana",compressible:!0,extensions:["xdp"]},"application/vnd.adobe.xfdf":{source:"iana",extensions:["xfdf"]},"application/vnd.aether.imp":{source:"iana"},"application/vnd.afpc.afplinedata":{source:"iana"},"application/vnd.afpc.modca":{source:"iana"},"application/vnd.ah-barcode":{source:"iana"},"application/vnd.ahead.space":{source:"iana",extensions:["ahead"]},"application/vnd.airzip.filesecure.azf":{source:"iana",extensions:["azf"]},"application/vnd.airzip.filesecure.azs":{source:"iana",extensions:["azs"]},"application/vnd.amadeus+json":{source:"iana",compressible:!0},"application/vnd.amazon.ebook":{source:"apache",extensions:["azw"]},"application/vnd.amazon.mobi8-ebook":{source:"iana"},"application/vnd.americandynamics.acc":{source:"iana",extensions:["acc"]},"application/vnd.amiga.ami":{source:"iana",extensions:["ami"]},"application/vnd.amundsen.maze+xml":{source:"iana",compressible:!0},"application/vnd.android.package-archive":{source:"apache",compressible:!1,extensions:["apk"]},"application/vnd.anki":{source:"iana"},"application/vnd.anser-web-certificate-issue-initiation":{source:"iana",extensions:["cii"]},"application/vnd.anser-web-funds-transfer-initiation":{source:"apache",extensions:["fti"]},"application/vnd.antix.game-component":{source:"iana",extensions:["atx"]},"application/vnd.apache.thrift.binary":{source:"iana"},"application/vnd.apache.thrift.compact":{source:"iana"},"application/vnd.apache.thrift.json":{source:"iana"},"application/vnd.api+json":{source:"iana",compressible:!0},"application/vnd.apothekende.reservation+json":{source:"iana",compressible:!0},"application/vnd.apple.installer+xml":{source:"iana",compressible:!0,extensions:["mpkg"]},"application/vnd.apple.keynote":{source:"iana",extensions:["keynote"]},"application/vnd.apple.mpegurl":{source:"iana",extensions:["m3u8"]},"application/vnd.apple.numbers":{source:"iana",extensions:["numbers"]},"application/vnd.apple.pages":{source:"iana",extensions:["pages"]},"application/vnd.apple.pkpass":{compressible:!1,extensions:["pkpass"]},"application/vnd.arastra.swi":{source:"iana"},"application/vnd.aristanetworks.swi":{source:"iana",extensions:["swi"]},"application/vnd.artisan+json":{source:"iana",compressible:!0},"application/vnd.artsquare":{source:"iana"},"application/vnd.astraea-software.iota":{source:"iana",extensions:["iota"]},"application/vnd.audiograph":{source:"iana",extensions:["aep"]},"application/vnd.autopackage":{source:"iana"},"application/vnd.avalon+json":{source:"iana",compressible:!0},"application/vnd.avistar+xml":{source:"iana",compressible:!0},"application/vnd.balsamiq.bmml+xml":{source:"iana",compressible:!0},"application/vnd.balsamiq.bmpr":{source:"iana"},"application/vnd.banana-accounting":{source:"iana"},"application/vnd.bbf.usp.msg":{source:"iana"},"application/vnd.bbf.usp.msg+json":{source:"iana",compressible:!0},"application/vnd.bekitzur-stech+json":{source:"iana",compressible:!0},"application/vnd.bint.med-content":{source:"iana"},"application/vnd.biopax.rdf+xml":{source:"iana",compressible:!0},"application/vnd.blink-idb-value-wrapper":{source:"iana"},"application/vnd.blueice.multipass":{source:"iana",extensions:["mpm"]},"application/vnd.bluetooth.ep.oob":{source:"iana"},"application/vnd.bluetooth.le.oob":{source:"iana"},"application/vnd.bmi":{source:"iana",extensions:["bmi"]},"application/vnd.businessobjects":{source:"iana",extensions:["rep"]},"application/vnd.byu.uapi+json":{source:"iana",compressible:!0},"application/vnd.cab-jscript":{source:"iana"},"application/vnd.canon-cpdl":{source:"iana"},"application/vnd.canon-lips":{source:"iana"},"application/vnd.capasystems-pg+json":{source:"iana",compressible:!0},"application/vnd.cendio.thinlinc.clientconf":{source:"iana"},"application/vnd.century-systems.tcp_stream":{source:"iana"},"application/vnd.chemdraw+xml":{source:"iana",compressible:!0,extensions:["cdxml"]},"application/vnd.chess-pgn":{source:"iana"},"application/vnd.chipnuts.karaoke-mmd":{source:"iana",extensions:["mmd"]},"application/vnd.cinderella":{source:"iana",extensions:["cdy"]},"application/vnd.cirpack.isdn-ext":{source:"iana"},"application/vnd.citationstyles.style+xml":{source:"iana",compressible:!0,extensions:["csl"]},"application/vnd.claymore":{source:"iana",extensions:["cla"]},"application/vnd.cloanto.rp9":{source:"iana",extensions:["rp9"]},"application/vnd.clonk.c4group":{source:"iana",extensions:["c4g","c4d","c4f","c4p","c4u"]},"application/vnd.cluetrust.cartomobile-config":{source:"iana",extensions:["c11amc"]},"application/vnd.cluetrust.cartomobile-config-pkg":{source:"iana",extensions:["c11amz"]},"application/vnd.coffeescript":{source:"iana"},"application/vnd.collabio.xodocuments.document":{source:"iana"},"application/vnd.collabio.xodocuments.document-template":{source:"iana"},"application/vnd.collabio.xodocuments.presentation":{source:"iana"},"application/vnd.collabio.xodocuments.presentation-template":{source:"iana"},"application/vnd.collabio.xodocuments.spreadsheet":{source:"iana"},"application/vnd.collabio.xodocuments.spreadsheet-template":{source:"iana"},"application/vnd.collection+json":{source:"iana",compressible:!0},"application/vnd.collection.doc+json":{source:"iana",compressible:!0},"application/vnd.collection.next+json":{source:"iana",compressible:!0},"application/vnd.comicbook+zip":{source:"iana",compressible:!1},"application/vnd.comicbook-rar":{source:"iana"},"application/vnd.commerce-battelle":{source:"iana"},"application/vnd.commonspace":{source:"iana",extensions:["csp"]},"application/vnd.contact.cmsg":{source:"iana",extensions:["cdbcmsg"]},"application/vnd.coreos.ignition+json":{source:"iana",compressible:!0},"application/vnd.cosmocaller":{source:"iana",extensions:["cmc"]},"application/vnd.crick.clicker":{source:"iana",extensions:["clkx"]},"application/vnd.crick.clicker.keyboard":{source:"iana",extensions:["clkk"]},"application/vnd.crick.clicker.palette":{source:"iana",extensions:["clkp"]},"application/vnd.crick.clicker.template":{source:"iana",extensions:["clkt"]},"application/vnd.crick.clicker.wordbank":{source:"iana",extensions:["clkw"]},"application/vnd.criticaltools.wbs+xml":{source:"iana",compressible:!0,extensions:["wbs"]},"application/vnd.ctc-posml":{source:"iana",extensions:["pml"]},"application/vnd.ctct.ws+xml":{source:"iana",compressible:!0},"application/vnd.cups-pdf":{source:"iana"},"application/vnd.cups-postscript":{source:"iana"},"application/vnd.cups-ppd":{source:"iana",extensions:["ppd"]},"application/vnd.cups-raster":{source:"iana"},"application/vnd.cups-raw":{source:"iana"},"application/vnd.curl":{source:"iana"},"application/vnd.curl.car":{source:"apache",extensions:["car"]},"application/vnd.curl.pcurl":{source:"apache",extensions:["pcurl"]},"application/vnd.cyan.dean.root+xml":{source:"iana",compressible:!0},"application/vnd.cybank":{source:"iana"},"application/vnd.d2l.coursepackage1p0+zip":{source:"iana",compressible:!1},"application/vnd.dart":{source:"iana",compressible:!0,extensions:["dart"]},"application/vnd.data-vision.rdz":{source:"iana",extensions:["rdz"]},"application/vnd.datapackage+json":{source:"iana",compressible:!0},"application/vnd.dataresource+json":{source:"iana",compressible:!0},"application/vnd.debian.binary-package":{source:"iana"},"application/vnd.dece.data":{source:"iana",extensions:["uvf","uvvf","uvd","uvvd"]},"application/vnd.dece.ttml+xml":{source:"iana",compressible:!0,extensions:["uvt","uvvt"]},"application/vnd.dece.unspecified":{source:"iana",extensions:["uvx","uvvx"]},"application/vnd.dece.zip":{source:"iana",extensions:["uvz","uvvz"]},"application/vnd.denovo.fcselayout-link":{source:"iana",extensions:["fe_launch"]},"application/vnd.desmume.movie":{source:"iana"},"application/vnd.dir-bi.plate-dl-nosuffix":{source:"iana"},"application/vnd.dm.delegation+xml":{source:"iana",compressible:!0},"application/vnd.dna":{source:"iana",extensions:["dna"]},"application/vnd.document+json":{source:"iana",compressible:!0},"application/vnd.dolby.mlp":{source:"apache",extensions:["mlp"]},"application/vnd.dolby.mobile.1":{source:"iana"},"application/vnd.dolby.mobile.2":{source:"iana"},"application/vnd.doremir.scorecloud-binary-document":{source:"iana"},"application/vnd.dpgraph":{source:"iana",extensions:["dpg"]},"application/vnd.dreamfactory":{source:"iana",extensions:["dfac"]},"application/vnd.drive+json":{source:"iana",compressible:!0},"application/vnd.ds-keypoint":{source:"apache",extensions:["kpxx"]},"application/vnd.dtg.local":{source:"iana"},"application/vnd.dtg.local.flash":{source:"iana"},"application/vnd.dtg.local.html":{source:"iana"},"application/vnd.dvb.ait":{source:"iana",extensions:["ait"]},"application/vnd.dvb.dvbj":{source:"iana"},"application/vnd.dvb.esgcontainer":{source:"iana"},"application/vnd.dvb.ipdcdftnotifaccess":{source:"iana"},"application/vnd.dvb.ipdcesgaccess":{source:"iana"},"application/vnd.dvb.ipdcesgaccess2":{source:"iana"},"application/vnd.dvb.ipdcesgpdd":{source:"iana"},"application/vnd.dvb.ipdcroaming":{source:"iana"},"application/vnd.dvb.iptv.alfec-base":{source:"iana"},"application/vnd.dvb.iptv.alfec-enhancement":{source:"iana"},"application/vnd.dvb.notif-aggregate-root+xml":{source:"iana",compressible:!0},"application/vnd.dvb.notif-container+xml":{source:"iana",compressible:!0},"application/vnd.dvb.notif-generic+xml":{source:"iana",compressible:!0},"application/vnd.dvb.notif-ia-msglist+xml":{source:"iana",compressible:!0},"application/vnd.dvb.notif-ia-registration-request+xml":{source:"iana",compressible:!0},"application/vnd.dvb.notif-ia-registration-response+xml":{source:"iana",compressible:!0},"application/vnd.dvb.notif-init+xml":{source:"iana",compressible:!0},"application/vnd.dvb.pfr":{source:"iana"},"application/vnd.dvb.service":{source:"iana",extensions:["svc"]},"application/vnd.dxr":{source:"iana"},"application/vnd.dynageo":{source:"iana",extensions:["geo"]},"application/vnd.dzr":{source:"iana"},"application/vnd.easykaraoke.cdgdownload":{source:"iana"},"application/vnd.ecdis-update":{source:"iana"},"application/vnd.ecip.rlp":{source:"iana"},"application/vnd.ecowin.chart":{source:"iana",extensions:["mag"]},"application/vnd.ecowin.filerequest":{source:"iana"},"application/vnd.ecowin.fileupdate":{source:"iana"},"application/vnd.ecowin.series":{source:"iana"},"application/vnd.ecowin.seriesrequest":{source:"iana"},"application/vnd.ecowin.seriesupdate":{source:"iana"},"application/vnd.efi.img":{source:"iana"},"application/vnd.efi.iso":{source:"iana"},"application/vnd.emclient.accessrequest+xml":{source:"iana",compressible:!0},"application/vnd.enliven":{source:"iana",extensions:["nml"]},"application/vnd.enphase.envoy":{source:"iana"},"application/vnd.eprints.data+xml":{source:"iana",compressible:!0},"application/vnd.epson.esf":{source:"iana",extensions:["esf"]},"application/vnd.epson.msf":{source:"iana",extensions:["msf"]},"application/vnd.epson.quickanime":{source:"iana",extensions:["qam"]},"application/vnd.epson.salt":{source:"iana",extensions:["slt"]},"application/vnd.epson.ssf":{source:"iana",extensions:["ssf"]},"application/vnd.ericsson.quickcall":{source:"iana"},"application/vnd.espass-espass+zip":{source:"iana",compressible:!1},"application/vnd.eszigno3+xml":{source:"iana",compressible:!0,extensions:["es3","et3"]},"application/vnd.etsi.aoc+xml":{source:"iana",compressible:!0},"application/vnd.etsi.asic-e+zip":{source:"iana",compressible:!1},"application/vnd.etsi.asic-s+zip":{source:"iana",compressible:!1},"application/vnd.etsi.cug+xml":{source:"iana",compressible:!0},"application/vnd.etsi.iptvcommand+xml":{source:"iana",compressible:!0},"application/vnd.etsi.iptvdiscovery+xml":{source:"iana",compressible:!0},"application/vnd.etsi.iptvprofile+xml":{source:"iana",compressible:!0},"application/vnd.etsi.iptvsad-bc+xml":{source:"iana",compressible:!0},"application/vnd.etsi.iptvsad-cod+xml":{source:"iana",compressible:!0},"application/vnd.etsi.iptvsad-npvr+xml":{source:"iana",compressible:!0},"application/vnd.etsi.iptvservice+xml":{source:"iana",compressible:!0},"application/vnd.etsi.iptvsync+xml":{source:"iana",compressible:!0},"application/vnd.etsi.iptvueprofile+xml":{source:"iana",compressible:!0},"application/vnd.etsi.mcid+xml":{source:"iana",compressible:!0},"application/vnd.etsi.mheg5":{source:"iana"},"application/vnd.etsi.overload-control-policy-dataset+xml":{source:"iana",compressible:!0},"application/vnd.etsi.pstn+xml":{source:"iana",compressible:!0},"application/vnd.etsi.sci+xml":{source:"iana",compressible:!0},"application/vnd.etsi.simservs+xml":{source:"iana",compressible:!0},"application/vnd.etsi.timestamp-token":{source:"iana"},"application/vnd.etsi.tsl+xml":{source:"iana",compressible:!0},"application/vnd.etsi.tsl.der":{source:"iana"},"application/vnd.eudora.data":{source:"iana"},"application/vnd.evolv.ecig.profile":{source:"iana"},"application/vnd.evolv.ecig.settings":{source:"iana"},"application/vnd.evolv.ecig.theme":{source:"iana"},"application/vnd.exstream-empower+zip":{source:"iana",compressible:!1},"application/vnd.ezpix-album":{source:"iana",extensions:["ez2"]},"application/vnd.ezpix-package":{source:"iana",extensions:["ez3"]},"application/vnd.f-secure.mobile":{source:"iana"},"application/vnd.fastcopy-disk-image":{source:"iana"},"application/vnd.fdf":{source:"iana",extensions:["fdf"]},"application/vnd.fdsn.mseed":{source:"iana",extensions:["mseed"]},"application/vnd.fdsn.seed":{source:"iana",extensions:["seed","dataless"]},"application/vnd.ffsns":{source:"iana"},"application/vnd.filmit.zfc":{source:"iana"},"application/vnd.fints":{source:"iana"},"application/vnd.firemonkeys.cloudcell":{source:"iana"},"application/vnd.flographit":{source:"iana",extensions:["gph"]},"application/vnd.fluxtime.clip":{source:"iana",extensions:["ftc"]},"application/vnd.font-fontforge-sfd":{source:"iana"},"application/vnd.framemaker":{source:"iana",extensions:["fm","frame","maker","book"]},"application/vnd.frogans.fnc":{source:"iana",extensions:["fnc"]},"application/vnd.frogans.ltf":{source:"iana",extensions:["ltf"]},"application/vnd.fsc.weblaunch":{source:"iana",extensions:["fsc"]},"application/vnd.fujitsu.oasys":{source:"iana",extensions:["oas"]},"application/vnd.fujitsu.oasys2":{source:"iana",extensions:["oa2"]},"application/vnd.fujitsu.oasys3":{source:"iana",extensions:["oa3"]},"application/vnd.fujitsu.oasysgp":{source:"iana",extensions:["fg5"]},"application/vnd.fujitsu.oasysprs":{source:"iana",extensions:["bh2"]},"application/vnd.fujixerox.art-ex":{source:"iana"},"application/vnd.fujixerox.art4":{source:"iana"},"application/vnd.fujixerox.ddd":{source:"iana",extensions:["ddd"]},"application/vnd.fujixerox.docuworks":{source:"iana",extensions:["xdw"]},"application/vnd.fujixerox.docuworks.binder":{source:"iana",extensions:["xbd"]},"application/vnd.fujixerox.docuworks.container":{source:"iana"},"application/vnd.fujixerox.hbpl":{source:"iana"},"application/vnd.fut-misnet":{source:"iana"},"application/vnd.futoin+cbor":{source:"iana"},"application/vnd.futoin+json":{source:"iana",compressible:!0},"application/vnd.fuzzysheet":{source:"iana",extensions:["fzs"]},"application/vnd.genomatix.tuxedo":{source:"iana",extensions:["txd"]},"application/vnd.geo+json":{source:"iana",compressible:!0},"application/vnd.geocube+xml":{source:"iana",compressible:!0},"application/vnd.geogebra.file":{source:"iana",extensions:["ggb"]},"application/vnd.geogebra.tool":{source:"iana",extensions:["ggt"]},"application/vnd.geometry-explorer":{source:"iana",extensions:["gex","gre"]},"application/vnd.geonext":{source:"iana",extensions:["gxt"]},"application/vnd.geoplan":{source:"iana",extensions:["g2w"]},"application/vnd.geospace":{source:"iana",extensions:["g3w"]},"application/vnd.gerber":{source:"iana"},"application/vnd.globalplatform.card-content-mgt":{source:"iana"},"application/vnd.globalplatform.card-content-mgt-response":{source:"iana"},"application/vnd.gmx":{source:"iana",extensions:["gmx"]},"application/vnd.google-apps.document":{compressible:!1,extensions:["gdoc"]},"application/vnd.google-apps.presentation":{compressible:!1,extensions:["gslides"]},"application/vnd.google-apps.spreadsheet":{compressible:!1,extensions:["gsheet"]},"application/vnd.google-earth.kml+xml":{source:"iana",compressible:!0,extensions:["kml"]},"application/vnd.google-earth.kmz":{source:"iana",compressible:!1,extensions:["kmz"]},"application/vnd.gov.sk.e-form+xml":{source:"iana",compressible:!0},"application/vnd.gov.sk.e-form+zip":{source:"iana",compressible:!1},"application/vnd.gov.sk.xmldatacontainer+xml":{source:"iana",compressible:!0},"application/vnd.grafeq":{source:"iana",extensions:["gqf","gqs"]},"application/vnd.gridmp":{source:"iana"},"application/vnd.groove-account":{source:"iana",extensions:["gac"]},"application/vnd.groove-help":{source:"iana",extensions:["ghf"]},"application/vnd.groove-identity-message":{source:"iana",extensions:["gim"]},"application/vnd.groove-injector":{source:"iana",extensions:["grv"]},"application/vnd.groove-tool-message":{source:"iana",extensions:["gtm"]},"application/vnd.groove-tool-template":{source:"iana",extensions:["tpl"]},"application/vnd.groove-vcard":{source:"iana",extensions:["vcg"]},"application/vnd.hal+json":{source:"iana",compressible:!0},"application/vnd.hal+xml":{source:"iana",compressible:!0,extensions:["hal"]},"application/vnd.handheld-entertainment+xml":{source:"iana",compressible:!0,extensions:["zmm"]},"application/vnd.hbci":{source:"iana",extensions:["hbci"]},"application/vnd.hc+json":{source:"iana",compressible:!0},"application/vnd.hcl-bireports":{source:"iana"},"application/vnd.hdt":{source:"iana"},"application/vnd.heroku+json":{source:"iana",compressible:!0},"application/vnd.hhe.lesson-player":{source:"iana",extensions:["les"]},"application/vnd.hp-hpgl":{source:"iana",extensions:["hpgl"]},"application/vnd.hp-hpid":{source:"iana",extensions:["hpid"]},"application/vnd.hp-hps":{source:"iana",extensions:["hps"]},"application/vnd.hp-jlyt":{source:"iana",extensions:["jlt"]},"application/vnd.hp-pcl":{source:"iana",extensions:["pcl"]},"application/vnd.hp-pclxl":{source:"iana",extensions:["pclxl"]},"application/vnd.httphone":{source:"iana"},"application/vnd.hydrostatix.sof-data":{source:"iana",extensions:["sfd-hdstx"]},"application/vnd.hyper+json":{source:"iana",compressible:!0},"application/vnd.hyper-item+json":{source:"iana",compressible:!0},"application/vnd.hyperdrive+json":{source:"iana",compressible:!0},"application/vnd.hzn-3d-crossword":{source:"iana"},"application/vnd.ibm.afplinedata":{source:"iana"},"application/vnd.ibm.electronic-media":{source:"iana"},"application/vnd.ibm.minipay":{source:"iana",extensions:["mpy"]},"application/vnd.ibm.modcap":{source:"iana",extensions:["afp","listafp","list3820"]},"application/vnd.ibm.rights-management":{source:"iana",extensions:["irm"]},"application/vnd.ibm.secure-container":{source:"iana",extensions:["sc"]},"application/vnd.iccprofile":{source:"iana",extensions:["icc","icm"]},"application/vnd.ieee.1905":{source:"iana"},"application/vnd.igloader":{source:"iana",extensions:["igl"]},"application/vnd.imagemeter.folder+zip":{source:"iana",compressible:!1},"application/vnd.imagemeter.image+zip":{source:"iana",compressible:!1},"application/vnd.immervision-ivp":{source:"iana",extensions:["ivp"]},"application/vnd.immervision-ivu":{source:"iana",extensions:["ivu"]},"application/vnd.ims.imsccv1p1":{source:"iana"},"application/vnd.ims.imsccv1p2":{source:"iana"},"application/vnd.ims.imsccv1p3":{source:"iana"},"application/vnd.ims.lis.v2.result+json":{source:"iana",compressible:!0},"application/vnd.ims.lti.v2.toolconsumerprofile+json":{source:"iana",compressible:!0},"application/vnd.ims.lti.v2.toolproxy+json":{source:"iana",compressible:!0},"application/vnd.ims.lti.v2.toolproxy.id+json":{source:"iana",compressible:!0},"application/vnd.ims.lti.v2.toolsettings+json":{source:"iana",compressible:!0},"application/vnd.ims.lti.v2.toolsettings.simple+json":{source:"iana",compressible:!0},"application/vnd.informedcontrol.rms+xml":{source:"iana",compressible:!0},"application/vnd.informix-visionary":{source:"iana"},"application/vnd.infotech.project":{source:"iana"},"application/vnd.infotech.project+xml":{source:"iana",compressible:!0},"application/vnd.innopath.wamp.notification":{source:"iana"},"application/vnd.insors.igm":{source:"iana",extensions:["igm"]},"application/vnd.intercon.formnet":{source:"iana",extensions:["xpw","xpx"]},"application/vnd.intergeo":{source:"iana",extensions:["i2g"]},"application/vnd.intertrust.digibox":{source:"iana"},"application/vnd.intertrust.nncp":{source:"iana"},"application/vnd.intu.qbo":{source:"iana",extensions:["qbo"]},"application/vnd.intu.qfx":{source:"iana",extensions:["qfx"]},"application/vnd.iptc.g2.catalogitem+xml":{source:"iana",compressible:!0},"application/vnd.iptc.g2.conceptitem+xml":{source:"iana",compressible:!0},"application/vnd.iptc.g2.knowledgeitem+xml":{source:"iana",compressible:!0},"application/vnd.iptc.g2.newsitem+xml":{source:"iana",compressible:!0},"application/vnd.iptc.g2.newsmessage+xml":{source:"iana",compressible:!0},"application/vnd.iptc.g2.packageitem+xml":{source:"iana",compressible:!0},"application/vnd.iptc.g2.planningitem+xml":{source:"iana",compressible:!0},"application/vnd.ipunplugged.rcprofile":{source:"iana",extensions:["rcprofile"]},"application/vnd.irepository.package+xml":{source:"iana",compressible:!0,extensions:["irp"]},"application/vnd.is-xpr":{source:"iana",extensions:["xpr"]},"application/vnd.isac.fcs":{source:"iana",extensions:["fcs"]},"application/vnd.jam":{source:"iana",extensions:["jam"]},"application/vnd.japannet-directory-service":{source:"iana"},"application/vnd.japannet-jpnstore-wakeup":{source:"iana"},"application/vnd.japannet-payment-wakeup":{source:"iana"},"application/vnd.japannet-registration":{source:"iana"},"application/vnd.japannet-registration-wakeup":{source:"iana"},"application/vnd.japannet-setstore-wakeup":{source:"iana"},"application/vnd.japannet-verification":{source:"iana"},"application/vnd.japannet-verification-wakeup":{source:"iana"},"application/vnd.jcp.javame.midlet-rms":{source:"iana",extensions:["rms"]},"application/vnd.jisp":{source:"iana",extensions:["jisp"]},"application/vnd.joost.joda-archive":{source:"iana",extensions:["joda"]},"application/vnd.jsk.isdn-ngn":{source:"iana"},"application/vnd.kahootz":{source:"iana",extensions:["ktz","ktr"]},"application/vnd.kde.karbon":{source:"iana",extensions:["karbon"]},"application/vnd.kde.kchart":{source:"iana",extensions:["chrt"]},"application/vnd.kde.kformula":{source:"iana",extensions:["kfo"]},"application/vnd.kde.kivio":{source:"iana",extensions:["flw"]},"application/vnd.kde.kontour":{source:"iana",extensions:["kon"]},"application/vnd.kde.kpresenter":{source:"iana",extensions:["kpr","kpt"]},"application/vnd.kde.kspread":{source:"iana",extensions:["ksp"]},"application/vnd.kde.kword":{source:"iana",extensions:["kwd","kwt"]},"application/vnd.kenameaapp":{source:"iana",extensions:["htke"]},"application/vnd.kidspiration":{source:"iana",extensions:["kia"]},"application/vnd.kinar":{source:"iana",extensions:["kne","knp"]},"application/vnd.koan":{source:"iana",extensions:["skp","skd","skt","skm"]},"application/vnd.kodak-descriptor":{source:"iana",extensions:["sse"]},"application/vnd.las.las+json":{source:"iana",compressible:!0},"application/vnd.las.las+xml":{source:"iana",compressible:!0,extensions:["lasxml"]},"application/vnd.leap+json":{source:"iana",compressible:!0},"application/vnd.liberty-request+xml":{source:"iana",compressible:!0},"application/vnd.llamagraphics.life-balance.desktop":{source:"iana",extensions:["lbd"]},"application/vnd.llamagraphics.life-balance.exchange+xml":{source:"iana",compressible:!0,extensions:["lbe"]},"application/vnd.lotus-1-2-3":{source:"iana",extensions:["123"]},"application/vnd.lotus-approach":{source:"iana",extensions:["apr"]},"application/vnd.lotus-freelance":{source:"iana",extensions:["pre"]},"application/vnd.lotus-notes":{source:"iana",extensions:["nsf"]},"application/vnd.lotus-organizer":{source:"iana",extensions:["org"]},"application/vnd.lotus-screencam":{source:"iana",extensions:["scm"]},"application/vnd.lotus-wordpro":{source:"iana",extensions:["lwp"]},"application/vnd.macports.portpkg":{source:"iana",extensions:["portpkg"]},"application/vnd.mapbox-vector-tile":{source:"iana"},"application/vnd.marlin.drm.actiontoken+xml":{source:"iana",compressible:!0},"application/vnd.marlin.drm.conftoken+xml":{source:"iana",compressible:!0},"application/vnd.marlin.drm.license+xml":{source:"iana",compressible:!0},"application/vnd.marlin.drm.mdcf":{source:"iana"},"application/vnd.mason+json":{source:"iana",compressible:!0},"application/vnd.maxmind.maxmind-db":{source:"iana"},"application/vnd.mcd":{source:"iana",extensions:["mcd"]},"application/vnd.medcalcdata":{source:"iana",extensions:["mc1"]},"application/vnd.mediastation.cdkey":{source:"iana",extensions:["cdkey"]},"application/vnd.meridian-slingshot":{source:"iana"},"application/vnd.mfer":{source:"iana",extensions:["mwf"]},"application/vnd.mfmp":{source:"iana",extensions:["mfm"]},"application/vnd.micro+json":{source:"iana",compressible:!0},"application/vnd.micrografx.flo":{source:"iana",extensions:["flo"]},"application/vnd.micrografx.igx":{source:"iana",extensions:["igx"]},"application/vnd.microsoft.portable-executable":{source:"iana"},"application/vnd.microsoft.windows.thumbnail-cache":{source:"iana"},"application/vnd.miele+json":{source:"iana",compressible:!0},"application/vnd.mif":{source:"iana",extensions:["mif"]},"application/vnd.minisoft-hp3000-save":{source:"iana"},"application/vnd.mitsubishi.misty-guard.trustweb":{source:"iana"},"application/vnd.mobius.daf":{source:"iana",extensions:["daf"]},"application/vnd.mobius.dis":{source:"iana",extensions:["dis"]},"application/vnd.mobius.mbk":{source:"iana",extensions:["mbk"]},"application/vnd.mobius.mqy":{source:"iana",extensions:["mqy"]},"application/vnd.mobius.msl":{source:"iana",extensions:["msl"]},"application/vnd.mobius.plc":{source:"iana",extensions:["plc"]},"application/vnd.mobius.txf":{source:"iana",extensions:["txf"]},"application/vnd.mophun.application":{source:"iana",extensions:["mpn"]},"application/vnd.mophun.certificate":{source:"iana",extensions:["mpc"]},"application/vnd.motorola.flexsuite":{source:"iana"},"application/vnd.motorola.flexsuite.adsi":{source:"iana"},"application/vnd.motorola.flexsuite.fis":{source:"iana"},"application/vnd.motorola.flexsuite.gotap":{source:"iana"},"application/vnd.motorola.flexsuite.kmr":{source:"iana"},"application/vnd.motorola.flexsuite.ttc":{source:"iana"},"application/vnd.motorola.flexsuite.wem":{source:"iana"},"application/vnd.motorola.iprm":{source:"iana"},"application/vnd.mozilla.xul+xml":{source:"iana",compressible:!0,extensions:["xul"]},"application/vnd.ms-3mfdocument":{source:"iana"},"application/vnd.ms-artgalry":{source:"iana",extensions:["cil"]},"application/vnd.ms-asf":{source:"iana"},"application/vnd.ms-cab-compressed":{source:"iana",extensions:["cab"]},"application/vnd.ms-color.iccprofile":{source:"apache"},"application/vnd.ms-excel":{source:"iana",compressible:!1,extensions:["xls","xlm","xla","xlc","xlt","xlw"]},"application/vnd.ms-excel.addin.macroenabled.12":{source:"iana",extensions:["xlam"]},"application/vnd.ms-excel.sheet.binary.macroenabled.12":{source:"iana",extensions:["xlsb"]},"application/vnd.ms-excel.sheet.macroenabled.12":{source:"iana",extensions:["xlsm"]},"application/vnd.ms-excel.template.macroenabled.12":{source:"iana",extensions:["xltm"]},"application/vnd.ms-fontobject":{source:"iana",compressible:!0,extensions:["eot"]},"application/vnd.ms-htmlhelp":{source:"iana",extensions:["chm"]},"application/vnd.ms-ims":{source:"iana",extensions:["ims"]},"application/vnd.ms-lrm":{source:"iana",extensions:["lrm"]},"application/vnd.ms-office.activex+xml":{source:"iana",compressible:!0},"application/vnd.ms-officetheme":{source:"iana",extensions:["thmx"]},"application/vnd.ms-opentype":{source:"apache",compressible:!0},"application/vnd.ms-outlook":{compressible:!1,extensions:["msg"]},"application/vnd.ms-package.obfuscated-opentype":{source:"apache"},"application/vnd.ms-pki.seccat":{source:"apache",extensions:["cat"]},"application/vnd.ms-pki.stl":{source:"apache",extensions:["stl"]},"application/vnd.ms-playready.initiator+xml":{source:"iana",compressible:!0},"application/vnd.ms-powerpoint":{source:"iana",compressible:!1,extensions:["ppt","pps","pot"]},"application/vnd.ms-powerpoint.addin.macroenabled.12":{source:"iana",extensions:["ppam"]},"application/vnd.ms-powerpoint.presentation.macroenabled.12":{source:"iana",extensions:["pptm"]},"application/vnd.ms-powerpoint.slide.macroenabled.12":{source:"iana",extensions:["sldm"]},"application/vnd.ms-powerpoint.slideshow.macroenabled.12":{source:"iana",extensions:["ppsm"]},"application/vnd.ms-powerpoint.template.macroenabled.12":{source:"iana",extensions:["potm"]},"application/vnd.ms-printdevicecapabilities+xml":{source:"iana",compressible:!0},"application/vnd.ms-printing.printticket+xml":{source:"apache",compressible:!0},"application/vnd.ms-printschematicket+xml":{source:"iana",compressible:!0},"application/vnd.ms-project":{source:"iana",extensions:["mpp","mpt"]},"application/vnd.ms-tnef":{source:"iana"},"application/vnd.ms-windows.devicepairing":{source:"iana"},"application/vnd.ms-windows.nwprinting.oob":{source:"iana"},"application/vnd.ms-windows.printerpairing":{source:"iana"},"application/vnd.ms-windows.wsd.oob":{source:"iana"},"application/vnd.ms-wmdrm.lic-chlg-req":{source:"iana"},"application/vnd.ms-wmdrm.lic-resp":{source:"iana"},"application/vnd.ms-wmdrm.meter-chlg-req":{source:"iana"},"application/vnd.ms-wmdrm.meter-resp":{source:"iana"},"application/vnd.ms-word.document.macroenabled.12":{source:"iana",extensions:["docm"]},"application/vnd.ms-word.template.macroenabled.12":{source:"iana",extensions:["dotm"]},"application/vnd.ms-works":{source:"iana",extensions:["wps","wks","wcm","wdb"]},"application/vnd.ms-wpl":{source:"iana",extensions:["wpl"]},"application/vnd.ms-xpsdocument":{source:"iana",compressible:!1,extensions:["xps"]},"application/vnd.msa-disk-image":{source:"iana"},"application/vnd.mseq":{source:"iana",extensions:["mseq"]},"application/vnd.msign":{source:"iana"},"application/vnd.multiad.creator":{source:"iana"},"application/vnd.multiad.creator.cif":{source:"iana"},"application/vnd.music-niff":{source:"iana"},"application/vnd.musician":{source:"iana",extensions:["mus"]},"application/vnd.muvee.style":{source:"iana",extensions:["msty"]},"application/vnd.mynfc":{source:"iana",extensions:["taglet"]},"application/vnd.ncd.control":{source:"iana"},"application/vnd.ncd.reference":{source:"iana"},"application/vnd.nearst.inv+json":{source:"iana",compressible:!0},"application/vnd.nervana":{source:"iana"},"application/vnd.netfpx":{source:"iana"},"application/vnd.neurolanguage.nlu":{source:"iana",extensions:["nlu"]},"application/vnd.nimn":{source:"iana"},"application/vnd.nintendo.nitro.rom":{source:"iana"},"application/vnd.nintendo.snes.rom":{source:"iana"},"application/vnd.nitf":{source:"iana",extensions:["ntf","nitf"]},"application/vnd.noblenet-directory":{source:"iana",extensions:["nnd"]},"application/vnd.noblenet-sealer":{source:"iana",extensions:["nns"]},"application/vnd.noblenet-web":{source:"iana",extensions:["nnw"]},"application/vnd.nokia.catalogs":{source:"iana"},"application/vnd.nokia.conml+wbxml":{source:"iana"},"application/vnd.nokia.conml+xml":{source:"iana",compressible:!0},"application/vnd.nokia.iptv.config+xml":{source:"iana",compressible:!0},"application/vnd.nokia.isds-radio-presets":{source:"iana"},"application/vnd.nokia.landmark+wbxml":{source:"iana"},"application/vnd.nokia.landmark+xml":{source:"iana",compressible:!0},"application/vnd.nokia.landmarkcollection+xml":{source:"iana",compressible:!0},"application/vnd.nokia.n-gage.ac+xml":{source:"iana",compressible:!0},"application/vnd.nokia.n-gage.data":{source:"iana",extensions:["ngdat"]},"application/vnd.nokia.n-gage.symbian.install":{source:"iana",extensions:["n-gage"]},"application/vnd.nokia.ncd":{source:"iana"},"application/vnd.nokia.pcd+wbxml":{source:"iana"},"application/vnd.nokia.pcd+xml":{source:"iana",compressible:!0},"application/vnd.nokia.radio-preset":{source:"iana",extensions:["rpst"]},"application/vnd.nokia.radio-presets":{source:"iana",extensions:["rpss"]},"application/vnd.novadigm.edm":{source:"iana",extensions:["edm"]},"application/vnd.novadigm.edx":{source:"iana",extensions:["edx"]},"application/vnd.novadigm.ext":{source:"iana",extensions:["ext"]},"application/vnd.ntt-local.content-share":{source:"iana"},"application/vnd.ntt-local.file-transfer":{source:"iana"},"application/vnd.ntt-local.ogw_remote-access":{source:"iana"},"application/vnd.ntt-local.sip-ta_remote":{source:"iana"},"application/vnd.ntt-local.sip-ta_tcp_stream":{source:"iana"},"application/vnd.oasis.opendocument.chart":{source:"iana",extensions:["odc"]},"application/vnd.oasis.opendocument.chart-template":{source:"iana",extensions:["otc"]},"application/vnd.oasis.opendocument.database":{source:"iana",extensions:["odb"]},"application/vnd.oasis.opendocument.formula":{source:"iana",extensions:["odf"]},"application/vnd.oasis.opendocument.formula-template":{source:"iana",extensions:["odft"]},"application/vnd.oasis.opendocument.graphics":{source:"iana",compressible:!1,extensions:["odg"]},"application/vnd.oasis.opendocument.graphics-template":{source:"iana",extensions:["otg"]},"application/vnd.oasis.opendocument.image":{source:"iana",extensions:["odi"]},"application/vnd.oasis.opendocument.image-template":{source:"iana",extensions:["oti"]},"application/vnd.oasis.opendocument.presentation":{source:"iana",compressible:!1,extensions:["odp"]},"application/vnd.oasis.opendocument.presentation-template":{source:"iana",extensions:["otp"]},"application/vnd.oasis.opendocument.spreadsheet":{source:"iana",compressible:!1,extensions:["ods"]},"application/vnd.oasis.opendocument.spreadsheet-template":{source:"iana",extensions:["ots"]},"application/vnd.oasis.opendocument.text":{source:"iana",compressible:!1,extensions:["odt"]},"application/vnd.oasis.opendocument.text-master":{source:"iana",extensions:["odm"]},"application/vnd.oasis.opendocument.text-template":{source:"iana",extensions:["ott"]},"application/vnd.oasis.opendocument.text-web":{source:"iana",extensions:["oth"]},"application/vnd.obn":{source:"iana"},"application/vnd.ocf+cbor":{source:"iana"},"application/vnd.oftn.l10n+json":{source:"iana",compressible:!0},"application/vnd.oipf.contentaccessdownload+xml":{source:"iana",compressible:!0},"application/vnd.oipf.contentaccessstreaming+xml":{source:"iana",compressible:!0},"application/vnd.oipf.cspg-hexbinary":{source:"iana"},"application/vnd.oipf.dae.svg+xml":{source:"iana",compressible:!0},"application/vnd.oipf.dae.xhtml+xml":{source:"iana",compressible:!0},"application/vnd.oipf.mippvcontrolmessage+xml":{source:"iana",compressible:!0},"application/vnd.oipf.pae.gem":{source:"iana"},"application/vnd.oipf.spdiscovery+xml":{source:"iana",compressible:!0},"application/vnd.oipf.spdlist+xml":{source:"iana",compressible:!0},"application/vnd.oipf.ueprofile+xml":{source:"iana",compressible:!0},"application/vnd.oipf.userprofile+xml":{source:"iana",compressible:!0},"application/vnd.olpc-sugar":{source:"iana",extensions:["xo"]},"application/vnd.oma-scws-config":{source:"iana"},"application/vnd.oma-scws-http-request":{source:"iana"},"application/vnd.oma-scws-http-response":{source:"iana"},"application/vnd.oma.bcast.associated-procedure-parameter+xml":{source:"iana",compressible:!0},"application/vnd.oma.bcast.drm-trigger+xml":{source:"iana",compressible:!0},"application/vnd.oma.bcast.imd+xml":{source:"iana",compressible:!0},"application/vnd.oma.bcast.ltkm":{source:"iana"},"application/vnd.oma.bcast.notification+xml":{source:"iana",compressible:!0},"application/vnd.oma.bcast.provisioningtrigger":{source:"iana"},"application/vnd.oma.bcast.sgboot":{source:"iana"},"application/vnd.oma.bcast.sgdd+xml":{source:"iana",compressible:!0},"application/vnd.oma.bcast.sgdu":{source:"iana"},"application/vnd.oma.bcast.simple-symbol-container":{source:"iana"},"application/vnd.oma.bcast.smartcard-trigger+xml":{source:"iana",compressible:!0},"application/vnd.oma.bcast.sprov+xml":{source:"iana",compressible:!0},"application/vnd.oma.bcast.stkm":{source:"iana"},"application/vnd.oma.cab-address-book+xml":{source:"iana",compressible:!0},"application/vnd.oma.cab-feature-handler+xml":{source:"iana",compressible:!0},"application/vnd.oma.cab-pcc+xml":{source:"iana",compressible:!0},"application/vnd.oma.cab-subs-invite+xml":{source:"iana",compressible:!0},"application/vnd.oma.cab-user-prefs+xml":{source:"iana",compressible:!0},"application/vnd.oma.dcd":{source:"iana"},"application/vnd.oma.dcdc":{source:"iana"},"application/vnd.oma.dd2+xml":{source:"iana",compressible:!0,extensions:["dd2"]},"application/vnd.oma.drm.risd+xml":{source:"iana",compressible:!0},"application/vnd.oma.group-usage-list+xml":{source:"iana",compressible:!0},"application/vnd.oma.lwm2m+json":{source:"iana",compressible:!0},"application/vnd.oma.lwm2m+tlv":{source:"iana"},"application/vnd.oma.pal+xml":{source:"iana",compressible:!0},"application/vnd.oma.poc.detailed-progress-report+xml":{source:"iana",compressible:!0},"application/vnd.oma.poc.final-report+xml":{source:"iana",compressible:!0},"application/vnd.oma.poc.groups+xml":{source:"iana",compressible:!0},"application/vnd.oma.poc.invocation-descriptor+xml":{source:"iana",compressible:!0},"application/vnd.oma.poc.optimized-progress-report+xml":{source:"iana",compressible:!0},"application/vnd.oma.push":{source:"iana"},"application/vnd.oma.scidm.messages+xml":{source:"iana",compressible:!0},"application/vnd.oma.xcap-directory+xml":{source:"iana",compressible:!0},"application/vnd.omads-email+xml":{source:"iana",compressible:!0},"application/vnd.omads-file+xml":{source:"iana",compressible:!0},"application/vnd.omads-folder+xml":{source:"iana",compressible:!0},"application/vnd.omaloc-supl-init":{source:"iana"},"application/vnd.onepager":{source:"iana"},"application/vnd.onepagertamp":{source:"iana"},"application/vnd.onepagertamx":{source:"iana"},"application/vnd.onepagertat":{source:"iana"},"application/vnd.onepagertatp":{source:"iana"},"application/vnd.onepagertatx":{source:"iana"},"application/vnd.openblox.game+xml":{source:"iana",compressible:!0},"application/vnd.openblox.game-binary":{source:"iana"},"application/vnd.openeye.oeb":{source:"iana"},"application/vnd.openofficeorg.extension":{source:"apache",extensions:["oxt"]},"application/vnd.openstreetmap.data+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.custom-properties+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.customxmlproperties+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.drawing+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.drawingml.chart+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.drawingml.chartshapes+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.drawingml.diagramcolors+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.drawingml.diagramdata+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.drawingml.diagramlayout+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.drawingml.diagramstyle+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.extended-properties+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.presentationml.commentauthors+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.presentationml.comments+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.presentationml.handoutmaster+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.presentationml.notesmaster+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.presentationml.notesslide+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.presentationml.presentation":{source:"iana",compressible:!1,extensions:["pptx"]},"application/vnd.openxmlformats-officedocument.presentationml.presentation.main+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.presentationml.presprops+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.presentationml.slide":{source:"iana",extensions:["sldx"]},"application/vnd.openxmlformats-officedocument.presentationml.slide+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.presentationml.slidelayout+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.presentationml.slidemaster+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.presentationml.slideshow":{source:"iana",extensions:["ppsx"]},"application/vnd.openxmlformats-officedocument.presentationml.slideshow.main+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.presentationml.slideupdateinfo+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.presentationml.tablestyles+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.presentationml.tags+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.presentationml.template":{source:"iana",extensions:["potx"]},"application/vnd.openxmlformats-officedocument.presentationml.template.main+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.presentationml.viewprops+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.spreadsheetml.calcchain+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.spreadsheetml.chartsheet+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.spreadsheetml.comments+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.spreadsheetml.connections+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.spreadsheetml.dialogsheet+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.spreadsheetml.externallink+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.spreadsheetml.pivotcachedefinition+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.spreadsheetml.pivotcacherecords+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.spreadsheetml.pivottable+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.spreadsheetml.querytable+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.spreadsheetml.revisionheaders+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.spreadsheetml.revisionlog+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.spreadsheetml.sharedstrings+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet":{source:"iana",compressible:!1,extensions:["xlsx"]},"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet.main+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.spreadsheetml.sheetmetadata+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.spreadsheetml.styles+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.spreadsheetml.table+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.spreadsheetml.tablesinglecells+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.spreadsheetml.template":{source:"iana",extensions:["xltx"]},"application/vnd.openxmlformats-officedocument.spreadsheetml.template.main+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.spreadsheetml.usernames+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.spreadsheetml.volatiledependencies+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.spreadsheetml.worksheet+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.theme+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.themeoverride+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.vmldrawing":{source:"iana"},"application/vnd.openxmlformats-officedocument.wordprocessingml.comments+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.wordprocessingml.document":{source:"iana",compressible:!1,extensions:["docx"]},"application/vnd.openxmlformats-officedocument.wordprocessingml.document.glossary+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.wordprocessingml.document.main+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.wordprocessingml.endnotes+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.wordprocessingml.fonttable+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.wordprocessingml.footer+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.wordprocessingml.footnotes+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.wordprocessingml.numbering+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.wordprocessingml.settings+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.wordprocessingml.styles+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.wordprocessingml.template":{source:"iana",extensions:["dotx"]},"application/vnd.openxmlformats-officedocument.wordprocessingml.template.main+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.wordprocessingml.websettings+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-package.core-properties+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-package.digital-signature-xmlsignature+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-package.relationships+xml":{source:"iana",compressible:!0},"application/vnd.oracle.resource+json":{source:"iana",compressible:!0},"application/vnd.orange.indata":{source:"iana"},"application/vnd.osa.netdeploy":{source:"iana"},"application/vnd.osgeo.mapguide.package":{source:"iana",extensions:["mgp"]},"application/vnd.osgi.bundle":{source:"iana"},"application/vnd.osgi.dp":{source:"iana",extensions:["dp"]},"application/vnd.osgi.subsystem":{source:"iana",extensions:["esa"]},"application/vnd.otps.ct-kip+xml":{source:"iana",compressible:!0},"application/vnd.oxli.countgraph":{source:"iana"},"application/vnd.pagerduty+json":{source:"iana",compressible:!0},"application/vnd.palm":{source:"iana",extensions:["pdb","pqa","oprc"]},"application/vnd.panoply":{source:"iana"},"application/vnd.paos.xml":{source:"iana"},"application/vnd.patentdive":{source:"iana"},"application/vnd.pawaafile":{source:"iana",extensions:["paw"]},"application/vnd.pcos":{source:"iana"},"application/vnd.pg.format":{source:"iana",extensions:["str"]},"application/vnd.pg.osasli":{source:"iana",extensions:["ei6"]},"application/vnd.piaccess.application-licence":{source:"iana"},"application/vnd.picsel":{source:"iana",extensions:["efif"]},"application/vnd.pmi.widget":{source:"iana",extensions:["wg"]},"application/vnd.poc.group-advertisement+xml":{source:"iana",compressible:!0},"application/vnd.pocketlearn":{source:"iana",extensions:["plf"]},"application/vnd.powerbuilder6":{source:"iana",extensions:["pbd"]},"application/vnd.powerbuilder6-s":{source:"iana"},"application/vnd.powerbuilder7":{source:"iana"},"application/vnd.powerbuilder7-s":{source:"iana"},"application/vnd.powerbuilder75":{source:"iana"},"application/vnd.powerbuilder75-s":{source:"iana"},"application/vnd.preminet":{source:"iana"},"application/vnd.previewsystems.box":{source:"iana",extensions:["box"]},"application/vnd.proteus.magazine":{source:"iana",extensions:["mgz"]},"application/vnd.psfs":{source:"iana"},"application/vnd.publishare-delta-tree":{source:"iana",extensions:["qps"]},"application/vnd.pvi.ptid1":{source:"iana",extensions:["ptid"]},"application/vnd.pwg-multiplexed":{source:"iana"},"application/vnd.pwg-xhtml-print+xml":{source:"iana",compressible:!0},"application/vnd.qualcomm.brew-app-res":{source:"iana"},"application/vnd.quarantainenet":{source:"iana"},"application/vnd.quark.quarkxpress":{source:"iana",extensions:["qxd","qxt","qwd","qwt","qxl","qxb"]},"application/vnd.quobject-quoxdocument":{source:"iana"},"application/vnd.radisys.moml+xml":{source:"iana",compressible:!0},"application/vnd.radisys.msml+xml":{source:"iana",compressible:!0},"application/vnd.radisys.msml-audit+xml":{source:"iana",compressible:!0},"application/vnd.radisys.msml-audit-conf+xml":{source:"iana",compressible:!0},"application/vnd.radisys.msml-audit-conn+xml":{source:"iana",compressible:!0},"application/vnd.radisys.msml-audit-dialog+xml":{source:"iana",compressible:!0},"application/vnd.radisys.msml-audit-stream+xml":{source:"iana",compressible:!0},"application/vnd.radisys.msml-conf+xml":{source:"iana",compressible:!0},"application/vnd.radisys.msml-dialog+xml":{source:"iana",compressible:!0},"application/vnd.radisys.msml-dialog-base+xml":{source:"iana",compressible:!0},"application/vnd.radisys.msml-dialog-fax-detect+xml":{source:"iana",compressible:!0},"application/vnd.radisys.msml-dialog-fax-sendrecv+xml":{source:"iana",compressible:!0},"application/vnd.radisys.msml-dialog-group+xml":{source:"iana",compressible:!0},"application/vnd.radisys.msml-dialog-speech+xml":{source:"iana",compressible:!0},"application/vnd.radisys.msml-dialog-transform+xml":{source:"iana",compressible:!0},"application/vnd.rainstor.data":{source:"iana"},"application/vnd.rapid":{source:"iana"},"application/vnd.rar":{source:"iana"},"application/vnd.realvnc.bed":{source:"iana",extensions:["bed"]},"application/vnd.recordare.musicxml":{source:"iana",extensions:["mxl"]},"application/vnd.recordare.musicxml+xml":{source:"iana",compressible:!0,extensions:["musicxml"]},"application/vnd.renlearn.rlprint":{source:"iana"},"application/vnd.restful+json":{source:"iana",compressible:!0},"application/vnd.rig.cryptonote":{source:"iana",extensions:["cryptonote"]},"application/vnd.rim.cod":{source:"apache",extensions:["cod"]},"application/vnd.rn-realmedia":{source:"apache",extensions:["rm"]},"application/vnd.rn-realmedia-vbr":{source:"apache",extensions:["rmvb"]},"application/vnd.route66.link66+xml":{source:"iana",compressible:!0,extensions:["link66"]},"application/vnd.rs-274x":{source:"iana"},"application/vnd.ruckus.download":{source:"iana"},"application/vnd.s3sms":{source:"iana"},"application/vnd.sailingtracker.track":{source:"iana",extensions:["st"]},"application/vnd.sbm.cid":{source:"iana"},"application/vnd.sbm.mid2":{source:"iana"},"application/vnd.scribus":{source:"iana"},"application/vnd.sealed.3df":{source:"iana"},"application/vnd.sealed.csf":{source:"iana"},"application/vnd.sealed.doc":{source:"iana"},"application/vnd.sealed.eml":{source:"iana"},"application/vnd.sealed.mht":{source:"iana"},"application/vnd.sealed.net":{source:"iana"},"application/vnd.sealed.ppt":{source:"iana"},"application/vnd.sealed.tiff":{source:"iana"},"application/vnd.sealed.xls":{source:"iana"},"application/vnd.sealedmedia.softseal.html":{source:"iana"},"application/vnd.sealedmedia.softseal.pdf":{source:"iana"},"application/vnd.seemail":{source:"iana",extensions:["see"]},"application/vnd.sema":{source:"iana",extensions:["sema"]},"application/vnd.semd":{source:"iana",extensions:["semd"]},"application/vnd.semf":{source:"iana",extensions:["semf"]},"application/vnd.shana.informed.formdata":{source:"iana",extensions:["ifm"]},"application/vnd.shana.informed.formtemplate":{source:"iana",extensions:["itp"]},"application/vnd.shana.informed.interchange":{source:"iana",extensions:["iif"]},"application/vnd.shana.informed.package":{source:"iana",extensions:["ipk"]},"application/vnd.shootproof+json":{source:"iana",compressible:!0},"application/vnd.sigrok.session":{source:"iana"},"application/vnd.simtech-mindmapper":{source:"iana",extensions:["twd","twds"]},"application/vnd.siren+json":{source:"iana",compressible:!0},"application/vnd.smaf":{source:"iana",extensions:["mmf"]},"application/vnd.smart.notebook":{source:"iana"},"application/vnd.smart.teacher":{source:"iana",extensions:["teacher"]},"application/vnd.software602.filler.form+xml":{source:"iana",compressible:!0},"application/vnd.software602.filler.form-xml-zip":{source:"iana"},"application/vnd.solent.sdkm+xml":{source:"iana",compressible:!0,extensions:["sdkm","sdkd"]},"application/vnd.spotfire.dxp":{source:"iana",extensions:["dxp"]},"application/vnd.spotfire.sfs":{source:"iana",extensions:["sfs"]},"application/vnd.sqlite3":{source:"iana"},"application/vnd.sss-cod":{source:"iana"},"application/vnd.sss-dtf":{source:"iana"},"application/vnd.sss-ntf":{source:"iana"},"application/vnd.stardivision.calc":{source:"apache",extensions:["sdc"]},"application/vnd.stardivision.draw":{source:"apache",extensions:["sda"]},"application/vnd.stardivision.impress":{source:"apache",extensions:["sdd"]},"application/vnd.stardivision.math":{source:"apache",extensions:["smf"]},"application/vnd.stardivision.writer":{source:"apache",extensions:["sdw","vor"]},"application/vnd.stardivision.writer-global":{source:"apache",extensions:["sgl"]},"application/vnd.stepmania.package":{source:"iana",extensions:["smzip"]},"application/vnd.stepmania.stepchart":{source:"iana",extensions:["sm"]},"application/vnd.street-stream":{source:"iana"},"application/vnd.sun.wadl+xml":{source:"iana",compressible:!0,extensions:["wadl"]},"application/vnd.sun.xml.calc":{source:"apache",extensions:["sxc"]},"application/vnd.sun.xml.calc.template":{source:"apache",extensions:["stc"]},"application/vnd.sun.xml.draw":{source:"apache",extensions:["sxd"]},"application/vnd.sun.xml.draw.template":{source:"apache",extensions:["std"]},"application/vnd.sun.xml.impress":{source:"apache",extensions:["sxi"]},"application/vnd.sun.xml.impress.template":{source:"apache",extensions:["sti"]},"application/vnd.sun.xml.math":{source:"apache",extensions:["sxm"]},"application/vnd.sun.xml.writer":{source:"apache",extensions:["sxw"]},"application/vnd.sun.xml.writer.global":{source:"apache",extensions:["sxg"]},"application/vnd.sun.xml.writer.template":{source:"apache",extensions:["stw"]},"application/vnd.sus-calendar":{source:"iana",extensions:["sus","susp"]},"application/vnd.svd":{source:"iana",extensions:["svd"]},"application/vnd.swiftview-ics":{source:"iana"},"application/vnd.symbian.install":{source:"apache",extensions:["sis","sisx"]},"application/vnd.syncml+xml":{source:"iana",compressible:!0,extensions:["xsm"]},"application/vnd.syncml.dm+wbxml":{source:"iana",extensions:["bdm"]},"application/vnd.syncml.dm+xml":{source:"iana",compressible:!0,extensions:["xdm"]},"application/vnd.syncml.dm.notification":{source:"iana"},"application/vnd.syncml.dmddf+wbxml":{source:"iana"},"application/vnd.syncml.dmddf+xml":{source:"iana",compressible:!0},"application/vnd.syncml.dmtnds+wbxml":{source:"iana"},"application/vnd.syncml.dmtnds+xml":{source:"iana",compressible:!0},"application/vnd.syncml.ds.notification":{source:"iana"},"application/vnd.tableschema+json":{source:"iana",compressible:!0},"application/vnd.tao.intent-module-archive":{source:"iana",extensions:["tao"]},"application/vnd.tcpdump.pcap":{source:"iana",extensions:["pcap","cap","dmp"]},"application/vnd.think-cell.ppttc+json":{source:"iana",compressible:!0},"application/vnd.tmd.mediaflex.api+xml":{source:"iana",compressible:!0},"application/vnd.tml":{source:"iana"},"application/vnd.tmobile-livetv":{source:"iana",extensions:["tmo"]},"application/vnd.tri.onesource":{source:"iana"},"application/vnd.trid.tpt":{source:"iana",extensions:["tpt"]},"application/vnd.triscape.mxs":{source:"iana",extensions:["mxs"]},"application/vnd.trueapp":{source:"iana",extensions:["tra"]},"application/vnd.truedoc":{source:"iana"},"application/vnd.ubisoft.webplayer":{source:"iana"},"application/vnd.ufdl":{source:"iana",extensions:["ufd","ufdl"]},"application/vnd.uiq.theme":{source:"iana",extensions:["utz"]},"application/vnd.umajin":{source:"iana",extensions:["umj"]},"application/vnd.unity":{source:"iana",extensions:["unityweb"]},"application/vnd.uoml+xml":{source:"iana",compressible:!0,extensions:["uoml"]},"application/vnd.uplanet.alert":{source:"iana"},"application/vnd.uplanet.alert-wbxml":{source:"iana"},"application/vnd.uplanet.bearer-choice":{source:"iana"},"application/vnd.uplanet.bearer-choice-wbxml":{source:"iana"},"application/vnd.uplanet.cacheop":{source:"iana"},"application/vnd.uplanet.cacheop-wbxml":{source:"iana"},"application/vnd.uplanet.channel":{source:"iana"},"application/vnd.uplanet.channel-wbxml":{source:"iana"},"application/vnd.uplanet.list":{source:"iana"},"application/vnd.uplanet.list-wbxml":{source:"iana"},"application/vnd.uplanet.listcmd":{source:"iana"},"application/vnd.uplanet.listcmd-wbxml":{source:"iana"},"application/vnd.uplanet.signal":{source:"iana"},"application/vnd.uri-map":{source:"iana"},"application/vnd.valve.source.material":{source:"iana"},"application/vnd.vcx":{source:"iana",extensions:["vcx"]},"application/vnd.vd-study":{source:"iana"},"application/vnd.vectorworks":{source:"iana"},"application/vnd.vel+json":{source:"iana",compressible:!0},"application/vnd.verimatrix.vcas":{source:"iana"},"application/vnd.vidsoft.vidconference":{source:"iana"},"application/vnd.visio":{source:"iana",extensions:["vsd","vst","vss","vsw"]},"application/vnd.visionary":{source:"iana",extensions:["vis"]},"application/vnd.vividence.scriptfile":{source:"iana"},"application/vnd.vsf":{source:"iana",extensions:["vsf"]},"application/vnd.wap.sic":{source:"iana"},"application/vnd.wap.slc":{source:"iana"},"application/vnd.wap.wbxml":{source:"iana",extensions:["wbxml"]},"application/vnd.wap.wmlc":{source:"iana",extensions:["wmlc"]},"application/vnd.wap.wmlscriptc":{source:"iana",extensions:["wmlsc"]},"application/vnd.webturbo":{source:"iana",extensions:["wtb"]},"application/vnd.wfa.p2p":{source:"iana"},"application/vnd.wfa.wsc":{source:"iana"},"application/vnd.windows.devicepairing":{source:"iana"},"application/vnd.wmc":{source:"iana"},"application/vnd.wmf.bootstrap":{source:"iana"},"application/vnd.wolfram.mathematica":{source:"iana"},"application/vnd.wolfram.mathematica.package":{source:"iana"},"application/vnd.wolfram.player":{source:"iana",extensions:["nbp"]},"application/vnd.wordperfect":{source:"iana",extensions:["wpd"]},"application/vnd.wqd":{source:"iana",extensions:["wqd"]},"application/vnd.wrq-hp3000-labelled":{source:"iana"},"application/vnd.wt.stf":{source:"iana",extensions:["stf"]},"application/vnd.wv.csp+wbxml":{source:"iana"},"application/vnd.wv.csp+xml":{source:"iana",compressible:!0},"application/vnd.wv.ssp+xml":{source:"iana",compressible:!0},"application/vnd.xacml+json":{source:"iana",compressible:!0},"application/vnd.xara":{source:"iana",extensions:["xar"]},"application/vnd.xfdl":{source:"iana",extensions:["xfdl"]},"application/vnd.xfdl.webform":{source:"iana"},"application/vnd.xmi+xml":{source:"iana",compressible:!0},"application/vnd.xmpie.cpkg":{source:"iana"},"application/vnd.xmpie.dpkg":{source:"iana"},"application/vnd.xmpie.plan":{source:"iana"},"application/vnd.xmpie.ppkg":{source:"iana"},"application/vnd.xmpie.xlim":{source:"iana"},"application/vnd.yamaha.hv-dic":{source:"iana",extensions:["hvd"]},"application/vnd.yamaha.hv-script":{source:"iana",extensions:["hvs"]},"application/vnd.yamaha.hv-voice":{source:"iana",extensions:["hvp"]},"application/vnd.yamaha.openscoreformat":{source:"iana",extensions:["osf"]},"application/vnd.yamaha.openscoreformat.osfpvg+xml":{source:"iana",compressible:!0,extensions:["osfpvg"]},"application/vnd.yamaha.remote-setup":{source:"iana"},"application/vnd.yamaha.smaf-audio":{source:"iana",extensions:["saf"]},"application/vnd.yamaha.smaf-phrase":{source:"iana",extensions:["spf"]},"application/vnd.yamaha.through-ngn":{source:"iana"},"application/vnd.yamaha.tunnel-udpencap":{source:"iana"},"application/vnd.yaoweme":{source:"iana"},"application/vnd.yellowriver-custom-menu":{source:"iana",extensions:["cmp"]},"application/vnd.youtube.yt":{source:"iana"},"application/vnd.zul":{source:"iana",extensions:["zir","zirz"]},"application/vnd.zzazz.deck+xml":{source:"iana",compressible:!0,extensions:["zaz"]},"application/voicexml+xml":{source:"iana",compressible:!0,extensions:["vxml"]},"application/voucher-cms+json":{source:"iana",compressible:!0},"application/vq-rtcpxr":{source:"iana"},"application/wasm":{compressible:!0,extensions:["wasm"]},"application/watcherinfo+xml":{source:"iana",compressible:!0},"application/webpush-options+json":{source:"iana",compressible:!0},"application/whoispp-query":{source:"iana"},"application/whoispp-response":{source:"iana"},"application/widget":{source:"iana",extensions:["wgt"]},"application/winhlp":{source:"apache",extensions:["hlp"]},"application/wita":{source:"iana"},"application/wordperfect5.1":{source:"iana"},"application/wsdl+xml":{source:"iana",compressible:!0,extensions:["wsdl"]},"application/wspolicy+xml":{source:"iana",compressible:!0,extensions:["wspolicy"]},"application/x-7z-compressed":{source:"apache",compressible:!1,extensions:["7z"]},"application/x-abiword":{source:"apache",extensions:["abw"]},"application/x-ace-compressed":{source:"apache",extensions:["ace"]},"application/x-amf":{source:"apache"},"application/x-apple-diskimage":{source:"apache",extensions:["dmg"]},"application/x-arj":{compressible:!1,extensions:["arj"]},"application/x-authorware-bin":{source:"apache",extensions:["aab","x32","u32","vox"]},"application/x-authorware-map":{source:"apache",extensions:["aam"]},"application/x-authorware-seg":{source:"apache",extensions:["aas"]},"application/x-bcpio":{source:"apache",extensions:["bcpio"]},"application/x-bdoc":{compressible:!1,extensions:["bdoc"]},"application/x-bittorrent":{source:"apache",extensions:["torrent"]},"application/x-blorb":{source:"apache",extensions:["blb","blorb"]},"application/x-bzip":{source:"apache",compressible:!1,extensions:["bz"]},"application/x-bzip2":{source:"apache",compressible:!1,extensions:["bz2","boz"]},"application/x-cbr":{source:"apache",extensions:["cbr","cba","cbt","cbz","cb7"]},"application/x-cdlink":{source:"apache",extensions:["vcd"]},"application/x-cfs-compressed":{source:"apache",extensions:["cfs"]},"application/x-chat":{source:"apache",extensions:["chat"]},"application/x-chess-pgn":{source:"apache",extensions:["pgn"]},"application/x-chrome-extension":{extensions:["crx"]},"application/x-cocoa":{source:"nginx",extensions:["cco"]},"application/x-compress":{source:"apache"},"application/x-conference":{source:"apache",extensions:["nsc"]},"application/x-cpio":{source:"apache",extensions:["cpio"]},"application/x-csh":{source:"apache",extensions:["csh"]},"application/x-deb":{compressible:!1},"application/x-debian-package":{source:"apache",extensions:["deb","udeb"]},"application/x-dgc-compressed":{source:"apache",extensions:["dgc"]},"application/x-director":{source:"apache",extensions:["dir","dcr","dxr","cst","cct","cxt","w3d","fgd","swa"]},"application/x-doom":{source:"apache",extensions:["wad"]},"application/x-dtbncx+xml":{source:"apache",compressible:!0,extensions:["ncx"]},"application/x-dtbook+xml":{source:"apache",compressible:!0,extensions:["dtb"]},"application/x-dtbresource+xml":{source:"apache",compressible:!0,extensions:["res"]},"application/x-dvi":{source:"apache",compressible:!1,extensions:["dvi"]},"application/x-envoy":{source:"apache",extensions:["evy"]},"application/x-eva":{source:"apache",extensions:["eva"]},"application/x-font-bdf":{source:"apache",extensions:["bdf"]},"application/x-font-dos":{source:"apache"},"application/x-font-framemaker":{source:"apache"},"application/x-font-ghostscript":{source:"apache",extensions:["gsf"]},"application/x-font-libgrx":{source:"apache"},"application/x-font-linux-psf":{source:"apache",extensions:["psf"]},"application/x-font-pcf":{source:"apache",extensions:["pcf"]},"application/x-font-snf":{source:"apache",extensions:["snf"]},"application/x-font-speedo":{source:"apache"},"application/x-font-sunos-news":{source:"apache"},"application/x-font-type1":{source:"apache",extensions:["pfa","pfb","pfm","afm"]},"application/x-font-vfont":{source:"apache"},"application/x-freearc":{source:"apache",extensions:["arc"]},"application/x-futuresplash":{source:"apache",extensions:["spl"]},"application/x-gca-compressed":{source:"apache",extensions:["gca"]},"application/x-glulx":{source:"apache",extensions:["ulx"]},"application/x-gnumeric":{source:"apache",extensions:["gnumeric"]},"application/x-gramps-xml":{source:"apache",extensions:["gramps"]},"application/x-gtar":{source:"apache",extensions:["gtar"]},"application/x-gzip":{source:"apache"},"application/x-hdf":{source:"apache",extensions:["hdf"]},"application/x-httpd-php":{compressible:!0,extensions:["php"]},"application/x-install-instructions":{source:"apache",extensions:["install"]},"application/x-iso9660-image":{source:"apache",extensions:["iso"]},"application/x-java-archive-diff":{source:"nginx",extensions:["jardiff"]},"application/x-java-jnlp-file":{source:"apache",compressible:!1,extensions:["jnlp"]},"application/x-javascript":{compressible:!0},"application/x-latex":{source:"apache",compressible:!1,extensions:["latex"]},"application/x-lua-bytecode":{extensions:["luac"]},"application/x-lzh-compressed":{source:"apache",extensions:["lzh","lha"]},"application/x-makeself":{source:"nginx",extensions:["run"]},"application/x-mie":{source:"apache",extensions:["mie"]},"application/x-mobipocket-ebook":{source:"apache",extensions:["prc","mobi"]},"application/x-mpegurl":{compressible:!1},"application/x-ms-application":{source:"apache",extensions:["application"]},"application/x-ms-shortcut":{source:"apache",extensions:["lnk"]},"application/x-ms-wmd":{source:"apache",extensions:["wmd"]},"application/x-ms-wmz":{source:"apache",extensions:["wmz"]},"application/x-ms-xbap":{source:"apache",extensions:["xbap"]},"application/x-msaccess":{source:"apache",extensions:["mdb"]},"application/x-msbinder":{source:"apache",extensions:["obd"]},"application/x-mscardfile":{source:"apache",extensions:["crd"]},"application/x-msclip":{source:"apache",extensions:["clp"]},"application/x-msdos-program":{extensions:["exe"]},"application/x-msdownload":{source:"apache",extensions:["exe","dll","com","bat","msi"]},"application/x-msmediaview":{source:"apache",extensions:["mvb","m13","m14"]},"application/x-msmetafile":{source:"apache",extensions:["wmf","wmz","emf","emz"]},"application/x-msmoney":{source:"apache",extensions:["mny"]},"application/x-mspublisher":{source:"apache",extensions:["pub"]},"application/x-msschedule":{source:"apache",extensions:["scd"]},"application/x-msterminal":{source:"apache",extensions:["trm"]},"application/x-mswrite":{source:"apache",extensions:["wri"]},"application/x-netcdf":{source:"apache",extensions:["nc","cdf"]},"application/x-ns-proxy-autoconfig":{compressible:!0,extensions:["pac"]},"application/x-nzb":{source:"apache",extensions:["nzb"]},"application/x-perl":{source:"nginx",extensions:["pl","pm"]},"application/x-pilot":{source:"nginx",extensions:["prc","pdb"]},"application/x-pkcs12":{source:"apache",compressible:!1,extensions:["p12","pfx"]},"application/x-pkcs7-certificates":{source:"apache",extensions:["p7b","spc"]},"application/x-pkcs7-certreqresp":{source:"apache",extensions:["p7r"]},"application/x-rar-compressed":{source:"apache",compressible:!1,extensions:["rar"]},"application/x-redhat-package-manager":{source:"nginx",extensions:["rpm"]},"application/x-research-info-systems":{source:"apache",extensions:["ris"]},"application/x-sea":{source:"nginx",extensions:["sea"]},"application/x-sh":{source:"apache",compressible:!0,extensions:["sh"]},"application/x-shar":{source:"apache",extensions:["shar"]},"application/x-shockwave-flash":{source:"apache",compressible:!1,extensions:["swf"]},"application/x-silverlight-app":{source:"apache",extensions:["xap"]},"application/x-sql":{source:"apache",extensions:["sql"]},"application/x-stuffit":{source:"apache",compressible:!1,extensions:["sit"]},"application/x-stuffitx":{source:"apache",extensions:["sitx"]},"application/x-subrip":{source:"apache",extensions:["srt"]},"application/x-sv4cpio":{source:"apache",extensions:["sv4cpio"]},"application/x-sv4crc":{source:"apache",extensions:["sv4crc"]},"application/x-t3vm-image":{source:"apache",extensions:["t3"]},"application/x-tads":{source:"apache",extensions:["gam"]},"application/x-tar":{source:"apache",compressible:!0,extensions:["tar"]},"application/x-tcl":{source:"apache",extensions:["tcl","tk"]},"application/x-tex":{source:"apache",extensions:["tex"]},"application/x-tex-tfm":{source:"apache",extensions:["tfm"]},"application/x-texinfo":{source:"apache",extensions:["texinfo","texi"]},"application/x-tgif":{source:"apache",extensions:["obj"]},"application/x-ustar":{source:"apache",extensions:["ustar"]},"application/x-virtualbox-hdd":{compressible:!0,extensions:["hdd"]},"application/x-virtualbox-ova":{compressible:!0,extensions:["ova"]},"application/x-virtualbox-ovf":{compressible:!0,extensions:["ovf"]},"application/x-virtualbox-vbox":{compressible:!0,extensions:["vbox"]},"application/x-virtualbox-vbox-extpack":{compressible:!1,extensions:["vbox-extpack"]},"application/x-virtualbox-vdi":{compressible:!0,extensions:["vdi"]},"application/x-virtualbox-vhd":{compressible:!0,extensions:["vhd"]},"application/x-virtualbox-vmdk":{compressible:!0,extensions:["vmdk"]},"application/x-wais-source":{source:"apache",extensions:["src"]},"application/x-web-app-manifest+json":{compressible:!0,extensions:["webapp"]},"application/x-www-form-urlencoded":{source:"iana",compressible:!0},"application/x-x509-ca-cert":{source:"apache",extensions:["der","crt","pem"]},"application/x-xfig":{source:"apache",extensions:["fig"]},"application/x-xliff+xml":{source:"apache",compressible:!0,extensions:["xlf"]},"application/x-xpinstall":{source:"apache",compressible:!1,extensions:["xpi"]},"application/x-xz":{source:"apache",extensions:["xz"]},"application/x-zmachine":{source:"apache",extensions:["z1","z2","z3","z4","z5","z6","z7","z8"]},"application/x400-bp":{source:"iana"},"application/xacml+xml":{source:"iana",compressible:!0},"application/xaml+xml":{source:"apache",compressible:!0,extensions:["xaml"]},"application/xcap-att+xml":{source:"iana",compressible:!0},"application/xcap-caps+xml":{source:"iana",compressible:!0},"application/xcap-diff+xml":{source:"iana",compressible:!0,extensions:["xdf"]},"application/xcap-el+xml":{source:"iana",compressible:!0},"application/xcap-error+xml":{source:"iana",compressible:!0},"application/xcap-ns+xml":{source:"iana",compressible:!0},"application/xcon-conference-info+xml":{source:"iana",compressible:!0},"application/xcon-conference-info-diff+xml":{source:"iana",compressible:!0},"application/xenc+xml":{source:"iana",compressible:!0,extensions:["xenc"]},"application/xhtml+xml":{source:"iana",compressible:!0,extensions:["xhtml","xht"]},"application/xhtml-voice+xml":{source:"apache",compressible:!0},"application/xliff+xml":{source:"iana",compressible:!0},"application/xml":{source:"iana",compressible:!0,extensions:["xml","xsl","xsd","rng"]},"application/xml-dtd":{source:"iana",compressible:!0,extensions:["dtd"]},"application/xml-external-parsed-entity":{source:"iana"},"application/xml-patch+xml":{source:"iana",compressible:!0},"application/xmpp+xml":{source:"iana",compressible:!0},"application/xop+xml":{source:"iana",compressible:!0,extensions:["xop"]},"application/xproc+xml":{source:"apache",compressible:!0,extensions:["xpl"]},"application/xslt+xml":{source:"iana",compressible:!0,extensions:["xslt"]},"application/xspf+xml":{source:"apache",compressible:!0,extensions:["xspf"]},"application/xv+xml":{source:"iana",compressible:!0,extensions:["mxml","xhvml","xvml","xvm"]},"application/yang":{source:"iana",extensions:["yang"]},"application/yang-data+json":{source:"iana",compressible:!0},"application/yang-data+xml":{source:"iana",compressible:!0},"application/yang-patch+json":{source:"iana",compressible:!0},"application/yang-patch+xml":{source:"iana",compressible:!0},"application/yin+xml":{source:"iana",compressible:!0,extensions:["yin"]},"application/zip":{source:"iana",compressible:!1,extensions:["zip"]},"application/zlib":{source:"iana"},"application/zstd":{source:"iana"},"audio/1d-interleaved-parityfec":{source:"iana"},"audio/32kadpcm":{source:"iana"},"audio/3gpp":{source:"iana",compressible:!1,extensions:["3gpp"]},"audio/3gpp2":{source:"iana"},"audio/aac":{source:"iana"},"audio/ac3":{source:"iana"},"audio/adpcm":{source:"apache",extensions:["adp"]},"audio/amr":{source:"iana"},"audio/amr-wb":{source:"iana"},"audio/amr-wb+":{source:"iana"},"audio/aptx":{source:"iana"},"audio/asc":{source:"iana"},"audio/atrac-advanced-lossless":{source:"iana"},"audio/atrac-x":{source:"iana"},"audio/atrac3":{source:"iana"},"audio/basic":{source:"iana",compressible:!1,extensions:["au","snd"]},"audio/bv16":{source:"iana"},"audio/bv32":{source:"iana"},"audio/clearmode":{source:"iana"},"audio/cn":{source:"iana"},"audio/dat12":{source:"iana"},"audio/dls":{source:"iana"},"audio/dsr-es201108":{source:"iana"},"audio/dsr-es202050":{source:"iana"},"audio/dsr-es202211":{source:"iana"},"audio/dsr-es202212":{source:"iana"},"audio/dv":{source:"iana"},"audio/dvi4":{source:"iana"},"audio/eac3":{source:"iana"},"audio/encaprtp":{source:"iana"},"audio/evrc":{source:"iana"},"audio/evrc-qcp":{source:"iana"},"audio/evrc0":{source:"iana"},"audio/evrc1":{source:"iana"},"audio/evrcb":{source:"iana"},"audio/evrcb0":{source:"iana"},"audio/evrcb1":{source:"iana"},"audio/evrcnw":{source:"iana"},"audio/evrcnw0":{source:"iana"},"audio/evrcnw1":{source:"iana"},"audio/evrcwb":{source:"iana"},"audio/evrcwb0":{source:"iana"},"audio/evrcwb1":{source:"iana"},"audio/evs":{source:"iana"},"audio/fwdred":{source:"iana"},"audio/g711-0":{source:"iana"},"audio/g719":{source:"iana"},"audio/g722":{source:"iana"},"audio/g7221":{source:"iana"},"audio/g723":{source:"iana"},"audio/g726-16":{source:"iana"},"audio/g726-24":{source:"iana"},"audio/g726-32":{source:"iana"},"audio/g726-40":{source:"iana"},"audio/g728":{source:"iana"},"audio/g729":{source:"iana"},"audio/g7291":{source:"iana"},"audio/g729d":{source:"iana"},"audio/g729e":{source:"iana"},"audio/gsm":{source:"iana"},"audio/gsm-efr":{source:"iana"},"audio/gsm-hr-08":{source:"iana"},"audio/ilbc":{source:"iana"},"audio/ip-mr_v2.5":{source:"iana"},"audio/isac":{source:"apache"},"audio/l16":{source:"iana"},"audio/l20":{source:"iana"},"audio/l24":{source:"iana",compressible:!1},"audio/l8":{source:"iana"},"audio/lpc":{source:"iana"},"audio/melp":{source:"iana"},"audio/melp1200":{source:"iana"},"audio/melp2400":{source:"iana"},"audio/melp600":{source:"iana"},"audio/midi":{source:"apache",extensions:["mid","midi","kar","rmi"]},"audio/mobile-xmf":{source:"iana"},"audio/mp3":{compressible:!1,extensions:["mp3"]},"audio/mp4":{source:"iana",compressible:!1,extensions:["m4a","mp4a"]},"audio/mp4a-latm":{source:"iana"},"audio/mpa":{source:"iana"},"audio/mpa-robust":{source:"iana"},"audio/mpeg":{source:"iana",compressible:!1,extensions:["mpga","mp2","mp2a","mp3","m2a","m3a"]},"audio/mpeg4-generic":{source:"iana"},"audio/musepack":{source:"apache"},"audio/ogg":{source:"iana",compressible:!1,extensions:["oga","ogg","spx"]},"audio/opus":{source:"iana"},"audio/parityfec":{source:"iana"},"audio/pcma":{source:"iana"},"audio/pcma-wb":{source:"iana"},"audio/pcmu":{source:"iana"},"audio/pcmu-wb":{source:"iana"},"audio/prs.sid":{source:"iana"},"audio/qcelp":{source:"iana"},"audio/raptorfec":{source:"iana"},"audio/red":{source:"iana"},"audio/rtp-enc-aescm128":{source:"iana"},"audio/rtp-midi":{source:"iana"},"audio/rtploopback":{source:"iana"},"audio/rtx":{source:"iana"},"audio/s3m":{source:"apache",extensions:["s3m"]},"audio/silk":{source:"apache",extensions:["sil"]},"audio/smv":{source:"iana"},"audio/smv-qcp":{source:"iana"},"audio/smv0":{source:"iana"},"audio/sp-midi":{source:"iana"},"audio/speex":{source:"iana"},"audio/t140c":{source:"iana"},"audio/t38":{source:"iana"},"audio/telephone-event":{source:"iana"},"audio/tone":{source:"iana"},"audio/uemclip":{source:"iana"},"audio/ulpfec":{source:"iana"},"audio/usac":{source:"iana"},"audio/vdvi":{source:"iana"},"audio/vmr-wb":{source:"iana"},"audio/vnd.3gpp.iufp":{source:"iana"},"audio/vnd.4sb":{source:"iana"},"audio/vnd.audiokoz":{source:"iana"},"audio/vnd.celp":{source:"iana"},"audio/vnd.cisco.nse":{source:"iana"},"audio/vnd.cmles.radio-events":{source:"iana"},"audio/vnd.cns.anp1":{source:"iana"},"audio/vnd.cns.inf1":{source:"iana"},"audio/vnd.dece.audio":{source:"iana",extensions:["uva","uvva"]},"audio/vnd.digital-winds":{source:"iana",extensions:["eol"]},"audio/vnd.dlna.adts":{source:"iana"},"audio/vnd.dolby.heaac.1":{source:"iana"},"audio/vnd.dolby.heaac.2":{source:"iana"},"audio/vnd.dolby.mlp":{source:"iana"},"audio/vnd.dolby.mps":{source:"iana"},"audio/vnd.dolby.pl2":{source:"iana"},"audio/vnd.dolby.pl2x":{source:"iana"},"audio/vnd.dolby.pl2z":{source:"iana"},"audio/vnd.dolby.pulse.1":{source:"iana"},"audio/vnd.dra":{source:"iana",extensions:["dra"]},"audio/vnd.dts":{source:"iana",extensions:["dts"]},"audio/vnd.dts.hd":{source:"iana",extensions:["dtshd"]},"audio/vnd.dvb.file":{source:"iana"},"audio/vnd.everad.plj":{source:"iana"},"audio/vnd.hns.audio":{source:"iana"},"audio/vnd.lucent.voice":{source:"iana",extensions:["lvp"]},"audio/vnd.ms-playready.media.pya":{source:"iana",extensions:["pya"]},"audio/vnd.nokia.mobile-xmf":{source:"iana"},"audio/vnd.nortel.vbk":{source:"iana"},"audio/vnd.nuera.ecelp4800":{source:"iana",extensions:["ecelp4800"]},"audio/vnd.nuera.ecelp7470":{source:"iana",extensions:["ecelp7470"]},"audio/vnd.nuera.ecelp9600":{source:"iana",extensions:["ecelp9600"]},"audio/vnd.octel.sbc":{source:"iana"},"audio/vnd.presonus.multitrack":{source:"iana"},"audio/vnd.qcelp":{source:"iana"},"audio/vnd.rhetorex.32kadpcm":{source:"iana"},"audio/vnd.rip":{source:"iana",extensions:["rip"]},"audio/vnd.rn-realaudio":{compressible:!1},"audio/vnd.sealedmedia.softseal.mpeg":{source:"iana"},"audio/vnd.vmx.cvsd":{source:"iana"},"audio/vnd.wave":{compressible:!1},"audio/vorbis":{source:"iana",compressible:!1},"audio/vorbis-config":{source:"iana"},"audio/wav":{compressible:!1,extensions:["wav"]},"audio/wave":{compressible:!1,extensions:["wav"]},"audio/webm":{source:"apache",compressible:!1,extensions:["weba"]},"audio/x-aac":{source:"apache",compressible:!1,extensions:["aac"]},"audio/x-aiff":{source:"apache",extensions:["aif","aiff","aifc"]},"audio/x-caf":{source:"apache",compressible:!1,extensions:["caf"]},"audio/x-flac":{source:"apache",extensions:["flac"]},"audio/x-m4a":{source:"nginx",extensions:["m4a"]},"audio/x-matroska":{source:"apache",extensions:["mka"]},"audio/x-mpegurl":{source:"apache",extensions:["m3u"]},"audio/x-ms-wax":{source:"apache",extensions:["wax"]},"audio/x-ms-wma":{source:"apache",extensions:["wma"]},"audio/x-pn-realaudio":{source:"apache",extensions:["ram","ra"]},"audio/x-pn-realaudio-plugin":{source:"apache",extensions:["rmp"]},"audio/x-realaudio":{source:"nginx",extensions:["ra"]},"audio/x-tta":{source:"apache"},"audio/x-wav":{source:"apache",extensions:["wav"]},"audio/xm":{source:"apache",extensions:["xm"]},"chemical/x-cdx":{source:"apache",extensions:["cdx"]},"chemical/x-cif":{source:"apache",extensions:["cif"]},"chemical/x-cmdf":{source:"apache",extensions:["cmdf"]},"chemical/x-cml":{source:"apache",extensions:["cml"]},"chemical/x-csml":{source:"apache",extensions:["csml"]},"chemical/x-pdb":{source:"apache"},"chemical/x-xyz":{source:"apache",extensions:["xyz"]},"font/collection":{source:"iana",extensions:["ttc"]},"font/otf":{source:"iana",compressible:!0,extensions:["otf"]},"font/sfnt":{source:"iana"},"font/ttf":{source:"iana",extensions:["ttf"]},"font/woff":{source:"iana",extensions:["woff"]},"font/woff2":{source:"iana",extensions:["woff2"]},"image/aces":{source:"iana",extensions:["exr"]},"image/apng":{compressible:!1,extensions:["apng"]},"image/avci":{source:"iana"},"image/avcs":{source:"iana"},"image/bmp":{source:"iana",compressible:!0,extensions:["bmp"]},"image/cgm":{source:"iana",extensions:["cgm"]},"image/dicom-rle":{source:"iana",extensions:["drle"]},"image/emf":{source:"iana",extensions:["emf"]},"image/fits":{source:"iana",extensions:["fits"]},"image/g3fax":{source:"iana",extensions:["g3"]},"image/gif":{source:"iana",compressible:!1,extensions:["gif"]},"image/heic":{source:"iana",extensions:["heic"]},"image/heic-sequence":{source:"iana",extensions:["heics"]},"image/heif":{source:"iana",extensions:["heif"]},"image/heif-sequence":{source:"iana",extensions:["heifs"]},"image/ief":{source:"iana",extensions:["ief"]},"image/jls":{source:"iana",extensions:["jls"]},"image/jp2":{source:"iana",compressible:!1,extensions:["jp2","jpg2"]},"image/jpeg":{source:"iana",compressible:!1,extensions:["jpeg","jpg","jpe"]},"image/jpm":{source:"iana",compressible:!1,extensions:["jpm"]},"image/jpx":{source:"iana",compressible:!1,extensions:["jpx","jpf"]},"image/ktx":{source:"iana",extensions:["ktx"]},"image/naplps":{source:"iana"},"image/pjpeg":{compressible:!1},"image/png":{source:"iana",compressible:!1,extensions:["png"]},"image/prs.btif":{source:"iana",extensions:["btif"]},"image/prs.pti":{source:"iana",extensions:["pti"]},"image/pwg-raster":{source:"iana"},"image/sgi":{source:"apache",extensions:["sgi"]},"image/svg+xml":{source:"iana",compressible:!0,extensions:["svg","svgz"]},"image/t38":{source:"iana",extensions:["t38"]},"image/tiff":{source:"iana",compressible:!1,extensions:["tif","tiff"]},"image/tiff-fx":{source:"iana",extensions:["tfx"]},"image/vnd.adobe.photoshop":{source:"iana",compressible:!0,extensions:["psd"]},"image/vnd.airzip.accelerator.azv":{source:"iana",extensions:["azv"]},"image/vnd.cns.inf2":{source:"iana"},"image/vnd.dece.graphic":{source:"iana",extensions:["uvi","uvvi","uvg","uvvg"]},"image/vnd.djvu":{source:"iana",extensions:["djvu","djv"]},"image/vnd.dvb.subtitle":{source:"iana",extensions:["sub"]},"image/vnd.dwg":{source:"iana",extensions:["dwg"]},"image/vnd.dxf":{source:"iana",extensions:["dxf"]},"image/vnd.fastbidsheet":{source:"iana",extensions:["fbs"]},"image/vnd.fpx":{source:"iana",extensions:["fpx"]},"image/vnd.fst":{source:"iana",extensions:["fst"]},"image/vnd.fujixerox.edmics-mmr":{source:"iana",extensions:["mmr"]},"image/vnd.fujixerox.edmics-rlc":{source:"iana",extensions:["rlc"]},"image/vnd.globalgraphics.pgb":{source:"iana"},"image/vnd.microsoft.icon":{source:"iana",extensions:["ico"]},"image/vnd.mix":{source:"iana"},"image/vnd.mozilla.apng":{source:"iana"},"image/vnd.ms-modi":{source:"iana",extensions:["mdi"]},"image/vnd.ms-photo":{source:"apache",extensions:["wdp"]},"image/vnd.net-fpx":{source:"iana",extensions:["npx"]},"image/vnd.radiance":{source:"iana"},"image/vnd.sealed.png":{source:"iana"},"image/vnd.sealedmedia.softseal.gif":{source:"iana"},"image/vnd.sealedmedia.softseal.jpg":{source:"iana"},"image/vnd.svf":{source:"iana"},"image/vnd.tencent.tap":{source:"iana",extensions:["tap"]},"image/vnd.valve.source.texture":{source:"iana",extensions:["vtf"]},"image/vnd.wap.wbmp":{source:"iana",extensions:["wbmp"]},"image/vnd.xiff":{source:"iana",extensions:["xif"]},"image/vnd.zbrush.pcx":{source:"iana",extensions:["pcx"]},"image/webp":{source:"apache",extensions:["webp"]},"image/wmf":{source:"iana",extensions:["wmf"]},"image/x-3ds":{source:"apache",extensions:["3ds"]},"image/x-cmu-raster":{source:"apache",extensions:["ras"]},"image/x-cmx":{source:"apache",extensions:["cmx"]},"image/x-freehand":{source:"apache",extensions:["fh","fhc","fh4","fh5","fh7"]},"image/x-icon":{source:"apache",compressible:!0,extensions:["ico"]},"image/x-jng":{source:"nginx",extensions:["jng"]},"image/x-mrsid-image":{source:"apache",extensions:["sid"]},"image/x-ms-bmp":{source:"nginx",compressible:!0,extensions:["bmp"]},"image/x-pcx":{source:"apache",extensions:["pcx"]},"image/x-pict":{source:"apache",extensions:["pic","pct"]},"image/x-portable-anymap":{source:"apache",extensions:["pnm"]},"image/x-portable-bitmap":{source:"apache",extensions:["pbm"]},"image/x-portable-graymap":{source:"apache",extensions:["pgm"]},"image/x-portable-pixmap":{source:"apache",extensions:["ppm"]},"image/x-rgb":{source:"apache",extensions:["rgb"]},"image/x-tga":{source:"apache",extensions:["tga"]},"image/x-xbitmap":{source:"apache",extensions:["xbm"]},"image/x-xcf":{compressible:!1},"image/x-xpixmap":{source:"apache",extensions:["xpm"]},"image/x-xwindowdump":{source:"apache",extensions:["xwd"]},"message/cpim":{source:"iana"},"message/delivery-status":{source:"iana"},"message/disposition-notification":{source:"iana",extensions:["disposition-notification"]},"message/external-body":{source:"iana"},"message/feedback-report":{source:"iana"},"message/global":{source:"iana",extensions:["u8msg"]},"message/global-delivery-status":{source:"iana",extensions:["u8dsn"]},"message/global-disposition-notification":{source:"iana",extensions:["u8mdn"]},"message/global-headers":{source:"iana",extensions:["u8hdr"]},"message/http":{source:"iana",compressible:!1},"message/imdn+xml":{source:"iana",compressible:!0},"message/news":{source:"iana"},"message/partial":{source:"iana",compressible:!1},"message/rfc822":{source:"iana",compressible:!0,extensions:["eml","mime"]},"message/s-http":{source:"iana"},"message/sip":{source:"iana"},"message/sipfrag":{source:"iana"},"message/tracking-status":{source:"iana"},"message/vnd.si.simp":{source:"iana"},"message/vnd.wfa.wsc":{source:"iana",extensions:["wsc"]},"model/3mf":{source:"iana"},"model/gltf+json":{source:"iana",compressible:!0,extensions:["gltf"]},"model/gltf-binary":{source:"iana",compressible:!0,extensions:["glb"]},"model/iges":{source:"iana",compressible:!1,extensions:["igs","iges"]},"model/mesh":{source:"iana",compressible:!1,extensions:["msh","mesh","silo"]},"model/stl":{source:"iana"},"model/vnd.collada+xml":{source:"iana",compressible:!0,extensions:["dae"]},"model/vnd.dwf":{source:"iana",extensions:["dwf"]},"model/vnd.flatland.3dml":{source:"iana"},"model/vnd.gdl":{source:"iana",extensions:["gdl"]},"model/vnd.gs-gdl":{source:"apache"},"model/vnd.gs.gdl":{source:"iana"},"model/vnd.gtw":{source:"iana",extensions:["gtw"]},"model/vnd.moml+xml":{source:"iana",compressible:!0},"model/vnd.mts":{source:"iana",extensions:["mts"]},"model/vnd.opengex":{source:"iana"},"model/vnd.parasolid.transmit.binary":{source:"iana"},"model/vnd.parasolid.transmit.text":{source:"iana"},"model/vnd.rosette.annotated-data-model":{source:"iana"},"model/vnd.usdz+zip":{source:"iana",compressible:!1},"model/vnd.valve.source.compiled-map":{source:"iana"},"model/vnd.vtu":{source:"iana",extensions:["vtu"]},"model/vrml":{source:"iana",compressible:!1,extensions:["wrl","vrml"]},"model/x3d+binary":{source:"apache",compressible:!1,extensions:["x3db","x3dbz"]},"model/x3d+fastinfoset":{source:"iana"},"model/x3d+vrml":{source:"apache",compressible:!1,extensions:["x3dv","x3dvz"]},"model/x3d+xml":{source:"iana",compressible:!0,extensions:["x3d","x3dz"]},"model/x3d-vrml":{source:"iana"},"multipart/alternative":{source:"iana",compressible:!1},"multipart/appledouble":{source:"iana"},"multipart/byteranges":{source:"iana"},"multipart/digest":{source:"iana"},"multipart/encrypted":{source:"iana",compressible:!1},"multipart/form-data":{source:"iana",compressible:!1},"multipart/header-set":{source:"iana"},"multipart/mixed":{source:"iana",compressible:!1},"multipart/multilingual":{source:"iana"},"multipart/parallel":{source:"iana"},"multipart/related":{source:"iana",compressible:!1},"multipart/report":{source:"iana"},"multipart/signed":{source:"iana",compressible:!1},"multipart/vnd.bint.med-plus":{source:"iana"},"multipart/voice-message":{source:"iana"},"multipart/x-mixed-replace":{source:"iana"},"text/1d-interleaved-parityfec":{source:"iana"},"text/cache-manifest":{source:"iana",compressible:!0,extensions:["appcache","manifest"]},"text/calendar":{source:"iana",extensions:["ics","ifb"]},"text/calender":{compressible:!0},"text/cmd":{compressible:!0},"text/coffeescript":{extensions:["coffee","litcoffee"]},"text/css":{source:"iana",charset:"UTF-8",compressible:!0,extensions:["css"]},"text/csv":{source:"iana",compressible:!0,extensions:["csv"]},"text/csv-schema":{source:"iana"},"text/directory":{source:"iana"},"text/dns":{source:"iana"},"text/ecmascript":{source:"iana"},"text/encaprtp":{source:"iana"},"text/enriched":{source:"iana"},"text/fwdred":{source:"iana"},"text/grammar-ref-list":{source:"iana"},"text/html":{source:"iana",compressible:!0,extensions:["html","htm","shtml"]},"text/jade":{extensions:["jade"]},"text/javascript":{source:"iana",compressible:!0},"text/jcr-cnd":{source:"iana"},"text/jsx":{compressible:!0,extensions:["jsx"]},"text/less":{extensions:["less"]},"text/markdown":{source:"iana",compressible:!0,extensions:["markdown","md"]},"text/mathml":{source:"nginx",extensions:["mml"]},"text/mizar":{source:"iana"},"text/n3":{source:"iana",compressible:!0,extensions:["n3"]},"text/parameters":{source:"iana"},"text/parityfec":{source:"iana"},"text/plain":{source:"iana",compressible:!0,extensions:["txt","text","conf","def","list","log","in","ini"]},"text/provenance-notation":{source:"iana"},"text/prs.fallenstein.rst":{source:"iana"},"text/prs.lines.tag":{source:"iana",extensions:["dsc"]},"text/prs.prop.logic":{source:"iana"},"text/raptorfec":{source:"iana"},"text/red":{source:"iana"},"text/rfc822-headers":{source:"iana"},"text/richtext":{source:"iana",compressible:!0,extensions:["rtx"]},"text/rtf":{source:"iana",compressible:!0,extensions:["rtf"]},"text/rtp-enc-aescm128":{source:"iana"},"text/rtploopback":{source:"iana"},"text/rtx":{source:"iana"},"text/sgml":{source:"iana",extensions:["sgml","sgm"]},"text/shex":{extensions:["shex"]},"text/slim":{extensions:["slim","slm"]},"text/strings":{source:"iana"},"text/stylus":{extensions:["stylus","styl"]},"text/t140":{source:"iana"},"text/tab-separated-values":{source:"iana",compressible:!0,extensions:["tsv"]},"text/troff":{source:"iana",extensions:["t","tr","roff","man","me","ms"]},"text/turtle":{source:"iana",charset:"UTF-8",extensions:["ttl"]},"text/ulpfec":{source:"iana"},"text/uri-list":{source:"iana",compressible:!0,extensions:["uri","uris","urls"]},"text/vcard":{source:"iana",compressible:!0,extensions:["vcard"]},"text/vnd.a":{source:"iana"},"text/vnd.abc":{source:"iana"},"text/vnd.ascii-art":{source:"iana"},"text/vnd.curl":{source:"iana",extensions:["curl"]},"text/vnd.curl.dcurl":{source:"apache",extensions:["dcurl"]},"text/vnd.curl.mcurl":{source:"apache",extensions:["mcurl"]},"text/vnd.curl.scurl":{source:"apache",extensions:["scurl"]},"text/vnd.debian.copyright":{source:"iana"},"text/vnd.dmclientscript":{source:"iana"},"text/vnd.dvb.subtitle":{source:"iana",extensions:["sub"]},"text/vnd.esmertec.theme-descriptor":{source:"iana"},"text/vnd.fly":{source:"iana",extensions:["fly"]},"text/vnd.fmi.flexstor":{source:"iana",extensions:["flx"]},"text/vnd.gml":{source:"iana"},"text/vnd.graphviz":{source:"iana",extensions:["gv"]},"text/vnd.hgl":{source:"iana"},"text/vnd.in3d.3dml":{source:"iana",extensions:["3dml"]},"text/vnd.in3d.spot":{source:"iana",extensions:["spot"]},"text/vnd.iptc.newsml":{source:"iana"},"text/vnd.iptc.nitf":{source:"iana"},"text/vnd.latex-z":{source:"iana"},"text/vnd.motorola.reflex":{source:"iana"},"text/vnd.ms-mediapackage":{source:"iana"},"text/vnd.net2phone.commcenter.command":{source:"iana"},"text/vnd.radisys.msml-basic-layout":{source:"iana"},"text/vnd.si.uricatalogue":{source:"iana"},"text/vnd.sun.j2me.app-descriptor":{source:"iana",extensions:["jad"]},"text/vnd.trolltech.linguist":{source:"iana"},"text/vnd.wap.si":{source:"iana"},"text/vnd.wap.sl":{source:"iana"},"text/vnd.wap.wml":{source:"iana",extensions:["wml"]},"text/vnd.wap.wmlscript":{source:"iana",extensions:["wmls"]},"text/vtt":{charset:"UTF-8",compressible:!0,extensions:["vtt"]},"text/x-asm":{source:"apache",extensions:["s","asm"]},"text/x-c":{source:"apache",extensions:["c","cc","cxx","cpp","h","hh","dic"]},"text/x-component":{source:"nginx",extensions:["htc"]},"text/x-fortran":{source:"apache",extensions:["f","for","f77","f90"]},"text/x-gwt-rpc":{compressible:!0},"text/x-handlebars-template":{extensions:["hbs"]},"text/x-java-source":{source:"apache",extensions:["java"]},"text/x-jquery-tmpl":{compressible:!0},"text/x-lua":{extensions:["lua"]},"text/x-markdown":{compressible:!0,extensions:["mkd"]},"text/x-nfo":{source:"apache",extensions:["nfo"]},"text/x-opml":{source:"apache",extensions:["opml"]},"text/x-org":{compressible:!0,extensions:["org"]},"text/x-pascal":{source:"apache",extensions:["p","pas"]},"text/x-processing":{compressible:!0,extensions:["pde"]},"text/x-sass":{extensions:["sass"]},"text/x-scss":{extensions:["scss"]},"text/x-setext":{source:"apache",extensions:["etx"]},"text/x-sfv":{source:"apache",extensions:["sfv"]},"text/x-suse-ymp":{compressible:!0,extensions:["ymp"]},"text/x-uuencode":{source:"apache",extensions:["uu"]},"text/x-vcalendar":{source:"apache",extensions:["vcs"]},"text/x-vcard":{source:"apache",extensions:["vcf"]},"text/xml":{source:"iana",compressible:!0,extensions:["xml"]},"text/xml-external-parsed-entity":{source:"iana"},"text/yaml":{extensions:["yaml","yml"]},"video/1d-interleaved-parityfec":{source:"iana"},"video/3gpp":{source:"iana",extensions:["3gp","3gpp"]},"video/3gpp-tt":{source:"iana"},"video/3gpp2":{source:"iana",extensions:["3g2"]},"video/bmpeg":{source:"iana"},"video/bt656":{source:"iana"},"video/celb":{source:"iana"},"video/dv":{source:"iana"},"video/encaprtp":{source:"iana"},"video/h261":{source:"iana",extensions:["h261"]},"video/h263":{source:"iana",extensions:["h263"]},"video/h263-1998":{source:"iana"},"video/h263-2000":{source:"iana"},"video/h264":{source:"iana",extensions:["h264"]},"video/h264-rcdo":{source:"iana"},"video/h264-svc":{source:"iana"},"video/h265":{source:"iana"},"video/iso.segment":{source:"iana"},"video/jpeg":{source:"iana",extensions:["jpgv"]},"video/jpeg2000":{source:"iana"},"video/jpm":{source:"apache",extensions:["jpm","jpgm"]},"video/mj2":{source:"iana",extensions:["mj2","mjp2"]},"video/mp1s":{source:"iana"},"video/mp2p":{source:"iana"},"video/mp2t":{source:"iana",extensions:["ts"]},"video/mp4":{source:"iana",compressible:!1,extensions:["mp4","mp4v","mpg4"]},"video/mp4v-es":{source:"iana"},"video/mpeg":{source:"iana",compressible:!1,extensions:["mpeg","mpg","mpe","m1v","m2v"]},"video/mpeg4-generic":{source:"iana"},"video/mpv":{source:"iana"},"video/nv":{source:"iana"},"video/ogg":{source:"iana",compressible:!1,extensions:["ogv"]},"video/parityfec":{source:"iana"},"video/pointer":{source:"iana"},"video/quicktime":{source:"iana",compressible:!1,extensions:["qt","mov"]},"video/raptorfec":{source:"iana"},"video/raw":{source:"iana"},"video/rtp-enc-aescm128":{source:"iana"},"video/rtploopback":{source:"iana"},"video/rtx":{source:"iana"},"video/smpte291":{source:"iana"},"video/smpte292m":{source:"iana"},"video/ulpfec":{source:"iana"},"video/vc1":{source:"iana"},"video/vc2":{source:"iana"},"video/vnd.cctv":{source:"iana"},"video/vnd.dece.hd":{source:"iana",extensions:["uvh","uvvh"]},"video/vnd.dece.mobile":{source:"iana",extensions:["uvm","uvvm"]},"video/vnd.dece.mp4":{source:"iana"},"video/vnd.dece.pd":{source:"iana",extensions:["uvp","uvvp"]},"video/vnd.dece.sd":{source:"iana",extensions:["uvs","uvvs"]},"video/vnd.dece.video":{source:"iana",extensions:["uvv","uvvv"]},"video/vnd.directv.mpeg":{source:"iana"},"video/vnd.directv.mpeg-tts":{source:"iana"},"video/vnd.dlna.mpeg-tts":{source:"iana"},"video/vnd.dvb.file":{source:"iana",extensions:["dvb"]},"video/vnd.fvt":{source:"iana",extensions:["fvt"]},"video/vnd.hns.video":{source:"iana"},"video/vnd.iptvforum.1dparityfec-1010":{source:"iana"},"video/vnd.iptvforum.1dparityfec-2005":{source:"iana"},"video/vnd.iptvforum.2dparityfec-1010":{source:"iana"},"video/vnd.iptvforum.2dparityfec-2005":{source:"iana"},"video/vnd.iptvforum.ttsavc":{source:"iana"},"video/vnd.iptvforum.ttsmpeg2":{source:"iana"},"video/vnd.motorola.video":{source:"iana"},"video/vnd.motorola.videop":{source:"iana"},"video/vnd.mpegurl":{source:"iana",extensions:["mxu","m4u"]},"video/vnd.ms-playready.media.pyv":{source:"iana",extensions:["pyv"]},"video/vnd.nokia.interleaved-multimedia":{source:"iana"},"video/vnd.nokia.mp4vr":{source:"iana"},"video/vnd.nokia.videovoip":{source:"iana"},"video/vnd.objectvideo":{source:"iana"},"video/vnd.radgamettools.bink":{source:"iana"},"video/vnd.radgamettools.smacker":{source:"iana"},"video/vnd.sealed.mpeg1":{source:"iana"},"video/vnd.sealed.mpeg4":{source:"iana"},"video/vnd.sealed.swf":{source:"iana"},"video/vnd.sealedmedia.softseal.mov":{source:"iana"},"video/vnd.uvvu.mp4":{source:"iana",extensions:["uvu","uvvu"]},"video/vnd.vivo":{source:"iana",extensions:["viv"]},"video/vp8":{source:"iana"},"video/webm":{source:"apache",compressible:!1,extensions:["webm"]},"video/x-f4v":{source:"apache",extensions:["f4v"]},"video/x-fli":{source:"apache",extensions:["fli"]},"video/x-flv":{source:"apache",compressible:!1,extensions:["flv"]},"video/x-m4v":{source:"apache",extensions:["m4v"]},"video/x-matroska":{source:"apache",compressible:!1,extensions:["mkv","mk3d","mks"]},"video/x-mng":{source:"apache",extensions:["mng"]},"video/x-ms-asf":{source:"apache",extensions:["asf","asx"]},"video/x-ms-vob":{source:"apache",extensions:["vob"]},"video/x-ms-wm":{source:"apache",extensions:["wm"]},"video/x-ms-wmv":{source:"apache",compressible:!1,extensions:["wmv"]},"video/x-ms-wmx":{source:"apache",extensions:["wmx"]},"video/x-ms-wvx":{source:"apache",extensions:["wvx"]},"video/x-msvideo":{source:"apache",extensions:["avi"]},"video/x-sgi-movie":{source:"apache",extensions:["movie"]},"video/x-smv":{source:"apache",extensions:["smv"]},"x-conference/x-cooltalk":{source:"apache",extensions:["ice"]},"x-shader/x-fragment":{compressible:!0},"x-shader/x-vertex":{compressible:!0}}},function(e,t,r){e.exports=ForeverAgent,ForeverAgent.SSL=ForeverAgentSSL;var n=r(1),i=r(23).Agent,o=r(47),s=r(59),a=r(21).Agent;function getConnectionName(e,t){return"string"==typeof e?e+":"+t:e.host+":"+e.port+":"+(e.localAddress?e.localAddress+":":":")}function ForeverAgent(e){var t=this;t.options=e||{},t.requests={},t.sockets={},t.freeSockets={},t.maxSockets=t.options.maxSockets||i.defaultMaxSockets,t.minSockets=t.options.minSockets||ForeverAgent.defaultMinSockets,t.on("free",function(e,r,n){var i=getConnectionName(r,n);if(t.requests[i]&&t.requests[i].length)t.requests[i].shift().onSocket(e);else if(t.sockets[i].length<t.minSockets){t.freeSockets[i]||(t.freeSockets[i]=[]),t.freeSockets[i].push(e);var o=function(){e.destroy()};e._onIdleError=o,e.on("error",o)}else e.destroy()})}function ForeverAgentSSL(e){ForeverAgent.call(this,e)}n.inherits(ForeverAgent,i),ForeverAgent.defaultMinSockets=5,ForeverAgent.prototype.createConnection=o.createConnection,ForeverAgent.prototype.addRequestNoreuse=i.prototype.addRequest,ForeverAgent.prototype.addRequest=function(e,t,r){var n=getConnectionName(t,r);if("string"!=typeof t){var i=t;r=i.port,t=i.host}if(this.freeSockets[n]&&this.freeSockets[n].length>0&&!e.useChunkedEncodingByDefault){var o=this.freeSockets[n].pop();o.removeListener("error",o._onIdleError),delete o._onIdleError,e._reusedSocket=!0,e.onSocket(o)}else this.addRequestNoreuse(e,t,r)},ForeverAgent.prototype.removeSocket=function(e,t,r,n){var i;this.sockets[t]?-1!==(i=this.sockets[t].indexOf(e))&&this.sockets[t].splice(i,1):this.sockets[t]&&0===this.sockets[t].length&&(delete this.sockets[t],delete this.requests[t]);this.freeSockets[t]&&(-1!==(i=this.freeSockets[t].indexOf(e))&&(this.freeSockets[t].splice(i,1),0===this.freeSockets[t].length&&delete this.freeSockets[t]));this.requests[t]&&this.requests[t].length&&this.createSocket(t,r,n).emit("free")},n.inherits(ForeverAgentSSL,ForeverAgent),ForeverAgentSSL.prototype.createConnection=function createConnectionSSL(e,t,r){r="object"==typeof e?e:"object"==typeof t?t:"object"==typeof r?r:{};"number"==typeof e&&(r.port=e);"string"==typeof t&&(r.host=t);return s.connect(r)},ForeverAgentSSL.prototype.addRequestNoreuse=a.prototype.addRequest},function(e,t,r){var n=r(15).Stream,i=r(1);function DelayedStream(){this.source=null,this.dataSize=0,this.maxDataSize=1048576,this.pauseStream=!0,this._maxDataSizeExceeded=!1,this._released=!1,this._bufferedEvents=[]}e.exports=DelayedStream,i.inherits(DelayedStream,n),DelayedStream.create=function(e,t){var r=new this;for(var n in t=t||{})r[n]=t[n];r.source=e;var i=e.emit;return e.emit=function(){return r._handleEmit(arguments),i.apply(e,arguments)},e.on("error",function(){}),r.pauseStream&&e.pause(),r},Object.defineProperty(DelayedStream.prototype,"readable",{configurable:!0,enumerable:!0,get:function(){return this.source.readable}}),DelayedStream.prototype.setEncoding=function(){return this.source.setEncoding.apply(this.source,arguments)},DelayedStream.prototype.resume=function(){this._released||this.release(),this.source.resume()},DelayedStream.prototype.pause=function(){this.source.pause()},DelayedStream.prototype.release=function(){this._released=!0,this._bufferedEvents.forEach(function(e){this.emit.apply(this,e)}.bind(this)),this._bufferedEvents=[]},DelayedStream.prototype.pipe=function(){var e=n.prototype.pipe.apply(this,arguments);return this.resume(),e},DelayedStream.prototype._handleEmit=function(e){this._released?this.emit.apply(this,e):("data"===e[0]&&(this.dataSize+=e[1].length,this._checkIfMaxDataSizeExceeded()),this._bufferedEvents.push(e))},DelayedStream.prototype._checkIfMaxDataSizeExceeded=function(){if(!(this._maxDataSizeExceeded||this.dataSize<=this.maxDataSize)){this._maxDataSizeExceeded=!0;var e="DelayedStream#maxDataSize of "+this.maxDataSize+" bytes exceeded.";this.emit("error",new Error(e))}}},function(e,t){e.exports=function defer(e){var t="function"==typeof setImmediate?setImmediate:"object"==typeof process&&"function"==typeof process.nextTick?process.nextTick:null;t?t(e):setTimeout(e,0)}},function(e,t,r){e.exports={parallel:r(684),serial:r(686),serialOrdered:r(317)}},function(e,t,r){var n=r(312),i=r(315),o=r(316);e.exports=function parallel(e,t,r){var s=i(e);for(;s.index<(s.keyedList||e).length;)n(e,t,s,function(e,t){e?r(e,t):0!==Object.keys(s.jobs).length||r(null,s.results)}),s.index++;return o.bind(s,r)}},function(e,t){e.exports=function defer(e){var t="function"==typeof setImmediate?setImmediate:"object"==typeof process&&"function"==typeof process.nextTick?process.nextTick:null;t?t(e):setTimeout(e,0)}},function(e,t,r){var n=r(317);e.exports=function serial(e,t,r){return n(e,t,null,r)}},function(e,t){e.exports=function(e,t){return Object.keys(t).forEach(function(r){e[r]=e[r]||t[r]}),e}},function(e,t){e.exports=isTypedArray,isTypedArray.strict=isStrictTypedArray,isTypedArray.loose=isLooseTypedArray;var r=Object.prototype.toString,n={"[object Int8Array]":!0,"[object Int16Array]":!0,"[object Int32Array]":!0,"[object Uint8Array]":!0,"[object Uint8ClampedArray]":!0,"[object Uint16Array]":!0,"[object Uint32Array]":!0,"[object Float32Array]":!0,"[object Float64Array]":!0};function isTypedArray(e){return isStrictTypedArray(e)||isLooseTypedArray(e)}function isStrictTypedArray(e){return e instanceof Int8Array||e instanceof Int16Array||e instanceof Int32Array||e instanceof Uint8Array||e instanceof Uint8ClampedArray||e instanceof Uint16Array||e instanceof Uint32Array||e instanceof Float32Array||e instanceof Float64Array}function isLooseTypedArray(e){return n[r.call(e)]}},function(e,t,r){"use strict";function formatHostname(e){return e.replace(/^\.*/,".").toLowerCase()}function parseNoProxyZone(e){var t=(e=e.trim().toLowerCase()).split(":",2);return{hostname:formatHostname(t[0]),port:t[1],hasPort:e.indexOf(":")>-1}}e.exports=function getProxyFromURI(e){var t=process.env.NO_PROXY||process.env.no_proxy||"";return"*"===t?null:""!==t&&function uriInNoProxy(e,t){var r=e.port||("https:"===e.protocol?"443":"80"),n=formatHostname(e.hostname);return t.split(",").map(parseNoProxyZone).some(function(e){var t=n.indexOf(e.hostname),i=t>-1&&t===n.length-e.hostname.length;return e.hasPort?r===e.port&&i:i})}(e,t)?null:"http:"===e.protocol?process.env.HTTP_PROXY||process.env.http_proxy||null:"https:"===e.protocol&&(process.env.HTTPS_PROXY||process.env.https_proxy||process.env.HTTP_PROXY||process.env.http_proxy)||null}},function(e,t,r){"use strict";var n=r(319),i=r(52);function Querystring(e){this.request=e,this.lib=null,this.useQuerystring=null,this.parseOptions=null,this.stringifyOptions=null}Querystring.prototype.init=function(e){this.lib||(this.useQuerystring=e.useQuerystring,this.lib=this.useQuerystring?i:n,this.parseOptions=e.qsParseOptions||{},this.stringifyOptions=e.qsStringifyOptions||{})},Querystring.prototype.stringify=function(e){return this.useQuerystring?this.rfc3986(this.lib.stringify(e,this.stringifyOptions.sep||null,this.stringifyOptions.eq||null,this.stringifyOptions)):this.lib.stringify(e,this.stringifyOptions)},Querystring.prototype.parse=function(e){return this.useQuerystring?this.lib.parse(e,this.parseOptions.sep||null,this.parseOptions.eq||null,this.parseOptions):this.lib.parse(e,this.parseOptions)},Querystring.prototype.rfc3986=function(e){return e.replace(/[!'()*]/g,function(e){return"%"+e.charCodeAt(0).toString(16).toUpperCase()})},Querystring.prototype.unescape=i.unescape,t.Querystring=Querystring},function(e,t,r){"use strict";var n=r(320),i=r(321),o={brackets:function brackets(e){return e+"[]"},indices:function indices(e,t){return e+"["+t+"]"},repeat:function repeat(e){return e}},s=Date.prototype.toISOString,a={delimiter:"&",encode:!0,encoder:n.encode,encodeValuesOnly:!1,serializeDate:function serializeDate(e){return s.call(e)},skipNulls:!1,strictNullHandling:!1},c=function stringify(e,t,r,i,o,s,c,u,l,p,d,h){var f=e;if("function"==typeof c)f=c(t,f);else if(f instanceof Date)f=p(f);else if(null===f){if(i)return s&&!h?s(t,a.encoder):t;f=""}if("string"==typeof f||"number"==typeof f||"boolean"==typeof f||n.isBuffer(f))return s?[d(h?t:s(t,a.encoder))+"="+d(s(f,a.encoder))]:[d(t)+"="+d(String(f))];var m,g=[];if(void 0===f)return g;if(Array.isArray(c))m=c;else{var y=Object.keys(f);m=u?y.sort(u):y}for(var v=0;v<m.length;++v){var b=m[v];o&&null===f[b]||(g=Array.isArray(f)?g.concat(stringify(f[b],r(t,b),r,i,o,s,c,u,l,p,d,h)):g.concat(stringify(f[b],t+(l?"."+b:"["+b+"]"),r,i,o,s,c,u,l,p,d,h)))}return g};e.exports=function(e,t){var r=e,s=t?n.assign({},t):{};if(null!==s.encoder&&void 0!==s.encoder&&"function"!=typeof s.encoder)throw new TypeError("Encoder has to be a function.");var u=void 0===s.delimiter?a.delimiter:s.delimiter,l="boolean"==typeof s.strictNullHandling?s.strictNullHandling:a.strictNullHandling,p="boolean"==typeof s.skipNulls?s.skipNulls:a.skipNulls,d="boolean"==typeof s.encode?s.encode:a.encode,h="function"==typeof s.encoder?s.encoder:a.encoder,f="function"==typeof s.sort?s.sort:null,m=void 0!==s.allowDots&&s.allowDots,g="function"==typeof s.serializeDate?s.serializeDate:a.serializeDate,y="boolean"==typeof s.encodeValuesOnly?s.encodeValuesOnly:a.encodeValuesOnly;if(void 0===s.format)s.format=i.default;else if(!Object.prototype.hasOwnProperty.call(i.formatters,s.format))throw new TypeError("Unknown format option provided.");var v,b,_=i.formatters[s.format];"function"==typeof s.filter?r=(b=s.filter)("",r):Array.isArray(s.filter)&&(v=b=s.filter);var w,E=[];if("object"!=typeof r||null===r)return"";w=s.arrayFormat in o?s.arrayFormat:"indices"in s?s.indices?"indices":"repeat":"indices";var S=o[w];v||(v=Object.keys(r)),f&&v.sort(f);for(var C=0;C<v.length;++C){var x=v[C];p&&null===r[x]||(E=E.concat(c(r[x],x,S,l,p,d?h:null,b,f,m,g,_,y)))}var k=E.join(u),R=!0===s.addQueryPrefix?"?":"";return k.length>0?R+k:""}},function(e,t,r){"use strict";var n=r(320),i=Object.prototype.hasOwnProperty,o={allowDots:!1,allowPrototypes:!1,arrayLimit:20,decoder:n.decode,delimiter:"&",depth:5,parameterLimit:1e3,plainObjects:!1,strictNullHandling:!1},s=function parseQueryStringKeys(e,t,r){if(e){var n=r.allowDots?e.replace(/\.([^.[]+)/g,"[$1]"):e,o=/(\[[^[\]]*])/g,s=/(\[[^[\]]*])/.exec(n),a=s?n.slice(0,s.index):n,c=[];if(a){if(!r.plainObjects&&i.call(Object.prototype,a)&&!r.allowPrototypes)return;c.push(a)}for(var u=0;null!==(s=o.exec(n))&&u<r.depth;){if(u+=1,!r.plainObjects&&i.call(Object.prototype,s[1].slice(1,-1))&&!r.allowPrototypes)return;c.push(s[1])}return s&&c.push("["+n.slice(s.index)+"]"),function(e,t,r){for(var n=t,i=e.length-1;i>=0;--i){var o,s=e[i];if("[]"===s)o=(o=[]).concat(n);else{o=r.plainObjects?Object.create(null):{};var a="["===s.charAt(0)&&"]"===s.charAt(s.length-1)?s.slice(1,-1):s,c=parseInt(a,10);!isNaN(c)&&s!==a&&String(c)===a&&c>=0&&r.parseArrays&&c<=r.arrayLimit?(o=[])[c]=n:o[a]=n}n=o}return n}(c,t,r)}};e.exports=function(e,t){var r=t?n.assign({},t):{};if(null!==r.decoder&&void 0!==r.decoder&&"function"!=typeof r.decoder)throw new TypeError("Decoder has to be a function.");if(r.ignoreQueryPrefix=!0===r.ignoreQueryPrefix,r.delimiter="string"==typeof r.delimiter||n.isRegExp(r.delimiter)?r.delimiter:o.delimiter,r.depth="number"==typeof r.depth?r.depth:o.depth,r.arrayLimit="number"==typeof r.arrayLimit?r.arrayLimit:o.arrayLimit,r.parseArrays=!1!==r.parseArrays,r.decoder="function"==typeof r.decoder?r.decoder:o.decoder,r.allowDots="boolean"==typeof r.allowDots?r.allowDots:o.allowDots,r.plainObjects="boolean"==typeof r.plainObjects?r.plainObjects:o.plainObjects,r.allowPrototypes="boolean"==typeof r.allowPrototypes?r.allowPrototypes:o.allowPrototypes,r.parameterLimit="number"==typeof r.parameterLimit?r.parameterLimit:o.parameterLimit,r.strictNullHandling="boolean"==typeof r.strictNullHandling?r.strictNullHandling:o.strictNullHandling,""===e||null==e)return r.plainObjects?Object.create(null):{};for(var a="string"==typeof e?function parseQueryStringValues(e,t){for(var r={},n=t.ignoreQueryPrefix?e.replace(/^\?/,""):e,s=t.parameterLimit===1/0?void 0:t.parameterLimit,a=n.split(t.delimiter,s),c=0;c<a.length;++c){var u,l,p=a[c],d=p.indexOf("]="),h=-1===d?p.indexOf("="):d+1;-1===h?(u=t.decoder(p,o.decoder),l=t.strictNullHandling?null:""):(u=t.decoder(p.slice(0,h),o.decoder),l=t.decoder(p.slice(h+1),o.decoder)),i.call(r,u)?r[u]=[].concat(r[u]).concat(l):r[u]=l}return r}(e,r):e,c=r.plainObjects?Object.create(null):{},u=Object.keys(a),l=0;l<u.length;++l){var p=u[l],d=s(p,a[p],r);c=n.merge(c,d,r)}return n.compact(c)}},function(e,t,r){"use strict";var n=r(11),i=r(52),o=r(694),s=r(39);function Har(e){this.request=e}Har.prototype.reducer=function(e,t){if(void 0===e[t.name])return e[t.name]=t.value,e;var r=[e[t.name],t.value];return e[t.name]=r,e},Har.prototype.prep=function(e){if(e.queryObj={},e.headersObj={},e.postData.jsonObj=!1,e.postData.paramsObj=!1,e.queryString&&e.queryString.length&&(e.queryObj=e.queryString.reduce(this.reducer,{})),e.headers&&e.headers.length&&(e.headersObj=e.headers.reduceRight(function(e,t){return e[t.name]=t.value,e},{})),e.cookies&&e.cookies.length){var t=e.cookies.map(function(e){return e.name+"="+e.value});t.length&&(e.headersObj.cookie=t.join("; "))}function some(t){return t.some(function(t){return 0===e.postData.mimeType.indexOf(t)})}if(some(["multipart/mixed","multipart/related","multipart/form-data","multipart/alternative"]))e.postData.mimeType="multipart/form-data";else if(some(["application/x-www-form-urlencoded"]))e.postData.params?(e.postData.paramsObj=e.postData.params.reduce(this.reducer,{}),e.postData.text=i.stringify(e.postData.paramsObj)):e.postData.text="";else if(some(["text/json","text/x-json","application/json","application/x-json"])&&(e.postData.mimeType="application/json",e.postData.text))try{e.postData.jsonObj=JSON.parse(e.postData.text)}catch(t){this.request.debug(t),e.postData.mimeType="text/plain"}return e},Har.prototype.options=function(e){if(!e.har)return e;var t={};if(s(t,e.har),t.log&&t.log.entries&&(t=t.log.entries[0]),t.url=t.url||e.url||e.uri||e.baseUrl||"/",t.httpVersion=t.httpVersion||"HTTP/1.1",t.queryString=t.queryString||[],t.headers=t.headers||[],t.cookies=t.cookies||[],t.postData=t.postData||{},t.postData.mimeType=t.postData.mimeType||"application/octet-stream",t.bodySize=0,t.headersSize=0,t.postData.size=0,!o.request(t))return e;var r=this.prep(t);function test(e){return 0===r.postData.mimeType.indexOf(e)}return r.url&&(e.url=r.url),r.method&&(e.method=r.method),Object.keys(r.queryObj).length&&(e.qs=r.queryObj),Object.keys(r.headersObj).length&&(e.headers=r.headersObj),test("application/x-www-form-urlencoded")?e.form=r.postData.paramsObj:test("application/json")?r.postData.jsonObj&&(e.body=r.postData.jsonObj,e.json=!0):test("multipart/form-data")?(e.formData={},r.postData.params.forEach(function(t){var r={};t.fileName||t.fileName||t.contentType?(t.fileName&&!t.value?r.value=n.createReadStream(t.fileName):t.value&&(r.value=t.value),t.fileName&&(r.options={filename:t.fileName,contentType:t.contentType?t.contentType:null}),e.formData[t.name]=r):e.formData[t.name]=t.value})):r.postData.text&&(e.body=r.postData.text),e},t.Har=Har},function(e,t,r){var n,i=r(322),o=r(727),s=r(728);function validate(e,t){t=t||{};var a=(n=n||function createAjvInstance(){var e=new i({allErrors:!0});return e.addMetaSchema(r(747)),e.addSchema(s),e}()).getSchema(e+".json");return new Promise(function(e,r){a(t)?e(t):r(new o(a.errors))})}t.afterRequest=function(e){return validate("afterRequest",e)},t.beforeRequest=function(e){return validate("beforeRequest",e)},t.browser=function(e){return validate("browser",e)},t.cache=function(e){return validate("cache",e)},t.content=function(e){return validate("content",e)},t.cookie=function(e){return validate("cookie",e)},t.creator=function(e){return validate("creator",e)},t.entry=function(e){return validate("entry",e)},t.har=function(e){return validate("har",e)},t.header=function(e){return validate("header",e)},t.log=function(e){return validate("log",e)},t.page=function(e){return validate("page",e)},t.pageTimings=function(e){return validate("pageTimings",e)},t.postData=function(e){return validate("postData",e)},t.query=function(e){return validate("query",e)},t.request=function(e){return validate("request",e)},t.response=function(e){return validate("response",e)},t.timings=function(e){return validate("timings",e)}},function(e,t,r){"use strict";var n=r(197),i=r(91),o=r(199),s=r(324),a=r(325),c=i.ucs2length,u=r(198),l=o.Validation;function compIndex(e,t,r){for(var n=0;n<this._compilations.length;n++){var i=this._compilations[n];if(i.schema==e&&i.root==t&&i.baseId==r)return n}return-1}function patternCode(e,t){return"var pattern"+e+" = new RegExp("+i.toQuotedString(t[e])+");"}function defaultCode(e){return"var default"+e+" = defaults["+e+"];"}function refValCode(e,t){return void 0===t[e]?"":"var refVal"+e+" = refVal["+e+"];"}function customRuleCode(e){return"var customRule"+e+" = customRules["+e+"];"}function vars(e,t){if(!e.length)return"";for(var r="",n=0;n<e.length;n++)r+=t(n,e);return r}e.exports=function compile(e,t,r,p){var d=this,h=this._opts,f=[void 0],m={},g=[],y={},v=[],b={},_=[];t=t||{schema:e,refVal:f,refs:m};var w=function checkCompiling(e,t,r){var n=compIndex.call(this,e,t,r);return n>=0?{index:n,compiling:!0}:(n=this._compilations.length,this._compilations[n]={schema:e,root:t,baseId:r},{index:n,compiling:!1})}.call(this,e,t,p);var E=this._compilations[w.index];if(w.compiling)return E.callValidate=function callValidate(){var e=E.validate;var t=e.apply(this,arguments);callValidate.errors=e.errors;return t};var S=this._formats;var C=this.RULES;try{var x=localCompile(e,t,r,p);E.validate=x;var k=E.callValidate;return k&&(k.schema=x.schema,k.errors=null,k.refs=x.refs,k.refVal=x.refVal,k.root=x.root,k.$async=x.$async,h.sourceCode&&(k.source=x.source)),x}finally{(function endCompiling(e,t,r){var n=compIndex.call(this,e,t,r);n>=0&&this._compilations.splice(n,1)}).call(this,e,t,p)}function localCompile(e,r,s,p){var y=!r||r&&r.schema==e;if(r.schema!=t.schema)return compile.call(d,e,r,s,p);var b,w=!0===e.$async,E=a({isTop:!0,schema:e,isRoot:y,baseId:p,root:r,schemaPath:"",errSchemaPath:"#",errorPath:'""',MissingRefError:o.MissingRef,RULES:C,validate:a,util:i,resolve:n,resolveRef:resolveRef,usePattern:usePattern,useDefault:useDefault,useCustomRule:useCustomRule,opts:h,formats:S,logger:d.logger,self:d});E=vars(f,refValCode)+vars(g,patternCode)+vars(v,defaultCode)+vars(_,customRuleCode)+E,h.processCode&&(E=h.processCode(E));try{var x=new Function("self","RULES","formats","root","refVal","defaults","customRules","equal","ucs2length","ValidationError",E);b=x(d,C,S,t,f,v,_,u,c,l),f[0]=b}catch(e){throw d.logger.error("Error compiling schema, function code:",E),e}return b.schema=e,b.errors=null,b.refs=m,b.refVal=f,b.root=y?b:r,w&&(b.$async=!0),!0===h.sourceCode&&(b.source={code:E,patterns:g,defaults:v}),b}function resolveRef(e,i,o){i=n.url(e,i);var s,a,c=m[i];if(void 0!==c)return resolvedRef(s=f[c],a="refVal["+c+"]");if(!o&&t.refs){var u=t.refs[i];if(void 0!==u)return s=t.refVal[u],a=addLocalRef(i,s),resolvedRef(s,a)}a=addLocalRef(i);var l=n.call(d,localCompile,t,i);if(void 0===l){var p=r&&r[i];p&&(l=n.inlineRef(p,h.inlineRefs)?p:compile.call(d,p,t,r,e))}if(void 0!==l)return function replaceLocalRef(e,t){var r=m[e];f[r]=t}(i,l),resolvedRef(l,a);!function removeLocalRef(e){delete m[e]}(i)}function addLocalRef(e,t){var r=f.length;return f[r]=t,m[e]=r,"refVal"+r}function resolvedRef(e,t){return"object"==typeof e||"boolean"==typeof e?{code:t,schema:e,inline:!0}:{code:t,$async:e&&!!e.$async}}function usePattern(e){var t=y[e];return void 0===t&&(t=y[e]=g.length,g[t]=e),"pattern"+t}function useDefault(e){switch(typeof e){case"boolean":case"number":return""+e;case"string":return i.toQuotedString(e);case"object":if(null===e)return"null";var t=s(e),r=b[t];return void 0===r&&(r=b[t]=v.length,v[r]=e),"default"+r}}function useCustomRule(e,t,r,n){if(!1!==d._opts.validateSchema){var i=e.definition.dependencies;if(i&&!i.every(function(e){return Object.prototype.hasOwnProperty.call(r,e)}))throw new Error("parent schema must have all required keywords: "+i.join(","));var o=e.definition.validateSchema;if(o){var s=o(t);if(!s){var a="keyword schema is invalid: "+d.errorsText(o.errors);if("log"!=d._opts.validateSchema)throw new Error(a);d.logger.error(a)}}}var c,u=e.definition.compile,l=e.definition.inline,p=e.definition.macro;if(u)c=u.call(d,t,r,n);else if(p)c=p.call(d,t,r,n),!1!==h.validateSchema&&d.validateSchema(c,!0);else if(l)c=l.call(d,n,e.keyword,t,r);else if(!(c=e.definition.validate))return;if(void 0===c)throw new Error('custom keyword "'+e.keyword+'"failed to compile');var f=_.length;return _[f]=c,{code:"customRule"+f,validate:c}}}},function(e,t,r){
/** @license URI.js v4.2.1 (c) 2011 Gary Court. License: http://github.com/garycourt/uri-js */
!function(e){"use strict";function merge(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];if(t.length>1){t[0]=t[0].slice(0,-1);for(var n=t.length-1,i=1;i<n;++i)t[i]=t[i].slice(1,-1);return t[n]=t[n].slice(1),t.join("")}return t[0]}function subexp(e){return"(?:"+e+")"}function typeOf(e){return void 0===e?"undefined":null===e?"null":Object.prototype.toString.call(e).split(" ").pop().split("]").shift().toLowerCase()}function toUpperCase(e){return e.toUpperCase()}function buildExps(e){var t=merge("[0-9]","[A-Fa-f]"),r=subexp(subexp("%[EFef]"+t+"%"+t+t+"%"+t+t)+"|"+subexp("%[89A-Fa-f]"+t+"%"+t+t)+"|"+subexp("%"+t+t)),n="[\\!\\$\\&\\'\\(\\)\\*\\+\\,\\;\\=]",i=merge("[\\:\\/\\?\\#\\[\\]\\@]",n),o=e?"[\\xA0-\\u200D\\u2010-\\u2029\\u202F-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF]":"[]",s=e?"[\\uE000-\\uF8FF]":"[]",a=merge("[A-Za-z]","[0-9]","[\\-\\.\\_\\~]",o),c=subexp("[A-Za-z]"+merge("[A-Za-z]","[0-9]","[\\+\\-\\.]")+"*"),u=subexp(subexp(r+"|"+merge(a,n,"[\\:]"))+"*"),l=(subexp(subexp("25[0-5]")+"|"+subexp("2[0-4][0-9]")+"|"+subexp("1[0-9][0-9]")+"|"+subexp("[1-9][0-9]")+"|[0-9]"),subexp(subexp("25[0-5]")+"|"+subexp("2[0-4][0-9]")+"|"+subexp("1[0-9][0-9]")+"|"+subexp("0?[1-9][0-9]")+"|0?0?[0-9]")),p=subexp(l+"\\."+l+"\\."+l+"\\."+l),d=subexp(t+"{1,4}"),h=subexp(subexp(d+"\\:"+d)+"|"+p),f=subexp(subexp(d+"\\:")+"{6}"+h),m=subexp("\\:\\:"+subexp(d+"\\:")+"{5}"+h),g=subexp(subexp(d)+"?\\:\\:"+subexp(d+"\\:")+"{4}"+h),y=subexp(subexp(subexp(d+"\\:")+"{0,1}"+d)+"?\\:\\:"+subexp(d+"\\:")+"{3}"+h),v=subexp(subexp(subexp(d+"\\:")+"{0,2}"+d)+"?\\:\\:"+subexp(d+"\\:")+"{2}"+h),b=subexp(subexp(subexp(d+"\\:")+"{0,3}"+d)+"?\\:\\:"+d+"\\:"+h),_=subexp(subexp(subexp(d+"\\:")+"{0,4}"+d)+"?\\:\\:"+h),w=subexp(subexp(subexp(d+"\\:")+"{0,5}"+d)+"?\\:\\:"+d),E=subexp(subexp(subexp(d+"\\:")+"{0,6}"+d)+"?\\:\\:"),S=subexp([f,m,g,y,v,b,_,w,E].join("|")),C=subexp(subexp(a+"|"+r)+"+"),x=(subexp(S+"\\%25"+C),subexp(S+subexp("\\%25|\\%(?!"+t+"{2})")+C)),k=subexp("[vV]"+t+"+\\."+merge(a,n,"[\\:]")+"+"),R=subexp("\\["+subexp(x+"|"+S+"|"+k)+"\\]"),T=subexp(subexp(r+"|"+merge(a,n))+"*"),O=subexp(R+"|"+p+"(?!"+T+")|"+T),I=subexp("[0-9]*"),N=subexp(subexp(u+"@")+"?"+O+subexp("\\:"+I)+"?"),A=subexp(r+"|"+merge(a,n,"[\\:\\@]")),P=subexp(A+"*"),L=subexp(A+"+"),D=subexp(subexp(r+"|"+merge(a,n,"[\\@]"))+"+"),M=subexp(subexp("\\/"+P)+"*"),j=subexp("\\/"+subexp(L+M)+"?"),q=subexp(D+M),F=subexp(L+M),z="(?!"+A+")",U=(subexp(M+"|"+j+"|"+q+"|"+F+"|"+z),subexp(subexp(A+"|"+merge("[\\/\\?]",s))+"*")),B=subexp(subexp(A+"|[\\/\\?]")+"*"),H=subexp(subexp("\\/\\/"+N+M)+"|"+j+"|"+F+"|"+z),$=subexp(c+"\\:"+H+subexp("\\?"+U)+"?"+subexp("\\#"+B)+"?"),V=subexp(subexp("\\/\\/"+N+M)+"|"+j+"|"+q+"|"+z),G=subexp(V+subexp("\\?"+U)+"?"+subexp("\\#"+B)+"?");return subexp($+"|"+G),subexp(c+"\\:"+H+subexp("\\?"+U)+"?"),subexp(subexp("\\/\\/("+subexp("("+u+")@")+"?("+O+")"+subexp("\\:("+I+")")+"?)")+"?("+M+"|"+j+"|"+F+"|"+z+")"),subexp("\\?("+U+")"),subexp("\\#("+B+")"),subexp(subexp("\\/\\/("+subexp("("+u+")@")+"?("+O+")"+subexp("\\:("+I+")")+"?)")+"?("+M+"|"+j+"|"+q+"|"+z+")"),subexp("\\?("+U+")"),subexp("\\#("+B+")"),subexp(subexp("\\/\\/("+subexp("("+u+")@")+"?("+O+")"+subexp("\\:("+I+")")+"?)")+"?("+M+"|"+j+"|"+F+"|"+z+")"),subexp("\\?("+U+")"),subexp("\\#("+B+")"),subexp("("+u+")@"),subexp("\\:("+I+")"),{NOT_SCHEME:new RegExp(merge("[^]","[A-Za-z]","[0-9]","[\\+\\-\\.]"),"g"),NOT_USERINFO:new RegExp(merge("[^\\%\\:]",a,n),"g"),NOT_HOST:new RegExp(merge("[^\\%\\[\\]\\:]",a,n),"g"),NOT_PATH:new RegExp(merge("[^\\%\\/\\:\\@]",a,n),"g"),NOT_PATH_NOSCHEME:new RegExp(merge("[^\\%\\/\\@]",a,n),"g"),NOT_QUERY:new RegExp(merge("[^\\%]",a,n,"[\\:\\@\\/\\?]",s),"g"),NOT_FRAGMENT:new RegExp(merge("[^\\%]",a,n,"[\\:\\@\\/\\?]"),"g"),ESCAPE:new RegExp(merge("[^]",a,n),"g"),UNRESERVED:new RegExp(a,"g"),OTHER_CHARS:new RegExp(merge("[^\\%]",a,i),"g"),PCT_ENCODED:new RegExp(r,"g"),IPV4ADDRESS:new RegExp("^("+p+")$"),IPV6ADDRESS:new RegExp("^\\[?("+S+")"+subexp(subexp("\\%25|\\%(?!"+t+"{2})")+"("+C+")")+"?\\]?$")}}var t=buildExps(!1),r=buildExps(!0),n=function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function sliceIterator(e,t){var r=[],n=!0,i=!1,o=void 0;try{for(var s,a=e[Symbol.iterator]();!(n=(s=a.next()).done)&&(r.push(s.value),!t||r.length!==t);n=!0);}catch(e){i=!0,o=e}finally{try{!n&&a.return&&a.return()}finally{if(i)throw o}}return r}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")},i=2147483647,o=/^xn--/,s=/[^\0-\x7E]/,a=/[\x2E\u3002\uFF0E\uFF61]/g,c={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},u=Math.floor,l=String.fromCharCode;function error$1(e){throw new RangeError(c[e])}function mapDomain(e,t){var r=e.split("@"),n="";r.length>1&&(n=r[0]+"@",e=r[1]);var i=(e=e.replace(a,".")).split("."),o=function map(e,t){for(var r=[],n=e.length;n--;)r[n]=t(e[n]);return r}(i,t).join(".");return n+o}function ucs2decode(e){for(var t=[],r=0,n=e.length;r<n;){var i=e.charCodeAt(r++);if(i>=55296&&i<=56319&&r<n){var o=e.charCodeAt(r++);56320==(64512&o)?t.push(((1023&i)<<10)+(1023&o)+65536):(t.push(i),r--)}else t.push(i)}return t}var p=function basicToDigit(e){return e-48<10?e-22:e-65<26?e-65:e-97<26?e-97:36},d=function digitToBasic(e,t){return e+22+75*(e<26)-((0!=t)<<5)},h=function adapt(e,t,r){var n=0;for(e=r?u(e/700):e>>1,e+=u(e/t);e>455;n+=36)e=u(e/35);return u(n+36*e/(e+38))},f=function decode(e){var t=[],r=e.length,n=0,o=128,s=72,a=e.lastIndexOf("-");a<0&&(a=0);for(var c=0;c<a;++c)e.charCodeAt(c)>=128&&error$1("not-basic"),t.push(e.charCodeAt(c));for(var l=a>0?a+1:0;l<r;){for(var d=n,f=1,m=36;;m+=36){l>=r&&error$1("invalid-input");var g=p(e.charCodeAt(l++));(g>=36||g>u((i-n)/f))&&error$1("overflow"),n+=g*f;var y=m<=s?1:m>=s+26?26:m-s;if(g<y)break;var v=36-y;f>u(i/v)&&error$1("overflow"),f*=v}var b=t.length+1;s=h(n-d,b,0==d),u(n/b)>i-o&&error$1("overflow"),o+=u(n/b),n%=b,t.splice(n++,0,o)}return String.fromCodePoint.apply(String,t)},m=function encode(e){var t=[],r=(e=ucs2decode(e)).length,n=128,o=0,s=72,a=!0,c=!1,p=void 0;try{for(var f,m=e[Symbol.iterator]();!(a=(f=m.next()).done);a=!0){var g=f.value;g<128&&t.push(l(g))}}catch(e){c=!0,p=e}finally{try{!a&&m.return&&m.return()}finally{if(c)throw p}}var y=t.length,v=y;for(y&&t.push("-");v<r;){var b=i,_=!0,w=!1,E=void 0;try{for(var S,C=e[Symbol.iterator]();!(_=(S=C.next()).done);_=!0){var x=S.value;x>=n&&x<b&&(b=x)}}catch(e){w=!0,E=e}finally{try{!_&&C.return&&C.return()}finally{if(w)throw E}}var k=v+1;b-n>u((i-o)/k)&&error$1("overflow"),o+=(b-n)*k,n=b;var R=!0,T=!1,O=void 0;try{for(var I,N=e[Symbol.iterator]();!(R=(I=N.next()).done);R=!0){var A=I.value;if(A<n&&++o>i&&error$1("overflow"),A==n){for(var P=o,L=36;;L+=36){var D=L<=s?1:L>=s+26?26:L-s;if(P<D)break;var M=P-D,j=36-D;t.push(l(d(D+M%j,0))),P=u(M/j)}t.push(l(d(P,0))),s=h(o,k,v==y),o=0,++v}}}catch(e){T=!0,O=e}finally{try{!R&&N.return&&N.return()}finally{if(T)throw O}}++o,++n}return t.join("")},g={version:"2.1.0",ucs2:{decode:ucs2decode,encode:function ucs2encode(e){return String.fromCodePoint.apply(String,function(e){if(Array.isArray(e)){for(var t=0,r=Array(e.length);t<e.length;t++)r[t]=e[t];return r}return Array.from(e)}(e))}},decode:f,encode:m,toASCII:function toASCII(e){return mapDomain(e,function(e){return s.test(e)?"xn--"+m(e):e})},toUnicode:function toUnicode(e){return mapDomain(e,function(e){return o.test(e)?f(e.slice(4).toLowerCase()):e})}},y={};function pctEncChar(e){var t=e.charCodeAt(0);return t<16?"%0"+t.toString(16).toUpperCase():t<128?"%"+t.toString(16).toUpperCase():t<2048?"%"+(t>>6|192).toString(16).toUpperCase()+"%"+(63&t|128).toString(16).toUpperCase():"%"+(t>>12|224).toString(16).toUpperCase()+"%"+(t>>6&63|128).toString(16).toUpperCase()+"%"+(63&t|128).toString(16).toUpperCase()}function pctDecChars(e){for(var t="",r=0,n=e.length;r<n;){var i=parseInt(e.substr(r+1,2),16);if(i<128)t+=String.fromCharCode(i),r+=3;else if(i>=194&&i<224){if(n-r>=6){var o=parseInt(e.substr(r+4,2),16);t+=String.fromCharCode((31&i)<<6|63&o)}else t+=e.substr(r,6);r+=6}else if(i>=224){if(n-r>=9){var s=parseInt(e.substr(r+4,2),16),a=parseInt(e.substr(r+7,2),16);t+=String.fromCharCode((15&i)<<12|(63&s)<<6|63&a)}else t+=e.substr(r,9);r+=9}else t+=e.substr(r,3),r+=3}return t}function _normalizeComponentEncoding(e,t){function decodeUnreserved(e){var r=pctDecChars(e);return r.match(t.UNRESERVED)?r:e}return e.scheme&&(e.scheme=String(e.scheme).replace(t.PCT_ENCODED,decodeUnreserved).toLowerCase().replace(t.NOT_SCHEME,"")),void 0!==e.userinfo&&(e.userinfo=String(e.userinfo).replace(t.PCT_ENCODED,decodeUnreserved).replace(t.NOT_USERINFO,pctEncChar).replace(t.PCT_ENCODED,toUpperCase)),void 0!==e.host&&(e.host=String(e.host).replace(t.PCT_ENCODED,decodeUnreserved).toLowerCase().replace(t.NOT_HOST,pctEncChar).replace(t.PCT_ENCODED,toUpperCase)),void 0!==e.path&&(e.path=String(e.path).replace(t.PCT_ENCODED,decodeUnreserved).replace(e.scheme?t.NOT_PATH:t.NOT_PATH_NOSCHEME,pctEncChar).replace(t.PCT_ENCODED,toUpperCase)),void 0!==e.query&&(e.query=String(e.query).replace(t.PCT_ENCODED,decodeUnreserved).replace(t.NOT_QUERY,pctEncChar).replace(t.PCT_ENCODED,toUpperCase)),void 0!==e.fragment&&(e.fragment=String(e.fragment).replace(t.PCT_ENCODED,decodeUnreserved).replace(t.NOT_FRAGMENT,pctEncChar).replace(t.PCT_ENCODED,toUpperCase)),e}function _stripLeadingZeros(e){return e.replace(/^0*(.*)/,"$1")||"0"}function _normalizeIPv4(e,t){var r=e.match(t.IPV4ADDRESS)||[],i=n(r,2),o=i[1];return o?o.split(".").map(_stripLeadingZeros).join("."):e}function _normalizeIPv6(e,t){var r=e.match(t.IPV6ADDRESS)||[],i=n(r,3),o=i[1],s=i[2];if(o){for(var a=o.toLowerCase().split("::").reverse(),c=n(a,2),u=c[0],l=c[1],p=l?l.split(":").map(_stripLeadingZeros):[],d=u.split(":").map(_stripLeadingZeros),h=t.IPV4ADDRESS.test(d[d.length-1]),f=h?7:8,m=d.length-f,g=Array(f),y=0;y<f;++y)g[y]=p[y]||d[m+y]||"";h&&(g[f-1]=_normalizeIPv4(g[f-1],t));var v=g.reduce(function(e,t,r){if(!t||"0"===t){var n=e[e.length-1];n&&n.index+n.length===r?n.length++:e.push({index:r,length:1})}return e},[]),b=v.sort(function(e,t){return t.length-e.length})[0],_=void 0;if(b&&b.length>1){var w=g.slice(0,b.index),E=g.slice(b.index+b.length);_=w.join(":")+"::"+E.join(":")}else _=g.join(":");return s&&(_+="%"+s),_}return e}var v=/^(?:([^:\/?#]+):)?(?:\/\/((?:([^\/?#@]*)@)?(\[[^\/?#\]]+\]|[^\/?#:]*)(?:\:(\d*))?))?([^?#]*)(?:\?([^#]*))?(?:#((?:.|\n|\r)*))?/i,b=void 0==="".match(/(){0}/)[1];function parse(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i={},o=!1!==n.iri?r:t;"suffix"===n.reference&&(e=(n.scheme?n.scheme+":":"")+"//"+e);var s=e.match(v);if(s){b?(i.scheme=s[1],i.userinfo=s[3],i.host=s[4],i.port=parseInt(s[5],10),i.path=s[6]||"",i.query=s[7],i.fragment=s[8],isNaN(i.port)&&(i.port=s[5])):(i.scheme=s[1]||void 0,i.userinfo=-1!==e.indexOf("@")?s[3]:void 0,i.host=-1!==e.indexOf("//")?s[4]:void 0,i.port=parseInt(s[5],10),i.path=s[6]||"",i.query=-1!==e.indexOf("?")?s[7]:void 0,i.fragment=-1!==e.indexOf("#")?s[8]:void 0,isNaN(i.port)&&(i.port=e.match(/\/\/(?:.|\n)*\:(?:\/|\?|\#|$)/)?s[4]:void 0)),i.host&&(i.host=_normalizeIPv6(_normalizeIPv4(i.host,o),o)),void 0!==i.scheme||void 0!==i.userinfo||void 0!==i.host||void 0!==i.port||i.path||void 0!==i.query?void 0===i.scheme?i.reference="relative":void 0===i.fragment?i.reference="absolute":i.reference="uri":i.reference="same-document",n.reference&&"suffix"!==n.reference&&n.reference!==i.reference&&(i.error=i.error||"URI is not a "+n.reference+" reference.");var a=y[(n.scheme||i.scheme||"").toLowerCase()];if(n.unicodeSupport||a&&a.unicodeSupport)_normalizeComponentEncoding(i,o);else{if(i.host&&(n.domainHost||a&&a.domainHost))try{i.host=g.toASCII(i.host.replace(o.PCT_ENCODED,pctDecChars).toLowerCase())}catch(e){i.error=i.error||"Host's domain name can not be converted to ASCII via punycode: "+e}_normalizeComponentEncoding(i,t)}a&&a.parse&&a.parse(i,n)}else i.error=i.error||"URI can not be parsed.";return i}var _=/^\.\.?\//,w=/^\/\.(\/|$)/,E=/^\/\.\.(\/|$)/,S=/^\/?(?:.|\n)*?(?=\/|$)/;function removeDotSegments(e){for(var t=[];e.length;)if(e.match(_))e=e.replace(_,"");else if(e.match(w))e=e.replace(w,"/");else if(e.match(E))e=e.replace(E,"/"),t.pop();else if("."===e||".."===e)e="";else{var r=e.match(S);if(!r)throw new Error("Unexpected dot segment condition");var n=r[0];e=e.slice(n.length),t.push(n)}return t.join("")}function serialize(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=n.iri?r:t,o=[],s=y[(n.scheme||e.scheme||"").toLowerCase()];if(s&&s.serialize&&s.serialize(e,n),e.host)if(i.IPV6ADDRESS.test(e.host));else if(n.domainHost||s&&s.domainHost)try{e.host=n.iri?g.toUnicode(e.host):g.toASCII(e.host.replace(i.PCT_ENCODED,pctDecChars).toLowerCase())}catch(t){e.error=e.error||"Host's domain name can not be converted to "+(n.iri?"Unicode":"ASCII")+" via punycode: "+t}_normalizeComponentEncoding(e,i),"suffix"!==n.reference&&e.scheme&&(o.push(e.scheme),o.push(":"));var a=function _recomposeAuthority(e,n){var i=!1!==n.iri?r:t,o=[];return void 0!==e.userinfo&&(o.push(e.userinfo),o.push("@")),void 0!==e.host&&o.push(_normalizeIPv6(_normalizeIPv4(String(e.host),i),i).replace(i.IPV6ADDRESS,function(e,t,r){return"["+t+(r?"%25"+r:"")+"]"})),"number"==typeof e.port&&(o.push(":"),o.push(e.port.toString(10))),o.length?o.join(""):void 0}(e,n);if(void 0!==a&&("suffix"!==n.reference&&o.push("//"),o.push(a),e.path&&"/"!==e.path.charAt(0)&&o.push("/")),void 0!==e.path){var c=e.path;n.absolutePath||s&&s.absolutePath||(c=removeDotSegments(c)),void 0===a&&(c=c.replace(/^\/\//,"/%2F")),o.push(c)}return void 0!==e.query&&(o.push("?"),o.push(e.query)),void 0!==e.fragment&&(o.push("#"),o.push(e.fragment)),o.join("")}function resolveComponents(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},n=arguments[3],i={};return n||(e=parse(serialize(e,r),r),t=parse(serialize(t,r),r)),!(r=r||{}).tolerant&&t.scheme?(i.scheme=t.scheme,i.userinfo=t.userinfo,i.host=t.host,i.port=t.port,i.path=removeDotSegments(t.path||""),i.query=t.query):(void 0!==t.userinfo||void 0!==t.host||void 0!==t.port?(i.userinfo=t.userinfo,i.host=t.host,i.port=t.port,i.path=removeDotSegments(t.path||""),i.query=t.query):(t.path?("/"===t.path.charAt(0)?i.path=removeDotSegments(t.path):(void 0===e.userinfo&&void 0===e.host&&void 0===e.port||e.path?e.path?i.path=e.path.slice(0,e.path.lastIndexOf("/")+1)+t.path:i.path=t.path:i.path="/"+t.path,i.path=removeDotSegments(i.path)),i.query=t.query):(i.path=e.path,void 0!==t.query?i.query=t.query:i.query=e.query),i.userinfo=e.userinfo,i.host=e.host,i.port=e.port),i.scheme=e.scheme),i.fragment=t.fragment,i}function unescapeComponent(e,n){return e&&e.toString().replace(n&&n.iri?r.PCT_ENCODED:t.PCT_ENCODED,pctDecChars)}var C={scheme:"http",domainHost:!0,parse:function parse(e,t){return e.host||(e.error=e.error||"HTTP URIs must have a host."),e},serialize:function serialize(e,t){return e.port!==("https"!==String(e.scheme).toLowerCase()?80:443)&&""!==e.port||(e.port=void 0),e.path||(e.path="/"),e}},x={scheme:"https",domainHost:C.domainHost,parse:C.parse,serialize:C.serialize},k={},R="[A-Za-z0-9\\-\\.\\_\\~\\xA0-\\u200D\\u2010-\\u2029\\u202F-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF]",T="[0-9A-Fa-f]",O=subexp(subexp("%[EFef][0-9A-Fa-f]%"+T+T+"%"+T+T)+"|"+subexp("%[89A-Fa-f][0-9A-Fa-f]%"+T+T)+"|"+subexp("%"+T+T)),I=merge("[\\!\\$\\%\\'\\(\\)\\*\\+\\,\\-\\.0-9\\<\\>A-Z\\x5E-\\x7E]",'[\\"\\\\]'),N=new RegExp(R,"g"),A=new RegExp(O,"g"),P=new RegExp(merge("[^]","[A-Za-z0-9\\!\\$\\%\\'\\*\\+\\-\\^\\_\\`\\{\\|\\}\\~]","[\\.]",'[\\"]',I),"g"),L=new RegExp(merge("[^]",R,"[\\!\\$\\'\\(\\)\\*\\+\\,\\;\\:\\@]"),"g"),D=L;function decodeUnreserved(e){var t=pctDecChars(e);return t.match(N)?t:e}var M={scheme:"mailto",parse:function parse$$1(e,t){var r=e,n=r.to=r.path?r.path.split(","):[];if(r.path=void 0,r.query){for(var i=!1,o={},s=r.query.split("&"),a=0,c=s.length;a<c;++a){var u=s[a].split("=");switch(u[0]){case"to":for(var l=u[1].split(","),p=0,d=l.length;p<d;++p)n.push(l[p]);break;case"subject":r.subject=unescapeComponent(u[1],t);break;case"body":r.body=unescapeComponent(u[1],t);break;default:i=!0,o[unescapeComponent(u[0],t)]=unescapeComponent(u[1],t)}}i&&(r.headers=o)}r.query=void 0;for(var h=0,f=n.length;h<f;++h){var m=n[h].split("@");if(m[0]=unescapeComponent(m[0]),t.unicodeSupport)m[1]=unescapeComponent(m[1],t).toLowerCase();else try{m[1]=g.toASCII(unescapeComponent(m[1],t).toLowerCase())}catch(e){r.error=r.error||"Email address's domain name can not be converted to ASCII via punycode: "+e}n[h]=m.join("@")}return r},serialize:function serialize$$1(e,t){var r=e,n=function toArray(e){return null!=e?e instanceof Array?e:"number"!=typeof e.length||e.split||e.setInterval||e.call?[e]:Array.prototype.slice.call(e):[]}(e.to);if(n){for(var i=0,o=n.length;i<o;++i){var s=String(n[i]),a=s.lastIndexOf("@"),c=s.slice(0,a).replace(A,decodeUnreserved).replace(A,toUpperCase).replace(P,pctEncChar),u=s.slice(a+1);try{u=t.iri?g.toUnicode(u):g.toASCII(unescapeComponent(u,t).toLowerCase())}catch(e){r.error=r.error||"Email address's domain name can not be converted to "+(t.iri?"Unicode":"ASCII")+" via punycode: "+e}n[i]=c+"@"+u}r.path=n.join(",")}var l=e.headers=e.headers||{};e.subject&&(l.subject=e.subject),e.body&&(l.body=e.body);var p=[];for(var d in l)l[d]!==k[d]&&p.push(d.replace(A,decodeUnreserved).replace(A,toUpperCase).replace(L,pctEncChar)+"="+l[d].replace(A,decodeUnreserved).replace(A,toUpperCase).replace(D,pctEncChar));return p.length&&(r.query=p.join("&")),r}},j=/^([^\:]+)\:(.*)/,q={scheme:"urn",parse:function parse$$1(e,t){var r=e.path&&e.path.match(j),n=e;if(r){var i=t.scheme||n.scheme||"urn",o=r[1].toLowerCase(),s=r[2],a=i+":"+(t.nid||o),c=y[a];n.nid=o,n.nss=s,n.path=void 0,c&&(n=c.parse(n,t))}else n.error=n.error||"URN can not be parsed.";return n},serialize:function serialize$$1(e,t){var r=t.scheme||e.scheme||"urn",n=e.nid,i=r+":"+(t.nid||n),o=y[i];o&&(e=o.serialize(e,t));var s=e,a=e.nss;return s.path=(n||t.nid)+":"+a,s}},F=/^[0-9A-Fa-f]{8}(?:\-[0-9A-Fa-f]{4}){3}\-[0-9A-Fa-f]{12}$/,z={scheme:"urn:uuid",parse:function parse(e,t){var r=e;return r.uuid=r.nss,r.nss=void 0,t.tolerant||r.uuid&&r.uuid.match(F)||(r.error=r.error||"UUID is not valid."),r},serialize:function serialize(e,t){var r=e;return r.nss=(e.uuid||"").toLowerCase(),r}};y[C.scheme]=C,y[x.scheme]=x,y[M.scheme]=M,y[q.scheme]=q,y[z.scheme]=z,e.SCHEMES=y,e.pctEncChar=pctEncChar,e.pctDecChars=pctDecChars,e.parse=parse,e.removeDotSegments=removeDotSegments,e.serialize=serialize,e.resolveComponents=resolveComponents,e.resolve=function resolve(e,t,r){var n=function assign(e,t){var r=e;if(t)for(var n in t)r[n]=t[n];return r}({scheme:"null"},r);return serialize(resolveComponents(parse(e,n),parse(t,n),n,!0),n)},e.normalize=function normalize(e,t){return"string"==typeof e?e=serialize(parse(e,t),t):"object"===typeOf(e)&&(e=parse(serialize(e,t),t)),e},e.equal=function equal(e,t,r){return"string"==typeof e?e=serialize(parse(e,r),r):"object"===typeOf(e)&&(e=serialize(e,r)),"string"==typeof t?t=serialize(parse(t,r),r):"object"===typeOf(t)&&(t=serialize(t,r)),e===t},e.escapeComponent=function escapeComponent(e,n){return e&&e.toString().replace(n&&n.iri?r.ESCAPE:t.ESCAPE,pctEncChar)},e.unescapeComponent=unescapeComponent,Object.defineProperty(e,"__esModule",{value:!0})}(t)},function(e,t,r){"use strict";e.exports=function ucs2length(e){for(var t,r=0,n=e.length,i=0;i<n;)r++,(t=e.charCodeAt(i++))>=55296&&t<=56319&&i<n&&56320==(64512&(t=e.charCodeAt(i)))&&i++;return r}},function(e,t,r){"use strict";var n=e.exports=function(e,t,r){"function"==typeof t&&(r=t,t={}),function _traverse(e,t,r,i,o,s,a,c,u,l){if(i&&"object"==typeof i&&!Array.isArray(i)){for(var p in t(i,o,s,a,c,u,l),i){var d=i[p];if(Array.isArray(d)){if(p in n.arrayKeywords)for(var h=0;h<d.length;h++)_traverse(e,t,r,d[h],o+"/"+p+"/"+h,s,o,p,i,h)}else if(p in n.propsKeywords){if(d&&"object"==typeof d)for(var f in d)_traverse(e,t,r,d[f],o+"/"+p+"/"+f.replace(/~/g,"~0").replace(/\//g,"~1"),s,o,p,i,f)}else(p in n.keywords||e.allKeys&&!(p in n.skipKeywords))&&_traverse(e,t,r,d,o+"/"+p,s,o,p,i)}r(i,o,s,a,c,u,l)}}(t,"function"==typeof(r=t.cb||r)?r:r.pre||function(){},r.post||function(){},e,"",e)};n.keywords={additionalItems:!0,items:!0,contains:!0,additionalProperties:!0,propertyNames:!0,not:!0},n.arrayKeywords={items:!0,allOf:!0,anyOf:!0,oneOf:!0},n.propsKeywords={definitions:!0,properties:!0,patternProperties:!0,dependencies:!0},n.skipKeywords={default:!0,enum:!0,const:!0,required:!0,maximum:!0,minimum:!0,exclusiveMaximum:!0,exclusiveMinimum:!0,multipleOf:!0,maxLength:!0,minLength:!0,pattern:!0,format:!0,maxItems:!0,minItems:!0,uniqueItems:!0,maxProperties:!0,minProperties:!0}},function(e,t,r){"use strict";var n=e.exports=function Cache(){this._cache={}};n.prototype.put=function Cache_put(e,t){this._cache[e]=t},n.prototype.get=function Cache_get(e){return this._cache[e]},n.prototype.del=function Cache_del(e){delete this._cache[e]},n.prototype.clear=function Cache_clear(){this._cache={}}},function(e,t,r){"use strict";var n=r(91),i=/^(\d\d\d\d)-(\d\d)-(\d\d)$/,o=[0,31,28,31,30,31,30,31,31,30,31,30,31],s=/^(\d\d):(\d\d):(\d\d)(\.\d+)?(z|[+-]\d\d:\d\d)?$/i,a=/^[a-z0-9](?:[a-z0-9-]{0,61}[a-z0-9])?(?:\.[a-z0-9](?:[-0-9a-z]{0,61}[0-9a-z])?)*$/i,c=/^(?:[a-z][a-z0-9+\-.]*:)(?:\/?\/(?:(?:[a-z0-9\-._~!$&'()*+,;=:]|%[0-9a-f]{2})*@)?(?:\[(?:(?:(?:(?:[0-9a-f]{1,4}:){6}|::(?:[0-9a-f]{1,4}:){5}|(?:[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){4}|(?:(?:[0-9a-f]{1,4}:){0,1}[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){3}|(?:(?:[0-9a-f]{1,4}:){0,2}[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){2}|(?:(?:[0-9a-f]{1,4}:){0,3}[0-9a-f]{1,4})?::[0-9a-f]{1,4}:|(?:(?:[0-9a-f]{1,4}:){0,4}[0-9a-f]{1,4})?::)(?:[0-9a-f]{1,4}:[0-9a-f]{1,4}|(?:(?:25[0-5]|2[0-4]\d|[01]?\d\d?)\.){3}(?:25[0-5]|2[0-4]\d|[01]?\d\d?))|(?:(?:[0-9a-f]{1,4}:){0,5}[0-9a-f]{1,4})?::[0-9a-f]{1,4}|(?:(?:[0-9a-f]{1,4}:){0,6}[0-9a-f]{1,4})?::)|[Vv][0-9a-f]+\.[a-z0-9\-._~!$&'()*+,;=:]+)\]|(?:(?:25[0-5]|2[0-4]\d|[01]?\d\d?)\.){3}(?:25[0-5]|2[0-4]\d|[01]?\d\d?)|(?:[a-z0-9\-._~!$&'()*+,;=]|%[0-9a-f]{2})*)(?::\d*)?(?:\/(?:[a-z0-9\-._~!$&'()*+,;=:@]|%[0-9a-f]{2})*)*|\/(?:(?:[a-z0-9\-._~!$&'()*+,;=:@]|%[0-9a-f]{2})+(?:\/(?:[a-z0-9\-._~!$&'()*+,;=:@]|%[0-9a-f]{2})*)*)?|(?:[a-z0-9\-._~!$&'()*+,;=:@]|%[0-9a-f]{2})+(?:\/(?:[a-z0-9\-._~!$&'()*+,;=:@]|%[0-9a-f]{2})*)*)(?:\?(?:[a-z0-9\-._~!$&'()*+,;=:@\/?]|%[0-9a-f]{2})*)?(?:#(?:[a-z0-9\-._~!$&'()*+,;=:@\/?]|%[0-9a-f]{2})*)?$/i,u=/^(?:(?:[^\x00-\x20"'<>%\\^`{|}]|%[0-9a-f]{2})|\{[+#.\/;?&=,!@|]?(?:[a-z0-9_]|%[0-9a-f]{2})+(?::[1-9][0-9]{0,3}|\*)?(?:,(?:[a-z0-9_]|%[0-9a-f]{2})+(?::[1-9][0-9]{0,3}|\*)?)*\})*$/i,l=/^(?:(?:http[s\u017F]?|ftp):\/\/)(?:(?:[\0-\x08\x0E-\x1F!-\x9F\xA1-\u167F\u1681-\u1FFF\u200B-\u2027\u202A-\u202E\u2030-\u205E\u2060-\u2FFF\u3001-\uD7FF\uE000-\uFEFE\uFF00-\uFFFF]|[\uD800-\uDBFF][\uDC00-\uDFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF])+(?::(?:[\0-\x08\x0E-\x1F!-\x9F\xA1-\u167F\u1681-\u1FFF\u200B-\u2027\u202A-\u202E\u2030-\u205E\u2060-\u2FFF\u3001-\uD7FF\uE000-\uFEFE\uFF00-\uFFFF]|[\uD800-\uDBFF][\uDC00-\uDFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF])*)?@)?(?:(?!10(?:\.[0-9]{1,3}){3})(?!127(?:\.[0-9]{1,3}){3})(?!169\.254(?:\.[0-9]{1,3}){2})(?!192\.168(?:\.[0-9]{1,3}){2})(?!172\.(?:1[6-9]|2[0-9]|3[01])(?:\.[0-9]{1,3}){2})(?:[1-9][0-9]?|1[0-9][0-9]|2[01][0-9]|22[0-3])(?:\.(?:1?[0-9]{1,2}|2[0-4][0-9]|25[0-5])){2}(?:\.(?:[1-9][0-9]?|1[0-9][0-9]|2[0-4][0-9]|25[0-4]))|(?:(?:(?:[0-9KSa-z\xA1-\uD7FF\uE000-\uFFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF])+-?)*(?:[0-9KSa-z\xA1-\uD7FF\uE000-\uFFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF])+)(?:\.(?:(?:[0-9KSa-z\xA1-\uD7FF\uE000-\uFFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF])+-?)*(?:[0-9KSa-z\xA1-\uD7FF\uE000-\uFFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF])+)*(?:\.(?:(?:[KSa-z\xA1-\uD7FF\uE000-\uFFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF]){2,})))(?::[0-9]{2,5})?(?:\/(?:[\0-\x08\x0E-\x1F!-\x9F\xA1-\u167F\u1681-\u1FFF\u200B-\u2027\u202A-\u202E\u2030-\u205E\u2060-\u2FFF\u3001-\uD7FF\uE000-\uFEFE\uFF00-\uFFFF]|[\uD800-\uDBFF][\uDC00-\uDFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF])*)?$/i,p=/^(?:urn:uuid:)?[0-9a-f]{8}-(?:[0-9a-f]{4}-){3}[0-9a-f]{12}$/i,d=/^(?:\/(?:[^~\/]|~0|~1)*)*$/,h=/^#(?:\/(?:[a-z0-9_\-.!$&'()*+,;:=@]|%[0-9a-f]{2}|~0|~1)*)*$/i,f=/^(?:0|[1-9][0-9]*)(?:#|(?:\/(?:[^~\/]|~0|~1)*)*)$/;function formats(e){return e="full"==e?"full":"fast",n.copy(formats[e])}function date(e){var t=e.match(i);if(!t)return!1;var r=+t[1],n=+t[2],s=+t[3];return n>=1&&n<=12&&s>=1&&s<=(2==n&&function isLeapYear(e){return e%4==0&&(e%100!=0||e%400==0)}(r)?29:o[n])}function time(e,t){var r=e.match(s);if(!r)return!1;var n=r[1],i=r[2],o=r[3],a=r[5];return(n<=23&&i<=59&&o<=59||23==n&&59==i&&60==o)&&(!t||a)}e.exports=formats,formats.fast={date:/^\d\d\d\d-[0-1]\d-[0-3]\d$/,time:/^(?:[0-2]\d:[0-5]\d:[0-5]\d|23:59:60)(?:\.\d+)?(?:z|[+-]\d\d:\d\d)?$/i,"date-time":/^\d\d\d\d-[0-1]\d-[0-3]\d[t\s](?:[0-2]\d:[0-5]\d:[0-5]\d|23:59:60)(?:\.\d+)?(?:z|[+-]\d\d:\d\d)$/i,uri:/^(?:[a-z][a-z0-9+-.]*:)(?:\/?\/)?[^\s]*$/i,"uri-reference":/^(?:(?:[a-z][a-z0-9+-.]*:)?\/?\/)?(?:[^\\\s#][^\s#]*)?(?:#[^\\\s]*)?$/i,"uri-template":u,url:l,email:/^[a-z0-9.!#$%&'*+\/=?^_`{|}~-]+@[a-z0-9](?:[a-z0-9-]{0,61}[a-z0-9])?(?:\.[a-z0-9](?:[a-z0-9-]{0,61}[a-z0-9])?)*$/i,hostname:a,ipv4:/^(?:(?:25[0-5]|2[0-4]\d|[01]?\d\d?)\.){3}(?:25[0-5]|2[0-4]\d|[01]?\d\d?)$/,ipv6:/^\s*(?:(?:(?:[0-9a-f]{1,4}:){7}(?:[0-9a-f]{1,4}|:))|(?:(?:[0-9a-f]{1,4}:){6}(?::[0-9a-f]{1,4}|(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3})|:))|(?:(?:[0-9a-f]{1,4}:){5}(?:(?:(?::[0-9a-f]{1,4}){1,2})|:(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3})|:))|(?:(?:[0-9a-f]{1,4}:){4}(?:(?:(?::[0-9a-f]{1,4}){1,3})|(?:(?::[0-9a-f]{1,4})?:(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(?:(?:[0-9a-f]{1,4}:){3}(?:(?:(?::[0-9a-f]{1,4}){1,4})|(?:(?::[0-9a-f]{1,4}){0,2}:(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(?:(?:[0-9a-f]{1,4}:){2}(?:(?:(?::[0-9a-f]{1,4}){1,5})|(?:(?::[0-9a-f]{1,4}){0,3}:(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(?:(?:[0-9a-f]{1,4}:){1}(?:(?:(?::[0-9a-f]{1,4}){1,6})|(?:(?::[0-9a-f]{1,4}){0,4}:(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(?::(?:(?:(?::[0-9a-f]{1,4}){1,7})|(?:(?::[0-9a-f]{1,4}){0,5}:(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:)))(?:%.+)?\s*$/i,regex:regex,uuid:p,"json-pointer":d,"json-pointer-uri-fragment":h,"relative-json-pointer":f},formats.full={date:date,time:time,"date-time":function date_time(e){var t=e.split(m);return 2==t.length&&date(t[0])&&time(t[1],!0)},uri:function uri(e){return g.test(e)&&c.test(e)},"uri-reference":/^(?:[a-z][a-z0-9+\-.]*:)?(?:\/?\/(?:(?:[a-z0-9\-._~!$&'()*+,;=:]|%[0-9a-f]{2})*@)?(?:\[(?:(?:(?:(?:[0-9a-f]{1,4}:){6}|::(?:[0-9a-f]{1,4}:){5}|(?:[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){4}|(?:(?:[0-9a-f]{1,4}:){0,1}[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){3}|(?:(?:[0-9a-f]{1,4}:){0,2}[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){2}|(?:(?:[0-9a-f]{1,4}:){0,3}[0-9a-f]{1,4})?::[0-9a-f]{1,4}:|(?:(?:[0-9a-f]{1,4}:){0,4}[0-9a-f]{1,4})?::)(?:[0-9a-f]{1,4}:[0-9a-f]{1,4}|(?:(?:25[0-5]|2[0-4]\d|[01]?\d\d?)\.){3}(?:25[0-5]|2[0-4]\d|[01]?\d\d?))|(?:(?:[0-9a-f]{1,4}:){0,5}[0-9a-f]{1,4})?::[0-9a-f]{1,4}|(?:(?:[0-9a-f]{1,4}:){0,6}[0-9a-f]{1,4})?::)|[Vv][0-9a-f]+\.[a-z0-9\-._~!$&'()*+,;=:]+)\]|(?:(?:25[0-5]|2[0-4]\d|[01]?\d\d?)\.){3}(?:25[0-5]|2[0-4]\d|[01]?\d\d?)|(?:[a-z0-9\-._~!$&'"()*+,;=]|%[0-9a-f]{2})*)(?::\d*)?(?:\/(?:[a-z0-9\-._~!$&'"()*+,;=:@]|%[0-9a-f]{2})*)*|\/(?:(?:[a-z0-9\-._~!$&'"()*+,;=:@]|%[0-9a-f]{2})+(?:\/(?:[a-z0-9\-._~!$&'"()*+,;=:@]|%[0-9a-f]{2})*)*)?|(?:[a-z0-9\-._~!$&'"()*+,;=:@]|%[0-9a-f]{2})+(?:\/(?:[a-z0-9\-._~!$&'"()*+,;=:@]|%[0-9a-f]{2})*)*)?(?:\?(?:[a-z0-9\-._~!$&'"()*+,;=:@\/?]|%[0-9a-f]{2})*)?(?:#(?:[a-z0-9\-._~!$&'"()*+,;=:@\/?]|%[0-9a-f]{2})*)?$/i,"uri-template":u,url:l,email:/^[a-z0-9!#$%&'*+\/=?^_`{|}~-]+(?:\.[a-z0-9!#$%&'*+\/=?^_`{|}~-]+)*@(?:[a-z0-9](?:[a-z0-9-]*[a-z0-9])?\.)+[a-z0-9](?:[a-z0-9-]*[a-z0-9])?$/i,hostname:function hostname(e){return e.length<=255&&a.test(e)},ipv4:/^(?:(?:25[0-5]|2[0-4]\d|[01]?\d\d?)\.){3}(?:25[0-5]|2[0-4]\d|[01]?\d\d?)$/,ipv6:/^\s*(?:(?:(?:[0-9a-f]{1,4}:){7}(?:[0-9a-f]{1,4}|:))|(?:(?:[0-9a-f]{1,4}:){6}(?::[0-9a-f]{1,4}|(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3})|:))|(?:(?:[0-9a-f]{1,4}:){5}(?:(?:(?::[0-9a-f]{1,4}){1,2})|:(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3})|:))|(?:(?:[0-9a-f]{1,4}:){4}(?:(?:(?::[0-9a-f]{1,4}){1,3})|(?:(?::[0-9a-f]{1,4})?:(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(?:(?:[0-9a-f]{1,4}:){3}(?:(?:(?::[0-9a-f]{1,4}){1,4})|(?:(?::[0-9a-f]{1,4}){0,2}:(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(?:(?:[0-9a-f]{1,4}:){2}(?:(?:(?::[0-9a-f]{1,4}){1,5})|(?:(?::[0-9a-f]{1,4}){0,3}:(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(?:(?:[0-9a-f]{1,4}:){1}(?:(?:(?::[0-9a-f]{1,4}){1,6})|(?:(?::[0-9a-f]{1,4}){0,4}:(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(?::(?:(?:(?::[0-9a-f]{1,4}){1,7})|(?:(?::[0-9a-f]{1,4}){0,5}:(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:)))(?:%.+)?\s*$/i,regex:regex,uuid:p,"json-pointer":d,"json-pointer-uri-fragment":h,"relative-json-pointer":f};var m=/t|\s/i;var g=/\/|:/;var y=/[^\\]\\Z/;function regex(e){if(y.test(e))return!1;try{return new RegExp(e),!0}catch(e){return!1}}},function(e,t,r){"use strict";var n=r(702),i=r(91).toHash;e.exports=function rules(){var e=[{type:"number",rules:[{maximum:["exclusiveMaximum"]},{minimum:["exclusiveMinimum"]},"multipleOf","format"]},{type:"string",rules:["maxLength","minLength","pattern","format"]},{type:"array",rules:["maxItems","minItems","items","contains","uniqueItems"]},{type:"object",rules:["maxProperties","minProperties","required","dependencies","propertyNames",{properties:["additionalProperties","patternProperties"]}]},{rules:["$ref","const","enum","not","anyOf","oneOf","allOf","if"]}],t=["type","$comment"];return e.all=i(t),e.types=i(["number","integer","string","array","object","boolean","null"]),e.forEach(function(r){r.rules=r.rules.map(function(r){var i;if("object"==typeof r){var o=Object.keys(r)[0];i=r[o],r=o,i.forEach(function(r){t.push(r),e.all[r]=!0})}return t.push(r),e.all[r]={keyword:r,code:n[r],implements:i}}),e.all.$comment={keyword:"$comment",code:n.$comment},r.type&&(e.types[r.type]=r)}),e.keywords=i(t.concat(["$schema","$id","id","$data","$async","title","description","default","definitions","examples","readOnly","writeOnly","contentMediaType","contentEncoding","additionalItems","then","else"])),e.custom={},e}},function(e,t,r){"use strict";e.exports={$ref:r(703),allOf:r(704),anyOf:r(705),$comment:r(706),const:r(707),contains:r(708),dependencies:r(709),enum:r(710),format:r(711),if:r(712),items:r(713),maximum:r(326),minimum:r(326),maxItems:r(327),minItems:r(327),maxLength:r(328),minLength:r(328),maxProperties:r(329),minProperties:r(329),multipleOf:r(714),not:r(715),oneOf:r(716),pattern:r(717),properties:r(718),propertyNames:r(719),required:r(720),uniqueItems:r(721),validate:r(325)}},function(e,t,r){"use strict";e.exports=function generate_ref(e,t,r){var n,i,o=" ",s=e.level,a=e.dataLevel,c=e.schema[t],u=e.errSchemaPath+"/"+t,l=!e.opts.allErrors,p="data"+(a||""),d="valid"+s;if("#"==c||"#/"==c)e.isRoot?(n=e.async,i="validate"):(n=!0===e.root.schema.$async,i="root.refVal[0]");else{var h=e.resolveRef(e.baseId,c,e.isRoot);if(void 0===h){var f=e.MissingRefError.message(e.baseId,c);if("fail"==e.opts.missingRefs){e.logger.error(f),(v=v||[]).push(o),o="",!1!==e.createErrors?(o+=" { keyword: '$ref' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(u)+" , params: { ref: '"+e.util.escapeQuotes(c)+"' } ",!1!==e.opts.messages&&(o+=" , message: 'can\\'t resolve reference "+e.util.escapeQuotes(c)+"' "),e.opts.verbose&&(o+=" , schema: "+e.util.toQuotedString(c)+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+p+" "),o+=" } "):o+=" {} ";var m=o;o=v.pop(),!e.compositeRule&&l?e.async?o+=" throw new ValidationError(["+m+"]); ":o+=" validate.errors = ["+m+"]; return false; ":o+=" var err = "+m+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",l&&(o+=" if (false) { ")}else{if("ignore"!=e.opts.missingRefs)throw new e.MissingRefError(e.baseId,c,f);e.logger.warn(f),l&&(o+=" if (true) { ")}}else if(h.inline){var g=e.util.copy(e);g.level++;var y="valid"+g.level;g.schema=h.schema,g.schemaPath="",g.errSchemaPath=c,o+=" "+e.validate(g).replace(/validate\.schema/g,h.code)+" ",l&&(o+=" if ("+y+") { ")}else n=!0===h.$async||e.async&&!1!==h.$async,i=h.code}if(i){var v;(v=v||[]).push(o),o="",e.opts.passContext?o+=" "+i+".call(this, ":o+=" "+i+"( ",o+=" "+p+", (dataPath || '')",'""'!=e.errorPath&&(o+=" + "+e.errorPath);var b=o+=" , "+(a?"data"+(a-1||""):"parentData")+" , "+(a?e.dataPathArr[a]:"parentDataProperty")+", rootData)  ";if(o=v.pop(),n){if(!e.async)throw new Error("async schema referenced by sync schema");l&&(o+=" var "+d+"; "),o+=" try { await "+b+"; ",l&&(o+=" "+d+" = true; "),o+=" } catch (e) { if (!(e instanceof ValidationError)) throw e; if (vErrors === null) vErrors = e.errors; else vErrors = vErrors.concat(e.errors); errors = vErrors.length; ",l&&(o+=" "+d+" = false; "),o+=" } ",l&&(o+=" if ("+d+") { ")}else o+=" if (!"+b+") { if (vErrors === null) vErrors = "+i+".errors; else vErrors = vErrors.concat("+i+".errors); errors = vErrors.length; } ",l&&(o+=" else { ")}return o}},function(e,t,r){"use strict";e.exports=function generate_allOf(e,t,r){var n=" ",i=e.schema[t],o=e.schemaPath+e.util.getProperty(t),s=e.errSchemaPath+"/"+t,a=!e.opts.allErrors,c=e.util.copy(e),u="";c.level++;var l="valid"+c.level,p=c.baseId,d=!0,h=i;if(h)for(var f,m=-1,g=h.length-1;m<g;)f=h[m+=1],e.util.schemaHasRules(f,e.RULES.all)&&(d=!1,c.schema=f,c.schemaPath=o+"["+m+"]",c.errSchemaPath=s+"/"+m,n+="  "+e.validate(c)+" ",c.baseId=p,a&&(n+=" if ("+l+") { ",u+="}"));return a&&(n+=d?" if (true) { ":" "+u.slice(0,-1)+" "),n=e.util.cleanUpCode(n)}},function(e,t,r){"use strict";e.exports=function generate_anyOf(e,t,r){var n=" ",i=e.level,o=e.dataLevel,s=e.schema[t],a=e.schemaPath+e.util.getProperty(t),c=e.errSchemaPath+"/"+t,u=!e.opts.allErrors,l="data"+(o||""),p="valid"+i,d="errs__"+i,h=e.util.copy(e),f="";h.level++;var m="valid"+h.level;if(s.every(function(t){return e.util.schemaHasRules(t,e.RULES.all)})){var g=h.baseId;n+=" var "+d+" = errors; var "+p+" = false;  ";var y=e.compositeRule;e.compositeRule=h.compositeRule=!0;var v=s;if(v)for(var b,_=-1,w=v.length-1;_<w;)b=v[_+=1],h.schema=b,h.schemaPath=a+"["+_+"]",h.errSchemaPath=c+"/"+_,n+="  "+e.validate(h)+" ",h.baseId=g,n+=" "+p+" = "+p+" || "+m+"; if (!"+p+") { ",f+="}";e.compositeRule=h.compositeRule=y,n+=" "+f+" if (!"+p+") {   var err =   ",!1!==e.createErrors?(n+=" { keyword: 'anyOf' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(c)+" , params: {} ",!1!==e.opts.messages&&(n+=" , message: 'should match some schema in anyOf' "),e.opts.verbose&&(n+=" , schema: validate.schema"+a+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+l+" "),n+=" } "):n+=" {} ",n+=";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",!e.compositeRule&&u&&(e.async?n+=" throw new ValidationError(vErrors); ":n+=" validate.errors = vErrors; return false; "),n+=" } else {  errors = "+d+"; if (vErrors !== null) { if ("+d+") vErrors.length = "+d+"; else vErrors = null; } ",e.opts.allErrors&&(n+=" } "),n=e.util.cleanUpCode(n)}else u&&(n+=" if (true) { ");return n}},function(e,t,r){"use strict";e.exports=function generate_comment(e,t,r){var n=" ",i=e.schema[t],o=e.errSchemaPath+"/"+t,s=(e.opts.allErrors,e.util.toQuotedString(i));return!0===e.opts.$comment?n+=" console.log("+s+");":"function"==typeof e.opts.$comment&&(n+=" self._opts.$comment("+s+", "+e.util.toQuotedString(o)+", validate.root.schema);"),n}},function(e,t,r){"use strict";e.exports=function generate_const(e,t,r){var n=" ",i=e.level,o=e.dataLevel,s=e.schema[t],a=e.schemaPath+e.util.getProperty(t),c=e.errSchemaPath+"/"+t,u=!e.opts.allErrors,l="data"+(o||""),p="valid"+i,d=e.opts.$data&&s&&s.$data;d&&(n+=" var schema"+i+" = "+e.util.getData(s.$data,o,e.dataPathArr)+"; "),d||(n+=" var schema"+i+" = validate.schema"+a+";"),n+="var "+p+" = equal("+l+", schema"+i+"); if (!"+p+") {   ";var h=h||[];h.push(n),n="",!1!==e.createErrors?(n+=" { keyword: 'const' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(c)+" , params: { allowedValue: schema"+i+" } ",!1!==e.opts.messages&&(n+=" , message: 'should be equal to constant' "),e.opts.verbose&&(n+=" , schema: validate.schema"+a+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+l+" "),n+=" } "):n+=" {} ";var f=n;return n=h.pop(),!e.compositeRule&&u?e.async?n+=" throw new ValidationError(["+f+"]); ":n+=" validate.errors = ["+f+"]; return false; ":n+=" var err = "+f+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",n+=" }",u&&(n+=" else { "),n}},function(e,t,r){"use strict";e.exports=function generate_contains(e,t,r){var n=" ",i=e.level,o=e.dataLevel,s=e.schema[t],a=e.schemaPath+e.util.getProperty(t),c=e.errSchemaPath+"/"+t,u=!e.opts.allErrors,l="data"+(o||""),p="valid"+i,d="errs__"+i,h=e.util.copy(e);h.level++;var f="valid"+h.level,m="i"+i,g=h.dataLevel=e.dataLevel+1,y="data"+g,v=e.baseId,b=e.util.schemaHasRules(s,e.RULES.all);if(n+="var "+d+" = errors;var "+p+";",b){var _=e.compositeRule;e.compositeRule=h.compositeRule=!0,h.schema=s,h.schemaPath=a,h.errSchemaPath=c,n+=" var "+f+" = false; for (var "+m+" = 0; "+m+" < "+l+".length; "+m+"++) { ",h.errorPath=e.util.getPathExpr(e.errorPath,m,e.opts.jsonPointers,!0);var w=l+"["+m+"]";h.dataPathArr[g]=m;var E=e.validate(h);h.baseId=v,e.util.varOccurences(E,y)<2?n+=" "+e.util.varReplace(E,y,w)+" ":n+=" var "+y+" = "+w+"; "+E+" ",n+=" if ("+f+") break; }  ",e.compositeRule=h.compositeRule=_,n+="  if (!"+f+") {"}else n+=" if ("+l+".length == 0) {";var S=S||[];S.push(n),n="",!1!==e.createErrors?(n+=" { keyword: 'contains' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(c)+" , params: {} ",!1!==e.opts.messages&&(n+=" , message: 'should contain a valid item' "),e.opts.verbose&&(n+=" , schema: validate.schema"+a+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+l+" "),n+=" } "):n+=" {} ";var C=n;return n=S.pop(),!e.compositeRule&&u?e.async?n+=" throw new ValidationError(["+C+"]); ":n+=" validate.errors = ["+C+"]; return false; ":n+=" var err = "+C+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",n+=" } else { ",b&&(n+="  errors = "+d+"; if (vErrors !== null) { if ("+d+") vErrors.length = "+d+"; else vErrors = null; } "),e.opts.allErrors&&(n+=" } "),n=e.util.cleanUpCode(n)}},function(e,t,r){"use strict";e.exports=function generate_dependencies(e,t,r){var n=" ",i=e.level,o=e.dataLevel,s=e.schema[t],a=e.schemaPath+e.util.getProperty(t),c=e.errSchemaPath+"/"+t,u=!e.opts.allErrors,l="data"+(o||""),p="errs__"+i,d=e.util.copy(e),h="";d.level++;var f="valid"+d.level,m={},g={},y=e.opts.ownProperties;for(w in s){var v=s[w],b=Array.isArray(v)?g:m;b[w]=v}n+="var "+p+" = errors;";var _=e.errorPath;for(var w in n+="var missing"+i+";",g)if((b=g[w]).length){if(n+=" if ( "+l+e.util.getProperty(w)+" !== undefined ",y&&(n+=" && Object.prototype.hasOwnProperty.call("+l+", '"+e.util.escapeQuotes(w)+"') "),u){n+=" && ( ";var E=b;if(E)for(var S=-1,C=E.length-1;S<C;){I=E[S+=1],S&&(n+=" || "),n+=" ( ( "+(L=l+(P=e.util.getProperty(I)))+" === undefined ",y&&(n+=" || ! Object.prototype.hasOwnProperty.call("+l+", '"+e.util.escapeQuotes(I)+"') "),n+=") && (missing"+i+" = "+e.util.toQuotedString(e.opts.jsonPointers?I:P)+") ) "}n+=")) {  ";var x="missing"+i,k="' + "+x+" + '";e.opts._errorDataPathProperty&&(e.errorPath=e.opts.jsonPointers?e.util.getPathExpr(_,x,!0):_+" + "+x);var R=R||[];R.push(n),n="",!1!==e.createErrors?(n+=" { keyword: 'dependencies' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(c)+" , params: { property: '"+e.util.escapeQuotes(w)+"', missingProperty: '"+k+"', depsCount: "+b.length+", deps: '"+e.util.escapeQuotes(1==b.length?b[0]:b.join(", "))+"' } ",!1!==e.opts.messages&&(n+=" , message: 'should have ",1==b.length?n+="property "+e.util.escapeQuotes(b[0]):n+="properties "+e.util.escapeQuotes(b.join(", ")),n+=" when property "+e.util.escapeQuotes(w)+" is present' "),e.opts.verbose&&(n+=" , schema: validate.schema"+a+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+l+" "),n+=" } "):n+=" {} ";var T=n;n=R.pop(),!e.compositeRule&&u?e.async?n+=" throw new ValidationError(["+T+"]); ":n+=" validate.errors = ["+T+"]; return false; ":n+=" var err = "+T+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; "}else{n+=" ) { ";var O=b;if(O)for(var I,N=-1,A=O.length-1;N<A;){I=O[N+=1];var P=e.util.getProperty(I),L=(k=e.util.escapeQuotes(I),l+P);e.opts._errorDataPathProperty&&(e.errorPath=e.util.getPath(_,I,e.opts.jsonPointers)),n+=" if ( "+L+" === undefined ",y&&(n+=" || ! Object.prototype.hasOwnProperty.call("+l+", '"+e.util.escapeQuotes(I)+"') "),n+=") {  var err =   ",!1!==e.createErrors?(n+=" { keyword: 'dependencies' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(c)+" , params: { property: '"+e.util.escapeQuotes(w)+"', missingProperty: '"+k+"', depsCount: "+b.length+", deps: '"+e.util.escapeQuotes(1==b.length?b[0]:b.join(", "))+"' } ",!1!==e.opts.messages&&(n+=" , message: 'should have ",1==b.length?n+="property "+e.util.escapeQuotes(b[0]):n+="properties "+e.util.escapeQuotes(b.join(", ")),n+=" when property "+e.util.escapeQuotes(w)+" is present' "),e.opts.verbose&&(n+=" , schema: validate.schema"+a+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+l+" "),n+=" } "):n+=" {} ",n+=";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; } "}}n+=" }   ",u&&(h+="}",n+=" else { ")}e.errorPath=_;var D=d.baseId;for(var w in m){v=m[w];e.util.schemaHasRules(v,e.RULES.all)&&(n+=" "+f+" = true; if ( "+l+e.util.getProperty(w)+" !== undefined ",y&&(n+=" && Object.prototype.hasOwnProperty.call("+l+", '"+e.util.escapeQuotes(w)+"') "),n+=") { ",d.schema=v,d.schemaPath=a+e.util.getProperty(w),d.errSchemaPath=c+"/"+e.util.escapeFragment(w),n+="  "+e.validate(d)+" ",d.baseId=D,n+=" }  ",u&&(n+=" if ("+f+") { ",h+="}"))}return u&&(n+="   "+h+" if ("+p+" == errors) {"),n=e.util.cleanUpCode(n)}},function(e,t,r){"use strict";e.exports=function generate_enum(e,t,r){var n=" ",i=e.level,o=e.dataLevel,s=e.schema[t],a=e.schemaPath+e.util.getProperty(t),c=e.errSchemaPath+"/"+t,u=!e.opts.allErrors,l="data"+(o||""),p="valid"+i,d=e.opts.$data&&s&&s.$data;d&&(n+=" var schema"+i+" = "+e.util.getData(s.$data,o,e.dataPathArr)+"; ");var h="i"+i,f="schema"+i;d||(n+=" var "+f+" = validate.schema"+a+";"),n+="var "+p+";",d&&(n+=" if (schema"+i+" === undefined) "+p+" = true; else if (!Array.isArray(schema"+i+")) "+p+" = false; else {"),n+=p+" = false;for (var "+h+"=0; "+h+"<"+f+".length; "+h+"++) if (equal("+l+", "+f+"["+h+"])) { "+p+" = true; break; }",d&&(n+="  }  "),n+=" if (!"+p+") {   ";var m=m||[];m.push(n),n="",!1!==e.createErrors?(n+=" { keyword: 'enum' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(c)+" , params: { allowedValues: schema"+i+" } ",!1!==e.opts.messages&&(n+=" , message: 'should be equal to one of the allowed values' "),e.opts.verbose&&(n+=" , schema: validate.schema"+a+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+l+" "),n+=" } "):n+=" {} ";var g=n;return n=m.pop(),!e.compositeRule&&u?e.async?n+=" throw new ValidationError(["+g+"]); ":n+=" validate.errors = ["+g+"]; return false; ":n+=" var err = "+g+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",n+=" }",u&&(n+=" else { "),n}},function(e,t,r){"use strict";e.exports=function generate_format(e,t,r){var n=" ",i=e.level,o=e.dataLevel,s=e.schema[t],a=e.schemaPath+e.util.getProperty(t),c=e.errSchemaPath+"/"+t,u=!e.opts.allErrors,l="data"+(o||"");if(!1===e.opts.format)return u&&(n+=" if (true) { "),n;var p,d=e.opts.$data&&s&&s.$data;d?(n+=" var schema"+i+" = "+e.util.getData(s.$data,o,e.dataPathArr)+"; ",p="schema"+i):p=s;var h=e.opts.unknownFormats,f=Array.isArray(h);if(d){n+=" var "+(m="format"+i)+" = formats["+p+"]; var "+(g="isObject"+i)+" = typeof "+m+" == 'object' && !("+m+" instanceof RegExp) && "+m+".validate; var "+(y="formatType"+i)+" = "+g+" && "+m+".type || 'string'; if ("+g+") { ",e.async&&(n+=" var async"+i+" = "+m+".async; "),n+=" "+m+" = "+m+".validate; } if (  ",d&&(n+=" ("+p+" !== undefined && typeof "+p+" != 'string') || "),n+=" (","ignore"!=h&&(n+=" ("+p+" && !"+m+" ",f&&(n+=" && self._opts.unknownFormats.indexOf("+p+") == -1 "),n+=") || "),n+=" ("+m+" && "+y+" == '"+r+"' && !(typeof "+m+" == 'function' ? ",e.async?n+=" (async"+i+" ? await "+m+"("+l+") : "+m+"("+l+")) ":n+=" "+m+"("+l+") ",n+=" : "+m+".test("+l+"))))) {"}else{var m;if(!(m=e.formats[s])){if("ignore"==h)return e.logger.warn('unknown format "'+s+'" ignored in schema at path "'+e.errSchemaPath+'"'),u&&(n+=" if (true) { "),n;if(f&&h.indexOf(s)>=0)return u&&(n+=" if (true) { "),n;throw new Error('unknown format "'+s+'" is used in schema at path "'+e.errSchemaPath+'"')}var g,y=(g="object"==typeof m&&!(m instanceof RegExp)&&m.validate)&&m.type||"string";if(g){var v=!0===m.async;m=m.validate}if(y!=r)return u&&(n+=" if (true) { "),n;if(v){if(!e.async)throw new Error("async format in sync schema");n+=" if (!(await "+(b="formats"+e.util.getProperty(s)+".validate")+"("+l+"))) { "}else{n+=" if (! ";var b="formats"+e.util.getProperty(s);g&&(b+=".validate"),n+="function"==typeof m?" "+b+"("+l+") ":" "+b+".test("+l+") ",n+=") { "}}var _=_||[];_.push(n),n="",!1!==e.createErrors?(n+=" { keyword: 'format' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(c)+" , params: { format:  ",n+=d?""+p:""+e.util.toQuotedString(s),n+="  } ",!1!==e.opts.messages&&(n+=" , message: 'should match format \"",n+=d?"' + "+p+" + '":""+e.util.escapeQuotes(s),n+="\"' "),e.opts.verbose&&(n+=" , schema:  ",n+=d?"validate.schema"+a:""+e.util.toQuotedString(s),n+="         , parentSchema: validate.schema"+e.schemaPath+" , data: "+l+" "),n+=" } "):n+=" {} ";var w=n;return n=_.pop(),!e.compositeRule&&u?e.async?n+=" throw new ValidationError(["+w+"]); ":n+=" validate.errors = ["+w+"]; return false; ":n+=" var err = "+w+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",n+=" } ",u&&(n+=" else { "),n}},function(e,t,r){"use strict";e.exports=function generate_if(e,t,r){var n=" ",i=e.level,o=e.dataLevel,s=e.schema[t],a=e.schemaPath+e.util.getProperty(t),c=e.errSchemaPath+"/"+t,u=!e.opts.allErrors,l="data"+(o||""),p="valid"+i,d="errs__"+i,h=e.util.copy(e);h.level++;var f="valid"+h.level,m=e.schema.then,g=e.schema.else,y=void 0!==m&&e.util.schemaHasRules(m,e.RULES.all),v=void 0!==g&&e.util.schemaHasRules(g,e.RULES.all),b=h.baseId;if(y||v){var _;h.createErrors=!1,h.schema=s,h.schemaPath=a,h.errSchemaPath=c,n+=" var "+d+" = errors; var "+p+" = true;  ";var w=e.compositeRule;e.compositeRule=h.compositeRule=!0,n+="  "+e.validate(h)+" ",h.baseId=b,h.createErrors=!0,n+="  errors = "+d+"; if (vErrors !== null) { if ("+d+") vErrors.length = "+d+"; else vErrors = null; }  ",e.compositeRule=h.compositeRule=w,y?(n+=" if ("+f+") {  ",h.schema=e.schema.then,h.schemaPath=e.schemaPath+".then",h.errSchemaPath=e.errSchemaPath+"/then",n+="  "+e.validate(h)+" ",h.baseId=b,n+=" "+p+" = "+f+"; ",y&&v?n+=" var "+(_="ifClause"+i)+" = 'then'; ":_="'then'",n+=" } ",v&&(n+=" else { ")):n+=" if (!"+f+") { ",v&&(h.schema=e.schema.else,h.schemaPath=e.schemaPath+".else",h.errSchemaPath=e.errSchemaPath+"/else",n+="  "+e.validate(h)+" ",h.baseId=b,n+=" "+p+" = "+f+"; ",y&&v?n+=" var "+(_="ifClause"+i)+" = 'else'; ":_="'else'",n+=" } "),n+=" if (!"+p+") {   var err =   ",!1!==e.createErrors?(n+=" { keyword: 'if' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(c)+" , params: { failingKeyword: "+_+" } ",!1!==e.opts.messages&&(n+=" , message: 'should match \"' + "+_+" + '\" schema' "),e.opts.verbose&&(n+=" , schema: validate.schema"+a+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+l+" "),n+=" } "):n+=" {} ",n+=";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",!e.compositeRule&&u&&(e.async?n+=" throw new ValidationError(vErrors); ":n+=" validate.errors = vErrors; return false; "),n+=" }   ",u&&(n+=" else { "),n=e.util.cleanUpCode(n)}else u&&(n+=" if (true) { ");return n}},function(e,t,r){"use strict";e.exports=function generate_items(e,t,r){var n=" ",i=e.level,o=e.dataLevel,s=e.schema[t],a=e.schemaPath+e.util.getProperty(t),c=e.errSchemaPath+"/"+t,u=!e.opts.allErrors,l="data"+(o||""),p="valid"+i,d="errs__"+i,h=e.util.copy(e),f="";h.level++;var m="valid"+h.level,g="i"+i,y=h.dataLevel=e.dataLevel+1,v="data"+y,b=e.baseId;if(n+="var "+d+" = errors;var "+p+";",Array.isArray(s)){var _=e.schema.additionalItems;if(!1===_){n+=" "+p+" = "+l+".length <= "+s.length+"; ";var w=c;c=e.errSchemaPath+"/additionalItems",n+="  if (!"+p+") {   ";var E=E||[];E.push(n),n="",!1!==e.createErrors?(n+=" { keyword: 'additionalItems' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(c)+" , params: { limit: "+s.length+" } ",!1!==e.opts.messages&&(n+=" , message: 'should NOT have more than "+s.length+" items' "),e.opts.verbose&&(n+=" , schema: false , parentSchema: validate.schema"+e.schemaPath+" , data: "+l+" "),n+=" } "):n+=" {} ";var S=n;n=E.pop(),!e.compositeRule&&u?e.async?n+=" throw new ValidationError(["+S+"]); ":n+=" validate.errors = ["+S+"]; return false; ":n+=" var err = "+S+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",n+=" } ",c=w,u&&(f+="}",n+=" else { ")}var C=s;if(C)for(var x,k=-1,R=C.length-1;k<R;)if(x=C[k+=1],e.util.schemaHasRules(x,e.RULES.all)){n+=" "+m+" = true; if ("+l+".length > "+k+") { ";var T=l+"["+k+"]";h.schema=x,h.schemaPath=a+"["+k+"]",h.errSchemaPath=c+"/"+k,h.errorPath=e.util.getPathExpr(e.errorPath,k,e.opts.jsonPointers,!0),h.dataPathArr[y]=k;var O=e.validate(h);h.baseId=b,e.util.varOccurences(O,v)<2?n+=" "+e.util.varReplace(O,v,T)+" ":n+=" var "+v+" = "+T+"; "+O+" ",n+=" }  ",u&&(n+=" if ("+m+") { ",f+="}")}if("object"==typeof _&&e.util.schemaHasRules(_,e.RULES.all)){h.schema=_,h.schemaPath=e.schemaPath+".additionalItems",h.errSchemaPath=e.errSchemaPath+"/additionalItems",n+=" "+m+" = true; if ("+l+".length > "+s.length+") {  for (var "+g+" = "+s.length+"; "+g+" < "+l+".length; "+g+"++) { ",h.errorPath=e.util.getPathExpr(e.errorPath,g,e.opts.jsonPointers,!0);T=l+"["+g+"]";h.dataPathArr[y]=g;O=e.validate(h);h.baseId=b,e.util.varOccurences(O,v)<2?n+=" "+e.util.varReplace(O,v,T)+" ":n+=" var "+v+" = "+T+"; "+O+" ",u&&(n+=" if (!"+m+") break; "),n+=" } }  ",u&&(n+=" if ("+m+") { ",f+="}")}}else if(e.util.schemaHasRules(s,e.RULES.all)){h.schema=s,h.schemaPath=a,h.errSchemaPath=c,n+="  for (var "+g+" = 0; "+g+" < "+l+".length; "+g+"++) { ",h.errorPath=e.util.getPathExpr(e.errorPath,g,e.opts.jsonPointers,!0);T=l+"["+g+"]";h.dataPathArr[y]=g;O=e.validate(h);h.baseId=b,e.util.varOccurences(O,v)<2?n+=" "+e.util.varReplace(O,v,T)+" ":n+=" var "+v+" = "+T+"; "+O+" ",u&&(n+=" if (!"+m+") break; "),n+=" }"}return u&&(n+=" "+f+" if ("+d+" == errors) {"),n=e.util.cleanUpCode(n)}},function(e,t,r){"use strict";e.exports=function generate_multipleOf(e,t,r){var n,i=" ",o=e.level,s=e.dataLevel,a=e.schema[t],c=e.schemaPath+e.util.getProperty(t),u=e.errSchemaPath+"/"+t,l=!e.opts.allErrors,p="data"+(s||""),d=e.opts.$data&&a&&a.$data;d?(i+=" var schema"+o+" = "+e.util.getData(a.$data,s,e.dataPathArr)+"; ",n="schema"+o):n=a,i+="var division"+o+";if (",d&&(i+=" "+n+" !== undefined && ( typeof "+n+" != 'number' || "),i+=" (division"+o+" = "+p+" / "+n+", ",e.opts.multipleOfPrecision?i+=" Math.abs(Math.round(division"+o+") - division"+o+") > 1e-"+e.opts.multipleOfPrecision+" ":i+=" division"+o+" !== parseInt(division"+o+") ",i+=" ) ",d&&(i+="  )  "),i+=" ) {   ";var h=h||[];h.push(i),i="",!1!==e.createErrors?(i+=" { keyword: 'multipleOf' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(u)+" , params: { multipleOf: "+n+" } ",!1!==e.opts.messages&&(i+=" , message: 'should be multiple of ",i+=d?"' + "+n:n+"'"),e.opts.verbose&&(i+=" , schema:  ",i+=d?"validate.schema"+c:""+a,i+="         , parentSchema: validate.schema"+e.schemaPath+" , data: "+p+" "),i+=" } "):i+=" {} ";var f=i;return i=h.pop(),!e.compositeRule&&l?e.async?i+=" throw new ValidationError(["+f+"]); ":i+=" validate.errors = ["+f+"]; return false; ":i+=" var err = "+f+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",i+="} ",l&&(i+=" else { "),i}},function(e,t,r){"use strict";e.exports=function generate_not(e,t,r){var n=" ",i=e.level,o=e.dataLevel,s=e.schema[t],a=e.schemaPath+e.util.getProperty(t),c=e.errSchemaPath+"/"+t,u=!e.opts.allErrors,l="data"+(o||""),p="errs__"+i,d=e.util.copy(e);d.level++;var h="valid"+d.level;if(e.util.schemaHasRules(s,e.RULES.all)){d.schema=s,d.schemaPath=a,d.errSchemaPath=c,n+=" var "+p+" = errors;  ";var f,m=e.compositeRule;e.compositeRule=d.compositeRule=!0,d.createErrors=!1,d.opts.allErrors&&(f=d.opts.allErrors,d.opts.allErrors=!1),n+=" "+e.validate(d)+" ",d.createErrors=!0,f&&(d.opts.allErrors=f),e.compositeRule=d.compositeRule=m,n+=" if ("+h+") {   ";var g=g||[];g.push(n),n="",!1!==e.createErrors?(n+=" { keyword: 'not' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(c)+" , params: {} ",!1!==e.opts.messages&&(n+=" , message: 'should NOT be valid' "),e.opts.verbose&&(n+=" , schema: validate.schema"+a+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+l+" "),n+=" } "):n+=" {} ";var y=n;n=g.pop(),!e.compositeRule&&u?e.async?n+=" throw new ValidationError(["+y+"]); ":n+=" validate.errors = ["+y+"]; return false; ":n+=" var err = "+y+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",n+=" } else {  errors = "+p+"; if (vErrors !== null) { if ("+p+") vErrors.length = "+p+"; else vErrors = null; } ",e.opts.allErrors&&(n+=" } ")}else n+="  var err =   ",!1!==e.createErrors?(n+=" { keyword: 'not' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(c)+" , params: {} ",!1!==e.opts.messages&&(n+=" , message: 'should NOT be valid' "),e.opts.verbose&&(n+=" , schema: validate.schema"+a+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+l+" "),n+=" } "):n+=" {} ",n+=";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",u&&(n+=" if (false) { ");return n}},function(e,t,r){"use strict";e.exports=function generate_oneOf(e,t,r){var n=" ",i=e.level,o=e.dataLevel,s=e.schema[t],a=e.schemaPath+e.util.getProperty(t),c=e.errSchemaPath+"/"+t,u=!e.opts.allErrors,l="data"+(o||""),p="valid"+i,d="errs__"+i,h=e.util.copy(e),f="";h.level++;var m="valid"+h.level,g=h.baseId,y="prevValid"+i,v="passingSchemas"+i;n+="var "+d+" = errors , "+y+" = false , "+p+" = false , "+v+" = null; ";var b=e.compositeRule;e.compositeRule=h.compositeRule=!0;var _=s;if(_)for(var w,E=-1,S=_.length-1;E<S;)w=_[E+=1],e.util.schemaHasRules(w,e.RULES.all)?(h.schema=w,h.schemaPath=a+"["+E+"]",h.errSchemaPath=c+"/"+E,n+="  "+e.validate(h)+" ",h.baseId=g):n+=" var "+m+" = true; ",E&&(n+=" if ("+m+" && "+y+") { "+p+" = false; "+v+" = ["+v+", "+E+"]; } else { ",f+="}"),n+=" if ("+m+") { "+p+" = "+y+" = true; "+v+" = "+E+"; }";return e.compositeRule=h.compositeRule=b,n+=f+"if (!"+p+") {   var err =   ",!1!==e.createErrors?(n+=" { keyword: 'oneOf' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(c)+" , params: { passingSchemas: "+v+" } ",!1!==e.opts.messages&&(n+=" , message: 'should match exactly one schema in oneOf' "),e.opts.verbose&&(n+=" , schema: validate.schema"+a+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+l+" "),n+=" } "):n+=" {} ",n+=";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",!e.compositeRule&&u&&(e.async?n+=" throw new ValidationError(vErrors); ":n+=" validate.errors = vErrors; return false; "),n+="} else {  errors = "+d+"; if (vErrors !== null) { if ("+d+") vErrors.length = "+d+"; else vErrors = null; }",e.opts.allErrors&&(n+=" } "),n}},function(e,t,r){"use strict";e.exports=function generate_pattern(e,t,r){var n,i=" ",o=e.level,s=e.dataLevel,a=e.schema[t],c=e.schemaPath+e.util.getProperty(t),u=e.errSchemaPath+"/"+t,l=!e.opts.allErrors,p="data"+(s||""),d=e.opts.$data&&a&&a.$data;d?(i+=" var schema"+o+" = "+e.util.getData(a.$data,s,e.dataPathArr)+"; ",n="schema"+o):n=a,i+="if ( ",d&&(i+=" ("+n+" !== undefined && typeof "+n+" != 'string') || "),i+=" !"+(d?"(new RegExp("+n+"))":e.usePattern(a))+".test("+p+") ) {   ";var h=h||[];h.push(i),i="",!1!==e.createErrors?(i+=" { keyword: 'pattern' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(u)+" , params: { pattern:  ",i+=d?""+n:""+e.util.toQuotedString(a),i+="  } ",!1!==e.opts.messages&&(i+=" , message: 'should match pattern \"",i+=d?"' + "+n+" + '":""+e.util.escapeQuotes(a),i+="\"' "),e.opts.verbose&&(i+=" , schema:  ",i+=d?"validate.schema"+c:""+e.util.toQuotedString(a),i+="         , parentSchema: validate.schema"+e.schemaPath+" , data: "+p+" "),i+=" } "):i+=" {} ";var f=i;return i=h.pop(),!e.compositeRule&&l?e.async?i+=" throw new ValidationError(["+f+"]); ":i+=" validate.errors = ["+f+"]; return false; ":i+=" var err = "+f+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",i+="} ",l&&(i+=" else { "),i}},function(e,t,r){"use strict";e.exports=function generate_properties(e,t,r){var n=" ",i=e.level,o=e.dataLevel,s=e.schema[t],a=e.schemaPath+e.util.getProperty(t),c=e.errSchemaPath+"/"+t,u=!e.opts.allErrors,l="data"+(o||""),p="errs__"+i,d=e.util.copy(e),h="";d.level++;var f="valid"+d.level,m="key"+i,g="idx"+i,y=d.dataLevel=e.dataLevel+1,v="data"+y,b="dataProperties"+i,_=Object.keys(s||{}),w=e.schema.patternProperties||{},E=Object.keys(w),S=e.schema.additionalProperties,C=_.length||E.length,x=!1===S,k="object"==typeof S&&Object.keys(S).length,R=e.opts.removeAdditional,T=x||k||R,O=e.opts.ownProperties,I=e.baseId,N=e.schema.required;if(N&&(!e.opts.$data||!N.$data)&&N.length<e.opts.loopRequired)var A=e.util.toHash(N);if(n+="var "+p+" = errors;var "+f+" = true;",O&&(n+=" var "+b+" = undefined;"),T){if(n+=O?" "+b+" = "+b+" || Object.keys("+l+"); for (var "+g+"=0; "+g+"<"+b+".length; "+g+"++) { var "+m+" = "+b+"["+g+"]; ":" for (var "+m+" in "+l+") { ",C){if(n+=" var isAdditional"+i+" = !(false ",_.length)if(_.length>8)n+=" || validate.schema"+a+".hasOwnProperty("+m+") ";else{var P=_;if(P)for(var L=-1,D=P.length-1;L<D;)J=P[L+=1],n+=" || "+m+" == "+e.util.toQuotedString(J)+" "}if(E.length){var M=E;if(M)for(var j=-1,q=M.length-1;j<q;)ie=M[j+=1],n+=" || "+e.usePattern(ie)+".test("+m+") "}n+=" ); if (isAdditional"+i+") { "}if("all"==R)n+=" delete "+l+"["+m+"]; ";else{var F=e.errorPath,z="' + "+m+" + '";if(e.opts._errorDataPathProperty&&(e.errorPath=e.util.getPathExpr(e.errorPath,m,e.opts.jsonPointers)),x)if(R)n+=" delete "+l+"["+m+"]; ";else{n+=" "+f+" = false; ";var U=c;c=e.errSchemaPath+"/additionalProperties",(te=te||[]).push(n),n="",!1!==e.createErrors?(n+=" { keyword: 'additionalProperties' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(c)+" , params: { additionalProperty: '"+z+"' } ",!1!==e.opts.messages&&(n+=" , message: '",e.opts._errorDataPathProperty?n+="is an invalid additional property":n+="should NOT have additional properties",n+="' "),e.opts.verbose&&(n+=" , schema: false , parentSchema: validate.schema"+e.schemaPath+" , data: "+l+" "),n+=" } "):n+=" {} ";var B=n;n=te.pop(),!e.compositeRule&&u?e.async?n+=" throw new ValidationError(["+B+"]); ":n+=" validate.errors = ["+B+"]; return false; ":n+=" var err = "+B+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",c=U,u&&(n+=" break; ")}else if(k)if("failing"==R){n+=" var "+p+" = errors;  ";var H=e.compositeRule;e.compositeRule=d.compositeRule=!0,d.schema=S,d.schemaPath=e.schemaPath+".additionalProperties",d.errSchemaPath=e.errSchemaPath+"/additionalProperties",d.errorPath=e.opts._errorDataPathProperty?e.errorPath:e.util.getPathExpr(e.errorPath,m,e.opts.jsonPointers);var $=l+"["+m+"]";d.dataPathArr[y]=m;var V=e.validate(d);d.baseId=I,e.util.varOccurences(V,v)<2?n+=" "+e.util.varReplace(V,v,$)+" ":n+=" var "+v+" = "+$+"; "+V+" ",n+=" if (!"+f+") { errors = "+p+"; if (validate.errors !== null) { if (errors) validate.errors.length = errors; else validate.errors = null; } delete "+l+"["+m+"]; }  ",e.compositeRule=d.compositeRule=H}else{d.schema=S,d.schemaPath=e.schemaPath+".additionalProperties",d.errSchemaPath=e.errSchemaPath+"/additionalProperties",d.errorPath=e.opts._errorDataPathProperty?e.errorPath:e.util.getPathExpr(e.errorPath,m,e.opts.jsonPointers);$=l+"["+m+"]";d.dataPathArr[y]=m;V=e.validate(d);d.baseId=I,e.util.varOccurences(V,v)<2?n+=" "+e.util.varReplace(V,v,$)+" ":n+=" var "+v+" = "+$+"; "+V+" ",u&&(n+=" if (!"+f+") break; ")}e.errorPath=F}C&&(n+=" } "),n+=" }  ",u&&(n+=" if ("+f+") { ",h+="}")}var G=e.opts.useDefaults&&!e.compositeRule;if(_.length){var W=_;if(W)for(var J,X=-1,Y=W.length-1;X<Y;){var K=s[J=W[X+=1]];if(e.util.schemaHasRules(K,e.RULES.all)){var Q=e.util.getProperty(J),Z=($=l+Q,G&&void 0!==K.default);d.schema=K,d.schemaPath=a+Q,d.errSchemaPath=c+"/"+e.util.escapeFragment(J),d.errorPath=e.util.getPath(e.errorPath,J,e.opts.jsonPointers),d.dataPathArr[y]=e.util.toQuotedString(J);V=e.validate(d);if(d.baseId=I,e.util.varOccurences(V,v)<2){V=e.util.varReplace(V,v,$);var ee=$}else{ee=v;n+=" var "+v+" = "+$+"; "}if(Z)n+=" "+V+" ";else{if(A&&A[J]){n+=" if ( "+ee+" === undefined ",O&&(n+=" || ! Object.prototype.hasOwnProperty.call("+l+", '"+e.util.escapeQuotes(J)+"') "),n+=") { "+f+" = false; ";F=e.errorPath,U=c;var te,re=e.util.escapeQuotes(J);e.opts._errorDataPathProperty&&(e.errorPath=e.util.getPath(F,J,e.opts.jsonPointers)),c=e.errSchemaPath+"/required",(te=te||[]).push(n),n="",!1!==e.createErrors?(n+=" { keyword: 'required' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(c)+" , params: { missingProperty: '"+re+"' } ",!1!==e.opts.messages&&(n+=" , message: '",e.opts._errorDataPathProperty?n+="is a required property":n+="should have required property \\'"+re+"\\'",n+="' "),e.opts.verbose&&(n+=" , schema: validate.schema"+a+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+l+" "),n+=" } "):n+=" {} ";B=n;n=te.pop(),!e.compositeRule&&u?e.async?n+=" throw new ValidationError(["+B+"]); ":n+=" validate.errors = ["+B+"]; return false; ":n+=" var err = "+B+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",c=U,e.errorPath=F,n+=" } else { "}else u?(n+=" if ( "+ee+" === undefined ",O&&(n+=" || ! Object.prototype.hasOwnProperty.call("+l+", '"+e.util.escapeQuotes(J)+"') "),n+=") { "+f+" = true; } else { "):(n+=" if ("+ee+" !== undefined ",O&&(n+=" &&   Object.prototype.hasOwnProperty.call("+l+", '"+e.util.escapeQuotes(J)+"') "),n+=" ) { ");n+=" "+V+" } "}}u&&(n+=" if ("+f+") { ",h+="}")}}if(E.length){var ne=E;if(ne)for(var ie,oe=-1,se=ne.length-1;oe<se;){K=w[ie=ne[oe+=1]];if(e.util.schemaHasRules(K,e.RULES.all)){d.schema=K,d.schemaPath=e.schemaPath+".patternProperties"+e.util.getProperty(ie),d.errSchemaPath=e.errSchemaPath+"/patternProperties/"+e.util.escapeFragment(ie),n+=O?" "+b+" = "+b+" || Object.keys("+l+"); for (var "+g+"=0; "+g+"<"+b+".length; "+g+"++) { var "+m+" = "+b+"["+g+"]; ":" for (var "+m+" in "+l+") { ",n+=" if ("+e.usePattern(ie)+".test("+m+")) { ",d.errorPath=e.util.getPathExpr(e.errorPath,m,e.opts.jsonPointers);$=l+"["+m+"]";d.dataPathArr[y]=m;V=e.validate(d);d.baseId=I,e.util.varOccurences(V,v)<2?n+=" "+e.util.varReplace(V,v,$)+" ":n+=" var "+v+" = "+$+"; "+V+" ",u&&(n+=" if (!"+f+") break; "),n+=" } ",u&&(n+=" else "+f+" = true; "),n+=" }  ",u&&(n+=" if ("+f+") { ",h+="}")}}}return u&&(n+=" "+h+" if ("+p+" == errors) {"),n=e.util.cleanUpCode(n)}},function(e,t,r){"use strict";e.exports=function generate_propertyNames(e,t,r){var n=" ",i=e.level,o=e.dataLevel,s=e.schema[t],a=e.schemaPath+e.util.getProperty(t),c=e.errSchemaPath+"/"+t,u=!e.opts.allErrors,l="data"+(o||""),p="errs__"+i,d=e.util.copy(e);d.level++;var h="valid"+d.level;if(n+="var "+p+" = errors;",e.util.schemaHasRules(s,e.RULES.all)){d.schema=s,d.schemaPath=a,d.errSchemaPath=c;var f="key"+i,m="idx"+i,g="i"+i,y="' + "+f+" + '",v="data"+(d.dataLevel=e.dataLevel+1),b="dataProperties"+i,_=e.opts.ownProperties,w=e.baseId;_&&(n+=" var "+b+" = undefined; "),n+=_?" "+b+" = "+b+" || Object.keys("+l+"); for (var "+m+"=0; "+m+"<"+b+".length; "+m+"++) { var "+f+" = "+b+"["+m+"]; ":" for (var "+f+" in "+l+") { ",n+=" var startErrs"+i+" = errors; ";var E=f,S=e.compositeRule;e.compositeRule=d.compositeRule=!0;var C=e.validate(d);d.baseId=w,e.util.varOccurences(C,v)<2?n+=" "+e.util.varReplace(C,v,E)+" ":n+=" var "+v+" = "+E+"; "+C+" ",e.compositeRule=d.compositeRule=S,n+=" if (!"+h+") { for (var "+g+"=startErrs"+i+"; "+g+"<errors; "+g+"++) { vErrors["+g+"].propertyName = "+f+"; }   var err =   ",!1!==e.createErrors?(n+=" { keyword: 'propertyNames' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(c)+" , params: { propertyName: '"+y+"' } ",!1!==e.opts.messages&&(n+=" , message: 'property name \\'"+y+"\\' is invalid' "),e.opts.verbose&&(n+=" , schema: validate.schema"+a+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+l+" "),n+=" } "):n+=" {} ",n+=";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",!e.compositeRule&&u&&(e.async?n+=" throw new ValidationError(vErrors); ":n+=" validate.errors = vErrors; return false; "),u&&(n+=" break; "),n+=" } }"}return u&&(n+="  if ("+p+" == errors) {"),n=e.util.cleanUpCode(n)}},function(e,t,r){"use strict";e.exports=function generate_required(e,t,r){var n=" ",i=e.level,o=e.dataLevel,s=e.schema[t],a=e.schemaPath+e.util.getProperty(t),c=e.errSchemaPath+"/"+t,u=!e.opts.allErrors,l="data"+(o||""),p="valid"+i,d=e.opts.$data&&s&&s.$data;d&&(n+=" var schema"+i+" = "+e.util.getData(s.$data,o,e.dataPathArr)+"; ");var h="schema"+i;if(!d)if(s.length<e.opts.loopRequired&&e.schema.properties&&Object.keys(e.schema.properties).length){var f=[],m=s;if(m)for(var g,y=-1,v=m.length-1;y<v;){g=m[y+=1];var b=e.schema.properties[g];b&&e.util.schemaHasRules(b,e.RULES.all)||(f[f.length]=g)}}else f=s;if(d||f.length){var _=e.errorPath,w=d||f.length>=e.opts.loopRequired,E=e.opts.ownProperties;if(u)if(n+=" var missing"+i+"; ",w){d||(n+=" var "+h+" = validate.schema"+a+"; ");var S="' + "+(O="schema"+i+"["+(k="i"+i)+"]")+" + '";e.opts._errorDataPathProperty&&(e.errorPath=e.util.getPathExpr(_,O,e.opts.jsonPointers)),n+=" var "+p+" = true; ",d&&(n+=" if (schema"+i+" === undefined) "+p+" = true; else if (!Array.isArray(schema"+i+")) "+p+" = false; else {"),n+=" for (var "+k+" = 0; "+k+" < "+h+".length; "+k+"++) { "+p+" = "+l+"["+h+"["+k+"]] !== undefined ",E&&(n+=" &&   Object.prototype.hasOwnProperty.call("+l+", "+h+"["+k+"]) "),n+="; if (!"+p+") break; } ",d&&(n+="  }  "),n+="  if (!"+p+") {   ",(T=T||[]).push(n),n="",!1!==e.createErrors?(n+=" { keyword: 'required' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(c)+" , params: { missingProperty: '"+S+"' } ",!1!==e.opts.messages&&(n+=" , message: '",e.opts._errorDataPathProperty?n+="is a required property":n+="should have required property \\'"+S+"\\'",n+="' "),e.opts.verbose&&(n+=" , schema: validate.schema"+a+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+l+" "),n+=" } "):n+=" {} ";var C=n;n=T.pop(),!e.compositeRule&&u?e.async?n+=" throw new ValidationError(["+C+"]); ":n+=" validate.errors = ["+C+"]; return false; ":n+=" var err = "+C+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",n+=" } else { "}else{n+=" if ( ";var x=f;if(x)for(var k=-1,R=x.length-1;k<R;){N=x[k+=1],k&&(n+=" || "),n+=" ( ( "+(D=l+(L=e.util.getProperty(N)))+" === undefined ",E&&(n+=" || ! Object.prototype.hasOwnProperty.call("+l+", '"+e.util.escapeQuotes(N)+"') "),n+=") && (missing"+i+" = "+e.util.toQuotedString(e.opts.jsonPointers?N:L)+") ) "}n+=") {  ";var T;S="' + "+(O="missing"+i)+" + '";e.opts._errorDataPathProperty&&(e.errorPath=e.opts.jsonPointers?e.util.getPathExpr(_,O,!0):_+" + "+O),(T=T||[]).push(n),n="",!1!==e.createErrors?(n+=" { keyword: 'required' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(c)+" , params: { missingProperty: '"+S+"' } ",!1!==e.opts.messages&&(n+=" , message: '",e.opts._errorDataPathProperty?n+="is a required property":n+="should have required property \\'"+S+"\\'",n+="' "),e.opts.verbose&&(n+=" , schema: validate.schema"+a+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+l+" "),n+=" } "):n+=" {} ";C=n;n=T.pop(),!e.compositeRule&&u?e.async?n+=" throw new ValidationError(["+C+"]); ":n+=" validate.errors = ["+C+"]; return false; ":n+=" var err = "+C+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",n+=" } else { "}else if(w){d||(n+=" var "+h+" = validate.schema"+a+"; ");var O;S="' + "+(O="schema"+i+"["+(k="i"+i)+"]")+" + '";e.opts._errorDataPathProperty&&(e.errorPath=e.util.getPathExpr(_,O,e.opts.jsonPointers)),d&&(n+=" if ("+h+" && !Array.isArray("+h+")) {  var err =   ",!1!==e.createErrors?(n+=" { keyword: 'required' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(c)+" , params: { missingProperty: '"+S+"' } ",!1!==e.opts.messages&&(n+=" , message: '",e.opts._errorDataPathProperty?n+="is a required property":n+="should have required property \\'"+S+"\\'",n+="' "),e.opts.verbose&&(n+=" , schema: validate.schema"+a+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+l+" "),n+=" } "):n+=" {} ",n+=";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; } else if ("+h+" !== undefined) { "),n+=" for (var "+k+" = 0; "+k+" < "+h+".length; "+k+"++) { if ("+l+"["+h+"["+k+"]] === undefined ",E&&(n+=" || ! Object.prototype.hasOwnProperty.call("+l+", "+h+"["+k+"]) "),n+=") {  var err =   ",!1!==e.createErrors?(n+=" { keyword: 'required' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(c)+" , params: { missingProperty: '"+S+"' } ",!1!==e.opts.messages&&(n+=" , message: '",e.opts._errorDataPathProperty?n+="is a required property":n+="should have required property \\'"+S+"\\'",n+="' "),e.opts.verbose&&(n+=" , schema: validate.schema"+a+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+l+" "),n+=" } "):n+=" {} ",n+=";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; } } ",d&&(n+="  }  ")}else{var I=f;if(I)for(var N,A=-1,P=I.length-1;A<P;){N=I[A+=1];var L=e.util.getProperty(N),D=(S=e.util.escapeQuotes(N),l+L);e.opts._errorDataPathProperty&&(e.errorPath=e.util.getPath(_,N,e.opts.jsonPointers)),n+=" if ( "+D+" === undefined ",E&&(n+=" || ! Object.prototype.hasOwnProperty.call("+l+", '"+e.util.escapeQuotes(N)+"') "),n+=") {  var err =   ",!1!==e.createErrors?(n+=" { keyword: 'required' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(c)+" , params: { missingProperty: '"+S+"' } ",!1!==e.opts.messages&&(n+=" , message: '",e.opts._errorDataPathProperty?n+="is a required property":n+="should have required property \\'"+S+"\\'",n+="' "),e.opts.verbose&&(n+=" , schema: validate.schema"+a+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+l+" "),n+=" } "):n+=" {} ",n+=";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; } "}}e.errorPath=_}else u&&(n+=" if (true) {");return n}},function(e,t,r){"use strict";e.exports=function generate_uniqueItems(e,t,r){var n,i=" ",o=e.level,s=e.dataLevel,a=e.schema[t],c=e.schemaPath+e.util.getProperty(t),u=e.errSchemaPath+"/"+t,l=!e.opts.allErrors,p="data"+(s||""),d="valid"+o,h=e.opts.$data&&a&&a.$data;if(h?(i+=" var schema"+o+" = "+e.util.getData(a.$data,s,e.dataPathArr)+"; ",n="schema"+o):n=a,(a||h)&&!1!==e.opts.uniqueItems){h&&(i+=" var "+d+"; if ("+n+" === false || "+n+" === undefined) "+d+" = true; else if (typeof "+n+" != 'boolean') "+d+" = false; else { "),i+=" var i = "+p+".length , "+d+" = true , j; if (i > 1) { ";var f=e.schema.items&&e.schema.items.type,m=Array.isArray(f);if(!f||"object"==f||"array"==f||m&&(f.indexOf("object")>=0||f.indexOf("array")>=0))i+=" outer: for (;i--;) { for (j = i; j--;) { if (equal("+p+"[i], "+p+"[j])) { "+d+" = false; break outer; } } } ";else{i+=" var itemIndices = {}, item; for (;i--;) { var item = "+p+"[i]; ";var g="checkDataType"+(m?"s":"");i+=" if ("+e.util[g](f,"item",!0)+") continue; ",m&&(i+=" if (typeof item == 'string') item = '\"' + item; "),i+=" if (typeof itemIndices[item] == 'number') { "+d+" = false; j = itemIndices[item]; break; } itemIndices[item] = i; } "}i+=" } ",h&&(i+="  }  "),i+=" if (!"+d+") {   ";var y=y||[];y.push(i),i="",!1!==e.createErrors?(i+=" { keyword: 'uniqueItems' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(u)+" , params: { i: i, j: j } ",!1!==e.opts.messages&&(i+=" , message: 'should NOT have duplicate items (items ## ' + j + ' and ' + i + ' are identical)' "),e.opts.verbose&&(i+=" , schema:  ",i+=h?"validate.schema"+c:""+a,i+="         , parentSchema: validate.schema"+e.schemaPath+" , data: "+p+" "),i+=" } "):i+=" {} ";var v=i;i=y.pop(),!e.compositeRule&&l?e.async?i+=" throw new ValidationError(["+v+"]); ":i+=" validate.errors = ["+v+"]; return false; ":i+=" var err = "+v+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",i+=" } ",l&&(i+=" else { ")}else l&&(i+=" if (true) { ");return i}},function(e,t,r){"use strict";var n=["multipleOf","maximum","exclusiveMaximum","minimum","exclusiveMinimum","maxLength","minLength","pattern","additionalItems","maxItems","minItems","uniqueItems","maxProperties","minProperties","required","additionalProperties","enum","format","const"];e.exports=function(e,t){for(var r=0;r<t.length;r++){e=JSON.parse(JSON.stringify(e));var i,o=t[r].split("/"),s=e;for(i=1;i<o.length;i++)s=s[o[i]];for(i=0;i<n.length;i++){var a=n[i],c=s[a];c&&(s[a]={anyOf:[c,{$ref:"https://raw.githubusercontent.com/epoberezkin/ajv/master/lib/refs/data.json#"}]})}}return e}},function(e,t,r){"use strict";var n=r(199).MissingRef;e.exports=function compileAsync(e,t,r){var i=this;if("function"!=typeof this._opts.loadSchema)throw new Error("options.loadSchema should be a function");"function"==typeof t&&(r=t,t=void 0);var o=loadMetaSchemaOf(e).then(function(){var r=i._addSchema(e,void 0,t);return r.validate||function _compileAsync(e){try{return i._compile(e)}catch(r){if(r instanceof n)return function loadMissingSchema(r){var o=r.missingSchema;if(added(o))throw new Error("Schema "+o+" is loaded but "+r.missingRef+" cannot be resolved");var s=i._loadingSchemas[o];s||(s=i._loadingSchemas[o]=i._opts.loadSchema(o)).then(removePromise,removePromise);return s.then(function(e){if(!added(o))return loadMetaSchemaOf(e).then(function(){added(o)||i.addSchema(e,o,void 0,t)})}).then(function(){return function _compileAsync(e){try{return i._compile(e)}catch(e){if(e instanceof n)return loadMissingSchema(e);throw e}function loadMissingSchema(r){var n=r.missingSchema;if(added(n))throw new Error("Schema "+n+" is loaded but "+r.missingRef+" cannot be resolved");var o=i._loadingSchemas[n];return o||(o=i._loadingSchemas[n]=i._opts.loadSchema(n)).then(removePromise,removePromise),o.then(function(e){if(!added(n))return loadMetaSchemaOf(e).then(function(){added(n)||i.addSchema(e,n,void 0,t)})}).then(function(){return _compileAsync(e)});function removePromise(){delete i._loadingSchemas[n]}function added(e){return i._refs[e]||i._schemas[e]}}}(e)});function removePromise(){delete i._loadingSchemas[o]}function added(e){return i._refs[e]||i._schemas[e]}}(r);throw r}function loadMissingSchema(r){var n=r.missingSchema;if(added(n))throw new Error("Schema "+n+" is loaded but "+r.missingRef+" cannot be resolved");var o=i._loadingSchemas[n];return o||(o=i._loadingSchemas[n]=i._opts.loadSchema(n)).then(removePromise,removePromise),o.then(function(e){if(!added(n))return loadMetaSchemaOf(e).then(function(){added(n)||i.addSchema(e,n,void 0,t)})}).then(function(){return _compileAsync(e)});function removePromise(){delete i._loadingSchemas[n]}function added(e){return i._refs[e]||i._schemas[e]}}}(r)});r&&o.then(function(e){r(null,e)},r);return o;function loadMetaSchemaOf(e){var t=e.$schema;return t&&!i.getSchema(t)?compileAsync.call(i,{$ref:t},!0):Promise.resolve()}}},function(e,t,r){"use strict";var n=/^[a-z_$][a-z0-9_$-]*$/i,i=r(725),o=r(330);e.exports={add:function addKeyword(e,t){var r=this.RULES;if(r.keywords[e])throw new Error("Keyword "+e+" is already defined");if(!n.test(e))throw new Error("Keyword "+e+" is not a valid identifier");if(t){this.validateKeyword(t,!0);var o=t.type;if(Array.isArray(o))for(var s=0;s<o.length;s++)_addRule(e,o[s],t);else _addRule(e,o,t);var a=t.metaSchema;a&&(t.$data&&this._opts.$data&&(a={anyOf:[a,{$ref:"https://raw.githubusercontent.com/epoberezkin/ajv/master/lib/refs/data.json#"}]}),t.validateSchema=this.compile(a,!0))}function _addRule(e,t,n){for(var o,s=0;s<r.length;s++){var a=r[s];if(a.type==t){o=a;break}}o||(o={type:t,rules:[]},r.push(o));var c={keyword:e,definition:n,custom:!0,code:i,implements:n.implements};o.rules.push(c),r.custom[e]=c}return r.keywords[e]=r.all[e]=!0,this},get:function getKeyword(e){var t=this.RULES.custom[e];return t?t.definition:this.RULES.keywords[e]||!1},remove:function removeKeyword(e){var t=this.RULES;delete t.keywords[e],delete t.all[e],delete t.custom[e];for(var r=0;r<t.length;r++)for(var n=t[r].rules,i=0;i<n.length;i++)if(n[i].keyword==e){n.splice(i,1);break}return this},validate:function validateKeyword(e,t){validateKeyword.errors=null;var r=this._validateKeyword=this._validateKeyword||this.compile(s,!0);if(r(e))return!0;validateKeyword.errors=r.errors;if(t)throw new Error("custom keyword definition is invalid: "+this.errorsText(r.errors));return!1}};var s={definitions:{simpleTypes:o.definitions.simpleTypes},type:"object",dependencies:{schema:["validate"],$data:["validate"],statements:["inline"],valid:{not:{required:["macro"]}}},properties:{type:o.properties.type,schema:{type:"boolean"},statements:{type:"boolean"},dependencies:{type:"array",items:{type:"string"}},metaSchema:{type:"object"},modifying:{type:"boolean"},valid:{type:"boolean"},$data:{type:"boolean"},async:{type:"boolean"},errors:{anyOf:[{type:"boolean"},{const:"full"}]}}}},function(e,t,r){"use strict";e.exports=function generate_custom(e,t,r){var n,i,o=" ",s=e.level,a=e.dataLevel,c=e.schema[t],u=e.schemaPath+e.util.getProperty(t),l=e.errSchemaPath+"/"+t,p=!e.opts.allErrors,d="data"+(a||""),h="valid"+s,f="errs__"+s,m=e.opts.$data&&c&&c.$data;m?(o+=" var schema"+s+" = "+e.util.getData(c.$data,a,e.dataPathArr)+"; ",i="schema"+s):i=c;var g,y,v,b,_,w="definition"+s,E=this.definition,S="";if(m&&E.$data){_="keywordValidate"+s;var C=E.validateSchema;o+=" var "+w+" = RULES.custom['"+t+"'].definition; var "+_+" = "+w+".validate;"}else{if(!(b=e.useCustomRule(this,c,e.schema,e)))return;i="validate.schema"+u,_=b.code,g=E.compile,y=E.inline,v=E.macro}var x=_+".errors",k="i"+s,R="ruleErr"+s,T=E.async;if(T&&!e.async)throw new Error("async keyword in sync schema");if(y||v||(o+=x+" = null;"),o+="var "+f+" = errors;var "+h+";",m&&E.$data&&(S+="}",o+=" if ("+i+" === undefined) { "+h+" = true; } else { ",C&&(S+="}",o+=" "+h+" = "+w+".validateSchema("+i+"); if ("+h+") { ")),y)E.statements?o+=" "+b.validate+" ":o+=" "+h+" = "+b.validate+"; ";else if(v){var O=e.util.copy(e);S="";O.level++;var I="valid"+O.level;O.schema=b.validate,O.schemaPath="";var N=e.compositeRule;e.compositeRule=O.compositeRule=!0;var A=e.validate(O).replace(/validate\.schema/g,_);e.compositeRule=O.compositeRule=N,o+=" "+A}else{(M=M||[]).push(o),o="",o+="  "+_+".call( ",e.opts.passContext?o+="this":o+="self",g||!1===E.schema?o+=" , "+d+" ":o+=" , "+i+" , "+d+" , validate.schema"+e.schemaPath+" ",o+=" , (dataPath || '')",'""'!=e.errorPath&&(o+=" + "+e.errorPath);var P=a?"data"+(a-1||""):"parentData",L=a?e.dataPathArr[a]:"parentDataProperty",D=o+=" , "+P+" , "+L+" , rootData )  ";o=M.pop(),!1===E.errors?(o+=" "+h+" = ",T&&(o+="await "),o+=D+"; "):o+=T?" var "+(x="customErrors"+s)+" = null; try { "+h+" = await "+D+"; } catch (e) { "+h+" = false; if (e instanceof ValidationError) "+x+" = e.errors; else throw e; } ":" "+x+" = null; "+h+" = "+D+"; "}if(E.modifying&&(o+=" if ("+P+") "+d+" = "+P+"["+L+"];"),o+=""+S,E.valid)p&&(o+=" if (true) { ");else{var M;o+=" if ( ",void 0===E.valid?(o+=" !",o+=v?""+I:""+h):o+=" "+!E.valid+" ",o+=") { ",n=this.keyword,(M=M||[]).push(o),o="",(M=M||[]).push(o),o="",!1!==e.createErrors?(o+=" { keyword: '"+(n||"custom")+"' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(l)+" , params: { keyword: '"+this.keyword+"' } ",!1!==e.opts.messages&&(o+=" , message: 'should pass \""+this.keyword+"\" keyword validation' "),e.opts.verbose&&(o+=" , schema: validate.schema"+u+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+d+" "),o+=" } "):o+=" {} ";var j=o;o=M.pop(),!e.compositeRule&&p?e.async?o+=" throw new ValidationError(["+j+"]); ":o+=" validate.errors = ["+j+"]; return false; ":o+=" var err = "+j+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ";var q=o;o=M.pop(),y?E.errors?"full"!=E.errors&&(o+="  for (var "+k+"="+f+"; "+k+"<errors; "+k+"++) { var "+R+" = vErrors["+k+"]; if ("+R+".dataPath === undefined) "+R+".dataPath = (dataPath || '') + "+e.errorPath+"; if ("+R+".schemaPath === undefined) { "+R+'.schemaPath = "'+l+'"; } ',e.opts.verbose&&(o+=" "+R+".schema = "+i+"; "+R+".data = "+d+"; "),o+=" } "):!1===E.errors?o+=" "+q+" ":(o+=" if ("+f+" == errors) { "+q+" } else {  for (var "+k+"="+f+"; "+k+"<errors; "+k+"++) { var "+R+" = vErrors["+k+"]; if ("+R+".dataPath === undefined) "+R+".dataPath = (dataPath || '') + "+e.errorPath+"; if ("+R+".schemaPath === undefined) { "+R+'.schemaPath = "'+l+'"; } ',e.opts.verbose&&(o+=" "+R+".schema = "+i+"; "+R+".data = "+d+"; "),o+=" } } "):v?(o+="   var err =   ",!1!==e.createErrors?(o+=" { keyword: '"+(n||"custom")+"' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(l)+" , params: { keyword: '"+this.keyword+"' } ",!1!==e.opts.messages&&(o+=" , message: 'should pass \""+this.keyword+"\" keyword validation' "),e.opts.verbose&&(o+=" , schema: validate.schema"+u+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+d+" "),o+=" } "):o+=" {} ",o+=";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",!e.compositeRule&&p&&(e.async?o+=" throw new ValidationError(vErrors); ":o+=" validate.errors = vErrors; return false; ")):!1===E.errors?o+=" "+q+" ":(o+=" if (Array.isArray("+x+")) { if (vErrors === null) vErrors = "+x+"; else vErrors = vErrors.concat("+x+"); errors = vErrors.length;  for (var "+k+"="+f+"; "+k+"<errors; "+k+"++) { var "+R+" = vErrors["+k+"]; if ("+R+".dataPath === undefined) "+R+".dataPath = (dataPath || '') + "+e.errorPath+";  "+R+'.schemaPath = "'+l+'";  ',e.opts.verbose&&(o+=" "+R+".schema = "+i+"; "+R+".data = "+d+"; "),o+=" } } else { "+q+" } "),o+=" } ",p&&(o+=" else { ")}return o}},function(e){e.exports={$schema:"http://json-schema.org/draft-07/schema#",$id:"https://raw.githubusercontent.com/epoberezkin/ajv/master/lib/refs/data.json#",description:"Meta-schema for $data reference (JSON Schema extension proposal)",type:"object",required:["$data"],properties:{$data:{type:"string",anyOf:[{format:"relative-json-pointer"},{format:"json-pointer"}]}},additionalProperties:!1}},function(e,t){function HARError(e){this.name="HARError",this.message="validation failed",this.errors=e,"function"==typeof Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error("validation failed").stack}HARError.prototype=Error.prototype,e.exports=HARError},function(e,t,r){"use strict";e.exports={afterRequest:r(729),beforeRequest:r(730),browser:r(731),cache:r(732),content:r(733),cookie:r(734),creator:r(735),entry:r(736),har:r(737),header:r(738),log:r(739),page:r(740),pageTimings:r(741),postData:r(742),query:r(743),request:r(744),response:r(745),timings:r(746)}},function(e){e.exports={$id:"afterRequest.json#",$schema:"http://json-schema.org/draft-06/schema#",type:"object",optional:!0,required:["lastAccess","eTag","hitCount"],properties:{expires:{type:"string",pattern:"^(\\d{4})(-)?(\\d\\d)(-)?(\\d\\d)(T)?(\\d\\d)(:)?(\\d\\d)(:)?(\\d\\d)(\\.\\d+)?(Z|([+-])(\\d\\d)(:)?(\\d\\d))?"},lastAccess:{type:"string",pattern:"^(\\d{4})(-)?(\\d\\d)(-)?(\\d\\d)(T)?(\\d\\d)(:)?(\\d\\d)(:)?(\\d\\d)(\\.\\d+)?(Z|([+-])(\\d\\d)(:)?(\\d\\d))?"},eTag:{type:"string"},hitCount:{type:"integer"},comment:{type:"string"}}}},function(e){e.exports={$id:"beforeRequest.json#",$schema:"http://json-schema.org/draft-06/schema#",type:"object",optional:!0,required:["lastAccess","eTag","hitCount"],properties:{expires:{type:"string",pattern:"^(\\d{4})(-)?(\\d\\d)(-)?(\\d\\d)(T)?(\\d\\d)(:)?(\\d\\d)(:)?(\\d\\d)(\\.\\d+)?(Z|([+-])(\\d\\d)(:)?(\\d\\d))?"},lastAccess:{type:"string",pattern:"^(\\d{4})(-)?(\\d\\d)(-)?(\\d\\d)(T)?(\\d\\d)(:)?(\\d\\d)(:)?(\\d\\d)(\\.\\d+)?(Z|([+-])(\\d\\d)(:)?(\\d\\d))?"},eTag:{type:"string"},hitCount:{type:"integer"},comment:{type:"string"}}}},function(e){e.exports={$id:"browser.json#",$schema:"http://json-schema.org/draft-06/schema#",type:"object",required:["name","version"],properties:{name:{type:"string"},version:{type:"string"},comment:{type:"string"}}}},function(e){e.exports={$id:"cache.json#",$schema:"http://json-schema.org/draft-06/schema#",properties:{beforeRequest:{oneOf:[{type:"null"},{$ref:"beforeRequest.json#"}]},afterRequest:{oneOf:[{type:"null"},{$ref:"afterRequest.json#"}]},comment:{type:"string"}}}},function(e){e.exports={$id:"content.json#",$schema:"http://json-schema.org/draft-06/schema#",type:"object",required:["size","mimeType"],properties:{size:{type:"integer"},compression:{type:"integer"},mimeType:{type:"string"},text:{type:"string"},encoding:{type:"string"},comment:{type:"string"}}}},function(e){e.exports={$id:"cookie.json#",$schema:"http://json-schema.org/draft-06/schema#",type:"object",required:["name","value"],properties:{name:{type:"string"},value:{type:"string"},path:{type:"string"},domain:{type:"string"},expires:{type:["string","null"],format:"date-time"},httpOnly:{type:"boolean"},secure:{type:"boolean"},comment:{type:"string"}}}},function(e){e.exports={$id:"creator.json#",$schema:"http://json-schema.org/draft-06/schema#",type:"object",required:["name","version"],properties:{name:{type:"string"},version:{type:"string"},comment:{type:"string"}}}},function(e){e.exports={$id:"entry.json#",$schema:"http://json-schema.org/draft-06/schema#",type:"object",optional:!0,required:["startedDateTime","time","request","response","cache","timings"],properties:{pageref:{type:"string"},startedDateTime:{type:"string",format:"date-time",pattern:"^(\\d{4})(-)?(\\d\\d)(-)?(\\d\\d)(T)?(\\d\\d)(:)?(\\d\\d)(:)?(\\d\\d)(\\.\\d+)?(Z|([+-])(\\d\\d)(:)?(\\d\\d))"},time:{type:"number",min:0},request:{$ref:"request.json#"},response:{$ref:"response.json#"},cache:{$ref:"cache.json#"},timings:{$ref:"timings.json#"},serverIPAddress:{type:"string",oneOf:[{format:"ipv4"},{format:"ipv6"}]},connection:{type:"string"},comment:{type:"string"}}}},function(e){e.exports={$id:"har.json#",$schema:"http://json-schema.org/draft-06/schema#",type:"object",required:["log"],properties:{log:{$ref:"log.json#"}}}},function(e){e.exports={$id:"header.json#",$schema:"http://json-schema.org/draft-06/schema#",type:"object",required:["name","value"],properties:{name:{type:"string"},value:{type:"string"},comment:{type:"string"}}}},function(e){e.exports={$id:"log.json#",$schema:"http://json-schema.org/draft-06/schema#",type:"object",required:["version","creator","entries"],properties:{version:{type:"string"},creator:{$ref:"creator.json#"},browser:{$ref:"browser.json#"},pages:{type:"array",items:{$ref:"page.json#"}},entries:{type:"array",items:{$ref:"entry.json#"}},comment:{type:"string"}}}},function(e){e.exports={$id:"page.json#",$schema:"http://json-schema.org/draft-06/schema#",type:"object",optional:!0,required:["startedDateTime","id","title","pageTimings"],properties:{startedDateTime:{type:"string",format:"date-time",pattern:"^(\\d{4})(-)?(\\d\\d)(-)?(\\d\\d)(T)?(\\d\\d)(:)?(\\d\\d)(:)?(\\d\\d)(\\.\\d+)?(Z|([+-])(\\d\\d)(:)?(\\d\\d))"},id:{type:"string",unique:!0},title:{type:"string"},pageTimings:{$ref:"pageTimings.json#"},comment:{type:"string"}}}},function(e){e.exports={$id:"pageTimings.json#",$schema:"http://json-schema.org/draft-06/schema#",type:"object",properties:{onContentLoad:{type:"number",min:-1},onLoad:{type:"number",min:-1},comment:{type:"string"}}}},function(e){e.exports={$id:"postData.json#",$schema:"http://json-schema.org/draft-06/schema#",type:"object",optional:!0,required:["mimeType"],properties:{mimeType:{type:"string"},text:{type:"string"},params:{type:"array",required:["name"],properties:{name:{type:"string"},value:{type:"string"},fileName:{type:"string"},contentType:{type:"string"},comment:{type:"string"}}},comment:{type:"string"}}}},function(e){e.exports={$id:"query.json#",$schema:"http://json-schema.org/draft-06/schema#",type:"object",required:["name","value"],properties:{name:{type:"string"},value:{type:"string"},comment:{type:"string"}}}},function(e){e.exports={$id:"request.json#",$schema:"http://json-schema.org/draft-06/schema#",type:"object",required:["method","url","httpVersion","cookies","headers","queryString","headersSize","bodySize"],properties:{method:{type:"string"},url:{type:"string",format:"uri"},httpVersion:{type:"string"},cookies:{type:"array",items:{$ref:"cookie.json#"}},headers:{type:"array",items:{$ref:"header.json#"}},queryString:{type:"array",items:{$ref:"query.json#"}},postData:{$ref:"postData.json#"},headersSize:{type:"integer"},bodySize:{type:"integer"},comment:{type:"string"}}}},function(e){e.exports={$id:"response.json#",$schema:"http://json-schema.org/draft-06/schema#",type:"object",required:["status","statusText","httpVersion","cookies","headers","content","redirectURL","headersSize","bodySize"],properties:{status:{type:"integer"},statusText:{type:"string"},httpVersion:{type:"string"},cookies:{type:"array",items:{$ref:"cookie.json#"}},headers:{type:"array",items:{$ref:"header.json#"}},content:{$ref:"content.json#"},redirectURL:{type:"string"},headersSize:{type:"integer"},bodySize:{type:"integer"},comment:{type:"string"}}}},function(e){e.exports={$id:"timings.json#",$schema:"http://json-schema.org/draft-06/schema#",required:["send","wait","receive"],properties:{dns:{type:"number",min:-1},connect:{type:"number",min:-1},blocked:{type:"number",min:-1},send:{type:"number",min:-1},wait:{type:"number",min:-1},receive:{type:"number",min:-1},ssl:{type:"number",min:-1},comment:{type:"string"}}}},function(e){e.exports={$schema:"http://json-schema.org/draft-06/schema#",$id:"http://json-schema.org/draft-06/schema#",title:"Core schema meta-schema",definitions:{schemaArray:{type:"array",minItems:1,items:{$ref:"#"}},nonNegativeInteger:{type:"integer",minimum:0},nonNegativeIntegerDefault0:{allOf:[{$ref:"#/definitions/nonNegativeInteger"},{default:0}]},simpleTypes:{enum:["array","boolean","integer","null","number","object","string"]},stringArray:{type:"array",items:{type:"string"},uniqueItems:!0,default:[]}},type:["object","boolean"],properties:{$id:{type:"string",format:"uri-reference"},$schema:{type:"string",format:"uri"},$ref:{type:"string",format:"uri-reference"},title:{type:"string"},description:{type:"string"},default:{},examples:{type:"array",items:{}},multipleOf:{type:"number",exclusiveMinimum:0},maximum:{type:"number"},exclusiveMaximum:{type:"number"},minimum:{type:"number"},exclusiveMinimum:{type:"number"},maxLength:{$ref:"#/definitions/nonNegativeInteger"},minLength:{$ref:"#/definitions/nonNegativeIntegerDefault0"},pattern:{type:"string",format:"regex"},additionalItems:{$ref:"#"},items:{anyOf:[{$ref:"#"},{$ref:"#/definitions/schemaArray"}],default:{}},maxItems:{$ref:"#/definitions/nonNegativeInteger"},minItems:{$ref:"#/definitions/nonNegativeIntegerDefault0"},uniqueItems:{type:"boolean",default:!1},contains:{$ref:"#"},maxProperties:{$ref:"#/definitions/nonNegativeInteger"},minProperties:{$ref:"#/definitions/nonNegativeIntegerDefault0"},required:{$ref:"#/definitions/stringArray"},additionalProperties:{$ref:"#"},definitions:{type:"object",additionalProperties:{$ref:"#"},default:{}},properties:{type:"object",additionalProperties:{$ref:"#"},default:{}},patternProperties:{type:"object",additionalProperties:{$ref:"#"},default:{}},dependencies:{type:"object",additionalProperties:{anyOf:[{$ref:"#"},{$ref:"#/definitions/stringArray"}]}},propertyNames:{$ref:"#"},const:{},enum:{type:"array",minItems:1,uniqueItems:!0},type:{anyOf:[{$ref:"#/definitions/simpleTypes"},{type:"array",items:{$ref:"#/definitions/simpleTypes"},minItems:1,uniqueItems:!0}]},format:{type:"string"},allOf:{$ref:"#/definitions/schemaArray"},anyOf:{$ref:"#/definitions/schemaArray"},oneOf:{$ref:"#/definitions/schemaArray"},not:{$ref:"#"}},default:{}}},function(e,t,r){"use strict";var n=r(196),i=r(31),o=r(189),s=o.md5,a=o.toBase64;function Auth(e){this.request=e,this.hasAuth=!1,this.sentAuth=!1,this.bearerToken=null,this.user=null,this.pass=null}Auth.prototype.basic=function(e,t,r){if(("string"!=typeof e||void 0!==t&&"string"!=typeof t)&&this.request.emit("error",new Error("auth() received invalid user or password")),this.user=e,this.pass=t,this.hasAuth=!0,r||void 0===r){var n="Basic "+a(e+":"+(t||""));return this.sentAuth=!0,n}},Auth.prototype.bearer=function(e,t){if(this.bearerToken=e,this.hasAuth=!0,t||void 0===t){"function"==typeof e&&(e=e());var r="Bearer "+(e||"");return this.sentAuth=!0,r}},Auth.prototype.digest=function(e,t,r){for(var n={},o=/([a-z0-9_-]+)=(?:"([^"]+)"|([a-z0-9_-]+))/gi;;){var a=o.exec(r);if(!a)break;n[a[1]]=a[2]||a[3]}var c=/(^|,)\s*auth\s*($|,)/.test(n.qop)&&"auth",u=c&&"00000001",l=c&&i().replace(/-/g,""),p=function(e,t,r,n,i,o){var a=s(t+":"+r+":"+n);return e&&"md5-sess"===e.toLowerCase()?s(a+":"+i+":"+o):a}(n.algorithm,this.user,n.realm,this.pass,n.nonce,l),d=s(e+":"+t),h=s(c?p+":"+n.nonce+":"+u+":"+l+":"+c+":"+d:p+":"+n.nonce+":"+d),f={username:this.user,realm:n.realm,nonce:n.nonce,uri:t,qop:c,response:h,nc:u,cnonce:l,algorithm:n.algorithm,opaque:n.opaque};for(var m in r=[],f)f[m]&&("qop"===m||"nc"===m||"algorithm"===m?r.push(m+"="+f[m]):r.push(m+'="'+f[m]+'"'));return r="Digest "+r.join(", "),this.sentAuth=!0,r},Auth.prototype.onRequest=function(e,t,r,n){var i,o=this.request;void 0===n&&void 0===e?this.request.emit("error",new Error("no auth mechanism defined")):i=void 0!==n?this.bearer(n,r):this.basic(e,t,r),i&&o.setHeader("authorization",i)},Auth.prototype.onResponse=function(e){var t=this.request;if(!this.hasAuth||this.sentAuth)return null;var r=n(e.headers).get("www-authenticate"),i=r&&r.split(" ")[0].toLowerCase();switch(t.debug("reauth",i),i){case"basic":return this.basic(this.user,this.pass,!0);case"bearer":return this.bearer(this.bearerToken,!0);case"digest":return this.digest(t.method,t.path,r)}},t.Auth=Auth},function(e,t,r){"use strict";var n=r(7),i=r(319),o=r(196),s=r(31),a=r(750),c=r(12),u=r(14).Buffer;function OAuth(e){this.request=e,this.params=null}OAuth.prototype.buildParams=function(e,t,r,n,i,o){var c={};for(var u in e)c["oauth_"+u]=e[u];c.oauth_version||(c.oauth_version="1.0"),c.oauth_timestamp||(c.oauth_timestamp=Math.floor(Date.now()/1e3).toString()),c.oauth_nonce||(c.oauth_nonce=s().replace(/-/g,"")),c.oauth_signature_method||(c.oauth_signature_method="HMAC-SHA1");var l=c.oauth_consumer_secret||c.oauth_private_key;delete c.oauth_consumer_secret,delete c.oauth_private_key;var p=c.oauth_token_secret;delete c.oauth_token_secret;var d=c.oauth_realm;delete c.oauth_realm,delete c.oauth_transport_method;var h=t.protocol+"//"+t.host+t.pathname,f=o.parse([].concat(n,i,o.stringify(c)).join("&"));return c.oauth_signature=a.sign(c.oauth_signature_method,r,h,f,l,p),d&&(c.realm=d),c},OAuth.prototype.buildBodyHash=function(e,t){["HMAC-SHA1","RSA-SHA1"].indexOf(e.signature_method||"HMAC-SHA1")<0&&this.request.emit("error",new Error("oauth: "+e.signature_method+" signature_method not supported with body_hash signing."));var r=c.createHash("sha1");r.update(t||"");var n=r.digest("hex");return u.from(n,"hex").toString("base64")},OAuth.prototype.concatParams=function(e,t,r){r=r||"";var n=Object.keys(e).filter(function(e){return"realm"!==e&&"oauth_signature"!==e}).sort();return e.realm&&n.splice(0,0,"realm"),n.push("oauth_signature"),n.map(function(t){return t+"="+r+a.rfc3986(e[t])+r}).join(t)},OAuth.prototype.onRequest=function(e){this.params=e;var t,r,s=this.request.uri||{},a=this.request.method||"",c=o(this.request.headers),u=this.request.body||"",l=this.request.qsLib||i,p=c.get("content-type")||"",d="application/x-www-form-urlencoded",h=e.transport_method||"header";p.slice(0,d.length)===d&&(p=d,t=u),s.query&&(r=s.query),"body"!==h||"POST"===a&&p===d||this.request.emit("error",new Error("oauth: transport_method of body requires POST and content-type "+d)),t||"boolean"!=typeof e.body_hash||(e.body_hash=this.buildBodyHash(e,this.request.body.toString()));var f=this.buildParams(e,s,a,r,t,l);switch(h){case"header":this.request.setHeader("Authorization","OAuth "+this.concatParams(f,",",'"'));break;case"query":var m=this.request.uri.href+=(r?"&":"?")+this.concatParams(f,"&");this.request.uri=n.parse(m),this.request.path=this.request.uri.path;break;case"body":this.request.body=(t?t+"&":"")+this.concatParams(f,"&");break;default:this.request.emit("error",new Error("oauth: transport_method invalid"))}},t.OAuth=OAuth},function(e,t,r){var n=r(12);function sha(e,t,r){return n.createHmac(r,e).update(t).digest("base64")}function rfc3986(e){return encodeURIComponent(e).replace(/!/g,"%21").replace(/\*/g,"%2A").replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/'/g,"%27")}function compare(e,t){return e>t?1:e<t?-1:0}function generateBase(e,t,r){var n=function map(e){var t,r,n=[];for(t in e)if(r=e[t],Array.isArray(r))for(var i=0;i<r.length;i++)n.push([t,r[i]]);else if("object"==typeof r)for(var o in r)n.push([t+"["+o+"]",r[o]]);else n.push([t,r]);return n}(r).map(function(e){return[rfc3986(e[0]),rfc3986(e[1]||"")]}).sort(function(e,t){return compare(e[0],t[0])||compare(e[1],t[1])}).map(function(e){return e.join("=")}).join("&");return[rfc3986(e?e.toUpperCase():"GET"),rfc3986(t),rfc3986(n)].join("&")}function hmacsign(e,t,r,n,i){var o=generateBase(e,t,r);return sha([n||"",i||""].map(rfc3986).join("&"),o,"sha1")}function hmacsign256(e,t,r,n,i){var o=generateBase(e,t,r);return sha([n||"",i||""].map(rfc3986).join("&"),o,"sha256")}function rsasign(e,t,r,i,o){return function rsa(e,t){return n.createSign("RSA-SHA1").update(t).sign(e,"base64")}(i||"",generateBase(e,t,r))}function plaintext(e,t){return[e||"",t||""].map(rfc3986).join("&")}t.hmacsign=hmacsign,t.hmacsign256=hmacsign256,t.rsasign=rsasign,t.plaintext=plaintext,t.sign=function sign(e,t,r,n,i,o){var s,a=1;switch(e){case"RSA-SHA1":s=rsasign;break;case"HMAC-SHA1":s=hmacsign;break;case"HMAC-SHA256":s=hmacsign256;break;case"PLAINTEXT":s=plaintext,a=4;break;default:throw new Error("Signature method not supported: "+e)}return s.apply(null,[].slice.call(arguments,a))},t.rfc3986=rfc3986,t.generateBase=generateBase},function(e,t,r){"use strict";var n=r(12);t.calculateMac=function(e,t){var r="hawk.1.header\n"+t.ts+"\n"+t.nonce+"\n"+(t.method||"").toUpperCase()+"\n"+t.resource+"\n"+t.host.toLowerCase()+"\n"+t.port+"\n"+(t.hash||"")+"\n";return t.ext&&(r+=t.ext.replace("\\","\\\\").replace("\n","\\n")),r+="\n",t.app&&(r=r+t.app+"\n"+(t.dlg||"")+"\n"),n.createHmac(e.algorithm,e.key).update(r).digest("base64")},t.header=function(e,r,i){var o=i.timestamp||Math.floor((Date.now()+(i.localtimeOffsetMsec||0))/1e3),s=i.credentials;if(!(s&&s.id&&s.key&&s.algorithm))return"";if(-1===["sha1","sha256"].indexOf(s.algorithm))return"";var a,c,u={ts:o,nonce:i.nonce||(a=6,c=6*(a+1),n.randomBytes(Math.ceil(c/8)).toString("base64").replace(/\+/g,"-").replace(/\//g,"_").replace(/=/g,"").slice(0,a)),method:r,resource:e.pathname+(e.search||""),host:e.hostname,port:e.port||("http:"===e.protocol?80:443),hash:i.hash,ext:i.ext,app:i.app,dlg:i.dlg};u.hash||!i.payload&&""!==i.payload||(u.hash=function calculatePayloadHash(e,t,r){var i=n.createHash(t);return i.update("hawk.1.payload\n"),i.update((r?r.split(";")[0].trim().toLowerCase():"")+"\n"),i.update(e||""),i.update("\n"),i.digest("base64")}(i.payload,s.algorithm,i.contentType));var l=t.calculateMac(s,u),p=null!==u.ext&&void 0!==u.ext&&""!==u.ext,d='Hawk id="'+s.id+'", ts="'+u.ts+'", nonce="'+u.nonce+(u.hash?'", hash="'+u.hash:"")+(p?'", ext="'+u.ext.replace(/\\/g,"\\\\").replace(/"/g,'\\"'):"")+'", mac="'+l+'"';return u.app&&(d=d+', app="'+u.app+(u.dlg?'", dlg="'+u.dlg:"")+'"'),d}},function(e,t,r){"use strict";var n=r(31),i=r(311),o=r(318),s=r(14).Buffer;function Multipart(e){this.request=e,this.boundary=n(),this.chunked=!1,this.body=null}Multipart.prototype.isChunked=function(e){var t=this,r=!1,n=e.data||e;return n.forEach||t.request.emit("error",new Error("Argument error, options.multipart.")),void 0!==e.chunked&&(r=e.chunked),"chunked"===t.request.getHeader("transfer-encoding")&&(r=!0),r||n.forEach(function(e){void 0===e.body&&t.request.emit("error",new Error("Body attribute missing in multipart.")),o(e.body)&&(r=!0)}),r},Multipart.prototype.setHeaders=function(e){e&&!this.request.hasHeader("transfer-encoding")&&this.request.setHeader("transfer-encoding","chunked");var t=this.request.getHeader("content-type");t&&-1!==t.indexOf("multipart")?-1!==t.indexOf("boundary")?this.boundary=t.replace(/.*boundary=([^\s;]+).*/,"$1"):this.request.setHeader("content-type",t+"; boundary="+this.boundary):this.request.setHeader("content-type","multipart/related; boundary="+this.boundary)},Multipart.prototype.build=function(e,t){var r=this,n=t?new i:[];function add(e){return"number"==typeof e&&(e=e.toString()),t?n.append(e):n.push(s.from(e))}return r.request.preambleCRLF&&add("\r\n"),e.forEach(function(e){var t="--"+r.boundary+"\r\n";Object.keys(e).forEach(function(r){"body"!==r&&(t+=r+": "+e[r]+"\r\n")}),add(t+="\r\n"),add(e.body),add("\r\n")}),add("--"+r.boundary+"--"),r.request.postambleCRLF&&add("\r\n"),n},Multipart.prototype.onRequest=function(e){var t=this.isChunked(e),r=e.data||e;this.setHeaders(t),this.chunked=t,this.body=this.build(r,t)},t.Multipart=Multipart},function(e,t,r){"use strict";var n=r(7),i=/^https?:/;function Redirect(e){this.request=e,this.followRedirect=!0,this.followRedirects=!0,this.followAllRedirects=!1,this.followOriginalHttpMethod=!1,this.allowRedirect=function(){return!0},this.maxRedirects=10,this.redirects=[],this.redirectsFollowed=0,this.removeRefererHeader=!1}Redirect.prototype.onRequest=function(e){void 0!==e.maxRedirects&&(this.maxRedirects=e.maxRedirects),"function"==typeof e.followRedirect&&(this.allowRedirect=e.followRedirect),void 0!==e.followRedirect&&(this.followRedirects=!!e.followRedirect),void 0!==e.followAllRedirects&&(this.followAllRedirects=e.followAllRedirects),(this.followRedirects||this.followAllRedirects)&&(this.redirects=this.redirects||[]),void 0!==e.removeRefererHeader&&(this.removeRefererHeader=e.removeRefererHeader),void 0!==e.followOriginalHttpMethod&&(this.followOriginalHttpMethod=e.followOriginalHttpMethod)},Redirect.prototype.redirectTo=function(e){var t=this.request,r=null;if(e.statusCode>=300&&e.statusCode<400&&e.caseless.has("location")){var n=e.caseless.get("location");if(t.debug("redirect",n),this.followAllRedirects)r=n;else if(this.followRedirects)switch(t.method){case"PATCH":case"PUT":case"POST":case"DELETE":break;default:r=n}}else if(401===e.statusCode){var i=t._auth.onResponse(e);i&&(t.setHeader("authorization",i),r=t.uri)}return r},Redirect.prototype.onResponse=function(e){var t=this.request,r=this.redirectTo(e);if(!r||!this.allowRedirect.call(t,e))return!1;if(t.debug("redirect to",r),e.resume&&e.resume(),this.redirectsFollowed>=this.maxRedirects)return t.emit("error",new Error("Exceeded maxRedirects. Probably stuck in a redirect loop "+t.uri.href)),!1;this.redirectsFollowed+=1,i.test(r)||(r=n.resolve(t.uri.href,r));var o=t.uri;return t.uri=n.parse(r),t.uri.protocol!==o.protocol&&delete t.agent,this.redirects.push({statusCode:e.statusCode,redirectUri:r}),this.followAllRedirects&&"HEAD"!==t.method&&401!==e.statusCode&&307!==e.statusCode&&(t.method=this.followOriginalHttpMethod?t.method:"GET"),delete t.src,delete t.req,delete t._started,401!==e.statusCode&&307!==e.statusCode&&(delete t.body,delete t._form,t.headers&&(t.removeHeader("host"),t.removeHeader("content-type"),t.removeHeader("content-length"),t.uri.hostname!==t.originalHost.split(":")[0]&&t.removeHeader("authorization"))),this.removeRefererHeader||t.setHeader("referer",o.href),t.emit("redirect"),t.init(),!0},t.Redirect=Redirect},function(e,t,r){"use strict";var n=r(7),i=r(755),o=["accept","accept-charset","accept-encoding","accept-language","accept-ranges","cache-control","content-encoding","content-language","content-location","content-md5","content-range","content-type","connection","date","expect","max-forwards","pragma","referer","te","user-agent","via"],s=["proxy-authorization"];function Tunnel(e){this.request=e,this.proxyHeaderWhiteList=o,this.proxyHeaderExclusiveList=[],void 0!==e.tunnel&&(this.tunnelOverride=e.tunnel)}Tunnel.prototype.isEnabled=function(){var e=this.request;return void 0!==this.tunnelOverride?this.tunnelOverride:"https:"===e.uri.protocol},Tunnel.prototype.setup=function(e){var t=this.request;if(e=e||{},"string"==typeof t.proxy&&(t.proxy=n.parse(t.proxy)),!t.proxy||!t.tunnel)return!1;e.proxyHeaderWhiteList&&(this.proxyHeaderWhiteList=e.proxyHeaderWhiteList),e.proxyHeaderExclusiveList&&(this.proxyHeaderExclusiveList=e.proxyHeaderExclusiveList);var r=this.proxyHeaderExclusiveList.concat(s),o=this.proxyHeaderWhiteList.concat(r),a=function constructProxyHeaderWhiteList(e,t){var r=t.reduce(function(e,t){return e[t.toLowerCase()]=!0,e},{});return Object.keys(e).filter(function(e){return r[e.toLowerCase()]}).reduce(function(t,r){return t[r]=e[r],t},{})}(t.headers,o);a.host=function constructProxyHost(e){var t=e.port,r=e.protocol,n=e.hostname+":";return n+=t||("https:"===r?"443":"80")}(t.uri),r.forEach(t.removeHeader,t);var c=function getTunnelFn(e){var t=function constructTunnelFnName(e,t){return["https:"===e.protocol?"https":"http","https:"===t.protocol?"Https":"Http"].join("Over")}(e.uri,e.proxy);return i[t]}(t),u=function constructTunnelOptions(e,t){var r=e.proxy;return{proxy:{host:r.hostname,port:+r.port,proxyAuth:r.auth,headers:t},headers:e.headers,ca:e.ca,cert:e.cert,key:e.key,passphrase:e.passphrase,pfx:e.pfx,ciphers:e.ciphers,rejectUnauthorized:e.rejectUnauthorized,secureOptions:e.secureOptions,secureProtocol:e.secureProtocol}}(t,a);return t.agent=c(u),!0},Tunnel.defaultProxyHeaderWhiteList=o,Tunnel.defaultProxyHeaderExclusiveList=s,t.Tunnel=Tunnel},function(e,t,r){"use strict";r(47);var n,i=r(59),o=r(23),s=r(21),a=r(5),c=r(44),u=r(1),l=r(14).Buffer;function TunnelingAgent(e){var t=this;t.options=e||{},t.proxyOptions=t.options.proxy||{},t.maxSockets=t.options.maxSockets||o.Agent.defaultMaxSockets,t.requests=[],t.sockets=[],t.on("free",function onFree(e,r,n){for(var i=0,o=t.requests.length;i<o;++i){var s=t.requests[i];if(s.host===r&&s.port===n)return t.requests.splice(i,1),void s.request.onSocket(e)}e.destroy(),t.removeSocket(e)})}function createSecureSocket(e,t){var r=this;TunnelingAgent.prototype.createSocket.call(r,e,function(n){var o=i.connect(0,mergeOptions({},r.options,{servername:e.host,socket:n}));r.sockets[r.sockets.indexOf(n)]=o,t(o)})}function mergeOptions(e){for(var t=1,r=arguments.length;t<r;++t){var n=arguments[t];if("object"==typeof n)for(var i=Object.keys(n),o=0,s=i.length;o<s;++o){var a=i[o];void 0!==n[a]&&(e[a]=n[a])}}return e}t.httpOverHttp=function httpOverHttp(e){var t=new TunnelingAgent(e);return t.request=o.request,t},t.httpsOverHttp=function httpsOverHttp(e){var t=new TunnelingAgent(e);return t.request=o.request,t.createSocket=createSecureSocket,t.defaultPort=443,t},t.httpOverHttps=function httpOverHttps(e){var t=new TunnelingAgent(e);return t.request=s.request,t},t.httpsOverHttps=function httpsOverHttps(e){var t=new TunnelingAgent(e);return t.request=s.request,t.createSocket=createSecureSocket,t.defaultPort=443,t},u.inherits(TunnelingAgent,a.EventEmitter),TunnelingAgent.prototype.addRequest=function addRequest(e,t){"string"==typeof t&&(t={host:t,port:arguments[2],path:arguments[3]}),this.sockets.length>=this.maxSockets?this.requests.push({host:t.host,port:t.port,request:e}):this.createConnection({host:t.host,port:t.port,request:e})},TunnelingAgent.prototype.createConnection=function createConnection(e){var t=this;t.createSocket(e,function(r){function onFree(){t.emit("free",r,e.host,e.port)}function onCloseOrRemove(e){t.removeSocket(r),r.removeListener("free",onFree),r.removeListener("close",onCloseOrRemove),r.removeListener("agentRemove",onCloseOrRemove)}r.on("free",onFree),r.on("close",onCloseOrRemove),r.on("agentRemove",onCloseOrRemove),e.request.onSocket(r)})},TunnelingAgent.prototype.createSocket=function createSocket(e,t){var r=this,i={};r.sockets.push(i);var o=mergeOptions({},r.proxyOptions,{method:"CONNECT",path:e.host+":"+e.port,agent:!1});o.proxyAuth&&(o.headers=o.headers||{},o.headers["Proxy-Authorization"]="Basic "+l.from(o.proxyAuth).toString("base64")),n("making CONNECT request");var s=r.request(o);function onConnect(o,a,u){if(s.removeAllListeners(),a.removeAllListeners(),200===o.statusCode)c.equal(u.length,0),n("tunneling connection has established"),r.sockets[r.sockets.indexOf(i)]=a,t(a);else{n("tunneling socket could not be established, statusCode=%d",o.statusCode);var l=new Error("tunneling socket could not be established, statusCode="+o.statusCode);l.code="ECONNRESET",e.request.emit("error",l),r.removeSocket(i)}}s.useChunkedEncodingByDefault=!1,s.once("response",function onResponse(e){e.upgrade=!0}),s.once("upgrade",function onUpgrade(e,t,r){process.nextTick(function(){onConnect(e,t,r)})}),s.once("connect",onConnect),s.once("error",function onError(t){s.removeAllListeners(),n("tunneling socket could not be established, cause=%s\n",t.message,t.stack);var o=new Error("tunneling socket could not be established, cause="+t.message);o.code="ECONNRESET",e.request.emit("error",o),r.removeSocket(i)}),s.end()},TunnelingAgent.prototype.removeSocket=function removeSocket(e){var t=this.sockets.indexOf(e);if(-1!==t){this.sockets.splice(t,1);var r=this.requests.shift();r&&this.createConnection(r)}},n=process.env.NODE_DEBUG&&/\btunnel\b/.test(process.env.NODE_DEBUG)?function(){var e=Array.prototype.slice.call(arguments);"string"==typeof e[0]?e[0]="TUNNEL: "+e[0]:e.unshift("TUNNEL:"),console.error.apply(console,e)}:function(){},t.debug=n},function(e,t){(function(){var t,r,n,i,o,s;"undefined"!=typeof performance&&null!==performance&&performance.now?e.exports=function(){return performance.now()}:"undefined"!=typeof process&&null!==process&&process.hrtime?(e.exports=function(){return(t()-o)/1e6},r=process.hrtime,i=(t=function(){var e;return 1e9*(e=r())[0]+e[1]})(),s=1e9*process.uptime(),o=i-s):Date.now?(e.exports=function(){return Date.now()-n},n=Date.now()):(e.exports=function(){return(new Date).getTime()-n},n=(new Date).getTime())}).call(this)},function(e,t,r){"use strict";var n=r(1),i=r(758);function Parser(){return this.internalParser=new i,this.originalOnToken=this.internalParser.onToken,this.internalParser.onToken=o.bind(this),this.internalParser}e.exports,n.inherits(Parser,i);var o=function(e,t){var r=this,n=!1;if((e===i.C.STRING||e===i.C.NUMBER||e===i.C.TRUE||e===i.C.FALSE||e===i.C.NULL)&&"number"==typeof t&&-1!=this.internalParser.string.indexOf(".")&&parseInt(this.internalParser.string)===t&&this.internalParser.mode!==i.C.ARRAY){var o=this.internalParser.key+"@odata.type";this.internalParser.value&&(this.internalParser.value[o]="Edm.Double"),function additionalEmit(e,t){var n=r.internalParser.key;r.internalParser.key=e,r.internalParser.onValue(t),r.internalParser.key=n}(o,"Edm.Double"),n=this.internalParser.string!==t.toString()}n?this.originalOnToken.call(this.internalParser,e,this.internalParser.string):this.originalOnToken.call(this.internalParser,e,t)};Parser.C=i.C,e.exports=Parser},function(e,t){var r={},n=r.LEFT_BRACE=1,i=r.RIGHT_BRACE=2,o=r.LEFT_BRACKET=3,s=r.RIGHT_BRACKET=4,a=r.COLON=5,c=r.COMMA=6,u=r.TRUE=7,l=r.FALSE=8,p=r.NULL=9,d=r.STRING=10,h=r.NUMBER=11,f=r.START=17,m=r.STOP=18,g=r.TRUE1=33,y=r.TRUE2=34,v=r.TRUE3=35,b=r.FALSE1=49,_=r.FALSE2=50,w=r.FALSE3=51,E=r.FALSE4=52,S=r.NULL1=65,C=r.NULL2=66,x=r.NULL3=67,k=r.NUMBER1=81,R=r.NUMBER3=83,T=r.STRING1=97,O=r.STRING2=98,I=r.STRING3=99,N=r.STRING4=100,A=r.STRING5=101,P=r.STRING6=102,L=r.VALUE=113,D=r.KEY=114,M=r.OBJECT=129,j=r.ARRAY=130;function Parser(){this.tState=f,this.value=void 0,this.string=void 0,this.unicode=void 0,this.key=void 0,this.mode=void 0,this.stack=[],this.state=L,this.bytes_remaining=0,this.bytes_in_sequence=0,this.temp_buffs={2:new Buffer(2),3:new Buffer(3),4:new Buffer(4)},this.offset=-1}Parser.toknam=function(e){for(var t=Object.keys(r),n=0,i=t.length;n<i;n++){var o=t[n];if(r[o]===e)return o}return e&&"0x"+e.toString(16)};var q=Parser.prototype;q.onError=function(e){throw e},q.charError=function(e,t){this.tState=m,this.onError(new Error("Unexpected "+JSON.stringify(String.fromCharCode(e[t]))+" at position "+t+" in state "+Parser.toknam(this.tState)))},q.write=function(e){var t;"string"==typeof e&&(e=new Buffer(e));for(var r=0,m=e.length;r<m;r++)if(this.tState===f){if(t=e[r],this.offset++,123===t)this.onToken(n,"{");else if(125===t)this.onToken(i,"}");else if(91===t)this.onToken(o,"[");else if(93===t)this.onToken(s,"]");else if(58===t)this.onToken(a,":");else if(44===t)this.onToken(c,",");else if(116===t)this.tState=g;else if(102===t)this.tState=b;else if(110===t)this.tState=S;else if(34===t)this.string="",this.tState=T;else if(45===t)this.string="-",this.tState=k;else if(t>=48&&t<64)this.string=String.fromCharCode(t),this.tState=R;else if(32!==t&&9!==t&&10!==t&&13!==t)return this.charError(e,r)}else if(this.tState===T)if(t=e[r],this.bytes_remaining>0){for(var L=0;L<this.bytes_remaining;L++)this.temp_buffs[this.bytes_in_sequence][this.bytes_in_sequence-this.bytes_remaining+L]=e[L];this.string+=this.temp_buffs[this.bytes_in_sequence].toString(),this.bytes_in_sequence=this.bytes_remaining=0,r=r+L-1}else if(0===this.bytes_remaining&&t>=128){if(t<=193||t>244)return this.onError(new Error("Invalid UTF-8 character at position "+r+" in state "+Parser.toknam(this.tState)));if(t>=194&&t<=223&&(this.bytes_in_sequence=2),t>=224&&t<=239&&(this.bytes_in_sequence=3),t>=240&&t<=244&&(this.bytes_in_sequence=4),this.bytes_in_sequence+r>e.length){for(var D=0;D<=e.length-1-r;D++)this.temp_buffs[this.bytes_in_sequence][D]=e[r+D];this.bytes_remaining=r+this.bytes_in_sequence-e.length,r=e.length-1}else this.string+=e.slice(r,r+this.bytes_in_sequence).toString(),r=r+this.bytes_in_sequence-1}else if(34===t)this.tState=f,this.onToken(d,this.string),this.offset+=Buffer.byteLength(this.string,"utf8")+1,this.string=void 0;else if(92===t)this.tState=O;else{if(!(t>=32))return this.charError(e,r);this.string+=String.fromCharCode(t)}else if(this.tState===O)if(34===(t=e[r]))this.string+='"',this.tState=T;else if(92===t)this.string+="\\",this.tState=T;else if(47===t)this.string+="/",this.tState=T;else if(98===t)this.string+="\b",this.tState=T;else if(102===t)this.string+="\f",this.tState=T;else if(110===t)this.string+="\n",this.tState=T;else if(114===t)this.string+="\r",this.tState=T;else if(116===t)this.string+="\t",this.tState=T;else{if(117!==t)return this.charError(e,r);this.unicode="",this.tState=I}else if(this.tState===I||this.tState===N||this.tState===A||this.tState===P){if(!((t=e[r])>=48&&t<64||t>64&&t<=70||t>96&&t<=102))return this.charError(e,r);this.unicode+=String.fromCharCode(t),this.tState++===P&&(this.string+=String.fromCharCode(parseInt(this.unicode,16)),this.unicode=void 0,this.tState=T)}else if(this.tState===k||this.tState===R)switch(t=e[r]){case 48:case 49:case 50:case 51:case 52:case 53:case 54:case 55:case 56:case 57:case 46:case 101:case 69:case 43:case 45:this.string+=String.fromCharCode(t),this.tState=R;break;default:this.tState=f;var M=Number(this.string);if(isNaN(M))return this.charError(e,r);this.string.match(/[0-9]+/)==this.string&&M.toString()!=this.string?this.onToken(d,this.string):this.onToken(h,M),this.offset+=this.string.length-1,this.string=void 0,r--}else if(this.tState===g){if(114!==e[r])return this.charError(e,r);this.tState=y}else if(this.tState===y){if(117!==e[r])return this.charError(e,r);this.tState=v}else if(this.tState===v){if(101!==e[r])return this.charError(e,r);this.tState=f,this.onToken(u,!0),this.offset+=3}else if(this.tState===b){if(97!==e[r])return this.charError(e,r);this.tState=_}else if(this.tState===_){if(108!==e[r])return this.charError(e,r);this.tState=w}else if(this.tState===w){if(115!==e[r])return this.charError(e,r);this.tState=E}else if(this.tState===E){if(101!==e[r])return this.charError(e,r);this.tState=f,this.onToken(l,!1),this.offset+=4}else if(this.tState===S){if(117!==e[r])return this.charError(e,r);this.tState=C}else if(this.tState===C){if(108!==e[r])return this.charError(e,r);this.tState=x}else if(this.tState===x){if(108!==e[r])return this.charError(e,r);this.tState=f,this.onToken(p,null),this.offset+=3}},q.onToken=function(e,t){},q.parseError=function(e,t){this.tState=m,this.onError(new Error("Unexpected "+Parser.toknam(e)+(t?"("+JSON.stringify(t)+")":"")+" in state "+Parser.toknam(this.state)))},q.push=function(){this.stack.push({value:this.value,key:this.key,mode:this.mode})},q.pop=function(){var e=this.value,t=this.stack.pop();this.value=t.value,this.key=t.key,this.mode=t.mode,this.emit(e),this.mode||(this.state=L)},q.emit=function(e){this.mode&&(this.state=c),this.onValue(e)},q.onValue=function(e){},q.onToken=function(e,t){if(this.state===L)if(e===d||e===h||e===u||e===l||e===p)this.value&&(this.value[this.key]=t),this.emit(t);else if(e===n)this.push(),this.value?this.value=this.value[this.key]={}:this.value={},this.key=void 0,this.state=D,this.mode=M;else if(e===o)this.push(),this.value?this.value=this.value[this.key]=[]:this.value=[],this.key=0,this.mode=j,this.state=L;else if(e===i){if(this.mode!==M)return this.parseError(e,t);this.pop()}else{if(e!==s)return this.parseError(e,t);if(this.mode!==j)return this.parseError(e,t);this.pop()}else if(this.state===D)if(e===d)this.key=t,this.state=a;else{if(e!==i)return this.parseError(e,t);this.pop()}else if(this.state===a){if(e!==a)return this.parseError(e,t);this.state=L}else{if(this.state!==c)return this.parseError(e,t);if(e===c)this.mode===j?(this.key++,this.state=L):this.mode===M&&(this.state=D);else{if(!(e===s&&this.mode===j||e===i&&this.mode===M))return this.parseError(e,t);this.pop()}}},Parser.C=r,e.exports=Parser},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function toInt(e,t){return(0,n.default)(e),parseInt(e,t||10)};var n=function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}(r(2));e.exports=t.default},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function toBoolean(e,t){if((0,n.default)(e),t)return"1"===e||"true"===e;return"0"!==e&&"false"!==e&&""!==e};var n=function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}(r(2));e.exports=t.default},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function equals(e,t){return(0,n.default)(e),e===t};var n=function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}(r(2));e.exports=t.default},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function contains(e,t){return(0,n.default)(e),e.indexOf((0,i.default)(t))>=0};var n=_interopRequireDefault(r(2)),i=_interopRequireDefault(r(202));function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}e.exports=t.default},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function matches(e,t,r){(0,n.default)(e),"[object RegExp]"!==Object.prototype.toString.call(t)&&(t=new RegExp(t,r));return t.test(e)};var n=function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}(r(2));e.exports=t.default},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function isEmail(e,t){if((0,n.default)(e),(t=(0,i.default)(t,a)).require_display_name||t.allow_display_name){var r=e.match(c);if(r)e=r[1];else if(t.require_display_name)return!1}var h=e.split("@"),f=h.pop(),m=h.join("@"),g=f.toLowerCase();"gmail.com"!==g&&"googlemail.com"!==g||(m=m.replace(/\./g,"").toLowerCase());if(!(0,o.default)(m,{max:64})||!(0,o.default)(f,{max:254}))return!1;if(!(0,s.default)(f,{require_tld:t.require_tld}))return!1;if('"'===m[0])return m=m.slice(1,m.length-1),t.allow_utf8_local_part?d.test(m):l.test(m);for(var y=t.allow_utf8_local_part?p:u,v=m.split("."),b=0;b<v.length;b++)if(!y.test(v[b]))return!1;return!0};var n=_interopRequireDefault(r(2)),i=_interopRequireDefault(r(92)),o=_interopRequireDefault(r(334)),s=_interopRequireDefault(r(203));function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}var a={allow_display_name:!1,require_display_name:!1,allow_utf8_local_part:!0,require_tld:!0},c=/^[a-z\d!#\$%&'\*\+\-\/=\?\^_`{\|}~\.\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]+[a-z\d!#\$%&'\*\+\-\/=\?\^_`{\|}~\,\.\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF\s]*<(.+)>$/i,u=/^[a-z\d!#\$%&'\*\+\-\/=\?\^_`{\|}~]+$/i,l=/^([\s\x01-\x08\x0b\x0c\x0e-\x1f\x7f\x21\x23-\x5b\x5d-\x7e]|(\\[\x01-\x09\x0b\x0c\x0d-\x7f]))*$/i,p=/^[a-z\d!#\$%&'\*\+\-\/=\?\^_`{\|}~\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]+$/i,d=/^([\s\x01-\x08\x0b\x0c\x0e-\x1f\x7f\x21\x23-\x5b\x5d-\x7e\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]|(\\[\x01-\x09\x0b\x0c\x0d-\x7f\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]))*$/i;e.exports=t.default},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function isURL(e,t){if((0,n.default)(e),!e||e.length>=2083||/[\s<>]/.test(e))return!1;if(0===e.indexOf("mailto:"))return!1;t=(0,s.default)(t,a);var r=void 0,u=void 0,l=void 0,p=void 0,d=void 0,h=void 0,f=void 0,m=void 0;if(f=e.split("#"),e=f.shift(),f=e.split("?"),e=f.shift(),(f=e.split("://")).length>1){if(r=f.shift(),t.require_valid_protocol&&-1===t.protocols.indexOf(r))return!1}else{if(t.require_protocol)return!1;t.allow_protocol_relative_urls&&"//"===e.substr(0,2)&&(f[0]=e.substr(2))}if(""===(e=f.join("://")))return!1;if(f=e.split("/"),""===(e=f.shift())&&!t.require_host)return!0;if((f=e.split("@")).length>1&&(u=f.shift()).indexOf(":")>=0&&u.split(":").length>2)return!1;p=f.join("@"),h=null,m=null;var g=p.match(c);g?(l="",m=g[1],h=g[2]||null):(f=p.split(":"),l=f.shift(),f.length&&(h=f.join(":")));if(null!==h&&(d=parseInt(h,10),!/^[0-9]+$/.test(h)||d<=0||d>65535))return!1;if(!((0,o.default)(l)||(0,i.default)(l,t)||m&&(0,o.default)(m,6)))return!1;if(l=l||m,t.host_whitelist&&!checkHost(l,t.host_whitelist))return!1;if(t.host_blacklist&&checkHost(l,t.host_blacklist))return!1;return!0};var n=_interopRequireDefault(r(2)),i=_interopRequireDefault(r(203)),o=_interopRequireDefault(r(335)),s=_interopRequireDefault(r(92));function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}var a={protocols:["http","https","ftp"],require_tld:!0,require_protocol:!1,require_host:!0,require_valid_protocol:!0,allow_underscores:!1,allow_trailing_dot:!1,allow_protocol_relative_urls:!1},c=/^\[([^\]]+)\](?::([0-9]+))?$/;function checkHost(e,t){for(var r=0;r<t.length;r++){var n=t[r];if(e===n||(i=n,"[object RegExp]"===Object.prototype.toString.call(i)&&n.test(e)))return!0}var i;return!1}e.exports=t.default},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function isMACAddress(e){return(0,n.default)(e),i.test(e)};var n=function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}(r(2));var i=/^([0-9a-fA-F][0-9a-fA-F]:){5}([0-9a-fA-F][0-9a-fA-F])$/;e.exports=t.default},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function isBoolean(e){return(0,n.default)(e),["true","false","1","0"].indexOf(e)>=0};var n=function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}(r(2));e.exports=t.default},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function isAlpha(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"en-US";if((0,n.default)(e),t in i.alpha)return i.alpha[t].test(e);throw new Error("Invalid locale '"+t+"'")};var n=function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}(r(2)),i=r(156);e.exports=t.default},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function isAlphanumeric(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"en-US";if((0,n.default)(e),t in i.alphanumeric)return i.alphanumeric[t].test(e);throw new Error("Invalid locale '"+t+"'")};var n=function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}(r(2)),i=r(156);e.exports=t.default},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function isNumeric(e){return(0,n.default)(e),i.test(e)};var n=function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}(r(2));var i=/^[-+]?[0-9]+$/;e.exports=t.default},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function isPort(e){return(0,n.default)(e,{min:0,max:65535})};var n=function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}(r(336));e.exports=t.default},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function isLowercase(e){return(0,n.default)(e),e===e.toLowerCase()};var n=function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}(r(2));e.exports=t.default},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function isUppercase(e){return(0,n.default)(e),e===e.toUpperCase()};var n=function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}(r(2));e.exports=t.default},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function isAscii(e){return(0,n.default)(e),i.test(e)};var n=function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}(r(2));var i=/^[\x00-\x7F]+$/;e.exports=t.default},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function isVariableWidth(e){return(0,n.default)(e),i.fullWidth.test(e)&&o.halfWidth.test(e)};var n=function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}(r(2)),i=r(337),o=r(338);e.exports=t.default},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function isMultibyte(e){return(0,n.default)(e),i.test(e)};var n=function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}(r(2));var i=/[^\x00-\x7F]/;e.exports=t.default},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function isSurrogatePair(e){return(0,n.default)(e),i.test(e)};var n=function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}(r(2));var i=/[\uD800-\uDBFF][\uDC00-\uDFFF]/;e.exports=t.default},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function isFloat(e,t){(0,n.default)(e),t=t||{};var r=new RegExp("^(?:[-+])?(?:[0-9]+)?(?:\\"+(t.locale?i.decimal[t.locale]:".")+"[0-9]*)?(?:[eE][\\+\\-]?(?:[0-9]+))?$");if(""===e||"."===e||"-"===e||"+"===e)return!1;return r.test(e)&&(!t.hasOwnProperty("min")||e>=t.min)&&(!t.hasOwnProperty("max")||e<=t.max)&&(!t.hasOwnProperty("lt")||e<t.lt)&&(!t.hasOwnProperty("gt")||e>t.gt)};var n=function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}(r(2)),i=r(156);e.exports=t.default},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function isDecimal(e,t){if((0,i.default)(e),(t=(0,n.default)(t,s)).locale in o.decimal)return!a.includes(e.replace(/ /g,""))&&function decimalRegExp(e){return new RegExp("^[-+]?([0-9]+)?(\\"+o.decimal[e.locale]+"[0-9]{"+e.decimal_digits+"})"+(e.force_decimal?"":"?")+"$")}(t).test(e);throw new Error("Invalid locale '"+t.locale+"'")};var n=_interopRequireDefault(r(92)),i=_interopRequireDefault(r(2)),o=r(156);function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}var s={force_decimal:!1,decimal_digits:"1,",locale:"en-US"},a=["","-","+"];e.exports=t.default},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function isDivisibleBy(e,t){return(0,n.default)(e),(0,i.default)(e)%parseInt(t,10)==0};var n=_interopRequireDefault(r(2)),i=_interopRequireDefault(r(333));function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}e.exports=t.default},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function isHexColor(e){return(0,n.default)(e),i.test(e)};var n=function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}(r(2));var i=/^#?([0-9A-F]{3}|[0-9A-F]{6})$/i;e.exports=t.default},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function isISRC(e){return(0,n.default)(e),i.test(e)};var n=function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}(r(2));var i=/^[A-Z]{2}[0-9A-Z]{3}\d{2}\d{5}$/;e.exports=t.default},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function isMD5(e){return(0,n.default)(e),i.test(e)};var n=function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}(r(2));var i=/^[a-f0-9]{32}$/;e.exports=t.default},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function isHash(e,t){return(0,n.default)(e),new RegExp("^[a-f0-9]{"+i[t]+"}$").test(e)};var n=function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}(r(2));var i={md5:32,md4:32,sha1:40,sha256:64,sha384:96,sha512:128,ripemd128:32,ripemd160:40,tiger128:32,tiger160:40,tiger192:48,crc32:8,crc32b:8};e.exports=t.default},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};t.default=function isJSON(e){(0,i.default)(e);try{var t=JSON.parse(e);return!!t&&"object"===(void 0===t?"undefined":n(t))}catch(e){}return!1};var i=function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}(r(2));e.exports=t.default},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function isEmpty(e){return(0,n.default)(e),0===e.length};var n=function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}(r(2));e.exports=t.default},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};t.default=function isLength(e,t){(0,i.default)(e);var r=void 0,o=void 0;"object"===(void 0===t?"undefined":n(t))?(r=t.min||0,o=t.max):(r=arguments[1],o=arguments[2]);var s=e.match(/[\uD800-\uDBFF][\uDC00-\uDFFF]/g)||[],a=e.length-s.length;return a>=r&&(void 0===o||a<=o)};var i=function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}(r(2));e.exports=t.default},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function isUUID(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"all";(0,n.default)(e);var r=i[t];return r&&r.test(e)};var n=function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}(r(2));var i={3:/^[0-9A-F]{8}-[0-9A-F]{4}-3[0-9A-F]{3}-[0-9A-F]{4}-[0-9A-F]{12}$/i,4:/^[0-9A-F]{8}-[0-9A-F]{4}-4[0-9A-F]{3}-[89AB][0-9A-F]{3}-[0-9A-F]{12}$/i,5:/^[0-9A-F]{8}-[0-9A-F]{4}-5[0-9A-F]{3}-[89AB][0-9A-F]{3}-[0-9A-F]{12}$/i,all:/^[0-9A-F]{8}-[0-9A-F]{4}-[0-9A-F]{4}-[0-9A-F]{4}-[0-9A-F]{12}$/i};e.exports=t.default},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function isMongoId(e){return(0,n.default)(e),(0,i.default)(e)&&24===e.length};var n=_interopRequireDefault(r(2)),i=_interopRequireDefault(r(339));function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}e.exports=t.default},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function isAfter(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:String(new Date);(0,n.default)(e);var r=(0,i.default)(t),o=(0,i.default)(e);return!!(o&&r&&o>r)};var n=_interopRequireDefault(r(2)),i=_interopRequireDefault(r(201));function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}e.exports=t.default},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function isBefore(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:String(new Date);(0,n.default)(e);var r=(0,i.default)(t),o=(0,i.default)(e);return!!(o&&r&&o<r)};var n=_interopRequireDefault(r(2)),i=_interopRequireDefault(r(201));function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}e.exports=t.default},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};t.default=function isIn(e,t){(0,i.default)(e);var r=void 0;if("[object Array]"===Object.prototype.toString.call(t)){var s=[];for(r in t)({}).hasOwnProperty.call(t,r)&&(s[r]=(0,o.default)(t[r]));return s.indexOf(e)>=0}if("object"===(void 0===t?"undefined":n(t)))return t.hasOwnProperty(e);if(t&&"function"==typeof t.indexOf)return t.indexOf(e)>=0;return!1};var i=_interopRequireDefault(r(2)),o=_interopRequireDefault(r(202));function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}e.exports=t.default},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function isCreditCard(e){(0,n.default)(e);var t=e.replace(/[- ]+/g,"");if(!i.test(t))return!1;for(var r=0,o=void 0,s=void 0,a=void 0,c=t.length-1;c>=0;c--)o=t.substring(c,c+1),s=parseInt(o,10),r+=a&&(s*=2)>=10?s%10+1:s,a=!a;return!(r%10!=0||!t)};var n=function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}(r(2));var i=/^(?:4[0-9]{12}(?:[0-9]{3})?|5[1-5][0-9]{14}|(222[1-9]|22[3-9][0-9]|2[3-6][0-9]{2}|27[01][0-9]|2720)[0-9]{12}|6(?:011|5[0-9][0-9])[0-9]{12}|3[47][0-9]{13}|3(?:0[0-5]|[68][0-9])[0-9]{11}|(?:2131|1800|35\d{3})\d{11}|62[0-9]{14})$/;e.exports=t.default},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function isISIN(e){if((0,n.default)(e),!i.test(e))return!1;for(var t=e.replace(/[A-Z]/g,function(e){return parseInt(e,36)}),r=0,o=void 0,s=void 0,a=!0,c=t.length-2;c>=0;c--)o=t.substring(c,c+1),s=parseInt(o,10),r+=a&&(s*=2)>=10?s+1:s,a=!a;return parseInt(e.substr(e.length-1),10)===(1e4-r)%10};var n=function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}(r(2));var i=/^[A-Z]{2}[0-9A-Z]{9}[0-9]$/;e.exports=t.default},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function isISBN(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";(0,n.default)(e);t=String(t);if(!t)return isISBN(e,10)||isISBN(e,13);var r=e.replace(/[\s-]+/g,"");var a=0;var c=void 0;if("10"===t){if(!i.test(r))return!1;for(c=0;c<9;c++)a+=(c+1)*r.charAt(c);if("X"===r.charAt(9)?a+=100:a+=10*r.charAt(9),a%11==0)return!!r}else if("13"===t){if(!o.test(r))return!1;for(c=0;c<12;c++)a+=s[c%2]*r.charAt(c);if(r.charAt(12)-(10-a%10)%10==0)return!!r}return!1};var n=function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}(r(2));var i=/^(?:[0-9]{9}X|[0-9]{10})$/,o=/^(?:[0-9]{13})$/,s=[1,3];e.exports=t.default},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function isISSN(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};(0,n.default)(e);var r=i;if(r=t.require_hyphen?r.replace("?",""):r,!(r=t.case_sensitive?new RegExp(r):new RegExp(r,"i")).test(e))return!1;var o=e.replace("-",""),s=8,a=0,c=!0,u=!1,l=void 0;try{for(var p,d=o[Symbol.iterator]();!(c=(p=d.next()).done);c=!0){var h=p.value,f="X"===h.toUpperCase()?10:+h;a+=f*s,--s}}catch(e){u=!0,l=e}finally{try{!c&&d.return&&d.return()}finally{if(u)throw l}}return a%11==0};var n=function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}(r(2));var i="^\\d{4}-?\\d{3}[\\dX]$";e.exports=t.default},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function isMobilePhone(e,t,r){if((0,n.default)(e),r&&r.strictMode&&!e.startsWith("+"))return!1;if(t in i)return i[t].test(e);if("any"===t){for(var o in i)if(i.hasOwnProperty(o)){var s=i[o];if(s.test(e))return!0}return!1}throw new Error("Invalid locale '"+t+"'")};var n=function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}(r(2));var i={"ar-AE":/^((\+?971)|0)?5[024568]\d{7}$/,"ar-DZ":/^(\+?213|0)(5|6|7)\d{8}$/,"ar-EG":/^((\+?20)|0)?1[012]\d{8}$/,"ar-JO":/^(\+?962|0)?7[789]\d{7}$/,"ar-SA":/^(!?(\+?966)|0)?5\d{8}$/,"ar-SY":/^(!?(\+?963)|0)?9\d{8}$/,"be-BY":/^(\+?375)?(24|25|29|33|44)\d{7}$/,"bg-BG":/^(\+?359|0)?8[789]\d{7}$/,"cs-CZ":/^(\+?420)? ?[1-9][0-9]{2} ?[0-9]{3} ?[0-9]{3}$/,"da-DK":/^(\+?45)?\s?\d{2}\s?\d{2}\s?\d{2}\s?\d{2}$/,"de-DE":/^(\+?49[ \.\-])?([\(]{1}[0-9]{1,6}[\)])?([0-9 \.\-\/]{3,20})((x|ext|extension)[ ]?[0-9]{1,4})?$/,"el-GR":/^(\+?30|0)?(69\d{8})$/,"en-AU":/^(\+?61|0)4\d{8}$/,"en-GB":/^(\+?44|0)7\d{9}$/,"en-HK":/^(\+?852\-?)?[456789]\d{3}\-?\d{4}$/,"en-IN":/^(\+?91|0)?[6789]\d{9}$/,"en-KE":/^(\+?254|0)?[7]\d{8}$/,"en-NG":/^(\+?234|0)?[789]\d{9}$/,"en-NZ":/^(\+?64|0)2\d{7,9}$/,"en-PK":/^((\+92)|(0092))-{0,1}\d{3}-{0,1}\d{7}$|^\d{11}$|^\d{4}-\d{7}$/,"en-RW":/^(\+?250|0)?[7]\d{8}$/,"en-SG":/^(\+65)?[89]\d{7}$/,"en-TZ":/^(\+?255|0)?[67]\d{8}$/,"en-UG":/^(\+?256|0)?[7]\d{8}$/,"en-US":/^(\+?1)?[2-9]\d{2}[2-9](?!11)\d{6}$/,"en-ZA":/^(\+?27|0)\d{9}$/,"en-ZM":/^(\+?26)?09[567]\d{7}$/,"es-ES":/^(\+?34)?(6\d{1}|7[1234])\d{7}$/,"et-EE":/^(\+?372)?\s?(5|8[1-4])\s?([0-9]\s?){6,7}$/,"fa-IR":/^(\+?98[\-\s]?|0)9[0-39]\d[\-\s]?\d{3}[\-\s]?\d{4}$/,"fi-FI":/^(\+?358|0)\s?(4(0|1|2|4|5|6)?|50)\s?(\d\s?){4,8}\d$/,"fo-FO":/^(\+?298)?\s?\d{2}\s?\d{2}\s?\d{2}$/,"fr-FR":/^(\+?33|0)[67]\d{8}$/,"he-IL":/^(\+972|0)([23489]|5[012345689]|77)[1-9]\d{6}/,"hu-HU":/^(\+?36)(20|30|70)\d{7}$/,"id-ID":/^(\+?62|0[1-9])[\s|\d]+$/,"it-IT":/^(\+?39)?\s?3\d{2} ?\d{6,7}$/,"ja-JP":/^(\+?81|0)[789]0[ \-]?[1-9]\d{2}[ \-]?\d{5}$/,"kk-KZ":/^(\+?7|8)?7\d{9}$/,"kl-GL":/^(\+?299)?\s?\d{2}\s?\d{2}\s?\d{2}$/,"ko-KR":/^((\+?82)[ \-]?)?0?1([0|1|6|7|8|9]{1})[ \-]?\d{3,4}[ \-]?\d{4}$/,"lt-LT":/^(\+370|8)\d{8}$/,"ms-MY":/^(\+?6?01){1}(([145]{1}(\-|\s)?\d{7,8})|([236789]{1}(\s|\-)?\d{7}))$/,"nb-NO":/^(\+?47)?[49]\d{7}$/,"nl-BE":/^(\+?32|0)4?\d{8}$/,"nn-NO":/^(\+?47)?[49]\d{7}$/,"pl-PL":/^(\+?48)? ?[5-8]\d ?\d{3} ?\d{2} ?\d{2}$/,"pt-BR":/^(\+?55|0)\-?[1-9]{2}\-?[2-9]{1}\d{3,4}\-?\d{4}$/,"pt-PT":/^(\+?351)?9[1236]\d{7}$/,"ro-RO":/^(\+?4?0)\s?7\d{2}(\/|\s|\.|\-)?\d{3}(\s|\.|\-)?\d{3}$/,"ru-RU":/^(\+?7|8)?9\d{9}$/,"sk-SK":/^(\+?421)? ?[1-9][0-9]{2} ?[0-9]{3} ?[0-9]{3}$/,"sr-RS":/^(\+3816|06)[- \d]{5,9}$/,"th-TH":/^(\+66|66|0)\d{9}$/,"tr-TR":/^(\+?90|0)?5\d{9}$/,"uk-UA":/^(\+?38|8)?0\d{9}$/,"vi-VN":/^(\+?84|0)?((1(2([0-9])|6([2-9])|88|99))|(9((?!5)[0-9])))([0-9]{7})$/,"zh-CN":/^(\+?0?86\-?)?1[3456789]\d{9}$/,"zh-TW":/^(\+?886\-?|0)?9\d{8}$/};i["en-CA"]=i["en-US"],i["fr-BE"]=i["nl-BE"],i["zh-HK"]=i["en-HK"],e.exports=t.default},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function isCurrency(e,t){return(0,i.default)(e),function currencyRegex(e){var t="\\d{"+e.digits_after_decimal[0]+"}";e.digits_after_decimal.forEach(function(e,r){0!==r&&(t=t+"|\\d{"+e+"}")});var r="(\\"+e.symbol.replace(/\./g,"\\.")+")"+(e.require_symbol?"":"?"),n="[1-9]\\d{0,2}(\\"+e.thousands_separator+"\\d{3})*",i="("+["0","[1-9]\\d*",n].join("|")+")?",o="(\\"+e.decimal_separator+"("+t+"))"+(e.require_decimal?"":"?"),s=i+(e.allow_decimal||e.require_decimal?o:"");return e.allow_negatives&&!e.parens_for_negatives&&(e.negative_sign_after_digits?s+="-?":e.negative_sign_before_digits&&(s="-?"+s)),e.allow_negative_sign_placeholder?s="( (?!\\-))?"+s:e.allow_space_after_symbol?s=" ?"+s:e.allow_space_after_digits&&(s+="( (?!$))?"),e.symbol_after_digits?s+=r:s=r+s,e.allow_negatives&&(e.parens_for_negatives?s="(\\("+s+"\\)|"+s+")":e.negative_sign_before_digits||e.negative_sign_after_digits||(s="-?"+s)),new RegExp("^(?!-? )(?=.*\\d)"+s+"$")}(t=(0,n.default)(t,o)).test(e)};var n=_interopRequireDefault(r(92)),i=_interopRequireDefault(r(2));function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}var o={symbol:"$",require_symbol:!1,allow_space_after_symbol:!1,symbol_after_digits:!1,allow_negatives:!0,parens_for_negatives:!1,negative_sign_before_digits:!1,negative_sign_after_digits:!1,allow_negative_sign_placeholder:!1,thousands_separator:",",decimal_separator:".",allow_decimal:!0,require_decimal:!1,digits_after_decimal:[2],allow_space_after_digits:!1};e.exports=t.default},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function isISO8601(e){return(0,n.default)(e),i.test(e)};var n=function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}(r(2));var i=/^([\+-]?\d{4}(?!\d{2}\b))((-?)((0[1-9]|1[0-2])(\3([12]\d|0[1-9]|3[01]))?|W([0-4]\d|5[0-2])(-?[1-7])?|(00[1-9]|0[1-9]\d|[12]\d{2}|3([0-5]\d|6[1-6])))([T\s]((([01]\d|2[0-3])((:?)[0-5]\d)?|24:?00)([\.,]\d+(?!:))?)?(\17[0-5]\d([\.,]\d+)?)?([zZ]|([\+-])([01]\d|2[0-3]):?([0-5]\d)?)?)?)?$/;e.exports=t.default},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function isISO31661Alpha2(e){return(0,n.default)(e),i.includes(e.toUpperCase())};var n=function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}(r(2));var i=["AD","AE","AF","AG","AI","AL","AM","AO","AQ","AR","AS","AT","AU","AW","AX","AZ","BA","BB","BD","BE","BF","BG","BH","BI","BJ","BL","BM","BN","BO","BQ","BR","BS","BT","BV","BW","BY","BZ","CA","CC","CD","CF","CG","CH","CI","CK","CL","CM","CN","CO","CR","CU","CV","CW","CX","CY","CZ","DE","DJ","DK","DM","DO","DZ","EC","EE","EG","EH","ER","ES","ET","FI","FJ","FK","FM","FO","FR","GA","GB","GD","GE","GF","GG","GH","GI","GL","GM","GN","GP","GQ","GR","GS","GT","GU","GW","GY","HK","HM","HN","HR","HT","HU","ID","IE","IL","IM","IN","IO","IQ","IR","IS","IT","JE","JM","JO","JP","KE","KG","KH","KI","KM","KN","KP","KR","KW","KY","KZ","LA","LB","LC","LI","LK","LR","LS","LT","LU","LV","LY","MA","MC","MD","ME","MF","MG","MH","MK","ML","MM","MN","MO","MP","MQ","MR","MS","MT","MU","MV","MW","MX","MY","MZ","NA","NC","NE","NF","NG","NI","NL","NO","NP","NR","NU","NZ","OM","PA","PE","PF","PG","PH","PK","PL","PM","PN","PR","PS","PT","PW","PY","QA","RE","RO","RS","RU","RW","SA","SB","SC","SD","SE","SG","SH","SI","SJ","SK","SL","SM","SN","SO","SR","SS","ST","SV","SX","SY","SZ","TC","TD","TF","TG","TH","TJ","TK","TL","TM","TN","TO","TR","TT","TV","TW","TZ","UA","UG","UM","US","UY","UZ","VA","VC","VE","VG","VI","VN","VU","WF","WS","YE","YT","ZA","ZM","ZW"];e.exports=t.default},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function isBase64(e){(0,n.default)(e);var t=e.length;if(!t||t%4!=0||i.test(e))return!1;var r=e.indexOf("=");return-1===r||r===t-1||r===t-2&&"="===e[t-1]};var n=function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}(r(2));var i=/[^A-Z0-9+\/=]/i;e.exports=t.default},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function isDataURI(e){(0,n.default)(e);var t=e.split(",");if(t.length<2)return!1;var r=t.shift().trim().split(";"),a=r.shift();if("data:"!==a.substr(0,5))return!1;var c=a.substr(5);if(""!==c&&!i.test(c))return!1;for(var u=0;u<r.length;u++)if(u===r.length-1&&"base64"===r[u].toLowerCase());else if(!o.test(r[u]))return!1;for(var l=0;l<t.length;l++)if(!s.test(t[l]))return!1;return!0};var n=function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}(r(2));var i=/^[a-z]+\/[a-z0-9\-\+]+$/i,o=/^[a-z\-]+=[a-z0-9\-]+$/i,s=/^[a-z0-9!\$&'\(\)\*\+,;=\-\._~:@\/\?%\s]*$/i;e.exports=t.default},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function isMimeType(e){return(0,n.default)(e),i.test(e)||o.test(e)||s.test(e)};var n=function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}(r(2));var i=/^(application|audio|font|image|message|model|multipart|text|video)\/[a-zA-Z0-9\.\-\+]{1,100}$/i,o=/^text\/[a-zA-Z0-9\.\-\+]{1,100};\s?charset=("[a-zA-Z0-9\.\-\+\s]{0,70}"|[a-zA-Z0-9\.\-\+]{0,70})(\s?\([a-zA-Z0-9\.\-\+\s]{1,20}\))?$/i,s=/^multipart\/[a-zA-Z0-9\.\-\+]{1,100}(;\s?(boundary|charset)=("[a-zA-Z0-9\.\-\+\s]{0,70}"|[a-zA-Z0-9\.\-\+]{0,70})(\s?\([a-zA-Z0-9\.\-\+\s]{1,20}\))?){0,2}$/i;e.exports=t.default},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){if((0,n.default)(e),!e.includes(","))return!1;var t=e.split(",");return i.test(t[0])&&o.test(t[1])};var n=function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}(r(2));var i=/^\(?[+-]?(90(\.0+)?|[1-8]?\d(\.\d+)?)$/,o=/^\s?[+-]?(180(\.0+)?|1[0-7]\d(\.\d+)?|\d{1,2}(\.\d+)?)\)?$/;e.exports=t.default},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.locales=void 0,t.default=function(e,t){if((0,n.default)(e),t in a)return a[t].test(e);if("any"===t){for(var r in a){if(a.hasOwnProperty(r))if(a[r].test(e))return!0}return!1}throw new Error("Invalid locale '"+t+"'")};var n=function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}(r(2));var i=/^\d{4}$/,o=/^\d{5}$/,s=/^\d{6}$/,a={AT:i,AU:i,BE:i,BG:i,CA:/^[ABCEGHJKLMNPRSTVXY]\d[ABCEGHJ-NPRSTV-Z][\s\-]?\d[ABCEGHJ-NPRSTV-Z]\d$/i,CH:i,CZ:/^\d{3}\s?\d{2}$/,DE:o,DK:i,DZ:o,ES:o,FI:o,FR:/^\d{2}\s?\d{3}$/,GB:/^(gir\s?0aa|[a-z]{1,2}\d[\da-z]?\s?(\d[a-z]{2})?)$/i,GR:/^\d{3}\s?\d{2}$/,IL:o,IN:s,IS:/^\d{3}$/,IT:o,JP:/^\d{3}\-\d{4}$/,KE:o,LI:/^(948[5-9]|949[0-7])$/,MX:o,NL:/^\d{4}\s?[a-z]{2}$/i,NO:i,PL:/^\d{2}\-\d{3}$/,PT:/^\d{4}\-\d{3}?$/,RO:s,RU:s,SA:o,SE:/^\d{3}\s?\d{2}$/,TW:/^\d{3}(\d{2})?$/,US:/^\d{5}(-\d{4})?$/,ZA:i,ZM:o};t.locales=Object.keys(a)},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function trim(e,t){return(0,n.default)((0,i.default)(e,t),t)};var n=_interopRequireDefault(r(341)),i=_interopRequireDefault(r(340));function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}e.exports=t.default},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function escape(e){return(0,n.default)(e),e.replace(/&/g,"&amp;").replace(/"/g,"&quot;").replace(/'/g,"&#x27;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/\//g,"&#x2F;").replace(/\\/g,"&#x5C;").replace(/`/g,"&#96;")};var n=function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}(r(2));e.exports=t.default},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function unescape(e){return(0,n.default)(e),e.replace(/&amp;/g,"&").replace(/&quot;/g,'"').replace(/&#x27;/g,"'").replace(/&lt;/g,"<").replace(/&gt;/g,">").replace(/&#x2F;/g,"/").replace(/&#x5C;/g,"\\").replace(/&#96;/g,"`")};var n=function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}(r(2));e.exports=t.default},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function stripLow(e,t){(0,n.default)(e);var r=t?"\\x00-\\x09\\x0B\\x0C\\x0E-\\x1F\\x7F":"\\x00-\\x1F\\x7F";return(0,i.default)(e,r)};var n=_interopRequireDefault(r(2)),i=_interopRequireDefault(r(342));function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}e.exports=t.default},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function whitelist(e,t){return(0,n.default)(e),e.replace(new RegExp("[^"+t+"]+","g"),"")};var n=function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}(r(2));e.exports=t.default},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function isWhitelisted(e,t){(0,n.default)(e);for(var r=e.length-1;r>=0;r--)if(-1===t.indexOf(e[r]))return!1;return!0};var n=function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}(r(2));e.exports=t.default},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function normalizeEmail(e,t){t=(0,n.default)(t,i);var r=e.split("@"),c=r.pop(),u=[r.join("@"),c];if(u[1]=u[1].toLowerCase(),"gmail.com"===u[1]||"googlemail.com"===u[1]){if(t.gmail_remove_subaddress&&(u[0]=u[0].split("+")[0]),t.gmail_remove_dots&&(u[0]=u[0].replace(/\./g,"")),!u[0].length)return!1;(t.all_lowercase||t.gmail_lowercase)&&(u[0]=u[0].toLowerCase()),u[1]=t.gmail_convert_googlemaildotcom?"gmail.com":u[1]}else if(~o.indexOf(u[1])){if(t.icloud_remove_subaddress&&(u[0]=u[0].split("+")[0]),!u[0].length)return!1;(t.all_lowercase||t.icloud_lowercase)&&(u[0]=u[0].toLowerCase())}else if(~s.indexOf(u[1])){if(t.outlookdotcom_remove_subaddress&&(u[0]=u[0].split("+")[0]),!u[0].length)return!1;(t.all_lowercase||t.outlookdotcom_lowercase)&&(u[0]=u[0].toLowerCase())}else if(~a.indexOf(u[1])){if(t.yahoo_remove_subaddress){var l=u[0].split("-");u[0]=l.length>1?l.slice(0,-1).join("-"):l[0]}if(!u[0].length)return!1;(t.all_lowercase||t.yahoo_lowercase)&&(u[0]=u[0].toLowerCase())}else t.all_lowercase&&(u[0]=u[0].toLowerCase());return u.join("@")};var n=function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}(r(92));var i={all_lowercase:!0,gmail_lowercase:!0,gmail_remove_dots:!0,gmail_remove_subaddress:!0,gmail_convert_googlemaildotcom:!0,outlookdotcom_lowercase:!0,outlookdotcom_remove_subaddress:!0,yahoo_lowercase:!0,yahoo_remove_subaddress:!0,icloud_lowercase:!0,icloud_remove_subaddress:!0},o=["icloud.com","me.com"],s=["hotmail.at","hotmail.be","hotmail.ca","hotmail.cl","hotmail.co.il","hotmail.co.nz","hotmail.co.th","hotmail.co.uk","hotmail.com","hotmail.com.ar","hotmail.com.au","hotmail.com.br","hotmail.com.gr","hotmail.com.mx","hotmail.com.pe","hotmail.com.tr","hotmail.com.vn","hotmail.cz","hotmail.de","hotmail.dk","hotmail.es","hotmail.fr","hotmail.hu","hotmail.id","hotmail.ie","hotmail.in","hotmail.it","hotmail.jp","hotmail.kr","hotmail.lv","hotmail.my","hotmail.ph","hotmail.pt","hotmail.sa","hotmail.sg","hotmail.sk","live.be","live.co.uk","live.com","live.com.ar","live.com.mx","live.de","live.es","live.eu","live.fr","live.it","live.nl","msn.com","outlook.at","outlook.be","outlook.cl","outlook.co.il","outlook.co.nz","outlook.co.th","outlook.com","outlook.com.ar","outlook.com.au","outlook.com.br","outlook.com.gr","outlook.com.pe","outlook.com.tr","outlook.com.vn","outlook.cz","outlook.de","outlook.dk","outlook.es","outlook.fr","outlook.hu","outlook.id","outlook.ie","outlook.in","outlook.it","outlook.jp","outlook.kr","outlook.lv","outlook.my","outlook.ph","outlook.pt","outlook.sa","outlook.sg","outlook.sk","passport.com"],a=["rocketmail.com","yahoo.ca","yahoo.co.uk","yahoo.com","yahoo.de","yahoo.fr","yahoo.in","yahoo.it","ymail.com"];e.exports=t.default},function(e,t,r){"use strict";var n=r(29),i=r(7),o=r(36),s=r(344),a=r(22),c=a.StorageServiceClientConstants,u=a.ConnectionStringKeys,l=r(200),p=r(63),d=r(345),h=s.setting(u.USE_DEVELOPMENT_STORAGE_NAME,!0),f=s.settingWithFunc(u.DEVELOPMENT_STORAGE_PROXY_URI_NAME,l.isValidUri),m=s.setting(u.DEFAULT_ENDPOINTS_PROTOCOL_NAME,"http","https"),g=s.setting(u.ACCOUNT_NAME_NAME),y=s.settingWithFunc(u.ACCOUNT_KEY_NAME,l.isBase64Encoded),v=s.settingWithFunc(u.SHARED_ACCESS_SIGNATURE_NAME,n.isString),b=s.settingWithFunc("token",function(e){return e instanceof d}),_=s.settingWithFunc(u.BLOB_ENDPOINT_NAME,l.isValidHost),w=s.settingWithFunc(u.QUEUE_ENDPOINT_NAME,l.isValidHost),E=s.settingWithFunc(u.TABLE_ENDPOINT_NAME,l.isValidHost),S=s.settingWithFunc(u.FILE_ENDPOINT_NAME,l.isValidHost),C=s.settingWithFunc(u.ENDPOINT_SUFFIX_NAME,l.isValidHost),x=[u.USE_DEVELOPMENT_STORAGE_NAME,u.DEVELOPMENT_STORAGE_PROXY_URI_NAME,u.DEFAULT_ENDPOINTS_PROTOCOL_NAME,u.ACCOUNT_NAME_NAME,u.ACCOUNT_KEY_NAME,u.SHARED_ACCESS_SIGNATURE_NAME,u.BLOB_ENDPOINT_NAME,u.QUEUE_ENDPOINT_NAME,u.TABLE_ENDPOINT_NAME,u.FILE_ENDPOINT_NAME,u.ENDPOINT_SUFFIX_NAME];function StorageServiceSettings(e,t,r,n,i,o,s,a,c){this._name=e,this._key=t,r&&"?"===r[0]?this._sasToken=r.slice(1):this._sasToken=r,this._blobEndpoint=n,this._queueEndpoint=i,this._tableEndpoint=o,this._fileEndpoint=s,this._usePathStyleUri=a||!1,this._token=c}StorageServiceSettings.createFromConnectionString=function(e){var t=s.parseAndValidateKeys(e,x);try{return StorageServiceSettings.createFromSettings(t)}catch(t){if(!(t instanceof s.NoMatchError))throw t;s.noMatchConnectionString(e)}},StorageServiceSettings.createExplicitly=function(e,t,r,n,i,a){var c={};function addIfNotNullOrEmpty(e,t){("string"!=typeof t||o.stringIsEmpty(t))&&("object"!=typeof t||o.objectIsNull(t))||(c[e]=t)}return r?(addIfNotNullOrEmpty("blobendpoint",r),addIfNotNullOrEmpty("tableendpoint",r),addIfNotNullOrEmpty("queueendpoint",r),addIfNotNullOrEmpty("fileendpoint",r)):addIfNotNullOrEmpty("defaultendpointsprotocol",s.DEFAULT_PROTOCOL.split(":",1)[0]),addIfNotNullOrEmpty("accountname",e),addIfNotNullOrEmpty("accountkey",t),addIfNotNullOrEmpty("sharedaccesssignature",n),addIfNotNullOrEmpty("endpointsuffix",i),addIfNotNullOrEmpty("token",a),StorageServiceSettings.createFromSettings(c)},StorageServiceSettings.createFromEnvironment=function(){if(process.env[c.EnvironmentVariables.EMULATED])return StorageServiceSettings.getDevelopmentStorageAccountSettings();var e=process.env[c.EnvironmentVariables.AZURE_STORAGE_CONNECTION_STRING];if(e)return StorageServiceSettings.createFromConnectionString(e);var t=process.env[c.EnvironmentVariables.AZURE_STORAGE_ACCOUNT],r=process.env[c.EnvironmentVariables.AZURE_STORAGE_ACCESS_KEY];if(t&&r)return StorageServiceSettings.createExplicitly(t,r,null,null,null);throw new Error(p.NO_CREDENTIALS_PROVIDED)},StorageServiceSettings.createFromSettings=function(e){var t=s.matchedSpecification(e,s.allRequired(h),s.optional(f));if(t){var r=o.tryGetValueInsensitive(u.DEVELOPMENT_STORAGE_PROXY_URI_NAME,e);return this.getDevelopmentStorageAccountSettings(r)}return(t=s.matchedSpecification(e,s.allRequired(m,g,y),s.optional(_,w,E,S,C)))?this._createStorageServiceSettings(e):(t=s.matchedSpecification(e,s.allRequired(g,y),s.atLeastOne(_,w,E,S,C)))?this._createStorageServiceSettings(e):(t=s.matchedSpecification(e,s.allRequired(v),s.atLeastOne(_,w,E,S,C)))?this._createStorageServiceSettings(e):(t=s.matchedSpecification(e,s.allRequired(_),s.optional(S,w,E,C)))?this._createStorageServiceSettings(e):(t=s.matchedSpecification(e,s.allRequired(b),s.atLeastOne(_,w,E,S)))?this._createStorageServiceSettings(e):void s.noMatchSettings(e)},StorageServiceSettings.getDevelopmentStorageAccountSettings=function(e){e||(e=c.DEV_STORE_URI);var t=i.parse(e),r=t.protocol+"//"+t.host,n={primaryHost:r+":10000/"+c.DEVSTORE_STORAGE_ACCOUNT,secondaryHost:r+":10000/"+c.DEVSTORE_STORAGE_ACCOUNT+"-secondary"},o={primaryHost:r+":10001/"+c.DEVSTORE_STORAGE_ACCOUNT,secondaryHost:r+":10001/"+c.DEVSTORE_STORAGE_ACCOUNT+"-secondary"},s={primaryHost:r+":10002/"+c.DEVSTORE_STORAGE_ACCOUNT,secondaryHost:r+":10002/"+c.DEVSTORE_STORAGE_ACCOUNT+"-secondary"};return new StorageServiceSettings(c.DEVSTORE_STORAGE_ACCOUNT,c.DEVSTORE_STORAGE_ACCESS_KEY,null,n,o,s,null,!0)},StorageServiceSettings._createStorageServiceSettings=function(e){var t=function(e,t,r,o){var s;return e&&((s={}).primaryHost=n.isString(e)?e:e.primaryHost,s.secondaryHost=n.isString(e)?void 0:e.secondaryHost),r&&t&&o&&((s=s||{}).primaryHost=s.primaryHost?s.primaryHost:i.format({protocol:r,hostname:t+"."+o}),s.secondaryHost=s.secondaryHost?s.secondaryHost:i.format({protocol:r,hostname:t+"-secondary."+o})),s},r=o.tryGetValueInsensitive(u.DEFAULT_ENDPOINTS_PROTOCOL_NAME,e),s=o.tryGetValueInsensitive(u.ACCOUNT_NAME_NAME,e),a=o.tryGetValueInsensitive(u.ACCOUNT_KEY_NAME,e),l=o.tryGetValueInsensitive(u.SHARED_ACCESS_SIGNATURE_NAME,e),p=o.tryGetValueInsensitive(u.ENDPOINT_SUFFIX_NAME,e),d=o.tryGetValueInsensitive("token",e);return new StorageServiceSettings(s,a,l,t(o.tryGetValueInsensitive(u.BLOB_ENDPOINT_NAME,e),s,r,p?"blob."+p:c.CLOUD_BLOB_HOST),t(o.tryGetValueInsensitive(u.QUEUE_ENDPOINT_NAME,e),s,r,p?"queue."+p:c.CLOUD_QUEUE_HOST),t(o.tryGetValueInsensitive(u.TABLE_ENDPOINT_NAME,e),s,r,p?"table."+p:c.CLOUD_TABLE_HOST),t(o.tryGetValueInsensitive(u.FILE_ENDPOINT_NAME,e),s,r,p?"file."+p:c.CLOUD_FILE_HOST),d)},StorageServiceSettings.validKeys=x,e.exports=StorageServiceSettings},function(e,t,r){var n=r(22).HeaderConstants;function TokenSigner(e){this.tokenCredential=e}TokenSigner.prototype.signRequest=function(e,t){e.withHeader(n.AUTHORIZATION,"Bearer "+this.tokenCredential.get()),t(null)},e.exports=TokenSigner},function(e,t){e.exports.parse=function(e){var t={};return void 0!==e.GeoReplication&&(t.GeoReplication={},void 0!==e.GeoReplication.Status&&(t.GeoReplication.Status=e.GeoReplication.Status),void 0!==e.GeoReplication.LastSyncTime&&""!==e.GeoReplication.LastSyncTime&&(t.GeoReplication.LastSyncTime=new Date(e.GeoReplication.LastSyncTime))),t}},function(e,t,r){var n=r(29),i=r(140),o=r(36),s=r(350),a=r(22).AclConstants;(t=e.exports).serialize=function(e){var t=i.create(a.SIGNED_IDENTIFIERS_ELEMENT,{version:"1.0",encoding:"utf-8"}),r=Object.keys(e);return r.length>0&&r.forEach(function(r){var i=e[r];if(t=t.ele(a.SIGNED_IDENTIFIER_ELEMENT).ele(a.ID).txt(r).up().ele(a.ACCESS_POLICY),i.Start){var o=i.Start;n.isDate(o)||(o=new Date(o)),o=s.format(o),t=t.ele(a.START).txt(o).up()}if(i.Expiry){var c=i.Expiry;n.isDate(c)||(c=new Date(c)),c=s.format(c),t=t.ele(a.EXPIRY).txt(c).up()}i.Permissions&&(t=t.ele(a.PERMISSION).txt(i.Permissions).up()),t=t.up().up()}),t.doc().toString()},t.parse=function(e){var t={};return(e=o.tryGetValueChain(e,["SignedIdentifiers","SignedIdentifier"]))&&(n.isArray(e)||(e=[e]),e.forEach(function(e){var r={};e.AccessPolicy&&(e.AccessPolicy.Start&&(r.Start=s.parse(e.AccessPolicy.Start)),e.AccessPolicy.Expiry&&(r.Expiry=s.parse(e.AccessPolicy.Expiry)),e.AccessPolicy.Permission&&(r.Permissions=e.AccessPolicy.Permission)),t[e.Id]=r})),t}},function(e,t,r){"use strict";var n=r(204);function LinearRetryPolicyFilter(e,t){this.retryCount=e||LinearRetryPolicyFilter.DEFAULT_CLIENT_RETRY_COUNT,this.retryInterval=t||LinearRetryPolicyFilter.DEFAULT_CLIENT_RETRY_INTERVAL}LinearRetryPolicyFilter.DEFAULT_CLIENT_RETRY_INTERVAL=3e4,LinearRetryPolicyFilter.DEFAULT_CLIENT_RETRY_COUNT=3,LinearRetryPolicyFilter.prototype.shouldRetry=function(e,t){return(t&&t.retryContext?t.retryContext:{}).retryInterval=this.retryInterval,n._shouldRetryOnError(e,t)},LinearRetryPolicyFilter.prototype.handle=function(e,t){n._handle(this,e,t)},e.exports=LinearRetryPolicyFilter},function(e,t,r){"use strict";var n=r(204);function ExponentialRetryPolicyFilter(e,t,r,n){this.retryCount=e||ExponentialRetryPolicyFilter.DEFAULT_CLIENT_RETRY_COUNT,this.retryInterval=t||ExponentialRetryPolicyFilter.DEFAULT_CLIENT_RETRY_INTERVAL,this.minRetryInterval=r||ExponentialRetryPolicyFilter.DEFAULT_CLIENT_MIN_RETRY_INTERVAL,this.maxRetryInterval=n||ExponentialRetryPolicyFilter.DEFAULT_CLIENT_MAX_RETRY_INTERVAL}ExponentialRetryPolicyFilter.DEFAULT_CLIENT_RETRY_INTERVAL=3e4,ExponentialRetryPolicyFilter.DEFAULT_CLIENT_RETRY_COUNT=3,ExponentialRetryPolicyFilter.DEFAULT_CLIENT_MAX_RETRY_INTERVAL=9e4,ExponentialRetryPolicyFilter.DEFAULT_CLIENT_MIN_RETRY_INTERVAL=3e3,ExponentialRetryPolicyFilter.prototype.shouldRetry=function(e,t){var r=t&&t.retryContext?t.retryContext:{},i=Math.pow(2,r.retryCount)-1;return i*=.8*this.retryInterval+Math.floor(Math.random()*(1.2*this.retryInterval-.8*this.retryInterval)),r.retryInterval=Math.min(this.minRetryInterval+i,this.maxRetryInterval),n._shouldRetryOnError(e,t)},ExponentialRetryPolicyFilter.prototype.handle=function(e,t){n._handle(this,e,t)},e.exports=ExponentialRetryPolicyFilter},function(e,t,r){var n=r(1),i=r(23),o=r(21),s=r(5).EventEmitter,a=r(17),c=r(36),u=r(188),l=r(22),p=r(76).ArgumentError,d=l.BlobConstants.DEFAULT_WRITE_BLOCK_SIZE_IN_BYTES,h=l.BlobConstants.DEFAULT_CRITICAL_MEMORY_LIMITATION_32_IN_BYTES,f=l.BlobConstants.DEFAULT_CRITICAL_MEMORY_LIMITATION_BROWSER_IN_BYTES,m=l.BlobConstants.DEFAULT_MINIMUM_MEMORY_USAGE_BROWSER_IN_BYTES,g=5,y=a.totalmem(),v=.1*y,b=c.getNodeVersion();function BatchOperation(e,t){t||(t={}),this.name=e,this.logger=t.logger||new u(u.LogLevels.INFO),this.operationMemoryUsage=t.operationMemoryUsage||d,this.callbackInOrder=!0===t.callbackInOrder,this.callInOrder=!0===t.callInOrder,this._currentOperationId=this.callbackInOrder?1:-1,this.concurrency=g,this.enableReuseSocket=(b.major>0||b.minor>=10)&&t.enableReuseSocket,this._emitter=new s,this._enableComplete=!1,this._ended=!1,this._error=null,this._paused=!1,this._totalOperation=0,this._activeOperation=0,this._queuedOperation=0,this._operations=[]}var _={INITED:"inited",QUEUED:"queued",RUNNING:"running",COMPLETE:"complete",CALLBACK:"callback",ERROR:"error"};BatchOperation.OperationState=_,BatchOperation.prototype.setConcurrency=function(e){e&&(this.concurrency=e,i.Agent.maxSockets=this.concurrency,o.Agent.maxSockets=this.concurrency)},BatchOperation.prototype.IsWorkloadHeavy=function(){var e=1;return this.enableReuseSocket&&!this.callInOrder&&(e=2),this._activeOperation>=e*this.concurrency||this._isLowMemory()},BatchOperation.prototype._getApproximateMemoryUsage=function(){return(c.isBrowser()?m:process.memoryUsage().rss)+this._queuedOperation*this.operationMemoryUsage},BatchOperation.prototype._isLowMemory=function(){var e=this._getApproximateMemoryUsage();return a.freemem()<v||this._activeOperation>=this.concurrency&&e>.5*y||c.is32()&&e>h||c.isBrowser()&&e>f},BatchOperation.prototype.addOperation=function(e){return this._operations.push(e),e.status=_.QUEUED,e.operationId=++this._totalOperation,this._queuedOperation++,this.logger.debug(n.format("Add operation %d into batch operation %s. Active: %s; Queued: %s",e.operationId,this.name,this._activeOperation,this._queuedOperation)),this._runOperation(e),this.IsWorkloadHeavy()},BatchOperation.prototype.enableComplete=function(){this._enableComplete=!0,this.logger.debug(n.format("Enable batch operation %s complete",this.name)),this._tryEmitEndEvent()},BatchOperation.prototype.pause=function(){this._paused=!0},BatchOperation.prototype.resume=function(){this._paused&&(this._paused=!1,this._fireOperationUserCallback())},BatchOperation.prototype.on=function(e,t){this._ended&&"end"===e?t():this._emitter.on(e,t)},BatchOperation.prototype._runOperation=function(e){this.logger.debug(n.format("Operation %d start to run",e.operationId));var t=this.getBatchOperationCallback(e);this._error?t(this._error):e.run(t),this._activeOperation++},BatchOperation.prototype.getBatchOperationCallback=function(e){var t=this;return function(r){if(t._queuedOperation--,r?(e.status=_.ERROR,t.logger.debug(n.format("Operation %d failed. Error %s",e.operationId,r)),t._error=r):(e.status=_.CALLBACK,t.logger.debug(n.format("Operation %d succeed",e.operationId))),e._callbackArguments=arguments,t._paused)e.status=_.CALLBACK,t.logger.debug(n.format("Batch operation paused and Operation %d wait for firing callback",e.operationId));else if(t.callbackInOrder)if(e.status=_.CALLBACK,t._currentOperationId===e.operationId)t._fireOperationUserCallback(e);else{if(t._currentOperationId>e.operationId)throw new Error("Debug error: current callback operation id cannot be larger than operation id");t.logger.debug(n.format("Operation %d is waiting for firing callback %s",e.operationId,t._currentOperationId))}else t._fireOperationUserCallback(e);t._tryEmitDrainEvent(),e=null,t=null}},BatchOperation.prototype._fireOperationUserCallback=function(e){var t=this._getCallbackOperationIndex();e||-1==t||(e=this._operations[t]),e&&!this._paused?(e._userCallback&&(this.logger.debug(n.format("Fire user call back for operation %d",e.operationId)),e._fireUserCallback()),this._operations.splice(t,1),this._activeOperation--,e.status=_.COMPLETE,t=e=null,this.callbackInOrder&&this._currentOperationId++,this._fireOperationUserCallback()):this._paused?this._tryEmitDrainEvent():this._tryEmitEndEvent()},BatchOperation.prototype._tryEmitEndEvent=function(){return this._enableComplete&&0===this._activeOperation&&0===this._operations.length?(this._ended=!0,this.logger.debug(n.format("Batch operation %s emits the end event",this.name)),this._emitter.emit("end",this._error,null),!0):(this._tryEmitDrainEvent(),!1)},BatchOperation.prototype._tryEmitDrainEvent=function(){return!!this._emitter&&((!this.IsWorkloadHeavy()||this._activeOperation<this.concurrency)&&(this._emitter.emit("drain"),!0))},BatchOperation.prototype._getCallbackOperationIndex=function(){for(var e=null,t=0;t<this._operations.length;t++)if(e=this._operations[t],this.callbackInOrder){if(e.operationId==this._currentOperationId)return e.status===_.CALLBACK?t:-1}else if(e.status===_.CALLBACK)return t;return-1},BatchOperation.noOperation=function(e){e()},BatchOperation.RestOperation=function RestOperation(e,t){this.status=_.Inited,this.operationId=-1,this._callbackArguments=null,this._userCallback=arguments[arguments.length-1];var r=arguments.length;c.objectIsFunction(this._userCallback)?r--:this._userCallback=null;var i=Array.prototype.slice.call(arguments).slice(2,r);this.run=function(r){var o=e[t];if(!o)throw new p("operation",n.format("Unknown operation %s in serviceclient",t));r||(r=this._userCallback),i.push(r),this.status=_.RUNNING,o.apply(e,i),i=t=null},this._fireUserCallback=function(){this._userCallback&&this._userCallback.apply(null,this._callbackArguments)}},BatchOperation.CommonOperation=function CommonOperation(e,t){this.status=_.Inited,this.operationId=-1,this._callbackArguments=null;var r=2;c.objectIsFunction(t)?this._userCallback=t:(this._userCallback=null,r=1);var n=Array.prototype.slice.call(arguments).slice(r);this.run=function(t){t||(t=this._userCallback),n.push(t),this.status=_.RUNNING,e.apply(null,n),n=e=null},this._fireUserCallback=function(){this._userCallback&&this._userCallback.apply(null,this._callbackArguments),this._userCallback=this._callbackArguments=null}},e.exports=BatchOperation},function(e,t){function ChunkAllocator(e,t){this._pool=[],this._inuse=0,this._chunkSize=e,this._maxCount=t||10,this._extendMemoryPool()}ChunkAllocator.prototype.getBuffer=function(e){var t=this._getBufferFromPool(e);return null===t&&(t=Buffer.alloc(e)),this._inuse++,t},ChunkAllocator.prototype._getBufferFromPool=function(e){return e!==this._chunkSize?null:(0===this._pool.length&&this._extendMemoryPool(),0!==this._pool.length?this._pool.pop():null)},ChunkAllocator.prototype._extendMemoryPool=function(){var e=this._pool.length+this._inuse;if(!(e>=this._maxCount))for(var t=(Math.min(2*e,this._maxCount)||1)-e,r=0;r<t;r++){var n=Buffer.alloc(this._chunkSize);this._pool.push(n)}},ChunkAllocator.prototype.releaseBuffer=function(e){e.length===this._chunkSize?(this._pool.length<this._maxCount?this._pool.push(e):e=null,this._inuse--,this._inuse<0&&(this._inuse=0)):e=null},ChunkAllocator.prototype.destroy=function(){this._pool=[],this._inuse=0},e.exports=ChunkAllocator},function(e,t,r){var n=r(351),i=r(5).EventEmitter,o=r(1),s=r(36);function ChunkStreamWithStream(e,t){n.call(this,t),e.pause(),this._stream=e,this._stream.on("end",this.end.bind(this))}o.inherits(ChunkStreamWithStream,n),ChunkStreamWithStream.prototype.on=function(e,t){return"end"===e&&this._streamEnded?t():i.prototype.on.call(this,e,t),"data"===e&&(this._isStreamOpened||(this._isStreamOpened=!0,this._stream.on("data",this._buildChunk.bind(this))),void 0===this._paused&&this._stream.resume()),this},ChunkStreamWithStream.prototype.stop=function(e,t,r){s.objectIsFunction(this._stream.destroy)?this._stream.destroy():this.pause(),n.prototype.end.call(this,e,t,r)},ChunkStreamWithStream.prototype.pause=function(){n.prototype.pause.call(this),this._stream.pause()},ChunkStreamWithStream.prototype.resume=function(){n.prototype.resume.call(this),this._stream.resume()},ChunkStreamWithStream.prototype.finish=function(){n.prototype.finish.call(this),this._stream.emit.call(this._stream,"finish")},ChunkStreamWithStream.prototype.destroy=function(){n.prototype.destroy.call(this),this._stream.emit.call(this._stream,"close")},e.exports=ChunkStreamWithStream},function(e,t,r){var n=r(5),i=r(1),o=r(36);function SpeedSummary(e){this.name=e,this._startTime=Date.now(),this._timeWindowInSeconds=10,this._timeWindow=1e3*this._timeWindowInSeconds,this._totalWindowSize=0,this._speedTracks=new Array(this._timeWindowInSeconds),this._speedTrackPtr=0,this.totalSize=void 0,this.completeSize=0}function toHumanReadableSize(e,t){if(!e)return"0B";(!t||t<=0)&&(t=2);var r=Math.floor(Math.log(e)/Math.log(1024));return(e/Math.pow(1024,r)).toFixed(t)+["B","KB","MB","GB","TB","PB","EB","ZB","YB"][r]}i.inherits(SpeedSummary,n),SpeedSummary.prototype.getElapsedSeconds=function(e){var t=Date.now(),r=parseInt((t-this._startTime)/1e3,10);if(!1!==e){var n=parseInt(r%60,10);r/=60;var s=Math.floor(r%60);r/=60;var a=Math.floor(r);r=i.format("%s:%s:%s",o.zeroPaddingString(a,2),o.zeroPaddingString(s,2),o.zeroPaddingString(n,2))}return r},SpeedSummary.prototype.getCompletePercent=function(e){return this.totalSize?((!e||e<=0)&&(e=1),(100*this.completeSize/this.totalSize).toFixed(e)):0===this.totalSize?100:0},SpeedSummary.prototype.getAverageSpeed=function(e){var t=this.getElapsedSeconds(!1);return this._getInternalSpeed(this.completeSize,t,e)},SpeedSummary.prototype.getSpeed=function(e){this._refreshSpeedTracks();var t=this.getElapsedSeconds(!1);return t=Math.min(t,this._timeWindowInSeconds),this._getInternalSpeed(this._totalWindowSize,t,e)},SpeedSummary.prototype._getInternalSpeed=function(e,t,r){t<=0&&(t=1);var n=e/t;return!1!==r&&(n=toHumanReadableSize(n)+"/s"),n},SpeedSummary.prototype._refreshSpeedTracks=function(){for(var e=Date.now(),t=0,r=0;r<this._speedTracks.length;r++)this._speedTracks[r]&&(e-this._speedTracks[r].timeStamp<=this._timeWindow?t+=this._speedTracks[r].size:this._speedTracks[r]=null);this._totalWindowSize=t},SpeedSummary.prototype.increment=function(e){this.completeSize+=e,this._recordSpeed(e);var t=this;return process.nextTick(function(){t.emit("progress")}),this.completeSize},SpeedSummary.prototype._recordSpeed=function(e){var t=Date.now(),r=this._speedTracks[this._speedTrackPtr];if(r){var n=t-r.timeStamp;n>this._timeWindow?(r.timeStamp=t,r.size=e):n<=1e3?r.size+=e:(this._speedTrackPtr=(this._speedTrackPtr+1)%this._timeWindowInSeconds,this._recordSpeed(e))}else r={timeStamp:t,size:e},this._speedTracks[this._speedTrackPtr]=r},SpeedSummary.prototype.getAutoIncrementFunction=function(e){var t=this;return function(r,n){if(!r){var i=0;i=!n&&0!==n||isNaN(n)?e:n,t.increment(i)}}},SpeedSummary.prototype.getTotalSize=function(e){return!1!==e?toHumanReadableSize(this.totalSize):this.totalSize},SpeedSummary.prototype.getCompleteSize=function(e){return!1!==e?toHumanReadableSize(this.completeSize):this.completeSize},e.exports=SpeedSummary},function(e,t){t.daysFromNow=function(e){var t=new Date;return t.setDate(t.getDate()+e),t},t.hoursFromNow=function(e){var t=new Date;return t.setHours(t.getHours()+e),t},t.minutesFromNow=function(e){var t=new Date;return t.setMinutes(t.getMinutes()+e),t},t.secondsFromNow=function(e){var t=new Date;return t.setSeconds(t.getSeconds()+e),t}},function(e,t,r){"use strict";(t=e.exports).generateEmptyCondition=function(){return{}},t.generateIfNotExistsCondition=function(){var e={EtagNonMatch:"*"};return e},t.generateIfExistsCondition=function(){var e={EtagMatch:"*"};return e},t.generateIfNoneMatchCondition=function(e){var t={};return t.EtagNonMatch=e,t},t.generateIfMatchCondition=function(e){var t={};return t.EtagMatch=e,t},t.generateIfModifiedSinceCondition=function(e){var t={};return t.DateModifedSince=e,t},t.generateIfNotModifiedSinceCondition=function(e){var t={};return t.DateUnModifiedSince=e,t},t.generateSequenceNumberEqualCondition=function(e){var t={};return t.SequenceNumberEqual=e,t},t.generateSequenceNumberLessThanCondition=function(e){var t={};return t.SequenceNumberLessThan=e,t},t.generateSequenceNumberLessThanOrEqualCondition=function(e){var t={};return t.SequenceNumberLessThanOrEqual=e,t}},function(e,t,r){var n=r(1),i=r(20),o=i.SharedKey,s=i.util,a=i.Constants,c=a.HeaderConstants,u=a.QueryStringConstants;function SharedKeyTable(e,t,r){SharedKeyTable.super_.call(this,e,t,r)}n.inherits(SharedKeyTable,o),SharedKeyTable.prototype.signRequest=function(e,t){var r=function(e){return s.objectIsNull(e)?"\n":e+"\n"},n=e.method+"\n"+r(e.headers[c.CONTENT_MD5])+r(e.headers[c.CONTENT_TYPE])+r(e.headers[c.MS_DATE])+this._getCanonicalizedResource(e),i=this.signer.sign(n);e.withHeader(c.AUTHORIZATION,"SharedKey "+this.storageAccount+":"+i),t(null)},SharedKeyTable.prototype._getCanonicalizedResource=function(e){var t="/";e.path&&(t=e.path);var r="/"+this.storageAccount+t,n=e.queryString;return n[u.COMP]&&(r+="?comp="+n[u.COMP]),r},e.exports=SharedKeyTable},function(e,t,r){var n=r(353);function TableResult(e){this.name=e}TableResult.serialize=function(e){return JSON.stringify({TableName:e})},TableResult.parse=function(e){var t=null;return e.body&&(t=n.parseJsonTables(e.body)),t},e.exports=TableResult},function(e,t,r){var n=r(20),i=n.util,o=r(84),s=n.StorageServiceClient,a=n.WebResource,c=n.Constants,u=c.HeaderConstants,l=c.TableConstants,p=r(352),d=r(205);function BatchResult(e,t,r){this.tableService=e,this.table=t,this.operations=r,this.batchBoundary="batch_"+BatchResult._getBoundary(),this.changesetBoundary="changeset_"+BatchResult._getBoundary()}BatchResult._getBoundary=function(){return(new o).createMd5Hash().update(""+(new Date).getTime()).digest("hex")},BatchResult.prototype.constructWebResource=function(){var e=a.post("$batch").withRawResponse(!0);return e.withHeader(u.CONTENT_TYPE,'multipart/mixed; charset="utf-8"; boundary='+this.batchBoundary),e.withHeader(u.DATA_SERVICE_VERSION,"3.0;"),e.withHeader(u.MAX_DATA_SERVICE_VERSION,"3.0;NetFx"),e},BatchResult.prototype.serialize=function(){var e="--"+this.batchBoundary+"\n";if(1===this.operations.length&&this.operations[0].type===l.Operations.RETRIEVE)e+=u.CONTENT_TYPE+": application/http\n",e+=u.CONTENT_TRANSFER_ENCODING+": binary\n\n",e+=this._serializeOperation(this.operations[0]);else{e+=u.CONTENT_TYPE+': multipart/mixed;charset="utf-8";boundary='+this.changesetBoundary+"\n\n";for(var t=0;t<this.operations.length;t++)e+="--"+this.changesetBoundary+"\n",e+=u.CONTENT_TYPE+": application/http\n",e+=u.CONTENT_TRANSFER_ENCODING+": binary\n\n",e+=this._serializeOperation(this.operations[t],t)+"\n";e+="--"+this.changesetBoundary+"--\n"}return e+="--"+this.batchBoundary+"--"},BatchResult.prototype._serializeOperation=function(e,t){e.options.payloadFormat=e.options.payloadFormat||this.tableService.defaultPayloadFormat;var r=p.constructEntityWebResource(e.type,this.table,e.entity,e.options);t&&(r.headers[u.CONTENT_ID]=t);var n=r.headers[u.CONTENT_TYPE];n&&(i.stringEndsWith(n,";")||(r.headers[u.CONTENT_TYPE]+=";"),r.headers[u.CONTENT_TYPE]+="type=entry"),this.tableService._setRequestUrl(r);var o=r.method+" "+r.uri+" HTTP/1.1\n";return Object.keys(r.headers).forEach(function(e){o+=e+": "+r.headers[e]+"\n"}),o+="\n",o+=r.body||""},BatchResult.prototype.parse=function(e){var t=null;if(e&&e.response&&e.response.body&&"string"==typeof e.response.body){t=[];var r=e.response.body.split(l.CHANGESET_DELIMITER);1===r.length&&(r=e.response.body.split(l.BATCH_DELIMITER));var n=this;r.forEach(function(e){var r=e.indexOf("HTTP/1.1");if(-1!==r){e=e.substring(r);var i=n._parseOperation(e);t.push(i)}})}return t},BatchResult.prototype._parseOperation=function(e){var t={error:null,response:{}},r=e.split("\r\n");if(r.length>0){var n=r.shift().split(" ");n.length>=2&&(t.response.statusCode=parseInt(n[1]),t.response.isSuccessful=a.validResponse(t.response.statusCode)),t.response.headers={},t.response.body="";var i=!1;if(r.forEach(function(e){if(""!==e||i)if(i)t.response.body+=e;else{var r=e.indexOf(":");-1!==r&&(t.response.headers[e.substring(0,r).trim().toLowerCase()]=e.substring(r+1).trim())}else i=!0}),s._parseResponse(t.response,this.tableService.xml2jsSettings),t.response.isSuccessful||(t.error=s._normalizeError(t.response.body,t.response)),!t.error){var o,c,l=t.response.headers[u.CONTENT_ID]||0;if(l&&this.operations[l]){var p=this.operations[l].options;o=p.propertyResolver,c=p.entityResolver}t.entity=d.parseEntity(t.response,o,c)}}return t},e.exports=BatchResult},function(e,t,r){var n=r(39),i=r(20),o=i.SR,s=i.validate,a=i.Constants.TableConstants;function TableBatch(){this.operations=[],this.pk=null,this.retrieve=!1}TableBatch.prototype.clear=function(){this.operations=[]},TableBatch.prototype.hasOperations=function(){return this.operations.length>0},TableBatch.prototype.size=function(){return this.operations.length},TableBatch.prototype.retrieveEntity=function(e,t,r){var n={PartitionKey:{_:e,$:"Edm.String"},RowKey:{_:t,$:"Edm.String"}};this.addOperation(a.Operations.RETRIEVE,n,r)},TableBatch.prototype.insertEntity=function(e,t){this.addOperation(a.Operations.INSERT,e,t)},TableBatch.prototype.deleteEntity=function(e){this.addOperation(a.Operations.DELETE,e)},TableBatch.prototype.mergeEntity=function(e){this.addOperation(a.Operations.MERGE,e)},TableBatch.prototype.replaceEntity=function(e){this.addOperation(a.Operations.REPLACE,e)},TableBatch.prototype.insertOrReplaceEntity=function(e){this.addOperation(a.Operations.INSERT_OR_REPLACE,e)},TableBatch.prototype.insertOrMergeEntity=function(e){this.addOperation(a.Operations.INSERT_OR_MERGE,e)},TableBatch.prototype.addOperation=function(e,t,r){if(s.validateArgs("addOperation",function(e){e.object(t,"entity"),e.object(t.PartitionKey,"entity.PartitionKey"),e.object(t.RowKey,"entity.RowKey"),e.stringAllowEmpty(t.PartitionKey._,"entity.PartitionKey._"),e.stringAllowEmpty(t.RowKey._,"entity.RowKey._")}),this.operations.length>=100)throw new Error(o.BATCH_TOO_LARGE);if(e===a.Operations.RETRIEVE){if(this.hasOperations())throw new Error(o.BATCH_ONE_RETRIEVE);this.retrieve=!0}else if(this.retrieve)throw new Error(o.BATCH_ONE_RETRIEVE);if(this.hasOperations()){if(t.PartitionKey._!==this.pk)throw new Error(o.BATCH_ONE_PARTITION_KEY)}else this.pk=t.PartitionKey._;var i=n(!0,{},r);this.operations.push({type:e,entity:t,options:i})},TableBatch.prototype.getOperation=function(e){return this.operations[e]},TableBatch.prototype.removeOperation=function(e){var t=this.operations.splice(e,1)[0];return this.hasOperations()||(this.pk=null,this.retrieve=!1),t},e.exports=TableBatch},function(e,t,r){var n=r(206),i=r(831),o=r(39),s=r(11),a=r(839),c=n.util,u=n.Constants,l=n.FileReadStream,p=n.SpeedSummary,d=n.validate,h=u.BlobConstants;i.prototype.getBlobToLocalFile=function(e,t,r,n,i){var o;return c.normalizeArgs(n,i,function(e,t){o=e,i=t}),d.validateArgs("getBlobToLocalFile",function(n){n.string(e,"container"),n.string(t,"blob"),n.string(r,"localFileName"),n.containerNameIsValid(e),n.callback(i)}),this._getBlobToLocalFile(e,t,r,o,i)},i.prototype.createPageBlobFromLocalFile=function(e,t,r,n,i){return this._createBlobFromLocalFile(e,t,h.BlobTypes.PAGE,r,n,i)},i.prototype.createBlockBlobFromLocalFile=function(e,t,r,n,i){return this._createBlobFromLocalFile(e,t,h.BlobTypes.BLOCK,r,n,i)},i.prototype.createAppendBlobFromLocalFile=function(e,t,r,n,i){return this._createBlobFromLocalFile(e,t,h.BlobTypes.APPEND,r,n,i)},i.prototype.appendFromLocalFile=function(e,t,r,n,i){var a;c.normalizeArgs(n,i,function(e,t){a=e,i=t}),d.validateArgs("appendFromLocalFile",function(n){n.string(e,"container"),n.string(t,"blob"),n.containerNameIsValid(e),n.string(r,"localFileName"),n.callback(i)});var u=o(!0,{},a);u.speedSummary=u.speedSummary||new p(t);var f=this;return s.stat(r,function(n,o){if(n)i(n);else{var s=new l(r,{calcContentMd5:u.storeBlobContentMD5});f._uploadBlobFromStream(!1,e,t,h.BlobTypes.APPEND,s,o.size,u,function(e,t,r){c.objectIsFunction(s.destroy)&&s.destroy(),i(e,t,r)})}}),u.speedSummary},i.prototype._createBlobFromLocalFile=function(e,t,r,n,i,u){var h;c.normalizeArgs(i,u,function(e,t){h=e,u=t}),d.validateArgs("_createBlobFromLocalFile",function(i){i.string(e,"container"),i.string(t,"blob"),i.containerNameIsValid(e),i.blobTypeIsValid(r),i.string(n,"localFileName"),i.callback(u)});var f=o(!0,{},h);f.speedSummary=f.speedSummary||new p(t);var m=this,g=0,y=function(i,o,s){if(i)u(i,o,s);else{void 0===c.tryGetValueChain(f,["contentSettings","contentType"],void 0)&&c.setObjectInnerPropertyValue(f,["contentSettings","contentType"],a.lookup(n));var p=new l(n,{calcContentMd5:f.storeBlobContentMD5});m._uploadBlobFromStream(!0,e,t,r,p,g,f,function(e,t,r){c.objectIsFunction(p.destroy)&&p.destroy(),u(e,t,r)})}};return s.stat(n,function(n,i){n?u(n):(g=i.size,m._createBlob(e,t,r,g,f,y))}),f.speedSummary},i.prototype._getBlobToLocalFile=function(e,t,r,n,i){var o;c.normalizeArgs(n,i,function(e,t){o=e,i=t}),o.speedSummary=o.speedSummary||new p(t);var a=s.createWriteStream(r,{highWaterMark:h.MAX_QUEUED_WRITE_DISK_BUFFER_SIZE});return a.on("error",function(e){i(e)}),this.getBlobToStream(e,t,a,o,function(e,t,n){e?a.end(function(){s.existsSync(r)&&0===a.bytesWritten&&s.unlinkSync(r),i(e,t,n)}):i(e,t,n)}),o.speedSummary},e.exports=i},function(e,t,r){var n=r(15),i=r(1),o=r(11),s=r(332),a=r(84),c=r(22).BlobConstants.DEFAULT_WRITE_BLOCK_SIZE_IN_BYTES,u=r(5).EventEmitter;function FileReadStream(e,t){n.Stream.call(this),this.readable=!0,t||(t={}),this._destroyed=!1,this._streamEnded=!1,this._fd=null,this._fileName=void 0,this._highWaterMark=t.highWaterMark||c,this._offset=0,this._paused=void 0,this._allocator=t.allocator,this._fileName=e,this._md5hash=null,this._md5sum=void 0,t.calcContentMd5&&(this._md5hash=(new a).createMd5Hash()),this._open()}i.inherits(FileReadStream,n.Stream),FileReadStream.prototype._open=function(){var e=this;o.open(this._fileName,"r",function(t,r){t?e.emit("error",t):(e._fd=r,e.emit("open",r))})},FileReadStream.prototype.on=function(e,t){return"data"===e&&void 0===this._paused&&(this._paused=!1,this._emitData()),u.prototype.on.call(this,e,t)},FileReadStream.prototype.setMemoryAllocator=function(e){this._allocator=e},FileReadStream.prototype._getBuffer=function(e){return this._allocator&&this._allocator.getBuffer?this._allocator.getBuffer(e):Buffer.alloc(e)},FileReadStream.prototype._releaseBuffer=function(e){this._allocator&&this._allocator.releaseBuffer&&this._allocator.releaseBuffer(e)},FileReadStream.prototype._emitData=function(){var e=this;if(this._fd){if(!this._paused&&!this._streamEnded){var t=this._getBuffer(this._highWaterMark);o.read(this._fd,t,0,this._highWaterMark,this._offset,function(r,n,i){if(r)e.emit("error",r);else if(0!==n){var o,s={start:e._offset,end:e._offset+n-1,size:n};n==e._highWaterMark?o=i:(o=i.slice(0,n),e._releaseBuffer(i)),e._md5hash&&e._md5hash.update(o),e.emit("data",o,s),e._offset+=n,t=i=o=null,e._emitData()}else e._streamEnded||(e._streamEnded=!0,e.emit("end"))})}}else this.once("open",function(){e._emitData()})},FileReadStream.prototype.getContentMd5=function(e){if(e||(e="base64"),this._md5hash){if(this._streamEnded)return this._md5sum||(this._md5sum=this._md5hash.digest(e)),this._md5sum;throw new Error("FileReadStream has not ended.")}throw new Error("Can't get content md5, please set the calcContentMd5 option for FileReadStream.")},FileReadStream.prototype.pause=function(){this._paused=!0},FileReadStream.prototype.resume=function(){var e=this._paused;this._paused&&(this._paused=!1,!0===e&&this._emitData())},FileReadStream.prototype.finish=function(){this.destroy()},FileReadStream.prototype.destroy=function(){if(!this._destroyed){var e=this;this.readable=!1,s.isInt(""+this._fd)?close():this.once("open",close)}function close(t){o.close(t||e._fd,function(t){t?e.emit("error",t):e.emit("close")}),e._fd=null,e._destroyed=!0}},FileReadStream.prototype.stop=function(){this.destroy(),this._streamEnded=!0,this.emit("end")},e.exports=FileReadStream},function(e,t,r){var n=r(52),i=r(7),o=r(1),s=r(29),a=r(39),c=r(20),u=r(832),l=r(84),p=r(833),d=r(207),h=c.util,f=c.SR,m=c.validate,g=c.StorageServiceClient,y=c.WebResource,v=c.Constants,b=v.BlobConstants,_=v.HeaderConstants,w=v.QueryStringConstants,E=v.RequestLocationMode,S=c.BatchOperation,C=c.SpeedSummary,x=c.ChunkAllocator,k=c.ChunkStream,R=c.ChunkStreamWithStream,T=c.AclResult,O=c.ServiceStatsParser,I=r(834),N=r(835),A=r(836),P=r(837),L=r(838),D=r(121),M=r(76),j=M.ArgumentError,q=M.ArgumentNullError,F=M.StorageError;function BlobService(e,t,r,n,i,o){var s=g.getStorageSettings(e,t,r,n,i,o);BlobService.super_.call(this,s._name,s._key,s._blobEndpoint,s._usePathStyleUri,s._sasToken,o),this.defaultEnableReuseSocket=v.DEFAULT_ENABLE_REUSE_SOCKET,this.singleBlobPutThresholdInBytes=b.DEFAULT_SINGLE_BLOB_PUT_THRESHOLD_IN_BYTES,this.parallelOperationThreadCount=v.DEFAULT_PARALLEL_OPERATION_THREAD_COUNT}function createResourceName(e,t,r){return t&&!r&&(t=(t=(t=(t=encodeURIComponent(t)).replace(/%2F/g,"/")).replace(/%5C/g,"/")).replace(/\+/g,"%20")),t?e+"/"+t:e}o.inherits(BlobService,g),BlobService.prototype.getServiceStats=function(e,t){var r;h.normalizeArgs(e,t,function(e,n){r=e,t=n}),m.validateArgs("getServiceStats",function(e){e.callback(t)});var n=y.get().withQueryOption(w.COMP,"stats").withQueryOption(w.RESTYPE,"service");r.requestLocationMode=E.PRIMARY_OR_SECONDARY;this.performRequest(n,null,r,function(e,r){e.serviceStatsResult=null,e.error||(e.serviceStatsResult=O.parse(e.response.body.StorageServiceStats));r(e,function(e){t(e.error,e.serviceStatsResult,e.response)})})},BlobService.prototype.getServiceProperties=function(e,t){return this.getAccountServiceProperties(e,t)},BlobService.prototype.getAccountProperties=function(e,t,r,n){var i;h.normalizeArgs(r,n,function(e,t){i=e,n=t}),m.validateArgs("getAccountProperties",function(e){e.callback(n)});var o=a(!0,{},i),s=y.head(createResourceName(e,t)).withQueryOption(w.COMP,"properties").withQueryOption(w.RESTYPE,"account");o.requestLocationMode=E.PRIMARY_OR_SECONDARY;this.performRequest(s,null,o,function(e,t){e.accountPropertiesResult=null,e.error||(e.accountPropertiesResult=I.parse(e.response.headers));t(e,function(e){n(e.error,e.accountPropertiesResult,e.response)})})},BlobService.prototype.setServiceProperties=function(e,t,r){return this.setAccountServiceProperties(e,t,r)},BlobService.prototype.setBlobTier=function(e,t,r,n,i){var o;h.normalizeArgs(n,i,function(e,t){o=e,i=t}),m.validateArgs("setBlobTier",function(n){n.string(e,"container"),n.string(t,"blob"),n.string(r,"blobTier"),n.containerNameIsValid(e),n.blobNameIsValid(e,t),n.blobTierNameIsValid(r),n.callback(i)});var s=a(!0,{},o),c=createResourceName(e,t),u=y.put(c).withQueryOption(w.COMP,"tier").withHeader(_.ACCESS_TIER,r);this.performRequest(u,null,s,function(e,t){t(e,function(e){i(e.error,e.response)})})},BlobService.prototype.listContainersSegmented=function(e,t,r){this.listContainersSegmentedWithPrefix(null,e,t,r)},BlobService.prototype.listContainersSegmentedWithPrefix=function(e,t,r,n){var i;h.normalizeArgs(r,n,function(e,t){i=e,n=t}),m.validateArgs("listContainers",function(e){e.callback(n)});var o=a(!0,{},i),c=y.get().withQueryOption(w.COMP,"list").withQueryOption(w.MAX_RESULTS,o.maxResults).withQueryOption(w.INCLUDE,o.include);h.objectIsNull(t)||c.withQueryOption(w.MARKER,t.nextMarker),c.withQueryOption(w.PREFIX,e),o.requestLocationMode=h.getNextListingLocationMode(t);this.performRequest(c,null,o,function(e,t){if(e.listContainersResult=null,!e.error){e.listContainersResult={entries:null,continuationToken:null},e.listContainersResult.entries=[];var r=[];e.response.body.EnumerationResults.Containers&&e.response.body.EnumerationResults.Containers.Container&&(r=e.response.body.EnumerationResults.Containers.Container,s.isArray(r)||(r=[r])),r.forEach(function(t){var r=P.parse(t);e.listContainersResult.entries.push(r)}),e.response.body.EnumerationResults.NextMarker&&(e.listContainersResult.continuationToken={nextMarker:null,targetLocation:null},e.listContainersResult.continuationToken.nextMarker=e.response.body.EnumerationResults.NextMarker,e.listContainersResult.continuationToken.targetLocation=e.targetLocation)}t(e,function(e){n(e.error,e.listContainersResult,e.response)})})},BlobService.prototype.doesContainerExist=function(e,t,r){var n;h.normalizeArgs(t,r,function(e,t){n=e,r=t}),m.validateArgs("doesContainerExist",function(t){t.string(e,"container"),t.containerNameIsValid(e),t.callback(r)});var i=a(!0,{},n);this._doesContainerExist(e,!1,i,r)},BlobService.prototype.createContainer=function(e,t,r){var n;h.normalizeArgs(t,r,function(e,t){n=e,r=t}),m.validateArgs("createContainer",function(t){t.string(e,"container"),t.test(function(){return"$logs"!==e},"Container name format is incorrect"),t.containerNameIsValid(e),t.callback(r)});var i=a(!0,{},n),o=y.put(e).withQueryOption(w.RESTYPE,"container");o.addOptionalMetadataHeaders(i.metadata),o.withHeader(_.BLOB_PUBLIC_ACCESS,i.publicAccessLevel);this.performRequest(o,null,i,function(t,n){t.containerResult=null,t.error||(t.containerResult=new P(e),t.containerResult.getPropertiesFromHeaders(t.response.headers),i.metadata&&(t.containerResult.metadata=i.metadata));n(t,function(e){r(e.error,e.containerResult,e.response)})})},BlobService.prototype.createContainerIfNotExists=function(e,t,r){var n;h.normalizeArgs(t,r,function(e,t){n=e,r=t}),m.validateArgs("createContainerIfNotExists",function(t){t.string(e,"container"),t.containerNameIsValid(e),t.callback(r)});var i=a(!0,{},n),o=this;o._doesContainerExist(e,!0,i,function(t,n,s){var a=n.exists;n.created=!1,delete n.exists,t?r(t,n,s):a?(s.isSuccessful=!0,r(t,n,s)):o.createContainer(e,i,function(e,t,n){e?e&&e.statusCode===v.HttpConstants.HttpResponseCodes.Conflict&&e.code===v.BlobErrorCodeStrings.CONTAINER_ALREADY_EXISTS&&(e=null,n.isSuccessful=!0):t.created=!0,r(e,t,n)})})},BlobService.prototype.getContainerProperties=function(e,t,r){var n;h.normalizeArgs(t,r,function(e,t){n=e,r=t}),m.validateArgs("getContainerProperties",function(t){t.string(e,"container"),t.containerNameIsValid(e),t.callback(r)});var i=a(!0,{},n),o=y.head(e).withQueryOption(w.RESTYPE,"container").withHeader(_.LEASE_ID,i.leaseId);i.requestLocationMode=v.RequestLocationMode.PRIMARY_OR_SECONDARY;var s=this;this.performRequest(o,null,i,function(t,n){t.containerResult=null,t.error||(t.containerResult=new P(e),t.containerResult.metadata=s.parseMetadataHeaders(t.response.headers),t.containerResult.getPropertiesFromHeaders(t.response.headers));n(t,function(e){r(e.error,e.containerResult,e.response)})})},BlobService.prototype.getContainerMetadata=function(e,t,r){var n;h.normalizeArgs(t,r,function(e,t){n=e,r=t}),m.validateArgs("getContainerMetadata",function(t){t.string(e,"container"),t.containerNameIsValid(e),t.callback(r)});var i=a(!0,{},n),o=y.head(e).withQueryOption(w.RESTYPE,"container").withQueryOption(w.COMP,"metadata").withHeader(_.LEASE_ID,i.leaseId);i.requestLocationMode=v.RequestLocationMode.PRIMARY_OR_SECONDARY;var s=this;this.performRequest(o,null,i,function(t,n){t.containerResult=null,t.error||(t.containerResult=new P(e),t.containerResult.metadata=s.parseMetadataHeaders(t.response.headers),t.containerResult.getPropertiesFromHeaders(t.response.headers));n(t,function(e){r(e.error,e.containerResult,e.response)})})},BlobService.prototype.setContainerMetadata=function(e,t,r,n){var i;h.normalizeArgs(r,n,function(e,t){i=e,n=t}),m.validateArgs("setContainerMetadata",function(r){r.string(e,"container"),r.object(t,"metadata"),r.containerNameIsValid(e),r.callback(n)});var o=a(!0,{},i),s=y.put(e).withQueryOption(w.RESTYPE,"container").withQueryOption(w.COMP,"metadata").withHeader(_.LEASE_ID,o.leaseId);s.addOptionalMetadataHeaders(t);this.performRequest(s,null,o,function(t,r){t.containerResult=null,t.error||(t.containerResult=new P(e),t.containerResult.getPropertiesFromHeaders(t.response.headers));r(t,function(e){n(e.error,e.containerResult,e.response)})})},BlobService.prototype.getContainerAcl=function(e,t,r){var n;h.normalizeArgs(t,r,function(e,t){n=e,r=t}),m.validateArgs("getContainerAcl",function(t){t.string(e,"container"),t.containerNameIsValid(e),t.callback(r)});var i=a(!0,{},n),o=y.get(e).withQueryOption(w.RESTYPE,"container").withQueryOption(w.COMP,"acl").withHeader(_.LEASE_ID,i.leaseId);i.requestLocationMode=v.RequestLocationMode.PRIMARY_OR_SECONDARY;this.performRequest(o,null,i,function(t,n){t.containerResult=null,t.error||(t.containerResult=new P(e),t.containerResult.getPropertiesFromHeaders(t.response.headers),t.containerResult.signedIdentifiers=T.parse(t.response.body));n(t,function(e){r(e.error,e.containerResult,e.response)})})},BlobService.prototype.setContainerAcl=function(e,t,r,n){var i;h.normalizeArgs(r,n,function(e,t){i=e,n=t}),m.validateArgs("setContainerAcl",function(t){t.string(e,"container"),t.containerNameIsValid(e),t.callback(n)});var o=a(!0,{},i),c=null;if(t){if(s.isArray(t))throw new TypeError(f.INVALID_SIGNED_IDENTIFIERS);c=T.serialize(t)}var u=y.put(e).withQueryOption(w.RESTYPE,"container").withQueryOption(w.COMP,"acl").withHeader(_.CONTENT_LENGTH,h.objectIsNull(c)?0:Buffer.byteLength(c)).withHeader(_.BLOB_PUBLIC_ACCESS,o.publicAccessLevel).withHeader(_.LEASE_ID,o.leaseId).withBody(c);this.performRequest(u,u.body,o,function(r,i){r.containerResult=null,r.error||(r.containerResult=new P(e,o.publicAccessLevel),r.containerResult.getPropertiesFromHeaders(r.response.headers),t&&(r.containerResult.signedIdentifiers=t));i(r,function(e){n(e.error,e.containerResult,e.response)})})},BlobService.prototype.deleteContainer=function(e,t,r){var n;h.normalizeArgs(t,r,function(e,t){n=e,r=t}),m.validateArgs("deleteContainer",function(t){t.string(e,"container"),t.containerNameIsValid(e),t.callback(r)});var i=a(!0,{},n),o=y.del(e).withQueryOption(w.RESTYPE,"container").withHeader(_.LEASE_ID,i.leaseId);this.performRequest(o,null,i,function(e,t){t(e,function(e){r(e.error,e.response)})})},BlobService.prototype.deleteContainerIfExists=function(e,t,r){var n;h.normalizeArgs(t,r,function(e,t){n=e,r=t}),m.validateArgs("deleteContainerIfExists",function(t){t.string(e,"container"),t.containerNameIsValid(e),t.callback(r)});var i=a(!0,{},n),o=this;o._doesContainerExist(e,!0,i,function(t,n,s){t?r(t,n.exists,s):n.exists?o.deleteContainer(e,i,function(e,t){var n;e?e&&e.statuscode===v.HttpConstants.HttpResponseCodes.NotFound&&e.code===v.BlobErrorCodeStrings.CONTAINER_NOT_FOUND&&(n=!1,e=null,t.isSuccessful=!0):n=!0,r(e,n,t)}):(s.isSuccessful=!0,r(t,!1,s))})},BlobService.prototype.listBlobDirectoriesSegmented=function(e,t,r,n){this.listBlobDirectoriesSegmentedWithPrefix(e,null,t,r,n)},BlobService.prototype.listBlobDirectoriesSegmentedWithPrefix=function(e,t,r,n,i){var o;h.normalizeArgs(n,i,function(e,t){o=e,i=t}),o.delimiter="/",this._listBlobsOrDircotriesSegmentedWithPrefix(e,t,r,b.ListBlobTypes.Directory,o,i)},BlobService.prototype.listBlobsSegmented=function(e,t,r,n){this.listBlobsSegmentedWithPrefix(e,null,t,r,n)},BlobService.prototype.listBlobsSegmentedWithPrefix=function(e,t,r,n,i){this._listBlobsOrDircotriesSegmentedWithPrefix(e,t,r,b.ListBlobTypes.Blob,n,i)},BlobService.prototype.acquireLease=function(e,t,r,n){var i;h.normalizeArgs(r,n,function(e,t){i=e,n=t}),m.validateArgs("acquireLease",function(t){t.string(e,"container"),t.containerNameIsValid(e),t.callback(n)});var o=a(!0,{},i);o.leaseDuration||(o.leaseDuration=-1),this._leaseImpl(e,t,null,b.LeaseOperation.ACQUIRE,o,n)},BlobService.prototype.renewLease=function(e,t,r,n,i){var o;h.normalizeArgs(n,i,function(e,t){o=e,i=t}),m.validateArgs("renewLease",function(t){t.string(e,"container"),t.containerNameIsValid(e),t.callback(i)});var s=a(!0,{},o);this._leaseImpl(e,t,r,b.LeaseOperation.RENEW,s,i)},BlobService.prototype.changeLease=function(e,t,r,n,i,o){var s;h.normalizeArgs(i,o,function(e,t){s=e,o=t}),m.validateArgs("changeLease",function(t){t.string(e,"container"),t.containerNameIsValid(e),t.callback(o)});var c=a(!0,{},s);c.proposedLeaseId=n,this._leaseImpl(e,t,r,b.LeaseOperation.CHANGE,c,o)},BlobService.prototype.releaseLease=function(e,t,r,n,i){var o;h.normalizeArgs(n,i,function(e,t){o=e,i=t}),m.validateArgs("releaseLease",function(t){t.string(e,"container"),t.containerNameIsValid(e),t.callback(i)});var s=a(!0,{},o);this._leaseImpl(e,t,r,b.LeaseOperation.RELEASE,s,i)},BlobService.prototype.breakLease=function(e,t,r,n){var i;h.normalizeArgs(r,n,function(e,t){i=e,n=t}),m.validateArgs("breakLease",function(t){t.string(e,"container"),t.containerNameIsValid(e),t.callback(n)});var o=a(!0,{},i);this._leaseImpl(e,t,null,b.LeaseOperation.BREAK,o,n)},BlobService.prototype.getBlobProperties=function(e,t,r,n){var i;h.normalizeArgs(r,n,function(e,t){i=e,n=t}),m.validateArgs("getBlobProperties",function(r){r.string(e,"container"),r.string(t,"blob"),r.containerNameIsValid(e),r.callback(n)});var o=a(!0,{},i),s=createResourceName(e,t),c=y.head(s);o.snapshotId&&c.withQueryOption(w.SNAPSHOT,o.snapshotId),A.setHeadersFromBlob(c,o),o.requestLocationMode=v.RequestLocationMode.PRIMARY_OR_SECONDARY;var u=this;this.performRequest(c,null,o,function(r,i){r.blobResult=null,r.error||(r.blobResult=new A(e,t),r.blobResult.metadata=u.parseMetadataHeaders(r.response.headers),r.blobResult.getPropertiesFromHeaders(r.response.headers));i(r,function(e){n(e.error,e.blobResult,e.response)})})},BlobService.prototype.getBlobMetadata=function(e,t,r,n){var i;h.normalizeArgs(r,n,function(e,t){i=e,n=t}),m.validateArgs("getBlobMetadata",function(r){r.string(e,"container"),r.string(t,"blob"),r.containerNameIsValid(e),r.callback(n)});var o=a(!0,{},i),s=createResourceName(e,t),c=y.head(s);c.withQueryOption(w.COMP,"metadata"),c.withQueryOption(w.SNAPSHOT,o.snapshotId),A.setHeadersFromBlob(c,o),o.requestLocationMode=v.RequestLocationMode.PRIMARY_OR_SECONDARY;var u=this;this.performRequest(c,null,o,function(r,i){r.blobResult=null,r.error||(r.blobResult=new A(e,t),r.blobResult.metadata=u.parseMetadataHeaders(r.response.headers),r.blobResult.getPropertiesFromHeaders(r.response.headers));i(r,function(e){n(e.error,e.blobResult,e.response)})})},BlobService.prototype.setBlobProperties=function(e,t,r,n,i){var o;h.normalizeArgs(n,i,function(e,t){o=e,i=t}),m.validateArgs("setBlobProperties",function(r){r.string(e,"container"),r.string(t,"blob"),r.containerNameIsValid(e),r.callback(i)});var s=a(!0,{contentSettings:r},o),c=createResourceName(e,t),u=y.put(c).withQueryOption(w.COMP,"properties");A.setPropertiesFromBlob(u,s),this._setBlobPropertiesHelper({webResource:u,options:s,container:e,blob:t,callback:i})},BlobService.prototype.setBlobMetadata=function(e,t,r,n,i){var o;h.normalizeArgs(n,i,function(e,t){o=e,i=t}),m.validateArgs("setBlobMetadata",function(n){n.string(e,"container"),n.string(t,"blob"),n.object(r,"metadata"),n.containerNameIsValid(e),n.callback(i)});var s=a(!0,{},o),c=createResourceName(e,t),u=y.put(c).withQueryOption(w.COMP,"metadata");u.withQueryOption(w.SNAPSHOT,s.snapshotId),s.metadata=r,A.setHeadersFromBlob(u,s);this.performRequest(u,null,s,function(r,n){r.blobResult=null,r.error||(r.blobResult=new A(e,t),r.blobResult.getPropertiesFromHeaders(r.response.headers));n(r,function(e){i(e.error,e.blobResult,e.response)})})},BlobService.prototype.createReadStream=function(e,t,r,n){var i;h.normalizeArgs(r,n,function(e,t){i=e,n=t}),m.validateArgs("createReadStream",function(r){r.string(e,"container"),r.string(t,"blob"),r.containerNameIsValid(e)});var o=new k;return this.getBlobToStream(e,t,o,i,function(e,t,r){e&&o.emit("error",e),n&&n(e,t,r)}),o},BlobService.prototype.getBlobToStream=function(e,t,r,n,i){var o;h.normalizeArgs(n,i,function(e,t){o=e,i=t}),o.speedSummary=o.speedSummary||new C(t),m.validateArgs("getBlobToStream",function(n){n.string(e,"container"),n.string(t,"blob"),n.object(r,"writeStream"),n.containerNameIsValid(e),n.callback(i)});var s=a(!0,{},o),c={timeoutIntervalInMs:s.timeoutIntervalInMs,clientRequestTimeoutInMs:s.clientRequestTimeoutInMs,snapshotId:s.snapshotId,accessConditions:s.accessConditions};if(s.skipSizeCheck)this._getBlobToStream(e,t,r,s,i);else{var u=this;this.getBlobProperties(e,t,c,function(n,o){if(n)i(n);else{var a;if(s.rangeStart){var c=o.contentLength-1;a=(s.rangeEnd?Math.min(s.rangeEnd,c):c)-s.rangeStart+1}else a=o.contentLength;s.speedSummary.totalSize=a,a>u.singleBlobPutThresholdInBytes?(h.setObjectInnerPropertyValue(s,["contentSettings","contentMD5"],h.tryGetValueChain(o,["contentSettings","contentMD5"],null)),u._getBlobToRangeStream(e,t,o.blobType,r,s,i)):u._getBlobToStream(e,t,r,s,i)}})}return s.speedSummary},BlobService.prototype.getBlobToText=function(e,t,r,n){var i;h.normalizeArgs(r,n,function(e,t){i=e,n=t}),m.validateArgs("getBlobToText",function(r){r.string(e,"container"),r.string(t,"blob"),r.containerNameIsValid(e),r.callback(n)});var o=a(!0,{},i),s=createResourceName(e,t),c=y.get(s).withRawResponse();c.withQueryOption(w.SNAPSHOT,o.snapshotId),A.setHeadersFromBlob(c,o),this._setRangeContentMD5Header(c,o),o.requestLocationMode=v.RequestLocationMode.PRIMARY_OR_SECONDARY;var u=this;this.performRequest(c,null,o,function(r,i){r.text=null,r.blobResult=null,r.error||(r.blobResult=new A(e,t),r.blobResult.metadata=u.parseMetadataHeaders(r.response.headers),r.blobResult.getPropertiesFromHeaders(r.response.headers),r.text=r.response.body,u._validateLengthAndMD5(o,r));i(r,function(e){n(e.error,e.text,e.blobResult,e.response)})})},BlobService.prototype.deleteBlob=function(e,t,r,n){var i;h.normalizeArgs(r,n,function(e,t){i=e,n=t}),m.validateArgs("deleteBlob",function(r){r.string(e,"container"),r.string(t,"blob"),r.containerNameIsValid(e),r.callback(n)});var o=a(!0,{},i),s=createResourceName(e,t),c=y.del(s).withHeader(_.LEASE_ID,o.leaseId);if(!h.objectIsNull(o.snapshotId)&&!h.objectIsNull(o.deleteSnapshots))throw new j("options",f.INVALID_DELETE_SNAPSHOT_OPTION);c.withQueryOption(w.SNAPSHOT,o.snapshotId),c.withHeader(_.DELETE_SNAPSHOT,o.deleteSnapshots),A.setHeadersFromBlob(c,o);this.performRequest(c,null,o,function(e,t){t(e,function(e){n(e.error,e.response)})})},BlobService.prototype.undeleteBlob=function(e,t,r,n){var i;h.normalizeArgs(r,n,function(e,t){i=e,n=t}),m.validateArgs("deleteBlob",function(r){r.string(e,"container"),r.string(t,"blob"),r.containerNameIsValid(e),r.callback(n)});var o=a(!0,{},i),s=createResourceName(e,t),c=y.put(s).withQueryOption(w.COMP,"undelete");A.setHeadersFromBlob(c,o);this.performRequest(c,null,o,function(e,t){t(e,function(e){n(e.error,e.response)})})},BlobService.prototype.doesBlobExist=function(e,t,r,n){var i;h.normalizeArgs(r,n,function(e,t){i=e,n=t}),m.validateArgs("doesBlobExist",function(r){r.string(e,"container"),r.string(t,"blob"),r.containerNameIsValid(e),r.callback(n)});var o=a(!0,{},i);this._doesBlobExist(e,t,!1,o,n)},BlobService.prototype.deleteBlobIfExists=function(e,t,r,n){var i;h.normalizeArgs(r,n,function(e,t){i=e,n=t}),m.validateArgs("deleteBlobIfExists",function(r){r.string(e,"container"),r.string(t,"blob"),r.containerNameIsValid(e),r.callback(n)});var o=a(!0,{},i),s=this;s._doesBlobExist(e,t,!0,o,function(r,i,a){r?n(r,i.exists,a):i.exists?s.deleteBlob(e,t,o,function(e,t){var r;e?e&&e.statusCode===v.HttpConstants.HttpResponseCodes.NotFound&&e.code===v.BlobErrorCodeStrings.BLOB_NOT_FOUND&&(r=!1,e=null,t.isSuccessful=!0):r=!0,n(e,r,t)}):(a.isSuccessful=!0,n(r,!1,a))})},BlobService.prototype.createBlobSnapshot=function(e,t,r,n){var i;h.normalizeArgs(r,n,function(e,t){i=e,n=t}),m.validateArgs("createBlobSnapshot",function(r){r.string(e,"container"),r.string(t,"blob"),r.containerNameIsValid(e),r.callback(n)});var o=a(!0,{},i),s=createResourceName(e,t),c=y.put(s).withQueryOption(w.COMP,"snapshot");A.setHeadersFromBlob(c,o);this.performRequest(c,null,o,function(e,t){e.snapshotId=null,e.error||(e.snapshotId=e.response.headers[_.SNAPSHOT]);t(e,function(e){n(e.error,e.snapshotId,e.response)})})},BlobService.prototype.startCopyBlob=function(e,t,r,n,o){var s;h.normalizeArgs(n,o,function(e,t){s=e,o=t}),m.validateArgs("startCopyBlob",function(n){n.string(e,"sourceUri"),n.string(t,"targetContainer"),n.string(r,"targetBlob"),n.containerNameIsValid(t),n.callback(o)});var c=createResourceName(t,r),u=a(!0,{},s);if(u.snapshotId){var l=i.parse(e,!0);if(l.query.snapshot)throw new j("options.snapshotId","Duplicate snapshot supplied in both the source uri and option.");l.search=void 0,l.query.snapshot=u.snapshotId,e=i.format(l)}var p=y.put(c).withHeader(_.COPY_SOURCE,e);u.isIncrementalCopy&&p.withQueryOption(w.COMP,"incrementalcopy"),p.withHeader(_.ACCESS_TIER,u.blobTier),p.withHeader(_.LEASE_ID,u.leaseId),p.withHeader(_.SOURCE_LEASE_ID,u.sourceLeaseId),p.addOptionalMetadataHeaders(u.metadata);this.performRequest(p,null,u,function(e,n){e.blobResult=null,e.error||(e.blobResult=new A(t,r),e.blobResult.getPropertiesFromHeaders(e.response.headers),u.metadata&&(e.blobResult.metadata=u.metadata));n(e,function(e){o(e.error,e.blobResult,e.response)})})},BlobService.prototype.abortCopyBlob=function(e,t,r,n,i){var o;h.normalizeArgs(n,i,function(e,t){o=e,i=t}),m.validateArgs("abortCopyBlob",function(r){r.string(e,"container"),r.string(t,"blob"),r.containerNameIsValid(e),r.callback(i)});var s=createResourceName(e,t),c=a(!0,{},o),u=y.put(s).withQueryOption(w.COPY_ID,r).withQueryOption(w.COMP,"copy").withHeader(_.COPY_ACTION,"abort");u.withHeader(_.LEASE_ID,c.leaseId);this.performRequest(u,null,c,function(e,t){t(e,function(e){i(e.error,e.response)})})},BlobService.prototype.generateSharedAccessSignature=function(e,t,r,n){if(!this.storageCredentials)throw new q("storageCredentials");if(!this.storageCredentials.generateSignedQueryString)throw new j("storageCredentials",f.CANNOT_CREATE_SAS_WITHOUT_ACCOUNT_KEY);m.validateArgs("generateSharedAccessSignature",function(t){t.string(e,"container"),t.containerNameIsValid(e),t.object(r,"sharedAccessPolicy")});var i=b.ResourceTypes.CONTAINER;t&&(m.validateArgs("generateSharedAccessSignature",function(e){e.string(t,"blob")}),i=b.ResourceTypes.BLOB),r.AccessPolicy&&(h.objectIsNull(r.AccessPolicy.Start)||(s.isDate(r.AccessPolicy.Start)||(r.AccessPolicy.Start=new Date(r.AccessPolicy.Start)),r.AccessPolicy.Start=h.truncatedISO8061Date(r.AccessPolicy.Start)),h.objectIsNull(r.AccessPolicy.Expiry)||(s.isDate(r.AccessPolicy.Expiry)||(r.AccessPolicy.Expiry=new Date(r.AccessPolicy.Expiry)),r.AccessPolicy.Expiry=h.truncatedISO8061Date(r.AccessPolicy.Expiry)));var o=createResourceName(e,t,!0);return this.storageCredentials.generateSignedQueryString(v.ServiceType.Blob,o,r,null,{headers:n,resourceType:i})},BlobService.prototype.getUrl=function(e,t,r,o,s){var a;m.validateArgs("getUrl",function(t){t.string(e,"container"),t.containerNameIsValid(e)}),a=h.objectIsNull(o)||!1!==o?this.host.primaryHost:this.host.secondaryHost,(a=h.trimPortFromUri(a))&&a.lastIndexOf("/")!==a.length-1&&(a+="/");var c=n.parse(r);s&&(c[w.SNAPSHOT]=s);var u=i.format({pathname:this._getPath(createResourceName(e,t)),query:c});return i.resolve(a,u)},BlobService.prototype.createPageBlob=function(e,t,r,n,i){var o;if(h.normalizeArgs(n,i,function(e,t){o=e,i=t}),m.validateArgs("createPageBlob",function(n){n.string(e,"container"),n.string(t,"blob"),n.containerNameIsValid(e),n.value(r,"length"),n.callback(i)}),r&&r%b.PAGE_SIZE!=0)throw new RangeError(f.INVALID_PAGE_BLOB_LENGTH);var s=a(!0,{},o),c=createResourceName(e,t),u=y.put(c).withHeader(_.BLOB_TYPE,b.BlobTypes.PAGE).withHeader(_.BLOB_CONTENT_LENGTH,r).withHeader(_.CONTENT_LENGTH,0).withHeader(_.ACCESS_TIER,s.blobTier).withHeader(_.LEASE_ID,s.leaseId);A.setHeadersFromBlob(u,s);this.performRequest(u,null,s,function(e,t){t(e,function(e){i(e.error,e.response)})})},BlobService.prototype.createPageBlobFromStream=function(e,t,r,n,i,o){return this._createBlobFromStream(e,t,b.BlobTypes.PAGE,r,n,i,o)},BlobService.prototype.createWriteStreamToExistingPageBlob=function(e,t,r,n){return this._createWriteStreamToBlob(e,t,b.BlobTypes.PAGE,0,!1,r,n)},BlobService.prototype.createWriteStreamToNewPageBlob=function(e,t,r,n,i){return this._createWriteStreamToBlob(e,t,b.BlobTypes.PAGE,r,!0,n,i)},BlobService.prototype.createPagesFromStream=function(e,t,r,n,i,o,s){var c;h.normalizeArgs(o,s,function(e,t){c=e,s=t}),m.validateArgs("createPagesFromStream",function(r){r.string(e,"container"),r.string(t,"blob"),r.containerNameIsValid(e),r.callback(s)});var u=a(!0,{},c);if(i-n+1>b.MAX_UPDATE_PAGE_SIZE)throw new RangeError(f.INVALID_PAGE_RANGE_FOR_UPDATE);var l=this;h.objectIsNull(u.transactionalContentMD5)&&u.useTransactionalMD5?h.calculateMD5(r,b.MAX_UPDATE_PAGE_SIZE,u,function(r,o){u.transactionalContentMD5=o,l._createPages(e,t,r,null,n,i,u,s)}):l._createPages(e,t,null,r,n,i,u,s)},BlobService.prototype.listPageRanges=function(e,t,r,n){var i;h.normalizeArgs(r,n,function(e,t){i=e,n=t}),m.validateArgs("listPageRanges",function(r){r.string(e,"container"),r.string(t,"blob"),r.containerNameIsValid(e),r.callback(n)});var o=a(!0,{},i),c=createResourceName(e,t),u=y.get(c).withQueryOption(w.COMP,"pagelist").withQueryOption(w.SNAPSHOT,o.snapshotId);if(o.rangeStart&&o.rangeStart%b.PAGE_SIZE!=0)throw new RangeError(f.INVALID_PAGE_START_OFFSET);if(o.rangeEnd&&(o.rangeEnd+1)%b.PAGE_SIZE!=0)throw new RangeError(f.INVALID_PAGE_END_OFFSET);A.setHeadersFromBlob(u,o),o.requestLocationMode=E.PRIMARY_OR_SECONDARY;this.performRequest(u,null,o,function(e,t){if(e.pageRanges=null,!e.error){e.pageRanges=[];var r=[];e.response.body.PageList.PageRange&&(r=e.response.body.PageList.PageRange,s.isArray(r)||(r=[r])),r.forEach(function(t){var r={start:parseInt(t.Start,10),end:parseInt(t.End,10)};e.pageRanges.push(r)})}t(e,function(e){n(e.error,e.pageRanges,e.response)})})},BlobService.prototype.getPageRangesDiff=function(e,t,r,n,i){var o;h.normalizeArgs(n,i,function(e,t){o=e,i=t}),m.validateArgs("getPageRangesDiff",function(r){r.string(e,"container"),r.string(t,"blob"),r.containerNameIsValid(e),r.callback(i)});var c=a(!0,{},o),u=createResourceName(e,t),l=y.get(u).withQueryOption(w.COMP,"pagelist").withQueryOption(w.SNAPSHOT,c.snapshotId).withQueryOption(w.PREV_SNAPSHOT,r);if(c.rangeStart&&c.rangeStart%b.PAGE_SIZE!=0)throw new RangeError(f.INVALID_PAGE_START_OFFSET);if(c.rangeEnd&&(c.rangeEnd+1)%b.PAGE_SIZE!=0)throw new RangeError(f.INVALID_PAGE_END_OFFSET);if(c.rangeEnd&&(c.rangeEnd+1)%b.PAGE_SIZE!=0)throw new RangeError(f.INVALID_PAGE_END_OFFSET);A.setHeadersFromBlob(l,c),c.requestLocationMode=E.PRIMARY_OR_SECONDARY;this.performRequest(l,null,c,function(e,t){if(e.pageRangesDiff=null,!e.error){if(e.pageRangesDiff=[],e.response.body.PageList.PageRange){var r=e.response.body.PageList.PageRange;s.isArray(r)||(r=[r]),r.forEach(function(t){var r={start:parseInt(t.Start,10),end:parseInt(t.End,10),isCleared:!1};e.pageRangesDiff.push(r)})}if(e.response.body.PageList.ClearRange){var n=e.response.body.PageList.ClearRange;s.isArray(n)||(n=[n]),n.forEach(function(t){var r={start:parseInt(t.Start,10),end:parseInt(t.End,10),isCleared:!0};e.pageRangesDiff.push(r)})}}t(e,function(e){i(e.error,e.pageRangesDiff,e.response)})})},BlobService.prototype.clearPageRange=function(e,t,r,n,i,o){var s;h.normalizeArgs(i,o,function(e,t){s=e,o=t}),m.validateArgs("clearPageRange",function(r){r.string(e,"container"),r.string(t,"blob"),r.containerNameIsValid(e),r.callback(o)});var c=a(!0,{},s),u=this._updatePageBlobPagesImpl(e,t,r,n,b.PageWriteOptions.CLEAR,c);this.performRequest(u,null,c,function(e,t){t(e,function(e){o(e.error,e.response)})})},BlobService.prototype.resizePageBlob=function(e,t,r,n,i){var o;h.normalizeArgs(n,i,function(e,t){o=e,i=t}),m.validateArgs("resizePageBlob",function(r){r.string(e,"container"),r.string(t,"blob"),r.containerNameIsValid(e),r.callback(i)});var s=a(!0,{},o),c=createResourceName(e,t),u=y.put(c).withQueryOption(w.COMP,"properties").withHeader(_.LEASE_ID,s.leaseId);if(r&&r%b.PAGE_SIZE!=0)throw new RangeError(f.INVALID_PAGE_BLOB_LENGTH);u.withHeader(_.BLOB_CONTENT_LENGTH,r),this._setBlobPropertiesHelper({webResource:u,options:s,container:e,blob:t,callback:i})},BlobService.prototype.setPageBlobSequenceNumber=function(e,t,r,n,i,s){var c;if(h.normalizeArgs(i,s,function(e,t){c=e,s=t}),m.validateArgs("setPageBlobSequenceNumber",function(r){r.string(e,"container"),r.string(t,"blob"),r.containerNameIsValid(e),r.callback(s)}),r===D.SequenceNumberAction.INCREMENT){if(!h.objectIsNull(n))throw new j("sequenceNumber",f.BLOB_INVALID_SEQUENCE_NUMBER)}else if(h.objectIsNull(n))throw new q("sequenceNumber",o.format(f.ARGUMENT_NULL_OR_EMPTY,"sequenceNumber"));var u=a(!0,{},c),l=createResourceName(e,t),p=y.put(l).withQueryOption(w.COMP,"properties").withHeader(_.SEQUENCE_NUMBER_ACTION,r);r!==D.SequenceNumberAction.INCREMENT&&p.withHeader(_.SEQUENCE_NUMBER,n);this.performRequest(p,null,u,function(r,n){r.blobResult=null,r.error||(r.blobResult=new A(e,t),r.blobResult.getPropertiesFromHeaders(r.response.headers));n(r,function(e){s(e.error,e.blobResult,e.response)})})},BlobService.prototype.createBlockBlobFromStream=function(e,t,r,n,i,o){return this._createBlobFromStream(e,t,b.BlobTypes.BLOCK,r,n,i,o)},BlobService.prototype.createBlockBlobFromText=function(e,t,r,n,i){return this._createBlobFromText(e,t,b.BlobTypes.BLOCK,r,n,i)},BlobService.prototype.createWriteStreamToBlockBlob=function(e,t,r,n){return this._createWriteStreamToBlob(e,t,b.BlobTypes.BLOCK,0,!1,r,n)},BlobService.prototype.createBlockFromStream=function(e,t,r,n,i,o,s){var c;h.normalizeArgs(o,s,function(e,t){c=e,s=t}),m.validateArgs("createBlockFromStream",function(e){e.string(t,"container"),e.string(r,"blob"),e.containerNameIsValid(t),e.exists(n,"readStream"),e.value(i,"streamLength"),e.callback(s)});var u=a(!0,{},c);if(i>b.MAX_BLOCK_BLOB_BLOCK_SIZE)throw new RangeError(f.INVALID_STREAM_LENGTH);this._createBlock(e,t,r,null,n,i,u,s)},BlobService.prototype.createBlockFromText=function(e,t,r,n,i,o){var s;h.normalizeArgs(i,o,function(e,t){s=e,o=t}),m.validateArgs("createBlockFromText",function(e){e.string(t,"container"),e.string(r,"blob"),e.containerNameIsValid(t),e.callback(o)});var c=a(!0,{},s),u=Buffer.isBuffer(n)?n.length:Buffer.byteLength(n);if(u>b.MAX_BLOCK_BLOB_BLOCK_SIZE)throw new RangeError(f.INVALID_TEXT_LENGTH);this._createBlock(e,t,r,n,null,u,c,o)},BlobService.prototype.createBlockFromURL=function(e,t,r,n,i,o,s,c){var u;h.normalizeArgs(s,c,function(e,t){u=e,c=t}),m.validateArgs("createBlockFromURL",function(e){e.string(t,"container"),e.string(r,"blob"),e.string(n,"sourceURL"),e.containerNameIsValid(t),e.callback(c)});var l=a(!0,{},u),p=createResourceName(t,r),d=y.put(p).withQueryOption(w.COMP,"block").withQueryOption(w.BLOCK_ID,Buffer.from(e).toString("base64")).withHeader(_.COPY_SOURCE,n);l.sourceRangeStart=i,l.sourceRangeEnd=o,A.setHeadersFromBlob(d,l);this.performRequest(d,null,l,function(e,t){t(e,function(e){c(e.error,e.response)})})},BlobService.prototype._createBlock=function(e,t,r,n,i,o,s,a){var c=createResourceName(t,r),u=this,l=function(){var t=y.put(c).withQueryOption(w.COMP,"block").withQueryOption(w.BLOCK_ID,Buffer.from(e).toString("base64")).withHeader(_.CONTENT_LENGTH,o);A.setHeadersFromBlob(t,s);var r=function(e,t){t(e,function(e){a(e.error,e.response)})};h.objectIsNull(n)?u.performRequestOutputStream(t,i,s,r):u.performRequest(t,n,s,r)};h.objectIsNull(s.transactionalContentMD5)&&s.useTransactionalMD5?h.objectIsNull(n)?h.calculateMD5(i,o,s,function(e,t){s.transactionalContentMD5=t,n=e,o=e.length,l()}):(s.transactionalContentMD5=h.getContentMd5(n),l()):l()},BlobService.prototype.commitBlocks=function(e,t,r,n,i){var o;h.normalizeArgs(n,i,function(e,t){o=e,i=t}),m.validateArgs("commitBlocks",function(n){n.string(e,"container"),n.string(t,"blob"),n.object(r,"blockList"),n.containerNameIsValid(e),n.callback(i)});var s=N.serialize(r),c=createResourceName(e,t),u=a(!0,{},o),l=y.put(c).withQueryOption(w.COMP,"blocklist").withHeader(_.CONTENT_LENGTH,Buffer.byteLength(s)).withBody(s);A.setPropertiesFromBlob(l,u);this.performRequest(l,l.body,u,function(n,o){n.blobResult=new A(e,t),n.blobResult.list=null,n.error||(n.blobResult.getPropertiesFromHeaders(n.response.headers),n.blobResult.list=r);o(n,function(e){i(e.error,e.blobResult,e.response)})})},BlobService.prototype.listBlocks=function(e,t,r,n,i){var o;h.normalizeArgs(n,i,function(e,t){o=e,i=t}),m.validateArgs("listBlocks",function(r){r.string(e,"container"),r.string(t,"blob"),r.containerNameIsValid(e),r.callback(i)});var s=createResourceName(e,t),c=a(!0,{},o),u=y.get(s).withQueryOption(w.COMP,"blocklist").withQueryOption(w.BLOCK_LIST_TYPE,r).withQueryOption(w.SNAPSHOT,c.snapshotId);c.requestLocationMode=E.PRIMARY_OR_SECONDARY;this.performRequest(u,null,c,function(e,t){e.blockListResult=null,e.error||(e.blockListResult=N.parse(e.response.body.BlockList));t(e,function(e){i(e.error,e.blockListResult,e.response)})})},BlobService.prototype.generateBlockIdPrefix=function(){var e=Math.floor(4294967296*Math.random()).toString(16);return h.zeroPaddingString(e,8)},BlobService.prototype.getBlockId=function(e,t){return e+"-"+h.zeroPaddingString(t,6)},BlobService.prototype.createOrReplaceAppendBlob=function(e,t,r,n){var i;h.normalizeArgs(r,n,function(e,t){i=e,n=t}),m.validateArgs("createOrReplaceAppendBlob",function(r){r.string(e,"container"),r.string(t,"blob"),r.containerNameIsValid(e),r.callback(n)});var o=a(!0,{},i),s=createResourceName(e,t),c=y.put(s).withHeader(_.BLOB_TYPE,b.BlobTypes.APPEND).withHeader(_.LEASE_ID,o.leaseId).withHeader(_.CONTENT_LENGTH,0);A.setHeadersFromBlob(c,o);this.performRequest(c,null,o,function(e,t){t(e,function(e){n(e.error,e.response)})})},BlobService.prototype.createAppendBlobFromStream=function(e,t,r,n,i,o){return this._createBlobFromStream(e,t,b.BlobTypes.APPEND,r,n,i,o)},BlobService.prototype.createAppendBlobFromText=function(e,t,r,n,i){return this._createBlobFromText(e,t,b.BlobTypes.APPEND,r,n,i)},BlobService.prototype.createWriteStreamToNewAppendBlob=function(e,t,r,n){return this._createWriteStreamToBlob(e,t,b.BlobTypes.APPEND,0,!0,r,n)},BlobService.prototype.createWriteStreamToExistingAppendBlob=function(e,t,r,n){return this._createWriteStreamToBlob(e,t,b.BlobTypes.APPEND,0,!1,r,n)},BlobService.prototype.appendFromStream=function(e,t,r,n,i,o){var s;return h.normalizeArgs(i,o,function(e,t){s=e,o=t}),m.validateArgs("appendFromStream",function(i){i.string(e,"container"),i.string(t,"blob"),i.containerNameIsValid(e),i.exists(r,"stream"),i.value(n,"streamLength"),i.callback(o)}),this._uploadBlobFromStream(!1,e,t,b.BlobTypes.APPEND,r,n,s,o)},BlobService.prototype.appendFromText=function(e,t,r,n,i){return this._uploadBlobFromText(!1,e,t,b.BlobTypes.APPEND,r,n,i)},BlobService.prototype.appendBlockFromStream=function(e,t,r,n,i,o){var s;h.normalizeArgs(i,o,function(e,t){s=e,o=t}),m.validateArgs("appendBlockFromStream",function(i){i.string(e,"container"),i.string(t,"blob"),i.containerNameIsValid(e),i.exists(r,"readStream"),i.value(n,"streamLength"),i.callback(o)});var c=a(!0,{},s);if(n>b.MAX_APPEND_BLOB_BLOCK_SIZE)throw new RangeError(f.INVALID_STREAM_LENGTH);this._appendBlock(e,t,null,r,n,c,o)},BlobService.prototype.appendBlockFromText=function(e,t,r,n,i){var o;h.normalizeArgs(n,i,function(e,t){o=e,i=t}),m.validateArgs("appendBlockFromText",function(r){r.string(e,"container"),r.string(t,"blob"),r.containerNameIsValid(e),r.callback(i)});var s=a(!0,{},o),c=Buffer.isBuffer(r)?r.length:Buffer.byteLength(r);if(c>b.MAX_APPEND_BLOB_BLOCK_SIZE)throw new RangeError(f.INVALID_TEXT_LENGTH);this._appendBlock(e,t,r,null,c,s,i)},BlobService.prototype._createBlobFromStream=function(e,t,r,n,i,o,s){var c;h.normalizeArgs(o,s,function(e,t){c=e,s=t}),m.validateArgs("_createBlobFromStream",function(o){o.string(e,"container"),o.string(t,"blob"),o.containerNameIsValid(e),o.blobTypeIsValid(r),o.exists(n,"stream"),o.value(i,"streamLength"),o.callback(s)});var u=a(!0,{},c),l=this;return this._createBlob(e,t,r,i,u,function(o,a,c){o?s(o,a,c):l._uploadBlobFromStream(!0,e,t,r,n,i,u,s)}),u.speedSummary},BlobService.prototype._createBlobFromText=function(e,t,r,n,i,o){var s;h.normalizeArgs(i,o,function(e,t){s=e,o=t}),m.validateArgs("_createBlobFromText",function(n){n.string(e,"container"),n.string(t,"blob"),n.containerNameIsValid(e),n.blobTypeIsValid(r),n.callback(o)});var c=a(!0,{},s),u=this,l=h.objectIsNull(n)?0:Buffer.isBuffer(n)?n.length:Buffer.byteLength(n);return this._createBlob(e,t,r,l,c,function(i,s,a){i?o(i,s,a):u._uploadBlobFromText(!0,e,t,r,n,c,o)}),c.speedSummary},BlobService.prototype._createWriteStreamToBlob=function(e,t,r,n,i,o,s){var c;h.normalizeArgs(o,s,function(e,t){c=e,s=t}),m.validateArgs("_createWriteStreamToBlob",function(n){n.string(e,"container"),n.string(t,"blob"),n.containerNameIsValid(e),n.blobTypeIsValid(r)});var u,l=a(!0,{},c);r===b.BlobTypes.BLOCK?(l.storeBlobContentMD5=!1!==l.storeBlobContentMD5,u=l.blockSize||b.DEFAULT_WRITE_BLOCK_SIZE_IN_BYTES):r==b.BlobTypes.PAGE?u=b.DEFAULT_WRITE_PAGE_SIZE_IN_BYTES:r==b.BlobTypes.APPEND&&(u=b.DEFAULT_WRITE_BLOCK_SIZE_IN_BYTES);var p=new k({calcContentMd5:l.storeBlobContentMD5});p._highWaterMark=u,p.pause();var d=this,f=function(n,o,a){n?s&&s(n,o,a):d._uploadBlobFromStream(i,e,t,r,p,null,l,function(e,t,r){e&&p.emit("error",e),s&&s(e,t,r)})};return!0===i?this._createBlob(e,t,r,n,l,f):f(),p},BlobService.prototype._uploadBlobFromStream=function(e,t,r,n,i,o,s,a){var c;h.normalizeArgs(s,a,function(e,t){c=e,a=t}),c.speedSummary=c.speedSummary||new C(r),n===b.BlobTypes.BLOCK&&(c.storeBlobContentMD5=!1!==c.storeBlobContentMD5),i.pause();var u=this,l=function(){if(null===o||o>=u.singleBlobPutThresholdInBytes||n!==b.BlobTypes.BLOCK){var e=new R(i,{calcContentMd5:c.storeBlobContentMD5});u._uploadContentFromChunkStream(t,r,n,e,o,c,a)}else o>0&&h.objectIsNull(h.tryGetValueChain(c,["contentSettings","contentMD5"],null))&&c.storeBlobContentMD5?(h.calculateMD5(i,Math.min(u.singleBlobPutThresholdInBytes,o),c,function(e,n){h.setObjectInnerPropertyValue(c,["contentSettings","contentMD5"],n),u._putBlockBlob(t,r,e,null,e.length,c,a)}),i.resume()):u._putBlockBlob(t,r,null,i,o,c,a)};if(e)l();else{if(c.storeBlobContentMD5&&n!==b.BlobTypes.BLOCK)throw new Error(f.MD5_NOT_POSSIBLE);n===b.BlobTypes.APPEND||c.accessConditions?this.getBlobProperties(t,r,c,function(e,t,r){!e||c.accessConditions&&"*"===c.accessConditions.EtagNonMatch&&400===r.statusCode?(n===b.BlobTypes.APPEND&&(c.appendPosition=t.contentLength),l()):a(e)}):l()}return c.speedSummary},BlobService.prototype._uploadBlobFromText=function(e,t,r,n,i,o,s){var c;h.normalizeArgs(o,s,function(e,t){c=e,s=t}),c.speedSummary=c.speedSummary||new C(r),c[_.CONTENT_TYPE]=c.contentSettings&&c.contentSettings.contentType||'text/plain;charset="utf-8"';var u=this,l=function(){var e,o=h.objectIsNull(i)?0:Buffer.isBuffer(i)?i.length:Buffer.byteLength(i);if(n===b.BlobTypes.BLOCK){if(c.storeBlobContentMD5=!1!==c.storeBlobContentMD5,e=u._putBlockBlob,o>b.MAX_SINGLE_UPLOAD_BLOB_SIZE_IN_BYTES)throw new RangeError(f.INVALID_BLOB_LENGTH)}else if(n===b.BlobTypes.APPEND&&(e=u._appendBlock,o>b.MAX_APPEND_BLOB_BLOCK_SIZE))throw new RangeError(f.INVALID_TEXT_LENGTH);e.call(u,t,r,i,null,o,c,function(e,i,o){n!==b.BlobTypes.BLOCK?u.setBlobProperties(t,r,c.contentSettings,c,function(e,t,r){t=a(!1,t,i),s(e,t,r)}):s(e,i,o)})};if(e)!h.objectIsNull(i)&&h.objectIsNull(h.tryGetValueChain(c,["contentSettings","contentMD5"],null))&&c.storeBlobContentMD5&&h.setObjectInnerPropertyValue(c,["contentSettings","contentMD5"],h.getContentMd5(i)),l();else{if(c.storeBlobContentMD5&&n!==b.BlobTypes.BLOCK)throw new Error(f.MD5_NOT_POSSIBLE);(n===b.BlobTypes.APPEND||c.accessConditions)&&this.getBlobProperties(t,r,c,function(e,t){e?s(e):(n===b.BlobTypes.APPEND&&(c.appendPosition=t.contentLength),l())})}},BlobService.prototype._putBlockBlob=function(e,t,r,n,i,o,s){o.speedSummary||(o.speedSummary=new C(t));var a=o.speedSummary;a.totalSize=i;var c=createResourceName(e,t),u=y.put(c).withHeader(_.CONTENT_TYPE,"application/octet-stream").withHeader(_.BLOB_TYPE,b.BlobTypes.BLOCK).withHeader(_.CONTENT_LENGTH,i);!h.objectIsNull(r)&&h.objectIsNull(o.transactionalContentMD5)&&o.useTransactionalMD5&&(o.transactionalContentMD5=h.getContentMd5(r)),A.setHeadersFromBlob(u,o);var l=function(r,n){r.blobResult=null,r.error||(r.blobResult=new A(e,t),r.blobResult.getPropertiesFromHeaders(r.response.headers),o.metadata&&(r.blobResult.metadata=o.metadata));n(r,function(e){e&&e.error||a.increment(i),s(e.error,e.blobResult,e.response)})};return h.objectIsNull(r)?this.performRequestOutputStream(u,n,o,l):this.performRequest(u,r,o,l),o.speedSummary},BlobService.prototype._appendBlock=function(e,t,r,n,i,o,s){var a=o.speedSummary||new C(t);a.totalSize=i;var c=this,u=function(){var u=createResourceName(e,t),l=y.put(u).withQueryOption(w.COMP,"appendblock").withHeader(_.CONTENT_LENGTH,i).withHeader(_.BLOB_CONDITION_MAX_SIZE,o.maxBlobSize).withHeader(_.BLOB_CONDITION_APPEND_POSITION,o.appendPosition);A.setHeadersFromBlob(l,o);var p=function(r,n){r.blobResult=null,r.error||(r.blobResult=new A(e,t),r.blobResult.getPropertiesFromHeaders(r.response.headers));n(r,function(e){e&&e.error||a.increment(i),s(e.error,e.blobResult,e.response)})};h.objectIsNull(r)?c.performRequestOutputStream(l,n,o,p):c.performRequest(l,r,o,p)};return h.objectIsNull(o.transactionalContentMD5)&&o.useTransactionalMD5?h.objectIsNull(r)?h.calculateMD5(n,i,o,function(e,t){o.transactionalContentMD5=t,r=e,i=e.length,u()}):(o.transactionalContentMD5=h.getContentMd5(r),u()):u(),o.speedSummary},BlobService.prototype._leaseImpl=function(e,t,r,n,i,o){var s;if(h.objectIsNull(t))s=y.put(e).withQueryOption(w.RESTYPE,"container");else{m.validateArgs("_leaseImpl",function(e){e.string(t,"blob")});var a=createResourceName(e,t);s=y.put(a)}s.withQueryOption(w.COMP,"lease").withHeader(_.LEASE_ID,r).withHeader(_.LEASE_ACTION,n.toLowerCase()).withHeader(_.LEASE_BREAK_PERIOD,i.leaseBreakPeriod).withHeader(_.PROPOSED_LEASE_ID,i.proposedLeaseId).withHeader(_.LEASE_DURATION,i.leaseDuration);this.performRequest(s,null,i,function(r,n){r.leaseResult=null,r.error||(r.leaseResult=new L(e,t),r.leaseResult.getPropertiesFromHeaders(r.response.headers));n(r,function(e){o(e.error,e.leaseResult,e.response)})})},BlobService.prototype._createPages=function(e,t,r,n,i,o,s,a){var c=this._updatePageBlobPagesImpl(e,t,i,o,b.PageWriteOptions.UPDATE,s);!h.objectIsNull(r)&&h.objectIsNull(s.transactionalContentMD5)&&s.useTransactionalMD5&&c.withHeader(_.CONTENT_MD5,h.getContentMd5(r));var u=function(r,n){r.blobResult=null,r.error||(r.blobResult=new A(e,t),r.blobResult.getPropertiesFromHeaders(r.response.headers));n(r,function(e){a(e.error,e.blobResult,e.response)})};h.objectIsNull(r)?this.performRequestOutputStream(c,n,s,u):this.performRequest(c,r,s,u)},BlobService.prototype._updatePageBlobPagesImpl=function(e,t,r,n,i,o){if(r&&r%b.PAGE_SIZE!=0)throw new RangeError(f.INVALID_PAGE_START_OFFSET);if(n&&(n+1)%b.PAGE_SIZE!=0)throw new RangeError(f.INVALID_PAGE_END_OFFSET);o||(o={}),o.rangeStart=r,o.rangeEnd=n,o.contentLength=i===b.PageWriteOptions.UPDATE?n-r+1:0;var s=createResourceName(e,t),a=y.put(s).withQueryOption(w.COMP,"page").withHeader(_.CONTENT_TYPE,"application/octet-stream").withHeader(_.PAGE_WRITE,i);return A.setHeadersFromBlob(a,o),a},BlobService.prototype._uploadContentFromChunkStream=function(e,t,r,n,i,s,c){var u,l,p,d,m;this.logger.debug(o.format("_uploadContentFromChunkStream for blob %s",t));var g=h.tryGetValueChain(s,["contentSettings","contentMD5"],null),y=s.parallelOperationThreadCount||this.parallelOperationThreadCount;if(r==b.BlobTypes.BLOCK){u="createBlockFromText",l=!0;var v=Math.ceil(i/5e4);if(s.blockSize){if(s.blockSize<v){var _=new j("options.blockSize",o.format("The minimum blockSize is %s and the provided blockSize %s is too small.",v,s.blockSize));return void c(_)}m=s.blockSize}else m=Math.max(v,b.DEFAULT_WRITE_BLOCK_SIZE_IN_BYTES)}else if(r==b.BlobTypes.PAGE)u="_createPages",p=!0,m=b.DEFAULT_WRITE_PAGE_SIZE_IN_BYTES;else{if(r!=b.BlobTypes.APPEND){_=new j("blobType",o.format("Unknown blob type %s",r));return void c(_)}u="appendBlockFromText",d=!0,y=1,m=b.DEFAULT_WRITE_BLOCK_SIZE_IN_BYTES}n._highWaterMark=m,this._setOperationExpiryTime(s);var w=s.speedSummary||new C(t);w.totalSize=i;var E=new x(m,y,{logger:this.logger});if(n.setMemoryAllocator(E),n.setOutputLength(i),n._stream&&n._stream.setMemoryAllocator){var k=new x(n._stream._highWaterMark,y,{logger:this.logger});n._stream.setMemoryAllocator(k)}var R=new S(u,{callInOrder:d,callbackInOrder:d,logger:this.logger,enableReuseSocket:this.defaultEnableReuseSocket,operationMemoryUsage:m});R.setConcurrency(y);var T={leaseId:s.leaseId,timeoutIntervalInMs:s.timeoutIntervalInMs,clientRequestTimeoutInMs:s.clientRequestTimeoutInMs,operationExpiryTime:s.operationExpiryTime,maxBlobSize:s.maxBlobSize,appendPosition:s.appendPosition||0,initialAppendPosition:s.appendPosition||0,absorbConditionalErrorsOnRetry:s.absorbConditionalErrorsOnRetry},O=s.blockIdPrefix||this.generateBlockIdPrefix(),I=0,N=[],A={},P=this;return n.on("data",function(r,a){var c=null,g=!1,y=w.getAutoIncrementFunction(r.length);if(r.length>m)throw new RangeError(o.format(f.EXCEEDED_SIZE_LIMITATION,m,r.length));if(s.useTransactionalMD5){var v=h.getContentMd5(r);T.transactionalContentMD5=v}var b=function(){return!i||(a.start>=i?(P.logger.debug(o.format("Stop uploading data from %s bytes to %s bytes to blob %s because of limit %s",a.start,a.end,t,i)),n.stop(),!1):(a.end>=i&&(P.logger.debug(o.format("Clip uploading data from %s bytes to %s bytes to blob %s because of limit %s",a.start,a.end,t,i)),a.end=i-1,r=r.slice(0,i-a.start),s.useTransactionalMD5&&(T.transactionalContentMD5=h.getContentMd5(r))),!0))};l?function(){if(b()){var i=P.getBlockId(O,I);N.push(i),c=new S.RestOperation(P,u,i,e,t,r,T,function(e){e?(P.logger.debug(o.format("Stop uploading data as error happens. Error: %s",o.inspect(e))),n.stop()):y(),E.releaseBuffer(r),r=null}),I++}}():d?function(){if(b()){if(T.appendPosition=Number(T.initialAppendPosition)+Number(a.start),s.maxBlobSize&&T.appendPosition+r.length>s.maxBlobSize)throw new Error(f.MAX_BLOB_SIZE_CONDITION_NOT_MEET);c=new S.RestOperation(P,u,e,t,r,T,function(e,t){e?(P.logger.debug(o.format("Stop uploading data as error happens. Error: %s",o.inspect(e))),n.stop()):y(),A=t,E.releaseBuffer(r),r=null})}}():p&&b()&&(h.isBufferAllZero(r)?(P.logger.debug(o.format("Skip upload data from %s bytes to %s bytes to blob %s",a.start,a.end,t)),w.increment(r.length)):(P.logger.debug(o.format("Upload data from %s bytes to %s bytes to blob %s",a.start,a.end,t)),c=new S.RestOperation(P,u,e,t,r,null,a.start,a.end,T,function(e){e?(P.logger.debug(o.format("Stop uploading data as error happens. Error: %s",o.inspect(e))),n.stop()):y(),E.releaseBuffer(r),r=null}))),c&&(g=R.addOperation(c),c=null,g&&(P.logger.debug("File stream paused"),n.pause()))}),n.on("end",function(){P.logger.debug(o.format("File read stream ended for blob %s",t)),R.enableComplete()}),R.on("drain",function(){P.logger.debug("file stream resume"),n.resume()}),R.on("end",function(r){if(P.logger.debug("batch operations commited"),w=null,r)c(r);else{if(g)s.contentSettings.contentMD5=g;else if(s.storeBlobContentMD5){var i=n.getContentMd5("base64");h.setObjectInnerPropertyValue(s,["contentSettings","contentMD5"],i)}if(l){var u={UncommittedBlocks:N};P.commitBlocks(e,t,u,s,function(e,r,i){P.logger.debug(o.format("Blob %s committed",t)),e?(n.finish(),c(e)):(A.commmittedBlocks=N,n.finish(),c(e,A,i))})}else{var p=s.contentSettings;P.setBlobProperties(e,t,p,function(e,t,r){n.finish(),t=a(!1,t,A),c(e,t,r)})}}}),w},BlobService.prototype._doesContainerExist=function(e,t,r,n){var i=y.head(e).withQueryOption(w.RESTYPE,"container").withHeader(_.LEASE_ID,r.leaseId);!1===t&&(r.requestLocationMode=E.PRIMARY_OR_SECONDARY);this.performRequest(i,null,r,function(t,r){t.containerResult=new P(e),t.error?t.error&&t.error.statusCode===v.HttpConstants.HttpResponseCodes.NotFound&&(t.error=null,t.containerResult.exists=!1,t.response.isSuccessful=!0):(t.containerResult.exists=!0,t.containerResult.getPropertiesFromHeaders(t.response.headers));r(t,function(e){n(e.error,e.containerResult,e.response)})})},BlobService.prototype._doesBlobExist=function(e,t,r,n,i){var o=createResourceName(e,t),s=y.head(o).withQueryOption(w.SNAPSHOT,n.snapshotId).withHeader(_.LEASE_ID,n.leaseId);!1===r&&(n.requestLocationMode=E.PRIMARY_OR_SECONDARY);this.performRequest(s,null,n,function(r,n){r.blobResult=new A(e,t),r.error?r.error&&r.error.statusCode===v.HttpConstants.HttpResponseCodes.NotFound&&(r.error=null,r.blobResult.exists=!1,r.response.isSuccessful=!0):(r.blobResult.exists=!0,r.blobResult.getPropertiesFromHeaders(r.response.headers));n(r,function(e){i(e.error,e.blobResult,e.response)})})},BlobService.prototype._setBlobPropertiesHelper=function(e){this.performRequest(e.webResource,null,e.options,function(t,r){t.blobResult=null,t.error||(t.blobResult=new A(e.container,e.blob),t.blobResult.getPropertiesFromHeaders(t.response.headers));r(t,function(t){e.callback(t.error,t.blobResult,t.response)})})},BlobService.prototype._validateLengthAndMD5=function(e,t){var r,n=t.response.headers[v.HeaderConstants.CONTENT_MD5];h.objectIsNull(t.response.headers[v.HeaderConstants.CONTENT_LENGTH])||(r=parseInt(t.response.headers[v.HeaderConstants.CONTENT_LENGTH],10)),h.objectIsNull(e.disableContentMD5Validation)&&(e.disableContentMD5Validation=!1),!1===e.disableContentMD5Validation&&!0===e.useTransactionalMD5&&h.objectIsNull(n)&&(t.error=new F(f.MD5_NOT_PRESENT_ERROR),t.retryable=!1),h.objectIsNull(t.length)&&("string"==typeof t.response.body?t.length=Buffer.byteLength(t.response.body):Buffer.isBuffer(t.response.body)&&(t.length=t.response.body.length)),h.objectIsNull(r)||t.length===r||(t.error=new Error(f.CONTENT_LENGTH_MISMATCH),t.retryable=!1),!1===e.disableContentMD5Validation&&h.objectIsNull(t.contentMD5)&&(t.contentMD5=h.getContentMd5(t.response.body)),!1!==e.disableContentMD5Validation||h.objectIsNull(n)||n===t.contentMD5||(t.error=new Error(o.format(f.HASH_MISMATCH,n,t.contentMD5)),t.retryable=!1)},BlobService.prototype._setRangeContentMD5Header=function(e,t){if(!h.objectIsNull(t.rangeStart)&&t.useTransactionalMD5){if(h.objectIsNull(t.rangeEnd))throw new q("options.rangeEndHeader",o.format(f.ARGUMENT_NULL_OR_EMPTY,t.rangeEndHeader));if(parseInt(t.rangeEnd,10)-parseInt(t.rangeStart,10)+1>b.MAX_RANGE_GET_SIZE_WITH_MD5)throw new j("options",f.INVALID_RANGE_FOR_MD5);e.withHeader(_.RANGE_GET_CONTENT_MD5,"true")}},BlobService.prototype._getBlobToRangeStream=function(e,t,r,n,i,s){var a;h.normalizeArgs(i,s,function(e,t){a=e,s=t}),m.validateArgs("_getBlobToRangeStream",function(n){n.string(e,"container"),n.string(t,"blob"),n.containerNameIsValid(e),n.blobNameIsValid(e,t),n.blobTypeIsValid(r),n.callback(s)});var c=null,f=!0;r==b.BlobTypes.PAGE?c=new p(this,e,t,a):r==b.BlobTypes.APPEND?(c=new d(this,e,t,a),f=!1):r==b.BlobTypes.BLOCK&&(c=new u(this,e,t,a),f=!1),a.speedSummary||(a.speedSummary=new C(t));var g=a.speedSummary,y=a.parallelOperationThreadCount||this.parallelOperationThreadCount,v=new S("getBlobInRanges",{callbackInOrder:!0,logger:this.logger,enableReuseSocket:this.defaultEnableReuseSocket});v.setConcurrency(y);var _=this,w=!a.disableContentMD5Validation,E=null;w&&(E=(new l).createMd5Hash());var x=null,k=null;c.on("range",function(r){g.totalSize||(g.totalSize=c.rangeSize);var i={rangeStart:r.start,rangeEnd:r.end,responseEncoding:null},s=r.size;if(i.timeoutIntervalInMs=a.timeoutIntervalInMs,i.clientRequestTimeoutInMs=a.clientRequestTimeoutInMs,i.useTransactionalMD5=a.useTransactionalMD5,i.snapshotId=a.snapshotId,0!==r.dataSize){if(!(r.start>r.end)){var u=new S.RestOperation(_,"getBlobToText",e,t,i,function(e,t,r,i){if(e)_.logger.debug(o.format("Stop downloading data as error happens. Error: %s",o.inspect(e))),c.stop();else{s!==t.length&&_.logger.warn(o.format("Request %s bytes, but server returns %s bytes",s,t.length)),x||(x=r),k||(k=i);var a=g.getAutoIncrementFunction(t.length);n.write(t,a)||(_.logger.debug("Write stream is full and pause batch operation"),v.pause()),E&&E.update(t),t=null}});v.addOperation(u)&&(_.logger.debug("Pause range stream"),c.pause())}}else if(f){var l=g.getAutoIncrementFunction(s),p=new S.CommonOperation(S.noOperation,function(e){if(!e){var t=h.writeZerosToStream(n,s,E,l);_.logger.debug(o.format("Write %s bytes Zero from %s to %s",s,r.start,r.end)),t||(_.logger.debug("Write stream is full and pause batch operation"),v.pause())}});v.addOperation(p)}else _.logger.debug(o.format("Can not read %s bytes to %s bytes of blob %s",r.start,r.end,t))}),c.on("end",function(){_.logger.debug("Range stream has ended."),v.enableComplete()}),v.on("drain",function(){_.logger.debug("Resume range stream"),c.resume()}),n.on("drain",function(){_.logger.debug("Resume batch operations"),v.resume()}),v.on("end",function(e){_.logger.debug("Download completed!"),e?s(e):n.end(function(){_.logger.debug("Write stream has ended"),x||(x={}),h.setObjectInnerPropertyValue(x,["contentSettings","contentMD5"],h.tryGetValueChain(a,["contentSettings","contentMD5"],null)),x.clientSideContentMD5=null,E&&(x.clientSideContentMD5=E.digest("base64")),s(e,x,k)})});var R={timeoutIntervalInMs:a.timeoutIntervalInMs,clientRequestTimeoutInMs:a.clientRequestTimeoutInMs,snapshotId:a.snapshotId,leaseId:a.leaseId,blockListFilter:D.BlockListFilter.COMMITTED};return c.list(R,function(e){s(e)}),g},BlobService.prototype._getBlobToStream=function(e,t,r,n,i){var o;h.normalizeArgs(n,i,function(e,t){o=e,i=t});var s=createResourceName(e,t),c=y.get(s).withRawResponse(),u=a(!0,{},o);c.withQueryOption(w.SNAPSHOT,u.snapshotId),A.setHeadersFromBlob(c,u),this._setRangeContentMD5Header(c,u);var l=this;this.performRequestInputStream(c,null,r,u,function(r,n){r.blobResult=null,r.error||(r.blobResult=new A(e,t),r.blobResult.metadata=l.parseMetadataHeaders(r.response.headers),r.blobResult.getPropertiesFromHeaders(r.response.headers),l._validateLengthAndMD5(u,r),u.speedSummary&&u.speedSummary.increment(r.length));n(r,function(e){i(e.error,e.blobResult,e.response)})})},BlobService.prototype._listBlobsOrDircotriesSegmentedWithPrefix=function(e,t,r,n,i,o){var c;h.normalizeArgs(i,o,function(e,t){c=e,o=t}),m.validateArgs("listBlobsSegmented",function(t){t.string(e,"container"),t.containerNameIsValid(e),t.callback(o)});var u=a(!0,{},c),l=y.get(e).withQueryOption(w.RESTYPE,"container").withQueryOption(w.COMP,"list").withQueryOption(w.MAX_RESULTS,u.maxResults).withQueryOptions(u,w.DELIMITER,w.INCLUDE);h.objectIsNull(r)||l.withQueryOption(w.MARKER,r.nextMarker),l.withQueryOption(w.PREFIX,t),u.requestLocationMode=h.getNextListingLocationMode(r);this.performRequest(l,null,u,function(e,t){if(e.listBlobsResult=null,!e.error){e.listBlobsResult={entries:null,continuationToken:null},e.listBlobsResult.entries=[];var r=[];n==b.ListBlobTypes.Directory&&e.response.body.EnumerationResults.Blobs.BlobPrefix?(r=e.response.body.EnumerationResults.Blobs.BlobPrefix,s.isArray(r)||(r=[r])):n==b.ListBlobTypes.Blob&&e.response.body.EnumerationResults.Blobs.Blob&&(r=e.response.body.EnumerationResults.Blobs.Blob,s.isArray(r)||(r=[r])),r.forEach(function(t){var r=A.parse(t);e.listBlobsResult.entries.push(r)}),e.response.body.EnumerationResults.NextMarker&&(e.listBlobsResult.continuationToken={nextMarker:null,targetLocation:null},e.listBlobsResult.continuationToken.nextMarker=e.response.body.EnumerationResults.NextMarker,e.listBlobsResult.continuationToken.targetLocation=e.targetLocation)}t(e,function(e){o(e.error,e.listBlobsResult,e.response)})})},BlobService.prototype._createBlob=function(e,t,r,n,i,o){r==b.BlobTypes.APPEND?this.createOrReplaceAppendBlob(e,t,i,function(e,t){o(e,null,t)}):r==b.BlobTypes.PAGE?this.createPageBlob(e,t,n,i,function(e){o(e)}):r==b.BlobTypes.BLOCK&&o()},BlobService.SpeedSummary=C,e.exports=BlobService},function(e,t,r){var n=r(22),i=r(5).EventEmitter,o=r(121);function BlockRangeStream(e,t,r,n){this.blobServiceClient=e,this.container=t,this.blob=r,this._emitter=new i,this._paused=!1,this._emittedAll=!1,this._emittedRangeType=null,this._emittedRangeIndex=null,this._offset=0,this._rangelist=[],this._isEmitting=!1,n.rangeStart?this._startOffset=n.rangeStart:this._startOffset=0,n.rangeEnd?this._endOffset=n.rangeEnd:this._endOffset=Number.MAX_VALUE}BlockRangeStream.prototype.on=function(e,t){this._emitter.on(e,t)},BlockRangeStream.prototype.list=function(e,t){e||(e={}),e.blockListFilter||(e.blockListFilter=o.BlockListFilter.ALL);var r=this;this.blobServiceClient.listBlocks(this.container,this.blob,e.blockListFilter,e,function(e,i,o){if(e)t(e);else{var s=parseInt(o.headers[n.HeaderConstants.BLOB_CONTENT_LENGTH],10);if(!i.CommittedBlocks){i.CommittedBlocks=[{Name:"NODESDK_BLOCKBLOB_RANGESTREAM",Size:s}]}r._rangelist=i,r._emitBlockList(),r=i=null}})},BlockRangeStream.prototype._emitBlockList=function(){if(!(this._paused||this._emittedAll||this._isEmitting)){var e=this;this._getTypeList(function(){e._rangelist=null,e._emittedAll=!0,e._emitter.emit("end")})}},BlockRangeStream.prototype._getTypeList=function(e){this._isEmitting=!0;try{var t=!1;if(this._rangelist)for(var r in this._rangelist)if(this._rangelist.hasOwnProperty(r)){if(null===this._emittedRangeType||t||this._emittedRangeType==r)this._emittedRangeType=r,t=!0;else if(this._emittedRangeType!==r)continue;if(this._paused)return;this._emitBlockRange(r,e)}}finally{this._isEmitting=!1}},BlockRangeStream.prototype._emitBlockRange=function(e,t){for(var r=this._rangelist[e],n=!1,i=0;i<r.length;i++){if(null===this._emittedRangeIndex||n||this._emittedRangeIndex===i)this._emittedRangeIndex=i,n=!0;else if(this._emittedRangeIndex!==i)continue;if(this._paused)return;var o=r[i];if(o.name=o.Name,o.type=e,o.start=this._offset,this._offset+=parseInt(o.Size,10),o.end=this._offset-1,delete o.Name,delete o.Size,o.start>this._endOffset)break;o.end<this._startOffset||(o.start=Math.max(o.start,this._startOffset),o.end=Math.min(o.end,this._endOffset),o.size=o.end-o.start+1,o.dataSize=o.size,this._emitter.emit("range",o))}this._rangelist[e]=null,t()},BlockRangeStream.prototype.pause=function(){this._paused=!0},BlockRangeStream.prototype.resume=function(){this._paused=!1,this._isEmitting||this._emitBlockList()},BlockRangeStream.prototype.stop=function(){this.pause(),this._emittedAll=!0,this._emitter.emit("end")},e.exports=BlockRangeStream},function(e,t,r){var n=r(1),i=r(207),o=r(22);function PageRangeStream(e,t,r,n){PageRangeStream.super_.call(this,e,t,r,n),n.minRangeSize?this._minRangeSize=n.minRangeSize:this._minRangeSize=o.BlobConstants.MIN_WRITE_PAGE_SIZE_IN_BYTES,n.maxRangeSize?this._maxRangeSize=n.maxRangeSize:this._maxRangeSize=o.BlobConstants.DEFAULT_WRITE_PAGE_SIZE_IN_BYTES,this._lengthHeader=o.HeaderConstants.BLOB_CONTENT_LENGTH,this._listFunc=e.listPageRanges}n.inherits(PageRangeStream,i),e.exports=PageRangeStream},function(e,t,r){var n=r(22).HeaderConstants;t.parse=function(e){var t={};return e[n.SKU_NAME]&&(t.SkuName=e[n.SKU_NAME]),e[n.ACCOUNT_KIND]&&(t.AccountKind=e[n.ACCOUNT_KIND]),t}},function(e,t,r){var n=r(29),i=r(20),o=i.xmlbuilder,s=i.Constants;t.serialize=function(e){var t=o.create(s.BlobConstants.BLOCK_LIST_ELEMENT,{version:"1.0",encoding:"utf-8"});return n.isArray(e.LatestBlocks)&&e.LatestBlocks.forEach(function(e){t=t.ele(s.BlobConstants.LATEST_ELEMENT).txt(Buffer.from(e).toString("base64")).up()}),n.isArray(e.CommittedBlocks)&&e.CommittedBlocks.forEach(function(e){t=t.ele(s.BlobConstants.COMMITTED_ELEMENT).txt(Buffer.from(e).toString("base64")).up()}),n.isArray(e.UncommittedBlocks)&&e.UncommittedBlocks.forEach(function(e){t=t.ele(s.BlobConstants.UNCOMMITTED_ELEMENT).txt(Buffer.from(e).toString("base64")).up()}),t.doc().toString()},t.parse=function(e){var t={};return e.CommittedBlocks&&e.CommittedBlocks.Block&&(t.CommittedBlocks=e.CommittedBlocks.Block,n.isArray(t.CommittedBlocks)||(t.CommittedBlocks=[t.CommittedBlocks]),t.CommittedBlocks.forEach(function(e){e.Name=Buffer.from(e.Name,"base64").toString()})),e.UncommittedBlocks&&e.UncommittedBlocks.Block&&(t.UncommittedBlocks=e.UncommittedBlocks.Block,n.isArray(t.UncommittedBlocks)||(t.UncommittedBlocks=[t.UncommittedBlocks]),t.UncommittedBlocks.forEach(function(e){e.Name=Buffer.from(e.Name,"base64").toString()})),t}},function(e,t,r){var n=r(29),i=r(20),o=i.util,s=i.Constants.HeaderConstants;function BlobResult(e,t){e&&(this.container=e),t&&(this.name=t)}BlobResult.parse=function(e){var t=new BlobResult;for(var r in e)if(e.hasOwnProperty(r))if("Properties"===r)o.setPropertyValueFromXML(t,e[r],!0);else if("Metadata"===r){var n=o.normalizePropertyNameFromXML(r);t[n]={},o.setPropertyValueFromXML(t[n],e[r],!1)}else t[r.toLowerCase()]=e[r];return void 0!==t.isIncrementalCopy&&(t.isIncrementalCopy="true"===t.isIncrementalCopy),void 0!==t.accessTierInferred&&(t.accessTierInferred="true"===t.accessTierInferred),void 0!==t.deleted&&(t.deleted="true"==t.deleted),void 0!==t.remainingRetentionDays&&(t.remainingRetentionDays=parseInt(t.remainingRetentionDays)),t};var a={lastModified:"LAST_MODIFIED",creationTime:"CREATION_TIME",etag:"ETAG",sequenceNumber:"SEQUENCE_NUMBER",blobType:"BLOB_TYPE",contentLength:"CONTENT_LENGTH",blobContentLength:"BLOB_CONTENT_LENGTH",contentRange:"CONTENT_RANGE",committedBlockCount:"BLOB_COMMITTED_BLOCK_COUNT",serverEncrypted:"SERVER_ENCRYPTED",requestId:"REQUEST_ID",range:"RANGE",blobRange:"STORAGE_RANGE",getContentMd5:"RANGE_GET_CONTENT_MD5",acceptRanges:"ACCEPT_RANGES",appendOffset:"BLOB_APPEND_OFFSET",accessTier:"ACCESS_TIER",accessTierChangeTime:"ACCESS_TIER_CHANGE_TIME",accessTierInferred:"ACCESS_TIER_INFERRED",archiveStatus:"ARCHIVE_STATUS",isIncrementalCopy:"INCREMENTAL_COPY","contentSettings.contentType":"CONTENT_TYPE","contentSettings.contentEncoding":"CONTENT_ENCODING","contentSettings.contentLanguage":"CONTENT_LANGUAGE","contentSettings.cacheControl":"CACHE_CONTROL","contentSettings.contentDisposition":"CONTENT_DISPOSITION","contentSettings.contentMD5":"CONTENT_MD5","lease.id":"LEASE_ID","lease.status":"LEASE_STATUS","lease.duration":"LEASE_DURATION","lease.state":"LEASE_STATE","copy.id":"COPY_ID","copy.status":"COPY_STATUS","copy.source":"COPY_SOURCE","copy.progress":"COPY_PROGRESS","copy.completionTime":"COPY_COMPLETION_TIME","copy.statusDescription":"COPY_STATUS_DESCRIPTION","copy.destinationSnapshot":"COPY_DESTINATION_SNAPSHOT"};BlobResult.prototype.getPropertiesFromHeaders=function(e){var t=this,r=function(r,n){if(!o.tryGetValueChain(t,r.split("."),null)&&e[n.toLowerCase()]&&(o.setObjectInnerPropertyValue(t,r.split("."),e[n.toLowerCase()]),"copy.progress"===r)){var i=o.parseCopyProgress(t.copy.progress);t.copy.bytesCopied=parseInt(i.bytesCopied),t.copy.totalBytes=parseInt(i.totalBytes)}};r("contentSettings.contentMD5",s.BLOB_CONTENT_MD5),n.chain(a).pairs().each(function(e){var t=e[0],n=s[e[1]];r(t,n)}),void 0!==t.isIncrementalCopy&&(t.isIncrementalCopy="true"===t.isIncrementalCopy),void 0!==t.accessTierInferred&&(t.accessTierInferred="true"==t.accessTierInferred)},BlobResult.setHeadersFromBlob=function(e,t){var r=function(r,n){var i=o.tryGetValueChain(t,n.split("."),null);i&&e.withHeader(r,i)};if(t){if(r(s.BLOB_CONTENT_TYPE,"contentSettings.contentType"),r(s.BLOB_CONTENT_ENCODING,"contentSettings.contentEncoding"),r(s.BLOB_CONTENT_LANGUAGE,"contentSettings.contentLanguage"),r(s.BLOB_CONTENT_DISPOSITION,"contentSettings.contentDisposition"),r(s.BLOB_CACHE_CONTROL,"contentSettings.cacheControl"),r(s.BLOB_CONTENT_MD5,"contentSettings.contentMD5"),r(s.CONTENT_LENGTH,"contentLength"),r(s.CONTENT_MD5,"transactionalContentMD5"),!o.objectIsNull(t.rangeStart)){var n="bytes="+t.rangeStart+"-";o.objectIsNull(t.rangeEnd)||(n+=t.rangeEnd),e.withHeader(s.RANGE,n)}if(!o.objectIsNull(t.sourceRangeStart)){var i="bytes="+t.sourceRangeStart+"-";o.objectIsNull(t.sourceRangeEnd)||(i+=t.sourceRangeEnd),e.withHeader(s.SOURCE_RANGE,i)}r(s.BLOB_TYPE,"blobType"),r(s.LEASE_ID,"leaseId"),r(s.SEQUENCE_NUMBER,"sequenceNumber"),r(s.SEQUENCE_NUMBER_ACTION,"sequenceNumberAction"),t.metadata&&e.addOptionalMetadataHeaders(t.metadata)}},BlobResult.setPropertiesFromBlob=function(e,t){var r=function(r,n){var i=o.tryGetValueChain(t,n.split("."),null);i&&e.withHeader(r,i)};t&&(r(s.BLOB_CONTENT_TYPE,"contentSettings.contentType"),r(s.BLOB_CONTENT_ENCODING,"contentSettings.contentEncoding"),r(s.BLOB_CONTENT_LANGUAGE,"contentSettings.contentLanguage"),r(s.BLOB_CONTENT_DISPOSITION,"contentSettings.contentDisposition"),r(s.BLOB_CACHE_CONTROL,"contentSettings.cacheControl"),r(s.BLOB_CONTENT_MD5,"contentSettings.contentMD5"),r(s.LEASE_ID,"leaseId"),t.metadata&&e.addOptionalMetadataHeaders(t.metadata))},e.exports=BlobResult},function(e,t,r){var n=r(20),i=n.util,o=n.Constants.HeaderConstants,s=r(121);function ContainerResult(e,t){e&&(this.name=e),t&&(this.publicAccessLevel=t)}ContainerResult.parse=function(e){var t=new ContainerResult;for(var r in e)if(e.hasOwnProperty(r))if("Properties"===r)i.setPropertyValueFromXML(t,e[r],!0);else if("Metadata"===r){var n=i.normalizePropertyNameFromXML(r);t[n]={},i.setPropertyValueFromXML(t[n],e[r],!1)}else t[r.toLowerCase()]=e[r];return t.publicAccessLevel||(t.publicAccessLevel=s.BlobContainerPublicAccessType.OFF),void 0!==t.hasImmutabilityPolicy&&(t.hasImmutabilityPolicy="true"===t.hasImmutabilityPolicy),void 0!==t.hasLegalHold&&(t.hasLegalHold="true"===t.hasLegalHold),t},ContainerResult.prototype.getPropertiesFromHeaders=function(e){var t=this,r=function(r,n){!i.tryGetValueChain(t,r.split("."),null)&&e[n.toLowerCase()]&&i.setObjectInnerPropertyValue(t,r.split("."),e[n.toLowerCase()])};r("etag",o.ETAG),r("lastModified",o.LAST_MODIFIED),r("lease.status",o.LEASE_STATUS),r("lease.state",o.LEASE_STATE),r("lease.duration",o.LEASE_DURATION),r("requestId",o.REQUEST_ID),r("hasImmutabilityPolicy",o.HAS_IMMUTABILITY_POLICY),r("hasLegalHold",o.HAS_LEGAL_HOLD),void 0!==t.hasImmutabilityPolicy&&(t.hasImmutabilityPolicy="true"===t.hasImmutabilityPolicy),void 0!==t.hasLegalHold&&(t.hasLegalHold="true"===t.hasLegalHold),t.publicAccessLevel||(t.publicAccessLevel=s.BlobContainerPublicAccessType.OFF,e[o.BLOB_PUBLIC_ACCESS]&&(t.publicAccessLevel=e[o.BLOB_PUBLIC_ACCESS])),"true"===t.publicAccessLevel&&(t.publicAccessLevel=s.BlobContainerPublicAccessType.CONTAINER)},e.exports=ContainerResult},function(e,t,r){var n=r(20).Constants.HeaderConstants;function LeaseResult(e,t,r,n){e&&(this.container=e),t&&(this.blob=t),r&&(this.id=r),n&&(this.time=n)}LeaseResult.prototype.getPropertiesFromHeaders=function(e){!this.id&&e[n.LEASE_ID]&&(this.id=e[n.LEASE_ID]),!this.time&&e[n.LEASE_TIME]&&(this.time=parseInt(e[n.LEASE_TIME],10)),this.etag=e[n.ETAG],this.lastModified=e[n.LAST_MODIFIED.toLowerCase()]},e.exports=LeaseResult},function(e,t,r){"use strict";var n=e.exports={lookup:function(e,t){var r=e.replace(/.*[\.\/]/,"").toLowerCase();return this.types[r]||t||this.default_type},default_type:"application/octet-stream",types:{123:"application/vnd.lotus-1-2-3",ez:"application/andrew-inset",aw:"application/applixware",atom:"application/atom+xml",atomcat:"application/atomcat+xml",atomsvc:"application/atomsvc+xml",ccxml:"application/ccxml+xml",cdmia:"application/cdmi-capability",cdmic:"application/cdmi-container",cdmid:"application/cdmi-domain",cdmio:"application/cdmi-object",cdmiq:"application/cdmi-queue",cu:"application/cu-seeme",davmount:"application/davmount+xml",dbk:"application/docbook+xml",dssc:"application/dssc+der",xdssc:"application/dssc+xml",ecma:"application/ecmascript",emma:"application/emma+xml",epub:"application/epub+zip",exi:"application/exi",pfr:"application/font-tdpfr",gml:"application/gml+xml",gpx:"application/gpx+xml",gxf:"application/gxf",stk:"application/hyperstudio",ink:"application/inkml+xml",inkml:"application/inkml+xml",ipfix:"application/ipfix",jar:"application/java-archive",ser:"application/java-serialized-object",class:"application/java-vm",js:"application/javascript",json:"application/json",jsonml:"application/jsonml+json",lostxml:"application/lost+xml",hqx:"application/mac-binhex40",cpt:"application/mac-compactpro",mads:"application/mads+xml",mrc:"application/marc",mrcx:"application/marcxml+xml",ma:"application/mathematica",nb:"application/mathematica",mb:"application/mathematica",mathml:"application/mathml+xml",mbox:"application/mbox",mscml:"application/mediaservercontrol+xml",metalink:"application/metalink+xml",meta4:"application/metalink4+xml",mets:"application/mets+xml",mods:"application/mods+xml",m21:"application/mp21",mp21:"application/mp21",mp4s:"application/mp4",doc:"application/msword",dot:"application/msword",mxf:"application/mxf",bin:"application/octet-stream",dms:"application/octet-stream",lrf:"application/octet-stream",mar:"application/octet-stream",so:"application/octet-stream",dist:"application/octet-stream",distz:"application/octet-stream",pkg:"application/octet-stream",bpk:"application/octet-stream",dump:"application/octet-stream",elc:"application/octet-stream",deploy:"application/octet-stream",oda:"application/oda",opf:"application/oebps-package+xml",ogx:"application/ogg",omdoc:"application/omdoc+xml",onetoc:"application/onenote",onetoc2:"application/onenote",onetmp:"application/onenote",onepkg:"application/onenote",oxps:"application/oxps",xer:"application/patch-ops-error+xml",pdf:"application/pdf",pgp:"application/pgp-encrypted",asc:"application/pgp-signature",sig:"application/pgp-signature",prf:"application/pics-rules",p10:"application/pkcs10",p7m:"application/pkcs7-mime",p7c:"application/pkcs7-mime",p7s:"application/pkcs7-signature",p8:"application/pkcs8",ac:"application/pkix-attr-cert",cer:"application/pkix-cert",crl:"application/pkix-crl",pkipath:"application/pkix-pkipath",pki:"application/pkixcmp",pls:"application/pls+xml",ai:"application/postscript",eps:"application/postscript",ps:"application/postscript",cww:"application/prs.cww",pskcxml:"application/pskc+xml",rdf:"application/rdf+xml",rif:"application/reginfo+xml",rnc:"application/relax-ng-compact-syntax",rl:"application/resource-lists+xml",rld:"application/resource-lists-diff+xml",rs:"application/rls-services+xml",gbr:"application/rpki-ghostbusters",mft:"application/rpki-manifest",roa:"application/rpki-roa",rsd:"application/rsd+xml",rss:"application/rss+xml",rtf:"application/rtf",sbml:"application/sbml+xml",scq:"application/scvp-cv-request",scs:"application/scvp-cv-response",spq:"application/scvp-vp-request",spp:"application/scvp-vp-response",sdp:"application/sdp",setpay:"application/set-payment-initiation",setreg:"application/set-registration-initiation",shf:"application/shf+xml",smi:"application/smil+xml",smil:"application/smil+xml",rq:"application/sparql-query",srx:"application/sparql-results+xml",gram:"application/srgs",grxml:"application/srgs+xml",sru:"application/sru+xml",ssdl:"application/ssdl+xml",ssml:"application/ssml+xml",tei:"application/tei+xml",teicorpus:"application/tei+xml",tfi:"application/thraud+xml",tsd:"application/timestamped-data",plb:"application/vnd.3gpp.pic-bw-large",psb:"application/vnd.3gpp.pic-bw-small",pvb:"application/vnd.3gpp.pic-bw-var",tcap:"application/vnd.3gpp2.tcap",pwn:"application/vnd.3m.post-it-notes",aso:"application/vnd.accpac.simply.aso",imp:"application/vnd.accpac.simply.imp",acu:"application/vnd.acucobol",atc:"application/vnd.acucorp",acutc:"application/vnd.acucorp",air:"application/vnd.adobe.air-application-installer-package+zip",fcdt:"application/vnd.adobe.formscentral.fcdt",fxp:"application/vnd.adobe.fxp",fxpl:"application/vnd.adobe.fxp",xdp:"application/vnd.adobe.xdp+xml",xfdf:"application/vnd.adobe.xfdf",ahead:"application/vnd.ahead.space",azf:"application/vnd.airzip.filesecure.azf",azs:"application/vnd.airzip.filesecure.azs",azw:"application/vnd.amazon.ebook",acc:"application/vnd.americandynamics.acc",ami:"application/vnd.amiga.ami",apk:"application/vnd.android.package-archive",cii:"application/vnd.anser-web-certificate-issue-initiation",fti:"application/vnd.anser-web-funds-transfer-initiation",atx:"application/vnd.antix.game-component",mpkg:"application/vnd.apple.installer+xml",m3u8:"application/vnd.apple.mpegurl",swi:"application/vnd.aristanetworks.swi",iota:"application/vnd.astraea-software.iota",aep:"application/vnd.audiograph",mpm:"application/vnd.blueice.multipass",bmi:"application/vnd.bmi",rep:"application/vnd.businessobjects",cdxml:"application/vnd.chemdraw+xml",mmd:"application/vnd.chipnuts.karaoke-mmd",cdy:"application/vnd.cinderella",cla:"application/vnd.claymore",rp9:"application/vnd.cloanto.rp9",c4g:"application/vnd.clonk.c4group",c4d:"application/vnd.clonk.c4group",c4f:"application/vnd.clonk.c4group",c4p:"application/vnd.clonk.c4group",c4u:"application/vnd.clonk.c4group",c11amc:"application/vnd.cluetrust.cartomobile-config",c11amz:"application/vnd.cluetrust.cartomobile-config-pkg",csp:"application/vnd.commonspace",cdbcmsg:"application/vnd.contact.cmsg",cmc:"application/vnd.cosmocaller",clkx:"application/vnd.crick.clicker",clkk:"application/vnd.crick.clicker.keyboard",clkp:"application/vnd.crick.clicker.palette",clkt:"application/vnd.crick.clicker.template",clkw:"application/vnd.crick.clicker.wordbank",wbs:"application/vnd.criticaltools.wbs+xml",pml:"application/vnd.ctc-posml",ppd:"application/vnd.cups-ppd",car:"application/vnd.curl.car",pcurl:"application/vnd.curl.pcurl",dart:"application/vnd.dart",rdz:"application/vnd.data-vision.rdz",uvf:"application/vnd.dece.data",uvvf:"application/vnd.dece.data",uvd:"application/vnd.dece.data",uvvd:"application/vnd.dece.data",uvt:"application/vnd.dece.ttml+xml",uvvt:"application/vnd.dece.ttml+xml",uvx:"application/vnd.dece.unspecified",uvvx:"application/vnd.dece.unspecified",uvz:"application/vnd.dece.zip",uvvz:"application/vnd.dece.zip",fe_launch:"application/vnd.denovo.fcselayout-link",dna:"application/vnd.dna",mlp:"application/vnd.dolby.mlp",dpg:"application/vnd.dpgraph",dfac:"application/vnd.dreamfactory",kpxx:"application/vnd.ds-keypoint",ait:"application/vnd.dvb.ait",svc:"application/vnd.dvb.service",geo:"application/vnd.dynageo",mag:"application/vnd.ecowin.chart",nml:"application/vnd.enliven",esf:"application/vnd.epson.esf",msf:"application/vnd.epson.msf",qam:"application/vnd.epson.quickanime",slt:"application/vnd.epson.salt",ssf:"application/vnd.epson.ssf",es3:"application/vnd.eszigno3+xml",et3:"application/vnd.eszigno3+xml",ez2:"application/vnd.ezpix-album",ez3:"application/vnd.ezpix-package",fdf:"application/vnd.fdf",mseed:"application/vnd.fdsn.mseed",seed:"application/vnd.fdsn.seed",dataless:"application/vnd.fdsn.seed",gph:"application/vnd.flographit",ftc:"application/vnd.fluxtime.clip",fm:"application/vnd.framemaker",frame:"application/vnd.framemaker",maker:"application/vnd.framemaker",book:"application/vnd.framemaker",fnc:"application/vnd.frogans.fnc",ltf:"application/vnd.frogans.ltf",fsc:"application/vnd.fsc.weblaunch",oas:"application/vnd.fujitsu.oasys",oa2:"application/vnd.fujitsu.oasys2",oa3:"application/vnd.fujitsu.oasys3",fg5:"application/vnd.fujitsu.oasysgp",bh2:"application/vnd.fujitsu.oasysprs",ddd:"application/vnd.fujixerox.ddd",xdw:"application/vnd.fujixerox.docuworks",xbd:"application/vnd.fujixerox.docuworks.binder",fzs:"application/vnd.fuzzysheet",txd:"application/vnd.genomatix.tuxedo",ggb:"application/vnd.geogebra.file",ggt:"application/vnd.geogebra.tool",gex:"application/vnd.geometry-explorer",gre:"application/vnd.geometry-explorer",gxt:"application/vnd.geonext",g2w:"application/vnd.geoplan",g3w:"application/vnd.geospace",gmx:"application/vnd.gmx",kml:"application/vnd.google-earth.kml+xml",kmz:"application/vnd.google-earth.kmz",gqf:"application/vnd.grafeq",gqs:"application/vnd.grafeq",gac:"application/vnd.groove-account",ghf:"application/vnd.groove-help",gim:"application/vnd.groove-identity-message",grv:"application/vnd.groove-injector",gtm:"application/vnd.groove-tool-message",tpl:"application/vnd.groove-tool-template",vcg:"application/vnd.groove-vcard",hal:"application/vnd.hal+xml",zmm:"application/vnd.handheld-entertainment+xml",hbci:"application/vnd.hbci",les:"application/vnd.hhe.lesson-player",hpgl:"application/vnd.hp-hpgl",hpid:"application/vnd.hp-hpid",hps:"application/vnd.hp-hps",jlt:"application/vnd.hp-jlyt",pcl:"application/vnd.hp-pcl",pclxl:"application/vnd.hp-pclxl","sfd-hdstx":"application/vnd.hydrostatix.sof-data",mpy:"application/vnd.ibm.minipay",afp:"application/vnd.ibm.modcap",listafp:"application/vnd.ibm.modcap",list3820:"application/vnd.ibm.modcap",irm:"application/vnd.ibm.rights-management",sc:"application/vnd.ibm.secure-container",icc:"application/vnd.iccprofile",icm:"application/vnd.iccprofile",igl:"application/vnd.igloader",ivp:"application/vnd.immervision-ivp",ivu:"application/vnd.immervision-ivu",igm:"application/vnd.insors.igm",xpw:"application/vnd.intercon.formnet",xpx:"application/vnd.intercon.formnet",i2g:"application/vnd.intergeo",qbo:"application/vnd.intu.qbo",qfx:"application/vnd.intu.qfx",rcprofile:"application/vnd.ipunplugged.rcprofile",irp:"application/vnd.irepository.package+xml",xpr:"application/vnd.is-xpr",fcs:"application/vnd.isac.fcs",jam:"application/vnd.jam",rms:"application/vnd.jcp.javame.midlet-rms",jisp:"application/vnd.jisp",joda:"application/vnd.joost.joda-archive",ktz:"application/vnd.kahootz",ktr:"application/vnd.kahootz",karbon:"application/vnd.kde.karbon",chrt:"application/vnd.kde.kchart",kfo:"application/vnd.kde.kformula",flw:"application/vnd.kde.kivio",kon:"application/vnd.kde.kontour",kpr:"application/vnd.kde.kpresenter",kpt:"application/vnd.kde.kpresenter",ksp:"application/vnd.kde.kspread",kwd:"application/vnd.kde.kword",kwt:"application/vnd.kde.kword",htke:"application/vnd.kenameaapp",kia:"application/vnd.kidspiration",kne:"application/vnd.kinar",knp:"application/vnd.kinar",skp:"application/vnd.koan",skd:"application/vnd.koan",skt:"application/vnd.koan",skm:"application/vnd.koan",sse:"application/vnd.kodak-descriptor",lasxml:"application/vnd.las.las+xml",lbd:"application/vnd.llamagraphics.life-balance.desktop",lbe:"application/vnd.llamagraphics.life-balance.exchange+xml",apr:"application/vnd.lotus-approach",pre:"application/vnd.lotus-freelance",nsf:"application/vnd.lotus-notes",org:"application/vnd.lotus-organizer",scm:"application/vnd.lotus-screencam",lwp:"application/vnd.lotus-wordpro",portpkg:"application/vnd.macports.portpkg",mcd:"application/vnd.mcd",mc1:"application/vnd.medcalcdata",cdkey:"application/vnd.mediastation.cdkey",mwf:"application/vnd.mfer",mfm:"application/vnd.mfmp",flo:"application/vnd.micrografx.flo",igx:"application/vnd.micrografx.igx",mif:"application/vnd.mif",daf:"application/vnd.mobius.daf",dis:"application/vnd.mobius.dis",mbk:"application/vnd.mobius.mbk",mqy:"application/vnd.mobius.mqy",msl:"application/vnd.mobius.msl",plc:"application/vnd.mobius.plc",txf:"application/vnd.mobius.txf",mpn:"application/vnd.mophun.application",mpc:"application/vnd.mophun.certificate",xul:"application/vnd.mozilla.xul+xml",cil:"application/vnd.ms-artgalry",cab:"application/vnd.ms-cab-compressed",xls:"application/vnd.ms-excel",xlm:"application/vnd.ms-excel",xla:"application/vnd.ms-excel",xlc:"application/vnd.ms-excel",xlt:"application/vnd.ms-excel",xlw:"application/vnd.ms-excel",xlam:"application/vnd.ms-excel.addin.macroenabled.12",xlsb:"application/vnd.ms-excel.sheet.binary.macroenabled.12",xlsm:"application/vnd.ms-excel.sheet.macroenabled.12",xltm:"application/vnd.ms-excel.template.macroenabled.12",eot:"application/vnd.ms-fontobject",chm:"application/vnd.ms-htmlhelp",ims:"application/vnd.ms-ims",lrm:"application/vnd.ms-lrm",thmx:"application/vnd.ms-officetheme",cat:"application/vnd.ms-pki.seccat",stl:"application/vnd.ms-pki.stl",ppt:"application/vnd.ms-powerpoint",pps:"application/vnd.ms-powerpoint",pot:"application/vnd.ms-powerpoint",ppam:"application/vnd.ms-powerpoint.addin.macroenabled.12",pptm:"application/vnd.ms-powerpoint.presentation.macroenabled.12",sldm:"application/vnd.ms-powerpoint.slide.macroenabled.12",ppsm:"application/vnd.ms-powerpoint.slideshow.macroenabled.12",potm:"application/vnd.ms-powerpoint.template.macroenabled.12",mpp:"application/vnd.ms-project",mpt:"application/vnd.ms-project",docm:"application/vnd.ms-word.document.macroenabled.12",dotm:"application/vnd.ms-word.template.macroenabled.12",wps:"application/vnd.ms-works",wks:"application/vnd.ms-works",wcm:"application/vnd.ms-works",wdb:"application/vnd.ms-works",wpl:"application/vnd.ms-wpl",xps:"application/vnd.ms-xpsdocument",mseq:"application/vnd.mseq",mus:"application/vnd.musician",msty:"application/vnd.muvee.style",taglet:"application/vnd.mynfc",nlu:"application/vnd.neurolanguage.nlu",ntf:"application/vnd.nitf",nitf:"application/vnd.nitf",nnd:"application/vnd.noblenet-directory",nns:"application/vnd.noblenet-sealer",nnw:"application/vnd.noblenet-web",ngdat:"application/vnd.nokia.n-gage.data","n-gage":"application/vnd.nokia.n-gage.symbian.install",rpst:"application/vnd.nokia.radio-preset",rpss:"application/vnd.nokia.radio-presets",edm:"application/vnd.novadigm.edm",edx:"application/vnd.novadigm.edx",ext:"application/vnd.novadigm.ext",odc:"application/vnd.oasis.opendocument.chart",otc:"application/vnd.oasis.opendocument.chart-template",odb:"application/vnd.oasis.opendocument.database",odf:"application/vnd.oasis.opendocument.formula",odft:"application/vnd.oasis.opendocument.formula-template",odg:"application/vnd.oasis.opendocument.graphics",otg:"application/vnd.oasis.opendocument.graphics-template",odi:"application/vnd.oasis.opendocument.image",oti:"application/vnd.oasis.opendocument.image-template",odp:"application/vnd.oasis.opendocument.presentation",otp:"application/vnd.oasis.opendocument.presentation-template",ods:"application/vnd.oasis.opendocument.spreadsheet",ots:"application/vnd.oasis.opendocument.spreadsheet-template",odt:"application/vnd.oasis.opendocument.text",odm:"application/vnd.oasis.opendocument.text-master",ott:"application/vnd.oasis.opendocument.text-template",oth:"application/vnd.oasis.opendocument.text-web",xo:"application/vnd.olpc-sugar",dd2:"application/vnd.oma.dd2+xml",oxt:"application/vnd.openofficeorg.extension",pptx:"application/vnd.openxmlformats-officedocument.presentationml.presentation",sldx:"application/vnd.openxmlformats-officedocument.presentationml.slide",ppsx:"application/vnd.openxmlformats-officedocument.presentationml.slideshow",potx:"application/vnd.openxmlformats-officedocument.presentationml.template",xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet",xltx:"application/vnd.openxmlformats-officedocument.spreadsheetml.template",docx:"application/vnd.openxmlformats-officedocument.wordprocessingml.document",dotx:"application/vnd.openxmlformats-officedocument.wordprocessingml.template",mgp:"application/vnd.osgeo.mapguide.package",dp:"application/vnd.osgi.dp",esa:"application/vnd.osgi.subsystem",pdb:"application/vnd.palm",pqa:"application/vnd.palm",oprc:"application/vnd.palm",paw:"application/vnd.pawaafile",str:"application/vnd.pg.format",ei6:"application/vnd.pg.osasli",efif:"application/vnd.picsel",wg:"application/vnd.pmi.widget",plf:"application/vnd.pocketlearn",pbd:"application/vnd.powerbuilder6",box:"application/vnd.previewsystems.box",mgz:"application/vnd.proteus.magazine",qps:"application/vnd.publishare-delta-tree",ptid:"application/vnd.pvi.ptid1",qxd:"application/vnd.quark.quarkxpress",qxt:"application/vnd.quark.quarkxpress",qwd:"application/vnd.quark.quarkxpress",qwt:"application/vnd.quark.quarkxpress",qxl:"application/vnd.quark.quarkxpress",qxb:"application/vnd.quark.quarkxpress",bed:"application/vnd.realvnc.bed",mxl:"application/vnd.recordare.musicxml",musicxml:"application/vnd.recordare.musicxml+xml",cryptonote:"application/vnd.rig.cryptonote",cod:"application/vnd.rim.cod",rm:"application/vnd.rn-realmedia",rmvb:"application/vnd.rn-realmedia-vbr",link66:"application/vnd.route66.link66+xml",st:"application/vnd.sailingtracker.track",see:"application/vnd.seemail",sema:"application/vnd.sema",semd:"application/vnd.semd",semf:"application/vnd.semf",ifm:"application/vnd.shana.informed.formdata",itp:"application/vnd.shana.informed.formtemplate",iif:"application/vnd.shana.informed.interchange",ipk:"application/vnd.shana.informed.package",twd:"application/vnd.simtech-mindmapper",twds:"application/vnd.simtech-mindmapper",mmf:"application/vnd.smaf",teacher:"application/vnd.smart.teacher",sdkm:"application/vnd.solent.sdkm+xml",sdkd:"application/vnd.solent.sdkm+xml",dxp:"application/vnd.spotfire.dxp",sfs:"application/vnd.spotfire.sfs",sdc:"application/vnd.stardivision.calc",sda:"application/vnd.stardivision.draw",sdd:"application/vnd.stardivision.impress",smf:"application/vnd.stardivision.math",sdw:"application/vnd.stardivision.writer",vor:"application/vnd.stardivision.writer",sgl:"application/vnd.stardivision.writer-global",smzip:"application/vnd.stepmania.package",sm:"application/vnd.stepmania.stepchart",sxc:"application/vnd.sun.xml.calc",stc:"application/vnd.sun.xml.calc.template",sxd:"application/vnd.sun.xml.draw",std:"application/vnd.sun.xml.draw.template",sxi:"application/vnd.sun.xml.impress",sti:"application/vnd.sun.xml.impress.template",sxm:"application/vnd.sun.xml.math",sxw:"application/vnd.sun.xml.writer",sxg:"application/vnd.sun.xml.writer.global",stw:"application/vnd.sun.xml.writer.template",sus:"application/vnd.sus-calendar",susp:"application/vnd.sus-calendar",svd:"application/vnd.svd",sis:"application/vnd.symbian.install",sisx:"application/vnd.symbian.install",xsm:"application/vnd.syncml+xml",bdm:"application/vnd.syncml.dm+wbxml",xdm:"application/vnd.syncml.dm+xml",tao:"application/vnd.tao.intent-module-archive",pcap:"application/vnd.tcpdump.pcap",cap:"application/vnd.tcpdump.pcap",dmp:"application/vnd.tcpdump.pcap",tmo:"application/vnd.tmobile-livetv",tpt:"application/vnd.trid.tpt",mxs:"application/vnd.triscape.mxs",tra:"application/vnd.trueapp",ufd:"application/vnd.ufdl",ufdl:"application/vnd.ufdl",utz:"application/vnd.uiq.theme",umj:"application/vnd.umajin",unityweb:"application/vnd.unity",uoml:"application/vnd.uoml+xml",vcx:"application/vnd.vcx",vsd:"application/vnd.visio",vst:"application/vnd.visio",vss:"application/vnd.visio",vsw:"application/vnd.visio",vis:"application/vnd.visionary",vsf:"application/vnd.vsf",wbxml:"application/vnd.wap.wbxml",wmlc:"application/vnd.wap.wmlc",wmlsc:"application/vnd.wap.wmlscriptc",wtb:"application/vnd.webturbo",nbp:"application/vnd.wolfram.player",wpd:"application/vnd.wordperfect",wqd:"application/vnd.wqd",stf:"application/vnd.wt.stf",xar:"application/vnd.xara",xfdl:"application/vnd.xfdl",hvd:"application/vnd.yamaha.hv-dic",hvs:"application/vnd.yamaha.hv-script",hvp:"application/vnd.yamaha.hv-voice",osf:"application/vnd.yamaha.openscoreformat",osfpvg:"application/vnd.yamaha.openscoreformat.osfpvg+xml",saf:"application/vnd.yamaha.smaf-audio",spf:"application/vnd.yamaha.smaf-phrase",cmp:"application/vnd.yellowriver-custom-menu",zir:"application/vnd.zul",zirz:"application/vnd.zul",zaz:"application/vnd.zzazz.deck+xml",vxml:"application/voicexml+xml",wgt:"application/widget",hlp:"application/winhlp",wsdl:"application/wsdl+xml",wspolicy:"application/wspolicy+xml","7z":"application/x-7z-compressed",abw:"application/x-abiword",ace:"application/x-ace-compressed",dmg:"application/x-apple-diskimage",aab:"application/x-authorware-bin",x32:"application/x-authorware-bin",u32:"application/x-authorware-bin",vox:"application/x-authorware-bin",aam:"application/x-authorware-map",aas:"application/x-authorware-seg",bcpio:"application/x-bcpio",torrent:"application/x-bittorrent",blb:"application/x-blorb",blorb:"application/x-blorb",bz:"application/x-bzip",bz2:"application/x-bzip2",boz:"application/x-bzip2",cbr:"application/x-cbr",cba:"application/x-cbr",cbt:"application/x-cbr",cbz:"application/x-cbr",cb7:"application/x-cbr",vcd:"application/x-cdlink",cfs:"application/x-cfs-compressed",chat:"application/x-chat",pgn:"application/x-chess-pgn",nsc:"application/x-conference",cpio:"application/x-cpio",csh:"application/x-csh",deb:"application/x-debian-package",udeb:"application/x-debian-package",dgc:"application/x-dgc-compressed",dir:"application/x-director",dcr:"application/x-director",dxr:"application/x-director",cst:"application/x-director",cct:"application/x-director",cxt:"application/x-director",w3d:"application/x-director",fgd:"application/x-director",swa:"application/x-director",wad:"application/x-doom",ncx:"application/x-dtbncx+xml",dtb:"application/x-dtbook+xml",res:"application/x-dtbresource+xml",dvi:"application/x-dvi",evy:"application/x-envoy",eva:"application/x-eva",bdf:"application/x-font-bdf",gsf:"application/x-font-ghostscript",psf:"application/x-font-linux-psf",otf:"application/x-font-otf",pcf:"application/x-font-pcf",snf:"application/x-font-snf",ttf:"application/x-font-ttf",ttc:"application/x-font-ttf",pfa:"application/x-font-type1",pfb:"application/x-font-type1",pfm:"application/x-font-type1",afm:"application/x-font-type1",woff:"application/x-font-woff",arc:"application/x-freearc",spl:"application/x-futuresplash",gca:"application/x-gca-compressed",ulx:"application/x-glulx",gnumeric:"application/x-gnumeric",gramps:"application/x-gramps-xml",gtar:"application/x-gtar",hdf:"application/x-hdf",install:"application/x-install-instructions",iso:"application/x-iso9660-image",jnlp:"application/x-java-jnlp-file",latex:"application/x-latex",lzh:"application/x-lzh-compressed",lha:"application/x-lzh-compressed",mie:"application/x-mie",prc:"application/x-mobipocket-ebook",mobi:"application/x-mobipocket-ebook",application:"application/x-ms-application",lnk:"application/x-ms-shortcut",wmd:"application/x-ms-wmd",wmz:"application/x-msmetafile",xbap:"application/x-ms-xbap",mdb:"application/x-msaccess",obd:"application/x-msbinder",crd:"application/x-mscardfile",clp:"application/x-msclip",exe:"application/x-msdownload",dll:"application/x-msdownload",com:"application/x-msdownload",bat:"application/x-msdownload",msi:"application/x-msdownload",mvb:"application/x-msmediaview",m13:"application/x-msmediaview",m14:"application/x-msmediaview",wmf:"application/x-msmetafile",emf:"application/x-msmetafile",emz:"application/x-msmetafile",mny:"application/x-msmoney",pub:"application/x-mspublisher",scd:"application/x-msschedule",trm:"application/x-msterminal",wri:"application/x-mswrite",nc:"application/x-netcdf",cdf:"application/x-netcdf",nzb:"application/x-nzb",p12:"application/x-pkcs12",pfx:"application/x-pkcs12",p7b:"application/x-pkcs7-certificates",spc:"application/x-pkcs7-certificates",p7r:"application/x-pkcs7-certreqresp",rar:"application/x-rar-compressed",ris:"application/x-research-info-systems",sh:"application/x-sh",shar:"application/x-shar",swf:"application/x-shockwave-flash",xap:"application/x-silverlight-app",sql:"application/x-sql",sit:"application/x-stuffit",sitx:"application/x-stuffitx",srt:"application/x-subrip",sv4cpio:"application/x-sv4cpio",sv4crc:"application/x-sv4crc",t3:"application/x-t3vm-image",gam:"application/x-tads",tar:"application/x-tar",tcl:"application/x-tcl",tex:"application/x-tex",tfm:"application/x-tex-tfm",texinfo:"application/x-texinfo",texi:"application/x-texinfo",obj:"application/x-tgif",ustar:"application/x-ustar",src:"application/x-wais-source",der:"application/x-x509-ca-cert",crt:"application/x-x509-ca-cert",fig:"application/x-xfig",xlf:"application/x-xliff+xml",xpi:"application/x-xpinstall",xz:"application/x-xz",z1:"application/x-zmachine",z2:"application/x-zmachine",z3:"application/x-zmachine",z4:"application/x-zmachine",z5:"application/x-zmachine",z6:"application/x-zmachine",z7:"application/x-zmachine",z8:"application/x-zmachine",xaml:"application/xaml+xml",xdf:"application/xcap-diff+xml",xenc:"application/xenc+xml",xhtml:"application/xhtml+xml",xht:"application/xhtml+xml",xml:"application/xml",xsl:"application/xml",dtd:"application/xml-dtd",xop:"application/xop+xml",xpl:"application/xproc+xml",xslt:"application/xslt+xml",xspf:"application/xspf+xml",mxml:"application/xv+xml",xhvml:"application/xv+xml",xvml:"application/xv+xml",xvm:"application/xv+xml",yang:"application/yang",yin:"application/yin+xml",zip:"application/zip",adp:"audio/adpcm",au:"audio/basic",snd:"audio/basic",mid:"audio/midi",midi:"audio/midi",kar:"audio/midi",rmi:"audio/midi",mp4a:"audio/mp4",mpga:"audio/mpeg",mp2:"audio/mpeg",mp2a:"audio/mpeg",mp3:"audio/mpeg",m2a:"audio/mpeg",m3a:"audio/mpeg",oga:"audio/ogg",ogg:"audio/ogg",spx:"audio/ogg",s3m:"audio/s3m",sil:"audio/silk",uva:"audio/vnd.dece.audio",uvva:"audio/vnd.dece.audio",eol:"audio/vnd.digital-winds",dra:"audio/vnd.dra",dts:"audio/vnd.dts",dtshd:"audio/vnd.dts.hd",lvp:"audio/vnd.lucent.voice",pya:"audio/vnd.ms-playready.media.pya",ecelp4800:"audio/vnd.nuera.ecelp4800",ecelp7470:"audio/vnd.nuera.ecelp7470",ecelp9600:"audio/vnd.nuera.ecelp9600",rip:"audio/vnd.rip",weba:"audio/webm",aac:"audio/x-aac",aif:"audio/x-aiff",aiff:"audio/x-aiff",aifc:"audio/x-aiff",caf:"audio/x-caf",flac:"audio/x-flac",mka:"audio/x-matroska",m3u:"audio/x-mpegurl",wax:"audio/x-ms-wax",wma:"audio/x-ms-wma",ram:"audio/x-pn-realaudio",ra:"audio/x-pn-realaudio",rmp:"audio/x-pn-realaudio-plugin",wav:"audio/x-wav",xm:"audio/xm",cdx:"chemical/x-cdx",cif:"chemical/x-cif",cmdf:"chemical/x-cmdf",cml:"chemical/x-cml",csml:"chemical/x-csml",xyz:"chemical/x-xyz",bmp:"image/bmp",cgm:"image/cgm",g3:"image/g3fax",gif:"image/gif",ief:"image/ief",jpeg:"image/jpeg",jpg:"image/jpeg",jpe:"image/jpeg",ktx:"image/ktx",png:"image/png",btif:"image/prs.btif",sgi:"image/sgi",svg:"image/svg+xml",svgz:"image/svg+xml",tiff:"image/tiff",tif:"image/tiff",psd:"image/vnd.adobe.photoshop",uvi:"image/vnd.dece.graphic",uvvi:"image/vnd.dece.graphic",uvg:"image/vnd.dece.graphic",uvvg:"image/vnd.dece.graphic",sub:"text/vnd.dvb.subtitle",djvu:"image/vnd.djvu",djv:"image/vnd.djvu",dwg:"image/vnd.dwg",dxf:"image/vnd.dxf",fbs:"image/vnd.fastbidsheet",fpx:"image/vnd.fpx",fst:"image/vnd.fst",mmr:"image/vnd.fujixerox.edmics-mmr",rlc:"image/vnd.fujixerox.edmics-rlc",mdi:"image/vnd.ms-modi",wdp:"image/vnd.ms-photo",npx:"image/vnd.net-fpx",wbmp:"image/vnd.wap.wbmp",xif:"image/vnd.xiff",webp:"image/webp","3ds":"image/x-3ds",ras:"image/x-cmu-raster",cmx:"image/x-cmx",fh:"image/x-freehand",fhc:"image/x-freehand",fh4:"image/x-freehand",fh5:"image/x-freehand",fh7:"image/x-freehand",ico:"image/x-icon",sid:"image/x-mrsid-image",pcx:"image/x-pcx",pic:"image/x-pict",pct:"image/x-pict",pnm:"image/x-portable-anymap",pbm:"image/x-portable-bitmap",pgm:"image/x-portable-graymap",ppm:"image/x-portable-pixmap",rgb:"image/x-rgb",tga:"image/x-tga",xbm:"image/x-xbitmap",xpm:"image/x-xpixmap",xwd:"image/x-xwindowdump",eml:"message/rfc822",mime:"message/rfc822",igs:"model/iges",iges:"model/iges",msh:"model/mesh",mesh:"model/mesh",silo:"model/mesh",dae:"model/vnd.collada+xml",dwf:"model/vnd.dwf",gdl:"model/vnd.gdl",gtw:"model/vnd.gtw",mts:"model/vnd.mts",vtu:"model/vnd.vtu",wrl:"model/vrml",vrml:"model/vrml",x3db:"model/x3d+binary",x3dbz:"model/x3d+binary",x3dv:"model/x3d+vrml",x3dvz:"model/x3d+vrml",x3d:"model/x3d+xml",x3dz:"model/x3d+xml",appcache:"text/cache-manifest",ics:"text/calendar",ifb:"text/calendar",css:"text/css",csv:"text/csv",html:"text/html",htm:"text/html",n3:"text/n3",txt:"text/plain",text:"text/plain",conf:"text/plain",def:"text/plain",list:"text/plain",log:"text/plain",in:"text/plain",dsc:"text/prs.lines.tag",rtx:"text/richtext",sgml:"text/sgml",sgm:"text/sgml",tsv:"text/tab-separated-values",t:"text/troff",tr:"text/troff",roff:"text/troff",man:"text/troff",me:"text/troff",ms:"text/troff",ttl:"text/turtle",uri:"text/uri-list",uris:"text/uri-list",urls:"text/uri-list",vcard:"text/vcard",curl:"text/vnd.curl",dcurl:"text/vnd.curl.dcurl",scurl:"text/vnd.curl.scurl",mcurl:"text/vnd.curl.mcurl",fly:"text/vnd.fly",flx:"text/vnd.fmi.flexstor",gv:"text/vnd.graphviz","3dml":"text/vnd.in3d.3dml",spot:"text/vnd.in3d.spot",jad:"text/vnd.sun.j2me.app-descriptor",wml:"text/vnd.wap.wml",wmls:"text/vnd.wap.wmlscript",s:"text/x-asm",asm:"text/x-asm",c:"text/x-c",cc:"text/x-c",cxx:"text/x-c",cpp:"text/x-c",h:"text/x-c",hh:"text/x-c",dic:"text/x-c",f:"text/x-fortran",for:"text/x-fortran",f77:"text/x-fortran",f90:"text/x-fortran",java:"text/x-java-source",opml:"text/x-opml",p:"text/x-pascal",pas:"text/x-pascal",nfo:"text/x-nfo",etx:"text/x-setext",sfv:"text/x-sfv",uu:"text/x-uuencode",vcs:"text/x-vcalendar",vcf:"text/x-vcard","3gp":"video/3gpp","3g2":"video/3gpp2",h261:"video/h261",h263:"video/h263",h264:"video/h264",jpgv:"video/jpeg",jpm:"video/jpm",jpgm:"video/jpm",mj2:"video/mj2",mjp2:"video/mj2",mp4:"video/mp4",mp4v:"video/mp4",mpg4:"video/mp4",mpeg:"video/mpeg",mpg:"video/mpeg",mpe:"video/mpeg",m1v:"video/mpeg",m2v:"video/mpeg",ogv:"video/ogg",qt:"video/quicktime",mov:"video/quicktime",uvh:"video/vnd.dece.hd",uvvh:"video/vnd.dece.hd",uvm:"video/vnd.dece.mobile",uvvm:"video/vnd.dece.mobile",uvp:"video/vnd.dece.pd",uvvp:"video/vnd.dece.pd",uvs:"video/vnd.dece.sd",uvvs:"video/vnd.dece.sd",uvv:"video/vnd.dece.video",uvvv:"video/vnd.dece.video",dvb:"video/vnd.dvb.file",fvt:"video/vnd.fvt",mxu:"video/vnd.mpegurl",m4u:"video/vnd.mpegurl",pyv:"video/vnd.ms-playready.media.pyv",uvu:"video/vnd.uvvu.mp4",uvvu:"video/vnd.uvvu.mp4",viv:"video/vnd.vivo",webm:"video/webm",f4v:"video/x-f4v",fli:"video/x-fli",flv:"video/x-flv",m4v:"video/x-m4v",mkv:"video/x-matroska",mk3d:"video/x-matroska",mks:"video/x-matroska",mng:"video/x-mng",asf:"video/x-ms-asf",asx:"video/x-ms-asf",vob:"video/x-ms-vob",wm:"video/x-ms-wm",wmv:"video/x-ms-wmv",wmx:"video/x-ms-wmx",wvx:"video/x-ms-wvx",avi:"video/x-msvideo",movie:"video/x-sgi-movie",smv:"video/x-smv",ice:"x-conference/x-cooltalk",vtt:"text/vtt",crx:"application/x-chrome-extension",htc:"text/x-component",manifest:"text/cache-manifest",buffer:"application/octet-stream",m4p:"application/mp4",m4a:"audio/mp4",ts:"video/MP2T","event-stream":"text/event-stream",webapp:"application/x-web-app-manifest+json",lua:"text/x-lua",luac:"application/x-lua-bytecode",markdown:"text/x-markdown",md:"text/x-markdown",mkd:"text/x-markdown"},extensions:{"application/andrew-inset":"ez","application/applixware":"aw","application/atom+xml":"atom","application/atomcat+xml":"atomcat","application/atomsvc+xml":"atomsvc","application/ccxml+xml":"ccxml","application/cdmi-capability":"cdmia","application/cdmi-container":"cdmic","application/cdmi-domain":"cdmid","application/cdmi-object":"cdmio","application/cdmi-queue":"cdmiq","application/cu-seeme":"cu","application/davmount+xml":"davmount","application/docbook+xml":"dbk","application/dssc+der":"dssc","application/dssc+xml":"xdssc","application/ecmascript":"ecma","application/emma+xml":"emma","application/epub+zip":"epub","application/exi":"exi","application/font-tdpfr":"pfr","application/gml+xml":"gml","application/gpx+xml":"gpx","application/gxf":"gxf","application/hyperstudio":"stk","application/inkml+xml":"ink","application/ipfix":"ipfix","application/java-archive":"jar","application/java-serialized-object":"ser","application/java-vm":"class","application/javascript":"js","application/json":"json","application/jsonml+json":"jsonml","application/lost+xml":"lostxml","application/mac-binhex40":"hqx","application/mac-compactpro":"cpt","application/mads+xml":"mads","application/marc":"mrc","application/marcxml+xml":"mrcx","application/mathematica":"ma","application/mathml+xml":"mathml","application/mbox":"mbox","application/mediaservercontrol+xml":"mscml","application/metalink+xml":"metalink","application/metalink4+xml":"meta4","application/mets+xml":"mets","application/mods+xml":"mods","application/mp21":"m21","application/mp4":"mp4s","application/msword":"doc","application/mxf":"mxf","application/octet-stream":"bin","application/oda":"oda","application/oebps-package+xml":"opf","application/ogg":"ogx","application/omdoc+xml":"omdoc","application/onenote":"onetoc","application/oxps":"oxps","application/patch-ops-error+xml":"xer","application/pdf":"pdf","application/pgp-encrypted":"pgp","application/pgp-signature":"asc","application/pics-rules":"prf","application/pkcs10":"p10","application/pkcs7-mime":"p7m","application/pkcs7-signature":"p7s","application/pkcs8":"p8","application/pkix-attr-cert":"ac","application/pkix-cert":"cer","application/pkix-crl":"crl","application/pkix-pkipath":"pkipath","application/pkixcmp":"pki","application/pls+xml":"pls","application/postscript":"ai","application/prs.cww":"cww","application/pskc+xml":"pskcxml","application/rdf+xml":"rdf","application/reginfo+xml":"rif","application/relax-ng-compact-syntax":"rnc","application/resource-lists+xml":"rl","application/resource-lists-diff+xml":"rld","application/rls-services+xml":"rs","application/rpki-ghostbusters":"gbr","application/rpki-manifest":"mft","application/rpki-roa":"roa","application/rsd+xml":"rsd","application/rss+xml":"rss","application/rtf":"rtf","application/sbml+xml":"sbml","application/scvp-cv-request":"scq","application/scvp-cv-response":"scs","application/scvp-vp-request":"spq","application/scvp-vp-response":"spp","application/sdp":"sdp","application/set-payment-initiation":"setpay","application/set-registration-initiation":"setreg","application/shf+xml":"shf","application/smil+xml":"smi","application/sparql-query":"rq","application/sparql-results+xml":"srx","application/srgs":"gram","application/srgs+xml":"grxml","application/sru+xml":"sru","application/ssdl+xml":"ssdl","application/ssml+xml":"ssml","application/tei+xml":"tei","application/thraud+xml":"tfi","application/timestamped-data":"tsd","application/vnd.3gpp.pic-bw-large":"plb","application/vnd.3gpp.pic-bw-small":"psb","application/vnd.3gpp.pic-bw-var":"pvb","application/vnd.3gpp2.tcap":"tcap","application/vnd.3m.post-it-notes":"pwn","application/vnd.accpac.simply.aso":"aso","application/vnd.accpac.simply.imp":"imp","application/vnd.acucobol":"acu","application/vnd.acucorp":"atc","application/vnd.adobe.air-application-installer-package+zip":"air","application/vnd.adobe.formscentral.fcdt":"fcdt","application/vnd.adobe.fxp":"fxp","application/vnd.adobe.xdp+xml":"xdp","application/vnd.adobe.xfdf":"xfdf","application/vnd.ahead.space":"ahead","application/vnd.airzip.filesecure.azf":"azf","application/vnd.airzip.filesecure.azs":"azs","application/vnd.amazon.ebook":"azw","application/vnd.americandynamics.acc":"acc","application/vnd.amiga.ami":"ami","application/vnd.android.package-archive":"apk","application/vnd.anser-web-certificate-issue-initiation":"cii","application/vnd.anser-web-funds-transfer-initiation":"fti","application/vnd.antix.game-component":"atx","application/vnd.apple.installer+xml":"mpkg","application/vnd.apple.mpegurl":"m3u8","application/vnd.aristanetworks.swi":"swi","application/vnd.astraea-software.iota":"iota","application/vnd.audiograph":"aep","application/vnd.blueice.multipass":"mpm","application/vnd.bmi":"bmi","application/vnd.businessobjects":"rep","application/vnd.chemdraw+xml":"cdxml","application/vnd.chipnuts.karaoke-mmd":"mmd","application/vnd.cinderella":"cdy","application/vnd.claymore":"cla","application/vnd.cloanto.rp9":"rp9","application/vnd.clonk.c4group":"c4g","application/vnd.cluetrust.cartomobile-config":"c11amc","application/vnd.cluetrust.cartomobile-config-pkg":"c11amz","application/vnd.commonspace":"csp","application/vnd.contact.cmsg":"cdbcmsg","application/vnd.cosmocaller":"cmc","application/vnd.crick.clicker":"clkx","application/vnd.crick.clicker.keyboard":"clkk","application/vnd.crick.clicker.palette":"clkp","application/vnd.crick.clicker.template":"clkt","application/vnd.crick.clicker.wordbank":"clkw","application/vnd.criticaltools.wbs+xml":"wbs","application/vnd.ctc-posml":"pml","application/vnd.cups-ppd":"ppd","application/vnd.curl.car":"car","application/vnd.curl.pcurl":"pcurl","application/vnd.dart":"dart","application/vnd.data-vision.rdz":"rdz","application/vnd.dece.data":"uvf","application/vnd.dece.ttml+xml":"uvt","application/vnd.dece.unspecified":"uvx","application/vnd.dece.zip":"uvz","application/vnd.denovo.fcselayout-link":"fe_launch","application/vnd.dna":"dna","application/vnd.dolby.mlp":"mlp","application/vnd.dpgraph":"dpg","application/vnd.dreamfactory":"dfac","application/vnd.ds-keypoint":"kpxx","application/vnd.dvb.ait":"ait","application/vnd.dvb.service":"svc","application/vnd.dynageo":"geo","application/vnd.ecowin.chart":"mag","application/vnd.enliven":"nml","application/vnd.epson.esf":"esf","application/vnd.epson.msf":"msf","application/vnd.epson.quickanime":"qam","application/vnd.epson.salt":"slt","application/vnd.epson.ssf":"ssf","application/vnd.eszigno3+xml":"es3","application/vnd.ezpix-album":"ez2","application/vnd.ezpix-package":"ez3","application/vnd.fdf":"fdf","application/vnd.fdsn.mseed":"mseed","application/vnd.fdsn.seed":"seed","application/vnd.flographit":"gph","application/vnd.fluxtime.clip":"ftc","application/vnd.framemaker":"fm","application/vnd.frogans.fnc":"fnc","application/vnd.frogans.ltf":"ltf","application/vnd.fsc.weblaunch":"fsc","application/vnd.fujitsu.oasys":"oas","application/vnd.fujitsu.oasys2":"oa2","application/vnd.fujitsu.oasys3":"oa3","application/vnd.fujitsu.oasysgp":"fg5","application/vnd.fujitsu.oasysprs":"bh2","application/vnd.fujixerox.ddd":"ddd","application/vnd.fujixerox.docuworks":"xdw","application/vnd.fujixerox.docuworks.binder":"xbd","application/vnd.fuzzysheet":"fzs","application/vnd.genomatix.tuxedo":"txd","application/vnd.geogebra.file":"ggb","application/vnd.geogebra.tool":"ggt","application/vnd.geometry-explorer":"gex","application/vnd.geonext":"gxt","application/vnd.geoplan":"g2w","application/vnd.geospace":"g3w","application/vnd.gmx":"gmx","application/vnd.google-earth.kml+xml":"kml","application/vnd.google-earth.kmz":"kmz","application/vnd.grafeq":"gqf","application/vnd.groove-account":"gac","application/vnd.groove-help":"ghf","application/vnd.groove-identity-message":"gim","application/vnd.groove-injector":"grv","application/vnd.groove-tool-message":"gtm","application/vnd.groove-tool-template":"tpl","application/vnd.groove-vcard":"vcg","application/vnd.hal+xml":"hal","application/vnd.handheld-entertainment+xml":"zmm","application/vnd.hbci":"hbci","application/vnd.hhe.lesson-player":"les","application/vnd.hp-hpgl":"hpgl","application/vnd.hp-hpid":"hpid","application/vnd.hp-hps":"hps","application/vnd.hp-jlyt":"jlt","application/vnd.hp-pcl":"pcl","application/vnd.hp-pclxl":"pclxl","application/vnd.hydrostatix.sof-data":"sfd-hdstx","application/vnd.ibm.minipay":"mpy","application/vnd.ibm.modcap":"afp","application/vnd.ibm.rights-management":"irm","application/vnd.ibm.secure-container":"sc","application/vnd.iccprofile":"icc","application/vnd.igloader":"igl","application/vnd.immervision-ivp":"ivp","application/vnd.immervision-ivu":"ivu","application/vnd.insors.igm":"igm","application/vnd.intercon.formnet":"xpw","application/vnd.intergeo":"i2g","application/vnd.intu.qbo":"qbo","application/vnd.intu.qfx":"qfx","application/vnd.ipunplugged.rcprofile":"rcprofile","application/vnd.irepository.package+xml":"irp","application/vnd.is-xpr":"xpr","application/vnd.isac.fcs":"fcs","application/vnd.jam":"jam","application/vnd.jcp.javame.midlet-rms":"rms","application/vnd.jisp":"jisp","application/vnd.joost.joda-archive":"joda","application/vnd.kahootz":"ktz","application/vnd.kde.karbon":"karbon","application/vnd.kde.kchart":"chrt","application/vnd.kde.kformula":"kfo","application/vnd.kde.kivio":"flw","application/vnd.kde.kontour":"kon","application/vnd.kde.kpresenter":"kpr","application/vnd.kde.kspread":"ksp","application/vnd.kde.kword":"kwd","application/vnd.kenameaapp":"htke","application/vnd.kidspiration":"kia","application/vnd.kinar":"kne","application/vnd.koan":"skp","application/vnd.kodak-descriptor":"sse","application/vnd.las.las+xml":"lasxml","application/vnd.llamagraphics.life-balance.desktop":"lbd","application/vnd.llamagraphics.life-balance.exchange+xml":"lbe","application/vnd.lotus-1-2-3":"123","application/vnd.lotus-approach":"apr","application/vnd.lotus-freelance":"pre","application/vnd.lotus-notes":"nsf","application/vnd.lotus-organizer":"org","application/vnd.lotus-screencam":"scm","application/vnd.lotus-wordpro":"lwp","application/vnd.macports.portpkg":"portpkg","application/vnd.mcd":"mcd","application/vnd.medcalcdata":"mc1","application/vnd.mediastation.cdkey":"cdkey","application/vnd.mfer":"mwf","application/vnd.mfmp":"mfm","application/vnd.micrografx.flo":"flo","application/vnd.micrografx.igx":"igx","application/vnd.mif":"mif","application/vnd.mobius.daf":"daf","application/vnd.mobius.dis":"dis","application/vnd.mobius.mbk":"mbk","application/vnd.mobius.mqy":"mqy","application/vnd.mobius.msl":"msl","application/vnd.mobius.plc":"plc","application/vnd.mobius.txf":"txf","application/vnd.mophun.application":"mpn","application/vnd.mophun.certificate":"mpc","application/vnd.mozilla.xul+xml":"xul","application/vnd.ms-artgalry":"cil","application/vnd.ms-cab-compressed":"cab","application/vnd.ms-excel":"xls","application/vnd.ms-excel.addin.macroenabled.12":"xlam","application/vnd.ms-excel.sheet.binary.macroenabled.12":"xlsb","application/vnd.ms-excel.sheet.macroenabled.12":"xlsm","application/vnd.ms-excel.template.macroenabled.12":"xltm","application/vnd.ms-fontobject":"eot","application/vnd.ms-htmlhelp":"chm","application/vnd.ms-ims":"ims","application/vnd.ms-lrm":"lrm","application/vnd.ms-officetheme":"thmx","application/vnd.ms-pki.seccat":"cat","application/vnd.ms-pki.stl":"stl","application/vnd.ms-powerpoint":"ppt","application/vnd.ms-powerpoint.addin.macroenabled.12":"ppam","application/vnd.ms-powerpoint.presentation.macroenabled.12":"pptm","application/vnd.ms-powerpoint.slide.macroenabled.12":"sldm","application/vnd.ms-powerpoint.slideshow.macroenabled.12":"ppsm","application/vnd.ms-powerpoint.template.macroenabled.12":"potm","application/vnd.ms-project":"mpp","application/vnd.ms-word.document.macroenabled.12":"docm","application/vnd.ms-word.template.macroenabled.12":"dotm","application/vnd.ms-works":"wps","application/vnd.ms-wpl":"wpl","application/vnd.ms-xpsdocument":"xps","application/vnd.mseq":"mseq","application/vnd.musician":"mus","application/vnd.muvee.style":"msty","application/vnd.mynfc":"taglet","application/vnd.neurolanguage.nlu":"nlu","application/vnd.nitf":"ntf","application/vnd.noblenet-directory":"nnd","application/vnd.noblenet-sealer":"nns","application/vnd.noblenet-web":"nnw","application/vnd.nokia.n-gage.data":"ngdat","application/vnd.nokia.n-gage.symbian.install":"n-gage","application/vnd.nokia.radio-preset":"rpst","application/vnd.nokia.radio-presets":"rpss","application/vnd.novadigm.edm":"edm","application/vnd.novadigm.edx":"edx","application/vnd.novadigm.ext":"ext","application/vnd.oasis.opendocument.chart":"odc","application/vnd.oasis.opendocument.chart-template":"otc","application/vnd.oasis.opendocument.database":"odb","application/vnd.oasis.opendocument.formula":"odf","application/vnd.oasis.opendocument.formula-template":"odft","application/vnd.oasis.opendocument.graphics":"odg","application/vnd.oasis.opendocument.graphics-template":"otg","application/vnd.oasis.opendocument.image":"odi","application/vnd.oasis.opendocument.image-template":"oti","application/vnd.oasis.opendocument.presentation":"odp","application/vnd.oasis.opendocument.presentation-template":"otp","application/vnd.oasis.opendocument.spreadsheet":"ods","application/vnd.oasis.opendocument.spreadsheet-template":"ots","application/vnd.oasis.opendocument.text":"odt","application/vnd.oasis.opendocument.text-master":"odm","application/vnd.oasis.opendocument.text-template":"ott","application/vnd.oasis.opendocument.text-web":"oth","application/vnd.olpc-sugar":"xo","application/vnd.oma.dd2+xml":"dd2","application/vnd.openofficeorg.extension":"oxt","application/vnd.openxmlformats-officedocument.presentationml.presentation":"pptx","application/vnd.openxmlformats-officedocument.presentationml.slide":"sldx","application/vnd.openxmlformats-officedocument.presentationml.slideshow":"ppsx","application/vnd.openxmlformats-officedocument.presentationml.template":"potx","application/vnd.openxmlformats-officedocument.spreadsheetml.sheet":"xlsx","application/vnd.openxmlformats-officedocument.spreadsheetml.template":"xltx","application/vnd.openxmlformats-officedocument.wordprocessingml.document":"docx","application/vnd.openxmlformats-officedocument.wordprocessingml.template":"dotx","application/vnd.osgeo.mapguide.package":"mgp","application/vnd.osgi.dp":"dp","application/vnd.osgi.subsystem":"esa","application/vnd.palm":"pdb","application/vnd.pawaafile":"paw","application/vnd.pg.format":"str","application/vnd.pg.osasli":"ei6","application/vnd.picsel":"efif","application/vnd.pmi.widget":"wg","application/vnd.pocketlearn":"plf","application/vnd.powerbuilder6":"pbd","application/vnd.previewsystems.box":"box","application/vnd.proteus.magazine":"mgz","application/vnd.publishare-delta-tree":"qps","application/vnd.pvi.ptid1":"ptid","application/vnd.quark.quarkxpress":"qxd","application/vnd.realvnc.bed":"bed","application/vnd.recordare.musicxml":"mxl","application/vnd.recordare.musicxml+xml":"musicxml","application/vnd.rig.cryptonote":"cryptonote","application/vnd.rim.cod":"cod","application/vnd.rn-realmedia":"rm","application/vnd.rn-realmedia-vbr":"rmvb","application/vnd.route66.link66+xml":"link66","application/vnd.sailingtracker.track":"st","application/vnd.seemail":"see","application/vnd.sema":"sema","application/vnd.semd":"semd","application/vnd.semf":"semf","application/vnd.shana.informed.formdata":"ifm","application/vnd.shana.informed.formtemplate":"itp","application/vnd.shana.informed.interchange":"iif","application/vnd.shana.informed.package":"ipk","application/vnd.simtech-mindmapper":"twd","application/vnd.smaf":"mmf","application/vnd.smart.teacher":"teacher","application/vnd.solent.sdkm+xml":"sdkm","application/vnd.spotfire.dxp":"dxp","application/vnd.spotfire.sfs":"sfs","application/vnd.stardivision.calc":"sdc","application/vnd.stardivision.draw":"sda","application/vnd.stardivision.impress":"sdd","application/vnd.stardivision.math":"smf","application/vnd.stardivision.writer":"sdw","application/vnd.stardivision.writer-global":"sgl","application/vnd.stepmania.package":"smzip","application/vnd.stepmania.stepchart":"sm","application/vnd.sun.xml.calc":"sxc","application/vnd.sun.xml.calc.template":"stc","application/vnd.sun.xml.draw":"sxd","application/vnd.sun.xml.draw.template":"std","application/vnd.sun.xml.impress":"sxi","application/vnd.sun.xml.impress.template":"sti","application/vnd.sun.xml.math":"sxm","application/vnd.sun.xml.writer":"sxw","application/vnd.sun.xml.writer.global":"sxg","application/vnd.sun.xml.writer.template":"stw","application/vnd.sus-calendar":"sus","application/vnd.svd":"svd","application/vnd.symbian.install":"sis","application/vnd.syncml+xml":"xsm","application/vnd.syncml.dm+wbxml":"bdm","application/vnd.syncml.dm+xml":"xdm","application/vnd.tao.intent-module-archive":"tao","application/vnd.tcpdump.pcap":"pcap","application/vnd.tmobile-livetv":"tmo","application/vnd.trid.tpt":"tpt","application/vnd.triscape.mxs":"mxs","application/vnd.trueapp":"tra","application/vnd.ufdl":"ufd","application/vnd.uiq.theme":"utz","application/vnd.umajin":"umj","application/vnd.unity":"unityweb","application/vnd.uoml+xml":"uoml","application/vnd.vcx":"vcx","application/vnd.visio":"vsd","application/vnd.visionary":"vis","application/vnd.vsf":"vsf","application/vnd.wap.wbxml":"wbxml","application/vnd.wap.wmlc":"wmlc","application/vnd.wap.wmlscriptc":"wmlsc","application/vnd.webturbo":"wtb","application/vnd.wolfram.player":"nbp","application/vnd.wordperfect":"wpd","application/vnd.wqd":"wqd","application/vnd.wt.stf":"stf","application/vnd.xara":"xar","application/vnd.xfdl":"xfdl","application/vnd.yamaha.hv-dic":"hvd","application/vnd.yamaha.hv-script":"hvs","application/vnd.yamaha.hv-voice":"hvp","application/vnd.yamaha.openscoreformat":"osf","application/vnd.yamaha.openscoreformat.osfpvg+xml":"osfpvg","application/vnd.yamaha.smaf-audio":"saf","application/vnd.yamaha.smaf-phrase":"spf","application/vnd.yellowriver-custom-menu":"cmp","application/vnd.zul":"zir","application/vnd.zzazz.deck+xml":"zaz","application/voicexml+xml":"vxml","application/widget":"wgt","application/winhlp":"hlp","application/wsdl+xml":"wsdl","application/wspolicy+xml":"wspolicy","application/x-7z-compressed":"7z","application/x-abiword":"abw","application/x-ace-compressed":"ace","application/x-apple-diskimage":"dmg","application/x-authorware-bin":"aab","application/x-authorware-map":"aam","application/x-authorware-seg":"aas","application/x-bcpio":"bcpio","application/x-bittorrent":"torrent","application/x-blorb":"blb","application/x-bzip":"bz","application/x-bzip2":"bz2","application/x-cbr":"cbr","application/x-cdlink":"vcd","application/x-cfs-compressed":"cfs","application/x-chat":"chat","application/x-chess-pgn":"pgn","application/x-conference":"nsc","application/x-cpio":"cpio","application/x-csh":"csh","application/x-debian-package":"deb","application/x-dgc-compressed":"dgc","application/x-director":"dir","application/x-doom":"wad","application/x-dtbncx+xml":"ncx","application/x-dtbook+xml":"dtb","application/x-dtbresource+xml":"res","application/x-dvi":"dvi","application/x-envoy":"evy","application/x-eva":"eva","application/x-font-bdf":"bdf","application/x-font-ghostscript":"gsf","application/x-font-linux-psf":"psf","application/x-font-otf":"otf","application/x-font-pcf":"pcf","application/x-font-snf":"snf","application/x-font-ttf":"ttf","application/x-font-type1":"pfa","application/x-font-woff":"woff","application/x-freearc":"arc","application/x-futuresplash":"spl","application/x-gca-compressed":"gca","application/x-glulx":"ulx","application/x-gnumeric":"gnumeric","application/x-gramps-xml":"gramps","application/x-gtar":"gtar","application/x-hdf":"hdf","application/x-install-instructions":"install","application/x-iso9660-image":"iso","application/x-java-jnlp-file":"jnlp","application/x-latex":"latex","application/x-lzh-compressed":"lzh","application/x-mie":"mie","application/x-mobipocket-ebook":"prc","application/x-ms-application":"application","application/x-ms-shortcut":"lnk","application/x-ms-wmd":"wmd","application/x-ms-wmz":"wmz","application/x-ms-xbap":"xbap","application/x-msaccess":"mdb","application/x-msbinder":"obd","application/x-mscardfile":"crd","application/x-msclip":"clp","application/x-msdownload":"exe","application/x-msmediaview":"mvb","application/x-msmetafile":"wmf","application/x-msmoney":"mny","application/x-mspublisher":"pub","application/x-msschedule":"scd","application/x-msterminal":"trm","application/x-mswrite":"wri","application/x-netcdf":"nc","application/x-nzb":"nzb","application/x-pkcs12":"p12","application/x-pkcs7-certificates":"p7b","application/x-pkcs7-certreqresp":"p7r","application/x-rar-compressed":"rar","application/x-research-info-systems":"ris","application/x-sh":"sh","application/x-shar":"shar","application/x-shockwave-flash":"swf","application/x-silverlight-app":"xap","application/x-sql":"sql","application/x-stuffit":"sit","application/x-stuffitx":"sitx","application/x-subrip":"srt","application/x-sv4cpio":"sv4cpio","application/x-sv4crc":"sv4crc","application/x-t3vm-image":"t3","application/x-tads":"gam","application/x-tar":"tar","application/x-tcl":"tcl","application/x-tex":"tex","application/x-tex-tfm":"tfm","application/x-texinfo":"texinfo","application/x-tgif":"obj","application/x-ustar":"ustar","application/x-wais-source":"src","application/x-x509-ca-cert":"der","application/x-xfig":"fig","application/x-xliff+xml":"xlf","application/x-xpinstall":"xpi","application/x-xz":"xz","application/x-zmachine":"z1","application/xaml+xml":"xaml","application/xcap-diff+xml":"xdf","application/xenc+xml":"xenc","application/xhtml+xml":"xhtml","application/xml":"xml","application/xml-dtd":"dtd","application/xop+xml":"xop","application/xproc+xml":"xpl","application/xslt+xml":"xslt","application/xspf+xml":"xspf","application/xv+xml":"mxml","application/yang":"yang","application/yin+xml":"yin","application/zip":"zip","audio/adpcm":"adp","audio/basic":"au","audio/midi":"mid","audio/mp4":"mp4a","audio/mpeg":"mpga","audio/ogg":"oga","audio/s3m":"s3m","audio/silk":"sil","audio/vnd.dece.audio":"uva","audio/vnd.digital-winds":"eol","audio/vnd.dra":"dra","audio/vnd.dts":"dts","audio/vnd.dts.hd":"dtshd","audio/vnd.lucent.voice":"lvp","audio/vnd.ms-playready.media.pya":"pya","audio/vnd.nuera.ecelp4800":"ecelp4800","audio/vnd.nuera.ecelp7470":"ecelp7470","audio/vnd.nuera.ecelp9600":"ecelp9600","audio/vnd.rip":"rip","audio/webm":"weba","audio/x-aac":"aac","audio/x-aiff":"aif","audio/x-caf":"caf","audio/x-flac":"flac","audio/x-matroska":"mka","audio/x-mpegurl":"m3u","audio/x-ms-wax":"wax","audio/x-ms-wma":"wma","audio/x-pn-realaudio":"ram","audio/x-pn-realaudio-plugin":"rmp","audio/x-wav":"wav","audio/xm":"xm","chemical/x-cdx":"cdx","chemical/x-cif":"cif","chemical/x-cmdf":"cmdf","chemical/x-cml":"cml","chemical/x-csml":"csml","chemical/x-xyz":"xyz","image/bmp":"bmp","image/cgm":"cgm","image/g3fax":"g3","image/gif":"gif","image/ief":"ief","image/jpeg":"jpeg","image/ktx":"ktx","image/png":"png","image/prs.btif":"btif","image/sgi":"sgi","image/svg+xml":"svg","image/tiff":"tiff","image/vnd.adobe.photoshop":"psd","image/vnd.dece.graphic":"uvi","image/vnd.dvb.subtitle":"sub","image/vnd.djvu":"djvu","image/vnd.dwg":"dwg","image/vnd.dxf":"dxf","image/vnd.fastbidsheet":"fbs","image/vnd.fpx":"fpx","image/vnd.fst":"fst","image/vnd.fujixerox.edmics-mmr":"mmr","image/vnd.fujixerox.edmics-rlc":"rlc","image/vnd.ms-modi":"mdi","image/vnd.ms-photo":"wdp","image/vnd.net-fpx":"npx","image/vnd.wap.wbmp":"wbmp","image/vnd.xiff":"xif","image/webp":"webp","image/x-3ds":"3ds","image/x-cmu-raster":"ras","image/x-cmx":"cmx","image/x-freehand":"fh","image/x-icon":"ico","image/x-mrsid-image":"sid","image/x-pcx":"pcx","image/x-pict":"pic","image/x-portable-anymap":"pnm","image/x-portable-bitmap":"pbm","image/x-portable-graymap":"pgm","image/x-portable-pixmap":"ppm","image/x-rgb":"rgb","image/x-tga":"tga","image/x-xbitmap":"xbm","image/x-xpixmap":"xpm","image/x-xwindowdump":"xwd","message/rfc822":"eml","model/iges":"igs","model/mesh":"msh","model/vnd.collada+xml":"dae","model/vnd.dwf":"dwf","model/vnd.gdl":"gdl","model/vnd.gtw":"gtw","model/vnd.mts":"mts","model/vnd.vtu":"vtu","model/vrml":"wrl","model/x3d+binary":"x3db","model/x3d+vrml":"x3dv","model/x3d+xml":"x3d","text/cache-manifest":"appcache","text/calendar":"ics","text/css":"css","text/csv":"csv","text/html":"html","text/n3":"n3","text/plain":"txt","text/prs.lines.tag":"dsc","text/richtext":"rtx","text/sgml":"sgml","text/tab-separated-values":"tsv","text/troff":"t","text/turtle":"ttl","text/uri-list":"uri","text/vcard":"vcard","text/vnd.curl":"curl","text/vnd.curl.dcurl":"dcurl","text/vnd.curl.scurl":"scurl","text/vnd.curl.mcurl":"mcurl","text/vnd.dvb.subtitle":"sub","text/vnd.fly":"fly","text/vnd.fmi.flexstor":"flx","text/vnd.graphviz":"gv","text/vnd.in3d.3dml":"3dml","text/vnd.in3d.spot":"spot","text/vnd.sun.j2me.app-descriptor":"jad","text/vnd.wap.wml":"wml","text/vnd.wap.wmlscript":"wmls","text/x-asm":"s","text/x-c":"c","text/x-fortran":"f","text/x-java-source":"java","text/x-opml":"opml","text/x-pascal":"p","text/x-nfo":"nfo","text/x-setext":"etx","text/x-sfv":"sfv","text/x-uuencode":"uu","text/x-vcalendar":"vcs","text/x-vcard":"vcf","video/3gpp":"3gp","video/3gpp2":"3g2","video/h261":"h261","video/h263":"h263","video/h264":"h264","video/jpeg":"jpgv","video/jpm":"jpm","video/mj2":"mj2","video/mp4":"mp4","video/mpeg":"mpeg","video/ogg":"ogv","video/quicktime":"qt","video/vnd.dece.hd":"uvh","video/vnd.dece.mobile":"uvm","video/vnd.dece.pd":"uvp","video/vnd.dece.sd":"uvs","video/vnd.dece.video":"uvv","video/vnd.dvb.file":"dvb","video/vnd.fvt":"fvt","video/vnd.mpegurl":"mxu","video/vnd.ms-playready.media.pyv":"pyv","video/vnd.uvvu.mp4":"uvu","video/vnd.vivo":"viv","video/webm":"webm","video/x-f4v":"f4v","video/x-fli":"fli","video/x-flv":"flv","video/x-m4v":"m4v","video/x-matroska":"mkv","video/x-mng":"mng","video/x-ms-asf":"asf","video/x-ms-vob":"vob","video/x-ms-wm":"wm","video/x-ms-wmv":"wmv","video/x-ms-wmx":"wmx","video/x-ms-wvx":"wvx","video/x-msvideo":"avi","video/x-sgi-movie":"movie","video/x-smv":"smv","x-conference/x-cooltalk":"ice","text/vtt":"vtt","application/x-chrome-extension":"crx","text/x-component":"htc","video/MP2T":"ts","text/event-stream":"event-stream","application/x-web-app-manifest+json":"webapp","text/x-lua":"lua","application/x-lua-bytecode":"luac","text/x-markdown":"markdown"},extension:function(e){var t=e.match(/^\s*([^;\s]*)(?:;|\s|$)/)[1].toLowerCase();return this.extensions[t]},define:function(e){for(var t in e){for(var r=e[t],n=0;n<r.length;n++)this.types[r[n]]=t;this.extensions[t]||(this.extensions[t]=r[0])}},charsets:{lookup:function(e,t){return/^text\//.test(e)?"UTF-8":t}}};n.types.constructor=void 0,n.extensions.constructor=void 0},function(e,t,r){var n=r(206),i=r(39),o=r(11),s=r(841),a=n.util,c=n.FileReadStream,u=n.SpeedSummary,l=n.validate;s.prototype.getFileToLocalFile=function(e,t,r,n,s,c){var p;a.normalizeArgs(s,c,function(e,t){p=e,c=t}),p.speedSummary=p.speedSummary||new u(r),l.validateArgs("getFileToLocalFile",function(i){i.string(e,"share"),i.stringAllowEmpty(t,"directory"),i.string(r,"file"),i.string(n,"localFileName"),i.shareNameIsValid(e),i.callback(c)});var d=i(!0,{},p),h=o.createWriteStream(n);return h.on("error",function(e){c(e)}),this.getFileToStream(e,t,r,h,d,function(e,t,r){e?h.end(function(){o.existsSync(n)&&0===h.bytesWritten&&o.unlinkSync(n),c(e,t,r)}):c(e,t,r)}),d.speedSummary},s.prototype.createFileFromLocalFile=function(e,t,r,n,s,p){var d;a.normalizeArgs(s,p,function(e,t){d=e,p=t}),l.validateArgs("createFileFromLocalFile",function(i){i.string(e,"share"),i.stringAllowEmpty(t,"directory"),i.string(r,"file"),i.string(n,"localFileName"),i.shareNameIsValid(e),i.callback(p)});var h=i(!0,{},d);h.speedSummary=h.speedSummary||new u(r);var f=this;return o.stat(n,function(i,o){i?p(i):f.createFile(e,t,r,o.size,h,function(i){if(i)p(i);else{var s=new c(n,{calcContentMd5:h.storeFileContentMD5});f._createFileFromChunkStream(e,t,r,s,o.size,h,p)}})}),h.speedSummary},e.exports=s},function(e,t,r){var n=r(52),i=r(7),o=r(1),s=r(29),a=r(39),c=r(6),u=r(20),l=r(84),p=u.util,d=u.SR,h=u.validate,f=u.SpeedSummary,m=u.StorageServiceClient,g=u.WebResource,y=u.Constants,v=y.FileConstants,b=y.HeaderConstants,_=y.HttpConstants,w=y.QueryStringConstants,E=u.BatchOperation,S=(f=u.SpeedSummary,u.ChunkAllocator),C=u.ChunkStream,x=u.ChunkStreamWithStream,k=r(842),R=r(843),T=r(844),O=r(845),I=u.AclResult,N=r(76),A=N.ArgumentNullError,P=N.ArgumentError;function FileService(e,t,r,n,i){var o=m.getStorageSettings(e,t,r,n,i);FileService.super_.call(this,o._name,o._key,o._fileEndpoint,o._usePathStyleUri,o._sasToken),this.defaultEnableReuseSocket=y.DEFAULT_ENABLE_REUSE_SOCKET,this.singleFileThresholdInBytes=v.DEFAULT_SINGLE_FILE_GET_THRESHOLD_IN_BYTES,this.parallelOperationThreadCount=y.DEFAULT_PARALLEL_OPERATION_THREAD_COUNT}function createResourceName(e,t,r,n){var i=function(e){return e&&!n&&(e=(e=(e=(e=encodeURIComponent(e)).replace(/%2F/g,"/")).replace(/%5C/g,"/")).replace(/\+/g,"%20")),e},o=e;return t&&("/"!==t[0]&&(o+="/"),o+=i(t)),r&&("/"!==o[o.length-1]&&(o+="/"),o+=i(r)),c.normalize(o).replace(/\\/g,"/")}o.inherits(FileService,m),FileService.prototype.getServiceProperties=function(e,t){return this.getAccountServiceProperties(e,t)},FileService.prototype.setServiceProperties=function(e,t,r){return this.setAccountServiceProperties(e,t,r)},FileService.prototype.listSharesSegmented=function(e,t,r){this.listSharesSegmentedWithPrefix(null,e,t,r)},FileService.prototype.listSharesSegmentedWithPrefix=function(e,t,r,n){var i;p.normalizeArgs(r,n,function(e,t){i=e,n=t}),h.validateArgs("listShares",function(e){e.callback(n)});var o=a(!0,{},i),c=g.get().withQueryOption(w.COMP,"list").withQueryOption(w.MAX_RESULTS,o.maxResults).withQueryOption(w.INCLUDE,o.include);p.objectIsNull(t)||c.withQueryOption(w.MARKER,t.nextMarker),c.withQueryOption(w.PREFIX,e);this.performRequest(c,null,o,function(e,t){if(e.listSharesResult=null,!e.error){e.listSharesResult={entries:null,continuationToken:null},e.listSharesResult.entries=[];var r=[];e.response.body.EnumerationResults.Shares&&e.response.body.EnumerationResults.Shares.Share&&(r=e.response.body.EnumerationResults.Shares.Share,s.isArray(r)||(r=[r])),r.forEach(function(t){var r=R.parse(t);e.listSharesResult.entries.push(r)}),e.response.body.EnumerationResults.NextMarker&&(e.listSharesResult.continuationToken={nextMarker:null,targetLocation:null},e.listSharesResult.continuationToken.nextMarker=e.response.body.EnumerationResults.NextMarker,e.listSharesResult.continuationToken.targetLocation=e.targetLocation)}t(e,function(e){n(e.error,e.listSharesResult,e.response)})})},FileService.prototype.doesShareExist=function(e,t,r){this._doesShareExist(e,!1,t,r)},FileService.prototype.createShare=function(e,t,r){var n;p.normalizeArgs(t,r,function(e,t){n=e,r=t}),h.validateArgs("createShare",function(t){t.string(e,"share"),t.shareNameIsValid(e),t.shareQuotaIsValid(n.quota),t.callback(r)});var i=a(!0,{},n),o=g.put(e).withQueryOption(w.RESTYPE,"share").withHeader(b.SHARE_QUOTA,i.quota);o.addOptionalMetadataHeaders(i.metadata);this.performRequest(o,null,i,function(t,n){t.shareResult=null,t.error||(t.shareResult=new R(e),t.shareResult.getPropertiesFromHeaders(t.response.headers),i.metadata&&(t.shareResult.metadata=i.metadata));n(t,function(e){r(e.error,e.shareResult,e.response)})})},FileService.prototype.createShareSnapshot=function(e,t,r){var n;p.normalizeArgs(t,r,function(e,t){n=e,r=t}),h.validateArgs("createShareSnapshot",function(t){t.string(e,"share"),t.shareNameIsValid(e),t.callback(r)});var i=a(!0,{},n),o=g.put(e).withQueryOption(w.RESTYPE,"share").withQueryOption(w.COMP,w.SNAPSHOT);o.addOptionalMetadataHeaders(i.metadata);this.performRequest(o,null,i,function(e,t){e.snapshotId=null,e.error||(e.snapshotId=e.response.headers[b.SNAPSHOT]);t(e,function(e){r(e.error,e.snapshotId,e.response)})})},FileService.prototype.createShareIfNotExists=function(e,t,r){var n;p.normalizeArgs(t,r,function(e,t){n=e,r=t}),h.validateArgs("createShareIfNotExists",function(t){t.string(e,"share"),t.shareNameIsValid(e),t.callback(r)});var i=a(!0,{},n);delete i.shareSnapshotId;var o=this;o._doesShareExist(e,!0,i,function(t,n,s){var a=n.exists;n.created=!1,delete n.exists,t?r(t,n,s):a?(s.isSuccessful=!0,r(t,n,s)):o.createShare(e,i,function(e,t,n){e?e&&e.statusCode===_.HttpResponseCodes.Conflict&&e.code===y.FileErrorCodeStrings.SHARE_ALREADY_EXISTS&&(e=null,n.isSuccessful=!0):t.created=!0,r(e,t,n)})})},FileService.prototype.getShareProperties=function(e,t,r){var n;p.normalizeArgs(t,r,function(e,t){n=e,r=t}),h.validateArgs("getShareProperties",function(t){t.string(e,"share"),t.shareNameIsValid(e),t.callback(r)});var i=a(!0,{},n),o=g.head(e).withQueryOption(w.RESTYPE,"share").withQueryOption(w.SHARE_SNAPSHOT,i.shareSnapshotId),s=this;this.performRequest(o,null,i,function(t,n){t.shareResult=null,t.error||(t.shareResult=new R(e),t.shareResult.metadata=s.parseMetadataHeaders(t.response.headers),t.shareResult.getPropertiesFromHeaders(t.response.headers));n(t,function(e){r(e.error,e.shareResult,e.response)})})},FileService.prototype.setShareProperties=function(e,t,r,n){var i;p.normalizeArgs(r,n,function(e,t){i=e,n=t}),h.validateArgs("setShareProperties",function(t){t.string(e,"share"),t.shareNameIsValid(e),t.shareQuotaIsValid(i.quota),t.callback(n)});var o=a(!0,t,i),s=createResourceName(e),c=g.put(s).withQueryOption(w.RESTYPE,"share").withQueryOption(w.COMP,"properties").withHeader(b.SHARE_QUOTA,o.quota);O.setProperties(c,o);this.performRequest(c,null,o,function(t,r){t.shareResult=null,t.error||(t.shareResult=new R(e),t.shareResult.getPropertiesFromHeaders(t.response.headers));r(t,function(e){n(e.error,e.shareResult,e.response)})})},FileService.prototype.getShareStats=function(e,t,r){var n;p.normalizeArgs(t,r,function(e,t){n=e,r=t}),h.validateArgs("getShareStats",function(e){e.callback(r)});var i=a(!0,{},n),o=createResourceName(e),s=g.get(o).withQueryOption(w.RESTYPE,"share").withQueryOption(w.COMP,"stats");this.performRequest(s,null,i,function(t,n){t.shareResult=null,t.error||(t.shareResult=R.parse(t.response.body,e),t.shareResult.getPropertiesFromHeaders(t.response.headers));n(t,function(e){r(e.error,e.shareResult,e.response)})})},FileService.prototype.getShareMetadata=function(e,t,r){var n;p.normalizeArgs(t,r,function(e,t){n=e,r=t}),h.validateArgs("getShareMetadata",function(t){t.string(e,"share"),t.shareNameIsValid(e),t.callback(r)});var i=a(!0,{},n),o=g.head(e).withQueryOption(w.RESTYPE,"share").withQueryOption(w.COMP,"metadata").withQueryOption(w.SHARE_SNAPSHOT,i.shareSnapshotId),s=this;this.performRequest(o,null,i,function(t,n){t.shareResult=null,t.error||(t.shareResult=new R(e),t.shareResult.metadata=s.parseMetadataHeaders(t.response.headers),t.shareResult.getPropertiesFromHeaders(t.response.headers));n(t,function(e){r(e.error,e.shareResult,e.response)})})},FileService.prototype.setShareMetadata=function(e,t,r,n){var i;p.normalizeArgs(r,n,function(e,t){i=e,n=t}),h.validateArgs("setShareMetadata",function(r){r.string(e,"share"),r.object(t,"metadata"),r.shareNameIsValid(e),r.callback(n)});var o=a(!0,{},i),s=g.put(e).withQueryOption(w.RESTYPE,"share").withQueryOption(w.COMP,"metadata");s.addOptionalMetadataHeaders(t);this.performRequest(s,null,o,function(t,r){t.shareResult=null,t.error||(t.shareResult=new R(e),t.shareResult.getPropertiesFromHeaders(t.response.headers));r(t,function(e){n(e.error,e.shareResult,e.response)})})},FileService.prototype.getShareAcl=function(e,t,r){var n;p.normalizeArgs(t,r,function(e,t){n=e,r=t}),h.validateArgs("getShareAcl",function(t){t.string(e,"share"),t.shareNameIsValid(e),t.callback(r)});var i=a(!0,{},n),o=g.get(e).withQueryOption(w.RESTYPE,"share").withQueryOption(w.COMP,"acl");i.requestLocationMode=y.RequestLocationMode.PRIMARY_OR_SECONDARY;this.performRequest(o,null,i,function(t,n){t.shareResult=null,t.error||(t.shareResult=new R(e),t.shareResult.getPropertiesFromHeaders(t.response.headers),t.shareResult.signedIdentifiers=I.parse(t.response.body));n(t,function(e){r(e.error,e.shareResult,e.response)})})},FileService.prototype.setShareAcl=function(e,t,r,n){var i;p.normalizeArgs(r,n,function(e,t){i=e,n=t}),h.validateArgs("setShareAcl",function(t){t.string(e,"share"),t.shareNameIsValid(e),t.callback(n)});var o=a(!0,{},i),c=null;if(t){if(s.isArray(t))throw new TypeError(d.INVALID_SIGNED_IDENTIFIERS);c=I.serialize(t)}var u=g.put(e).withQueryOption(w.RESTYPE,"share").withQueryOption(w.COMP,"acl").withHeader(b.CONTENT_LENGTH,p.objectIsNull(c)?0:Buffer.byteLength(c)).withBody(c);this.performRequest(u,u.body,o,function(r,i){r.shareResult=null,r.error||(r.shareResult=new R(e),r.shareResult.getPropertiesFromHeaders(r.response.headers),t&&(r.shareResult.signedIdentifiers=t));i(r,function(e){n(e.error,e.shareResult,e.response)})})},FileService.prototype.deleteShare=function(e,t,r){var n;p.normalizeArgs(t,r,function(e,t){n=e,r=t}),h.validateArgs("deleteShare",function(t){t.string(e,"share"),t.shareNameIsValid(e),t.callback(r)});var i=a(!0,{},n);if(!p.objectIsNull(i.shareSnapshotId)&&!p.objectIsNull(i.deleteSnapshots))throw new P("options",d.INVALID_DELETE_SNAPSHOT_OPTION);var o=g.del(e).withQueryOption(w.RESTYPE,"share").withQueryOption(w.SHARE_SNAPSHOT,i.shareSnapshotId).withHeader(b.DELETE_SNAPSHOT,i.deleteSnapshots);this.performRequest(o,null,i,function(e,t){t(e,function(e){r(e.error,e.response)})})},FileService.prototype.deleteShareIfExists=function(e,t,r){var n;p.normalizeArgs(t,r,function(e,t){n=e,r=t}),h.validateArgs("deleteShareIfExists",function(t){t.string(e,"share"),t.shareNameIsValid(e),t.callback(r)});var i=a(!0,{},n),o=this;o._doesShareExist(e,!0,i,function(t,n,s){t?r(t,n.exists,s):n.exists?o.deleteShare(e,i,function(e,t){var n;e?e&&e.statuscode===_.HttpResponseCodes.NotFound&&e.code===y.FileErrorCodeStrings.SHARE_NOT_FOUND&&(n=!1,e=null,t.isSuccessful=!0):n=!0,r(e,n,t)}):(s.isSuccessful=!0,r(t,!1,s))})},FileService.prototype.doesDirectoryExist=function(e,t,r,n){this._doesDirectoryExist(e,t,!1,r,n)},FileService.prototype.createDirectory=function(e,t,r,n){var i;p.normalizeArgs(r,n,function(e,t){i=e,n=t}),h.validateArgs("createDirectory",function(r){r.string(e,"share"),r.string(t,"directory"),r.shareNameIsValid(e),r.callback(n)});var o=a(!0,{},i),s=g.put(createResourceName(e,t)).withQueryOption(w.RESTYPE,"directory");s.addOptionalMetadataHeaders(o.metadata);this.performRequest(s,null,o,function(e,r){e.directoryResult=null,e.error||(e.directoryResult=new T(t),e.directoryResult.getPropertiesFromHeaders(e.response.headers));r(e,function(e){n(e.error,e.directoryResult,e.response)})})},FileService.prototype.createDirectoryIfNotExists=function(e,t,r,n){var i;p.normalizeArgs(r,n,function(e,t){i=e,n=t}),h.validateArgs("createDirectoryIfNotExists",function(r){r.string(e,"share"),r.string(t,"directory"),r.shareNameIsValid(e),r.callback(n)});var o=a(!0,{},i);delete o.shareSnapshotId;var s=this;s._doesDirectoryExist(e,t,!0,o,function(r,i,a){var c=i.exists;i.created=!1,delete i.exists,r?n(r,i,a):c?(a.isSuccessful=!0,n(r,i,a)):s.createDirectory(e,t,o,function(e,t,r){e?e&&e.statusCode===_.HttpResponseCodes.Conflict&&e.code===y.StorageErrorCodeStrings.RESOURCE_ALREADY_EXISTS&&(e=null,r.isSuccessful=!0):t.created=!0,n(e,t,r)})})},FileService.prototype.getDirectoryProperties=function(e,t,r,n){var i;p.normalizeArgs(r,n,function(e,t){i=e,n=t}),h.validateArgs("getDirectoryProperties",function(r){r.string(e,"share"),r.stringAllowEmpty(t,"directory"),r.shareNameIsValid(e),r.callback(n)});var o=a(!0,{},i),s=g.head(createResourceName(e,t)).withQueryOption(w.RESTYPE,"directory").withQueryOption(w.SHARE_SNAPSHOT,o.shareSnapshotId),c=this;this.performRequest(s,null,o,function(e,r){e.directoryResult=null,e.error||(e.directoryResult=new T(t),e.directoryResult.metadata=c.parseMetadataHeaders(e.response.headers),e.directoryResult.getPropertiesFromHeaders(e.response.headers));r(e,function(e){n(e.error,e.directoryResult,e.response)})})},FileService.prototype.deleteDirectory=function(e,t,r,n){var i;p.normalizeArgs(r,n,function(e,t){i=e,n=t}),h.validateArgs("deleteDirectory",function(r){r.string(e,"share"),r.string(t,"directory"),r.shareNameIsValid(e),r.callback(n)});var o=a(!0,{},i),s=g.del(createResourceName(e,t)).withQueryOption(w.RESTYPE,"directory");this.performRequest(s,null,o,function(e,t){t(e,function(e){n(e.error,e.response)})})},FileService.prototype.deleteDirectoryIfExists=function(e,t,r,n){var i;p.normalizeArgs(r,n,function(e,t){i=e,n=t}),h.validateArgs("deleteDirectoryIfExists",function(r){r.string(e,"share"),r.string(t,"directory"),r.shareNameIsValid(e),r.callback(n)});var o=a(!0,{},i);delete o.shareSnapshotId;var s=this;s._doesDirectoryExist(e,t,!0,o,function(r,i,a){r?n(r,i.exists,a):i.exists?s.deleteDirectory(e,t,o,function(e,t){var r;e?e&&e.statuscode===_.HttpResponseCodes.NotFound&&e.code===y.StorageErrorCodeStrings.RESOURCE_NOT_FOUND&&(r=!1,e=null,t.isSuccessful=!0):r=!0,n(e,r,t)}):(a.isSuccessful=!0,n(r,!1,a))})},FileService.prototype.listFilesAndDirectoriesSegmented=function(e,t,r,n,i){this.listFilesAndDirectoriesSegmentedWithPrefix(e,t,null,r,n,i)},FileService.prototype.listFilesAndDirectoriesSegmentedWithPrefix=function(e,t,r,n,i,o){var c;p.normalizeArgs(i,o,function(e,t){c=e,o=t}),h.validateArgs("listFilesSegmented",function(r){r.string(e,"share"),r.stringAllowEmpty(t,"directory"),r.shareNameIsValid(e),r.callback(o)});var u=a(!0,{},c),l=g.get(createResourceName(e,t)).withQueryOption(w.RESTYPE,"directory").withQueryOption(w.COMP,"list").withQueryOption(w.MAX_RESULTS,u.maxResults).withQueryOption(w.SHARE_SNAPSHOT,u.shareSnapshotId);p.objectIsNull(n)||l.withQueryOption(w.MARKER,n.nextMarker),l.withQueryOption(w.PREFIX,r);this.performRequest(l,null,u,function(e,t){if(e.listResult=null,!e.error){e.listResult={entries:null,continuationToken:null},e.listResult.entries={},e.listResult.entries.files=[],e.listResult.entries.directories=[];var r=[],n=[];e.response.body.EnumerationResults.Entries.File&&(r=e.response.body.EnumerationResults.Entries.File,s.isArray(r)||(r=[r])),r.forEach(function(t){var r=O.parse(t);e.listResult.entries.files.push(r)}),e.response.body.EnumerationResults.Entries.Directory&&(n=e.response.body.EnumerationResults.Entries.Directory,s.isArray(n)||(n=[n])),n.forEach(function(t){var r=T.parse(t);e.listResult.entries.directories.push(r)}),e.response.body.EnumerationResults.NextMarker&&(e.listResult.continuationToken={nextMarker:null,targetLocation:null},e.listResult.continuationToken.nextMarker=e.response.body.EnumerationResults.NextMarker,e.listResult.continuationToken.targetLocation=e.targetLocation)}t(e,function(e){o(e.error,e.listResult,e.response)})})},FileService.prototype.getDirectoryMetadata=function(e,t,r,n){var i;p.normalizeArgs(r,n,function(e,t){i=e,n=t}),h.validateArgs("getDirectoryMetadata",function(r){r.string(e,"share"),r.stringAllowEmpty(t,"directory"),r.shareNameIsValid(e),r.callback(n)});var o=a(!0,{},i),s=createResourceName(e,t),c=g.head(s).withQueryOption(w.RESTYPE,"directory").withQueryOption(w.COMP,"metadata").withQueryOption(w.SHARE_SNAPSHOT,o.shareSnapshotId),u=this;this.performRequest(c,null,o,function(e,r){e.directoryResult=null,e.error||(e.directoryResult=new T(t),e.directoryResult.metadata=u.parseMetadataHeaders(e.response.headers),e.directoryResult.getPropertiesFromHeaders(e.response.headers));r(e,function(e){n(e.error,e.directoryResult,e.response)})})},FileService.prototype.setDirectoryMetadata=function(e,t,r,n,i){var o;p.normalizeArgs(n,i,function(e,t){o=e,i=t}),h.validateArgs("setDirectoryMetadata",function(n){n.string(e,"share"),n.stringAllowEmpty(t,"directory"),n.shareNameIsValid(e),n.object(r,"metadata"),n.callback(i)});var s=a(!0,{},o),c=createResourceName(e,t),u=g.put(c).withQueryOption(w.RESTYPE,"directory").withQueryOption(w.COMP,"metadata");u.addOptionalMetadataHeaders(r);this.performRequest(u,null,s,function(e,r){e.directoryResult=null,e.error||(e.directoryResult=new T(t),e.directoryResult.getPropertiesFromHeaders(e.response.headers));r(e,function(e){i(e.error,e.directoryResult,e.response)})})},FileService.prototype.generateSharedAccessSignature=function(e,t,r,n,i){if(!this.storageCredentials||!this.storageCredentials.generateSignedQueryString)throw new Error(d.CANNOT_CREATE_SAS_WITHOUT_ACCOUNT_KEY);h.validateArgs("generateSharedAccessSignature",function(t){t.string(e,"share"),t.shareNameIsValid(e),t.object(n,"sharedAccessPolicy")});var o=v.ResourceTypes.SHARE;r?(h.validateArgs("generateSharedAccessSignature",function(e){e.stringAllowEmpty(t,"directory"),e.string(r,"file")}),o=v.ResourceTypes.FILE):t="",n.AccessPolicy&&(p.objectIsNull(n.AccessPolicy.Start)||(s.isDate(n.AccessPolicy.Start)||(n.AccessPolicy.Start=new Date(n.AccessPolicy.Start)),n.AccessPolicy.Start=p.truncatedISO8061Date(n.AccessPolicy.Start)),p.objectIsNull(n.AccessPolicy.Expiry)||(s.isDate(n.AccessPolicy.Expiry)||(n.AccessPolicy.Expiry=new Date(n.AccessPolicy.Expiry)),n.AccessPolicy.Expiry=p.truncatedISO8061Date(n.AccessPolicy.Expiry)));var a=createResourceName(e,t,r,!0);return this.storageCredentials.generateSignedQueryString(y.ServiceType.File,a,n,null,{headers:i,resourceType:o})},FileService.prototype.getUrl=function(e,t,r,o,s,a){var c;h.validateArgs("getUrl",function(r){r.string(e,"share"),r.stringAllowEmpty(t,"directory"),r.shareNameIsValid(e)}),c=p.objectIsNull(s)||!1!==s?this.host.primaryHost:this.host.secondaryHost,(c=p.trimPortFromUri(c))&&c.lastIndexOf("/")!==c.length-1&&(c+="/");var u=createResourceName(e,t,r),l=n.parse(o);return a&&(l[w.SHARE_SNAPSHOT]=a),i.resolve(c,i.format({pathname:this._getPath(u),query:l}))},FileService.prototype.getFileProperties=function(e,t,r,n,i){var o;p.normalizeArgs(n,i,function(e,t){o=e,i=t}),h.validateArgs("getFileProperties",function(n){n.string(e,"share"),n.stringAllowEmpty(t,"directory"),n.string(r,"file"),n.shareNameIsValid(e),n.callback(i)});var s=a(!0,{},o),c=createResourceName(e,t,r),u=g.head(c).withQueryOption(w.SHARE_SNAPSHOT,s.shareSnapshotId),l=this;this.performRequest(u,null,s,function(n,o){n.fileResult=null,n.error||(n.fileResult=new O(e,t,r),n.fileResult.metadata=l.parseMetadataHeaders(n.response.headers),n.fileResult.getPropertiesFromHeaders(n.response.headers,!0));o(n,function(e){i(e.error,e.fileResult,e.response)})})},FileService.prototype.getFileMetadata=function(e,t,r,n,i){var o;p.normalizeArgs(n,i,function(e,t){o=e,i=t}),h.validateArgs("getFileMetadata",function(n){n.string(e,"share"),n.stringAllowEmpty(t,"directory"),n.string(r,"file"),n.shareNameIsValid(e),n.callback(i)});var s=a(!0,{},o),c=createResourceName(e,t,r),u=g.head(c).withQueryOption(w.COMP,"metadata").withQueryOption(w.SHARE_SNAPSHOT,s.shareSnapshotId),l=this;this.performRequest(u,null,s,function(n,o){n.fileResult=null,n.error||(n.fileResult=new O(e,t,r),n.fileResult.metadata=l.parseMetadataHeaders(n.response.headers),n.fileResult.getPropertiesFromHeaders(n.response.headers));o(n,function(e){i(e.error,e.fileResult,e.response)})})},FileService.prototype.setFileProperties=function(e,t,r,n,i,o){var s;p.normalizeArgs(i,o,function(e,t){s=e,o=t}),h.validateArgs("setFileProperties",function(n){n.string(e,"share"),n.stringAllowEmpty(t,"directory"),n.string(r,"file"),n.shareNameIsValid(e),n.callback(o)});var c=a(!0,{contentSettings:n,contentLength:n.contentLength},s),u=createResourceName(e,t,r),l=g.put(u).withQueryOption(w.COMP,"properties");O.setProperties(l,c);this.performRequest(l,null,c,function(n,i){n.fileResult=null,n.error||(n.fileResult=new O(e,t,r),n.fileResult.getPropertiesFromHeaders(n.response.headers));i(n,function(e){o(e.error,e.fileResult,e.response)})})},FileService.prototype.setFileMetadata=function(e,t,r,n,i,o){var s;p.normalizeArgs(i,o,function(e,t){s=e,o=t}),h.validateArgs("setFileMetadata",function(i){i.string(e,"share"),i.stringAllowEmpty(t,"directory"),i.string(r,"file"),i.shareNameIsValid(e),i.object(n,"metadata"),i.callback(o)});var c=a(!0,{},s),u=createResourceName(e,t,r),l=g.put(u).withQueryOption(w.COMP,"metadata");l.addOptionalMetadataHeaders(n);this.performRequest(l,null,c,function(n,i){n.fileResult=null,n.error||(n.fileResult=new O(e,t,r),n.fileResult.getPropertiesFromHeaders(n.response.headers));i(n,function(e){o(e.error,e.fileResult,e.response)})})},FileService.prototype.resizeFile=function(e,t,r,n,i,o){var s;p.normalizeArgs(i,o,function(e,t){s=e,o=t}),h.validateArgs("resizeFile",function(i){i.string(e,"share"),i.stringAllowEmpty(t,"directory"),i.string(r,"file"),i.shareNameIsValid(e),i.value(n),i.callback(o)});var c=a(!0,{},s),u=createResourceName(e,t,r),l=g.put(u).withQueryOption(w.COMP,"properties");l.withHeader(b.FILE_CONTENT_LENGTH,n);this.performRequest(l,null,c,function(n,i){n.fileResult=null,n.error||(n.fileResult=new O(e,t,r),n.fileResult.getPropertiesFromHeaders(n.response.headers));i(n,function(e){o(e.error,e.fileResult,e.response)})})},FileService.prototype.doesFileExist=function(e,t,r,n,i){this._doesFileExist(e,t,r,!1,n,i)},FileService.prototype.createFile=function(e,t,r,n,i,o){var s;p.normalizeArgs(i,o,function(e,t){s=e,o=t}),h.validateArgs("createFile",function(i){i.string(e,"share"),i.stringAllowEmpty(t,"directory"),i.string(r,"file"),i.shareNameIsValid(e),i.value(n),i.callback(o)});var c=createResourceName(e,t,r),u=a(!0,{},s),l=g.put(c).withHeader(b.TYPE,"file").withHeader(b.FILE_CONTENT_LENGTH,n);O.setProperties(l,u);this.performRequest(l,null,u,function(n,i){n.fileResult=null,n.error||(n.fileResult=new O(e,t,r),n.fileResult.getPropertiesFromHeaders(n.response.headers));i(n,function(e){o(e.error,e.fileResult,e.response)})})},FileService.prototype.deleteFile=function(e,t,r,n,i){var o;p.normalizeArgs(n,i,function(e,t){o=e,i=t}),h.validateArgs("deleteFile",function(n){n.string(e,"share"),n.stringAllowEmpty(t,"directory"),n.string(r,"file"),n.shareNameIsValid(e),n.callback(i)});var s=a(!0,{},o),c=createResourceName(e,t,r),u=g.del(c);this.performRequest(u,null,s,function(e,t){t(e,function(e){i(e.error,e.response)})})},FileService.prototype.deleteFileIfExists=function(e,t,r,n,i){var o;p.normalizeArgs(n,i,function(e,t){o=e,i=t}),h.validateArgs("deleteFileIfExists",function(n){n.string(e,"share"),n.stringAllowEmpty(t,"directory"),n.string(r,"file"),n.shareNameIsValid(e),n.callback(i)});var s=a(!0,{},o);delete s.shareSnapshotId;var c=this;c._doesFileExist(e,t,r,!0,s,function(n,o,a){n?i(n,o.exists,a):o.exists?c.deleteFile(e,t,r,s,function(e,t){var r;e?e&&e.statusCode===y.HttpConstants.HttpResponseCodes.NotFound&&e.code===y.FileErrorCodeStrings.FILE_NOT_FOUND&&(r=!1,e=null,t.isSuccessful=!0):r=!0,i(e,r,t)}):(a.isSuccessful=!0,i(n,!1,a))})},FileService.prototype.getFileToText=function(e,t,r,n,i){var o;p.normalizeArgs(n,i,function(e,t){o=e,i=t}),h.validateArgs("getFileToText",function(n){n.string(e,"share"),n.stringAllowEmpty(t,"directory"),n.string(r,"file"),n.shareNameIsValid(e),n.callback(i)});var s=a(!0,{},o),c=createResourceName(e,t,r),u=g.get(c).withQueryOption(w.SHARE_SNAPSHOT,s.shareSnapshotId).withRawResponse();O.setHeaders(u,s),this._setRangeContentMD5Header(u,s);var l=this;this.performRequest(u,null,s,function(n,o){n.text=null,n.fileResult=null,n.error||(n.fileResult=new O(e,t,r),n.fileResult.getPropertiesFromHeaders(n.response.headers,!0),n.fileResult.metadata=l.parseMetadataHeaders(n.response.headers),n.text=n.response.body,l._validateLengthAndMD5(s,n));o(n,function(e){i(e.error,e.text,e.fileResult,e.response)})})},FileService.prototype.createReadStream=function(e,t,r,n,i){var o;p.normalizeArgs(n,i,function(e,t){o=e,i=t}),h.validateArgs("createReadStream",function(n){n.string(e,"share"),n.stringAllowEmpty(t,"directory"),n.string(r,"file"),n.shareNameIsValid(e)});var s=a(!0,{},o),c=new C(s);return this.getFileToStream(e,t,r,c,s,function(e,t,r){e&&c.emit("error",e),i&&i(e,t,r)}),c},FileService.prototype.getFileToStream=function(e,t,r,n,i,o){var s;p.normalizeArgs(i,o,function(e,t){s=e,o=t}),s.speedSummary=s.speedSummary||new f(r),h.validateArgs("getFileToStream",function(i){i.string(e,"share"),i.stringAllowEmpty(t,"directory"),i.string(r,"file"),i.object(n,"writeStream"),i.shareNameIsValid(e),i.callback(o)});var c=a(!0,{},s),u={timeoutIntervalInMs:c.timeoutIntervalInMs,clientRequestTimeoutInMs:c.clientRequestTimeoutInMs,accessConditions:c.accessConditions,shareSnapshotId:c.shareSnapshotId};if(c.skipSizeCheck)this._getFileToStream(e,t,r,n,c,o);else{var l=this;this.getFileProperties(e,t,r,u,function(i,s){if(i)o(i);else{var a;if(c.rangeStart){var u=s.contentLength-1;a=(c.rangeEnd?Math.min(c.rangeEnd,u):u)-c.rangeStart+1}else a=s.contentLength;c.speedSummary.totalSize=a,a>l.singleFileThresholdInBytes?(p.setObjectInnerPropertyValue(c,["contentSettings","contentMD5"],p.tryGetValueChain(s,["contentSettings","contentMD5"],null)),l._getFileToRangeStream(e,t,r,n,c,o)):l._getFileToStream(e,t,r,n,c,o)}})}return c.speedSummary},FileService.prototype.listRanges=function(e,t,r,n,i){var o;p.normalizeArgs(n,i,function(e,t){o=e,i=t}),h.validateArgs("listRanges",function(n){n.string(e,"share"),n.stringAllowEmpty(t,"directory"),n.string(r,"file"),n.shareNameIsValid(e),n.callback(i)});var c=createResourceName(e,t,r),u=a(!0,{},o),l=g.get(c).withQueryOption(w.COMP,"rangelist").withQueryOption(w.SHARE_SNAPSHOT,u.shareSnapshotId);O.setHeaders(l,u);this.performRequest(l,null,u,function(e,t){if(e.ranges=null,!e.error){e.ranges=[];var r=[];e.response.body.Ranges.Range&&(r=e.response.body.Ranges.Range,s.isArray(r)||(r=[r])),r.forEach(function(t){var r={start:parseInt(t.Start,10),end:parseInt(t.End,10)};e.ranges.push(r)})}t(e,function(e){i(e.error,e.ranges,e.response)})})},FileService.prototype.clearRange=function(e,t,r,n,i,o,s){var c;p.normalizeArgs(o,s,function(e,t){c=e,s=t}),h.validateArgs("clearRange",function(o){o.string(e,"share"),o.stringAllowEmpty(t,"directory"),o.string(r,"file"),o.shareNameIsValid(e),o.value(n),o.value(i),o.callback(s)});var u=a(!0,{},c),l=this._updateFilesImpl(e,t,r,n,i,v.RangeWriteOptions.CLEAR,u);this.performRequest(l,null,u,function(n,i){n.fileResult=null,n.error||(n.fileResult=new O(e,t,r),n.fileResult.getPropertiesFromHeaders(n.response.headers));i(n,function(e){s(e.error,e.fileResult,e.response)})})},FileService.prototype.createRangesFromStream=function(e,t,r,n,i,o,s,c){var u;p.normalizeArgs(s,c,function(e,t){u=e,c=t}),h.validateArgs("createRangesFromStream",function(s){s.string(e,"share"),s.stringAllowEmpty(t,"directory"),s.string(r,"file"),s.object(n,"readStream"),s.shareNameIsValid(e),s.value(i),s.value(o),s.callback(c)});var l=a(!0,{},u),f=p.objectIsNull(l.transactionalContentMD5)&&!0===l.useTransactionalMD5,m=o-i+1;if(m>v.MAX_UPDATE_FILE_SIZE)throw new Error(d.INVALID_FILE_RANGE_FOR_UPDATE);var g=this;f?p.calculateMD5(n,m,l,function(n,s){l.transactionalContentMD5=s,g._createRanges(e,t,r,n,null,i,o,l,c)}):g._createRanges(e,t,r,null,n,i,o,l,c)},FileService.prototype.createFileFromText=function(e,t,r,n,i,o){var s;p.normalizeArgs(i,o,function(e,t){s=e,o=t}),h.validateArgs("createFileFromText",function(n){n.string(e,"share"),n.stringAllowEmpty(t,"directory"),n.string(r,"file"),n.shareNameIsValid(e),n.callback(o)});var c=a(!0,{},s),u=p.objectIsNull(n)?0:Buffer.isBuffer(n)?n.length:Buffer.byteLength(n);if(u>v.MAX_UPDATE_FILE_SIZE)throw new Error(d.INVALID_FILE_LENGTH);c.storeFileContentMD5&&p.objectIsNull(p.tryGetValueChain(c,["contentSettings","contentMD5"],null))&&p.setObjectInnerPropertyValue(c,["contentSettings","contentMD5"],p.getContentMd5(n));var l=this;this.createFile(e,t,r,u,c,function(i,s,a){i||0===u?o(i,s,a):l._createRanges(e,t,r,n,null,0,u-1,c,o)})},FileService.prototype.createFileFromStream=function(e,t,r,n,i,o,s){var c;p.normalizeArgs(o,s,function(e,t){c=e,s=t}),h.validateArgs("createFileFromStream",function(o){o.string(e,"share"),o.stringAllowEmpty(t,"directory"),o.string(r,"file"),o.object(n,"stream"),o.value(i,"streamLength"),o.shareNameIsValid(e),o.callback(s)});var u=a(!0,{},c);u.speedSummary=u.speedSummary||new f(r),n.pause();var l=this;return this.createFile(e,t,r,i,u,function(o){if(o)s(o);else{var a=new x(n,{calcContentMd5:u.storeFileContentMD5});l._createFileFromChunkStream(e,t,r,a,i,u,s)}}),u.speedSummary},FileService.prototype.createWriteStreamToExistingFile=function(e,t,r,n,i){var o;p.normalizeArgs(n,i,function(e,t){o=e,i=t}),h.validateArgs("createWriteStreamToExistingFile",function(n){n.string(e,"share"),n.stringAllowEmpty(t,"directory"),n.string(r,"file"),n.shareNameIsValid(e)});var s=a(!0,{},o),c=new C({calcContentMd5:s.storeFileContentMD5});return this._createFileFromChunkStream(e,t,r,c,null,s,function(e,t,r){e&&c.emit("error",e),i&&i(e,t,r)}),c},FileService.prototype.createWriteStreamToNewFile=function(e,t,r,n,i,o){var s;p.normalizeArgs(i,o,function(e,t){s=e,o=t}),h.validateArgs("createWriteStreamToNewFile",function(i){i.string(e,"share"),i.stringAllowEmpty(t,"directory"),i.string(r,"file"),i.value(n,"length"),i.shareNameIsValid(e)});var c=a(!0,{},s),u=new C({calcContentMd5:c.storeFileContentMD5});u.pause();var l=this;return this.createFile(e,t,r,n,c,function(n){n?(u.emit("error",n),o(n)):(u.resume(),l._createFileFromChunkStream(e,t,r,u,null,c,function(e,t,r){e&&u.emit("error",e),o&&o(e,t,r)}))}),u},FileService.prototype.startCopyFile=function(e,t,r,n,i,o){var s;p.normalizeArgs(i,o,function(e,t){s=e,o=t}),h.validateArgs("startCopyFile",function(e){e.string(t,"targetShare"),e.stringAllowEmpty(r,"targetDirectory"),e.string(n,"targetFile"),e.shareNameIsValid(t),e.callback(o)});var c=createResourceName(t,r,n),u=a(!0,{},s),l=g.put(c).withHeader(b.COPY_SOURCE,e).addOptionalMetadataHeaders(u.metadata);this.performRequest(l,null,u,function(e,i){e.fileResult=null,e.error||(e.fileResult=new O(t,r,n),e.fileResult.getPropertiesFromHeaders(e.response.headers,!0),u.metadata&&(e.fileResult.metadata=u.metadata));i(e,function(e){o(e.error,e.fileResult,e.response)})})},FileService.prototype.abortCopyFile=function(e,t,r,n,i,o){var s;p.normalizeArgs(i,o,function(e,t){s=e,o=t}),h.validateArgs("abortCopyFile",function(n){n.string(e,"share"),n.stringAllowEmpty(t,"directory"),n.string(r,"file"),n.shareNameIsValid(e),n.callback(o)});var c=createResourceName(e,t,r),u=a(!0,{},s),l=g.put(c).withQueryOption(w.COPY_ID,n).withQueryOption(w.COMP,"copy").withHeader(b.COPY_ACTION,"abort");this.performRequest(l,null,u,function(e,t){t(e,function(e){o(e.error,e.response)})})},FileService.prototype._createRanges=function(e,t,r,n,i,o,s,a,c){var u=this._updateFilesImpl(e,t,r,o,s,v.RangeWriteOptions.UPDATE,a);!p.objectIsNull(n)&&p.objectIsNull(a.transactionalContentMD5)&&!0===a.useTransactionalMD5&&u.withHeader(b.CONTENT_MD5,p.getContentMd5(n));var l=function(n,i){n.fileResult=null,n.error||(n.fileResult=new O(e,t,r),n.fileResult.getPropertiesFromHeaders(n.response.headers));i(n,function(e){c(e.error,e.fileResult,e.response)})};p.objectIsNull(n)?this.performRequestOutputStream(u,i,a,l):this.performRequest(u,n,a,l)},FileService.prototype._createFileFromChunkStream=function(e,t,r,n,i,s,c){this.logger.debug(o.format("_createFileFromChunkStream for file %s",r));var u=v.DEFAULT_WRITE_SIZE_IN_BYTES,l=p.tryGetValueChain(s,["contentSettings","contentMD5"],null);this._setOperationExpiryTime(s);var h=s.speedSummary||new f;h.totalSize=i;var m=s.parallelOperationThreadCount||this.parallelOperationThreadCount,g=new S(u,m,{logger:this.logger});n._stream&&n._stream.setMemoryAllocator&&n._stream.setMemoryAllocator(g);var y=new E("_createRanges",{logger:this.logger,enableReuseSocket:this.defaultEnableReuseSocket});y.setConcurrency(m);var b={timeoutIntervalInMs:s.timeoutIntervalInMs,clientRequestTimeoutInMs:s.clientRequestTimeoutInMs,operationExpiryTime:s.operationExpiryTime},_=this;return n.on("data",function(i,a){var c=null,l=!1,f=h.getAutoIncrementFunction(i.length);if(i.length>u)throw new Error(o.format(d.EXCEEDED_SIZE_LIMITATION,u,i.length));if(s.useTransactionalMD5){var m=p.getContentMd5(i);b.transactionalContentMD5=m}p.isBufferAllZero(i)?(_.logger.debug(o.format("Skip upload data from %s bytes to %s bytes to file %s",a.start,a.end,r)),h.increment(i.length)):c=new E.RestOperation(_,"_createRanges",e,t,r,i,null,a.start,a.end,b,function(e){e?(_.logger.debug(o.format("Stop downloading data as error happens. Error: %s",o.inspect(e))),n.stop()):f(),g.releaseBuffer(i),i=null}),c&&(l=y.addOperation(c),c=null,l&&(_.logger.debug("file stream paused"),n.pause()))}),n.on("end",function(){_.logger.debug(o.format("File read stream ended for file %s",r)),y.enableComplete()}),y.on("drain",function(){_.logger.debug("File stream resume"),n.resume()}),y.on("end",function(i){if(_.logger.debug("batch operations commited"),i)c(i);else{l?s.contentSettings.contentMD5=l:s.storeFileContentMD5&&p.setObjectInnerPropertyValue(s,["contentSettings","contentMD5"],n.getContentMd5("base64"));var o=a(!1,s.contentSettings,{contentLength:s.streamLength});_.setFileProperties(e,t,r,o,function(e,t,r){n.finish(),c(e,t,r)})}}),h},FileService.prototype._getFileToStream=function(e,t,r,n,i,o){var s;p.normalizeArgs(i,o,function(e,t){s=e,o=t}),h.validateArgs("_getFileToStream",function(i){i.string(e,"share"),i.stringAllowEmpty(t,"directory"),i.string(r,"file"),i.object(n,"writeStream"),i.shareNameIsValid(e),i.callback(o)});var c=a(!0,{},s),u=createResourceName(e,t,r),l=g.get(u).withQueryOption(w.SHARE_SNAPSHOT,c.shareSnapshotId).withRawResponse();O.setHeaders(l,c),this._setRangeContentMD5Header(l,c);var d=this;this.performRequestInputStream(l,null,n,c,function(n,i){n.fileResult=null,n.error||(n.fileResult=new O(e,t,r),n.fileResult.metadata=d.parseMetadataHeaders(n.response.headers),n.fileResult.getPropertiesFromHeaders(n.response.headers,!0),d._validateLengthAndMD5(c,n),c.speedSummary&&c.speedSummary.increment(n.length));i(n,function(e){o(e.error,e.fileResult,e.response)})})},FileService.prototype._getFileToRangeStream=function(e,t,r,n,i,s){var a;p.normalizeArgs(i,s,function(e,t){a=e,s=t}),h.validateArgs("_getFileToRangeStream",function(i){i.string(e,"share"),i.stringAllowEmpty(t,"directory"),i.string(r,"file"),i.object(n,"writeStream"),i.shareNameIsValid(e),i.callback(s)});var c=a.speedSummary||new f(r),u=a.parallelOperationThreadCount||this.parallelOperationThreadCount,d=new E("getfile",{callbackInOrder:!0,logger:this.logger,enableReuseSocket:this.defaultEnableReuseSocket});d.setConcurrency(u);var m=new k(this,e,t,r,a),g=this,y=!a.disableContentMD5Validation,v=null;y&&(v=(new l).createMd5Hash());var b=null,_=null;m.on("range",function(i){c.totalSize||(c.totalSize=m.rangeSize);var s={rangeStart:i.start,rangeEnd:i.end,responseEncoding:null},u=i.size;if(s.shareSnapshotId=a.shareSnapshotId,s.timeoutIntervalInMs=a.timeoutIntervalInMs,s.clientRequestTimeoutInMs=a.clientRequestTimeoutInMs,s.useTransactionalMD5=a.useTransactionalMD5,0!==i.dataSize){if(!(i.start>i.end)){var l=new E.RestOperation(g,"getFileToText",e,t,r,s,function(e,t,r,i){if(e)g.logger.debug(o.format("Stop downloading data as error happens. Error: %s",o.inspect(e))),m.stop();else{u!==t.length&&g.logger.warn(o.format("Request %s bytes, but server returns %s bytes",u,t.length)),b||(b=r),_||(_=i);var s=c.getAutoIncrementFunction(t.length);n.write(t,s)||(g.logger.debug("Write stream is full and pause batch operation"),d.pause()),v&&v.update(t),t=null}});d.addOperation(l)&&(g.logger.debug("Pause range stream"),m.pause())}}else{var h=c.getAutoIncrementFunction(u),f=new E.CommonOperation(E.noOperation,function(e){if(!e){var t=p.writeZerosToStream(n,u,v,h);g.logger.debug(o.format("Write %s bytes Zero from %s to %s",u,i.start,i.end)),t||(g.logger.debug("Write stream is full and pause batch operation"),d.pause())}});d.addOperation(f)}}),m.on("end",function(){g.logger.debug("Range stream has ended."),d.enableComplete()}),d.on("drain",function(){g.logger.debug("Resume range stream"),m.resume()}),n.on("drain",function(){g.logger.debug("Resume batch operations"),d.resume()}),d.on("end",function(e){g.logger.debug("Download completed!"),e?s(e):n.end(function(){g.logger.debug("Write stream has ended"),b||(b={}),p.setObjectInnerPropertyValue(b,["contentSettings","contentMD5"],p.tryGetValueChain(a,["contentSettings","contentMD5"],null)),b.clientSideContentMD5=null,v&&(b.clientSideContentMD5=v.digest("base64")),s(e,b,_)})});var w={timeoutIntervalInMs:a.timeoutIntervalInMs,clientRequestTimeoutInMs:a.clientRequestTimeoutInMs};return m.list(w),c},FileService.prototype._setRangeContentMD5Header=function(e,t){if(!p.objectIsNull(t.rangeStart)&&t.useTransactionalMD5){if(p.objectIsNull(t.rangeEnd))throw new A(o.format(d.ARGUMENT_NULL_OR_EMPTY,t.rangeEndHeader));if(parseInt(t.rangeEnd,10)-parseInt(t.rangeStart,10)+1>v.MAX_RANGE_GET_SIZE_WITH_MD5)throw new Error(d.INVALID_RANGE_FOR_MD5);e.withHeader(b.RANGE_GET_CONTENT_MD5,"true")}},FileService.prototype._updateFilesImpl=function(e,t,r,n,i,o,s){var a=createResourceName(e,t,r),c=g.put(a).withQueryOption(w.COMP,"range").withHeader(b.CONTENT_TYPE,"application/octet-stream").withHeader(b.FILE_WRITE,o);if(s.rangeStart=n,s.rangeEnd=i,O.setHeaders(c,s),o===v.RangeWriteOptions.UPDATE){var u=i-n+1;c.withHeader(b.CONTENT_LENGTH,u)}else c.withHeader(b.CONTENT_LENGTH,0);return c},FileService.prototype._validateLengthAndMD5=function(e,t){var r,n=t.response.headers[y.HeaderConstants.CONTENT_MD5];p.objectIsNull(t.response.headers[y.HeaderConstants.CONTENT_LENGTH])||(r=parseInt(t.response.headers[y.HeaderConstants.CONTENT_LENGTH],10)),p.objectIsNull(e.disableContentMD5Validation)&&(e.disableContentMD5Validation=!1),!1===e.disableContentMD5Validation&&!0===e.useTransactionalMD5&&p.objectIsNull(n)&&(t.error=new Error(d.MD5_NOT_PRESENT_ERROR),t.retryable=!1),p.objectIsNull(t.length)&&("string"==typeof t.response.body?t.length=Buffer.byteLength(t.response.body):Buffer.isBuffer(t.response.body)&&(t.length=t.response.body.length)),p.objectIsNull(r)||t.length===r||(t.error=new Error(d.CONTENT_LENGTH_MISMATCH),t.retryable=!1),!1===e.disableContentMD5Validation&&p.objectIsNull(t.contentMD5)&&(t.contentMD5=p.getContentMd5(t.response.body)),!1!==e.disableContentMD5Validation||p.objectIsNull(n)||n===t.contentMD5||(t.error=new Error(o.format(d.HASH_MISMATCH,n,t.contentMD5)),t.retryable=!1)},FileService.prototype._doesFileExist=function(e,t,r,n,i,o){var s;p.normalizeArgs(i,o,function(e,t){s=e,o=t}),h.validateArgs("FileExists",function(n){n.string(e,"share"),n.stringAllowEmpty(t,"directory"),n.string(r,"file"),n.shareNameIsValid(e),n.callback(o)});var c=a(!0,{},s),u=createResourceName(e,t,r),l=g.head(u).withQueryOption(w.SHARE_SNAPSHOT,c.shareSnapshotId);this.performRequest(l,null,c,function(n,i){n.fileResult=new O(e,t,r),n.error?n.error&&n.error.statusCode===y.HttpConstants.HttpResponseCodes.NotFound&&(n.error=null,n.fileResult.exists=!1,n.response.isSuccessful=!0):(n.fileResult.exists=!0,n.fileResult.getPropertiesFromHeaders(n.response.headers));i(n,function(e){o(e.error,e.fileResult,e.response)})})},FileService.prototype._doesDirectoryExist=function(e,t,r,n,i){var o;p.normalizeArgs(n,i,function(e,t){o=e,i=t}),h.validateArgs("directoryExists",function(r){r.string(e,"share"),r.stringAllowEmpty(t,"directory"),r.shareNameIsValid(e),r.callback(i)});var s=a(!0,{},o),c=g.head(createResourceName(e,t)).withQueryOption(w.RESTYPE,"directory").withQueryOption(w.SHARE_SNAPSHOT,s.shareSnapshotId),u=this;this.performRequest(c,null,s,function(e,r){e.directoryResult=new T(t),e.directoryResult.exists=!1,e.error?e.error&&e.error.statusCode===y.HttpConstants.HttpResponseCodes.NotFound&&(e.error=null,e.response.isSuccessful=!0):(e.directoryResult.exists=!0,e.directoryResult.metadata=u.parseMetadataHeaders(e.response.headers),e.directoryResult.getPropertiesFromHeaders(e.response.headers));r(e,function(e){i(e.error,e.directoryResult,e.response)})})},FileService.prototype._doesShareExist=function(e,t,r,n){var i;p.normalizeArgs(r,n,function(e,t){i=e,n=t}),h.validateArgs("shareExists",function(t){t.string(e,"share"),t.shareNameIsValid(e),t.callback(n)});var o=a(!0,{},i),s=g.head(e).withQueryOption(w.RESTYPE,"share").withQueryOption(w.SHARE_SNAPSHOT,o.shareSnapshotId);this.performRequest(s,null,o,function(t,r){t.shareResult=new R(e),t.shareResult.exists=!1,t.error?t.error&&t.error.statusCode===y.HttpConstants.HttpResponseCodes.NotFound&&(t.error=null,t.response.isSuccessful=!0):(t.shareResult.exists=!0,t.shareResult.getPropertiesFromHeaders(t.response.headers));r(t,function(e){n(e.error,e.shareResult,e.response)})})},FileService.SpeedSummary=f,e.exports=FileService},function(e,t,r){var n=r(1),i=r(207),o=r(22);function FileRangeStream(e,t,r,n,i){FileRangeStream.super_.call(this,e,null,null,i),this._lengthHeader=o.HeaderConstants.FILE_CONTENT_LENGTH,i.minRangeSize?this._minRangeSize=i.minRangeSize:this._minRangeSize=o.FileConstants.MIN_WRITE_FILE_SIZE_IN_BYTES,i.maxRangeSize?this._maxRangeSize=i.maxRangeSize:this._maxRangeSize=o.FileConstants.DEFAULT_WRITE_SIZE_IN_BYTES,this._listFunc=e.listRanges,this._resourcePath.push(t),this._resourcePath.push(r),this._resourcePath.push(n)}n.inherits(FileRangeStream,i),e.exports=FileRangeStream},function(e,t,r){var n=r(20),i=n.util,o=n.Constants.HeaderConstants;function ShareResult(e){this.name=e}ShareResult.parse=function(e,t){var r=new ShareResult(t);for(var n in e)if(e.hasOwnProperty(n))if("Properties"===n)i.setPropertyValueFromXML(r,e[n],!0);else if("Metadata"===n||"ShareStats"===n){var o=i.normalizePropertyNameFromXML(n);r[o]={},i.setPropertyValueFromXML(r[o],e[n],"ShareStats"===n)}else r[n.toLowerCase()]=e[n];return r},ShareResult.prototype.getPropertiesFromHeaders=function(e){var t=this,r=function(r,n){!t[r]&&e[n.toLowerCase()]&&(t[r]=e[n.toLowerCase()])};r("etag",o.ETAG),r("lastModified",o.LAST_MODIFIED),r("requestId",o.REQUEST_ID),r("quota",o.SHARE_QUOTA)},e.exports=ShareResult},function(e,t,r){var n=r(20).Constants.HeaderConstants;function DirectoryResult(e){this.name=e}DirectoryResult.parse=function(e){return new DirectoryResult(e.Name)},DirectoryResult.prototype.getPropertiesFromHeaders=function(e){var t=this,r=function(r,n){!t[r]&&e[n.toLowerCase()]&&(t[r]=e[n.toLowerCase()])};r("etag",n.ETAG),r("lastModified",n.LAST_MODIFIED),r("requestId",n.REQUEST_ID),r("serverEncrypted",n.SERVER_ENCRYPTED)},e.exports=DirectoryResult},function(e,t,r){var n=r(29),i=r(20),o=i.util,s=i.Constants.HeaderConstants;function FileResult(e,t,r){this.share=e,this.directory=t,this.name=r}FileResult.parse=function(e){var t=new FileResult;for(var r in e)"Properties"===r?o.setPropertyValueFromXML(t,e[r],!0):t[r.toLowerCase()]=e[r];return t};var a={acceptRanges:"ACCEPT_RANGES",contentLength:"CONTENT_LENGTH",contentRange:"CONTENT_RANGE","contentSettings.contentType":"CONTENT_TYPE","contentSettings.contentEncoding":"CONTENT_ENCODING","contentSettings.contentLanguage":"CONTENT_LANGUAGE","contentSettings.cacheControl":"CACHE_CONTROL","contentSettings.contentDisposition":"CONTENT_DISPOSITION","contentSettings.contentMD5":"CONTENT_MD5","contentSettings.fileContentMD5":"FILE_CONTENT_MD5","copy.id":"COPY_ID","copy.status":"COPY_STATUS","copy.source":"COPY_SOURCE","copy.progress":"COPY_PROGRESS","copy.completionTime":"COPY_COMPLETION_TIME","copy.statusDescription":"COPY_STATUS_DESCRIPTION"};FileResult.prototype.getPropertiesFromHeaders=function(e,t){var r=this,i=function(t,n){if(!o.tryGetValueChain(r,t.split("."),null)&&e[n.toLowerCase()]&&(o.setObjectInnerPropertyValue(r,t.split("."),e[n.toLowerCase()]),"copy.progress"===t)){var i=o.parseCopyProgress(r.copy.progress);r.copy.bytesCopied=parseInt(i.bytesCopied),r.copy.totalBytes=parseInt(i.totalBytes)}};i("contentSettings.contentMD5",s.FILE_CONTENT_MD5),i("etag",s.ETAG),i("lastModified",s.LAST_MODIFIED),i("requestId",s.REQUEST_ID),i("serverEncrypted",s.SERVER_ENCRYPTED),t&&n.chain(a).pairs().each(function(e){var t=e[0],r=s[e[1]];i(t,r)})},FileResult.setHeaders=function(e,t){var r=function(r,n){var i=o.tryGetValueChain(t,n.split("."),null);i&&e.withHeader(r,i)};if(t&&(r(s.CONTENT_MD5,"transactionalContentMD5"),r(s.CONTENT_LENGTH,"contentLength"),!o.objectIsNull(t.rangeStart))){var n="bytes="+t.rangeStart+"-";o.objectIsNull(t.rangeEnd)||(n+=t.rangeEnd),e.withHeader(s.STORAGE_RANGE,n)}},FileResult.setProperties=function(e,t){var r=function(r,n){var i=o.tryGetValueChain(t,n.split("."),null);i&&e.withHeader(r,i)};t&&(r(s.FILE_CONTENT_LENGTH,"contentLength"),r(s.FILE_CONTENT_TYPE,"contentSettings.contentType"),r(s.FILE_CONTENT_ENCODING,"contentSettings.contentEncoding"),r(s.FILE_CONTENT_LANGUAGE,"contentSettings.contentLanguage"),r(s.FILE_CONTENT_DISPOSITION,"contentSettings.contentDisposition"),r(s.FILE_CACHE_CONTROL,"contentSettings.cacheControl"),r(s.FILE_CONTENT_MD5,"contentSettings.contentMD5"),t.metadata&&e.addOptionalMetadataHeaders(t.metadata))},e.exports=FileResult},function(e,t,r){var n=r(1),i=r(29),o=r(39),s=r(20),a=s.util,c=s.SR,u=s.validate,l=s.StorageServiceClient,p=s.WebResource,d=s.Constants,h=d.QueryStringConstants,f=d.HeaderConstants,m=d.RequestLocationMode,g=r(847),y=s.AclResult,v=r(848),b=r(356),_=s.ServiceStatsParser;function QueueService(e,t,r,n,i,o){var s=l.getStorageSettings(e,t,r,n,i,o);if(QueueService.super_.call(this,s._name,s._key,s._queueEndpoint,s._usePathStyleUri,s._sasToken,o),this.anonymous)throw new Error(c.ANONYMOUS_ACCESS_BLOBSERVICE_ONLY);this.messageEncoder=new b.TextXmlQueueMessageEncoder}n.inherits(QueueService,l),QueueService.prototype.getServiceStats=function(e,t){var r;a.normalizeArgs(e,t,function(e,n){r=e,t=n}),u.validateArgs("getServiceStats",function(e){e.callback(t)});var n=o(!0,{},r),i=p.get().withQueryOption(h.COMP,"stats").withQueryOption(h.RESTYPE,"service");n.requestLocationMode=m.PRIMARY_OR_SECONDARY;this.performRequest(i,null,n,function(e,r){e.serviceStatsResult=null,e.error||(e.serviceStatsResult=_.parse(e.response.body.StorageServiceStats));r(e,function(e){t(e.error,e.serviceStatsResult,e.response)})})},QueueService.prototype.getServiceProperties=function(e,t){return this.getAccountServiceProperties(e,t)},QueueService.prototype.setServiceProperties=function(e,t,r){return this.setAccountServiceProperties(e,t,r)},QueueService.prototype.listQueuesSegmented=function(e,t,r){this.listQueuesSegmentedWithPrefix(null,e,t,r)},QueueService.prototype.listQueuesSegmentedWithPrefix=function(e,t,r,n){var s;a.normalizeArgs(r,n,function(e,t){s=e,n=t}),u.validateArgs("listQueuesSegmentedWithPrefix",function(e){e.callback(n)});var c=o(!0,{},s),l=p.get();l.withQueryOption(h.COMP,"list").withQueryOption(h.MAX_RESULTS,c.maxResults).withQueryOption(h.INCLUDE,c.include).withQueryOption(h.PREFIX,e),a.objectIsNull(t)||l.withQueryOption(h.MARKER,t.nextMarker),c.requestLocationMode=a.getNextListingLocationMode(t);this.performRequest(l,null,c,function(e,t){if(e.listQueuesResult=null,!e.error){e.listQueuesResult={entries:null,continuationToken:null},e.listQueuesResult.entries=[];var r=[];e.response.body.EnumerationResults.Queues&&e.response.body.EnumerationResults.Queues.Queue&&(r=e.response.body.EnumerationResults.Queues.Queue,i.isArray(r)||(r=[r]),r.forEach(function(t){var r=g.parse(t);e.listQueuesResult.entries.push(r)}),e.response.body.EnumerationResults.NextMarker&&(e.listQueuesResult.continuationToken={nextMarker:null,targetLocation:null},e.listQueuesResult.continuationToken.nextMarker=e.response.body.EnumerationResults.NextMarker,e.listQueuesResult.continuationToken.targetLocation=e.targetLocation))}t(e,function(e){n(e.error,e.listQueuesResult,e.response)})})},QueueService.prototype.doesQueueExist=function(e,t,r){this._doesQueueExist(e,!1,t,r)},QueueService.prototype.createQueue=function(e,t,r){var n;a.normalizeArgs(t,r,function(e,t){n=e,r=t}),u.validateArgs("createQueue",function(t){t.string(e,"queue"),t.queueNameIsValid(e),t.callback(r)});var i=o(!0,{},n),s=p.put(e);i&&s.addOptionalMetadataHeaders(i.metadata);this.performRequest(s,null,i,function(t,n){t.queueResult=null,t.error||(t.queueResult=new g(e),i&&i.metadata&&(t.queueResult.metadata=i.metadata));n(t,function(e){r(e.error,e.queueResult,e.response)})})},QueueService.prototype.createQueueIfNotExists=function(e,t,r){var n;a.normalizeArgs(t,r,function(e,t){n=e,r=t}),u.validateArgs("createQueueIfNotExists",function(t){t.string(e,"queue"),t.queueNameIsValid(e),t.callback(r)});var i=o(!0,{},n),s=this;s._doesQueueExist(e,!0,i,function(t,n,o){var a=n.exists;n.created=!1,delete n.exists,t?r(t,n,o):a?(o.isSuccessful=!0,r(t,n,o)):s.createQueue(e,i,function(e,t,n){e?e&&e.statusCode===d.HttpConstants.HttpResponseCodes.Conflict&&e.code===d.QueueErrorCodeStrings.QUEUE_ALREADY_EXISTS&&(e=null,t.created=!1,n.isSuccessful=!0):t.created=!0,r(e,t,n)})})},QueueService.prototype.deleteQueue=function(e,t,r){var n;a.normalizeArgs(t,r,function(e,t){n=e,r=t}),u.validateArgs("deleteQueue",function(t){t.string(e,"queue"),t.queueNameIsValid(e),t.callback(r)});var i=o(!0,{},n),s=p.del(e);this.performRequest(s,null,i,function(e,t){t(e,function(e){r(e.error,e.response)})})},QueueService.prototype.deleteQueueIfExists=function(e,t,r){var n;a.normalizeArgs(t,r,function(e,t){n=e,r=t}),u.validateArgs("deleteQueueIfExists",function(t){t.string(e,"queue"),t.queueNameIsValid(e),t.callback(r)});var i=o(!0,{},n),s=this;s._doesQueueExist(e,!0,i,function existsCallback(t,n,o){t?r(t,n.exists,o):n.exists?s.deleteQueue(e,i,function(e,t){var n;e?e&&e.statusCode===d.HttpConstants.HttpResponseCodes.NotFound&&e.code===d.QueueErrorCodeStrings.QUEUE_NOT_FOUND&&(n=!1,e=null,t.isSuccessful=!0):n=!0,r(e,n,t)}):(o.isSuccessful=!0,r(t,!1,o))})},QueueService.prototype.getQueueMetadata=function(e,t,r){var n;a.normalizeArgs(t,r,function(e,t){n=e,r=t}),u.validateArgs("getQueueMetadata",function(t){t.string(e,"queue"),t.queueNameIsValid(e),t.callback(r)});var i=o(!0,{},n),s=p.get(e).withQueryOption(h.COMP,"metadata");i.requestLocationMode=d.RequestLocationMode.PRIMARY_OR_SECONDARY;var c=this;this.performRequest(s,null,i,function(t,n){t.queueResult=null,t.error||(t.queueResult=new g(e),t.queueResult.metadata=c.parseMetadataHeaders(t.response.headers),t.queueResult.getPropertiesFromHeaders(t.response.headers));n(t,function(e){r(e.error,e.queueResult,e.response)})})},QueueService.prototype.setQueueMetadata=function(e,t,r,n){var i;a.normalizeArgs(r,n,function(e,t){i=e,n=t}),u.validateArgs("setQueueMetadata",function(t){t.string(e,"queue"),t.queueNameIsValid(e),t.callback(n)});var s=o(!0,{},i),c=p.put(e).withQueryOption(h.COMP,"metadata").addOptionalMetadataHeaders(t);this.performRequest(c,null,s,function(r,i){r.queueResult=null,r.error||(r.queueResult=new g(e,t),r.queueResult.getPropertiesFromHeaders(r.response.headers));i(r,function(e){n(e.error,e.queueResult,e.response)})})},QueueService.prototype.createMessage=function(e,t,r,n){var s;a.normalizeArgs(r,n,function(e,t){s=e,n=t}),u.validateArgs("createMessage",function(t){t.string(e,"queue"),t.queueNameIsValid(e),t.callback(n)});var c=v.serialize(t,this.messageEncoder),l=o(!0,{},s),d=p.post(e+"/messages").withHeader(f.CONTENT_TYPE,'application/atom+xml;charset="utf-8"').withHeader(f.CONTENT_LENGTH,Buffer.byteLength(c,"utf8")).withQueryOption(h.MESSAGE_TTL,l.messageTimeToLive).withQueryOption(h.VISIBILITY_TIMEOUT,l.visibilityTimeout).withBody(c),m=this.messageEncoder;this.performRequest(d,d.body,l,function(e,t){if(e.queueMessageResults=[],e.response&&e.response.body&&e.response.body.QueueMessagesList&&e.response.body.QueueMessagesList.QueueMessage){var r=e.response.body.QueueMessagesList.QueueMessage;i.isArray(r)||(r=[r]),r.forEach(function(t){var r=v.parse(t,m);e.queueMessageResults.push(r)})}t(e,function(t){n(t.error,e.queueMessageResults[0],t.response)})})},QueueService.prototype.getMessages=function(e,t,r){var n;a.normalizeArgs(t,r,function(e,t){n=e,r=t}),u.validateArgs("getMessages",function(t){t.string(e,"queue"),t.queueNameIsValid(e),t.callback(r)});var i=o(!0,{},n);delete i.peekOnly,this._getOrPeekMessages(e,i,r)},QueueService.prototype.getMessage=function(e,t,r){var n;a.normalizeArgs(t,r,function(e,t){n=e,r=t}),u.validateArgs("getMessage",function(t){t.string(e,"queue"),t.queueNameIsValid(e),t.callback(r)});var i=o(!0,{},n);i.numOfMessages=1;this.getMessages(e,i,function(e,t,n){var i;t&&t.length>0&&(i=t[0]),r(e,i,n)})},QueueService.prototype.peekMessages=function(e,t,r){var n;a.normalizeArgs(t,r,function(e,t){n=e,r=t}),u.validateArgs("peekMessages",function(t){t.string(e,"queue"),t.queueNameIsValid(e),t.callback(r)});var i=o(!0,{},n);i.peekOnly=!0,delete i.visibilityTimeout,this._getOrPeekMessages(e,i,r)},QueueService.prototype.peekMessage=function(e,t,r){var n;a.normalizeArgs(t,r,function(e,t){n=e,r=t}),u.validateArgs("peekMessage",function(t){t.string(e,"queue"),t.queueNameIsValid(e),t.callback(r)});var i=o(!0,{},n);i.numOfMessages=1;this.peekMessages(e,i,function(e,t,n){var i;t&&t.length>0&&(i=t[0]),r(e,i,n)})},QueueService.prototype.deleteMessage=function(e,t,r,n,i){var s;if(a.normalizeArgs(n,i,function(e,t){s=e,i=t}),u.validateArgs("deleteMessage",function(t){t.string(e,"queue"),t.queueNameIsValid(e),t.callback(i)}),a.objectIsNull(r))throw new Error(c.INVALID_POP_RECEIPT);if(a.objectIsNull(t))throw new Error(c.INVALID_MESSAGE_ID);var l=o(!0,{},s),d=p.del(e+"/messages/"+t).withQueryOption(h.POP_RECEIPT,r,null,!0);this.performRequest(d,null,l,function(e,t){t(e,function(e){i(e.error,e.response)})})},QueueService.prototype.clearMessages=function(e,t,r){var n;a.normalizeArgs(t,r,function(e,t){n=e,r=t}),u.validateArgs("clearMessages",function(t){t.string(e,"queue"),t.queueNameIsValid(e),t.callback(r)});var i=o(!0,{},n),s=p.del(e+"/messages");this.performRequest(s,null,i,function(e,t){t(e,function(e){r(e.error,e.response)})})},QueueService.prototype.updateMessage=function(e,t,r,n,i,s){var l;if(a.normalizeArgs(i,s,function(e,t){l=e,s=t}),u.validateArgs("updateMessage",function(t){t.string(e,"queue"),t.queueNameIsValid(e),t.callback(s)}),a.objectIsNull(r))throw new Error(c.INVALID_POP_RECEIPT);if(a.objectIsNull(t))throw new Error(c.INVALID_MESSAGE_ID);var d=o(!0,{},l),m=null;d.messageText&&(m=v.serialize(d.messageText,this.messageEncoder));var g=m?Buffer.byteLength(m,"utf8"):0,y=p.put(e+"/messages/"+t).withHeader(f.CONTENT_TYPE,'application/atom+xml;charset="utf-8"').withHeader(f.CONTENT_LENGTH,g).withQueryOption(h.POP_RECEIPT,r,null,!0).withQueryOption(h.VISIBILITY_TIMEOUT,n).withBody(m);this.performRequest(y,y.body,d,function(r,n){r.queueMessageResult=null,r.error||(r.queueMessageResult=new v(e,t),r.queueMessageResult.getPropertiesFromHeaders(r.response.headers));n(r,function(e){s(e.error,e.queueMessageResult,e.response)})})},QueueService.prototype.getQueueAcl=function(e,t,r){var n;a.normalizeArgs(t,r,function(e,t){n=e,r=t}),u.validateArgs("getQueueAcl",function(t){t.string(e,"queue"),t.queueNameIsValid(e),t.callback(r)});var i=o(!0,{},n),s=p.get(e).withQueryOption(h.COMP,"acl");i.requestLocationMode=d.RequestLocationMode.PRIMARY_OR_SECONDARY;this.performRequest(s,null,i,function(t,n){t.queueResult=null,t.error||(t.queueResult=new g(e),t.queueResult.getPropertiesFromHeaders(t.response.headers),t.queueResult.signedIdentifiers=y.parse(t.response.body));n(t,function(e){r(e.error,e.queueResult,e.response)})})},QueueService.prototype.setQueueAcl=function(e,t,r,n){var s;a.normalizeArgs(r,n,function(e,t){s=e,n=t}),u.validateArgs("setQueueAcl",function(t){t.string(e,"queue"),t.queueNameIsValid(e),t.callback(n)});var l=o(!0,{},s),d=null;if(t){if(i.isArray(t))throw new TypeError(c.INVALID_SIGNED_IDENTIFIERS);d=y.serialize(t)}var m=p.put(e).withQueryOption(h.COMP,"acl").withHeader(f.CONTENT_LENGTH,a.objectIsNull(d)?0:Buffer.byteLength(d)).withBody(d);this.performRequest(m,m.body,l,function(r,i){r.containerResult=null,r.error||(r.queueResult=new g(e),r.queueResult.getPropertiesFromHeaders(r.response.headers),t&&(r.queueResult.signedIdentifiers=t));i(r,function(e){n(e.error,e.queueResult,e.response)})})},QueueService.prototype.generateSharedAccessSignature=function(e,t){if(!this.storageCredentials||!this.storageCredentials.generateSignedQueryString)throw new Error(c.CANNOT_CREATE_SAS_WITHOUT_ACCOUNT_KEY);return u.validateArgs("generateSharedAccessSignature",function(r){r.string(e,"queue"),r.queueNameIsValid(e),r.object(t,"sharedAccessPolicy")}),this.storageCredentials.generateSignedQueryString(d.ServiceType.Queue,e,t,null)},QueueService.prototype._doesQueueExist=function(e,t,r,n){var i;a.normalizeArgs(r,n,function(e,t){i=e,n=t}),u.validateArgs("doesQueueExist",function(t){t.string(e,"queue"),t.queueNameIsValid(e),t.callback(n)});var s=o(!0,{},i),c=p.head(e).withQueryOption(h.COMP,"metadata");!1===t&&(s.requestLocationMode=m.PRIMARY_OR_SECONDARY);this.performRequest(c,null,s,function(t,r){t.queueResult=new g(e),t.queueResult.exists=!1,t.error?t.error&&t.error.statusCode===d.HttpConstants.HttpResponseCodes.NotFound&&(t.error=null,t.queueResult.exists=!1,t.response.isSuccessful=!0):(t.queueResult.exists=!0,t.queueResult.getPropertiesFromHeaders(t.response.headers));r(t,function(e){n(e.error,e.queueResult,e.response)})})},QueueService.prototype._getOrPeekMessages=function(e,t,r){var n;a.normalizeArgs(t,r,function(e,t){n=e,r=t}),u.validateArgs("_getOrPeekMessages",function(t){t.string(e,"queue"),t.queueNameIsValid(e),t.callback(r)});var s=o(!0,{},n);s.numOfMessages||(s.numOfMessages=1);var c=p.get(e+"/messages").withQueryOption(h.NUM_OF_MESSAGES,s.numOfMessages).withQueryOption(h.VISIBILITY_TIMEOUT,s.visibilityTimeout).withQueryOption(h.PEEK_ONLY,s.peekOnly);s.peekOnly&&(s.requestLocationMode=m.PRIMARY_OR_SECONDARY);var l=this.messageEncoder;this.performRequest(c,null,s,function(e,t){if(e.queueMessageResults=null,!e.error&&(e.queueMessageResults=[],e.response.body.QueueMessagesList&&e.response.body.QueueMessagesList.QueueMessage)){var n=e.response.body.QueueMessagesList.QueueMessage;i.isArray(n)||(n=[n]),n.forEach(function(t){var r=v.parse(t,l);e.queueMessageResults.push(r)})}t(e,function(e){r(e.error,e.queueMessageResults,e.response)})})},QueueService.prototype.getUrl=function(e,t,r){return u.validateArgs("getUrl",function(t){t.string(e,"queue"),t.queueNameIsValid(e)}),this._getUrl(e,t,r)},e.exports=QueueService},function(e,t,r){var n=r(20).Constants.HeaderConstants;function QueueResult(e,t){e&&(this.name=e),t&&(this.metadata=t)}QueueResult.parse=function(e){var t=new QueueResult;for(var r in e)e.hasOwnProperty(r)&&(t[r.toLowerCase()]=e[r]);return t},QueueResult.prototype.getPropertiesFromHeaders=function(e){var t,r,i,o=this;t="approximateMessageCount",r=n.APPROXIMATE_MESSAGES_COUNT,i=parseInt,!o[t]&&e[r.toLowerCase()]&&(o[t]=i?i(e[r.toLowerCase()]):e[r.toLowerCase()])},e.exports=QueueResult},function(e,t,r){var n=r(20),i=n.util,o=n.xmlbuilder,s=n.Constants,a=s.HeaderConstants;function QueueMessageResult(e,t,r){e&&(this.queue=e),t&&(this.messageId=t),r&&(this.popReceipt=r)}QueueMessageResult.serialize=function(e,t){var r,n=o.create(s.QueueConstants.QUEUE_MESSAGE_ELEMENT,{version:"1.0",encoding:"utf-8"});e?(r=null!=t?t.encode(e):e,n.ele(s.QueueConstants.MESSAGE_TEXT_ELEMENT).txt(r).up()):n.ele(s.QueueConstants.MESSAGE_TEXT_ELEMENT).up();return n.doc().toString()},QueueMessageResult.parse=function(e,t){var r=new QueueMessageResult;for(var n in e){if(n===s.QueueConstants.MESSAGE_TEXT_ELEMENT)r.messageText=null!=t?t.decode(e[n]):e[n];else r[i.normalizePropertyNameFromXML(n)]=e[n]}return r.dequeueCount&&(r.dequeueCount=parseInt(r.dequeueCount)),r},QueueMessageResult.prototype.getPropertiesFromHeaders=function(e){var t=this,r=function(r,n){!t[r]&&e[n.toLowerCase()]&&(t[r]=e[n.toLowerCase()])};r("popReceipt",a.POP_RECEIPT),r("timeNextVisible",a.TIME_NEXT_VISIBLE)},e.exports=QueueMessageResult},function(e,t){e.exports;e.exports={SharedAccessPermissions:{READ:"r",ADD:"a",UPDATE:"u",PROCESS:"p"}}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(4),i=r(89),o=r(183),s=function(){function FileUploadApi(e,t){if(!e)throw new ReferenceError("authenticationProvider cannot be '"+e+"'");this._authenticationProvider=e,this.http=t||new i.Http}return FileUploadApi.prototype.getBlobSharedAccessSignature=function(e,t){var r=this;return n.callbackToPromise(function(t){if(!e)throw new ReferenceError("blobName cannot be '"+e+"'");r._authenticationProvider.getDeviceCredentials(function(i,s){var a=n.endpoint.devicePath(n.encodeUriComponentStrict(s.deviceId))+"/files"+n.endpoint.versionQueryString(),c=JSON.stringify({blobName:e}),u={Host:s.host,Accept:"application/json","Content-Type":"application/json","Content-Length":c.length,"User-Agent":o.name+"/"+o.version},l=null;"string"==typeof s.sharedAccessSignature?u.Authorization=s.sharedAccessSignature:l=s.x509;var p=r.http.buildRequest("POST",a,u,s.host,l,function(e,r,n){if(e)e.responseBody=r,e.response=n,t(e);else{var i=JSON.parse(r);t(null,i)}});p.write(c),p.end()})},t)},FileUploadApi.prototype.notifyUploadComplete=function(e,t,r){var i=this;return n.errorCallbackToPromise(function(r){if(!e)throw new ReferenceError("correlationId cannot be '"+e+"'");if(!t)throw new ReferenceError("uploadResult cannot be '"+t+"'");i._authenticationProvider.getDeviceCredentials(function(s,a){var c=n.endpoint.devicePath(n.encodeUriComponentStrict(a.deviceId))+"/files/notifications/"+encodeURIComponent(e)+n.endpoint.versionQueryString(),u=JSON.stringify(t),l={Host:a.host,"User-Agent":o.name+"/"+o.version,"Content-Type":"application/json; charset=utf-8","Content-Length":u.length,"iothub-name":a.host.split(".")[0]},p=null;"string"==typeof a.sharedAccessSignature?l.Authorization=a.sharedAccessSignature:p=a.x509;var d=i.http.buildRequest("POST",c,l,a.host,p,function(e){e?r(e):r()});d.write(u),d.end()})},r)},FileUploadApi}();t.FileUploadApi=s},function(e,t,r){"use strict";var n,i=this&&this.__extends||(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])},function(e,t){function __(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(__.prototype=t.prototype,new __)});Object.defineProperty(t,"__esModule",{value:!0});var o=r(137)("azure-iot-device:ModuleClient"),s=r(11),a=r(4),c=r(286),u=r(4),l=r(157),p=r(208),d=r(852),h=r(138);function safeCallback(e,t,r){e&&e(t,r)}var f=function(e){function ModuleClient(t,r){var n=e.call(this,t,void 0)||this;return n._inputMessagesEnabled=!1,n._methodClient=r,n._transport.on("inputMessage",function(e,t){n.emit("inputMessage",e,t)}),n.on("removeListener",function(e){"inputMessage"===e&&0===n.listeners("inputMessage").length&&n._disableInputMessages(function(e){e&&n.emit("error",e)})}),n.on("newListener",function(e){"inputMessage"===e&&n._enableInputMessages(function(e){e&&n.emit("error",e)})}),n._moduleDisconnectHandler=function(e){o("transport disconnect event: "+(e?e.toString():"no error")),e&&n._retryPolicy.shouldRetry(e)&&n._inputMessagesEnabled&&(n._inputMessagesEnabled=!1,o("re-enabling input message link"),n._enableInputMessages(function(e){e&&n.emit("disconnect",new a.results.Disconnected(e))}))},n._transport.on("disconnect",n._moduleDisconnectHandler),n}return i(ModuleClient,e),ModuleClient.prototype.sendOutputEvent=function(e,t,r){var n=this;return a.callbackToPromise(function(r){new a.RetryOperation(n._retryPolicy,n._maxOperationTimeout).retry(function(r){n._transport.sendOutputEvent(e,t,r)},function(e,t){safeCallback(r,e,t)})},r)},ModuleClient.prototype.sendOutputEventBatch=function(e,t,r){var n=this;return a.callbackToPromise(function(r){new a.RetryOperation(n._retryPolicy,n._maxOperationTimeout).retry(function(r){n._transport.sendOutputEventBatch(e,t,r)},function(e,t){safeCallback(r,e,t)})},r)},ModuleClient.prototype.close=function(t){var r=this;return a.callbackToPromise(function(t){r._transport.removeListener("disconnect",r._moduleDisconnectHandler),e.prototype.close.call(r,t)},t)},ModuleClient.prototype._invokeMethod=function(e,t,r,n){if(!e)throw new ReferenceError("deviceId cannot be '"+e+"'");if(!t)throw new ReferenceError("The second parameter cannot be '"+t+"'");var i="string"==typeof t?t:null,o="object"==typeof t?t:r,s="function"==typeof r?r:n;if(!o||"object"!=typeof o)throw new ReferenceError("methodParams cannot be '"+o+"'");if(!o.methodName)throw new u.errors.ArgumentError("the name property of the methodParams argument cannot be '"+o.methodName+"'");this._methodClient.invokeMethod(e,i,o,s)},ModuleClient.prototype.invokeMethod=function(e,t,r,n){var i=this;return n?this._invokeMethod(e,t,r,n):"function"==typeof r?this._invokeMethod(e,t,r):a.callbackToPromise(function(n){return i._invokeMethod(e,t,r,n)})},ModuleClient.prototype.onMethod=function(e,t){this._onDeviceMethod(e,t)},ModuleClient.prototype.setOptions=function(t,r){var n=this;return a.callbackToPromise(function(r){n._methodClient.setOptions(t),e.prototype.setOptions.call(n,t,r)},r)},ModuleClient.prototype._disableInputMessages=function(e){var t=this;this._inputMessagesEnabled?this._transport.disableInputMessages(function(r){r||(t._inputMessagesEnabled=!1),e(r)}):e()},ModuleClient.prototype._enableInputMessages=function(e){var t=this;this._inputMessagesEnabled?e():new a.RetryOperation(this._retryPolicy,this._maxOperationTimeout).retry(function(e){t._transport.enableInputMessages(e)},function(r){r||(t._inputMessagesEnabled=!0),e(r)})},ModuleClient.fromConnectionString=function(e,t){if(!e)throw new ReferenceError("connStr is '"+e+"'");var r;if(!a.ConnectionString.parse(e).SharedAccessKey)throw new u.errors.NotImplementedError("ModuleClient only supports SAS Token authentication");return new ModuleClient(new t(r=l.SharedAccessKeyAuthenticationProvider.fromConnectionString(e)),new h.MethodClient(r))},ModuleClient.fromSharedAccessSignature=function(e,t){if(!e)throw new ReferenceError("sharedAccessSignature is '"+e+"'");var r=p.SharedAccessSignatureAuthenticationProvider.fromSharedAccessSignature(e);return new ModuleClient(new t(r),new h.MethodClient(r))},ModuleClient.fromAuthenticationProvider=function(e,t){if(!e)throw new ReferenceError("authenticationMethod cannot be '"+e+"'");if(!t)throw new ReferenceError("transportCtor cannot be '"+t+"'");return new ModuleClient(new t(e),new h.MethodClient(e))},ModuleClient.fromEnvironment=function(e,t){return a.callbackToPromise(function(t){if(!t||"function"!=typeof t)throw new ReferenceError("callback cannot be '"+t+"'");if(e){var r=process.env.EdgeHubConnectionString||process.env.IotHubConnectionString;r?ModuleClient._fromEnvironmentNormal(r,e,t):ModuleClient._fromEnvironmentEdge(e,t)}else t(new ReferenceError("transportCtor cannot be '"+e+"'"))},t)},ModuleClient._fromEnvironmentEdge=function(e,t){var r=ModuleClient.validateEnvironment();if(r)t(r);else{var n={workloadUri:process.env.IOTEDGE_WORKLOADURI,deviceId:process.env.IOTEDGE_DEVICEID,moduleId:process.env.IOTEDGE_MODULEID,iothubHostName:process.env.IOTEDGE_IOTHUBHOSTNAME,authScheme:process.env.IOTEDGE_AUTHSCHEME,gatewayHostName:process.env.IOTEDGE_GATEWAYHOSTNAME,generationId:process.env.IOTEDGE_MODULEGENERATIONID},i=new d.IotEdgeAuthenticationProvider(n);i.getTrustBundle(function(r,n){if(r)t(r);else{var o=new e(i);o.setOptions({ca:n});var s=new h.MethodClient(i);s.setOptions({ca:n}),t(null,new ModuleClient(o,s))}})}},ModuleClient._fromEnvironmentNormal=function(e,t,r){var n="";process.env.EdgeModuleCACertificateFile?s.readFile(process.env.EdgeModuleCACertificateFile,"utf8",function(i,o){if(i)r(i);else{n=o;var s=ModuleClient.fromConnectionString(e,t);s.setOptions({ca:n},function(e){e?r(e):r(null,s)})}}):r(null,ModuleClient.fromConnectionString(e,t))},ModuleClient.validateEnvironment=function(){for(var e=0,t=["IOTEDGE_WORKLOADURI","IOTEDGE_DEVICEID","IOTEDGE_MODULEID","IOTEDGE_IOTHUBHOSTNAME","IOTEDGE_AUTHSCHEME","IOTEDGE_MODULEGENERATIONID"];e<t.length;e++){var r=t[e];if(!process.env[r])return new ReferenceError("Environment variable "+r+" was not provided.")}if("sastoken"!==process.env.IOTEDGE_AUTHSCHEME.toLowerCase())return new ReferenceError("Authentication scheme "+process.env.IOTEDGE_AUTHSCHEME+" is not a supported scheme.")},ModuleClient}(c.InternalClient);t.ModuleClient=f},function(e,t,r){"use strict";var n,i=this&&this.__extends||(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])},function(e,t){function __(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(__.prototype=t.prototype,new __)});Object.defineProperty(t,"__esModule",{value:!0});var o=r(23),s=r(4),a=r(157),c=r(89),u=r(7),l=r(183);t.WORKLOAD_API_VERSION="2018-06-28";var p=function(e){function IotEdgeAuthenticationProvider(t,r,n){var i=e.call(this,{host:t&&t.iothubHostName,deviceId:t&&t.deviceId,moduleId:t&&t.moduleId,gatewayHostName:t&&t.gatewayHostName},r,n)||this;if(i._authConfig=t,!i._authConfig)throw new ReferenceError("_authConfig cannot be '"+t+"'");if(!i._authConfig.workloadUri)throw new ReferenceError("_authConfig.workloadUri cannot be '"+i._authConfig.workloadUri+"'");if(!i._authConfig.moduleId)throw new ReferenceError("_authConfig.moduleId cannot be '"+i._authConfig.moduleId+"'");if(!i._authConfig.generationId)throw new ReferenceError("_authConfig.generationId cannot be '"+i._authConfig.generationId+"'");i._workloadUri=u.parse(i._authConfig.workloadUri);var o={host:"unix:"===i._workloadUri.protocol?{socketPath:i._workloadUri.pathname}:i._workloadUri.hostname};return i._restApiClient=new c.RestApiClient(o,l.name+"/"+l.version),i}return i(IotEdgeAuthenticationProvider,e),IotEdgeAuthenticationProvider.prototype.getTrustBundle=function(e){if(!e||"function"!=typeof e)throw new ReferenceError("callback cannot be '"+e+"'");var r="/trust-bundle?api-version="+s.encodeUriComponentStrict(t.WORKLOAD_API_VERSION);this._restApiClient.executeApiCall("GET",r,null,null,this._getRequestOptions(),function(t,r){t?e(t):e(null,r.certificate)})},IotEdgeAuthenticationProvider.prototype._sign=function(e,r,n){var i=this;if(!n||"function"!=typeof n)throw new ReferenceError("callback cannot be '"+n+"'");if(e){var o="/modules/"+s.encodeUriComponentStrict(this._authConfig.moduleId)+"/genid/"+s.encodeUriComponentStrict(this._authConfig.generationId)+"/sign?api-version="+s.encodeUriComponentStrict(t.WORKLOAD_API_VERSION);s.SharedAccessSignature.createWithSigningFunction(this._credentials,r,function(e,t){var r={keyId:"primary",algo:"HMACSHA256",data:e.toString("base64")};i._restApiClient.executeApiCall("POST",o,{"Content-Type":"application/json"},r,i._getRequestOptions(),function(e,r,n){e?t(e,null):t(null,Buffer.from(r.digest,"base64"))})},function(e,t){e?n(e):n(null,t.toString())})}else n(new ReferenceError("resourceUri cannot be '"+e+"'"),null)},IotEdgeAuthenticationProvider.prototype._getRequestOptions=function(){var e={request:o.request};if(this._workloadUri.port){var t=parseInt(this._workloadUri.port);isNaN(t)||(e.port=t)}return e},IotEdgeAuthenticationProvider}(a.SharedAccessKeyAuthenticationProvider);t.IotEdgeAuthenticationProvider=p},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(4);t.parse=function parse(e){var t=n.ConnectionString.parse(e,["HostName","DeviceId"]);if(t.SharedAccessKey&&t.x509)throw new n.errors.ArgumentError("The connection string must contain either a SharedAccessKey or x509=true");if(t.SharedAccessKey&&t.SharedAccessSignature)throw new n.errors.ArgumentError("The connection string must contain either a SharedAccessKey or SharedAccessSignature");if(t.SharedAccessSignature&&t.x509)throw new n.errors.ArgumentError("The connection string must contain either a SharedAccessSignature or x509=true");if(!t.SharedAccessKey&&!t.SharedAccessSignature&&!t.x509)throw new n.errors.ArgumentError("The connection string must contain either a SharedAccessKey, SharedAccessSignature or x509=true");return t},t.createWithSharedAccessKey=function createWithSharedAccessKey(e,t,r){if(!e)throw new ReferenceError("hostName cannot be '"+e+"'");if(!t)throw new ReferenceError("deviceId cannot be '"+t+"'");if(!r)throw new ReferenceError("symmetricKey cannot be '"+r+"'");return"HostName="+e+";DeviceId="+t+";SharedAccessKey="+r},t.createWithX509Certificate=function createWithX509Certificate(e,t){if(!e)throw new ReferenceError("hostName cannot be '"+e+"'");if(!t)throw new ReferenceError("deviceId cannot be '"+t+"'");return"HostName="+e+";DeviceId="+t+";x509=true"}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(4);t.create=function create(e,t,r,i){var o=n.encodeUriComponentStrict(e+"/devices/"+t);return n.SharedAccessSignature.create(o,null,r,i)},t.parse=function parse(e){return n.SharedAccessSignature.parse(e,["sr","sig","se"])}},function(e,t,r){"use strict";var n,i=this&&this.__extends||(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])},function(e,t){function __(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(__.prototype=t.prototype,new __)});Object.defineProperty(t,"__esModule",{value:!0});var o=r(5),s=r(21),a=r(4),c=r(4),u=r(158),l=r(209),p=r(373),d=r(89),h=r(162),f=r(4),m=r(163),g=function(e){function Client(t,r){var n=e.call(this)||this;if(!t)throw new ReferenceError("transport is '"+t+"'");return n._transport=t,n._restApiClient=r,n._restApiClient&&n._restApiClient.setOptions&&n._restApiClient.setOptions({http:{agent:new s.Agent({keepAlive:!0})}}),n._retryPolicy=new c.ExponentialBackOffWithJitter,n}return i(Client,e),Client.prototype.open=function(e){var t=this;return f.tripleValueCallbackToPromise(function(e){new c.RetryOperation(t._retryPolicy,24e4).retry(function(e){t._transport.connect(e)},function(r,n){r?e&&e(r):(t._transport.on("disconnect",t._disconnectHandler.bind(t)),e&&e(null,n))})},function(e,t){return h.createResultWithIncomingMessage(e,t)},e)},Client.prototype.close=function(e){var t=this;return f.tripleValueCallbackToPromise(function(e){t._transport.disconnect(function(r,n){r?e&&e(r):(t._transport.removeAllListeners("disconnect"),e&&e(null,n))})},function(e,t){return h.createResultWithIncomingMessage(e,t)},e)},Client.prototype.send=function(e,t,r){var n=this;return f.tripleValueCallbackToPromise(function(r){if(!e)throw new ReferenceError("deviceId is '"+e+"'");if(!t)throw new ReferenceError("message is '"+t+"'");if("Message"!==t.constructor.name){if(!a.Message.isBufferConvertible(t))throw new a.errors.ArgumentError("message is not of type Message or Message.BufferConvertible");t=new a.Message(t)}new c.RetryOperation(n._retryPolicy,24e4).retry(function(r){n._transport.send(e,t,r)},function(e,t){r&&(e?r(e):r(null,t))})},function(e,t){return h.createResultWithIncomingMessage(e,t)},r)},Client.prototype._invokeDeviceMethod=function(e,t,r,n){if(null==e||""===e)throw new ReferenceError("deviceId cannot be '"+e+"'");var i=void 0,o=void 0,s=void 0;"string"==typeof t?(i=t,o=r,s=n):(o=t,s=r);var a=new p.DeviceMethod(o,this._restApiClient);new c.RetryOperation(this._retryPolicy,24e4).retry(function(t){i?a.invokeOnModule(e,i,t):a.invokeOn(e,t)},function(e,t,r){s&&(e?s(e):s(null,t,r))})},Client.prototype.invokeDeviceMethod=function(e,t,r,n){var i=this,o=n||("function"==typeof r?r:void 0);return o?this._invokeDeviceMethod(e,t,r,n):f.tripleValueCallbackToPromise(function(n){i._invokeDeviceMethod(e,t,r,n)},function(e,t){return h.createResultWithIncomingMessage(e,t)},o)},Client.prototype.getFeedbackReceiver=function(e){var t=this;return f.tripleValueCallbackToPromise(function(e){new c.RetryOperation(t._retryPolicy,24e4).retry(function(e){t._transport.getFeedbackReceiver(e)},function(t,r){e&&(t?e(t):e(null,r))})},function(e,t){return h.createResultWithIncomingMessage(e,t)},e)},Client.prototype.getFileNotificationReceiver=function(e){var t=this;return f.tripleValueCallbackToPromise(function(e){new c.RetryOperation(t._retryPolicy,24e4).retry(function(e){t._transport.getFileNotificationReceiver(e)},function(t,r){e&&(t?e(t):e(null,r))})},function(e,t){return h.createResultWithIncomingMessage(e,t)},e)},Client.prototype.setRetryPolicy=function(e){if(!e)throw new ReferenceError("policy cannot be '"+e+"'");if("function"!=typeof e.shouldRetry||"function"!=typeof e.nextRetryTimeout)throw new a.errors.ArgumentError("policy should have a shouldRetry method and a nextRetryTimeout method");this._retryPolicy=e},Client.prototype._disconnectHandler=function(e){var t=new a.results.Disconnected;t.reason=e,this.emit("disconnect",t)},Client.fromConnectionString=function(e,t){if(!e)throw new ReferenceError("connStr is '"+e+"'");t||(t=l.Amqp);var r=u.parse(e),n={host:r.HostName,keyName:r.SharedAccessKeyName,sharedAccessSignature:a.SharedAccessSignature.create(r.HostName,r.SharedAccessKeyName,r.SharedAccessKey,a.anHourFromNow())};return new Client(new t(n),new d.RestApiClient(n,m.name+"/"+m.version))},Client.fromSharedAccessSignature=function(e,t){if(!e)throw new ReferenceError("sharedAccessSignature is '"+e+"'");t||(t=l.Amqp);var r=a.SharedAccessSignature.parse(e),n={host:decodeURIComponent(r.sr),keyName:r.skn,sharedAccessSignature:r.toString()};return new Client(new t(n),new d.RestApiClient(n,m.name+"/"+m.version))},Client}(o.EventEmitter);t.Client=g},function(e,t,r){"use strict";"undefined"==typeof process||"renderer"===process.type||!0===process.browser||process.__nwjs?e.exports=r(857):e.exports=r(859)},function(e,t,r){"use strict";function _typeof(e){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function _typeof(e){return typeof e}:function _typeof(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}t.log=function log(){var e;return"object"===("undefined"==typeof console?"undefined":_typeof(console))&&console.log&&(e=console).log.apply(e,arguments)},t.formatArgs=function formatArgs(t){if(t[0]=(this.useColors?"%c":"")+this.namespace+(this.useColors?" %c":" ")+t[0]+(this.useColors?"%c ":" ")+"+"+e.exports.humanize(this.diff),!this.useColors)return;var r="color: "+this.color;t.splice(1,0,r,"color: inherit");var n=0,i=0;t[0].replace(/%[a-zA-Z%]/g,function(e){"%%"!==e&&(n++,"%c"===e&&(i=n))}),t.splice(i,0,r)},t.save=function save(e){try{e?t.storage.setItem("debug",e):t.storage.removeItem("debug")}catch(e){}},t.load=function load(){var e;try{e=t.storage.getItem("debug")}catch(e){}!e&&"undefined"!=typeof process&&"env"in process&&(e=process.env.DEBUG);return e},t.useColors=function useColors(){if("undefined"!=typeof window&&window.process&&("renderer"===window.process.type||window.process.__nwjs))return!0;if("undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/))return!1;return"undefined"!=typeof document&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||"undefined"!=typeof window&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||"undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31||"undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/)},t.storage=function localstorage(){try{return localStorage}catch(e){}}(),t.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"],e.exports=r(359)(t),e.exports.formatters.j=function(e){try{return JSON.stringify(e)}catch(e){return"[UnexpectedJSONParseError]: "+e.message}}},function(e,t){var r=1e3,n=60*r,i=60*n,o=24*i,s=7*o,a=365.25*o;function plural(e,t,r,n){var i=t>=1.5*r;return Math.round(e/r)+" "+n+(i?"s":"")}e.exports=function(e,t){t=t||{};var c=typeof e;if("string"===c&&e.length>0)return function parse(e){if((e=String(e)).length>100)return;var t=/^((?:\d+)?\-?\d?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(e);if(!t)return;var c=parseFloat(t[1]);switch((t[2]||"ms").toLowerCase()){case"years":case"year":case"yrs":case"yr":case"y":return c*a;case"weeks":case"week":case"w":return c*s;case"days":case"day":case"d":return c*o;case"hours":case"hour":case"hrs":case"hr":case"h":return c*i;case"minutes":case"minute":case"mins":case"min":case"m":return c*n;case"seconds":case"second":case"secs":case"sec":case"s":return c*r;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return c;default:return}}(e);if("number"===c&&!1===isNaN(e))return t.long?function fmtLong(e){var t=Math.abs(e);if(t>=o)return plural(e,t,o,"day");if(t>=i)return plural(e,t,i,"hour");if(t>=n)return plural(e,t,n,"minute");if(t>=r)return plural(e,t,r,"second");return e+" ms"}(e):function fmtShort(e){var t=Math.abs(e);if(t>=o)return Math.round(e/o)+"d";if(t>=i)return Math.round(e/i)+"h";if(t>=n)return Math.round(e/n)+"m";if(t>=r)return Math.round(e/r)+"s";return e+"ms"}(e);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(e))}},function(e,t,r){"use strict";var n=r(51),i=r(1);t.init=function init(e){e.inspectOpts={};for(var r=Object.keys(t.inspectOpts),n=0;n<r.length;n++)e.inspectOpts[r[n]]=t.inspectOpts[r[n]]},t.log=function log(){return process.stderr.write(i.format.apply(i,arguments)+"\n")},t.formatArgs=function formatArgs(r){var n=this.namespace;if(this.useColors){var i=this.color,o="[3"+(i<8?i:"8;5;"+i),s="  ".concat(o,";1m").concat(n," [0m");r[0]=s+r[0].split("\n").join("\n"+s),r.push(o+"m+"+e.exports.humanize(this.diff)+"[0m")}else r[0]=function getDate(){if(t.inspectOpts.hideDate)return"";return(new Date).toISOString()+" "}()+n+" "+r[0]},t.save=function save(e){e?process.env.DEBUG=e:delete process.env.DEBUG},t.load=function load(){return process.env.DEBUG},t.useColors=function useColors(){return"colors"in t.inspectOpts?Boolean(t.inspectOpts.colors):n.isatty(process.stderr.fd)},t.colors=[6,2,3,4,5,1];try{var o=r(49);o&&(o.stderr||o).level>=2&&(t.colors=[20,21,26,27,32,33,38,39,40,41,42,43,44,45,56,57,62,63,68,69,74,75,76,77,78,79,80,81,92,93,98,99,112,113,128,129,134,135,148,149,160,161,162,163,164,165,166,167,168,169,170,171,172,173,178,179,184,185,196,197,198,199,200,201,202,203,204,205,206,207,208,209,214,215,220,221])}catch(e){}t.inspectOpts=Object.keys(process.env).filter(function(e){return/^debug_/i.test(e)}).reduce(function(e,t){var r=t.substring(6).toLowerCase().replace(/_([a-z])/g,function(e,t){return t.toUpperCase()}),n=process.env[t];return n=!!/^(yes|on|true|enabled)$/i.test(n)||!/^(no|off|false|disabled)$/i.test(n)&&("null"===n?null:Number(n)),e[r]=n,e},{}),e.exports=r(359)(t);var s=e.exports.formatters;s.o=function(e){return this.inspectOpts.colors=this.useColors,i.inspect(e,this.inspectOpts).replace(/\s*\n\s*/g," ")},s.O=function(e){return this.inspectOpts.colors=this.useColors,i.inspect(e,this.inspectOpts)}},function(e,t,r){(function(e){(function(t){"use strict";function slice(e,t){t|=0;for(var r=Math.max(e.length-t,0),n=Array(r),i=0;i<r;i++)n[i]=e[t+i];return n}var r=function(e){var t=slice(arguments,1);return function(){var r=slice(arguments);return e.apply(null,t.concat(r))}},n=function(e){return function(){var t=slice(arguments),r=t.pop();e.call(this,t,r)}};function isObject(e){var t=typeof e;return null!=e&&("object"==t||"function"==t)}var i="function"==typeof setImmediate&&setImmediate,o="object"==typeof process&&"function"==typeof process.nextTick;function fallback(e){setTimeout(e,0)}function wrap(e){return function(t){var r=slice(arguments,1);e(function(){t.apply(null,r)})}}var s=wrap(i?setImmediate:o?process.nextTick:fallback);function asyncify(e){return n(function(t,r){var n;try{n=e.apply(this,t)}catch(e){return r(e)}isObject(n)&&"function"==typeof n.then?n.then(function(e){invokeCallback(r,null,e)},function(e){invokeCallback(r,e.message?e:new Error(e))}):r(null,n)})}function invokeCallback(e,t,r){try{e(t,r)}catch(e){s(rethrow,e)}}function rethrow(e){throw e}var a="function"==typeof Symbol;function isAsync(e){return a&&"AsyncFunction"===e[Symbol.toStringTag]}function wrapAsync(e){return isAsync(e)?asyncify(e):e}function applyEach$1(e){return function(t){var r=slice(arguments,1),i=n(function(r,n){var i=this;return e(t,function(e,t){wrapAsync(e).apply(i,r.concat(t))},n)});return r.length?i.apply(this,r):i}}var c="object"==typeof global&&global&&global.Object===Object&&global,u="object"==typeof self&&self&&self.Object===Object&&self,l=c||u||Function("return this")(),p=l.Symbol,d=Object.prototype,h=d.hasOwnProperty,f=d.toString,m=p?p.toStringTag:void 0,g=Object.prototype.toString,y="[object Null]",v="[object Undefined]",b=p?p.toStringTag:void 0;function baseGetTag(e){return null==e?void 0===e?v:y:b&&b in Object(e)?function getRawTag(e){var t=h.call(e,m),r=e[m];try{e[m]=void 0;var n=!0}catch(e){}var i=f.call(e);return n&&(t?e[m]=r:delete e[m]),i}(e):function objectToString(e){return g.call(e)}(e)}var _="[object AsyncFunction]",w="[object Function]",E="[object GeneratorFunction]",S="[object Proxy]",C=9007199254740991;function isLength(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=C}function isArrayLike(e){return null!=e&&isLength(e.length)&&!function isFunction(e){if(!isObject(e))return!1;var t=baseGetTag(e);return t==w||t==E||t==_||t==S}(e)}var x={};function noop(){}function once(e){return function(){if(null!==e){var t=e;e=null,t.apply(this,arguments)}}}var k="function"==typeof Symbol&&Symbol.iterator,R=function(e){return k&&e[k]&&e[k]()};function isObjectLike(e){return null!=e&&"object"==typeof e}var T="[object Arguments]";function baseIsArguments(e){return isObjectLike(e)&&baseGetTag(e)==T}var O=Object.prototype,I=O.hasOwnProperty,N=O.propertyIsEnumerable,A=baseIsArguments(function(){return arguments}())?baseIsArguments:function(e){return isObjectLike(e)&&I.call(e,"callee")&&!N.call(e,"callee")},P=Array.isArray,L="object"==typeof t&&t&&!t.nodeType&&t,D=L&&"object"==typeof e&&e&&!e.nodeType&&e,M=D&&D.exports===L?l.Buffer:void 0,j=(M?M.isBuffer:void 0)||function stubFalse(){return!1},q=9007199254740991,F=/^(?:0|[1-9]\d*)$/;function isIndex(e,t){var r=typeof e;return!!(t=null==t?q:t)&&("number"==r||"symbol"!=r&&F.test(e))&&e>-1&&e%1==0&&e<t}var z={};z["[object Float32Array]"]=z["[object Float64Array]"]=z["[object Int8Array]"]=z["[object Int16Array]"]=z["[object Int32Array]"]=z["[object Uint8Array]"]=z["[object Uint8ClampedArray]"]=z["[object Uint16Array]"]=z["[object Uint32Array]"]=!0,z["[object Arguments]"]=z["[object Array]"]=z["[object ArrayBuffer]"]=z["[object Boolean]"]=z["[object DataView]"]=z["[object Date]"]=z["[object Error]"]=z["[object Function]"]=z["[object Map]"]=z["[object Number]"]=z["[object Object]"]=z["[object RegExp]"]=z["[object Set]"]=z["[object String]"]=z["[object WeakMap]"]=!1;var U="object"==typeof t&&t&&!t.nodeType&&t,B=U&&"object"==typeof e&&e&&!e.nodeType&&e,H=B&&B.exports===U&&c.process,$=function(){try{var e=B&&B.require&&B.require("util").types;return e||H&&H.binding&&H.binding("util")}catch(e){}}(),V=$&&$.isTypedArray,G=V?function baseUnary(e){return function(t){return e(t)}}(V):function baseIsTypedArray(e){return isObjectLike(e)&&isLength(e.length)&&!!z[baseGetTag(e)]},W=Object.prototype.hasOwnProperty;function arrayLikeKeys(e,t){var r=P(e),n=!r&&A(e),i=!r&&!n&&j(e),o=!r&&!n&&!i&&G(e),s=r||n||i||o,a=s?function baseTimes(e,t){for(var r=-1,n=Array(e);++r<e;)n[r]=t(r);return n}(e.length,String):[],c=a.length;for(var u in e)!t&&!W.call(e,u)||s&&("length"==u||i&&("offset"==u||"parent"==u)||o&&("buffer"==u||"byteLength"==u||"byteOffset"==u)||isIndex(u,c))||a.push(u);return a}var J=Object.prototype,X=function overArg(e,t){return function(r){return e(t(r))}}(Object.keys,Object),Y=Object.prototype.hasOwnProperty;function baseKeys(e){if(!function isPrototype(e){var t=e&&e.constructor;return e===("function"==typeof t&&t.prototype||J)}(e))return X(e);var t=[];for(var r in Object(e))Y.call(e,r)&&"constructor"!=r&&t.push(r);return t}function keys(e){return isArrayLike(e)?arrayLikeKeys(e):baseKeys(e)}function iterator(e){if(isArrayLike(e))return function createArrayIterator(e){var t=-1,r=e.length;return function next(){return++t<r?{value:e[t],key:t}:null}}(e);var t=R(e);return t?function createES2015Iterator(e){var t=-1;return function next(){var r=e.next();return r.done?null:(t++,{value:r.value,key:t})}}(t):function createObjectIterator(e){var t=keys(e),r=-1,n=t.length;return function next(){var i=t[++r];return r<n?{value:e[i],key:i}:null}}(e)}function onlyOnce(e){return function(){if(null===e)throw new Error("Callback was already called.");var t=e;e=null,t.apply(this,arguments)}}function _eachOfLimit(e){return function(t,r,n){if(n=once(n||noop),e<=0||!t)return n(null);var i=iterator(t),o=!1,s=0,a=!1;function iterateeCallback(e,t){if(s-=1,e)o=!0,n(e);else{if(t===x||o&&s<=0)return o=!0,n(null);a||replenish()}}function replenish(){for(a=!0;s<e&&!o;){var t=i();if(null===t)return o=!0,void(s<=0&&n(null));s+=1,r(t.value,t.key,onlyOnce(iterateeCallback))}a=!1}replenish()}}function eachOfLimit(e,t,r,n){_eachOfLimit(t)(e,wrapAsync(r),n)}function doLimit(e,t){return function(r,n,i){return e(r,t,n,i)}}function eachOfArrayLike(e,t,r){r=once(r||noop);var n=0,i=0,o=e.length;function iteratorCallback(e,t){e?r(e):++i!==o&&t!==x||r(null)}for(0===o&&r(null);n<o;n++)t(e[n],n,onlyOnce(iteratorCallback))}var K=doLimit(eachOfLimit,1/0),Q=function(e,t,r){(isArrayLike(e)?eachOfArrayLike:K)(e,wrapAsync(t),r)};function doParallel(e){return function(t,r,n){return e(Q,t,wrapAsync(r),n)}}function _asyncMap(e,t,r,n){n=n||noop,t=t||[];var i=[],o=0,s=wrapAsync(r);e(t,function(e,t,r){var n=o++;s(e,function(e,t){i[n]=t,r(e)})},function(e){n(e,i)})}var Z=doParallel(_asyncMap),ee=applyEach$1(Z);function doParallelLimit(e){return function(t,r,n,i){return e(_eachOfLimit(r),t,wrapAsync(n),i)}}var te=doParallelLimit(_asyncMap),re=doLimit(te,1),ne=applyEach$1(re);function arrayEach(e,t){for(var r=-1,n=null==e?0:e.length;++r<n&&!1!==t(e[r],r,e););return e}var ie=function createBaseFor(e){return function(t,r,n){for(var i=-1,o=Object(t),s=n(t),a=s.length;a--;){var c=s[e?a:++i];if(!1===r(o[c],c,o))break}return t}}();function baseForOwn(e,t){return e&&ie(e,t,keys)}function baseIsNaN(e){return e!=e}function baseIndexOf(e,t,r){return t==t?function strictIndexOf(e,t,r){for(var n=r-1,i=e.length;++n<i;)if(e[n]===t)return n;return-1}(e,t,r):function baseFindIndex(e,t,r,n){for(var i=e.length,o=r+(n?1:-1);n?o--:++o<i;)if(t(e[o],o,e))return o;return-1}(e,baseIsNaN,r)}var oe=function(e,t,r){"function"==typeof t&&(r=t,t=null),r=once(r||noop);var n=keys(e).length;if(!n)return r(null);t||(t=n);var i={},o=0,s=!1,a=Object.create(null),c=[],u=[],l={};function enqueueTask(e,t){c.push(function(){!function runTask(e,t){if(s)return;var n=onlyOnce(function(t,n){if(o--,arguments.length>2&&(n=slice(arguments,1)),t){var c={};baseForOwn(i,function(e,t){c[t]=e}),c[e]=n,s=!0,a=Object.create(null),r(t,c)}else i[e]=n,function taskComplete(e){arrayEach(a[e]||[],function(e){e()}),processQueue()}(e)});o++;var c=wrapAsync(t[t.length-1]);t.length>1?c(i,n):c(n)}(e,t)})}function processQueue(){if(0===c.length&&0===o)return r(null,i);for(;c.length&&o<t;){c.shift()()}}function getDependents(t){var r=[];return baseForOwn(e,function(e,n){P(e)&&baseIndexOf(e,t,0)>=0&&r.push(n)}),r}baseForOwn(e,function(t,r){if(!P(t))return enqueueTask(r,[t]),void u.push(r);var n=t.slice(0,t.length-1),i=n.length;if(0===i)return enqueueTask(r,t),void u.push(r);l[r]=i,arrayEach(n,function(o){if(!e[o])throw new Error("async.auto task `"+r+"` has a non-existent dependency `"+o+"` in "+n.join(", "));!function addListener(e,t){var r=a[e];r||(r=a[e]=[]);r.push(t)}(o,function(){0===--i&&enqueueTask(r,t)})})}),function checkForDeadlocks(){var e,t=0;for(;u.length;)e=u.pop(),t++,arrayEach(getDependents(e),function(e){0==--l[e]&&u.push(e)});if(t!==n)throw new Error("async.auto cannot execute tasks due to a recursive dependency")}(),processQueue()};function arrayMap(e,t){for(var r=-1,n=null==e?0:e.length,i=Array(n);++r<n;)i[r]=t(e[r],r,e);return i}var se="[object Symbol]",ae=1/0,ce=p?p.prototype:void 0,ue=ce?ce.toString:void 0;function baseToString(e){if("string"==typeof e)return e;if(P(e))return arrayMap(e,baseToString)+"";if(function isSymbol(e){return"symbol"==typeof e||isObjectLike(e)&&baseGetTag(e)==se}(e))return ue?ue.call(e):"";var t=e+"";return"0"==t&&1/e==-ae?"-0":t}function castSlice(e,t,r){var n=e.length;return r=void 0===r?n:r,!t&&r>=n?e:function baseSlice(e,t,r){var n=-1,i=e.length;t<0&&(t=-t>i?0:i+t),(r=r>i?i:r)<0&&(r+=i),i=t>r?0:r-t>>>0,t>>>=0;for(var o=Array(i);++n<i;)o[n]=e[n+t];return o}(e,t,r)}var le=RegExp("[\\u200d\\ud800-\\udfff\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff\\ufe0e\\ufe0f]"),pe="[\\ud800-\\udfff]",de="[\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff]",he="\\ud83c[\\udffb-\\udfff]",fe="[^\\ud800-\\udfff]",me="(?:\\ud83c[\\udde6-\\uddff]){2}",ge="[\\ud800-\\udbff][\\udc00-\\udfff]",ye="(?:"+de+"|"+he+")"+"?",ve="[\\ufe0e\\ufe0f]?"+ye+("(?:\\u200d(?:"+[fe,me,ge].join("|")+")[\\ufe0e\\ufe0f]?"+ye+")*"),be="(?:"+[fe+de+"?",de,me,ge,pe].join("|")+")",_e=RegExp(he+"(?="+he+")|"+be+ve,"g");function stringToArray(e){return function hasUnicode(e){return le.test(e)}(e)?function unicodeToArray(e){return e.match(_e)||[]}(e):function asciiToArray(e){return e.split("")}(e)}var we=/^\s+|\s+$/g;function trim(e,t,r){if((e=function toString(e){return null==e?"":baseToString(e)}(e))&&(r||void 0===t))return e.replace(we,"");if(!e||!(t=baseToString(t)))return e;var n=stringToArray(e),i=stringToArray(t);return castSlice(n,function charsStartIndex(e,t){for(var r=-1,n=e.length;++r<n&&baseIndexOf(t,e[r],0)>-1;);return r}(n,i),function charsEndIndex(e,t){for(var r=e.length;r--&&baseIndexOf(t,e[r],0)>-1;);return r}(n,i)+1).join("")}var Ee=/^(?:async\s+)?(function)?\s*[^\(]*\(\s*([^\)]*)\)/m,Se=/,/,Ce=/(=.+)?(\s*)$/,xe=/((\/\/.*$)|(\/\*[\s\S]*?\*\/))/gm;function autoInject(e,t){var r={};baseForOwn(e,function(e,t){var n,i=isAsync(e),o=!i&&1===e.length||i&&0===e.length;if(P(e))n=e.slice(0,-1),e=e[e.length-1],r[t]=n.concat(n.length>0?newTask:e);else if(o)r[t]=e;else{if(n=function parseParams(e){return e=(e=(e=(e=e.toString().replace(xe,"")).match(Ee)[2].replace(" ",""))?e.split(Se):[]).map(function(e){return trim(e.replace(Ce,""))})}(e),0===e.length&&!i&&0===n.length)throw new Error("autoInject task functions require explicit parameters.");i||n.pop(),r[t]=n.concat(newTask)}function newTask(t,r){var i=arrayMap(n,function(e){return t[e]});i.push(r),wrapAsync(e).apply(null,i)}}),oe(r,t)}function DLL(){this.head=this.tail=null,this.length=0}function setInitial(e,t){e.length=1,e.head=e.tail=t}function queue(e,t,r){if(null==t)t=1;else if(0===t)throw new Error("Concurrency must not be zero");var n=wrapAsync(e),i=0,o=[],a=!1;function _insert(e,t,r){if(null!=r&&"function"!=typeof r)throw new Error("task callback must be a function");if(u.started=!0,P(e)||(e=[e]),0===e.length&&u.idle())return s(function(){u.drain()});for(var n=0,i=e.length;n<i;n++){var o={data:e[n],callback:r||noop};t?u._tasks.unshift(o):u._tasks.push(o)}a||(a=!0,s(function(){a=!1,u.process()}))}function _next(e){return function(t){i-=1;for(var r=0,n=e.length;r<n;r++){var s=e[r],a=baseIndexOf(o,s,0);0===a?o.shift():a>0&&o.splice(a,1),s.callback.apply(s,arguments),null!=t&&u.error(t,s.data)}i<=u.concurrency-u.buffer&&u.unsaturated(),u.idle()&&u.drain(),u.process()}}var c=!1,u={_tasks:new DLL,concurrency:t,payload:r,saturated:noop,unsaturated:noop,buffer:t/4,empty:noop,drain:noop,error:noop,started:!1,paused:!1,push:function(e,t){_insert(e,!1,t)},kill:function(){u.drain=noop,u._tasks.empty()},unshift:function(e,t){_insert(e,!0,t)},remove:function(e){u._tasks.remove(e)},process:function(){if(!c){for(c=!0;!u.paused&&i<u.concurrency&&u._tasks.length;){var e=[],t=[],r=u._tasks.length;u.payload&&(r=Math.min(r,u.payload));for(var s=0;s<r;s++){var a=u._tasks.shift();e.push(a),o.push(a),t.push(a.data)}i+=1,0===u._tasks.length&&u.empty(),i===u.concurrency&&u.saturated();var l=onlyOnce(_next(e));n(t,l)}c=!1}},length:function(){return u._tasks.length},running:function(){return i},workersList:function(){return o},idle:function(){return u._tasks.length+i===0},pause:function(){u.paused=!0},resume:function(){!1!==u.paused&&(u.paused=!1,s(u.process))}};return u}function cargo(e,t){return queue(e,1,t)}DLL.prototype.removeLink=function(e){return e.prev?e.prev.next=e.next:this.head=e.next,e.next?e.next.prev=e.prev:this.tail=e.prev,e.prev=e.next=null,this.length-=1,e},DLL.prototype.empty=function(){for(;this.head;)this.shift();return this},DLL.prototype.insertAfter=function(e,t){t.prev=e,t.next=e.next,e.next?e.next.prev=t:this.tail=t,e.next=t,this.length+=1},DLL.prototype.insertBefore=function(e,t){t.prev=e.prev,t.next=e,e.prev?e.prev.next=t:this.head=t,e.prev=t,this.length+=1},DLL.prototype.unshift=function(e){this.head?this.insertBefore(this.head,e):setInitial(this,e)},DLL.prototype.push=function(e){this.tail?this.insertAfter(this.tail,e):setInitial(this,e)},DLL.prototype.shift=function(){return this.head&&this.removeLink(this.head)},DLL.prototype.pop=function(){return this.tail&&this.removeLink(this.tail)},DLL.prototype.toArray=function(){for(var e=Array(this.length),t=this.head,r=0;r<this.length;r++)e[r]=t.data,t=t.next;return e},DLL.prototype.remove=function(e){for(var t=this.head;t;){var r=t.next;e(t)&&this.removeLink(t),t=r}return this};var ke=doLimit(eachOfLimit,1);function reduce(e,t,r,n){n=once(n||noop);var i=wrapAsync(r);ke(e,function(e,r,n){i(t,e,function(e,r){t=r,n(e)})},function(e){n(e,t)})}function seq(){var e=arrayMap(arguments,wrapAsync);return function(){var t=slice(arguments),r=this,n=t[t.length-1];"function"==typeof n?t.pop():n=noop,reduce(e,t,function(e,t,n){t.apply(r,e.concat(function(e){var t=slice(arguments,1);n(e,t)}))},function(e,t){n.apply(r,[e].concat(t))})}}var Re=function(){return seq.apply(null,slice(arguments).reverse())},Te=Array.prototype.concat,Oe=function(e,t,r,n){n=n||noop;var i=wrapAsync(r);te(e,t,function(e,t){i(e,function(e){return e?t(e):t(null,slice(arguments,1))})},function(e,t){for(var r=[],i=0;i<t.length;i++)t[i]&&(r=Te.apply(r,t[i]));return n(e,r)})},Ie=doLimit(Oe,1/0),Ne=doLimit(Oe,1),Ae=function(){var e=slice(arguments),t=[null].concat(e);return function(){return arguments[arguments.length-1].apply(this,t)}};function identity(e){return e}function _createTester(e,t){return function(r,n,i,o){o=o||noop;var s,a=!1;r(n,function(r,n,o){i(r,function(n,i){n?o(n):e(i)&&!s?(a=!0,s=t(!0,r),o(null,x)):o()})},function(e){e?o(e):o(null,a?s:t(!1))})}}function _findGetResult(e,t){return t}var Pe=doParallel(_createTester(identity,_findGetResult)),Le=doParallelLimit(_createTester(identity,_findGetResult)),De=doLimit(Le,1);function consoleFunc(e){return function(t){var r=slice(arguments,1);r.push(function(t){var r=slice(arguments,1);"object"==typeof console&&(t?console.error&&console.error(t):console[e]&&arrayEach(r,function(t){console[e](t)}))}),wrapAsync(t).apply(null,r)}}var Me=consoleFunc("dir");function doDuring(e,t,r){r=onlyOnce(r||noop);var n=wrapAsync(e),i=wrapAsync(t);function next(e){if(e)return r(e);var t=slice(arguments,1);t.push(check),i.apply(this,t)}function check(e,t){return e?r(e):t?void n(next):r(null)}check(null,!0)}function doWhilst(e,t,r){r=onlyOnce(r||noop);var n=wrapAsync(e),i=function(e){if(e)return r(e);var o=slice(arguments,1);if(t.apply(this,o))return n(i);r.apply(null,[null].concat(o))};n(i)}function doUntil(e,t,r){doWhilst(e,function(){return!t.apply(this,arguments)},r)}function during(e,t,r){r=onlyOnce(r||noop);var n=wrapAsync(t),i=wrapAsync(e);function next(e){if(e)return r(e);i(check)}function check(e,t){return e?r(e):t?void n(next):r(null)}i(check)}function _withoutIndex(e){return function(t,r,n){return e(t,n)}}function eachLimit(e,t,r){Q(e,_withoutIndex(wrapAsync(t)),r)}function eachLimit$1(e,t,r,n){_eachOfLimit(t)(e,_withoutIndex(wrapAsync(r)),n)}var je=doLimit(eachLimit$1,1);function ensureAsync(e){return isAsync(e)?e:n(function(t,r){var n=!0;t.push(function(){var e=arguments;n?s(function(){r.apply(null,e)}):r.apply(null,e)}),e.apply(this,t),n=!1})}function notId(e){return!e}var qe=doParallel(_createTester(notId,notId)),Fe=doParallelLimit(_createTester(notId,notId)),ze=doLimit(Fe,1);function baseProperty(e){return function(t){return null==t?void 0:t[e]}}function filterArray(e,t,r,n){var i=new Array(t.length);e(t,function(e,t,n){r(e,function(e,r){i[t]=!!r,n(e)})},function(e){if(e)return n(e);for(var r=[],o=0;o<t.length;o++)i[o]&&r.push(t[o]);n(null,r)})}function filterGeneric(e,t,r,n){var i=[];e(t,function(e,t,n){r(e,function(r,o){r?n(r):(o&&i.push({index:t,value:e}),n())})},function(e){e?n(e):n(null,arrayMap(i.sort(function(e,t){return e.index-t.index}),baseProperty("value")))})}function _filter(e,t,r,n){(isArrayLike(t)?filterArray:filterGeneric)(e,t,wrapAsync(r),n||noop)}var Ue=doParallel(_filter),Be=doParallelLimit(_filter),He=doLimit(Be,1);function forever(e,t){var r=onlyOnce(t||noop),n=wrapAsync(ensureAsync(e));!function next(e){if(e)return r(e);n(next)}()}var $e=function(e,t,r,n){n=n||noop;var i=wrapAsync(r);te(e,t,function(e,t){i(e,function(r,n){return r?t(r):t(null,{key:n,val:e})})},function(e,t){for(var r={},i=Object.prototype.hasOwnProperty,o=0;o<t.length;o++)if(t[o]){var s=t[o].key,a=t[o].val;i.call(r,s)?r[s].push(a):r[s]=[a]}return n(e,r)})},Ve=doLimit($e,1/0),Ge=doLimit($e,1),We=consoleFunc("log");function mapValuesLimit(e,t,r,n){n=once(n||noop);var i={},o=wrapAsync(r);eachOfLimit(e,t,function(e,t,r){o(e,t,function(e,n){if(e)return r(e);i[t]=n,r()})},function(e){n(e,i)})}var Je=doLimit(mapValuesLimit,1/0),Xe=doLimit(mapValuesLimit,1);function has(e,t){return t in e}function memoize(e,t){var r=Object.create(null),i=Object.create(null);t=t||identity;var o=wrapAsync(e),a=n(function memoized(e,n){var a=t.apply(null,e);has(r,a)?s(function(){n.apply(null,r[a])}):has(i,a)?i[a].push(n):(i[a]=[n],o.apply(null,e.concat(function(){var e=slice(arguments);r[a]=e;var t=i[a];delete i[a];for(var n=0,o=t.length;n<o;n++)t[n].apply(null,e)})))});return a.memo=r,a.unmemoized=e,a}var Ye=wrap(o?process.nextTick:i?setImmediate:fallback);function _parallel(e,t,r){r=r||noop;var n=isArrayLike(t)?[]:{};e(t,function(e,t,r){wrapAsync(e)(function(e,i){arguments.length>2&&(i=slice(arguments,1)),n[t]=i,r(e)})},function(e){r(e,n)})}function parallelLimit(e,t){_parallel(Q,e,t)}function parallelLimit$1(e,t,r){_parallel(_eachOfLimit(t),e,r)}var Ke=function(e,t){var r=wrapAsync(e);return queue(function(e,t){r(e[0],t)},t,1)},Qe=function(e,t){var r=Ke(e,t);return r.push=function(e,t,n){if(null==n&&(n=noop),"function"!=typeof n)throw new Error("task callback must be a function");if(r.started=!0,P(e)||(e=[e]),0===e.length)return s(function(){r.drain()});t=t||0;for(var i=r._tasks.head;i&&t>=i.priority;)i=i.next;for(var o=0,a=e.length;o<a;o++){var c={data:e[o],priority:t,callback:n};i?r._tasks.insertBefore(i,c):r._tasks.push(c)}s(r.process)},delete r.unshift,r};function race(e,t){if(t=once(t||noop),!P(e))return t(new TypeError("First argument to race must be an array of functions"));if(!e.length)return t();for(var r=0,n=e.length;r<n;r++)wrapAsync(e[r])(t)}function reduceRight(e,t,r,n){reduce(slice(e).reverse(),t,r,n)}function reflect(e){var t=wrapAsync(e);return n(function reflectOn(e,r){return e.push(function callback(e,t){var n;e?r(null,{error:e}):(n=arguments.length<=2?t:slice(arguments,1),r(null,{value:n}))}),t.apply(this,e)})}function reflectAll(e){var t;return P(e)?t=arrayMap(e,reflect):(t={},baseForOwn(e,function(e,r){t[r]=reflect.call(this,e)})),t}function reject$1(e,t,r,n){_filter(e,t,function(e,t){r(e,function(e,r){t(e,!r)})},n)}var Ze=doParallel(reject$1),et=doParallelLimit(reject$1),tt=doLimit(et,1);function constant$1(e){return function(){return e}}function retry(e,t,r){var n=5,i=0,o={times:n,intervalFunc:constant$1(i)};if(arguments.length<3&&"function"==typeof e?(r=t||noop,t=e):(!function parseTimes(e,t){if("object"==typeof t)e.times=+t.times||n,e.intervalFunc="function"==typeof t.interval?t.interval:constant$1(+t.interval||i),e.errorFilter=t.errorFilter;else{if("number"!=typeof t&&"string"!=typeof t)throw new Error("Invalid arguments for async.retry");e.times=+t||n}}(o,e),r=r||noop),"function"!=typeof t)throw new Error("Invalid arguments for async.retry");var s=wrapAsync(t),a=1;!function retryAttempt(){s(function(e){e&&a++<o.times&&("function"!=typeof o.errorFilter||o.errorFilter(e))?setTimeout(retryAttempt,o.intervalFunc(a)):r.apply(null,arguments)})}()}var rt=function(e,t){t||(t=e,e=null);var r=wrapAsync(t);return n(function(t,n){function taskFn(e){r.apply(null,t.concat(e))}e?retry(e,taskFn,n):retry(taskFn,n)})};function series(e,t){_parallel(ke,e,t)}var nt=doParallel(_createTester(Boolean,identity)),it=doParallelLimit(_createTester(Boolean,identity)),ot=doLimit(it,1);function sortBy(e,t,r){var n=wrapAsync(t);function comparator(e,t){var r=e.criteria,n=t.criteria;return r<n?-1:r>n?1:0}Z(e,function(e,t){n(e,function(r,n){if(r)return t(r);t(null,{value:e,criteria:n})})},function(e,t){if(e)return r(e);r(null,arrayMap(t.sort(comparator),baseProperty("value")))})}function timeout(e,t,r){var i=wrapAsync(e);return n(function(n,o){var s,a=!1;n.push(function(){a||(o.apply(null,arguments),clearTimeout(s))}),s=setTimeout(function timeoutCallback(){var t=e.name||"anonymous",n=new Error('Callback function "'+t+'" timed out.');n.code="ETIMEDOUT",r&&(n.info=r),a=!0,o(n)},t),i.apply(null,n)})}var st=Math.ceil,at=Math.max;function timeLimit(e,t,r,n){var i=wrapAsync(r);te(function baseRange(e,t,r,n){for(var i=-1,o=at(st((t-e)/(r||1)),0),s=Array(o);o--;)s[n?o:++i]=e,e+=r;return s}(0,e,1),t,i,n)}var ct=doLimit(timeLimit,1/0),ut=doLimit(timeLimit,1);function transform(e,t,r,n){arguments.length<=3&&(n=r,r=t,t=P(e)?[]:{}),n=once(n||noop);var i=wrapAsync(r);Q(e,function(e,r,n){i(t,e,r,n)},function(e){n(e,t)})}function tryEach(e,t){var r,n=null;t=t||noop,je(e,function(e,t){wrapAsync(e)(function(e,i){r=arguments.length>2?slice(arguments,1):i,n=e,t(!e)})},function(){t(n,r)})}function unmemoize(e){return function(){return(e.unmemoized||e).apply(null,arguments)}}function whilst(e,t,r){r=onlyOnce(r||noop);var n=wrapAsync(t);if(!e())return r(null);var i=function(t){if(t)return r(t);if(e())return n(i);var o=slice(arguments,1);r.apply(null,[null].concat(o))};n(i)}function until(e,t,r){whilst(function(){return!e.apply(this,arguments)},t,r)}var lt=function(e,t){if(t=once(t||noop),!P(e))return t(new Error("First argument to waterfall must be an array of functions"));if(!e.length)return t();var r=0;function nextTask(t){var n=wrapAsync(e[r++]);t.push(onlyOnce(next)),n.apply(null,t)}function next(n){if(n||r===e.length)return t.apply(null,arguments);nextTask(slice(arguments,1))}nextTask([])},pt={apply:r,applyEach:ee,applyEachSeries:ne,asyncify:asyncify,auto:oe,autoInject:autoInject,cargo:cargo,compose:Re,concat:Ie,concatLimit:Oe,concatSeries:Ne,constant:Ae,detect:Pe,detectLimit:Le,detectSeries:De,dir:Me,doDuring:doDuring,doUntil:doUntil,doWhilst:doWhilst,during:during,each:eachLimit,eachLimit:eachLimit$1,eachOf:Q,eachOfLimit:eachOfLimit,eachOfSeries:ke,eachSeries:je,ensureAsync:ensureAsync,every:qe,everyLimit:Fe,everySeries:ze,filter:Ue,filterLimit:Be,filterSeries:He,forever:forever,groupBy:Ve,groupByLimit:$e,groupBySeries:Ge,log:We,map:Z,mapLimit:te,mapSeries:re,mapValues:Je,mapValuesLimit:mapValuesLimit,mapValuesSeries:Xe,memoize:memoize,nextTick:Ye,parallel:parallelLimit,parallelLimit:parallelLimit$1,priorityQueue:Qe,queue:Ke,race:race,reduce:reduce,reduceRight:reduceRight,reflect:reflect,reflectAll:reflectAll,reject:Ze,rejectLimit:et,rejectSeries:tt,retry:retry,retryable:rt,seq:seq,series:series,setImmediate:s,some:nt,someLimit:it,someSeries:ot,sortBy:sortBy,timeout:timeout,times:ct,timesLimit:timeLimit,timesSeries:ut,transform:transform,tryEach:tryEach,unmemoize:unmemoize,until:until,waterfall:lt,whilst:whilst,all:qe,allLimit:Fe,allSeries:ze,any:nt,anyLimit:it,anySeries:ot,find:Pe,findLimit:Le,findSeries:De,forEach:eachLimit,forEachSeries:je,forEachLimit:eachLimit$1,forEachOf:Q,forEachOfSeries:ke,forEachOfLimit:eachOfLimit,inject:reduce,foldl:reduce,foldr:reduceRight,select:Ue,selectLimit:Be,selectSeries:He,wrapSync:asyncify};t.default=pt,t.apply=r,t.applyEach=ee,t.applyEachSeries=ne,t.asyncify=asyncify,t.auto=oe,t.autoInject=autoInject,t.cargo=cargo,t.compose=Re,t.concat=Ie,t.concatLimit=Oe,t.concatSeries=Ne,t.constant=Ae,t.detect=Pe,t.detectLimit=Le,t.detectSeries=De,t.dir=Me,t.doDuring=doDuring,t.doUntil=doUntil,t.doWhilst=doWhilst,t.during=during,t.each=eachLimit,t.eachLimit=eachLimit$1,t.eachOf=Q,t.eachOfLimit=eachOfLimit,t.eachOfSeries=ke,t.eachSeries=je,t.ensureAsync=ensureAsync,t.every=qe,t.everyLimit=Fe,t.everySeries=ze,t.filter=Ue,t.filterLimit=Be,t.filterSeries=He,t.forever=forever,t.groupBy=Ve,t.groupByLimit=$e,t.groupBySeries=Ge,t.log=We,t.map=Z,t.mapLimit=te,t.mapSeries=re,t.mapValues=Je,t.mapValuesLimit=mapValuesLimit,t.mapValuesSeries=Xe,t.memoize=memoize,t.nextTick=Ye,t.parallel=parallelLimit,t.parallelLimit=parallelLimit$1,t.priorityQueue=Qe,t.queue=Ke,t.race=race,t.reduce=reduce,t.reduceRight=reduceRight,t.reflect=reflect,t.reflectAll=reflectAll,t.reject=Ze,t.rejectLimit=et,t.rejectSeries=tt,t.retry=retry,t.retryable=rt,t.seq=seq,t.series=series,t.setImmediate=s,t.some=nt,t.someLimit=it,t.someSeries=ot,t.sortBy=sortBy,t.timeout=timeout,t.times=ct,t.timesLimit=timeLimit,t.timesSeries=ut,t.transform=transform,t.tryEach=tryEach,t.unmemoize=unmemoize,t.until=until,t.waterfall=lt,t.whilst=whilst,t.all=qe,t.allLimit=Fe,t.allSeries=ze,t.any=nt,t.anyLimit=it,t.anySeries=ot,t.find=Pe,t.findLimit=Le,t.findSeries=De,t.forEach=eachLimit,t.forEachSeries=je,t.forEachLimit=eachLimit$1,t.forEachOf=Q,t.forEachOfSeries=ke,t.forEachOfLimit=eachOfLimit,t.inject=reduce,t.foldl=reduce,t.foldr=reduceRight,t.select=Ue,t.selectLimit=Be,t.selectSeries=He,t.wrapSync=asyncify,Object.defineProperty(t,"__esModule",{value:!0})})(t)}).call(this,r(48)(e))},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(78),i=r(7),o=r(211),s=r(4),a=r(874),c=r(215),u=r(160),l=r(360),p=r(878),d=r(159),h=r(124),f=d("azure-iot-amqp-base:Amqp"),m=function(){function Amqp(e){var t=this;this._receivers={},this._senders={},this._disconnectionOccurred=!1,this._sessionCloseOccurred=!1,this._connectionCloseOccurred=!1,this._rheaContainer=l.create_container(),this._rheaContainer.on("azure-iot-amqp-base:error-indicated",function(e){f("azure-iot-amqp-base:error-indicated invoked "+t._getErrorName(e)),t._fsm.handle("amqpError",e)});var r=function(e){f("rhea error event handler"),t._fsm.handle("error",e)},i=function(e){f("connection error event handler"),t._fsm.handle("connection_error",e)},p=function(e){f("connection close event handler"),t._fsm.handle("connection_close",e)},d=function(e){f("connection open event handler"),t._fsm.handle("connection_open",e)},m=function(e){f("connection disconnected event handler"),t._fsm.handle("disconnected",e)},g=function(e){t._rheaConnection[e]("connection_error",i),t._rheaConnection[e]("connection_open",d),t._rheaConnection[e]("connection_close",p),t._rheaConnection[e]("disconnected",m),t._rheaConnection[e]("error",r)},y=function(e){f("session error event handler"),t._fsm.handle("session_error",e)},v=function(e){f("session open event handler"),t._fsm.handle("session_open",e)},b=function(e){f("session close event handler"),t._fsm.handle("session_close",e)};this._fsm=new n.Fsm({namespace:"amqp-base",initialState:"disconnected",states:{disconnected:{_onEnter:function(e,r,n){e?r?t._safeCallback(e,r):t._safeCallback(e,null,new s.results.Disconnected):t._disconnectHandler&&(f("calling upper layer disconnect handler"),f("error passed to disconnect handler is: "+t._getErrorName(r||new s.errors.NotConnectedError("rhea: connection disconnected"))),t._disconnectHandler(r||new s.errors.NotConnectedError("rhea: connection disconnected")))},amqpError:function(e){f("received an error while disconnected: maybe a bug: "+(e?e.name:"falsy error object."))},connect:function(e,r){t._fsm.transition("connecting",e,r)},disconnect:function(e){return e(null,new s.results.Disconnected)},attachSenderLink:function(e,t,r){return r(new s.errors.NotConnectedError)},attachReceiverLink:function(e,t,r){return r(new s.errors.NotConnectedError)},detachSenderLink:function(e,r){return t._safeCallback(r)},detachReceiverLink:function(e,r){return t._safeCallback(r)},initializeCBS:function(e){return e(new s.errors.NotConnectedError)},putToken:function(e,t,r){return r(new s.errors.NotConnectedError)}},connecting:{_onEnter:function(r,n){t._rheaContainer.options.sender_options={properties:{"com.microsoft:client-version":t._config.userAgentString},reconnect:!1},t._rheaContainer.options.receiver_options={properties:{"com.microsoft:client-version":t._config.userAgentString},reconnect:!1,autoaccept:e},t._connectionCallback=n,t._indicatedConnectionError=void 0,t._disconnectionOccurred=!1,t._sessionCloseOccurred=!1,t._connectionCloseOccurred=!1,t._rheaConnection=t._rheaContainer.connect(r),g("on")},connection_open:function(e){t._rheaConnection=e.connection;var r=t._connectionCallback;t._connectionCallback=void 0,t._fsm.transition("connecting_session",r)},connection_close:function(e){var r=t._indicatedConnectionError,n=t._connectionCallback;t._indicatedConnectionError=void 0,t._connectionCallback=void 0,t._connectionCloseOccurred=!0,g("removeListener"),t._fsm.transition("disconnected",n,r)},connection_error:function(e){t._indicatedConnectionError=e.connection.error},error:function(e){var r=t._connectionCallback;t._connectionCallback=void 0,g("removeListener"),t._fsm.transition("disconnected",r,e.connection.error)},disconnected:function(e){var r=t._connectionCallback;t._connectionCallback=void 0,g("removeListener"),t._fsm.transition("disconnected",r,new s.errors.NotConnectedError("rhea: connection disconnected"))},"*":function(){return t._fsm.deferUntilTransition()}},connecting_session:{_onEnter:function(e,r){var n;t._sessionCallback=e,t._sessionResult=r,t._rheaSession=t._rheaConnection.create_session(),n="on",t._rheaSession[n]("session_error",y),t._rheaSession[n]("session_open",v),t._rheaSession[n]("session_close",b),t._rheaSession.open()},session_open:function(e){var r=t._sessionCallback,n=t._sessionResult;t._sessionCallback=void 0,t._sessionResult=void 0,t._fsm.transition("connected",r,n)},session_error:function(e){t._indicatedSessionError=e.session.error},session_close:function(e){var r=t._indicatedSessionError,n=t._sessionCallback;t._indicatedSessionError=void 0,t._sessionCallback=void 0,t._sessionCloseOccurred=!0,t._fsm.transition("disconnecting",n,r)},connection_error:function(e){t._indicatedConnectionError=e.connection.error},connection_close:function(e){var r=t._indicatedConnectionError,n=t._sessionCallback;t._sessionCloseOccurred=!0,t._indicatedConnectionError=void 0,t._sessionCallback=void 0,t._connectionCloseOccurred=!0,t._fsm.transition("disconnecting",n,r)},error:function(e){var r=t._sessionCallback;t._sessionCloseOccurred=!0,t._sessionCallback=void 0,t._fsm.transition("disconnecting",r,e.connection.error)},disconnected:function(e){var r=t._sessionCallback;t._sessionCallback=void 0,g("removeListener"),t._fsm.transition("disconnected",r,new s.errors.NotConnectedError("rhea: connection disconnected"))},amqpError:function(e){t._fsm.transition("disconnecting",null,e)},"*":function(){return t._fsm.deferUntilTransition()}},connected:{_onEnter:function(e,r){t._safeCallback(e,null,new s.results.Connected(r))},session_error:function(e){t._indicatedSessionError=e.session.error},session_close:function(e){var r=t._indicatedSessionError;t._indicatedSessionError=void 0,t._sessionCloseOccurred=!0,t._fsm.transition("disconnecting",null,r)},connection_error:function(e){t._indicatedConnectionError=e.connection.error},connection_close:function(e){var r=t._indicatedConnectionError;t._indicatedConnectionError=void 0,t._connectionCloseOccurred=!0,t._fsm.transition("disconnecting",null,r)},error:function(e){e&&e.connection?t._fsm.transition("disconnecting",null,e.connection.error):t._fsm.transition("disconnecting",null,e)},disconnected:function(e){t._disconnectionOccurred=!0,t._fsm.transition("disconnecting",null,new s.errors.NotConnectedError("rhea: connection disconnected"))},amqpError:function(e){t._fsm.transition("disconnecting",null,e)},connect:function(e,t){return t(null,new s.results.Connected)},disconnect:function(e){t._fsm.transition("disconnecting",e)},initializeCBS:function(e){t._cbs=new a.ClaimsBasedSecurityAgent(t._rheaSession),t._cbs.attach(e)},putToken:function(e,r,n){t._cbs?t._cbs.putToken(e,r,n):t._fsm.handle("initializeCBS",function(i){i?n(i):t._fsm.handle("putToken",e,r,n)})},send:function(e,r,n,i){f("call to deprecated api 'azure-iot-amqp-base.Amqp.send'. You should be using SenderLink.send instead");var s=o.AmqpMessage.fromMessage(e);void 0!==n&&(s.to=n),t._senders[r]?t._senders[r].send(s,i):t._fsm.handle("attachSenderLink",r,null,function(e){e?(f("failed to attach the sender link: "+e.toString()),i(e)):t._senders[r].send(s,i)})},getReceiver:function(e,r){t._receivers[e]?r(null,t._receivers[e]):t._fsm.handle("attachReceiverLink",e,null,function(n){n?r(n):r(null,t._receivers[e])})},attachReceiverLink:function(e,r,n){f("creating receiver link for: "+e),t._receivers[e]=new u.ReceiverLink(e,r,t._rheaSession);var i=function(r){delete t._receivers[e]},o=function(e){n(e)};t._receivers[e].on("error",i),t._receivers[e].on("error",o),t._receivers[e].attach(function(r){r?(i(),o(r)):(t._receivers[e].removeListener("error",o),f("receiver link attached: "+e),n(null,t._receivers[e]))})},attachSenderLink:function(e,r,n){f("creating sender link for: "+e),t._senders[e]=new c.SenderLink(e,r,t._rheaSession);var i=function(r){delete t._senders[e]},o=function(e){n(e)};t._senders[e].on("error",i),t._senders[e].on("error",o),t._senders[e].attach(function(r){r?(i(),o(r)):(t._senders[e].removeListener("error",o),n(null,t._senders[e]))})},detachReceiverLink:function(e,r){t._receivers[e]?t._detachLink(t._receivers[e],function(n){delete t._receivers[e],t._safeCallback(r,n)}):t._safeCallback(r)},detachSenderLink:function(e,r){t._detachLink(t._senders[e],function(n){delete t._senders[e],t._safeCallback(r,n)})}},disconnecting:{_onEnter:function(e,r){f("Entering disconnecting state with disconnectCallback: "+e+" error of: "+t._getErrorName(r));var n=function(e,n){if(!e)return n();t._sessionCloseOccurred||t._disconnectionOccurred?(f("forceDetaching link"),e.forceDetach(r),n()):(f("cleanly detaching link"),e.detach(n,r))};n(t._cbs,function(){var i=[];for(var o in t._senders)t._senders.hasOwnProperty(o)&&(i.push(t._senders[o]),delete t._senders[o]);for(var s in t._receivers)t._receivers.hasOwnProperty(s)&&(i.push(t._receivers[s]),delete t._receivers[s]);h.each(i,n,function(){var n;n=function(n){var i;i=function(i){g("removeListener");var o=r||n||i;t._fsm.transition("disconnected",e,o)},f("entering disconnect function of disconnecting state"),r&&f("with a disconnecting state err: "+t._getErrorName(r)),t._disconnectionOccurred?(f("in disconnecting state - a disconnect had already been detected.  No point in doing anything."),i(r)):(f("disconnect in disconnecting state is about send a close to the peer."),t._rheaConnection.close(),t._connectionCloseOccurred?i(r):t._connectionCallback=i)},t._disconnectionOccurred?n():(t._rheaSession.close(),t._sessionCloseOccurred?n():t._sessionCallback=n)})})},session_close:function(e){var r=t._indicatedSessionError;t._indicatedSessionError=void 0;var n=t._sessionCallback;t._sessionCallback=void 0,t._sessionCloseOccurred=!0,n&&n(r)},session_error:function(e){t._indicatedSessionError=e.session.error},connection_error:function(e){t._indicatedConnectionError=e.connection.error},connection_close:function(e){var r=t._indicatedConnectionError,n=t._connectionCallback;t._indicatedConnectionError=void 0,t._connectionCloseOccurred=!0,n&&n(r)},error:function(e){f("ignoring error events while disconnecting")},disconnected:function(e){t._disconnectionOccurred=!0},amqpError:function(e){f("ignoring error event while disconnecting: "+t._getErrorName(e))},"*":function(){return t._fsm.deferUntilTransition("disconnected")}}}}),this._fsm.on("transition",function(e){f(e.fromState+" -> "+e.toState+" (action:"+e.action+")")})}return Amqp.prototype.connect=function(e,t){var n=i.parse(e.uri),o={};if(e.sslOptions&&(o.cert=e.sslOptions.cert,o.key=e.sslOptions.key,o.ca=e.sslOptions.ca),o.port=n.port?n.port:5671,o.transport="tls",o.hostname=n.hostname,o.host=n.hostname,o.reconnect=!1,"wss:"===n.protocol){var s=r(879),a=this._rheaContainer.websocket_connect(s);o.connection_details=a(e.uri,"AMQPWSB10",e.sslOptions)}e.saslMechanism&&(o.sasl_mechanisms={},o.sasl_mechanisms[e.saslMechanismName]=e.saslMechanism),o=p(o,e.policyOverride),this._config=e,this._fsm.handle("connect",o,t)},Amqp.prototype.setDisconnectHandler=function(e){this._disconnectHandler=e},Amqp.prototype.disconnect=function(e){this._fsm.handle("disconnect",e)},Amqp.prototype.send=function(e,t,r,n){this._fsm.handle("send",e,t,r,n)},Amqp.prototype.getReceiver=function(e,t){this._fsm.handle("getReceiver",e,t)},Amqp.prototype.attachReceiverLink=function(e,t,r){if(!e)throw new ReferenceError("endpoint cannot be '"+e+"'");this._fsm.handle("attachReceiverLink",e,t,r)},Amqp.prototype.attachSenderLink=function(e,t,r){if(!e)throw new ReferenceError("endpoint cannot be '"+e+"'");this._fsm.handle("attachSenderLink",e,t,r)},Amqp.prototype.detachReceiverLink=function(e,t){if(!e)throw new ReferenceError("endpoint cannot be '"+e+"'");this._fsm.handle("detachReceiverLink",e,t)},Amqp.prototype.detachSenderLink=function(e,t){if(!e)throw new ReferenceError("endpoint cannot be '"+e+"'");this._fsm.handle("detachSenderLink",e,t)},Amqp.prototype.initializeCBS=function(e){this._fsm.handle("initializeCBS",e)},Amqp.prototype.putToken=function(e,t,r){this._fsm.handle("putToken",e,t,r)},Amqp.prototype._detachLink=function(e,t){var r=this;e?e.detach(function(){r._safeCallback(t)}):this._safeCallback(t)},Amqp.prototype._safeCallback=function(e,t,r){e&&process.nextTick(function(){return e(t,r)})},Amqp.prototype._getErrorName=function(e){return e?e.condition?"(amqp error) "+e.condition:e.hasOwnProperty("name")?"(javascript error) "+e.name:"unknown error type":"error is falsy"},Amqp}();t.Amqp=m},function(e,t,r){"use strict";var n=r(93),i=r(123),o=r(95),s=r(362),a=r(212),c=r(213),u=r(867),l=r(363),p=r(47),d=r(59),h=r(5).EventEmitter;function get_socket_id(e){return e.get_id_string?e.get_id_string():e.localAddress+":"+e.localPort+" -> "+e.remoteAddress+":"+e.remotePort}function restrict(e,t){if(e){var r,n=e;return function(i){return r!==i&&(n=e,r=i),n--?t(i):-1}}return t}function get_connect_fn(e){if(void 0===e.transport||"tcp"===e.transport)return p.connect;if("tls"===e.transport||"ssl"===e.transport)return d.connect;throw Error("Unrecognised transport: "+e.transport)}var f=["container_id","hostname","max_frame_size","channel_max","idle_time_out","outgoing_locales","incoming_locales","offered_capabilities","desired_capabilities","properties"];function remote_property_shortcut(e){return function(){return this.remote.open?this.remote.open[e]:void 0}}var m=1,g=function(e,t){if(this.options={},e){for(var r in e)this.options[r]=e[r];"tls"!==e.transport&&"ssl"!==e.transport||void 0!==e.servername||void 0===e.host||(this.options.servername=e.host)}if(this.container=t,this.options.id||(this.options.id="connection-"+m++),this.options.container_id||(this.options.container_id=t?t.id:a.generate_uuid()),!this.options.connection_details){var n=this;this.options.connection_details=function(){return function connection_details(e){var t={};return t.connect=e.connect?e.connect:get_connect_fn(e),t.host=e.host?e.host:"localhost",t.port=e.port?e.port:5672,t.options=e,t}(n.options)}}var o=this.get_option("reconnect",!0);if("boolean"==typeof o&&o){var s=this.get_option("initial_reconnect_delay",100),u=this.get_option("max_reconnect_delay",6e4);this.options.reconnect=restrict(this.get_option("reconnect_limit"),function backoff(e,t){var r,n=e;return function(i){r!==i&&(n=e,r=i);var o=n,s=2*n;return n=t>s?s:t,o}}(s,u))}else if("number"==typeof o){var p=this.options.reconnect;this.options.reconnect=restrict(this.get_option("reconnect_limit"),function(){return p})}for(var d in this.registered=!1,this.state=new c,this.local_channel_map={},this.remote_channel_map={},this.local={},this.remote={},this.local.open=i.open(this.options),this.local.close=i.close({}),this.session_policy=function session_per_connection(e){var t=null;return{get_session:function(){return t||(t=e.create_session()).begin(),t}}}(this),this.amqp_transport=new l(this.options.id,0,i.TYPE_AMQP,this),this.sasl_transport=void 0,this.transport=this.amqp_transport,this.conn_established_counter=0,this.heartbeat_out=void 0,this.heartbeat_in=void 0,this.abort_idle=!1,this.socket_ready=!1,this.scheduled_reconnect=void 0,this.default_sender=void 0,this.closed_with_non_fatal_error=!1,f){var h=f[d];Object.defineProperty(this,h,{get:remote_property_shortcut(h)})}Object.defineProperty(this,"error",{get:function(){return this.remote.close?this.remote.close.error:void 0}})};function delegate_to_session(e){g.prototype["on_"+e]=function(t){var r=this.remote_channel_map[t.channel];if(!r)throw new n.ProtocolError(e+" received on invalid channel "+t.channel);r["on_"+e](t)}}g.prototype=Object.create(h.prototype),g.prototype.constructor=g,g.prototype.dispatch=function(e){return o.events("[%s] Connection got event: %s",this.options.id,e),this.listeners(e).length?(h.prototype.emit.apply(this,arguments),!0):!!this.container&&this.container.dispatch.apply(this.container,arguments)},g.prototype._disconnect=function(){for(var e in this.state.disconnected(),this.local_channel_map)this.local_channel_map[e]._disconnect();this.socket_ready=!1},g.prototype._reconnect=function(){this.abort_idle&&(this.abort_idle=!1,this.local.close.error=void 0,this.state=new c,this.state.open()),this.state.reconnect(),this._reset_remote_state()},g.prototype._reset_remote_state=function(){for(var e in this.amqp_transport=new l(this.options.id,0,i.TYPE_AMQP,this),this.sasl_transport=void 0,this.transport=this.amqp_transport,this.remote={},this.remote_channel_map={},this.local_channel_map)this.local_channel_map[e]._reconnect()},g.prototype.connect=function(){return this.is_server=!1,this._reset_remote_state(),this._connect(this.options.connection_details(this.conn_established_counter)),this.open(),this},g.prototype.reconnect=function(){return this.scheduled_reconnect=void 0,o.reconnect("[%s] reconnecting...",this.options.id),this._reconnect(),this._connect(this.options.connection_details(this.conn_established_counter)),process.nextTick(this._process.bind(this)),this},g.prototype._connect=function(e){return e.connect?this.init(e.connect(e.port,e.host,e.options,this.connected.bind(this))):this.init(get_connect_fn(e)(e.port,e.host,e.options,this.connected.bind(this))),this},g.prototype.accept=function(e){return this.is_server=!0,o.io("[%s] client accepted: %s",this.id,get_socket_id(e)),this.socket_ready=!0,this.init(e)},g.prototype.init=function(e){if(this.socket=e,this.get_option("tcp_no_delay",!1)&&this.socket.setNoDelay&&this.socket.setNoDelay(!0),this.socket.on("data",this.input.bind(this)),this.socket.on("error",this.on_error.bind(this)),this.socket.on("end",this.eof.bind(this)),this.is_server){var t;if(this.container&&Object.getOwnPropertyNames(this.container.sasl_server_mechanisms).length&&(t=this.container.sasl_server_mechanisms),this.socket.encrypted&&this.socket.authorized&&this.get_option("enable_sasl_external",!1)&&(t=s.server_add_external(t?a.clone(t):{})),t)void 0===t.ANONYMOUS||this.get_option("require_sasl",!1)?this.sasl_transport=new s.Server(this,t):this.sasl_transport=new s.Selective(this,t);else if(!this.get_option("disable_sasl",!1)){var r=s.server_mechanisms();r.enable_anonymous(),this.sasl_transport=new s.Selective(this,r)}}else{var n=this.get_option("sasl_mechanisms");if(!n){var i=this.get_option("username"),o=this.get_option("password"),c=this.get_option("token");i&&(n=s.client_mechanisms(),o?n.enable_plain(i,o):c?n.enable_xoauth2(i,c):n.enable_anonymous(i))}this.socket.encrypted&&this.options.cert&&this.get_option("enable_sasl_external",!1)&&(n||(n=s.client_mechanisms()),n.enable_external()),n&&(this.sasl_transport=new s.Client(this,n,this.options.sasl_init_hostname||this.options.servername||this.options.host))}return this.transport=this.sasl_transport?this.sasl_transport:this.amqp_transport,this},g.prototype.attach_sender=function(e){return this.session_policy.get_session().attach_sender(e)},g.prototype.open_sender=g.prototype.attach_sender,g.prototype.attach_receiver=function(e){return this.get_option("tcp_no_delay",!0)&&this.socket.setNoDelay&&this.socket.setNoDelay(!0),this.session_policy.get_session().attach_receiver(e)},g.prototype.open_receiver=g.prototype.attach_receiver,g.prototype.get_option=function(e,t){return void 0!==this.options[e]?this.options[e]:this.container?this.container.get_option(e,t):t},g.prototype.send=function(e){return void 0===this.default_sender&&(this.default_sender=this.open_sender({target:{}})),this.default_sender.send(e)},g.prototype.connected=function(){this.socket_ready=!0,this.conn_established_counter++,o.io("[%s] connected %s",this.options.id,get_socket_id(this.socket)),this.output()},g.prototype.sasl_failed=function(e){this.transport_error=new n.ConnectionError(e,"amqp:unauthorized-access",this),this._handle_error()},g.prototype._is_fatal=function(e){return this.get_option("non_fatal_errors",["amqp:connection:forced"]).indexOf(e)<0},g.prototype._handle_error=function(){var e=this.get_error();if(e){var t=this.dispatch("connection_error",this._context({error:e}));return t=this.dispatch("connection_close",this._context({error:e}))||t,this._is_fatal(e.condition)?t||this.dispatch("error",new n.ConnectionError(e.description,e.condition,this)):this.closed_with_non_fatal_error=!0,!0}return!1},g.prototype.get_error=function(){return this.transport_error?this.transport_error:this.remote.close&&this.remote.close.error?new n.ConnectionError(this.remote.close.error.description,this.remote.close.error.condition,this):void 0},g.prototype._get_peer_details=function(){var e="";return this.remote.open&&this.remote.open.container&&(e+=this.remote.open.container+" "),this.remote.open&&this.remote.open.properties&&(e+=JSON.stringify(this.remote.open.properties)),e},g.prototype.output=function(){try{this.socket&&this.socket_ready&&(this.heartbeat_out&&clearTimeout(this.heartbeat_out),this.transport.write(this.socket),(this.is_closed()&&this.state.has_settled()||this.abort_idle||this.transport_error)&&!this.transport.has_writes_pending()?this.socket.end():this.is_open()&&this.remote.open.idle_time_out&&(this.heartbeat_out=setTimeout(this._write_frame.bind(this),this.remote.open.idle_time_out/2)))}catch(e){"ProtocolError"===e.name?(console.error("["+this.options.id+"] error on write: "+e+" "+this._get_peer_details()+" "+e.name),this.dispatch("protocol_error",e)||console.error("["+this.options.id+"] error on write: "+e+" "+this._get_peer_details())):this.dispatch("error",e),this.socket.end()}},g.prototype.input=function(e){var t;try{this.heartbeat_in&&clearTimeout(this.heartbeat_in),o.io("[%s] read %d bytes",this.options.id,e.length),this.previous_input?(t=Buffer.concat([this.previous_input,e],this.previous_input.length+e.length),this.previous_input=null):t=e;var r=this.transport.read(t,this);r<t.length&&(this.previous_input=t.slice(r)),this.local.open.idle_time_out&&(this.heartbeat_in=setTimeout(this.idle.bind(this),this.local.open.idle_time_out)),this.transport.has_writes_pending()?this.output():this.is_closed()&&this.state.has_settled()?this.socket.end():this.is_open()&&this.remote.open.idle_time_out&&!this.heartbeat_out&&(this.heartbeat_out=setTimeout(this._write_frame.bind(this),this.remote.open.idle_time_out/2))}catch(e){"ProtocolError"===e.name?this.dispatch("protocol_error",e)||console.error("["+this.options.id+"] error on read: "+e+" "+this._get_peer_details()+" (buffer:"+function buffer_to_hex(e){for(var t,r=[],n=0;n<e.length;n++)r.push((t=e[n])<16?"0x0"+Number(t).toString(16):"0x"+Number(t).toString(16));return r.join(",")}(t)+")"):this.dispatch("error",e),this.socket.end()}},g.prototype.idle=function(){this.is_open()&&(this.abort_idle=!0,this.local.close.error={condition:"amqp:resource-limit-exceeded",description:"max idle time exceeded"},this.close())},g.prototype.on_error=function(e){this._disconnected(e)},g.prototype.eof=function(){this._disconnected()},g.prototype._disconnected=function(e){this.heartbeat_out&&clearTimeout(this.heartbeat_out),this.heartbeat_in&&clearTimeout(this.heartbeat_in);var t=this.closed_with_non_fatal_error;if(this.closed_with_non_fatal_error&&(this.closed_with_non_fatal_error=!1,this.options.reconnect&&this.open()),(!this.is_closed()||t)&&void 0===this.scheduled_reconnect){this._disconnect();var r={};if(e&&(r.error=e),!this.is_server&&!this.transport_error&&this.options.reconnect){var n=this.options.reconnect(this.conn_established_counter);n>=0?(o.reconnect("[%s] Scheduled reconnect in "+n+"ms",this.options.id),this.scheduled_reconnect=setTimeout(this.reconnect.bind(this),n),r.reconnecting=!0):r.reconnecting=!1}this.dispatch("disconnected",this._context(r))||console.warn("["+this.options.id+"] disconnected %s",r.error||"")}},g.prototype.open=function(){this.state.open()&&this._register()},g.prototype.close=function(e){e&&(this.local.close.error=e),this.state.close()&&this._register()},g.prototype.is_open=function(){return this.state.is_open()},g.prototype.is_remote_open=function(){return this.state.remote_open},g.prototype.is_closed=function(){return this.state.is_closed()},g.prototype.create_session=function(){for(var e=0;this.local_channel_map[e];)e++;var t=new u(this,e);return this.local_channel_map[e]=t,t},g.prototype.find_sender=function(e){return this.find_link(a.sender_filter(e))},g.prototype.find_receiver=function(e){return this.find_link(a.receiver_filter(e))},g.prototype.find_link=function(e){for(var t in this.local_channel_map){var r=this.local_channel_map[t].find_link(e);if(r)return r}},g.prototype.each_receiver=function(e,t){this.each_link(e,a.receiver_filter(t))},g.prototype.each_sender=function(e,t){this.each_link(e,a.sender_filter(t))},g.prototype.each_link=function(e,t){for(var r in this.local_channel_map){this.local_channel_map[r].each_link(e,t)}},g.prototype.on_open=function(e){if(!this.state.remote_opened())throw new n.ProtocolError("Open already received");this.remote.open=e.performative,this.open(),this.dispatch("connection_open",this._context())},g.prototype.on_close=function(e){if(!this.state.remote_closed())throw new n.ProtocolError("Close already received");this.remote.close=e.performative,this.remote.close.error?this._handle_error():this.dispatch("connection_close",this._context()),this.heartbeat_out&&clearTimeout(this.heartbeat_out);var t=this;process.nextTick(function(){t.close()})},g.prototype._register=function(){this.registered||(this.registered=!0,process.nextTick(this._process.bind(this)))},g.prototype._process=function(){this.registered=!1;do{for(var e in this.state.need_open()&&this._write_open(),this.local_channel_map)this.local_channel_map[e]._process();this.state.need_close()&&this._write_close()}while(!this.state.has_settled())},g.prototype._write_frame=function(e,t,r){this.amqp_transport.encode(i.amqp_frame(e,t,r)),this.output()},g.prototype._write_open=function(){this._write_frame(0,this.local.open)},g.prototype._write_close=function(){this._write_frame(0,this.local.close)},g.prototype.on_begin=function(e){var t;if(null===e.performative.remote_channel||void 0===e.performative.remote_channel)(t=this.create_session()).local.begin.remote_channel=e.channel;else if(!(t=this.local_channel_map[e.performative.remote_channel]))throw new n.ProtocolError("Invalid value for remote channel "+e.performative.remote_channel);t.on_begin(e),this.remote_channel_map[e.channel]=t},g.prototype.get_peer_certificate=function(){return this.socket&&this.socket.getPeerCertificate?this.socket.getPeerCertificate():void 0},g.prototype.get_tls_socket=function(){return!this.socket||"tls"!==this.options.transport&&"ssl"!==this.options.transport?void 0:this.socket},g.prototype._context=function(e){var t=e||{};return t.connection=this,this.container&&(t.container=this.container),t},g.prototype.remove_session=function(e){delete this.remote_channel_map[e.remote.channel],delete this.local_channel_map[e.local.channel]},delegate_to_session("end"),delegate_to_session("attach"),delegate_to_session("detach"),delegate_to_session("transfer"),delegate_to_session("disposition"),delegate_to_session("flow"),e.exports=g},function(e,t,r){"undefined"!=typeof process&&"renderer"===process.type?e.exports=r(864):e.exports=r(866)},function(e,t,r){function load(){var e;try{e=t.storage.debug}catch(e){}return!e&&"undefined"!=typeof process&&"env"in process&&(e=process.env.DEBUG),e}(t=e.exports=r(361)).log=function log(){return"object"==typeof console&&console.log&&Function.prototype.apply.call(console.log,console,arguments)},t.formatArgs=function formatArgs(e){var r=this.useColors;if(e[0]=(r?"%c":"")+this.namespace+(r?" %c":" ")+e[0]+(r?"%c ":" ")+"+"+t.humanize(this.diff),!r)return;var n="color: "+this.color;e.splice(1,0,n,"color: inherit");var i=0,o=0;e[0].replace(/%[a-zA-Z%]/g,function(e){"%%"!==e&&(i++,"%c"===e&&(o=i))}),e.splice(o,0,n)},t.save=function save(e){try{null==e?t.storage.removeItem("debug"):t.storage.debug=e}catch(e){}},t.load=load,t.useColors=function useColors(){if("undefined"!=typeof window&&window.process&&"renderer"===window.process.type)return!0;return"undefined"!=typeof document&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||"undefined"!=typeof window&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||"undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31||"undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/)},t.storage="undefined"!=typeof chrome&&void 0!==chrome.storage?chrome.storage.local:function localstorage(){try{return window.localStorage}catch(e){}}(),t.colors=["lightseagreen","forestgreen","goldenrod","dodgerblue","darkorchid","crimson"],t.formatters.j=function(e){try{return JSON.stringify(e)}catch(e){return"[UnexpectedJSONParseError]: "+e.message}},t.enable(load())},function(e,t){var r=1e3,n=60*r,i=60*n,o=24*i,s=365.25*o;function plural(e,t,r){if(!(e<t))return e<1.5*t?Math.floor(e/t)+" "+r:Math.ceil(e/t)+" "+r+"s"}e.exports=function(e,t){t=t||{};var a=typeof e;if("string"===a&&e.length>0)return function parse(e){if((e=String(e)).length>100)return;var t=/^((?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|years?|yrs?|y)?$/i.exec(e);if(!t)return;var a=parseFloat(t[1]);switch((t[2]||"ms").toLowerCase()){case"years":case"year":case"yrs":case"yr":case"y":return a*s;case"days":case"day":case"d":return a*o;case"hours":case"hour":case"hrs":case"hr":case"h":return a*i;case"minutes":case"minute":case"mins":case"min":case"m":return a*n;case"seconds":case"second":case"secs":case"sec":case"s":return a*r;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return a;default:return}}(e);if("number"===a&&!1===isNaN(e))return t.long?function fmtLong(e){return plural(e,o,"day")||plural(e,i,"hour")||plural(e,n,"minute")||plural(e,r,"second")||e+" ms"}(e):function fmtShort(e){if(e>=o)return Math.round(e/o)+"d";if(e>=i)return Math.round(e/i)+"h";if(e>=n)return Math.round(e/n)+"m";if(e>=r)return Math.round(e/r)+"s";return e+"ms"}(e);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(e))}},function(e,t,r){var n=r(51),i=r(1);(t=e.exports=r(361)).init=function init(e){e.inspectOpts={};for(var r=Object.keys(t.inspectOpts),n=0;n<r.length;n++)e.inspectOpts[r[n]]=t.inspectOpts[r[n]]},t.log=function log(){return s.write(i.format.apply(i,arguments)+"\n")},t.formatArgs=function formatArgs(e){var r=this.namespace;if(this.useColors){var n=this.color,i="  [3"+n+";1m"+r+" [0m";e[0]=i+e[0].split("\n").join("\n"+i),e.push("[3"+n+"m+"+t.humanize(this.diff)+"[0m")}else e[0]=(new Date).toUTCString()+" "+r+" "+e[0]},t.save=function save(e){null==e?delete process.env.DEBUG:process.env.DEBUG=e},t.load=load,t.useColors=function useColors(){return"colors"in t.inspectOpts?Boolean(t.inspectOpts.colors):n.isatty(o)},t.colors=[6,2,3,4,5,1],t.inspectOpts=Object.keys(process.env).filter(function(e){return/^debug_/i.test(e)}).reduce(function(e,t){var r=t.substring(6).toLowerCase().replace(/_([a-z])/g,function(e,t){return t.toUpperCase()}),n=process.env[t];return n=!!/^(yes|on|true|enabled)$/i.test(n)||!/^(no|off|false|disabled)$/i.test(n)&&("null"===n?null:Number(n)),e[r]=n,e},{});var o=parseInt(process.env.DEBUG_FD,10)||2;1!==o&&2!==o&&i.deprecate(function(){},"except for stderr(2) and stdout(1), any other usage of DEBUG_FD is deprecated. Override debug.log if you want to use a different log function (https://git.io/debug_fd)")();var s=1===o?process.stdout:2===o?process.stderr:function createWritableStdioStream(e){var t;switch(process.binding("tty_wrap").guessHandleType(e)){case"TTY":(t=new n.WriteStream(e))._type="tty",t._handle&&t._handle.unref&&t._handle.unref();break;case"FILE":var i=r(11);(t=new i.SyncWriteStream(e,{autoClose:!1}))._type="fs";break;case"PIPE":case"TCP":var o=r(47);(t=new o.Socket({fd:e,readable:!1,writable:!0})).readable=!1,t.read=null,t._type="pipe",t._handle&&t._handle.unref&&t._handle.unref();break;default:throw new Error("Implement me. Unknown stream file type!")}return t.fd=e,t._isStdio=!0,t}(o);function load(){return process.env.DEBUG}t.formatters.o=function(e){return this.inspectOpts.colors=this.useColors,i.inspect(e,this.inspectOpts).split("\n").map(function(e){return e.trim()}).join(" ")},t.formatters.O=function(e){return this.inspectOpts.colors=this.useColors,i.inspect(e,this.inspectOpts)},t.enable(load())},function(e,t,r){"use strict";var n=r(123),i=r(868),o=r(95),s=r(214),a=r(94),c=r(212),u=r(213),l=r(5).EventEmitter;function SessionError(e,t,r){Error.call(this),Error.captureStackTrace(this,this.constructor),this.message=e,this.condition=t,this.description=e,this.session=r}r(1).inherits(SessionError,Error);var p=function(e){this.capacity=e,this.size=0,this.head=0,this.tail=0,this.entries=[]};function write_dispositions(e){var t,r,i,o,a;for(o=0;o<e.length;o++)a=e[o],void 0===t&&(t=a,r=a,i=a.id),s.are_outcomes_equivalent(r.state,a.state)&&r.settled===a.settled&&i===a.id?(r.id!==a.id&&(r=a),i++):(t.link.session.output(n.disposition({role:t.link.is_receiver(),first:t.id,last:r.id,state:t.state,settled:t.settled})),t=a,r=a,i=a.id);void 0!==t&&void 0!==r&&t.link.session.output(n.disposition({role:t.link.is_receiver(),first:t.id,last:r.id,state:t.state,settled:t.settled}))}p.prototype.available=function(){return this.capacity-this.size},p.prototype.push=function(e){if(!(this.size<this.capacity))throw Error("circular buffer overflow: head="+this.head+" tail="+this.tail+" size="+this.size+" capacity="+this.capacity);this.entries[this.tail]=e,this.tail=(this.tail+1)%this.capacity,this.size++},p.prototype.pop_if=function(e){for(var t=0;this.size&&e(this.entries[this.head]);)this.entries[this.head]=void 0,this.head=(this.head+1)%this.capacity,this.size--,t++;return t},p.prototype.by_id=function(e){if(this.size>0){var t=e-this.entries[this.head].id;if(t<this.size)return this.entries[(this.head+t)%this.capacity]}},p.prototype.get_head=function(){return this.size>0?this.entries[this.head]:void 0},p.prototype.get_tail=function(){return this.size>0?this.entries[(this.head+this.size-1)%this.capacity]:void 0};var d=function(e){this.deliveries=new p(2048),this.updated=[],this.pending_dispositions=[],this.next_delivery_id=0,this.next_pending_delivery=0,this.next_transfer_id=0,this.window=a.MAX_UINT,this.remote_next_transfer_id=void 0,this.remote_window=void 0,this.connection=e};d.prototype.available=function(){return this.deliveries.available()},d.prototype.compute_max_payload=function(e){return this.connection.max_frame_size?this.connection.max_frame_size-(50+e.length):void 0},d.prototype.send=function(e,t,r,n){var i=[],o=this.compute_max_payload(t);if(o&&r.length>o)for(var s=0;s<r.length;){var a=Math.min(s+o,r.length);i.push(r.slice(s,a)),s=a}else i.push(r);var c={id:this.next_delivery_id++,tag:t,link:e,data:i,format:n||0,sent:!1,settled:!1,state:void 0,remote_settled:!1,remote_state:void 0},u=this;return c.update=function(e,t){u.update(c,e,t)},this.deliveries.push(c),c},d.prototype.on_begin=function(e){this.remote_window=e.incoming_window},d.prototype.on_flow=function(e){this.remote_next_transfer_id=e.next_incoming_id,this.remote_window=e.incoming_window},d.prototype.on_disposition=function(e){for(var t=e.last?e.last:e.first,r=e.first;r<=t;r++){var n=this.deliveries.by_id(r);if(n&&!n.remote_settled){var i=!1;e.settled&&(n.remote_settled=e.settled,i=!0),e.state&&e.state!==n.remote_state&&(n.remote_state=s.unwrap_outcome(e.state),i=!0),i&&this.updated.push(n)}}},d.prototype.update=function(e,t,r){e&&(e.settled=t,void 0!==r&&(e.state=r),e.remote_settled||this.pending_dispositions.push(e),e.link.connection._register())},d.prototype.transfer_window=function(){return this.remote_window?this.remote_window-(this.next_transfer_id-this.remote_next_transfer_id):0},d.prototype.process=function(){for(var e;this.next_pending_delivery<this.next_delivery_id;){if(!(e=this.deliveries.by_id(this.next_pending_delivery))){console.error("ERROR: Next pending delivery not found: "+this.next_pending_delivery);break}if(!e.link.has_credit()){o.flow("[%s] Link has no credit",this.connection.options.id);break}if(!(this.transfer_window()>=e.data.length)){o.flow("[%s] Incoming window of peer preventing sending further transfers: remote_window=%d, remote_next_transfer_id=%d, next_transfer_id=%d",this.connection.options.id,this.remote_window,this.remote_next_transfer_id,this.next_transfer_id);break}this.window-=e.data.length;for(var t=0;t<e.data.length;t++){this.next_transfer_id++;var r=t+1<e.data.length,i=n.transfer({handle:e.link.local.handle,message_format:e.format,delivery_id:e.id,delivery_tag:e.tag,settled:e.settled,more:r});e.link.session.output(i,e.data[t])}e.link.credit--,e.link.delivery_count++,this.next_pending_delivery++}for(t=0;t<this.updated.length;t++)(e=this.updated[t]).remote_state&&e.remote_state.constructor.composite_type&&e.link.dispatch(e.remote_state.constructor.composite_type,e.link._context({delivery:e})),e.remote_settled&&e.link.dispatch("settled",e.link._context({delivery:e}));this.updated=[],this.pending_dispositions.length&&(write_dispositions(this.pending_dispositions),this.pending_dispositions=[]),this.deliveries.pop_if(function(e){return e.settled&&e.remote_settled})};var h=function(){this.deliveries=new p(2048),this.updated=[],this.next_transfer_id=0,this.next_delivery_id=void 0,Object.defineProperty(this,"window",{get:function(){return this.deliveries.available()}}),this.remote_next_transfer_id=void 0,this.remote_window=void 0,this.max_transfer_id=this.next_transfer_id+this.window};h.prototype.update=function(e,t,r){e&&(e.settled=t,void 0!==r&&(e.state=r),e.remote_settled||this.updated.push(e),e.link.connection._register())},h.prototype.on_transfer=function(e,t){if(this.next_transfer_id++,!t.is_remote_open())throw Error("transfer after detach");var r,n;void 0===this.next_delivery_id&&(this.next_delivery_id=e.performative.delivery_id);var i=this.deliveries.get_tail();if(i&&i.incomplete){if(c.is_defined(e.performative.delivery_id)&&this.next_delivery_id!==e.performative.delivery_id)throw Error("frame sequence error: delivery "+this.next_delivery_id+" not complete, got "+e.performative.delivery_id);r=i,n=Buffer.concat([r.data,e.payload],r.data.length+e.payload.length)}else{if(this.next_delivery_id!==e.performative.delivery_id)throw Error("frame sequence error: expected "+this.next_delivery_id+", got "+e.performative.delivery_id);r={id:e.performative.delivery_id,tag:e.performative.delivery_tag,format:e.performative.message_format,link:t,settled:!1,state:void 0,remote_settled:void 0!==e.performative.settled&&e.performative.settled,remote_state:e.performative.state};var o=this;r.update=function(e,n){var i=e;void 0===i&&(i=1!==t.local.attach.rcv_settle_mode),o.update(r,i,n)},r.accept=function(){this.update(void 0,s.accepted().described())},r.release=function(e){e?this.update(void 0,s.modified(e).described()):this.update(void 0,s.released().described())},r.reject=function(e){this.update(!0,s.rejected({error:e}).described())},r.modified=function(e){this.update(!0,s.modified(e).described())},this.deliveries.push(r),n=e.payload}if(r.incomplete=e.performative.more,r.incomplete)r.data=n;else{t.credit--,t.delivery_count++,this.next_delivery_id++;var a=0===r.format?{message:s.decode(n),delivery:r}:{message:n,delivery:r,format:r.format};t.dispatch("message",t._context(a))}},h.prototype.process=function(e){this.updated.length>0&&(write_dispositions(this.updated),this.updated=[]),this.deliveries.pop_if(function(e){return e.settled}),this.max_transfer_id-this.next_transfer_id<this.window/2&&e._write_flow()},h.prototype.on_begin=function(e){this.remote_window=e.outgoing_window,this.remote_next_transfer_id=e.next_outgoing_id},h.prototype.on_flow=function(e){this.remote_next_transfer_id=e.next_outgoing_id,this.remote_window=e.outgoing_window},h.prototype.on_disposition=function(e){for(var t=e.last?e.last:e.first,r=e.first;r<=t;r++){var n=this.deliveries.by_id(r);n&&!n.remote_settled&&e.settled&&(n.remote_settled=e.settled,n.link.dispatch("settled",n.link._context({delivery:n})))}};var f=function(e,t){this.connection=e,this.outgoing=new d(e),this.incoming=new h,this.state=new u,this.local={channel:t,handles:{}},this.local.begin=n.begin({next_outgoing_id:this.outgoing.next_transfer_id,incoming_window:this.incoming.window,outgoing_window:this.outgoing.window}),this.local.end=n.end(),this.remote={handles:{}},this.links={},this.options={},Object.defineProperty(this,"error",{get:function(){return this.remote.end?this.remote.end.error:void 0}})};function attach(e,t,r,n){var i=Object.create(n||{});"string"==typeof t?i[r]=t:t&&function merge(e,t){for(var r in t)"properties"===r&&e.properties?merge(e.properties,t.properties):e[r]=t[r]}(i,t),i.name||(i.name=c.generate_uuid());var o=e(i.name,i);for(var s in{source:0,target:0})i[s]&&("string"==typeof i[s]&&(i[s]={address:i[s]}),o["set_"+s](i[s]));return o.is_sender()&&void 0===i.source&&(i.source=o.set_source({})),o.is_receiver()&&void 0===i.target&&(i.target=o.set_target({})),o.attach(),o}(f.prototype=Object.create(l.prototype)).constructor=f,f.prototype._disconnect=function(){for(var e in this.state.disconnected(),this.links)this.links[e]._disconnect();this.state.was_open||this.remove()},f.prototype._reconnect=function(){for(var e in this.state.reconnect(),this.outgoing=new d(this.connection),this.incoming=new h,this.remote={handles:{}},this.links)this.links[e]._reconnect()},f.prototype.dispatch=function(e){return o.events("[%s] Session got event: %s",this.connection.options.id,e),this.listeners(e).length?(l.prototype.emit.apply(this,arguments),!0):this.connection.dispatch.apply(this.connection,arguments)},f.prototype.output=function(e,t){this.connection._write_frame(this.local.channel,e,t)},f.prototype.create_sender=function(e,t){return this.create_link(e,i.Sender,t)},f.prototype.create_receiver=function(e,t){return this.create_link(e,i.Receiver,t)},f.prototype.get_option=function(e,t){return void 0!==this.options[e]?this.options[e]:this.connection.get_option(e,t)},f.prototype.attach_sender=function(e){return attach(this.create_sender.bind(this),e,"target",this.get_option("sender_options",{}))},f.prototype.open_sender=f.prototype.attach_sender,f.prototype.attach_receiver=function(e){return attach(this.create_receiver.bind(this),e,"source",this.get_option("receiver_options",{}))},f.prototype.open_receiver=f.prototype.attach_receiver,f.prototype.find_sender=function(e){return this.find_link(c.sender_filter(e))},f.prototype.find_receiver=function(e){return this.find_link(c.receiver_filter(e))},f.prototype.find_link=function(e){for(var t in this.links){var r=this.links[t];if(e(r))return r}},f.prototype.each_receiver=function(e,t){this.each_link(c.receiver_filter(t))},f.prototype.each_sender=function(e,t){this.each_link(c.sender_filter(t))},f.prototype.each_link=function(e,t){for(var r in this.links){var n=this.links[r];(void 0===t||t(n))&&e(n)}},f.prototype.create_link=function(e,t,r){for(var n=0;this.local.handles[n];)n++;var i=new t(this,e,n,r);return this.links[e]=i,this.local.handles[n]=i,i},f.prototype.begin=function(){this.state.open()&&this.connection._register()},f.prototype.open=f.prototype.begin,f.prototype.end=function(e){e&&(this.local.end.error=e),this.state.close()&&this.connection._register()},f.prototype.close=f.prototype.end,f.prototype.is_open=function(){return this.connection.is_open()&&this.state.is_open()},f.prototype.is_remote_open=function(){return this.connection.is_remote_open()&&this.state.remote_open},f.prototype.is_itself_closed=function(){return this.state.is_closed()},f.prototype.is_closed=function(){return this.connection.is_closed()||this.is_itself_closed()},f.prototype._process=function(){do{for(var e in this.state.need_open()&&this.output(this.local.begin),this.outgoing.process(),this.incoming.process(this),this.links)this.links[e]._process();this.state.need_close()&&this.output(this.local.end)}while(!this.state.has_settled())},f.prototype.send=function(e,t,r,n){var i=this.outgoing.send(e,t,r,n);return this.connection._register(),i},f.prototype._write_flow=function(e){var t={next_incoming_id:this.incoming.next_transfer_id,incoming_window:this.incoming.window,next_outgoing_id:this.outgoing.next_transfer_id,outgoing_window:this.outgoing.window};this.incoming.max_transfer_id=t.next_incoming_id+t.incoming_window,e&&(e._get_drain()&&(t.drain=!0),t.delivery_count=e.delivery_count,t.handle=e.local.handle,t.link_credit=e.credit),this.output(n.flow(t))},f.prototype.on_begin=function(e){if(!this.state.remote_opened())throw Error("Begin already received");this.remote.channel||(this.remote.channel=e.channel),this.remote.begin=e.performative,this.outgoing.on_begin(e.performative),this.incoming.on_begin(e.performative),this.open(),this.dispatch("session_open",this._context())},f.prototype.on_end=function(e){if(!this.state.remote_closed())throw Error("End already received");this.remote.end=e.performative;var t=this.remote.end.error;if(t){var r=this.dispatch("session_error",this._context());(r=this.dispatch("session_close",this._context())||r)||l.prototype.emit.call(this.connection.container,"error",new SessionError(t.description,t.condition,this))}else this.dispatch("session_close",this._context());var n=this,i=this.state.mark();process.nextTick(function(){n.state.marker===i&&(n.close(),process.nextTick(function(){n.remove()}))})},f.prototype.on_attach=function(e){var t=e.performative.name,r=this.links[t];r||(r=e.performative.role?this.create_sender(t):this.create_receiver(t)),this.remote.handles[e.performative.handle]=r,r.on_attach(e),r.remote.attach=e.performative},f.prototype.on_disposition=function(e){e.performative.role?(o.events("[%s] Received disposition for outgoing transfers",this.connection.options.id),this.outgoing.on_disposition(e.performative)):(o.events("[%s] Received disposition for incoming transfers",this.connection.options.id),this.incoming.on_disposition(e.performative)),this.connection._register()},f.prototype.on_flow=function(e){this.outgoing.on_flow(e.performative),this.incoming.on_flow(e.performative),c.is_defined(e.performative.handle)&&this._get_link(e).on_flow(e),this.connection._register()},f.prototype._context=function(e){var t=e||{};return t.session=this,this.connection._context(t)},f.prototype._get_link=function(e){var t=e.performative.handle,r=this.remote.handles[t];if(!r)throw Error("Invalid handle "+t);return r},f.prototype.on_detach=function(e){this._get_link(e).on_detach(e)},f.prototype.remove_link=function(e){delete this.remote.handles[e.remote.handle],delete this.local.handles[e.local.handle],delete this.links[e.name]},f.prototype.remove=function(){this.connection.remove_session(this)},f.prototype.on_transfer=function(e){this.incoming.on_transfer(e,this._get_link(e))},e.exports=f},function(e,t,r){"use strict";var n=r(123),i=r(95),o=r(214),s=r(869),a=r(213),c=function(e){this.window=e};function auto_settle(e){e.delivery.settled=!0}function auto_accept(e){e.delivery.update(void 0,o.accepted().described())}function LinkError(e,t,r){Error.call(this),Error.captureStackTrace(this,this.constructor),this.message=e,this.condition=t,this.description=e,this.link=r}c.prototype.update=function(e){var t=this.window-e.receiver.credit;t>=this.window/4&&e.receiver.flow(t)},r(1).inherits(LinkError,Error);var u=r(5).EventEmitter,l=Object.create(u.prototype);function is_internal(e){switch(e){case"name":case"handle":case"role":case"initial_delivery_count":return!0;default:return!1}}l.dispatch=function(e){return i.events("[%s] Link got event: %s",this.connection.options.id,e),u.prototype.emit.apply(this.observers,arguments),this.listeners(e).length?(u.prototype.emit.apply(this,arguments),!0):this.session.dispatch.apply(this.session,arguments)},l.set_source=function(e){this.local.attach.source=s.source(e).described()},l.set_target=function(e){this.local.attach.target=s.target(e).described()},l.attach=function(){this.state.open()&&this.connection._register()},l.open=l.attach,l.detach=function(){this.local.detach.closed=!1,this.state.close()&&this.connection._register()},l.close=function(e){e&&(this.local.detach.error=e),this.local.detach.closed=!0,this.state.close()&&this.connection._register()},l.remove=function(){this.session.remove_link(this)},l.is_open=function(){return this.session.is_open()&&this.state.is_open()},l.is_remote_open=function(){return this.session.is_remote_open()&&this.state.remote_open},l.is_itself_closed=function(){return this.state.is_closed()},l.is_closed=function(){return this.session.is_closed()||this.is_itself_closed()},l._process=function(){do{this.state.need_open()&&this.session.output(this.local.attach),this.issue_flow&&this.state.local_open&&(this.session._write_flow(this),this.issue_flow=!1),this.state.need_close()&&this.session.output(this.local.detach)}while(!this.state.has_settled())},l.on_attach=function(e){if(!this.state.remote_opened())throw Error("Attach already received");this.remote.handle||(this.remote.handle=e.handle),e.performative.source=s.unwrap(e.performative.source),e.performative.target=s.unwrap(e.performative.target),this.remote.attach=e.performative,this.open(),this.dispatch(this.is_receiver()?"receiver_open":"sender_open",this._context())},l.prefix_event=function(e){return(this.local.attach.role?"receiver_":"sender_")+e},l.on_detach=function(e){if(!this.state.remote_closed())throw Error("Detach already received");this.remote.detach=e.performative;var t=this.remote.detach.error;if(t){var r=this.dispatch(this.prefix_event("error"),this._context());(r=this.dispatch(this.prefix_event("close"),this._context())||r)||u.prototype.emit.call(this.connection.container,"error",new LinkError(t.description,t.condition,this))}else this.dispatch(this.prefix_event("close"),this._context());var n=this,i=this.state.mark();process.nextTick(function(){n.state.marker===i&&(n.close(),process.nextTick(function(){n.remove()}))})};var p=["snd_settle_mode","rcv_settle_mode","source","target","max_message_size","offered_capabilities","desired_capabilities","properties"];function remote_property_shortcut(e){return function(){return this.remote.attach?this.remote.attach[e]:void 0}}l.init=function(e,t,r,i,o){for(var s in this.session=e,this.connection=e.connection,this.name=t,this.options=void 0===i?{}:i,this.state=new a,this.issue_flow=!1,this.local={handle:r},this.local.attach=n.attach({handle:r,name:t,role:o}),this.local.attach)is_internal(s)||void 0===this.options[s]||(this.local.attach[s]=this.options[s]);for(var c in this.local.detach=n.detach({handle:r,closed:!0}),this.remote={handle:void 0},this.delivery_count=0,this.credit=0,this.observers=new u,p){var l=p[c];Object.defineProperty(this,l,{get:remote_property_shortcut(l)})}Object.defineProperty(this,"error",{get:function(){return this.remote.detach?this.remote.detach.error:void 0}})},l._disconnect=function(){this.state.disconnected(),this.state.was_open||this.remove()},l._reconnect=function(){this.state.reconnect(),this.remote={handle:void 0},this.delivery_count=0,this.credit=0},l.has_credit=function(){return this.credit>0},l.is_receiver=function(){return this.local.attach.role},l.is_sender=function(){return!this.is_receiver()},l._context=function(e){var t=e||{};return this.is_receiver()?t.receiver=this:t.sender=this,this.session._context(t)},l.get_option=function(e,t){return void 0!==this.options[e]?this.options[e]:this.session.get_option(e,t)};var d=function(e,t,r,n){this.init(e,t,r,n,!1),this._draining=!1,this._drained=!1,this.local.attach.initial_delivery_count=0,this.tag=0,this.get_option("autosettle",!0)&&this.observers.on("settled",auto_settle);var i=this;this.get_option("treat_modified_as_released",!0)&&this.observers.on("modified",function(e){i.dispatch("released",e)})};(d.prototype=Object.create(l)).constructor=d,d.prototype._get_drain=function(){if(this._draining&&this._drained&&this.credit){for(;this.credit;)++this.delivery_count,--this.credit;return!0}return!1},d.prototype.set_drained=function(e){this._drained=e,this._draining&&this._drained&&(this.issue_flow=!0)},d.prototype.next_tag=function(){return new Buffer(new String(this.tag++))},d.prototype.sendable=function(){return Boolean(this.credit&&this.session.outgoing.available())},d.prototype.on_flow=function(e){var t=e.performative;this.credit=t.delivery_count+t.link_credit-this.delivery_count,this._draining=t.drain,this._drained=this.credit>0,this.is_open()&&(this.dispatch("sender_flow",this._context()),this._draining&&this.dispatch("sender_draining",this._context()),this.sendable()&&this.dispatch("sendable",this._context()))},d.prototype.on_transfer=function(){throw Error("got transfer on sending link")},d.prototype.send=function(e,t,r){var n=void 0===r?o.encode(e):e,i=this.session.send(this,t||this.next_tag(),n,r);return 1===this.local.attach.snd_settle_mode&&(i.settled=!0),i};var h=function(e,t,r,n){this.init(e,t,r,n,!0),this.drain=!1,this.set_credit_window(this.get_option("credit_window",1e3)),this.get_option("autoaccept",!0)&&this.observers.on("message",auto_accept)};(h.prototype=Object.create(l)).constructor=h,h.prototype.on_flow=function(e){this.dispatch("receiver_flow",this._context()),e.performative.drain&&(e.performative.link_credit>0?console.error("ERROR: received flow with drain set, but non zero credit"):this.dispatch("receiver_drained",this._context()))},h.prototype.flow=function(e){e>0&&(this.credit+=e,this.issue_flow=!0,this.connection._register())},h.prototype.add_credit=h.prototype.flow,h.prototype._get_drain=function(){return this.drain},h.prototype.set_credit_window=function(e){if(e>0){var t=new c(e),r=t.update.bind(t);this.observers.on("message",r),this.observers.on("receiver_open",r)}},e.exports={Sender:d,Receiver:h}},function(e,t,r){"use strict";var n=r(94),i={},o={};function define_terminus(e){var t=n.define_composite(e);i[e.name]=t.create,o[Number(t.descriptor.numeric).toString(10)]=t,o[t.descriptor.symbolic]=t}i.unwrap=function(e){if(e&&e.descriptor){var t=o[e.descriptor.value];if(t)return new t(e.value);console.warn("Unknown terminus: "+e.descriptor)}return null},define_terminus({name:"source",code:40,fields:[{name:"address",type:"string"},{name:"durable",type:"uint",default_value:0},{name:"expiry_policy",type:"symbol",default_value:"session-end"},{name:"timeout",type:"uint",default_value:0},{name:"dynamic",type:"boolean",default_value:!1},{name:"dynamic_node_properties",type:"symbolic_map"},{name:"distribution_mode",type:"symbol"},{name:"filter",type:"symbolic_map"},{name:"default_outcome",type:"*"},{name:"outcomes",type:"symbol",multiple:!0},{name:"capabilities",type:"symbol",multiple:!0}]}),define_terminus({name:"target",code:41,fields:[{name:"address",type:"string"},{name:"durable",type:"uint",default_value:0},{name:"expiry_policy",type:"symbol",default_value:"session-end"},{name:"timeout",type:"uint",default_value:0},{name:"dynamic",type:"boolean",default_value:!1},{name:"dynamic_node_properties",type:"symbolic_map"},{name:"capabilities",type:"symbol",multiple:!0}]}),e.exports=i},function(e,t,r){"use strict";var n=r(7),i={counter:1,next:function(){return this.counter++}},o=function(e,t){var r=n.parse(t);this.connection=e.connect({host:r.hostname,port:r.port}),this.connection.on("message",this._response.bind(this)),this.connection.on("receiver_open",this._ready.bind(this)),this.sender=this.connection.attach_sender(r.path.substr(1)),this.receiver=this.connection.attach_receiver({source:{dynamic:!0}}),this.id_generator=i,this.pending=[],this.outstanding={}};o.prototype._request=function(e,t,r,n){var i={};i.subject=t,i.body=r,i.message_id=e,i.reply_to=this.receiver.remote.attach.source.address,this.outstanding[e]=n,this.sender.send(i)},o.prototype._response=function(e){var t=e.message.correlation_id,r=this.outstanding[t];r?"ok"===e.message.subject?r(e.message.body):r(void 0,{name:e.message.subject,description:e.message.body}):console.error("no request pending for "+t+", ignoring response")},o.prototype._ready=function(){this._process_pending()},o.prototype._process_pending=function(){for(var e=0;e<this.pending.length;e++){var t=this.pending[e];this._request(t.id,t.name,t.args,t.callback)}this.pending=[]},o.prototype.call=function(e,t,r){var n=this.id_generator.next();this.receiver.is_open()&&0===this.pending.length?this._request(n,e,t,r):this.pending.push({name:e,args:t,callback:r,id:n})},o.prototype.close=function(){this.receiver.close(),this.sender.close(),this.connection.close()},o.prototype.define=function(e){this[e]=function(t,r){this.call(e,t,r)}};var s=function(e,t){this.ttl=e,this.purged=t,this.entries={},this.timeout=void 0};s.prototype.clear=function(){this.timeout&&clearTimeout(this.timeout),this.entries={}},s.prototype.put=function(e,t){this.entries[e]={value:t,last_accessed:Date.now()},this.timeout||(this.timeout=setTimeout(this.purge.bind(this),this.ttl))},s.prototype.get=function(e){var t=this.entries[e];return t?(t.last_accessed=Date.now(),t.value):void 0},s.prototype.purge=function(){var e=Date.now(),t=[],r=0;for(var n in this.entries)e-this.entries[n].last_accessed>=this.ttl?t.push(n):r++;for(var i=0;i<t.length;i++){var o=this.entries[t[i]];delete this.entries[t[i]],this.purged(o.value)}r&&!this.timeout&&(this.timeout=setTimeout(this.purge.bind(this),this.ttl))};var a=function(e,t){this.factory=e,this.cache=new s(t,function(e){e.close()})};a.prototype.clear=function(){this.cache.clear()},a.prototype.get=function(e){var t=this.cache.get(e);return void 0===t&&(t=this.factory(e),this.cache.put(e,t)),t};var c=function(e,t,r){this.options=r||{};var i=n.parse(t);this.connection=e.connect({host:i.hostname,port:i.port}),this.connection.on("connection_open",this._connection_open.bind(this)),this.connection.on("message",this._request.bind(this)),this.receiver=this.connection.attach_receiver(i.path.substr(1)),this.callbacks={},this._send=void 0,this._clear=void 0};c.prototype._connection_open=function(){if(function match(e,t){return!!t&&(Array.isArray(t)?t.indexOf(e)>-1:e===t)}("ANONYMOUS-RELAY",this.connection.remote.open.offered_capabilities)){var e=this.connection.attach_sender({target:{}});this._send=function(t){e.send(t)}}else{var t=new a(this.connection.attach_sender.bind(this.connection),this.options.cache_ttl||6e4);this._send=function(e){var r=t.get(e.to);r&&r.send(e)},this._clear=function(){t.clear()}}},c.prototype._respond=function(e){var t=this;return function(r,n){n?(e.subject=n.name||"error",e.body=n.description||n):(e.subject="ok",e.body=r),t._send(e)}},c.prototype._request=function(e){var t=e.message,r={};r.to=t.reply_to,r.correlation_id=t.message_id;var n=this.callbacks[t.subject];n?n(t.body,this._respond(r)):(r.subject="bad-method",r.body="Unrecognised method "+t.subject,this._send(r))},c.prototype.bind_sync=function(e,t){this.callbacks[t||e.name]=function(t,r){r(e(t))}},c.prototype.bind=function(e,t){this.callbacks[t||e.name]=e},c.prototype.close=function(){this._clear&&this._clear(),this.receiver.close(),this.connection.close()},e.exports={server:function(e,t,r){return new c(e,t,r)},client:function(e,t){return new o(e,t)}}},function(e,t,r){"use strict";var n,i,o,s;!function(e){e.message="message",e.receiverOpen="receiver_open",e.receiverDrained="receiver_drained",e.receiverFlow="receiver_flow",e.receiverError="receiver_error",e.receiverClose="receiver_close",e.settled="settled"}(n||(n={})),function(e){e.sendable="sendable",e.senderOpen="sender_open",e.senderDraining="sender_draining",e.senderFlow="sender_flow",e.senderError="sender_error",e.senderClose="sender_close",e.accepted="accepted",e.released="released",e.rejected="rejected",e.modified="modified",e.settled="settled"}(i||(i={})),function(e){e.sessionOpen="session_open",e.sessionError="session_error",e.sessionClose="session_close",e.settled="settled"}(o||(o={})),function(e){e.connectionOpen="connection_open",e.connectionClose="connection_close",e.connectionError="connection_error",e.protocolError="protocol_error",e.error="error",e.disconnected="disconnected",e.settled="settled"}(s||(s={})),e.exports={ReceiverEvents:n,SenderEvents:i,SessionEvents:o,ConnectionEvents:s}},function(e,t,r){"use strict";function nulltransform(e){return e}function from_arraybuffer(e){return e instanceof ArrayBuffer?new Buffer(new Uint8Array(e)):new Buffer(e)}function to_typedarray(e){return new Uint8Array(e)}function wrap(e){var t=nulltransform,r=nulltransform;return e.binaryType&&(e.binaryType="arraybuffer",t=from_arraybuffer,r=to_typedarray),{end:function(){e.close()},write:function(t){try{e.send(r(t),{binary:!0})}catch(t){e.onerror(t)}},on:function(r,n){"data"===r?e.onmessage=function(e){n(t(e.data))}:"end"===r?e.onclose=n:"error"===r?e.onerror=n:console.error("ERROR: Attempt to set unrecognised handler on websocket wrapper: "+r)},get_id_string:function(){return e.url}}}e.exports={connect:function(e){return function(t,r,n){return function(){return{connect:function(i,o,s,a){var c=new e(t,r,n);return c.onopen=a,wrap(c)}}}}},wrap:wrap}},function(e,t,r){"use strict";var n=r(94);e.exports={selector:function(e){return{"jms-selector":n.wrap_described(e,77567109365764)}}}},function(e,t,r){"use strict";var n,i=this&&this.__extends||(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])},function(e,t){function __(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(__.prototype=t.prototype,new __)});Object.defineProperty(t,"__esModule",{value:!0});var o=r(78),s=r(35),a=r(124),c=r(5),u=r(159),l=r(4),p=r(211),d=r(215),h=r(160),f=u("azure-iot-amqp-base:CBS"),m=function(){return function PutTokenStatus(){this.outstandingPutTokens=[],this.numberOfSecondsToTimeout=120,this.putTokenTimeOutExaminationInterval=1e4}}(),g=function(e){function ClaimsBasedSecurityAgent(t){var r=e.call(this)||this;return r._putToken=new m,r._rheaSession=t,r._senderLink=new d.SenderLink(ClaimsBasedSecurityAgent._putTokenSendingEndpoint,null,r._rheaSession),r._receiverLink=new h.ReceiverLink(ClaimsBasedSecurityAgent._putTokenReceivingEndpoint,null,r._rheaSession),r._putTokenQueue=[],r._fsm=new o.Fsm({initialState:"detached",states:{detached:{_onEnter:function(e,t){for(var n=r._putTokenQueue.shift();n;)n.callback(t),n=r._putTokenQueue.shift();e&&e(t)},attach:function(e){r._fsm.transition("attaching",e)},detach:function(e){e&&e()},forceDetach:function(){},putToken:function(e,t,n){r._putTokenQueue.push({audience:e,token:t,callback:n}),r._fsm.transition("attaching")}},attaching:{_onEnter:function(e){r._senderLink.attach(function(t){t?r._fsm.transition("detaching",e,t):r._receiverLink.attach(function(t){t?r._fsm.transition("detaching",e,t):(r._receiverLink.on("message",function(e){r._receiverLink.accept(e);for(var t=0;t<r._putToken.outstandingPutTokens.length;t++)if(e.correlation_id===r._putToken.outstandingPutTokens[t].correlationId){var n=r._putToken.outstandingPutTokens[t];if(r._putToken.outstandingPutTokens.splice(t,1),0===r._putToken.outstandingPutTokens.length&&clearTimeout(r._putToken.timeoutTimer),n.putTokenCallback){var i=null;200!==e.application_properties["status-code"]&&(i=new l.errors.UnauthorizedError(e.application_properties["status-description"])),n.putTokenCallback(i)}break}}),r._fsm.transition("attached",e))})})},detach:function(e,t){return r._fsm.transition("detaching",e,t)},forceDetach:function(){r._senderLink&&r._senderLink.forceDetach(),r._receiverLink&&r._receiverLink.forceDetach(),r._fsm.transition("detached")},putToken:function(e,t,n){r._putTokenQueue.push({audience:e,token:t,callback:n})}},attached:{_onEnter:function(e){e&&e();for(var t=r._putTokenQueue.shift();t;)r._fsm.handle("putToken",t.audience,t.token,t.callback),t=r._putTokenQueue.shift()},attach:function(e){return e()},detach:function(e,t){f("while attached - detach for CBS links "+r._receiverLink+" "+r._senderLink),r._fsm.transition("detaching",e,t)},forceDetach:function(){f("while attached - force detach for CBS links "+r._receiverLink+" "+r._senderLink),r._receiverLink.forceDetach(),r._senderLink.forceDetach(),r._fsm.transition("detached")},putToken:function(e,t,n){var i=new p.AmqpMessage;i.application_properties={operation:"put-token",type:"servicebus.windows.net:sastoken",name:e},i.body=t,i.to="$cbs",i.message_id=s.v4(),i.reply_to="cbs";var o={putTokenCallback:n,expirationTime:Math.round(Date.now()/1e3)+r._putToken.numberOfSecondsToTimeout,correlationId:i.message_id};r._putToken.outstandingPutTokens.push(o),1===r._putToken.outstandingPutTokens.length&&(r._putToken.timeoutTimer=setTimeout(r._removeExpiredPutTokens.bind(r),r._putToken.putTokenTimeOutExaminationInterval)),r._senderLink.send(i,function(e){if(e)for(var t=r._putToken.outstandingPutTokens.length-1;t>=0;t--)if(r._putToken.outstandingPutTokens[t].correlationId===i.message_id){var n=r._putToken.outstandingPutTokens[t];r._putToken.outstandingPutTokens.splice(t,1),0===r._putToken.outstandingPutTokens.length&&clearTimeout(r._putToken.timeoutTimer),n.putTokenCallback(e);break}})}},detaching:{_onEnter:function(e,t){var n=[r._senderLink,r._receiverLink];a.each(n,function(e,t){e?(f("while detaching for link "),e.detach(t)):t()},function(){r._fsm.transition("detached",e,t)})},"*":function(e){return r._fsm.deferUntilTransition("detached")}}}}),r}return i(ClaimsBasedSecurityAgent,e),ClaimsBasedSecurityAgent.prototype.attach=function(e){this._fsm.handle("attach",e)},ClaimsBasedSecurityAgent.prototype.detach=function(e){this._fsm.handle("detach",e)},ClaimsBasedSecurityAgent.prototype.forceDetach=function(){this._fsm.handle("forceDetach")},ClaimsBasedSecurityAgent.prototype.putToken=function(e,t,r){if(!e)throw new ReferenceError("audience cannot be '"+e+"'");if(!t)throw new ReferenceError("token cannot be '"+t+"'");this._fsm.handle("putToken",e,t,r)},ClaimsBasedSecurityAgent.prototype._removeExpiredPutTokens=function(){for(var e=this,t=Math.round(Date.now()/1e3),r=[];this._putToken.outstandingPutTokens.length>0&&this._putToken.outstandingPutTokens[0].expirationTime<t;)r.push(this._putToken.outstandingPutTokens[0]),this._putToken.outstandingPutTokens.splice(0,1);r.forEach(function(t){t.putTokenCallback(new l.errors.TimeoutError("Put Token operation had no response within "+e._putToken.numberOfSecondsToTimeout))}),this._putToken.outstandingPutTokens.length>0&&(this._putToken.timeoutTimer=setTimeout(this._removeExpiredPutTokens.bind(this),this._putToken.putTokenTimeOutExaminationInterval))},ClaimsBasedSecurityAgent._putTokenSendingEndpoint="$cbs",ClaimsBasedSecurityAgent._putTokenReceivingEndpoint="$cbs",ClaimsBasedSecurityAgent}(c.EventEmitter);t.ClaimsBasedSecurityAgent=g},function(e,t,r){"use strict";function _typeof(e){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function _typeof(e){return typeof e}:function _typeof(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}t.log=function log(){var e;return"object"===("undefined"==typeof console?"undefined":_typeof(console))&&console.log&&(e=console).log.apply(e,arguments)},t.formatArgs=function formatArgs(t){if(t[0]=(this.useColors?"%c":"")+this.namespace+(this.useColors?" %c":" ")+t[0]+(this.useColors?"%c ":" ")+"+"+e.exports.humanize(this.diff),!this.useColors)return;var r="color: "+this.color;t.splice(1,0,r,"color: inherit");var n=0,i=0;t[0].replace(/%[a-zA-Z%]/g,function(e){"%%"!==e&&(n++,"%c"===e&&(i=n))}),t.splice(i,0,r)},t.save=function save(e){try{e?t.storage.setItem("debug",e):t.storage.removeItem("debug")}catch(e){}},t.load=function load(){var e;try{e=t.storage.getItem("debug")}catch(e){}!e&&"undefined"!=typeof process&&"env"in process&&(e=process.env.DEBUG);return e},t.useColors=function useColors(){if("undefined"!=typeof window&&window.process&&("renderer"===window.process.type||window.process.__nwjs))return!0;if("undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/))return!1;return"undefined"!=typeof document&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||"undefined"!=typeof window&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||"undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31||"undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/)},t.storage=function localstorage(){try{return localStorage}catch(e){}}(),t.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"],e.exports=r(364)(t),e.exports.formatters.j=function(e){try{return JSON.stringify(e)}catch(e){return"[UnexpectedJSONParseError]: "+e.message}}},function(e,t){var r=1e3,n=60*r,i=60*n,o=24*i,s=7*o,a=365.25*o;function plural(e,t,r,n){var i=t>=1.5*r;return Math.round(e/r)+" "+n+(i?"s":"")}e.exports=function(e,t){t=t||{};var c=typeof e;if("string"===c&&e.length>0)return function parse(e){if((e=String(e)).length>100)return;var t=/^((?:\d+)?\-?\d?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(e);if(!t)return;var c=parseFloat(t[1]);switch((t[2]||"ms").toLowerCase()){case"years":case"year":case"yrs":case"yr":case"y":return c*a;case"weeks":case"week":case"w":return c*s;case"days":case"day":case"d":return c*o;case"hours":case"hour":case"hrs":case"hr":case"h":return c*i;case"minutes":case"minute":case"mins":case"min":case"m":return c*n;case"seconds":case"second":case"secs":case"sec":case"s":return c*r;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return c;default:return}}(e);if("number"===c&&!1===isNaN(e))return t.long?function fmtLong(e){var t=Math.abs(e);if(t>=o)return plural(e,t,o,"day");if(t>=i)return plural(e,t,i,"hour");if(t>=n)return plural(e,t,n,"minute");if(t>=r)return plural(e,t,r,"second");return e+" ms"}(e):function fmtShort(e){var t=Math.abs(e);if(t>=o)return Math.round(e/o)+"d";if(t>=i)return Math.round(e/i)+"h";if(t>=n)return Math.round(e/n)+"m";if(t>=r)return Math.round(e/r)+"s";return e+"ms"}(e);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(e))}},function(e,t,r){"use strict";var n=r(51),i=r(1);t.init=function init(e){e.inspectOpts={};for(var r=Object.keys(t.inspectOpts),n=0;n<r.length;n++)e.inspectOpts[r[n]]=t.inspectOpts[r[n]]},t.log=function log(){return process.stderr.write(i.format.apply(i,arguments)+"\n")},t.formatArgs=function formatArgs(r){var n=this.namespace;if(this.useColors){var i=this.color,o="[3"+(i<8?i:"8;5;"+i),s="  ".concat(o,";1m").concat(n," [0m");r[0]=s+r[0].split("\n").join("\n"+s),r.push(o+"m+"+e.exports.humanize(this.diff)+"[0m")}else r[0]=function getDate(){if(t.inspectOpts.hideDate)return"";return(new Date).toISOString()+" "}()+n+" "+r[0]},t.save=function save(e){e?process.env.DEBUG=e:delete process.env.DEBUG},t.load=function load(){return process.env.DEBUG},t.useColors=function useColors(){return"colors"in t.inspectOpts?Boolean(t.inspectOpts.colors):n.isatty(process.stderr.fd)},t.colors=[6,2,3,4,5,1];try{var o=r(49);o&&(o.stderr||o).level>=2&&(t.colors=[20,21,26,27,32,33,38,39,40,41,42,43,44,45,56,57,62,63,68,69,74,75,76,77,78,79,80,81,92,93,98,99,112,113,128,129,134,135,148,149,160,161,162,163,164,165,166,167,168,169,170,171,172,173,178,179,184,185,196,197,198,199,200,201,202,203,204,205,206,207,208,209,214,215,220,221])}catch(e){}t.inspectOpts=Object.keys(process.env).filter(function(e){return/^debug_/i.test(e)}).reduce(function(e,t){var r=t.substring(6).toLowerCase().replace(/_([a-z])/g,function(e,t){return t.toUpperCase()}),n=process.env[t];return n=!!/^(yes|on|true|enabled)$/i.test(n)||!/^(no|off|false|disabled)$/i.test(n)&&("null"===n?null:Number(n)),e[r]=n,e},{}),e.exports=r(364)(t);var s=e.exports.formatters;s.o=function(e){return this.inspectOpts.colors=this.useColors,i.inspect(e,this.inspectOpts).replace(/\s*\n\s*/g," ")},s.O=function(e){return this.inspectOpts.colors=this.useColors,i.inspect(e,this.inspectOpts)}},function(e,t,r){(function(e){var r=200,n="__lodash_hash_undefined__",i=800,o=16,s=9007199254740991,a="[object Arguments]",c="[object AsyncFunction]",u="[object Function]",l="[object GeneratorFunction]",p="[object Null]",d="[object Object]",h="[object Proxy]",f="[object Undefined]",m=/^\[object .+?Constructor\]$/,g=/^(?:0|[1-9]\d*)$/,y={};y["[object Float32Array]"]=y["[object Float64Array]"]=y["[object Int8Array]"]=y["[object Int16Array]"]=y["[object Int32Array]"]=y["[object Uint8Array]"]=y["[object Uint8ClampedArray]"]=y["[object Uint16Array]"]=y["[object Uint32Array]"]=!0,y[a]=y["[object Array]"]=y["[object ArrayBuffer]"]=y["[object Boolean]"]=y["[object DataView]"]=y["[object Date]"]=y["[object Error]"]=y[u]=y["[object Map]"]=y["[object Number]"]=y[d]=y["[object RegExp]"]=y["[object Set]"]=y["[object String]"]=y["[object WeakMap]"]=!1;var v="object"==typeof global&&global&&global.Object===Object&&global,b="object"==typeof self&&self&&self.Object===Object&&self,_=v||b||Function("return this")(),w=t&&!t.nodeType&&t,E=w&&"object"==typeof e&&e&&!e.nodeType&&e,S=E&&E.exports===w,C=S&&v.process,x=function(){try{return C&&C.binding&&C.binding("util")}catch(e){}}(),k=x&&x.isTypedArray;function safeGet(e,t){return"__proto__"==t?void 0:e[t]}var R,T=Array.prototype,O=Function.prototype,I=Object.prototype,N=_["__core-js_shared__"],A=O.toString,P=I.hasOwnProperty,L=(R=/[^.]+$/.exec(N&&N.keys&&N.keys.IE_PROTO||""))?"Symbol(src)_1."+R:"",D=I.toString,M=A.call(Object),j=RegExp("^"+A.call(P).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),q=S?_.Buffer:void 0,F=_.Symbol,z=_.Uint8Array,U=q?q.allocUnsafe:void 0,B=function overArg(e,t){return function(r){return e(t(r))}}(Object.getPrototypeOf,Object),H=Object.create,$=I.propertyIsEnumerable,V=T.splice,G=F?F.toStringTag:void 0,W=function(){try{var e=getNative(Object,"defineProperty");return e({},"",{}),e}catch(e){}}(),J=q?q.isBuffer:void 0,X=Math.max,Y=Date.now,K=getNative(_,"Map"),Q=getNative(Object,"create"),Z=function(){function object(){}return function(e){if(!isObject(e))return{};if(H)return H(e);object.prototype=e;var t=new object;return object.prototype=void 0,t}}();function Hash(e){var t=-1,r=null==e?0:e.length;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}function ListCache(e){var t=-1,r=null==e?0:e.length;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}function MapCache(e){var t=-1,r=null==e?0:e.length;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}function Stack(e){var t=this.__data__=new ListCache(e);this.size=t.size}function arrayLikeKeys(e,t){var r=ne(e),n=!r&&re(e),i=!r&&!n&&ie(e),o=!r&&!n&&!i&&oe(e),s=r||n||i||o,a=s?function baseTimes(e,t){for(var r=-1,n=Array(e);++r<e;)n[r]=t(r);return n}(e.length,String):[],c=a.length;for(var u in e)!t&&!P.call(e,u)||s&&("length"==u||i&&("offset"==u||"parent"==u)||o&&("buffer"==u||"byteLength"==u||"byteOffset"==u)||isIndex(u,c))||a.push(u);return a}function assignMergeValue(e,t,r){(void 0===r||eq(e[t],r))&&(void 0!==r||t in e)||baseAssignValue(e,t,r)}function assignValue(e,t,r){var n=e[t];P.call(e,t)&&eq(n,r)&&(void 0!==r||t in e)||baseAssignValue(e,t,r)}function assocIndexOf(e,t){for(var r=e.length;r--;)if(eq(e[r][0],t))return r;return-1}function baseAssignValue(e,t,r){"__proto__"==t&&W?W(e,t,{configurable:!0,enumerable:!0,value:r,writable:!0}):e[t]=r}Hash.prototype.clear=function hashClear(){this.__data__=Q?Q(null):{},this.size=0},Hash.prototype.delete=function hashDelete(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t},Hash.prototype.get=function hashGet(e){var t=this.__data__;if(Q){var r=t[e];return r===n?void 0:r}return P.call(t,e)?t[e]:void 0},Hash.prototype.has=function hashHas(e){var t=this.__data__;return Q?void 0!==t[e]:P.call(t,e)},Hash.prototype.set=function hashSet(e,t){var r=this.__data__;return this.size+=this.has(e)?0:1,r[e]=Q&&void 0===t?n:t,this},ListCache.prototype.clear=function listCacheClear(){this.__data__=[],this.size=0},ListCache.prototype.delete=function listCacheDelete(e){var t=this.__data__,r=assocIndexOf(t,e);return!(r<0||(r==t.length-1?t.pop():V.call(t,r,1),--this.size,0))},ListCache.prototype.get=function listCacheGet(e){var t=this.__data__,r=assocIndexOf(t,e);return r<0?void 0:t[r][1]},ListCache.prototype.has=function listCacheHas(e){return assocIndexOf(this.__data__,e)>-1},ListCache.prototype.set=function listCacheSet(e,t){var r=this.__data__,n=assocIndexOf(r,e);return n<0?(++this.size,r.push([e,t])):r[n][1]=t,this},MapCache.prototype.clear=function mapCacheClear(){this.size=0,this.__data__={hash:new Hash,map:new(K||ListCache),string:new Hash}},MapCache.prototype.delete=function mapCacheDelete(e){var t=getMapData(this,e).delete(e);return this.size-=t?1:0,t},MapCache.prototype.get=function mapCacheGet(e){return getMapData(this,e).get(e)},MapCache.prototype.has=function mapCacheHas(e){return getMapData(this,e).has(e)},MapCache.prototype.set=function mapCacheSet(e,t){var r=getMapData(this,e),n=r.size;return r.set(e,t),this.size+=r.size==n?0:1,this},Stack.prototype.clear=function stackClear(){this.__data__=new ListCache,this.size=0},Stack.prototype.delete=function stackDelete(e){var t=this.__data__,r=t.delete(e);return this.size=t.size,r},Stack.prototype.get=function stackGet(e){return this.__data__.get(e)},Stack.prototype.has=function stackHas(e){return this.__data__.has(e)},Stack.prototype.set=function stackSet(e,t){var n=this.__data__;if(n instanceof ListCache){var i=n.__data__;if(!K||i.length<r-1)return i.push([e,t]),this.size=++n.size,this;n=this.__data__=new MapCache(i)}return n.set(e,t),this.size=n.size,this};var ee=function createBaseFor(e){return function(t,r,n){for(var i=-1,o=Object(t),s=n(t),a=s.length;a--;){var c=s[e?a:++i];if(!1===r(o[c],c,o))break}return t}}();function baseGetTag(e){return null==e?void 0===e?f:p:G&&G in Object(e)?function getRawTag(e){var t=P.call(e,G),r=e[G];try{e[G]=void 0;var n=!0}catch(e){}var i=D.call(e);n&&(t?e[G]=r:delete e[G]);return i}(e):function objectToString(e){return D.call(e)}(e)}function baseIsArguments(e){return isObjectLike(e)&&baseGetTag(e)==a}function baseIsNative(e){return!(!isObject(e)||function isMasked(e){return!!L&&L in e}(e))&&(isFunction(e)?j:m).test(function toSource(e){if(null!=e){try{return A.call(e)}catch(e){}try{return e+""}catch(e){}}return""}(e))}function baseKeysIn(e){if(!isObject(e))return function nativeKeysIn(e){var t=[];if(null!=e)for(var r in Object(e))t.push(r);return t}(e);var t=isPrototype(e),r=[];for(var n in e)("constructor"!=n||!t&&P.call(e,n))&&r.push(n);return r}function baseMerge(e,t,r,n,i){e!==t&&ee(t,function(o,s){if(isObject(o))i||(i=new Stack),function baseMergeDeep(e,t,r,n,i,o,s){var a=safeGet(e,r),c=safeGet(t,r),u=s.get(c);if(u)return void assignMergeValue(e,r,u);var l=o?o(a,c,r+"",e,t,s):void 0,p=void 0===l;if(p){var h=ne(c),f=!h&&ie(c),m=!h&&!f&&oe(c);l=c,h||f||m?ne(a)?l=a:!function isArrayLikeObject(e){return isObjectLike(e)&&isArrayLike(e)}(a)?f?(p=!1,l=function cloneBuffer(e,t){if(t)return e.slice();var r=e.length,n=U?U(r):new e.constructor(r);return e.copy(n),n}(c,!0)):m?(p=!1,l=function cloneTypedArray(e,t){var r=t?function cloneArrayBuffer(e){var t=new e.constructor(e.byteLength);return new z(t).set(new z(e)),t}(e.buffer):e.buffer;return new e.constructor(r,e.byteOffset,e.length)}(c,!0)):l=[]:l=function copyArray(e,t){var r=-1,n=e.length;t||(t=Array(n));for(;++r<n;)t[r]=e[r];return t}(a):function isPlainObject(e){if(!isObjectLike(e)||baseGetTag(e)!=d)return!1;var t=B(e);if(null===t)return!0;var r=P.call(t,"constructor")&&t.constructor;return"function"==typeof r&&r instanceof r&&A.call(r)==M}(c)||re(c)?(l=a,re(a)?l=function toPlainObject(e){return function copyObject(e,t,r,n){var i=!r;r||(r={});var o=-1,s=t.length;for(;++o<s;){var a=t[o],c=n?n(r[a],e[a],a,r,e):void 0;void 0===c&&(c=e[a]),i?baseAssignValue(r,a,c):assignValue(r,a,c)}return r}(e,keysIn(e))}(a):(!isObject(a)||n&&isFunction(a))&&(l=function initCloneObject(e){return"function"!=typeof e.constructor||isPrototype(e)?{}:Z(B(e))}(c))):p=!1}p&&(s.set(c,l),i(l,c,n,o,s),s.delete(c));assignMergeValue(e,r,l)}(e,t,s,r,baseMerge,n,i);else{var a=n?n(safeGet(e,s),o,s+"",e,t,i):void 0;void 0===a&&(a=o),assignMergeValue(e,s,a)}},keysIn)}function baseRest(e,t){return te(function overRest(e,t,r){return t=X(void 0===t?e.length-1:t,0),function(){for(var n=arguments,i=-1,o=X(n.length-t,0),s=Array(o);++i<o;)s[i]=n[t+i];i=-1;for(var a=Array(t+1);++i<t;)a[i]=n[i];return a[t]=r(s),function apply(e,t,r){switch(r.length){case 0:return e.call(t);case 1:return e.call(t,r[0]);case 2:return e.call(t,r[0],r[1]);case 3:return e.call(t,r[0],r[1],r[2])}return e.apply(t,r)}(e,this,a)}}(e,t,identity),e+"")}function getMapData(e,t){var r=e.__data__;return function isKeyable(e){var t=typeof e;return"string"==t||"number"==t||"symbol"==t||"boolean"==t?"__proto__"!==e:null===e}(t)?r["string"==typeof t?"string":"hash"]:r.map}function getNative(e,t){var r=function getValue(e,t){return null==e?void 0:e[t]}(e,t);return baseIsNative(r)?r:void 0}function isIndex(e,t){var r=typeof e;return!!(t=null==t?s:t)&&("number"==r||"symbol"!=r&&g.test(e))&&e>-1&&e%1==0&&e<t}function isPrototype(e){var t=e&&e.constructor;return e===("function"==typeof t&&t.prototype||I)}var te=function shortOut(e){var t=0,r=0;return function(){var n=Y(),s=o-(n-r);if(r=n,s>0){if(++t>=i)return arguments[0]}else t=0;return e.apply(void 0,arguments)}}(W?function(e,t){return W(e,"toString",{configurable:!0,enumerable:!1,value:(r=t,function(){return r}),writable:!0});var r}:identity);function eq(e,t){return e===t||e!=e&&t!=t}var re=baseIsArguments(function(){return arguments}())?baseIsArguments:function(e){return isObjectLike(e)&&P.call(e,"callee")&&!$.call(e,"callee")},ne=Array.isArray;function isArrayLike(e){return null!=e&&isLength(e.length)&&!isFunction(e)}var ie=J||function stubFalse(){return!1};function isFunction(e){if(!isObject(e))return!1;var t=baseGetTag(e);return t==u||t==l||t==c||t==h}function isLength(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=s}function isObject(e){var t=typeof e;return null!=e&&("object"==t||"function"==t)}function isObjectLike(e){return null!=e&&"object"==typeof e}var oe=k?function baseUnary(e){return function(t){return e(t)}}(k):function baseIsTypedArray(e){return isObjectLike(e)&&isLength(e.length)&&!!y[baseGetTag(e)]};function keysIn(e){return isArrayLike(e)?arrayLikeKeys(e,!0):baseKeysIn(e)}var se=function createAssigner(e){return baseRest(function(t,r){var n=-1,i=r.length,o=i>1?r[i-1]:void 0,s=i>2?r[2]:void 0;for(o=e.length>3&&"function"==typeof o?(i--,o):void 0,s&&function isIterateeCall(e,t,r){if(!isObject(r))return!1;var n=typeof t;return!!("number"==n?isArrayLike(r)&&isIndex(t,r.length):"string"==n&&t in r)&&eq(r[t],e)}(r[0],r[1],s)&&(o=i<3?void 0:o,i=1),t=Object(t);++n<i;){var a=r[n];a&&e(t,a,n,o)}return t})}(function(e,t,r){baseMerge(e,t,r)});function identity(e){return e}e.exports=se}).call(this,r(48)(e))},function(e,t,r){"use strict";const n=r(365);n.Server=r(881),n.Receiver=r(369),n.Sender=r(372),e.exports=n},function(e,t,r){"use strict";class Event{constructor(e,t){this.target=t,this.type=e}}class MessageEvent extends Event{constructor(e,t){super("message",t),this.data=e}}class CloseEvent extends Event{constructor(e,t,r){super("close",r),this.wasClean=r._closeFrameReceived&&r._closeFrameSent,this.reason=t,this.code=e}}class OpenEvent extends Event{constructor(e){super("open",e)}}class ErrorEvent extends Event{constructor(e,t){super("error",t),this.message=e.message,this.error=e}}const n={addEventListener(e,t){function onMessage(e){t.call(this,new MessageEvent(e,this))}function onClose(e,r){t.call(this,new CloseEvent(e,r,this))}function onError(e){t.call(this,new ErrorEvent(e,this))}function onOpen(){t.call(this,new OpenEvent(this))}"function"==typeof t&&("message"===e?(onMessage._listener=t,this.on(e,onMessage)):"close"===e?(onClose._listener=t,this.on(e,onClose)):"error"===e?(onError._listener=t,this.on(e,onError)):"open"===e?(onOpen._listener=t,this.on(e,onOpen)):this.on(e,t))},removeEventListener(e,t){const r=this.listeners(e);for(var n=0;n<r.length;n++)r[n]!==t&&r[n]._listener!==t||this.removeListener(e,r[n])}};e.exports=n},function(e,t,r){"use strict";const n=r(5),i=r(12),o=r(23),s=r(161),a=r(368),c=r(125),u=r(365);function emitClose(e){e.emit("close")}function socketOnError(){this.destroy()}function abortHandshake(e,t,r,n){e.writable&&(r=r||o.STATUS_CODES[t],n=Object.assign({Connection:"close","Content-type":"text/html","Content-Length":Buffer.byteLength(r)},n),e.write(`HTTP/1.1 ${t} ${o.STATUS_CODES[t]}\r\n`+Object.keys(n).map(e=>`${e}: ${n[e]}`).join("\r\n")+"\r\n\r\n"+r)),e.removeListener("error",socketOnError),e.destroy()}e.exports=class WebSocketServer extends n{constructor(e,t){if(super(),null==(e=Object.assign({maxPayload:104857600,perMessageDeflate:!1,handleProtocols:null,clientTracking:!0,verifyClient:null,noServer:!1,backlog:null,server:null,host:null,path:null,port:null},e)).port&&!e.server&&!e.noServer)throw new TypeError('One of the "port", "server", or "noServer" options must be specified');null!=e.port?(this._server=o.createServer((e,t)=>{const r=o.STATUS_CODES[426];t.writeHead(426,{"Content-Length":r.length,"Content-Type":"text/plain"}),t.end(r)}),this._server.listen(e.port,e.host,e.backlog,t)):e.server&&(this._server=e.server),this._server&&(this._removeListeners=function addListeners(e,t){for(const r of Object.keys(t))e.on(r,t[r]);return function removeListeners(){for(const r of Object.keys(t))e.removeListener(r,t[r])}}(this._server,{listening:this.emit.bind(this,"listening"),error:this.emit.bind(this,"error"),upgrade:(e,t,r)=>{this.handleUpgrade(e,t,r,t=>{this.emit("connection",t,e)})}})),!0===e.perMessageDeflate&&(e.perMessageDeflate={}),e.clientTracking&&(this.clients=new Set),this.options=e}address(){if(this.options.noServer)throw new Error('The server is operating in "noServer" mode');return this._server?this._server.address():null}close(e){if(e&&this.once("close",e),this.clients)for(const e of this.clients)e.terminate();const t=this._server;t&&(this._removeListeners(),this._removeListeners=this._server=null,null!=this.options.port)?t.close(()=>this.emit("close")):process.nextTick(emitClose,this)}shouldHandle(e){if(this.options.path){const t=e.url.indexOf("?");if((-1!==t?e.url.slice(0,t):e.url)!==this.options.path)return!1}return!0}handleUpgrade(e,t,r,n){t.on("error",socketOnError);const i=+e.headers["sec-websocket-version"],o={};if("GET"!==e.method||"websocket"!==e.headers.upgrade.toLowerCase()||!e.headers["sec-websocket-key"]||8!==i&&13!==i||!this.shouldHandle(e))return abortHandshake(t,400);if(this.options.perMessageDeflate){const r=new s(this.options.perMessageDeflate,!0,this.options.maxPayload);try{const n=a.parse(e.headers["sec-websocket-extensions"]);n[s.extensionName]&&(r.accept(n[s.extensionName]),o[s.extensionName]=r)}catch(e){return abortHandshake(t,400)}}if(this.options.verifyClient){const s={origin:e.headers[`${8===i?"sec-websocket-origin":"origin"}`],secure:!(!e.connection.authorized&&!e.connection.encrypted),req:e};if(2===this.options.verifyClient.length)return void this.options.verifyClient(s,(i,s,a,c)=>{if(!i)return abortHandshake(t,s||401,a,c);this.completeUpgrade(o,e,t,r,n)});if(!this.options.verifyClient(s))return abortHandshake(t,401)}this.completeUpgrade(o,e,t,r,n)}completeUpgrade(e,t,r,n,o){if(!r.readable||!r.writable)return r.destroy();const l=["HTTP/1.1 101 Switching Protocols","Upgrade: websocket","Connection: Upgrade",`Sec-WebSocket-Accept: ${i.createHash("sha1").update(t.headers["sec-websocket-key"]+c.GUID,"binary").digest("base64")}`],p=new u(null);var d=t.headers["sec-websocket-protocol"];if(d&&(d=d.trim().split(/ *, */),(d=this.options.handleProtocols?this.options.handleProtocols(d,t):d[0])&&(l.push(`Sec-WebSocket-Protocol: ${d}`),p.protocol=d)),e[s.extensionName]){const t=e[s.extensionName].params,r=a.format({[s.extensionName]:[t]});l.push(`Sec-WebSocket-Extensions: ${r}`),p._extensions=e}this.emit("headers",l,t),r.write(l.concat("\r\n").join("\r\n")),r.removeListener("error",socketOnError),p.setSocket(r,n,this.options.maxPayload),this.clients&&(this.clients.add(p),p.on("close",()=>this.clients.delete(p))),o(p)}}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(4);t.translateError=function translateError(e,t){var r;if(t.condition)switch(t.condition){case"amqp:internal-error":r=new n.errors.InternalServerError(e);break;case"amqp:link:message-size-exceeded":r=new n.errors.MessageTooLargeError(e);break;case"amqp:not-found":r=new n.errors.DeviceNotFoundError(e);break;case"amqp:not-implemented":r=new n.errors.NotImplementedError(e);break;case"amqp:not-allowed":r=new n.errors.InvalidOperationError(e);break;case"amqp:resource-limit-exceeded":r=new n.errors.IotHubQuotaExceededError(e);break;case"amqp:unauthorized-access":r=new n.errors.UnauthorizedError(e);break;case"com.microsoft:argument-error":r=new n.errors.ArgumentError(e);break;case"com.microsoft:argument-out-of-range":r=new n.errors.ArgumentOutOfRangeError(e);break;case"com.microsoft:device-already-exists":r=new n.errors.DeviceAlreadyExistsError(e);break;case"com.microsoft:device-container-throttled":r=new n.errors.ThrottlingError(e);break;case"com.microsoft:iot-hub-suspended":r=new n.errors.IoTHubSuspendedError(e);break;case"com.microsoft:iot-hub-not-found-error":r=new n.errors.IotHubNotFoundError(e);break;case"com.microsoft:message-lock-lost":r=new n.errors.DeviceMessageLockLostError(e);break;case"com.microsoft:precondition-failed":r=new n.errors.PreconditionFailedError(e);break;case"com.microsoft:quota-exceeded":r=new n.errors.IotHubQuotaExceededError(e);break;case"com.microsoft:timeout":r=new n.errors.ServiceUnavailableError(e);break;default:r=new Error(e)}else r=t.code?new n.errors.NotConnectedError(e):new Error(e);return r.amqpError=t,r}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(4),i=r(210);t.translateError=function translateError(e,t){var r;return(r="amqp:resource-limit-exceeded"===t.condition?new n.errors.DeviceMaximumQueueDepthExceededError(e):i.translateError(e,t)).amqpError=t,r}},function(e,t,r){"use strict";var n,i=this&&this.__extends||(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])},function(e,t){function __(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(__.prototype=t.prototype,new __)});Object.defineProperty(t,"__esModule",{value:!0});var o=r(4),s=r(210),a=function(e){function ServiceReceiver(t){var r=e.call(this)||this;return r._receiver=t,r._receiver.on("message",function(e){r.emit("message",s.AmqpMessage.toMessage(e))}),r._receiver.on("error",function(e){r.emit("error",e)}),r}return i(ServiceReceiver,e),ServiceReceiver.prototype.complete=function(e,t){var r=this;return o.callbackToPromise(function(t){r._receiver.complete(e.transportObj,t)},t)},ServiceReceiver.prototype.abandon=function(e,t){var r=this;return o.callbackToPromise(function(t){r._receiver.abandon(e.transportObj,t)},t)},ServiceReceiver.prototype.reject=function(e,t){var r=this;return o.callbackToPromise(function(t){r._receiver.reject(e.transportObj,t)},t)},ServiceReceiver.prototype.detach=function(e){var t=this;return o.errorCallbackToPromise(function(e){t._receiver.detach(e)},e)},ServiceReceiver.prototype.forceDetach=function(e){this._receiver.forceDetach(e)},ServiceReceiver}(r(5).EventEmitter);t.ServiceReceiver=a},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(4),i=r(21),o=r(89),s=r(158),a=r(217),c=r(374),u=r(375),l=r(4),p=r(163),d=n.errors.ArgumentError,h=function(){function Registry(e,t){if(!e)throw new ReferenceError("The 'config' parameter cannot be '"+e+"'");if(!e.host||!e.sharedAccessSignature)throw new d("The 'config' argument is missing either the host or the sharedAccessSignature property");this._restApiClient=t||new o.RestApiClient(e,p.name+"/"+p.version),this._restApiClient.setOptions&&this._restApiClient.setOptions({http:{agent:new i.Agent({keepAlive:!0})}})}return Registry.prototype.create=function(e,t){var r=this;return l.httpCallbackToPromise(function(t){if(!e)throw new ReferenceError("deviceInfo cannot be '"+e+"'");if(!e.deviceId)throw new d("The object 'deviceInfo' is missing the property: deviceId");var i=n.endpoint.devicePath(encodeURIComponent(e.deviceId))+n.endpoint.versionQueryString(),o=JSON.parse(JSON.stringify(e));r._normalizeAuthentication(o),r._restApiClient.executeApiCall("PUT",i,{"Content-Type":"application/json; charset=utf-8"},o,function(e,r,n){e?t(e):t(null,new u.Device(r),n)})},t)},Registry.prototype.update=function(e,t){var r=this;return l.httpCallbackToPromise(function(t){if(!e)throw new ReferenceError("deviceInfo cannot be '"+e+"'");if(!e.deviceId)throw new d("The object 'deviceInfo' is missing the property: deviceId");var i=n.endpoint.devicePath(encodeURIComponent(e.deviceId))+n.endpoint.versionQueryString(),o=JSON.parse(JSON.stringify(e));r._normalizeAuthentication(o),r._restApiClient.executeApiCall("PUT",i,{"Content-Type":"application/json; charset=utf-8","If-Match":"*"},o,function(e,r,n){e?t(e):t(null,new u.Device(r),n)})},t)},Registry.prototype.get=function(e,t){var r=this;return l.httpCallbackToPromise(function(t){if(!e)throw new ReferenceError("deviceId is '"+e+"'");var i=n.endpoint.devicePath(encodeURIComponent(e))+n.endpoint.versionQueryString();r._restApiClient.executeApiCall("GET",i,null,null,function(e,r,n){e?t(e):t(null,new u.Device(r),n)})},t)},Registry.prototype.list=function(e){var t=this;return l.httpCallbackToPromise(function(e){var r=n.endpoint.devicePath("")+n.endpoint.versionQueryString();t._restApiClient.executeApiCall("GET",r,null,null,function(t,r,n){t?e(t):e(null,r?r.map(function(e){return new u.Device(e)}):[],n)})},e)},Registry.prototype.delete=function(e,t){var r=this;return l.httpCallbackToPromise(function(t){if(!e)throw new ReferenceError("deviceId is '"+e+"'");var i=n.endpoint.devicePath(encodeURIComponent(e))+n.endpoint.versionQueryString();r._restApiClient.executeApiCall("DELETE",i,{"If-Match":"*"},null,t)},t)},Registry.prototype.addDevices=function(e,t){var r=this;return l.httpCallbackToPromise(function(t){r._processBulkDevices(e,"create",null,null,null,t)},t)},Registry.prototype.updateDevices=function(e,t,r){var n=this;return l.httpCallbackToPromise(function(r){n._processBulkDevices(e,null,t,"Update","UpdateIfMatchETag",r)},r)},Registry.prototype.removeDevices=function(e,t,r){var n=this;return l.httpCallbackToPromise(function(r){n._processBulkDevices(e,null,t,"Delete","DeleteIfMatchETag",r)},r)},Registry.prototype.importDevicesFromBlob=function(e,t,r){var i=this;return l.callbackToPromise(function(r){if(!e)throw new ReferenceError("inputBlobContainerUri cannot be falsy");if(!t)throw new ReferenceError("outputBlobContainerUri cannot be falsy");var o="/jobs/create"+n.endpoint.versionQueryString(),s={type:"import",inputBlobContainerUri:e,outputBlobContainerUri:t};i._restApiClient.executeApiCall("POST",o,{"Content-Type":"application/json; charset=utf-8"},s,r)},r)},Registry.prototype.exportDevicesToBlob=function(e,t,r){var i=this;return l.callbackToPromise(function(r){if(!e)throw new ReferenceError("outputBlobContainerUri cannot be falsy");var o="/jobs/create"+n.endpoint.versionQueryString(),s={type:"export",outputBlobContainerUri:e,excludeKeysInExport:t};i._restApiClient.executeApiCall("POST",o,{"Content-Type":"application/json; charset=utf-8"},s,r)},r)},Registry.prototype.listJobs=function(e){var t=this;return l.httpCallbackToPromise(function(e){var r="/jobs"+n.endpoint.versionQueryString();t._restApiClient.executeApiCall("GET",r,null,null,e)},e)},Registry.prototype.getJob=function(e,t){var r=this;return l.callbackToPromise(function(t){if(!e)throw new ReferenceError("jobId cannot be falsy");var i="/jobs/"+e+n.endpoint.versionQueryString();r._restApiClient.executeApiCall("GET",i,null,null,t)},t)},Registry.prototype.cancelJob=function(e,t){var r=this;return l.callbackToPromise(function(t){if(!e)throw new ReferenceError("jobId cannot be falsy");var i="/jobs/"+e+n.endpoint.versionQueryString();r._restApiClient.executeApiCall("DELETE",i,null,null,t)},t)},Registry.prototype.getTwin=function(e,t){var r=this;return l.httpCallbackToPromise(function(t){if(!e)throw new ReferenceError("the 'deviceId' cannot be falsy");var i="/twins/"+encodeURIComponent(e)+n.endpoint.versionQueryString();r._restApiClient.executeApiCall("GET",i,null,null,function(e,n,i){e?t(e):t(null,new a.Twin(n,r),i)})},t)},Registry.prototype.getModuleTwin=function(e,t,r){var i=this;return l.httpCallbackToPromise(function(r){if(!e)throw new ReferenceError("Argument 'deviceId' cannot be falsy");if(!t)throw new ReferenceError("Argument 'moduleId' cannot be falsy");var o="/twins/"+encodeURIComponent(e)+"/modules/"+encodeURIComponent(t)+n.endpoint.versionQueryString();i._restApiClient.executeApiCall("GET",o,null,null,function(e,t,n){e?r(e):r(null,new a.Twin(t,i),n)})},r)},Registry.prototype.updateTwin=function(e,t,r,i){var o=this;return l.httpCallbackToPromise(function(i){if(null==e||""===e)throw new ReferenceError("deviceId cannot be '"+e+"'");if(!t)throw new ReferenceError("patch cannot be '"+t+"'");if(!r)throw new ReferenceError("etag cannot be '"+r+"'");var s="/twins/"+encodeURIComponent(e)+n.endpoint.versionQueryString(),c={"Content-Type":"application/json; charset=utf-8","If-Match":r};o._restApiClient.executeApiCall("PATCH",s,c,t,function(e,t,r){e?i(e):i(null,new a.Twin(t,o),r)})},i)},Registry.prototype.updateModuleTwin=function(e,t,r,i,o){var s=this;return l.httpCallbackToPromise(function(o){if(!e)throw new ReferenceError("Argument 'deviceId' cannot be falsy");if(!t)throw new ReferenceError("Argument 'moduleId' cannot be falsy");if(!r)throw new ReferenceError("Argument 'patch' cannot be falsy");if(!i)throw new ReferenceError("Argument 'etag' cannot be falsy");var c="/twins/"+encodeURIComponent(e)+"/modules/"+encodeURIComponent(t)+n.endpoint.versionQueryString(),u={"Content-Type":"application/json; charset=utf-8","If-Match":i};s._restApiClient.executeApiCall("PATCH",c,u,r,function(e,t,r){e?o(e):o(null,new a.Twin(t,s),r)})},o)},Registry.prototype.createQuery=function(e,t){if(!e)throw new ReferenceError("sqlQuery cannot be '"+e+"'");if("string"!=typeof e)throw new TypeError("sqlQuery must be a string");if(null!=t&&"number"!=typeof t)throw new TypeError("pageSize must be a number or be null or undefined");return new c.Query(this._executeQueryFunc(e,t),this)},Registry.prototype.getRegistryStatistics=function(e){var t=this;return l.httpCallbackToPromise(function(e){var r="/statistics/devices"+n.endpoint.versionQueryString();t._restApiClient.executeApiCall("GET",r,{},null,e)},e)},Registry.prototype.addConfiguration=function(e,t){var r=this;return l.httpCallbackToPromise(function(t){if(!e)throw new ReferenceError("configuration cannot be falsy");if(!e.id)throw new d("configuration object is missing id property");e.schemaVersion||(e.schemaVersion="1.0");var i="/configurations/"+encodeURIComponent(e.id)+n.endpoint.versionQueryString();r._restApiClient.executeApiCall("PUT",i,{"Content-Type":"application/json; charset=utf-8"},e,t)},t)},Registry.prototype.getConfiguration=function(e,t){var r=this;return l.httpCallbackToPromise(function(t){if(!e)throw new ReferenceError("Argument 'configurationId' cannot be falsy");var i="/configurations/"+encodeURIComponent(e)+n.endpoint.versionQueryString();r._restApiClient.executeApiCall("GET",i,null,null,t)},t)},Registry.prototype.getConfigurations=function(e){var t=this;return l.httpCallbackToPromise(function(e){var r="/configurations"+n.endpoint.versionQueryString();t._restApiClient.executeApiCall("GET",r,null,null,e)},e)},Registry.prototype._updateConfiguration=function(e,t,r){var i;if("function"==typeof t?(i=!1,r=t):i=t,!e)throw new ReferenceError("Argument 'configuration' cannot be falsy");if(!r)throw new ReferenceError("Argument 'done' cannot be falsy");if(!i&&!e.etag)throw new d("The ETag should be set while updating the Configuration.");if(!e.id)throw new d("configuration object is missing id property");e.schemaVersion||(e.schemaVersion="1.0");var o="/configurations/"+encodeURIComponent(e.id)+n.endpoint.versionQueryString(),s={"Content-Type":"application/json; charset=utf-8","If-Match":i?'"*"':'"'+e.etag+'"'};this._restApiClient.executeApiCall("PUT",o,s,e,r)},Registry.prototype.updateConfiguration=function(e,t,r){var n=this;return r||("function"==typeof t?t:void 0)?this._updateConfiguration(e,t,r):l.httpCallbackToPromise(function(r){return n._updateConfiguration(e,t,r)})},Registry.prototype.removeConfiguration=function(e,t){var r=this;return l.httpCallbackToPromise(function(t){if(!e)throw new ReferenceError("Argument 'configurationId' cannot be falsy");var i="/configurations/"+encodeURIComponent(e)+n.endpoint.versionQueryString();r._restApiClient.executeApiCall("DELETE",i,null,null,t)},t)},Registry.prototype.applyConfigurationContentOnDevice=function(e,t,r){var i=this;return l.httpCallbackToPromise(function(r){if(!e)throw new ReferenceError("Argument 'deviceId' cannot be falsy");if(!t)throw new ReferenceError("Argument 'content' cannot be falsy");var o=n.endpoint.devicePath(encodeURIComponent(e))+"/applyConfigurationContent"+n.endpoint.versionQueryString();i._restApiClient.executeApiCall("POST",o,{"Content-Type":"application/json; charset=utf-8"},t,r)},r)},Registry.prototype.addModule=function(e,t){var r=this;return l.httpCallbackToPromise(function(t){if(!e)throw new ReferenceError("Argument 'module' cannot be falsy");if(!e.deviceId)throw new d("deviceId property is missing from module object");if(!e.moduleId)throw new d("moduleId property is missing from module object");var i=JSON.parse(JSON.stringify(e));r._normalizeAuthentication(i);var o=""+n.endpoint.modulePath(encodeURIComponent(i.deviceId),encodeURIComponent(i.moduleId))+n.endpoint.versionQueryString();r._restApiClient.executeApiCall("PUT",o,{"Content-Type":"application/json; charset=utf-8"},i,t)},t)},Registry.prototype.getModulesOnDevice=function(e,t){var r=this;return l.httpCallbackToPromise(function(t){if(!e)throw new ReferenceError("Argument 'deviceId' cannot be falsy");var i=n.endpoint.devicePath(encodeURIComponent(e))+"/modules"+n.endpoint.versionQueryString();r._restApiClient.executeApiCall("GET",i,null,null,t)},t)},Registry.prototype.getModule=function(e,t,r){var i=this;return l.httpCallbackToPromise(function(r){if(!e)throw new ReferenceError("Argument 'deviceId' cannot be falsy");if(!t)throw new ReferenceError("Argument 'moduleId' cannot be falsy");var o=""+n.endpoint.modulePath(encodeURIComponent(e),encodeURIComponent(t))+n.endpoint.versionQueryString();i._restApiClient.executeApiCall("GET",o,null,null,r)},r)},Registry.prototype._updateModule=function(e,t,r){var i;if("function"==typeof t?(i=!1,r=t):i=t,!e)throw new ReferenceError("Argument 'module' cannot be falsy");if(!r)throw new ReferenceError("Argument 'done' cannot be falsy");if(!e.moduleId)throw new d("moduleId property is missing from module object");if(!e.deviceId)throw new d("deviceId property is missing from module object");if(!i&&!e.etag)throw new d("The ETag should be set while updating the Module.");var o=JSON.parse(JSON.stringify(e));this._normalizeAuthentication(o);var s={"Content-Type":"application/json; charset=utf-8","If-Match":i?'"*"':'"'+o.etag+'"'},a=""+n.endpoint.modulePath(encodeURIComponent(o.deviceId),encodeURIComponent(o.moduleId))+n.endpoint.versionQueryString();this._restApiClient.executeApiCall("PUT",a,s,o,r)},Registry.prototype.updateModule=function(e,t,r){var n=this;return r||("function"==typeof t?t:void 0)?this._updateModule(e,t,r):l.httpCallbackToPromise(function(r){n._updateModule(e,t,r)})},Registry.prototype._removeModule=function(e,t,r){var i,o,s;if(e&&e.moduleId){r=t;var a=e;o=a.deviceId,i=a.moduleId,s=a.etag}else o=e,i=t,s="*";if(!o)throw new ReferenceError("'deviceId' cannot be falsy");if(!i)throw new ReferenceError("'moduleId' cannot be falsy");if(!r)throw new ReferenceError("Argument 'done' cannot be falsy");if("string"!=typeof o)throw new d("'deviceId' must be a string");if("string"!=typeof i)throw new d("'moduleId' must be a string");if("function"!=typeof r)throw new d("'done' must be a function");var c={"If-Match":'"'+s+'"'},u=""+n.endpoint.modulePath(encodeURIComponent(o),encodeURIComponent(i))+n.endpoint.versionQueryString();this._restApiClient.executeApiCall("DELETE",u,c,null,r)},Registry.prototype.removeModule=function(e,t,r){var n=this,i=r||("function"==typeof t?t:void 0);return i?this._removeModule(e,t,i):l.httpCallbackToPromise(function(r){n._removeModule(e,t,r)})},Registry.prototype._bulkOperation=function(e,t){var r="/devices"+n.endpoint.versionQueryString();this._restApiClient.executeApiCall("POST",r,{"Content-Type":"application/json; charset=utf-8"},e,t)},Registry.prototype._processBulkDevices=function(e,t,r,n,i,o){var s,a=this;if(!e)throw new ReferenceError("devices cannot be '"+e+"'");if(!Array.isArray(e))throw new d("devices must be an array");if(0===e.length||e.length>100)throw new d("The device array has an invalid size of "+e.length);if(null===t){if("boolean"!=typeof r)throw new ReferenceError("force parameter must be present and a boolean");s=r?n:i}else s=t;var c=[];e.forEach(function(e){if(!e.deviceId)throw new d("The object is missing the property: deviceId");var t=e.deviceId,r=JSON.parse(JSON.stringify(e));delete r.deviceId,r.id=t,r.importMode=s,a._normalizeAuthentication(r),c.push(r)}),this._bulkOperation(c,o)},Registry.prototype._executeQueryFunc=function(e,t){var r=this;return function(i,o){var s="/devices/query"+n.endpoint.versionQueryString(),a={"Content-Type":"application/json; charset=utf-8"};i&&(a["x-ms-continuation"]=i),t&&(a["x-ms-max-item-count"]=t);var c={query:e};r._restApiClient.executeApiCall("POST",s,a,c,o)}},Registry.prototype._normalizeAuthentication=function(e){e.hasOwnProperty("authentication")?e.authentication.hasOwnProperty("type")||(e.authentication.x509Thumbprint&&(e.authentication.x509Thumbprint.primaryThumbprint||e.authentication.x509Thumbprint.secondaryThumbprint)?e.authentication.type="selfSigned":e.authentication.type="sas"):e.authentication={type:"sas",symmetricKey:{primaryKey:"",secondaryKey:""}}},Registry.fromConnectionString=function(e){if(!e)throw new ReferenceError("value is '"+e+"'");var t=s.parse(e);return new Registry({host:t.HostName,sharedAccessSignature:n.SharedAccessSignature.create(t.HostName,t.SharedAccessKeyName,t.SharedAccessKey,Date.now())})},Registry.fromSharedAccessSignature=function(e){if(!e)throw new ReferenceError("value is '"+e+"'");var t=n.SharedAccessSignature.parse(e);return new Registry({host:t.sr,sharedAccessSignature:t.toString()})},Registry}();t.Registry=h},function(e,t,r){"use strict";var n,i=this&&this.__extends||(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])},function(e,t){function __(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(__.prototype=t.prototype,new __)});Object.defineProperty(t,"__esModule",{value:!0});var o=function(e){function AmqpWs(t){return e.call(this,t)||this}return i(AmqpWs,e),AmqpWs.prototype._getConnectionUri=function(){return"wss://"+this._config.host+":443/$iothub/websocket"},AmqpWs}(r(209).Amqp);t.AmqpWs=o},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(21),i=r(4),o=r(158),s=r(376),a=r(89),c=r(373),u=r(374),l=r(4),p=r(163),d=function(){function JobClient(e){if(!e)throw new ReferenceError("restApiClient cannot be '"+e+"'");this._restApiClient=e,this._restApiClient.setOptions&&this._restApiClient.setOptions({http:{agent:new n.Agent({keepAlive:!0})}})}return JobClient.prototype.getJob=function(e,t){var r=this;return l.tripleValueCallbackToPromise(function(t){if(null==e||""===e)throw new ReferenceError("jobId cannot be '"+e+"'");var n="/jobs/v2/"+e+i.endpoint.versionQueryString();r._restApiClient.executeApiCall("GET",n,null,null,t)},createJobStatusResponse,t)},JobClient.prototype.createQuery=function(e,t,r){return new u.Query(this._getJobsFunc(e,t,r))},JobClient.prototype.cancelJob=function(e,t){var r=this;return l.tripleValueCallbackToPromise(function(t){if(null==e||""===e)throw new ReferenceError("jobId cannot be '"+e+"'");var n="/jobs/v2/"+e+"/cancel"+i.endpoint.versionQueryString();r._restApiClient.executeApiCall("POST",n,null,null,t)},createJobStatusResponse,t)},JobClient.prototype.scheduleDeviceMethod=function(e,t,r,n,i,o){var s=this,a="function"==typeof n?n:"function"==typeof i?i:o;return l.tripleValueCallbackToPromise(function(a){if(null==e||""===e)throw new ReferenceError("jobId cannot be '"+e+"'");if(!t)throw new ReferenceError("queryCondition cannot be '"+t+"'");if(!r)throw new ReferenceError("methodParams cannot be '"+r+"'");if(void 0===r.methodName||null===r.methodName||""===r.methodName)throw new ReferenceError("methodParams.methodName cannot be '"+r.methodName+"'");if("function"==typeof n){if(i||o)throw new TypeError("The callback must be the last parameter");a=n,n=null,i=null}else if("function"==typeof i){if(o)throw new TypeError("The callback must be the last parameter");a=i,i=null}var u={methodName:r.methodName,payload:r.payload||c.DeviceMethod.defaultPayload,responseTimeoutInSeconds:r.responseTimeoutInSeconds||c.DeviceMethod.defaultResponseTimeout},l={jobId:e,type:"scheduleDeviceMethod",cloudToDeviceMethod:u,startTime:n?n.toISOString():null,maxExecutionTimeInSeconds:i};if("string"!=typeof t)throw new TypeError("queryCondition must be a sql WHERE clause string");l.queryCondition=t,s._scheduleJob(l,a)},createJobStatusResponse,a)},JobClient.prototype.scheduleTwinUpdate=function(e,t,r,n,i,o){var s=this,a="function"==typeof n?n:"function"==typeof i?i:o;return l.tripleValueCallbackToPromise(function(a){if(null==e||""===e)throw new ReferenceError("jobId cannot be '"+e+"'");if(!t)throw new ReferenceError("queryCondition cannot be '"+t+"'");if(!r)throw new ReferenceError("patch cannot be '"+r+"'");if("function"==typeof n){if(i||o)throw new TypeError("The callback must be the last parameter");a=n,n=null,i=null}else if("function"==typeof i){if(o)throw new TypeError("The callback must be the last parameter");a=i,i=null}var c={jobId:e,type:"scheduleUpdateTwin",updateTwin:r,startTime:n?n.toISOString():null,maxExecutionTimeInSeconds:i};if("string"!=typeof t)throw new TypeError("queryCondition must be a sql WHERE clause string");c.queryCondition=t,s._scheduleJob(c,a)},createJobStatusResponse,a)},JobClient.prototype._getJobsFunc=function(e,t,r){var n=this;return function(o,s){var a=t?"&jobStatus="+encodeURIComponent(t):"",c=e?"&jobType="+encodeURIComponent(e):"",u="/jobs/v2/query"+i.endpoint.versionQueryString()+a+c,l={};o&&(l["x-ms-continuation"]=o),r&&(l["x-ms-max-item-count"]=r),n._restApiClient.executeApiCall("GET",u,l,null,s)}},JobClient.prototype._scheduleJob=function(e,t){var r="/jobs/v2/"+encodeURIComponent(e.jobId.toString())+i.endpoint.versionQueryString();this._restApiClient.executeApiCall("PUT",r,{"Content-Type":"application/json; charset=utf-8"},e,t)},JobClient.fromConnectionString=function(e){if(!e)throw new ReferenceError("connectionString cannot be '"+e+"'");var t=o.parse(e),r=s.create(t.HostName,t.SharedAccessKeyName,t.SharedAccessKey,i.anHourFromNow()),n={host:t.HostName,sharedAccessSignature:r.toString()};return new JobClient(new a.RestApiClient(n,p.name+"/"+p.version))},JobClient.fromSharedAccessSignature=function(e){if(!e)throw new ReferenceError("sharedAccessSignature cannot be '"+e+"'");var t={host:s.parse(e).sr,sharedAccessSignature:e};return new JobClient(new a.RestApiClient(t,p.name+"/"+p.version))},JobClient}();function createJobStatusResponse(e,t){return{jobStatus:e,response:t}}t.JobClient=d,t.createJobStatusResponse=createJobStatusResponse},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n=r(10);t.DeviceItem=class DeviceItem extends n.TreeItem{constructor(e,t,r,i,o){super(e),this.deviceId=e,this.connectionString=t,this.iconPath=r,this.connectionState=i,this.description=o,this.contextValue="device",this.collapsibleState=n.TreeItemCollapsibleState.Collapsed}}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n=r(10);t.ModuleItem=class ModuleItem extends n.TreeItem{constructor(e,t,r,n,i,o,s){super(t),this.deviceItem=e,this.moduleId=t,this.connectionString=r,this.connectionState=n,this.runtimeStatus=i,this.iconPath=o,this.contextValue=s,this.deviceId=e.deviceId,this.command={command:"azure-iot-toolkit.getModule",title:"",arguments:[this]},"Connected"===n&&(this.description=i?`${n} (${i})`:n)}}},function(e,t,r){"use strict";var n=this&&this.__awaiter||function(e,t,r,n){return new(r||(r=Promise))(function(i,o){function fulfilled(e){try{step(n.next(e))}catch(e){o(e)}}function rejected(e){try{step(n.throw(e))}catch(e){o(e)}}function step(e){e.done?i(e.value):new r(function(t){t(e.value)}).then(fulfilled,rejected)}step((n=n.apply(e,t||[])).next())})};Object.defineProperty(t,"__esModule",{value:!0});const i=r(88),o=r(10),s=r(68),a=r(16),c=r(18),u=r(25),l=r(67);t.DeviceExplorer=class DeviceExplorer extends s.BaseExplorer{constructor(e){super(e)}listDevice(){return n(this,void 0,void 0,function*(){let e=yield u.Utility.getConnectionString(a.Constants.IotHubConnectionStringKey,a.Constants.IotHubConnectionStringTitle);if(!e)return;let t=l.Registry.fromConnectionString(e);this._outputChannel.show(),this.outputLine("Device","Querying devices..."),c.TelemetryClient.sendEvent("AZ.Device.List"),t.list((e,t)=>{this.outputLine("Device",`${t.length} device(s) found`),t.forEach((e,t)=>{this.outputLine(`Device#${t+1}`,JSON.stringify(e,null,2))})})})}getDevice(e,t,r=this._outputChannel){return n(this,void 0,void 0,function*(){if(!t&&!(t=yield u.Utility.getConnectionString(a.Constants.IotHubConnectionStringKey,a.Constants.IotHubConnectionStringTitle)))return;if(!(e=yield u.Utility.getInputDevice(e,"AZ.Device.Get.Start",!1,t)))return;let n=u.Utility.getHostName(t),i=l.Registry.fromConnectionString(t);return r.show(),this.outputLine("Device",`Querying device [${e.deviceId}]...`,r),new Promise((o,s)=>{i.get(e.deviceId,this.done("Get","Device",o,s,n,r,t))})})}createDevice(e=!1,t,r=this._outputChannel){return n(this,void 0,void 0,function*(){if(!t&&!(t=yield u.Utility.getConnectionString(a.Constants.IotHubConnectionStringKey,a.Constants.IotHubConnectionStringTitle)))return;const n=e?"Edge Device":"Device",i=u.Utility.getHostName(t),o=l.Registry.fromConnectionString(t),s=yield this.promptForDeviceId(`Enter ${n} ID to create`);if(!s)return;const c={deviceId:s};return e&&(c.capabilities={iotEdge:!0}),r.show(),this.outputLine(n,`Creating ${n} '${c.deviceId}'`,r),new Promise((e,s)=>{o.create(c,this.done("Create",n,e,s,i,r,t))})})}deleteDevice(e){return n(this,void 0,void 0,function*(){let t=yield u.Utility.getConnectionString(a.Constants.IotHubConnectionStringKey,a.Constants.IotHubConnectionStringTitle);if(!t)return;let r=l.Registry.fromConnectionString(t);return(e=yield u.Utility.getInputDevice(e,"AZ.Device.Delete.Start"))&&e.label&&(yield o.window.showWarningMessage(`${a.Constants.DeleteMessage} "${e.label}"?`,{modal:!0},a.Constants.DeleteLabel))===a.Constants.DeleteLabel?this.deleteDeviceById(e.label,"Device",r):void 0})}promptForDeviceId(e){return n(this,void 0,void 0,function*(){let t=yield o.window.showInputBox({prompt:e});return void 0!==t&&((t=t.trim())||o.window.showErrorMessage("Device ID cannot be empty")),t})}deleteDeviceById(e,t,r){return n(this,void 0,void 0,function*(){return this._outputChannel.show(),this.outputLine(t,`Deleting device '${e}'`),new Promise((n,i)=>{r.delete(e,this.done("Delete",t,n,i))})})}done(e,t,r,n,s=null,a=this._outputChannel,u){return(l,p,d)=>{const h=`AZ.${t.replace(/\s/g,".")}.${e}`;if(l&&(c.TelemetryClient.sendEvent(h,{Result:"Fail"},u),this.outputLine(t,`[${e}] error: ${l.toString()}`,a),n(l)),d){let r="Fail";d.statusCode<300&&(r="Success","Create"!==e&&"Delete"!==e||o.commands.executeCommand("azure-iot-toolkit.refresh")),c.TelemetryClient.sendEvent(h,{Result:r},u),this.outputLine(t,`[${e}][${r}] status: ${d.statusCode} ${d.statusMessage}`,a)}p&&(null!=p.authentication.SymmetricKey.primaryKey&&(p.connectionString=i.ConnectionString.createWithSharedAccessKey(s,p.deviceId,p.authentication.SymmetricKey.primaryKey)),null!=p.authentication.x509Thumbprint.primaryThumbprint&&(p.connectionString=i.ConnectionString.createWithX509Certificate(s,p.deviceId)),this.outputLine(t,`[${e}] device info: ${JSON.stringify(p,null,2)}`,a),r(p)),r()}}}},function(e,t,r){"use strict";var n=this&&this.__awaiter||function(e,t,r,n){return new(r||(r=Promise))(function(i,o){function fulfilled(e){try{step(n.next(e))}catch(e){o(e)}}function rejected(e){try{step(n.throw(e))}catch(e){o(e)}}function step(e){e.done?i(e.value):new r(function(t){t(e.value)}).then(fulfilled,rejected)}step((n=n.apply(e,t||[])).next())})};Object.defineProperty(t,"__esModule",{value:!0});const i=r(67),o=r(35),s=r(10),a=r(68),c=r(16),u=r(892),l=r(379),p=r(380),d=r(18),h=r(25);t.DistributedTracingManager=class DistributedTracingManager extends a.BaseExplorer{constructor(e){super(e)}updateDistributedTracingSetting(e,t){return n(this,void 0,void 0,function*(){let r=yield h.Utility.getConnectionString(c.Constants.IotHubConnectionStringKey,c.Constants.IotHubConnectionStringTitle);if(!r)return;d.TelemetryClient.sendEvent(c.Constants.IoTHubAIUpdateDistributedSettingStartEvent);let n=[];if(e)n=[e.deviceNode.deviceId];else{let e=yield s.window.showQuickPick(h.Utility.getNoneEdgeDeviceIdList(r),{placeHolder:"Select devices...",ignoreFocusOut:!0,canPickMany:!0});void 0!==e&&e.length>0&&(n=e)}0!==n.length&&(yield this.updateDistributedTracingSettingForDevices(n,r,t,e))})}updateDistributedTracingSettingForDevices(e,t,r,o){return n(this,void 0,void 0,function*(){let a,u=i.Registry.fromConnectionString(t),f=void 0,m=void 0;if(1===e.length&&(yield s.window.withProgress({title:"Get Current Distributed Tracing Setting",location:s.ProgressLocation.Notification},()=>n(this,void 0,void 0,function*(){(a=yield h.Utility.getTwin(u,e[0])).properties.desired[c.Constants.DISTRIBUTED_TWIN_NAME]&&(f=h.Utility.parseDesiredSamplingMode(a),m=h.Utility.parseDesiredSamplingRate(a)),r===c.DistributedSettingUpdateType.OnlySamplingRate&&(f=void 0),r===c.DistributedSettingUpdateType.OnlyMode&&(m=void 0)}))),r!==c.DistributedSettingUpdateType.OnlySamplingRate){let e=yield s.window.showQuickPick(this.getSamplingModePickupItems(),{placeHolder:"Select whether to enable/disable the distributed tracing...",ignoreFocusOut:!0});if(!e)return;f=e.distributedTracingEnabled}r!==c.DistributedSettingUpdateType.OnlyMode&&!1!==f&&void 0===(m=yield this.promptForSamplingRate("Enter sampling rate, integer within [0, 100]",m))||(yield s.window.withProgress({title:"Update Distributed Tracing Setting",location:s.ProgressLocation.Notification},()=>n(this,void 0,void 0,function*(){try{const n=yield this.updateDeviceTwin(f,m,t,e);d.TelemetryClient.sendEvent(c.Constants.IoTHubAIUpdateDistributedSettingDoneEvent,{Result:"Success",UpdateType:r.toString(),DeviceCount:e.length.toString(),SamplingRate:m?m.toString():"",SamplingMode:f?f.toString():""},t);let i="";n&&(i="\nDetailed information are shown as below:\n"+JSON.stringify(n,null,2)),this._outputChannel.show(),this.outputLine(c.Constants.IoTHubDistributedTracingSettingLabel,`Update distributed tracing setting for device [${e.join(",")}] complete!`+(!0===f?" (Distributed Tracing is in public preview stage and is available only in some regions, please check detail https://aka.ms/iottracing)":"")+i),o instanceof l.DistributedTracingLabelNode?s.commands.executeCommand("azure-iot-toolkit.refresh",o):o instanceof p.DistributedTracingSettingNode?s.commands.executeCommand("azure-iot-toolkit.refresh",o.parent):s.commands.executeCommand("azure-iot-toolkit.refresh")}catch(n){d.TelemetryClient.sendEvent(c.Constants.IoTHubAIUpdateDistributedSettingDoneEvent,{Result:"Fail",UpdateType:r.toString(),DeviceCount:e.length.toString(),SamplingRate:m?"":m.toString(),SamplingMode:f?"":f.toString()},t),this._outputChannel.show(),this.outputLine(c.Constants.IoTHubDistributedTracingSettingLabel,`Failed to get or update distributed setting: ${n.message}`)}})))})}updateDeviceTwin(e,t,r,o){return n(this,void 0,void 0,function*(){let n={etag:"*",properties:{desired:{}}};if(void 0!==e||void 0!==t){if(n.properties.desired[c.Constants.DISTRIBUTED_TWIN_NAME]||(n.properties.desired[c.Constants.DISTRIBUTED_TWIN_NAME]={}),void 0!==e&&(n.properties.desired[c.Constants.DISTRIBUTED_TWIN_NAME].sampling_mode=e?1:2),void 0!==t&&(n.properties.desired[c.Constants.DISTRIBUTED_TWIN_NAME].sampling_rate=t),1!==o.length)return this.scheduleTwinUpdate(n,r,o);{let e=i.Registry.fromConnectionString(r);yield e.updateTwin(o[0],JSON.stringify(n),n.etag)}}})}scheduleTwinUpdate(e,t,r){return n(this,void 0,void 0,function*(){let n=o.v4(),s=i.JobClient.fromConnectionString(t),a=this.generateQureyCondition(r),c=new Date;return yield s.scheduleTwinUpdate(n,a,e,c,300),this.monitorJob(n,s)})}generateQureyCondition(e){return`deviceId IN [${e.map(e=>"'"+e+"'").join(",")}]`}monitorJob(e,t){return n(this,void 0,void 0,function*(){return new Promise((r,i)=>n(this,void 0,void 0,function*(){let o=setInterval(()=>n(this,void 0,void 0,function*(){try{const n=yield t.getJob(e);"completed"!==n.jobStatus.status&&"failed"!==n.jobStatus.status&&"cancelled"!==n.jobStatus.status||(clearInterval(o),r(n.jobStatus))}catch(e){i(e)}}),1e3)}))})}getSamplingModePickupItems(){return[!0,!1].map(e=>new u.SamplingModeItem(e))}promptForSamplingRate(e,t){return n(this,void 0,void 0,function*(){(void 0===t||t>100||t<0)&&(t=100);let r=yield s.window.showInputBox({prompt:e,value:t.toString(),ignoreFocusOut:!0,validateInput:e=>{if(void 0!==e){if(!(e=e.trim()))return"Sampling rate cannot be empty";const t=/^\d+$/.test(e),r=parseFloat(e);return!t||!Number.isInteger(r)||r<0||r>100?"Sampling rate should be an integer within [0, 100]":void 0}return"Sampling rate cannot be empty"}});if(void 0!==r)return r=r.trim(),parseFloat(r)})}}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.SamplingModeItem=class SamplingModeItem{constructor(e){this.label=e?"Enable":"Disable",this.description=e?"Enable Distributed Tracing":"Disable Distributed Tracing",this.distributedTracingEnabled=e}}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n=r(10);t.TwinItem=class TwinItem extends n.TreeItem{constructor(e,t){super(e),this.propertyLabel=e,this.type=t,this.type=t,this.contextValue=t+"-distributed-twin-properies",this.collapsibleState=n.TreeItemCollapsibleState.Expanded}}},function(e,t,r){"use strict";var n=this&&this.__awaiter||function(e,t,r,n){return new(r||(r=Promise))(function(i,o){function fulfilled(e){try{step(n.next(e))}catch(e){o(e)}}function rejected(e){try{step(n.throw(e))}catch(e){o(e)}}function step(e){e.done?i(e.value):new r(function(t){t(e.value)}).then(fulfilled,rejected)}step((n=n.apply(e,t||[])).next())})};Object.defineProperty(t,"__esModule",{value:!0});const i=r(380),o=r(67),s=r(16),a=r(18),c=r(25);t.TwinNode=class TwinNode{constructor(e,t){this.twinItem=e,this.deviceNode=t,this.DISTRIBUTED_TRACING_ENABLED_PROPERTY="Enable Distributed Tracing: ",this.DISTRIBUTED_TRACING_SAMPLING_RATE="Sampling Rate: "}getTreeItem(){return this.twinItem}getChildren(e,t){return n(this,void 0,void 0,function*(){let e=o.Registry.fromConnectionString(t);a.TelemetryClient.sendEvent(s.Constants.IoTHubAILoadDistributedTracingSettingTreeStartEvent,null,t);const r=[];try{let n=yield c.Utility.getTwin(e,this.deviceNode.deviceId),o=null,u=null;this.twinItem.type===s.DeviceTwinPropertyType.Desired?n.properties.desired[s.Constants.DISTRIBUTED_TWIN_NAME]?(o=c.Utility.parseDesiredSamplingRate(n),u=c.Utility.parseDesiredSamplingMode(n),r.push(new i.DistributedTracingSettingNode(this.DISTRIBUTED_TRACING_ENABLED_PROPERTY+(u?s.Constants.EnabledLabel:s.Constants.DisabledLabel),this,"desired-mode-property",this.deviceNode)),r.push(new i.DistributedTracingSettingNode(this.DISTRIBUTED_TRACING_SAMPLING_RATE+(void 0!==o?o+s.Constants.PercentageLabel:s.Constants.NotSetLabel),this,"desired-sampling-rate-property",this.deviceNode))):(r.push(new i.DistributedTracingSettingNode(this.DISTRIBUTED_TRACING_ENABLED_PROPERTY+s.Constants.DisabledLabel,this,"desired-mode-property",this.deviceNode)),r.push(new i.DistributedTracingSettingNode(this.DISTRIBUTED_TRACING_SAMPLING_RATE+s.Constants.NotSetLabel,this,"desired-sampling-rate-property",this.deviceNode))):this.twinItem.type===s.DeviceTwinPropertyType.Reported&&(n.properties.reported[s.Constants.DISTRIBUTED_TWIN_NAME]?(o=c.Utility.parseReportedSamplingRate(n),u=c.Utility.parseReportedSamplingMode(n),r.push(new i.DistributedTracingSettingNode(this.DISTRIBUTED_TRACING_ENABLED_PROPERTY+(u?s.Constants.EnabledLabel:s.Constants.DisabledLabel),this,"reported-mode-property",this.deviceNode)),r.push(new i.DistributedTracingSettingNode(this.DISTRIBUTED_TRACING_SAMPLING_RATE+(o?o+s.Constants.PercentageLabel:s.Constants.NotSetLabel),this,"reported-sampling-rate-property",this.deviceNode))):(r.push(new i.DistributedTracingSettingNode(this.DISTRIBUTED_TRACING_ENABLED_PROPERTY+s.Constants.DisabledLabel,this,"reported-mode-property",this.deviceNode)),r.push(new i.DistributedTracingSettingNode(this.DISTRIBUTED_TRACING_SAMPLING_RATE+s.Constants.NotSetLabel,this,"reported-sampling-rate-property",this.deviceNode)))),a.TelemetryClient.sendEvent(s.Constants.IoTHubAILoadDistributedTracingSettingTreeDoneEvent,{Result:"Success"},t)}catch(e){a.TelemetryClient.sendEvent(s.Constants.IoTHubAILoadDistributedTracingSettingTreeDoneEvent,{Result:"Fail",Message:e.message},t)}return r})}}},function(e,t,r){"use strict";var n=this&&this.__awaiter||function(e,t,r,n){return new(r||(r=Promise))(function(i,o){function fulfilled(e){try{step(n.next(e))}catch(e){o(e)}}function rejected(e){try{step(n.throw(e))}catch(e){o(e)}}function step(e){e.done?i(e.value):new r(function(t){t(e.value)}).then(fulfilled,rejected)}step((n=n.apply(e,t||[])).next())})};Object.defineProperty(t,"__esModule",{value:!0});const i=r(496),o=r(962),s=r(16),a=r(244),c=r(18),u=r(25);t.EventHubManager=class EventHubManager extends a.IoTHubMessageBaseExplorer{constructor(e){super(e,"$(primitive-square) Stop Monitoring Custom Event Hub Endpoint","azure-iot-toolkit.stopMonitorCustomEventHubEndpoint"),this.onMessage=(e=>{const t=u.Utility.getMessageFromEventData(e),r=u.Utility.getTimeMessageFromEventData(e);this.outputLine(s.Constants.EventHubMonitorLabel,`${r}Message received:`),this._outputChannel.appendLine(JSON.stringify(t,null,2))}),this.onError=(e=>{this.outputLine(s.Constants.EventHubMonitorLabel,e.message)})}startMonitorCustomEventHubEndpoint(e){return n(this,void 0,void 0,function*(){if(this._isMonitoring)return this._outputChannel.show(),void this.outputLine(s.Constants.IoTHubMonitorLabel,"There is a running job to monitor custom Event Hub endpoint. Please stop it first.");try{c.TelemetryClient.sendEvent(s.Constants.IoTHubAIEHStartMonitorEvent),this._outputChannel.show(),this.outputLine(s.Constants.EventHubMonitorLabel,`Start monitoring message arrived in custom Event Hub endpoint [${e.eventHubProperty.name}] ...`);const t=new o.default(e.azureSubscription.session.credentials,e.azureSubscription.subscription.subscriptionId),r=(yield t.namespaces.listKeys(e.eventHubProperty.resourceGroup,this.getNamespacefromConnectionString(e.eventHubProperty.connectionString),"RootManageSharedAccessKey")).primaryConnectionString;this._eventHubClient=i.EventHubClient.createFromConnectionString(r,this.getEntityPathfromConnectionString(e.eventHubProperty.connectionString));const n=yield this._eventHubClient.getPartitionIds();this.updateMonitorStatus(!0),n.forEach(e=>{this.outputLine(s.Constants.EventHubMonitorLabel,`Created partition receiver [${e}]`),this._eventHubClient.receive(e,this.onMessage,this.onError,{eventPosition:i.EventPosition.fromEnqueuedTime(Date.now())})})}catch(e){this.updateMonitorStatus(!1),this.outputLine(s.Constants.EventHubMonitorLabel,e),c.TelemetryClient.sendEvent(s.Constants.IoTHubAIEHStartMonitorEvent,{Result:"Exception",Message:e})}})}stopMonitorCustomEventHubEndpoint(){return n(this,void 0,void 0,function*(){this.stopMonitorEventHubEndpoint(s.Constants.EventHubMonitorLabel,s.Constants.IoTHubAIEHStopMonitorEvent,this._eventHubClient,"custom Event Hub endpoint")})}getNamespacefromConnectionString(e){const t=/^Endpoint=sb:\/\/([^.]+)\./.exec(e);return t?t[1]:""}getEntityPathfromConnectionString(e){const t=/EntityPath=(.+)$/.exec(e);return t?t[1]:""}}},function(e,t,r){"use strict";var n=r(96),i=r(127),o=r(98),s=r(383),a=r(218),c=r(219),u=r(900),l=r(384),p=r(11),d=r(17),h=r(6),f=r(47),m=r(59),g=r(5).EventEmitter;function get_default_connect_config(){var e=function find_connect_config(){var e;e=process.env.MESSAGING_CONNECT_FILE?[process.env.MESSAGING_CONNECT_FILE]:[process.cwd(),h.join(d.homedir(),".config/messaging"),"/etc/messaging"].map(function(e){return h.join(e,"/connect.json")});for(var t=0;t<e.length;t++)if(p.existsSync(e[t])){var r=JSON.parse(p.readFileSync(e[t],"utf8"));return o.config("using config from %s: %j",e[t],r),r}return{}}(),t={};return"amqps"===e.scheme&&(t.transport="tls"),e.host&&(t.host=e.host),e.port&&(t.port=e.port),e.sasl&&!1===e.sasl.enabled||(e.user?t.username=e.user:t.username="anonymous",e.password&&(t.password=e.password),e.sasl_mechanisms&&(t.sasl_mechanisms=e.sasl_mechanisms)),e.tls&&(e.tls.key&&(t.key=p.readFileSync(e.tls.key)),e.tls.cert&&(t.cert=p.readFileSync(e.tls.cert)),e.tls.ca&&(t.ca=[p.readFileSync(e.tls.ca)]),!1===e.verify&&(t.rejectUnauthorized=!1)),"tls"===t.transport&&(t.servername=t.host),t}function get_socket_id(e){return e.get_id_string?e.get_id_string():e.localAddress+":"+e.localPort+" -> "+e.remoteAddress+":"+e.remotePort}function restrict(e,t){if(e){var r,n=e;return function(i){return r!==i&&(n=e,r=i),n--?t(i):-1}}return t}function get_connect_fn(e){if(void 0===e.transport||"tcp"===e.transport)return f.connect;if("tls"===e.transport||"ssl"===e.transport)return m.connect;throw Error("Unrecognised transport: "+e.transport)}var y=["container_id","hostname","max_frame_size","channel_max","idle_time_out","outgoing_locales","incoming_locales","offered_capabilities","desired_capabilities","properties"];function remote_property_shortcut(e){return function(){return this.remote.open?this.remote.open[e]:void 0}}var v=1,b=function(e,t){if(this.options={},e){for(var r in e)this.options[r]=e[r];"tls"!==e.transport&&"ssl"!==e.transport||void 0!==e.servername||void 0===e.host||(this.options.servername=e.host)}else this.options=get_default_connect_config();if(this.container=t,this.options.id||(this.options.id="connection-"+v++),this.options.container_id||(this.options.container_id=t?t.id:a.generate_uuid()),!this.options.connection_details){var n=this;this.options.connection_details=function(){return function connection_details(e){var t={};return t.connect=e.connect?e.connect:get_connect_fn(e),t.host=e.host?e.host:"localhost",t.port=e.port?e.port:5672,t.options=e,t}(n.options)}}var o=this.get_option("reconnect",!0);if("boolean"==typeof o&&o){var s=this.get_option("initial_reconnect_delay",100),u=this.get_option("max_reconnect_delay",6e4);this.options.reconnect=restrict(this.get_option("reconnect_limit"),function backoff(e,t){var r,n=e;return function(i){r!==i&&(n=e,r=i);var o=n,s=2*n;return n=t>s?s:t,o}}(s,u))}else if("number"==typeof o){var p=this.options.reconnect;this.options.reconnect=restrict(this.get_option("reconnect_limit"),function(){return p})}for(var d in this.registered=!1,this.state=new c,this.local_channel_map={},this.remote_channel_map={},this.local={},this.remote={},this.local.open=i.open(function connection_fields(e){var t={};return y.forEach(function(r){void 0!==e[r]&&(t[r]=e[r])}),t}(this.options)),this.local.close=i.close({}),this.session_policy=function session_per_connection(e){var t=null;return{get_session:function(){return t||((t=e.create_session()).observers.on("session_close",function(){t=null}),t.begin()),t}}}(this),this.amqp_transport=new l(this.options.id,0,i.TYPE_AMQP,this),this.sasl_transport=void 0,this.transport=this.amqp_transport,this.conn_established_counter=0,this.heartbeat_out=void 0,this.heartbeat_in=void 0,this.abort_idle=!1,this.socket_ready=!1,this.scheduled_reconnect=void 0,this.default_sender=void 0,this.closed_with_non_fatal_error=!1,y){var h=y[d];Object.defineProperty(this,h,{get:remote_property_shortcut(h)})}Object.defineProperty(this,"error",{get:function(){return this.remote.close?this.remote.close.error:void 0}})};function delegate_to_session(e){b.prototype["on_"+e]=function(t){var r=this.remote_channel_map[t.channel];if(!r)throw new n.ProtocolError(e+" received on invalid channel "+t.channel);r["on_"+e](t)}}b.prototype=Object.create(g.prototype),b.prototype.constructor=b,b.prototype.dispatch=function(e){return o.events("[%s] Connection got event: %s",this.options.id,e),this.listeners(e).length?(g.prototype.emit.apply(this,arguments),!0):!!this.container&&this.container.dispatch.apply(this.container,arguments)},b.prototype._disconnect=function(){for(var e in this.state.disconnected(),this.local_channel_map)this.local_channel_map[e]._disconnect();this.socket_ready=!1},b.prototype._reconnect=function(){this.abort_idle&&(this.abort_idle=!1,this.local.close.error=void 0,this.state=new c,this.state.open()),this.state.reconnect(),this._reset_remote_state()},b.prototype._reset_remote_state=function(){for(var e in this.amqp_transport=new l(this.options.id,0,i.TYPE_AMQP,this),this.sasl_transport=void 0,this.transport=this.amqp_transport,this.remote={},this.remote_channel_map={},this.local_channel_map)this.local_channel_map[e]._reconnect()},b.prototype.connect=function(){return this.is_server=!1,this._reset_remote_state(),this._connect(this.options.connection_details(this.conn_established_counter)),this.open(),this},b.prototype.reconnect=function(){return this.scheduled_reconnect=void 0,o.reconnect("[%s] reconnecting...",this.options.id),this._reconnect(),this._connect(this.options.connection_details(this.conn_established_counter)),process.nextTick(this._process.bind(this)),this},b.prototype._connect=function(e){return e.connect?this.init(e.connect(e.port,e.host,e.options,this.connected.bind(this))):this.init(get_connect_fn(e)(e.port,e.host,e.options,this.connected.bind(this))),this},b.prototype.accept=function(e){return this.is_server=!0,o.io("[%s] client accepted: %s",this.id,get_socket_id(e)),this.socket_ready=!0,this.init(e)},b.prototype.init=function(e){if(this.socket=e,this.get_option("tcp_no_delay",!1)&&this.socket.setNoDelay&&this.socket.setNoDelay(!0),this.socket.on("data",this.input.bind(this)),this.socket.on("error",this.on_error.bind(this)),this.socket.on("end",this.eof.bind(this)),this.is_server){var t;if(this.container&&Object.getOwnPropertyNames(this.container.sasl_server_mechanisms).length&&(t=this.container.sasl_server_mechanisms),this.socket.encrypted&&this.socket.authorized&&this.get_option("enable_sasl_external",!1)&&(t=s.server_add_external(t?a.clone(t):{})),t)void 0===t.ANONYMOUS||this.get_option("require_sasl",!1)?this.sasl_transport=new s.Server(this,t):this.sasl_transport=new s.Selective(this,t);else if(!this.get_option("disable_sasl",!1)){var r=s.server_mechanisms();r.enable_anonymous(),this.sasl_transport=new s.Selective(this,r)}}else{var n=this.get_option("sasl_mechanisms");if(!n){var i=this.get_option("username"),o=this.get_option("password"),c=this.get_option("token");i&&(n=s.client_mechanisms(),o?n.enable_plain(i,o):c?n.enable_xoauth2(i,c):n.enable_anonymous(i))}this.socket.encrypted&&this.options.cert&&this.get_option("enable_sasl_external",!1)&&(n||(n=s.client_mechanisms()),n.enable_external()),n&&(this.sasl_transport=new s.Client(this,n,this.options.sasl_init_hostname||this.options.servername||this.options.host))}return this.transport=this.sasl_transport?this.sasl_transport:this.amqp_transport,this},b.prototype.attach_sender=function(e){return this.session_policy.get_session().attach_sender(e)},b.prototype.open_sender=b.prototype.attach_sender,b.prototype.attach_receiver=function(e){return this.get_option("tcp_no_delay",!0)&&this.socket.setNoDelay&&this.socket.setNoDelay(!0),this.session_policy.get_session().attach_receiver(e)},b.prototype.open_receiver=b.prototype.attach_receiver,b.prototype.get_option=function(e,t){return void 0!==this.options[e]?this.options[e]:this.container?this.container.get_option(e,t):t},b.prototype.send=function(e){return void 0===this.default_sender&&(this.default_sender=this.open_sender({target:{}})),this.default_sender.send(e)},b.prototype.connected=function(){this.socket_ready=!0,this.conn_established_counter++,o.io("[%s] connected %s",this.options.id,get_socket_id(this.socket)),this.output()},b.prototype.sasl_failed=function(e){this.transport_error=new n.ConnectionError(e,"amqp:unauthorized-access",this),this._handle_error(),this.socket.end()},b.prototype._is_fatal=function(e){return this.get_option("non_fatal_errors",["amqp:connection:forced"]).indexOf(e)<0},b.prototype._handle_error=function(){var e=this.get_error();if(e){var t=this.dispatch("connection_error",this._context({error:e}));return t=this.dispatch("connection_close",this._context({error:e}))||t,this._is_fatal(e.condition)?t||this.dispatch("error",new n.ConnectionError(e.description,e.condition,this)):this.closed_with_non_fatal_error=!0,!0}return!1},b.prototype.get_error=function(){return this.transport_error?this.transport_error:this.remote.close&&this.remote.close.error?new n.ConnectionError(this.remote.close.error.description,this.remote.close.error.condition,this):void 0},b.prototype._get_peer_details=function(){var e="";return this.remote.open&&this.remote.open.container&&(e+=this.remote.open.container+" "),this.remote.open&&this.remote.open.properties&&(e+=JSON.stringify(this.remote.open.properties)),e},b.prototype.output=function(){try{this.socket&&this.socket_ready&&(this.heartbeat_out&&clearTimeout(this.heartbeat_out),this.transport.write(this.socket),(this.is_closed()&&this.state.has_settled()||this.abort_idle||this.transport_error)&&!this.transport.has_writes_pending()?this.socket.end():this.is_open()&&this.remote.open.idle_time_out&&(this.heartbeat_out=setTimeout(this._write_frame.bind(this),this.remote.open.idle_time_out/2)))}catch(e){"ProtocolError"===e.name?(console.error("["+this.options.id+"] error on write: "+e+" "+this._get_peer_details()+" "+e.name),this.dispatch("protocol_error",e)||console.error("["+this.options.id+"] error on write: "+e+" "+this._get_peer_details())):this.dispatch("error",e),this.socket.end()}},b.prototype.input=function(e){var t;try{this.heartbeat_in&&clearTimeout(this.heartbeat_in),o.io("[%s] read %d bytes",this.options.id,e.length),this.previous_input?(t=Buffer.concat([this.previous_input,e],this.previous_input.length+e.length),this.previous_input=null):t=e;var r=this.transport.read(t,this);r<t.length&&(this.previous_input=t.slice(r)),this.local.open.idle_time_out&&(this.heartbeat_in=setTimeout(this.idle.bind(this),this.local.open.idle_time_out)),this.transport.has_writes_pending()?this.output():this.is_closed()&&this.state.has_settled()?this.socket.end():this.is_open()&&this.remote.open.idle_time_out&&!this.heartbeat_out&&(this.heartbeat_out=setTimeout(this._write_frame.bind(this),this.remote.open.idle_time_out/2))}catch(e){"ProtocolError"===e.name?this.dispatch("protocol_error",e)||console.error("["+this.options.id+"] error on read: "+e+" "+this._get_peer_details()+" (buffer:"+function buffer_to_hex(e){for(var t,r=[],n=0;n<e.length;n++)r.push((t=e[n])<16?"0x0"+Number(t).toString(16):"0x"+Number(t).toString(16));return r.join(",")}(t)+")"):this.dispatch("error",e),this.socket.end()}},b.prototype.idle=function(){this.is_open()&&(this.abort_idle=!0,this.local.close.error={condition:"amqp:resource-limit-exceeded",description:"max idle time exceeded"},this.close())},b.prototype.on_error=function(e){this._disconnected(e)},b.prototype.eof=function(){this._disconnected()},b.prototype._disconnected=function(e){this.heartbeat_out&&clearTimeout(this.heartbeat_out),this.heartbeat_in&&clearTimeout(this.heartbeat_in);var t=this.closed_with_non_fatal_error;if(this.closed_with_non_fatal_error&&(this.closed_with_non_fatal_error=!1,this.options.reconnect&&this.open()),(!this.is_closed()||t)&&void 0===this.scheduled_reconnect){this._disconnect();var r={};if(e&&(r.error=e),!this.is_server&&!this.transport_error&&this.options.reconnect){var n=this.options.reconnect(this.conn_established_counter);n>=0?(o.reconnect("[%s] Scheduled reconnect in "+n+"ms",this.options.id),this.scheduled_reconnect=setTimeout(this.reconnect.bind(this),n),r.reconnecting=!0):r.reconnecting=!1}this.dispatch("disconnected",this._context(r))||console.warn("["+this.options.id+"] disconnected %s",r.error||"")}},b.prototype.open=function(){this.state.open()&&this._register()},b.prototype.close=function(e){e&&(this.local.close.error=e),this.state.close()&&this._register()},b.prototype.is_open=function(){return this.state.is_open()},b.prototype.is_remote_open=function(){return this.state.remote_open},b.prototype.is_closed=function(){return this.state.is_closed()},b.prototype.create_session=function(){for(var e=0;this.local_channel_map[e];)e++;var t=new u(this,e);return this.local_channel_map[e]=t,t},b.prototype.find_sender=function(e){return this.find_link(a.sender_filter(e))},b.prototype.find_receiver=function(e){return this.find_link(a.receiver_filter(e))},b.prototype.find_link=function(e){for(var t in this.local_channel_map){var r=this.local_channel_map[t].find_link(e);if(r)return r}},b.prototype.each_receiver=function(e,t){this.each_link(e,a.receiver_filter(t))},b.prototype.each_sender=function(e,t){this.each_link(e,a.sender_filter(t))},b.prototype.each_link=function(e,t){for(var r in this.local_channel_map){this.local_channel_map[r].each_link(e,t)}},b.prototype.on_open=function(e){if(!this.state.remote_opened())throw new n.ProtocolError("Open already received");this.remote.open=e.performative,this.open(),this.dispatch("connection_open",this._context())},b.prototype.on_close=function(e){if(!this.state.remote_closed())throw new n.ProtocolError("Close already received");this.remote.close=e.performative,this.remote.close.error?this._handle_error():this.dispatch("connection_close",this._context()),this.heartbeat_out&&clearTimeout(this.heartbeat_out);var t=this;process.nextTick(function(){t.close()})},b.prototype._register=function(){this.registered||(this.registered=!0,process.nextTick(this._process.bind(this)))},b.prototype._process=function(){this.registered=!1;do{for(var e in this.state.need_open()&&this._write_open(),this.local_channel_map)this.local_channel_map[e]._process();this.state.need_close()&&this._write_close()}while(!this.state.has_settled())},b.prototype._write_frame=function(e,t,r){this.amqp_transport.encode(i.amqp_frame(e,t,r)),this.output()},b.prototype._write_open=function(){this._write_frame(0,this.local.open)},b.prototype._write_close=function(){this._write_frame(0,this.local.close)},b.prototype.on_begin=function(e){var t;if(null===e.performative.remote_channel||void 0===e.performative.remote_channel)(t=this.create_session()).local.begin.remote_channel=e.channel;else if(!(t=this.local_channel_map[e.performative.remote_channel]))throw new n.ProtocolError("Invalid value for remote channel "+e.performative.remote_channel);t.on_begin(e),this.remote_channel_map[e.channel]=t},b.prototype.get_peer_certificate=function(){return this.socket&&this.socket.getPeerCertificate?this.socket.getPeerCertificate():void 0},b.prototype.get_tls_socket=function(){return!this.socket||"tls"!==this.options.transport&&"ssl"!==this.options.transport?void 0:this.socket},b.prototype._context=function(e){var t=e||{};return t.connection=this,this.container&&(t.container=this.container),t},b.prototype.remove_session=function(e){delete this.remote_channel_map[e.remote.channel],delete this.local_channel_map[e.local.channel]},b.prototype.remove_all_sessions=function(){this.remote_channel_map={},this.local_channel_map={}},delegate_to_session("end"),delegate_to_session("attach"),delegate_to_session("detach"),delegate_to_session("transfer"),delegate_to_session("disposition"),delegate_to_session("flow"),e.exports=b},function(e,t,r){"use strict";function _typeof(e){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function _typeof(e){return typeof e}:function _typeof(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}t.log=function log(){var e;return"object"===("undefined"==typeof console?"undefined":_typeof(console))&&console.log&&(e=console).log.apply(e,arguments)},t.formatArgs=function formatArgs(t){if(t[0]=(this.useColors?"%c":"")+this.namespace+(this.useColors?" %c":" ")+t[0]+(this.useColors?"%c ":" ")+"+"+e.exports.humanize(this.diff),!this.useColors)return;var r="color: "+this.color;t.splice(1,0,r,"color: inherit");var n=0,i=0;t[0].replace(/%[a-zA-Z%]/g,function(e){"%%"!==e&&(n++,"%c"===e&&(i=n))}),t.splice(i,0,r)},t.save=function save(e){try{e?t.storage.setItem("debug",e):t.storage.removeItem("debug")}catch(e){}},t.load=function load(){var e;try{e=t.storage.getItem("debug")}catch(e){}!e&&"undefined"!=typeof process&&"env"in process&&(e=process.env.DEBUG);return e},t.useColors=function useColors(){if("undefined"!=typeof window&&window.process&&("renderer"===window.process.type||window.process.__nwjs))return!0;if("undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/))return!1;return"undefined"!=typeof document&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||"undefined"!=typeof window&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||"undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31||"undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/)},t.storage=function localstorage(){try{return localStorage}catch(e){}}(),t.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"],e.exports=r(382)(t),e.exports.formatters.j=function(e){try{return JSON.stringify(e)}catch(e){return"[UnexpectedJSONParseError]: "+e.message}}},function(e,t){var r=1e3,n=60*r,i=60*n,o=24*i,s=7*o,a=365.25*o;function plural(e,t,r,n){var i=t>=1.5*r;return Math.round(e/r)+" "+n+(i?"s":"")}e.exports=function(e,t){t=t||{};var c=typeof e;if("string"===c&&e.length>0)return function parse(e){if((e=String(e)).length>100)return;var t=/^((?:\d+)?\-?\d?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(e);if(!t)return;var c=parseFloat(t[1]);switch((t[2]||"ms").toLowerCase()){case"years":case"year":case"yrs":case"yr":case"y":return c*a;case"weeks":case"week":case"w":return c*s;case"days":case"day":case"d":return c*o;case"hours":case"hour":case"hrs":case"hr":case"h":return c*i;case"minutes":case"minute":case"mins":case"min":case"m":return c*n;case"seconds":case"second":case"secs":case"sec":case"s":return c*r;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return c;default:return}}(e);if("number"===c&&!1===isNaN(e))return t.long?function fmtLong(e){var t=Math.abs(e);if(t>=o)return plural(e,t,o,"day");if(t>=i)return plural(e,t,i,"hour");if(t>=n)return plural(e,t,n,"minute");if(t>=r)return plural(e,t,r,"second");return e+" ms"}(e):function fmtShort(e){var t=Math.abs(e);if(t>=o)return Math.round(e/o)+"d";if(t>=i)return Math.round(e/i)+"h";if(t>=n)return Math.round(e/n)+"m";if(t>=r)return Math.round(e/r)+"s";return e+"ms"}(e);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(e))}},function(e,t,r){"use strict";var n=r(51),i=r(1);t.init=function init(e){e.inspectOpts={};for(var r=Object.keys(t.inspectOpts),n=0;n<r.length;n++)e.inspectOpts[r[n]]=t.inspectOpts[r[n]]},t.log=function log(){return process.stderr.write(i.format.apply(i,arguments)+"\n")},t.formatArgs=function formatArgs(r){var n=this.namespace;if(this.useColors){var i=this.color,o="[3"+(i<8?i:"8;5;"+i),s="  ".concat(o,";1m").concat(n," [0m");r[0]=s+r[0].split("\n").join("\n"+s),r.push(o+"m+"+e.exports.humanize(this.diff)+"[0m")}else r[0]=function getDate(){if(t.inspectOpts.hideDate)return"";return(new Date).toISOString()+" "}()+n+" "+r[0]},t.save=function save(e){e?process.env.DEBUG=e:delete process.env.DEBUG},t.load=function load(){return process.env.DEBUG},t.useColors=function useColors(){return"colors"in t.inspectOpts?Boolean(t.inspectOpts.colors):n.isatty(process.stderr.fd)},t.colors=[6,2,3,4,5,1];try{var o=r(49);o&&(o.stderr||o).level>=2&&(t.colors=[20,21,26,27,32,33,38,39,40,41,42,43,44,45,56,57,62,63,68,69,74,75,76,77,78,79,80,81,92,93,98,99,112,113,128,129,134,135,148,149,160,161,162,163,164,165,166,167,168,169,170,171,172,173,178,179,184,185,196,197,198,199,200,201,202,203,204,205,206,207,208,209,214,215,220,221])}catch(e){}t.inspectOpts=Object.keys(process.env).filter(function(e){return/^debug_/i.test(e)}).reduce(function(e,t){var r=t.substring(6).toLowerCase().replace(/_([a-z])/g,function(e,t){return t.toUpperCase()}),n=process.env[t];return n=!!/^(yes|on|true|enabled)$/i.test(n)||!/^(no|off|false|disabled)$/i.test(n)&&("null"===n?null:Number(n)),e[r]=n,e},{}),e.exports=r(382)(t);var s=e.exports.formatters;s.o=function(e){return this.inspectOpts.colors=this.useColors,i.inspect(e,this.inspectOpts).replace(/\s*\n\s*/g," ")},s.O=function(e){return this.inspectOpts.colors=this.useColors,i.inspect(e,this.inspectOpts)}},function(e,t,r){"use strict";var n=r(127),i=r(901),o=r(98),s=r(220),a=r(97),c=r(218),u=r(219),l=r(5).EventEmitter;function SessionError(e,t,r){Error.call(this),Error.captureStackTrace(this,this.constructor),this.message=e,this.condition=t,this.description=e,this.session=r}r(1).inherits(SessionError,Error);var p=function(e){this.capacity=e,this.size=0,this.head=0,this.tail=0,this.entries=[]};function write_dispositions(e){var t,r,i,o,a;for(o=0;o<e.length;o++)a=e[o],void 0===t&&(t=a,r=a,i=a.id),t!==r&&!s.are_outcomes_equivalent(r.state,a.state)||r.settled!==a.settled||i!==a.id?(t.link.session.output(n.disposition({role:t.link.is_receiver(),first:t.id,last:r.id,state:t.state,settled:t.settled})),t=a,r=a,i=a.id):(r.id!==a.id&&(r=a),i++);void 0!==t&&void 0!==r&&t.link.session.output(n.disposition({role:t.link.is_receiver(),first:t.id,last:r.id,state:t.state,settled:t.settled}))}p.prototype.available=function(){return this.capacity-this.size},p.prototype.push=function(e){if(!(this.size<this.capacity))throw Error("circular buffer overflow: head="+this.head+" tail="+this.tail+" size="+this.size+" capacity="+this.capacity);this.entries[this.tail]=e,this.tail=(this.tail+1)%this.capacity,this.size++},p.prototype.pop_if=function(e){for(var t=0;this.size&&e(this.entries[this.head]);)this.entries[this.head]=void 0,this.head=(this.head+1)%this.capacity,this.size--,t++;return t},p.prototype.by_id=function(e){if(this.size>0){var t=e-this.entries[this.head].id;if(t<this.size)return this.entries[(this.head+t)%this.capacity]}},p.prototype.get_head=function(){return this.size>0?this.entries[this.head]:void 0},p.prototype.get_tail=function(){return this.size>0?this.entries[(this.head+this.size-1)%this.capacity]:void 0};var d=function(e){this.deliveries=new p(2048),this.updated=[],this.pending_dispositions=[],this.next_delivery_id=0,this.next_pending_delivery=0,this.next_transfer_id=0,this.window=a.MAX_UINT,this.remote_next_transfer_id=void 0,this.remote_window=void 0,this.connection=e};d.prototype.available=function(){return this.deliveries.available()},d.prototype.compute_max_payload=function(e){return this.connection.max_frame_size?this.connection.max_frame_size-(50+e.length):void 0},d.prototype.send=function(e,t,r,n){var i=[],o=this.compute_max_payload(t);if(o&&r.length>o)for(var s=0;s<r.length;){var a=Math.min(s+o,r.length);i.push(r.slice(s,a)),s=a}else i.push(r);var c={id:this.next_delivery_id++,tag:t,link:e,data:i,format:n||0,sent:!1,settled:!1,state:void 0,remote_settled:!1,remote_state:void 0},u=this;return c.update=function(e,t){u.update(c,e,t)},this.deliveries.push(c),c},d.prototype.on_begin=function(e){this.remote_window=e.incoming_window},d.prototype.on_flow=function(e){this.remote_next_transfer_id=e.next_incoming_id,this.remote_window=e.incoming_window},d.prototype.on_disposition=function(e){for(var t=e.last?e.last:e.first,r=e.first;r<=t;r++){var n=this.deliveries.by_id(r);if(n&&!n.remote_settled){var i=!1;e.settled&&(n.remote_settled=e.settled,i=!0),e.state&&e.state!==n.remote_state&&(n.remote_state=s.unwrap_outcome(e.state),i=!0),i&&this.updated.push(n)}}},d.prototype.update=function(e,t,r){e&&(e.settled=t,void 0!==r&&(e.state=r),e.remote_settled||this.pending_dispositions.push(e),e.link.connection._register())},d.prototype.transfer_window=function(){return this.remote_window?this.remote_window-(this.next_transfer_id-this.remote_next_transfer_id):0},d.prototype.process=function(){for(var e;this.next_pending_delivery<this.next_delivery_id;){if(!(e=this.deliveries.by_id(this.next_pending_delivery))){console.error("ERROR: Next pending delivery not found: "+this.next_pending_delivery);break}if(!e.link.has_credit()){o.flow("[%s] Link has no credit",this.connection.options.id);break}if(!(this.transfer_window()>=e.data.length)){o.flow("[%s] Incoming window of peer preventing sending further transfers: remote_window=%d, remote_next_transfer_id=%d, next_transfer_id=%d",this.connection.options.id,this.remote_window,this.remote_next_transfer_id,this.next_transfer_id);break}this.window-=e.data.length;for(var t=0;t<e.data.length;t++){this.next_transfer_id++;var r=t+1<e.data.length,i=n.transfer({handle:e.link.local.handle,message_format:e.format,delivery_id:e.id,delivery_tag:e.tag,settled:e.settled,more:r});e.link.session.output(i,e.data[t]),e.settled&&(e.remote_settled=!0)}e.link.credit--,e.link.delivery_count++,this.next_pending_delivery++}for(t=0;t<this.updated.length;t++)(e=this.updated[t]).remote_state&&e.remote_state.constructor.composite_type&&e.link.dispatch(e.remote_state.constructor.composite_type,e.link._context({delivery:e})),e.remote_settled&&e.link.dispatch("settled",e.link._context({delivery:e}));this.updated=[],this.pending_dispositions.length&&(write_dispositions(this.pending_dispositions),this.pending_dispositions=[]),this.deliveries.pop_if(function(e){return e.settled&&e.remote_settled})};var h=function(){this.deliveries=new p(2048),this.updated=[],this.next_transfer_id=0,this.next_delivery_id=void 0,Object.defineProperty(this,"window",{get:function(){return this.deliveries.available()}}),this.remote_next_transfer_id=void 0,this.remote_window=void 0,this.max_transfer_id=this.next_transfer_id+this.window};h.prototype.update=function(e,t,r){e&&(e.settled=t,void 0!==r&&(e.state=r),e.remote_settled||this.updated.push(e),e.link.connection._register())},h.prototype.on_transfer=function(e,t){if(this.next_transfer_id++,!t.is_remote_open())throw Error("transfer after detach");var r,n;void 0===this.next_delivery_id&&(this.next_delivery_id=e.performative.delivery_id);var i=this.deliveries.get_tail();if(i&&i.incomplete){if(c.is_defined(e.performative.delivery_id)&&this.next_delivery_id!==e.performative.delivery_id)throw Error("frame sequence error: delivery "+this.next_delivery_id+" not complete, got "+e.performative.delivery_id);r=i,n=Buffer.concat([r.data,e.payload],r.data.length+e.payload.length)}else{if(this.next_delivery_id!==e.performative.delivery_id)throw Error("frame sequence error: expected "+this.next_delivery_id+", got "+e.performative.delivery_id);r={id:e.performative.delivery_id,tag:e.performative.delivery_tag,format:e.performative.message_format,link:t,settled:!1,state:void 0,remote_settled:void 0!==e.performative.settled&&e.performative.settled,remote_state:e.performative.state};var o=this;r.update=function(e,n){var i=e;void 0===i&&(i=1!==t.local.attach.rcv_settle_mode),o.update(r,i,n)},r.accept=function(){this.update(void 0,s.accepted().described())},r.release=function(e){e?this.update(void 0,s.modified(e).described()):this.update(void 0,s.released().described())},r.reject=function(e){this.update(void 0,s.rejected({error:e}).described())},r.modified=function(e){this.update(void 0,s.modified(e).described())},this.deliveries.push(r),n=e.payload}if(r.incomplete=e.performative.more,r.incomplete)r.data=n;else{t.credit>0?t.credit--:console.error("Received transfer when credit was %d",t.credit),t.delivery_count++,this.next_delivery_id++;var a=0===r.format?{message:s.decode(n),delivery:r}:{message:n,delivery:r,format:r.format};t.dispatch("message",t._context(a))}},h.prototype.process=function(e){this.updated.length>0&&(write_dispositions(this.updated),this.updated=[]),this.deliveries.pop_if(function(e){return e.settled}),this.max_transfer_id-this.next_transfer_id<this.window/2&&e._write_flow()},h.prototype.on_begin=function(e){this.remote_window=e.outgoing_window,this.remote_next_transfer_id=e.next_outgoing_id},h.prototype.on_flow=function(e){this.remote_next_transfer_id=e.next_outgoing_id,this.remote_window=e.outgoing_window},h.prototype.on_disposition=function(e){for(var t=e.last?e.last:e.first,r=e.first;r<=t;r++){var n=this.deliveries.by_id(r);n&&!n.remote_settled&&(e.state&&e.state!==n.remote_state&&(n.remote_state=s.unwrap_outcome(e.state)),e.settled&&(n.remote_settled=e.settled,n.link.dispatch("settled",n.link._context({delivery:n}))))}};var f=function(e,t){this.connection=e,this.outgoing=new d(e),this.incoming=new h,this.state=new u,this.local={channel:t,handles:{}},this.local.begin=n.begin({next_outgoing_id:this.outgoing.next_transfer_id,incoming_window:this.incoming.window,outgoing_window:this.outgoing.window}),this.local.end=n.end(),this.remote={handles:{}},this.links={},this.options={},Object.defineProperty(this,"error",{get:function(){return this.remote.end?this.remote.end.error:void 0}}),this.observers=new l};function attach(e,t,r,n){var i=Object.create(n||{});"string"==typeof t?i[r]=t:t&&function merge(e,t){for(var r in t)"properties"===r&&e.properties?merge(e.properties,t.properties):e[r]=t[r]}(i,t),i.name||(i.name=c.generate_uuid());var o=e(i.name,i);for(var s in{source:0,target:0})i[s]&&("string"==typeof i[s]&&(i[s]={address:i[s]}),o["set_"+s](i[s]));return o.is_sender()&&void 0===i.source&&(i.source=o.set_source({})),o.is_receiver()&&void 0===i.target&&(i.target=o.set_target({})),o.attach(),o}function notify_sendable(e){e.dispatch("sendable",e._context())}function is_sender_sendable(e){return e.is_open()&&e.sendable()}(f.prototype=Object.create(l.prototype)).constructor=f,f.prototype._disconnect=function(){for(var e in this.state.disconnected(),this.links)this.links[e]._disconnect();this.state.was_open||this.remove()},f.prototype._reconnect=function(){for(var e in this.state.reconnect(),this.outgoing=new d(this.connection),this.incoming=new h,this.remote={handles:{}},this.links)this.links[e]._reconnect()},f.prototype.dispatch=function(e){return o.events("[%s] Session got event: %s",this.connection.options.id,e),l.prototype.emit.apply(this.observers,arguments),this.listeners(e).length?(l.prototype.emit.apply(this,arguments),!0):this.connection.dispatch.apply(this.connection,arguments)},f.prototype.output=function(e,t){this.connection._write_frame(this.local.channel,e,t)},f.prototype.create_sender=function(e,t){return this.create_link(e,i.Sender,t)},f.prototype.create_receiver=function(e,t){return this.create_link(e,i.Receiver,t)},f.prototype.get_option=function(e,t){return void 0!==this.options[e]?this.options[e]:this.connection.get_option(e,t)},f.prototype.attach_sender=function(e){return attach(this.create_sender.bind(this),e,"target",this.get_option("sender_options",{}))},f.prototype.open_sender=f.prototype.attach_sender,f.prototype.attach_receiver=function(e){return attach(this.create_receiver.bind(this),e,"source",this.get_option("receiver_options",{}))},f.prototype.open_receiver=f.prototype.attach_receiver,f.prototype.find_sender=function(e){return this.find_link(c.sender_filter(e))},f.prototype.find_receiver=function(e){return this.find_link(c.receiver_filter(e))},f.prototype.find_link=function(e){for(var t in this.links){var r=this.links[t];if(e(r))return r}},f.prototype.each_receiver=function(e,t){this.each_link(e,c.receiver_filter(t))},f.prototype.each_sender=function(e,t){this.each_link(e,c.sender_filter(t))},f.prototype.each_link=function(e,t){for(var r in this.links){var n=this.links[r];(void 0===t||t(n))&&e(n)}},f.prototype.create_link=function(e,t,r){for(var n=0;this.local.handles[n];)n++;var i=new t(this,e,n,r);return this.links[e]=i,this.local.handles[n]=i,i},f.prototype.begin=function(){this.state.open()&&this.connection._register()},f.prototype.open=f.prototype.begin,f.prototype.end=function(e){e&&(this.local.end.error=e),this.state.close()&&this.connection._register()},f.prototype.close=f.prototype.end,f.prototype.is_open=function(){return this.connection.is_open()&&this.state.is_open()},f.prototype.is_remote_open=function(){return this.connection.is_remote_open()&&this.state.remote_open},f.prototype.is_itself_closed=function(){return this.state.is_closed()},f.prototype.is_closed=function(){return this.connection.is_closed()||this.is_itself_closed()},f.prototype._process=function(){do{this.state.need_open()&&this.output(this.local.begin);var e=0===this.outgoing.deliveries.available();for(var t in this.outgoing.process(),e&&this.outgoing.deliveries.available()&&this.each_sender(notify_sendable,is_sender_sendable),this.incoming.process(this),this.links)this.links[t]._process();this.state.need_close()&&this.output(this.local.end)}while(!this.state.has_settled())},f.prototype.send=function(e,t,r,n){var i=this.outgoing.send(e,t,r,n);return this.connection._register(),i},f.prototype._write_flow=function(e){var t={next_incoming_id:this.incoming.next_transfer_id,incoming_window:this.incoming.window,next_outgoing_id:this.outgoing.next_transfer_id,outgoing_window:this.outgoing.window};this.incoming.max_transfer_id=t.next_incoming_id+t.incoming_window,e&&(e._get_drain()&&(t.drain=!0),t.delivery_count=e.delivery_count,t.handle=e.local.handle,t.link_credit=e.credit),this.output(n.flow(t))},f.prototype.on_begin=function(e){if(!this.state.remote_opened())throw Error("Begin already received");this.remote.channel||(this.remote.channel=e.channel),this.remote.begin=e.performative,this.outgoing.on_begin(e.performative),this.incoming.on_begin(e.performative),this.open(),this.dispatch("session_open",this._context())},f.prototype.on_end=function(e){if(!this.state.remote_closed())throw Error("End already received");this.remote.end=e.performative;var t=this.remote.end.error;if(t){var r=this.dispatch("session_error",this._context());(r=this.dispatch("session_close",this._context())||r)||l.prototype.emit.call(this.connection.container,"error",new SessionError(t.description,t.condition,this))}else this.dispatch("session_close",this._context());var n=this,i=this.state.mark();process.nextTick(function(){n.state.marker===i&&(n.close(),process.nextTick(function(){n.remove()}))})},f.prototype.on_attach=function(e){var t=e.performative.name,r=this.links[t];r||(r=e.performative.role?this.create_sender(t):this.create_receiver(t)),this.remote.handles[e.performative.handle]=r,r.on_attach(e),r.remote.attach=e.performative},f.prototype.on_disposition=function(e){e.performative.role?(o.events("[%s] Received disposition for outgoing transfers",this.connection.options.id),this.outgoing.on_disposition(e.performative)):(o.events("[%s] Received disposition for incoming transfers",this.connection.options.id),this.incoming.on_disposition(e.performative)),this.connection._register()},f.prototype.on_flow=function(e){this.outgoing.on_flow(e.performative),this.incoming.on_flow(e.performative),c.is_defined(e.performative.handle)&&this._get_link(e).on_flow(e),this.connection._register()},f.prototype._context=function(e){var t=e||{};return t.session=this,this.connection._context(t)},f.prototype._get_link=function(e){var t=e.performative.handle,r=this.remote.handles[t];if(!r)throw Error("Invalid handle "+t);return r},f.prototype.on_detach=function(e){this._get_link(e).on_detach(e)},f.prototype.remove_link=function(e){delete this.remote.handles[e.remote.handle],delete this.local.handles[e.local.handle],delete this.links[e.name]},f.prototype.remove=function(){this.connection.remove_session(this)},f.prototype.on_transfer=function(e){this.incoming.on_transfer(e,this._get_link(e))},e.exports=f},function(e,t,r){"use strict";var n=r(127),i=r(98),o=r(220),s=r(902),a=r(219),c=function(e){this.window=e};function auto_settle(e){e.delivery.settled=!0}function auto_accept(e){e.delivery.update(void 0,o.accepted().described())}function LinkError(e,t,r){Error.call(this),Error.captureStackTrace(this,this.constructor),this.message=e,this.condition=t,this.description=e,this.link=r}c.prototype.update=function(e){var t=this.window-e.receiver.credit;t>=this.window/4&&e.receiver.flow(t)},r(1).inherits(LinkError,Error);var u=r(5).EventEmitter,l=Object.create(u.prototype);function is_internal(e){switch(e){case"name":case"handle":case"role":case"initial_delivery_count":return!0;default:return!1}}l.dispatch=function(e){return i.events("[%s] Link got event: %s",this.connection.options.id,e),u.prototype.emit.apply(this.observers,arguments),this.listeners(e).length?(u.prototype.emit.apply(this,arguments),!0):this.session.dispatch.apply(this.session,arguments)},l.set_source=function(e){this.local.attach.source=s.source(e).described()},l.set_target=function(e){this.local.attach.target=s.target(e).described()},l.attach=function(){this.state.open()&&this.connection._register()},l.open=l.attach,l.detach=function(){this.local.detach.closed=!1,this.state.close()&&this.connection._register()},l.close=function(e){e&&(this.local.detach.error=e),this.local.detach.closed=!0,this.state.close()&&this.connection._register()},l.remove=function(){this.session.remove_link(this)},l.is_open=function(){return this.session.is_open()&&this.state.is_open()},l.is_remote_open=function(){return this.session.is_remote_open()&&this.state.remote_open},l.is_itself_closed=function(){return this.state.is_closed()},l.is_closed=function(){return this.session.is_closed()||this.is_itself_closed()},l._process=function(){do{this.state.need_open()&&this.session.output(this.local.attach),this.issue_flow&&this.state.local_open&&(this.session._write_flow(this),this.issue_flow=!1),this.state.need_close()&&this.session.output(this.local.detach)}while(!this.state.has_settled())},l.on_attach=function(e){if(!this.state.remote_opened())throw Error("Attach already received");this.remote.handle||(this.remote.handle=e.handle),e.performative.source=s.unwrap(e.performative.source),e.performative.target=s.unwrap(e.performative.target),this.remote.attach=e.performative,this.open(),this.dispatch(this.is_receiver()?"receiver_open":"sender_open",this._context())},l.prefix_event=function(e){return(this.local.attach.role?"receiver_":"sender_")+e},l.on_detach=function(e){if(!this.state.remote_closed())throw Error("Detach already received");this.remote.detach=e.performative;var t=this.remote.detach.error;if(t){var r=this.dispatch(this.prefix_event("error"),this._context());(r=this.dispatch(this.prefix_event("close"),this._context())||r)||u.prototype.emit.call(this.connection.container,"error",new LinkError(t.description,t.condition,this))}else this.dispatch(this.prefix_event("close"),this._context());var n=this,i=this.state.mark();process.nextTick(function(){n.state.marker===i&&(n.close(),process.nextTick(function(){n.remove()}))})};var p=["snd_settle_mode","rcv_settle_mode","source","target","max_message_size","offered_capabilities","desired_capabilities","properties"];function remote_property_shortcut(e){return function(){return this.remote.attach?this.remote.attach[e]:void 0}}l.init=function(e,t,r,i,o){for(var s in this.session=e,this.connection=e.connection,this.name=t,this.options=void 0===i?{}:i,this.state=new a,this.issue_flow=!1,this.local={handle:r},this.local.attach=n.attach({handle:r,name:t,role:o}),this.local.attach)is_internal(s)||void 0===this.options[s]||(this.local.attach[s]=this.options[s]);for(var c in this.local.detach=n.detach({handle:r,closed:!0}),this.remote={handle:void 0},this.delivery_count=0,this.credit=0,this.observers=new u,p){var l=p[c];Object.defineProperty(this,l,{get:remote_property_shortcut(l)})}Object.defineProperty(this,"error",{get:function(){return this.remote.detach?this.remote.detach.error:void 0}})},l._disconnect=function(){this.state.disconnected(),this.state.was_open||this.remove()},l._reconnect=function(){this.state.reconnect(),this.remote={handle:void 0},this.delivery_count=0,this.credit=0},l.has_credit=function(){return this.credit>0},l.is_receiver=function(){return this.local.attach.role},l.is_sender=function(){return!this.is_receiver()},l._context=function(e){var t=e||{};return this.is_receiver()?t.receiver=this:t.sender=this,this.session._context(t)},l.get_option=function(e,t){return void 0!==this.options[e]?this.options[e]:this.session.get_option(e,t)};var d=function(e,t,r,n){this.init(e,t,r,n,!1),this._draining=!1,this._drained=!1,this.local.attach.initial_delivery_count=0,this.tag=0,this.get_option("autosettle",!0)&&this.observers.on("settled",auto_settle);var i=this;this.get_option("treat_modified_as_released",!0)&&this.observers.on("modified",function(e){i.dispatch("released",e)})};(d.prototype=Object.create(l)).constructor=d,d.prototype._get_drain=function(){if(this._draining&&this._drained&&this.credit){for(;this.credit;)++this.delivery_count,--this.credit;return!0}return!1},d.prototype.set_drained=function(e){this._drained=e,this._draining&&this._drained&&(this.issue_flow=!0)},d.prototype.next_tag=function(){return Buffer.from(new String(this.tag++))},d.prototype.sendable=function(){return Boolean(this.credit&&this.session.outgoing.available())},d.prototype.on_flow=function(e){var t=e.performative;this.credit=t.delivery_count+t.link_credit-this.delivery_count,this._draining=t.drain,this._drained=this.credit>0,this.is_open()&&(this.dispatch("sender_flow",this._context()),this._draining&&this.dispatch("sender_draining",this._context()),this.sendable()&&this.dispatch("sendable",this._context()))},d.prototype.on_transfer=function(){throw Error("got transfer on sending link")},d.prototype.send=function(e,t,r){var n=void 0===r?o.encode(e):e,i=this.session.send(this,t||this.next_tag(),n,r);return 1===this.local.attach.snd_settle_mode&&(i.settled=!0),i};var h=function(e,t,r,n){this.init(e,t,r,n,!0),this.drain=!1,this.set_credit_window(this.get_option("credit_window",1e3)),this.get_option("autoaccept",!0)&&this.observers.on("message",auto_accept),1===this.local.attach.rcv_settle_mode&&this.get_option("autosettle",!0)&&this.observers.on("settled",auto_settle)};(h.prototype=Object.create(l)).constructor=h,h.prototype.on_flow=function(e){this.dispatch("receiver_flow",this._context()),e.performative.drain&&(this.credit=e.performative.link_credit,this.delivery_count=e.performative.delivery_count,e.performative.link_credit>0?console.error("ERROR: received flow with drain set, but non zero credit"):this.dispatch("receiver_drained",this._context()))},h.prototype.flow=function(e){e>0&&(this.credit+=e,this.issue_flow=!0,this.connection._register())},h.prototype.add_credit=h.prototype.flow,h.prototype._get_drain=function(){return this.drain},h.prototype.set_credit_window=function(e){if(e>0){var t=new c(e),r=t.update.bind(t);this.observers.on("message",r),this.observers.on("receiver_open",r)}},e.exports={Sender:d,Receiver:h}},function(e,t,r){"use strict";var n=r(97),i={},o={};function define_terminus(e){var t=n.define_composite(e);i[e.name]=t.create,o[Number(t.descriptor.numeric).toString(10)]=t,o[t.descriptor.symbolic]=t}i.unwrap=function(e){if(e&&e.descriptor){var t=o[e.descriptor.value];if(t)return new t(e.value);console.warn("Unknown terminus: "+e.descriptor)}return null},define_terminus({name:"source",code:40,fields:[{name:"address",type:"string"},{name:"durable",type:"uint",default_value:0},{name:"expiry_policy",type:"symbol",default_value:"session-end"},{name:"timeout",type:"uint",default_value:0},{name:"dynamic",type:"boolean",default_value:!1},{name:"dynamic_node_properties",type:"symbolic_map"},{name:"distribution_mode",type:"symbol"},{name:"filter",type:"symbolic_map"},{name:"default_outcome",type:"*"},{name:"outcomes",type:"symbol",multiple:!0},{name:"capabilities",type:"symbol",multiple:!0}]}),define_terminus({name:"target",code:41,fields:[{name:"address",type:"string"},{name:"durable",type:"uint",default_value:0},{name:"expiry_policy",type:"symbol",default_value:"session-end"},{name:"timeout",type:"uint",default_value:0},{name:"dynamic",type:"boolean",default_value:!1},{name:"dynamic_node_properties",type:"symbolic_map"},{name:"capabilities",type:"symbol",multiple:!0}]}),e.exports=i},function(e,t,r){"use strict";var n,i,o,s;!function(e){e.message="message",e.receiverOpen="receiver_open",e.receiverDrained="receiver_drained",e.receiverFlow="receiver_flow",e.receiverError="receiver_error",e.receiverClose="receiver_close",e.settled="settled"}(n||(n={})),function(e){e.sendable="sendable",e.senderOpen="sender_open",e.senderDraining="sender_draining",e.senderFlow="sender_flow",e.senderError="sender_error",e.senderClose="sender_close",e.accepted="accepted",e.released="released",e.rejected="rejected",e.modified="modified",e.settled="settled"}(i||(i={})),function(e){e.sessionOpen="session_open",e.sessionError="session_error",e.sessionClose="session_close",e.settled="settled"}(o||(o={})),function(e){e.connectionOpen="connection_open",e.connectionClose="connection_close",e.connectionError="connection_error",e.protocolError="protocol_error",e.error="error",e.disconnected="disconnected",e.settled="settled"}(s||(s={})),e.exports={ReceiverEvents:n,SenderEvents:i,SessionEvents:o,ConnectionEvents:s}},function(e,t,r){"use strict";function nulltransform(e){return e}function from_arraybuffer(e){return e instanceof ArrayBuffer?Buffer.from(new Uint8Array(e)):Buffer.from(e)}function to_typedarray(e){return new Uint8Array(e)}function wrap(e){var t=nulltransform,r=nulltransform;return e.binaryType&&(e.binaryType="arraybuffer",t=from_arraybuffer,r=to_typedarray),{end:function(){e.close()},write:function(t){try{e.send(r(t),{binary:!0})}catch(t){e.onerror(t)}},on:function(r,n){"data"===r?e.onmessage=function(e){n(t(e.data))}:"end"===r?e.onclose=n:"error"===r?e.onerror=n:console.error("ERROR: Attempt to set unrecognised handler on websocket wrapper: "+r)},get_id_string:function(){return e.url}}}e.exports={connect:function(e){return function(t,r,n){return function(){return{connect:function(i,o,s,a){var c=new e(t,r,n);return c.onopen=a,wrap(c)}}}}},wrap:wrap}},function(e,t,r){"use strict";var n=r(97);e.exports={selector:function(e){return{"jms-selector":n.wrap_described(e,77567109365764)}}}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.defaultOperationTimeoutInSeconds=60},function(e,t,r){"use strict";var n=function(e){e=e||{},this.Promise=e.Promise||Promise,this.queues={},this.domains={},this.domainReentrant=e.domainReentrant||!1,this.timeout=e.timeout||n.DEFAULT_TIMEOUT,this.maxPending=e.maxPending||n.DEFAULT_MAX_PENDING};n.DEFAULT_TIMEOUT=0,n.DEFAULT_MAX_PENDING=1e3,n.prototype.acquire=function(e,t,r,n){if(Array.isArray(e))return this._acquireBatch(e,t,r,n);if("function"!=typeof t)throw new Error("You must pass a function to execute");var i=null,o=null,s=null;"function"!=typeof r&&(n=r,r=null,s=new this.Promise(function(e,t){i=e,o=t})),n=n||{};var a=!1,c=null,u=this,l=function(t,n,c){t&&(0===u.queues[e].length&&delete u.queues[e],delete u.domains[e]),a||(s?n?o(n):i(c):"function"==typeof r&&r(n,c),a=!0),t&&u.queues[e]&&u.queues[e].length>0&&u.queues[e].shift()()},p=function(r){if(a)return l(r);if(c&&(clearTimeout(c),c=null),r&&(u.domains[e]=process.domain),1===t.length){var n=!1;t(function(e,t){n||(n=!0,l(r,e,t))})}else u._promiseTry(function(){return t()}).then(function(e){l(r,void 0,e)},function(e){l(r,e)})};if(process.domain&&(p=process.domain.bind(p)),u.queues[e])if(u.domainReentrant&&process.domain&&process.domain===u.domains[e])p(!1);else if(u.queues[e].length>=u.maxPending)l(!1,new Error("Too much pending tasks"));else{var d=function(){p(!0)};n.skipQueue?u.queues[e].unshift(d):u.queues[e].push(d);var h=n.timeout||u.timeout;h&&(c=setTimeout(function(){c=null,l(!1,new Error("async-lock timed out"))},h))}else u.queues[e]=[],p(!0);return s||void 0},n.prototype._acquireBatch=function(e,t,r,n){"function"!=typeof r&&(n=r,r=null);var i=this,o=t;if(e.reverse().forEach(function(e){o=function(e,t){return function(r){i.acquire(e,t,r,n)}}(e,o)}),"function"!=typeof r)return new this.Promise(function(e,t){1===o.length?o(function(r,n){r?t(r):e(n)}):e(o())});o(r)},n.prototype.isBusy=function(e){return e?!!this.queues[e]:Object.keys(this.queues).length>0},n.prototype._promiseTry=function(e){try{return this.Promise.resolve(e())}catch(e){return this.Promise.reject(e)}},e.exports=n},function(e,t,r){"use strict";function _typeof(e){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function _typeof(e){return typeof e}:function _typeof(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}t.log=function log(){var e;return"object"===("undefined"==typeof console?"undefined":_typeof(console))&&console.log&&(e=console).log.apply(e,arguments)},t.formatArgs=function formatArgs(t){if(t[0]=(this.useColors?"%c":"")+this.namespace+(this.useColors?" %c":" ")+t[0]+(this.useColors?"%c ":" ")+"+"+e.exports.humanize(this.diff),!this.useColors)return;var r="color: "+this.color;t.splice(1,0,r,"color: inherit");var n=0,i=0;t[0].replace(/%[a-zA-Z%]/g,function(e){"%%"!==e&&(n++,"%c"===e&&(i=n))}),t.splice(i,0,r)},t.save=function save(e){try{e?t.storage.setItem("debug",e):t.storage.removeItem("debug")}catch(e){}},t.load=function load(){var e;try{e=t.storage.getItem("debug")}catch(e){}!e&&"undefined"!=typeof process&&"env"in process&&(e=process.env.DEBUG);return e},t.useColors=function useColors(){if("undefined"!=typeof window&&window.process&&("renderer"===window.process.type||window.process.__nwjs))return!0;if("undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/))return!1;return"undefined"!=typeof document&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||"undefined"!=typeof window&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||"undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31||"undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/)},t.storage=function localstorage(){try{return localStorage}catch(e){}}(),t.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"],e.exports=r(389)(t),e.exports.formatters.j=function(e){try{return JSON.stringify(e)}catch(e){return"[UnexpectedJSONParseError]: "+e.message}}},function(e,t){var r=1e3,n=60*r,i=60*n,o=24*i,s=7*o,a=365.25*o;function plural(e,t,r,n){var i=t>=1.5*r;return Math.round(e/r)+" "+n+(i?"s":"")}e.exports=function(e,t){t=t||{};var c=typeof e;if("string"===c&&e.length>0)return function parse(e){if((e=String(e)).length>100)return;var t=/^((?:\d+)?\-?\d?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(e);if(!t)return;var c=parseFloat(t[1]);switch((t[2]||"ms").toLowerCase()){case"years":case"year":case"yrs":case"yr":case"y":return c*a;case"weeks":case"week":case"w":return c*s;case"days":case"day":case"d":return c*o;case"hours":case"hour":case"hrs":case"hr":case"h":return c*i;case"minutes":case"minute":case"mins":case"min":case"m":return c*n;case"seconds":case"second":case"secs":case"sec":case"s":return c*r;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return c;default:return}}(e);if("number"===c&&!1===isNaN(e))return t.long?function fmtLong(e){var t=Math.abs(e);if(t>=o)return plural(e,t,o,"day");if(t>=i)return plural(e,t,i,"hour");if(t>=n)return plural(e,t,n,"minute");if(t>=r)return plural(e,t,r,"second");return e+" ms"}(e):function fmtShort(e){var t=Math.abs(e);if(t>=o)return Math.round(e/o)+"d";if(t>=i)return Math.round(e/i)+"h";if(t>=n)return Math.round(e/n)+"m";if(t>=r)return Math.round(e/r)+"s";return e+"ms"}(e);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(e))}},function(e,t,r){"use strict";var n=r(51),i=r(1);t.init=function init(e){e.inspectOpts={};for(var r=Object.keys(t.inspectOpts),n=0;n<r.length;n++)e.inspectOpts[r[n]]=t.inspectOpts[r[n]]},t.log=function log(){return process.stderr.write(i.format.apply(i,arguments)+"\n")},t.formatArgs=function formatArgs(r){var n=this.namespace;if(this.useColors){var i=this.color,o="[3"+(i<8?i:"8;5;"+i),s="  ".concat(o,";1m").concat(n," [0m");r[0]=s+r[0].split("\n").join("\n"+s),r.push(o+"m+"+e.exports.humanize(this.diff)+"[0m")}else r[0]=function getDate(){if(t.inspectOpts.hideDate)return"";return(new Date).toISOString()+" "}()+n+" "+r[0]},t.save=function save(e){e?process.env.DEBUG=e:delete process.env.DEBUG},t.load=function load(){return process.env.DEBUG},t.useColors=function useColors(){return"colors"in t.inspectOpts?Boolean(t.inspectOpts.colors):n.isatty(process.stderr.fd)},t.colors=[6,2,3,4,5,1];try{var o=r(49);o&&(o.stderr||o).level>=2&&(t.colors=[20,21,26,27,32,33,38,39,40,41,42,43,44,45,56,57,62,63,68,69,74,75,76,77,78,79,80,81,92,93,98,99,112,113,128,129,134,135,148,149,160,161,162,163,164,165,166,167,168,169,170,171,172,173,178,179,184,185,196,197,198,199,200,201,202,203,204,205,206,207,208,209,214,215,220,221])}catch(e){}t.inspectOpts=Object.keys(process.env).filter(function(e){return/^debug_/i.test(e)}).reduce(function(e,t){var r=t.substring(6).toLowerCase().replace(/_([a-z])/g,function(e,t){return t.toUpperCase()}),n=process.env[t];return n=!!/^(yes|on|true|enabled)$/i.test(n)||!/^(no|off|false|disabled)$/i.test(n)&&("null"===n?null:Number(n)),e[r]=n,e},{}),e.exports=r(389)(t);var s=e.exports.formatters;s.o=function(e){return this.inspectOpts.colors=this.useColors,i.inspect(e,this.inspectOpts).replace(/\s*\n\s*/g," ")},s.O=function(e){return this.inspectOpts.colors=this.useColors,i.inspect(e,this.inspectOpts)}},function(e,t,r){"use strict";var n=r(42),i=r(390),o=r(912),s=r(227);function createInstance(e){var t=new o(e),r=i(o.prototype.request,t);return n.extend(r,o.prototype,t),n.extend(r,t),r}var a=createInstance(s);a.Axios=o,a.create=function create(e){return createInstance(n.merge(s,e))},a.Cancel=r(397),a.CancelToken=r(930),a.isCancel=r(396),a.all=function all(e){return Promise.all(e)},a.spread=r(931),e.exports=a,e.exports.default=a},function(e,t,r){"use strict";var n=r(227),i=r(42),o=r(925),s=r(926);function Axios(e){this.defaults=e,this.interceptors={request:new o,response:new o}}Axios.prototype.request=function request(e){"string"==typeof e&&(e=i.merge({url:arguments[0]},arguments[1])),(e=i.merge(n,{method:"get"},this.defaults,e)).method=e.method.toLowerCase();var t=[s,void 0],r=Promise.resolve(e);for(this.interceptors.request.forEach(function unshiftRequestInterceptors(e){t.unshift(e.fulfilled,e.rejected)}),this.interceptors.response.forEach(function pushResponseInterceptors(e){t.push(e.fulfilled,e.rejected)});t.length;)r=r.then(t.shift(),t.shift());return r},i.forEach(["delete","get","head","options"],function forEachMethodNoData(e){Axios.prototype[e]=function(t,r){return this.request(i.merge(r||{},{method:e,url:t}))}}),i.forEach(["post","put","patch"],function forEachMethodWithData(e){Axios.prototype[e]=function(t,r,n){return this.request(i.merge(n||{},{method:e,url:t,data:r}))}}),e.exports=Axios},function(e,t,r){"use strict";var n=r(42);e.exports=function normalizeHeaderName(e,t){n.forEach(e,function processHeader(r,n){n!==t&&n.toUpperCase()===t.toUpperCase()&&(e[t]=r,delete e[n])})}},function(e,t,r){"use strict";var n=r(42),i=r(391),o=r(393),s=r(915),a=r(916),c=r(228),u="undefined"!=typeof window&&window.btoa&&window.btoa.bind(window)||r(917);e.exports=function xhrAdapter(e){return new Promise(function dispatchXhrRequest(t,l){var p=e.data,d=e.headers;n.isFormData(p)&&delete d["Content-Type"];var h=new XMLHttpRequest,f="onreadystatechange",m=!1;if("undefined"==typeof window||!window.XDomainRequest||"withCredentials"in h||a(e.url)||(h=new window.XDomainRequest,f="onload",m=!0,h.onprogress=function handleProgress(){},h.ontimeout=function handleTimeout(){}),e.auth){var g=e.auth.username||"",y=e.auth.password||"";d.Authorization="Basic "+u(g+":"+y)}if(h.open(e.method.toUpperCase(),o(e.url,e.params,e.paramsSerializer),!0),h.timeout=e.timeout,h[f]=function handleLoad(){if(h&&(4===h.readyState||m)&&(0!==h.status||h.responseURL&&0===h.responseURL.indexOf("file:"))){var r="getAllResponseHeaders"in h?s(h.getAllResponseHeaders()):null,n={data:e.responseType&&"text"!==e.responseType?h.response:h.responseText,status:1223===h.status?204:h.status,statusText:1223===h.status?"No Content":h.statusText,headers:r,config:e,request:h};i(t,l,n),h=null}},h.onerror=function handleError(){l(c("Network Error",e,null,h)),h=null},h.ontimeout=function handleTimeout(){l(c("timeout of "+e.timeout+"ms exceeded",e,"ECONNABORTED",h)),h=null},n.isStandardBrowserEnv()){var v=r(918),b=(e.withCredentials||a(e.url))&&e.xsrfCookieName?v.read(e.xsrfCookieName):void 0;b&&(d[e.xsrfHeaderName]=b)}if("setRequestHeader"in h&&n.forEach(d,function setRequestHeader(e,t){void 0===p&&"content-type"===t.toLowerCase()?delete d[t]:h.setRequestHeader(t,e)}),e.withCredentials&&(h.withCredentials=!0),e.responseType)try{h.responseType=e.responseType}catch(t){if("json"!==e.responseType)throw t}"function"==typeof e.onDownloadProgress&&h.addEventListener("progress",e.onDownloadProgress),"function"==typeof e.onUploadProgress&&h.upload&&h.upload.addEventListener("progress",e.onUploadProgress),e.cancelToken&&e.cancelToken.promise.then(function onCanceled(e){h&&(h.abort(),l(e),h=null)}),void 0===p&&(p=null),h.send(p)})}},function(e,t,r){"use strict";var n=r(42),i=["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"];e.exports=function parseHeaders(e){var t,r,o,s={};return e?(n.forEach(e.split("\n"),function parser(e){if(o=e.indexOf(":"),t=n.trim(e.substr(0,o)).toLowerCase(),r=n.trim(e.substr(o+1)),t){if(s[t]&&i.indexOf(t)>=0)return;s[t]="set-cookie"===t?(s[t]?s[t]:[]).concat([r]):s[t]?s[t]+", "+r:r}}),s):s}},function(e,t,r){"use strict";var n=r(42);e.exports=n.isStandardBrowserEnv()?function standardBrowserEnv(){var e,t=/(msie|trident)/i.test(navigator.userAgent),r=document.createElement("a");function resolveURL(e){var n=e;return t&&(r.setAttribute("href",n),n=r.href),r.setAttribute("href",n),{href:r.href,protocol:r.protocol?r.protocol.replace(/:$/,""):"",host:r.host,search:r.search?r.search.replace(/^\?/,""):"",hash:r.hash?r.hash.replace(/^#/,""):"",hostname:r.hostname,port:r.port,pathname:"/"===r.pathname.charAt(0)?r.pathname:"/"+r.pathname}}return e=resolveURL(window.location.href),function isURLSameOrigin(t){var r=n.isString(t)?resolveURL(t):t;return r.protocol===e.protocol&&r.host===e.host}}():function isURLSameOrigin(){return!0}},function(e,t,r){"use strict";var n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";function E(){this.message="String contains an invalid character"}E.prototype=new Error,E.prototype.code=5,E.prototype.name="InvalidCharacterError",e.exports=function btoa(e){for(var t,r,i=String(e),o="",s=0,a=n;i.charAt(0|s)||(a="=",s%1);o+=a.charAt(63&t>>8-s%1*8)){if((r=i.charCodeAt(s+=.75))>255)throw new E;t=t<<8|r}return o}},function(e,t,r){"use strict";var n=r(42);e.exports=n.isStandardBrowserEnv()?function standardBrowserEnv(){return{write:function write(e,t,r,i,o,s){var a=[];a.push(e+"="+encodeURIComponent(t)),n.isNumber(r)&&a.push("expires="+new Date(r).toGMTString()),n.isString(i)&&a.push("path="+i),n.isString(o)&&a.push("domain="+o),!0===s&&a.push("secure"),document.cookie=a.join("; ")},read:function read(e){var t=document.cookie.match(new RegExp("(^|;\\s*)("+e+")=([^;]*)"));return t?decodeURIComponent(t[3]):null},remove:function remove(e){this.write(e,"",Date.now()-864e5)}}}():{write:function write(){},read:function read(){return null},remove:function remove(){}}},function(e,t,r){"use strict";var n=r(42),i=r(391),o=r(393),s=r(23),a=r(21),c=r(394).http,u=r(394).https,l=r(7),p=r(112),d=r(924),h=r(228),f=r(392);e.exports=function httpAdapter(e){return new Promise(function dispatchHttpRequest(t,r){var m,g=e.data,y=e.headers;if(y["User-Agent"]||y["user-agent"]||(y["User-Agent"]="axios/"+d.version),g&&!n.isStream(g)){if(Buffer.isBuffer(g));else if(n.isArrayBuffer(g))g=new Buffer(new Uint8Array(g));else{if(!n.isString(g))return r(h("Data after transformation must be a string, an ArrayBuffer, a Buffer, or a Stream",e));g=new Buffer(g,"utf-8")}y["Content-Length"]=g.length}var v=void 0;e.auth&&(v=(e.auth.username||"")+":"+(e.auth.password||""));var b=l.parse(e.url),_=b.protocol||"http:";if(!v&&b.auth){var w=b.auth.split(":");v=(w[0]||"")+":"+(w[1]||"")}v&&delete y.Authorization;var E="https:"===_,S=E?e.httpsAgent:e.httpAgent,C={path:o(b.path,e.params,e.paramsSerializer).replace(/^\?/,""),method:e.method,headers:y,agent:S,auth:v};e.socketPath?C.socketPath=e.socketPath:(C.hostname=b.hostname,C.port=b.port);var x,k=e.proxy;if(!k&&!1!==k){var R=_.slice(0,-1)+"_proxy",T=process.env[R]||process.env[R.toUpperCase()];if(T){var O=l.parse(T);if(k={host:O.hostname,port:O.port},O.auth){var I=O.auth.split(":");k.auth={username:I[0],password:I[1]}}}}if(k&&(C.hostname=k.host,C.host=k.host,C.headers.host=b.hostname+(b.port?":"+b.port:""),C.port=k.port,C.path=_+"//"+b.hostname+(b.port?":"+b.port:"")+C.path,k.auth)){var N=new Buffer(k.auth.username+":"+k.auth.password,"utf8").toString("base64");C.headers["Proxy-Authorization"]="Basic "+N}e.transport?x=e.transport:0===e.maxRedirects?x=E?a:s:(e.maxRedirects&&(C.maxRedirects=e.maxRedirects),x=E?u:c),e.maxContentLength&&e.maxContentLength>-1&&(C.maxBodyLength=e.maxContentLength);var A=x.request(C,function handleResponse(n){if(!A.aborted){clearTimeout(m),m=null;var o=n;switch(n.headers["content-encoding"]){case"gzip":case"compress":case"deflate":o=o.pipe(p.createUnzip()),delete n.headers["content-encoding"]}var s=n.req||A,a={status:n.statusCode,statusText:n.statusMessage,headers:n.headers,config:e,request:s};if("stream"===e.responseType)a.data=o,i(t,r,a);else{var c=[];o.on("data",function handleStreamData(t){c.push(t),e.maxContentLength>-1&&Buffer.concat(c).length>e.maxContentLength&&r(h("maxContentLength size of "+e.maxContentLength+" exceeded",e,null,s))}),o.on("error",function handleStreamError(t){A.aborted||r(f(t,e,null,s))}),o.on("end",function handleStreamEnd(){var n=Buffer.concat(c);"arraybuffer"!==e.responseType&&(n=n.toString("utf8")),a.data=n,i(t,r,a)})}}});A.on("error",function handleRequestError(t){A.aborted||r(f(t,e,null,A))}),e.timeout&&!m&&(m=setTimeout(function handleRequestTimeout(){A.abort(),r(h("timeout of "+e.timeout+"ms exceeded",e,"ECONNABORTED",A))},e.timeout)),e.cancelToken&&e.cancelToken.promise.then(function onCanceled(e){A.aborted||(A.abort(),r(e))}),n.isStream(g)?g.pipe(A):A.end(g)})}},function(e,t,r){"use strict";"undefined"==typeof process||"renderer"===process.type||!0===process.browser||process.__nwjs?e.exports=r(921):e.exports=r(923)},function(e,t,r){"use strict";function _typeof(e){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function _typeof(e){return typeof e}:function _typeof(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}t.log=function log(){var e;return"object"===("undefined"==typeof console?"undefined":_typeof(console))&&console.log&&(e=console).log.apply(e,arguments)},t.formatArgs=function formatArgs(t){if(t[0]=(this.useColors?"%c":"")+this.namespace+(this.useColors?" %c":" ")+t[0]+(this.useColors?"%c ":" ")+"+"+e.exports.humanize(this.diff),!this.useColors)return;var r="color: "+this.color;t.splice(1,0,r,"color: inherit");var n=0,i=0;t[0].replace(/%[a-zA-Z%]/g,function(e){"%%"!==e&&(n++,"%c"===e&&(i=n))}),t.splice(i,0,r)},t.save=function save(e){try{e?t.storage.setItem("debug",e):t.storage.removeItem("debug")}catch(e){}},t.load=function load(){var e;try{e=t.storage.getItem("debug")}catch(e){}!e&&"undefined"!=typeof process&&"env"in process&&(e=process.env.DEBUG);return e},t.useColors=function useColors(){if("undefined"!=typeof window&&window.process&&("renderer"===window.process.type||window.process.__nwjs))return!0;if("undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/))return!1;return"undefined"!=typeof document&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||"undefined"!=typeof window&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||"undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31||"undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/)},t.storage=function localstorage(){try{return localStorage}catch(e){}}(),t.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"],e.exports=r(395)(t),e.exports.formatters.j=function(e){try{return JSON.stringify(e)}catch(e){return"[UnexpectedJSONParseError]: "+e.message}}},function(e,t){var r=1e3,n=60*r,i=60*n,o=24*i,s=7*o,a=365.25*o;function plural(e,t,r,n){var i=t>=1.5*r;return Math.round(e/r)+" "+n+(i?"s":"")}e.exports=function(e,t){t=t||{};var c=typeof e;if("string"===c&&e.length>0)return function parse(e){if((e=String(e)).length>100)return;var t=/^((?:\d+)?\-?\d?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(e);if(!t)return;var c=parseFloat(t[1]);switch((t[2]||"ms").toLowerCase()){case"years":case"year":case"yrs":case"yr":case"y":return c*a;case"weeks":case"week":case"w":return c*s;case"days":case"day":case"d":return c*o;case"hours":case"hour":case"hrs":case"hr":case"h":return c*i;case"minutes":case"minute":case"mins":case"min":case"m":return c*n;case"seconds":case"second":case"secs":case"sec":case"s":return c*r;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return c;default:return}}(e);if("number"===c&&!1===isNaN(e))return t.long?function fmtLong(e){var t=Math.abs(e);if(t>=o)return plural(e,t,o,"day");if(t>=i)return plural(e,t,i,"hour");if(t>=n)return plural(e,t,n,"minute");if(t>=r)return plural(e,t,r,"second");return e+" ms"}(e):function fmtShort(e){var t=Math.abs(e);if(t>=o)return Math.round(e/o)+"d";if(t>=i)return Math.round(e/i)+"h";if(t>=n)return Math.round(e/n)+"m";if(t>=r)return Math.round(e/r)+"s";return e+"ms"}(e);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(e))}},function(e,t,r){"use strict";var n=r(51),i=r(1);t.init=function init(e){e.inspectOpts={};for(var r=Object.keys(t.inspectOpts),n=0;n<r.length;n++)e.inspectOpts[r[n]]=t.inspectOpts[r[n]]},t.log=function log(){return process.stderr.write(i.format.apply(i,arguments)+"\n")},t.formatArgs=function formatArgs(r){var n=this.namespace;if(this.useColors){var i=this.color,o="[3"+(i<8?i:"8;5;"+i),s="  ".concat(o,";1m").concat(n," [0m");r[0]=s+r[0].split("\n").join("\n"+s),r.push(o+"m+"+e.exports.humanize(this.diff)+"[0m")}else r[0]=function getDate(){if(t.inspectOpts.hideDate)return"";return(new Date).toISOString()+" "}()+n+" "+r[0]},t.save=function save(e){e?process.env.DEBUG=e:delete process.env.DEBUG},t.load=function load(){return process.env.DEBUG},t.useColors=function useColors(){return"colors"in t.inspectOpts?Boolean(t.inspectOpts.colors):n.isatty(process.stderr.fd)},t.colors=[6,2,3,4,5,1];try{var o=r(49);o&&(o.stderr||o).level>=2&&(t.colors=[20,21,26,27,32,33,38,39,40,41,42,43,44,45,56,57,62,63,68,69,74,75,76,77,78,79,80,81,92,93,98,99,112,113,128,129,134,135,148,149,160,161,162,163,164,165,166,167,168,169,170,171,172,173,178,179,184,185,196,197,198,199,200,201,202,203,204,205,206,207,208,209,214,215,220,221])}catch(e){}t.inspectOpts=Object.keys(process.env).filter(function(e){return/^debug_/i.test(e)}).reduce(function(e,t){var r=t.substring(6).toLowerCase().replace(/_([a-z])/g,function(e,t){return t.toUpperCase()}),n=process.env[t];return n=!!/^(yes|on|true|enabled)$/i.test(n)||!/^(no|off|false|disabled)$/i.test(n)&&("null"===n?null:Number(n)),e[r]=n,e},{}),e.exports=r(395)(t);var s=e.exports.formatters;s.o=function(e){return this.inspectOpts.colors=this.useColors,i.inspect(e,this.inspectOpts).replace(/\s*\n\s*/g," ")},s.O=function(e){return this.inspectOpts.colors=this.useColors,i.inspect(e,this.inspectOpts)}},function(e){e.exports={_args:[["axios@0.18.0","/home/travis/build/microsoft/vscode-azure-iot-toolkit"]],_from:"axios@0.18.0",_id:"axios@0.18.0",_inBundle:!1,_integrity:"sha1-MtU+SFHv3AoRmTts0AB4nXDAUQI=",_location:"/axios",_phantomChildren:{},_requested:{type:"version",registry:!0,raw:"axios@0.18.0",name:"axios",escapedName:"axios",rawSpec:"0.18.0",saveSpec:null,fetchSpec:"0.18.0"},_requiredBy:["/","/@azure/ms-rest-js"],_resolved:"https://registry.npmjs.org/axios/-/axios-0.18.0.tgz",_spec:"0.18.0",_where:"/home/travis/build/microsoft/vscode-azure-iot-toolkit",author:{name:"Matt Zabriskie"},browser:{"./lib/adapters/http.js":"./lib/adapters/xhr.js"},bugs:{url:"https://github.com/axios/axios/issues"},bundlesize:[{path:"./dist/axios.min.js",threshold:"5kB"}],dependencies:{"follow-redirects":"^1.3.0","is-buffer":"^1.1.5"},description:"Promise based HTTP client for the browser and node.js",devDependencies:{bundlesize:"^0.5.7",coveralls:"^2.11.9","es6-promise":"^4.0.5",grunt:"^1.0.1","grunt-banner":"^0.6.0","grunt-cli":"^1.2.0","grunt-contrib-clean":"^1.0.0","grunt-contrib-nodeunit":"^1.0.0","grunt-contrib-watch":"^1.0.0","grunt-eslint":"^19.0.0","grunt-karma":"^2.0.0","grunt-ts":"^6.0.0-beta.3","grunt-webpack":"^1.0.18","istanbul-instrumenter-loader":"^1.0.0","jasmine-core":"^2.4.1",karma:"^1.3.0","karma-chrome-launcher":"^2.0.0","karma-coverage":"^1.0.0","karma-firefox-launcher":"^1.0.0","karma-jasmine":"^1.0.2","karma-jasmine-ajax":"^0.1.13","karma-opera-launcher":"^1.0.0","karma-safari-launcher":"^1.0.0","karma-sauce-launcher":"^1.1.0","karma-sinon":"^1.0.5","karma-sourcemap-loader":"^0.3.7","karma-webpack":"^1.7.0","load-grunt-tasks":"^3.5.2",minimist:"^1.2.0",sinon:"^1.17.4",typescript:"^2.0.3","url-search-params":"^0.6.1",webpack:"^1.13.1","webpack-dev-server":"^1.14.1"},homepage:"https://github.com/axios/axios",keywords:["xhr","http","ajax","promise","node"],license:"MIT",main:"index.js",name:"axios",repository:{type:"git",url:"git+https://github.com/axios/axios.git"},scripts:{build:"NODE_ENV=production grunt build",coveralls:"cat coverage/lcov.info | ./node_modules/coveralls/bin/coveralls.js",examples:"node ./examples/server.js",postversion:"git push && git push --tags",preversion:"npm test",start:"node ./sandbox/server.js",test:"grunt test && bundlesize",version:"npm run build && grunt version && git add -A dist && git add CHANGELOG.md bower.json package.json"},typings:"./index.d.ts",version:"0.18.0"}},function(e,t,r){"use strict";var n=r(42);function InterceptorManager(){this.handlers=[]}InterceptorManager.prototype.use=function use(e,t){return this.handlers.push({fulfilled:e,rejected:t}),this.handlers.length-1},InterceptorManager.prototype.eject=function eject(e){this.handlers[e]&&(this.handlers[e]=null)},InterceptorManager.prototype.forEach=function forEach(e){n.forEach(this.handlers,function forEachHandler(t){null!==t&&e(t)})},e.exports=InterceptorManager},function(e,t,r){"use strict";var n=r(42),i=r(927),o=r(396),s=r(227),a=r(928),c=r(929);function throwIfCancellationRequested(e){e.cancelToken&&e.cancelToken.throwIfRequested()}e.exports=function dispatchRequest(e){return throwIfCancellationRequested(e),e.baseURL&&!a(e.url)&&(e.url=c(e.baseURL,e.url)),e.headers=e.headers||{},e.data=i(e.data,e.headers,e.transformRequest),e.headers=n.merge(e.headers.common||{},e.headers[e.method]||{},e.headers||{}),n.forEach(["delete","get","head","post","put","patch","common"],function cleanHeaderConfig(t){delete e.headers[t]}),(e.adapter||s.adapter)(e).then(function onAdapterResolution(t){return throwIfCancellationRequested(e),t.data=i(t.data,t.headers,e.transformResponse),t},function onAdapterRejection(t){return o(t)||(throwIfCancellationRequested(e),t&&t.response&&(t.response.data=i(t.response.data,t.response.headers,e.transformResponse))),Promise.reject(t)})}},function(e,t,r){"use strict";var n=r(42);e.exports=function transformData(e,t,r){return n.forEach(r,function transform(r){e=r(e,t)}),e}},function(e,t,r){"use strict";e.exports=function isAbsoluteURL(e){return/^([a-z][a-z\d\+\-\.]*:)?\/\//i.test(e)}},function(e,t,r){"use strict";e.exports=function combineURLs(e,t){return t?e.replace(/\/+$/,"")+"/"+t.replace(/^\/+/,""):e}},function(e,t,r){"use strict";var n=r(397);function CancelToken(e){if("function"!=typeof e)throw new TypeError("executor must be a function.");var t;this.promise=new Promise(function promiseExecutor(e){t=e});var r=this;e(function cancel(e){r.reason||(r.reason=new n(e),t(r.reason))})}CancelToken.prototype.throwIfRequested=function throwIfRequested(){if(this.reason)throw this.reason},CancelToken.source=function source(){var e;return{token:new CancelToken(function executor(t){e=t}),cancel:e}},e.exports=CancelToken},function(e,t,r){"use strict";e.exports=function spread(e){return function wrap(t){return e.apply(null,t)}}},function(e,t,r){"use strict";r(47);var n,i=r(59),o=r(23),s=r(21),a=r(5),c=(r(44),r(1));function TunnelingAgent(e){var t=this;t.options=e||{},t.proxyOptions=t.options.proxy||{},t.maxSockets=t.options.maxSockets||o.Agent.defaultMaxSockets,t.requests=[],t.sockets=[],t.on("free",function onFree(e,r,n,i){for(var o=toOptions(r,n,i),s=0,a=t.requests.length;s<a;++s){var c=t.requests[s];if(c.host===o.host&&c.port===o.port)return t.requests.splice(s,1),void c.request.onSocket(e)}e.destroy(),t.removeSocket(e)})}function createSecureSocket(e,t){var r=this;TunnelingAgent.prototype.createSocket.call(r,e,function(n){var o=e.request.getHeader("host"),s=mergeOptions({},r.options,{socket:n,servername:o?o.replace(/:.*$/,""):e.host}),a=i.connect(0,s);r.sockets[r.sockets.indexOf(n)]=a,t(a)})}function toOptions(e,t,r){return"string"==typeof e?{host:e,port:t,localAddress:r}:e}function mergeOptions(e){for(var t=1,r=arguments.length;t<r;++t){var n=arguments[t];if("object"==typeof n)for(var i=Object.keys(n),o=0,s=i.length;o<s;++o){var a=i[o];void 0!==n[a]&&(e[a]=n[a])}}return e}t.httpOverHttp=function httpOverHttp(e){var t=new TunnelingAgent(e);return t.request=o.request,t},t.httpsOverHttp=function httpsOverHttp(e){var t=new TunnelingAgent(e);return t.request=o.request,t.createSocket=createSecureSocket,t.defaultPort=443,t},t.httpOverHttps=function httpOverHttps(e){var t=new TunnelingAgent(e);return t.request=s.request,t},t.httpsOverHttps=function httpsOverHttps(e){var t=new TunnelingAgent(e);return t.request=s.request,t.createSocket=createSecureSocket,t.defaultPort=443,t},c.inherits(TunnelingAgent,a.EventEmitter),TunnelingAgent.prototype.addRequest=function addRequest(e,t,r,n){var i=this,o=mergeOptions({request:e},i.options,toOptions(t,r,n));i.sockets.length>=this.maxSockets?i.requests.push(o):i.createSocket(o,function(t){function onFree(){i.emit("free",t,o)}function onCloseOrRemove(e){i.removeSocket(t),t.removeListener("free",onFree),t.removeListener("close",onCloseOrRemove),t.removeListener("agentRemove",onCloseOrRemove)}t.on("free",onFree),t.on("close",onCloseOrRemove),t.on("agentRemove",onCloseOrRemove),e.onSocket(t)})},TunnelingAgent.prototype.createSocket=function createSocket(e,t){var r=this,i={};r.sockets.push(i);var o=mergeOptions({},r.proxyOptions,{method:"CONNECT",path:e.host+":"+e.port,agent:!1,headers:{host:e.host+":"+e.port}});e.localAddress&&(o.localAddress=e.localAddress),o.proxyAuth&&(o.headers=o.headers||{},o.headers["Proxy-Authorization"]="Basic "+new Buffer(o.proxyAuth).toString("base64")),n("making CONNECT request");var s=r.request(o);function onConnect(o,a,c){var u;return s.removeAllListeners(),a.removeAllListeners(),200!==o.statusCode?(n("tunneling socket could not be established, statusCode=%d",o.statusCode),a.destroy(),(u=new Error("tunneling socket could not be established, statusCode="+o.statusCode)).code="ECONNRESET",e.request.emit("error",u),void r.removeSocket(i)):c.length>0?(n("got illegal response body from proxy"),a.destroy(),(u=new Error("got illegal response body from proxy")).code="ECONNRESET",e.request.emit("error",u),void r.removeSocket(i)):(n("tunneling connection has established"),r.sockets[r.sockets.indexOf(i)]=a,t(a))}s.useChunkedEncodingByDefault=!1,s.once("response",function onResponse(e){e.upgrade=!0}),s.once("upgrade",function onUpgrade(e,t,r){process.nextTick(function(){onConnect(e,t,r)})}),s.once("connect",onConnect),s.once("error",function onError(t){s.removeAllListeners(),n("tunneling socket could not be established, cause=%s\n",t.message,t.stack);var o=new Error("tunneling socket could not be established, cause="+t.message);o.code="ECONNRESET",e.request.emit("error",o),r.removeSocket(i)}),s.end()},TunnelingAgent.prototype.removeSocket=function removeSocket(e){var t=this.sockets.indexOf(e);if(-1!==t){this.sockets.splice(t,1);var r=this.requests.shift();r&&this.createSocket(r,function(e){r.request.onSocket(e)})}},n=process.env.NODE_DEBUG&&/\btunnel\b/.test(process.env.NODE_DEBUG)?function(){var e=Array.prototype.slice.call(arguments);"string"==typeof e[0]?e[0]="TUNNEL: "+e[0]:e.unshift("TUNNEL:"),console.error.apply(console,e)}:function(){},t.debug=n},function(e,t,r){(function(){"use strict";var e,n,i,o,s,a={}.hasOwnProperty;e=r(140),n=r(229).defaults,o=function(e){return"string"==typeof e&&(e.indexOf("&")>=0||e.indexOf(">")>=0||e.indexOf("<")>=0)},s=function(e){return"<![CDATA["+i(e)+"]]>"},i=function(e){return e.replace("]]>","]]]]><![CDATA[>")},t.Builder=function(){function Builder(e){var t,r,i;for(t in this.options={},r=n[.2])a.call(r,t)&&(i=r[t],this.options[t]=i);for(t in e)a.call(e,t)&&(i=e[t],this.options[t]=i)}return Builder.prototype.buildObject=function(t){var r,i,c,u,l,p;return r=this.options.attrkey,i=this.options.charkey,1===Object.keys(t).length&&this.options.rootName===n[.2].rootName?t=t[l=Object.keys(t)[0]]:l=this.options.rootName,p=this,c=function(e,t){var n,u,l,d,h,f;if("object"!=typeof t)p.options.cdata&&o(t)?e.raw(s(t)):e.txt(t);else if(Array.isArray(t)){for(d in t)if(a.call(t,d))for(h in u=t[d])l=u[h],e=c(e.ele(h),l).up()}else for(h in t)if(a.call(t,h))if(u=t[h],h===r){if("object"==typeof u)for(n in u)f=u[n],e=e.att(n,f)}else if(h===i)e=p.options.cdata&&o(u)?e.raw(s(u)):e.txt(u);else if(Array.isArray(u))for(d in u)a.call(u,d)&&(e="string"==typeof(l=u[d])?p.options.cdata&&o(l)?e.ele(h).raw(s(l)).up():e.ele(h,l).up():c(e.ele(h),l).up());else"object"==typeof u?e=c(e.ele(h),u).up():"string"==typeof u&&p.options.cdata&&o(u)?e=e.ele(h).raw(s(u)).up():(null==u&&(u=""),e=e.ele(h,u.toString()).up());return e},u=e.create(l,this.options.xmldec,this.options.doctype,{headless:this.options.headless,allowSurrogateChars:this.options.allowSurrogateChars}),c(u,t).end(this.options.renderOpts)},Builder}()}).call(this)},function(e,t,r){(function(){"use strict";var e,n,i,o,s,a,c,u,l=function(e,t){return function(){return e.apply(t,arguments)}},p={}.hasOwnProperty;c=r(935),i=r(5),e=r(936),a=r(398),u=r(271).setImmediate,n=r(229).defaults,o=function(e){return"object"==typeof e&&null!=e&&0===Object.keys(e).length},s=function(e,t,r){var n,i;for(n=0,i=e.length;n<i;n++)t=(0,e[n])(t,r);return t},t.Parser=function(r){function Parser(e){var r,i,o;if(this.parseString=l(this.parseString,this),this.reset=l(this.reset,this),this.assignOrPush=l(this.assignOrPush,this),this.processAsync=l(this.processAsync,this),!(this instanceof t.Parser))return new t.Parser(e);for(r in this.options={},i=n[.2])p.call(i,r)&&(o=i[r],this.options[r]=o);for(r in e)p.call(e,r)&&(o=e[r],this.options[r]=o);this.options.xmlns&&(this.options.xmlnskey=this.options.attrkey+"ns"),this.options.normalizeTags&&(this.options.tagNameProcessors||(this.options.tagNameProcessors=[]),this.options.tagNameProcessors.unshift(a.normalize)),this.reset()}return function(e,t){for(var r in t)p.call(t,r)&&(e[r]=t[r]);function ctor(){this.constructor=e}ctor.prototype=t.prototype,e.prototype=new ctor,e.__super__=t.prototype}(Parser,i.EventEmitter),Parser.prototype.processAsync=function(){var e,t;try{return this.remaining.length<=this.options.chunkSize?(e=this.remaining,this.remaining="",this.saxParser=this.saxParser.write(e),this.saxParser.close()):(e=this.remaining.substr(0,this.options.chunkSize),this.remaining=this.remaining.substr(this.options.chunkSize,this.remaining.length),this.saxParser=this.saxParser.write(e),u(this.processAsync))}catch(e){if(t=e,!this.saxParser.errThrown)return this.saxParser.errThrown=!0,this.emit(t)}},Parser.prototype.assignOrPush=function(e,t,r){return t in e?(e[t]instanceof Array||(e[t]=[e[t]]),e[t].push(r)):this.options.explicitArray?e[t]=[r]:e[t]=r},Parser.prototype.reset=function(){var e,t,r,n,i;return this.removeAllListeners(),this.saxParser=c.parser(this.options.strict,{trim:!1,normalize:!1,xmlns:this.options.xmlns}),this.saxParser.errThrown=!1,this.saxParser.onerror=(i=this,function(e){if(i.saxParser.resume(),!i.saxParser.errThrown)return i.saxParser.errThrown=!0,i.emit("error",e)}),this.saxParser.onend=function(e){return function(){if(!e.saxParser.ended)return e.saxParser.ended=!0,e.emit("end",e.resultObject)}}(this),this.saxParser.ended=!1,this.EXPLICIT_CHARKEY=this.options.explicitCharkey,this.resultObject=null,n=[],e=this.options.attrkey,t=this.options.charkey,this.saxParser.onopentag=function(r){return function(i){var o,a,c,u,l;if((c={})[t]="",!r.options.ignoreAttrs)for(o in l=i.attributes)p.call(l,o)&&(e in c||r.options.mergeAttrs||(c[e]={}),a=r.options.attrValueProcessors?s(r.options.attrValueProcessors,i.attributes[o],o):i.attributes[o],u=r.options.attrNameProcessors?s(r.options.attrNameProcessors,o):o,r.options.mergeAttrs?r.assignOrPush(c,u,a):c[e][u]=a);return c["#name"]=r.options.tagNameProcessors?s(r.options.tagNameProcessors,i.name):i.name,r.options.xmlns&&(c[r.options.xmlnskey]={uri:i.uri,local:i.local}),n.push(c)}}(this),this.saxParser.onclosetag=function(e){return function(){var r,i,a,c,u,l,d,h,f,m;if(l=n.pop(),u=l["#name"],e.options.explicitChildren&&e.options.preserveChildrenOrder||delete l["#name"],!0===l.cdata&&(r=l.cdata,delete l.cdata),f=n[n.length-1],l[t].match(/^\s*$/)&&!r?(i=l[t],delete l[t]):(e.options.trim&&(l[t]=l[t].trim()),e.options.normalize&&(l[t]=l[t].replace(/\s{2,}/g," ").trim()),l[t]=e.options.valueProcessors?s(e.options.valueProcessors,l[t],u):l[t],1===Object.keys(l).length&&t in l&&!e.EXPLICIT_CHARKEY&&(l=l[t])),o(l)&&(l=""!==e.options.emptyTag?e.options.emptyTag:i),null!=e.options.validator&&(m="/"+function(){var e,t,r;for(r=[],e=0,t=n.length;e<t;e++)c=n[e],r.push(c["#name"]);return r}().concat(u).join("/"),function(){var t;try{l=e.options.validator(m,f&&f[u],l)}catch(r){return t=r,e.emit("error",t)}}()),e.options.explicitChildren&&!e.options.mergeAttrs&&"object"==typeof l)if(e.options.preserveChildrenOrder){if(f){for(a in f[e.options.childkey]=f[e.options.childkey]||[],d={},l)p.call(l,a)&&(d[a]=l[a]);f[e.options.childkey].push(d),delete l["#name"],1===Object.keys(l).length&&t in l&&!e.EXPLICIT_CHARKEY&&(l=l[t])}}else c={},e.options.attrkey in l&&(c[e.options.attrkey]=l[e.options.attrkey],delete l[e.options.attrkey]),!e.options.charsAsChildren&&e.options.charkey in l&&(c[e.options.charkey]=l[e.options.charkey],delete l[e.options.charkey]),Object.getOwnPropertyNames(l).length>0&&(c[e.options.childkey]=l),l=c;return n.length>0?e.assignOrPush(f,u,l):(e.options.explicitRoot&&(h=l,(l={})[u]=h),e.resultObject=l,e.saxParser.ended=!0,e.emit("end",e.resultObject))}}(this),r=function(e){return function(r){var i,o;if(o=n[n.length-1])return o[t]+=r,e.options.explicitChildren&&e.options.preserveChildrenOrder&&e.options.charsAsChildren&&(e.options.includeWhiteChars||""!==r.replace(/\\n/g,"").trim())&&(o[e.options.childkey]=o[e.options.childkey]||[],(i={"#name":"__text__"})[t]=r,e.options.normalize&&(i[t]=i[t].replace(/\s{2,}/g," ").trim()),o[e.options.childkey].push(i)),o}}(this),this.saxParser.ontext=r,this.saxParser.oncdata=function(e){var t;if(t=r(e))return t.cdata=!0}},Parser.prototype.parseString=function(t,r){var n;null!=r&&"function"==typeof r&&(this.on("end",function(e){return this.reset(),r(null,e)}),this.on("error",function(e){return this.reset(),r(e)}));try{return""===(t=t.toString()).trim()?(this.emit("end",null),!0):(t=e.stripBOM(t),this.options.async?(this.remaining=t,u(this.processAsync),this.saxParser):this.saxParser.write(t).close())}catch(e){if(n=e,!this.saxParser.errThrown&&!this.saxParser.ended)return this.emit("error",n),this.saxParser.errThrown=!0;if(this.saxParser.ended)throw n}},Parser}(),t.parseString=function(e,r,n){var i,o;return null!=n?("function"==typeof n&&(i=n),"object"==typeof r&&(o=r)):("function"==typeof r&&(i=r),o={}),new t.Parser(o).parseString(e,i)}}).call(this)},function(e,t,r){!function(e){e.parser=function(e,t){return new SAXParser(e,t)},e.SAXParser=SAXParser,e.SAXStream=SAXStream,e.createStream=function createStream(e,t){return new SAXStream(e,t)},e.MAX_BUFFER_LENGTH=65536;var t,n=["comment","sgmlDecl","textNode","tagName","doctype","procInstName","procInstBody","entity","attribName","attribValue","cdata","script"];function SAXParser(t,r){if(!(this instanceof SAXParser))return new SAXParser(t,r);!function clearBuffers(e){for(var t=0,r=n.length;t<r;t++)e[n[t]]=""}(this),this.q=this.c="",this.bufferCheckPosition=e.MAX_BUFFER_LENGTH,this.opt=r||{},this.opt.lowercase=this.opt.lowercase||this.opt.lowercasetags,this.looseCase=this.opt.lowercase?"toLowerCase":"toUpperCase",this.tags=[],this.closed=this.closedRoot=this.sawRoot=!1,this.tag=this.error=null,this.strict=!!t,this.noscript=!(!t&&!this.opt.noscript),this.state=y.BEGIN,this.strictEntities=this.opt.strictEntities,this.ENTITIES=this.strictEntities?Object.create(e.XML_ENTITIES):Object.create(e.ENTITIES),this.attribList=[],this.opt.xmlns&&(this.ns=Object.create(u)),this.trackPosition=!1!==this.opt.position,this.trackPosition&&(this.position=this.line=this.column=0),emit(this,"onready")}e.EVENTS=["text","processinginstruction","sgmldeclaration","doctype","comment","opentagstart","attribute","opentag","closetag","opencdata","cdata","closecdata","error","end","ready","script","opennamespace","closenamespace"],Object.create||(Object.create=function(e){function F(){}return F.prototype=e,new F}),Object.keys||(Object.keys=function(e){var t=[];for(var r in e)e.hasOwnProperty(r)&&t.push(r);return t}),SAXParser.prototype={end:function(){end(this)},write:function write(t){if(this.error)throw this.error;if(this.closed)return error(this,"Cannot write after close. Assign an onready handler.");if(null===t)return end(this);"object"==typeof t&&(t=t.toString());var r=0,i="";for(;i=charAt(t,r++),this.c=i,i;)switch(this.trackPosition&&(this.position++,"\n"===i?(this.line++,this.column=0):this.column++),this.state){case y.BEGIN:if(this.state=y.BEGIN_WHITESPACE,"\ufeff"===i)continue;beginWhiteSpace(this,i);continue;case y.BEGIN_WHITESPACE:beginWhiteSpace(this,i);continue;case y.TEXT:if(this.sawRoot&&!this.closedRoot){for(var a=r-1;i&&"<"!==i&&"&"!==i;)(i=charAt(t,r++))&&this.trackPosition&&(this.position++,"\n"===i?(this.line++,this.column=0):this.column++);this.textNode+=t.substring(a,r-1)}"<"!==i||this.sawRoot&&this.closedRoot&&!this.strict?(isWhitespace(i)||this.sawRoot&&!this.closedRoot||strictFail(this,"Text data outside of root node."),"&"===i?this.state=y.TEXT_ENTITY:this.textNode+=i):(this.state=y.OPEN_WAKA,this.startTagPosition=this.position);continue;case y.SCRIPT:"<"===i?this.state=y.SCRIPT_ENDING:this.script+=i;continue;case y.SCRIPT_ENDING:"/"===i?this.state=y.CLOSE_TAG:(this.script+="<"+i,this.state=y.SCRIPT);continue;case y.OPEN_WAKA:if("!"===i)this.state=y.SGML_DECL,this.sgmlDecl="";else if(isWhitespace(i));else if(isMatch(l,i))this.state=y.OPEN_TAG,this.tagName=i;else if("/"===i)this.state=y.CLOSE_TAG,this.tagName="";else if("?"===i)this.state=y.PROC_INST,this.procInstName=this.procInstBody="";else{if(strictFail(this,"Unencoded <"),this.startTagPosition+1<this.position){var c=this.position-this.startTagPosition;i=new Array(c).join(" ")+i}this.textNode+="<"+i,this.state=y.TEXT}continue;case y.SGML_DECL:(this.sgmlDecl+i).toUpperCase()===o?(emitNode(this,"onopencdata"),this.state=y.CDATA,this.sgmlDecl="",this.cdata=""):this.sgmlDecl+i==="--"?(this.state=y.COMMENT,this.comment="",this.sgmlDecl=""):(this.sgmlDecl+i).toUpperCase()===s?(this.state=y.DOCTYPE,(this.doctype||this.sawRoot)&&strictFail(this,"Inappropriately located doctype declaration"),this.doctype="",this.sgmlDecl=""):">"===i?(emitNode(this,"onsgmldeclaration",this.sgmlDecl),this.sgmlDecl="",this.state=y.TEXT):isQuote(i)?(this.state=y.SGML_DECL_QUOTED,this.sgmlDecl+=i):this.sgmlDecl+=i;continue;case y.SGML_DECL_QUOTED:i===this.q&&(this.state=y.SGML_DECL,this.q=""),this.sgmlDecl+=i;continue;case y.DOCTYPE:">"===i?(this.state=y.TEXT,emitNode(this,"ondoctype",this.doctype),this.doctype=!0):(this.doctype+=i,"["===i?this.state=y.DOCTYPE_DTD:isQuote(i)&&(this.state=y.DOCTYPE_QUOTED,this.q=i));continue;case y.DOCTYPE_QUOTED:this.doctype+=i,i===this.q&&(this.q="",this.state=y.DOCTYPE);continue;case y.DOCTYPE_DTD:this.doctype+=i,"]"===i?this.state=y.DOCTYPE:isQuote(i)&&(this.state=y.DOCTYPE_DTD_QUOTED,this.q=i);continue;case y.DOCTYPE_DTD_QUOTED:this.doctype+=i,i===this.q&&(this.state=y.DOCTYPE_DTD,this.q="");continue;case y.COMMENT:"-"===i?this.state=y.COMMENT_ENDING:this.comment+=i;continue;case y.COMMENT_ENDING:"-"===i?(this.state=y.COMMENT_ENDED,this.comment=textopts(this.opt,this.comment),this.comment&&emitNode(this,"oncomment",this.comment),this.comment=""):(this.comment+="-"+i,this.state=y.COMMENT);continue;case y.COMMENT_ENDED:">"!==i?(strictFail(this,"Malformed comment"),this.comment+="--"+i,this.state=y.COMMENT):this.state=y.TEXT;continue;case y.CDATA:"]"===i?this.state=y.CDATA_ENDING:this.cdata+=i;continue;case y.CDATA_ENDING:"]"===i?this.state=y.CDATA_ENDING_2:(this.cdata+="]"+i,this.state=y.CDATA);continue;case y.CDATA_ENDING_2:">"===i?(this.cdata&&emitNode(this,"oncdata",this.cdata),emitNode(this,"onclosecdata"),this.cdata="",this.state=y.TEXT):"]"===i?this.cdata+="]":(this.cdata+="]]"+i,this.state=y.CDATA);continue;case y.PROC_INST:"?"===i?this.state=y.PROC_INST_ENDING:isWhitespace(i)?this.state=y.PROC_INST_BODY:this.procInstName+=i;continue;case y.PROC_INST_BODY:if(!this.procInstBody&&isWhitespace(i))continue;"?"===i?this.state=y.PROC_INST_ENDING:this.procInstBody+=i;continue;case y.PROC_INST_ENDING:">"===i?(emitNode(this,"onprocessinginstruction",{name:this.procInstName,body:this.procInstBody}),this.procInstName=this.procInstBody="",this.state=y.TEXT):(this.procInstBody+="?"+i,this.state=y.PROC_INST_BODY);continue;case y.OPEN_TAG:isMatch(p,i)?this.tagName+=i:(newTag(this),">"===i?openTag(this):"/"===i?this.state=y.OPEN_TAG_SLASH:(isWhitespace(i)||strictFail(this,"Invalid character in tag name"),this.state=y.ATTRIB));continue;case y.OPEN_TAG_SLASH:">"===i?(openTag(this,!0),closeTag(this)):(strictFail(this,"Forward-slash in opening tag not followed by >"),this.state=y.ATTRIB);continue;case y.ATTRIB:if(isWhitespace(i))continue;">"===i?openTag(this):"/"===i?this.state=y.OPEN_TAG_SLASH:isMatch(l,i)?(this.attribName=i,this.attribValue="",this.state=y.ATTRIB_NAME):strictFail(this,"Invalid attribute name");continue;case y.ATTRIB_NAME:"="===i?this.state=y.ATTRIB_VALUE:">"===i?(strictFail(this,"Attribute without value"),this.attribValue=this.attribName,attrib(this),openTag(this)):isWhitespace(i)?this.state=y.ATTRIB_NAME_SAW_WHITE:isMatch(p,i)?this.attribName+=i:strictFail(this,"Invalid attribute name");continue;case y.ATTRIB_NAME_SAW_WHITE:if("="===i)this.state=y.ATTRIB_VALUE;else{if(isWhitespace(i))continue;strictFail(this,"Attribute without value"),this.tag.attributes[this.attribName]="",this.attribValue="",emitNode(this,"onattribute",{name:this.attribName,value:""}),this.attribName="",">"===i?openTag(this):isMatch(l,i)?(this.attribName=i,this.state=y.ATTRIB_NAME):(strictFail(this,"Invalid attribute name"),this.state=y.ATTRIB)}continue;case y.ATTRIB_VALUE:if(isWhitespace(i))continue;isQuote(i)?(this.q=i,this.state=y.ATTRIB_VALUE_QUOTED):(strictFail(this,"Unquoted attribute value"),this.state=y.ATTRIB_VALUE_UNQUOTED,this.attribValue=i);continue;case y.ATTRIB_VALUE_QUOTED:if(i!==this.q){"&"===i?this.state=y.ATTRIB_VALUE_ENTITY_Q:this.attribValue+=i;continue}attrib(this),this.q="",this.state=y.ATTRIB_VALUE_CLOSED;continue;case y.ATTRIB_VALUE_CLOSED:isWhitespace(i)?this.state=y.ATTRIB:">"===i?openTag(this):"/"===i?this.state=y.OPEN_TAG_SLASH:isMatch(l,i)?(strictFail(this,"No whitespace between attributes"),this.attribName=i,this.attribValue="",this.state=y.ATTRIB_NAME):strictFail(this,"Invalid attribute name");continue;case y.ATTRIB_VALUE_UNQUOTED:if(!isAttribEnd(i)){"&"===i?this.state=y.ATTRIB_VALUE_ENTITY_U:this.attribValue+=i;continue}attrib(this),">"===i?openTag(this):this.state=y.ATTRIB;continue;case y.CLOSE_TAG:if(this.tagName)">"===i?closeTag(this):isMatch(p,i)?this.tagName+=i:this.script?(this.script+="</"+this.tagName,this.tagName="",this.state=y.SCRIPT):(isWhitespace(i)||strictFail(this,"Invalid tagname in closing tag"),this.state=y.CLOSE_TAG_SAW_WHITE);else{if(isWhitespace(i))continue;notMatch(l,i)?this.script?(this.script+="</"+i,this.state=y.SCRIPT):strictFail(this,"Invalid tagname in closing tag."):this.tagName=i}continue;case y.CLOSE_TAG_SAW_WHITE:if(isWhitespace(i))continue;">"===i?closeTag(this):strictFail(this,"Invalid characters in closing tag");continue;case y.TEXT_ENTITY:case y.ATTRIB_VALUE_ENTITY_Q:case y.ATTRIB_VALUE_ENTITY_U:var u,f;switch(this.state){case y.TEXT_ENTITY:u=y.TEXT,f="textNode";break;case y.ATTRIB_VALUE_ENTITY_Q:u=y.ATTRIB_VALUE_QUOTED,f="attribValue";break;case y.ATTRIB_VALUE_ENTITY_U:u=y.ATTRIB_VALUE_UNQUOTED,f="attribValue"}";"===i?(this[f]+=parseEntity(this),this.entity="",this.state=u):isMatch(this.entity.length?h:d,i)?this.entity+=i:(strictFail(this,"Invalid character in entity name"),this[f]+="&"+this.entity+i,this.entity="",this.state=u);continue;default:throw new Error(this,"Unknown state: "+this.state)}this.position>=this.bufferCheckPosition&&function checkBufferLength(t){for(var r=Math.max(e.MAX_BUFFER_LENGTH,10),i=0,o=0,s=n.length;o<s;o++){var a=t[n[o]].length;if(a>r)switch(n[o]){case"textNode":closeText(t);break;case"cdata":emitNode(t,"oncdata",t.cdata),t.cdata="";break;case"script":emitNode(t,"onscript",t.script),t.script="";break;default:error(t,"Max buffer length exceeded: "+n[o])}i=Math.max(i,a)}var c=e.MAX_BUFFER_LENGTH-i;t.bufferCheckPosition=c+t.position}(this);return this}
/*! http://mths.be/fromcodepoint v0.1.0 by @mathias */,resume:function(){return this.error=null,this},close:function(){return this.write(null)},flush:function(){!function flushBuffers(e){closeText(e),""!==e.cdata&&(emitNode(e,"oncdata",e.cdata),e.cdata=""),""!==e.script&&(emitNode(e,"onscript",e.script),e.script="")}(this)}};try{t=r(15).Stream}catch(e){t=function(){}}var i=e.EVENTS.filter(function(e){return"error"!==e&&"end"!==e});function SAXStream(e,r){if(!(this instanceof SAXStream))return new SAXStream(e,r);t.apply(this),this._parser=new SAXParser(e,r),this.writable=!0,this.readable=!0;var n=this;this._parser.onend=function(){n.emit("end")},this._parser.onerror=function(e){n.emit("error",e),n._parser.error=null},this._decoder=null,i.forEach(function(e){Object.defineProperty(n,"on"+e,{get:function(){return n._parser["on"+e]},set:function(t){if(!t)return n.removeAllListeners(e),n._parser["on"+e]=t,t;n.on(e,t)},enumerable:!0,configurable:!1})})}SAXStream.prototype=Object.create(t.prototype,{constructor:{value:SAXStream}}),SAXStream.prototype.write=function(e){if("function"==typeof Buffer&&"function"==typeof Buffer.isBuffer&&Buffer.isBuffer(e)){if(!this._decoder){var t=r(187).StringDecoder;this._decoder=new t("utf8")}e=this._decoder.write(e)}return this._parser.write(e.toString()),this.emit("data",e),!0},SAXStream.prototype.end=function(e){return e&&e.length&&this.write(e),this._parser.end(),!0},SAXStream.prototype.on=function(e,r){var n=this;return n._parser["on"+e]||-1===i.indexOf(e)||(n._parser["on"+e]=function(){var t=1===arguments.length?[arguments[0]]:Array.apply(null,arguments);t.splice(0,0,e),n.emit.apply(n,t)}),t.prototype.on.call(n,e,r)};var o="[CDATA[",s="DOCTYPE",a="http://www.w3.org/XML/1998/namespace",c="http://www.w3.org/2000/xmlns/",u={xml:a,xmlns:c},l=/[:_A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD]/,p=/[:_A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\u00B7\u0300-\u036F\u203F-\u2040.\d-]/,d=/[#:_A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD]/,h=/[#:_A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\u00B7\u0300-\u036F\u203F-\u2040.\d-]/;function isWhitespace(e){return" "===e||"\n"===e||"\r"===e||"\t"===e}function isQuote(e){return'"'===e||"'"===e}function isAttribEnd(e){return">"===e||isWhitespace(e)}function isMatch(e,t){return e.test(t)}function notMatch(e,t){return!isMatch(e,t)}var f,m,g,y=0;for(var v in e.STATE={BEGIN:y++,BEGIN_WHITESPACE:y++,TEXT:y++,TEXT_ENTITY:y++,OPEN_WAKA:y++,SGML_DECL:y++,SGML_DECL_QUOTED:y++,DOCTYPE:y++,DOCTYPE_QUOTED:y++,DOCTYPE_DTD:y++,DOCTYPE_DTD_QUOTED:y++,COMMENT_STARTING:y++,COMMENT:y++,COMMENT_ENDING:y++,COMMENT_ENDED:y++,CDATA:y++,CDATA_ENDING:y++,CDATA_ENDING_2:y++,PROC_INST:y++,PROC_INST_BODY:y++,PROC_INST_ENDING:y++,OPEN_TAG:y++,OPEN_TAG_SLASH:y++,ATTRIB:y++,ATTRIB_NAME:y++,ATTRIB_NAME_SAW_WHITE:y++,ATTRIB_VALUE:y++,ATTRIB_VALUE_QUOTED:y++,ATTRIB_VALUE_CLOSED:y++,ATTRIB_VALUE_UNQUOTED:y++,ATTRIB_VALUE_ENTITY_Q:y++,ATTRIB_VALUE_ENTITY_U:y++,CLOSE_TAG:y++,CLOSE_TAG_SAW_WHITE:y++,SCRIPT:y++,SCRIPT_ENDING:y++},e.XML_ENTITIES={amp:"&",gt:">",lt:"<",quot:'"',apos:"'"},e.ENTITIES={amp:"&",gt:">",lt:"<",quot:'"',apos:"'",AElig:198,Aacute:193,Acirc:194,Agrave:192,Aring:197,Atilde:195,Auml:196,Ccedil:199,ETH:208,Eacute:201,Ecirc:202,Egrave:200,Euml:203,Iacute:205,Icirc:206,Igrave:204,Iuml:207,Ntilde:209,Oacute:211,Ocirc:212,Ograve:210,Oslash:216,Otilde:213,Ouml:214,THORN:222,Uacute:218,Ucirc:219,Ugrave:217,Uuml:220,Yacute:221,aacute:225,acirc:226,aelig:230,agrave:224,aring:229,atilde:227,auml:228,ccedil:231,eacute:233,ecirc:234,egrave:232,eth:240,euml:235,iacute:237,icirc:238,igrave:236,iuml:239,ntilde:241,oacute:243,ocirc:244,ograve:242,oslash:248,otilde:245,ouml:246,szlig:223,thorn:254,uacute:250,ucirc:251,ugrave:249,uuml:252,yacute:253,yuml:255,copy:169,reg:174,nbsp:160,iexcl:161,cent:162,pound:163,curren:164,yen:165,brvbar:166,sect:167,uml:168,ordf:170,laquo:171,not:172,shy:173,macr:175,deg:176,plusmn:177,sup1:185,sup2:178,sup3:179,acute:180,micro:181,para:182,middot:183,cedil:184,ordm:186,raquo:187,frac14:188,frac12:189,frac34:190,iquest:191,times:215,divide:247,OElig:338,oelig:339,Scaron:352,scaron:353,Yuml:376,fnof:402,circ:710,tilde:732,Alpha:913,Beta:914,Gamma:915,Delta:916,Epsilon:917,Zeta:918,Eta:919,Theta:920,Iota:921,Kappa:922,Lambda:923,Mu:924,Nu:925,Xi:926,Omicron:927,Pi:928,Rho:929,Sigma:931,Tau:932,Upsilon:933,Phi:934,Chi:935,Psi:936,Omega:937,alpha:945,beta:946,gamma:947,delta:948,epsilon:949,zeta:950,eta:951,theta:952,iota:953,kappa:954,lambda:955,mu:956,nu:957,xi:958,omicron:959,pi:960,rho:961,sigmaf:962,sigma:963,tau:964,upsilon:965,phi:966,chi:967,psi:968,omega:969,thetasym:977,upsih:978,piv:982,ensp:8194,emsp:8195,thinsp:8201,zwnj:8204,zwj:8205,lrm:8206,rlm:8207,ndash:8211,mdash:8212,lsquo:8216,rsquo:8217,sbquo:8218,ldquo:8220,rdquo:8221,bdquo:8222,dagger:8224,Dagger:8225,bull:8226,hellip:8230,permil:8240,prime:8242,Prime:8243,lsaquo:8249,rsaquo:8250,oline:8254,frasl:8260,euro:8364,image:8465,weierp:8472,real:8476,trade:8482,alefsym:8501,larr:8592,uarr:8593,rarr:8594,darr:8595,harr:8596,crarr:8629,lArr:8656,uArr:8657,rArr:8658,dArr:8659,hArr:8660,forall:8704,part:8706,exist:8707,empty:8709,nabla:8711,isin:8712,notin:8713,ni:8715,prod:8719,sum:8721,minus:8722,lowast:8727,radic:8730,prop:8733,infin:8734,ang:8736,and:8743,or:8744,cap:8745,cup:8746,int:8747,there4:8756,sim:8764,cong:8773,asymp:8776,ne:8800,equiv:8801,le:8804,ge:8805,sub:8834,sup:8835,nsub:8836,sube:8838,supe:8839,oplus:8853,otimes:8855,perp:8869,sdot:8901,lceil:8968,rceil:8969,lfloor:8970,rfloor:8971,lang:9001,rang:9002,loz:9674,spades:9824,clubs:9827,hearts:9829,diams:9830},Object.keys(e.ENTITIES).forEach(function(t){var r=e.ENTITIES[t],n="number"==typeof r?String.fromCharCode(r):r;e.ENTITIES[t]=n}),e.STATE)e.STATE[e.STATE[v]]=v;function emit(e,t,r){e[t]&&e[t](r)}function emitNode(e,t,r){e.textNode&&closeText(e),emit(e,t,r)}function closeText(e){e.textNode=textopts(e.opt,e.textNode),e.textNode&&emit(e,"ontext",e.textNode),e.textNode=""}function textopts(e,t){return e.trim&&(t=t.trim()),e.normalize&&(t=t.replace(/\s+/g," ")),t}function error(e,t){return closeText(e),e.trackPosition&&(t+="\nLine: "+e.line+"\nColumn: "+e.column+"\nChar: "+e.c),t=new Error(t),e.error=t,emit(e,"onerror",t),e}function end(e){return e.sawRoot&&!e.closedRoot&&strictFail(e,"Unclosed root tag"),e.state!==y.BEGIN&&e.state!==y.BEGIN_WHITESPACE&&e.state!==y.TEXT&&error(e,"Unexpected end"),closeText(e),e.c="",e.closed=!0,emit(e,"onend"),SAXParser.call(e,e.strict,e.opt),e}function strictFail(e,t){if("object"!=typeof e||!(e instanceof SAXParser))throw new Error("bad call to strictFail");e.strict&&error(e,t)}function newTag(e){e.strict||(e.tagName=e.tagName[e.looseCase]());var t=e.tags[e.tags.length-1]||e,r=e.tag={name:e.tagName,attributes:{}};e.opt.xmlns&&(r.ns=t.ns),e.attribList.length=0,emitNode(e,"onopentagstart",r)}function qname(e,t){var r=e.indexOf(":")<0?["",e]:e.split(":"),n=r[0],i=r[1];return t&&"xmlns"===e&&(n="xmlns",i=""),{prefix:n,local:i}}function attrib(e){if(e.strict||(e.attribName=e.attribName[e.looseCase]()),-1!==e.attribList.indexOf(e.attribName)||e.tag.attributes.hasOwnProperty(e.attribName))e.attribName=e.attribValue="";else{if(e.opt.xmlns){var t=qname(e.attribName,!0),r=t.prefix,n=t.local;if("xmlns"===r)if("xml"===n&&e.attribValue!==a)strictFail(e,"xml: prefix must be bound to "+a+"\nActual: "+e.attribValue);else if("xmlns"===n&&e.attribValue!==c)strictFail(e,"xmlns: prefix must be bound to "+c+"\nActual: "+e.attribValue);else{var i=e.tag,o=e.tags[e.tags.length-1]||e;i.ns===o.ns&&(i.ns=Object.create(o.ns)),i.ns[n]=e.attribValue}e.attribList.push([e.attribName,e.attribValue])}else e.tag.attributes[e.attribName]=e.attribValue,emitNode(e,"onattribute",{name:e.attribName,value:e.attribValue});e.attribName=e.attribValue=""}}function openTag(e,t){if(e.opt.xmlns){var r=e.tag,n=qname(e.tagName);r.prefix=n.prefix,r.local=n.local,r.uri=r.ns[n.prefix]||"",r.prefix&&!r.uri&&(strictFail(e,"Unbound namespace prefix: "+JSON.stringify(e.tagName)),r.uri=n.prefix);var i=e.tags[e.tags.length-1]||e;r.ns&&i.ns!==r.ns&&Object.keys(r.ns).forEach(function(t){emitNode(e,"onopennamespace",{prefix:t,uri:r.ns[t]})});for(var o=0,s=e.attribList.length;o<s;o++){var a=e.attribList[o],c=a[0],u=a[1],l=qname(c,!0),p=l.prefix,d=l.local,h=""===p?"":r.ns[p]||"",f={name:c,value:u,prefix:p,local:d,uri:h};p&&"xmlns"!==p&&!h&&(strictFail(e,"Unbound namespace prefix: "+JSON.stringify(p)),f.uri=p),e.tag.attributes[c]=f,emitNode(e,"onattribute",f)}e.attribList.length=0}e.tag.isSelfClosing=!!t,e.sawRoot=!0,e.tags.push(e.tag),emitNode(e,"onopentag",e.tag),t||(e.noscript||"script"!==e.tagName.toLowerCase()?e.state=y.TEXT:e.state=y.SCRIPT,e.tag=null,e.tagName=""),e.attribName=e.attribValue="",e.attribList.length=0}function closeTag(e){if(!e.tagName)return strictFail(e,"Weird empty close tag."),e.textNode+="</>",void(e.state=y.TEXT);if(e.script){if("script"!==e.tagName)return e.script+="</"+e.tagName+">",e.tagName="",void(e.state=y.SCRIPT);emitNode(e,"onscript",e.script),e.script=""}var t=e.tags.length,r=e.tagName;e.strict||(r=r[e.looseCase]());for(var n=r;t--;){if(e.tags[t].name===n)break;strictFail(e,"Unexpected close tag")}if(t<0)return strictFail(e,"Unmatched closing tag: "+e.tagName),e.textNode+="</"+e.tagName+">",void(e.state=y.TEXT);e.tagName=r;for(var i=e.tags.length;i-- >t;){var o=e.tag=e.tags.pop();e.tagName=e.tag.name,emitNode(e,"onclosetag",e.tagName);var s={};for(var a in o.ns)s[a]=o.ns[a];var c=e.tags[e.tags.length-1]||e;e.opt.xmlns&&o.ns!==c.ns&&Object.keys(o.ns).forEach(function(t){var r=o.ns[t];emitNode(e,"onclosenamespace",{prefix:t,uri:r})})}0===t&&(e.closedRoot=!0),e.tagName=e.attribValue=e.attribName="",e.attribList.length=0,e.state=y.TEXT}function parseEntity(e){var t,r=e.entity,n=r.toLowerCase(),i="";return e.ENTITIES[r]?e.ENTITIES[r]:e.ENTITIES[n]?e.ENTITIES[n]:("#"===(r=n).charAt(0)&&("x"===r.charAt(1)?(r=r.slice(2),i=(t=parseInt(r,16)).toString(16)):(r=r.slice(1),i=(t=parseInt(r,10)).toString(10))),r=r.replace(/^0+/,""),isNaN(t)||i.toLowerCase()!==r?(strictFail(e,"Invalid character entity"),"&"+e.entity+";"):String.fromCodePoint(t))}function beginWhiteSpace(e,t){"<"===t?(e.state=y.OPEN_WAKA,e.startTagPosition=e.position):isWhitespace(t)||(strictFail(e,"Non-whitespace before first tag."),e.textNode=t,e.state=y.TEXT)}function charAt(e,t){var r="";return t<e.length&&(r=e.charAt(t)),r}y=e.STATE,String.fromCodePoint||(f=String.fromCharCode,m=Math.floor,g=function(){var e,t,r=[],n=-1,i=arguments.length;if(!i)return"";for(var o="";++n<i;){var s=Number(arguments[n]);if(!isFinite(s)||s<0||s>1114111||m(s)!==s)throw RangeError("Invalid code point: "+s);s<=65535?r.push(s):(e=55296+((s-=65536)>>10),t=s%1024+56320,r.push(e,t)),(n+1===i||r.length>16384)&&(o+=f.apply(null,r),r.length=0)}return o},Object.defineProperty?Object.defineProperty(String,"fromCodePoint",{value:g,configurable:!0,writable:!0}):String.fromCodePoint=g)}(t)},function(e,t){(function(){"use strict";t.stripBOM=function(e){return"\ufeff"===e[0]?e.substring(1):e}}).call(this)},function(e,t,r){"use strict";var n=r(400),i=r(938).Authority,o=r(940),s=r(954),a=r(43).createLogContext,c=r(408),u=r(80),l=r(34),p={},d=new c;function AuthenticationContext(e,t,r){var n=null==t||t;this._authority=new i(e,n),this._oauth2client=null,this._correlationId=null,this._callContext={options:p},this._cache=r||d,this._tokenRequestWithUserCode={}}Object.defineProperty(AuthenticationContext.prototype,"authority",{get:function(){return this._authority.url}}),Object.defineProperty(AuthenticationContext.prototype,"correlationId",{get:function(){return this._correlationId},set:function(e){this._correlationId=e}}),Object.defineProperty(AuthenticationContext.prototype,"options",{get:function(){return this._callContext.options},set:function(e){this._callContext.options=e}}),Object.defineProperty(AuthenticationContext.prototype,"cache",{get:function(){return this._cache}}),AuthenticationContext.prototype._acquireToken=function(e,t){var r=this;this._callContext._logContext=a(this.correlationId),this._authority.validate(this._callContext,function(n){n?e(n):t.call(r)})},AuthenticationContext.prototype._acquireUserCode=function(e,t){var r=this;this._callContext._logContext=a(this.correlationId),this._authority.validate(this._callContext,function(n){n?e(n):t.call(r)})},AuthenticationContext.prototype.acquireToken=function(e,t,r,i){n.validateCallbackType(i);try{n.validateStringParameter(e,"resource"),n.validateStringParameter(r,"clientId")}catch(e){return void i(e)}this._acquireToken(i,function(){new o(this._callContext,this,r,e).getTokenFromCacheWithRefresh(t,i)})},AuthenticationContext.prototype.acquireTokenWithUsernamePassword=function(e,t,r,i,s){n.validateCallbackType(s);try{n.validateStringParameter(e,"resource"),n.validateStringParameter(t,"username"),n.validateStringParameter(r,"password"),n.validateStringParameter(i,"clientId")}catch(e){return void s(e)}this._acquireToken(s,function(){new o(this._callContext,this,i,e).getTokenWithUsernamePassword(t,r,s)})},AuthenticationContext.prototype.acquireTokenWithClientCredentials=function(e,t,r,i){n.validateCallbackType(i);try{n.validateStringParameter(e,"resource"),n.validateStringParameter(t,"clientId"),n.validateStringParameter(r,"clientSecret")}catch(e){return void i(e)}this._acquireToken(i,function(){new o(this._callContext,this,t,e).getTokenWithClientCredentials(r,i)})},AuthenticationContext.prototype.acquireTokenWithAuthorizationCode=function(e,t,r,i,s,a){n.validateCallbackType(a);try{n.validateStringParameter(r,"resource"),n.validateStringParameter(e,"authorizationCode"),n.validateStringParameter(t,"redirectUri"),n.validateStringParameter(i,"clientId")}catch(e){return void a(e)}this._acquireToken(a,function(){new o(this._callContext,this,i,r,t).getTokenWithAuthorizationCode(e,s,a)})},AuthenticationContext.prototype.acquireTokenWithRefreshToken=function(e,t,r,i,s){var a=5===arguments.length,c=a?r:null,u=a?arguments[4]:arguments[3],l=a?arguments[3]:arguments[2];n.validateCallbackType(u);try{n.validateStringParameter(e,"refreshToken"),n.validateStringParameter(t,"clientId")}catch(e){return void s(e)}this._acquireToken(s,function(){new o(this._callContext,this,t,l).getTokenWithRefreshToken(e,c,u)})},AuthenticationContext.prototype.acquireTokenWithClientCertificate=function(e,t,r,i,s){n.validateCallbackType(s);try{n.validateStringParameter(e,"resource"),n.validateStringParameter(r,"certificate"),n.validateStringParameter(i,"thumbprint")}catch(e){return void s(e)}this._acquireToken(s,function(){new o(this._callContext,this,t,e).getTokenWithCertificate(r,i,s)})},AuthenticationContext.prototype.acquireUserCode=function(e,t,r,i){n.validateCallbackType(i);try{n.validateStringParameter(e,"resource"),n.validateStringParameter(t,"clientId")}catch(e){return void i(e)}this._acquireUserCode(i,function(){new s(this._callContext,this,t,e).getUserCodeInfo(r,i)})},AuthenticationContext.prototype.acquireTokenWithDeviceCode=function(e,t,r,i){n.validateCallbackType(i);try{n.validateUserCodeInfo(r)}catch(e){return void i(e)}var s=this;this._acquireToken(i,function(){var n=new o(this._callContext,this,t,e,null);s._tokenRequestWithUserCode[r[l.UserCodeResponseFields.DEVICE_CODE]]=n,n.getTokenWithDeviceCode(r,i)})},AuthenticationContext.prototype.cancelRequestToGetTokenWithDeviceCode=function(e,t){n.validateCallbackType(t);try{n.validateUserCodeInfo(e)}catch(e){return void t(e)}this._tokenRequestWithUserCode&&this._tokenRequestWithUserCode[e[l.UserCodeResponseFields.DEVICE_CODE]]?(this._tokenRequestWithUserCode[e[l.UserCodeResponseFields.DEVICE_CODE]].cancelTokenRequestWithDeviceCode(),delete this._tokenRequestWithUserCode[l.UserCodeResponseFields.DEVICE_CODE]):t(new Error("No acquireTokenWithDeviceCodeRequest existed to be cancelled"))};t={AuthenticationContext:AuthenticationContext,setGlobalADALOptions:function(e){p=e},getGlobalADALOptions:function(){return p}};u.adalInit(),e.exports=t},function(e,t,r){"use strict";var n=r(41),i=r(7),o=r(53),s=r(34).AADConstants,a=r(43).Logger,c=r(80);function Authority(e,t){this._log=null,this._url=i.parse(e),this._validateAuthorityUrl(),this._validated=!t,this._host=null,this._tenant=null,this._parseAuthority(),this._authorizationEndpoint=null,this._tokenEndpoint=null,this._deviceCodeEndpoint=null,this._isAdfsAuthority="adfs"===this._tenant.toLowerCase()}Object.defineProperty(Authority.prototype,"url",{get:function(){return i.format(this._url)}}),Object.defineProperty(Authority.prototype,"tokenEndpoint",{get:function(){return this._tokenEndpoint}}),Object.defineProperty(Authority.prototype,"deviceCodeEndpoint",{get:function(){return this._deviceCodeEndpoint}}),Authority.prototype._validateAuthorityUrl=function(){if("https:"!==this._url.protocol)throw new Error("The authority url must be an https endpoint.");if(this._url.query)throw new Error("The authority url must not have a query string.")},Authority.prototype._parseAuthority=function(){this._host=this._url.host;var e=this._url.pathname.split("/");if(this._tenant=e[1],!this._tenant)throw new Error("Could not determine tenant.")},Authority.prototype._performStaticInstanceDiscovery=function(){this._log.verbose("Performing static instance discovery");var e=o.indexOf(s.WELL_KNOWN_AUTHORITY_HOSTS,this._url.hostname)>-1;return e&&this._log.verbose("Authority validated via static instance discovery."),e},Authority.prototype._createAuthorityUrl=function(){return"https://"+this._url.host+"/"+encodeURIComponent(this._tenant)+s.AUTHORIZE_ENDPOINT_PATH},Authority.prototype._createInstanceDiscoveryEndpointFromTemplate=function(e){var t=s.INSTANCE_DISCOVERY_ENDPOINT_TEMPLATE;return t=(t=t.replace("{authorize_host}",e)).replace("{authorize_endpoint}",encodeURIComponent(this._createAuthorityUrl())),i.parse(t)},Authority.prototype._performDynamicInstanceDiscovery=function(e){try{var t=this,r=this._createInstanceDiscoveryEndpointFromTemplate(s.WORLD_WIDE_AUTHORITY),o=c.createRequestOptions(t);this._log.verbose("Attempting instance discover"),this._log.verbose("Attempting instance discover at: "+i.format(r),!0),n.get(r,o,c.createRequestHandler("Instance Discovery",this._log,e,function(r,n){var i=JSON.parse(n);i.tenant_discovery_endpoint?e(null,i.tenant_discovery_endpoint):e(t._log.createError("Failed to parse instance discovery response"))}))}catch(t){e(t)}},Authority.prototype._validateViaInstanceDiscovery=function(e){this._performStaticInstanceDiscovery()?e():this._performDynamicInstanceDiscovery(e)},Authority.prototype._getOAuthEndpoints=function(e,t){return this._tokenEndpoint&&this._deviceCodeEndpoint?void t():(this._tokenEndpoint||(this._tokenEndpoint=i.format("https://"+this._url.host+"/"+encodeURIComponent(this._tenant))+s.TOKEN_ENDPOINT_PATH),this._deviceCodeEndpoint||(this._deviceCodeEndpoint=i.format("https://"+this._url.host+"/"+encodeURIComponent(this._tenant))+s.DEVICE_ENDPOINT_PATH),void t())},Authority.prototype.validate=function(e,t){this._log=new a("Authority",e._logContext),this._callContext=e;var r=this;if(this._validated)return this._log.verbose("Instance discovery/validation has either already been completed or is turned off"),this._log.verbose("Instance discovery/validation has either already been completed or is turned off: "+i.format(this._url),!0),void this._getOAuthEndpoints(null,t);this._log.verbose("Performing instance discovery"),this._log.verbose("Performing instance discovery: "+i.format(this._url),!0),this._validateViaInstanceDiscovery(function(e,n){if(!e)return r._validated=!0,void r._getOAuthEndpoints(n,t);t(e)})},e.exports.Authority=Authority},function(e){e.exports={_args:[["adal-node@0.1.28","/home/travis/build/microsoft/vscode-azure-iot-toolkit"]],_from:"adal-node@0.1.28",_id:"adal-node@0.1.28",_inBundle:!1,_integrity:"sha1-RoxLs+u9lrEnBmn0ucuk4AZepIU=",_location:"/adal-node",_phantomChildren:{},_requested:{type:"version",registry:!0,raw:"adal-node@0.1.28",name:"adal-node",escapedName:"adal-node",rawSpec:"0.1.28",saveSpec:null,fetchSpec:"0.1.28"},_requiredBy:["/@azure/ms-rest-nodeauth","/ms-rest-azure"],_resolved:"https://registry.npmjs.org/adal-node/-/adal-node-0.1.28.tgz",_spec:"0.1.28",_where:"/home/travis/build/microsoft/vscode-azure-iot-toolkit",author:{name:"Microsoft Open Technologies Inc",email:"msopentech@microsoft.com",url:"http://msopentech.com/"},bugs:{url:"https://github.com/AzureAD/azure-activedirectory-library-for-nodejs/issues"},dependencies:{"@types/node":"^8.0.47",async:">=0.6.0","date-utils":"*",jws:"3.x.x",request:">= 2.52.0",underscore:">= 1.3.1",uuid:"^3.1.0",xmldom:">= 0.1.x","xpath.js":"~1.1.0"},description:"Windows Azure Active Directory Client Library for node",devDependencies:{"@types/mocha":"^2.2.44","@types/nock":"^8.2.1","@types/sinon":"^2.3.7","@types/underscore":"^1.8.4",jshint:"*",mocha:"*",nock:"*",sinon:"*",typescript:"^2.6.1"},engines:{node:">= 0.6.15"},homepage:"https://github.com/AzureAD/azure-activedirectory-library-for-nodejs#readme",keywords:["node","azure","AAD","adal","adfs","oauth"],license:"Apache-2.0",main:"./lib/adal.js",name:"adal-node",repository:{type:"git",url:"git+https://github.com/AzureAD/azure-activedirectory-library-for-nodejs.git"},scripts:{cover:"./test/util/cover",doc:"jsdoc lib",test:"npm run tsc && mocha -R spec --ui tdd test",tsc:"tsc -p tsconfig.json"},types:"./lib/adal.d.ts",version:"0.1.28"}},function(e,t,r){"use strict";var n=r(34),i=r(941),o=r(43).Logger,s=r(401),a=r(404),c=r(944),u=r(951),l=r(952),p=n.OAuth2.Parameters,d=n.TokenResponseFields,h=n.OAuth2.GrantType,f=n.OAuth2.Scope,m=n.Saml,g=n.UserRealm.AccountType,y=n.WSTrustVersion,v=n.UserCodeResponseFields;function TokenRequest(e,t,r,n,i){this._log=new o("TokenRequest",e._logContext),this._callContext=e,this._authenticationContext=t,this._resource=n,this._clientId=r,this._redirectUri=i,this._userId=null,this._userRealm=null,this._pollingClient={}}function _addParameterIfAvailable(e,t,r){r&&(e[t]=r)}TokenRequest.prototype._createUserRealmRequest=function(e){return new u(this._callContext,e,this._authenticationContext.authority)},TokenRequest.prototype._createMex=function(e){return new s(this._callContext,e)},TokenRequest.prototype._createWSTrustRequest=function(e,t,r){return new l(this._callContext,e,t,r)},TokenRequest.prototype._createOAuth2Client=function(){return new a(this._callContext,this._authenticationContext._authority)},TokenRequest.prototype._createSelfSignedJwt=function(){return new c(this._callContext,this._authenticationContext._authority,this._clientId)},TokenRequest.prototype._oauthGetToken=function(e,t){this._createOAuth2Client().getToken(e,t)},TokenRequest.prototype._oauthGetTokenByPolling=function(e,t,r,n){var i=this._createOAuth2Client();i.getTokenWithPolling(e,t,r,n),this._pollingClient=i},TokenRequest.prototype._createCacheDriver=function(){return new i(this._callContext,this._authenticationContext.authority,this._resource,this._clientId,this._authenticationContext.cache,this._getTokenWithTokenResponse.bind(this))},TokenRequest.prototype._getTokenWithTokenResponse=function(e,t,r){this._log.verbose("Called to refresh a token from the cache.");var n=e[d.REFRESH_TOKEN];this._getTokenWithRefreshToken(n,t,null,r)},TokenRequest.prototype._createCacheQuery=function(){var e={clientId:this._clientId};return this._userId?e.userId=this._userId:this._log.verbose("No userId passed for cache query."),e},TokenRequest.prototype._getTokenWithCacheWrapper=function(e,t){var r=this;this._cacheDriver=this._createCacheDriver();var n=this._createCacheQuery();this._cacheDriver.find(n,function(n,i){n&&(r._log.warn("Attempt to look for token in cahce resulted in Error"),r._log.warn("Attempt to look for token in cache resulted in Error: "+n.stack,!0)),i?(r._log.info("Returning cached token."),e(n,i)):(r._log.verbose("No appropriate cached token found."),t.call(r,function(t,n){if(t)return r._log.verbose("getTokenFunc returned with err"),void e(t,n);r._log.verbose("Successfully retrieved token from authority"),r._cacheDriver.add(n,function(){e(null,n)})}))})},TokenRequest.prototype._addTokenIntoCache=function(e,t){this._cacheDriver=this._createCacheDriver(),this._log.verbose("Storing retrieved token into cache"),this._cacheDriver.add(e,function(r){t(r,e)})},TokenRequest.prototype._createOAuthParameters=function(e){var t={};return t[p.GRANT_TYPE]=e,h.AUTHORIZATION_CODE!==e&&h.CLIENT_CREDENTIALS!==e&&h.DEVICE_CODE!=e&&(t[p.SCOPE]=f.OPENID),_addParameterIfAvailable(t,p.CLIENT_ID,this._clientId),_addParameterIfAvailable(t,p.RESOURCE,this._resource),_addParameterIfAvailable(t,p.REDIRECT_URI,this._redirectUri),t},TokenRequest.prototype._getTokenUsernamePasswordManaged=function(e,t,r){this._log.verbose("Acquiring token with username password for managed user");var n=this._createOAuthParameters(h.PASSWORD);n[p.PASSWORD]=t,n[p.USERNAME]=e,this._oauthGetToken(n,r)},TokenRequest.prototype._getSamlGrantType=function(e){var t=e.tokenType;switch(t){case m.TokenTypeV1:return h.SAML1;case m.TokenTypeV2:return h.SAML2;default:throw this._log.createError("RSTR returned unknown token type: "+t)}},TokenRequest.prototype._performWSTrustAssertionOAuthExchange=function(e,t){var r;this._log.verbose("Performing OAuth assertion grant type exchange.");try{var n=this._getSamlGrantType(e),i=new Buffer(e.token).toString("base64");(r=this._createOAuthParameters(n))[p.ASSERTION]=i}catch(e){return void t(e)}this._oauthGetToken(r,t)},TokenRequest.prototype._performWSTrustExchange=function(e,t,r,n,i){var o=this;this._createWSTrustRequest(e,"urn:federation:MicrosoftOnline",t).acquireToken(r,n,function(e,t){if(e)i(e);else if(t.token)i(null,t);else{var r=o._log.createError("Unsucessful RSTR.\n\terror code: "+t.errorCode+"\n\tfaultMessage: "+t.faultMessage,!0);i(r)}})},TokenRequest.prototype._performUsernamePasswordForAccessTokenExchange=function(e,t,r,n,i){var o=this;this._performWSTrustExchange(e,t,r,n,function(e,t){e?i(e):o._performWSTrustAssertionOAuthExchange(t,i)})},TokenRequest.prototype._createADWSTrustEndpointError=function(){return this._log.createError("AAD did not return a WSTrust endpoint.  Unable to proceed.")},TokenRequest.prototype._getTokenUsernamePasswordFederated=function(e,t,r){this._log.verbose("Acquiring token with username password for federated user");var n=this;if(!this._userRealm.federationMetadataUrl){if(this._log.warn("Unable to retrieve federationMetadataUrl from AAD.  Attempting fallback to AAD supplied endpoint."),!this._userRealm.federationActiveAuthUrl)return void r(this._createADWSTrustEndpointError());var i=this._parseWStrustVersionFromFederationActiveAuthUrl(this._userRealm.federationActiveAuthUrl);return this._log.verbose("Wstrust endpoint version is: "+i),void this._performUsernamePasswordForAccessTokenExchange(this._userRealm.federationActiveAuthUrl,i,e,t,r)}var o=this._userRealm.federationMetadataUrl;this._log.verbose("Attempting mex"),this._log.verbose("Attempting mex at: "+o,!0);var s=this._createMex(o);s.discover(function(o){var a;if(i=y.UNDEFINED,o){if(n._log.warn("MEX exchange failed.  Attempting fallback to AAD supplied endpoint."),a=n._userRealm.federationActiveAuthUrl,i=n._parseWStrustVersionFromFederationActiveAuthUrl(n._userRealm.federationActiveAuthUrl),!a)return void r(n._createADWSTrustEndpointError())}else a=s.usernamePasswordPolicy.url,i=s.usernamePasswordPolicy.version;n._performUsernamePasswordForAccessTokenExchange(a,i,e,t,r)})},TokenRequest.prototype._parseWStrustVersionFromFederationActiveAuthUrl=function(e){return/[\/trust]?[2005][\/usernamemixed]?/.exec(e)?y.WSTRUST2005:/[\/trust]?[13][\/usernamemixed]?/.exec(e)?y.WSTRUST13:y.UNDEFINED},TokenRequest.prototype.getTokenWithUsernamePassword=function(e,t,r){this._log.info("Acquiring token with username password"),this._userId=e,this._getTokenWithCacheWrapper(r,function(r){var n=this;if(this._authenticationContext._authority._isAdfsAuthority)return this._log.info("Skipping user realm discovery for ADFS authority"),void n._getTokenUsernamePasswordManaged(e,t,r);this._userRealm=this._createUserRealmRequest(e),this._userRealm.discover(function(i){if(i)r(i);else switch(n._userRealm.accountType){case g.Managed:return void n._getTokenUsernamePasswordManaged(e,t,r);case g.Federated:return void n._getTokenUsernamePasswordFederated(e,t,r);default:r(n._log.createError("Server returned an unknown AccountType: "+n._userRealm.AccountType))}})})},TokenRequest.prototype.getTokenWithClientCredentials=function(e,t){this._log.info("Getting token with client credentials."),this._getTokenWithCacheWrapper(t,function(t){var r=this._createOAuthParameters(h.CLIENT_CREDENTIALS);r[p.CLIENT_SECRET]=e,this._oauthGetToken(r,t)})},TokenRequest.prototype.getTokenWithAuthorizationCode=function(e,t,r){this._log.info("Getting token with auth code.");var n=this._createOAuthParameters(h.AUTHORIZATION_CODE);n[p.CODE]=e,n[p.CLIENT_SECRET]=t,this._oauthGetToken(n,r)},TokenRequest.prototype._getTokenWithRefreshToken=function(e,t,r,n){this._log.info("Getting a new token from a refresh token.");var i=this._createOAuthParameters(h.REFRESH_TOKEN);t&&(i[p.RESOURCE]=t),r&&(i[p.CLIENT_SECRET]=r),i[p.REFRESH_TOKEN]=e,this._oauthGetToken(i,n)},TokenRequest.prototype.getTokenWithRefreshToken=function(e,t,r){this._getTokenWithRefreshToken(e,null,t,r)},TokenRequest.prototype.getTokenFromCacheWithRefresh=function(e,t){var r=this;this._log.info("Getting token from cache with refresh if necessary."),this._userId=e,this._getTokenWithCacheWrapper(t,function(e){e(r._log.createError("Entry not found in cache."))})},TokenRequest.prototype._createJwt=function(e,t,r){var n;if(!(n=this._createSelfSignedJwt().create(t,r)))throw this._log.createError("Failed to create JWT");return n},TokenRequest.prototype.getTokenWithCertificate=function(e,t,r){this._log.info("Getting a token via certificate.");var n,i=this._authenticationContext._authority;try{n=this._createJwt(i,e,t)}catch(e){return void r(e)}var o=this._createOAuthParameters(h.CLIENT_CREDENTIALS);o[p.CLIENT_ASSERTION_TYPE]=h.JWT_BEARER,o[p.CLIENT_ASSERTION]=n,this._getTokenWithCacheWrapper(r,function(e){this._oauthGetToken(o,e)})},TokenRequest.prototype.getTokenWithDeviceCode=function(e,t){this._log.info("Getting a token via device code");var r=this,n=this._createOAuthParameters(h.DEVICE_CODE);n[p.CODE]=e[v.DEVICE_CODE];var i=e[v.INTERVAL],o=e[v.EXPIRES_IN];i<=0&&t(new Error("invalid refresh interval")),this._oauthGetTokenByPolling(n,i,o,function(e,n){e?(r._log.verbose("Token polling request returend with err."),t(e,n)):r._addTokenIntoCache(n,t)})},TokenRequest.prototype.cancelTokenRequestWithDeviceCode=function(){this._pollingClient.cancelPollingRequest()},e.exports=TokenRequest},function(e,t,r){"use strict";var n=r(53),i=r(12);r(230);var o=r(43).Logger,s=r(34),a=s.Cache,c=s.TokenResponseFields;function nop(e,t){t()}var u={add:nop,addMany:nop,remove:nop,removeMany:nop,find:nop};function createTokenHash(e){var t=i.createHash(a.HASH_ALGORITHM);return t.update(e,"utf8"),t.digest("base64")}function createTokenIdMessage(e){var t="AccessTokenId: "+createTokenHash(e[c.ACCESS_TOKEN]);e[c.REFRESH_TOKEN]&&(t+=", RefreshTokenId: "+createTokenHash(e[c.REFRESH_TOKEN]));return t}function CacheDriver(e,t,r,n,i,s){this._callContext=e,this._log=new o("CacheDriver",e._logContext),this._authority=t,this._resource=r,this._clientId=n,this._cache=i||u,this._refreshFunction=s}function isMRRT(e){return!!e.resource}CacheDriver.prototype._find=function(e,t){this._cache.find(e,t)},CacheDriver.prototype._getPotentialEntries=function(e,t){var r=this,n={};e.clientId&&(n._clientId=e.clientId),e.userId&&(n[c.USER_ID]=e.userId),this._log.verbose("Looking for potential cache entries:"),this._log.verbose(JSON.stringify(n),!0),this._find(n,function(e,n){r._log.verbose("Found "+n.length+" potential entries."),t(e,n)})},CacheDriver.prototype._findMRRTTokensForUser=function(e,t){this._find({isMRRT:!0,userId:e,_clientId:this._clientId},t)},CacheDriver.prototype._loadSingleEntryFromCache=function(e,t){var r=this;this._getPotentialEntries(e,function(e,i){if(e)t(e);else{var o,s;if(i&&0<i.length){var a=n.where(i,{resource:r._resource,_authority:r._authority});if(a&&0!==a.length){if(1!==a.length)return void t(r._log.createError("More than one token matches the criteria.  The result is ambiguous."));r._log.verbose("Resource specific token found."),o=a[0],s=!0}else{r._log.verbose("No resource specific cache entries found.");var c=n.where(i,{isMRRT:!0});c&&c.length>0?(r._log.verbose("Found an MRRT token."),o=c[0]):r._log.verbose("No MRRT tokens found.")}}o&&(r._log.verbose("Returning token from cache lookup"),r._log.verbose("Returning token from cache lookup, "+createTokenIdMessage(o),!0)),t(null,o,s)}})},CacheDriver.prototype._createEntryFromRefresh=function(e,t){var r=n.clone(e);return r=n.extend(r,t),e.isMRRT&&this._authority!==e._authority&&(r._authority=this._authority),this._log.verbose("Created new cache entry from refresh response."),r},CacheDriver.prototype._replaceEntry=function(e,t,r){var n=this;this.remove(e,function(e){e?r(e):n.add(t,r)})},CacheDriver.prototype._refreshExpiredEntry=function(e,t){var r=this;this._refreshFunction(e,null,function(n,i){if(n)t(n);else{var o=r._createEntryFromRefresh(e,i);r._replaceEntry(e,o,function(e){e?r._log.error("error refreshing expired token",e,!0):r._log.info("Returning token refreshed after expiry."),t(e,o)})}})},CacheDriver.prototype._acquireNewTokenFromMrrt=function(e,t){var r=this;this._refreshFunction(e,this._resource,function(n,i){if(n)t(n);else{var o=r._createEntryFromRefresh(e,i);r.add(o,function(e){e?r._log.error("error refreshing mrrt",e,!0):r._log.info("Returning token derived from mrrt refresh."),t(e,o)})}})},CacheDriver.prototype._refreshEntryIfNecessary=function(e,t,r){var n=e[c.EXPIRES_ON],i=(new Date).addMinutes(s.Misc.CLOCK_BUFFER);return t&&i.isAfter(n)?(this._log.info("Cached token is expired.  Refreshing: "+n),void this._refreshExpiredEntry(e,r)):!t&&e.isMRRT?(this._log.info("Acquiring new access token from MRRT token."),void this._acquireNewTokenFromMrrt(e,r)):void r(null,e)},CacheDriver.prototype.find=function(e,t){var r=this;e=e||{},this._log.verbose("finding using query"),this._log.verbose("finding with query:"+JSON.stringify(e),!0),this._loadSingleEntryFromCache(e,function(e,n,i){e?t(e):n?r._refreshEntryIfNecessary(n,i,function(e,r){t(e,r)}):t()})},CacheDriver.prototype.remove=function(e,t){return this._log.verbose("Removing entry."),this._cache.remove([e],function(e){t(e)})},CacheDriver.prototype._removeMany=function(e,t){this._log.verbose("Remove many: "+e.length),this._cache.remove(e,function(e){t(e)})},CacheDriver.prototype._addMany=function(e,t){this._log.verbose("Add many: "+e.length),this._cache.add(e,function(e){t(e)})},CacheDriver.prototype._updateRefreshTokens=function(e,t){var r=this;isMRRT(e)?this._findMRRTTokensForUser(e.userId,function(n,i){n?t(n):i&&0!==i.length?(r._log.verbose("Updating "+i.length+" cached refresh tokens."),r._removeMany(i,function(n){if(n)t(n);else{for(var o=0;o<i.length;o++)i[o][c.REFRESH_TOKEN]=e[c.REFRESH_TOKEN];r._addMany(i,function(e){t(e)})}})):t()}):t()},CacheDriver.prototype._entryHasMetadata=function(e){return n.has(e,"_clientId")&&n.has(e,"_authority")},CacheDriver.prototype._augmentEntryWithCacheMetadata=function(e){this._entryHasMetadata(e)||(isMRRT(e)?(this._log.verbose("Added entry is MRRT"),e.isMRRT=!0):e.resource=this._resource,e._clientId=this._clientId,e._authority=this._authority)},CacheDriver.prototype.add=function(e,t){var r=this;this._log.verbose("Adding entry"),this._log.verbose("Adding entry, "+createTokenIdMessage(e)),this._augmentEntryWithCacheMetadata(e),this._updateRefreshTokens(e,function(n){n?t(n):r._cache.add([e],function(e){t(e)})})},e.exports=CacheDriver},function(e,t){var r=/[A-Z_a-z\xC0-\xD6\xD8-\xF6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD]/,n=new RegExp("[\\-\\.0-9"+r.source.slice(1,-1)+"\\u00B7\\u0300-\\u036F\\u203F-\\u2040]"),i=new RegExp("^"+r.source+n.source+"*(?::"+r.source+n.source+"*)?$"),o=0,s=1,a=2,c=3,u=4,l=5,p=6,d=7;function XMLReader(){}function copyLocator(e,t){return t.lineNumber=e.lineNumber,t.columnNumber=e.columnNumber,t}function parseElementStartPart(e,t,r,n,i,h){for(var f,m=++t,g=o;;){var y=e.charAt(m);switch(y){case"=":if(g===s)f=e.slice(t,m),g=c;else{if(g!==a)throw new Error("attribute equal must after attrName");g=c}break;case"'":case'"':if(g===c||g===s){if(g===s&&(h.warning('attribute value must after "="'),f=e.slice(t,m)),t=m+1,!((m=e.indexOf(y,t))>0))throw new Error("attribute value no end '"+y+"' match");v=e.slice(t,m).replace(/&#?\w+;/g,i),r.add(f,v,t-1),g=l}else{if(g!=u)throw new Error('attribute value must after "="');v=e.slice(t,m).replace(/&#?\w+;/g,i),r.add(f,v,t),h.warning('attribute "'+f+'" missed start quot('+y+")!!"),t=m+1,g=l}break;case"/":switch(g){case o:r.setTagName(e.slice(t,m));case l:case p:case d:g=d,r.closed=!0;case u:case s:case a:break;default:throw new Error("attribute invalid close char('/')")}break;case"":return h.error("unexpected end of input"),g==o&&r.setTagName(e.slice(t,m)),m;case">":switch(g){case o:r.setTagName(e.slice(t,m));case l:case p:case d:break;case u:case s:"/"===(v=e.slice(t,m)).slice(-1)&&(r.closed=!0,v=v.slice(0,-1));case a:g===a&&(v=f),g==u?(h.warning('attribute "'+v+'" missed quot(")!!'),r.add(f,v.replace(/&#?\w+;/g,i),t)):("http://www.w3.org/1999/xhtml"===n[""]&&v.match(/^(?:disabled|checked|selected)$/i)||h.warning('attribute "'+v+'" missed value!! "'+v+'" instead!!'),r.add(v,v,t));break;case c:throw new Error("attribute value missed!!")}return m;case"":y=" ";default:if(y<=" ")switch(g){case o:r.setTagName(e.slice(t,m)),g=p;break;case s:f=e.slice(t,m),g=a;break;case u:var v=e.slice(t,m).replace(/&#?\w+;/g,i);h.warning('attribute "'+v+'" missed quot(")!!'),r.add(f,v,t);case l:g=p}else switch(g){case a:r.tagName;"http://www.w3.org/1999/xhtml"===n[""]&&f.match(/^(?:disabled|checked|selected)$/i)||h.warning('attribute "'+f+'" missed value!! "'+f+'" instead2!!'),r.add(f,f,t),t=m,g=s;break;case l:h.warning('attribute space is required"'+f+'"!!');case p:g=s,t=m;break;case c:g=u,t=m;break;case d:throw new Error("elements closed character '/' and '>' must be connected to")}}m++}}function appendElement(e,t,r){for(var n=e.tagName,i=null,o=e.length;o--;){var s=e[o],a=s.qName,c=s.value;if((d=a.indexOf(":"))>0)var u=s.prefix=a.slice(0,d),l=a.slice(d+1),p="xmlns"===u&&l;else l=a,u=null,p="xmlns"===a&&"";s.localName=l,!1!==p&&(null==i&&(i={},_copy(r,r={})),r[p]=i[p]=c,s.uri="http://www.w3.org/2000/xmlns/",t.startPrefixMapping(p,c))}for(o=e.length;o--;){(u=(s=e[o]).prefix)&&("xml"===u&&(s.uri="http://www.w3.org/XML/1998/namespace"),"xmlns"!==u&&(s.uri=r[u||""]))}var d;(d=n.indexOf(":"))>0?(u=e.prefix=n.slice(0,d),l=e.localName=n.slice(d+1)):(u=null,l=e.localName=n);var h=e.uri=r[u||""];if(t.startElement(h,l,n,e),!e.closed)return e.currentNSMap=r,e.localNSMap=i,!0;if(t.endElement(h,l,n),i)for(u in i)t.endPrefixMapping(u)}function parseHtmlSpecialContent(e,t,r,n,i){if(/^(?:script|textarea)$/i.test(r)){var o=e.indexOf("</"+r+">",t),s=e.substring(t+1,o);if(/[&<]/.test(s))return/^script$/i.test(r)?(i.characters(s,0,s.length),o):(s=s.replace(/&#?\w+;/g,n),i.characters(s,0,s.length),o)}return t+1}function fixSelfClosed(e,t,r,n){var i=n[r];return null==i&&((i=e.lastIndexOf("</"+r+">"))<t&&(i=e.lastIndexOf("</"+r)),n[r]=i),i<t}function _copy(e,t){for(var r in e)t[r]=e[r]}function parseDCC(e,t,r,n){switch(e.charAt(t+2)){case"-":return"-"===e.charAt(t+3)?(i=e.indexOf("--\x3e",t+4))>t?(r.comment(e,t+4,i-t-4),i+3):(n.error("Unclosed comment"),-1):-1;default:if("CDATA["==e.substr(t+3,6)){var i=e.indexOf("]]>",t+9);return r.startCDATA(),r.characters(e,t+9,i-t-9),r.endCDATA(),i+3}var o=function split(e,t){var r,n=[],i=/'[^']+'|"[^"]+"|[^\s<>\/=]+=?|(\/?\s*>|<)/g;i.lastIndex=t,i.exec(e);for(;r=i.exec(e);)if(n.push(r),r[1])return n}(e,t),s=o.length;if(s>1&&/!doctype/i.test(o[0][0])){var a=o[1][0],c=s>3&&/^public$/i.test(o[2][0])&&o[3][0],u=s>4&&o[4][0],l=o[s-1];return r.startDTD(a,c&&c.replace(/^(['"])(.*?)\1$/,"$2"),u&&u.replace(/^(['"])(.*?)\1$/,"$2")),r.endDTD(),l.index+l[0].length}}return-1}function parseInstruction(e,t,r){var n=e.indexOf("?>",t);if(n){var i=e.substring(t,n).match(/^<\?(\S*)\s*([\s\S]*?)\s*$/);if(i){i[0].length;return r.processingInstruction(i[1],i[2]),n+2}return-1}return-1}function ElementAttributes(e){}function _set_proto_(e,t){return e.__proto__=t,e}XMLReader.prototype={parse:function(e,t,r){var n=this.domBuilder;n.startDocument(),_copy(t,t={}),function parse(e,t,r,n,i){function entityReplacer(e){var t=e.slice(1,-1);return t in r?r[t]:"#"===t.charAt(0)?function fixedFromCharCode(e){if(e>65535){var t=55296+((e-=65536)>>10),r=56320+(1023&e);return String.fromCharCode(t,r)}return String.fromCharCode(e)}(parseInt(t.substr(1).replace("x","0x"))):(i.error("entity not found:"+e),e)}function appendText(t){if(t>p){var r=e.substring(p,t).replace(/&#?\w+;/g,entityReplacer);c&&position(p),n.characters(r,0,t-p),p=t}}function position(t,r){for(;t>=s&&(r=a.exec(e));)o=r.index,s=o+r[0].length,c.lineNumber++;c.columnNumber=t-o+1}var o=0,s=0,a=/.*(?:\r\n?|\n)|.*$/g,c=n.locator,u=[{currentNSMap:t}],l={},p=0;for(;;){try{var d=e.indexOf("<",p);if(d<0){if(!e.substr(p).match(/^\s*$/)){var h=n.doc,f=h.createTextNode(e.substr(p));h.appendChild(f),n.currentElement=f}return}switch(d>p&&appendText(d),e.charAt(d+1)){case"/":var m=e.indexOf(">",d+3),g=e.substring(d+2,m),y=u.pop();m<0?(g=e.substring(d+2).replace(/[\s<].*/,""),i.error("end tag name: "+g+" is not complete:"+y.tagName),m=d+1+g.length):g.match(/\s</)&&(g=g.replace(/[\s<].*/,""),i.error("end tag name: "+g+" maybe not complete"),m=d+1+g.length);var v=y.localNSMap,b=y.tagName==g,_=b||y.tagName&&y.tagName.toLowerCase()==g.toLowerCase();if(_){if(n.endElement(y.uri,y.localName,g),v)for(var w in v)n.endPrefixMapping(w);b||i.fatalError("end tag name: "+g+" is not match the current start tagName:"+y.tagName)}else u.push(y);m++;break;case"?":c&&position(d),m=parseInstruction(e,d,n);break;case"!":c&&position(d),m=parseDCC(e,d,n,i);break;default:c&&position(d);var E=new ElementAttributes,S=u[u.length-1].currentNSMap,m=parseElementStartPart(e,d,E,S,entityReplacer,i),C=E.length;if(!E.closed&&fixSelfClosed(e,m,E.tagName,l)&&(E.closed=!0,r.nbsp||i.warning("unclosed xml attribute")),c&&C){for(var x=copyLocator(c,{}),k=0;k<C;k++){var R=E[k];position(R.offset),R.locator=copyLocator(c,{})}n.locator=x,appendElement(E,n,S)&&u.push(E),n.locator=c}else appendElement(E,n,S)&&u.push(E);"http://www.w3.org/1999/xhtml"!==E.uri||E.closed?m++:m=parseHtmlSpecialContent(e,m,E.tagName,entityReplacer,n)}}catch(e){i.error("element parse error: "+e),m=-1}m>p?p=m:appendText(Math.max(d,p)+1)}}(e,t,r,n,this.errorHandler),n.endDocument()}},ElementAttributes.prototype={setTagName:function(e){if(!i.test(e))throw new Error("invalid tagName:"+e);this.tagName=e},add:function(e,t,r){if(!i.test(e))throw new Error("invalid attribute:"+e);this[this.length++]={qName:e,value:t,offset:r}},length:0,getLocalName:function(e){return this[e].localName},getLocator:function(e){return this[e].locator},getQName:function(e){return this[e].qName},getURI:function(e){return this[e].uri},getValue:function(e){return this[e].value}},_set_proto_({},_set_proto_.prototype)instanceof _set_proto_||(_set_proto_=function(e,t){function p(){}for(t in p.prototype=t,p=new p,e)p[t]=e[t];return p}),t.XMLReader=XMLReader},function(e,t){function XPathParser(){this.init()}function XPath(e){this.expression=e}function Expression(){}function UnaryOperation(e){arguments.length>0&&this.init(e)}function UnaryMinusOperation(e){arguments.length>0&&this.init(e)}function BinaryOperation(e,t){arguments.length>0&&this.init(e,t)}function OrOperation(e,t){arguments.length>0&&this.init(e,t)}function AndOperation(e,t){arguments.length>0&&this.init(e,t)}function EqualsOperation(e,t){arguments.length>0&&this.init(e,t)}function NotEqualOperation(e,t){arguments.length>0&&this.init(e,t)}function LessThanOperation(e,t){arguments.length>0&&this.init(e,t)}function GreaterThanOperation(e,t){arguments.length>0&&this.init(e,t)}function LessThanOrEqualOperation(e,t){arguments.length>0&&this.init(e,t)}function GreaterThanOrEqualOperation(e,t){arguments.length>0&&this.init(e,t)}function PlusOperation(e,t){arguments.length>0&&this.init(e,t)}function MinusOperation(e,t){arguments.length>0&&this.init(e,t)}function MultiplyOperation(e,t){arguments.length>0&&this.init(e,t)}function DivOperation(e,t){arguments.length>0&&this.init(e,t)}function ModOperation(e,t){arguments.length>0&&this.init(e,t)}function BarOperation(e,t){arguments.length>0&&this.init(e,t)}function PathExpr(e,t,r){arguments.length>0&&this.init(e,t,r)}function LocationPath(e,t){arguments.length>0&&this.init(e,t)}function Step(e,t,r){arguments.length>0&&this.init(e,t,r)}function NodeTest(e,t){arguments.length>0&&this.init(e,t)}function VariableReference(e){arguments.length>0&&this.init(e)}function FunctionCall(e,t){arguments.length>0&&this.init(e,t)}function XString(e){arguments.length>0&&this.init(e)}function XNumber(e){arguments.length>0&&this.init(e)}function XBoolean(e){arguments.length>0&&this.init(e)}function AVLTree(e){this.init(e)}function XNodeSet(){this.init()}function XPathNamespace(e,t,r){this.isXPathNamespace=!0,this.ownerDocument=r.ownerDocument,this.nodeName="#namespace",this.prefix=e,this.localName=e,this.namespaceURI=t,this.nodeValue=t,this.ownerElement=r,this.nodeType=XPathNamespace.XPATH_NAMESPACE_NODE}XPathParser.prototype=new Object,XPathParser.prototype.constructor=XPathParser,XPathParser.superclass=Object.prototype,XPathParser.prototype.init=function(){this.reduceActions=[],this.reduceActions[3]=function(e){return new OrOperation(e[0],e[2])},this.reduceActions[5]=function(e){return new AndOperation(e[0],e[2])},this.reduceActions[7]=function(e){return new EqualsOperation(e[0],e[2])},this.reduceActions[8]=function(e){return new NotEqualOperation(e[0],e[2])},this.reduceActions[10]=function(e){return new LessThanOperation(e[0],e[2])},this.reduceActions[11]=function(e){return new GreaterThanOperation(e[0],e[2])},this.reduceActions[12]=function(e){return new LessThanOrEqualOperation(e[0],e[2])},this.reduceActions[13]=function(e){return new GreaterThanOrEqualOperation(e[0],e[2])},this.reduceActions[15]=function(e){return new PlusOperation(e[0],e[2])},this.reduceActions[16]=function(e){return new MinusOperation(e[0],e[2])},this.reduceActions[18]=function(e){return new MultiplyOperation(e[0],e[2])},this.reduceActions[19]=function(e){return new DivOperation(e[0],e[2])},this.reduceActions[20]=function(e){return new ModOperation(e[0],e[2])},this.reduceActions[22]=function(e){return new UnaryMinusOperation(e[1])},this.reduceActions[24]=function(e){return new BarOperation(e[0],e[2])},this.reduceActions[25]=function(e){return new PathExpr(void 0,void 0,e[0])},this.reduceActions[27]=function(e){return e[0].locationPath=e[2],e[0]},this.reduceActions[28]=function(e){return e[0].locationPath=e[2],e[0].locationPath.steps.unshift(new Step(Step.DESCENDANTORSELF,new NodeTest(NodeTest.NODE,void 0),[])),e[0]},this.reduceActions[29]=function(e){return new PathExpr(e[0],[],void 0)},this.reduceActions[30]=function(e){return i.instance_of(e[0],PathExpr)?(null==e[0].filterPredicates&&(e[0].filterPredicates=[]),e[0].filterPredicates.push(e[1]),e[0]):new PathExpr(e[0],[e[1]],void 0)},this.reduceActions[32]=function(e){return e[1]},this.reduceActions[33]=function(e){return new XString(e[0])},this.reduceActions[34]=function(e){return new XNumber(e[0])},this.reduceActions[36]=function(e){return new FunctionCall(e[0],[])},this.reduceActions[37]=function(e){return new FunctionCall(e[0],e[2])},this.reduceActions[38]=function(e){return[e[0]]},this.reduceActions[39]=function(e){return e[2].unshift(e[0]),e[2]},this.reduceActions[43]=function(e){return new LocationPath(!0,[])},this.reduceActions[44]=function(e){return e[1].absolute=!0,e[1]},this.reduceActions[46]=function(e){return new LocationPath(!1,[e[0]])},this.reduceActions[47]=function(e){return e[0].steps.push(e[2]),e[0]},this.reduceActions[49]=function(e){return new Step(e[0],e[1],[])},this.reduceActions[50]=function(e){return new Step(Step.CHILD,e[0],[])},this.reduceActions[51]=function(e){return new Step(e[0],e[1],e[2])},this.reduceActions[52]=function(e){return new Step(Step.CHILD,e[0],e[1])},this.reduceActions[54]=function(e){return[e[0]]},this.reduceActions[55]=function(e){return e[1].unshift(e[0]),e[1]},this.reduceActions[56]=function(e){return"ancestor"==e[0]?Step.ANCESTOR:"ancestor-or-self"==e[0]?Step.ANCESTORORSELF:"attribute"==e[0]?Step.ATTRIBUTE:"child"==e[0]?Step.CHILD:"descendant"==e[0]?Step.DESCENDANT:"descendant-or-self"==e[0]?Step.DESCENDANTORSELF:"following"==e[0]?Step.FOLLOWING:"following-sibling"==e[0]?Step.FOLLOWINGSIBLING:"namespace"==e[0]?Step.NAMESPACE:"parent"==e[0]?Step.PARENT:"preceding"==e[0]?Step.PRECEDING:"preceding-sibling"==e[0]?Step.PRECEDINGSIBLING:"self"==e[0]?Step.SELF:-1},this.reduceActions[57]=function(e){return Step.ATTRIBUTE},this.reduceActions[59]=function(e){return"comment"==e[0]?new NodeTest(NodeTest.COMMENT,void 0):"text"==e[0]?new NodeTest(NodeTest.TEXT,void 0):"processing-instruction"==e[0]?new NodeTest(NodeTest.PI,void 0):"node"==e[0]?new NodeTest(NodeTest.NODE,void 0):new NodeTest(-1,void 0)},this.reduceActions[60]=function(e){return new NodeTest(NodeTest.PI,e[2])},this.reduceActions[61]=function(e){return e[1]},this.reduceActions[63]=function(e){return e[1].absolute=!0,e[1].steps.unshift(new Step(Step.DESCENDANTORSELF,new NodeTest(NodeTest.NODE,void 0),[])),e[1]},this.reduceActions[64]=function(e){return e[0].steps.push(new Step(Step.DESCENDANTORSELF,new NodeTest(NodeTest.NODE,void 0),[])),e[0].steps.push(e[2]),e[0]},this.reduceActions[65]=function(e){return new Step(Step.SELF,new NodeTest(NodeTest.NODE,void 0),[])},this.reduceActions[66]=function(e){return new Step(Step.PARENT,new NodeTest(NodeTest.NODE,void 0),[])},this.reduceActions[67]=function(e){return new VariableReference(e[1])},this.reduceActions[68]=function(e){return new NodeTest(NodeTest.NAMETESTANY,void 0)},this.reduceActions[69]=function(e){var t=e[0].substring(0,e[0].indexOf(":"));return new NodeTest(NodeTest.NAMETESTPREFIXANY,t)},this.reduceActions[70]=function(e){return new NodeTest(NodeTest.NAMETESTQNAME,e[0])}},XPathParser.actionTable=[" s s        sssssssss    s ss  s  ss","                 s                  ","r  rrrrrrrrr         rrrrrrr rr  r  ","                rrrrr               "," s s        sssssssss    s ss  s  ss","rs  rrrrrrrr s  sssssrrrrrr  rrs rs "," s s        sssssssss    s ss  s  ss","                            s       ","                            s       ","r  rrrrrrrrr         rrrrrrr rr rr  ","r  rrrrrrrrr         rrrrrrr rr rr  ","r  rrrrrrrrr         rrrrrrr rr rr  ","r  rrrrrrrrr         rrrrrrr rr rr  ","r  rrrrrrrrr         rrrrrrr rr rr  ","  s                                 ","                            s       "," s           s  sssss          s  s ","r  rrrrrrrrr         rrrrrrr rr  r  ","a                                   ","r       s                    rr  r  ","r      sr                    rr  r  ","r   s  rr            s       rr  r  ","r   rssrr            rss     rr  r  ","r   rrrrr            rrrss   rr  r  ","r   rrrrrsss         rrrrr   rr  r  ","r   rrrrrrrr         rrrrr   rr  r  ","r   rrrrrrrr         rrrrrs  rr  r  ","r   rrrrrrrr         rrrrrr  rr  r  ","r   rrrrrrrr         rrrrrr  rr  r  ","r  srrrrrrrr         rrrrrrs rr sr  ","r  srrrrrrrr         rrrrrrs rr  r  ","r  rrrrrrrrr         rrrrrrr rr rr  ","r  rrrrrrrrr         rrrrrrr rr rr  ","r  rrrrrrrrr         rrrrrrr rr rr  ","r   rrrrrrrr         rrrrrr  rr  r  ","r   rrrrrrrr         rrrrrr  rr  r  ","r  rrrrrrrrr         rrrrrrr rr  r  ","r  rrrrrrrrr         rrrrrrr rr  r  ","                sssss               ","r  rrrrrrrrr         rrrrrrr rr sr  ","r  rrrrrrrrr         rrrrrrr rr  r  ","r  rrrrrrrrr         rrrrrrr rr rr  ","r  rrrrrrrrr         rrrrrrr rr rr  ","                             s      ","r  srrrrrrrr         rrrrrrs rr  r  ","r   rrrrrrrr         rrrrr   rr  r  ","              s                     ","                             s      ","                rrrrr               "," s s        sssssssss    s sss s  ss","r  srrrrrrrr         rrrrrrs rr  r  "," s s        sssssssss    s ss  s  ss"," s s        sssssssss    s ss  s  ss"," s s        sssssssss    s ss  s  ss"," s s        sssssssss    s ss  s  ss"," s s        sssssssss    s ss  s  ss"," s s        sssssssss    s ss  s  ss"," s s        sssssssss    s ss  s  ss"," s s        sssssssss    s ss  s  ss"," s s        sssssssss    s ss  s  ss"," s s        sssssssss    s ss  s  ss"," s s        sssssssss    s ss  s  ss"," s s        sssssssss    s ss  s  ss"," s s        sssssssss    s ss  s  ss"," s s        sssssssss      ss  s  ss"," s s        sssssssss    s ss  s  ss"," s           s  sssss          s  s "," s           s  sssss          s  s ","r  rrrrrrrrr         rrrrrrr rr rr  "," s           s  sssss          s  s "," s           s  sssss          s  s ","r  rrrrrrrrr         rrrrrrr rr sr  ","r  rrrrrrrrr         rrrrrrr rr sr  ","r  rrrrrrrrr         rrrrrrr rr  r  ","r  rrrrrrrrr         rrrrrrr rr rr  ","                             s      ","r  rrrrrrrrr         rrrrrrr rr rr  ","r  rrrrrrrrr         rrrrrrr rr rr  ","                             rr     ","                             s      ","                             rs     ","r      sr                    rr  r  ","r   s  rr            s       rr  r  ","r   rssrr            rss     rr  r  ","r   rssrr            rss     rr  r  ","r   rrrrr            rrrss   rr  r  ","r   rrrrr            rrrss   rr  r  ","r   rrrrr            rrrss   rr  r  ","r   rrrrr            rrrss   rr  r  ","r   rrrrrsss         rrrrr   rr  r  ","r   rrrrrsss         rrrrr   rr  r  ","r   rrrrrrrr         rrrrr   rr  r  ","r   rrrrrrrr         rrrrr   rr  r  ","r   rrrrrrrr         rrrrr   rr  r  ","r   rrrrrrrr         rrrrrr  rr  r  ","                                 r  ","                                 s  ","r  srrrrrrrr         rrrrrrs rr  r  ","r  srrrrrrrr         rrrrrrs rr  r  ","r  rrrrrrrrr         rrrrrrr rr  r  ","r  rrrrrrrrr         rrrrrrr rr  r  ","r  rrrrrrrrr         rrrrrrr rr  r  ","r  rrrrrrrrr         rrrrrrr rr  r  ","r  rrrrrrrrr         rrrrrrr rr rr  ","r  rrrrrrrrr         rrrrrrr rr rr  "," s s        sssssssss    s ss  s  ss","r  rrrrrrrrr         rrrrrrr rr rr  ","                             r      "],XPathParser.actionTableNumber=[" 1 0        /.-,+*)('    & %$  #  \"!","                 J                  ","a  aaaaaaaaa         aaaaaaa aa  a  ","                YYYYY               "," 1 0        /.-,+*)('    & %$  #  \"!","K1  KKKKKKKK .  +*)('KKKKKK  KK# K\" "," 1 0        /.-,+*)('    & %$  #  \"!","                            N       ","                            O       ","e  eeeeeeeee         eeeeeee ee ee  ","f  fffffffff         fffffff ff ff  ","d  ddddddddd         ddddddd dd dd  ","B  BBBBBBBBB         BBBBBBB BB BB  ","A  AAAAAAAAA         AAAAAAA AA AA  ","  P                                 ","                            Q       "," 1           .  +*)('          #  \" ","b  bbbbbbbbb         bbbbbbb bb  b  ","                                    ","!       S                    !!  !  ",'"      T"                    ""  "  ',"$   V  $$            U       $$  $  ","&   &ZY&&            &XW     &&  &  ",")   )))))            )))\\[   ))  )  ",".   ....._^]         .....   ..  .  ","1   11111111         11111   11  1  ","5   55555555         55555`  55  5  ","7   77777777         777777  77  7  ","9   99999999         999999  99  9  ",":  c::::::::         ::::::b :: a:  ","I  fIIIIIIII         IIIIIIe II  I  ","=  =========         ======= == ==  ","?  ?????????         ??????? ?? ??  ","C  CCCCCCCCC         CCCCCCC CC CC  ","J   JJJJJJJJ         JJJJJJ  JJ  J  ","M   MMMMMMMM         MMMMMM  MM  M  ","N  NNNNNNNNN         NNNNNNN NN  N  ","P  PPPPPPPPP         PPPPPPP PP  P  ","                +*)('               ","R  RRRRRRRRR         RRRRRRR RR aR  ","U  UUUUUUUUU         UUUUUUU UU  U  ","Z  ZZZZZZZZZ         ZZZZZZZ ZZ ZZ  ","c  ccccccccc         ccccccc cc cc  ","                             j      ","L  fLLLLLLLL         LLLLLLe LL  L  ","6   66666666         66666   66  6  ","              k                     ","                             l      ","                XXXXX               "," 1 0        /.-,+*)('    & %$m #  \"!","_  f________         ______e __  _  "," 1 0        /.-,+*)('    & %$  #  \"!"," 1 0        /.-,+*)('    & %$  #  \"!"," 1 0        /.-,+*)('    & %$  #  \"!"," 1 0        /.-,+*)('    & %$  #  \"!"," 1 0        /.-,+*)('    & %$  #  \"!"," 1 0        /.-,+*)('    & %$  #  \"!"," 1 0        /.-,+*)('    & %$  #  \"!"," 1 0        /.-,+*)('    & %$  #  \"!"," 1 0        /.-,+*)('    & %$  #  \"!"," 1 0        /.-,+*)('    & %$  #  \"!"," 1 0        /.-,+*)('    & %$  #  \"!"," 1 0        /.-,+*)('    & %$  #  \"!"," 1 0        /.-,+*)('    & %$  #  \"!"," 1 0        /.-,+*)('      %$  #  \"!"," 1 0        /.-,+*)('    & %$  #  \"!"," 1           .  +*)('          #  \" "," 1           .  +*)('          #  \" ",">  >>>>>>>>>         >>>>>>> >> >>  "," 1           .  +*)('          #  \" "," 1           .  +*)('          #  \" ","Q  QQQQQQQQQ         QQQQQQQ QQ aQ  ","V  VVVVVVVVV         VVVVVVV VV aV  ","T  TTTTTTTTT         TTTTTTT TT  T  ","@  @@@@@@@@@         @@@@@@@ @@ @@  ","                                   ","[  [[[[[[[[[         [[[[[[[ [[ [[  ","D  DDDDDDDDD         DDDDDDD DD DD  ","                             HH     ","                                   ","                             F     ","#      T#                    ##  #  ","%   V  %%            U       %%  %  ","'   'ZY''            'XW     ''  '  ","(   (ZY((            (XW     ((  (  ","+   +++++            +++\\[   ++  +  ","*   *****            ***\\[   **  *  ","-   -----            ---\\[   --  -  ",",   ,,,,,            ,,,\\[   ,,  ,  ","0   00000_^]         00000   00  0  ","/   /////_^]         /////   //  /  ","2   22222222         22222   22  2  ","3   33333333         33333   33  3  ","4   44444444         44444   44  4  ","8   88888888         888888  88  8  ","                                 ^  ","                                   ",";  f;;;;;;;;         ;;;;;;e ;;  ;  ","<  f<<<<<<<<         <<<<<<e <<  <  ","O  OOOOOOOOO         OOOOOOO OO  O  ","`  `````````         ``````` ``  `  ","S  SSSSSSSSS         SSSSSSS SS  S  ","W  WWWWWWWWW         WWWWWWW WW  W  ","\\  \\\\\\\\\\\\\\\\\\         \\\\\\\\\\\\\\ \\\\ \\\\  ","E  EEEEEEEEE         EEEEEEE EE EE  "," 1 0        /.-,+*)('    & %$  #  \"!","]  ]]]]]]]]]         ]]]]]]] ]] ]]  ","                             G      "],XPathParser.gotoTable=["3456789:;<=>?@ AB  CDEFGH IJ ","                             ","                             ","                             ","L456789:;<=>?@ AB  CDEFGH IJ ","            M        EFGH IJ ","       N;<=>?@ AB  CDEFGH IJ ","                             ","                             ","                             ","                             ","                             ","                             ","                             ","                             ","                             ","            S        EFGH IJ ","                             ","                             ","                             ","                             ","                             ","                             ","                             ","                             ","                             ","                             ","                             ","                             ","              e              ","                             ","                             ","                             ","                             ","                             ","                             ","                             ","                             ","                        h  J ","              i          j   ","                             ","                             ","                             ","                             ","                             ","                             ","                             ","                             ","                             ","o456789:;<=>?@ ABpqCDEFGH IJ ","                             ","  r6789:;<=>?@ AB  CDEFGH IJ ","   s789:;<=>?@ AB  CDEFGH IJ ","    t89:;<=>?@ AB  CDEFGH IJ ","    u89:;<=>?@ AB  CDEFGH IJ ","     v9:;<=>?@ AB  CDEFGH IJ ","     w9:;<=>?@ AB  CDEFGH IJ ","     x9:;<=>?@ AB  CDEFGH IJ ","     y9:;<=>?@ AB  CDEFGH IJ ","      z:;<=>?@ AB  CDEFGH IJ ","      {:;<=>?@ AB  CDEFGH IJ ","       |;<=>?@ AB  CDEFGH IJ ","       };<=>?@ AB  CDEFGH IJ ","       ~;<=>?@ AB  CDEFGH IJ ","         =>?@ AB  CDEFGH IJ ","456789:;<=>?@ AB  CDEFGH IJ","                    EFGH IJ ","                    EFGH IJ ","                             ","                      GH IJ ","                      GH IJ ","              i             ","              i             ","                             ","                             ","                             ","                             ","                             ","                             ","                             ","                             ","                             ","                             ","                             ","                             ","                             ","                             ","                             ","                             ","                             ","                             ","                             ","                             ","                             ","                             ","                             ","                             ","                             ","                             ","                             ","                             ","                             ","                             ","                             ","                             ","o456789:;<=>?@ ABqCDEFGH IJ ","                             ","                             "],XPathParser.productions=[[1,1,2],[2,1,3],[3,1,4],[3,3,3,-9,4],[4,1,5],[4,3,4,-8,5],[5,1,6],[5,3,5,-22,6],[5,3,5,-5,6],[6,1,7],[6,3,6,-23,7],[6,3,6,-24,7],[6,3,6,-6,7],[6,3,6,-7,7],[7,1,8],[7,3,7,-25,8],[7,3,7,-26,8],[8,1,9],[8,3,8,-12,9],[8,3,8,-11,9],[8,3,8,-10,9],[9,1,10],[9,2,-26,9],[10,1,11],[10,3,10,-27,11],[11,1,12],[11,1,13],[11,3,13,-28,14],[11,3,13,-4,14],[13,1,15],[13,2,13,16],[15,1,17],[15,3,-29,2,-30],[15,1,-15],[15,1,-16],[15,1,18],[18,3,-13,-29,-30],[18,4,-13,-29,19,-30],[19,1,20],[19,3,20,-31,19],[20,1,2],[12,1,14],[12,1,21],[21,1,-28],[21,2,-28,14],[21,1,22],[14,1,23],[14,3,14,-28,23],[14,1,24],[23,2,25,26],[23,1,26],[23,3,25,26,27],[23,2,26,27],[23,1,28],[27,1,16],[27,2,16,27],[25,2,-14,-3],[25,1,-32],[26,1,29],[26,3,-20,-29,-30],[26,4,-21,-29,-15,-30],[16,3,-33,30,-34],[30,1,2],[22,2,-4,14],[24,3,14,-4,23],[28,1,-35],[28,1,-2],[17,2,-36,-18],[29,1,-17],[29,1,-19],[29,1,-18]],XPathParser.DOUBLEDOT=2,XPathParser.DOUBLECOLON=3,XPathParser.DOUBLESLASH=4,XPathParser.NOTEQUAL=5,XPathParser.LESSTHANOREQUAL=6,XPathParser.GREATERTHANOREQUAL=7,XPathParser.AND=8,XPathParser.OR=9,XPathParser.MOD=10,XPathParser.DIV=11,XPathParser.MULTIPLYOPERATOR=12,XPathParser.FUNCTIONNAME=13,XPathParser.AXISNAME=14,XPathParser.LITERAL=15,XPathParser.NUMBER=16,XPathParser.ASTERISKNAMETEST=17,XPathParser.QNAME=18,XPathParser.NCNAMECOLONASTERISK=19,XPathParser.NODETYPE=20,XPathParser.PROCESSINGINSTRUCTIONWITHLITERAL=21,XPathParser.EQUALS=22,XPathParser.LESSTHAN=23,XPathParser.GREATERTHAN=24,XPathParser.PLUS=25,XPathParser.MINUS=26,XPathParser.BAR=27,XPathParser.SLASH=28,XPathParser.LEFTPARENTHESIS=29,XPathParser.RIGHTPARENTHESIS=30,XPathParser.COMMA=31,XPathParser.AT=32,XPathParser.LEFTBRACKET=33,XPathParser.RIGHTBRACKET=34,XPathParser.DOT=35,XPathParser.DOLLAR=36,XPathParser.prototype.tokenize=function(e){for(var t=[],r=[],n=e+"\0",o=0,s=n.charAt(o++);;){for(;" "==s||"\t"==s||"\r"==s||"\n"==s;)s=n.charAt(o++);if("\0"==s||o>=n.length)break;if("("!=s)if(")"!=s)if("["!=s)if("]"!=s)if("@"!=s)if(","!=s)if("|"!=s)if("+"!=s)if("-"!=s)if("="!=s)if("$"!=s)if("."!=s)if("'"!=s&&'"'!=s)if(s>="0"&&s<="9"){p=s;for(s=n.charAt(o++);s>="0"&&s<="9";)p+=s,s=n.charAt(o++);if("."==s&&n.charAt(o)>="0"&&n.charAt(o)<="9")for(p+=s,p+=n.charAt(o++),s=n.charAt(o++);s>="0"&&s<="9";)p+=s,s=n.charAt(o++);t.push(XPathParser.NUMBER),r.push(p)}else if("*"!=s)if(":"!=s||":"!=n.charAt(o))if("/"!=s)if("!"!=s||"="!=n.charAt(o))if("<"!=s)if(">"!=s){if("_"!=s&&!i.isLetter(s.charCodeAt(0)))throw new Error("Unexpected character "+s);var a=s;for(s=n.charAt(o++);i.isNCNameChar(s.charCodeAt(0));)a+=s,s=n.charAt(o++);if(t.length>0&&(c=t[t.length-1])!=XPathParser.AT&&c!=XPathParser.DOUBLECOLON&&c!=XPathParser.LEFTPARENTHESIS&&c!=XPathParser.LEFTBRACKET&&c!=XPathParser.AND&&c!=XPathParser.OR&&c!=XPathParser.MOD&&c!=XPathParser.DIV&&c!=XPathParser.MULTIPLYOPERATOR&&c!=XPathParser.SLASH&&c!=XPathParser.DOUBLESLASH&&c!=XPathParser.BAR&&c!=XPathParser.PLUS&&c!=XPathParser.MINUS&&c!=XPathParser.EQUALS&&c!=XPathParser.NOTEQUAL&&c!=XPathParser.LESSTHAN&&c!=XPathParser.LESSTHANOREQUAL&&c!=XPathParser.GREATERTHAN&&c!=XPathParser.GREATERTHANOREQUAL){if("and"==a){t.push(XPathParser.AND),r.push(a);continue}if("or"==a){t.push(XPathParser.OR),r.push(a);continue}if("mod"==a){t.push(XPathParser.MOD),r.push(a);continue}if("div"==a){t.push(XPathParser.DIV),r.push(a);continue}}if(":"==s){if("*"==n.charAt(o)){t.push(XPathParser.NCNAMECOLONASTERISK),r.push(a+":*"),o++,s=n.charAt(o++);continue}if("_"==n.charAt(o)||i.isLetter(n.charCodeAt(o))){for(a+=":",s=n.charAt(o++);i.isNCNameChar(s.charCodeAt(0));)a+=s,s=n.charAt(o++);if("("==s){t.push(XPathParser.FUNCTIONNAME),r.push(a);continue}t.push(XPathParser.QNAME),r.push(a);continue}if(":"==n.charAt(o)){t.push(XPathParser.AXISNAME),r.push(a);continue}}if("("==s){if("comment"==a||"text"==a||"node"==a){t.push(XPathParser.NODETYPE),r.push(a);continue}if("processing-instruction"==a){")"==n.charAt(o)?t.push(XPathParser.NODETYPE):t.push(XPathParser.PROCESSINGINSTRUCTIONWITHLITERAL),r.push(a);continue}t.push(XPathParser.FUNCTIONNAME),r.push(a);continue}t.push(XPathParser.QNAME),r.push(a)}else{if("="==n.charAt(o)){t.push(XPathParser.GREATERTHANOREQUAL),r.push(">="),o++,s=n.charAt(o++);continue}t.push(XPathParser.GREATERTHAN),r.push(">"),s=n.charAt(o++)}else{if("="==n.charAt(o)){t.push(XPathParser.LESSTHANOREQUAL),r.push("<="),o++,s=n.charAt(o++);continue}t.push(XPathParser.LESSTHAN),r.push("<"),s=n.charAt(o++)}else t.push(XPathParser.NOTEQUAL),r.push("!="),o++,s=n.charAt(o++);else{if("/"==(s=n.charAt(o++))){t.push(XPathParser.DOUBLESLASH),r.push("//"),s=n.charAt(o++);continue}t.push(XPathParser.SLASH),r.push("/")}else t.push(XPathParser.DOUBLECOLON),r.push("::"),o++,s=n.charAt(o++);else{var c;if(t.length>0&&(c=t[t.length-1])!=XPathParser.AT&&c!=XPathParser.DOUBLECOLON&&c!=XPathParser.LEFTPARENTHESIS&&c!=XPathParser.LEFTBRACKET&&c!=XPathParser.AND&&c!=XPathParser.OR&&c!=XPathParser.MOD&&c!=XPathParser.DIV&&c!=XPathParser.MULTIPLYOPERATOR&&c!=XPathParser.SLASH&&c!=XPathParser.DOUBLESLASH&&c!=XPathParser.BAR&&c!=XPathParser.PLUS&&c!=XPathParser.MINUS&&c!=XPathParser.EQUALS&&c!=XPathParser.NOTEQUAL&&c!=XPathParser.LESSTHAN&&c!=XPathParser.LESSTHANOREQUAL&&c!=XPathParser.GREATERTHAN&&c!=XPathParser.GREATERTHANOREQUAL){t.push(XPathParser.MULTIPLYOPERATOR),r.push(s),s=n.charAt(o++);continue}t.push(XPathParser.ASTERISKNAMETEST),r.push(s),s=n.charAt(o++)}else{for(var u=s,l="";(s=n.charAt(o++))!=u;)l+=s;t.push(XPathParser.LITERAL),r.push(l),s=n.charAt(o++)}else{if("."==(s=n.charAt(o++))){t.push(XPathParser.DOUBLEDOT),r.push(".."),s=n.charAt(o++);continue}if(s>="0"&&s<="9"){var p="."+s;for(s=n.charAt(o++);s>="0"&&s<="9";)p+=s,s=n.charAt(o++);t.push(XPathParser.NUMBER),r.push(p);continue}t.push(XPathParser.DOT),r.push(".")}else t.push(XPathParser.DOLLAR),r.push(s),s=n.charAt(o++);else t.push(XPathParser.EQUALS),r.push(s),s=n.charAt(o++);else t.push(XPathParser.MINUS),r.push(s),s=n.charAt(o++);else t.push(XPathParser.PLUS),r.push(s),s=n.charAt(o++);else t.push(XPathParser.BAR),r.push(s),s=n.charAt(o++);else t.push(XPathParser.COMMA),r.push(s),s=n.charAt(o++);else t.push(XPathParser.AT),r.push(s),s=n.charAt(o++);else t.push(XPathParser.RIGHTBRACKET),r.push(s),s=n.charAt(o++);else t.push(XPathParser.LEFTBRACKET),r.push(s),s=n.charAt(o++);else t.push(XPathParser.RIGHTPARENTHESIS),r.push(s),s=n.charAt(o++);else t.push(XPathParser.LEFTPARENTHESIS),r.push(s),s=n.charAt(o++)}return t.push(1),r.push("[EOF]"),[t,r]},XPathParser.SHIFT="s",XPathParser.REDUCE="r",XPathParser.ACCEPT="a",XPathParser.prototype.parse=function(e){var t,r,n=this.tokenize(e);if(null!=n){t=n[0],r=n[1];var i,o,s=0,a=[],c=[],u=[];for(a.push(0),c.push(1),u.push("_S"),i=t[s],o=r[s++];;)switch(e=a[a.length-1],XPathParser.actionTable[e].charAt(i-1)){case XPathParser.SHIFT:c.push(-i),u.push(o),a.push(XPathParser.actionTableNumber[e].charCodeAt(i-1)-32),i=t[s],o=r[s++];break;case XPathParser.REDUCE:for(var l=XPathParser.productions[XPathParser.actionTableNumber[e].charCodeAt(i-1)-32][1],p=[],d=0;d<l;d++)c.pop(),p.unshift(u.pop()),a.pop();var h=a[a.length-1];c.push(XPathParser.productions[XPathParser.actionTableNumber[e].charCodeAt(i-1)-32][0]),null==this.reduceActions[XPathParser.actionTableNumber[e].charCodeAt(i-1)-32]?u.push(p[0]):u.push(this.reduceActions[XPathParser.actionTableNumber[e].charCodeAt(i-1)-32](p)),a.push(XPathParser.gotoTable[h].charCodeAt(XPathParser.productions[XPathParser.actionTableNumber[e].charCodeAt(i-1)-32][0]-2)-33);break;case XPathParser.ACCEPT:return new XPath(u.pop());default:throw new Error("XPath parse error")}}},XPath.prototype=new Object,XPath.prototype.constructor=XPath,XPath.superclass=Object.prototype,XPath.prototype.toString=function(){return this.expression.toString()},XPath.prototype.evaluate=function(e){if(e.contextNode=e.expressionContextNode,e.contextSize=1,e.contextPosition=1,e.caseInsensitive=!1,null!=e.contextNode){var t=e.contextNode;9!=t.nodeType&&(t=t.ownerDocument);try{e.caseInsensitive=t.implementation.hasFeature("HTML","2.0")}catch(t){e.caseInsensitive=!0}}return this.expression.evaluate(e)},XPath.XML_NAMESPACE_URI="http://www.w3.org/XML/1998/namespace",XPath.XMLNS_NAMESPACE_URI="http://www.w3.org/2000/xmlns/",Expression.prototype=new Object,Expression.prototype.constructor=Expression,Expression.superclass=Object.prototype,Expression.prototype.init=function(){},Expression.prototype.toString=function(){return"<Expression>"},Expression.prototype.evaluate=function(e){throw new Error("Could not evaluate expression.")},UnaryOperation.prototype=new Expression,UnaryOperation.prototype.constructor=UnaryOperation,UnaryOperation.superclass=Expression.prototype,UnaryOperation.prototype.init=function(e){this.rhs=e},UnaryMinusOperation.prototype=new UnaryOperation,UnaryMinusOperation.prototype.constructor=UnaryMinusOperation,UnaryMinusOperation.superclass=UnaryOperation.prototype,UnaryMinusOperation.prototype.init=function(e){UnaryMinusOperation.superclass.init.call(this,e)},UnaryMinusOperation.prototype.evaluate=function(e){return this.rhs.evaluate(e).number().negate()},UnaryMinusOperation.prototype.toString=function(){return"-"+this.rhs.toString()},BinaryOperation.prototype=new Expression,BinaryOperation.prototype.constructor=BinaryOperation,BinaryOperation.superclass=Expression.prototype,BinaryOperation.prototype.init=function(e,t){this.lhs=e,this.rhs=t},OrOperation.prototype=new BinaryOperation,OrOperation.prototype.constructor=OrOperation,OrOperation.superclass=BinaryOperation.prototype,OrOperation.prototype.init=function(e,t){OrOperation.superclass.init.call(this,e,t)},OrOperation.prototype.toString=function(){return"("+this.lhs.toString()+" or "+this.rhs.toString()+")"},OrOperation.prototype.evaluate=function(e){var t=this.lhs.evaluate(e).bool();return t.booleanValue()?t:this.rhs.evaluate(e).bool()},AndOperation.prototype=new BinaryOperation,AndOperation.prototype.constructor=AndOperation,AndOperation.superclass=BinaryOperation.prototype,AndOperation.prototype.init=function(e,t){AndOperation.superclass.init.call(this,e,t)},AndOperation.prototype.toString=function(){return"("+this.lhs.toString()+" and "+this.rhs.toString()+")"},AndOperation.prototype.evaluate=function(e){var t=this.lhs.evaluate(e).bool();return t.booleanValue()?this.rhs.evaluate(e).bool():t},EqualsOperation.prototype=new BinaryOperation,EqualsOperation.prototype.constructor=EqualsOperation,EqualsOperation.superclass=BinaryOperation.prototype,EqualsOperation.prototype.init=function(e,t){EqualsOperation.superclass.init.call(this,e,t)},EqualsOperation.prototype.toString=function(){return"("+this.lhs.toString()+" = "+this.rhs.toString()+")"},EqualsOperation.prototype.evaluate=function(e){return this.lhs.evaluate(e).equals(this.rhs.evaluate(e))},NotEqualOperation.prototype=new BinaryOperation,NotEqualOperation.prototype.constructor=NotEqualOperation,NotEqualOperation.superclass=BinaryOperation.prototype,NotEqualOperation.prototype.init=function(e,t){NotEqualOperation.superclass.init.call(this,e,t)},NotEqualOperation.prototype.toString=function(){return"("+this.lhs.toString()+" != "+this.rhs.toString()+")"},NotEqualOperation.prototype.evaluate=function(e){return this.lhs.evaluate(e).notequal(this.rhs.evaluate(e))},LessThanOperation.prototype=new BinaryOperation,LessThanOperation.prototype.constructor=LessThanOperation,LessThanOperation.superclass=BinaryOperation.prototype,LessThanOperation.prototype.init=function(e,t){LessThanOperation.superclass.init.call(this,e,t)},LessThanOperation.prototype.evaluate=function(e){return this.lhs.evaluate(e).lessthan(this.rhs.evaluate(e))},LessThanOperation.prototype.toString=function(){return"("+this.lhs.toString()+" < "+this.rhs.toString()+")"},GreaterThanOperation.prototype=new BinaryOperation,GreaterThanOperation.prototype.constructor=GreaterThanOperation,GreaterThanOperation.superclass=BinaryOperation.prototype,GreaterThanOperation.prototype.init=function(e,t){GreaterThanOperation.superclass.init.call(this,e,t)},GreaterThanOperation.prototype.evaluate=function(e){return this.lhs.evaluate(e).greaterthan(this.rhs.evaluate(e))},GreaterThanOperation.prototype.toString=function(){return"("+this.lhs.toString()+" > "+this.rhs.toString()+")"},LessThanOrEqualOperation.prototype=new BinaryOperation,LessThanOrEqualOperation.prototype.constructor=LessThanOrEqualOperation,LessThanOrEqualOperation.superclass=BinaryOperation.prototype,LessThanOrEqualOperation.prototype.init=function(e,t){LessThanOrEqualOperation.superclass.init.call(this,e,t)},LessThanOrEqualOperation.prototype.evaluate=function(e){return this.lhs.evaluate(e).lessthanorequal(this.rhs.evaluate(e))},LessThanOrEqualOperation.prototype.toString=function(){return"("+this.lhs.toString()+" <= "+this.rhs.toString()+")"},GreaterThanOrEqualOperation.prototype=new BinaryOperation,GreaterThanOrEqualOperation.prototype.constructor=GreaterThanOrEqualOperation,GreaterThanOrEqualOperation.superclass=BinaryOperation.prototype,GreaterThanOrEqualOperation.prototype.init=function(e,t){GreaterThanOrEqualOperation.superclass.init.call(this,e,t)},GreaterThanOrEqualOperation.prototype.evaluate=function(e){return this.lhs.evaluate(e).greaterthanorequal(this.rhs.evaluate(e))},GreaterThanOrEqualOperation.prototype.toString=function(){return"("+this.lhs.toString()+" >= "+this.rhs.toString()+")"},PlusOperation.prototype=new BinaryOperation,PlusOperation.prototype.constructor=PlusOperation,PlusOperation.superclass=BinaryOperation.prototype,PlusOperation.prototype.init=function(e,t){PlusOperation.superclass.init.call(this,e,t)},PlusOperation.prototype.evaluate=function(e){return this.lhs.evaluate(e).number().plus(this.rhs.evaluate(e).number())},PlusOperation.prototype.toString=function(){return"("+this.lhs.toString()+" + "+this.rhs.toString()+")"},MinusOperation.prototype=new BinaryOperation,MinusOperation.prototype.constructor=MinusOperation,MinusOperation.superclass=BinaryOperation.prototype,MinusOperation.prototype.init=function(e,t){MinusOperation.superclass.init.call(this,e,t)},MinusOperation.prototype.evaluate=function(e){return this.lhs.evaluate(e).number().minus(this.rhs.evaluate(e).number())},MinusOperation.prototype.toString=function(){return"("+this.lhs.toString()+" - "+this.rhs.toString()+")"},MultiplyOperation.prototype=new BinaryOperation,MultiplyOperation.prototype.constructor=MultiplyOperation,MultiplyOperation.superclass=BinaryOperation.prototype,MultiplyOperation.prototype.init=function(e,t){MultiplyOperation.superclass.init.call(this,e,t)},MultiplyOperation.prototype.evaluate=function(e){return this.lhs.evaluate(e).number().multiply(this.rhs.evaluate(e).number())},MultiplyOperation.prototype.toString=function(){return"("+this.lhs.toString()+" * "+this.rhs.toString()+")"},DivOperation.prototype=new BinaryOperation,DivOperation.prototype.constructor=DivOperation,DivOperation.superclass=BinaryOperation.prototype,DivOperation.prototype.init=function(e,t){DivOperation.superclass.init.call(this,e,t)},DivOperation.prototype.evaluate=function(e){return this.lhs.evaluate(e).number().div(this.rhs.evaluate(e).number())},DivOperation.prototype.toString=function(){return"("+this.lhs.toString()+" div "+this.rhs.toString()+")"},ModOperation.prototype=new BinaryOperation,ModOperation.prototype.constructor=ModOperation,ModOperation.superclass=BinaryOperation.prototype,ModOperation.prototype.init=function(e,t){ModOperation.superclass.init.call(this,e,t)},ModOperation.prototype.evaluate=function(e){return this.lhs.evaluate(e).number().mod(this.rhs.evaluate(e).number())},ModOperation.prototype.toString=function(){return"("+this.lhs.toString()+" mod "+this.rhs.toString()+")"},BarOperation.prototype=new BinaryOperation,BarOperation.prototype.constructor=BarOperation,BarOperation.superclass=BinaryOperation.prototype,BarOperation.prototype.init=function(e,t){BarOperation.superclass.init.call(this,e,t)},BarOperation.prototype.evaluate=function(e){return this.lhs.evaluate(e).nodeset().union(this.rhs.evaluate(e).nodeset())},BarOperation.prototype.toString=function(){return this.lhs.toString()+" | "+this.rhs.toString()},PathExpr.prototype=new Expression,PathExpr.prototype.constructor=PathExpr,PathExpr.superclass=Expression.prototype,PathExpr.prototype.init=function(e,t,r){PathExpr.superclass.init.call(this),this.filter=e,this.filterPredicates=t,this.locationPath=r},PathExpr.prototype.evaluate=function(e){var t,r=new XPathContext;if(r.variableResolver=e.variableResolver,r.functionResolver=e.functionResolver,r.namespaceResolver=e.namespaceResolver,r.expressionContextNode=e.expressionContextNode,r.virtualRoot=e.virtualRoot,r.caseInsensitive=e.caseInsensitive,null==this.filter)t=[e.contextNode];else{var n=this.filter.evaluate(e);if(!i.instance_of(n,XNodeSet)){if(null!=this.filterPredicates&&this.filterPredicates.length>0||null!=this.locationPath)throw new Error("Path expression filter must evaluate to a nodset if predicates or location path are used");return n}if(t=n.toArray(),null!=this.filterPredicates)for(var o=0;o<this.filterPredicates.length;o++){var s=this.filterPredicates[o],a=[];for(r.contextSize=t.length,r.contextPosition=1;r.contextPosition<=r.contextSize;r.contextPosition++)r.contextNode=t[r.contextPosition-1],this.predicateMatches(s,r)&&a.push(r.contextNode);t=a}}if(null!=this.locationPath){if(this.locationPath.absolute)if(9!=t[0].nodeType)if(null!=r.virtualRoot)t=[r.virtualRoot];else if(null==t[0].ownerDocument){for(var c=t[0];null!=c.parentNode;)c=c.parentNode;t=[c]}else t=[t[0].ownerDocument];else t=[t[0]];for(var u=0;u<this.locationPath.steps.length;u++){var l=this.locationPath.steps[u],p=(a=[],[]);for(o=0;o<t.length;o++)switch(r.contextNode=t[o],l.axis){case Step.ANCESTOR:if(r.contextNode===r.virtualRoot)break;for(d=2==r.contextNode.nodeType?this.getOwnerElement(r.contextNode):r.contextNode.parentNode;null!=d&&(l.nodeTest.matches(d,r)&&a.push(d),d!==r.virtualRoot);)d=d.parentNode;break;case Step.ANCESTORORSELF:for(var d=r.contextNode;null!=d&&(l.nodeTest.matches(d,r)&&a.push(d),d!==r.virtualRoot);d=2==d.nodeType?this.getOwnerElement(d):d.parentNode);break;case Step.ATTRIBUTE:var h=r.contextNode.attributes;if(null!=h)for(var f=0;f<h.length;f++){d=h.item(f);l.nodeTest.matches(d,r)&&a.push(d)}break;case Step.CHILD:var m=0,g=[];for(d=r.contextNode.firstChild;null!=d;d=d.nextSibling)l.nodeTest.matches(d,r)&&(a.push(d),g.push({contextPosition:++m}));for(f=0;f<g.length;f++)g[f].contextSize=m,p.push(g[f]);break;case Step.DESCENDANT:for(var y=[r.contextNode.firstChild];y.length>0;)for(d=y.pop();null!=d;)l.nodeTest.matches(d,r)&&a.push(d),null!=d.firstChild?(y.push(d.nextSibling),d=d.firstChild):d=d.nextSibling;break;case Step.DESCENDANTORSELF:l.nodeTest.matches(r.contextNode,r)&&a.push(r.contextNode);for(y=[r.contextNode.firstChild];y.length>0;)for(d=y.pop();null!=d;)l.nodeTest.matches(d,r)&&a.push(d),null!=d.firstChild?(y.push(d.nextSibling),d=d.firstChild):d=d.nextSibling;break;case Step.FOLLOWING:if(r.contextNode===r.virtualRoot)break;y=[];null!=r.contextNode.firstChild?y.unshift(r.contextNode.firstChild):y.unshift(r.contextNode.nextSibling);for(d=r.contextNode;null!=d&&9!=d.nodeType&&d!==r.virtualRoot;d=d.parentNode)y.unshift(d.nextSibling);do{for(d=y.pop();null!=d;)l.nodeTest.matches(d,r)&&a.push(d),null!=d.firstChild?(y.push(d.nextSibling),d=d.firstChild):d=d.nextSibling}while(y.length>0);break;case Step.FOLLOWINGSIBLING:if(r.contextNode===r.virtualRoot)break;for(d=r.contextNode.nextSibling;null!=d;d=d.nextSibling)l.nodeTest.matches(d,r)&&a.push(d);break;case Step.NAMESPACE:c={};if(1==r.contextNode.nodeType){c.xml=XPath.XML_NAMESPACE_URI,c.xmlns=XPath.XMLNS_NAMESPACE_URI;for(d=r.contextNode;null!=d&&1==d.nodeType;d=d.parentNode)for(f=0;f<d.attributes.length;f++){var v=d.attributes.item(f),b=String(v.name);if("xmlns"==b)null==c[""]&&(c[""]=v.value);else if(b.length>6&&"xmlns:"==b.substring(0,6)){null==c[_=b.substring(6,b.length)]&&(c[_]=v.value)}}for(var _ in c){var w=new NamespaceNode(_,c[_],r.contextNode);l.nodeTest.matches(w,r)&&a.push(w)}}break;case Step.PARENT:d=null,r.contextNode!==r.virtualRoot&&(d=2==r.contextNode.nodeType?this.getOwnerElement(r.contextNode):r.contextNode.parentNode),null!=d&&l.nodeTest.matches(d,r)&&a.push(d);break;case Step.PRECEDING:y=null!=r.virtualRoot?[r.virtualRoot]:9==r.contextNode.nodeType?[r.contextNode]:[r.contextNode.ownerDocument];e:for(;y.length>0;)for(d=y.pop();null!=d;){if(d==r.contextNode)break e;l.nodeTest.matches(d,r)&&a.unshift(d),null!=d.firstChild?(y.push(d.nextSibling),d=d.firstChild):d=d.nextSibling}break;case Step.PRECEDINGSIBLING:if(r.contextNode===r.virtualRoot)break;for(d=r.contextNode.previousSibling;null!=d;d=d.previousSibling)l.nodeTest.matches(d,r)&&a.push(d);break;case Step.SELF:l.nodeTest.matches(r.contextNode,r)&&a.push(r.contextNode)}t=a;for(o=0;o<l.predicates.length;o++){s=l.predicates[o],a=[];for(r.contextSize=t.length,r.contextPosition=1;r.contextPosition<=r.contextSize;r.contextPosition++){r.contextNode=t[r.contextPosition-1];var E=p.length>0?this.getLocalCtx(r,p[r.contextPosition-1]):r;this.predicateMatches(s,E)&&a.push(r.contextNode)}t=a}}}return(n=new XNodeSet).addArray(t),n},PathExpr.prototype.getLocalCtx=function(e,t,r){var n=new XPathContext;return n.variableResolver=e.variableResolver,n.functionResolver=e.functionResolver,n.namespaceResolver=e.namespaceResolver,n.expressionContextNode=e.expressionContextNode,n.virtualRoot=e.virtualRoot,n.caseInsensitive=e.caseInsensitive,n.contextNode=e.contextNode,n.contextPosition=t.contextPosition,n.contextSize=t.contextSize,n},PathExpr.prototype.predicateMatches=function(e,t){var r=e.evaluate(t);return i.instance_of(r,XNumber)?t.contextPosition==r.numberValue():r.booleanValue()},PathExpr.prototype.toString=function(){if(null!=this.filter){var e=this.filter.toString();if(i.instance_of(this.filter,XString)&&(e="'"+e+"'"),null!=this.filterPredicates)for(var t=0;t<this.filterPredicates.length;t++)e=e+"["+this.filterPredicates[t].toString()+"]";return null!=this.locationPath&&(this.locationPath.absolute||(e+="/"),e+=this.locationPath.toString()),e}return this.locationPath.toString()},PathExpr.prototype.getOwnerElement=function(e){if(e.ownerElement)return e.ownerElement;try{if(e.selectSingleNode)return e.selectSingleNode("..")}catch(e){}for(var t=(9==e.nodeType?e:e.ownerDocument).getElementsByTagName("*"),r=0;r<t.length;r++)for(var n=t.item(r),i=n.attributes,o=0;o<i.length;o++){if(i.item(o)===e)return n}return null},LocationPath.prototype=new Object,LocationPath.prototype.constructor=LocationPath,LocationPath.superclass=Object.prototype,LocationPath.prototype.init=function(e,t){this.absolute=e,this.steps=t},LocationPath.prototype.toString=function(){var e;e=this.absolute?"/":"";for(var t=0;t<this.steps.length;t++)0!=t&&(e+="/"),e+=this.steps[t].toString();return e},Step.prototype=new Object,Step.prototype.constructor=Step,Step.superclass=Object.prototype,Step.prototype.init=function(e,t,r){this.axis=e,this.nodeTest=t,this.predicates=r},Step.prototype.toString=function(){var e;switch(this.axis){case Step.ANCESTOR:e="ancestor";break;case Step.ANCESTORORSELF:e="ancestor-or-self";break;case Step.ATTRIBUTE:e="attribute";break;case Step.CHILD:e="child";break;case Step.DESCENDANT:e="descendant";break;case Step.DESCENDANTORSELF:e="descendant-or-self";break;case Step.FOLLOWING:e="following";break;case Step.FOLLOWINGSIBLING:e="following-sibling";break;case Step.NAMESPACE:e="namespace";break;case Step.PARENT:e="parent";break;case Step.PRECEDING:e="preceding";break;case Step.PRECEDINGSIBLING:e="preceding-sibling";break;case Step.SELF:e="self"}e+="::",e+=this.nodeTest.toString();for(var t=0;t<this.predicates.length;t++)e+="["+this.predicates[t].toString()+"]";return e},Step.ANCESTOR=0,Step.ANCESTORORSELF=1,Step.ATTRIBUTE=2,Step.CHILD=3,Step.DESCENDANT=4,Step.DESCENDANTORSELF=5,Step.FOLLOWING=6,Step.FOLLOWINGSIBLING=7,Step.NAMESPACE=8,Step.PARENT=9,Step.PRECEDING=10,Step.PRECEDINGSIBLING=11,Step.SELF=12,NodeTest.prototype=new Object,NodeTest.prototype.constructor=NodeTest,NodeTest.superclass=Object.prototype,NodeTest.prototype.init=function(e,t){this.type=e,this.value=t},NodeTest.prototype.toString=function(){switch(this.type){case NodeTest.NAMETESTANY:return"*";case NodeTest.NAMETESTPREFIXANY:return this.value+":*";case NodeTest.NAMETESTRESOLVEDANY:return"{"+this.value+"}*";case NodeTest.NAMETESTQNAME:return this.value;case NodeTest.NAMETESTRESOLVEDNAME:return"{"+this.namespaceURI+"}"+this.value;case NodeTest.COMMENT:return"comment()";case NodeTest.TEXT:return"text()";case NodeTest.PI:return null!=this.value?'processing-instruction("'+this.value+'")':"processing-instruction()";case NodeTest.NODE:return"node()"}return"<unknown nodetest type>"},NodeTest.prototype.matches=function(e,t){switch(this.type){case NodeTest.NAMETESTANY:return 2==e.nodeType||1==e.nodeType||e.nodeType==XPathNamespace.XPATH_NAMESPACE_NODE;case NodeTest.NAMETESTPREFIXANY:if(2==e.nodeType||1==e.nodeType){if(null==t.namespaceResolver.getNamespace(this.value,t.expressionContextNode))throw new Error("Cannot resolve QName "+this.value);return!0}return!1;case NodeTest.NAMETESTQNAME:if(2==e.nodeType||1==e.nodeType||e.nodeType==XPathNamespace.XPATH_NAMESPACE_NODE){var r=i.resolveQName(this.value,t.namespaceResolver,t.expressionContextNode,!1);if(null==r[0])throw new Error("Cannot resolve QName "+this.value);r[0]=String(r[0]),r[1]=String(r[1]),""==r[0]&&(r[0]=null);var n=i.resolveQName(e.nodeName,t.namespaceResolver,e,1==e.nodeType);return n[0]=String(n[0]),n[1]=String(n[1]),""==n[0]&&(n[0]=null),t.caseInsensitive?r[0]==n[0]&&String(r[1]).toLowerCase()==String(n[1]).toLowerCase():r[0]==n[0]&&r[1]==n[1]}return!1;case NodeTest.COMMENT:return 8==e.nodeType;case NodeTest.TEXT:return 3==e.nodeType||4==e.nodeType;case NodeTest.PI:return 7==e.nodeType&&(null==this.value||e.nodeName==this.value);case NodeTest.NODE:return 9==e.nodeType||1==e.nodeType||2==e.nodeType||3==e.nodeType||4==e.nodeType||8==e.nodeType||7==e.nodeType}return!1},NodeTest.NAMETESTANY=0,NodeTest.NAMETESTPREFIXANY=1,NodeTest.NAMETESTQNAME=2,NodeTest.COMMENT=3,NodeTest.TEXT=4,NodeTest.PI=5,NodeTest.NODE=6,VariableReference.prototype=new Expression,VariableReference.prototype.constructor=VariableReference,VariableReference.superclass=Expression.prototype,VariableReference.prototype.init=function(e){this.variable=e},VariableReference.prototype.toString=function(){return"$"+this.variable},VariableReference.prototype.evaluate=function(e){return e.variableResolver.getVariable(this.variable,e)},FunctionCall.prototype=new Expression,FunctionCall.prototype.constructor=FunctionCall,FunctionCall.superclass=Expression.prototype,FunctionCall.prototype.init=function(e,t){this.functionName=e,this.arguments=t},FunctionCall.prototype.toString=function(){for(var e=this.functionName+"(",t=0;t<this.arguments.length;t++)t>0&&(e+=", "),e+=this.arguments[t].toString();return e+")"},FunctionCall.prototype.evaluate=function(e){var t=e.functionResolver.getFunction(this.functionName,e);if(null==t)throw new Error("Unknown function "+this.functionName);var r=[e].concat(this.arguments);return t.apply(e.functionResolver.thisArg,r)},XString.prototype=new Expression,XString.prototype.constructor=XString,XString.superclass=Expression.prototype,XString.prototype.init=function(e){this.str=e},XString.prototype.toString=function(){return this.str},XString.prototype.evaluate=function(e){return this},XString.prototype.string=function(){return this},XString.prototype.number=function(){return new XNumber(this.str)},XString.prototype.bool=function(){return new XBoolean(this.str)},XString.prototype.nodeset=function(){throw new Error("Cannot convert string to nodeset")},XString.prototype.stringValue=function(){return this.str},XString.prototype.numberValue=function(){return this.number().numberValue()},XString.prototype.booleanValue=function(){return this.bool().booleanValue()},XString.prototype.equals=function(e){return i.instance_of(e,XBoolean)?this.bool().equals(e):i.instance_of(e,XNumber)?this.number().equals(e):i.instance_of(e,XNodeSet)?e.compareWithString(this,r.equals):new XBoolean(this.str==e.str)},XString.prototype.notequal=function(e){return i.instance_of(e,XBoolean)?this.bool().notequal(e):i.instance_of(e,XNumber)?this.number().notequal(e):i.instance_of(e,XNodeSet)?e.compareWithString(this,r.notequal):new XBoolean(this.str!=e.str)},XString.prototype.lessthan=function(e){return i.instance_of(e,XNodeSet)?e.compareWithNumber(this.number(),r.greaterthanorequal):this.number().lessthan(e.number())},XString.prototype.greaterthan=function(e){return i.instance_of(e,XNodeSet)?e.compareWithNumber(this.number(),r.lessthanorequal):this.number().greaterthan(e.number())},XString.prototype.lessthanorequal=function(e){return i.instance_of(e,XNodeSet)?e.compareWithNumber(this.number(),r.greaterthan):this.number().lessthanorequal(e.number())},XString.prototype.greaterthanorequal=function(e){return i.instance_of(e,XNodeSet)?e.compareWithNumber(this.number(),r.lessthan):this.number().greaterthanorequal(e.number())},XNumber.prototype=new Expression,XNumber.prototype.constructor=XNumber,XNumber.superclass=Expression.prototype,XNumber.prototype.init=function(e){this.num=Number(e)},XNumber.prototype.toString=function(){return this.num},XNumber.prototype.evaluate=function(e){return this},XNumber.prototype.string=function(){return new XString(this.num)},XNumber.prototype.number=function(){return this},XNumber.prototype.bool=function(){return new XBoolean(this.num)},XNumber.prototype.nodeset=function(){throw new Error("Cannot convert number to nodeset")},XNumber.prototype.stringValue=function(){return this.string().stringValue()},XNumber.prototype.numberValue=function(){return this.num},XNumber.prototype.booleanValue=function(){return this.bool().booleanValue()},XNumber.prototype.negate=function(){return new XNumber(-this.num)},XNumber.prototype.equals=function(e){return i.instance_of(e,XBoolean)?this.bool().equals(e):i.instance_of(e,XString)?this.equals(e.number()):i.instance_of(e,XNodeSet)?e.compareWithNumber(this,r.equals):new XBoolean(this.num==e.num)},XNumber.prototype.notequal=function(e){return i.instance_of(e,XBoolean)?this.bool().notequal(e):i.instance_of(e,XString)?this.notequal(e.number()):i.instance_of(e,XNodeSet)?e.compareWithNumber(this,r.notequal):new XBoolean(this.num!=e.num)},XNumber.prototype.lessthan=function(e){return i.instance_of(e,XNodeSet)?e.compareWithNumber(this,r.greaterthanorequal):i.instance_of(e,XBoolean)||i.instance_of(e,XString)?this.lessthan(e.number()):new XBoolean(this.num<e.num)},XNumber.prototype.greaterthan=function(e){return i.instance_of(e,XNodeSet)?e.compareWithNumber(this,r.lessthanorequal):i.instance_of(e,XBoolean)||i.instance_of(e,XString)?this.greaterthan(e.number()):new XBoolean(this.num>e.num)},XNumber.prototype.lessthanorequal=function(e){return i.instance_of(e,XNodeSet)?e.compareWithNumber(this,r.greaterthan):i.instance_of(e,XBoolean)||i.instance_of(e,XString)?this.lessthanorequal(e.number()):new XBoolean(this.num<=e.num)},XNumber.prototype.greaterthanorequal=function(e){return i.instance_of(e,XNodeSet)?e.compareWithNumber(this,r.lessthan):i.instance_of(e,XBoolean)||i.instance_of(e,XString)?this.greaterthanorequal(e.number()):new XBoolean(this.num>=e.num)},XNumber.prototype.plus=function(e){return new XNumber(this.num+e.num)},XNumber.prototype.minus=function(e){return new XNumber(this.num-e.num)},XNumber.prototype.multiply=function(e){return new XNumber(this.num*e.num)},XNumber.prototype.div=function(e){return new XNumber(this.num/e.num)},XNumber.prototype.mod=function(e){return new XNumber(this.num%e.num)},XBoolean.prototype=new Expression,XBoolean.prototype.constructor=XBoolean,XBoolean.superclass=Expression.prototype,XBoolean.prototype.init=function(e){this.b=Boolean(e)},XBoolean.prototype.toString=function(){return this.b.toString()},XBoolean.prototype.evaluate=function(e){return this},XBoolean.prototype.string=function(){return new XString(this.b)},XBoolean.prototype.number=function(){return new XNumber(this.b)},XBoolean.prototype.bool=function(){return this},XBoolean.prototype.nodeset=function(){throw new Error("Cannot convert boolean to nodeset")},XBoolean.prototype.stringValue=function(){return this.string().stringValue()},XBoolean.prototype.numberValue=function(){return this.num().numberValue()},XBoolean.prototype.booleanValue=function(){return this.b},XBoolean.prototype.not=function(){return new XBoolean(!this.b)},XBoolean.prototype.equals=function(e){return i.instance_of(e,XString)||i.instance_of(e,XNumber)?this.equals(e.bool()):i.instance_of(e,XNodeSet)?e.compareWithBoolean(this,r.equals):new XBoolean(this.b==e.b)},XBoolean.prototype.notequal=function(e){return i.instance_of(e,XString)||i.instance_of(e,XNumber)?this.notequal(e.bool()):i.instance_of(e,XNodeSet)?e.compareWithBoolean(this,r.notequal):new XBoolean(this.b!=e.b)},XBoolean.prototype.lessthan=function(e){return i.instance_of(e,XNodeSet)?e.compareWithNumber(this.number(),r.greaterthanorequal):this.number().lessthan(e.number())},XBoolean.prototype.greaterthan=function(e){return i.instance_of(e,XNodeSet)?e.compareWithNumber(this.number(),r.lessthanorequal):this.number().greaterthan(e.number())},XBoolean.prototype.lessthanorequal=function(e){return i.instance_of(e,XNodeSet)?e.compareWithNumber(this.number(),r.greaterthan):this.number().lessthanorequal(e.number())},XBoolean.prototype.greaterthanorequal=function(e){return i.instance_of(e,XNodeSet)?e.compareWithNumber(this.number(),r.lessthan):this.number().greaterthanorequal(e.number())},AVLTree.prototype=new Object,AVLTree.prototype.constructor=AVLTree,AVLTree.superclass=Object.prototype,AVLTree.prototype.init=function(e){this.left=null,this.right=null,this.node=e,this.depth=1},AVLTree.prototype.balance=function(){var e=null==this.left?0:this.left.depth,t=null==this.right?0:this.right.depth;if(e>t+1)(null==this.left.left?0:this.left.left.depth)<(null==this.left.right?0:this.left.right.depth)&&this.left.rotateRR(),this.rotateLL();else if(e+1<t){var r=null==this.right.right?0:this.right.right.depth;(null==this.right.left?0:this.right.left.depth)>r&&this.right.rotateLL(),this.rotateRR()}},AVLTree.prototype.rotateLL=function(){var e=this.node,t=this.right;this.node=this.left.node,this.right=this.left,this.left=this.left.left,this.right.left=this.right.right,this.right.right=t,this.right.node=e,this.right.updateInNewLocation(),this.updateInNewLocation()},AVLTree.prototype.rotateRR=function(){var e=this.node,t=this.left;this.node=this.right.node,this.left=this.right,this.right=this.right.right,this.left.right=this.left.left,this.left.left=t,this.left.node=e,this.left.updateInNewLocation(),this.updateInNewLocation()},AVLTree.prototype.updateInNewLocation=function(){this.getDepthFromChildren()},AVLTree.prototype.getDepthFromChildren=function(){this.depth=null==this.node?0:1,null!=this.left&&(this.depth=this.left.depth+1),null!=this.right&&this.depth<=this.right.depth&&(this.depth=this.right.depth+1)},AVLTree.prototype.order=function(e,t){if(e===t)return 0;for(var r=0,n=0,i=e;null!=i;i=i.parentNode)r++;for(var o=t;null!=o;o=o.parentNode)n++;if(r>n){for(;r>n;)e=e.parentNode,r--;if(e==t)return 1}else if(n>r){for(;n>r;)t=t.parentNode,n--;if(e==t)return-1}for(;e.parentNode!=t.parentNode;)e=e.parentNode,t=t.parentNode;for(;null!=e.previousSibling&&null!=t.previousSibling;)e=e.previousSibling,t=t.previousSibling;return null==e.previousSibling?-1:1},AVLTree.prototype.add=function(e){if(e===this.node)return!1;var t=this.order(e,this.node),r=!1;return-1==t?null==this.left?(this.left=new AVLTree(e),r=!0):(r=this.left.add(e))&&this.balance():1==t&&(null==this.right?(this.right=new AVLTree(e),r=!0):(r=this.right.add(e))&&this.balance()),r&&this.getDepthFromChildren(),r},XNodeSet.prototype=new Expression,XNodeSet.prototype.constructor=XNodeSet,XNodeSet.superclass=Expression.prototype,XNodeSet.prototype.init=function(){this.tree=null,this.size=0},XNodeSet.prototype.toString=function(){var e=this.first();return null==e?"":this.stringForNode(e)},XNodeSet.prototype.evaluate=function(e){return this},XNodeSet.prototype.string=function(){return new XString(this.toString())},XNodeSet.prototype.stringValue=function(){return this.toString()},XNodeSet.prototype.number=function(){return new XNumber(this.string())},XNodeSet.prototype.numberValue=function(){return Number(this.string())},XNodeSet.prototype.bool=function(){return new XBoolean(null!=this.tree)},XNodeSet.prototype.booleanValue=function(){return null!=this.tree},XNodeSet.prototype.nodeset=function(){return this},XNodeSet.prototype.stringForNode=function(e){return 9==e.nodeType&&(e=e.documentElement),1==e.nodeType?this.stringForNodeRec(e):e.isNamespaceNode?e.namespace:e.nodeValue},XNodeSet.prototype.stringForNodeRec=function(e){for(var t="",r=e.firstChild;null!=r;r=r.nextSibling)3==r.nodeType?t+=r.nodeValue:1==r.nodeType&&(t+=this.stringForNodeRec(r));return t},XNodeSet.prototype.first=function(){var e=this.tree;if(null==e)return null;for(;null!=e.left;)e=e.left;return e.node},XNodeSet.prototype.add=function(e){var t;null==this.tree?(this.tree=new AVLTree(e),t=!0):t=this.tree.add(e),t&&this.size++},XNodeSet.prototype.addArray=function(e){for(var t=0;t<e.length;t++)this.add(e[t])},XNodeSet.prototype.toArray=function(){var e=[];return this.toArrayRec(this.tree,e),e},XNodeSet.prototype.toArrayRec=function(e,t){null!=e&&(this.toArrayRec(e.left,t),t.push(e.node),this.toArrayRec(e.right,t))},XNodeSet.prototype.compareWithString=function(e,t){for(var r=this.toArray(),n=0;n<r.length;n++){var i=r[n],o=t(new XString(this.stringForNode(i)),e);if(o.booleanValue())return o}return new XBoolean(!1)},XNodeSet.prototype.compareWithNumber=function(e,t){for(var r=this.toArray(),n=0;n<r.length;n++){var i=r[n],o=t(new XNumber(this.stringForNode(i)),e);if(o.booleanValue())return o}return new XBoolean(!1)},XNodeSet.prototype.compareWithBoolean=function(e,t){return t(this.bool(),e)},XNodeSet.prototype.compareWithNodeSet=function(e,t){for(var r=this.toArray(),n=0;n<r.length;n++)for(var i=r[n],o=new XString(this.stringForNode(i)),s=e.toArray(),a=0;a<s.length;a++){var c=s[a],u=t(o,e=new XString(this.stringForNode(c)));if(u.booleanValue())return u}return new XBoolean(!1)},XNodeSet.prototype.equals=function(e){return i.instance_of(e,XString)?this.compareWithString(e,r.equals):i.instance_of(e,XNumber)?this.compareWithNumber(e,r.equals):i.instance_of(e,XBoolean)?this.compareWithBoolean(e,r.equals):this.compareWithNodeSet(e,r.equals)},XNodeSet.prototype.notequal=function(e){return i.instance_of(e,XString)?this.compareWithString(e,r.notequal):i.instance_of(e,XNumber)?this.compareWithNumber(e,r.notequal):i.instance_of(e,XBoolean)?this.compareWithBoolean(e,r.notequal):this.compareWithNodeSet(e,r.notequal)},XNodeSet.prototype.lessthan=function(e){return i.instance_of(e,XString)?this.compareWithNumber(e.number(),r.lessthan):i.instance_of(e,XNumber)?this.compareWithNumber(e,r.lessthan):i.instance_of(e,XBoolean)?this.compareWithBoolean(e,r.lessthan):this.compareWithNodeSet(e,r.lessthan)},XNodeSet.prototype.greaterthan=function(e){return i.instance_of(e,XString)?this.compareWithNumber(e.number(),r.greaterthan):i.instance_of(e,XNumber)?this.compareWithNumber(e,r.greaterthan):i.instance_of(e,XBoolean)?this.compareWithBoolean(e,r.greaterthan):this.compareWithNodeSet(e,r.greaterthan)},XNodeSet.prototype.lessthanorequal=function(e){return i.instance_of(e,XString)?this.compareWithNumber(e.number(),r.lessthanorequal):i.instance_of(e,XNumber)?this.compareWithNumber(e,r.lessthanorequal):i.instance_of(e,XBoolean)?this.compareWithBoolean(e,r.lessthanorequal):this.compareWithNodeSet(e,r.lessthanorequal)},XNodeSet.prototype.greaterthanorequal=function(e){return i.instance_of(e,XString)?this.compareWithNumber(e.number(),r.greaterthanorequal):i.instance_of(e,XNumber)?this.compareWithNumber(e,r.greaterthanorequal):i.instance_of(e,XBoolean)?this.compareWithBoolean(e,r.greaterthanorequal):this.compareWithNodeSet(e,r.greaterthanorequal)},XNodeSet.prototype.union=function(e){var t=new XNodeSet;return t.tree=this.tree,t.size=this.size,t.addArray(e.toArray()),t},XPathNamespace.prototype=new Object,XPathNamespace.prototype.constructor=XPathNamespace,XPathNamespace.superclass=Object.prototype,XPathNamespace.prototype.toString=function(){return'{ "'+this.prefix+'", "'+this.namespaceURI+'" }'};var r=new Object;function XPathContext(e,t,r){this.variableResolver=null!=e?e:new VariableResolver,this.namespaceResolver=null!=t?t:new NamespaceResolver,this.functionResolver=null!=r?r:new FunctionResolver}function VariableResolver(){}function FunctionResolver(e){this.thisArg=null!=e?e:n,this.functions=new Object,this.addStandardFunctions()}function NamespaceResolver(){}r.equals=function(e,t){return e.equals(t)},r.notequal=function(e,t){return e.notequal(t)},r.lessthan=function(e,t){return e.lessthan(t)},r.greaterthan=function(e,t){return e.greaterthan(t)},r.lessthanorequal=function(e,t){return e.lessthanorequal(t)},r.greaterthanorequal=function(e,t){return e.greaterthanorequal(t)},XPathContext.prototype=new Object,XPathContext.prototype.constructor=XPathContext,XPathContext.superclass=Object.prototype,VariableResolver.prototype=new Object,VariableResolver.prototype.constructor=VariableResolver,VariableResolver.superclass=Object.prototype,VariableResolver.prototype.getVariable=function(e,t){var r=i.splitQName(e);if(null!=r[0]&&(r[0]=t.namespaceResolver.getNamespace(r[0],t.expressionContextNode),null==r[0]))throw new Error("Cannot resolve QName "+fn);return this.getVariableWithName(r[0],r[1],t.expressionContextNode)},VariableResolver.prototype.getVariableWithName=function(e,t,r){return null},FunctionResolver.prototype=new Object,FunctionResolver.prototype.constructor=FunctionResolver,FunctionResolver.superclass=Object.prototype,FunctionResolver.prototype.addStandardFunctions=function(){this.functions["{}last"]=n.last,this.functions["{}position"]=n.position,this.functions["{}count"]=n.count,this.functions["{}id"]=n.id,this.functions["{}local-name"]=n.localName,this.functions["{}namespace-uri"]=n.namespaceURI,this.functions["{}name"]=n.name,this.functions["{}string"]=n.string,this.functions["{}concat"]=n.concat,this.functions["{}starts-with"]=n.startsWith,this.functions["{}contains"]=n.contains,this.functions["{}substring-before"]=n.substringBefore,this.functions["{}substring-after"]=n.substringAfter,this.functions["{}substring"]=n.substring,this.functions["{}string-length"]=n.stringLength,this.functions["{}normalize-space"]=n.normalizeSpace,this.functions["{}translate"]=n.translate,this.functions["{}boolean"]=n.boolean_,this.functions["{}not"]=n.not,this.functions["{}true"]=n.true_,this.functions["{}false"]=n.false_,this.functions["{}lang"]=n.lang,this.functions["{}number"]=n.number,this.functions["{}sum"]=n.sum,this.functions["{}floor"]=n.floor,this.functions["{}ceiling"]=n.ceiling,this.functions["{}round"]=n.round},FunctionResolver.prototype.addFunction=function(e,t,r){this.functions["{"+e+"}"+t]=r},FunctionResolver.prototype.getFunction=function(e,t){var r=i.resolveQName(e,t.namespaceResolver,t.contextNode,!1);if(null==r[0])throw new Error("Cannot resolve QName "+e);return this.getFunctionWithName(r[0],r[1],t.contextNode)},FunctionResolver.prototype.getFunctionWithName=function(e,t,r){return this.functions["{"+e+"}"+t]},NamespaceResolver.prototype=new Object,NamespaceResolver.prototype.constructor=NamespaceResolver,NamespaceResolver.superclass=Object.prototype,NamespaceResolver.prototype.getNamespace=function(e,t){if("xml"==e)return XPath.XML_NAMESPACE_URI;if("xmlns"==e)return XPath.XMLNS_NAMESPACE_URI;for(9==t.nodeType?t=t.documentElement:2==t.nodeType?t=PathExpr.prototype.getOwnerElement(t):1!=t.nodeType&&(t=t.parentNode);null!=t&&1==t.nodeType;){for(var r=t.attributes,n=0;n<r.length;n++){var i=r.item(n),o=i.nodeName;if("xmlns"==o&&""==e||o=="xmlns:"+e)return String(i.nodeValue)}t=t.parentNode}return null};var n=new Object;n.last=function(){var e=arguments[0];if(1!=arguments.length)throw new Error("Function last expects ()");return new XNumber(e.contextSize)},n.position=function(){var e=arguments[0];if(1!=arguments.length)throw new Error("Function position expects ()");return new XNumber(e.contextPosition)},n.count=function(){var e,t=arguments[0];if(2!=arguments.length||!i.instance_of(e=arguments[1].evaluate(t),XNodeSet))throw new Error("Function count expects (node-set)");return new XNumber(e.size)},n.id=function(){var e,t=arguments[0];if(2!=arguments.length)throw new Error("Function id expects (object)");e=arguments[1].evaluate(t);for(var r=(e=i.instance_of(e,XNodeSet)?e.toArray().join(" "):e.stringValue()).split(/[\x0d\x0a\x09\x20]+/),n=new XNodeSet,o=9==t.contextNode.nodeType?t.contextNode:t.contextNode.ownerDocument,s=0;s<r.length;s++){var a;null!=(a=o.getElementById?o.getElementById(r[s]):i.getElementById(o,r[s]))&&(n.add(a),0)}return n},n.localName=function(){var e,t=arguments[0];if(1==arguments.length)e=t.contextNode;else{if(2!=arguments.length)throw new Error("Function local-name expects (node-set?)");e=arguments[1].evaluate(t).first()}return new XString(null==e?"":e.localName?e.localName:e.baseName)},n.namespaceURI=function(){var e,t=arguments[0];if(1==arguments.length)e=t.contextNode;else{if(2!=arguments.length)throw new Error("Function namespace-uri expects (node-set?)");e=arguments[1].evaluate(t).first()}return new XString(null==e?"":e.namespaceURI)},n.name=function(){var e,t=arguments[0];if(1==arguments.length)e=t.contextNode;else{if(2!=arguments.length)throw new Error("Function name expects (node-set?)");e=arguments[1].evaluate(t).first()}return null==e?new XString(""):1==e.nodeType||2==e.nodeType?new XString(e.nodeName):null==e.localName?new XString(""):new XString(e.localName)},n.string=function(){var e=arguments[0];if(1==arguments.length)return XNodeSet.prototype.stringForNode(e.contextNode);if(2==arguments.length)return arguments[1].evaluate(e).string();throw new Error("Function string expects (object?)")},n.concat=function(){var e=arguments[0];if(arguments.length<3)throw new Error("Function concat expects (string, string, string*)");for(var t="",r=1;r<arguments.length;r++)t+=arguments[r].evaluate(e).stringValue();return new XString(t)},n.startsWith=function(){var e=arguments[0];if(3!=arguments.length)throw new Error("Function startsWith expects (string, string)");var t=arguments[1].evaluate(e).stringValue(),r=arguments[2].evaluate(e).stringValue();return new XBoolean(t.substring(0,r.length)==r)},n.contains=function(){var e=arguments[0];if(3!=arguments.length)throw new Error("Function contains expects (string, string)");var t=arguments[1].evaluate(e).stringValue(),r=arguments[2].evaluate(e).stringValue();return new XBoolean(-1!=t.indexOf(r))},n.substringBefore=function(){var e=arguments[0];if(3!=arguments.length)throw new Error("Function substring-before expects (string, string)");var t=arguments[1].evaluate(e).stringValue(),r=arguments[2].evaluate(e).stringValue();return new XString(t.substring(0,t.indexOf(r)))},n.substringAfter=function(){var e=arguments[0];if(3!=arguments.length)throw new Error("Function substring-after expects (string, string)");var t=arguments[1].evaluate(e).stringValue(),r=arguments[2].evaluate(e).stringValue();return 0==r.length?new XString(t):new XString(-1==t.indexOf(r)?"":t.substring(t.indexOf(r)+1))},n.substring=function(){var e=arguments[0];if(3!=arguments.length&&4!=arguments.length)throw new Error("Function substring expects (string, number, number?)");var t=arguments[1].evaluate(e).stringValue(),r=Math.round(arguments[2].evaluate(e).numberValue())-1,n=4==arguments.length?r+Math.round(arguments[3].evaluate(e).numberValue()):void 0;return new XString(t.substring(r,n))},n.stringLength=function(){var e,t=arguments[0];if(1==arguments.length)e=XNodeSet.prototype.stringForNode(t.contextNode);else{if(2!=arguments.length)throw new Error("Function string-length expects (string?)");e=arguments[1].evaluate(t).stringValue()}return new XNumber(e.length)},n.normalizeSpace=function(){var e,t=arguments[0];if(1==arguments.length)e=XNodeSet.prototype.stringForNode(t.contextNode);else{if(2!=arguments.length)throw new Error("Function normalize-space expects (string?)");e=arguments[1].evaluate(t).stringValue()}for(var r=0,n=e.length-1;i.isSpace(e.charCodeAt(n));)n--;for(var o="";r<=n&&i.isSpace(e.charCodeAt(r));)r++;for(;r<=n;)if(i.isSpace(e.charCodeAt(r)))for(o+=" ";r<=n&&i.isSpace(e.charCodeAt(r));)r++;else o+=e.charAt(r),r++;return new XString(o)},n.translate=function(){var e=arguments[0];if(4!=arguments.length)throw new Error("Function translate expects (string, string, string)");for(var t=arguments[1].evaluate(e).stringValue(),r=arguments[2].evaluate(e).stringValue(),n=arguments[3].evaluate(e).stringValue(),i=[],o=0;o<r.length;o++){var s=r.charCodeAt(o);if(null==i[s]){var a=o>n.length?"":n.charAt(o);i[s]=a}}var c="";for(o=0;o<t.length;o++){var u=i[e=t.charCodeAt(o)];c+=null==u?t.charAt(o):u}return new XString(c)},n.boolean_=function(){var e=arguments[0];if(2!=arguments.length)throw new Error("Function boolean expects (object)");return arguments[1].evaluate(e).bool()},n.not=function(){var e=arguments[0];if(2!=arguments.length)throw new Error("Function not expects (object)");return arguments[1].evaluate(e).bool().not()},n.true_=function(){if(1!=arguments.length)throw new Error("Function true expects ()");return new XBoolean(!0)},n.false_=function(){if(1!=arguments.length)throw new Error("Function false expects ()");return new XBoolean(!1)},n.lang=function(){var e,t=arguments[0];if(2!=arguments.length)throw new Error("Function lang expects (string)");for(var r=t.contextNode;null!=r&&9!=r.nodeType;r=r.parentNode){var n=r.getAttributeNS(XPath.XML_NAMESPACE_URI,"lang");if(null!=n){e=String(n);break}}if(null==e)return new XBoolean(!1);var i=arguments[1].evaluate(t).stringValue();return new XBoolean(e.substring(0,i.length)==i&&(e.length==i.length||"-"==e.charAt(i.length)))},n.number=function(){var e=arguments[0];if(1!=arguments.length&&2!=arguments.length)throw new Error("Function number expects (object?)");return 1==arguments.length?new XNumber(XNodeSet.prototype.stringForNode(e.contextNode)):arguments[1].evaluate(e).number()},n.sum=function(){var e,t=arguments[0];if(2!=arguments.length||!i.instance_of(e=arguments[1].evaluate(t),XNodeSet))throw new Error("Function sum expects (node-set)");e=e.toArray();for(var r=0,n=0;n<e.length;n++)r+=new XNumber(XNodeSet.prototype.stringForNode(e[n])).numberValue();return new XNumber(r)},n.floor=function(){var e=arguments[0];if(2!=arguments.length)throw new Error("Function floor expects (number)");return new XNumber(Math.floor(arguments[1].evaluate(e).numberValue()))},n.ceiling=function(){var e=arguments[0];if(2!=arguments.length)throw new Error("Function ceiling expects (number)");return new XNumber(Math.ceil(arguments[1].evaluate(e).numberValue()))},n.round=function(){var e=arguments[0];if(2!=arguments.length)throw new Error("Function round expects (number)");return new XNumber(Math.round(arguments[1].evaluate(e).numberValue()))};var i=new Object;function XPathException(e,t){this.code=e,this.exception=t}function XPathExpression(e,t,r){this.xpath=r.parse(e),this.context=new XPathContext,this.context.namespaceResolver=new XPathNSResolverWrapper(t)}function XPathNSResolverWrapper(e){this.xpathNSResolver=e}function NodeXPathNSResolver(e){this.node=e,this.namespaceResolver=new NamespaceResolver}function XPathResult(e,t){switch(t==XPathResult.ANY_TYPE&&(e.constructor===XString?t=XPathResult.STRING_TYPE:e.constructor===XNumber?t=XPathResult.NUMBER_TYPE:e.constructor===XBoolean?t=XPathResult.BOOLEAN_TYPE:e.constructor===XNodeSet&&(t=XPathResult.UNORDERED_NODE_ITERATOR_TYPE)),this.resultType=t,t){case XPathResult.NUMBER_TYPE:return void(this.numberValue=e.numberValue());case XPathResult.STRING_TYPE:return void(this.stringValue=e.stringValue());case XPathResult.BOOLEAN_TYPE:return void(this.booleanValue=e.booleanValue());case XPathResult.ANY_UNORDERED_NODE_TYPE:case XPathResult.FIRST_ORDERED_NODE_TYPE:if(e.constructor===XNodeSet)return void(this.singleNodeValue=e.first());break;case XPathResult.UNORDERED_NODE_ITERATOR_TYPE:case XPathResult.ORDERED_NODE_ITERATOR_TYPE:if(e.constructor===XNodeSet)return this.invalidIteratorState=!1,this.nodes=e.toArray(),void(this.iteratorIndex=0);break;case XPathResult.UNORDERED_NODE_SNAPSHOT_TYPE:case XPathResult.ORDERED_NODE_SNAPSHOT_TYPE:if(e.constructor===XNodeSet)return this.nodes=e.toArray(),void(this.snapshotLength=this.nodes.length)}throw new XPathException(XPathException.TYPE_ERR)}i.splitQName=function(e){var t=e.indexOf(":");return-1==t?[null,e]:[e.substring(0,t),e.substring(t+1)]},i.resolveQName=function(e,t,r,n){var o=i.splitQName(e);return null!=o[0]?o[0]=t.getNamespace(o[0],r):n?(o[0]=t.getNamespace("",r),null==o[0]&&(o[0]="")):o[0]="",o},i.isSpace=function(e){return 9==e||13==e||10==e||32==e},i.isLetter=function(e){return e>=65&&e<=90||e>=97&&e<=122||e>=192&&e<=214||e>=216&&e<=246||e>=248&&e<=255||e>=256&&e<=305||e>=308&&e<=318||e>=321&&e<=328||e>=330&&e<=382||e>=384&&e<=451||e>=461&&e<=496||e>=500&&e<=501||e>=506&&e<=535||e>=592&&e<=680||e>=699&&e<=705||902==e||e>=904&&e<=906||908==e||e>=910&&e<=929||e>=931&&e<=974||e>=976&&e<=982||986==e||988==e||990==e||992==e||e>=994&&e<=1011||e>=1025&&e<=1036||e>=1038&&e<=1103||e>=1105&&e<=1116||e>=1118&&e<=1153||e>=1168&&e<=1220||e>=1223&&e<=1224||e>=1227&&e<=1228||e>=1232&&e<=1259||e>=1262&&e<=1269||e>=1272&&e<=1273||e>=1329&&e<=1366||1369==e||e>=1377&&e<=1414||e>=1488&&e<=1514||e>=1520&&e<=1522||e>=1569&&e<=1594||e>=1601&&e<=1610||e>=1649&&e<=1719||e>=1722&&e<=1726||e>=1728&&e<=1742||e>=1744&&e<=1747||1749==e||e>=1765&&e<=1766||e>=2309&&e<=2361||2365==e||e>=2392&&e<=2401||e>=2437&&e<=2444||e>=2447&&e<=2448||e>=2451&&e<=2472||e>=2474&&e<=2480||2482==e||e>=2486&&e<=2489||e>=2524&&e<=2525||e>=2527&&e<=2529||e>=2544&&e<=2545||e>=2565&&e<=2570||e>=2575&&e<=2576||e>=2579&&e<=2600||e>=2602&&e<=2608||e>=2610&&e<=2611||e>=2613&&e<=2614||e>=2616&&e<=2617||e>=2649&&e<=2652||2654==e||e>=2674&&e<=2676||e>=2693&&e<=2699||2701==e||e>=2703&&e<=2705||e>=2707&&e<=2728||e>=2730&&e<=2736||e>=2738&&e<=2739||e>=2741&&e<=2745||2749==e||2784==e||e>=2821&&e<=2828||e>=2831&&e<=2832||e>=2835&&e<=2856||e>=2858&&e<=2864||e>=2866&&e<=2867||e>=2870&&e<=2873||2877==e||e>=2908&&e<=2909||e>=2911&&e<=2913||e>=2949&&e<=2954||e>=2958&&e<=2960||e>=2962&&e<=2965||e>=2969&&e<=2970||2972==e||e>=2974&&e<=2975||e>=2979&&e<=2980||e>=2984&&e<=2986||e>=2990&&e<=2997||e>=2999&&e<=3001||e>=3077&&e<=3084||e>=3086&&e<=3088||e>=3090&&e<=3112||e>=3114&&e<=3123||e>=3125&&e<=3129||e>=3168&&e<=3169||e>=3205&&e<=3212||e>=3214&&e<=3216||e>=3218&&e<=3240||e>=3242&&e<=3251||e>=3253&&e<=3257||3294==e||e>=3296&&e<=3297||e>=3333&&e<=3340||e>=3342&&e<=3344||e>=3346&&e<=3368||e>=3370&&e<=3385||e>=3424&&e<=3425||e>=3585&&e<=3630||3632==e||e>=3634&&e<=3635||e>=3648&&e<=3653||e>=3713&&e<=3714||3716==e||e>=3719&&e<=3720||3722==e||3725==e||e>=3732&&e<=3735||e>=3737&&e<=3743||e>=3745&&e<=3747||3749==e||3751==e||e>=3754&&e<=3755||e>=3757&&e<=3758||3760==e||e>=3762&&e<=3763||3773==e||e>=3776&&e<=3780||e>=3904&&e<=3911||e>=3913&&e<=3945||e>=4256&&e<=4293||e>=4304&&e<=4342||4352==e||e>=4354&&e<=4355||e>=4357&&e<=4359||4361==e||e>=4363&&e<=4364||e>=4366&&e<=4370||4412==e||4414==e||4416==e||4428==e||4430==e||4432==e||e>=4436&&e<=4437||4441==e||e>=4447&&e<=4449||4451==e||4453==e||4455==e||4457==e||e>=4461&&e<=4462||e>=4466&&e<=4467||4469==e||4510==e||4520==e||4523==e||e>=4526&&e<=4527||e>=4535&&e<=4536||4538==e||e>=4540&&e<=4546||4587==e||4592==e||4601==e||e>=7680&&e<=7835||e>=7840&&e<=7929||e>=7936&&e<=7957||e>=7960&&e<=7965||e>=7968&&e<=8005||e>=8008&&e<=8013||e>=8016&&e<=8023||8025==e||8027==e||8029==e||e>=8031&&e<=8061||e>=8064&&e<=8116||e>=8118&&e<=8124||8126==e||e>=8130&&e<=8132||e>=8134&&e<=8140||e>=8144&&e<=8147||e>=8150&&e<=8155||e>=8160&&e<=8172||e>=8178&&e<=8180||e>=8182&&e<=8188||8486==e||e>=8490&&e<=8491||8494==e||e>=8576&&e<=8578||e>=12353&&e<=12436||e>=12449&&e<=12538||e>=12549&&e<=12588||e>=44032&&e<=55203||e>=19968&&e<=40869||12295==e||e>=12321&&e<=12329},i.isNCNameChar=function(e){return e>=48&&e<=57||e>=1632&&e<=1641||e>=1776&&e<=1785||e>=2406&&e<=2415||e>=2534&&e<=2543||e>=2662&&e<=2671||e>=2790&&e<=2799||e>=2918&&e<=2927||e>=3047&&e<=3055||e>=3174&&e<=3183||e>=3302&&e<=3311||e>=3430&&e<=3439||e>=3664&&e<=3673||e>=3792&&e<=3801||e>=3872&&e<=3881||46==e||45==e||95==e||i.isLetter(e)||e>=768&&e<=837||e>=864&&e<=865||e>=1155&&e<=1158||e>=1425&&e<=1441||e>=1443&&e<=1465||e>=1467&&e<=1469||1471==e||e>=1473&&e<=1474||1476==e||e>=1611&&e<=1618||1648==e||e>=1750&&e<=1756||e>=1757&&e<=1759||e>=1760&&e<=1764||e>=1767&&e<=1768||e>=1770&&e<=1773||e>=2305&&e<=2307||2364==e||e>=2366&&e<=2380||2381==e||e>=2385&&e<=2388||e>=2402&&e<=2403||e>=2433&&e<=2435||2492==e||2494==e||2495==e||e>=2496&&e<=2500||e>=2503&&e<=2504||e>=2507&&e<=2509||2519==e||e>=2530&&e<=2531||2562==e||2620==e||2622==e||2623==e||e>=2624&&e<=2626||e>=2631&&e<=2632||e>=2635&&e<=2637||e>=2672&&e<=2673||e>=2689&&e<=2691||2748==e||e>=2750&&e<=2757||e>=2759&&e<=2761||e>=2763&&e<=2765||e>=2817&&e<=2819||2876==e||e>=2878&&e<=2883||e>=2887&&e<=2888||e>=2891&&e<=2893||e>=2902&&e<=2903||e>=2946&&e<=2947||e>=3006&&e<=3010||e>=3014&&e<=3016||e>=3018&&e<=3021||3031==e||e>=3073&&e<=3075||e>=3134&&e<=3140||e>=3142&&e<=3144||e>=3146&&e<=3149||e>=3157&&e<=3158||e>=3202&&e<=3203||e>=3262&&e<=3268||e>=3270&&e<=3272||e>=3274&&e<=3277||e>=3285&&e<=3286||e>=3330&&e<=3331||e>=3390&&e<=3395||e>=3398&&e<=3400||e>=3402&&e<=3405||3415==e||3633==e||e>=3636&&e<=3642||e>=3655&&e<=3662||3761==e||e>=3764&&e<=3769||e>=3771&&e<=3772||e>=3784&&e<=3789||e>=3864&&e<=3865||3893==e||3895==e||3897==e||3902==e||3903==e||e>=3953&&e<=3972||e>=3974&&e<=3979||e>=3984&&e<=3989||3991==e||e>=3993&&e<=4013||e>=4017&&e<=4023||4025==e||e>=8400&&e<=8412||8417==e||e>=12330&&e<=12335||12441==e||12442==e||183==e||720==e||721==e||903==e||1600==e||3654==e||3782==e||12293==e||e>=12337&&e<=12341||e>=12445&&e<=12446||e>=12540&&e<=12542},i.coalesceText=function(e){for(var t=e.firstChild;null!=t;t=t.nextSibling)if(3==t.nodeType||4==t.nodeType){var r=t.nodeValue,n=t;for(t=t.nextSibling;null!=t&&(3==t.nodeType||4==t.nodeType);){r+=t.nodeValue;var o=t;t=t.nextSibling,o.parentNode.removeChild(o)}if(4==n.nodeType){var s=n.parentNode;if(null==n.nextSibling)s.removeChild(n),s.appendChild(s.ownerDocument.createTextNode(r));else{var a=n.nextSibling;s.removeChild(n),s.insertBefore(s.ownerDocument.createTextNode(r),a)}}else n.nodeValue=r;if(null==t)break}else 1==t.nodeType&&i.coalesceText(t)},i.instance_of=function(e,t){for(;null!=e;){if(e.constructor===t)return!0;if(e===Object)return!1;e=e.constructor.superclass}return!1},i.getElementById=function(e,t){if(1==e.nodeType&&(e.getAttribute("id")==t||e.getAttributeNS(null,"id")==t))return e;for(var r=e.firstChild;null!=r;r=r.nextSibling){var n=i.getElementById(r,t);if(null!=n)return n}return null},XPathException.prototype={},XPathException.prototype.constructor=XPathException,XPathException.superclass=Object.prototype,XPathException.prototype.toString=function(){var e=this.exception?": "+this.exception.toString():"";switch(this.code){case XPathException.INVALID_EXPRESSION_ERR:return"Invalid expression"+e;case XPathException.TYPE_ERR:return"Type error"+e}},XPathException.INVALID_EXPRESSION_ERR=51,XPathException.TYPE_ERR=52,XPathExpression.prototype={},XPathExpression.prototype.constructor=XPathExpression,XPathExpression.superclass=Object.prototype,XPathExpression.prototype.evaluate=function(e,t,r){return this.context.expressionContextNode=e,new XPathResult(this.xpath.evaluate(this.context),t)},XPathNSResolverWrapper.prototype={},XPathNSResolverWrapper.prototype.constructor=XPathNSResolverWrapper,XPathNSResolverWrapper.superclass=Object.prototype,XPathNSResolverWrapper.prototype.getNamespace=function(e,t){return null==this.xpathNSResolver?null:this.xpathNSResolver.lookupNamespaceURI(e)},NodeXPathNSResolver.prototype={},NodeXPathNSResolver.prototype.constructor=NodeXPathNSResolver,NodeXPathNSResolver.superclass=Object.prototype,NodeXPathNSResolver.prototype.lookupNamespaceURI=function(e){return this.namespaceResolver.getNamespace(e,this.node)},XPathResult.prototype={},XPathResult.prototype.constructor=XPathResult,XPathResult.superclass=Object.prototype,XPathResult.prototype.iterateNext=function(){if(this.resultType!=XPathResult.UNORDERED_NODE_ITERATOR_TYPE&&this.resultType!=XPathResult.ORDERED_NODE_ITERATOR_TYPE)throw new XPathException(XPathException.TYPE_ERR);return this.nodes[this.iteratorIndex++]},XPathResult.prototype.snapshotItem=function(e){if(this.resultType!=XPathResult.UNORDERED_NODE_SNAPSHOT_TYPE&&this.resultType!=XPathResult.ORDERED_NODE_SNAPSHOT_TYPE)throw new XPathException(XPathException.TYPE_ERR);return this.nodes[e]},XPathResult.ANY_TYPE=0,XPathResult.NUMBER_TYPE=1,XPathResult.STRING_TYPE=2,XPathResult.BOOLEAN_TYPE=3,XPathResult.UNORDERED_NODE_ITERATOR_TYPE=4,XPathResult.ORDERED_NODE_ITERATOR_TYPE=5,XPathResult.UNORDERED_NODE_SNAPSHOT_TYPE=6,XPathResult.ORDERED_NODE_SNAPSHOT_TYPE=7,XPathResult.ANY_UNORDERED_NODE_TYPE=8,XPathResult.FIRST_ORDERED_NODE_TYPE=9;try{var o=!0;try{document.implementation&&document.implementation.hasFeature&&document.implementation.hasFeature("XPath",null)&&(o=!1)}catch(e){}o&&function installDOM3XPathSupport(e,t){e.createExpression=function(e,r){try{return new XPathExpression(e,r,t)}catch(e){throw new XPathException(XPathException.INVALID_EXPRESSION_ERR,e)}},e.createNSResolver=function(e){return new NodeXPathNSResolver(e)},e.evaluate=function(r,n,i,o,s){if(o<0||o>9)throw{code:0,toString:function(){return"Request type not supported"}};return e.createExpression(r,i,t).evaluate(n,o,s)}}(document,new XPathParser)}catch(e){}e.exports=function SelectNodes(e,t){t=(new XPathParser).parse(t);var r=new XPathContext;return e.documentElement?r.expressionContextNode=e.documentElement:r.expressionContextNode=e,t.evaluate(r).toArray()}},function(e,t,r){"use strict";var n=r(34).Jwt,i=r(43).Logger,o=r(80);r(230);var s=r(945),a=r(35);function dateGetTimeInSeconds(e){return Math.floor(e.getTime()/1e3)}function SelfSignedJwt(e,t,r){this._log=new i("SelfSignedJwt",e._logContext),this._callContext=e,this._authority=t,this._tokenEndpoint=t.tokenEndpoint,this._clientId=r}SelfSignedJwt.prototype._getDateNow=function(){return new Date},SelfSignedJwt.prototype._getNewJwtId=function(){return a.v4()},SelfSignedJwt.prototype._createx5tValue=function(e){var t=e.replace(/:/g,"").replace(/ /g,""),r=new Buffer(t,"hex").toString("base64");return o.convertRegularToUrlSafeBase64EncodedString(r)},SelfSignedJwt.prototype._createHeader=function(e){var t=this._createx5tValue(e),r={typ:"JWT",alg:"RS256",x5t:t};return this._log.verbose("Creating self signed JWT header"),this._log.verbose("Creating self signed JWT header.  x5t: "+t,!0),r},SelfSignedJwt.prototype._createPayload=function(){var e=this._getDateNow(),t=new Date(e.getTime()).addMinutes(n.SELF_SIGNED_JWT_LIFETIME);this._log.verbose("Creating self signed JWT payload.  Expires: "+t+" NotBefore: "+e);var r={};return r[n.AUDIENCE]=this._tokenEndpoint,r[n.ISSUER]=this._clientId,r[n.SUBJECT]=this._clientId,r[n.NOT_BEFORE]=dateGetTimeInSeconds(e),r[n.EXPIRES_ON]=dateGetTimeInSeconds(t),r[n.JWT_ID]=this._getNewJwtId(),r},SelfSignedJwt.prototype._throwOnInvalidJwtSignature=function(e){var t=e.split(".");if(3>t.length||!t[2])throw this._log.createError("Failed to sign JWT.  This is most likely due to an invalid certificate.")},SelfSignedJwt.prototype._signJwt=function(e,t,r){var n;try{n=s.sign({header:e,payload:t,secret:r})}catch(e){throw this._log.error(e,!0),this._log.createError("Failed to sign JWT.This is most likely due to an invalid certificate.")}return this._throwOnInvalidJwtSignature(n),n},SelfSignedJwt.prototype._reduceThumbprint=function(e){var t=e.toLowerCase().replace(/ /g,"").replace(/:/g,"");return this._throwOnInvalidThumbprint(t),t};var c={32:!0,40:!0},u=/^[a-f\d]*$/;SelfSignedJwt.prototype._throwOnInvalidThumbprint=function(e){if(!c[e.length]||!u.test(e))throw this._log.createError("The thumbprint does not match a known format")},SelfSignedJwt.prototype.create=function(e,t){t=this._reduceThumbprint(t);var r=this._createHeader(t),n=this._createPayload();return this._signJwt(r,n,e)},e.exports=SelfSignedJwt},function(e,t,r){var n=r(946),i=r(950);t.ALGORITHMS=["HS256","HS384","HS512","RS256","RS384","RS512","ES256","ES384","ES512"],t.sign=n.sign,t.verify=i.verify,t.decode=i.decode,t.isValid=i.isValid,t.createSign=function createSign(e){return new n(e)},t.createVerify=function createVerify(e){return new i(e)}},function(e,t,r){var n=r(14).Buffer,i=r(405),o=r(406),s=r(15),a=r(407),c=r(1);function base64url(e,t){return n.from(e,t).toString("base64").replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}function jwsSign(e){var t=e.header,r=e.payload,n=e.secret||e.privateKey,i=e.encoding,s=o(t.alg),u=function jwsSecuredInput(e,t,r){r=r||"utf8";var n=base64url(a(e),"binary"),i=base64url(a(t),r);return c.format("%s.%s",n,i)}(t,r,i),l=s.sign(u,n);return c.format("%s.%s",u,l)}function SignStream(e){var t=e.secret||e.privateKey||e.key,r=new i(t);this.readable=!0,this.header=e.header,this.encoding=e.encoding,this.secret=this.privateKey=this.key=r,this.payload=new i(e.payload),this.secret.once("close",function(){!this.payload.writable&&this.readable&&this.sign()}.bind(this)),this.payload.once("close",function(){!this.secret.writable&&this.readable&&this.sign()}.bind(this))}c.inherits(SignStream,s),SignStream.prototype.sign=function sign(){try{var e=jwsSign({header:this.header,payload:this.payload.buffer,secret:this.secret.buffer,encoding:this.encoding});return this.emit("done",e),this.emit("data",e),this.emit("end"),this.readable=!1,e}catch(e){this.readable=!1,this.emit("error",e),this.emit("close")}},SignStream.sign=jwsSign,e.exports=SignStream},function(e,t,r){"use strict";var n=r(56).Buffer,i=r(56).SlowBuffer;function bufferEq(e,t){if(!n.isBuffer(e)||!n.isBuffer(t))return!1;if(e.length!==t.length)return!1;for(var r=0,i=0;i<e.length;i++)r|=e[i]^t[i];return 0===r}e.exports=bufferEq,bufferEq.install=function(){n.prototype.equal=i.prototype.equal=function equal(e){return bufferEq(this,e)}};var o=n.prototype.equal,s=i.prototype.equal;bufferEq.restore=function(){n.prototype.equal=o,i.prototype.equal=s}},function(e,t,r){"use strict";var n=r(14).Buffer,i=r(949),o=128,s=48,a=2;function signatureAsBuffer(e){if(n.isBuffer(e))return e;if("string"==typeof e)return n.from(e,"base64");throw new TypeError("ECDSA signature must be a Base64 string or a Buffer")}function countPadding(e,t,r){for(var n=0;t+n<r&&0===e[t+n];)++n;return e[t+n]>=o&&--n,n}e.exports={derToJose:function derToJose(e,t){e=signatureAsBuffer(e);var r=i(t),c=r+1,u=e.length,l=0;if(e[l++]!==s)throw new Error('Could not find expected "seq"');var p=e[l++];if(p===(1|o)&&(p=e[l++]),u-l<p)throw new Error('"seq" specified length of "'+p+'", only "'+(u-l)+'" remaining');if(e[l++]!==a)throw new Error('Could not find expected "int" for "r"');var d=e[l++];if(u-l-2<d)throw new Error('"r" specified length of "'+d+'", only "'+(u-l-2)+'" available');if(c<d)throw new Error('"r" specified length of "'+d+'", max of "'+c+'" is acceptable');var h=l;if(l+=d,e[l++]!==a)throw new Error('Could not find expected "int" for "s"');var f=e[l++];if(u-l!==f)throw new Error('"s" specified length of "'+f+'", expected "'+(u-l)+'"');if(c<f)throw new Error('"s" specified length of "'+f+'", max of "'+c+'" is acceptable');var m=l;if((l+=f)!==u)throw new Error('Expected to consume entire buffer, but "'+(u-l)+'" bytes remain');var g=r-d,y=r-f,v=n.allocUnsafe(g+d+y+f);for(l=0;l<g;++l)v[l]=0;e.copy(v,l,h+Math.max(-g,0),h+d);for(var b=l=r;l<b+y;++l)v[l]=0;return e.copy(v,l,m+Math.max(-y,0),m+f),v=function base64Url(e){return e.replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}(v=v.toString("base64"))},joseToDer:function joseToDer(e,t){e=signatureAsBuffer(e);var r=i(t),c=e.length;if(c!==2*r)throw new TypeError('"'+t+'" signatures must be "'+2*r+'" bytes, saw "'+c+'"');var u=countPadding(e,0,r),l=countPadding(e,r,e.length),p=r-u,d=r-l,h=2+p+1+1+d,f=h<o,m=n.allocUnsafe((f?2:3)+h),g=0;return m[g++]=s,f?m[g++]=h:(m[g++]=1|o,m[g++]=255&h),m[g++]=a,m[g++]=p,u<0?(m[g++]=0,g+=e.copy(m,g,0,r)):g+=e.copy(m,g,u,r),m[g++]=a,m[g++]=d,l<0?(m[g++]=0,e.copy(m,g,r)):e.copy(m,g,r+l),m}}},function(e,t,r){"use strict";function getParamSize(e){return(e/8|0)+(e%8==0?0:1)}var n={ES256:getParamSize(256),ES384:getParamSize(384),ES512:getParamSize(521)};e.exports=function getParamBytesForAlg(e){var t=n[e];if(t)return t;throw new Error('Unknown algorithm "'+e+'"')}},function(e,t,r){var n=r(14).Buffer,i=r(405),o=r(406),s=r(15),a=r(407),c=r(1),u=/^[a-zA-Z0-9\-_]+?\.[a-zA-Z0-9\-_]+?\.([a-zA-Z0-9\-_]+)?$/;function safeJsonParse(e){if(function isObject(e){return"[object Object]"===Object.prototype.toString.call(e)}(e))return e;try{return JSON.parse(e)}catch(e){return}}function headerFromJWS(e){var t=e.split(".",1)[0];return safeJsonParse(n.from(t,"base64").toString("binary"))}function signatureFromJWS(e){return e.split(".")[2]}function isValidJws(e){return u.test(e)&&!!headerFromJWS(e)}function jwsVerify(e,t,r){if(!t){var n=new Error("Missing algorithm parameter for jws.verify");throw n.code="MISSING_ALGORITHM",n}var i=signatureFromJWS(e=a(e)),s=function securedInputFromJWS(e){return e.split(".",2).join(".")}(e);return o(t).verify(s,i,r)}function jwsDecode(e,t){if(t=t||{},!isValidJws(e=a(e)))return null;var r=headerFromJWS(e);if(!r)return null;var i=function payloadFromJWS(e,t){t=t||"utf8";var r=e.split(".")[1];return n.from(r,"base64").toString(t)}(e);return("JWT"===r.typ||t.json)&&(i=JSON.parse(i,t.encoding)),{header:r,payload:i,signature:signatureFromJWS(e)}}function VerifyStream(e){var t=(e=e||{}).secret||e.publicKey||e.key,r=new i(t);this.readable=!0,this.algorithm=e.algorithm,this.encoding=e.encoding,this.secret=this.publicKey=this.key=r,this.signature=new i(e.signature),this.secret.once("close",function(){!this.signature.writable&&this.readable&&this.verify()}.bind(this)),this.signature.once("close",function(){!this.secret.writable&&this.readable&&this.verify()}.bind(this))}c.inherits(VerifyStream,s),VerifyStream.prototype.verify=function verify(){try{var e=jwsVerify(this.signature.buffer,this.algorithm,this.key.buffer),t=jwsDecode(this.signature.buffer,this.encoding);return this.emit("done",e,t),this.emit("data",e),this.emit("end"),this.readable=!1,e}catch(e){this.readable=!1,this.emit("error",e),this.emit("close")}},VerifyStream.decode=jwsDecode,VerifyStream.isValid=isValidJws,VerifyStream.verify=jwsVerify,e.exports=VerifyStream},function(e,t,r){"use strict";var n=r(52),i=r(41),o=r(53),s=r(7),a=r(34),c=r(43).Logger,u=r(80),l=a.UserRealm.AccountType,p=a.UserRealm.FederationProtocolType;function UserRealm(e,t,r){this._log=new c("UserRealm",e._logContext),this._callContext=e,this._apiVersion="1.0",this._federationProtocol=null,this._accountType=null,this._federationMetadataUrl=null,this._federationActiveAuthUrl=null,this._userPrinciple=t,this._authority=r}Object.defineProperty(UserRealm.prototype,"apiVersion",{get:function(){return this._apiVersion}}),Object.defineProperty(UserRealm.prototype,"federationProtocol",{get:function(){return this._federationProtocol}}),Object.defineProperty(UserRealm.prototype,"accountType",{get:function(){return this._accountType}}),Object.defineProperty(UserRealm.prototype,"federationMetadataUrl",{get:function(){return this._federationMetadataUrl}}),Object.defineProperty(UserRealm.prototype,"federationActiveAuthUrl",{get:function(){return this._federationActiveAuthUrl}}),UserRealm.prototype._getUserRealmUrl=function(){var e=u.copyUrl(this._authority),t=encodeURIComponent(this._userPrinciple);e.pathname="common/UserRealm/<user>".replace("<user>",t);var r={"api-version":this._apiVersion};return e.search=n.stringify(r),e=u.copyUrl(e)},UserRealm.prototype._validateConstantValue=function(e,t,r){return!!t&&(r||(t=t.toLowerCase()),!!o.contains(o.values(e),t)&&t)},UserRealm.prototype._validateAccountType=function(e){return this._validateConstantValue(l,e)},UserRealm.prototype._validateFederationProtocol=function(e){return this._validateConstantValue(p,e)},UserRealm.prototype._logParsedResponse=function(){this._log.verbose("UserRealm response:"),this._log.verbose(" AccountType:             "+this.accountType),this._log.verbose(" FederationProtocol:      "+this.federationProtocol),this._log.verbose(" FederationMetatdataUrl:  "+this.federationMetadataUrl,!0),this._log.verbose(" FederationActiveAuthUrl: "+this.federationActiveAuthUrl,!0)},UserRealm.prototype._parseDiscoveryResponse=function(e,t){var r;this._log.verbose("Discovery response:\n"+e,!0);try{r=JSON.parse(e)}catch(r){return void t(this._log.createError("Parsing realm discovery respone JSON failed: "+e,!0))}var n=this._validateAccountType(r.account_type);if(n){if(this._accountType=n,this._accountType===l.Federated){var i=this._validateFederationProtocol(r.federation_protocol);if(!i)return void t(this._log.createError("Cannot parse federation protocol: "+i));this._federationProtocol=i,this._federationMetadataUrl=r.federation_metadata_url,this._federationActiveAuthUrl=r.federation_active_auth_url}this._logParsedResponse(),t()}else t(this._log.createError("Cannot parse account_type: "+n))},UserRealm.prototype.discover=function(e){var t=this,r=u.createRequestOptions(this,{headers:{Accept:"application/json"}}),n=this._getUserRealmUrl();this._log.verbose("Performing user realm discovery at: "+s.format(n),!0),i.get(n,r,u.createRequestHandler("User Realm Discovery",this._log,e,function(r,n){t._parseDiscoveryResponse(n,e)}))},e.exports=UserRealm},function(e,t,r){"use strict";var n=r(41),i=r(35),o=r(43).Logger,s=r(80),a=r(953),c=r(34).WSTrustVersion;function WSTrustRequest(e,t,r,n){this._log=new o("WSTrustRequest",e._logContext),this._callContext=e,this._wstrustEndpointUrl=t,this._appliesTo=r,this._wstrustEndpointVersion=n}WSTrustRequest.prototype._buildSecurityHeader=function(){var e=new Date,t=function _datePlusMinutes(e,t){var r=60*t*1e3,n=e.getTime()+r;return new Date(n)}(e,10);return"<wsse:Security s:mustUnderstand='1' xmlns:wsse='http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-secext-1.0.xsd'>    <wsu:Timestamp wsu:Id='_0'>      <wsu:Created>"+e.toISOString()+"</wsu:Created>      <wsu:Expires>"+t.toISOString()+"</wsu:Expires>    </wsu:Timestamp>    <wsse:UsernameToken wsu:Id='ADALUsernameToken'>      <wsse:Username>{UsernamePlaceHolder}</wsse:Username>      <wsse:Password>{PasswordPlaceHolder}</wsse:Password>    </wsse:UsernameToken>    </wsse:Security>"},WSTrustRequest.prototype._populateRSTUsernamePassword=function(e,t,r){return e.replace("{UsernamePlaceHolder}",t).replace("{PasswordPlaceHolder}",this._populatedEscapedPassword(r))},WSTrustRequest.prototype._populatedEscapedPassword=function(e){return e.replace(/&/g,"&amp;").replace(/"/g,"&quot;").replace(/'/g,"&apos;").replace(/</g,"&lt;").replace(/>/g,"&gt;")},WSTrustRequest.prototype._buildRST=function(e,t){var r=i.v4(),n="http://docs.oasis-open.org/ws-sx/ws-trust/200512/RST/Issue",o="http://docs.oasis-open.org/ws-sx/ws-trust/200512",s="http://docs.oasis-open.org/ws-sx/ws-trust/200512/Bearer",a="http://docs.oasis-open.org/ws-sx/ws-trust/200512/Issue";this._wstrustEndpointVersion===c.WSTRUST2005&&(n="http://schemas.xmlsoap.org/ws/2005/02/trust/RST/Issue",o="http://schemas.xmlsoap.org/ws/2005/02/trust",s="http://schemas.xmlsoap.org/ws/2005/05/identity/NoProofKey",a="http://schemas.xmlsoap.org/ws/2005/02/trust/Issue");var u="<s:Envelope xmlns:s='http://www.w3.org/2003/05/soap-envelope' xmlns:wsa='http://www.w3.org/2005/08/addressing' xmlns:wsu='http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-utility-1.0.xsd'>      <s:Header>        <wsa:Action s:mustUnderstand='1'>"+n+"</wsa:Action>        <wsa:messageID>urn:uuid:"+r+"</wsa:messageID>        <wsa:ReplyTo>          <wsa:Address>http://www.w3.org/2005/08/addressing/anonymous</wsa:Address>        </wsa:ReplyTo>        <wsa:To s:mustUnderstand='1'>"+this._wstrustEndpointUrl+"</wsa:To>        "+this._buildSecurityHeader()+"      </s:Header>      <s:Body>        <wst:RequestSecurityToken xmlns:wst='"+o+"'>          <wsp:AppliesTo xmlns:wsp='http://schemas.xmlsoap.org/ws/2004/09/policy'>            <wsa:EndpointReference>              <wsa:Address>"+this._appliesTo+"</wsa:Address>            </wsa:EndpointReference>          </wsp:AppliesTo>          <wst:KeyType>"+s+"</wst:KeyType>          <wst:RequestType>"+a+"</wst:RequestType>        </wst:RequestSecurityToken>      </s:Body>    </s:Envelope>";return this._log.verbose("Created RST: \n"+u,!0),this._populateRSTUsernamePassword(u,e,t)},WSTrustRequest.prototype._handleRSTR=function(e,t){var r,n=new a(this._callContext,e,this._wstrustEndpointVersion);try{n.parse()}catch(e){r=e}t(r,n)},WSTrustRequest.prototype.acquireToken=function(e,t,r){if(this._wstrustEndpointVersion!==c.UNDEFINED){var i=this,o=this._buildRST(e,t),a=this._wstrustEndpointVersion===c.WSTRUST2005?"http://schemas.xmlsoap.org/ws/2005/02/trust/RST/Issue":"http://docs.oasis-open.org/ws-sx/ws-trust/200512/RST/Issue",u=s.createRequestOptions(this,{headers:{"Content-Type":"application/soap+xml; charset=utf-8",SOAPAction:a},body:o});this._log.verbose("Sending RST to: "+this._wstrustEndpointUrl,!0),n.post(this._wstrustEndpointUrl,u,s.createRequestHandler("WS-Trust RST",this._log,r,function(e,t){i._handleRSTR(t,r)}))}else{var l=this._log.createError("Unsupported wstrust endpoint version. Current support version is wstrust2005 or wstrust13.");r(l)}},e.exports=WSTrustRequest},function(e,t,r){"use strict";var n=r(231),i=r(403),o=r(43).Logger,s=r(34).WSTrustVersion,a=i.xpathSelect,c=n.DOMParser,u=/RequestedSecurityToken.*?((<.*?:Assertion.*?>).*<\/.*?Assertion>).*?/;function WSTrustResponse(e,t,r){this._log=new o("WSTrustResponse",e._logContext),this._callContext=e,this._response=t,this._dom=null,this._errorCode=null,this._faultMessage=null,this._tokenType=null,this._token=null,this._wstrustVersion=r,this._log.verbose(function(){return function scrubRSTRLogMessage(e){var t=null,r=e.replace(/(\r\n|\n|\r)/gm,""),n=u.exec(r);if(null===n)t=r;else{var i=n[1],o=n[2];t=r.replace(i,o+"ASSERTION CONTENTS REDACTED</saml:Assertion>")}return"RSTR Response: "+t}(t)})}Object.defineProperty(WSTrustResponse.prototype,"errorCode",{get:function(){return this._errorCode}}),Object.defineProperty(WSTrustResponse.prototype,"faultMessage",{get:function(){return this._faultMessage}}),Object.defineProperty(WSTrustResponse.prototype,"tokenType",{get:function(){return this._tokenType}}),Object.defineProperty(WSTrustResponse.prototype,"token",{get:function(){return this._token}}),WSTrustResponse.prototype._parseError=function(){var e=!1,t=a(this._dom,"//s:Envelope/s:Body/s:Fault/s:Reason");t.length&&(this._faultMessage=i.serializeNodeChildren(t[0]),this._faultMessage&&(e=!0));var r=a(this._dom,"//s:Envelope/s:Body/s:Fault/s:Code/s:Subcode/s:Value");if(1<r.length)throw this._log.createError("Found too many fault code values:"+r.length);if(r.length){var n=r[0].firstChild.data;this._errorCode=n.split(":")[1],e=!0}return e},WSTrustResponse.prototype._parseToken=function(){var e=this._wstrustVersion===s.WSTRUST2005?"//s:Envelope/s:Body/t:RequestSecurityTokenResponse/t:TokenType":"//s:Envelope/s:Body/wst:RequestSecurityTokenResponseCollection/wst:RequestSecurityTokenResponse/wst:TokenType",t=a(this._dom,e);t.length||this._log.warn("No TokenType elements found in RSTR");for(var r=0,n=t.length;r<n;r++){if(this._token){this._log.warn("Found more than one returned token.  Using the first.");break}var o=t[r],c=i.findElementText(o);c||this._log.warn("Could not find token type in RSTR token");var u=this._wstrustVersion===s.WSTRUST2005?"t:RequestedSecurityToken":"wst:RequestedSecurityToken",l=a(o.parentNode,u);if(1<l)throw this._log.createError("Found too many RequestedSecurityToken nodes for token type: "+c);if(l.length){var p=i.serializeNodeChildren(l[0]);p?(this._token=p,this._tokenType=c,this._log.info("Found token of type: "+this._tokenType)):this._log.warn("Unable to find token associated with TokenType element: "+c)}else this._log.warn("Unable to find RequestsSecurityToken element associated with TokenType element: "+c)}if(!this._token)throw this._log.createError("Unable to find any tokens in RSTR.")},WSTrustResponse.prototype.parse=function(){if(!this._response)throw this._log.createError("Received empty RSTR response body.");try{try{var e={errorHandler:this._log.error};this._dom=new c(e).parseFromString(this._response)}catch(e){throw this._log.createError("Failed to parse RSTR in to DOM",e,!0)}if(this._parseError()){var t=this.ErrorCode||"NONE",r=this.FaultMessage||"NONE";throw this._log.createError("Server returned error in RSTR - ErrorCode: "+t+" : FaultMessage: "+r,!0)}this._parseToken()}catch(e){throw delete this._dom,e}},e.exports=WSTrustResponse},function(e,t,r){"use strict";var n=r(34),i=r(43).Logger,o=(r(401),r(404)),s=n.OAuth2.Parameters;n.TokenResponseFields,n.OAuth2.GrantType,n.OAuth2.Scope;function CodeRequest(e,t,r,n){this._log=new i("DeviceCodeRequest",e._logContext),this._callContext=e,this._authenticationContext=t,this._resource=n,this._clientId=r,this._userId=null}CodeRequest.prototype._getUserCodeInfo=function(e,t){this._createOAuth2Client().getUserCodeInfo(e,t)},CodeRequest.prototype._createOAuth2Client=function(){return new o(this._callContext,this._authenticationContext._authority)},CodeRequest.prototype._createOAuthParameters=function(){var e={};return e[s.CLIENT_ID]=this._clientId,e[s.RESOURCE]=this._resource,e},CodeRequest.prototype.getUserCodeInfo=function(e,t){this._log.info("Getting user code info.");var r=this._createOAuthParameters();e&&(r[s.LANGUAGE]=e),this._getUserCodeInfo(r,t)},e.exports=CodeRequest},function(e,t,r){"use strict";var n=r(41),i=r(400),o=r(43),s=r(80),a=r(34).HttpError,c="authorization_uri",u="resource",l="www-authenticate";function AuthenticationParameters(e,t){this._authorizationUri=e,this._resource=t}Object.defineProperty(AuthenticationParameters.prototype,"authorizationUri",{get:function(){return this._authorizationUri}}),Object.defineProperty(AuthenticationParameters.prototype,"resource",{get:function(){return this._resource}}),(t={}).AuthenticationParameters=AuthenticationParameters,t.createAuthenticationParametersFromHeader=function(e){i.validateStringParameter(e,"challenge");var t=function parseChallenge(e){var t=/(?:,\s*([^,\s="]+?)="([^"]*?)"\s*)/g;if(!/^\s*Bearer\s+([^,\s="]+?)="([^"]*?)"\s*(,\s*([^,\s="]+?)="([^"]*?)"\s*)*$/.test(e))throw new Error("The challenge is not parseable as an RFC6750 OAuth2 challenge");for(var r={},n=/^\s*Bearer\s+([^,\s="]+?)="([^"]*?)"\s*/.exec(e);n;n=t.exec(e))r[n[1]]=n[2];return r}(e),r=t[c];if(!r)throw new Error("Could not find 'authorization_uri' in challenge header.");return new AuthenticationParameters(r,t[u])},t.createAuthenticationParametersFromResponse=function(e){if(!e)throw new Error("Mising required parameter: response");if(!e.statusCode)throw new Error("The response parameter does not have the expected HTTP statusCode field");if(a.UNAUTHORIZED!==e.statusCode)throw new Error("The response status code does not correspond to an OAuth challenge.  The statusCode is expected to be 401 but is: "+e.statusCode);if(!e.headers)throw new Error("There were no headers found in the response.");var r=e.headers[l];if(!r)throw new Error("The response does not contain a WWW-Authenticate header that can be used to determine the authority_uri and resource.");return t.createAuthenticationParametersFromHeader(r)},t.createAuthenticationParametersFromUrl=function(e,r,a){i.validateCallbackType(r);try{if(!e)return void r(new Error("Missing required parameter: url"));var c;"string"==typeof e?c=e:(!function validateUrlObject(e){if(!e||!e.href)throw new Error("Parameter is of wrong type: url")}(e),c=e.href);var u=o.createLogContext(a),l=new o.Logger("AuthenticationParameters",u);l.verbose("Attempting to retrieve authentication parameters"),l.verbose("Attempting to retrieve authentication parameters from: "+c,!0);var p=s.createRequestOptions({_callContext:{_logContext:u}});n.get(c,p,function(e,n){if(e)return l.error("Authentication parameters http get failed.",e,!0),void r(e);var i;try{i=t.createAuthenticationParametersFromResponse(n)}catch(e){return l.error("Unable to parse response in to authentication paramaters.",e,!0),void r(e)}r(null,i)})}catch(e){return void r(e)}},e.exports=t},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n=r(165),i=r(232),o=r(233),s=r(166),a=r(234),c=r(129),u=r(235),l=r(79);t.createAuthenticator=function createAuthenticator(e){return function _createAuthenticatorMapper(e){return t=>new Promise((r,o)=>{const a=(e,t)=>{if(e)return o(e);if(t.error)return o(t.error);const n=(t=t).tokenType+" "+t.accessToken;return r(n)};if(!(e instanceof c.TokenCredentialsBase))return e instanceof s.MSITokenCredentials?e.getToken():o(new Error("credentials must be one of: ApplicationTokenCredentials, UserTokenCredentials, DeviceTokenCredentials, MSITokenCredentials"));{const r=new l.AuthenticationContext(t.authorization,!0,e.authContext&&e.authContext.cache);if(e instanceof n.ApplicationTokenCredentials)return r.acquireTokenWithClientCredentials(t.resource,e.clientId,e.secret,a);if(e instanceof u.UserTokenCredentials)return r.acquireTokenWithUsernamePassword(t.resource,e.username,e.password,e.clientId,a);if(e instanceof i.DeviceTokenCredentials)return r.acquireToken(t.resource,e.username,e.clientId,a)}})}(function _convert(e){if(e instanceof o.MSIAppServiceTokenCredentials)return new o.MSIAppServiceTokenCredentials({msiEndpoint:e.msiEndpoint,msiSecret:e.msiSecret,msiApiVersion:e.msiApiVersion,resource:e.resource});if(e instanceof a.MSIVmTokenCredentials)return new a.MSIVmTokenCredentials({resource:e.resource,msiEndpoint:e.msiEndpoint});if(e instanceof s.MSITokenCredentials)throw new Error("MSI-credentials not one of: MSIVmTokenCredentials, MSIAppServiceTokenCredentials");return e}(e))}},function(e,t,r){"use strict";var n=this&&this.__awaiter||function(e,t,r,n){return new(r||(r=Promise))(function(i,o){function fulfilled(e){try{step(n.next(e))}catch(e){o(e)}}function rejected(e){try{step(n.throw(e))}catch(e){o(e)}}function step(e){e.done?i(e.value):new r(function(t){t(e.value)}).then(fulfilled,rejected)}step((n=n.apply(e,t||[])).next())})};Object.defineProperty(t,"__esModule",{value:!0});const i=r(79),o=r(11),s=r(106),a=r(399),c=r(165),u=r(232),l=r(235),p=r(99),d=r(958),h=r(234),f=r(233);function withUsernamePasswordWithAuthResponse(e,t,r){return n(this,void 0,void 0,function*(){let n;r||(r={}),r.clientId||(r.clientId=p.AuthConstants.DEFAULT_ADAL_CLIENT_ID),r.domain||(r.domain=p.AuthConstants.AAD_COMMON_TENANT),r.environment||(r.environment=a.Environment.AzureCloud);let i=[],o=[];try{n=new l.UserTokenCredentials(r.clientId,r.domain,e,t,r.tokenAudience,r.environment),yield n.getToken(),i=yield d.buildTenantList(n),r.tokenAudience&&r.tokenAudience===r.environment.activeDirectoryResourceId&&(o=yield d.getSubscriptionsFromTenants(n,i))}catch(e){return Promise.reject(e)}return Promise.resolve({credentials:n,subscriptions:o})})}function withServicePrincipalSecretWithAuthResponse(e,t,r,i){return n(this,void 0,void 0,function*(){let n;i||(i={}),i.environment||(i.environment=a.Environment.AzureCloud);let o=[];try{n=new c.ApplicationTokenCredentials(e,r,t,i.tokenAudience,i.environment),yield n.getToken(),i.tokenAudience&&i.tokenAudience===i.environment.activeDirectoryResourceId&&(o=yield d.getSubscriptionsFromTenants(n,[r]))}catch(e){return Promise.reject(e)}return Promise.resolve({credentials:n,subscriptions:o})})}function foundManagementEndpointUrl(e,t){if(!e||e&&"string"!=typeof e.valueOf())throw new Error("authFileUrl cannot be null or undefined and must be of type string.");if(!t||t&&"string"!=typeof t.valueOf())throw new Error("envUrl cannot be null or undefined and must be of type string.");return e=e.endsWith("/")?e.slice(0,-1):e,t=t.endsWith("/")?t.slice(0,-1):t,e.toLowerCase()===t.toLowerCase()}function withAuthFileWithAuthResponse(e){return n(this,void 0,void 0,function*(){e||(e={filePath:""});const t=e.filePath||process.env[p.AuthConstants.AZURE_AUTH_LOCATION],r=e.subscriptionEnvVariableName||"AZURE_SUBSCRIPTION_ID";if(!t){const e=`Either provide an absolute file path to the auth file or set/export the environment variable - ${p.AuthConstants.AZURE_AUTH_LOCATION}.`;return Promise.reject(new Error(e))}let n,i={};const s={};try{n=o.readFileSync(t,{encoding:"utf8"}),function validateAuthFileContent(e,t){if(!e)throw new Error("Please provide a credsObj to validate.");if(!t)throw new Error("Please provide a filePath.");if(!e.clientId)throw new Error(`"clientId" is missing from the auth file: ${t}.`);if(!e.clientSecret)throw new Error(`"clientSecret" is missing from the auth file: ${t}.`);if(!e.subscriptionId)throw new Error(`"subscriptionId" is missing from the auth file: ${t}.`);if(!e.tenantId)throw new Error(`"tenantId" is missing from the auth file: ${t}.`);if(!e.activeDirectoryEndpointUrl)throw new Error(`"activeDirectoryEndpointUrl" is missing from the auth file: ${t}.`);if(!e.resourceManagerEndpointUrl)throw new Error(`"resourceManagerEndpointUrl" is missing from the auth file: ${t}.`);if(!e.activeDirectoryGraphResourceId)throw new Error(`"activeDirectoryGraphResourceId" is missing from the auth file: ${t}.`);if(!e.sqlManagementEndpointUrl)throw new Error(`"sqlManagementEndpointUrl" is missing from the auth file: ${t}.`)}(i=JSON.parse(n),t)}catch(e){return Promise.reject(e)}i.managementEndpointUrl||(i.managementEndpointUrl=i.resourceManagerEndpointUrl),process.env[r]=i.subscriptionId;const c={name:""},u=Object.keys(a.Environment);for(let e=0;e<u.length;e++){const t=u[e],r=a.Environment[t];if(r&&r.managementEndpointUrl&&foundManagementEndpointUrl(i.managementEndpointUrl,r.managementEndpointUrl)){c.name=r.name;break}}if(c.name)s.environment=a.Environment[c.name];else{const e={name:i.managementEndpointUrl.match(/.*management\.core\.(.*)\..*/i)[1]||t},r=Object.keys(i);for(let t=0;t<r.length;t++){const n=r[t];null===n.match(/^(clientId|clientSecret|subscriptionId|tenantId)$/gi)&&("activeDirectoryEndpointUrl"!==n||n.endsWith("/")?e[n]=i[n]:e[n]=i[n]+"/")}e.activeDirectoryResourceId||(e.activeDirectoryResourceId=i.managementEndpointUrl),e.portalUrl||(e.portalUrl="https://portal.azure.com"),s.environment=a.Environment.add(e)}return withServicePrincipalSecretWithAuthResponse(i.clientId,i.clientSecret,i.tenantId,s)})}function withInteractiveWithAuthResponse(e){return n(this,void 0,void 0,function*(){e||(e={}),e||(e={}),e.environment||(e.environment=a.Environment.AzureCloud),e.domain||(e.domain=p.AuthConstants.AAD_COMMON_TENANT),e.clientId||(e.clientId=p.AuthConstants.DEFAULT_ADAL_CLIENT_ID),e.tokenCache||(e.tokenCache=new i.MemoryCache),e.language||(e.language=p.AuthConstants.DEFAULT_LANGUAGE),e.tokenAudience||(e.tokenAudience=e.environment.activeDirectoryResourceId);const t={};t.tokenAudience=e.tokenAudience,t.environment=e.environment,t.domain=e.domain,t.clientId=e.clientId,t.tokenCache=e.tokenCache,t.language=e.language,t.userCodeResponseLogger=e.userCodeResponseLogger;const r=t.environment.activeDirectoryEndpointUrl+t.domain,n=new i.AuthenticationContext(r,t.environment.validateAuthority,t.tokenCache);let o,s;return t.context=n,new Promise((e,r)=>(function tryAcquireToken(e,t,r){n.acquireUserCode(e.tokenAudience,e.clientId,e.language,(n,i)=>{if(n){if("authorization_pending"!==n.error)return r(n);setTimeout(()=>{tryAcquireToken(e,t,r)},1e3)}return o=i,e.userCodeResponseLogger?e.userCodeResponseLogger(o.message):console.log(o.message),t(o)})})(t,e,r)).then(()=>new Promise((e,r)=>n.acquireTokenWithDeviceCode(t.tokenAudience,t.clientId,o,(n,i)=>{if(n)return r(n);t.userName=i.userId,t.authorizationScheme=i.tokenType;try{s=new u.DeviceTokenCredentials(t.clientId,t.domain,t.userName,t.tokenAudience,t.environment,t.tokenCache)}catch(e){return r(e)}return e(s)}))).then(e=>d.buildTenantList(e)).then(e=>(function getSubscriptions(e,r){return t.tokenAudience&&t.tokenAudience===t.environment.activeDirectoryResourceId?d.getSubscriptionsFromTenants(e,r):Promise.resolve([])})(s,e)).then(e=>Promise.resolve({credentials:s,subscriptions:e}))})}function _withMSI(e){return e||(e={}),new Promise((t,r)=>{const n=new h.MSIVmTokenCredentials(e);n.getToken().then(e=>t(n)).catch(e=>{r(e)})})}function _withAppServiceMSI(e){return e||(e={}),new Promise((t,r)=>{const n=new f.MSIAppServiceTokenCredentials(e);n.getToken().then(e=>t(n)).catch(e=>{r(e)})})}process.env.AZURE_ADAL_LOGGING_ENABLED&&function turnOnLogging(){i.Logging.setLoggingOptions({level:3,log:function(e,t,r){console.info(t),r&&console.error(r)}})}(),t.withUsernamePasswordWithAuthResponse=withUsernamePasswordWithAuthResponse,t.withServicePrincipalSecretWithAuthResponse=withServicePrincipalSecretWithAuthResponse,t.withAuthFileWithAuthResponse=withAuthFileWithAuthResponse,t.withInteractiveWithAuthResponse=withInteractiveWithAuthResponse,t.withAuthFile=function withAuthFile(e,t){t||"function"!=typeof e||(t=e,e=void 0);const r=t;if(!t)return withAuthFileWithAuthResponse(e).then(e=>Promise.resolve(e.credentials)).catch(e=>Promise.reject(e));s.promiseToCallback(withAuthFileWithAuthResponse(e))((e,t)=>e?r(e):r(void 0,t.credentials,t.subscriptions))},t.interactive=function interactive(e,t){t||"function"!=typeof e||(t=e,e=void 0);const r=t;if(!t)return withInteractiveWithAuthResponse(e).then(e=>Promise.resolve(e.credentials)).catch(e=>Promise.reject(e));s.promiseToCallback(withInteractiveWithAuthResponse(e))((e,t)=>e?r(e):r(void 0,t.credentials,t.subscriptions))},t.withServicePrincipalSecret=function withServicePrincipalSecret(e,t,r,n,i){i||"function"!=typeof n||(i=n,n=void 0);const o=i;if(!i)return withServicePrincipalSecretWithAuthResponse(e,t,r,n).then(e=>Promise.resolve(e.credentials)).catch(e=>Promise.reject(e));s.promiseToCallback(withServicePrincipalSecretWithAuthResponse(e,t,r,n))((e,t)=>e?o(e):o(void 0,t.credentials,t.subscriptions))},t.withUsernamePassword=function withUsernamePassword(e,t,r,n){n||"function"!=typeof r||(n=r,r=void 0);const i=n;if(!n)return withUsernamePasswordWithAuthResponse(e,t,r).then(e=>Promise.resolve(e.credentials)).catch(e=>Promise.reject(e));s.promiseToCallback(withUsernamePasswordWithAuthResponse(e,t,r))((e,t)=>e?i(e):i(void 0,t.credentials,t.subscriptions))},t.loginWithVmMSI=function loginWithVmMSI(e,t){t||"function"!=typeof e||(t=e,e={});const r=t;if(!t)return _withMSI(e);s.promiseToCallback(_withMSI(e))((e,t)=>e?r(e):r(void 0,t))},t.loginWithAppServiceMSI=function loginWithAppServiceMSI(e,t){t||"function"!=typeof e||(t=e,e={});const r=t;if(!t)return _withAppServiceMSI(e);s.promiseToCallback(_withAppServiceMSI(e))((e,t)=>e?r(e):r(void 0,t))}},function(e,t,r){"use strict";var n=this&&this.__awaiter||function(e,t,r,n){return new(r||(r=Promise))(function(i,o){function fulfilled(e){try{step(n.next(e))}catch(e){o(e)}}function rejected(e){try{step(n.throw(e))}catch(e){o(e)}}function step(e){e.done?i(e.value):new r(function(t){t(e.value)}).then(fulfilled,rejected)}step((n=n.apply(e,t||[])).next())})};Object.defineProperty(t,"__esModule",{value:!0});const i=r(106),o=r(165),s=r(99);t.buildTenantList=function buildTenantList(e,t="2016-06-01"){return n(this,void 0,void 0,function*(){if(e.domain&&e.domain!==s.AuthConstants.AAD_COMMON_TENANT)return Promise.resolve([e.domain]);const r=new i.ServiceClient(e),n=e.environment.resourceManagerEndpointUrl,o={url:`${n}${n.endsWith("/")?"":"/"}tenants?api-version=${t}`,method:"GET"};let a;try{a=yield r.sendRequest(o)}catch(e){return Promise.reject(e)}const c=[],u=a.parsedBody;for(const e in u.value)c.push(e.tenantId);return Promise.resolve(c)})},t.getSubscriptionsFromTenants=function getSubscriptionsFromTenants(e,t,r="2016-06-01"){return n(this,void 0,void 0,function*(){let n,s=[],a="user";const c=e.domain;e instanceof o.ApplicationTokenCredentials?(a="servicePrincipal",n=e.clientId):n=e.username;for(const o of t){e.domain=o;const t=new i.ServiceClient(e),c=e.environment.resourceManagerEndpointUrl,u={url:`${c}${c.endsWith("/")?"":"/"}subscriptions?api-version=${r}`,method:"GET"};let l;try{l=yield t.sendRequest(u)}catch(e){return Promise.reject(e)}const p=l.parsedBody.value;s=s.concat(p.map(t=>(t.tenantId=o,t.user={name:n,type:a},t.environmentName=e.environment.name,t.name=t.displayName,t.id=t.subscriptionId,delete t.displayName,delete t.subscriptionId,delete t.subscriptionPolicies,t)))}return e.domain=c,Promise.resolve(s)})}},function(e,t,r){"use strict";function _typeof(e){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function _typeof(e){return typeof e}:function _typeof(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}t.log=function log(){var e;return"object"===("undefined"==typeof console?"undefined":_typeof(console))&&console.log&&(e=console).log.apply(e,arguments)},t.formatArgs=function formatArgs(t){if(t[0]=(this.useColors?"%c":"")+this.namespace+(this.useColors?" %c":" ")+t[0]+(this.useColors?"%c ":" ")+"+"+e.exports.humanize(this.diff),!this.useColors)return;var r="color: "+this.color;t.splice(1,0,r,"color: inherit");var n=0,i=0;t[0].replace(/%[a-zA-Z%]/g,function(e){"%%"!==e&&(n++,"%c"===e&&(i=n))}),t.splice(i,0,r)},t.save=function save(e){try{e?t.storage.setItem("debug",e):t.storage.removeItem("debug")}catch(e){}},t.load=function load(){var e;try{e=t.storage.getItem("debug")}catch(e){}!e&&"undefined"!=typeof process&&"env"in process&&(e=process.env.DEBUG);return e},t.useColors=function useColors(){if("undefined"!=typeof window&&window.process&&("renderer"===window.process.type||window.process.__nwjs))return!0;if("undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/))return!1;return"undefined"!=typeof document&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||"undefined"!=typeof window&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||"undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31||"undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/)},t.storage=function localstorage(){try{return localStorage}catch(e){}}(),t.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"],e.exports=r(409)(t),e.exports.formatters.j=function(e){try{return JSON.stringify(e)}catch(e){return"[UnexpectedJSONParseError]: "+e.message}}},function(e,t){var r=1e3,n=60*r,i=60*n,o=24*i,s=7*o,a=365.25*o;function plural(e,t,r,n){var i=t>=1.5*r;return Math.round(e/r)+" "+n+(i?"s":"")}e.exports=function(e,t){t=t||{};var c=typeof e;if("string"===c&&e.length>0)return function parse(e){if((e=String(e)).length>100)return;var t=/^((?:\d+)?\-?\d?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(e);if(!t)return;var c=parseFloat(t[1]);switch((t[2]||"ms").toLowerCase()){case"years":case"year":case"yrs":case"yr":case"y":return c*a;case"weeks":case"week":case"w":return c*s;case"days":case"day":case"d":return c*o;case"hours":case"hour":case"hrs":case"hr":case"h":return c*i;case"minutes":case"minute":case"mins":case"min":case"m":return c*n;case"seconds":case"second":case"secs":case"sec":case"s":return c*r;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return c;default:return}}(e);if("number"===c&&!1===isNaN(e))return t.long?function fmtLong(e){var t=Math.abs(e);if(t>=o)return plural(e,t,o,"day");if(t>=i)return plural(e,t,i,"hour");if(t>=n)return plural(e,t,n,"minute");if(t>=r)return plural(e,t,r,"second");return e+" ms"}(e):function fmtShort(e){var t=Math.abs(e);if(t>=o)return Math.round(e/o)+"d";if(t>=i)return Math.round(e/i)+"h";if(t>=n)return Math.round(e/n)+"m";if(t>=r)return Math.round(e/r)+"s";return e+"ms"}(e);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(e))}},function(e,t,r){"use strict";var n=r(51),i=r(1);t.init=function init(e){e.inspectOpts={};for(var r=Object.keys(t.inspectOpts),n=0;n<r.length;n++)e.inspectOpts[r[n]]=t.inspectOpts[r[n]]},t.log=function log(){return process.stderr.write(i.format.apply(i,arguments)+"\n")},t.formatArgs=function formatArgs(r){var n=this.namespace;if(this.useColors){var i=this.color,o="[3"+(i<8?i:"8;5;"+i),s="  ".concat(o,";1m").concat(n," [0m");r[0]=s+r[0].split("\n").join("\n"+s),r.push(o+"m+"+e.exports.humanize(this.diff)+"[0m")}else r[0]=function getDate(){if(t.inspectOpts.hideDate)return"";return(new Date).toISOString()+" "}()+n+" "+r[0]},t.save=function save(e){e?process.env.DEBUG=e:delete process.env.DEBUG},t.load=function load(){return process.env.DEBUG},t.useColors=function useColors(){return"colors"in t.inspectOpts?Boolean(t.inspectOpts.colors):n.isatty(process.stderr.fd)},t.colors=[6,2,3,4,5,1];try{var o=r(49);o&&(o.stderr||o).level>=2&&(t.colors=[20,21,26,27,32,33,38,39,40,41,42,43,44,45,56,57,62,63,68,69,74,75,76,77,78,79,80,81,92,93,98,99,112,113,128,129,134,135,148,149,160,161,162,163,164,165,166,167,168,169,170,171,172,173,178,179,184,185,196,197,198,199,200,201,202,203,204,205,206,207,208,209,214,215,220,221])}catch(e){}t.inspectOpts=Object.keys(process.env).filter(function(e){return/^debug_/i.test(e)}).reduce(function(e,t){var r=t.substring(6).toLowerCase().replace(/_([a-z])/g,function(e,t){return t.toUpperCase()}),n=process.env[t];return n=!!/^(yes|on|true|enabled)$/i.test(n)||!/^(no|off|false|disabled)$/i.test(n)&&("null"===n?null:Number(n)),e[r]=n,e},{}),e.exports=r(409)(t);var s=e.exports.formatters;s.o=function(e){return this.inspectOpts.colors=this.useColors,i.inspect(e,this.inspectOpts).replace(/\s*\n\s*/g," ")},s.O=function(e){return this.inspectOpts.colors=this.useColors,i.inspect(e,this.inspectOpts)}},function(e,t,r){"use strict";const n=r(86),i=r(9).AzureServiceClient,o=r(54),s=r(1027);class EventHubManagementClient extends i{constructor(e,t,r,i){if(null==e)throw new Error("'credentials' cannot be null.");if(null==t)throw new Error("'subscriptionId' cannot be null.");i||(i={}),super(e,i),this.apiVersion="2017-04-01",this.acceptLanguage="en-US",this.longRunningOperationRetryTimeout=30,this.generateClientRequestId=!0,this.baseUri=r,this.baseUri||(this.baseUri="https://management.azure.com"),this.credentials=e,this.subscriptionId=t;let a=this.getPackageJsonInfo(__dirname);this.addUserAgentInfo(`${a.name}/${a.version}`),null!==i.acceptLanguage&&void 0!==i.acceptLanguage&&(this.acceptLanguage=i.acceptLanguage),null!==i.longRunningOperationRetryTimeout&&void 0!==i.longRunningOperationRetryTimeout&&(this.longRunningOperationRetryTimeout=i.longRunningOperationRetryTimeout),null!==i.generateClientRequestId&&void 0!==i.generateClientRequestId&&(this.generateClientRequestId=i.generateClientRequestId),this.operations=new s.Operations(this),this.namespaces=new s.Namespaces(this),this.disasterRecoveryConfigs=new s.DisasterRecoveryConfigs(this),this.eventHubs=new s.EventHubs(this),this.consumerGroups=new s.ConsumerGroups(this),this.regions=new s.Regions(this),this.models=o,n.addSerializationMixin(this)}}e.exports=EventHubManagementClient,e.exports.default=EventHubManagementClient,e.exports.EventHubManagementClient=EventHubManagementClient,e.exports.EventHubManagementModels=o},function(e,t,r){"use strict";const n=r(7),i=r(70),o=r(413),s=r(415),a=r(965),c=r(416),u=r(419),l=r(420),p=r(966),d=r(421),h=r(236),f=r(410),m=r(100),g=r(69),y=r(6),v=r(11),b=r(422),_=r(967),w=_.name,E=_.version;function _sendRequest(e,t){if(null==e||"object"!=typeof e)throw new Error("options cannot be null or undefined and it must be of type object.");if(null==t)throw new Error("callback cannot be null or undefined.");let r=null;try{e instanceof f?(e.validateRequestProperties(),r=e):r=(r=new f).prepare(e)}catch(e){return t(e)}this.pipeline(r,(n,i,o)=>{let s,a;""===o&&(o=null);try{s=JSON.parse(o),a=JSON.parse(o),null!=s&&e.deserializationMapper&&(a=m.deserialize(e.deserializationMapper,s,"result"))}catch(e){let n=`An error occurred while deserializing the responseBody ${o}. The error is:\n ${JSON.stringify(e,null,2)}.`;return n.request=r,n.response=i,n.statusCode=i.statusCode,t(n)}return t(n,a,r,i)})}function _loadEnvironmentProxyValue(){let e=null;return process.env[i.HTTPS_PROXY]?e=process.env[i.HTTPS_PROXY]:process.env[i.HTTPS_PROXY.toLowerCase()]?e=process.env[i.HTTPS_PROXY.toLowerCase()]:process.env[i.HTTP_PROXY]?e=process.env[i.HTTP_PROXY]:process.env[i.HTTP_PROXY.toLowerCase()]&&(e=process.env[i.HTTP_PROXY.toLowerCase()]),e}function _setDefaultProxy(){let e=this._loadEnvironmentProxyValue();if(e){let t=n.parse(e);t.port||(t.port=80),this.pipeline=h.createWithSink(this.pipeline,o.create({host:t.hostname,port:t.port,protocol:t.protocol},g.urlIsHTTPS(t)))}}e.exports=class ServiceClient{constructor(e,t){if(t||(t={}),t.requestOptions||(t.requestOptions={}),t.filters||(t.filters=[]),this.userAgentInfo={value:[]},e&&!e.signRequest)throw new Error("credentials argument needs to implement signRequest method");this.addUserAgentInfo(`${w}/${E}`),e&&t.filters.push(c.create(e)),t.filters.push(u.create()),t.filters.push(s.create(this.userAgentInfo.value)),t.filters.push(a.create()),t.filters.push(d.create(t.rpRegistrationRetryTimeout)),t.noRetryPolicy||(t.filters.push(new l),t.filters.push(new p)),this.pipeline=h.create(t.requestOptions).apply(h,t.filters),this._sendRequest=_sendRequest,this._setDefaultProxy=_setDefaultProxy,this._loadEnvironmentProxyValue=_loadEnvironmentProxyValue,this._setDefaultProxy()}addFilter(e){if(!e)throw new Error("No filter passed");if(!(e instanceof Function&&3===e.length))throw new Error("newFilter must be a function taking three parameters");return this.pipeline=h.createWithSink(this.pipeline,e),this}sendRequest(e,t){let r=this;return t||"function"!=typeof e||(t=e,e={}),t?r._sendRequest(e,t):new Promise((t,n)=>{r._sendRequest(e,(e,r)=>{e?n(e):t(r)})})}sendRequestWithHttpOperationResponse(e){let t=this;return new Promise((r,n)=>{t._sendRequest(e,(e,t,i,o)=>{let s=new b(i,o);s.body=t,e?n(e):r(s)})})}addUserAgentInfo(e){-1===this.userAgentInfo.value.indexOf(e)&&this.userAgentInfo.value.push(e)}getPackageJsonInfo(e){let t={name:"NO_NAME",version:"0.0.0"},n=function _getLibPath(e,t){if(!(t<1))return e.endsWith("lib")||e.endsWith("lib"+y.sep)?e:_getLibPath(y.join(e,".."),t-1)}(e,2);if(n){let e=y.join(n,"..","package.json");if(v.existsSync(e)){let n=r(968)(e);t.name=n.name,t.version=n.version}}return t}}},function(e,t,r){"use strict";r(47);var n,i=r(59),o=r(23),s=r(21),a=r(5),c=r(44),u=r(1);function TunnelingAgent(e){var t=this;t.options=e||{},t.proxyOptions=t.options.proxy||{},t.maxSockets=t.options.maxSockets||o.Agent.defaultMaxSockets,t.requests=[],t.sockets=[],t.on("free",function onFree(e,r,n,i){for(var o=toOptions(r,n,i),s=0,a=t.requests.length;s<a;++s){var c=t.requests[s];if(c.host===o.host&&c.port===o.port)return t.requests.splice(s,1),void c.request.onSocket(e)}e.destroy(),t.removeSocket(e)})}function createSecureSocket(e,t){var r=this;TunnelingAgent.prototype.createSocket.call(r,e,function(n){var o=e.request.getHeader("host"),s=mergeOptions({},r.options,{socket:n,servername:o?o.replace(/:.*$/,""):e.host}),a=i.connect(0,s);r.sockets[r.sockets.indexOf(n)]=a,t(a)})}function toOptions(e,t,r){return"string"==typeof e?{host:e,port:t,localAddress:r}:e}function mergeOptions(e){for(var t=1,r=arguments.length;t<r;++t){var n=arguments[t];if("object"==typeof n)for(var i=Object.keys(n),o=0,s=i.length;o<s;++o){var a=i[o];void 0!==n[a]&&(e[a]=n[a])}}return e}t.httpOverHttp=function httpOverHttp(e){var t=new TunnelingAgent(e);return t.request=o.request,t},t.httpsOverHttp=function httpsOverHttp(e){var t=new TunnelingAgent(e);return t.request=o.request,t.createSocket=createSecureSocket,t},t.httpOverHttps=function httpOverHttps(e){var t=new TunnelingAgent(e);return t.request=s.request,t},t.httpsOverHttps=function httpsOverHttps(e){var t=new TunnelingAgent(e);return t.request=s.request,t.createSocket=createSecureSocket,t},u.inherits(TunnelingAgent,a.EventEmitter),TunnelingAgent.prototype.addRequest=function addRequest(e,t,r,n){var i=this,o=mergeOptions({request:e},i.options,toOptions(t,r,n));i.sockets.length>=this.maxSockets?i.requests.push(o):i.createSocket(o,function(t){function onFree(){i.emit("free",t,o)}function onCloseOrRemove(e){i.removeSocket(t),t.removeListener("free",onFree),t.removeListener("close",onCloseOrRemove),t.removeListener("agentRemove",onCloseOrRemove)}t.on("free",onFree),t.on("close",onCloseOrRemove),t.on("agentRemove",onCloseOrRemove),e.onSocket(t)})},TunnelingAgent.prototype.createSocket=function createSocket(e,t){var r=this,i={};r.sockets.push(i);var o=mergeOptions({},r.proxyOptions,{method:"CONNECT",path:e.host+":"+e.port,agent:!1});o.proxyAuth&&(o.headers=o.headers||{},o.headers["Proxy-Authorization"]="Basic "+new Buffer(o.proxyAuth).toString("base64")),n("making CONNECT request");var s=r.request(o);function onConnect(o,a,u){if(s.removeAllListeners(),a.removeAllListeners(),200===o.statusCode)c.equal(u.length,0),n("tunneling connection has established"),r.sockets[r.sockets.indexOf(i)]=a,t(a);else{n("tunneling socket could not be established, statusCode=%d",o.statusCode),a.destroy();var l=new Error("tunneling socket could not be established, statusCode="+o.statusCode);l.code="ECONNRESET",e.request.emit("error",l),r.removeSocket(i)}}s.useChunkedEncodingByDefault=!1,s.once("response",function onResponse(e){e.upgrade=!0}),s.once("upgrade",function onUpgrade(e,t,r){process.nextTick(function(){onConnect(e,t,r)})}),s.once("connect",onConnect),s.once("error",function onError(t){s.removeAllListeners(),n("tunneling socket could not be established, cause=%s\n",t.message,t.stack);var o=new Error("tunneling socket could not be established, cause="+t.message);o.code="ECONNRESET",e.request.emit("error",o),r.removeSocket(i)}),s.end()},TunnelingAgent.prototype.removeSocket=function removeSocket(e){var t=this.sockets.indexOf(e);if(-1!==t){this.sockets.splice(t,1);var r=this.requests.shift();r&&this.createSocket(r,function(e){r.request.onSocket(e)})}},n=process.env.NODE_DEBUG&&/\btunnel\b/.test(process.env.NODE_DEBUG)?function(){var e=Array.prototype.slice.call(arguments);"string"==typeof e[0]?e[0]="TUNNEL: "+e[0]:e.unshift("TUNNEL:"),console.error.apply(console,e)}:function(){},t.debug=n},function(e,t,r){"use strict";var n=r(7);t.create=function(e){return function handle(t,r,i){var o=0;return r(t,function handleRedirect(s,a,c){if(a&&a.headers&&a.headers.location&&(307===a.statusCode||303===a.statusCode&&"POST"===t.method)&&(!e||o<e)){if(o++,n.parse(a.headers.location).hostname)t.url=a.headers.location;else{var u=n.parse(t.url);u.pathname=a.headers.location,t.url=n.format(u)}303===a.statusCode&&(t.method="GET"),r(t,handleRedirect)}else i&&i(s,a,c)})}}},function(e,t,r){"use strict";var n=r(69);function shouldRetry(e){if(!e)throw new Error("retryData for the SystemErrorRetryPolicyFilter cannot be null.");return(e&&e.retryCount)<this.retryCount}function updateRetryData(e,t){e||(e={retryCount:0,error:null}),t&&(e.error&&(t.innerError=e.error),e.error=t),e.retryCount++;var r=Math.pow(2,e.retryCount)-1;return r*=.8*this.retryInterval+Math.floor(Math.random()*(1.2*this.retryInterval-.8*this.retryInterval)),e.retryInterval=Math.min(this.minRetryInterval+r,this.maxRetryInterval),e}function SystemErrorRetryPolicyFilter(e,t,r,i){function newFilter(e,t,r){var i=null;return t(e,function retryCallback(o,s,a){i=newFilter.updateRetryData(i,o),n.objectIsNull(o)||!newFilter.shouldRetry(i,o)||"ETIMEDOUT"!==o.code&&"ESOCKETTIMEDOUT"!==o.code&&"ECONNREFUSED"!==o.code&&"ECONNRESET"!==o.code?(n.objectIsNull(o)||(o=i.error),r(o,s,a)):setTimeout(function(){t(e,retryCallback)},i.retryInterval)})}return newFilter.retryCount=isNaN(parseInt(e))?SystemErrorRetryPolicyFilter.prototype.DEFAULT_CLIENT_RETRY_COUNT:e,newFilter.retryInterval=isNaN(parseInt(t))?SystemErrorRetryPolicyFilter.prototype.DEFAULT_CLIENT_RETRY_INTERVAL:t,newFilter.minRetryInterval=isNaN(parseInt(r))?SystemErrorRetryPolicyFilter.prototype.DEFAULT_CLIENT_MIN_RETRY_INTERVAL:r,newFilter.maxRetryInterval=isNaN(parseInt(i))?SystemErrorRetryPolicyFilter.prototype.DEFAULT_CLIENT_MAX_RETRY_INTERVAL:i,newFilter.shouldRetry=shouldRetry,newFilter.updateRetryData=updateRetryData,newFilter}SystemErrorRetryPolicyFilter.prototype.DEFAULT_CLIENT_RETRY_INTERVAL=3e4,SystemErrorRetryPolicyFilter.prototype.DEFAULT_CLIENT_RETRY_COUNT=3,SystemErrorRetryPolicyFilter.prototype.DEFAULT_CLIENT_MAX_RETRY_INTERVAL=9e4,SystemErrorRetryPolicyFilter.prototype.DEFAULT_CLIENT_MIN_RETRY_INTERVAL=3e3,e.exports=SystemErrorRetryPolicyFilter},function(e){e.exports={_args:[["ms-rest@2.5.0","/home/travis/build/microsoft/vscode-azure-iot-toolkit"]],_from:"ms-rest@2.5.0",_id:"ms-rest@2.5.0",_inBundle:!1,_integrity:"sha512-QUTg9CsmWpofDO0MR37z8B28/T9ObpQ+FM23GGDMKXw8KYDJ3cEBdK6dJTDDrtSoZG3U+S/vdmSEwJ7FNj6Kog==",_location:"/azure-arm-eventhub/ms-rest",_phantomChildren:{},_requested:{type:"version",registry:!0,raw:"ms-rest@2.5.0",name:"ms-rest",escapedName:"ms-rest",rawSpec:"2.5.0",saveSpec:null,fetchSpec:"2.5.0"},_requiredBy:["/azure-arm-eventhub"],_resolved:"https://registry.npmjs.org/ms-rest/-/ms-rest-2.5.0.tgz",_spec:"2.5.0",_where:"/home/travis/build/microsoft/vscode-azure-iot-toolkit",author:{name:"Microsoft Corporation",email:"azsdkteam@microsoft.com",url:"https://github.com/Azure/azure-sdk-for-node"},bugs:{url:"http://github.com/Azure/azure-sdk-for-node/issues"},dependencies:{duplexer:"^0.1.1","is-buffer":"^1.1.6","is-stream":"^1.1.0",moment:"^2.21.0",request:"^2.88.0",through:"^2.3.8",tunnel:"0.0.5",uuid:"^3.2.1"},description:"Client Runtime for Node.js client libraries generated using AutoRest",devDependencies:{"@types/mocha":"^2.2.40","@types/node":"^8.9.4","@types/request":"^2.47.0","@types/should":"^8.1.30","@types/uuid":"^3.4.3",jshint:"^2.9.5",mocha:"^5.2.0",should:"5.2.0"},homepage:"https://github.com/Azure/azure-sdk-for-node/runtime/ms-rest",keywords:["node","microsoft","autorest","clientruntime"],license:"MIT",main:"./lib/msRest.js",name:"ms-rest",repository:{type:"git",url:"git+ssh://git@github.com/Azure/azure-sdk-for-node.git"},scripts:{jshint:"jshint lib --reporter=jslint",test:"npm install && npm run jshint && npm run unit",unit:"node test/unit.js testlist.txt"},tags:["node","microsoft","autorest","clientruntime"],types:"./index.d.ts",version:"2.5.0"}},function(e,t){function webpackEmptyContext(e){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}webpackEmptyContext.keys=function(){return[]},webpackEmptyContext.resolve=webpackEmptyContext,e.exports=webpackEmptyContext,webpackEmptyContext.id=968},function(e,t,r){"use strict";const n=r(70).HeaderConstants,i="Bearer";e.exports=class TokenCredentials{constructor(e,t){if(!e)throw new Error("token cannot be null.");this.token=e,this.authorizationScheme=t,this.authorizationScheme||(this.authorizationScheme=i)}signRequest(e,t){return e.headers[n.AUTHORIZATION]=`${this.authorizationScheme} ${this.token}`,t(null)}}},function(e,t,r){"use strict";const n=r(70).HeaderConstants,i="Basic";e.exports=class BasicAuthenticationCredentials{constructor(e,t,r){if(null==e||"string"!=typeof e.valueOf())throw new Error("userName cannot be null or undefined and must be of type string.");if(null==t||"string"!=typeof t.valueOf())throw new Error("password cannot be null or undefined and must be of type string.");this.userName=e,this.password=t,this.authorizationScheme=r,this.authorizationScheme||(this.authorizationScheme=i)}signRequest(e,t){let r=`${this.userName}:${this.password}`,i=`${this.authorizationScheme} ${Buffer.from(r).toString("base64")}`;return e.headers[n.AUTHORIZATION]=i,t(null)}}},function(e,t,r){"use strict";e.exports=class ApiKeyCredentials{constructor(e){if(!e||e&&!e.inHeader&&!e.inQuery)throw new Error('options cannot be null or undefined. Either "inHeader" or "inQuery" property of the options object needs to be provided.');this.inHeader=e.inHeader,this.inQuery=e.inQuery}signRequest(e,t){if(!e)return t(new Error('webResource cannot be null or undefined and must be of type "object".'));if(this.inHeader){e.headers||(e.headers={});for(let t in this.inHeader)e.headers[t]=this.inHeader[t]}if(this.inQuery){if(!e.url)return t(new Error("url cannot be null in the request object."));e.url.indexOf("?")<0&&(e.url+="?");for(let t in this.inQuery)e.url.endsWith("?")||(e.url+="&"),e.url+=`${t}=${this.inQuery[t]}`}return t(null)}}},function(e,t,r){"use strict";t.create=function(e){var t=e?e.log:console.log;return function handle(e,r,n){return t("logFilter, request: %s",JSON.stringify(e,null,2)),r(e,function(e,r,i){return e?(t("Error from response, message: "+e.message),n(e)):(t("Response status code: "+r.statusCode),t("Body: "+i),n(e,r,i))})}}},function(e,t,r){"use strict";const n=r(7),i=r(72),o=r(425),s=r(426),a=r(974),c=r(427),u=r(428),l=r(429),p=r(975),d=r(430),h=r(237),f=r(424),m=r(101),g=r(71),y=r(6),v=r(11),b=r(431),_=r(976),w=_.name,E=_.version;function _sendRequest(e,t){if(null==e||"object"!=typeof e)throw new Error("options cannot be null or undefined and it must be of type object.");if(null==t)throw new Error("callback cannot be null or undefined.");let r=null;try{e instanceof f?(e.validateRequestProperties(),r=e):r=(r=new f).prepare(e)}catch(e){return t(e)}this.pipeline(r,(n,i,o)=>{let s,a;""===o&&(o=null);try{s=JSON.parse(o),a=JSON.parse(o),null!=s&&e.deserializationMapper&&(a=m.deserialize(e.deserializationMapper,s,"result"))}catch(e){let n=`An error occurred while deserializing the responseBody ${o}. The error is:\n ${JSON.stringify(e,null,2)}.`;return n.request=r,n.response=i,n.statusCode=i.statusCode,t(n)}return t(n,a,r,i)})}function _loadEnvironmentProxyValue(){let e=null;return process.env[i.HTTPS_PROXY]?e=process.env[i.HTTPS_PROXY]:process.env[i.HTTPS_PROXY.toLowerCase()]?e=process.env[i.HTTPS_PROXY.toLowerCase()]:process.env[i.HTTP_PROXY]?e=process.env[i.HTTP_PROXY]:process.env[i.HTTP_PROXY.toLowerCase()]&&(e=process.env[i.HTTP_PROXY.toLowerCase()]),e}function _setDefaultProxy(){let e=this._loadEnvironmentProxyValue();if(e){let t=n.parse(e);t.port||(t.port=80),this.pipeline=h.createWithSink(this.pipeline,o.create({host:t.hostname,port:t.port,protocol:t.protocol},g.urlIsHTTPS(t)))}}e.exports=class ServiceClient{constructor(e,t){if(t||(t={}),t.requestOptions||(t.requestOptions={}),t.filters||(t.filters=[]),this.userAgentInfo={value:[]},e&&!e.signRequest)throw new Error("credentials argument needs to implement signRequest method");this.addUserAgentInfo(`${w}/${E}`),e&&t.filters.push(c.create(e)),t.filters.push(u.create()),t.filters.push(s.create(this.userAgentInfo.value)),t.filters.push(a.create()),t.filters.push(d.create(t.rpRegistrationRetryTimeout)),t.noRetryPolicy||(t.filters.push(new l),t.filters.push(new p)),this.pipeline=h.create(t.requestOptions).apply(h,t.filters),this._sendRequest=_sendRequest,this._setDefaultProxy=_setDefaultProxy,this._loadEnvironmentProxyValue=_loadEnvironmentProxyValue,this._setDefaultProxy()}addFilter(e){if(!e)throw new Error("No filter passed");if(!(e instanceof Function&&3===e.length))throw new Error("newFilter must be a function taking three parameters");return this.pipeline=h.createWithSink(this.pipeline,e),this}sendRequest(e,t){let r=this;return t||"function"!=typeof e||(t=e,e={}),t?r._sendRequest(e,t):new Promise((t,n)=>{r._sendRequest(e,(e,r)=>{e?n(e):t(r)})})}sendRequestWithHttpOperationResponse(e){let t=this;return new Promise((r,n)=>{t._sendRequest(e,(e,t,i,o)=>{let s=new b(i,o);s.body=t,e?n(e):r(s)})})}addUserAgentInfo(e){-1===this.userAgentInfo.value.indexOf(e)&&this.userAgentInfo.value.push(e)}getPackageJsonInfo(e){let t={name:"NO_NAME",version:"0.0.0"},n=function _getLibPath(e,t){if(!(t<1))return e.endsWith("lib")||e.endsWith("lib"+y.sep)?e:_getLibPath(y.join(e,".."),t-1)}(e,2);if(n){let e=y.join(n,"..","package.json");if(v.existsSync(e)){let n=r(977)(e);t.name=n.name,t.version=n.version}}return t}}},function(e,t,r){"use strict";var n=r(7);t.create=function(e){return function handle(t,r,i){var o=0;return r(t,function handleRedirect(s,a,c){if(a&&a.headers&&a.headers.location&&(307===a.statusCode||303===a.statusCode&&"POST"===t.method)&&(!e||o<e)){if(o++,n.parse(a.headers.location).hostname)t.url=a.headers.location;else{var u=n.parse(t.url);u.pathname=a.headers.location,t.url=n.format(u)}303===a.statusCode&&(t.method="GET"),r(t,handleRedirect)}else i&&i(s,a,c)})}}},function(e,t,r){"use strict";var n=r(71);function shouldRetry(e){if(!e)throw new Error("retryData for the SystemErrorRetryPolicyFilter cannot be null.");return(e&&e.retryCount)<this.retryCount}function updateRetryData(e,t){e||(e={retryCount:0,error:null}),t&&(e.error&&(t.innerError=e.error),e.error=t),e.retryCount++;var r=Math.pow(2,e.retryCount)-1;return r*=.8*this.retryInterval+Math.floor(Math.random()*(1.2*this.retryInterval-.8*this.retryInterval)),e.retryInterval=Math.min(this.minRetryInterval+r,this.maxRetryInterval),e}function SystemErrorRetryPolicyFilter(e,t,r,i){function newFilter(e,t,r){var i=null;return t(e,function retryCallback(o,s,a){i=newFilter.updateRetryData(i,o),n.objectIsNull(o)||!newFilter.shouldRetry(i,o)||"ETIMEDOUT"!==o.code&&"ESOCKETTIMEDOUT"!==o.code&&"ECONNREFUSED"!==o.code&&"ECONNRESET"!==o.code?(n.objectIsNull(o)||(o=i.error),r(o,s,a)):setTimeout(function(){t(e,retryCallback)},i.retryInterval)})}return newFilter.retryCount=isNaN(parseInt(e))?SystemErrorRetryPolicyFilter.prototype.DEFAULT_CLIENT_RETRY_COUNT:e,newFilter.retryInterval=isNaN(parseInt(t))?SystemErrorRetryPolicyFilter.prototype.DEFAULT_CLIENT_RETRY_INTERVAL:t,newFilter.minRetryInterval=isNaN(parseInt(r))?SystemErrorRetryPolicyFilter.prototype.DEFAULT_CLIENT_MIN_RETRY_INTERVAL:r,newFilter.maxRetryInterval=isNaN(parseInt(i))?SystemErrorRetryPolicyFilter.prototype.DEFAULT_CLIENT_MAX_RETRY_INTERVAL:i,newFilter.shouldRetry=shouldRetry,newFilter.updateRetryData=updateRetryData,newFilter}SystemErrorRetryPolicyFilter.prototype.DEFAULT_CLIENT_RETRY_INTERVAL=3e4,SystemErrorRetryPolicyFilter.prototype.DEFAULT_CLIENT_RETRY_COUNT=3,SystemErrorRetryPolicyFilter.prototype.DEFAULT_CLIENT_MAX_RETRY_INTERVAL=9e4,SystemErrorRetryPolicyFilter.prototype.DEFAULT_CLIENT_MIN_RETRY_INTERVAL=3e3,e.exports=SystemErrorRetryPolicyFilter},function(e){e.exports={_args:[["ms-rest@2.3.8","/home/travis/build/microsoft/vscode-azure-iot-toolkit"]],_from:"ms-rest@2.3.8",_id:"ms-rest@2.3.8",_inBundle:!1,_integrity:"sha512-8kaerSPk0Z9W6z8VnJXjKOHDaGGXbsGyO22X4DFtlllzbYLryWo0Dor+jnIKpgvUOzQKSoLW2fel81piG3LnHQ==",_location:"/ms-rest",_phantomChildren:{},_requested:{type:"version",registry:!0,raw:"ms-rest@2.3.8",name:"ms-rest",escapedName:"ms-rest",rawSpec:"2.3.8",saveSpec:null,fetchSpec:"2.3.8"},_requiredBy:["/","/azure-arm-iothub","/azure-arm-resource","/ms-rest-azure"],_resolved:"https://registry.npmjs.org/ms-rest/-/ms-rest-2.3.8.tgz",_spec:"2.3.8",_where:"/home/travis/build/microsoft/vscode-azure-iot-toolkit",author:{name:"Microsoft Corporation",email:"azsdkteam@microsoft.com",url:"https://github.com/Azure/azure-sdk-for-node"},bugs:{url:"http://github.com/Azure/azure-sdk-for-node/issues"},dependencies:{duplexer:"^0.1.1","is-buffer":"^1.1.6","is-stream":"^1.1.0",moment:"^2.21.0",request:"^2.88.0",through:"^2.3.8",tunnel:"0.0.5",uuid:"^3.2.1"},description:"Client Runtime for Node.js client libraries generated using AutoRest",devDependencies:{"@types/mocha":"^2.2.40","@types/node":"^8.9.4","@types/request":"^2.47.0","@types/should":"^8.1.30","@types/uuid":"^3.4.3",jshint:"^2.9.5",mocha:"^5.2.0",should:"5.2.0"},homepage:"https://github.com/Azure/azure-sdk-for-node/runtime/ms-rest",keywords:["node","microsoft","autorest","clientruntime"],license:"MIT",main:"./lib/msRest.js",name:"ms-rest",repository:{type:"git",url:"git+ssh://git@github.com/Azure/azure-sdk-for-node.git"},scripts:{jshint:"jshint lib --reporter=jslint",test:"npm install && npm run jshint && npm run unit",unit:"node test/unit.js testlist.txt"},tags:["node","microsoft","autorest","clientruntime"],types:"./index.d.ts",version:"2.3.8"}},function(e,t){function webpackEmptyContext(e){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}webpackEmptyContext.keys=function(){return[]},webpackEmptyContext.resolve=webpackEmptyContext,e.exports=webpackEmptyContext,webpackEmptyContext.id=977},function(e,t,r){"use strict";const n=r(72).HeaderConstants,i="Bearer";e.exports=class TokenCredentials{constructor(e,t){if(!e)throw new Error("token cannot be null.");this.token=e,this.authorizationScheme=t,this.authorizationScheme||(this.authorizationScheme=i)}signRequest(e,t){return e.headers[n.AUTHORIZATION]=`${this.authorizationScheme} ${this.token}`,t(null)}}},function(e,t,r){"use strict";const n=r(72).HeaderConstants,i="Basic";e.exports=class BasicAuthenticationCredentials{constructor(e,t,r){if(null==e||"string"!=typeof e.valueOf())throw new Error("userName cannot be null or undefined and must be of type string.");if(null==t||"string"!=typeof t.valueOf())throw new Error("password cannot be null or undefined and must be of type string.");this.userName=e,this.password=t,this.authorizationScheme=r,this.authorizationScheme||(this.authorizationScheme=i)}signRequest(e,t){let r=`${this.userName}:${this.password}`,i=`${this.authorizationScheme} ${Buffer.from(r).toString("base64")}`;return e.headers[n.AUTHORIZATION]=i,t(null)}}},function(e,t,r){"use strict";e.exports=class ApiKeyCredentials{constructor(e){if(!e||e&&!e.inHeader&&!e.inQuery)throw new Error('options cannot be null or undefined. Either "inHeader" or "inQuery" property of the options object needs to be provided.');this.inHeader=e.inHeader,this.inQuery=e.inQuery}signRequest(e,t){if(!e)return t(new Error('webResource cannot be null or undefined and must be of type "object".'));if(this.inHeader){e.headers||(e.headers={});for(let t in this.inHeader)e.headers[t]=this.inHeader[t]}if(this.inQuery){if(!e.url)return t(new Error("url cannot be null in the request object."));e.url.indexOf("?")<0&&(e.url+="?");for(let t in this.inQuery)e.url.endsWith("?")||(e.url+="&"),e.url+=`${t}=${this.inQuery[t]}`}return t(null)}}},function(e,t,r){"use strict";t.create=function(e){var t=e?e.log:console.log;return function handle(e,r,n){return t("logFilter, request: %s",JSON.stringify(e,null,2)),r(e,function(e,r,i){return e?(t("Error from response, message: "+e.message),n(e)):(t("Response status code: "+r.statusCode),t("Body: "+i),n(e,r,i))})}}},function(e,t,r){"use strict";const n=r(8),i=r(167).LongRunningOperationStates;e.exports=class PollingState{constructor(e,t){null==t&&(t=30),this._retryTimeout=t,this.updateResponse(e.response),this.request=e.request;try{e.body&&"string"==typeof e.body.valueOf()&&e.body.length>0?this.resource=JSON.parse(e.body):this.resource=e.body}catch(t){let r=new Error(`Error "${t}" occurred in parsing the responseBody ' +\n        'while creating the PollingState for Long Running Operation- "${e.body}"`);throw r.request=e.request,r.response=e.response,r}switch(this.response.statusCode){case 202:this.status=i.InProgress;break;case 204:this.status=i.Succeeded;break;case 201:this.resource&&this.resource.properties&&this.resource.properties.provisioningState?this.status=this.resource.properties.provisioningState:this.status=i.InProgress;break;case 200:this.resource&&this.resource.properties&&this.resource.properties.provisioningState?this.status=this.resource.properties.provisioningState:this.status=i.Succeeded;break;default:this.status=i.Failed}}getTimeout(){return this._retryTimeout||0===this._retryTimeout?1e3*this._retryTimeout:this.response&&this.response.headers["retry-after"]?1e3*parseInt(this.response.headers["retry-after"]):3e4}updateResponse(e){this.response=e,e&&e.headers&&(e.headers["azure-asyncoperation"]&&(this.azureAsyncOperationHeaderLink=e.headers["azure-asyncoperation"]),e.headers.location&&(this.locationHeaderLink=e.headers.location))}getOperationResponse(){let e=new n.HttpOperationResponse;return e.request=this.request,e.response=this.response,this.resource&&"string"==typeof this.resource.valueOf()?e.body=this.resource:e.body=JSON.stringify(this.resource),e}getCloudError(e){let t,r,i=new Error;i.request=n.stripRequest(this.request);let o=this.response.body;i.response=n.stripResponse(this.response);try{this.response.body&&"string"==typeof this.response.body.valueOf()&&(""===this.response.body&&(this.response.body=null),o=JSON.parse(this.response.body))}catch(e){return i.message=`Error "${e.message}" occurred while deserializing the error `+`message "${this.response.body}" for long running operation.`,i}return t=e&&e.message?`Long running operation failed with error: "${e.message}".`:`Long running operation failed with status: "${this.status}".`,o&&(o.error&&o.error.message&&(t=`Long running operation failed with error: "${o.error.message}".`),o.error&&o.error.code&&(r=o.error.code)),i.message=t,r&&(i.code=r),i.body=o,i}}},function(e){e.exports={_args:[["ms-rest-azure@2.5.9","/home/travis/build/microsoft/vscode-azure-iot-toolkit"]],_from:"ms-rest-azure@2.5.9",_id:"ms-rest-azure@2.5.9",_inBundle:!1,_integrity:"sha512-qonobzWLS7Jl6qwgTuA/SfyCtnv7olvCRKrcF8nzXSj68ds4Oj3K64ntzgQajroKa0hKVMcPUFbTk1IYMGvu8w==",_location:"/ms-rest-azure",_phantomChildren:{},_requested:{type:"version",registry:!0,raw:"ms-rest-azure@2.5.9",name:"ms-rest-azure",escapedName:"ms-rest-azure",rawSpec:"2.5.9",saveSpec:null,fetchSpec:"2.5.9"},_requiredBy:["/","/azure-arm-eventhub","/azure-arm-iothub","/azure-arm-resource"],_resolved:"https://registry.npmjs.org/ms-rest-azure/-/ms-rest-azure-2.5.9.tgz",_spec:"2.5.9",_where:"/home/travis/build/microsoft/vscode-azure-iot-toolkit",author:{name:"Microsoft Corporation",email:"azsdkteam@microsoft.com",url:"https://github.com/Azure/azure-sdk-for-node"},bugs:{url:"http://github.com/Azure/azure-sdk-for-node/issues"},dependencies:{"adal-node":"^0.1.28",async:"2.6.0",moment:"^2.22.2","ms-rest":"^2.3.2",request:"^2.88.0",uuid:"^3.2.1"},description:"Client Runtime for Node.js Azure client libraries generated using AutoRest",devDependencies:{"@types/mocha":"^2.2.40","@types/node":"^9.4.6","@types/should":"^8.1.30","@types/uuid":"^3.4.3",jshint:"^2.9.5",mocha:"^5.2.0",nock:"^9.3.2",should:"5.2.0",sinon:"^2.3.8",typescript:"^2.7.2"},homepage:"https://github.com/Azure/azure-sdk-for-node/runtime/ms-rest-azure",keywords:["node","microsoft","autorest","azure","clientruntime"],license:"MIT",main:"./lib/msRestAzure.js",name:"ms-rest-azure",repository:{type:"git",url:"git+ssh://git@github.com/Azure/azure-sdk-for-node.git"},scripts:{jshint:"jshint lib --reporter=jslint",test:"npm install && npm -s run-script tsc && npm -s run-script jshint && npm -s run-script unit",tsc:"tsc index.d.ts",unit:"node test/unit.js testlist.txt"},tags:["node","microsoft","autorest","azure","clientruntime"],types:"./index.d.ts",version:"2.5.9"}},function(e,t,r){"use strict";const n=r(8).ApiKeyCredentials;e.exports=class CognitiveServicesCredentials extends n{constructor(e){if(!e||e&&"string"!=typeof e.valueOf())throw new Error("subscriptionKey cannot be null or undefined and must be of type string.");super({inHeader:{"Ocp-Apim-Subscription-Key":e,"X-BingApis-SDK-Client":"node-SDK"}})}}},function(e,t,r){"use strict";const n=r(8).ApiKeyCredentials;e.exports=class TopicCredentials extends n{constructor(e){if(!e||e&&"string"!=typeof e.valueOf())throw new Error("topicKey cannot be null or undefined and must be of type string.");super({inHeader:{"aeg-sas-key":e}})}}},function(e,t,r){"use strict";const n=r(7),i=r(8),o=r(239),s=r(238),a=r(240),c=r(168),u=r(241),l=r(242),p=r(79).AuthenticationContext;let d=i.Constants.HeaderConstants,h=i.requestPipeline;function KeyVaultCredentials(e,t){if(this.challengeCache=[],this.authenticator=e,!this.authenticator&&!t)throw new Error("Either the authenticator callback or a valid credentials must be provided.");if(t instanceof l)this.credentials=new l({msiEndpoint:t.msiEndpoint,msiSecret:t.msiSecret,msiApiVersion:t.msiApiVersion,resource:t.resource});else if(t instanceof u)this.credentials=new u({resource:t.resource,port:t.port});else{if(t instanceof c)throw new Error("MSI-credentials not one of: MSIVmTokenCredentials, MSIAppServiceTokenCredentials");this.credentials=t}this.authenticator||(this.authenticator=function authenticatorMapper(e){return function(t,r){function _formAuthorizationValue(e,t){if(e)return r(e);var n=t.tokenType+" "+t.accessToken;return r(null,n)}let n=new p(t.authorization,!0,e.context&&e.context.cache);return e instanceof o?n.acquireTokenWithClientCredentials(t.resource,e.clientId,e.secret,_formAuthorizationValue):e instanceof s?n.acquireTokenWithUsernamePassword(t.resource,e.username,e.password,e.clientId,_formAuthorizationValue):e instanceof a?n.acquireToken(t.resource,e.username,e.clientId,_formAuthorizationValue):e instanceof c?e.getToken(_formAuthorizationValue):void r(new Error("credentials must be one of: ApplicationTokenCredentials, UserTokenCredentials, DeviceTokenCredentials, MSITokenCredentials"))}}(this.credentials))}function getAuthority(e){var t=n.parse(e,!0,!0),r=t.protocol?t.protocol:":",i=t.host,o=r;return t.slashes&&(o+="//"),o+=i}KeyVaultCredentials.prototype.signRequest=function(e,t){t(null)},KeyVaultCredentials.prototype.createSigningFilter=function(){var e=this;return function(t,r,n){var i=function(i,o,s){return o&&401===o.statusCode&&o.headers?e.handleUnauthorized(t,r,i,o,s,n):n(i,o,s)},o=e.getCachedChallenge(t);return o?h.interimStream(function(s,a){s.pause(),e.authenticator(o,function(e,o){if(e)return s.resume(),n(e);o&&(t.headers[d.AUTHORIZATION]=o);var c=r(t,i);t.pipeInput(s,c).pipe(a),s.resume()})}):r(t,i)}},KeyVaultCredentials.prototype.handleUnauthorized=function(e,t,r,n,i,o){var s=n.headers["www-authenticate"],a=s?function parseAuthorizationHeader(e){if(!e)return null;var t=e.match(/^(\w+)(?:\s+(.*))?$/);if(!t)return null;if("bearer"!==t[1].toLowerCase())return null;var r=t[2];if(!r)return null;for(var n={},i=r.split(","),o=0;o<i.length;++o){var s=i[o],a=s.indexOf("="),c=s.substring(0,a).trim(),u=s.substring(a+1).trim();n[c]=JSON.parse('{"value":'+u+"}").value}return n}(s):null;if(!a||!a.authorization||!a.resource)return o(r,n,i);this.addChallengeToCache(e,a);return this.authenticator(a,function(r,n){return r?o(r):(n&&(e.headers[d.AUTHORIZATION]=n),t(e,o))})},KeyVaultCredentials.prototype.getCachedChallenge=function(e){var t=getAuthority(e.url);return this.challengeCache[t]},KeyVaultCredentials.prototype.addChallengeToCache=function(e,t){var r=getAuthority(e.url);this.challengeCache[r]=t},e.exports=KeyVaultCredentials},function(e,t,r){"use strict";const n=r(8),i=r(423),o=r(988),s=r(993);e.exports=class SubscriptionClient extends i{constructor(e,t,r){if(null==e)throw new Error("'credentials' cannot be null.");r||(r={}),super(e,r),this.apiVersion="2016-06-01",this.acceptLanguage="en-US",this.longRunningOperationRetryTimeout=30,this.generateClientRequestId=!0,this.baseUri=t,this.baseUri||(this.baseUri="https://management.azure.com"),this.credentials=e;let i=this.getPackageJsonInfo(__dirname);this.addUserAgentInfo(`${i.name}/${i.version}`),null!==r.apiVersion&&void 0!==r.apiVersion&&(this.apiVersion=r.apiVersion),null!==r.acceptLanguage&&void 0!==r.acceptLanguage&&(this.acceptLanguage=r.acceptLanguage),null!==r.longRunningOperationRetryTimeout&&void 0!==r.longRunningOperationRetryTimeout&&(this.longRunningOperationRetryTimeout=r.longRunningOperationRetryTimeout),null!==r.generateClientRequestId&&void 0!==r.generateClientRequestId&&(this.generateClientRequestId=r.generateClientRequestId),this.subscriptions=new s.Subscriptions(this),this.tenants=new s.Tenants(this),this.models=o,n.addSerializationMixin(this)}}},function(e,t,r){"use strict";t.BaseResource=r(432),t.CloudError=r(433),t.Location=r(989),t.LocationListResult=r(434),t.SubscriptionPolicies=r(990),t.Subscription=r(991),t.SubscriptionListResult=r(435),t.TenantIdDescription=r(992),t.TenantListResult=r(436),t.LocationListResult=r(434),t.SubscriptionListResult=r(435),t.TenantListResult=r(436)},function(e,t,r){"use strict";e.exports=class Location{constructor(){}mapper(){return{required:!1,serializedName:"Location",type:{name:"Composite",className:"Location",modelProperties:{id:{required:!1,readOnly:!0,serializedName:"id",type:{name:"String"}},subscriptionId:{required:!1,readOnly:!0,serializedName:"subscriptionId",type:{name:"String"}},name:{required:!1,readOnly:!0,serializedName:"name",type:{name:"String"}},displayName:{required:!1,readOnly:!0,serializedName:"displayName",type:{name:"String"}},latitude:{required:!1,readOnly:!0,serializedName:"latitude",type:{name:"String"}},longitude:{required:!1,readOnly:!0,serializedName:"longitude",type:{name:"String"}}}}}}}},function(e,t,r){"use strict";e.exports=class SubscriptionPolicies{constructor(){}mapper(){return{required:!1,serializedName:"SubscriptionPolicies",type:{name:"Composite",className:"SubscriptionPolicies",modelProperties:{locationPlacementId:{required:!1,readOnly:!0,serializedName:"locationPlacementId",type:{name:"String"}},quotaId:{required:!1,readOnly:!0,serializedName:"quotaId",type:{name:"String"}},spendingLimit:{required:!1,readOnly:!0,serializedName:"spendingLimit",type:{name:"Enum",allowedValues:["On","Off","CurrentPeriodOff"]}}}}}}}},function(e,t,r){"use strict";e.exports=class Subscription{constructor(){}mapper(){return{required:!1,serializedName:"Subscription",type:{name:"Composite",className:"Subscription",modelProperties:{id:{required:!1,readOnly:!0,serializedName:"id",type:{name:"String"}},subscriptionId:{required:!1,readOnly:!0,serializedName:"subscriptionId",type:{name:"String"}},tenantId:{required:!1,readOnly:!0,serializedName:"tenantId",type:{name:"String"}},displayName:{required:!1,readOnly:!0,serializedName:"displayName",type:{name:"String"}},state:{required:!1,readOnly:!0,serializedName:"state",type:{name:"Enum",allowedValues:["Enabled","Warned","PastDue","Disabled","Deleted"]}},subscriptionPolicies:{required:!1,serializedName:"subscriptionPolicies",type:{name:"Composite",className:"SubscriptionPolicies"}},authorizationSource:{required:!1,serializedName:"authorizationSource",type:{name:"String"}}}}}}}},function(e,t,r){"use strict";e.exports=class TenantIdDescription{constructor(){}mapper(){return{required:!1,serializedName:"TenantIdDescription",type:{name:"Composite",className:"TenantIdDescription",modelProperties:{id:{required:!1,readOnly:!0,serializedName:"id",type:{name:"String"}},tenantId:{required:!1,readOnly:!0,serializedName:"tenantId",type:{name:"String"}}}}}}}},function(e,t,r){"use strict";t.Subscriptions=r(994),t.Tenants=r(995)},function(e,t,r){"use strict";const n=r(8),i=r(243),o=n.WebResource;function _listLocations(e,t,r){let s=this.client;if(r||"function"!=typeof t||(r=t,t=null),!r)throw new Error("callback cannot be null.");try{if(null==e||"string"!=typeof e.valueOf())throw new Error("subscriptionId cannot be null or undefined and it must be of type string.");if(null===this.client.apiVersion||void 0===this.client.apiVersion||"string"!=typeof this.client.apiVersion.valueOf())throw new Error("this.client.apiVersion cannot be null or undefined and it must be of type string.");if(null!==this.client.acceptLanguage&&void 0!==this.client.acceptLanguage&&"string"!=typeof this.client.acceptLanguage.valueOf())throw new Error("this.client.acceptLanguage must be of type string.")}catch(e){return r(e)}let a=this.client.baseUri,c=a+(a.endsWith("/")?"":"/")+"subscriptions/{subscriptionId}/locations";c=c.replace("{subscriptionId}",encodeURIComponent(e));let u=[];u.push("api-version="+encodeURIComponent(this.client.apiVersion)),u.length>0&&(c+="?"+u.join("&"));let l=new o;if(l.method="GET",l.headers={},l.url=c,this.client.generateClientRequestId&&(l.headers["x-ms-client-request-id"]=i.generateUuid()),void 0!==this.client.acceptLanguage&&null!==this.client.acceptLanguage&&(l.headers["accept-language"]=this.client.acceptLanguage),t)for(let e in t.customHeaders)t.customHeaders.hasOwnProperty(e)&&(l.headers[e]=t.customHeaders[e]);return l.headers["Content-Type"]="application/json; charset=utf-8",l.body=null,s.pipeline(l,(e,t,i)=>{if(e)return r(e);let o=t.statusCode;if(200!==o){let e,o=new Error(i);o.statusCode=t.statusCode,o.request=n.stripRequest(l),o.response=n.stripResponse(t),""===i&&(i=null);try{if((e=JSON.parse(i))&&(e.error&&(e=e.error),e.code&&(o.code=e.code),e.message&&(o.message=e.message)),null!=e){let t=(new s.models.CloudError).mapper();o.body=s.deserialize(t,e,"error.body")}}catch(e){return o.message=`Error "${e.message}" occurred in deserializing the responseBody `+`- "${i}" for the default response.`,r(o)}return r(o)}let a=null;if(""===i&&(i=null),200===o){let e=null;try{if(e=JSON.parse(i),a=JSON.parse(i),null!=e){let t=(new s.models.LocationListResult).mapper();a=s.deserialize(t,e,"result")}}catch(e){let o=new Error(`Error ${e} occurred in deserializing the responseBody - ${i}`);return o.request=n.stripRequest(l),o.response=n.stripResponse(t),r(o)}}return r(null,a,l,t)})}function _get(e,t,r){let s=this.client;if(r||"function"!=typeof t||(r=t,t=null),!r)throw new Error("callback cannot be null.");try{if(null==e||"string"!=typeof e.valueOf())throw new Error("subscriptionId cannot be null or undefined and it must be of type string.");if(null===this.client.apiVersion||void 0===this.client.apiVersion||"string"!=typeof this.client.apiVersion.valueOf())throw new Error("this.client.apiVersion cannot be null or undefined and it must be of type string.");if(null!==this.client.acceptLanguage&&void 0!==this.client.acceptLanguage&&"string"!=typeof this.client.acceptLanguage.valueOf())throw new Error("this.client.acceptLanguage must be of type string.")}catch(e){return r(e)}let a=this.client.baseUri,c=a+(a.endsWith("/")?"":"/")+"subscriptions/{subscriptionId}";c=c.replace("{subscriptionId}",encodeURIComponent(e));let u=[];u.push("api-version="+encodeURIComponent(this.client.apiVersion)),u.length>0&&(c+="?"+u.join("&"));let l=new o;if(l.method="GET",l.headers={},l.url=c,this.client.generateClientRequestId&&(l.headers["x-ms-client-request-id"]=i.generateUuid()),void 0!==this.client.acceptLanguage&&null!==this.client.acceptLanguage&&(l.headers["accept-language"]=this.client.acceptLanguage),t)for(let e in t.customHeaders)t.customHeaders.hasOwnProperty(e)&&(l.headers[e]=t.customHeaders[e]);return l.headers["Content-Type"]="application/json; charset=utf-8",l.body=null,s.pipeline(l,(e,t,i)=>{if(e)return r(e);let o=t.statusCode;if(200!==o){let e,o=new Error(i);o.statusCode=t.statusCode,o.request=n.stripRequest(l),o.response=n.stripResponse(t),""===i&&(i=null);try{if((e=JSON.parse(i))&&(e.error&&(e=e.error),e.code&&(o.code=e.code),e.message&&(o.message=e.message)),null!=e){let t=(new s.models.CloudError).mapper();o.body=s.deserialize(t,e,"error.body")}}catch(e){return o.message=`Error "${e.message}" occurred in deserializing the responseBody `+`- "${i}" for the default response.`,r(o)}return r(o)}let a=null;if(""===i&&(i=null),200===o){let e=null;try{if(e=JSON.parse(i),a=JSON.parse(i),null!=e){let t=(new s.models.Subscription).mapper();a=s.deserialize(t,e,"result")}}catch(e){let o=new Error(`Error ${e} occurred in deserializing the responseBody - ${i}`);return o.request=n.stripRequest(l),o.response=n.stripResponse(t),r(o)}}return r(null,a,l,t)})}function _list(e,t){let r=this.client;if(t||"function"!=typeof e||(t=e,e=null),!t)throw new Error("callback cannot be null.");try{if(null===this.client.apiVersion||void 0===this.client.apiVersion||"string"!=typeof this.client.apiVersion.valueOf())throw new Error("this.client.apiVersion cannot be null or undefined and it must be of type string.");if(null!==this.client.acceptLanguage&&void 0!==this.client.acceptLanguage&&"string"!=typeof this.client.acceptLanguage.valueOf())throw new Error("this.client.acceptLanguage must be of type string.")}catch(e){return t(e)}let s=this.client.baseUri,a=s+(s.endsWith("/")?"":"/")+"subscriptions",c=[];c.push("api-version="+encodeURIComponent(this.client.apiVersion)),c.length>0&&(a+="?"+c.join("&"));let u=new o;if(u.method="GET",u.headers={},u.url=a,this.client.generateClientRequestId&&(u.headers["x-ms-client-request-id"]=i.generateUuid()),void 0!==this.client.acceptLanguage&&null!==this.client.acceptLanguage&&(u.headers["accept-language"]=this.client.acceptLanguage),e)for(let t in e.customHeaders)e.customHeaders.hasOwnProperty(t)&&(u.headers[t]=e.customHeaders[t]);return u.headers["Content-Type"]="application/json; charset=utf-8",u.body=null,r.pipeline(u,(e,i,o)=>{if(e)return t(e);let s=i.statusCode;if(200!==s){let e,s=new Error(o);s.statusCode=i.statusCode,s.request=n.stripRequest(u),s.response=n.stripResponse(i),""===o&&(o=null);try{if((e=JSON.parse(o))&&(e.error&&(e=e.error),e.code&&(s.code=e.code),e.message&&(s.message=e.message)),null!=e){let t=(new r.models.CloudError).mapper();s.body=r.deserialize(t,e,"error.body")}}catch(e){return s.message=`Error "${e.message}" occurred in deserializing the responseBody `+`- "${o}" for the default response.`,t(s)}return t(s)}let a=null;if(""===o&&(o=null),200===s){let e=null;try{if(e=JSON.parse(o),a=JSON.parse(o),null!=e){let t=(new r.models.SubscriptionListResult).mapper();a=r.deserialize(t,e,"result")}}catch(e){let r=new Error(`Error ${e} occurred in deserializing the responseBody - ${o}`);return r.request=n.stripRequest(u),r.response=n.stripResponse(i),t(r)}}return t(null,a,u,i)})}function _listNext(e,t,r){let s=this.client;if(r||"function"!=typeof t||(r=t,t=null),!r)throw new Error("callback cannot be null.");try{if(null==e||"string"!=typeof e.valueOf())throw new Error("nextPageLink cannot be null or undefined and it must be of type string.");if(null!==this.client.acceptLanguage&&void 0!==this.client.acceptLanguage&&"string"!=typeof this.client.acceptLanguage.valueOf())throw new Error("this.client.acceptLanguage must be of type string.")}catch(e){return r(e)}let a="{nextLink}";a=a.replace("{nextLink}",e);let c=new o;if(c.method="GET",c.headers={},c.url=a,this.client.generateClientRequestId&&(c.headers["x-ms-client-request-id"]=i.generateUuid()),void 0!==this.client.acceptLanguage&&null!==this.client.acceptLanguage&&(c.headers["accept-language"]=this.client.acceptLanguage),t)for(let e in t.customHeaders)t.customHeaders.hasOwnProperty(e)&&(c.headers[e]=t.customHeaders[e]);return c.headers["Content-Type"]="application/json; charset=utf-8",c.body=null,s.pipeline(c,(e,t,i)=>{if(e)return r(e);let o=t.statusCode;if(200!==o){let e,o=new Error(i);o.statusCode=t.statusCode,o.request=n.stripRequest(c),o.response=n.stripResponse(t),""===i&&(i=null);try{if((e=JSON.parse(i))&&(e.error&&(e=e.error),e.code&&(o.code=e.code),e.message&&(o.message=e.message)),null!=e){let t=(new s.models.CloudError).mapper();o.body=s.deserialize(t,e,"error.body")}}catch(e){return o.message=`Error "${e.message}" occurred in deserializing the responseBody `+`- "${i}" for the default response.`,r(o)}return r(o)}let a=null;if(""===i&&(i=null),200===o){let e=null;try{if(e=JSON.parse(i),a=JSON.parse(i),null!=e){let t=(new s.models.SubscriptionListResult).mapper();a=s.deserialize(t,e,"result")}}catch(e){let o=new Error(`Error ${e} occurred in deserializing the responseBody - ${i}`);return o.request=n.stripRequest(c),o.response=n.stripResponse(t),r(o)}}return r(null,a,c,t)})}e.exports=class Subscriptions{constructor(e){this.client=e,this._listLocations=_listLocations,this._get=_get,this._list=_list,this._listNext=_listNext}listLocationsWithHttpOperationResponse(e,t){let r=this;return new Promise((i,o)=>{r._listLocations(e,t,(e,t,r,s)=>{let a=new n.HttpOperationResponse(r,s);a.body=t,e?o(e):i(a)})})}listLocations(e,t,r){let n=this;return r||"function"!=typeof t||(r=t,t=null),r?n._listLocations(e,t,r):new Promise((r,i)=>{n._listLocations(e,t,(e,t)=>{e?i(e):r(t)})})}getWithHttpOperationResponse(e,t){let r=this;return new Promise((i,o)=>{r._get(e,t,(e,t,r,s)=>{let a=new n.HttpOperationResponse(r,s);a.body=t,e?o(e):i(a)})})}get(e,t,r){let n=this;return r||"function"!=typeof t||(r=t,t=null),r?n._get(e,t,r):new Promise((r,i)=>{n._get(e,t,(e,t)=>{e?i(e):r(t)})})}listWithHttpOperationResponse(e){let t=this;return new Promise((r,i)=>{t._list(e,(e,t,o,s)=>{let a=new n.HttpOperationResponse(o,s);a.body=t,e?i(e):r(a)})})}list(e,t){let r=this;return t||"function"!=typeof e||(t=e,e=null),t?r._list(e,t):new Promise((t,n)=>{r._list(e,(e,r)=>{e?n(e):t(r)})})}listNextWithHttpOperationResponse(e,t){let r=this;return new Promise((i,o)=>{r._listNext(e,t,(e,t,r,s)=>{let a=new n.HttpOperationResponse(r,s);a.body=t,e?o(e):i(a)})})}listNext(e,t,r){let n=this;return r||"function"!=typeof t||(r=t,t=null),r?n._listNext(e,t,r):new Promise((r,i)=>{n._listNext(e,t,(e,t)=>{e?i(e):r(t)})})}}},function(e,t,r){"use strict";const n=r(8),i=r(243),o=n.WebResource;function _list(e,t){let r=this.client;if(t||"function"!=typeof e||(t=e,e=null),!t)throw new Error("callback cannot be null.");try{if(null===this.client.apiVersion||void 0===this.client.apiVersion||"string"!=typeof this.client.apiVersion.valueOf())throw new Error("this.client.apiVersion cannot be null or undefined and it must be of type string.");if(null!==this.client.acceptLanguage&&void 0!==this.client.acceptLanguage&&"string"!=typeof this.client.acceptLanguage.valueOf())throw new Error("this.client.acceptLanguage must be of type string.")}catch(e){return t(e)}let s=this.client.baseUri,a=s+(s.endsWith("/")?"":"/")+"tenants",c=[];c.push("api-version="+encodeURIComponent(this.client.apiVersion)),c.length>0&&(a+="?"+c.join("&"));let u=new o;if(u.method="GET",u.headers={},u.url=a,this.client.generateClientRequestId&&(u.headers["x-ms-client-request-id"]=i.generateUuid()),void 0!==this.client.acceptLanguage&&null!==this.client.acceptLanguage&&(u.headers["accept-language"]=this.client.acceptLanguage),e)for(let t in e.customHeaders)e.customHeaders.hasOwnProperty(t)&&(u.headers[t]=e.customHeaders[t]);return u.headers["Content-Type"]="application/json; charset=utf-8",u.body=null,r.pipeline(u,(e,i,o)=>{if(e)return t(e);let s=i.statusCode;if(200!==s){let e,s=new Error(o);s.statusCode=i.statusCode,s.request=n.stripRequest(u),s.response=n.stripResponse(i),""===o&&(o=null);try{if((e=JSON.parse(o))&&(e.error&&(e=e.error),e.code&&(s.code=e.code),e.message&&(s.message=e.message)),null!=e){let t=(new r.models.CloudError).mapper();s.body=r.deserialize(t,e,"error.body")}}catch(e){return s.message=`Error "${e.message}" occurred in deserializing the responseBody `+`- "${o}" for the default response.`,t(s)}return t(s)}let a=null;if(""===o&&(o=null),200===s){let e=null;try{if(e=JSON.parse(o),a=JSON.parse(o),null!=e){let t=(new r.models.TenantListResult).mapper();a=r.deserialize(t,e,"result")}}catch(e){let r=new Error(`Error ${e} occurred in deserializing the responseBody - ${o}`);return r.request=n.stripRequest(u),r.response=n.stripResponse(i),t(r)}}return t(null,a,u,i)})}function _listNext(e,t,r){let s=this.client;if(r||"function"!=typeof t||(r=t,t=null),!r)throw new Error("callback cannot be null.");try{if(null==e||"string"!=typeof e.valueOf())throw new Error("nextPageLink cannot be null or undefined and it must be of type string.");if(null!==this.client.acceptLanguage&&void 0!==this.client.acceptLanguage&&"string"!=typeof this.client.acceptLanguage.valueOf())throw new Error("this.client.acceptLanguage must be of type string.")}catch(e){return r(e)}let a="{nextLink}";a=a.replace("{nextLink}",e);let c=new o;if(c.method="GET",c.headers={},c.url=a,this.client.generateClientRequestId&&(c.headers["x-ms-client-request-id"]=i.generateUuid()),void 0!==this.client.acceptLanguage&&null!==this.client.acceptLanguage&&(c.headers["accept-language"]=this.client.acceptLanguage),t)for(let e in t.customHeaders)t.customHeaders.hasOwnProperty(e)&&(c.headers[e]=t.customHeaders[e]);return c.headers["Content-Type"]="application/json; charset=utf-8",c.body=null,s.pipeline(c,(e,t,i)=>{if(e)return r(e);let o=t.statusCode;if(200!==o){let e,o=new Error(i);o.statusCode=t.statusCode,o.request=n.stripRequest(c),o.response=n.stripResponse(t),""===i&&(i=null);try{if((e=JSON.parse(i))&&(e.error&&(e=e.error),e.code&&(o.code=e.code),e.message&&(o.message=e.message)),null!=e){let t=(new s.models.CloudError).mapper();o.body=s.deserialize(t,e,"error.body")}}catch(e){return o.message=`Error "${e.message}" occurred in deserializing the responseBody `+`- "${i}" for the default response.`,r(o)}return r(o)}let a=null;if(""===i&&(i=null),200===o){let e=null;try{if(e=JSON.parse(i),a=JSON.parse(i),null!=e){let t=(new s.models.TenantListResult).mapper();a=s.deserialize(t,e,"result")}}catch(e){let o=new Error(`Error ${e} occurred in deserializing the responseBody - ${i}`);return o.request=n.stripRequest(c),o.response=n.stripResponse(t),r(o)}}return r(null,a,c,t)})}e.exports=class Tenants{constructor(e){this.client=e,this._list=_list,this._listNext=_listNext}listWithHttpOperationResponse(e){let t=this;return new Promise((r,i)=>{t._list(e,(e,t,o,s)=>{let a=new n.HttpOperationResponse(o,s);a.body=t,e?i(e):r(a)})})}list(e,t){let r=this;return t||"function"!=typeof e||(t=e,e=null),t?r._list(e,t):new Promise((t,n)=>{r._list(e,(e,r)=>{e?n(e):t(r)})})}listNextWithHttpOperationResponse(e,t){let r=this;return new Promise((i,o)=>{r._listNext(e,t,(e,t,r,s)=>{let a=new n.HttpOperationResponse(r,s);a.body=t,e?o(e):i(a)})})}listNext(e,t,r){let n=this;return r||"function"!=typeof t||(r=t,t=null),r?n._listNext(e,t,r):new Promise((r,i)=>{n._listNext(e,t,(e,t)=>{e?i(e):r(t)})})}}},function(e,t,r){"use strict";const n=r(54);e.exports=class Resource extends n.BaseResource{constructor(){super()}mapper(){return{required:!1,serializedName:"Resource",type:{name:"Composite",className:"Resource",modelProperties:{id:{required:!1,readOnly:!0,serializedName:"id",type:{name:"String"}},name:{required:!1,readOnly:!0,serializedName:"name",type:{name:"String"}},type:{required:!1,readOnly:!0,serializedName:"type",type:{name:"String"}}}}}}}},function(e,t,r){"use strict";const n=r(54);e.exports=class TrackedResource extends n.Resource{constructor(){super()}mapper(){return{required:!1,serializedName:"TrackedResource",type:{name:"Composite",className:"TrackedResource",modelProperties:{id:{required:!1,readOnly:!0,serializedName:"id",type:{name:"String"}},name:{required:!1,readOnly:!0,serializedName:"name",type:{name:"String"}},type:{required:!1,readOnly:!0,serializedName:"type",type:{name:"String"}},location:{required:!1,serializedName:"location",type:{name:"String"}},tags:{required:!1,serializedName:"tags",type:{name:"Dictionary",value:{required:!1,serializedName:"StringElementType",type:{name:"String"}}}}}}}}}},function(e,t,r){"use strict";e.exports=class Sku{constructor(){}mapper(){return{required:!1,serializedName:"Sku",type:{name:"Composite",className:"Sku",modelProperties:{name:{required:!0,serializedName:"name",type:{name:"String"}},tier:{required:!1,serializedName:"tier",type:{name:"String"}},capacity:{required:!1,serializedName:"capacity",constraints:{InclusiveMaximum:20,InclusiveMinimum:0},type:{name:"Number"}}}}}}}},function(e,t,r){"use strict";const n=r(54);e.exports=class EHNamespace extends n.TrackedResource{constructor(){super()}mapper(){return{required:!1,serializedName:"EHNamespace",type:{name:"Composite",className:"EHNamespace",modelProperties:{id:{required:!1,readOnly:!0,serializedName:"id",type:{name:"String"}},name:{required:!1,readOnly:!0,serializedName:"name",type:{name:"String"}},type:{required:!1,readOnly:!0,serializedName:"type",type:{name:"String"}},location:{required:!1,serializedName:"location",type:{name:"String"}},tags:{required:!1,serializedName:"tags",type:{name:"Dictionary",value:{required:!1,serializedName:"StringElementType",type:{name:"String"}}}},sku:{required:!1,serializedName:"sku",type:{name:"Composite",className:"Sku"}},provisioningState:{required:!1,readOnly:!0,serializedName:"properties.provisioningState",type:{name:"String"}},createdAt:{required:!1,readOnly:!0,serializedName:"properties.createdAt",type:{name:"DateTime"}},updatedAt:{required:!1,readOnly:!0,serializedName:"properties.updatedAt",type:{name:"DateTime"}},serviceBusEndpoint:{required:!1,readOnly:!0,serializedName:"properties.serviceBusEndpoint",type:{name:"String"}},metricId:{required:!1,readOnly:!0,serializedName:"properties.metricId",type:{name:"String"}},isAutoInflateEnabled:{required:!1,serializedName:"properties.isAutoInflateEnabled",type:{name:"Boolean"}},maximumThroughputUnits:{required:!1,serializedName:"properties.maximumThroughputUnits",constraints:{InclusiveMaximum:20,InclusiveMinimum:0},type:{name:"Number"}},kafkaEnabled:{required:!1,serializedName:"properties.kafkaEnabled",type:{name:"Boolean"}}}}}}}},function(e,t,r){"use strict";const n=r(54);e.exports=class AuthorizationRule extends n.Resource{constructor(){super()}mapper(){return{required:!1,serializedName:"AuthorizationRule",type:{name:"Composite",className:"AuthorizationRule",modelProperties:{id:{required:!1,readOnly:!0,serializedName:"id",type:{name:"String"}},name:{required:!1,readOnly:!0,serializedName:"name",type:{name:"String"}},type:{required:!1,readOnly:!0,serializedName:"type",type:{name:"String"}},rights:{required:!0,serializedName:"properties.rights",type:{name:"Sequence",element:{required:!1,serializedName:"AccessRightsElementType",type:{name:"String"}}}}}}}}}},function(e,t,r){"use strict";e.exports=class AccessKeys{constructor(){}mapper(){return{required:!1,serializedName:"AccessKeys",type:{name:"Composite",className:"AccessKeys",modelProperties:{primaryConnectionString:{required:!1,readOnly:!0,serializedName:"primaryConnectionString",type:{name:"String"}},secondaryConnectionString:{required:!1,readOnly:!0,serializedName:"secondaryConnectionString",type:{name:"String"}},aliasPrimaryConnectionString:{required:!1,readOnly:!0,serializedName:"aliasPrimaryConnectionString",type:{name:"String"}},aliasSecondaryConnectionString:{required:!1,readOnly:!0,serializedName:"aliasSecondaryConnectionString",type:{name:"String"}},primaryKey:{required:!1,readOnly:!0,serializedName:"primaryKey",type:{name:"String"}},secondaryKey:{required:!1,readOnly:!0,serializedName:"secondaryKey",type:{name:"String"}},keyName:{required:!1,readOnly:!0,serializedName:"keyName",type:{name:"String"}}}}}}}},function(e,t,r){"use strict";e.exports=class RegenerateAccessKeyParameters{constructor(){}mapper(){return{required:!1,serializedName:"RegenerateAccessKeyParameters",type:{name:"Composite",className:"RegenerateAccessKeyParameters",modelProperties:{keyType:{required:!0,serializedName:"keyType",type:{name:"Enum",allowedValues:["PrimaryKey","SecondaryKey"]}},key:{required:!1,serializedName:"key",type:{name:"String"}}}}}}}},function(e,t,r){"use strict";e.exports=class Destination{constructor(){}mapper(){return{required:!1,serializedName:"Destination",type:{name:"Composite",className:"Destination",modelProperties:{name:{required:!1,serializedName:"name",type:{name:"String"}},storageAccountResourceId:{required:!1,serializedName:"properties.storageAccountResourceId",type:{name:"String"}},blobContainer:{required:!1,serializedName:"properties.blobContainer",type:{name:"String"}},archiveNameFormat:{required:!1,serializedName:"properties.archiveNameFormat",type:{name:"String"}}}}}}}},function(e,t,r){"use strict";e.exports=class CaptureDescription{constructor(){}mapper(){return{required:!1,serializedName:"CaptureDescription",type:{name:"Composite",className:"CaptureDescription",modelProperties:{enabled:{required:!1,serializedName:"enabled",type:{name:"Boolean"}},encoding:{required:!1,serializedName:"encoding",type:{name:"Enum",allowedValues:["Avro","AvroDeflate"]}},intervalInSeconds:{required:!1,serializedName:"intervalInSeconds",constraints:{InclusiveMaximum:900,InclusiveMinimum:60},type:{name:"Number"}},sizeLimitInBytes:{required:!1,serializedName:"sizeLimitInBytes",constraints:{InclusiveMaximum:524288e3,InclusiveMinimum:10485760},type:{name:"Number"}},destination:{required:!1,serializedName:"destination",type:{name:"Composite",className:"Destination"}},skipEmptyArchives:{required:!1,serializedName:"skipEmptyArchives",type:{name:"Boolean"}}}}}}}},function(e,t,r){"use strict";const n=r(54);e.exports=class Eventhub extends n.Resource{constructor(){super()}mapper(){return{required:!1,serializedName:"Eventhub",type:{name:"Composite",className:"Eventhub",modelProperties:{id:{required:!1,readOnly:!0,serializedName:"id",type:{name:"String"}},name:{required:!1,readOnly:!0,serializedName:"name",type:{name:"String"}},type:{required:!1,readOnly:!0,serializedName:"type",type:{name:"String"}},partitionIds:{required:!1,readOnly:!0,serializedName:"properties.partitionIds",type:{name:"Sequence",element:{required:!1,serializedName:"StringElementType",type:{name:"String"}}}},createdAt:{required:!1,readOnly:!0,serializedName:"properties.createdAt",type:{name:"DateTime"}},updatedAt:{required:!1,readOnly:!0,serializedName:"properties.updatedAt",type:{name:"DateTime"}},messageRetentionInDays:{required:!1,serializedName:"properties.messageRetentionInDays",constraints:{InclusiveMinimum:1},type:{name:"Number"}},partitionCount:{required:!1,serializedName:"properties.partitionCount",constraints:{InclusiveMinimum:1},type:{name:"Number"}},status:{required:!1,serializedName:"properties.status",type:{name:"Enum",allowedValues:["Active","Disabled","Restoring","SendDisabled","ReceiveDisabled","Creating","Deleting","Renaming","Unknown"]}},captureDescription:{required:!1,serializedName:"properties.captureDescription",type:{name:"Composite",className:"CaptureDescription"}}}}}}}},function(e,t,r){"use strict";const n=r(54);e.exports=class ConsumerGroup extends n.Resource{constructor(){super()}mapper(){return{required:!1,serializedName:"ConsumerGroup",type:{name:"Composite",className:"ConsumerGroup",modelProperties:{id:{required:!1,readOnly:!0,serializedName:"id",type:{name:"String"}},name:{required:!1,readOnly:!0,serializedName:"name",type:{name:"String"}},type:{required:!1,readOnly:!0,serializedName:"type",type:{name:"String"}},createdAt:{required:!1,readOnly:!0,serializedName:"properties.createdAt",type:{name:"DateTime"}},updatedAt:{required:!1,readOnly:!0,serializedName:"properties.updatedAt",type:{name:"DateTime"}},userMetadata:{required:!1,serializedName:"properties.userMetadata",type:{name:"String"}}}}}}}},function(e,t,r){"use strict";e.exports=class CheckNameAvailabilityParameter{constructor(){}mapper(){return{required:!1,serializedName:"CheckNameAvailabilityParameter",type:{name:"Composite",className:"CheckNameAvailabilityParameter",modelProperties:{name:{required:!0,serializedName:"name",type:{name:"String"}}}}}}}},function(e,t,r){"use strict";e.exports=class CheckNameAvailabilityResult{constructor(){}mapper(){return{required:!1,serializedName:"CheckNameAvailabilityResult",type:{name:"Composite",className:"CheckNameAvailabilityResult",modelProperties:{message:{required:!1,readOnly:!0,serializedName:"message",type:{name:"String"}},nameAvailable:{required:!1,serializedName:"nameAvailable",type:{name:"Boolean"}},reason:{required:!1,serializedName:"reason",type:{name:"Enum",allowedValues:["None","InvalidName","SubscriptionIsDisabled","NameInUse","NameInLockdown","TooManyNamespaceInCurrentSubscription"]}}}}}}}},function(e,t,r){"use strict";e.exports=class OperationDisplay{constructor(){}mapper(){return{required:!1,serializedName:"Operation_display",type:{name:"Composite",className:"OperationDisplay",modelProperties:{provider:{required:!1,readOnly:!0,serializedName:"provider",type:{name:"String"}},resource:{required:!1,readOnly:!0,serializedName:"resource",type:{name:"String"}},operation:{required:!1,readOnly:!0,serializedName:"operation",type:{name:"String"}}}}}}}},function(e,t,r){"use strict";e.exports=class Operation{constructor(){}mapper(){return{required:!1,serializedName:"Operation",type:{name:"Composite",className:"Operation",modelProperties:{name:{required:!1,readOnly:!0,serializedName:"name",type:{name:"String"}},display:{required:!1,serializedName:"display",type:{name:"Composite",className:"OperationDisplay"}}}}}}}},function(e,t,r){"use strict";e.exports=class ErrorResponse{constructor(){}mapper(){return{required:!1,serializedName:"ErrorResponse",type:{name:"Composite",className:"ErrorResponse",modelProperties:{code:{required:!1,serializedName:"code",type:{name:"String"}},message:{required:!1,serializedName:"message",type:{name:"String"}}}}}}}},function(e,t,r){"use strict";const n=r(54);e.exports=class ArmDisasterRecovery extends n.Resource{constructor(){super()}mapper(){return{required:!1,serializedName:"ArmDisasterRecovery",type:{name:"Composite",className:"ArmDisasterRecovery",modelProperties:{id:{required:!1,readOnly:!0,serializedName:"id",type:{name:"String"}},name:{required:!1,readOnly:!0,serializedName:"name",type:{name:"String"}},type:{required:!1,readOnly:!0,serializedName:"type",type:{name:"String"}},provisioningState:{required:!1,readOnly:!0,serializedName:"properties.provisioningState",type:{name:"Enum",allowedValues:["Accepted","Succeeded","Failed"]}},partnerNamespace:{required:!1,serializedName:"properties.partnerNamespace",type:{name:"String"}},alternateName:{required:!1,serializedName:"properties.alternateName",type:{name:"String"}},role:{required:!1,readOnly:!0,serializedName:"properties.role",type:{name:"Enum",allowedValues:["Primary","PrimaryNotReplicating","Secondary"]}},pendingReplicationOperationsCount:{required:!1,readOnly:!0,serializedName:"properties.pendingReplicationOperationsCount",type:{name:"Number"}}}}}}}},function(e,t,r){"use strict";e.exports=class MessagingRegionsProperties{constructor(){}mapper(){return{required:!1,serializedName:"MessagingRegions_properties",type:{name:"Composite",className:"MessagingRegionsProperties",modelProperties:{code:{required:!1,readOnly:!0,serializedName:"code",type:{name:"String"}},fullName:{required:!1,readOnly:!0,serializedName:"fullName",type:{name:"String"}}}}}}}},function(e,t,r){"use strict";const n=r(54);e.exports=class MessagingRegions extends n.TrackedResource{constructor(){super()}mapper(){return{required:!1,serializedName:"MessagingRegions",type:{name:"Composite",className:"MessagingRegions",modelProperties:{id:{required:!1,readOnly:!0,serializedName:"id",type:{name:"String"}},name:{required:!1,readOnly:!0,serializedName:"name",type:{name:"String"}},type:{required:!1,readOnly:!0,serializedName:"type",type:{name:"String"}},location:{required:!1,serializedName:"location",type:{name:"String"}},tags:{required:!1,serializedName:"tags",type:{name:"Dictionary",value:{required:!1,serializedName:"StringElementType",type:{name:"String"}}}},properties:{required:!1,serializedName:"properties",type:{name:"Composite",className:"MessagingRegionsProperties"}}}}}}}},function(e,t,r){"use strict";const n=r(54);e.exports=class MessagingPlan extends n.TrackedResource{constructor(){super()}mapper(){return{required:!1,serializedName:"MessagingPlan",type:{name:"Composite",className:"MessagingPlan",modelProperties:{id:{required:!1,readOnly:!0,serializedName:"id",type:{name:"String"}},name:{required:!1,readOnly:!0,serializedName:"name",type:{name:"String"}},type:{required:!1,readOnly:!0,serializedName:"type",type:{name:"String"}},location:{required:!1,serializedName:"location",type:{name:"String"}},tags:{required:!1,serializedName:"tags",type:{name:"Dictionary",value:{required:!1,serializedName:"StringElementType",type:{name:"String"}}}},sku:{required:!1,readOnly:!0,serializedName:"properties.sku",type:{name:"Number"}},selectedEventHubUnit:{required:!1,readOnly:!0,serializedName:"properties.selectedEventHubUnit",type:{name:"Number"}},updatedAt:{required:!1,readOnly:!0,serializedName:"properties.updatedAt",type:{name:"DateTime"}},revision:{required:!1,readOnly:!0,serializedName:"properties.revision",type:{name:"Number"}}}}}}}},function(e,t,r){"use strict";e.exports=class Subnet{constructor(){}mapper(){return{required:!1,serializedName:"Subnet",type:{name:"Composite",className:"Subnet",modelProperties:{id:{required:!0,serializedName:"id",type:{name:"String"}}}}}}}},function(e,t,r){"use strict";e.exports=class NWRuleSetIpRules{constructor(){}mapper(){return{required:!1,serializedName:"NWRuleSetIpRules",type:{name:"Composite",className:"NWRuleSetIpRules",modelProperties:{ipMask:{required:!1,serializedName:"ipMask",type:{name:"String"}},action:{required:!1,serializedName:"action",defaultValue:"Allow",type:{name:"String"}}}}}}}},function(e,t,r){"use strict";e.exports=class NWRuleSetVirtualNetworkRules{constructor(){}mapper(){return{required:!1,serializedName:"NWRuleSetVirtualNetworkRules",type:{name:"Composite",className:"NWRuleSetVirtualNetworkRules",modelProperties:{subnet:{required:!1,serializedName:"subnet",type:{name:"Composite",className:"Subnet"}},ignoreMissingVnetServiceEndpoint:{required:!1,serializedName:"ignoreMissingVnetServiceEndpoint",type:{name:"Boolean"}}}}}}}},function(e,t,r){"use strict";const n=r(54);e.exports=class NetworkRuleSet extends n.Resource{constructor(){super()}mapper(){return{required:!1,serializedName:"NetworkRuleSet",type:{name:"Composite",className:"NetworkRuleSet",modelProperties:{id:{required:!1,readOnly:!0,serializedName:"id",type:{name:"String"}},name:{required:!1,readOnly:!0,serializedName:"name",type:{name:"String"}},type:{required:!1,readOnly:!0,serializedName:"type",type:{name:"String"}},defaultAction:{required:!1,serializedName:"properties.defaultAction",type:{name:"String"}},virtualNetworkRules:{required:!1,serializedName:"properties.virtualNetworkRules",type:{name:"Sequence",element:{required:!1,serializedName:"NWRuleSetVirtualNetworkRulesElementType",type:{name:"Composite",className:"NWRuleSetVirtualNetworkRules"}}}},ipRules:{required:!1,serializedName:"properties.ipRules",type:{name:"Sequence",element:{required:!1,serializedName:"NWRuleSetIpRulesElementType",type:{name:"Composite",className:"NWRuleSetIpRules"}}}}}}}}}},function(e,t,r){"use strict";e.exports=class OperationListResult extends Array{constructor(){super()}mapper(){return{required:!1,serializedName:"OperationListResult",type:{name:"Composite",className:"OperationListResult",modelProperties:{value:{required:!1,readOnly:!0,serializedName:"",type:{name:"Sequence",element:{required:!1,serializedName:"OperationElementType",type:{name:"Composite",className:"Operation"}}}},nextLink:{required:!1,readOnly:!0,serializedName:"nextLink",type:{name:"String"}}}}}}}},function(e,t,r){"use strict";e.exports=class EHNamespaceListResult extends Array{constructor(){super()}mapper(){return{required:!1,serializedName:"EHNamespaceListResult",type:{name:"Composite",className:"EHNamespaceListResult",modelProperties:{value:{required:!1,serializedName:"",type:{name:"Sequence",element:{required:!1,serializedName:"EHNamespaceElementType",type:{name:"Composite",className:"EHNamespace"}}}},nextLink:{required:!1,serializedName:"nextLink",type:{name:"String"}}}}}}}},function(e,t,r){"use strict";e.exports=class AuthorizationRuleListResult extends Array{constructor(){super()}mapper(){return{required:!1,serializedName:"AuthorizationRuleListResult",type:{name:"Composite",className:"AuthorizationRuleListResult",modelProperties:{value:{required:!1,serializedName:"",type:{name:"Sequence",element:{required:!1,serializedName:"AuthorizationRuleElementType",type:{name:"Composite",className:"AuthorizationRule"}}}},nextLink:{required:!1,serializedName:"nextLink",type:{name:"String"}}}}}}}},function(e,t,r){"use strict";e.exports=class ArmDisasterRecoveryListResult extends Array{constructor(){super()}mapper(){return{required:!1,serializedName:"ArmDisasterRecoveryListResult",type:{name:"Composite",className:"ArmDisasterRecoveryListResult",modelProperties:{value:{required:!1,serializedName:"",type:{name:"Sequence",element:{required:!1,serializedName:"ArmDisasterRecoveryElementType",type:{name:"Composite",className:"ArmDisasterRecovery"}}}},nextLink:{required:!1,readOnly:!0,serializedName:"nextLink",type:{name:"String"}}}}}}}},function(e,t,r){"use strict";e.exports=class EventHubListResult extends Array{constructor(){super()}mapper(){return{required:!1,serializedName:"EventHubListResult",type:{name:"Composite",className:"EventHubListResult",modelProperties:{value:{required:!1,serializedName:"",type:{name:"Sequence",element:{required:!1,serializedName:"EventhubElementType",type:{name:"Composite",className:"Eventhub"}}}},nextLink:{required:!1,serializedName:"nextLink",type:{name:"String"}}}}}}}},function(e,t,r){"use strict";e.exports=class ConsumerGroupListResult extends Array{constructor(){super()}mapper(){return{required:!1,serializedName:"ConsumerGroupListResult",type:{name:"Composite",className:"ConsumerGroupListResult",modelProperties:{value:{required:!1,serializedName:"",type:{name:"Sequence",element:{required:!1,serializedName:"ConsumerGroupElementType",type:{name:"Composite",className:"ConsumerGroup"}}}},nextLink:{required:!1,serializedName:"nextLink",type:{name:"String"}}}}}}}},function(e,t,r){"use strict";e.exports=class MessagingRegionsListResult extends Array{constructor(){super()}mapper(){return{required:!1,serializedName:"MessagingRegionsListResult",type:{name:"Composite",className:"MessagingRegionsListResult",modelProperties:{value:{required:!1,serializedName:"",type:{name:"Sequence",element:{required:!1,serializedName:"MessagingRegionsElementType",type:{name:"Composite",className:"MessagingRegions"}}}},nextLink:{required:!1,readOnly:!0,serializedName:"nextLink",type:{name:"String"}}}}}}}},function(e,t,r){"use strict";t.Operations=r(1028),t.Namespaces=r(1029),t.DisasterRecoveryConfigs=r(1030),t.EventHubs=r(1031),t.ConsumerGroups=r(1032),t.Regions=r(1033)},function(e,t,r){"use strict";const n=r(86),i=r(9),o=n.WebResource;function _list(e,t){let r=this.client;if(t||"function"!=typeof e||(t=e,e=null),!t)throw new Error("callback cannot be null.");try{if(null===this.client.apiVersion||void 0===this.client.apiVersion||"string"!=typeof this.client.apiVersion.valueOf())throw new Error("this.client.apiVersion cannot be null or undefined and it must be of type string.");if(null!==this.client.acceptLanguage&&void 0!==this.client.acceptLanguage&&"string"!=typeof this.client.acceptLanguage.valueOf())throw new Error("this.client.acceptLanguage must be of type string.")}catch(e){return t(e)}let s=this.client.baseUri,a=s+(s.endsWith("/")?"":"/")+"providers/Microsoft.EventHub/operations",c=[];c.push("api-version="+encodeURIComponent(this.client.apiVersion)),c.length>0&&(a+="?"+c.join("&"));let u=new o;if(u.method="GET",u.url=a,u.headers={},u.headers["Content-Type"]="application/json; charset=utf-8",this.client.generateClientRequestId&&(u.headers["x-ms-client-request-id"]=i.generateUuid()),void 0!==this.client.acceptLanguage&&null!==this.client.acceptLanguage&&(u.headers["accept-language"]=this.client.acceptLanguage),e)for(let t in e.customHeaders)e.customHeaders.hasOwnProperty(t)&&(u.headers[t]=e.customHeaders[t]);return u.body=null,r.pipeline(u,(e,i,o)=>{if(e)return t(e);let s=i.statusCode;if(200!==s){let e,s=new Error(o);s.statusCode=i.statusCode,s.request=n.stripRequest(u),s.response=n.stripResponse(i),""===o&&(o=null);try{if(e=JSON.parse(o)){let t=null;e.error&&(t=e.error),s.code=t?t.code:e.code,s.message=t?t.message:e.message}if(null!=e){let t=(new r.models.ErrorResponse).mapper();s.body=r.deserialize(t,e,"error.body")}}catch(e){return s.message=`Error "${e.message}" occurred in deserializing the responseBody `+`- "${o}" for the default response.`,t(s)}return t(s)}let a=null;if(""===o&&(o=null),200===s){let e=null;try{if(e=JSON.parse(o),a=JSON.parse(o),null!=e){let t=(new r.models.OperationListResult).mapper();a=r.deserialize(t,e,"result")}}catch(e){let r=new Error(`Error ${e} occurred in deserializing the responseBody - ${o}`);return r.request=n.stripRequest(u),r.response=n.stripResponse(i),t(r)}}return t(null,a,u,i)})}function _listNext(e,t,r){let s=this.client;if(r||"function"!=typeof t||(r=t,t=null),!r)throw new Error("callback cannot be null.");try{if(null==e||"string"!=typeof e.valueOf())throw new Error("nextPageLink cannot be null or undefined and it must be of type string.");if(null!==this.client.acceptLanguage&&void 0!==this.client.acceptLanguage&&"string"!=typeof this.client.acceptLanguage.valueOf())throw new Error("this.client.acceptLanguage must be of type string.")}catch(e){return r(e)}let a="{nextLink}";a=a.replace("{nextLink}",e);let c=new o;if(c.method="GET",c.url=a,c.headers={},c.headers["Content-Type"]="application/json; charset=utf-8",this.client.generateClientRequestId&&(c.headers["x-ms-client-request-id"]=i.generateUuid()),void 0!==this.client.acceptLanguage&&null!==this.client.acceptLanguage&&(c.headers["accept-language"]=this.client.acceptLanguage),t)for(let e in t.customHeaders)t.customHeaders.hasOwnProperty(e)&&(c.headers[e]=t.customHeaders[e]);return c.body=null,s.pipeline(c,(e,t,i)=>{if(e)return r(e);let o=t.statusCode;if(200!==o){let e,o=new Error(i);o.statusCode=t.statusCode,o.request=n.stripRequest(c),o.response=n.stripResponse(t),""===i&&(i=null);try{if(e=JSON.parse(i)){let t=null;e.error&&(t=e.error),o.code=t?t.code:e.code,o.message=t?t.message:e.message}if(null!=e){let t=(new s.models.ErrorResponse).mapper();o.body=s.deserialize(t,e,"error.body")}}catch(e){return o.message=`Error "${e.message}" occurred in deserializing the responseBody `+`- "${i}" for the default response.`,r(o)}return r(o)}let a=null;if(""===i&&(i=null),200===o){let e=null;try{if(e=JSON.parse(i),a=JSON.parse(i),null!=e){let t=(new s.models.OperationListResult).mapper();a=s.deserialize(t,e,"result")}}catch(e){let o=new Error(`Error ${e} occurred in deserializing the responseBody - ${i}`);return o.request=n.stripRequest(c),o.response=n.stripResponse(t),r(o)}}return r(null,a,c,t)})}e.exports=class Operations{constructor(e){this.client=e,this._list=_list,this._listNext=_listNext}listWithHttpOperationResponse(e){this.client;let t=this;return new Promise((r,i)=>{t._list(e,(e,t,o,s)=>{let a=new n.HttpOperationResponse(o,s);a.body=t,e?i(e):r(a)})})}list(e,t){this.client;let r=this;return t||"function"!=typeof e||(t=e,e=null),t?r._list(e,t):new Promise((t,n)=>{r._list(e,(e,r,i,o)=>{e?n(e):t(r)})})}listNextWithHttpOperationResponse(e,t){this.client;let r=this;return new Promise((i,o)=>{r._listNext(e,t,(e,t,r,s)=>{let a=new n.HttpOperationResponse(r,s);a.body=t,e?o(e):i(a)})})}listNext(e,t,r){this.client;let n=this;return r||"function"!=typeof t||(r=t,t=null),r?n._listNext(e,t,r):new Promise((r,i)=>{n._listNext(e,t,(e,t,n,o)=>{e?i(e):r(t)})})}}},function(e,t,r){"use strict";const n=r(86),i=r(9),o=n.WebResource;function _checkNameAvailability(e,t,r){let s=this.client;if(r||"function"!=typeof t||(r=t,t=null),!r)throw new Error("callback cannot be null.");try{if(null===this.client.apiVersion||void 0===this.client.apiVersion||"string"!=typeof this.client.apiVersion.valueOf())throw new Error("this.client.apiVersion cannot be null or undefined and it must be of type string.");if(null===this.client.subscriptionId||void 0===this.client.subscriptionId||"string"!=typeof this.client.subscriptionId.valueOf())throw new Error("this.client.subscriptionId cannot be null or undefined and it must be of type string.");if(null==e)throw new Error("parameters cannot be null or undefined.");if(null!==this.client.acceptLanguage&&void 0!==this.client.acceptLanguage&&"string"!=typeof this.client.acceptLanguage.valueOf())throw new Error("this.client.acceptLanguage must be of type string.")}catch(e){return r(e)}let a=this.client.baseUri,c=a+(a.endsWith("/")?"":"/")+"subscriptions/{subscriptionId}/providers/Microsoft.EventHub/CheckNameAvailability";c=c.replace("{subscriptionId}",encodeURIComponent(this.client.subscriptionId));let u=[];u.push("api-version="+encodeURIComponent(this.client.apiVersion)),u.length>0&&(c+="?"+u.join("&"));let l=new o;if(l.method="POST",l.url=c,l.headers={},l.headers["Content-Type"]="application/json; charset=utf-8",this.client.generateClientRequestId&&(l.headers["x-ms-client-request-id"]=i.generateUuid()),void 0!==this.client.acceptLanguage&&null!==this.client.acceptLanguage&&(l.headers["accept-language"]=this.client.acceptLanguage),t)for(let e in t.customHeaders)t.customHeaders.hasOwnProperty(e)&&(l.headers[e]=t.customHeaders[e]);let p=null,d=null;try{if(null!=e){let t=(new s.models.CheckNameAvailabilityParameter).mapper();d=s.serialize(t,e,"parameters"),p=JSON.stringify(d)}}catch(t){let n=new Error(`Error "${t.message}" occurred in serializing the `+`payload - ${JSON.stringify(e,null,2)}.`);return r(n)}return l.body=p,s.pipeline(l,(e,t,i)=>{if(e)return r(e);let o=t.statusCode;if(200!==o){let e,o=new Error(i);o.statusCode=t.statusCode,o.request=n.stripRequest(l),o.response=n.stripResponse(t),""===i&&(i=null);try{if(e=JSON.parse(i)){let t=null;e.error&&(t=e.error),o.code=t?t.code:e.code,o.message=t?t.message:e.message}if(null!=e){let t=(new s.models.ErrorResponse).mapper();o.body=s.deserialize(t,e,"error.body")}}catch(e){return o.message=`Error "${e.message}" occurred in deserializing the responseBody `+`- "${i}" for the default response.`,r(o)}return r(o)}let a=null;if(""===i&&(i=null),200===o){let e=null;try{if(e=JSON.parse(i),a=JSON.parse(i),null!=e){let t=(new s.models.CheckNameAvailabilityResult).mapper();a=s.deserialize(t,e,"result")}}catch(e){let o=new Error(`Error ${e} occurred in deserializing the responseBody - ${i}`);return o.request=n.stripRequest(l),o.response=n.stripResponse(t),r(o)}}return r(null,a,l,t)})}function _list(e,t){let r=this.client;if(t||"function"!=typeof e||(t=e,e=null),!t)throw new Error("callback cannot be null.");try{if(null===this.client.apiVersion||void 0===this.client.apiVersion||"string"!=typeof this.client.apiVersion.valueOf())throw new Error("this.client.apiVersion cannot be null or undefined and it must be of type string.");if(null===this.client.subscriptionId||void 0===this.client.subscriptionId||"string"!=typeof this.client.subscriptionId.valueOf())throw new Error("this.client.subscriptionId cannot be null or undefined and it must be of type string.");if(null!==this.client.acceptLanguage&&void 0!==this.client.acceptLanguage&&"string"!=typeof this.client.acceptLanguage.valueOf())throw new Error("this.client.acceptLanguage must be of type string.")}catch(e){return t(e)}let s=this.client.baseUri,a=s+(s.endsWith("/")?"":"/")+"subscriptions/{subscriptionId}/providers/Microsoft.EventHub/namespaces";a=a.replace("{subscriptionId}",encodeURIComponent(this.client.subscriptionId));let c=[];c.push("api-version="+encodeURIComponent(this.client.apiVersion)),c.length>0&&(a+="?"+c.join("&"));let u=new o;if(u.method="GET",u.url=a,u.headers={},u.headers["Content-Type"]="application/json; charset=utf-8",this.client.generateClientRequestId&&(u.headers["x-ms-client-request-id"]=i.generateUuid()),void 0!==this.client.acceptLanguage&&null!==this.client.acceptLanguage&&(u.headers["accept-language"]=this.client.acceptLanguage),e)for(let t in e.customHeaders)e.customHeaders.hasOwnProperty(t)&&(u.headers[t]=e.customHeaders[t]);return u.body=null,r.pipeline(u,(e,i,o)=>{if(e)return t(e);let s=i.statusCode;if(200!==s){let e,s=new Error(o);s.statusCode=i.statusCode,s.request=n.stripRequest(u),s.response=n.stripResponse(i),""===o&&(o=null);try{if(e=JSON.parse(o)){let t=null;e.error&&(t=e.error),s.code=t?t.code:e.code,s.message=t?t.message:e.message}if(null!=e){let t=(new r.models.ErrorResponse).mapper();s.body=r.deserialize(t,e,"error.body")}}catch(e){return s.message=`Error "${e.message}" occurred in deserializing the responseBody `+`- "${o}" for the default response.`,t(s)}return t(s)}let a=null;if(""===o&&(o=null),200===s){let e=null;try{if(e=JSON.parse(o),a=JSON.parse(o),null!=e){let t=(new r.models.EHNamespaceListResult).mapper();a=r.deserialize(t,e,"result")}}catch(e){let r=new Error(`Error ${e} occurred in deserializing the responseBody - ${o}`);return r.request=n.stripRequest(u),r.response=n.stripResponse(i),t(r)}}return t(null,a,u,i)})}function _listByResourceGroup(e,t,r){let s=this.client;if(r||"function"!=typeof t||(r=t,t=null),!r)throw new Error("callback cannot be null.");try{if(null==e||"string"!=typeof e.valueOf())throw new Error("resourceGroupName cannot be null or undefined and it must be of type string.");if(null!=e){if(e.length>90)throw new Error('"resourceGroupName" should satisfy the constraint - "MaxLength": 90');if(e.length<1)throw new Error('"resourceGroupName" should satisfy the constraint - "MinLength": 1')}if(null===this.client.apiVersion||void 0===this.client.apiVersion||"string"!=typeof this.client.apiVersion.valueOf())throw new Error("this.client.apiVersion cannot be null or undefined and it must be of type string.");if(null===this.client.subscriptionId||void 0===this.client.subscriptionId||"string"!=typeof this.client.subscriptionId.valueOf())throw new Error("this.client.subscriptionId cannot be null or undefined and it must be of type string.");if(null!==this.client.acceptLanguage&&void 0!==this.client.acceptLanguage&&"string"!=typeof this.client.acceptLanguage.valueOf())throw new Error("this.client.acceptLanguage must be of type string.")}catch(e){return r(e)}let a=this.client.baseUri,c=a+(a.endsWith("/")?"":"/")+"subscriptions/{subscriptionId}/resourceGroups/{resourceGroupName}/providers/Microsoft.EventHub/namespaces";c=(c=c.replace("{resourceGroupName}",encodeURIComponent(e))).replace("{subscriptionId}",encodeURIComponent(this.client.subscriptionId));let u=[];u.push("api-version="+encodeURIComponent(this.client.apiVersion)),u.length>0&&(c+="?"+u.join("&"));let l=new o;if(l.method="GET",l.url=c,l.headers={},l.headers["Content-Type"]="application/json; charset=utf-8",this.client.generateClientRequestId&&(l.headers["x-ms-client-request-id"]=i.generateUuid()),void 0!==this.client.acceptLanguage&&null!==this.client.acceptLanguage&&(l.headers["accept-language"]=this.client.acceptLanguage),t)for(let e in t.customHeaders)t.customHeaders.hasOwnProperty(e)&&(l.headers[e]=t.customHeaders[e]);return l.body=null,s.pipeline(l,(e,t,i)=>{if(e)return r(e);let o=t.statusCode;if(200!==o){let e,o=new Error(i);o.statusCode=t.statusCode,o.request=n.stripRequest(l),o.response=n.stripResponse(t),""===i&&(i=null);try{if(e=JSON.parse(i)){let t=null;e.error&&(t=e.error),o.code=t?t.code:e.code,o.message=t?t.message:e.message}if(null!=e){let t=(new s.models.ErrorResponse).mapper();o.body=s.deserialize(t,e,"error.body")}}catch(e){return o.message=`Error "${e.message}" occurred in deserializing the responseBody `+`- "${i}" for the default response.`,r(o)}return r(o)}let a=null;if(""===i&&(i=null),200===o){let e=null;try{if(e=JSON.parse(i),a=JSON.parse(i),null!=e){let t=(new s.models.EHNamespaceListResult).mapper();a=s.deserialize(t,e,"result")}}catch(e){let o=new Error(`Error ${e} occurred in deserializing the responseBody - ${i}`);return o.request=n.stripRequest(l),o.response=n.stripResponse(t),r(o)}}return r(null,a,l,t)})}function _createOrUpdate(e,t,r,i,o){let s=this.client;if(o||"function"!=typeof i||(o=i,i=null),!o)throw new Error("callback cannot be null.");this.beginCreateOrUpdate(e,t,r,i,(e,t,r,a)=>{if(e)return o(e);let c=new n.HttpOperationResponse;c.request=r,c.response=a,c.body=a.body,s.getLongRunningOperationResult(c,i,(e,t)=>{if(e)return o(e);let i=null;r=t.request,a=t.response;let c=t.body;""===c&&(c=null);let u=null;try{if(u=JSON.parse(c),i=JSON.parse(c),null!=u){let e=(new s.models.EHNamespace).mapper();i=s.deserialize(e,u,"result")}}catch(e){let t=new Error(`Error ${e} occurred in deserializing the responseBody - ${c}`);return t.request=n.stripRequest(r),t.response=n.stripResponse(a),o(t)}return o(null,i,r,a)})})}function _deleteMethod(e,t,r,i){let o=this.client;if(i||"function"!=typeof r||(i=r,r=null),!i)throw new Error("callback cannot be null.");this.beginDeleteMethod(e,t,r,(e,t,s,a)=>{if(e)return i(e);let c=new n.HttpOperationResponse;c.request=s,c.response=a,c.body=a.body,o.getLongRunningOperationResult(c,r,(e,t)=>{if(e)return i(e);s=t.request,a=t.response;let r=t.body;return""===r&&(r=null),i(null,null,s,a)})})}function _get(e,t,r,s){let a=this.client;if(s||"function"!=typeof r||(s=r,r=null),!s)throw new Error("callback cannot be null.");try{if(null==e||"string"!=typeof e.valueOf())throw new Error("resourceGroupName cannot be null or undefined and it must be of type string.");if(null!=e){if(e.length>90)throw new Error('"resourceGroupName" should satisfy the constraint - "MaxLength": 90');if(e.length<1)throw new Error('"resourceGroupName" should satisfy the constraint - "MinLength": 1')}if(null==t||"string"!=typeof t.valueOf())throw new Error("namespaceName cannot be null or undefined and it must be of type string.");if(null!=t){if(t.length>50)throw new Error('"namespaceName" should satisfy the constraint - "MaxLength": 50');if(t.length<6)throw new Error('"namespaceName" should satisfy the constraint - "MinLength": 6')}if(null===this.client.apiVersion||void 0===this.client.apiVersion||"string"!=typeof this.client.apiVersion.valueOf())throw new Error("this.client.apiVersion cannot be null or undefined and it must be of type string.");if(null===this.client.subscriptionId||void 0===this.client.subscriptionId||"string"!=typeof this.client.subscriptionId.valueOf())throw new Error("this.client.subscriptionId cannot be null or undefined and it must be of type string.");if(null!==this.client.acceptLanguage&&void 0!==this.client.acceptLanguage&&"string"!=typeof this.client.acceptLanguage.valueOf())throw new Error("this.client.acceptLanguage must be of type string.")}catch(e){return s(e)}let c=this.client.baseUri,u=c+(c.endsWith("/")?"":"/")+"subscriptions/{subscriptionId}/resourceGroups/{resourceGroupName}/providers/Microsoft.EventHub/namespaces/{namespaceName}";u=(u=(u=u.replace("{resourceGroupName}",encodeURIComponent(e))).replace("{namespaceName}",encodeURIComponent(t))).replace("{subscriptionId}",encodeURIComponent(this.client.subscriptionId));let l=[];l.push("api-version="+encodeURIComponent(this.client.apiVersion)),l.length>0&&(u+="?"+l.join("&"));let p=new o;if(p.method="GET",p.url=u,p.headers={},p.headers["Content-Type"]="application/json; charset=utf-8",this.client.generateClientRequestId&&(p.headers["x-ms-client-request-id"]=i.generateUuid()),void 0!==this.client.acceptLanguage&&null!==this.client.acceptLanguage&&(p.headers["accept-language"]=this.client.acceptLanguage),r)for(let e in r.customHeaders)r.customHeaders.hasOwnProperty(e)&&(p.headers[e]=r.customHeaders[e]);return p.body=null,a.pipeline(p,(e,t,r)=>{if(e)return s(e);let i=t.statusCode;if(200!==i&&201!==i){let e,i=new Error(r);i.statusCode=t.statusCode,i.request=n.stripRequest(p),i.response=n.stripResponse(t),""===r&&(r=null);try{if(e=JSON.parse(r)){let t=null;e.error&&(t=e.error),i.code=t?t.code:e.code,i.message=t?t.message:e.message}if(null!=e){let t=(new a.models.ErrorResponse).mapper();i.body=a.deserialize(t,e,"error.body")}}catch(e){return i.message=`Error "${e.message}" occurred in deserializing the responseBody `+`- "${r}" for the default response.`,s(i)}return s(i)}let o=null;if(""===r&&(r=null),200===i){let e=null;try{if(e=JSON.parse(r),o=JSON.parse(r),null!=e){let t=(new a.models.EHNamespace).mapper();o=a.deserialize(t,e,"result")}}catch(e){let i=new Error(`Error ${e} occurred in deserializing the responseBody - ${r}`);return i.request=n.stripRequest(p),i.response=n.stripResponse(t),s(i)}}if(201===i){let e=null;try{if(e=JSON.parse(r),o=JSON.parse(r),null!=e){let t=(new a.models.EHNamespace).mapper();o=a.deserialize(t,e,"result")}}catch(e){let i=new Error(`Error ${e} occurred in deserializing the responseBody - ${r}`);return i.request=n.stripRequest(p),i.response=n.stripResponse(t),s(i)}}return s(null,o,p,t)})}function _update(e,t,r,s,a){let c=this.client;if(a||"function"!=typeof s||(a=s,s=null),!a)throw new Error("callback cannot be null.");try{if(null==e||"string"!=typeof e.valueOf())throw new Error("resourceGroupName cannot be null or undefined and it must be of type string.");if(null!=e){if(e.length>90)throw new Error('"resourceGroupName" should satisfy the constraint - "MaxLength": 90');if(e.length<1)throw new Error('"resourceGroupName" should satisfy the constraint - "MinLength": 1')}if(null==t||"string"!=typeof t.valueOf())throw new Error("namespaceName cannot be null or undefined and it must be of type string.");if(null!=t){if(t.length>50)throw new Error('"namespaceName" should satisfy the constraint - "MaxLength": 50');if(t.length<6)throw new Error('"namespaceName" should satisfy the constraint - "MinLength": 6')}if(null==r)throw new Error("parameters cannot be null or undefined.");if(null===this.client.apiVersion||void 0===this.client.apiVersion||"string"!=typeof this.client.apiVersion.valueOf())throw new Error("this.client.apiVersion cannot be null or undefined and it must be of type string.");if(null===this.client.subscriptionId||void 0===this.client.subscriptionId||"string"!=typeof this.client.subscriptionId.valueOf())throw new Error("this.client.subscriptionId cannot be null or undefined and it must be of type string.");if(null!==this.client.acceptLanguage&&void 0!==this.client.acceptLanguage&&"string"!=typeof this.client.acceptLanguage.valueOf())throw new Error("this.client.acceptLanguage must be of type string.")}catch(e){return a(e)}let u=this.client.baseUri,l=u+(u.endsWith("/")?"":"/")+"subscriptions/{subscriptionId}/resourceGroups/{resourceGroupName}/providers/Microsoft.EventHub/namespaces/{namespaceName}";l=(l=(l=l.replace("{resourceGroupName}",encodeURIComponent(e))).replace("{namespaceName}",encodeURIComponent(t))).replace("{subscriptionId}",encodeURIComponent(this.client.subscriptionId));let p=[];p.push("api-version="+encodeURIComponent(this.client.apiVersion)),p.length>0&&(l+="?"+p.join("&"));let d=new o;if(d.method="PATCH",d.url=l,d.headers={},d.headers["Content-Type"]="application/json; charset=utf-8",this.client.generateClientRequestId&&(d.headers["x-ms-client-request-id"]=i.generateUuid()),void 0!==this.client.acceptLanguage&&null!==this.client.acceptLanguage&&(d.headers["accept-language"]=this.client.acceptLanguage),s)for(let e in s.customHeaders)s.customHeaders.hasOwnProperty(e)&&(d.headers[e]=s.customHeaders[e]);let h=null,f=null;try{if(null!=r){let e=(new c.models.EHNamespace).mapper();f=c.serialize(e,r,"parameters"),h=JSON.stringify(f)}}catch(e){let t=new Error(`Error "${e.message}" occurred in serializing the `+`payload - ${JSON.stringify(r,null,2)}.`);return a(t)}return d.body=h,c.pipeline(d,(e,t,r)=>{if(e)return a(e);let i=t.statusCode;if(200!==i&&201!==i&&202!==i){let e,i=new Error(r);i.statusCode=t.statusCode,i.request=n.stripRequest(d),i.response=n.stripResponse(t),""===r&&(r=null);try{if(e=JSON.parse(r)){let t=null;e.error&&(t=e.error),i.code=t?t.code:e.code,i.message=t?t.message:e.message}if(null!=e){let t=(new c.models.ErrorResponse).mapper();i.body=c.deserialize(t,e,"error.body")}}catch(e){return i.message=`Error "${e.message}" occurred in deserializing the responseBody `+`- "${r}" for the default response.`,a(i)}return a(i)}let o=null;if(""===r&&(r=null),200===i){let e=null;try{if(e=JSON.parse(r),o=JSON.parse(r),null!=e){let t=(new c.models.EHNamespace).mapper();o=c.deserialize(t,e,"result")}}catch(e){let i=new Error(`Error ${e} occurred in deserializing the responseBody - ${r}`);return i.request=n.stripRequest(d),i.response=n.stripResponse(t),a(i)}}if(201===i){let e=null;try{if(e=JSON.parse(r),o=JSON.parse(r),null!=e){let t=(new c.models.EHNamespace).mapper();o=c.deserialize(t,e,"result")}}catch(e){let i=new Error(`Error ${e} occurred in deserializing the responseBody - ${r}`);return i.request=n.stripRequest(d),i.response=n.stripResponse(t),a(i)}}return a(null,o,d,t)})}function _getMessagingPlan(e,t,r,s){let a=this.client;if(s||"function"!=typeof r||(s=r,r=null),!s)throw new Error("callback cannot be null.");try{if(null==e||"string"!=typeof e.valueOf())throw new Error("resourceGroupName cannot be null or undefined and it must be of type string.");if(null!=e){if(e.length>90)throw new Error('"resourceGroupName" should satisfy the constraint - "MaxLength": 90');if(e.length<1)throw new Error('"resourceGroupName" should satisfy the constraint - "MinLength": 1')}if(null==t||"string"!=typeof t.valueOf())throw new Error("namespaceName cannot be null or undefined and it must be of type string.");if(null!=t){if(t.length>50)throw new Error('"namespaceName" should satisfy the constraint - "MaxLength": 50');if(t.length<6)throw new Error('"namespaceName" should satisfy the constraint - "MinLength": 6')}if(null===this.client.apiVersion||void 0===this.client.apiVersion||"string"!=typeof this.client.apiVersion.valueOf())throw new Error("this.client.apiVersion cannot be null or undefined and it must be of type string.");if(null===this.client.subscriptionId||void 0===this.client.subscriptionId||"string"!=typeof this.client.subscriptionId.valueOf())throw new Error("this.client.subscriptionId cannot be null or undefined and it must be of type string.");if(null!==this.client.acceptLanguage&&void 0!==this.client.acceptLanguage&&"string"!=typeof this.client.acceptLanguage.valueOf())throw new Error("this.client.acceptLanguage must be of type string.")}catch(e){return s(e)}let c=this.client.baseUri,u=c+(c.endsWith("/")?"":"/")+"subscriptions/{subscriptionId}/resourceGroups/{resourceGroupName}/providers/Microsoft.EventHub/namespaces/{namespaceName}/messagingplan";u=(u=(u=u.replace("{resourceGroupName}",encodeURIComponent(e))).replace("{namespaceName}",encodeURIComponent(t))).replace("{subscriptionId}",encodeURIComponent(this.client.subscriptionId));let l=[];l.push("api-version="+encodeURIComponent(this.client.apiVersion)),l.length>0&&(u+="?"+l.join("&"));let p=new o;if(p.method="GET",p.url=u,p.headers={},p.headers["Content-Type"]="application/json; charset=utf-8",this.client.generateClientRequestId&&(p.headers["x-ms-client-request-id"]=i.generateUuid()),void 0!==this.client.acceptLanguage&&null!==this.client.acceptLanguage&&(p.headers["accept-language"]=this.client.acceptLanguage),r)for(let e in r.customHeaders)r.customHeaders.hasOwnProperty(e)&&(p.headers[e]=r.customHeaders[e]);return p.body=null,a.pipeline(p,(e,t,r)=>{if(e)return s(e);let i=t.statusCode;if(200!==i){let e,i=new Error(r);i.statusCode=t.statusCode,i.request=n.stripRequest(p),i.response=n.stripResponse(t),""===r&&(r=null);try{if(e=JSON.parse(r)){let t=null;e.error&&(t=e.error),i.code=t?t.code:e.code,i.message=t?t.message:e.message}if(null!=e){let t=(new a.models.ErrorResponse).mapper();i.body=a.deserialize(t,e,"error.body")}}catch(e){return i.message=`Error "${e.message}" occurred in deserializing the responseBody `+`- "${r}" for the default response.`,s(i)}return s(i)}let o=null;if(""===r&&(r=null),200===i){let e=null;try{if(e=JSON.parse(r),o=JSON.parse(r),null!=e){let t=(new a.models.MessagingPlan).mapper();o=a.deserialize(t,e,"result")}}catch(e){let i=new Error(`Error ${e} occurred in deserializing the responseBody - ${r}`);return i.request=n.stripRequest(p),i.response=n.stripResponse(t),s(i)}}return s(null,o,p,t)})}function _listAuthorizationRules(e,t,r,s){let a=this.client;if(s||"function"!=typeof r||(s=r,r=null),!s)throw new Error("callback cannot be null.");try{if(null==e||"string"!=typeof e.valueOf())throw new Error("resourceGroupName cannot be null or undefined and it must be of type string.");if(null!=e){if(e.length>90)throw new Error('"resourceGroupName" should satisfy the constraint - "MaxLength": 90');if(e.length<1)throw new Error('"resourceGroupName" should satisfy the constraint - "MinLength": 1')}if(null==t||"string"!=typeof t.valueOf())throw new Error("namespaceName cannot be null or undefined and it must be of type string.");if(null!=t){if(t.length>50)throw new Error('"namespaceName" should satisfy the constraint - "MaxLength": 50');if(t.length<6)throw new Error('"namespaceName" should satisfy the constraint - "MinLength": 6')}if(null===this.client.apiVersion||void 0===this.client.apiVersion||"string"!=typeof this.client.apiVersion.valueOf())throw new Error("this.client.apiVersion cannot be null or undefined and it must be of type string.");if(null===this.client.subscriptionId||void 0===this.client.subscriptionId||"string"!=typeof this.client.subscriptionId.valueOf())throw new Error("this.client.subscriptionId cannot be null or undefined and it must be of type string.");if(null!==this.client.acceptLanguage&&void 0!==this.client.acceptLanguage&&"string"!=typeof this.client.acceptLanguage.valueOf())throw new Error("this.client.acceptLanguage must be of type string.")}catch(e){return s(e)}let c=this.client.baseUri,u=c+(c.endsWith("/")?"":"/")+"subscriptions/{subscriptionId}/resourceGroups/{resourceGroupName}/providers/Microsoft.EventHub/namespaces/{namespaceName}/AuthorizationRules";u=(u=(u=u.replace("{resourceGroupName}",encodeURIComponent(e))).replace("{namespaceName}",encodeURIComponent(t))).replace("{subscriptionId}",encodeURIComponent(this.client.subscriptionId));let l=[];l.push("api-version="+encodeURIComponent(this.client.apiVersion)),l.length>0&&(u+="?"+l.join("&"));let p=new o;if(p.method="GET",p.url=u,p.headers={},p.headers["Content-Type"]="application/json; charset=utf-8",this.client.generateClientRequestId&&(p.headers["x-ms-client-request-id"]=i.generateUuid()),void 0!==this.client.acceptLanguage&&null!==this.client.acceptLanguage&&(p.headers["accept-language"]=this.client.acceptLanguage),r)for(let e in r.customHeaders)r.customHeaders.hasOwnProperty(e)&&(p.headers[e]=r.customHeaders[e]);return p.body=null,a.pipeline(p,(e,t,r)=>{if(e)return s(e);let i=t.statusCode;if(200!==i){let e,i=new Error(r);i.statusCode=t.statusCode,i.request=n.stripRequest(p),i.response=n.stripResponse(t),""===r&&(r=null);try{if(e=JSON.parse(r)){let t=null;e.error&&(t=e.error),i.code=t?t.code:e.code,i.message=t?t.message:e.message}if(null!=e){let t=(new a.models.ErrorResponse).mapper();i.body=a.deserialize(t,e,"error.body")}}catch(e){return i.message=`Error "${e.message}" occurred in deserializing the responseBody `+`- "${r}" for the default response.`,s(i)}return s(i)}let o=null;if(""===r&&(r=null),200===i){let e=null;try{if(e=JSON.parse(r),o=JSON.parse(r),null!=e){let t=(new a.models.AuthorizationRuleListResult).mapper();o=a.deserialize(t,e,"result")}}catch(e){let i=new Error(`Error ${e} occurred in deserializing the responseBody - ${r}`);return i.request=n.stripRequest(p),i.response=n.stripResponse(t),s(i)}}return s(null,o,p,t)})}function _createOrUpdateAuthorizationRule(e,t,r,s,a,c){let u=this.client;if(c||"function"!=typeof a||(c=a,a=null),!c)throw new Error("callback cannot be null.");try{if(null==e||"string"!=typeof e.valueOf())throw new Error("resourceGroupName cannot be null or undefined and it must be of type string.");if(null!=e){if(e.length>90)throw new Error('"resourceGroupName" should satisfy the constraint - "MaxLength": 90');if(e.length<1)throw new Error('"resourceGroupName" should satisfy the constraint - "MinLength": 1')}if(null==t||"string"!=typeof t.valueOf())throw new Error("namespaceName cannot be null or undefined and it must be of type string.");if(null!=t){if(t.length>50)throw new Error('"namespaceName" should satisfy the constraint - "MaxLength": 50');if(t.length<6)throw new Error('"namespaceName" should satisfy the constraint - "MinLength": 6')}if(null==r||"string"!=typeof r.valueOf())throw new Error("authorizationRuleName cannot be null or undefined and it must be of type string.");if(null!=r&&r.length<1)throw new Error('"authorizationRuleName" should satisfy the constraint - "MinLength": 1');if(null==s)throw new Error("parameters cannot be null or undefined.");if(null===this.client.apiVersion||void 0===this.client.apiVersion||"string"!=typeof this.client.apiVersion.valueOf())throw new Error("this.client.apiVersion cannot be null or undefined and it must be of type string.");if(null===this.client.subscriptionId||void 0===this.client.subscriptionId||"string"!=typeof this.client.subscriptionId.valueOf())throw new Error("this.client.subscriptionId cannot be null or undefined and it must be of type string.");if(null!==this.client.acceptLanguage&&void 0!==this.client.acceptLanguage&&"string"!=typeof this.client.acceptLanguage.valueOf())throw new Error("this.client.acceptLanguage must be of type string.")}catch(e){return c(e)}let l=this.client.baseUri,p=l+(l.endsWith("/")?"":"/")+"subscriptions/{subscriptionId}/resourceGroups/{resourceGroupName}/providers/Microsoft.EventHub/namespaces/{namespaceName}/AuthorizationRules/{authorizationRuleName}";p=(p=(p=(p=p.replace("{resourceGroupName}",encodeURIComponent(e))).replace("{namespaceName}",encodeURIComponent(t))).replace("{authorizationRuleName}",encodeURIComponent(r))).replace("{subscriptionId}",encodeURIComponent(this.client.subscriptionId));let d=[];d.push("api-version="+encodeURIComponent(this.client.apiVersion)),d.length>0&&(p+="?"+d.join("&"));let h=new o;if(h.method="PUT",h.url=p,h.headers={},h.headers["Content-Type"]="application/json; charset=utf-8",this.client.generateClientRequestId&&(h.headers["x-ms-client-request-id"]=i.generateUuid()),void 0!==this.client.acceptLanguage&&null!==this.client.acceptLanguage&&(h.headers["accept-language"]=this.client.acceptLanguage),a)for(let e in a.customHeaders)a.customHeaders.hasOwnProperty(e)&&(h.headers[e]=a.customHeaders[e]);let f=null,m=null;try{if(null!=s){let e=(new u.models.AuthorizationRule).mapper();m=u.serialize(e,s,"parameters"),f=JSON.stringify(m)}}catch(e){let t=new Error(`Error "${e.message}" occurred in serializing the `+`payload - ${JSON.stringify(s,null,2)}.`);return c(t)}return h.body=f,u.pipeline(h,(e,t,r)=>{if(e)return c(e);let i=t.statusCode;if(200!==i){let e,i=new Error(r);i.statusCode=t.statusCode,i.request=n.stripRequest(h),i.response=n.stripResponse(t),""===r&&(r=null);try{if(e=JSON.parse(r)){let t=null;e.error&&(t=e.error),i.code=t?t.code:e.code,i.message=t?t.message:e.message}if(null!=e){let t=(new u.models.ErrorResponse).mapper();i.body=u.deserialize(t,e,"error.body")}}catch(e){return i.message=`Error "${e.message}" occurred in deserializing the responseBody `+`- "${r}" for the default response.`,c(i)}return c(i)}let o=null;if(""===r&&(r=null),200===i){let e=null;try{if(e=JSON.parse(r),o=JSON.parse(r),null!=e){let t=(new u.models.AuthorizationRule).mapper();o=u.deserialize(t,e,"result")}}catch(e){let i=new Error(`Error ${e} occurred in deserializing the responseBody - ${r}`);return i.request=n.stripRequest(h),i.response=n.stripResponse(t),c(i)}}return c(null,o,h,t)})}function _deleteAuthorizationRule(e,t,r,s,a){let c=this.client;if(a||"function"!=typeof s||(a=s,s=null),!a)throw new Error("callback cannot be null.");try{if(null==e||"string"!=typeof e.valueOf())throw new Error("resourceGroupName cannot be null or undefined and it must be of type string.");if(null!=e){if(e.length>90)throw new Error('"resourceGroupName" should satisfy the constraint - "MaxLength": 90');if(e.length<1)throw new Error('"resourceGroupName" should satisfy the constraint - "MinLength": 1')}if(null==t||"string"!=typeof t.valueOf())throw new Error("namespaceName cannot be null or undefined and it must be of type string.");if(null!=t){if(t.length>50)throw new Error('"namespaceName" should satisfy the constraint - "MaxLength": 50');if(t.length<6)throw new Error('"namespaceName" should satisfy the constraint - "MinLength": 6')}if(null==r||"string"!=typeof r.valueOf())throw new Error("authorizationRuleName cannot be null or undefined and it must be of type string.");if(null!=r&&r.length<1)throw new Error('"authorizationRuleName" should satisfy the constraint - "MinLength": 1');if(null===this.client.apiVersion||void 0===this.client.apiVersion||"string"!=typeof this.client.apiVersion.valueOf())throw new Error("this.client.apiVersion cannot be null or undefined and it must be of type string.");if(null===this.client.subscriptionId||void 0===this.client.subscriptionId||"string"!=typeof this.client.subscriptionId.valueOf())throw new Error("this.client.subscriptionId cannot be null or undefined and it must be of type string.");if(null!==this.client.acceptLanguage&&void 0!==this.client.acceptLanguage&&"string"!=typeof this.client.acceptLanguage.valueOf())throw new Error("this.client.acceptLanguage must be of type string.")}catch(e){return a(e)}let u=this.client.baseUri,l=u+(u.endsWith("/")?"":"/")+"subscriptions/{subscriptionId}/resourceGroups/{resourceGroupName}/providers/Microsoft.EventHub/namespaces/{namespaceName}/AuthorizationRules/{authorizationRuleName}";l=(l=(l=(l=l.replace("{resourceGroupName}",encodeURIComponent(e))).replace("{namespaceName}",encodeURIComponent(t))).replace("{authorizationRuleName}",encodeURIComponent(r))).replace("{subscriptionId}",encodeURIComponent(this.client.subscriptionId));let p=[];p.push("api-version="+encodeURIComponent(this.client.apiVersion)),p.length>0&&(l+="?"+p.join("&"));let d=new o;if(d.method="DELETE",d.url=l,d.headers={},d.headers["Content-Type"]="application/json; charset=utf-8",this.client.generateClientRequestId&&(d.headers["x-ms-client-request-id"]=i.generateUuid()),void 0!==this.client.acceptLanguage&&null!==this.client.acceptLanguage&&(d.headers["accept-language"]=this.client.acceptLanguage),s)for(let e in s.customHeaders)s.customHeaders.hasOwnProperty(e)&&(d.headers[e]=s.customHeaders[e]);return d.body=null,c.pipeline(d,(e,t,r)=>{if(e)return a(e);let i=t.statusCode;if(200!==i&&204!==i){let e,i=new Error(r);i.statusCode=t.statusCode,i.request=n.stripRequest(d),i.response=n.stripResponse(t),""===r&&(r=null);try{if(e=JSON.parse(r)){let t=null;e.error&&(t=e.error),i.code=t?t.code:e.code,i.message=t?t.message:e.message}if(null!=e){let t=(new c.models.ErrorResponse).mapper();i.body=c.deserialize(t,e,"error.body")}}catch(e){return i.message=`Error "${e.message}" occurred in deserializing the responseBody `+`- "${r}" for the default response.`,a(i)}return a(i)}return""===r&&(r=null),a(null,null,d,t)})}function _getAuthorizationRule(e,t,r,s,a){let c=this.client;if(a||"function"!=typeof s||(a=s,s=null),!a)throw new Error("callback cannot be null.");try{if(null==e||"string"!=typeof e.valueOf())throw new Error("resourceGroupName cannot be null or undefined and it must be of type string.");if(null!=e){if(e.length>90)throw new Error('"resourceGroupName" should satisfy the constraint - "MaxLength": 90');if(e.length<1)throw new Error('"resourceGroupName" should satisfy the constraint - "MinLength": 1')}if(null==t||"string"!=typeof t.valueOf())throw new Error("namespaceName cannot be null or undefined and it must be of type string.");if(null!=t){if(t.length>50)throw new Error('"namespaceName" should satisfy the constraint - "MaxLength": 50');if(t.length<6)throw new Error('"namespaceName" should satisfy the constraint - "MinLength": 6')}if(null==r||"string"!=typeof r.valueOf())throw new Error("authorizationRuleName cannot be null or undefined and it must be of type string.");if(null!=r&&r.length<1)throw new Error('"authorizationRuleName" should satisfy the constraint - "MinLength": 1');if(null===this.client.apiVersion||void 0===this.client.apiVersion||"string"!=typeof this.client.apiVersion.valueOf())throw new Error("this.client.apiVersion cannot be null or undefined and it must be of type string.");if(null===this.client.subscriptionId||void 0===this.client.subscriptionId||"string"!=typeof this.client.subscriptionId.valueOf())throw new Error("this.client.subscriptionId cannot be null or undefined and it must be of type string.");if(null!==this.client.acceptLanguage&&void 0!==this.client.acceptLanguage&&"string"!=typeof this.client.acceptLanguage.valueOf())throw new Error("this.client.acceptLanguage must be of type string.")}catch(e){return a(e)}let u=this.client.baseUri,l=u+(u.endsWith("/")?"":"/")+"subscriptions/{subscriptionId}/resourceGroups/{resourceGroupName}/providers/Microsoft.EventHub/namespaces/{namespaceName}/AuthorizationRules/{authorizationRuleName}";l=(l=(l=(l=l.replace("{resourceGroupName}",encodeURIComponent(e))).replace("{namespaceName}",encodeURIComponent(t))).replace("{authorizationRuleName}",encodeURIComponent(r))).replace("{subscriptionId}",encodeURIComponent(this.client.subscriptionId));let p=[];p.push("api-version="+encodeURIComponent(this.client.apiVersion)),p.length>0&&(l+="?"+p.join("&"));let d=new o;if(d.method="GET",d.url=l,d.headers={},d.headers["Content-Type"]="application/json; charset=utf-8",this.client.generateClientRequestId&&(d.headers["x-ms-client-request-id"]=i.generateUuid()),void 0!==this.client.acceptLanguage&&null!==this.client.acceptLanguage&&(d.headers["accept-language"]=this.client.acceptLanguage),s)for(let e in s.customHeaders)s.customHeaders.hasOwnProperty(e)&&(d.headers[e]=s.customHeaders[e]);return d.body=null,c.pipeline(d,(e,t,r)=>{if(e)return a(e);let i=t.statusCode;if(200!==i){let e,i=new Error(r);i.statusCode=t.statusCode,i.request=n.stripRequest(d),i.response=n.stripResponse(t),""===r&&(r=null);try{if(e=JSON.parse(r)){let t=null;e.error&&(t=e.error),i.code=t?t.code:e.code,i.message=t?t.message:e.message}if(null!=e){let t=(new c.models.ErrorResponse).mapper();i.body=c.deserialize(t,e,"error.body")}}catch(e){return i.message=`Error "${e.message}" occurred in deserializing the responseBody `+`- "${r}" for the default response.`,a(i)}return a(i)}let o=null;if(""===r&&(r=null),200===i){let e=null;try{if(e=JSON.parse(r),o=JSON.parse(r),null!=e){let t=(new c.models.AuthorizationRule).mapper();o=c.deserialize(t,e,"result")}}catch(e){let i=new Error(`Error ${e} occurred in deserializing the responseBody - ${r}`);return i.request=n.stripRequest(d),i.response=n.stripResponse(t),a(i)}}return a(null,o,d,t)})}function _listKeys(e,t,r,s,a){let c=this.client;if(a||"function"!=typeof s||(a=s,s=null),!a)throw new Error("callback cannot be null.");try{if(null==e||"string"!=typeof e.valueOf())throw new Error("resourceGroupName cannot be null or undefined and it must be of type string.");if(null!=e){if(e.length>90)throw new Error('"resourceGroupName" should satisfy the constraint - "MaxLength": 90');if(e.length<1)throw new Error('"resourceGroupName" should satisfy the constraint - "MinLength": 1')}if(null==t||"string"!=typeof t.valueOf())throw new Error("namespaceName cannot be null or undefined and it must be of type string.");if(null!=t){if(t.length>50)throw new Error('"namespaceName" should satisfy the constraint - "MaxLength": 50');if(t.length<6)throw new Error('"namespaceName" should satisfy the constraint - "MinLength": 6')}if(null==r||"string"!=typeof r.valueOf())throw new Error("authorizationRuleName cannot be null or undefined and it must be of type string.");if(null!=r&&r.length<1)throw new Error('"authorizationRuleName" should satisfy the constraint - "MinLength": 1');if(null===this.client.apiVersion||void 0===this.client.apiVersion||"string"!=typeof this.client.apiVersion.valueOf())throw new Error("this.client.apiVersion cannot be null or undefined and it must be of type string.");if(null===this.client.subscriptionId||void 0===this.client.subscriptionId||"string"!=typeof this.client.subscriptionId.valueOf())throw new Error("this.client.subscriptionId cannot be null or undefined and it must be of type string.");if(null!==this.client.acceptLanguage&&void 0!==this.client.acceptLanguage&&"string"!=typeof this.client.acceptLanguage.valueOf())throw new Error("this.client.acceptLanguage must be of type string.")}catch(e){return a(e)}let u=this.client.baseUri,l=u+(u.endsWith("/")?"":"/")+"subscriptions/{subscriptionId}/resourceGroups/{resourceGroupName}/providers/Microsoft.EventHub/namespaces/{namespaceName}/AuthorizationRules/{authorizationRuleName}/listKeys";l=(l=(l=(l=l.replace("{resourceGroupName}",encodeURIComponent(e))).replace("{namespaceName}",encodeURIComponent(t))).replace("{authorizationRuleName}",encodeURIComponent(r))).replace("{subscriptionId}",encodeURIComponent(this.client.subscriptionId));let p=[];p.push("api-version="+encodeURIComponent(this.client.apiVersion)),p.length>0&&(l+="?"+p.join("&"));let d=new o;if(d.method="POST",d.url=l,d.headers={},d.headers["Content-Type"]="application/json; charset=utf-8",this.client.generateClientRequestId&&(d.headers["x-ms-client-request-id"]=i.generateUuid()),void 0!==this.client.acceptLanguage&&null!==this.client.acceptLanguage&&(d.headers["accept-language"]=this.client.acceptLanguage),s)for(let e in s.customHeaders)s.customHeaders.hasOwnProperty(e)&&(d.headers[e]=s.customHeaders[e]);return d.body=null,c.pipeline(d,(e,t,r)=>{if(e)return a(e);let i=t.statusCode;if(200!==i){let e,i=new Error(r);i.statusCode=t.statusCode,i.request=n.stripRequest(d),i.response=n.stripResponse(t),""===r&&(r=null);try{if(e=JSON.parse(r)){let t=null;e.error&&(t=e.error),i.code=t?t.code:e.code,i.message=t?t.message:e.message}if(null!=e){let t=(new c.models.ErrorResponse).mapper();i.body=c.deserialize(t,e,"error.body")}}catch(e){return i.message=`Error "${e.message}" occurred in deserializing the responseBody `+`- "${r}" for the default response.`,a(i)}return a(i)}let o=null;if(""===r&&(r=null),200===i){let e=null;try{if(e=JSON.parse(r),o=JSON.parse(r),null!=e){let t=(new c.models.AccessKeys).mapper();o=c.deserialize(t,e,"result")}}catch(e){let i=new Error(`Error ${e} occurred in deserializing the responseBody - ${r}`);return i.request=n.stripRequest(d),i.response=n.stripResponse(t),a(i)}}return a(null,o,d,t)})}function _regenerateKeys(e,t,r,s,a,c){let u=this.client;if(c||"function"!=typeof a||(c=a,a=null),!c)throw new Error("callback cannot be null.");try{if(null==e||"string"!=typeof e.valueOf())throw new Error("resourceGroupName cannot be null or undefined and it must be of type string.");if(null!=e){if(e.length>90)throw new Error('"resourceGroupName" should satisfy the constraint - "MaxLength": 90');if(e.length<1)throw new Error('"resourceGroupName" should satisfy the constraint - "MinLength": 1')}if(null==t||"string"!=typeof t.valueOf())throw new Error("namespaceName cannot be null or undefined and it must be of type string.");if(null!=t){if(t.length>50)throw new Error('"namespaceName" should satisfy the constraint - "MaxLength": 50');if(t.length<6)throw new Error('"namespaceName" should satisfy the constraint - "MinLength": 6')}if(null==r||"string"!=typeof r.valueOf())throw new Error("authorizationRuleName cannot be null or undefined and it must be of type string.");if(null!=r&&r.length<1)throw new Error('"authorizationRuleName" should satisfy the constraint - "MinLength": 1');if(null==s)throw new Error("parameters cannot be null or undefined.");if(null===this.client.apiVersion||void 0===this.client.apiVersion||"string"!=typeof this.client.apiVersion.valueOf())throw new Error("this.client.apiVersion cannot be null or undefined and it must be of type string.");if(null===this.client.subscriptionId||void 0===this.client.subscriptionId||"string"!=typeof this.client.subscriptionId.valueOf())throw new Error("this.client.subscriptionId cannot be null or undefined and it must be of type string.");if(null!==this.client.acceptLanguage&&void 0!==this.client.acceptLanguage&&"string"!=typeof this.client.acceptLanguage.valueOf())throw new Error("this.client.acceptLanguage must be of type string.")}catch(e){return c(e)}let l=this.client.baseUri,p=l+(l.endsWith("/")?"":"/")+"subscriptions/{subscriptionId}/resourceGroups/{resourceGroupName}/providers/Microsoft.EventHub/namespaces/{namespaceName}/AuthorizationRules/{authorizationRuleName}/regenerateKeys";p=(p=(p=(p=p.replace("{resourceGroupName}",encodeURIComponent(e))).replace("{namespaceName}",encodeURIComponent(t))).replace("{authorizationRuleName}",encodeURIComponent(r))).replace("{subscriptionId}",encodeURIComponent(this.client.subscriptionId));let d=[];d.push("api-version="+encodeURIComponent(this.client.apiVersion)),d.length>0&&(p+="?"+d.join("&"));let h=new o;if(h.method="POST",h.url=p,h.headers={},h.headers["Content-Type"]="application/json; charset=utf-8",this.client.generateClientRequestId&&(h.headers["x-ms-client-request-id"]=i.generateUuid()),void 0!==this.client.acceptLanguage&&null!==this.client.acceptLanguage&&(h.headers["accept-language"]=this.client.acceptLanguage),a)for(let e in a.customHeaders)a.customHeaders.hasOwnProperty(e)&&(h.headers[e]=a.customHeaders[e]);let f=null,m=null;try{if(null!=s){let e=(new u.models.RegenerateAccessKeyParameters).mapper();m=u.serialize(e,s,"parameters"),f=JSON.stringify(m)}}catch(e){let t=new Error(`Error "${e.message}" occurred in serializing the `+`payload - ${JSON.stringify(s,null,2)}.`);return c(t)}return h.body=f,u.pipeline(h,(e,t,r)=>{if(e)return c(e);let i=t.statusCode;if(200!==i){let e,i=new Error(r);i.statusCode=t.statusCode,i.request=n.stripRequest(h),i.response=n.stripResponse(t),""===r&&(r=null);try{if(e=JSON.parse(r)){let t=null;e.error&&(t=e.error),i.code=t?t.code:e.code,i.message=t?t.message:e.message}if(null!=e){let t=(new u.models.ErrorResponse).mapper();i.body=u.deserialize(t,e,"error.body")}}catch(e){return i.message=`Error "${e.message}" occurred in deserializing the responseBody `+`- "${r}" for the default response.`,c(i)}return c(i)}let o=null;if(""===r&&(r=null),200===i){let e=null;try{if(e=JSON.parse(r),o=JSON.parse(r),null!=e){let t=(new u.models.AccessKeys).mapper();o=u.deserialize(t,e,"result")}}catch(e){let i=new Error(`Error ${e} occurred in deserializing the responseBody - ${r}`);return i.request=n.stripRequest(h),i.response=n.stripResponse(t),c(i)}}return c(null,o,h,t)})}function _createOrUpdateNetworkRuleSet(e,t,r,s,a){let c=this.client;if(a||"function"!=typeof s||(a=s,s=null),!a)throw new Error("callback cannot be null.");try{if(null==e||"string"!=typeof e.valueOf())throw new Error("resourceGroupName cannot be null or undefined and it must be of type string.");if(null!=e){if(e.length>90)throw new Error('"resourceGroupName" should satisfy the constraint - "MaxLength": 90');if(e.length<1)throw new Error('"resourceGroupName" should satisfy the constraint - "MinLength": 1')}if(null==t||"string"!=typeof t.valueOf())throw new Error("namespaceName cannot be null or undefined and it must be of type string.");if(null!=t){if(t.length>50)throw new Error('"namespaceName" should satisfy the constraint - "MaxLength": 50');if(t.length<6)throw new Error('"namespaceName" should satisfy the constraint - "MinLength": 6')}if(null===this.client.apiVersion||void 0===this.client.apiVersion||"string"!=typeof this.client.apiVersion.valueOf())throw new Error("this.client.apiVersion cannot be null or undefined and it must be of type string.");if(null===this.client.subscriptionId||void 0===this.client.subscriptionId||"string"!=typeof this.client.subscriptionId.valueOf())throw new Error("this.client.subscriptionId cannot be null or undefined and it must be of type string.");if(null==r)throw new Error("parameters cannot be null or undefined.");if(null!==this.client.acceptLanguage&&void 0!==this.client.acceptLanguage&&"string"!=typeof this.client.acceptLanguage.valueOf())throw new Error("this.client.acceptLanguage must be of type string.")}catch(e){return a(e)}let u=this.client.baseUri,l=u+(u.endsWith("/")?"":"/")+"subscriptions/{subscriptionId}/resourceGroups/{resourceGroupName}/providers/Microsoft.EventHub/namespaces/{namespaceName}/networkRuleSets/default";l=(l=(l=l.replace("{resourceGroupName}",encodeURIComponent(e))).replace("{namespaceName}",encodeURIComponent(t))).replace("{subscriptionId}",encodeURIComponent(this.client.subscriptionId));let p=[];p.push("api-version="+encodeURIComponent(this.client.apiVersion)),p.length>0&&(l+="?"+p.join("&"));let d=new o;if(d.method="PUT",d.url=l,d.headers={},d.headers["Content-Type"]="application/json; charset=utf-8",this.client.generateClientRequestId&&(d.headers["x-ms-client-request-id"]=i.generateUuid()),void 0!==this.client.acceptLanguage&&null!==this.client.acceptLanguage&&(d.headers["accept-language"]=this.client.acceptLanguage),s)for(let e in s.customHeaders)s.customHeaders.hasOwnProperty(e)&&(d.headers[e]=s.customHeaders[e]);let h=null,f=null;try{if(null!=r){let e=(new c.models.NetworkRuleSet).mapper();f=c.serialize(e,r,"parameters"),h=JSON.stringify(f)}}catch(e){let t=new Error(`Error "${e.message}" occurred in serializing the `+`payload - ${JSON.stringify(r,null,2)}.`);return a(t)}return d.body=h,c.pipeline(d,(e,t,r)=>{if(e)return a(e);let i=t.statusCode;if(200!==i){let e,i=new Error(r);i.statusCode=t.statusCode,i.request=n.stripRequest(d),i.response=n.stripResponse(t),""===r&&(r=null);try{if(e=JSON.parse(r)){let t=null;e.error&&(t=e.error),i.code=t?t.code:e.code,i.message=t?t.message:e.message}if(null!=e){let t=(new c.models.ErrorResponse).mapper();i.body=c.deserialize(t,e,"error.body")}}catch(e){return i.message=`Error "${e.message}" occurred in deserializing the responseBody `+`- "${r}" for the default response.`,a(i)}return a(i)}let o=null;if(""===r&&(r=null),200===i){let e=null;try{if(e=JSON.parse(r),o=JSON.parse(r),null!=e){let t=(new c.models.NetworkRuleSet).mapper();o=c.deserialize(t,e,"result")}}catch(e){let i=new Error(`Error ${e} occurred in deserializing the responseBody - ${r}`);return i.request=n.stripRequest(d),i.response=n.stripResponse(t),a(i)}}return a(null,o,d,t)})}function _getNetworkRuleSet(e,t,r,s){let a=this.client;if(s||"function"!=typeof r||(s=r,r=null),!s)throw new Error("callback cannot be null.");try{if(null==e||"string"!=typeof e.valueOf())throw new Error("resourceGroupName cannot be null or undefined and it must be of type string.");if(null!=e){if(e.length>90)throw new Error('"resourceGroupName" should satisfy the constraint - "MaxLength": 90');if(e.length<1)throw new Error('"resourceGroupName" should satisfy the constraint - "MinLength": 1')}if(null==t||"string"!=typeof t.valueOf())throw new Error("namespaceName cannot be null or undefined and it must be of type string.");if(null!=t){if(t.length>50)throw new Error('"namespaceName" should satisfy the constraint - "MaxLength": 50');if(t.length<6)throw new Error('"namespaceName" should satisfy the constraint - "MinLength": 6')}if(null===this.client.apiVersion||void 0===this.client.apiVersion||"string"!=typeof this.client.apiVersion.valueOf())throw new Error("this.client.apiVersion cannot be null or undefined and it must be of type string.");if(null===this.client.subscriptionId||void 0===this.client.subscriptionId||"string"!=typeof this.client.subscriptionId.valueOf())throw new Error("this.client.subscriptionId cannot be null or undefined and it must be of type string.");if(null!==this.client.acceptLanguage&&void 0!==this.client.acceptLanguage&&"string"!=typeof this.client.acceptLanguage.valueOf())throw new Error("this.client.acceptLanguage must be of type string.")}catch(e){return s(e)}let c=this.client.baseUri,u=c+(c.endsWith("/")?"":"/")+"subscriptions/{subscriptionId}/resourceGroups/{resourceGroupName}/providers/Microsoft.EventHub/namespaces/{namespaceName}/networkRuleSets/default";u=(u=(u=u.replace("{resourceGroupName}",encodeURIComponent(e))).replace("{namespaceName}",encodeURIComponent(t))).replace("{subscriptionId}",encodeURIComponent(this.client.subscriptionId));let l=[];l.push("api-version="+encodeURIComponent(this.client.apiVersion)),l.length>0&&(u+="?"+l.join("&"));let p=new o;if(p.method="GET",p.url=u,p.headers={},p.headers["Content-Type"]="application/json; charset=utf-8",this.client.generateClientRequestId&&(p.headers["x-ms-client-request-id"]=i.generateUuid()),void 0!==this.client.acceptLanguage&&null!==this.client.acceptLanguage&&(p.headers["accept-language"]=this.client.acceptLanguage),r)for(let e in r.customHeaders)r.customHeaders.hasOwnProperty(e)&&(p.headers[e]=r.customHeaders[e]);return p.body=null,a.pipeline(p,(e,t,r)=>{if(e)return s(e);let i=t.statusCode;if(200!==i){let e,i=new Error(r);i.statusCode=t.statusCode,i.request=n.stripRequest(p),i.response=n.stripResponse(t),""===r&&(r=null);try{if(e=JSON.parse(r)){let t=null;e.error&&(t=e.error),i.code=t?t.code:e.code,i.message=t?t.message:e.message}if(null!=e){let t=(new a.models.ErrorResponse).mapper();i.body=a.deserialize(t,e,"error.body")}}catch(e){return i.message=`Error "${e.message}" occurred in deserializing the responseBody `+`- "${r}" for the default response.`,s(i)}return s(i)}let o=null;if(""===r&&(r=null),200===i){let e=null;try{if(e=JSON.parse(r),o=JSON.parse(r),null!=e){let t=(new a.models.NetworkRuleSet).mapper();o=a.deserialize(t,e,"result")}}catch(e){let i=new Error(`Error ${e} occurred in deserializing the responseBody - ${r}`);return i.request=n.stripRequest(p),i.response=n.stripResponse(t),s(i)}}return s(null,o,p,t)})}function _beginCreateOrUpdate(e,t,r,s,a){let c=this.client;if(a||"function"!=typeof s||(a=s,s=null),!a)throw new Error("callback cannot be null.");try{if(null==e||"string"!=typeof e.valueOf())throw new Error("resourceGroupName cannot be null or undefined and it must be of type string.");if(null!=e){if(e.length>90)throw new Error('"resourceGroupName" should satisfy the constraint - "MaxLength": 90');if(e.length<1)throw new Error('"resourceGroupName" should satisfy the constraint - "MinLength": 1')}if(null==t||"string"!=typeof t.valueOf())throw new Error("namespaceName cannot be null or undefined and it must be of type string.");if(null!=t){if(t.length>50)throw new Error('"namespaceName" should satisfy the constraint - "MaxLength": 50');if(t.length<6)throw new Error('"namespaceName" should satisfy the constraint - "MinLength": 6')}if(null==r)throw new Error("parameters cannot be null or undefined.");if(null===this.client.apiVersion||void 0===this.client.apiVersion||"string"!=typeof this.client.apiVersion.valueOf())throw new Error("this.client.apiVersion cannot be null or undefined and it must be of type string.");if(null===this.client.subscriptionId||void 0===this.client.subscriptionId||"string"!=typeof this.client.subscriptionId.valueOf())throw new Error("this.client.subscriptionId cannot be null or undefined and it must be of type string.");if(null!==this.client.acceptLanguage&&void 0!==this.client.acceptLanguage&&"string"!=typeof this.client.acceptLanguage.valueOf())throw new Error("this.client.acceptLanguage must be of type string.")}catch(e){return a(e)}let u=this.client.baseUri,l=u+(u.endsWith("/")?"":"/")+"subscriptions/{subscriptionId}/resourceGroups/{resourceGroupName}/providers/Microsoft.EventHub/namespaces/{namespaceName}";l=(l=(l=l.replace("{resourceGroupName}",encodeURIComponent(e))).replace("{namespaceName}",encodeURIComponent(t))).replace("{subscriptionId}",encodeURIComponent(this.client.subscriptionId));let p=[];p.push("api-version="+encodeURIComponent(this.client.apiVersion)),p.length>0&&(l+="?"+p.join("&"));let d=new o;if(d.method="PUT",d.url=l,d.headers={},d.headers["Content-Type"]="application/json; charset=utf-8",this.client.generateClientRequestId&&(d.headers["x-ms-client-request-id"]=i.generateUuid()),void 0!==this.client.acceptLanguage&&null!==this.client.acceptLanguage&&(d.headers["accept-language"]=this.client.acceptLanguage),s)for(let e in s.customHeaders)s.customHeaders.hasOwnProperty(e)&&(d.headers[e]=s.customHeaders[e]);let h=null,f=null;try{if(null!=r){let e=(new c.models.EHNamespace).mapper();f=c.serialize(e,r,"parameters"),h=JSON.stringify(f)}}catch(e){let t=new Error(`Error "${e.message}" occurred in serializing the `+`payload - ${JSON.stringify(r,null,2)}.`);return a(t)}return d.body=h,c.pipeline(d,(e,t,r)=>{if(e)return a(e);let i=t.statusCode;if(200!==i&&201!==i&&202!==i){let e,i=new Error(r);i.statusCode=t.statusCode,i.request=n.stripRequest(d),i.response=n.stripResponse(t),""===r&&(r=null);try{if(e=JSON.parse(r)){let t=null;e.error&&(t=e.error),i.code=t?t.code:e.code,i.message=t?t.message:e.message}if(null!=e){let t=(new c.models.ErrorResponse).mapper();i.body=c.deserialize(t,e,"error.body")}}catch(e){return i.message=`Error "${e.message}" occurred in deserializing the responseBody `+`- "${r}" for the default response.`,a(i)}return a(i)}let o=null;if(""===r&&(r=null),200===i){let e=null;try{if(e=JSON.parse(r),o=JSON.parse(r),null!=e){let t=(new c.models.EHNamespace).mapper();o=c.deserialize(t,e,"result")}}catch(e){let i=new Error(`Error ${e} occurred in deserializing the responseBody - ${r}`);return i.request=n.stripRequest(d),i.response=n.stripResponse(t),a(i)}}if(201===i){let e=null;try{if(e=JSON.parse(r),o=JSON.parse(r),null!=e){let t=(new c.models.EHNamespace).mapper();o=c.deserialize(t,e,"result")}}catch(e){let i=new Error(`Error ${e} occurred in deserializing the responseBody - ${r}`);return i.request=n.stripRequest(d),i.response=n.stripResponse(t),a(i)}}return a(null,o,d,t)})}function _beginDeleteMethod(e,t,r,s){let a=this.client;if(s||"function"!=typeof r||(s=r,r=null),!s)throw new Error("callback cannot be null.");try{if(null==e||"string"!=typeof e.valueOf())throw new Error("resourceGroupName cannot be null or undefined and it must be of type string.");if(null!=e){if(e.length>90)throw new Error('"resourceGroupName" should satisfy the constraint - "MaxLength": 90');if(e.length<1)throw new Error('"resourceGroupName" should satisfy the constraint - "MinLength": 1')}if(null==t||"string"!=typeof t.valueOf())throw new Error("namespaceName cannot be null or undefined and it must be of type string.");if(null!=t){if(t.length>50)throw new Error('"namespaceName" should satisfy the constraint - "MaxLength": 50');if(t.length<6)throw new Error('"namespaceName" should satisfy the constraint - "MinLength": 6')}if(null===this.client.apiVersion||void 0===this.client.apiVersion||"string"!=typeof this.client.apiVersion.valueOf())throw new Error("this.client.apiVersion cannot be null or undefined and it must be of type string.");if(null===this.client.subscriptionId||void 0===this.client.subscriptionId||"string"!=typeof this.client.subscriptionId.valueOf())throw new Error("this.client.subscriptionId cannot be null or undefined and it must be of type string.");if(null!==this.client.acceptLanguage&&void 0!==this.client.acceptLanguage&&"string"!=typeof this.client.acceptLanguage.valueOf())throw new Error("this.client.acceptLanguage must be of type string.")}catch(e){return s(e)}let c=this.client.baseUri,u=c+(c.endsWith("/")?"":"/")+"subscriptions/{subscriptionId}/resourceGroups/{resourceGroupName}/providers/Microsoft.EventHub/namespaces/{namespaceName}";u=(u=(u=u.replace("{resourceGroupName}",encodeURIComponent(e))).replace("{namespaceName}",encodeURIComponent(t))).replace("{subscriptionId}",encodeURIComponent(this.client.subscriptionId));let l=[];l.push("api-version="+encodeURIComponent(this.client.apiVersion)),l.length>0&&(u+="?"+l.join("&"));let p=new o;if(p.method="DELETE",p.url=u,p.headers={},p.headers["Content-Type"]="application/json; charset=utf-8",this.client.generateClientRequestId&&(p.headers["x-ms-client-request-id"]=i.generateUuid()),void 0!==this.client.acceptLanguage&&null!==this.client.acceptLanguage&&(p.headers["accept-language"]=this.client.acceptLanguage),r)for(let e in r.customHeaders)r.customHeaders.hasOwnProperty(e)&&(p.headers[e]=r.customHeaders[e]);return p.body=null,a.pipeline(p,(e,t,r)=>{if(e)return s(e);let i=t.statusCode;if(200!==i&&202!==i&&204!==i){let e,i=new Error(r);i.statusCode=t.statusCode,i.request=n.stripRequest(p),i.response=n.stripResponse(t),""===r&&(r=null);try{if(e=JSON.parse(r)){let t=null;e.error&&(t=e.error),i.code=t?t.code:e.code,i.message=t?t.message:e.message}if(null!=e){let t=(new a.models.ErrorResponse).mapper();i.body=a.deserialize(t,e,"error.body")}}catch(e){return i.message=`Error "${e.message}" occurred in deserializing the responseBody `+`- "${r}" for the default response.`,s(i)}return s(i)}return""===r&&(r=null),s(null,null,p,t)})}function _listNext(e,t,r){let s=this.client;if(r||"function"!=typeof t||(r=t,t=null),!r)throw new Error("callback cannot be null.");try{if(null==e||"string"!=typeof e.valueOf())throw new Error("nextPageLink cannot be null or undefined and it must be of type string.");if(null!==this.client.acceptLanguage&&void 0!==this.client.acceptLanguage&&"string"!=typeof this.client.acceptLanguage.valueOf())throw new Error("this.client.acceptLanguage must be of type string.")}catch(e){return r(e)}let a="{nextLink}";a=a.replace("{nextLink}",e);let c=new o;if(c.method="GET",c.url=a,c.headers={},c.headers["Content-Type"]="application/json; charset=utf-8",this.client.generateClientRequestId&&(c.headers["x-ms-client-request-id"]=i.generateUuid()),void 0!==this.client.acceptLanguage&&null!==this.client.acceptLanguage&&(c.headers["accept-language"]=this.client.acceptLanguage),t)for(let e in t.customHeaders)t.customHeaders.hasOwnProperty(e)&&(c.headers[e]=t.customHeaders[e]);return c.body=null,s.pipeline(c,(e,t,i)=>{if(e)return r(e);let o=t.statusCode;if(200!==o){let e,o=new Error(i);o.statusCode=t.statusCode,o.request=n.stripRequest(c),o.response=n.stripResponse(t),""===i&&(i=null);try{if(e=JSON.parse(i)){let t=null;e.error&&(t=e.error),o.code=t?t.code:e.code,o.message=t?t.message:e.message}if(null!=e){let t=(new s.models.ErrorResponse).mapper();o.body=s.deserialize(t,e,"error.body")}}catch(e){return o.message=`Error "${e.message}" occurred in deserializing the responseBody `+`- "${i}" for the default response.`,r(o)}return r(o)}let a=null;if(""===i&&(i=null),200===o){let e=null;try{if(e=JSON.parse(i),a=JSON.parse(i),null!=e){let t=(new s.models.EHNamespaceListResult).mapper();a=s.deserialize(t,e,"result")}}catch(e){let o=new Error(`Error ${e} occurred in deserializing the responseBody - ${i}`);return o.request=n.stripRequest(c),o.response=n.stripResponse(t),r(o)}}return r(null,a,c,t)})}function _listByResourceGroupNext(e,t,r){let s=this.client;if(r||"function"!=typeof t||(r=t,t=null),!r)throw new Error("callback cannot be null.");try{if(null==e||"string"!=typeof e.valueOf())throw new Error("nextPageLink cannot be null or undefined and it must be of type string.");if(null!==this.client.acceptLanguage&&void 0!==this.client.acceptLanguage&&"string"!=typeof this.client.acceptLanguage.valueOf())throw new Error("this.client.acceptLanguage must be of type string.")}catch(e){return r(e)}let a="{nextLink}";a=a.replace("{nextLink}",e);let c=new o;if(c.method="GET",c.url=a,c.headers={},c.headers["Content-Type"]="application/json; charset=utf-8",this.client.generateClientRequestId&&(c.headers["x-ms-client-request-id"]=i.generateUuid()),void 0!==this.client.acceptLanguage&&null!==this.client.acceptLanguage&&(c.headers["accept-language"]=this.client.acceptLanguage),t)for(let e in t.customHeaders)t.customHeaders.hasOwnProperty(e)&&(c.headers[e]=t.customHeaders[e]);return c.body=null,s.pipeline(c,(e,t,i)=>{if(e)return r(e);let o=t.statusCode;if(200!==o){let e,o=new Error(i);o.statusCode=t.statusCode,o.request=n.stripRequest(c),o.response=n.stripResponse(t),""===i&&(i=null);try{if(e=JSON.parse(i)){let t=null;e.error&&(t=e.error),o.code=t?t.code:e.code,o.message=t?t.message:e.message}if(null!=e){let t=(new s.models.ErrorResponse).mapper();o.body=s.deserialize(t,e,"error.body")}}catch(e){return o.message=`Error "${e.message}" occurred in deserializing the responseBody `+`- "${i}" for the default response.`,r(o)}return r(o)}let a=null;if(""===i&&(i=null),200===o){let e=null;try{if(e=JSON.parse(i),a=JSON.parse(i),null!=e){let t=(new s.models.EHNamespaceListResult).mapper();a=s.deserialize(t,e,"result")}}catch(e){let o=new Error(`Error ${e} occurred in deserializing the responseBody - ${i}`);return o.request=n.stripRequest(c),o.response=n.stripResponse(t),r(o)}}return r(null,a,c,t)})}function _listAuthorizationRulesNext(e,t,r){let s=this.client;if(r||"function"!=typeof t||(r=t,t=null),!r)throw new Error("callback cannot be null.");try{if(null==e||"string"!=typeof e.valueOf())throw new Error("nextPageLink cannot be null or undefined and it must be of type string.");if(null!==this.client.acceptLanguage&&void 0!==this.client.acceptLanguage&&"string"!=typeof this.client.acceptLanguage.valueOf())throw new Error("this.client.acceptLanguage must be of type string.")}catch(e){return r(e)}let a="{nextLink}";a=a.replace("{nextLink}",e);let c=new o;if(c.method="GET",c.url=a,c.headers={},c.headers["Content-Type"]="application/json; charset=utf-8",this.client.generateClientRequestId&&(c.headers["x-ms-client-request-id"]=i.generateUuid()),void 0!==this.client.acceptLanguage&&null!==this.client.acceptLanguage&&(c.headers["accept-language"]=this.client.acceptLanguage),t)for(let e in t.customHeaders)t.customHeaders.hasOwnProperty(e)&&(c.headers[e]=t.customHeaders[e]);return c.body=null,s.pipeline(c,(e,t,i)=>{if(e)return r(e);let o=t.statusCode;if(200!==o){let e,o=new Error(i);o.statusCode=t.statusCode,o.request=n.stripRequest(c),o.response=n.stripResponse(t),""===i&&(i=null);try{if(e=JSON.parse(i)){let t=null;e.error&&(t=e.error),o.code=t?t.code:e.code,o.message=t?t.message:e.message}if(null!=e){let t=(new s.models.ErrorResponse).mapper();o.body=s.deserialize(t,e,"error.body")}}catch(e){return o.message=`Error "${e.message}" occurred in deserializing the responseBody `+`- "${i}" for the default response.`,r(o)}return r(o)}let a=null;if(""===i&&(i=null),200===o){let e=null;try{if(e=JSON.parse(i),a=JSON.parse(i),null!=e){let t=(new s.models.AuthorizationRuleListResult).mapper();a=s.deserialize(t,e,"result")}}catch(e){let o=new Error(`Error ${e} occurred in deserializing the responseBody - ${i}`);return o.request=n.stripRequest(c),o.response=n.stripResponse(t),r(o)}}return r(null,a,c,t)})}e.exports=class Namespaces{constructor(e){this.client=e,this._checkNameAvailability=_checkNameAvailability,this._list=_list,this._listByResourceGroup=_listByResourceGroup,this._createOrUpdate=_createOrUpdate,this._deleteMethod=_deleteMethod,this._get=_get,this._update=_update,this._getMessagingPlan=_getMessagingPlan,this._listAuthorizationRules=_listAuthorizationRules,this._createOrUpdateAuthorizationRule=_createOrUpdateAuthorizationRule,this._deleteAuthorizationRule=_deleteAuthorizationRule,this._getAuthorizationRule=_getAuthorizationRule,this._listKeys=_listKeys,this._regenerateKeys=_regenerateKeys,this._createOrUpdateNetworkRuleSet=_createOrUpdateNetworkRuleSet,this._getNetworkRuleSet=_getNetworkRuleSet,this._beginCreateOrUpdate=_beginCreateOrUpdate,this._beginDeleteMethod=_beginDeleteMethod,this._listNext=_listNext,this._listByResourceGroupNext=_listByResourceGroupNext,this._listAuthorizationRulesNext=_listAuthorizationRulesNext}checkNameAvailabilityWithHttpOperationResponse(e,t){this.client;let r=this;return new Promise((i,o)=>{r._checkNameAvailability(e,t,(e,t,r,s)=>{let a=new n.HttpOperationResponse(r,s);a.body=t,e?o(e):i(a)})})}checkNameAvailability(e,t,r){this.client;let n=this;return r||"function"!=typeof t||(r=t,t=null),r?n._checkNameAvailability(e,t,r):new Promise((r,i)=>{n._checkNameAvailability(e,t,(e,t,n,o)=>{e?i(e):r(t)})})}listWithHttpOperationResponse(e){this.client;let t=this;return new Promise((r,i)=>{t._list(e,(e,t,o,s)=>{let a=new n.HttpOperationResponse(o,s);a.body=t,e?i(e):r(a)})})}list(e,t){this.client;let r=this;return t||"function"!=typeof e||(t=e,e=null),t?r._list(e,t):new Promise((t,n)=>{r._list(e,(e,r,i,o)=>{e?n(e):t(r)})})}listByResourceGroupWithHttpOperationResponse(e,t){this.client;let r=this;return new Promise((i,o)=>{r._listByResourceGroup(e,t,(e,t,r,s)=>{let a=new n.HttpOperationResponse(r,s);a.body=t,e?o(e):i(a)})})}listByResourceGroup(e,t,r){this.client;let n=this;return r||"function"!=typeof t||(r=t,t=null),r?n._listByResourceGroup(e,t,r):new Promise((r,i)=>{n._listByResourceGroup(e,t,(e,t,n,o)=>{e?i(e):r(t)})})}createOrUpdateWithHttpOperationResponse(e,t,r,i){this.client;let o=this;return new Promise((s,a)=>{o._createOrUpdate(e,t,r,i,(e,t,r,i)=>{let o=new n.HttpOperationResponse(r,i);o.body=t,e?a(e):s(o)})})}createOrUpdate(e,t,r,n,i){this.client;let o=this;return i||"function"!=typeof n||(i=n,n=null),i?o._createOrUpdate(e,t,r,n,i):new Promise((i,s)=>{o._createOrUpdate(e,t,r,n,(e,t,r,n)=>{e?s(e):i(t)})})}deleteMethodWithHttpOperationResponse(e,t,r){this.client;let i=this;return new Promise((o,s)=>{i._deleteMethod(e,t,r,(e,t,r,i)=>{let a=new n.HttpOperationResponse(r,i);a.body=t,e?s(e):o(a)})})}deleteMethod(e,t,r,n){this.client;let i=this;return n||"function"!=typeof r||(n=r,r=null),n?i._deleteMethod(e,t,r,n):new Promise((n,o)=>{i._deleteMethod(e,t,r,(e,t,r,i)=>{e?o(e):n(t)})})}getWithHttpOperationResponse(e,t,r){this.client;let i=this;return new Promise((o,s)=>{i._get(e,t,r,(e,t,r,i)=>{let a=new n.HttpOperationResponse(r,i);a.body=t,e?s(e):o(a)})})}get(e,t,r,n){this.client;let i=this;return n||"function"!=typeof r||(n=r,r=null),n?i._get(e,t,r,n):new Promise((n,o)=>{i._get(e,t,r,(e,t,r,i)=>{e?o(e):n(t)})})}updateWithHttpOperationResponse(e,t,r,i){this.client;let o=this;return new Promise((s,a)=>{o._update(e,t,r,i,(e,t,r,i)=>{let o=new n.HttpOperationResponse(r,i);o.body=t,e?a(e):s(o)})})}update(e,t,r,n,i){this.client;let o=this;return i||"function"!=typeof n||(i=n,n=null),i?o._update(e,t,r,n,i):new Promise((i,s)=>{o._update(e,t,r,n,(e,t,r,n)=>{e?s(e):i(t)})})}getMessagingPlanWithHttpOperationResponse(e,t,r){this.client;let i=this;return new Promise((o,s)=>{i._getMessagingPlan(e,t,r,(e,t,r,i)=>{let a=new n.HttpOperationResponse(r,i);a.body=t,e?s(e):o(a)})})}getMessagingPlan(e,t,r,n){this.client;let i=this;return n||"function"!=typeof r||(n=r,r=null),n?i._getMessagingPlan(e,t,r,n):new Promise((n,o)=>{i._getMessagingPlan(e,t,r,(e,t,r,i)=>{e?o(e):n(t)})})}listAuthorizationRulesWithHttpOperationResponse(e,t,r){this.client;let i=this;return new Promise((o,s)=>{i._listAuthorizationRules(e,t,r,(e,t,r,i)=>{let a=new n.HttpOperationResponse(r,i);a.body=t,e?s(e):o(a)})})}listAuthorizationRules(e,t,r,n){this.client;let i=this;return n||"function"!=typeof r||(n=r,r=null),n?i._listAuthorizationRules(e,t,r,n):new Promise((n,o)=>{i._listAuthorizationRules(e,t,r,(e,t,r,i)=>{e?o(e):n(t)})})}createOrUpdateAuthorizationRuleWithHttpOperationResponse(e,t,r,i,o){this.client;let s=this;return new Promise((a,c)=>{s._createOrUpdateAuthorizationRule(e,t,r,i,o,(e,t,r,i)=>{let o=new n.HttpOperationResponse(r,i);o.body=t,e?c(e):a(o)})})}createOrUpdateAuthorizationRule(e,t,r,n,i,o){this.client;let s=this;return o||"function"!=typeof i||(o=i,i=null),o?s._createOrUpdateAuthorizationRule(e,t,r,n,i,o):new Promise((o,a)=>{s._createOrUpdateAuthorizationRule(e,t,r,n,i,(e,t,r,n)=>{e?a(e):o(t)})})}deleteAuthorizationRuleWithHttpOperationResponse(e,t,r,i){this.client;let o=this;return new Promise((s,a)=>{o._deleteAuthorizationRule(e,t,r,i,(e,t,r,i)=>{let o=new n.HttpOperationResponse(r,i);o.body=t,e?a(e):s(o)})})}deleteAuthorizationRule(e,t,r,n,i){this.client;let o=this;return i||"function"!=typeof n||(i=n,n=null),i?o._deleteAuthorizationRule(e,t,r,n,i):new Promise((i,s)=>{o._deleteAuthorizationRule(e,t,r,n,(e,t,r,n)=>{e?s(e):i(t)})})}getAuthorizationRuleWithHttpOperationResponse(e,t,r,i){this.client;let o=this;return new Promise((s,a)=>{o._getAuthorizationRule(e,t,r,i,(e,t,r,i)=>{let o=new n.HttpOperationResponse(r,i);o.body=t,e?a(e):s(o)})})}getAuthorizationRule(e,t,r,n,i){this.client;let o=this;return i||"function"!=typeof n||(i=n,n=null),i?o._getAuthorizationRule(e,t,r,n,i):new Promise((i,s)=>{o._getAuthorizationRule(e,t,r,n,(e,t,r,n)=>{e?s(e):i(t)})})}listKeysWithHttpOperationResponse(e,t,r,i){this.client;let o=this;return new Promise((s,a)=>{o._listKeys(e,t,r,i,(e,t,r,i)=>{let o=new n.HttpOperationResponse(r,i);o.body=t,e?a(e):s(o)})})}listKeys(e,t,r,n,i){this.client;let o=this;return i||"function"!=typeof n||(i=n,n=null),i?o._listKeys(e,t,r,n,i):new Promise((i,s)=>{o._listKeys(e,t,r,n,(e,t,r,n)=>{e?s(e):i(t)})})}regenerateKeysWithHttpOperationResponse(e,t,r,i,o){this.client;let s=this;return new Promise((a,c)=>{s._regenerateKeys(e,t,r,i,o,(e,t,r,i)=>{let o=new n.HttpOperationResponse(r,i);o.body=t,e?c(e):a(o)})})}regenerateKeys(e,t,r,n,i,o){this.client;let s=this;return o||"function"!=typeof i||(o=i,i=null),o?s._regenerateKeys(e,t,r,n,i,o):new Promise((o,a)=>{s._regenerateKeys(e,t,r,n,i,(e,t,r,n)=>{e?a(e):o(t)})})}createOrUpdateNetworkRuleSetWithHttpOperationResponse(e,t,r,i){this.client;let o=this;return new Promise((s,a)=>{o._createOrUpdateNetworkRuleSet(e,t,r,i,(e,t,r,i)=>{let o=new n.HttpOperationResponse(r,i);o.body=t,e?a(e):s(o)})})}createOrUpdateNetworkRuleSet(e,t,r,n,i){this.client;let o=this;return i||"function"!=typeof n||(i=n,n=null),i?o._createOrUpdateNetworkRuleSet(e,t,r,n,i):new Promise((i,s)=>{o._createOrUpdateNetworkRuleSet(e,t,r,n,(e,t,r,n)=>{e?s(e):i(t)})})}getNetworkRuleSetWithHttpOperationResponse(e,t,r){this.client;let i=this;return new Promise((o,s)=>{i._getNetworkRuleSet(e,t,r,(e,t,r,i)=>{let a=new n.HttpOperationResponse(r,i);a.body=t,e?s(e):o(a)})})}getNetworkRuleSet(e,t,r,n){this.client;let i=this;return n||"function"!=typeof r||(n=r,r=null),n?i._getNetworkRuleSet(e,t,r,n):new Promise((n,o)=>{i._getNetworkRuleSet(e,t,r,(e,t,r,i)=>{e?o(e):n(t)})})}beginCreateOrUpdateWithHttpOperationResponse(e,t,r,i){this.client;let o=this;return new Promise((s,a)=>{o._beginCreateOrUpdate(e,t,r,i,(e,t,r,i)=>{let o=new n.HttpOperationResponse(r,i);o.body=t,e?a(e):s(o)})})}beginCreateOrUpdate(e,t,r,n,i){this.client;let o=this;return i||"function"!=typeof n||(i=n,n=null),i?o._beginCreateOrUpdate(e,t,r,n,i):new Promise((i,s)=>{o._beginCreateOrUpdate(e,t,r,n,(e,t,r,n)=>{e?s(e):i(t)})})}beginDeleteMethodWithHttpOperationResponse(e,t,r){this.client;let i=this;return new Promise((o,s)=>{i._beginDeleteMethod(e,t,r,(e,t,r,i)=>{let a=new n.HttpOperationResponse(r,i);a.body=t,e?s(e):o(a)})})}beginDeleteMethod(e,t,r,n){this.client;let i=this;return n||"function"!=typeof r||(n=r,r=null),n?i._beginDeleteMethod(e,t,r,n):new Promise((n,o)=>{i._beginDeleteMethod(e,t,r,(e,t,r,i)=>{e?o(e):n(t)})})}listNextWithHttpOperationResponse(e,t){this.client;let r=this;return new Promise((i,o)=>{r._listNext(e,t,(e,t,r,s)=>{let a=new n.HttpOperationResponse(r,s);a.body=t,e?o(e):i(a)})})}listNext(e,t,r){this.client;let n=this;return r||"function"!=typeof t||(r=t,t=null),r?n._listNext(e,t,r):new Promise((r,i)=>{n._listNext(e,t,(e,t,n,o)=>{e?i(e):r(t)})})}listByResourceGroupNextWithHttpOperationResponse(e,t){this.client;let r=this;return new Promise((i,o)=>{r._listByResourceGroupNext(e,t,(e,t,r,s)=>{let a=new n.HttpOperationResponse(r,s);a.body=t,e?o(e):i(a)})})}listByResourceGroupNext(e,t,r){this.client;let n=this;return r||"function"!=typeof t||(r=t,t=null),r?n._listByResourceGroupNext(e,t,r):new Promise((r,i)=>{n._listByResourceGroupNext(e,t,(e,t,n,o)=>{e?i(e):r(t)})})}listAuthorizationRulesNextWithHttpOperationResponse(e,t){this.client;let r=this;return new Promise((i,o)=>{r._listAuthorizationRulesNext(e,t,(e,t,r,s)=>{let a=new n.HttpOperationResponse(r,s);a.body=t,e?o(e):i(a)})})}listAuthorizationRulesNext(e,t,r){this.client;let n=this;return r||"function"!=typeof t||(r=t,t=null),r?n._listAuthorizationRulesNext(e,t,r):new Promise((r,i)=>{n._listAuthorizationRulesNext(e,t,(e,t,n,o)=>{e?i(e):r(t)})})}}},function(e,t,r){"use strict";const n=r(86),i=r(9),o=n.WebResource;function _checkNameAvailability(e,t,r,s,a){let c=this.client;if(a||"function"!=typeof s||(a=s,s=null),!a)throw new Error("callback cannot be null.");try{if(null===this.client.apiVersion||void 0===this.client.apiVersion||"string"!=typeof this.client.apiVersion.valueOf())throw new Error("this.client.apiVersion cannot be null or undefined and it must be of type string.");if(null===this.client.subscriptionId||void 0===this.client.subscriptionId||"string"!=typeof this.client.subscriptionId.valueOf())throw new Error("this.client.subscriptionId cannot be null or undefined and it must be of type string.");if(null==e||"string"!=typeof e.valueOf())throw new Error("resourceGroupName cannot be null or undefined and it must be of type string.");if(null!=e){if(e.length>90)throw new Error('"resourceGroupName" should satisfy the constraint - "MaxLength": 90');if(e.length<1)throw new Error('"resourceGroupName" should satisfy the constraint - "MinLength": 1')}if(null==t||"string"!=typeof t.valueOf())throw new Error("namespaceName cannot be null or undefined and it must be of type string.");if(null!=t){if(t.length>50)throw new Error('"namespaceName" should satisfy the constraint - "MaxLength": 50');if(t.length<6)throw new Error('"namespaceName" should satisfy the constraint - "MinLength": 6')}if(null==r)throw new Error("parameters cannot be null or undefined.");if(null!==this.client.acceptLanguage&&void 0!==this.client.acceptLanguage&&"string"!=typeof this.client.acceptLanguage.valueOf())throw new Error("this.client.acceptLanguage must be of type string.")}catch(e){return a(e)}let u=this.client.baseUri,l=u+(u.endsWith("/")?"":"/")+"subscriptions/{subscriptionId}/resourceGroups/{resourceGroupName}/providers/Microsoft.EventHub/namespaces/{namespaceName}/disasterRecoveryConfigs/CheckNameAvailability";l=(l=(l=l.replace("{subscriptionId}",encodeURIComponent(this.client.subscriptionId))).replace("{resourceGroupName}",encodeURIComponent(e))).replace("{namespaceName}",encodeURIComponent(t));let p=[];p.push("api-version="+encodeURIComponent(this.client.apiVersion)),p.length>0&&(l+="?"+p.join("&"));let d=new o;if(d.method="POST",d.url=l,d.headers={},d.headers["Content-Type"]="application/json; charset=utf-8",this.client.generateClientRequestId&&(d.headers["x-ms-client-request-id"]=i.generateUuid()),void 0!==this.client.acceptLanguage&&null!==this.client.acceptLanguage&&(d.headers["accept-language"]=this.client.acceptLanguage),s)for(let e in s.customHeaders)s.customHeaders.hasOwnProperty(e)&&(d.headers[e]=s.customHeaders[e]);let h=null,f=null;try{if(null!=r){let e=(new c.models.CheckNameAvailabilityParameter).mapper();f=c.serialize(e,r,"parameters"),h=JSON.stringify(f)}}catch(e){let t=new Error(`Error "${e.message}" occurred in serializing the `+`payload - ${JSON.stringify(r,null,2)}.`);return a(t)}return d.body=h,c.pipeline(d,(e,t,r)=>{if(e)return a(e);let i=t.statusCode;if(200!==i){let e,i=new Error(r);i.statusCode=t.statusCode,i.request=n.stripRequest(d),i.response=n.stripResponse(t),""===r&&(r=null);try{if(e=JSON.parse(r)){let t=null;e.error&&(t=e.error),i.code=t?t.code:e.code,i.message=t?t.message:e.message}if(null!=e){let t=(new c.models.ErrorResponse).mapper();i.body=c.deserialize(t,e,"error.body")}}catch(e){return i.message=`Error "${e.message}" occurred in deserializing the responseBody `+`- "${r}" for the default response.`,a(i)}return a(i)}let o=null;if(""===r&&(r=null),200===i){let e=null;try{if(e=JSON.parse(r),o=JSON.parse(r),null!=e){let t=(new c.models.CheckNameAvailabilityResult).mapper();o=c.deserialize(t,e,"result")}}catch(e){let i=new Error(`Error ${e} occurred in deserializing the responseBody - ${r}`);return i.request=n.stripRequest(d),i.response=n.stripResponse(t),a(i)}}return a(null,o,d,t)})}function _list(e,t,r,s){let a=this.client;if(s||"function"!=typeof r||(s=r,r=null),!s)throw new Error("callback cannot be null.");try{if(null==e||"string"!=typeof e.valueOf())throw new Error("resourceGroupName cannot be null or undefined and it must be of type string.");if(null!=e){if(e.length>90)throw new Error('"resourceGroupName" should satisfy the constraint - "MaxLength": 90');if(e.length<1)throw new Error('"resourceGroupName" should satisfy the constraint - "MinLength": 1')}if(null==t||"string"!=typeof t.valueOf())throw new Error("namespaceName cannot be null or undefined and it must be of type string.");if(null!=t){if(t.length>50)throw new Error('"namespaceName" should satisfy the constraint - "MaxLength": 50');if(t.length<6)throw new Error('"namespaceName" should satisfy the constraint - "MinLength": 6')}if(null===this.client.apiVersion||void 0===this.client.apiVersion||"string"!=typeof this.client.apiVersion.valueOf())throw new Error("this.client.apiVersion cannot be null or undefined and it must be of type string.");if(null===this.client.subscriptionId||void 0===this.client.subscriptionId||"string"!=typeof this.client.subscriptionId.valueOf())throw new Error("this.client.subscriptionId cannot be null or undefined and it must be of type string.");if(null!==this.client.acceptLanguage&&void 0!==this.client.acceptLanguage&&"string"!=typeof this.client.acceptLanguage.valueOf())throw new Error("this.client.acceptLanguage must be of type string.")}catch(e){return s(e)}let c=this.client.baseUri,u=c+(c.endsWith("/")?"":"/")+"subscriptions/{subscriptionId}/resourceGroups/{resourceGroupName}/providers/Microsoft.EventHub/namespaces/{namespaceName}/disasterRecoveryConfigs";u=(u=(u=u.replace("{resourceGroupName}",encodeURIComponent(e))).replace("{namespaceName}",encodeURIComponent(t))).replace("{subscriptionId}",encodeURIComponent(this.client.subscriptionId));let l=[];l.push("api-version="+encodeURIComponent(this.client.apiVersion)),l.length>0&&(u+="?"+l.join("&"));let p=new o;if(p.method="GET",p.url=u,p.headers={},p.headers["Content-Type"]="application/json; charset=utf-8",this.client.generateClientRequestId&&(p.headers["x-ms-client-request-id"]=i.generateUuid()),void 0!==this.client.acceptLanguage&&null!==this.client.acceptLanguage&&(p.headers["accept-language"]=this.client.acceptLanguage),r)for(let e in r.customHeaders)r.customHeaders.hasOwnProperty(e)&&(p.headers[e]=r.customHeaders[e]);return p.body=null,a.pipeline(p,(e,t,r)=>{if(e)return s(e);let i=t.statusCode;if(200!==i){let e,i=new Error(r);i.statusCode=t.statusCode,i.request=n.stripRequest(p),i.response=n.stripResponse(t),""===r&&(r=null);try{if(e=JSON.parse(r)){let t=null;e.error&&(t=e.error),i.code=t?t.code:e.code,i.message=t?t.message:e.message}if(null!=e){let t=(new a.models.ErrorResponse).mapper();i.body=a.deserialize(t,e,"error.body")}}catch(e){return i.message=`Error "${e.message}" occurred in deserializing the responseBody `+`- "${r}" for the default response.`,s(i)}return s(i)}let o=null;if(""===r&&(r=null),200===i){let e=null;try{if(e=JSON.parse(r),o=JSON.parse(r),null!=e){let t=(new a.models.ArmDisasterRecoveryListResult).mapper();o=a.deserialize(t,e,"result")}}catch(e){let i=new Error(`Error ${e} occurred in deserializing the responseBody - ${r}`);return i.request=n.stripRequest(p),i.response=n.stripResponse(t),s(i)}}return s(null,o,p,t)})}function _createOrUpdate(e,t,r,s,a,c){let u=this.client;if(c||"function"!=typeof a||(c=a,a=null),!c)throw new Error("callback cannot be null.");try{if(null==e||"string"!=typeof e.valueOf())throw new Error("resourceGroupName cannot be null or undefined and it must be of type string.");if(null!=e){if(e.length>90)throw new Error('"resourceGroupName" should satisfy the constraint - "MaxLength": 90');if(e.length<1)throw new Error('"resourceGroupName" should satisfy the constraint - "MinLength": 1')}if(null==t||"string"!=typeof t.valueOf())throw new Error("namespaceName cannot be null or undefined and it must be of type string.");if(null!=t){if(t.length>50)throw new Error('"namespaceName" should satisfy the constraint - "MaxLength": 50');if(t.length<6)throw new Error('"namespaceName" should satisfy the constraint - "MinLength": 6')}if(null==r||"string"!=typeof r.valueOf())throw new Error("alias cannot be null or undefined and it must be of type string.");if(null!=r){if(r.length>50)throw new Error('"alias" should satisfy the constraint - "MaxLength": 50');if(r.length<1)throw new Error('"alias" should satisfy the constraint - "MinLength": 1')}if(null==s)throw new Error("parameters cannot be null or undefined.");if(null===this.client.apiVersion||void 0===this.client.apiVersion||"string"!=typeof this.client.apiVersion.valueOf())throw new Error("this.client.apiVersion cannot be null or undefined and it must be of type string.");if(null===this.client.subscriptionId||void 0===this.client.subscriptionId||"string"!=typeof this.client.subscriptionId.valueOf())throw new Error("this.client.subscriptionId cannot be null or undefined and it must be of type string.");if(null!==this.client.acceptLanguage&&void 0!==this.client.acceptLanguage&&"string"!=typeof this.client.acceptLanguage.valueOf())throw new Error("this.client.acceptLanguage must be of type string.")}catch(e){return c(e)}let l=this.client.baseUri,p=l+(l.endsWith("/")?"":"/")+"subscriptions/{subscriptionId}/resourceGroups/{resourceGroupName}/providers/Microsoft.EventHub/namespaces/{namespaceName}/disasterRecoveryConfigs/{alias}";p=(p=(p=(p=p.replace("{resourceGroupName}",encodeURIComponent(e))).replace("{namespaceName}",encodeURIComponent(t))).replace("{alias}",encodeURIComponent(r))).replace("{subscriptionId}",encodeURIComponent(this.client.subscriptionId));let d=[];d.push("api-version="+encodeURIComponent(this.client.apiVersion)),d.length>0&&(p+="?"+d.join("&"));let h=new o;if(h.method="PUT",h.url=p,h.headers={},h.headers["Content-Type"]="application/json; charset=utf-8",this.client.generateClientRequestId&&(h.headers["x-ms-client-request-id"]=i.generateUuid()),void 0!==this.client.acceptLanguage&&null!==this.client.acceptLanguage&&(h.headers["accept-language"]=this.client.acceptLanguage),a)for(let e in a.customHeaders)a.customHeaders.hasOwnProperty(e)&&(h.headers[e]=a.customHeaders[e]);let f=null,m=null;try{if(null!=s){let e=(new u.models.ArmDisasterRecovery).mapper();m=u.serialize(e,s,"parameters"),f=JSON.stringify(m)}}catch(e){let t=new Error(`Error "${e.message}" occurred in serializing the `+`payload - ${JSON.stringify(s,null,2)}.`);return c(t)}return h.body=f,u.pipeline(h,(e,t,r)=>{if(e)return c(e);let i=t.statusCode;if(200!==i&&201!==i){let e,i=new Error(r);i.statusCode=t.statusCode,i.request=n.stripRequest(h),i.response=n.stripResponse(t),""===r&&(r=null);try{if(e=JSON.parse(r)){let t=null;e.error&&(t=e.error),i.code=t?t.code:e.code,i.message=t?t.message:e.message}if(null!=e){let t=(new u.models.ErrorResponse).mapper();i.body=u.deserialize(t,e,"error.body")}}catch(e){return i.message=`Error "${e.message}" occurred in deserializing the responseBody `+`- "${r}" for the default response.`,c(i)}return c(i)}let o=null;if(""===r&&(r=null),200===i){let e=null;try{if(e=JSON.parse(r),o=JSON.parse(r),null!=e){let t=(new u.models.ArmDisasterRecovery).mapper();o=u.deserialize(t,e,"result")}}catch(e){let i=new Error(`Error ${e} occurred in deserializing the responseBody - ${r}`);return i.request=n.stripRequest(h),i.response=n.stripResponse(t),c(i)}}return c(null,o,h,t)})}function _deleteMethod(e,t,r,s,a){let c=this.client;if(a||"function"!=typeof s||(a=s,s=null),!a)throw new Error("callback cannot be null.");try{if(null==e||"string"!=typeof e.valueOf())throw new Error("resourceGroupName cannot be null or undefined and it must be of type string.");if(null!=e){if(e.length>90)throw new Error('"resourceGroupName" should satisfy the constraint - "MaxLength": 90');if(e.length<1)throw new Error('"resourceGroupName" should satisfy the constraint - "MinLength": 1')}if(null==t||"string"!=typeof t.valueOf())throw new Error("namespaceName cannot be null or undefined and it must be of type string.");if(null!=t){if(t.length>50)throw new Error('"namespaceName" should satisfy the constraint - "MaxLength": 50');if(t.length<6)throw new Error('"namespaceName" should satisfy the constraint - "MinLength": 6')}if(null==r||"string"!=typeof r.valueOf())throw new Error("alias cannot be null or undefined and it must be of type string.");if(null!=r){if(r.length>50)throw new Error('"alias" should satisfy the constraint - "MaxLength": 50');if(r.length<1)throw new Error('"alias" should satisfy the constraint - "MinLength": 1')}if(null===this.client.apiVersion||void 0===this.client.apiVersion||"string"!=typeof this.client.apiVersion.valueOf())throw new Error("this.client.apiVersion cannot be null or undefined and it must be of type string.");if(null===this.client.subscriptionId||void 0===this.client.subscriptionId||"string"!=typeof this.client.subscriptionId.valueOf())throw new Error("this.client.subscriptionId cannot be null or undefined and it must be of type string.");if(null!==this.client.acceptLanguage&&void 0!==this.client.acceptLanguage&&"string"!=typeof this.client.acceptLanguage.valueOf())throw new Error("this.client.acceptLanguage must be of type string.")}catch(e){return a(e)}let u=this.client.baseUri,l=u+(u.endsWith("/")?"":"/")+"subscriptions/{subscriptionId}/resourceGroups/{resourceGroupName}/providers/Microsoft.EventHub/namespaces/{namespaceName}/disasterRecoveryConfigs/{alias}";l=(l=(l=(l=l.replace("{resourceGroupName}",encodeURIComponent(e))).replace("{namespaceName}",encodeURIComponent(t))).replace("{alias}",encodeURIComponent(r))).replace("{subscriptionId}",encodeURIComponent(this.client.subscriptionId));let p=[];p.push("api-version="+encodeURIComponent(this.client.apiVersion)),p.length>0&&(l+="?"+p.join("&"));let d=new o;if(d.method="DELETE",d.url=l,d.headers={},d.headers["Content-Type"]="application/json; charset=utf-8",this.client.generateClientRequestId&&(d.headers["x-ms-client-request-id"]=i.generateUuid()),void 0!==this.client.acceptLanguage&&null!==this.client.acceptLanguage&&(d.headers["accept-language"]=this.client.acceptLanguage),s)for(let e in s.customHeaders)s.customHeaders.hasOwnProperty(e)&&(d.headers[e]=s.customHeaders[e]);return d.body=null,c.pipeline(d,(e,t,r)=>{if(e)return a(e);if(200!==t.statusCode){let e,i=new Error(r);i.statusCode=t.statusCode,i.request=n.stripRequest(d),i.response=n.stripResponse(t),""===r&&(r=null);try{if(e=JSON.parse(r)){let t=null;e.error&&(t=e.error),i.code=t?t.code:e.code,i.message=t?t.message:e.message}if(null!=e){let t=(new c.models.ErrorResponse).mapper();i.body=c.deserialize(t,e,"error.body")}}catch(e){return i.message=`Error "${e.message}" occurred in deserializing the responseBody `+`- "${r}" for the default response.`,a(i)}return a(i)}return""===r&&(r=null),a(null,null,d,t)})}function _get(e,t,r,s,a){let c=this.client;if(a||"function"!=typeof s||(a=s,s=null),!a)throw new Error("callback cannot be null.");try{if(null==e||"string"!=typeof e.valueOf())throw new Error("resourceGroupName cannot be null or undefined and it must be of type string.");if(null!=e){if(e.length>90)throw new Error('"resourceGroupName" should satisfy the constraint - "MaxLength": 90');if(e.length<1)throw new Error('"resourceGroupName" should satisfy the constraint - "MinLength": 1')}if(null==t||"string"!=typeof t.valueOf())throw new Error("namespaceName cannot be null or undefined and it must be of type string.");if(null!=t){if(t.length>50)throw new Error('"namespaceName" should satisfy the constraint - "MaxLength": 50');if(t.length<6)throw new Error('"namespaceName" should satisfy the constraint - "MinLength": 6')}if(null==r||"string"!=typeof r.valueOf())throw new Error("alias cannot be null or undefined and it must be of type string.");if(null!=r){if(r.length>50)throw new Error('"alias" should satisfy the constraint - "MaxLength": 50');if(r.length<1)throw new Error('"alias" should satisfy the constraint - "MinLength": 1')}if(null===this.client.apiVersion||void 0===this.client.apiVersion||"string"!=typeof this.client.apiVersion.valueOf())throw new Error("this.client.apiVersion cannot be null or undefined and it must be of type string.");if(null===this.client.subscriptionId||void 0===this.client.subscriptionId||"string"!=typeof this.client.subscriptionId.valueOf())throw new Error("this.client.subscriptionId cannot be null or undefined and it must be of type string.");if(null!==this.client.acceptLanguage&&void 0!==this.client.acceptLanguage&&"string"!=typeof this.client.acceptLanguage.valueOf())throw new Error("this.client.acceptLanguage must be of type string.")}catch(e){return a(e)}let u=this.client.baseUri,l=u+(u.endsWith("/")?"":"/")+"subscriptions/{subscriptionId}/resourceGroups/{resourceGroupName}/providers/Microsoft.EventHub/namespaces/{namespaceName}/disasterRecoveryConfigs/{alias}";l=(l=(l=(l=l.replace("{resourceGroupName}",encodeURIComponent(e))).replace("{namespaceName}",encodeURIComponent(t))).replace("{alias}",encodeURIComponent(r))).replace("{subscriptionId}",encodeURIComponent(this.client.subscriptionId));let p=[];p.push("api-version="+encodeURIComponent(this.client.apiVersion)),p.length>0&&(l+="?"+p.join("&"));let d=new o;if(d.method="GET",d.url=l,d.headers={},d.headers["Content-Type"]="application/json; charset=utf-8",this.client.generateClientRequestId&&(d.headers["x-ms-client-request-id"]=i.generateUuid()),void 0!==this.client.acceptLanguage&&null!==this.client.acceptLanguage&&(d.headers["accept-language"]=this.client.acceptLanguage),s)for(let e in s.customHeaders)s.customHeaders.hasOwnProperty(e)&&(d.headers[e]=s.customHeaders[e]);return d.body=null,c.pipeline(d,(e,t,r)=>{if(e)return a(e);let i=t.statusCode;if(200!==i){let e,i=new Error(r);i.statusCode=t.statusCode,i.request=n.stripRequest(d),i.response=n.stripResponse(t),""===r&&(r=null);try{if(e=JSON.parse(r)){let t=null;e.error&&(t=e.error),i.code=t?t.code:e.code,i.message=t?t.message:e.message}if(null!=e){let t=(new c.models.ErrorResponse).mapper();i.body=c.deserialize(t,e,"error.body")}}catch(e){return i.message=`Error "${e.message}" occurred in deserializing the responseBody `+`- "${r}" for the default response.`,a(i)}return a(i)}let o=null;if(""===r&&(r=null),200===i){let e=null;try{if(e=JSON.parse(r),o=JSON.parse(r),null!=e){let t=(new c.models.ArmDisasterRecovery).mapper();o=c.deserialize(t,e,"result")}}catch(e){let i=new Error(`Error ${e} occurred in deserializing the responseBody - ${r}`);return i.request=n.stripRequest(d),i.response=n.stripResponse(t),a(i)}}return a(null,o,d,t)})}function _breakPairing(e,t,r,s,a){let c=this.client;if(a||"function"!=typeof s||(a=s,s=null),!a)throw new Error("callback cannot be null.");try{if(null==e||"string"!=typeof e.valueOf())throw new Error("resourceGroupName cannot be null or undefined and it must be of type string.");if(null!=e){if(e.length>90)throw new Error('"resourceGroupName" should satisfy the constraint - "MaxLength": 90');if(e.length<1)throw new Error('"resourceGroupName" should satisfy the constraint - "MinLength": 1')}if(null==t||"string"!=typeof t.valueOf())throw new Error("namespaceName cannot be null or undefined and it must be of type string.");if(null!=t){if(t.length>50)throw new Error('"namespaceName" should satisfy the constraint - "MaxLength": 50');if(t.length<6)throw new Error('"namespaceName" should satisfy the constraint - "MinLength": 6')}if(null==r||"string"!=typeof r.valueOf())throw new Error("alias cannot be null or undefined and it must be of type string.");if(null!=r){if(r.length>50)throw new Error('"alias" should satisfy the constraint - "MaxLength": 50');if(r.length<1)throw new Error('"alias" should satisfy the constraint - "MinLength": 1')}if(null===this.client.apiVersion||void 0===this.client.apiVersion||"string"!=typeof this.client.apiVersion.valueOf())throw new Error("this.client.apiVersion cannot be null or undefined and it must be of type string.");if(null===this.client.subscriptionId||void 0===this.client.subscriptionId||"string"!=typeof this.client.subscriptionId.valueOf())throw new Error("this.client.subscriptionId cannot be null or undefined and it must be of type string.");if(null!==this.client.acceptLanguage&&void 0!==this.client.acceptLanguage&&"string"!=typeof this.client.acceptLanguage.valueOf())throw new Error("this.client.acceptLanguage must be of type string.")}catch(e){return a(e)}let u=this.client.baseUri,l=u+(u.endsWith("/")?"":"/")+"subscriptions/{subscriptionId}/resourceGroups/{resourceGroupName}/providers/Microsoft.EventHub/namespaces/{namespaceName}/disasterRecoveryConfigs/{alias}/breakPairing";l=(l=(l=(l=l.replace("{resourceGroupName}",encodeURIComponent(e))).replace("{namespaceName}",encodeURIComponent(t))).replace("{alias}",encodeURIComponent(r))).replace("{subscriptionId}",encodeURIComponent(this.client.subscriptionId));let p=[];p.push("api-version="+encodeURIComponent(this.client.apiVersion)),p.length>0&&(l+="?"+p.join("&"));let d=new o;if(d.method="POST",d.url=l,d.headers={},d.headers["Content-Type"]="application/json; charset=utf-8",this.client.generateClientRequestId&&(d.headers["x-ms-client-request-id"]=i.generateUuid()),void 0!==this.client.acceptLanguage&&null!==this.client.acceptLanguage&&(d.headers["accept-language"]=this.client.acceptLanguage),s)for(let e in s.customHeaders)s.customHeaders.hasOwnProperty(e)&&(d.headers[e]=s.customHeaders[e]);return d.body=null,c.pipeline(d,(e,t,r)=>{if(e)return a(e);if(200!==t.statusCode){let e,i=new Error(r);i.statusCode=t.statusCode,i.request=n.stripRequest(d),i.response=n.stripResponse(t),""===r&&(r=null);try{if(e=JSON.parse(r)){let t=null;e.error&&(t=e.error),i.code=t?t.code:e.code,i.message=t?t.message:e.message}if(null!=e){let t=(new c.models.ErrorResponse).mapper();i.body=c.deserialize(t,e,"error.body")}}catch(e){return i.message=`Error "${e.message}" occurred in deserializing the responseBody `+`- "${r}" for the default response.`,a(i)}return a(i)}return""===r&&(r=null),a(null,null,d,t)})}function _failOver(e,t,r,s,a){let c=this.client;if(a||"function"!=typeof s||(a=s,s=null),!a)throw new Error("callback cannot be null.");try{if(null==e||"string"!=typeof e.valueOf())throw new Error("resourceGroupName cannot be null or undefined and it must be of type string.");if(null!=e){if(e.length>90)throw new Error('"resourceGroupName" should satisfy the constraint - "MaxLength": 90');if(e.length<1)throw new Error('"resourceGroupName" should satisfy the constraint - "MinLength": 1')}if(null==t||"string"!=typeof t.valueOf())throw new Error("namespaceName cannot be null or undefined and it must be of type string.");if(null!=t){if(t.length>50)throw new Error('"namespaceName" should satisfy the constraint - "MaxLength": 50');if(t.length<6)throw new Error('"namespaceName" should satisfy the constraint - "MinLength": 6')}if(null==r||"string"!=typeof r.valueOf())throw new Error("alias cannot be null or undefined and it must be of type string.");if(null!=r){if(r.length>50)throw new Error('"alias" should satisfy the constraint - "MaxLength": 50');if(r.length<1)throw new Error('"alias" should satisfy the constraint - "MinLength": 1')}if(null===this.client.apiVersion||void 0===this.client.apiVersion||"string"!=typeof this.client.apiVersion.valueOf())throw new Error("this.client.apiVersion cannot be null or undefined and it must be of type string.");if(null===this.client.subscriptionId||void 0===this.client.subscriptionId||"string"!=typeof this.client.subscriptionId.valueOf())throw new Error("this.client.subscriptionId cannot be null or undefined and it must be of type string.");if(null!==this.client.acceptLanguage&&void 0!==this.client.acceptLanguage&&"string"!=typeof this.client.acceptLanguage.valueOf())throw new Error("this.client.acceptLanguage must be of type string.")}catch(e){return a(e)}let u=this.client.baseUri,l=u+(u.endsWith("/")?"":"/")+"subscriptions/{subscriptionId}/resourceGroups/{resourceGroupName}/providers/Microsoft.EventHub/namespaces/{namespaceName}/disasterRecoveryConfigs/{alias}/failover";l=(l=(l=(l=l.replace("{resourceGroupName}",encodeURIComponent(e))).replace("{namespaceName}",encodeURIComponent(t))).replace("{alias}",encodeURIComponent(r))).replace("{subscriptionId}",encodeURIComponent(this.client.subscriptionId));let p=[];p.push("api-version="+encodeURIComponent(this.client.apiVersion)),p.length>0&&(l+="?"+p.join("&"));let d=new o;if(d.method="POST",d.url=l,d.headers={},d.headers["Content-Type"]="application/json; charset=utf-8",this.client.generateClientRequestId&&(d.headers["x-ms-client-request-id"]=i.generateUuid()),void 0!==this.client.acceptLanguage&&null!==this.client.acceptLanguage&&(d.headers["accept-language"]=this.client.acceptLanguage),s)for(let e in s.customHeaders)s.customHeaders.hasOwnProperty(e)&&(d.headers[e]=s.customHeaders[e]);return d.body=null,c.pipeline(d,(e,t,r)=>{if(e)return a(e);if(200!==t.statusCode){let e,i=new Error(r);i.statusCode=t.statusCode,i.request=n.stripRequest(d),i.response=n.stripResponse(t),""===r&&(r=null);try{if(e=JSON.parse(r)){let t=null;e.error&&(t=e.error),i.code=t?t.code:e.code,i.message=t?t.message:e.message}if(null!=e){let t=(new c.models.ErrorResponse).mapper();i.body=c.deserialize(t,e,"error.body")}}catch(e){return i.message=`Error "${e.message}" occurred in deserializing the responseBody `+`- "${r}" for the default response.`,a(i)}return a(i)}return""===r&&(r=null),a(null,null,d,t)})}function _listAuthorizationRules(e,t,r,s,a){let c=this.client;if(a||"function"!=typeof s||(a=s,s=null),!a)throw new Error("callback cannot be null.");try{if(null==e||"string"!=typeof e.valueOf())throw new Error("resourceGroupName cannot be null or undefined and it must be of type string.");if(null!=e){if(e.length>90)throw new Error('"resourceGroupName" should satisfy the constraint - "MaxLength": 90');if(e.length<1)throw new Error('"resourceGroupName" should satisfy the constraint - "MinLength": 1')}if(null==t||"string"!=typeof t.valueOf())throw new Error("namespaceName cannot be null or undefined and it must be of type string.");if(null!=t){if(t.length>50)throw new Error('"namespaceName" should satisfy the constraint - "MaxLength": 50');if(t.length<6)throw new Error('"namespaceName" should satisfy the constraint - "MinLength": 6')}if(null==r||"string"!=typeof r.valueOf())throw new Error("alias cannot be null or undefined and it must be of type string.");if(null!=r){if(r.length>50)throw new Error('"alias" should satisfy the constraint - "MaxLength": 50');if(r.length<1)throw new Error('"alias" should satisfy the constraint - "MinLength": 1')}if(null===this.client.apiVersion||void 0===this.client.apiVersion||"string"!=typeof this.client.apiVersion.valueOf())throw new Error("this.client.apiVersion cannot be null or undefined and it must be of type string.");if(null===this.client.subscriptionId||void 0===this.client.subscriptionId||"string"!=typeof this.client.subscriptionId.valueOf())throw new Error("this.client.subscriptionId cannot be null or undefined and it must be of type string.");if(null!==this.client.acceptLanguage&&void 0!==this.client.acceptLanguage&&"string"!=typeof this.client.acceptLanguage.valueOf())throw new Error("this.client.acceptLanguage must be of type string.")}catch(e){return a(e)}let u=this.client.baseUri,l=u+(u.endsWith("/")?"":"/")+"subscriptions/{subscriptionId}/resourceGroups/{resourceGroupName}/providers/Microsoft.EventHub/namespaces/{namespaceName}/disasterRecoveryConfigs/{alias}/AuthorizationRules";l=(l=(l=(l=l.replace("{resourceGroupName}",encodeURIComponent(e))).replace("{namespaceName}",encodeURIComponent(t))).replace("{alias}",encodeURIComponent(r))).replace("{subscriptionId}",encodeURIComponent(this.client.subscriptionId));let p=[];p.push("api-version="+encodeURIComponent(this.client.apiVersion)),p.length>0&&(l+="?"+p.join("&"));let d=new o;if(d.method="GET",d.url=l,d.headers={},d.headers["Content-Type"]="application/json; charset=utf-8",this.client.generateClientRequestId&&(d.headers["x-ms-client-request-id"]=i.generateUuid()),void 0!==this.client.acceptLanguage&&null!==this.client.acceptLanguage&&(d.headers["accept-language"]=this.client.acceptLanguage),s)for(let e in s.customHeaders)s.customHeaders.hasOwnProperty(e)&&(d.headers[e]=s.customHeaders[e]);return d.body=null,c.pipeline(d,(e,t,r)=>{if(e)return a(e);let i=t.statusCode;if(200!==i){let e,i=new Error(r);i.statusCode=t.statusCode,i.request=n.stripRequest(d),i.response=n.stripResponse(t),""===r&&(r=null);try{if(e=JSON.parse(r)){let t=null;e.error&&(t=e.error),i.code=t?t.code:e.code,i.message=t?t.message:e.message}if(null!=e){let t=(new c.models.ErrorResponse).mapper();i.body=c.deserialize(t,e,"error.body")}}catch(e){return i.message=`Error "${e.message}" occurred in deserializing the responseBody `+`- "${r}" for the default response.`,a(i)}return a(i)}let o=null;if(""===r&&(r=null),200===i){let e=null;try{if(e=JSON.parse(r),o=JSON.parse(r),null!=e){let t=(new c.models.AuthorizationRuleListResult).mapper();o=c.deserialize(t,e,"result")}}catch(e){let i=new Error(`Error ${e} occurred in deserializing the responseBody - ${r}`);return i.request=n.stripRequest(d),i.response=n.stripResponse(t),a(i)}}return a(null,o,d,t)})}function _getAuthorizationRule(e,t,r,s,a,c){let u=this.client;if(c||"function"!=typeof a||(c=a,a=null),!c)throw new Error("callback cannot be null.");try{if(null==e||"string"!=typeof e.valueOf())throw new Error("resourceGroupName cannot be null or undefined and it must be of type string.");if(null!=e){if(e.length>90)throw new Error('"resourceGroupName" should satisfy the constraint - "MaxLength": 90');if(e.length<1)throw new Error('"resourceGroupName" should satisfy the constraint - "MinLength": 1')}if(null==t||"string"!=typeof t.valueOf())throw new Error("namespaceName cannot be null or undefined and it must be of type string.");if(null!=t){if(t.length>50)throw new Error('"namespaceName" should satisfy the constraint - "MaxLength": 50');if(t.length<6)throw new Error('"namespaceName" should satisfy the constraint - "MinLength": 6')}if(null==r||"string"!=typeof r.valueOf())throw new Error("alias cannot be null or undefined and it must be of type string.");if(null!=r){if(r.length>50)throw new Error('"alias" should satisfy the constraint - "MaxLength": 50');if(r.length<1)throw new Error('"alias" should satisfy the constraint - "MinLength": 1')}if(null==s||"string"!=typeof s.valueOf())throw new Error("authorizationRuleName cannot be null or undefined and it must be of type string.");if(null!=s&&s.length<1)throw new Error('"authorizationRuleName" should satisfy the constraint - "MinLength": 1');if(null===this.client.apiVersion||void 0===this.client.apiVersion||"string"!=typeof this.client.apiVersion.valueOf())throw new Error("this.client.apiVersion cannot be null or undefined and it must be of type string.");if(null===this.client.subscriptionId||void 0===this.client.subscriptionId||"string"!=typeof this.client.subscriptionId.valueOf())throw new Error("this.client.subscriptionId cannot be null or undefined and it must be of type string.");if(null!==this.client.acceptLanguage&&void 0!==this.client.acceptLanguage&&"string"!=typeof this.client.acceptLanguage.valueOf())throw new Error("this.client.acceptLanguage must be of type string.")}catch(e){return c(e)}let l=this.client.baseUri,p=l+(l.endsWith("/")?"":"/")+"subscriptions/{subscriptionId}/resourceGroups/{resourceGroupName}/providers/Microsoft.EventHub/namespaces/{namespaceName}/disasterRecoveryConfigs/{alias}/AuthorizationRules/{authorizationRuleName}";p=(p=(p=(p=(p=p.replace("{resourceGroupName}",encodeURIComponent(e))).replace("{namespaceName}",encodeURIComponent(t))).replace("{alias}",encodeURIComponent(r))).replace("{authorizationRuleName}",encodeURIComponent(s))).replace("{subscriptionId}",encodeURIComponent(this.client.subscriptionId));let d=[];d.push("api-version="+encodeURIComponent(this.client.apiVersion)),d.length>0&&(p+="?"+d.join("&"));let h=new o;if(h.method="GET",h.url=p,h.headers={},h.headers["Content-Type"]="application/json; charset=utf-8",this.client.generateClientRequestId&&(h.headers["x-ms-client-request-id"]=i.generateUuid()),void 0!==this.client.acceptLanguage&&null!==this.client.acceptLanguage&&(h.headers["accept-language"]=this.client.acceptLanguage),a)for(let e in a.customHeaders)a.customHeaders.hasOwnProperty(e)&&(h.headers[e]=a.customHeaders[e]);return h.body=null,u.pipeline(h,(e,t,r)=>{if(e)return c(e);let i=t.statusCode;if(200!==i){let e,i=new Error(r);i.statusCode=t.statusCode,i.request=n.stripRequest(h),i.response=n.stripResponse(t),""===r&&(r=null);try{if(e=JSON.parse(r)){let t=null;e.error&&(t=e.error),i.code=t?t.code:e.code,i.message=t?t.message:e.message}if(null!=e){let t=(new u.models.ErrorResponse).mapper();i.body=u.deserialize(t,e,"error.body")}}catch(e){return i.message=`Error "${e.message}" occurred in deserializing the responseBody `+`- "${r}" for the default response.`,c(i)}return c(i)}let o=null;if(""===r&&(r=null),200===i){let e=null;try{if(e=JSON.parse(r),o=JSON.parse(r),null!=e){let t=(new u.models.AuthorizationRule).mapper();o=u.deserialize(t,e,"result")}}catch(e){let i=new Error(`Error ${e} occurred in deserializing the responseBody - ${r}`);return i.request=n.stripRequest(h),i.response=n.stripResponse(t),c(i)}}return c(null,o,h,t)})}function _listKeys(e,t,r,s,a,c){let u=this.client;if(c||"function"!=typeof a||(c=a,a=null),!c)throw new Error("callback cannot be null.");try{if(null==e||"string"!=typeof e.valueOf())throw new Error("resourceGroupName cannot be null or undefined and it must be of type string.");if(null!=e){if(e.length>90)throw new Error('"resourceGroupName" should satisfy the constraint - "MaxLength": 90');if(e.length<1)throw new Error('"resourceGroupName" should satisfy the constraint - "MinLength": 1')}if(null==t||"string"!=typeof t.valueOf())throw new Error("namespaceName cannot be null or undefined and it must be of type string.");if(null!=t){if(t.length>50)throw new Error('"namespaceName" should satisfy the constraint - "MaxLength": 50');if(t.length<6)throw new Error('"namespaceName" should satisfy the constraint - "MinLength": 6')}if(null==r||"string"!=typeof r.valueOf())throw new Error("alias cannot be null or undefined and it must be of type string.");if(null!=r){if(r.length>50)throw new Error('"alias" should satisfy the constraint - "MaxLength": 50');if(r.length<1)throw new Error('"alias" should satisfy the constraint - "MinLength": 1')}if(null==s||"string"!=typeof s.valueOf())throw new Error("authorizationRuleName cannot be null or undefined and it must be of type string.");if(null!=s&&s.length<1)throw new Error('"authorizationRuleName" should satisfy the constraint - "MinLength": 1');if(null===this.client.apiVersion||void 0===this.client.apiVersion||"string"!=typeof this.client.apiVersion.valueOf())throw new Error("this.client.apiVersion cannot be null or undefined and it must be of type string.");if(null===this.client.subscriptionId||void 0===this.client.subscriptionId||"string"!=typeof this.client.subscriptionId.valueOf())throw new Error("this.client.subscriptionId cannot be null or undefined and it must be of type string.");if(null!==this.client.acceptLanguage&&void 0!==this.client.acceptLanguage&&"string"!=typeof this.client.acceptLanguage.valueOf())throw new Error("this.client.acceptLanguage must be of type string.")}catch(e){return c(e)}let l=this.client.baseUri,p=l+(l.endsWith("/")?"":"/")+"subscriptions/{subscriptionId}/resourceGroups/{resourceGroupName}/providers/Microsoft.EventHub/namespaces/{namespaceName}/disasterRecoveryConfigs/{alias}/AuthorizationRules/{authorizationRuleName}/listKeys";p=(p=(p=(p=(p=p.replace("{resourceGroupName}",encodeURIComponent(e))).replace("{namespaceName}",encodeURIComponent(t))).replace("{alias}",encodeURIComponent(r))).replace("{authorizationRuleName}",encodeURIComponent(s))).replace("{subscriptionId}",encodeURIComponent(this.client.subscriptionId));let d=[];d.push("api-version="+encodeURIComponent(this.client.apiVersion)),d.length>0&&(p+="?"+d.join("&"));let h=new o;if(h.method="POST",h.url=p,h.headers={},h.headers["Content-Type"]="application/json; charset=utf-8",this.client.generateClientRequestId&&(h.headers["x-ms-client-request-id"]=i.generateUuid()),void 0!==this.client.acceptLanguage&&null!==this.client.acceptLanguage&&(h.headers["accept-language"]=this.client.acceptLanguage),a)for(let e in a.customHeaders)a.customHeaders.hasOwnProperty(e)&&(h.headers[e]=a.customHeaders[e]);return h.body=null,u.pipeline(h,(e,t,r)=>{if(e)return c(e);let i=t.statusCode;if(200!==i){let e,i=new Error(r);i.statusCode=t.statusCode,i.request=n.stripRequest(h),i.response=n.stripResponse(t),""===r&&(r=null);try{if(e=JSON.parse(r)){let t=null;e.error&&(t=e.error),i.code=t?t.code:e.code,i.message=t?t.message:e.message}if(null!=e){let t=(new u.models.ErrorResponse).mapper();i.body=u.deserialize(t,e,"error.body")}}catch(e){return i.message=`Error "${e.message}" occurred in deserializing the responseBody `+`- "${r}" for the default response.`,c(i)}return c(i)}let o=null;if(""===r&&(r=null),200===i){let e=null;try{if(e=JSON.parse(r),o=JSON.parse(r),null!=e){let t=(new u.models.AccessKeys).mapper();o=u.deserialize(t,e,"result")}}catch(e){let i=new Error(`Error ${e} occurred in deserializing the responseBody - ${r}`);return i.request=n.stripRequest(h),i.response=n.stripResponse(t),c(i)}}return c(null,o,h,t)})}function _listNext(e,t,r){let s=this.client;if(r||"function"!=typeof t||(r=t,t=null),!r)throw new Error("callback cannot be null.");try{if(null==e||"string"!=typeof e.valueOf())throw new Error("nextPageLink cannot be null or undefined and it must be of type string.");if(null!==this.client.acceptLanguage&&void 0!==this.client.acceptLanguage&&"string"!=typeof this.client.acceptLanguage.valueOf())throw new Error("this.client.acceptLanguage must be of type string.")}catch(e){return r(e)}let a="{nextLink}";a=a.replace("{nextLink}",e);let c=new o;if(c.method="GET",c.url=a,c.headers={},c.headers["Content-Type"]="application/json; charset=utf-8",this.client.generateClientRequestId&&(c.headers["x-ms-client-request-id"]=i.generateUuid()),void 0!==this.client.acceptLanguage&&null!==this.client.acceptLanguage&&(c.headers["accept-language"]=this.client.acceptLanguage),t)for(let e in t.customHeaders)t.customHeaders.hasOwnProperty(e)&&(c.headers[e]=t.customHeaders[e]);return c.body=null,s.pipeline(c,(e,t,i)=>{if(e)return r(e);let o=t.statusCode;if(200!==o){let e,o=new Error(i);o.statusCode=t.statusCode,o.request=n.stripRequest(c),o.response=n.stripResponse(t),""===i&&(i=null);try{if(e=JSON.parse(i)){let t=null;e.error&&(t=e.error),o.code=t?t.code:e.code,o.message=t?t.message:e.message}if(null!=e){let t=(new s.models.ErrorResponse).mapper();o.body=s.deserialize(t,e,"error.body")}}catch(e){return o.message=`Error "${e.message}" occurred in deserializing the responseBody `+`- "${i}" for the default response.`,r(o)}return r(o)}let a=null;if(""===i&&(i=null),200===o){let e=null;try{if(e=JSON.parse(i),a=JSON.parse(i),null!=e){let t=(new s.models.ArmDisasterRecoveryListResult).mapper();a=s.deserialize(t,e,"result")}}catch(e){let o=new Error(`Error ${e} occurred in deserializing the responseBody - ${i}`);return o.request=n.stripRequest(c),o.response=n.stripResponse(t),r(o)}}return r(null,a,c,t)})}function _listAuthorizationRulesNext(e,t,r){let s=this.client;if(r||"function"!=typeof t||(r=t,t=null),!r)throw new Error("callback cannot be null.");try{if(null==e||"string"!=typeof e.valueOf())throw new Error("nextPageLink cannot be null or undefined and it must be of type string.");if(null!==this.client.acceptLanguage&&void 0!==this.client.acceptLanguage&&"string"!=typeof this.client.acceptLanguage.valueOf())throw new Error("this.client.acceptLanguage must be of type string.")}catch(e){return r(e)}let a="{nextLink}";a=a.replace("{nextLink}",e);let c=new o;if(c.method="GET",c.url=a,c.headers={},c.headers["Content-Type"]="application/json; charset=utf-8",this.client.generateClientRequestId&&(c.headers["x-ms-client-request-id"]=i.generateUuid()),void 0!==this.client.acceptLanguage&&null!==this.client.acceptLanguage&&(c.headers["accept-language"]=this.client.acceptLanguage),t)for(let e in t.customHeaders)t.customHeaders.hasOwnProperty(e)&&(c.headers[e]=t.customHeaders[e]);return c.body=null,s.pipeline(c,(e,t,i)=>{if(e)return r(e);let o=t.statusCode;if(200!==o){let e,o=new Error(i);o.statusCode=t.statusCode,o.request=n.stripRequest(c),o.response=n.stripResponse(t),""===i&&(i=null);try{if(e=JSON.parse(i)){let t=null;e.error&&(t=e.error),o.code=t?t.code:e.code,o.message=t?t.message:e.message}if(null!=e){let t=(new s.models.ErrorResponse).mapper();o.body=s.deserialize(t,e,"error.body")}}catch(e){return o.message=`Error "${e.message}" occurred in deserializing the responseBody `+`- "${i}" for the default response.`,r(o)}return r(o)}let a=null;if(""===i&&(i=null),200===o){let e=null;try{if(e=JSON.parse(i),a=JSON.parse(i),null!=e){let t=(new s.models.AuthorizationRuleListResult).mapper();a=s.deserialize(t,e,"result")}}catch(e){let o=new Error(`Error ${e} occurred in deserializing the responseBody - ${i}`);return o.request=n.stripRequest(c),o.response=n.stripResponse(t),r(o)}}return r(null,a,c,t)})}e.exports=class DisasterRecoveryConfigs{constructor(e){this.client=e,this._checkNameAvailability=_checkNameAvailability,this._list=_list,this._createOrUpdate=_createOrUpdate,this._deleteMethod=_deleteMethod,this._get=_get,this._breakPairing=_breakPairing,this._failOver=_failOver,this._listAuthorizationRules=_listAuthorizationRules,this._getAuthorizationRule=_getAuthorizationRule,this._listKeys=_listKeys,this._listNext=_listNext,this._listAuthorizationRulesNext=_listAuthorizationRulesNext}checkNameAvailabilityWithHttpOperationResponse(e,t,r,i){this.client;let o=this;return new Promise((s,a)=>{o._checkNameAvailability(e,t,r,i,(e,t,r,i)=>{let o=new n.HttpOperationResponse(r,i);o.body=t,e?a(e):s(o)})})}checkNameAvailability(e,t,r,n,i){this.client;let o=this;return i||"function"!=typeof n||(i=n,n=null),i?o._checkNameAvailability(e,t,r,n,i):new Promise((i,s)=>{o._checkNameAvailability(e,t,r,n,(e,t,r,n)=>{e?s(e):i(t)})})}listWithHttpOperationResponse(e,t,r){this.client;let i=this;return new Promise((o,s)=>{i._list(e,t,r,(e,t,r,i)=>{let a=new n.HttpOperationResponse(r,i);a.body=t,e?s(e):o(a)})})}list(e,t,r,n){this.client;let i=this;return n||"function"!=typeof r||(n=r,r=null),n?i._list(e,t,r,n):new Promise((n,o)=>{i._list(e,t,r,(e,t,r,i)=>{e?o(e):n(t)})})}createOrUpdateWithHttpOperationResponse(e,t,r,i,o){this.client;let s=this;return new Promise((a,c)=>{s._createOrUpdate(e,t,r,i,o,(e,t,r,i)=>{let o=new n.HttpOperationResponse(r,i);o.body=t,e?c(e):a(o)})})}createOrUpdate(e,t,r,n,i,o){this.client;let s=this;return o||"function"!=typeof i||(o=i,i=null),o?s._createOrUpdate(e,t,r,n,i,o):new Promise((o,a)=>{s._createOrUpdate(e,t,r,n,i,(e,t,r,n)=>{e?a(e):o(t)})})}deleteMethodWithHttpOperationResponse(e,t,r,i){this.client;let o=this;return new Promise((s,a)=>{o._deleteMethod(e,t,r,i,(e,t,r,i)=>{let o=new n.HttpOperationResponse(r,i);o.body=t,e?a(e):s(o)})})}deleteMethod(e,t,r,n,i){this.client;let o=this;return i||"function"!=typeof n||(i=n,n=null),i?o._deleteMethod(e,t,r,n,i):new Promise((i,s)=>{o._deleteMethod(e,t,r,n,(e,t,r,n)=>{e?s(e):i(t)})})}getWithHttpOperationResponse(e,t,r,i){this.client;let o=this;return new Promise((s,a)=>{o._get(e,t,r,i,(e,t,r,i)=>{let o=new n.HttpOperationResponse(r,i);o.body=t,e?a(e):s(o)})})}get(e,t,r,n,i){this.client;let o=this;return i||"function"!=typeof n||(i=n,n=null),i?o._get(e,t,r,n,i):new Promise((i,s)=>{o._get(e,t,r,n,(e,t,r,n)=>{e?s(e):i(t)})})}breakPairingWithHttpOperationResponse(e,t,r,i){this.client;let o=this;return new Promise((s,a)=>{o._breakPairing(e,t,r,i,(e,t,r,i)=>{let o=new n.HttpOperationResponse(r,i);o.body=t,e?a(e):s(o)})})}breakPairing(e,t,r,n,i){this.client;let o=this;return i||"function"!=typeof n||(i=n,n=null),i?o._breakPairing(e,t,r,n,i):new Promise((i,s)=>{o._breakPairing(e,t,r,n,(e,t,r,n)=>{e?s(e):i(t)})})}failOverWithHttpOperationResponse(e,t,r,i){this.client;let o=this;return new Promise((s,a)=>{o._failOver(e,t,r,i,(e,t,r,i)=>{let o=new n.HttpOperationResponse(r,i);o.body=t,e?a(e):s(o)})})}failOver(e,t,r,n,i){this.client;let o=this;return i||"function"!=typeof n||(i=n,n=null),i?o._failOver(e,t,r,n,i):new Promise((i,s)=>{o._failOver(e,t,r,n,(e,t,r,n)=>{e?s(e):i(t)})})}listAuthorizationRulesWithHttpOperationResponse(e,t,r,i){this.client;let o=this;return new Promise((s,a)=>{o._listAuthorizationRules(e,t,r,i,(e,t,r,i)=>{let o=new n.HttpOperationResponse(r,i);o.body=t,e?a(e):s(o)})})}listAuthorizationRules(e,t,r,n,i){this.client;let o=this;return i||"function"!=typeof n||(i=n,n=null),i?o._listAuthorizationRules(e,t,r,n,i):new Promise((i,s)=>{o._listAuthorizationRules(e,t,r,n,(e,t,r,n)=>{e?s(e):i(t)})})}getAuthorizationRuleWithHttpOperationResponse(e,t,r,i,o){this.client;let s=this;return new Promise((a,c)=>{s._getAuthorizationRule(e,t,r,i,o,(e,t,r,i)=>{let o=new n.HttpOperationResponse(r,i);o.body=t,e?c(e):a(o)})})}getAuthorizationRule(e,t,r,n,i,o){this.client;let s=this;return o||"function"!=typeof i||(o=i,i=null),o?s._getAuthorizationRule(e,t,r,n,i,o):new Promise((o,a)=>{s._getAuthorizationRule(e,t,r,n,i,(e,t,r,n)=>{e?a(e):o(t)})})}listKeysWithHttpOperationResponse(e,t,r,i,o){this.client;let s=this;return new Promise((a,c)=>{s._listKeys(e,t,r,i,o,(e,t,r,i)=>{let o=new n.HttpOperationResponse(r,i);o.body=t,e?c(e):a(o)})})}listKeys(e,t,r,n,i,o){this.client;let s=this;return o||"function"!=typeof i||(o=i,i=null),o?s._listKeys(e,t,r,n,i,o):new Promise((o,a)=>{s._listKeys(e,t,r,n,i,(e,t,r,n)=>{e?a(e):o(t)})})}listNextWithHttpOperationResponse(e,t){this.client;let r=this;return new Promise((i,o)=>{r._listNext(e,t,(e,t,r,s)=>{let a=new n.HttpOperationResponse(r,s);a.body=t,e?o(e):i(a)})})}listNext(e,t,r){this.client;let n=this;return r||"function"!=typeof t||(r=t,t=null),r?n._listNext(e,t,r):new Promise((r,i)=>{n._listNext(e,t,(e,t,n,o)=>{e?i(e):r(t)})})}listAuthorizationRulesNextWithHttpOperationResponse(e,t){this.client;let r=this;return new Promise((i,o)=>{r._listAuthorizationRulesNext(e,t,(e,t,r,s)=>{let a=new n.HttpOperationResponse(r,s);a.body=t,e?o(e):i(a)})})}listAuthorizationRulesNext(e,t,r){this.client;let n=this;return r||"function"!=typeof t||(r=t,t=null),r?n._listAuthorizationRulesNext(e,t,r):new Promise((r,i)=>{n._listAuthorizationRulesNext(e,t,(e,t,n,o)=>{e?i(e):r(t)})})}}},function(e,t,r){"use strict";const n=r(86),i=r(9),o=n.WebResource;function _listByNamespace(e,t,r,s){let a=this.client;if(s||"function"!=typeof r||(s=r,r=null),!s)throw new Error("callback cannot be null.");let c=r&&void 0!==r.skip?r.skip:void 0,u=r&&void 0!==r.top?r.top:void 0;try{if(null==e||"string"!=typeof e.valueOf())throw new Error("resourceGroupName cannot be null or undefined and it must be of type string.");if(null!=e){if(e.length>90)throw new Error('"resourceGroupName" should satisfy the constraint - "MaxLength": 90');if(e.length<1)throw new Error('"resourceGroupName" should satisfy the constraint - "MinLength": 1')}if(null==t||"string"!=typeof t.valueOf())throw new Error("namespaceName cannot be null or undefined and it must be of type string.");if(null!=t){if(t.length>50)throw new Error('"namespaceName" should satisfy the constraint - "MaxLength": 50');if(t.length<6)throw new Error('"namespaceName" should satisfy the constraint - "MinLength": 6')}if(null===this.client.apiVersion||void 0===this.client.apiVersion||"string"!=typeof this.client.apiVersion.valueOf())throw new Error("this.client.apiVersion cannot be null or undefined and it must be of type string.");if(null===this.client.subscriptionId||void 0===this.client.subscriptionId||"string"!=typeof this.client.subscriptionId.valueOf())throw new Error("this.client.subscriptionId cannot be null or undefined and it must be of type string.");if(null!=c&&"number"!=typeof c)throw new Error("skip must be of type number.");if(null!=c){if(c>1e3)throw new Error('"skip" should satisfy the constraint - "InclusiveMaximum": 1000');if(c<0)throw new Error('"skip" should satisfy the constraint - "InclusiveMinimum": 0')}if(null!=u&&"number"!=typeof u)throw new Error("top must be of type number.");if(null!=u){if(u>1e3)throw new Error('"top" should satisfy the constraint - "InclusiveMaximum": 1000');if(u<1)throw new Error('"top" should satisfy the constraint - "InclusiveMinimum": 1')}if(null!==this.client.acceptLanguage&&void 0!==this.client.acceptLanguage&&"string"!=typeof this.client.acceptLanguage.valueOf())throw new Error("this.client.acceptLanguage must be of type string.")}catch(e){return s(e)}let l=this.client.baseUri,p=l+(l.endsWith("/")?"":"/")+"subscriptions/{subscriptionId}/resourceGroups/{resourceGroupName}/providers/Microsoft.EventHub/namespaces/{namespaceName}/eventhubs";p=(p=(p=p.replace("{resourceGroupName}",encodeURIComponent(e))).replace("{namespaceName}",encodeURIComponent(t))).replace("{subscriptionId}",encodeURIComponent(this.client.subscriptionId));let d=[];d.push("api-version="+encodeURIComponent(this.client.apiVersion)),null!=c&&d.push("$skip="+encodeURIComponent(c.toString())),null!=u&&d.push("$top="+encodeURIComponent(u.toString())),d.length>0&&(p+="?"+d.join("&"));let h=new o;if(h.method="GET",h.url=p,h.headers={},h.headers["Content-Type"]="application/json; charset=utf-8",this.client.generateClientRequestId&&(h.headers["x-ms-client-request-id"]=i.generateUuid()),void 0!==this.client.acceptLanguage&&null!==this.client.acceptLanguage&&(h.headers["accept-language"]=this.client.acceptLanguage),r)for(let e in r.customHeaders)r.customHeaders.hasOwnProperty(e)&&(h.headers[e]=r.customHeaders[e]);return h.body=null,a.pipeline(h,(e,t,r)=>{if(e)return s(e);let i=t.statusCode;if(200!==i){let e,i=new Error(r);i.statusCode=t.statusCode,i.request=n.stripRequest(h),i.response=n.stripResponse(t),""===r&&(r=null);try{if(e=JSON.parse(r)){let t=null;e.error&&(t=e.error),i.code=t?t.code:e.code,i.message=t?t.message:e.message}if(null!=e){let t=(new a.models.ErrorResponse).mapper();i.body=a.deserialize(t,e,"error.body")}}catch(e){return i.message=`Error "${e.message}" occurred in deserializing the responseBody `+`- "${r}" for the default response.`,s(i)}return s(i)}let o=null;if(""===r&&(r=null),200===i){let e=null;try{if(e=JSON.parse(r),o=JSON.parse(r),null!=e){let t=(new a.models.EventHubListResult).mapper();o=a.deserialize(t,e,"result")}}catch(e){let i=new Error(`Error ${e} occurred in deserializing the responseBody - ${r}`);return i.request=n.stripRequest(h),i.response=n.stripResponse(t),s(i)}}return s(null,o,h,t)})}function _createOrUpdate(e,t,r,s,a,c){let u=this.client;if(c||"function"!=typeof a||(c=a,a=null),!c)throw new Error("callback cannot be null.");try{if(null==e||"string"!=typeof e.valueOf())throw new Error("resourceGroupName cannot be null or undefined and it must be of type string.");if(null!=e){if(e.length>90)throw new Error('"resourceGroupName" should satisfy the constraint - "MaxLength": 90');if(e.length<1)throw new Error('"resourceGroupName" should satisfy the constraint - "MinLength": 1')}if(null==t||"string"!=typeof t.valueOf())throw new Error("namespaceName cannot be null or undefined and it must be of type string.");if(null!=t){if(t.length>50)throw new Error('"namespaceName" should satisfy the constraint - "MaxLength": 50');if(t.length<6)throw new Error('"namespaceName" should satisfy the constraint - "MinLength": 6')}if(null==r||"string"!=typeof r.valueOf())throw new Error("eventHubName cannot be null or undefined and it must be of type string.");if(null!=r&&r.length<1)throw new Error('"eventHubName" should satisfy the constraint - "MinLength": 1');if(null==s)throw new Error("parameters cannot be null or undefined.");if(null===this.client.apiVersion||void 0===this.client.apiVersion||"string"!=typeof this.client.apiVersion.valueOf())throw new Error("this.client.apiVersion cannot be null or undefined and it must be of type string.");if(null===this.client.subscriptionId||void 0===this.client.subscriptionId||"string"!=typeof this.client.subscriptionId.valueOf())throw new Error("this.client.subscriptionId cannot be null or undefined and it must be of type string.");if(null!==this.client.acceptLanguage&&void 0!==this.client.acceptLanguage&&"string"!=typeof this.client.acceptLanguage.valueOf())throw new Error("this.client.acceptLanguage must be of type string.")}catch(e){return c(e)}let l=this.client.baseUri,p=l+(l.endsWith("/")?"":"/")+"subscriptions/{subscriptionId}/resourceGroups/{resourceGroupName}/providers/Microsoft.EventHub/namespaces/{namespaceName}/eventhubs/{eventHubName}";p=(p=(p=(p=p.replace("{resourceGroupName}",encodeURIComponent(e))).replace("{namespaceName}",encodeURIComponent(t))).replace("{eventHubName}",encodeURIComponent(r))).replace("{subscriptionId}",encodeURIComponent(this.client.subscriptionId));let d=[];d.push("api-version="+encodeURIComponent(this.client.apiVersion)),d.length>0&&(p+="?"+d.join("&"));let h=new o;if(h.method="PUT",h.url=p,h.headers={},h.headers["Content-Type"]="application/json; charset=utf-8",this.client.generateClientRequestId&&(h.headers["x-ms-client-request-id"]=i.generateUuid()),void 0!==this.client.acceptLanguage&&null!==this.client.acceptLanguage&&(h.headers["accept-language"]=this.client.acceptLanguage),a)for(let e in a.customHeaders)a.customHeaders.hasOwnProperty(e)&&(h.headers[e]=a.customHeaders[e]);let f=null,m=null;try{if(null!=s){let e=(new u.models.Eventhub).mapper();m=u.serialize(e,s,"parameters"),f=JSON.stringify(m)}}catch(e){let t=new Error(`Error "${e.message}" occurred in serializing the `+`payload - ${JSON.stringify(s,null,2)}.`);return c(t)}return h.body=f,u.pipeline(h,(e,t,r)=>{if(e)return c(e);let i=t.statusCode;if(200!==i){let e,i=new Error(r);i.statusCode=t.statusCode,i.request=n.stripRequest(h),i.response=n.stripResponse(t),""===r&&(r=null);try{if(e=JSON.parse(r)){let t=null;e.error&&(t=e.error),i.code=t?t.code:e.code,i.message=t?t.message:e.message}if(null!=e){let t=(new u.models.ErrorResponse).mapper();i.body=u.deserialize(t,e,"error.body")}}catch(e){return i.message=`Error "${e.message}" occurred in deserializing the responseBody `+`- "${r}" for the default response.`,c(i)}return c(i)}let o=null;if(""===r&&(r=null),200===i){let e=null;try{if(e=JSON.parse(r),o=JSON.parse(r),null!=e){let t=(new u.models.Eventhub).mapper();o=u.deserialize(t,e,"result")}}catch(e){let i=new Error(`Error ${e} occurred in deserializing the responseBody - ${r}`);return i.request=n.stripRequest(h),i.response=n.stripResponse(t),c(i)}}return c(null,o,h,t)})}function _deleteMethod(e,t,r,s,a){let c=this.client;if(a||"function"!=typeof s||(a=s,s=null),!a)throw new Error("callback cannot be null.");try{if(null==e||"string"!=typeof e.valueOf())throw new Error("resourceGroupName cannot be null or undefined and it must be of type string.");if(null!=e){if(e.length>90)throw new Error('"resourceGroupName" should satisfy the constraint - "MaxLength": 90');if(e.length<1)throw new Error('"resourceGroupName" should satisfy the constraint - "MinLength": 1')}if(null==t||"string"!=typeof t.valueOf())throw new Error("namespaceName cannot be null or undefined and it must be of type string.");if(null!=t){if(t.length>50)throw new Error('"namespaceName" should satisfy the constraint - "MaxLength": 50');if(t.length<6)throw new Error('"namespaceName" should satisfy the constraint - "MinLength": 6')}if(null==r||"string"!=typeof r.valueOf())throw new Error("eventHubName cannot be null or undefined and it must be of type string.");if(null!=r&&r.length<1)throw new Error('"eventHubName" should satisfy the constraint - "MinLength": 1');if(null===this.client.apiVersion||void 0===this.client.apiVersion||"string"!=typeof this.client.apiVersion.valueOf())throw new Error("this.client.apiVersion cannot be null or undefined and it must be of type string.");if(null===this.client.subscriptionId||void 0===this.client.subscriptionId||"string"!=typeof this.client.subscriptionId.valueOf())throw new Error("this.client.subscriptionId cannot be null or undefined and it must be of type string.");if(null!==this.client.acceptLanguage&&void 0!==this.client.acceptLanguage&&"string"!=typeof this.client.acceptLanguage.valueOf())throw new Error("this.client.acceptLanguage must be of type string.")}catch(e){return a(e)}let u=this.client.baseUri,l=u+(u.endsWith("/")?"":"/")+"subscriptions/{subscriptionId}/resourceGroups/{resourceGroupName}/providers/Microsoft.EventHub/namespaces/{namespaceName}/eventhubs/{eventHubName}";l=(l=(l=(l=l.replace("{resourceGroupName}",encodeURIComponent(e))).replace("{namespaceName}",encodeURIComponent(t))).replace("{eventHubName}",encodeURIComponent(r))).replace("{subscriptionId}",encodeURIComponent(this.client.subscriptionId));let p=[];p.push("api-version="+encodeURIComponent(this.client.apiVersion)),p.length>0&&(l+="?"+p.join("&"));let d=new o;if(d.method="DELETE",d.url=l,d.headers={},d.headers["Content-Type"]="application/json; charset=utf-8",this.client.generateClientRequestId&&(d.headers["x-ms-client-request-id"]=i.generateUuid()),void 0!==this.client.acceptLanguage&&null!==this.client.acceptLanguage&&(d.headers["accept-language"]=this.client.acceptLanguage),s)for(let e in s.customHeaders)s.customHeaders.hasOwnProperty(e)&&(d.headers[e]=s.customHeaders[e]);return d.body=null,c.pipeline(d,(e,t,r)=>{if(e)return a(e);let i=t.statusCode;if(200!==i&&204!==i){let e,i=new Error(r);i.statusCode=t.statusCode,i.request=n.stripRequest(d),i.response=n.stripResponse(t),""===r&&(r=null);try{if(e=JSON.parse(r)){let t=null;e.error&&(t=e.error),i.code=t?t.code:e.code,i.message=t?t.message:e.message}if(null!=e){let t=(new c.models.ErrorResponse).mapper();i.body=c.deserialize(t,e,"error.body")}}catch(e){return i.message=`Error "${e.message}" occurred in deserializing the responseBody `+`- "${r}" for the default response.`,a(i)}return a(i)}return""===r&&(r=null),a(null,null,d,t)})}function _get(e,t,r,s,a){let c=this.client;if(a||"function"!=typeof s||(a=s,s=null),!a)throw new Error("callback cannot be null.");try{if(null==e||"string"!=typeof e.valueOf())throw new Error("resourceGroupName cannot be null or undefined and it must be of type string.");if(null!=e){if(e.length>90)throw new Error('"resourceGroupName" should satisfy the constraint - "MaxLength": 90');if(e.length<1)throw new Error('"resourceGroupName" should satisfy the constraint - "MinLength": 1')}if(null==t||"string"!=typeof t.valueOf())throw new Error("namespaceName cannot be null or undefined and it must be of type string.");if(null!=t){if(t.length>50)throw new Error('"namespaceName" should satisfy the constraint - "MaxLength": 50');if(t.length<6)throw new Error('"namespaceName" should satisfy the constraint - "MinLength": 6')}if(null==r||"string"!=typeof r.valueOf())throw new Error("eventHubName cannot be null or undefined and it must be of type string.");if(null!=r&&r.length<1)throw new Error('"eventHubName" should satisfy the constraint - "MinLength": 1');if(null===this.client.apiVersion||void 0===this.client.apiVersion||"string"!=typeof this.client.apiVersion.valueOf())throw new Error("this.client.apiVersion cannot be null or undefined and it must be of type string.");if(null===this.client.subscriptionId||void 0===this.client.subscriptionId||"string"!=typeof this.client.subscriptionId.valueOf())throw new Error("this.client.subscriptionId cannot be null or undefined and it must be of type string.");if(null!==this.client.acceptLanguage&&void 0!==this.client.acceptLanguage&&"string"!=typeof this.client.acceptLanguage.valueOf())throw new Error("this.client.acceptLanguage must be of type string.")}catch(e){return a(e)}let u=this.client.baseUri,l=u+(u.endsWith("/")?"":"/")+"subscriptions/{subscriptionId}/resourceGroups/{resourceGroupName}/providers/Microsoft.EventHub/namespaces/{namespaceName}/eventhubs/{eventHubName}";l=(l=(l=(l=l.replace("{resourceGroupName}",encodeURIComponent(e))).replace("{namespaceName}",encodeURIComponent(t))).replace("{eventHubName}",encodeURIComponent(r))).replace("{subscriptionId}",encodeURIComponent(this.client.subscriptionId));let p=[];p.push("api-version="+encodeURIComponent(this.client.apiVersion)),p.length>0&&(l+="?"+p.join("&"));let d=new o;if(d.method="GET",d.url=l,d.headers={},d.headers["Content-Type"]="application/json; charset=utf-8",this.client.generateClientRequestId&&(d.headers["x-ms-client-request-id"]=i.generateUuid()),void 0!==this.client.acceptLanguage&&null!==this.client.acceptLanguage&&(d.headers["accept-language"]=this.client.acceptLanguage),s)for(let e in s.customHeaders)s.customHeaders.hasOwnProperty(e)&&(d.headers[e]=s.customHeaders[e]);return d.body=null,c.pipeline(d,(e,t,r)=>{if(e)return a(e);let i=t.statusCode;if(200!==i){let e,i=new Error(r);i.statusCode=t.statusCode,i.request=n.stripRequest(d),i.response=n.stripResponse(t),""===r&&(r=null);try{if(e=JSON.parse(r)){let t=null;e.error&&(t=e.error),i.code=t?t.code:e.code,i.message=t?t.message:e.message}if(null!=e){let t=(new c.models.ErrorResponse).mapper();i.body=c.deserialize(t,e,"error.body")}}catch(e){return i.message=`Error "${e.message}" occurred in deserializing the responseBody `+`- "${r}" for the default response.`,a(i)}return a(i)}let o=null;if(""===r&&(r=null),200===i){let e=null;try{if(e=JSON.parse(r),o=JSON.parse(r),null!=e){let t=(new c.models.Eventhub).mapper();o=c.deserialize(t,e,"result")}}catch(e){let i=new Error(`Error ${e} occurred in deserializing the responseBody - ${r}`);return i.request=n.stripRequest(d),i.response=n.stripResponse(t),a(i)}}return a(null,o,d,t)})}function _listAuthorizationRules(e,t,r,s,a){let c=this.client;if(a||"function"!=typeof s||(a=s,s=null),!a)throw new Error("callback cannot be null.");try{if(null==e||"string"!=typeof e.valueOf())throw new Error("resourceGroupName cannot be null or undefined and it must be of type string.");if(null!=e){if(e.length>90)throw new Error('"resourceGroupName" should satisfy the constraint - "MaxLength": 90');if(e.length<1)throw new Error('"resourceGroupName" should satisfy the constraint - "MinLength": 1')}if(null==t||"string"!=typeof t.valueOf())throw new Error("namespaceName cannot be null or undefined and it must be of type string.");if(null!=t){if(t.length>50)throw new Error('"namespaceName" should satisfy the constraint - "MaxLength": 50');if(t.length<6)throw new Error('"namespaceName" should satisfy the constraint - "MinLength": 6')}if(null==r||"string"!=typeof r.valueOf())throw new Error("eventHubName cannot be null or undefined and it must be of type string.");if(null!=r&&r.length<1)throw new Error('"eventHubName" should satisfy the constraint - "MinLength": 1');if(null===this.client.apiVersion||void 0===this.client.apiVersion||"string"!=typeof this.client.apiVersion.valueOf())throw new Error("this.client.apiVersion cannot be null or undefined and it must be of type string.");if(null===this.client.subscriptionId||void 0===this.client.subscriptionId||"string"!=typeof this.client.subscriptionId.valueOf())throw new Error("this.client.subscriptionId cannot be null or undefined and it must be of type string.");if(null!==this.client.acceptLanguage&&void 0!==this.client.acceptLanguage&&"string"!=typeof this.client.acceptLanguage.valueOf())throw new Error("this.client.acceptLanguage must be of type string.")}catch(e){return a(e)}let u=this.client.baseUri,l=u+(u.endsWith("/")?"":"/")+"subscriptions/{subscriptionId}/resourceGroups/{resourceGroupName}/providers/Microsoft.EventHub/namespaces/{namespaceName}/eventhubs/{eventHubName}/authorizationRules";l=(l=(l=(l=l.replace("{resourceGroupName}",encodeURIComponent(e))).replace("{namespaceName}",encodeURIComponent(t))).replace("{eventHubName}",encodeURIComponent(r))).replace("{subscriptionId}",encodeURIComponent(this.client.subscriptionId));let p=[];p.push("api-version="+encodeURIComponent(this.client.apiVersion)),p.length>0&&(l+="?"+p.join("&"));let d=new o;if(d.method="GET",d.url=l,d.headers={},d.headers["Content-Type"]="application/json; charset=utf-8",this.client.generateClientRequestId&&(d.headers["x-ms-client-request-id"]=i.generateUuid()),void 0!==this.client.acceptLanguage&&null!==this.client.acceptLanguage&&(d.headers["accept-language"]=this.client.acceptLanguage),s)for(let e in s.customHeaders)s.customHeaders.hasOwnProperty(e)&&(d.headers[e]=s.customHeaders[e]);return d.body=null,c.pipeline(d,(e,t,r)=>{if(e)return a(e);let i=t.statusCode;if(200!==i){let e,i=new Error(r);i.statusCode=t.statusCode,i.request=n.stripRequest(d),i.response=n.stripResponse(t),""===r&&(r=null);try{if(e=JSON.parse(r)){let t=null;e.error&&(t=e.error),i.code=t?t.code:e.code,i.message=t?t.message:e.message}if(null!=e){let t=(new c.models.ErrorResponse).mapper();i.body=c.deserialize(t,e,"error.body")}}catch(e){return i.message=`Error "${e.message}" occurred in deserializing the responseBody `+`- "${r}" for the default response.`,a(i)}return a(i)}let o=null;if(""===r&&(r=null),200===i){let e=null;try{if(e=JSON.parse(r),o=JSON.parse(r),null!=e){let t=(new c.models.AuthorizationRuleListResult).mapper();o=c.deserialize(t,e,"result")}}catch(e){let i=new Error(`Error ${e} occurred in deserializing the responseBody - ${r}`);return i.request=n.stripRequest(d),i.response=n.stripResponse(t),a(i)}}return a(null,o,d,t)})}function _createOrUpdateAuthorizationRule(e,t,r,s,a,c,u){let l=this.client;if(u||"function"!=typeof c||(u=c,c=null),!u)throw new Error("callback cannot be null.");try{if(null==e||"string"!=typeof e.valueOf())throw new Error("resourceGroupName cannot be null or undefined and it must be of type string.");if(null!=e){if(e.length>90)throw new Error('"resourceGroupName" should satisfy the constraint - "MaxLength": 90');if(e.length<1)throw new Error('"resourceGroupName" should satisfy the constraint - "MinLength": 1')}if(null==t||"string"!=typeof t.valueOf())throw new Error("namespaceName cannot be null or undefined and it must be of type string.");if(null!=t){if(t.length>50)throw new Error('"namespaceName" should satisfy the constraint - "MaxLength": 50');if(t.length<6)throw new Error('"namespaceName" should satisfy the constraint - "MinLength": 6')}if(null==r||"string"!=typeof r.valueOf())throw new Error("eventHubName cannot be null or undefined and it must be of type string.");if(null!=r&&r.length<1)throw new Error('"eventHubName" should satisfy the constraint - "MinLength": 1');if(null==s||"string"!=typeof s.valueOf())throw new Error("authorizationRuleName cannot be null or undefined and it must be of type string.");if(null!=s&&s.length<1)throw new Error('"authorizationRuleName" should satisfy the constraint - "MinLength": 1');if(null==a)throw new Error("parameters cannot be null or undefined.");if(null===this.client.apiVersion||void 0===this.client.apiVersion||"string"!=typeof this.client.apiVersion.valueOf())throw new Error("this.client.apiVersion cannot be null or undefined and it must be of type string.");if(null===this.client.subscriptionId||void 0===this.client.subscriptionId||"string"!=typeof this.client.subscriptionId.valueOf())throw new Error("this.client.subscriptionId cannot be null or undefined and it must be of type string.");if(null!==this.client.acceptLanguage&&void 0!==this.client.acceptLanguage&&"string"!=typeof this.client.acceptLanguage.valueOf())throw new Error("this.client.acceptLanguage must be of type string.")}catch(e){return u(e)}let p=this.client.baseUri,d=p+(p.endsWith("/")?"":"/")+"subscriptions/{subscriptionId}/resourceGroups/{resourceGroupName}/providers/Microsoft.EventHub/namespaces/{namespaceName}/eventhubs/{eventHubName}/authorizationRules/{authorizationRuleName}";d=(d=(d=(d=(d=d.replace("{resourceGroupName}",encodeURIComponent(e))).replace("{namespaceName}",encodeURIComponent(t))).replace("{eventHubName}",encodeURIComponent(r))).replace("{authorizationRuleName}",encodeURIComponent(s))).replace("{subscriptionId}",encodeURIComponent(this.client.subscriptionId));let h=[];h.push("api-version="+encodeURIComponent(this.client.apiVersion)),h.length>0&&(d+="?"+h.join("&"));let f=new o;if(f.method="PUT",f.url=d,f.headers={},f.headers["Content-Type"]="application/json; charset=utf-8",this.client.generateClientRequestId&&(f.headers["x-ms-client-request-id"]=i.generateUuid()),void 0!==this.client.acceptLanguage&&null!==this.client.acceptLanguage&&(f.headers["accept-language"]=this.client.acceptLanguage),c)for(let e in c.customHeaders)c.customHeaders.hasOwnProperty(e)&&(f.headers[e]=c.customHeaders[e]);let m=null,g=null;try{if(null!=a){let e=(new l.models.AuthorizationRule).mapper();g=l.serialize(e,a,"parameters"),m=JSON.stringify(g)}}catch(e){let t=new Error(`Error "${e.message}" occurred in serializing the `+`payload - ${JSON.stringify(a,null,2)}.`);return u(t)}return f.body=m,l.pipeline(f,(e,t,r)=>{if(e)return u(e);let i=t.statusCode;if(200!==i){let e,i=new Error(r);i.statusCode=t.statusCode,i.request=n.stripRequest(f),i.response=n.stripResponse(t),""===r&&(r=null);try{if(e=JSON.parse(r)){let t=null;e.error&&(t=e.error),i.code=t?t.code:e.code,i.message=t?t.message:e.message}if(null!=e){let t=(new l.models.ErrorResponse).mapper();i.body=l.deserialize(t,e,"error.body")}}catch(e){return i.message=`Error "${e.message}" occurred in deserializing the responseBody `+`- "${r}" for the default response.`,u(i)}return u(i)}let o=null;if(""===r&&(r=null),200===i){let e=null;try{if(e=JSON.parse(r),o=JSON.parse(r),null!=e){let t=(new l.models.AuthorizationRule).mapper();o=l.deserialize(t,e,"result")}}catch(e){let i=new Error(`Error ${e} occurred in deserializing the responseBody - ${r}`);return i.request=n.stripRequest(f),i.response=n.stripResponse(t),u(i)}}return u(null,o,f,t)})}function _getAuthorizationRule(e,t,r,s,a,c){let u=this.client;if(c||"function"!=typeof a||(c=a,a=null),!c)throw new Error("callback cannot be null.");try{if(null==e||"string"!=typeof e.valueOf())throw new Error("resourceGroupName cannot be null or undefined and it must be of type string.");if(null!=e){if(e.length>90)throw new Error('"resourceGroupName" should satisfy the constraint - "MaxLength": 90');if(e.length<1)throw new Error('"resourceGroupName" should satisfy the constraint - "MinLength": 1')}if(null==t||"string"!=typeof t.valueOf())throw new Error("namespaceName cannot be null or undefined and it must be of type string.");if(null!=t){if(t.length>50)throw new Error('"namespaceName" should satisfy the constraint - "MaxLength": 50');if(t.length<6)throw new Error('"namespaceName" should satisfy the constraint - "MinLength": 6')}if(null==r||"string"!=typeof r.valueOf())throw new Error("eventHubName cannot be null or undefined and it must be of type string.");if(null!=r&&r.length<1)throw new Error('"eventHubName" should satisfy the constraint - "MinLength": 1');if(null==s||"string"!=typeof s.valueOf())throw new Error("authorizationRuleName cannot be null or undefined and it must be of type string.");if(null!=s&&s.length<1)throw new Error('"authorizationRuleName" should satisfy the constraint - "MinLength": 1');if(null===this.client.apiVersion||void 0===this.client.apiVersion||"string"!=typeof this.client.apiVersion.valueOf())throw new Error("this.client.apiVersion cannot be null or undefined and it must be of type string.");if(null===this.client.subscriptionId||void 0===this.client.subscriptionId||"string"!=typeof this.client.subscriptionId.valueOf())throw new Error("this.client.subscriptionId cannot be null or undefined and it must be of type string.");if(null!==this.client.acceptLanguage&&void 0!==this.client.acceptLanguage&&"string"!=typeof this.client.acceptLanguage.valueOf())throw new Error("this.client.acceptLanguage must be of type string.")}catch(e){return c(e)}let l=this.client.baseUri,p=l+(l.endsWith("/")?"":"/")+"subscriptions/{subscriptionId}/resourceGroups/{resourceGroupName}/providers/Microsoft.EventHub/namespaces/{namespaceName}/eventhubs/{eventHubName}/authorizationRules/{authorizationRuleName}";p=(p=(p=(p=(p=p.replace("{resourceGroupName}",encodeURIComponent(e))).replace("{namespaceName}",encodeURIComponent(t))).replace("{eventHubName}",encodeURIComponent(r))).replace("{authorizationRuleName}",encodeURIComponent(s))).replace("{subscriptionId}",encodeURIComponent(this.client.subscriptionId));let d=[];d.push("api-version="+encodeURIComponent(this.client.apiVersion)),d.length>0&&(p+="?"+d.join("&"));let h=new o;if(h.method="GET",h.url=p,h.headers={},h.headers["Content-Type"]="application/json; charset=utf-8",this.client.generateClientRequestId&&(h.headers["x-ms-client-request-id"]=i.generateUuid()),void 0!==this.client.acceptLanguage&&null!==this.client.acceptLanguage&&(h.headers["accept-language"]=this.client.acceptLanguage),a)for(let e in a.customHeaders)a.customHeaders.hasOwnProperty(e)&&(h.headers[e]=a.customHeaders[e]);return h.body=null,u.pipeline(h,(e,t,r)=>{if(e)return c(e);let i=t.statusCode;if(200!==i){let e,i=new Error(r);i.statusCode=t.statusCode,i.request=n.stripRequest(h),i.response=n.stripResponse(t),""===r&&(r=null);try{if(e=JSON.parse(r)){let t=null;e.error&&(t=e.error),i.code=t?t.code:e.code,i.message=t?t.message:e.message}if(null!=e){let t=(new u.models.ErrorResponse).mapper();i.body=u.deserialize(t,e,"error.body")}}catch(e){return i.message=`Error "${e.message}" occurred in deserializing the responseBody `+`- "${r}" for the default response.`,c(i)}return c(i)}let o=null;if(""===r&&(r=null),200===i){let e=null;try{if(e=JSON.parse(r),o=JSON.parse(r),null!=e){let t=(new u.models.AuthorizationRule).mapper();o=u.deserialize(t,e,"result")}}catch(e){let i=new Error(`Error ${e} occurred in deserializing the responseBody - ${r}`);return i.request=n.stripRequest(h),i.response=n.stripResponse(t),c(i)}}return c(null,o,h,t)})}function _deleteAuthorizationRule(e,t,r,s,a,c){let u=this.client;if(c||"function"!=typeof a||(c=a,a=null),!c)throw new Error("callback cannot be null.");try{if(null==e||"string"!=typeof e.valueOf())throw new Error("resourceGroupName cannot be null or undefined and it must be of type string.");if(null!=e){if(e.length>90)throw new Error('"resourceGroupName" should satisfy the constraint - "MaxLength": 90');if(e.length<1)throw new Error('"resourceGroupName" should satisfy the constraint - "MinLength": 1')}if(null==t||"string"!=typeof t.valueOf())throw new Error("namespaceName cannot be null or undefined and it must be of type string.");if(null!=t){if(t.length>50)throw new Error('"namespaceName" should satisfy the constraint - "MaxLength": 50');if(t.length<6)throw new Error('"namespaceName" should satisfy the constraint - "MinLength": 6')}if(null==r||"string"!=typeof r.valueOf())throw new Error("eventHubName cannot be null or undefined and it must be of type string.");if(null!=r&&r.length<1)throw new Error('"eventHubName" should satisfy the constraint - "MinLength": 1');if(null==s||"string"!=typeof s.valueOf())throw new Error("authorizationRuleName cannot be null or undefined and it must be of type string.");if(null!=s&&s.length<1)throw new Error('"authorizationRuleName" should satisfy the constraint - "MinLength": 1');if(null===this.client.apiVersion||void 0===this.client.apiVersion||"string"!=typeof this.client.apiVersion.valueOf())throw new Error("this.client.apiVersion cannot be null or undefined and it must be of type string.");if(null===this.client.subscriptionId||void 0===this.client.subscriptionId||"string"!=typeof this.client.subscriptionId.valueOf())throw new Error("this.client.subscriptionId cannot be null or undefined and it must be of type string.");if(null!==this.client.acceptLanguage&&void 0!==this.client.acceptLanguage&&"string"!=typeof this.client.acceptLanguage.valueOf())throw new Error("this.client.acceptLanguage must be of type string.")}catch(e){return c(e)}let l=this.client.baseUri,p=l+(l.endsWith("/")?"":"/")+"subscriptions/{subscriptionId}/resourceGroups/{resourceGroupName}/providers/Microsoft.EventHub/namespaces/{namespaceName}/eventhubs/{eventHubName}/authorizationRules/{authorizationRuleName}";p=(p=(p=(p=(p=p.replace("{resourceGroupName}",encodeURIComponent(e))).replace("{namespaceName}",encodeURIComponent(t))).replace("{eventHubName}",encodeURIComponent(r))).replace("{authorizationRuleName}",encodeURIComponent(s))).replace("{subscriptionId}",encodeURIComponent(this.client.subscriptionId));let d=[];d.push("api-version="+encodeURIComponent(this.client.apiVersion)),d.length>0&&(p+="?"+d.join("&"));let h=new o;if(h.method="DELETE",h.url=p,h.headers={},h.headers["Content-Type"]="application/json; charset=utf-8",this.client.generateClientRequestId&&(h.headers["x-ms-client-request-id"]=i.generateUuid()),void 0!==this.client.acceptLanguage&&null!==this.client.acceptLanguage&&(h.headers["accept-language"]=this.client.acceptLanguage),a)for(let e in a.customHeaders)a.customHeaders.hasOwnProperty(e)&&(h.headers[e]=a.customHeaders[e]);return h.body=null,u.pipeline(h,(e,t,r)=>{if(e)return c(e);let i=t.statusCode;if(200!==i&&204!==i){let e,i=new Error(r);i.statusCode=t.statusCode,i.request=n.stripRequest(h),i.response=n.stripResponse(t),""===r&&(r=null);try{if(e=JSON.parse(r)){let t=null;e.error&&(t=e.error),i.code=t?t.code:e.code,i.message=t?t.message:e.message}if(null!=e){let t=(new u.models.ErrorResponse).mapper();i.body=u.deserialize(t,e,"error.body")}}catch(e){return i.message=`Error "${e.message}" occurred in deserializing the responseBody `+`- "${r}" for the default response.`,c(i)}return c(i)}return""===r&&(r=null),c(null,null,h,t)})}function _listKeys(e,t,r,s,a,c){let u=this.client;if(c||"function"!=typeof a||(c=a,a=null),!c)throw new Error("callback cannot be null.");try{if(null==e||"string"!=typeof e.valueOf())throw new Error("resourceGroupName cannot be null or undefined and it must be of type string.");if(null!=e){if(e.length>90)throw new Error('"resourceGroupName" should satisfy the constraint - "MaxLength": 90');if(e.length<1)throw new Error('"resourceGroupName" should satisfy the constraint - "MinLength": 1')}if(null==t||"string"!=typeof t.valueOf())throw new Error("namespaceName cannot be null or undefined and it must be of type string.");if(null!=t){if(t.length>50)throw new Error('"namespaceName" should satisfy the constraint - "MaxLength": 50');if(t.length<6)throw new Error('"namespaceName" should satisfy the constraint - "MinLength": 6')}if(null==r||"string"!=typeof r.valueOf())throw new Error("eventHubName cannot be null or undefined and it must be of type string.");if(null!=r&&r.length<1)throw new Error('"eventHubName" should satisfy the constraint - "MinLength": 1');if(null==s||"string"!=typeof s.valueOf())throw new Error("authorizationRuleName cannot be null or undefined and it must be of type string.");if(null!=s&&s.length<1)throw new Error('"authorizationRuleName" should satisfy the constraint - "MinLength": 1');if(null===this.client.apiVersion||void 0===this.client.apiVersion||"string"!=typeof this.client.apiVersion.valueOf())throw new Error("this.client.apiVersion cannot be null or undefined and it must be of type string.");if(null===this.client.subscriptionId||void 0===this.client.subscriptionId||"string"!=typeof this.client.subscriptionId.valueOf())throw new Error("this.client.subscriptionId cannot be null or undefined and it must be of type string.");if(null!==this.client.acceptLanguage&&void 0!==this.client.acceptLanguage&&"string"!=typeof this.client.acceptLanguage.valueOf())throw new Error("this.client.acceptLanguage must be of type string.")}catch(e){return c(e)}let l=this.client.baseUri,p=l+(l.endsWith("/")?"":"/")+"subscriptions/{subscriptionId}/resourceGroups/{resourceGroupName}/providers/Microsoft.EventHub/namespaces/{namespaceName}/eventhubs/{eventHubName}/authorizationRules/{authorizationRuleName}/ListKeys";p=(p=(p=(p=(p=p.replace("{resourceGroupName}",encodeURIComponent(e))).replace("{namespaceName}",encodeURIComponent(t))).replace("{eventHubName}",encodeURIComponent(r))).replace("{authorizationRuleName}",encodeURIComponent(s))).replace("{subscriptionId}",encodeURIComponent(this.client.subscriptionId));let d=[];d.push("api-version="+encodeURIComponent(this.client.apiVersion)),d.length>0&&(p+="?"+d.join("&"));let h=new o;if(h.method="POST",h.url=p,h.headers={},h.headers["Content-Type"]="application/json; charset=utf-8",this.client.generateClientRequestId&&(h.headers["x-ms-client-request-id"]=i.generateUuid()),void 0!==this.client.acceptLanguage&&null!==this.client.acceptLanguage&&(h.headers["accept-language"]=this.client.acceptLanguage),a)for(let e in a.customHeaders)a.customHeaders.hasOwnProperty(e)&&(h.headers[e]=a.customHeaders[e]);return h.body=null,u.pipeline(h,(e,t,r)=>{if(e)return c(e);let i=t.statusCode;if(200!==i){let e,i=new Error(r);i.statusCode=t.statusCode,i.request=n.stripRequest(h),i.response=n.stripResponse(t),""===r&&(r=null);try{if(e=JSON.parse(r)){let t=null;e.error&&(t=e.error),i.code=t?t.code:e.code,i.message=t?t.message:e.message}if(null!=e){let t=(new u.models.ErrorResponse).mapper();i.body=u.deserialize(t,e,"error.body")}}catch(e){return i.message=`Error "${e.message}" occurred in deserializing the responseBody `+`- "${r}" for the default response.`,c(i)}return c(i)}let o=null;if(""===r&&(r=null),200===i){let e=null;try{if(e=JSON.parse(r),o=JSON.parse(r),null!=e){let t=(new u.models.AccessKeys).mapper();o=u.deserialize(t,e,"result")}}catch(e){let i=new Error(`Error ${e} occurred in deserializing the responseBody - ${r}`);return i.request=n.stripRequest(h),i.response=n.stripResponse(t),c(i)}}return c(null,o,h,t)})}function _regenerateKeys(e,t,r,s,a,c,u){let l=this.client;if(u||"function"!=typeof c||(u=c,c=null),!u)throw new Error("callback cannot be null.");try{if(null==e||"string"!=typeof e.valueOf())throw new Error("resourceGroupName cannot be null or undefined and it must be of type string.");if(null!=e){if(e.length>90)throw new Error('"resourceGroupName" should satisfy the constraint - "MaxLength": 90');if(e.length<1)throw new Error('"resourceGroupName" should satisfy the constraint - "MinLength": 1')}if(null==t||"string"!=typeof t.valueOf())throw new Error("namespaceName cannot be null or undefined and it must be of type string.");if(null!=t){if(t.length>50)throw new Error('"namespaceName" should satisfy the constraint - "MaxLength": 50');if(t.length<6)throw new Error('"namespaceName" should satisfy the constraint - "MinLength": 6')}if(null==r||"string"!=typeof r.valueOf())throw new Error("eventHubName cannot be null or undefined and it must be of type string.");if(null!=r&&r.length<1)throw new Error('"eventHubName" should satisfy the constraint - "MinLength": 1');if(null==s||"string"!=typeof s.valueOf())throw new Error("authorizationRuleName cannot be null or undefined and it must be of type string.");if(null!=s&&s.length<1)throw new Error('"authorizationRuleName" should satisfy the constraint - "MinLength": 1');if(null==a)throw new Error("parameters cannot be null or undefined.");if(null===this.client.apiVersion||void 0===this.client.apiVersion||"string"!=typeof this.client.apiVersion.valueOf())throw new Error("this.client.apiVersion cannot be null or undefined and it must be of type string.");if(null===this.client.subscriptionId||void 0===this.client.subscriptionId||"string"!=typeof this.client.subscriptionId.valueOf())throw new Error("this.client.subscriptionId cannot be null or undefined and it must be of type string.");if(null!==this.client.acceptLanguage&&void 0!==this.client.acceptLanguage&&"string"!=typeof this.client.acceptLanguage.valueOf())throw new Error("this.client.acceptLanguage must be of type string.")}catch(e){return u(e)}let p=this.client.baseUri,d=p+(p.endsWith("/")?"":"/")+"subscriptions/{subscriptionId}/resourceGroups/{resourceGroupName}/providers/Microsoft.EventHub/namespaces/{namespaceName}/eventhubs/{eventHubName}/authorizationRules/{authorizationRuleName}/regenerateKeys";d=(d=(d=(d=(d=d.replace("{resourceGroupName}",encodeURIComponent(e))).replace("{namespaceName}",encodeURIComponent(t))).replace("{eventHubName}",encodeURIComponent(r))).replace("{authorizationRuleName}",encodeURIComponent(s))).replace("{subscriptionId}",encodeURIComponent(this.client.subscriptionId));let h=[];h.push("api-version="+encodeURIComponent(this.client.apiVersion)),h.length>0&&(d+="?"+h.join("&"));let f=new o;if(f.method="POST",f.url=d,f.headers={},f.headers["Content-Type"]="application/json; charset=utf-8",this.client.generateClientRequestId&&(f.headers["x-ms-client-request-id"]=i.generateUuid()),void 0!==this.client.acceptLanguage&&null!==this.client.acceptLanguage&&(f.headers["accept-language"]=this.client.acceptLanguage),c)for(let e in c.customHeaders)c.customHeaders.hasOwnProperty(e)&&(f.headers[e]=c.customHeaders[e]);let m=null,g=null;try{if(null!=a){let e=(new l.models.RegenerateAccessKeyParameters).mapper();g=l.serialize(e,a,"parameters"),m=JSON.stringify(g)}}catch(e){let t=new Error(`Error "${e.message}" occurred in serializing the `+`payload - ${JSON.stringify(a,null,2)}.`);return u(t)}return f.body=m,l.pipeline(f,(e,t,r)=>{if(e)return u(e);let i=t.statusCode;if(200!==i){let e,i=new Error(r);i.statusCode=t.statusCode,i.request=n.stripRequest(f),i.response=n.stripResponse(t),""===r&&(r=null);try{if(e=JSON.parse(r)){let t=null;e.error&&(t=e.error),i.code=t?t.code:e.code,i.message=t?t.message:e.message}if(null!=e){let t=(new l.models.ErrorResponse).mapper();i.body=l.deserialize(t,e,"error.body")}}catch(e){return i.message=`Error "${e.message}" occurred in deserializing the responseBody `+`- "${r}" for the default response.`,u(i)}return u(i)}let o=null;if(""===r&&(r=null),200===i){let e=null;try{if(e=JSON.parse(r),o=JSON.parse(r),null!=e){let t=(new l.models.AccessKeys).mapper();o=l.deserialize(t,e,"result")}}catch(e){let i=new Error(`Error ${e} occurred in deserializing the responseBody - ${r}`);return i.request=n.stripRequest(f),i.response=n.stripResponse(t),u(i)}}return u(null,o,f,t)})}function _listByNamespaceNext(e,t,r){let s=this.client;if(r||"function"!=typeof t||(r=t,t=null),!r)throw new Error("callback cannot be null.");try{if(null==e||"string"!=typeof e.valueOf())throw new Error("nextPageLink cannot be null or undefined and it must be of type string.");if(null!==this.client.acceptLanguage&&void 0!==this.client.acceptLanguage&&"string"!=typeof this.client.acceptLanguage.valueOf())throw new Error("this.client.acceptLanguage must be of type string.")}catch(e){return r(e)}let a="{nextLink}";a=a.replace("{nextLink}",e);let c=new o;if(c.method="GET",c.url=a,c.headers={},c.headers["Content-Type"]="application/json; charset=utf-8",this.client.generateClientRequestId&&(c.headers["x-ms-client-request-id"]=i.generateUuid()),void 0!==this.client.acceptLanguage&&null!==this.client.acceptLanguage&&(c.headers["accept-language"]=this.client.acceptLanguage),t)for(let e in t.customHeaders)t.customHeaders.hasOwnProperty(e)&&(c.headers[e]=t.customHeaders[e]);return c.body=null,s.pipeline(c,(e,t,i)=>{if(e)return r(e);let o=t.statusCode;if(200!==o){let e,o=new Error(i);o.statusCode=t.statusCode,o.request=n.stripRequest(c),o.response=n.stripResponse(t),""===i&&(i=null);try{if(e=JSON.parse(i)){let t=null;e.error&&(t=e.error),o.code=t?t.code:e.code,o.message=t?t.message:e.message}if(null!=e){let t=(new s.models.ErrorResponse).mapper();o.body=s.deserialize(t,e,"error.body")}}catch(e){return o.message=`Error "${e.message}" occurred in deserializing the responseBody `+`- "${i}" for the default response.`,r(o)}return r(o)}let a=null;if(""===i&&(i=null),200===o){let e=null;try{if(e=JSON.parse(i),a=JSON.parse(i),null!=e){let t=(new s.models.EventHubListResult).mapper();a=s.deserialize(t,e,"result")}}catch(e){let o=new Error(`Error ${e} occurred in deserializing the responseBody - ${i}`);return o.request=n.stripRequest(c),o.response=n.stripResponse(t),r(o)}}return r(null,a,c,t)})}function _listAuthorizationRulesNext(e,t,r){let s=this.client;if(r||"function"!=typeof t||(r=t,t=null),!r)throw new Error("callback cannot be null.");try{if(null==e||"string"!=typeof e.valueOf())throw new Error("nextPageLink cannot be null or undefined and it must be of type string.");if(null!==this.client.acceptLanguage&&void 0!==this.client.acceptLanguage&&"string"!=typeof this.client.acceptLanguage.valueOf())throw new Error("this.client.acceptLanguage must be of type string.")}catch(e){return r(e)}let a="{nextLink}";a=a.replace("{nextLink}",e);let c=new o;if(c.method="GET",c.url=a,c.headers={},c.headers["Content-Type"]="application/json; charset=utf-8",this.client.generateClientRequestId&&(c.headers["x-ms-client-request-id"]=i.generateUuid()),void 0!==this.client.acceptLanguage&&null!==this.client.acceptLanguage&&(c.headers["accept-language"]=this.client.acceptLanguage),t)for(let e in t.customHeaders)t.customHeaders.hasOwnProperty(e)&&(c.headers[e]=t.customHeaders[e]);return c.body=null,s.pipeline(c,(e,t,i)=>{if(e)return r(e);let o=t.statusCode;if(200!==o){let e,o=new Error(i);o.statusCode=t.statusCode,o.request=n.stripRequest(c),o.response=n.stripResponse(t),""===i&&(i=null);try{if(e=JSON.parse(i)){let t=null;e.error&&(t=e.error),o.code=t?t.code:e.code,o.message=t?t.message:e.message}if(null!=e){let t=(new s.models.ErrorResponse).mapper();o.body=s.deserialize(t,e,"error.body")}}catch(e){return o.message=`Error "${e.message}" occurred in deserializing the responseBody `+`- "${i}" for the default response.`,r(o)}return r(o)}let a=null;if(""===i&&(i=null),200===o){let e=null;try{if(e=JSON.parse(i),a=JSON.parse(i),null!=e){let t=(new s.models.AuthorizationRuleListResult).mapper();a=s.deserialize(t,e,"result")}}catch(e){let o=new Error(`Error ${e} occurred in deserializing the responseBody - ${i}`);return o.request=n.stripRequest(c),o.response=n.stripResponse(t),r(o)}}return r(null,a,c,t)})}e.exports=class EventHubs{constructor(e){this.client=e,this._listByNamespace=_listByNamespace,this._createOrUpdate=_createOrUpdate,this._deleteMethod=_deleteMethod,this._get=_get,this._listAuthorizationRules=_listAuthorizationRules,this._createOrUpdateAuthorizationRule=_createOrUpdateAuthorizationRule,this._getAuthorizationRule=_getAuthorizationRule,this._deleteAuthorizationRule=_deleteAuthorizationRule,this._listKeys=_listKeys,this._regenerateKeys=_regenerateKeys,this._listByNamespaceNext=_listByNamespaceNext,this._listAuthorizationRulesNext=_listAuthorizationRulesNext}listByNamespaceWithHttpOperationResponse(e,t,r){this.client;let i=this;return new Promise((o,s)=>{i._listByNamespace(e,t,r,(e,t,r,i)=>{let a=new n.HttpOperationResponse(r,i);a.body=t,e?s(e):o(a)})})}listByNamespace(e,t,r,n){this.client;let i=this;return n||"function"!=typeof r||(n=r,r=null),n?i._listByNamespace(e,t,r,n):new Promise((n,o)=>{i._listByNamespace(e,t,r,(e,t,r,i)=>{e?o(e):n(t)})})}createOrUpdateWithHttpOperationResponse(e,t,r,i,o){this.client;let s=this;return new Promise((a,c)=>{s._createOrUpdate(e,t,r,i,o,(e,t,r,i)=>{let o=new n.HttpOperationResponse(r,i);o.body=t,e?c(e):a(o)})})}createOrUpdate(e,t,r,n,i,o){this.client;let s=this;return o||"function"!=typeof i||(o=i,i=null),o?s._createOrUpdate(e,t,r,n,i,o):new Promise((o,a)=>{s._createOrUpdate(e,t,r,n,i,(e,t,r,n)=>{e?a(e):o(t)})})}deleteMethodWithHttpOperationResponse(e,t,r,i){this.client;let o=this;return new Promise((s,a)=>{o._deleteMethod(e,t,r,i,(e,t,r,i)=>{let o=new n.HttpOperationResponse(r,i);o.body=t,e?a(e):s(o)})})}deleteMethod(e,t,r,n,i){this.client;let o=this;return i||"function"!=typeof n||(i=n,n=null),i?o._deleteMethod(e,t,r,n,i):new Promise((i,s)=>{o._deleteMethod(e,t,r,n,(e,t,r,n)=>{e?s(e):i(t)})})}getWithHttpOperationResponse(e,t,r,i){this.client;let o=this;return new Promise((s,a)=>{o._get(e,t,r,i,(e,t,r,i)=>{let o=new n.HttpOperationResponse(r,i);o.body=t,e?a(e):s(o)})})}get(e,t,r,n,i){this.client;let o=this;return i||"function"!=typeof n||(i=n,n=null),i?o._get(e,t,r,n,i):new Promise((i,s)=>{o._get(e,t,r,n,(e,t,r,n)=>{e?s(e):i(t)})})}listAuthorizationRulesWithHttpOperationResponse(e,t,r,i){this.client;let o=this;return new Promise((s,a)=>{o._listAuthorizationRules(e,t,r,i,(e,t,r,i)=>{let o=new n.HttpOperationResponse(r,i);o.body=t,e?a(e):s(o)})})}listAuthorizationRules(e,t,r,n,i){this.client;let o=this;return i||"function"!=typeof n||(i=n,n=null),i?o._listAuthorizationRules(e,t,r,n,i):new Promise((i,s)=>{o._listAuthorizationRules(e,t,r,n,(e,t,r,n)=>{e?s(e):i(t)})})}createOrUpdateAuthorizationRuleWithHttpOperationResponse(e,t,r,i,o,s){this.client;let a=this;return new Promise((c,u)=>{a._createOrUpdateAuthorizationRule(e,t,r,i,o,s,(e,t,r,i)=>{let o=new n.HttpOperationResponse(r,i);o.body=t,e?u(e):c(o)})})}createOrUpdateAuthorizationRule(e,t,r,n,i,o,s){this.client;let a=this;return s||"function"!=typeof o||(s=o,o=null),s?a._createOrUpdateAuthorizationRule(e,t,r,n,i,o,s):new Promise((s,c)=>{a._createOrUpdateAuthorizationRule(e,t,r,n,i,o,(e,t,r,n)=>{e?c(e):s(t)})})}getAuthorizationRuleWithHttpOperationResponse(e,t,r,i,o){this.client;let s=this;return new Promise((a,c)=>{s._getAuthorizationRule(e,t,r,i,o,(e,t,r,i)=>{let o=new n.HttpOperationResponse(r,i);o.body=t,e?c(e):a(o)})})}getAuthorizationRule(e,t,r,n,i,o){this.client;let s=this;return o||"function"!=typeof i||(o=i,i=null),o?s._getAuthorizationRule(e,t,r,n,i,o):new Promise((o,a)=>{s._getAuthorizationRule(e,t,r,n,i,(e,t,r,n)=>{e?a(e):o(t)})})}deleteAuthorizationRuleWithHttpOperationResponse(e,t,r,i,o){this.client;let s=this;return new Promise((a,c)=>{s._deleteAuthorizationRule(e,t,r,i,o,(e,t,r,i)=>{let o=new n.HttpOperationResponse(r,i);o.body=t,e?c(e):a(o)})})}deleteAuthorizationRule(e,t,r,n,i,o){this.client;let s=this;return o||"function"!=typeof i||(o=i,i=null),o?s._deleteAuthorizationRule(e,t,r,n,i,o):new Promise((o,a)=>{s._deleteAuthorizationRule(e,t,r,n,i,(e,t,r,n)=>{e?a(e):o(t)})})}listKeysWithHttpOperationResponse(e,t,r,i,o){this.client;let s=this;return new Promise((a,c)=>{s._listKeys(e,t,r,i,o,(e,t,r,i)=>{let o=new n.HttpOperationResponse(r,i);o.body=t,e?c(e):a(o)})})}listKeys(e,t,r,n,i,o){this.client;let s=this;return o||"function"!=typeof i||(o=i,i=null),o?s._listKeys(e,t,r,n,i,o):new Promise((o,a)=>{s._listKeys(e,t,r,n,i,(e,t,r,n)=>{e?a(e):o(t)})})}regenerateKeysWithHttpOperationResponse(e,t,r,i,o,s){this.client;let a=this;return new Promise((c,u)=>{a._regenerateKeys(e,t,r,i,o,s,(e,t,r,i)=>{let o=new n.HttpOperationResponse(r,i);o.body=t,e?u(e):c(o)})})}regenerateKeys(e,t,r,n,i,o,s){this.client;let a=this;return s||"function"!=typeof o||(s=o,o=null),s?a._regenerateKeys(e,t,r,n,i,o,s):new Promise((s,c)=>{a._regenerateKeys(e,t,r,n,i,o,(e,t,r,n)=>{e?c(e):s(t)})})}listByNamespaceNextWithHttpOperationResponse(e,t){this.client;let r=this;return new Promise((i,o)=>{r._listByNamespaceNext(e,t,(e,t,r,s)=>{let a=new n.HttpOperationResponse(r,s);a.body=t,e?o(e):i(a)})})}listByNamespaceNext(e,t,r){this.client;let n=this;return r||"function"!=typeof t||(r=t,t=null),r?n._listByNamespaceNext(e,t,r):new Promise((r,i)=>{n._listByNamespaceNext(e,t,(e,t,n,o)=>{e?i(e):r(t)})})}listAuthorizationRulesNextWithHttpOperationResponse(e,t){this.client;let r=this;return new Promise((i,o)=>{r._listAuthorizationRulesNext(e,t,(e,t,r,s)=>{let a=new n.HttpOperationResponse(r,s);a.body=t,e?o(e):i(a)})})}listAuthorizationRulesNext(e,t,r){this.client;let n=this;return r||"function"!=typeof t||(r=t,t=null),r?n._listAuthorizationRulesNext(e,t,r):new Promise((r,i)=>{n._listAuthorizationRulesNext(e,t,(e,t,n,o)=>{e?i(e):r(t)})})}}},function(e,t,r){"use strict";const n=r(86),i=r(9),o=n.WebResource;function _createOrUpdate(e,t,r,s,a,c,u){let l=this.client;if(u||"function"!=typeof c||(u=c,c=null),!u)throw new Error("callback cannot be null.");try{if(null==e||"string"!=typeof e.valueOf())throw new Error("resourceGroupName cannot be null or undefined and it must be of type string.");if(null!=e){if(e.length>90)throw new Error('"resourceGroupName" should satisfy the constraint - "MaxLength": 90');if(e.length<1)throw new Error('"resourceGroupName" should satisfy the constraint - "MinLength": 1')}if(null==t||"string"!=typeof t.valueOf())throw new Error("namespaceName cannot be null or undefined and it must be of type string.");if(null!=t){if(t.length>50)throw new Error('"namespaceName" should satisfy the constraint - "MaxLength": 50');if(t.length<6)throw new Error('"namespaceName" should satisfy the constraint - "MinLength": 6')}if(null==r||"string"!=typeof r.valueOf())throw new Error("eventHubName cannot be null or undefined and it must be of type string.");if(null!=r&&r.length<1)throw new Error('"eventHubName" should satisfy the constraint - "MinLength": 1');if(null==s||"string"!=typeof s.valueOf())throw new Error("consumerGroupName cannot be null or undefined and it must be of type string.");if(null!=s){if(s.length>50)throw new Error('"consumerGroupName" should satisfy the constraint - "MaxLength": 50');if(s.length<1)throw new Error('"consumerGroupName" should satisfy the constraint - "MinLength": 1')}if(null==a)throw new Error("parameters cannot be null or undefined.");if(null===this.client.apiVersion||void 0===this.client.apiVersion||"string"!=typeof this.client.apiVersion.valueOf())throw new Error("this.client.apiVersion cannot be null or undefined and it must be of type string.");if(null===this.client.subscriptionId||void 0===this.client.subscriptionId||"string"!=typeof this.client.subscriptionId.valueOf())throw new Error("this.client.subscriptionId cannot be null or undefined and it must be of type string.");if(null!==this.client.acceptLanguage&&void 0!==this.client.acceptLanguage&&"string"!=typeof this.client.acceptLanguage.valueOf())throw new Error("this.client.acceptLanguage must be of type string.")}catch(e){return u(e)}let p=this.client.baseUri,d=p+(p.endsWith("/")?"":"/")+"subscriptions/{subscriptionId}/resourceGroups/{resourceGroupName}/providers/Microsoft.EventHub/namespaces/{namespaceName}/eventhubs/{eventHubName}/consumergroups/{consumerGroupName}";d=(d=(d=(d=(d=d.replace("{resourceGroupName}",encodeURIComponent(e))).replace("{namespaceName}",encodeURIComponent(t))).replace("{eventHubName}",encodeURIComponent(r))).replace("{consumerGroupName}",encodeURIComponent(s))).replace("{subscriptionId}",encodeURIComponent(this.client.subscriptionId));let h=[];h.push("api-version="+encodeURIComponent(this.client.apiVersion)),h.length>0&&(d+="?"+h.join("&"));let f=new o;if(f.method="PUT",f.url=d,f.headers={},f.headers["Content-Type"]="application/json; charset=utf-8",this.client.generateClientRequestId&&(f.headers["x-ms-client-request-id"]=i.generateUuid()),void 0!==this.client.acceptLanguage&&null!==this.client.acceptLanguage&&(f.headers["accept-language"]=this.client.acceptLanguage),c)for(let e in c.customHeaders)c.customHeaders.hasOwnProperty(e)&&(f.headers[e]=c.customHeaders[e]);let m=null,g=null;try{if(null!=a){let e=(new l.models.ConsumerGroup).mapper();g=l.serialize(e,a,"parameters"),m=JSON.stringify(g)}}catch(e){let t=new Error(`Error "${e.message}" occurred in serializing the `+`payload - ${JSON.stringify(a,null,2)}.`);return u(t)}return f.body=m,l.pipeline(f,(e,t,r)=>{if(e)return u(e);let i=t.statusCode;if(200!==i){let e,i=new Error(r);i.statusCode=t.statusCode,i.request=n.stripRequest(f),i.response=n.stripResponse(t),""===r&&(r=null);try{if(e=JSON.parse(r)){let t=null;e.error&&(t=e.error),i.code=t?t.code:e.code,i.message=t?t.message:e.message}if(null!=e){let t=(new l.models.ErrorResponse).mapper();i.body=l.deserialize(t,e,"error.body")}}catch(e){return i.message=`Error "${e.message}" occurred in deserializing the responseBody `+`- "${r}" for the default response.`,u(i)}return u(i)}let o=null;if(""===r&&(r=null),200===i){let e=null;try{if(e=JSON.parse(r),o=JSON.parse(r),null!=e){let t=(new l.models.ConsumerGroup).mapper();o=l.deserialize(t,e,"result")}}catch(e){let i=new Error(`Error ${e} occurred in deserializing the responseBody - ${r}`);return i.request=n.stripRequest(f),i.response=n.stripResponse(t),u(i)}}return u(null,o,f,t)})}function _deleteMethod(e,t,r,s,a,c){let u=this.client;if(c||"function"!=typeof a||(c=a,a=null),!c)throw new Error("callback cannot be null.");try{if(null==e||"string"!=typeof e.valueOf())throw new Error("resourceGroupName cannot be null or undefined and it must be of type string.");if(null!=e){if(e.length>90)throw new Error('"resourceGroupName" should satisfy the constraint - "MaxLength": 90');if(e.length<1)throw new Error('"resourceGroupName" should satisfy the constraint - "MinLength": 1')}if(null==t||"string"!=typeof t.valueOf())throw new Error("namespaceName cannot be null or undefined and it must be of type string.");if(null!=t){if(t.length>50)throw new Error('"namespaceName" should satisfy the constraint - "MaxLength": 50');if(t.length<6)throw new Error('"namespaceName" should satisfy the constraint - "MinLength": 6')}if(null==r||"string"!=typeof r.valueOf())throw new Error("eventHubName cannot be null or undefined and it must be of type string.");if(null!=r&&r.length<1)throw new Error('"eventHubName" should satisfy the constraint - "MinLength": 1');if(null==s||"string"!=typeof s.valueOf())throw new Error("consumerGroupName cannot be null or undefined and it must be of type string.");if(null!=s){if(s.length>50)throw new Error('"consumerGroupName" should satisfy the constraint - "MaxLength": 50');if(s.length<1)throw new Error('"consumerGroupName" should satisfy the constraint - "MinLength": 1')}if(null===this.client.apiVersion||void 0===this.client.apiVersion||"string"!=typeof this.client.apiVersion.valueOf())throw new Error("this.client.apiVersion cannot be null or undefined and it must be of type string.");if(null===this.client.subscriptionId||void 0===this.client.subscriptionId||"string"!=typeof this.client.subscriptionId.valueOf())throw new Error("this.client.subscriptionId cannot be null or undefined and it must be of type string.");if(null!==this.client.acceptLanguage&&void 0!==this.client.acceptLanguage&&"string"!=typeof this.client.acceptLanguage.valueOf())throw new Error("this.client.acceptLanguage must be of type string.")}catch(e){return c(e)}let l=this.client.baseUri,p=l+(l.endsWith("/")?"":"/")+"subscriptions/{subscriptionId}/resourceGroups/{resourceGroupName}/providers/Microsoft.EventHub/namespaces/{namespaceName}/eventhubs/{eventHubName}/consumergroups/{consumerGroupName}";p=(p=(p=(p=(p=p.replace("{resourceGroupName}",encodeURIComponent(e))).replace("{namespaceName}",encodeURIComponent(t))).replace("{eventHubName}",encodeURIComponent(r))).replace("{consumerGroupName}",encodeURIComponent(s))).replace("{subscriptionId}",encodeURIComponent(this.client.subscriptionId));let d=[];d.push("api-version="+encodeURIComponent(this.client.apiVersion)),d.length>0&&(p+="?"+d.join("&"));let h=new o;if(h.method="DELETE",h.url=p,h.headers={},h.headers["Content-Type"]="application/json; charset=utf-8",this.client.generateClientRequestId&&(h.headers["x-ms-client-request-id"]=i.generateUuid()),void 0!==this.client.acceptLanguage&&null!==this.client.acceptLanguage&&(h.headers["accept-language"]=this.client.acceptLanguage),a)for(let e in a.customHeaders)a.customHeaders.hasOwnProperty(e)&&(h.headers[e]=a.customHeaders[e]);return h.body=null,u.pipeline(h,(e,t,r)=>{if(e)return c(e);let i=t.statusCode;if(200!==i&&204!==i){let e,i=new Error(r);i.statusCode=t.statusCode,i.request=n.stripRequest(h),i.response=n.stripResponse(t),""===r&&(r=null);try{if(e=JSON.parse(r)){let t=null;e.error&&(t=e.error),i.code=t?t.code:e.code,i.message=t?t.message:e.message}if(null!=e){let t=(new u.models.ErrorResponse).mapper();i.body=u.deserialize(t,e,"error.body")}}catch(e){return i.message=`Error "${e.message}" occurred in deserializing the responseBody `+`- "${r}" for the default response.`,c(i)}return c(i)}return""===r&&(r=null),c(null,null,h,t)})}function _get(e,t,r,s,a,c){let u=this.client;if(c||"function"!=typeof a||(c=a,a=null),!c)throw new Error("callback cannot be null.");try{if(null==e||"string"!=typeof e.valueOf())throw new Error("resourceGroupName cannot be null or undefined and it must be of type string.");if(null!=e){if(e.length>90)throw new Error('"resourceGroupName" should satisfy the constraint - "MaxLength": 90');if(e.length<1)throw new Error('"resourceGroupName" should satisfy the constraint - "MinLength": 1')}if(null==t||"string"!=typeof t.valueOf())throw new Error("namespaceName cannot be null or undefined and it must be of type string.");if(null!=t){if(t.length>50)throw new Error('"namespaceName" should satisfy the constraint - "MaxLength": 50');if(t.length<6)throw new Error('"namespaceName" should satisfy the constraint - "MinLength": 6')}if(null==r||"string"!=typeof r.valueOf())throw new Error("eventHubName cannot be null or undefined and it must be of type string.");if(null!=r&&r.length<1)throw new Error('"eventHubName" should satisfy the constraint - "MinLength": 1');if(null==s||"string"!=typeof s.valueOf())throw new Error("consumerGroupName cannot be null or undefined and it must be of type string.");if(null!=s){if(s.length>50)throw new Error('"consumerGroupName" should satisfy the constraint - "MaxLength": 50');if(s.length<1)throw new Error('"consumerGroupName" should satisfy the constraint - "MinLength": 1')}if(null===this.client.apiVersion||void 0===this.client.apiVersion||"string"!=typeof this.client.apiVersion.valueOf())throw new Error("this.client.apiVersion cannot be null or undefined and it must be of type string.");if(null===this.client.subscriptionId||void 0===this.client.subscriptionId||"string"!=typeof this.client.subscriptionId.valueOf())throw new Error("this.client.subscriptionId cannot be null or undefined and it must be of type string.");if(null!==this.client.acceptLanguage&&void 0!==this.client.acceptLanguage&&"string"!=typeof this.client.acceptLanguage.valueOf())throw new Error("this.client.acceptLanguage must be of type string.")}catch(e){return c(e)}let l=this.client.baseUri,p=l+(l.endsWith("/")?"":"/")+"subscriptions/{subscriptionId}/resourceGroups/{resourceGroupName}/providers/Microsoft.EventHub/namespaces/{namespaceName}/eventhubs/{eventHubName}/consumergroups/{consumerGroupName}";p=(p=(p=(p=(p=p.replace("{resourceGroupName}",encodeURIComponent(e))).replace("{namespaceName}",encodeURIComponent(t))).replace("{eventHubName}",encodeURIComponent(r))).replace("{consumerGroupName}",encodeURIComponent(s))).replace("{subscriptionId}",encodeURIComponent(this.client.subscriptionId));let d=[];d.push("api-version="+encodeURIComponent(this.client.apiVersion)),d.length>0&&(p+="?"+d.join("&"));let h=new o;if(h.method="GET",h.url=p,h.headers={},h.headers["Content-Type"]="application/json; charset=utf-8",this.client.generateClientRequestId&&(h.headers["x-ms-client-request-id"]=i.generateUuid()),void 0!==this.client.acceptLanguage&&null!==this.client.acceptLanguage&&(h.headers["accept-language"]=this.client.acceptLanguage),a)for(let e in a.customHeaders)a.customHeaders.hasOwnProperty(e)&&(h.headers[e]=a.customHeaders[e]);return h.body=null,u.pipeline(h,(e,t,r)=>{if(e)return c(e);let i=t.statusCode;if(200!==i){let e,i=new Error(r);i.statusCode=t.statusCode,i.request=n.stripRequest(h),i.response=n.stripResponse(t),""===r&&(r=null);try{if(e=JSON.parse(r)){let t=null;e.error&&(t=e.error),i.code=t?t.code:e.code,i.message=t?t.message:e.message}if(null!=e){let t=(new u.models.ErrorResponse).mapper();i.body=u.deserialize(t,e,"error.body")}}catch(e){return i.message=`Error "${e.message}" occurred in deserializing the responseBody `+`- "${r}" for the default response.`,c(i)}return c(i)}let o=null;if(""===r&&(r=null),200===i){let e=null;try{if(e=JSON.parse(r),o=JSON.parse(r),null!=e){let t=(new u.models.ConsumerGroup).mapper();o=u.deserialize(t,e,"result")}}catch(e){let i=new Error(`Error ${e} occurred in deserializing the responseBody - ${r}`);return i.request=n.stripRequest(h),i.response=n.stripResponse(t),c(i)}}return c(null,o,h,t)})}function _listByEventHub(e,t,r,s,a){let c=this.client;if(a||"function"!=typeof s||(a=s,s=null),!a)throw new Error("callback cannot be null.");let u=s&&void 0!==s.skip?s.skip:void 0,l=s&&void 0!==s.top?s.top:void 0;try{if(null==e||"string"!=typeof e.valueOf())throw new Error("resourceGroupName cannot be null or undefined and it must be of type string.");if(null!=e){if(e.length>90)throw new Error('"resourceGroupName" should satisfy the constraint - "MaxLength": 90');if(e.length<1)throw new Error('"resourceGroupName" should satisfy the constraint - "MinLength": 1')}if(null==t||"string"!=typeof t.valueOf())throw new Error("namespaceName cannot be null or undefined and it must be of type string.");if(null!=t){if(t.length>50)throw new Error('"namespaceName" should satisfy the constraint - "MaxLength": 50');if(t.length<6)throw new Error('"namespaceName" should satisfy the constraint - "MinLength": 6')}if(null==r||"string"!=typeof r.valueOf())throw new Error("eventHubName cannot be null or undefined and it must be of type string.");if(null!=r&&r.length<1)throw new Error('"eventHubName" should satisfy the constraint - "MinLength": 1');if(null===this.client.apiVersion||void 0===this.client.apiVersion||"string"!=typeof this.client.apiVersion.valueOf())throw new Error("this.client.apiVersion cannot be null or undefined and it must be of type string.");if(null===this.client.subscriptionId||void 0===this.client.subscriptionId||"string"!=typeof this.client.subscriptionId.valueOf())throw new Error("this.client.subscriptionId cannot be null or undefined and it must be of type string.");if(null!=u&&"number"!=typeof u)throw new Error("skip must be of type number.");if(null!=u){if(u>1e3)throw new Error('"skip" should satisfy the constraint - "InclusiveMaximum": 1000');if(u<0)throw new Error('"skip" should satisfy the constraint - "InclusiveMinimum": 0')}if(null!=l&&"number"!=typeof l)throw new Error("top must be of type number.");if(null!=l){if(l>1e3)throw new Error('"top" should satisfy the constraint - "InclusiveMaximum": 1000');if(l<1)throw new Error('"top" should satisfy the constraint - "InclusiveMinimum": 1')}if(null!==this.client.acceptLanguage&&void 0!==this.client.acceptLanguage&&"string"!=typeof this.client.acceptLanguage.valueOf())throw new Error("this.client.acceptLanguage must be of type string.")}catch(e){return a(e)}let p=this.client.baseUri,d=p+(p.endsWith("/")?"":"/")+"subscriptions/{subscriptionId}/resourceGroups/{resourceGroupName}/providers/Microsoft.EventHub/namespaces/{namespaceName}/eventhubs/{eventHubName}/consumergroups";d=(d=(d=(d=d.replace("{resourceGroupName}",encodeURIComponent(e))).replace("{namespaceName}",encodeURIComponent(t))).replace("{eventHubName}",encodeURIComponent(r))).replace("{subscriptionId}",encodeURIComponent(this.client.subscriptionId));let h=[];h.push("api-version="+encodeURIComponent(this.client.apiVersion)),null!=u&&h.push("$skip="+encodeURIComponent(u.toString())),null!=l&&h.push("$top="+encodeURIComponent(l.toString())),h.length>0&&(d+="?"+h.join("&"));let f=new o;if(f.method="GET",f.url=d,f.headers={},f.headers["Content-Type"]="application/json; charset=utf-8",this.client.generateClientRequestId&&(f.headers["x-ms-client-request-id"]=i.generateUuid()),void 0!==this.client.acceptLanguage&&null!==this.client.acceptLanguage&&(f.headers["accept-language"]=this.client.acceptLanguage),s)for(let e in s.customHeaders)s.customHeaders.hasOwnProperty(e)&&(f.headers[e]=s.customHeaders[e]);return f.body=null,c.pipeline(f,(e,t,r)=>{if(e)return a(e);let i=t.statusCode;if(200!==i){let e,i=new Error(r);i.statusCode=t.statusCode,i.request=n.stripRequest(f),i.response=n.stripResponse(t),""===r&&(r=null);try{if(e=JSON.parse(r)){let t=null;e.error&&(t=e.error),i.code=t?t.code:e.code,i.message=t?t.message:e.message}if(null!=e){let t=(new c.models.ErrorResponse).mapper();i.body=c.deserialize(t,e,"error.body")}}catch(e){return i.message=`Error "${e.message}" occurred in deserializing the responseBody `+`- "${r}" for the default response.`,a(i)}return a(i)}let o=null;if(""===r&&(r=null),200===i){let e=null;try{if(e=JSON.parse(r),o=JSON.parse(r),null!=e){let t=(new c.models.ConsumerGroupListResult).mapper();o=c.deserialize(t,e,"result")}}catch(e){let i=new Error(`Error ${e} occurred in deserializing the responseBody - ${r}`);return i.request=n.stripRequest(f),i.response=n.stripResponse(t),a(i)}}return a(null,o,f,t)})}function _listByEventHubNext(e,t,r){let s=this.client;if(r||"function"!=typeof t||(r=t,t=null),!r)throw new Error("callback cannot be null.");try{if(null==e||"string"!=typeof e.valueOf())throw new Error("nextPageLink cannot be null or undefined and it must be of type string.");if(null!==this.client.acceptLanguage&&void 0!==this.client.acceptLanguage&&"string"!=typeof this.client.acceptLanguage.valueOf())throw new Error("this.client.acceptLanguage must be of type string.")}catch(e){return r(e)}let a="{nextLink}";a=a.replace("{nextLink}",e);let c=new o;if(c.method="GET",c.url=a,c.headers={},c.headers["Content-Type"]="application/json; charset=utf-8",this.client.generateClientRequestId&&(c.headers["x-ms-client-request-id"]=i.generateUuid()),void 0!==this.client.acceptLanguage&&null!==this.client.acceptLanguage&&(c.headers["accept-language"]=this.client.acceptLanguage),t)for(let e in t.customHeaders)t.customHeaders.hasOwnProperty(e)&&(c.headers[e]=t.customHeaders[e]);return c.body=null,s.pipeline(c,(e,t,i)=>{if(e)return r(e);let o=t.statusCode;if(200!==o){let e,o=new Error(i);o.statusCode=t.statusCode,o.request=n.stripRequest(c),o.response=n.stripResponse(t),""===i&&(i=null);try{if(e=JSON.parse(i)){let t=null;e.error&&(t=e.error),o.code=t?t.code:e.code,o.message=t?t.message:e.message}if(null!=e){let t=(new s.models.ErrorResponse).mapper();o.body=s.deserialize(t,e,"error.body")}}catch(e){return o.message=`Error "${e.message}" occurred in deserializing the responseBody `+`- "${i}" for the default response.`,r(o)}return r(o)}let a=null;if(""===i&&(i=null),200===o){let e=null;try{if(e=JSON.parse(i),a=JSON.parse(i),null!=e){let t=(new s.models.ConsumerGroupListResult).mapper();a=s.deserialize(t,e,"result")}}catch(e){let o=new Error(`Error ${e} occurred in deserializing the responseBody - ${i}`);return o.request=n.stripRequest(c),o.response=n.stripResponse(t),r(o)}}return r(null,a,c,t)})}e.exports=class ConsumerGroups{constructor(e){this.client=e,this._createOrUpdate=_createOrUpdate,this._deleteMethod=_deleteMethod,this._get=_get,this._listByEventHub=_listByEventHub,this._listByEventHubNext=_listByEventHubNext}createOrUpdateWithHttpOperationResponse(e,t,r,i,o,s){this.client;let a=this;return new Promise((c,u)=>{a._createOrUpdate(e,t,r,i,o,s,(e,t,r,i)=>{let o=new n.HttpOperationResponse(r,i);o.body=t,e?u(e):c(o)})})}createOrUpdate(e,t,r,n,i,o,s){this.client;let a=this;return s||"function"!=typeof o||(s=o,o=null),s?a._createOrUpdate(e,t,r,n,i,o,s):new Promise((s,c)=>{a._createOrUpdate(e,t,r,n,i,o,(e,t,r,n)=>{e?c(e):s(t)})})}deleteMethodWithHttpOperationResponse(e,t,r,i,o){this.client;let s=this;return new Promise((a,c)=>{s._deleteMethod(e,t,r,i,o,(e,t,r,i)=>{let o=new n.HttpOperationResponse(r,i);o.body=t,e?c(e):a(o)})})}deleteMethod(e,t,r,n,i,o){this.client;let s=this;return o||"function"!=typeof i||(o=i,i=null),o?s._deleteMethod(e,t,r,n,i,o):new Promise((o,a)=>{s._deleteMethod(e,t,r,n,i,(e,t,r,n)=>{e?a(e):o(t)})})}getWithHttpOperationResponse(e,t,r,i,o){this.client;let s=this;return new Promise((a,c)=>{s._get(e,t,r,i,o,(e,t,r,i)=>{let o=new n.HttpOperationResponse(r,i);o.body=t,e?c(e):a(o)})})}get(e,t,r,n,i,o){this.client;let s=this;return o||"function"!=typeof i||(o=i,i=null),o?s._get(e,t,r,n,i,o):new Promise((o,a)=>{s._get(e,t,r,n,i,(e,t,r,n)=>{e?a(e):o(t)})})}listByEventHubWithHttpOperationResponse(e,t,r,i){this.client;let o=this;return new Promise((s,a)=>{o._listByEventHub(e,t,r,i,(e,t,r,i)=>{let o=new n.HttpOperationResponse(r,i);o.body=t,e?a(e):s(o)})})}listByEventHub(e,t,r,n,i){this.client;let o=this;return i||"function"!=typeof n||(i=n,n=null),i?o._listByEventHub(e,t,r,n,i):new Promise((i,s)=>{o._listByEventHub(e,t,r,n,(e,t,r,n)=>{e?s(e):i(t)})})}listByEventHubNextWithHttpOperationResponse(e,t){this.client;let r=this;return new Promise((i,o)=>{r._listByEventHubNext(e,t,(e,t,r,s)=>{let a=new n.HttpOperationResponse(r,s);a.body=t,e?o(e):i(a)})})}listByEventHubNext(e,t,r){this.client;let n=this;return r||"function"!=typeof t||(r=t,t=null),r?n._listByEventHubNext(e,t,r):new Promise((r,i)=>{n._listByEventHubNext(e,t,(e,t,n,o)=>{e?i(e):r(t)})})}}},function(e,t,r){"use strict";const n=r(86),i=r(9),o=n.WebResource;function _listBySku(e,t,r){let s=this.client;if(r||"function"!=typeof t||(r=t,t=null),!r)throw new Error("callback cannot be null.");try{if(null===this.client.apiVersion||void 0===this.client.apiVersion||"string"!=typeof this.client.apiVersion.valueOf())throw new Error("this.client.apiVersion cannot be null or undefined and it must be of type string.");if(null===this.client.subscriptionId||void 0===this.client.subscriptionId||"string"!=typeof this.client.subscriptionId.valueOf())throw new Error("this.client.subscriptionId cannot be null or undefined and it must be of type string.");if(null==e||"string"!=typeof e.valueOf())throw new Error("sku cannot be null or undefined and it must be of type string.");if(null!=e){if(e.length>50)throw new Error('"sku" should satisfy the constraint - "MaxLength": 50');if(e.length<1)throw new Error('"sku" should satisfy the constraint - "MinLength": 1')}if(null!==this.client.acceptLanguage&&void 0!==this.client.acceptLanguage&&"string"!=typeof this.client.acceptLanguage.valueOf())throw new Error("this.client.acceptLanguage must be of type string.")}catch(e){return r(e)}let a=this.client.baseUri,c=a+(a.endsWith("/")?"":"/")+"subscriptions/{subscriptionId}/providers/Microsoft.EventHub/sku/{sku}/regions";c=(c=c.replace("{subscriptionId}",encodeURIComponent(this.client.subscriptionId))).replace("{sku}",encodeURIComponent(e));let u=[];u.push("api-version="+encodeURIComponent(this.client.apiVersion)),u.length>0&&(c+="?"+u.join("&"));let l=new o;if(l.method="GET",l.url=c,l.headers={},l.headers["Content-Type"]="application/json; charset=utf-8",this.client.generateClientRequestId&&(l.headers["x-ms-client-request-id"]=i.generateUuid()),void 0!==this.client.acceptLanguage&&null!==this.client.acceptLanguage&&(l.headers["accept-language"]=this.client.acceptLanguage),t)for(let e in t.customHeaders)t.customHeaders.hasOwnProperty(e)&&(l.headers[e]=t.customHeaders[e]);return l.body=null,s.pipeline(l,(e,t,i)=>{if(e)return r(e);let o=t.statusCode;if(200!==o){let e,o=new Error(i);o.statusCode=t.statusCode,o.request=n.stripRequest(l),o.response=n.stripResponse(t),""===i&&(i=null);try{if(e=JSON.parse(i)){let t=null;e.error&&(t=e.error),o.code=t?t.code:e.code,o.message=t?t.message:e.message}if(null!=e){let t=(new s.models.ErrorResponse).mapper();o.body=s.deserialize(t,e,"error.body")}}catch(e){return o.message=`Error "${e.message}" occurred in deserializing the responseBody `+`- "${i}" for the default response.`,r(o)}return r(o)}let a=null;if(""===i&&(i=null),200===o){let e=null;try{if(e=JSON.parse(i),a=JSON.parse(i),null!=e){let t=(new s.models.MessagingRegionsListResult).mapper();a=s.deserialize(t,e,"result")}}catch(e){let o=new Error(`Error ${e} occurred in deserializing the responseBody - ${i}`);return o.request=n.stripRequest(l),o.response=n.stripResponse(t),r(o)}}return r(null,a,l,t)})}function _listBySkuNext(e,t,r){let s=this.client;if(r||"function"!=typeof t||(r=t,t=null),!r)throw new Error("callback cannot be null.");try{if(null==e||"string"!=typeof e.valueOf())throw new Error("nextPageLink cannot be null or undefined and it must be of type string.");if(null!==this.client.acceptLanguage&&void 0!==this.client.acceptLanguage&&"string"!=typeof this.client.acceptLanguage.valueOf())throw new Error("this.client.acceptLanguage must be of type string.")}catch(e){return r(e)}let a="{nextLink}";a=a.replace("{nextLink}",e);let c=new o;if(c.method="GET",c.url=a,c.headers={},c.headers["Content-Type"]="application/json; charset=utf-8",this.client.generateClientRequestId&&(c.headers["x-ms-client-request-id"]=i.generateUuid()),void 0!==this.client.acceptLanguage&&null!==this.client.acceptLanguage&&(c.headers["accept-language"]=this.client.acceptLanguage),t)for(let e in t.customHeaders)t.customHeaders.hasOwnProperty(e)&&(c.headers[e]=t.customHeaders[e]);return c.body=null,s.pipeline(c,(e,t,i)=>{if(e)return r(e);let o=t.statusCode;if(200!==o){let e,o=new Error(i);o.statusCode=t.statusCode,o.request=n.stripRequest(c),o.response=n.stripResponse(t),""===i&&(i=null);try{if(e=JSON.parse(i)){let t=null;e.error&&(t=e.error),o.code=t?t.code:e.code,o.message=t?t.message:e.message}if(null!=e){let t=(new s.models.ErrorResponse).mapper();o.body=s.deserialize(t,e,"error.body")}}catch(e){return o.message=`Error "${e.message}" occurred in deserializing the responseBody `+`- "${i}" for the default response.`,r(o)}return r(o)}let a=null;if(""===i&&(i=null),200===o){let e=null;try{if(e=JSON.parse(i),a=JSON.parse(i),null!=e){let t=(new s.models.MessagingRegionsListResult).mapper();a=s.deserialize(t,e,"result")}}catch(e){let o=new Error(`Error ${e} occurred in deserializing the responseBody - ${i}`);return o.request=n.stripRequest(c),o.response=n.stripResponse(t),r(o)}}return r(null,a,c,t)})}e.exports=class Regions{constructor(e){this.client=e,this._listBySku=_listBySku,this._listBySkuNext=_listBySkuNext}listBySkuWithHttpOperationResponse(e,t){this.client;let r=this;return new Promise((i,o)=>{r._listBySku(e,t,(e,t,r,s)=>{let a=new n.HttpOperationResponse(r,s);a.body=t,e?o(e):i(a)})})}listBySku(e,t,r){this.client;let n=this;return r||"function"!=typeof t||(r=t,t=null),r?n._listBySku(e,t,r):new Promise((r,i)=>{n._listBySku(e,t,(e,t,n,o)=>{e?i(e):r(t)})})}listBySkuNextWithHttpOperationResponse(e,t){this.client;let r=this;return new Promise((i,o)=>{r._listBySkuNext(e,t,(e,t,r,s)=>{let a=new n.HttpOperationResponse(r,s);a.body=t,e?o(e):i(a)})})}listBySkuNext(e,t,r){this.client;let n=this;return r||"function"!=typeof t||(r=t,t=null),r?n._listBySkuNext(e,t,r):new Promise((r,i)=>{n._listBySkuNext(e,t,(e,t,n,o)=>{e?i(e):r(t)})})}}},function(e,t,r){"use strict";var n=this&&this.__awaiter||function(e,t,r,n){return new(r||(r=Promise))(function(i,o){function fulfilled(e){try{step(n.next(e))}catch(e){o(e)}}function rejected(e){try{step(n.throw(e))}catch(e){o(e)}}function step(e){e.done?i(e.value):new r(function(t){t(e.value)}).then(fulfilled,rejected)}step((n=n.apply(e,t||[])).next())})};Object.defineProperty(t,"__esModule",{value:!0});const i=r(322),o=r(107),s=r(67),a=r(11),c=r(6),u=r(1035),l=r(10),p=r(68),d=r(16),h=r(437),f=r(18),m=r(25);t.IoTEdgeExplorer=class IoTEdgeExplorer extends p.BaseExplorer{constructor(e){super(e)}createDeployment(e){return n(this,void 0,void 0,function*(){f.TelemetryClient.sendEvent(d.Constants.IoTHubAIEdgeDeployStartEvent);let t=yield m.Utility.getConnectionString(d.Constants.IotHubConnectionStringKey,d.Constants.IotHubConnectionStringTitle);if(!t)return;let r,n,i="none";if(e instanceof h.DeviceNode&&(r=e.deviceItem,i="device"),!(r=yield m.Utility.getInputDevice(r,null,!0)))return;e instanceof l.Uri&&(n=e.fsPath,i="file");const o=yield this.getDeploymentJson(n);o&&this.deploy(t,r.deviceId,o,i)})}createDeploymentAtScale(e){return n(this,void 0,void 0,function*(){f.TelemetryClient.sendEvent(d.Constants.IoTHubAIEdgeDeployAtScaleStartEvent);const t=yield m.Utility.getConnectionString(d.Constants.IotHubConnectionStringKey,d.Constants.IotHubConnectionStringTitle);if(!t)return;const r=e?e.fsPath:void 0,n=yield this.getDeploymentJson(r);n&&this.deployAtScale(t,n)})}getModuleTwin(e){return n(this,void 0,void 0,function*(){e&&(yield this.getModuleTwinById(e.deviceId,e.moduleId,e.contextValue))})}updateModuleTwin(){return n(this,void 0,void 0,function*(){f.TelemetryClient.sendEvent(d.Constants.IoTHubAIUpdateModuleTwinStartEvent);const e=yield m.Utility.getConnectionString(d.Constants.IotHubConnectionStringKey,d.Constants.IotHubConnectionStringTitle);if(e)try{this._outputChannel.show();const t=yield m.Utility.readFromActiveFile(d.Constants.ModuleTwinJosnFileName);if(!t)return;const r=JSON.parse(t);if(r.moduleId.startsWith("$"))throw new Error("Azure IoT Edge system modules are readonly and cannot be modified. Changes can be submitted via deploying a configuration.");this.outputLine(d.Constants.IoTHubModuleTwinLabel,`Update Module Twin for [${r.deviceId}][${r.moduleId}]...`),yield m.Utility.updateModuleTwin(e,r.deviceId,r.moduleId,t),this.outputLine(d.Constants.IoTHubModuleTwinLabel,"Module Twin updated successfully"),f.TelemetryClient.sendEvent(d.Constants.IoTHubAIUpdateModuleTwinDoneEvent,{Result:"Success"}),yield this.getModuleTwinById(r.deviceId,r.moduleId)}catch(e){this.outputLine(d.Constants.IoTHubModuleTwinLabel,`Failed to update Module Twin: ${e}`),f.TelemetryClient.sendEvent(d.Constants.IoTHubAIUpdateModuleTwinDoneEvent,{Result:"Fail",Message:e})}})}isValidDeploymentJsonSchema(e){return n(this,void 0,void 0,function*(){const t=(yield o.default.get(d.Constants.DeploymentJsonSchemaUrl)).data,r=new i({allErrors:!0});return!!r.validate(t,e)||(l.window.showErrorMessage(`There are errors in deployment json file: ${r.errorsText(null,{separator:", "})}`),!1)})}isValidCreateOptions(e){return this.isValidCreateOptionsHepler(e.systemModules)&&this.isValidCreateOptionsHepler(e.modules)}isValidCreateOptionsHepler(e){for(const t in e)if(e.hasOwnProperty(t))try{let r=e[t].settings.createOptions;for(let n=1;n<d.Constants.CREATE_OPTIONS_MAX_CHUNKS;n++){const i=e[t].settings[`createOptions0${n}`];if(!i)break;r+=i}r&&this.checkJsonString(r)}catch(e){return l.window.showErrorMessage(`CreateOptions of "${t}" is not a valid JSON string: ${e.message}`),!1}return!0}checkJsonString(e){if(e){if("{"!==e.trim().charAt(0))throw new Error("not a valid JSON string");JSON.parse(e)}}getModuleTwinById(e,t,r="unknown"){return n(this,void 0,void 0,function*(){f.TelemetryClient.sendEvent(d.Constants.IoTHubAIGetModuleTwinStartEvent,{moduleType:r});const n=yield m.Utility.getConnectionString(d.Constants.IotHubConnectionStringKey,d.Constants.IotHubConnectionStringTitle);if(n)try{const r=yield m.Utility.getModuleTwin(n,e,t);m.Utility.writeJson(d.Constants.ModuleTwinJosnFilePath,r);const i=yield l.workspace.openTextDocument(d.Constants.ModuleTwinJosnFilePath);if(i.isDirty)throw new Error(`Your ${d.Constants.ModuleTwinJosnFileName} has unsaved changes. Please close or save the file. Then try again.`);l.window.showTextDocument(i),f.TelemetryClient.sendEvent(d.Constants.IoTHubAIGetModuleTwinDoneEvent,{Result:"Success"})}catch(e){this._outputChannel.show(),this.outputLine(d.Constants.IoTHubModuleTwinLabel,`Failed to get Module Twin: ${e}`),f.TelemetryClient.sendEvent(d.Constants.IoTHubAIGetModuleTwinDoneEvent,{Result:"Fail",Message:e})}})}getDeploymentJson(e){return n(this,void 0,void 0,function*(){if(!e){const t=yield l.window.showOpenDialog({openLabel:"Select Edge Deployment Manifest",filters:{JSON:["json"]},defaultUri:m.Utility.getDefaultPath()});if(!t)return"";e=t[0].fsPath}if(c.basename(e).endsWith(".template.json"))return l.window.showWarningMessage("Please select deployment manifest file under 'config' folder for deployment."),"";let t=u(a.readFileSync(e,"utf8"));try{let e=JSON.parse(t);!e.modulesContent&&e.moduleContent&&(e.modulesContent=e.moduleContent,delete e.moduleContent);try{if(!(yield this.isValidDeploymentJsonSchema(e))||!this.isValidCreateOptions(e.modulesContent.$edgeAgent["properties.desired"]))return""}catch(e){f.TelemetryClient.sendEvent(d.Constants.IoTHubAIValidateJsonSchemaEvent,{error:e.message})}t=JSON.stringify(e,null,2)}catch(e){return l.window.showErrorMessage("Failed to parse deployment manifest: "+e.toString()),""}return t})}deploy(e,t,r,i){return n(this,void 0,void 0,function*(){const n=d.Constants.IoTHubEdgeLabel;this._outputChannel.show(),this.outputLine(n,`Start deployment to device [${t}]`);const o="none"===i?"commandPalette":"contextMenu";try{const a=s.Registry.fromConnectionString(e),c=JSON.parse(r);yield a.applyConfigurationContentOnDevice(t,c),this.outputLine(n,"Deployment succeeded."),f.TelemetryClient.sendEvent(d.Constants.IoTHubAIEdgeDeployDoneEvent,{Result:"Success",entry:o,from:i})}catch(e){this.outputLine(n,`Deployment failed. ${e}`);let t="";e&&e.responseBody&&(t=e.responseBody,this.outputLine(n,e.responseBody)),f.TelemetryClient.sendEvent(d.Constants.IoTHubAIEdgeDeployDoneEvent,{Result:"Fail",Message:e,detailedMessage:t,entry:o,from:i})}})}deployAtScale(e,t){return n(this,void 0,void 0,function*(){const r=JSON.parse(t);let n;if(r.modulesContent?n=r.modulesContent:r.content&&r.content.modulesContent&&(n=r.content.modulesContent),!n)return void l.window.showWarningMessage("Deployment manifest is invalid.");const i=yield l.window.showInputBox({prompt:"Deployment id",placeHolder:"The name of the deployment",ignoreFocusOut:!0,validateInput:e=>e?e.length>128?"Up to 128 characters are allowed.":/^[a-z0-9-:+%_#*?!(),=@;']+$/.test(e)?void 0:"Lowercase letters, numbers and the following characters are allowed [ -:+%_#*?!(),=@;' ].":"The value should not be empty."});if(!i)return;const o=yield l.window.showInputBox({prompt:"A target condition to determine which devices will be targeted with this deployment",placeHolder:"e.g. tags.environment='test', properties.reported.devicemodel='4000x', or deviceId='{id}'",ignoreFocusOut:!0,validateInput:e=>e?m.Utility.isValidTargetCondition(e)?void 0:"Valid conditions specify a either a deviceId (e.g. deviceId='{id}'),                     one or more device twin tag criteria (e.g. tags.environment = 'prod' AND tags.location = 'westus'),                     or reported property criteria (e.g. properties.reported.lastStatus='200').":"The value should not be empty."});if(!o)return;const a=yield l.window.showInputBox({prompt:"Deployment priority (Higher values indicate higher priority)",value:"10",ignoreFocusOut:!0,validateInput:e=>{if(!e)return"The value should not be empty.";const t=parseFloat(e);return!Number.isInteger(t)||t<0?"Deployment priority should be a positive integer":void 0}});if(!a)return;const c={id:i,content:{modulesContent:n},schemaVersion:"1.0",targetCondition:o,priority:parseInt(a,10)},u=d.Constants.IoTHubEdgeLabel;this._outputChannel.show(),this.outputLine(u,`Start deployment with deployment id [${i}] and target condition [${o}]`),s.Registry.fromConnectionString(e).addConfiguration(c,e=>{e?(this.outputLine(u,`Deployment failed. ${e}`),f.TelemetryClient.sendEvent(d.Constants.IoTHubAIEdgeDeployAtScaleDoneEvent,{Result:"Fail",Message:e.message})):(this.outputLine(u,"Deployment succeeded."),f.TelemetryClient.sendEvent(d.Constants.IoTHubAIEdgeDeployAtScaleDoneEvent,{Result:"Success"}))})})}}},function(e,t,r){"use strict";function stripWithoutWhitespace(){return""}function stripWithWhitespace(e,t,r){return e.slice(t,r).replace(/\S/g," ")}e.exports=function(e,t){for(var r,n,i=!1,o=!1,s=0,a="",c=!1===(t=t||{}).whitespace?stripWithoutWhitespace:stripWithWhitespace,u=0;u<e.length;u++){if(r=e[u],n=e[u+1],!o&&'"'===r)"\\"===e[u-1]&&"\\"!==e[u-2]||(i=!i);if(!i)if(o||r+n!=="//"){if(1===o&&r+n==="\r\n"){o=!1,a+=c(e,s,++u),s=u;continue}if(1===o&&"\n"===r)o=!1,a+=c(e,s,u),s=u;else{if(!o&&r+n==="/*"){a+=e.slice(s,u),s=u,o=2,u++;continue}if(2===o&&r+n==="*/"){o=!1,a+=c(e,s,++u+1),s=u+1;continue}}}else a+=e.slice(s,u),s=u,o=1,u++}return a+(o?c(e.substr(s)):e.substr(s))}},function(e,t,r){"use strict";var n=this&&this.__awaiter||function(e,t,r,n){return new(r||(r=Promise))(function(i,o){function fulfilled(e){try{step(n.next(e))}catch(e){o(e)}}function rejected(e){try{step(n.throw(e))}catch(e){o(e)}}function step(e){e.done?i(e.value):new r(function(t){t(e.value)}).then(fulfilled,rejected)}step((n=n.apply(e,t||[])).next())})};Object.defineProperty(t,"__esModule",{value:!0});const i=r(10),o=r(16),s=r(18),a=r(25),c=r(1037);t.ModuleLabelNode=class ModuleLabelNode{constructor(e){this.deviceNode=e,this.label="Modules"}getTreeItem(){return{label:this.label,collapsibleState:i.TreeItemCollapsibleState.Collapsed,contextValue:"modules-label"}}getChildren(e,t){return n(this,void 0,void 0,function*(){if("edge"===this.deviceNode.deviceItem.contextValue){s.TelemetryClient.sendEvent(o.Constants.IoTHubAILoadEdgeModuleTreeStartEvent);try{const r=yield a.Utility.getModuleItemsForEdge(t,this.deviceNode.deviceItem,e);s.TelemetryClient.sendEvent(o.Constants.IoTHubAILoadEdgeModuleTreeDoneEvent,{Result:"Success"});let n=[];return r.forEach(e=>{n.push(new c.ModuleItemNode(e,this))}),n}catch(e){return s.TelemetryClient.sendEvent(o.Constants.IoTHubAILoadEdgeModuleTreeDoneEvent,{Result:"Fail",Message:e.message}),a.Utility.getErrorMessageTreeItems("modules",e.message)}}else if("device"===this.deviceNode.deviceItem.contextValue){s.TelemetryClient.sendEvent(o.Constants.IoTHubAILoadModuleTreeStartEvent);try{const r=yield a.Utility.getModuleItems(t,this.deviceNode.deviceItem,e);s.TelemetryClient.sendEvent(o.Constants.IoTHubAILoadModuleTreeDoneEvent,{Result:"Success"}),0===r.length&&r.push(new i.TreeItem("No Modules"));let n=[];return r.forEach(e=>{n.push(new c.ModuleItemNode(e,this))}),n}catch(e){return s.TelemetryClient.sendEvent(o.Constants.IoTHubAILoadModuleTreeDoneEvent,{Result:"Fail",Message:e.message}),a.Utility.getErrorMessageTreeItems("modules",e.message)}}})}}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.ModuleItemNode=class ModuleItemNode{constructor(e,t){this.moduleItem=e,this.moduleLabelNode=t}getTreeItem(){return this.moduleItem}getChildren(){return[]}}},function(e,t,r){"use strict";var n=this&&this.__awaiter||function(e,t,r,n){return new(r||(r=Promise))(function(i,o){function fulfilled(e){try{step(n.next(e))}catch(e){o(e)}}function rejected(e){try{step(n.throw(e))}catch(e){o(e)}}function step(e){e.done?i(e.value):new r(function(t){t(e.value)}).then(fulfilled,rejected)}step((n=n.apply(e,t||[])).next())})};Object.defineProperty(t,"__esModule",{value:!0});const i=r(4),o=r(88),s=r(438),a=r(67),c=r(10),u=r(16),l=r(244),p=r(18),d=r(25);t.IotHubC2DMessageExplorer=class IotHubC2DMessageExplorer extends l.IoTHubMessageBaseExplorer{constructor(e){super(e,"$(primitive-square) Stop Monitoring C2D Message","azure-iot-toolkit.stopMonitorC2DMessage"),this.printResult=((e,t)=>{e&&this.outputLine(u.Constants.IoTHubC2DMessageMonitorLabel,"Error: "+e.toString()),t&&this.outputLine(u.Constants.IoTHubC2DMessageMonitorLabel,"Status: "+t.constructor.name)})}sendC2DMessage(e){return n(this,void 0,void 0,function*(){let t=yield d.Utility.getConnectionString(u.Constants.IotHubConnectionStringKey,u.Constants.IotHubConnectionStringTitle);t&&(e=yield d.Utility.getInputDevice(e,u.Constants.IoTHubAIC2DMessageStartEvent))&&e.label&&this.sendC2DMessageById(t,e.label)})}startMonitorC2DMessage(e){return n(this,void 0,void 0,function*(){if(this._isMonitoring)return this._outputChannel.show(),void this.outputLine(u.Constants.IoTHubC2DMessageMonitorLabel,"There is a running job to monitor C2D message. Please stop it first.");if(!(e=yield d.Utility.getInputDevice(e,u.Constants.IoTHubAIStartMonitorC2DEvent))||!e.connectionString)return;const t=e.connectionString;this._outputChannel.show(),this._deviceClient=s.clientFromConnectionString(t),this._deviceClient.open(this.connectCallback(t))})}stopMonitorC2DMessage(){p.TelemetryClient.sendEvent(u.Constants.IoTHubAIStopMonitorC2DEvent),this._outputChannel.show(),this._isMonitoring?(this.outputLine(u.Constants.IoTHubC2DMessageMonitorLabel,"C2D monitoring stopped."),this._monitorStatusBarItem.hide(),this._deviceClient.close(()=>{this.updateMonitorStatus(!1)})):this.outputLine(u.Constants.IoTHubC2DMessageMonitorLabel,"No C2D monitor job running.")}sendC2DMessageById(e,t){c.window.showInputBox({prompt:"Enter message to send to device"}).then(r=>{if(void 0!==r){let n=a.Client.fromConnectionString(e);this._outputChannel.show(),n.open(e=>{if(e)this.outputLine(u.Constants.IoTHubC2DMessageLabel,e.message);else{let e=new i.Message(r);n.send(t,e.getData(),this.sendEventDone(n,u.Constants.IoTHubC2DMessageLabel,t,u.Constants.IoTHubAIC2DMessageDoneEvent))}})}})}connectCallback(e){return t=>{if(t)this.outputLine(u.Constants.IoTHubC2DMessageMonitorLabel,t),p.TelemetryClient.sendEvent(u.Constants.IoTHubAIStartMonitorC2DEvent,{Result:"Exception",Message:t});else{this.updateMonitorStatus(!0);let t=o.ConnectionString.parse(e).DeviceId;this.outputLine(u.Constants.IoTHubC2DMessageMonitorLabel,`Start monitoring C2D message for [${t}]...`),p.TelemetryClient.sendEvent(u.Constants.IoTHubAIStartMonitorC2DEvent),this._deviceClient.on("message",e=>{this.outputLine(u.Constants.IoTHubC2DMessageMonitorLabel,"Message Received: "+e.getData()),e.properties&&e.properties.propertyList&&e.properties.propertyList.length>0&&(this._outputChannel.appendLine("Properties:"),this._outputChannel.appendLine(JSON.stringify(e.properties.propertyList,null,2))),this._deviceClient.complete(e,this.printResult)})}}}}},function(e,t,r){"use strict";function _typeof(e){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function _typeof(e){return typeof e}:function _typeof(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}t.log=function log(){var e;return"object"===("undefined"==typeof console?"undefined":_typeof(console))&&console.log&&(e=console).log.apply(e,arguments)},t.formatArgs=function formatArgs(t){if(t[0]=(this.useColors?"%c":"")+this.namespace+(this.useColors?" %c":" ")+t[0]+(this.useColors?"%c ":" ")+"+"+e.exports.humanize(this.diff),!this.useColors)return;var r="color: "+this.color;t.splice(1,0,r,"color: inherit");var n=0,i=0;t[0].replace(/%[a-zA-Z%]/g,function(e){"%%"!==e&&(n++,"%c"===e&&(i=n))}),t.splice(i,0,r)},t.save=function save(e){try{e?t.storage.setItem("debug",e):t.storage.removeItem("debug")}catch(e){}},t.load=function load(){var e;try{e=t.storage.getItem("debug")}catch(e){}!e&&"undefined"!=typeof process&&"env"in process&&(e=process.env.DEBUG);return e},t.useColors=function useColors(){if("undefined"!=typeof window&&window.process&&("renderer"===window.process.type||window.process.__nwjs))return!0;if("undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/))return!1;return"undefined"!=typeof document&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||"undefined"!=typeof window&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||"undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31||"undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/)},t.storage=function localstorage(){try{return localStorage}catch(e){}}(),t.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"],e.exports=r(441)(t),e.exports.formatters.j=function(e){try{return JSON.stringify(e)}catch(e){return"[UnexpectedJSONParseError]: "+e.message}}},function(e,t){var r=1e3,n=60*r,i=60*n,o=24*i,s=7*o,a=365.25*o;function plural(e,t,r,n){var i=t>=1.5*r;return Math.round(e/r)+" "+n+(i?"s":"")}e.exports=function(e,t){t=t||{};var c=typeof e;if("string"===c&&e.length>0)return function parse(e){if((e=String(e)).length>100)return;var t=/^((?:\d+)?\-?\d?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(e);if(!t)return;var c=parseFloat(t[1]);switch((t[2]||"ms").toLowerCase()){case"years":case"year":case"yrs":case"yr":case"y":return c*a;case"weeks":case"week":case"w":return c*s;case"days":case"day":case"d":return c*o;case"hours":case"hour":case"hrs":case"hr":case"h":return c*i;case"minutes":case"minute":case"mins":case"min":case"m":return c*n;case"seconds":case"second":case"secs":case"sec":case"s":return c*r;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return c;default:return}}(e);if("number"===c&&!1===isNaN(e))return t.long?function fmtLong(e){var t=Math.abs(e);if(t>=o)return plural(e,t,o,"day");if(t>=i)return plural(e,t,i,"hour");if(t>=n)return plural(e,t,n,"minute");if(t>=r)return plural(e,t,r,"second");return e+" ms"}(e):function fmtShort(e){var t=Math.abs(e);if(t>=o)return Math.round(e/o)+"d";if(t>=i)return Math.round(e/i)+"h";if(t>=n)return Math.round(e/n)+"m";if(t>=r)return Math.round(e/r)+"s";return e+"ms"}(e);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(e))}},function(e,t,r){"use strict";var n=r(51),i=r(1);t.init=function init(e){e.inspectOpts={};for(var r=Object.keys(t.inspectOpts),n=0;n<r.length;n++)e.inspectOpts[r[n]]=t.inspectOpts[r[n]]},t.log=function log(){return process.stderr.write(i.format.apply(i,arguments)+"\n")},t.formatArgs=function formatArgs(r){var n=this.namespace;if(this.useColors){var i=this.color,o="[3"+(i<8?i:"8;5;"+i),s="  ".concat(o,";1m").concat(n," [0m");r[0]=s+r[0].split("\n").join("\n"+s),r.push(o+"m+"+e.exports.humanize(this.diff)+"[0m")}else r[0]=function getDate(){if(t.inspectOpts.hideDate)return"";return(new Date).toISOString()+" "}()+n+" "+r[0]},t.save=function save(e){e?process.env.DEBUG=e:delete process.env.DEBUG},t.load=function load(){return process.env.DEBUG},t.useColors=function useColors(){return"colors"in t.inspectOpts?Boolean(t.inspectOpts.colors):n.isatty(process.stderr.fd)},t.colors=[6,2,3,4,5,1];try{var o=r(49);o&&(o.stderr||o).level>=2&&(t.colors=[20,21,26,27,32,33,38,39,40,41,42,43,44,45,56,57,62,63,68,69,74,75,76,77,78,79,80,81,92,93,98,99,112,113,128,129,134,135,148,149,160,161,162,163,164,165,166,167,168,169,170,171,172,173,178,179,184,185,196,197,198,199,200,201,202,203,204,205,206,207,208,209,214,215,220,221])}catch(e){}t.inspectOpts=Object.keys(process.env).filter(function(e){return/^debug_/i.test(e)}).reduce(function(e,t){var r=t.substring(6).toLowerCase().replace(/_([a-z])/g,function(e,t){return t.toUpperCase()}),n=process.env[t];return n=!!/^(yes|on|true|enabled)$/i.test(n)||!/^(no|off|false|disabled)$/i.test(n)&&("null"===n?null:Number(n)),e[r]=n,e},{}),e.exports=r(441)(t);var s=e.exports.formatters;s.o=function(e){return this.inspectOpts.colors=this.useColors,i.inspect(e,this.inspectOpts).replace(/\s*\n\s*/g," ")},s.O=function(e){return this.inspectOpts.colors=this.useColors,i.inspect(e,this.inspectOpts)}},function(e,t,r){"use strict";var n,i=this&&this.__extends||(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])},function(e,t){function __(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(__.prototype=t.prototype,new __)});Object.defineProperty(t,"__esModule",{value:!0});var o=r(5),s=r(78),a=r(443)("azure-iot-mqtt-base:MqttBase"),c=r(4),u=function(e){function MqttBase(t){var n=e.call(this)||this;return n.mqttprovider=t||r(245),n._fsm=new s.Fsm({namespace:"mqtt-base",initialState:"disconnected",states:{disconnected:{_onEnter:function(e,t){n._mqttClient&&(n._mqttClient.removeAllListeners(),n._mqttClient=void 0),e?e(t):t&&n.emit("error",t)},connect:function(e){return n._fsm.transition("connecting",e)},disconnect:function(e){return e()},publish:function(e,t,r,n){return n(new c.errors.NotConnectedError)},subscribe:function(e,t,r){return r(new c.errors.NotConnectedError)},unsubscribe:function(e,t){return t(new c.errors.NotConnectedError)},updateSharedAccessSignature:function(e){a("updating shared access signature while disconnected"),e()}},connecting:{_onEnter:function(e){n._connectClient(function(t,r){t?n._fsm.transition("disconnected",e,t):n._fsm.transition("connected",e,r)})},disconnect:function(e){n._fsm.transition("disconnecting",e)},"*":function(){return n._fsm.deferUntilTransition()}},connected:{_onEnter:function(e,t){n._mqttClient.on("close",function(){a("close event received from mqtt.js client - no error"),n._fsm.handle("closeEvent")}),e(null,new c.results.Connected(t))},connect:function(e){return e(null,new c.results.Connected)},disconnect:function(e){return n._fsm.transition("disconnecting",e)},publish:function(e,t,r,i){n._mqttClient.publish(e,t,r,i)},subscribe:function(e,t,r){n._mqttClient.subscribe(e,t,r)},unsubscribe:function(e,t){n._mqttClient.unsubscribe(e,t)},updateSharedAccessSignature:function(e){n._fsm.transition("reconnecting",e)},closeEvent:function(){n._fsm.transition("disconnected",void 0,new c.errors.NotConnectedError("Connection to the server has been closed."))}},disconnecting:{_onEnter:function(e,t){n._disconnectClient(!!t,function(){n._fsm.transition("disconnected",e,t)})},"*":function(){return n._fsm.deferUntilTransition()}},reconnecting:{_onEnter:function(e){n._disconnectClient(!1,function(){n._connectClient(function(t,r){t?n._fsm.transition("disconnected",e,t):n._fsm.transition("connected",e,r)})})},"*":function(){return n._fsm.deferUntilTransition()}}}}),n._fsm.on("transition",function(e){a(e.fromState+" -> "+e.toState+" ("+e.action+")")}),n}return i(MqttBase,e),MqttBase.prototype.connect=function(e,t){if(!(e&&e.uri&&e.clientId&&e.username&&(e.sharedAccessSignature||e.x509&&e.x509.cert&&e.x509.key)))throw new ReferenceError("Invalid transport configuration");this._config=e,this._fsm.handle("connect",t)},MqttBase.prototype.disconnect=function(e){this._fsm.handle("disconnect",e)},MqttBase.prototype.publish=function(e,t,r,n){if(!e)throw new ReferenceError("Invalid topic");this._fsm.handle("publish",e,t,r,n)},MqttBase.prototype.subscribe=function(e,t,r){if(!e)throw new ReferenceError("Topic cannot be '"+e+"'");this._fsm.handle("subscribe",e,t,r)},MqttBase.prototype.unsubscribe=function(e,t){if(!e)throw new ReferenceError("Topic cannot be '"+e+"'");this._fsm.handle("unsubscribe",e,t)},MqttBase.prototype.updateSharedAccessSignature=function(e,t){if(!e)throw new ReferenceError("sharedAccessSignature cannot be '"+e+"'");this._config.sharedAccessSignature=e,this._fsm.handle("updateSharedAccessSignature",t)},MqttBase.prototype.setOptions=function(e){this._options=e},MqttBase.prototype._connectClient=function(e){var t=this,r={protocolId:"MQTT",protocolVersion:4,clean:this._config.clean||!1,clientId:this._config.clientId,rejectUnauthorized:!0,username:this._config.username,reconnectPeriod:0,keepalive:180,reschedulePings:!1};this._options&&(this._options.ca&&(r.ca=this._options.ca),this._options.mqtt&&this._options.mqtt.webSocketAgent&&(r.wsOptions={agent:this._options.mqtt.webSocketAgent})),this._config.sharedAccessSignature?(r.password=this._config.sharedAccessSignature.toString(),a("username: "+r.username),a("uri:      "+this._config.uri)):(r.cert=this._config.x509.cert,r.key=this._config.x509.key,r.passphrase=this._config.x509.passphrase);var n=function(t){return function(r){a("received '"+t+"' from mqtt client");var n=r||new c.errors.NotConnectedError("Unable to establish a connection");e(n)}},i=n("error"),o=n("close"),s=n("offline"),u=n("disconnect");this._mqttClient=this.mqttprovider.connect(this._config.uri,r),this._mqttClient.on("message",function(e,r){process.nextTick(function(){t.emit("message",e,r)})}),this._mqttClient.on("error",i),this._mqttClient.on("close",o),this._mqttClient.on("offline",s),this._mqttClient.on("disconnect",u),this._mqttClient.on("connect",function(r){a("Device is connected"),a("CONNACK: "+JSON.stringify(r)),t._mqttClient.removeListener("close",o),t._mqttClient.removeListener("offline",s),t._mqttClient.removeListener("disconnect",u),e(null,r)})},MqttBase.prototype._disconnectClient=function(e,t){this._mqttClient.removeAllListeners(),this._mqttClient.end(e,t)},MqttBase}(o.EventEmitter);t.MqttBase=u},function(e,t,r){"use strict";function _typeof(e){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function _typeof(e){return typeof e}:function _typeof(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}t.log=function log(){var e;return"object"===("undefined"==typeof console?"undefined":_typeof(console))&&console.log&&(e=console).log.apply(e,arguments)},t.formatArgs=function formatArgs(t){if(t[0]=(this.useColors?"%c":"")+this.namespace+(this.useColors?" %c":" ")+t[0]+(this.useColors?"%c ":" ")+"+"+e.exports.humanize(this.diff),!this.useColors)return;var r="color: "+this.color;t.splice(1,0,r,"color: inherit");var n=0,i=0;t[0].replace(/%[a-zA-Z%]/g,function(e){"%%"!==e&&(n++,"%c"===e&&(i=n))}),t.splice(i,0,r)},t.save=function save(e){try{e?t.storage.setItem("debug",e):t.storage.removeItem("debug")}catch(e){}},t.load=function load(){var e;try{e=t.storage.getItem("debug")}catch(e){}!e&&"undefined"!=typeof process&&"env"in process&&(e=process.env.DEBUG);return e},t.useColors=function useColors(){if("undefined"!=typeof window&&window.process&&("renderer"===window.process.type||window.process.__nwjs))return!0;if("undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/))return!1;return"undefined"!=typeof document&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||"undefined"!=typeof window&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||"undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31||"undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/)},t.storage=function localstorage(){try{return localStorage}catch(e){}}(),t.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"],e.exports=r(444)(t),e.exports.formatters.j=function(e){try{return JSON.stringify(e)}catch(e){return"[UnexpectedJSONParseError]: "+e.message}}},function(e,t){var r=1e3,n=60*r,i=60*n,o=24*i,s=7*o,a=365.25*o;function plural(e,t,r,n){var i=t>=1.5*r;return Math.round(e/r)+" "+n+(i?"s":"")}e.exports=function(e,t){t=t||{};var c=typeof e;if("string"===c&&e.length>0)return function parse(e){if((e=String(e)).length>100)return;var t=/^((?:\d+)?\-?\d?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(e);if(!t)return;var c=parseFloat(t[1]);switch((t[2]||"ms").toLowerCase()){case"years":case"year":case"yrs":case"yr":case"y":return c*a;case"weeks":case"week":case"w":return c*s;case"days":case"day":case"d":return c*o;case"hours":case"hour":case"hrs":case"hr":case"h":return c*i;case"minutes":case"minute":case"mins":case"min":case"m":return c*n;case"seconds":case"second":case"secs":case"sec":case"s":return c*r;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return c;default:return}}(e);if("number"===c&&!1===isNaN(e))return t.long?function fmtLong(e){var t=Math.abs(e);if(t>=o)return plural(e,t,o,"day");if(t>=i)return plural(e,t,i,"hour");if(t>=n)return plural(e,t,n,"minute");if(t>=r)return plural(e,t,r,"second");return e+" ms"}(e):function fmtShort(e){var t=Math.abs(e);if(t>=o)return Math.round(e/o)+"d";if(t>=i)return Math.round(e/i)+"h";if(t>=n)return Math.round(e/n)+"m";if(t>=r)return Math.round(e/r)+"s";return e+"ms"}(e);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(e))}},function(e,t,r){"use strict";var n=r(51),i=r(1);t.init=function init(e){e.inspectOpts={};for(var r=Object.keys(t.inspectOpts),n=0;n<r.length;n++)e.inspectOpts[r[n]]=t.inspectOpts[r[n]]},t.log=function log(){return process.stderr.write(i.format.apply(i,arguments)+"\n")},t.formatArgs=function formatArgs(r){var n=this.namespace;if(this.useColors){var i=this.color,o="[3"+(i<8?i:"8;5;"+i),s="  ".concat(o,";1m").concat(n," [0m");r[0]=s+r[0].split("\n").join("\n"+s),r.push(o+"m+"+e.exports.humanize(this.diff)+"[0m")}else r[0]=function getDate(){if(t.inspectOpts.hideDate)return"";return(new Date).toISOString()+" "}()+n+" "+r[0]},t.save=function save(e){e?process.env.DEBUG=e:delete process.env.DEBUG},t.load=function load(){return process.env.DEBUG},t.useColors=function useColors(){return"colors"in t.inspectOpts?Boolean(t.inspectOpts.colors):n.isatty(process.stderr.fd)},t.colors=[6,2,3,4,5,1];try{var o=r(49);o&&(o.stderr||o).level>=2&&(t.colors=[20,21,26,27,32,33,38,39,40,41,42,43,44,45,56,57,62,63,68,69,74,75,76,77,78,79,80,81,92,93,98,99,112,113,128,129,134,135,148,149,160,161,162,163,164,165,166,167,168,169,170,171,172,173,178,179,184,185,196,197,198,199,200,201,202,203,204,205,206,207,208,209,214,215,220,221])}catch(e){}t.inspectOpts=Object.keys(process.env).filter(function(e){return/^debug_/i.test(e)}).reduce(function(e,t){var r=t.substring(6).toLowerCase().replace(/_([a-z])/g,function(e,t){return t.toUpperCase()}),n=process.env[t];return n=!!/^(yes|on|true|enabled)$/i.test(n)||!/^(no|off|false|disabled)$/i.test(n)&&("null"===n?null:Number(n)),e[r]=n,e},{}),e.exports=r(444)(t);var s=e.exports.formatters;s.o=function(e){return this.inspectOpts.colors=this.useColors,i.inspect(e,this.inspectOpts).replace(/\s*\n\s*/g," ")},s.O=function(e){return this.inspectOpts.colors=this.useColors,i.inspect(e,this.inspectOpts)}},function(e,t){var r={}.toString;e.exports=Array.isArray||function(e){return"[object Array]"==r.call(e)}},function(e,t,r){"use strict";var n=r(14).Buffer,i=r(1);e.exports=function(){function BufferList(){!function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,BufferList),this.head=null,this.tail=null,this.length=0}return BufferList.prototype.push=function push(e){var t={data:e,next:null};this.length>0?this.tail.next=t:this.head=t,this.tail=t,++this.length},BufferList.prototype.unshift=function unshift(e){var t={data:e,next:this.head};0===this.length&&(this.tail=t),this.head=t,++this.length},BufferList.prototype.shift=function shift(){if(0!==this.length){var e=this.head.data;return 1===this.length?this.head=this.tail=null:this.head=this.head.next,--this.length,e}},BufferList.prototype.clear=function clear(){this.head=this.tail=null,this.length=0},BufferList.prototype.join=function join(e){if(0===this.length)return"";for(var t=this.head,r=""+t.data;t=t.next;)r+=e+t.data;return r},BufferList.prototype.concat=function concat(e){if(0===this.length)return n.alloc(0);if(1===this.length)return this.head.data;for(var t,r,i,o=n.allocUnsafe(e>>>0),s=this.head,a=0;s;)t=s.data,r=o,i=a,t.copy(r,i),a+=s.data.length,s=s.next;return o},BufferList}(),i&&i.inspect&&i.inspect.custom&&(e.exports.prototype[i.inspect.custom]=function(){var e=i.inspect({length:this.length});return this.constructor.name+" "+e})},function(e,t,r){e.exports=r(1).deprecate},function(e,t,r){"use strict";e.exports=PassThrough;var n=r(451),i=r(90);function PassThrough(e){if(!(this instanceof PassThrough))return new PassThrough(e);n.call(this,e)}i.inherits=r(38),i.inherits(PassThrough,n),PassThrough.prototype._transform=function(e,t,r){r(null,e)}},function(e,t,r){"use strict";e.exports=r(1051)()?Map:r(1052)},function(e,t,r){"use strict";e.exports=function(){var e,t;if("function"!=typeof Map)return!1;try{e=new Map([["raz","one"],["dwa","two"],["trzy","three"]])}catch(e){return!1}return"[object Map]"===String(e)&&(3===e.size&&("function"==typeof e.clear&&("function"==typeof e.delete&&("function"==typeof e.entries&&("function"==typeof e.forEach&&("function"==typeof e.get&&("function"==typeof e.has&&("function"==typeof e.keys&&("function"==typeof e.set&&("function"==typeof e.values&&(!1===(t=e.entries().next()).done&&(!!t.value&&("raz"===t.value[0]&&"one"===t.value[1])))))))))))))}},function(e,t,r){"use strict";var n,i=r(452),o=r(1053),s=r(169),a=r(73),c=r(61),u=r(87),l=r(1071),p=r(81),d=r(459),h=r(1077),f=r(1090),m=r(1093),g=Function.prototype.call,y=Object.defineProperties,v=Object.getPrototypeOf;e.exports=n=function(){var e,t,r,i=arguments[0];if(!(this instanceof n))throw new TypeError("Constructor requires 'new'");return r=m&&s&&Map!==n?s(new Map,v(this)):this,null!=i&&d(i),y(r,{__mapKeysData__:u("c",e=[]),__mapValuesData__:u("c",t=[])}),i?(h(i,function(r){var n=c(r)[0];r=r[1],-1===o.call(e,n)&&(e.push(n),t.push(r))},r),r):r},m&&(s&&s(n,Map),n.prototype=Object.create(Map.prototype,{constructor:u(n)})),l(y(n.prototype,{clear:u(function(){this.__mapKeysData__.length&&(i.call(this.__mapKeysData__),i.call(this.__mapValuesData__),this.emit("_clear"))}),delete:u(function(e){var t=o.call(this.__mapKeysData__,e);return-1!==t&&(this.__mapKeysData__.splice(t,1),this.__mapValuesData__.splice(t,1),this.emit("_delete",t,e),!0)}),entries:u(function(){return new f(this,"key+value")}),forEach:u(function(e){var t,r,n=arguments[1];for(a(e),r=(t=this.entries())._next();void 0!==r;)g.call(e,n,this.__mapValuesData__[r],this.__mapKeysData__[r],this),r=t._next()}),get:u(function(e){var t=o.call(this.__mapKeysData__,e);if(-1!==t)return this.__mapValuesData__[t]}),has:u(function(e){return-1!==o.call(this.__mapKeysData__,e)}),keys:u(function(){return new f(this,"key")}),set:u(function(e,t){var r,n=o.call(this.__mapKeysData__,e);return-1===n&&(n=this.__mapKeysData__.push(e)-1,r=!0),this.__mapValuesData__[n]=t,r&&this.emit("_add",n,e),this}),size:u.gs(function(){return this.__mapKeysData__.length}),values:u(function(){return new f(this,"value")}),toString:u(function(){return"[object Map]"})})),Object.defineProperty(n.prototype,p.iterator,u(function(){return this.entries()})),Object.defineProperty(n.prototype,p.toStringTag,u("c","Map"))},function(e,t,r){"use strict";var n=r(1054),i=r(454),o=r(61),s=Array.prototype.indexOf,a=Object.prototype.hasOwnProperty,c=Math.abs,u=Math.floor;e.exports=function(e){var t,r,l,p;if(!n(e))return s.apply(this,arguments);for(r=i(o(this).length),l=arguments[1],t=l=isNaN(l)?0:l>=0?u(l):i(this.length)-u(c(l));t<r;++t)if(a.call(this,t)&&(p=this[t],n(p)))return t;return-1}},function(e,t,r){"use strict";e.exports=r(1055)()?Number.isNaN:r(1056)},function(e,t,r){"use strict";e.exports=function(){var e=Number.isNaN;return"function"==typeof e&&(!e({})&&e(NaN)&&!e(34))}},function(e,t,r){"use strict";e.exports=function(e){return e!=e}},function(e,t,r){"use strict";var n=r(1058),i=Math.abs,o=Math.floor;e.exports=function(e){return isNaN(e)?0:0!==(e=Number(e))&&isFinite(e)?n(e)*o(i(e)):e}},function(e,t,r){"use strict";e.exports=r(1059)()?Math.sign:r(1060)},function(e,t,r){"use strict";e.exports=function(){var e=Math.sign;return"function"==typeof e&&(1===e(10)&&-1===e(-20))}},function(e,t,r){"use strict";e.exports=function(e){return e=Number(e),isNaN(e)||0===e?e:e>0?1:-1}},function(e,t,r){"use strict";var n=r(104),i={function:!0,object:!0};e.exports=function(e){return n(e)&&i[typeof e]||!1}},function(e,t,r){"use strict";var n,i,o,s,a=Object.create;r(455)()||(n=r(456)),e.exports=n?1!==n.level?a:(i={},o={},s={configurable:!1,enumerable:!1,writable:!0,value:void 0},Object.getOwnPropertyNames(Object.prototype).forEach(function(e){o[e]="__proto__"!==e?s:{configurable:!0,enumerable:!1,writable:!0,value:void 0}}),Object.defineProperties(i,o),Object.defineProperty(n,"nullPolyfill",{configurable:!1,enumerable:!1,writable:!1,value:i}),function(e,t){return a(null===e?i:e,t)}):a},function(e,t,r){"use strict";e.exports=function(){var e,t=Object.assign;return"function"==typeof t&&(t(e={foo:"raz"},{bar:"dwa"},{trzy:"trzy"}),e.foo+e.bar+e.trzy==="razdwatrzy")}},function(e,t,r){"use strict";var n=r(1065),i=r(61),o=Math.max;e.exports=function(e,t){var r,s,a,c=o(arguments.length,2);for(e=Object(i(e)),a=function(n){try{e[n]=t[n]}catch(e){r||(r=e)}},s=1;s<c;++s)t=arguments[s],n(t).forEach(a);if(void 0!==r)throw r;return e}},function(e,t,r){"use strict";e.exports=r(1066)()?Object.keys:r(1067)},function(e,t,r){"use strict";e.exports=function(){try{return Object.keys("primitive"),!0}catch(e){return!1}}},function(e,t,r){"use strict";var n=r(104),i=Object.keys;e.exports=function(e){return i(n(e)?Object(e):e)}},function(e,t,r){"use strict";e.exports=function(e){return"function"==typeof e}},function(e,t,r){"use strict";var n="razdwatrzy";e.exports=function(){return"function"==typeof n.contains&&(!0===n.contains("dwa")&&!1===n.contains("foo"))}},function(e,t,r){"use strict";var n=String.prototype.indexOf;e.exports=function(e){return n.call(this,e,arguments[1])>-1}},function(e,t,r){"use strict";var n,i,o,s,a,c,u,l=r(87),p=r(73),d=Function.prototype.apply,h=Function.prototype.call,f=Object.create,m=Object.defineProperty,g=Object.defineProperties,y=Object.prototype.hasOwnProperty,v={configurable:!0,enumerable:!1,writable:!0};i=function(e,t){var r,i;return p(t),i=this,n.call(this,e,r=function(){o.call(i,e,r),d.call(t,this,arguments)}),r.__eeOnceListener__=t,this},a={on:n=function(e,t){var r;return p(t),y.call(this,"__ee__")?r=this.__ee__:(r=v.value=f(null),m(this,"__ee__",v),v.value=null),r[e]?"object"==typeof r[e]?r[e].push(t):r[e]=[r[e],t]:r[e]=t,this},once:i,off:o=function(e,t){var r,n,i,o;if(p(t),!y.call(this,"__ee__"))return this;if(!(r=this.__ee__)[e])return this;if("object"==typeof(n=r[e]))for(o=0;i=n[o];++o)i!==t&&i.__eeOnceListener__!==t||(2===n.length?r[e]=n[o?0:1]:n.splice(o,1));else n!==t&&n.__eeOnceListener__!==t||delete r[e];return this},emit:s=function(e){var t,r,n,i,o;if(y.call(this,"__ee__")&&(i=this.__ee__[e]))if("object"==typeof i){for(r=arguments.length,o=new Array(r-1),t=1;t<r;++t)o[t-1]=arguments[t];for(i=i.slice(),t=0;n=i[t];++t)d.call(n,this,o)}else switch(arguments.length){case 1:h.call(i,this);break;case 2:h.call(i,this,arguments[1]);break;case 3:h.call(i,this,arguments[1],arguments[2]);break;default:for(r=arguments.length,o=new Array(r-1),t=1;t<r;++t)o[t-1]=arguments[t];d.call(i,this,o)}}},c={on:l(n),once:l(i),off:l(o),emit:l(s)},u=g({},c),e.exports=t=function(e){return null==e?f(u):g(Object(e),c)},t.methods=a},function(e,t,r){"use strict";var n={object:!0,symbol:!0};e.exports=function(){var e;if("function"!=typeof Symbol)return!1;e=Symbol("test symbol");try{String(e)}catch(e){return!1}return!!n[typeof Symbol.iterator]&&(!!n[typeof Symbol.toPrimitive]&&!!n[typeof Symbol.toStringTag])}},function(e,t,r){"use strict";var n,i,o,s,a=r(87),c=r(1074),u=Object.create,l=Object.defineProperties,p=Object.defineProperty,d=Object.prototype,h=u(null);if("function"==typeof Symbol){n=Symbol;try{String(n()),s=!0}catch(e){}}var f,m=(f=u(null),function(e){for(var t,r,n=0;f[e+(n||"")];)++n;return f[e+=n||""]=!0,p(d,t="@@"+e,a.gs(null,function(e){r||(r=!0,p(this,t,a(e)),r=!1)})),t});o=function Symbol(e){if(this instanceof o)throw new TypeError("Symbol is not a constructor");return i(e)},e.exports=i=function Symbol(e){var t;if(this instanceof Symbol)throw new TypeError("Symbol is not a constructor");return s?n(e):(t=u(o.prototype),e=void 0===e?"":String(e),l(t,{__description__:a("",e),__name__:a("",m(e))}))},l(i,{for:a(function(e){return h[e]?h[e]:h[e]=i(String(e))}),keyFor:a(function(e){var t;for(t in c(e),h)if(h[t]===e)return t}),hasInstance:a("",n&&n.hasInstance||i("hasInstance")),isConcatSpreadable:a("",n&&n.isConcatSpreadable||i("isConcatSpreadable")),iterator:a("",n&&n.iterator||i("iterator")),match:a("",n&&n.match||i("match")),replace:a("",n&&n.replace||i("replace")),search:a("",n&&n.search||i("search")),species:a("",n&&n.species||i("species")),split:a("",n&&n.split||i("split")),toPrimitive:a("",n&&n.toPrimitive||i("toPrimitive")),toStringTag:a("",n&&n.toStringTag||i("toStringTag")),unscopables:a("",n&&n.unscopables||i("unscopables"))}),l(o.prototype,{constructor:a(i),toString:a("",function(){return this.__name__})}),l(i.prototype,{toString:a(function(){return"Symbol ("+c(this).__description__+")"}),valueOf:a(function(){return c(this)})}),p(i.prototype,i.toPrimitive,a("",function(){var e=c(this);return"symbol"==typeof e?e:e.toString()})),p(i.prototype,i.toStringTag,a("c","Symbol")),p(o.prototype,i.toStringTag,a("c",i.prototype[i.toStringTag])),p(o.prototype,i.toPrimitive,a("c",i.prototype[i.toPrimitive]))},function(e,t,r){"use strict";var n=r(1075);e.exports=function(e){if(!n(e))throw new TypeError(e+" is not a symbol");return e}},function(e,t,r){"use strict";e.exports=function(e){return!!e&&("symbol"==typeof e||!!e.constructor&&("Symbol"===e.constructor.name&&"Symbol"===e[e.constructor.toStringTag]))}},function(e,t,r){"use strict";var n=r(170),i=r(104),o=r(171),s=r(81).iterator,a=Array.isArray;e.exports=function(e){return!!i(e)&&(!!a(e)||(!!o(e)||(!!n(e)||"function"==typeof e[s])))}},function(e,t,r){"use strict";var n=r(170),i=r(73),o=r(171),s=r(1078),a=Array.isArray,c=Function.prototype.call,u=Array.prototype.some;e.exports=function(e,t){var r,l,p,d,h,f,m,g,y=arguments[2];if(a(e)||n(e)?r="array":o(e)?r="string":e=s(e),i(t),p=function(){d=!0},"array"!==r)if("string"!==r)for(l=e.next();!l.done;){if(c.call(t,y,l.value,p),d)return;l=e.next()}else for(f=e.length,h=0;h<f&&(m=e[h],h+1<f&&(g=m.charCodeAt(0))>=55296&&g<=56319&&(m+=e[++h]),c.call(t,y,m,p),!d);++h);else u.call(e,function(e){return c.call(t,y,e,p),d})}},function(e,t,r){"use strict";var n=r(170),i=r(171),o=r(1079),s=r(1089),a=r(459),c=r(81).iterator;e.exports=function(e){return"function"==typeof a(e)[c]?e[c]():n(e)?new o(e):i(e)?new s(e):new o(e)}},function(e,t,r){"use strict";var n,i=r(169),o=r(458),s=r(87),a=r(81),c=r(248),u=Object.defineProperty;n=e.exports=function(e,t){if(!(this instanceof n))throw new TypeError("Constructor requires 'new'");c.call(this,e),t=t?o.call(t,"key+value")?"key+value":o.call(t,"key")?"key":"value":"value",u(this,"__kind__",s("",t))},i&&i(n,c),delete n.prototype.constructor,n.prototype=Object.create(c.prototype,{_resolve:s(function(e){return"value"===this.__kind__?this.__list__[e]:"key+value"===this.__kind__?[e,this.__list__[e]]:e})}),u(n.prototype,a.toStringTag,s("c","Array Iterator"))},function(e,t,r){"use strict";var n,i=r(1081),o=r(457),s=r(73),a=r(1086),c=r(73),u=r(61),l=Function.prototype.bind,p=Object.defineProperty,d=Object.prototype.hasOwnProperty;n=function(e,t,r){var n,o=u(t)&&c(t.value);return delete(n=i(t)).writable,delete n.value,n.get=function(){return!r.overwriteDefinition&&d.call(this,e)?o:(t.value=l.call(o,r.resolveContext?r.resolveContext(this):this),p(this,e,t),this[e])},n},e.exports=function(e){var t=o(arguments[1]);return null!=t.resolveContext&&s(t.resolveContext),a(e,function(e,r){return n(r,e,t)})}},function(e,t,r){"use strict";var n=r(1082),i=r(247),o=r(61);e.exports=function(e){var t=Object(o(e)),r=arguments[1],s=Object(arguments[2]);if(t!==e&&!r)return t;var a={};return r?n(r,function(t){(s.ensure||t in e)&&(a[t]=e[t])}):i(a,e),a}},function(e,t,r){"use strict";e.exports=r(1083)()?Array.from:r(1084)},function(e,t,r){"use strict";e.exports=function(){var e,t,r=Array.from;return"function"==typeof r&&(t=r(e=["raz","dwa"]),Boolean(t&&t!==e&&"dwa"===t[1]))}},function(e,t,r){"use strict";var n=r(81).iterator,i=r(170),o=r(1085),s=r(454),a=r(73),c=r(61),u=r(104),l=r(171),p=Array.isArray,d=Function.prototype.call,h={configurable:!0,enumerable:!0,writable:!0,value:null},f=Object.defineProperty;e.exports=function(e){var t,r,m,g,y,v,b,_,w,E,S=arguments[1],C=arguments[2];if(e=Object(c(e)),u(S)&&a(S),this&&this!==Array&&o(this))t=this;else{if(!S){if(i(e))return 1!==(y=e.length)?Array.apply(null,e):((g=new Array(1))[0]=e[0],g);if(p(e)){for(g=new Array(y=e.length),r=0;r<y;++r)g[r]=e[r];return g}}g=[]}if(!p(e))if(void 0!==(w=e[n])){for(b=a(w).call(e),t&&(g=new t),_=b.next(),r=0;!_.done;)E=S?d.call(S,C,_.value,r):_.value,t?(h.value=E,f(g,r,h)):g[r]=E,_=b.next(),++r;y=r}else if(l(e)){for(y=e.length,t&&(g=new t),r=0,m=0;r<y;++r)E=e[r],r+1<y&&(v=E.charCodeAt(0))>=55296&&v<=56319&&(E+=e[++r]),E=S?d.call(S,C,E,m):E,t?(h.value=E,f(g,m,h)):g[m]=E,++m;y=m}if(void 0===y)for(y=s(e.length),t&&(g=new t(y)),r=0;r<y;++r)E=S?d.call(S,C,e[r],r):e[r],t?(h.value=E,f(g,r,h)):g[r]=E;return t&&(h.value=null,g.length=y),g}},function(e,t,r){"use strict";var n=Object.prototype.toString,i=n.call(r(453));e.exports=function(e){return"function"==typeof e&&n.call(e)===i}},function(e,t,r){"use strict";var n=r(73),i=r(1087),o=Function.prototype.call;e.exports=function(e,t){var r={},s=arguments[2];return n(t),i(e,function(e,n,i,a){r[n]=o.call(t,s,e,n,i,a)}),r}},function(e,t,r){"use strict";e.exports=r(1088)("forEach")},function(e,t,r){"use strict";var n=r(73),i=r(61),o=Function.prototype.bind,s=Function.prototype.call,a=Object.keys,c=Object.prototype.propertyIsEnumerable;e.exports=function(e,t){return function(r,u){var l,p=arguments[2],d=arguments[3];return r=Object(i(r)),n(u),l=a(r),d&&l.sort("function"==typeof d?o.call(d,r):void 0),"function"!=typeof e&&(e=l[e]),s.call(e,l,function(e,n){return c.call(r,e)?s.call(u,p,r[e],e,r,n):t})}}},function(e,t,r){"use strict";var n,i=r(169),o=r(87),s=r(81),a=r(248),c=Object.defineProperty;n=e.exports=function(e){if(!(this instanceof n))throw new TypeError("Constructor requires 'new'");e=String(e),a.call(this,e),c(this,"__length__",o("",e.length))},i&&i(n,a),delete n.prototype.constructor,n.prototype=Object.create(a.prototype,{_next:o(function(){if(this.__list__)return this.__nextIndex__<this.__length__?this.__nextIndex__++:void this._unBind()}),_resolve:o(function(e){var t,r=this.__list__[e];return this.__nextIndex__===this.__length__?r:(t=r.charCodeAt(0))>=55296&&t<=56319?r+this.__list__[this.__nextIndex__++]:r})}),c(n.prototype,s.toStringTag,o("c","String Iterator"))},function(e,t,r){"use strict";var n,i=r(169),o=r(87),s=r(248),a=r(81).toStringTag,c=r(1091),u=Object.defineProperties,l=s.prototype._unBind;n=e.exports=function(e,t){if(!(this instanceof n))return new n(e,t);s.call(this,e.__mapKeysData__,e),t&&c[t]||(t="key+value"),u(this,{__kind__:o("",t),__values__:o("w",e.__mapValuesData__)})},i&&i(n,s),n.prototype=Object.create(s.prototype,{constructor:o(n),_resolve:o(function(e){return"value"===this.__kind__?this.__values__[e]:"key"===this.__kind__?this.__list__[e]:[this.__list__[e],this.__values__[e]]}),_unBind:o(function(){this.__values__=null,l.call(this)}),toString:o(function(){return"[object Map Iterator]"})}),Object.defineProperty(n.prototype,a,o("c","Map Iterator"))},function(e,t,r){"use strict";e.exports=r(1092)("key","value","key+value")},function(e,t,r){"use strict";var n=Array.prototype.forEach,i=Object.create;e.exports=function(e){var t=i(null);return n.call(arguments,function(e){t[e]=!0}),t}},function(e,t,r){"use strict";e.exports="undefined"!=typeof Map&&"[object Map]"===Object.prototype.toString.call(new Map)},function(e,t,r){"use strict";t.parser=r(1095),t.generate=r(1099),t.writeToStream=r(461)},function(e,t,r){"use strict";var n=r(1096),i=r(38),o=r(5).EventEmitter,s=r(1098),a=r(460);function Parser(){if(!(this instanceof Parser))return new Parser;this._states=["_parseHeader","_parseLength","_parsePayload","_newPacket"],this._resetState()}i(Parser,o),Parser.prototype._resetState=function(){this.packet=new s,this.error=null,this._list=n(),this._stateCounter=0},Parser.prototype.parse=function(e){for(this.error&&this._resetState(),this._list.append(e);(-1!==this.packet.length||this._list.length>0)&&this[this._states[this._stateCounter]]()&&!this.error;)this._stateCounter++,this._stateCounter>=this._states.length&&(this._stateCounter=0);return this._list.length},Parser.prototype._parseHeader=function(){var e=this._list.readUInt8(0);return this.packet.cmd=a.types[e>>a.CMD_SHIFT],this.packet.retain=0!=(e&a.RETAIN_MASK),this.packet.qos=e>>a.QOS_SHIFT&a.QOS_MASK,this.packet.dup=0!=(e&a.DUP_MASK),this._list.consume(1),!0},Parser.prototype._parseLength=function(){for(var e,t=0,r=1,n=0,i=!0;t<5&&(n+=r*((e=this._list.readUInt8(t++))&a.LENGTH_MASK),r*=128,0!=(e&a.LENGTH_FIN_MASK));)if(this._list.length<=t){i=!1;break}return i&&(this.packet.length=n,this._list.consume(t)),i},Parser.prototype._parsePayload=function(){var e=!1;if(0===this.packet.length||this._list.length>=this.packet.length){switch(this._pos=0,this.packet.cmd){case"connect":this._parseConnect();break;case"connack":this._parseConnack();break;case"publish":this._parsePublish();break;case"puback":case"pubrec":case"pubrel":case"pubcomp":this._parseMessageId();break;case"subscribe":this._parseSubscribe();break;case"suback":this._parseSuback();break;case"unsubscribe":this._parseUnsubscribe();break;case"unsuback":this._parseUnsuback();break;case"pingreq":case"pingresp":case"disconnect":break;default:this._emitError(new Error("Not supported"))}e=!0}return e},Parser.prototype._parseConnect=function(){var e,t,r,n,i,o,s={},c=this.packet;if(null===(e=this._parseString()))return this._emitError(new Error("Cannot parse protocolId"));if("MQTT"!==e&&"MQIsdp"!==e)return this._emitError(new Error("Invalid protocolId"));if(c.protocolId=e,this._pos>=this._list.length)return this._emitError(new Error("Packet too short"));if(c.protocolVersion=this._list.readUInt8(this._pos),3!==c.protocolVersion&&4!==c.protocolVersion)return this._emitError(new Error("Invalid protocol version"));if(this._pos++,this._pos>=this._list.length)return this._emitError(new Error("Packet too short"));if(s.username=this._list.readUInt8(this._pos)&a.USERNAME_MASK,s.password=this._list.readUInt8(this._pos)&a.PASSWORD_MASK,s.will=this._list.readUInt8(this._pos)&a.WILL_FLAG_MASK,s.will&&(c.will={},c.will.retain=0!=(this._list.readUInt8(this._pos)&a.WILL_RETAIN_MASK),c.will.qos=(this._list.readUInt8(this._pos)&a.WILL_QOS_MASK)>>a.WILL_QOS_SHIFT),c.clean=0!=(this._list.readUInt8(this._pos)&a.CLEAN_SESSION_MASK),this._pos++,c.keepalive=this._parseNum(),-1===c.keepalive)return this._emitError(new Error("Packet too short"));if(null===(t=this._parseString()))return this._emitError(new Error("Packet too short"));if(c.clientId=t,s.will){if(null===(r=this._parseString()))return this._emitError(new Error("Cannot parse will topic"));if(c.will.topic=r,null===(n=this._parseBuffer()))return this._emitError(new Error("Cannot parse will payload"));c.will.payload=n}if(s.username){if(null===(o=this._parseString()))return this._emitError(new Error("Cannot parse username"));c.username=o}if(s.password){if(null===(i=this._parseBuffer()))return this._emitError(new Error("Cannot parse password"));c.password=i}return c},Parser.prototype._parseConnack=function(){var e=this.packet;return this._list.length<2?null:(e.sessionPresent=!!(this._list.readUInt8(this._pos++)&a.SESSIONPRESENT_MASK),e.returnCode=this._list.readUInt8(this._pos),-1===e.returnCode?this._emitError(new Error("Cannot parse return code")):void 0)},Parser.prototype._parsePublish=function(){var e=this.packet;if(e.topic=this._parseString(),null===e.topic)return this._emitError(new Error("Cannot parse topic"));e.qos>0&&!this._parseMessageId()||(e.payload=this._list.slice(this._pos,e.length))},Parser.prototype._parseSubscribe=function(){var e,t,r=this.packet;if(1!==r.qos)return this._emitError(new Error("Wrong subscribe header"));if(r.subscriptions=[],this._parseMessageId())for(;this._pos<r.length;){if(null===(e=this._parseString()))return this._emitError(new Error("Cannot parse topic"));if(this._pos>=r.length)return this._emitError(new Error("Malformed Subscribe Payload"));t=this._list.readUInt8(this._pos++),r.subscriptions.push({topic:e,qos:t})}},Parser.prototype._parseSuback=function(){if(this.packet.granted=[],this._parseMessageId())for(;this._pos<this.packet.length;)this.packet.granted.push(this._list.readUInt8(this._pos++))},Parser.prototype._parseUnsubscribe=function(){var e=this.packet;if(e.unsubscriptions=[],this._parseMessageId())for(;this._pos<e.length;){var t;if(null===(t=this._parseString()))return this._emitError(new Error("Cannot parse topic"));e.unsubscriptions.push(t)}},Parser.prototype._parseUnsuback=function(){if(!this._parseMessageId())return this._emitError(new Error("Cannot parse messageId"))},Parser.prototype._parseMessageId=function(){var e=this.packet;return e.messageId=this._parseNum(),null!==e.messageId||(this._emitError(new Error("Cannot parse messageId")),!1)},Parser.prototype._parseString=function(e){var t,r=this._parseNum(),n=r+this._pos;return-1===r||n>this._list.length||n>this.packet.length?null:(t=this._list.toString("utf8",this._pos,n),this._pos+=r,t)},Parser.prototype._parseBuffer=function(){var e,t=this._parseNum(),r=t+this._pos;return-1===t||r>this._list.length||r>this.packet.length?null:(e=this._list.slice(this._pos,r),this._pos+=t,e)},Parser.prototype._parseNum=function(){if(this._list.length-this._pos<2)return-1;var e=this._list.readUInt16BE(this._pos);return this._pos+=2,e},Parser.prototype._newPacket=function(){return this.packet&&(this._list.consume(this.packet.length),this.emit("packet",this.packet)),this.packet=new s,!0},Parser.prototype._emitError=function(e){this.error=e,this.emit("error",e)},e.exports=Parser},function(e,t,r){var n=r(1097),i=r(1),o=r(14).Buffer;function BufferList(e){if(!(this instanceof BufferList))return new BufferList(e);if(this._bufs=[],this.length=0,"function"==typeof e){this._callback=e;var t=function piper(e){this._callback&&(this._callback(e),this._callback=null)}.bind(this);this.on("pipe",function onPipe(e){e.on("error",t)}),this.on("unpipe",function onUnpipe(e){e.removeListener("error",t)})}else this.append(e);n.call(this)}i.inherits(BufferList,n),BufferList.prototype._offset=function _offset(e){var t,r=0,n=0;if(0===e)return[0,0];for(;n<this._bufs.length;n++){if(e<(t=r+this._bufs[n].length)||n==this._bufs.length-1)return[n,e-r];r=t}},BufferList.prototype.append=function append(e){var t=0;if(o.isBuffer(e))this._appendBuffer(e);else if(Array.isArray(e))for(;t<e.length;t++)this.append(e[t]);else if(e instanceof BufferList)for(;t<e._bufs.length;t++)this.append(e._bufs[t]);else null!=e&&("number"==typeof e&&(e=e.toString()),this._appendBuffer(o.from(e)));return this},BufferList.prototype._appendBuffer=function appendBuffer(e){this._bufs.push(e),this.length+=e.length},BufferList.prototype._write=function _write(e,t,r){this._appendBuffer(e),"function"==typeof r&&r()},BufferList.prototype._read=function _read(e){if(!this.length)return this.push(null);e=Math.min(e,this.length),this.push(this.slice(0,e)),this.consume(e)},BufferList.prototype.end=function end(e){n.prototype.end.call(this,e),this._callback&&(this._callback(null,this.slice()),this._callback=null)},BufferList.prototype.get=function get(e){return this.slice(e,e+1)[0]},BufferList.prototype.slice=function slice(e,t){return"number"==typeof e&&e<0&&(e+=this.length),"number"==typeof t&&t<0&&(t+=this.length),this.copy(null,0,e,t)},BufferList.prototype.copy=function copy(e,t,r,n){if(("number"!=typeof r||r<0)&&(r=0),("number"!=typeof n||n>this.length)&&(n=this.length),r>=this.length)return e||o.alloc(0);if(n<=0)return e||o.alloc(0);var i,s,copy=!!e,a=this._offset(r),c=n-r,u=c,l=copy&&t||0,p=a[1];if(0===r&&n==this.length){if(!copy)return 1===this._bufs.length?this._bufs[0]:o.concat(this._bufs,this.length);for(s=0;s<this._bufs.length;s++)this._bufs[s].copy(e,l),l+=this._bufs[s].length;return e}if(u<=this._bufs[a[0]].length-p)return copy?this._bufs[a[0]].copy(e,t,p,p+u):this._bufs[a[0]].slice(p,p+u);for(copy||(e=o.allocUnsafe(c)),s=a[0];s<this._bufs.length;s++){if(!(u>(i=this._bufs[s].length-p))){this._bufs[s].copy(e,l,p,p+u);break}this._bufs[s].copy(e,l,p),l+=i,u-=i,p&&(p=0)}return e},BufferList.prototype.shallowSlice=function shallowSlice(e,t){e=e||0,t=t||this.length,e<0&&(e+=this.length),t<0&&(t+=this.length);var r=this._offset(e),n=this._offset(t),i=this._bufs.slice(r[0],n[0]+1);return 0==n[1]?i.pop():i[i.length-1]=i[i.length-1].slice(0,n[1]),0!=r[1]&&(i[0]=i[0].slice(r[1])),new BufferList(i)},BufferList.prototype.toString=function toString(e,t,r){return this.slice(t,r).toString(e)},BufferList.prototype.consume=function consume(e){for(;this._bufs.length;){if(!(e>=this._bufs[0].length)){this._bufs[0]=this._bufs[0].slice(e),this.length-=e;break}e-=this._bufs[0].length,this.length-=this._bufs[0].length,this._bufs.shift()}return this},BufferList.prototype.duplicate=function duplicate(){for(var e=0,t=new BufferList;e<this._bufs.length;e++)t.append(this._bufs[e]);return t},BufferList.prototype.destroy=function destroy(){this._bufs.length=0,this.length=0,this.push(null)},function(){var e={readDoubleBE:8,readDoubleLE:8,readFloatBE:4,readFloatLE:4,readInt32BE:4,readInt32LE:4,readUInt32BE:4,readUInt32LE:4,readInt16BE:2,readInt16LE:2,readUInt16BE:2,readUInt16LE:2,readInt8:1,readUInt8:1};for(var t in e)!function(t){BufferList.prototype[t]=function(r){return this.slice(r,r+e[t])[t](0)}}(t)}(),e.exports=BufferList},function(e,t,r){e.exports=r(55).Duplex},function(e,t){e.exports=function Packet(){this.cmd=null,this.retain=!1,this.qos=0,this.dup=!1,this.length=-1,this.topic=null,this.payload=null}},function(e,t,r){"use strict";var n=r(14).Buffer,i=r(461),o=r(5).EventEmitter;function Accumulator(){this._array=new Array(20),this._i=0}r(38)(Accumulator,o),Accumulator.prototype.write=function(e){return this._array[this._i++]=e,!0},Accumulator.prototype.concat=function(){var e,t,r=0,i=new Array(this._array.length),o=this._array,s=0;for(e=0;e<o.length&&void 0!==o[e];e++)"string"!=typeof o[e]?i[e]=o[e].length:i[e]=n.byteLength(o[e]),r+=i[e];for(t=n.allocUnsafe(r),e=0;e<o.length&&void 0!==o[e];e++)"string"!=typeof o[e]?(o[e].copy(t,s),s+=i[e]):(t.write(o[e],s),s+=i[e]);return t},e.exports=function generate(e){var t=new Accumulator;return i(e,t),t.concat()}},function(e,t,r){"use strict";var n=r(14).Buffer,i=65536,o={};function generateBuffer(e){var t=n.allocUnsafe(2);return t.writeUInt8(e>>8,0),t.writeUInt8(255&e,1),t}e.exports={cache:o,generateCache:function generateCache(){for(var e=0;e<i;e++)o[e]=generateBuffer(e)},generateNumber:generateBuffer}},function(e,t,r){"use strict";function ReInterval(e,t,r){var n=this;this._callback=e,this._args=r,this._interval=setInterval(e,t,this._args),this.reschedule=function(e){e||(e=n._interval),n._interval&&clearInterval(n._interval),n._interval=setInterval(n._callback,e,n._args)},this.clear=function(){n._interval&&(clearInterval(n._interval),n._interval=void 0)},this.destroy=function(){n._interval&&clearInterval(n._interval),n._callback=void 0,n._interval=void 0,n._args=void 0}}e.exports=function reInterval(){if("function"!=typeof arguments[0])throw new Error("callback needed");if("number"!=typeof arguments[1])throw new Error("interval needed");var e;if(arguments.length>0){e=new Array(arguments.length-2);for(var t=0;t<e.length;t++)e[t]=arguments[t+2]}return new ReInterval(arguments[0],arguments[1],e)}},function(e,t,r){"use strict";function validateTopic(e){for(var t=e.split("/"),r=0;r<t.length;r++)if("+"!==t[r]){if("#"===t[r])return r===t.length-1;if(-1!==t[r].indexOf("+")||-1!==t[r].indexOf("#"))return!1}return!0}e.exports={validateTopics:function validateTopics(e){if(0===e.length)return"empty_topic_list";for(var t=0;t<e.length;t++)if(!validateTopic(e[t]))return e[t];return null}}},function(e,t,r){"use strict";var n=r(445),i=r(246),o=r(7),s=r(102),a={};function connect(e,t){if("object"!=typeof e||t||(t=e,e=null),t=t||{},e){var r=o.parse(e,!0);if(null!=r.port&&(r.port=Number(r.port)),null===(t=s(r,t)).protocol)throw new Error("Missing protocol");t.protocol=t.protocol.replace(/:$/,"")}if(function parseAuthOptions(e){var t;e.auth&&((t=e.auth.match(/^(.+):(.+)$/))?(e.username=t[1],e.password=t[2]):e.username=e.auth)}(t),t.query&&"string"==typeof t.query.clientId&&(t.clientId=t.query.clientId),t.cert&&t.key){if(!t.protocol)throw new Error("Missing secure protocol key");if(-1===["mqtts","wss","wxs"].indexOf(t.protocol))switch(t.protocol){case"mqtt":t.protocol="mqtts";break;case"ws":t.protocol="wss";break;case"wx":t.protocol="wxs";break;default:throw new Error('Unknown protocol for secure connection: "'+t.protocol+'"!')}}if(!a[t.protocol]){var i=-1!==["mqtts","wss"].indexOf(t.protocol);t.protocol=["mqtt","mqtts","ws","wss","wx","wxs"].filter(function(e,t){return(!i||t%2!=0)&&"function"==typeof a[e]})[0]}if(!1===t.clean&&!t.clientId)throw new Error("Missing clientId for unclean clients");return t.protocol&&(t.defaultProtocol=t.protocol),new n(function wrapper(e){return t.servers&&(e._reconnectCount&&e._reconnectCount!==t.servers.length||(e._reconnectCount=0),t.host=t.servers[e._reconnectCount].host,t.port=t.servers[e._reconnectCount].port,t.protocol=t.servers[e._reconnectCount].protocol?t.servers[e._reconnectCount].protocol:t.defaultProtocol,t.hostname=t.host,e._reconnectCount++),a[t.protocol](e,t)},t)}"browser"!==process.title?(a.mqtt=r(462),a.tcp=r(462),a.ssl=r(249),a.tls=r(249),a.mqtts=r(249)):(a.wx=r(463),a.wxs=r(463)),a.ws=r(474),a.wss=r(474),e.exports=connect,e.exports.connect=connect,e.exports.MqttClient=n,e.exports.Store=i},function(e,t,r){"use strict";var n=r(465).Server,i=r(472);class Server extends n{constructor(e,t){super(e);var r=!1;this.on("newListener",function(t){r||"stream"!==t||(r=!0,this.on("connection",function(t,r){this.emit("stream",i(t,e),r)}))}),t&&this.on("stream",t)}}e.exports.Server=Server,e.exports.createServer=function(e,t){return new Server(e,t)}},function(e,t,r){"use strict";class Event{constructor(e,t){this.target=t,this.type=e}}class MessageEvent extends Event{constructor(e,t){super("message",t),this.data=e}}class CloseEvent extends Event{constructor(e,t,r){super("close",r),this.wasClean=r._closeFrameReceived&&r._closeFrameSent,this.reason=t,this.code=e}}class OpenEvent extends Event{constructor(e){super("open",e)}}const n={addEventListener(e,t){function onMessage(e){t.call(this,new MessageEvent(e,this))}function onClose(e,r){t.call(this,new CloseEvent(e,r,this))}function onError(e){e.type="error",e.target=this,t.call(this,e)}function onOpen(){t.call(this,new OpenEvent(this))}"function"==typeof t&&("message"===e?(onMessage._listener=t,this.on(e,onMessage)):"close"===e?(onClose._listener=t,this.on(e,onClose)):"error"===e?(onError._listener=t,this.on(e,onError)):"open"===e?(onOpen._listener=t,this.on(e,onOpen)):this.on(e,t))},removeEventListener(e,t){const r=this.listeners(e);for(var n=0;n<r.length;n++)r[n]!==t&&r[n]._listener!==t||this.removeListener(e,r[n])}};e.exports=n},function(e,t,r){"use strict";
/*!
 * ws: a node.js websocket client
 * Copyright(c) 2011 Einar Otto Stangvik <einaros@gmail.com>
 * MIT Licensed
 */try{const t=r(371);e.exports="object"==typeof t?t.Validation.isValidUTF8:t}catch(t){e.exports=(()=>!0)}},function(e,t,r){"use strict";
/*!
 * ws: a node.js websocket client
 * Copyright(c) 2011 Einar Otto Stangvik <einaros@gmail.com>
 * MIT Licensed
 */const n=r(14),i=r(5),o=r(12),s=r(467),a=r(23),c=r(7),u=r(173),l=r(468),p=r(174),d=r(466),h=n.Buffer;function socketError(){this.destroy()}function abortConnection(e,t,r){e.writable&&(r=r||a.STATUS_CODES[t],e.write(`HTTP/1.1 ${t} ${a.STATUS_CODES[t]}\r\n`+"Connection: close\r\nContent-type: text/html\r\n"+`Content-Length: ${h.byteLength(r)}\r\n`+"\r\n"+r)),e.removeListener("error",socketError),e.destroy()}e.exports=class WebSocketServer extends i{constructor(e,t){if(super(),null==(e=Object.assign({maxPayload:104857600,perMessageDeflate:!1,handleProtocols:null,clientTracking:!0,verifyClient:null,noServer:!1,backlog:null,server:null,host:null,path:null,port:null},e)).port&&!e.server&&!e.noServer)throw new TypeError("missing or invalid options");null!=e.port?(this._server=a.createServer((e,t)=>{const r=a.STATUS_CODES[426];t.writeHead(426,{"Content-Length":r.length,"Content-Type":"text/plain"}),t.end(r)}),this._server.listen(e.port,e.host,e.backlog,t)):e.server&&(this._server=e.server),this._server&&(this._ultron=new s(this._server),this._ultron.on("listening",()=>this.emit("listening")),this._ultron.on("error",e=>this.emit("error",e)),this._ultron.on("upgrade",(e,t,r)=>{this.handleUpgrade(e,t,r,t=>{this.emit("connection",t,e)})})),!0===e.perMessageDeflate&&(e.perMessageDeflate={}),e.clientTracking&&(this.clients=new Set),this.options=e}close(e){if(this.clients)for(const e of this.clients)e.terminate();const t=this._server;if(t&&(this._ultron.destroy(),this._ultron=this._server=null,null!=this.options.port))return t.close(e);e&&e()}shouldHandle(e){return!this.options.path||c.parse(e.url).pathname===this.options.path}handleUpgrade(e,t,r,n){t.on("error",socketError);const i=+e.headers["sec-websocket-version"],o={};if("GET"!==e.method||"websocket"!==e.headers.upgrade.toLowerCase()||!e.headers["sec-websocket-key"]||8!==i&&13!==i||!this.shouldHandle(e))return abortConnection(t,400);if(this.options.perMessageDeflate){const r=new u(this.options.perMessageDeflate,!0,this.options.maxPayload);try{const n=l.parse(e.headers["sec-websocket-extensions"]);n[u.extensionName]&&(r.accept(n[u.extensionName]),o[u.extensionName]=r)}catch(e){return abortConnection(t,400)}}var s=(e.headers["sec-websocket-protocol"]||"").split(/, */);if(this.options.handleProtocols){if(!1===(s=this.options.handleProtocols(s,e)))return abortConnection(t,401)}else s=s[0];if(this.options.verifyClient){const a={origin:e.headers[`${8===i?"sec-websocket-origin":"origin"}`],secure:!(!e.connection.authorized&&!e.connection.encrypted),req:e};if(2===this.options.verifyClient.length)return void this.options.verifyClient(a,(a,c,u)=>{if(!a)return abortConnection(t,c||401,u);this.completeUpgrade(s,o,i,e,t,r,n)});if(!this.options.verifyClient(a))return abortConnection(t,401)}this.completeUpgrade(s,o,i,e,t,r,n)}completeUpgrade(e,t,r,n,i,s,a){if(!i.readable||!i.writable)return i.destroy();const c=["HTTP/1.1 101 Switching Protocols","Upgrade: websocket","Connection: Upgrade",`Sec-WebSocket-Accept: ${o.createHash("sha1").update(n.headers["sec-websocket-key"]+p.GUID,"binary").digest("base64")}`];if(e&&c.push(`Sec-WebSocket-Protocol: ${e}`),t[u.extensionName]){const e=t[u.extensionName].params,r=l.format({[u.extensionName]:[e]});c.push(`Sec-WebSocket-Extensions: ${r}`)}this.emit("headers",c,n),i.write(c.concat("\r\n").join("\r\n"));const h=new d([i,s],null,{maxPayload:this.options.maxPayload,protocolVersion:r,extensions:t,protocol:e});this.clients&&(this.clients.add(h),h.on("close",()=>this.clients.delete(h))),i.removeListener("error",socketError),a(h)}}},function(e,t){e.exports=function shift(e){var t=e._readableState;return t?t.objectMode?e.read():e.read(function getStateLength(e){return e.buffer.length?e.buffer.head?e.buffer.head.data.length:e.buffer[0].length:e.length}(t)):null}},function(e,t,r){"use strict";var n=r(1110);function Command(e,t){this.string=e,this.parts=e.split(" "),this.length=this.parts.length,this.func=t,this.parts.forEach(function(e){if(e.length<3)throw new Error("command words must be at least 3 chars: "+command)})}function CommandMatch(e,t){this.cmd=e,this.distances=e.parts.map(function(e,r){return void 0!==t[r]?n(e,t[r]):void 0}).filter(function(t,r){return void 0!==t&&t<e.parts[r].length-2}),this.partsNotMatched=e.length-this.distances.length,this.inputNotMatched=t.length-this.distances.length,this.totalDistance=this.distances.reduce(function(e,t){return e+t},0)}Command.prototype.call=function call(e){this.func(e.slice(this.length))},Command.prototype.match=function match(e){return new CommandMatch(this,e)},e.exports=function commist(){var e=[];function lookup(t){return"string"==typeof t&&(t=t.split(" ")),e.map(function(e){return e.match(t)}).filter(function(e){return 0===e.partsNotMatched}).sort(function(e,t){return e.inputNotMatched>t.inputNotMatched?1:e.inputNotMatched===t.inputNotMatched&&e.totalDistance>t.totalDistance?1:-1}).map(function(e){return e.cmd})}return{register:function register(t,r){return lookup(t).forEach(function(e){if(e.string===t)throw new Error("command already registered: "+t)}),e.push(new Command(t,r)),this},parse:function parse(e){var t=lookup(e);return t.length>0?(t[0].call(e),null):e},lookup:lookup}}},function(e,t,r){"use strict";var n=[],i=[];e.exports=function(e,t){if(e===t)return 0;var r,o,s,a,c=e.length,u=t.length;if(0===c)return u;if(0===u)return c;for(var l=0,p=0;l<c;)i[l]=e.charCodeAt(l),n[l]=++l;for(;p<u;)for(r=t.charCodeAt(p),s=p++,o=p,l=0;l<c;l++)a=r===i[l]?s:s+1,s=n[l],o=n[l]=s>o?a>o?o+1:a:a>s?s+1:a;return o}},function(e,t,r){"use strict";var n=r(1112),i=r(1113),o=r(1119),s=r(475),a=r(39),c=r(1121);function toGlob(e){return e.glob}e.exports=function globStream(e,t){t||(t={});var r=a({},t),u=r.ignore;r.cwd="string"==typeof r.cwd?r.cwd:process.cwd(),r.dot="boolean"==typeof r.dot&&r.dot,r.silent="boolean"!=typeof r.silent||r.silent,r.cwdbase="boolean"==typeof r.cwdbase&&r.cwdbase,r.uniqueBy="string"==typeof r.uniqueBy||"function"==typeof r.uniqueBy?r.uniqueBy:"path",r.cwdbase&&(r.base=r.cwd),"string"==typeof u&&(u=[u]),Array.isArray(u)||(u=[]),Array.isArray(e)||(e=[e]);var l=[],p=[];if(e.forEach(function sortGlobs(e,t){if("string"!=typeof e)throw new Error("Invalid glob at index "+t);var r=s(e);(r.negated?p:l).push({index:t,glob:r.pattern})}),0===l.length)throw new Error("Missing positive glob");var d=l.map(function streamFromPositive(e){var t=p.filter(function indexGreaterThan(e){return function(t){return t.index>e}}(e.index)).map(toGlob).concat(u);return new c(e.glob,t,r)}),h=new n(d),f=i(r.uniqueBy);return o.obj(h,f)}},function(e,t,r){var n=r(55);function OrderedStreams(e,t){if(!(this instanceof OrderedStreams))return new OrderedStreams(e,t);if(e=e||[],(t=t||{}).objectMode=!0,n.call(this,t),Array.isArray(e)||(e=[e]),!e.length)return this.push(null);var r=function addStream(e,t){if(!function isReadable(e){return"function"==typeof e.pipe&&!!e.readable&&"function"==typeof e._read&&!!e._readableState}(t))throw new Error("All input streams must be readable");var r=this;t._buffer=[],t.on("readable",function(){for(var n=t.read();n;)this===e[0]?r.push(n):this._buffer.push(n),n=t.read()}),t.on("end",function(){for(var t=e[0];t&&t._readableState.ended;t=e[0]){for(;t._buffer.length;)r.push(t._buffer.shift());e.shift()}e.length||r.push(null)}),t.on("error",this.emit.bind(this,"error")),e.push(t)}.bind(this,[]);e.forEach(function(e){Array.isArray(e)?e.forEach(r):r(e)})}r(1).inherits(OrderedStreams,n),OrderedStreams.prototype._read=function(){},e.exports=OrderedStreams},function(e,t,r){"use strict";var n,i=r(1114).obj,o=r(1115);n="function"==typeof global.Set?global.Set:function(){this.keys=[],this.has=function(e){return-1!==this.keys.indexOf(e)},this.add=function(e){this.keys.push(e)}},e.exports=function unique(e,t){t=t||new n;var r=o;"string"==typeof e?r=function prop(e){return function(t){return t[e]}}(e):"function"==typeof e&&(r=e);return i(function(e){var n=r(e);return!t.has(n)&&(t.add(n),!0)})}},function(e,t,r){"use strict";e.exports=make,e.exports.ctor=ctor,e.exports.objCtor=function objCtor(e,t){"function"==typeof e&&(t=e,e={});return ctor(e=i({objectMode:!0,highWaterMark:16},e),t)},e.exports.obj=function obj(e,t){"function"==typeof e&&(t=e,e={});return make(e=i({objectMode:!0,highWaterMark:16},e),t)};var n=r(252),i=r(102);function ctor(e,t){"function"==typeof e&&(t=e,e={});var r=n.ctor(e,function(e,r,n){return this.options.wantStrings&&(e=e.toString()),t.call(this,e,this._index++)&&this.push(e),n()});return r.prototype._index=0,r}function make(e,t){return ctor(e,t)()}},function(e,t,r){var n="undefined"!=typeof JSON?JSON:r(1116);e.exports=function(e,t){t||(t={}),"function"==typeof t&&(t={cmp:t});var r=t.space||"";"number"==typeof r&&(r=Array(r+1).join(" "));var s,a="boolean"==typeof t.cycles&&t.cycles,c=t.replacer||function(e,t){return t},u=t.cmp&&(s=t.cmp,function(e){return function(t,r){var n={key:t,value:e[t]},i={key:r,value:e[r]};return s(n,i)}}),l=[];return function stringify(e,t,s,p){var d=r?"\n"+new Array(p+1).join(r):"",h=r?": ":":";if(s&&s.toJSON&&"function"==typeof s.toJSON&&(s=s.toJSON()),void 0!==(s=c.call(e,t,s))){if("object"!=typeof s||null===s)return n.stringify(s);if(i(s)){for(var f=[],m=0;m<s.length;m++){var g=stringify(s,m,s[m],p+1)||n.stringify(null);f.push(d+r+g)}return"["+f.join(",")+d+"]"}if(-1!==l.indexOf(s)){if(a)return n.stringify("__cycle__");throw new TypeError("Converting circular structure to JSON")}l.push(s);var y=o(s).sort(u&&u(s));for(f=[],m=0;m<y.length;m++){var v=stringify(s,t=y[m],s[t],p+1);if(v){var b=n.stringify(t)+h+v;f.push(d+r+b)}}return l.splice(l.indexOf(s),1),"{"+f.join(",")+d+"}"}}({"":e},"",e,0)};var i=Array.isArray||function(e){return"[object Array]"==={}.toString.call(e)},o=Object.keys||function(e){var t=Object.prototype.hasOwnProperty||function(){return!0},r=[];for(var n in e)t.call(e,n)&&r.push(n);return r}},function(e,t,r){t.parse=r(1117),t.stringify=r(1118)},function(e,t){var r,n,i,o,s={'"':'"',"\\":"\\","/":"/",b:"\b",f:"\f",n:"\n",r:"\r",t:"\t"},a=function(e){throw{name:"SyntaxError",message:e,at:r,text:i}},c=function(e){return e&&e!==n&&a("Expected '"+e+"' instead of '"+n+"'"),n=i.charAt(r),r+=1,n},u=function(){var e,t="";for("-"===n&&(t="-",c("-"));n>="0"&&n<="9";)t+=n,c();if("."===n)for(t+=".";c()&&n>="0"&&n<="9";)t+=n;if("e"===n||"E"===n)for(t+=n,c(),"-"!==n&&"+"!==n||(t+=n,c());n>="0"&&n<="9";)t+=n,c();if(e=+t,isFinite(e))return e;a("Bad number")},l=function(){var e,t,r,i="";if('"'===n)for(;c();){if('"'===n)return c(),i;if("\\"===n)if(c(),"u"===n){for(r=0,t=0;t<4&&(e=parseInt(c(),16),isFinite(e));t+=1)r=16*r+e;i+=String.fromCharCode(r)}else{if("string"!=typeof s[n])break;i+=s[n]}else i+=n}a("Bad string")},p=function(){for(;n&&n<=" ";)c()};o=function(){switch(p(),n){case"{":return function(){var e,t={};if("{"===n){if(c("{"),p(),"}"===n)return c("}"),t;for(;n;){if(e=l(),p(),c(":"),Object.hasOwnProperty.call(t,e)&&a('Duplicate key "'+e+'"'),t[e]=o(),p(),"}"===n)return c("}"),t;c(","),p()}}a("Bad object")}();case"[":return function(){var e=[];if("["===n){if(c("["),p(),"]"===n)return c("]"),e;for(;n;){if(e.push(o()),p(),"]"===n)return c("]"),e;c(","),p()}}a("Bad array")}();case'"':return l();case"-":return u();default:return n>="0"&&n<="9"?u():function(){switch(n){case"t":return c("t"),c("r"),c("u"),c("e"),!0;case"f":return c("f"),c("a"),c("l"),c("s"),c("e"),!1;case"n":return c("n"),c("u"),c("l"),c("l"),null}a("Unexpected '"+n+"'")}()}},e.exports=function(e,t){var s;return i=e,r=0,n=" ",s=o(),p(),n&&a("Syntax error"),"function"==typeof t?function walk(e,r){var n,i,o=e[r];if(o&&"object"==typeof o)for(n in o)Object.prototype.hasOwnProperty.call(o,n)&&(void 0!==(i=walk(o,n))?o[n]=i:delete o[n]);return t.call(e,r,o)}({"":s},""):s}},function(e,t){var r,n,i,o=/[\\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,s={"\b":"\\b","\t":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"};function quote(e){return o.lastIndex=0,o.test(e)?'"'+e.replace(o,function(e){var t=s[e];return"string"==typeof t?t:"\\u"+("0000"+e.charCodeAt(0).toString(16)).slice(-4)})+'"':'"'+e+'"'}e.exports=function(e,t,o){var s;if(r="",n="","number"==typeof o)for(s=0;s<o;s+=1)n+=" ";else"string"==typeof o&&(n=o);if(i=t,t&&"function"!=typeof t&&("object"!=typeof t||"number"!=typeof t.length))throw new Error("JSON.stringify");return function str(e,t){var o,s,a,c,u,l=r,p=t[e];switch(p&&"object"==typeof p&&"function"==typeof p.toJSON&&(p=p.toJSON(e)),"function"==typeof i&&(p=i.call(t,e,p)),typeof p){case"string":return quote(p);case"number":return isFinite(p)?String(p):"null";case"boolean":case"null":return String(p);case"object":if(!p)return"null";if(r+=n,u=[],"[object Array]"===Object.prototype.toString.apply(p)){for(c=p.length,o=0;o<c;o+=1)u[o]=str(o,p)||"null";return a=0===u.length?"[]":r?"[\n"+r+u.join(",\n"+r)+"\n"+l+"]":"["+u.join(",")+"]",r=l,a}if(i&&"object"==typeof i)for(c=i.length,o=0;o<c;o+=1)"string"==typeof(s=i[o])&&(a=str(s,p))&&u.push(quote(s)+(r?": ":":")+a);else for(s in p)Object.prototype.hasOwnProperty.call(p,s)&&(a=str(s,p))&&u.push(quote(s)+(r?": ":":")+a);return a=0===u.length?"{}":r?"{\n"+r+u.join(",\n"+r)+"\n"+l+"}":"{"+u.join(",")+"}",r=l,a}}("",{"":e})}},function(e,t,r){var n=r(1120),i=r(38),o=r(473),s=function(e){return e.length?Array.isArray(e[0])?e[0]:Array.prototype.slice.call(e):[]},a=function(e){var t=function(){var r=s(arguments);if(!(this instanceof t))return new t(r);o.call(this,null,null,e),r.length&&this.setPipeline(r)};return i(t,o),t.prototype.setPipeline=function(){var e=s(arguments),t=this,r=!1,i=e[0],o=e[e.length-1];o=o.readable?o:null,i=i.writable?i:null;var a=function(){e[0].emit("error",new Error("stream was destroyed"))};if(this.on("close",a),this.on("prefinish",function(){r||t.cork()}),n(e,function(e){if(t.removeListener("close",a),e)return t.destroy("premature close"===e.message?null:e);r=!0,!1===t._autoDestroy&&(t._autoDestroy=!0),t.uncork()}),this.destroyed)return a();this.setWritable(i),this.setReadable(o)},t};e.exports=a({autoDestroy:!1,destroy:!1}),e.exports.obj=a({autoDestroy:!1,destroy:!1,objectMode:!0,highWaterMark:16}),e.exports.ctor=a},function(e,t,r){var n=r(109),i=r(172),o=r(11),s=function(){},a=/^v?\.0/.test(process.version),c=function(e){return"function"==typeof e},u=function(e,t,r,u){u=n(u);var l=!1;e.on("close",function(){l=!0}),i(e,{readable:t,writable:r},function(e){if(e)return u(e);l=!0,u()});var p=!1;return function(t){if(!l&&!p)return p=!0,function(e){return!!a&&!!o&&(e instanceof(o.ReadStream||s)||e instanceof(o.WriteStream||s))&&c(e.close)}(e)?e.close(s):function(e){return e.setHeader&&c(e.abort)}(e)?e.abort():c(e.destroy)?e.destroy():void u(t||new Error("stream was destroyed"))}},l=function(e){e()},p=function(e,t){return e.pipe(t)};e.exports=function(){var e,t=Array.prototype.slice.call(arguments),r=c(t[t.length-1]||s)&&t.pop()||s;if(Array.isArray(t[0])&&(t=t[0]),t.length<2)throw new Error("pump requires two streams per minimum");var n=t.map(function(i,o){var s=o<t.length-1;return u(i,s,o>0,function(t){e||(e=t),t&&n.forEach(l),s||(n.forEach(l),r(e))})});t.reduce(p)}},function(e,t,r){"use strict";var n=r(1).inherits,i=r(135),o=r(39),s=r(55).Readable,a=r(1122),c=r(1126),u=r(1132),l="File not found with singular glob: ",p=" (if this was purposeful, use `allowEmpty` option)";function GlobStream(e,t,r){if(!(this instanceof GlobStream))return new GlobStream(e,t,r);var n=o({},r);s.call(this,{objectMode:!0,highWaterMark:n.highWaterMark||16}),delete n.highWaterMark;var d=this;var h=t.map(function resolveNegatives(e){return c(e,n)});n.ignore=h;var f=n.cwd,m=n.allowEmpty||!1,g=n.base||function getBasePath(e,t){return a(c(e,t))}(e,n);e=c(e,n),delete n.root;var y=new i.Glob(e,n);this._globber=y;var v=!1;y.on("match",function(e){v=!0;var t={cwd:f,base:g,path:u(e)};d.push(t)||y.pause()}),y.once("end",function(){if(!0!==m&&!v&&function globIsSingular(e){var t=e.minimatch.set;return 1===t.length&&t[0].every(function isString(e){return"string"==typeof e})}(y)){var t=new Error(l+e+p);return d.destroy(t)}d.push(null)}),y.once("error",function onError(e){d.destroy(e)})}n(GlobStream,s),GlobStream.prototype._read=function(){this._globber.resume()},GlobStream.prototype.destroy=function(e){var t=this;this._globber.abort(),process.nextTick(function(){e&&t.emit("error",e),t.emit("close")})},e.exports=GlobStream},function(e,t,r){"use strict";r(6);var n=r(1123),i=r(1125),o="win32"===r(17).platform();e.exports=function globParent(e){o&&e.indexOf("/")<0&&(e=e.split("\\").join("/")),/[\{\[].*[\/]*.*[\}\]]$/.test(e)&&(e+="/"),e+="a";do{e=i.posix(e)}while(n(e)||/(^|[^\\])([\{\[]|\([^\)]+$)/.test(e));return e.replace(/\\([\*\?\|\[\]\(\)\{\}])/g,"$1")}},function(e,t,r){
/*!
 * is-glob <https://github.com/jonschlinkert/is-glob>
 *
 * Copyright (c) 2014-2016, Jon Schlinkert.
 * Licensed under the MIT License.
 */
var n=r(1124);e.exports=function isGlob(e){if("string"!=typeof e||""===e)return!1;if(n(e))return!0;for(var t,r=/(\\).|([*?]|\[.*\]|\{.*\}|\(.*\|.*\)|^!)/;t=r.exec(e);){if(t[2])return!0;e=e.slice(t.index+t[0].length)}return!1}},function(e,t){
/*!
 * is-extglob <https://github.com/jonschlinkert/is-extglob>
 *
 * Copyright (c) 2014-2016, Jon Schlinkert.
 * Licensed under the MIT License.
 */
e.exports=function isExtglob(e){if("string"!=typeof e||""===e)return!1;for(var t;t=/(\\).|([@?!+*]\(.*\))/g.exec(e);){if(t[2])return!0;e=e.slice(t.index+t[0].length)}return!1}},function(e,t,r){"use strict";r(6);var n=r(1).inspect;function assertPath(e){if("string"!=typeof e)throw new TypeError("Path must be a string. Received "+n(e))}function posix(e){if(assertPath(e),0===e.length)return".";for(var t=e.charCodeAt(0),r=47===t,n=-1,i=!0,o=e.length-1;o>=1;--o)if(47===(t=e.charCodeAt(o))){if(!i){n=o;break}}else i=!1;return-1===n?r?"/":".":r&&1===n?"//":e.slice(0,n)}function win32(e){assertPath(e);var t=e.length;if(0===t)return".";var r=-1,n=-1,i=!0,o=0,s=e.charCodeAt(0);if(t>1)if(47===s||92===s){if(r=o=1,47===(s=e.charCodeAt(1))||92===s){for(var a=2,c=a;a<t&&(47!==(s=e.charCodeAt(a))&&92!==s);++a);if(a<t&&a!==c){for(c=a;a<t&&(47===(s=e.charCodeAt(a))||92===s);++a);if(a<t&&a!==c){for(c=a;a<t&&(47!==(s=e.charCodeAt(a))&&92!==s);++a);if(a===t)return e;a!==c&&(r=o=a+1)}}}}else(s>=65&&s<=90||s>=97&&s<=122)&&(s=e.charCodeAt(1),58===e.charCodeAt(1)&&(r=o=2,t>2&&(47!==(s=e.charCodeAt(2))&&92!==s||(r=o=3))));else if(47===s||92===s)return e[0];for(var u=t-1;u>=o;--u)if(47===(s=e.charCodeAt(u))||92===s){if(!i){n=u;break}}else i=!1;if(-1===n){if(-1===r)return".";n=r}return e.slice(0,n)}e.exports="win32"===process.platform?win32:posix,e.exports.posix=posix,e.exports.win32=win32},function(e,t,r){"use strict";var n=r(6),i=r(475),o=r(1127);function unixify(e){return e.replace(/\\/g,"/")}function join(e,t){return"/"===e.charAt(e.length-1)&&(e=e.slice(0,-1)),"/"===t.charAt(0)&&(t=t.slice(1)),t?e+"/"+t:e}e.exports=function(e,t){var r=t||{},s=n.resolve(r.cwd?r.cwd:process.cwd());s=unixify(s);var a=r.root;a&&(a=unixify(a),"win32"!==process.platform&&o(a)||(a=unixify(n.resolve(a)))),"./"===e.slice(0,2)&&(e=e.slice(2)),1===e.length&&"."===e&&(e="");var c=e.slice(-1),u=i(e);return e=u.pattern,a&&"/"===e.charAt(0)?e=join(a,e):o(e)&&"\\"!==e.slice(0,1)||(e=join(s,e)),"/"===c&&"/"!==e.slice(-1)&&(e+="/"),u.negated?"!"+e:e}},function(e,t,r){"use strict";var n=r(1128),i=r(1131);function isAbsolute(e){if("string"!=typeof e)throw new TypeError("isAbsolute expects a string.");return i()?isAbsolute.win32(e):isAbsolute.posix(e)}e.exports=isAbsolute,isAbsolute.posix=function posixPath(e){return"/"===e.charAt(0)},isAbsolute.win32=function win32(e){return!(!/[a-z]/i.test(e.charAt(0))||":"!==e.charAt(1)||"\\"!==e.charAt(2))||("\\\\"===e.slice(0,2)||!n(e))}},function(e,t,r){"use strict";var n=r(1129);e.exports=function isRelative(e){if("string"!=typeof e)throw new TypeError("expected filepath to be a string");return!n(e)&&!/^([a-z]:)?[\\\/]/i.test(e)}},function(e,t,r){"use strict";var n=r(1130)();e.exports=function(e){if("string"!=typeof e)throw new TypeError("expected a string");return n.test(e)}},function(e,t,r){"use strict";e.exports=function uncPathRegex(){return/^[\\\/]{2,}[^\\\/]+[\\\/]+[^\\\/]+/}},function(e,t,r){var n,i,o,s;
/*!
 * is-windows <https://github.com/jonschlinkert/is-windows>
 *
 * Copyright  2015-2018, Jon Schlinkert.
 * Released under the MIT License.
 */
/*!
 * is-windows <https://github.com/jonschlinkert/is-windows>
 *
 * Copyright  2015-2018, Jon Schlinkert.
 * Released under the MIT License.
 */
s=function(){"use strict";return function isWindows(){return process&&("win32"===process.platform||/^(msys|cygwin)$/.test(process.env.OSTYPE))}},t&&"object"==typeof t&&void 0!==e?e.exports=s():(i=[],void 0===(o="function"==typeof(n=s)?n.apply(t,i):n)||(e.exports=o))},function(e,t){var r="win32"===process.platform;function isSeparator(e,t){var n=e[t];return t>0&&("/"===n||r&&"\\"===n)}e.exports=function(e){var t=e.length-1;if(t<2)return e;for(;isSeparator(e,t);)t--;return e.substr(0,t+1)}},function(e,t,r){"use strict";var n=r(55).Writable;function CallbackStream(e,t){if(!(this instanceof CallbackStream))return new CallbackStream(e,t);"function"==typeof e&&(t=e,e={}),n.call(this,e),this.results=[],this.callback=t,this.on("finish",deliversCallback),this.once("pipe",handlePipe)}function deliversCallback(){this.callback(null,this.results)}function handlePipe(e){e.on("error",this.callback)}r(38)(CallbackStream,n),CallbackStream.prototype._write=function(e,t,r){this.results.push(e),r()},CallbackStream.obj=function(e,t){return"function"==typeof e&&(t=e,e={}),e.objectMode=!0,new CallbackStream(e,t)},e.exports=CallbackStream},function(e,t,r){"use strict";(function(e){var t=r(245),n=r(1135),i=r(6),o=r(11),s=r(1136),a=r(55).Writable,c=r(251)({dir:i.join(__dirname,"..","doc")}),u=r(476),l=r(1139);function send(e){var r=t.connect(e);r.on("connect",function(){r.publish(e.topic,e.message,e,function(e){e&&console.warn(e),r.end()})}),r.on("error",function(e){console.warn(e),r.end()})}function start(e){if((e=u(e,{string:["hostname","username","password","key","cert","ca","message","clientId","i","id"],boolean:["stdin","retain","help","insecure","multiline"],alias:{port:"p",hostname:["h","host"],topic:"t",message:"m",qos:"q",clientId:["i","id"],retain:"r",username:"u",password:"P",stdin:"s",multiline:"M",protocol:["C","l"],help:"H",ca:"cafile"},default:{host:"localhost",qos:0,retain:!1,topic:"",message:""}})).help)return c.toStdout("publish");if(e.key&&(e.key=o.readFileSync(e.key)),e.cert&&(e.cert=o.readFileSync(e.cert)),e.ca&&(e.ca=o.readFileSync(e.ca)),e.key&&e.cert&&!e.protocol&&(e.protocol="mqtts"),e.port&&"number"!=typeof e.port)console.warn("# Port: number expected, '%s' was given.",typeof e.port);else{if(e["will-topic"]&&(e.will={},e.will.topic=e["will-topic"],e.will.payload=e["will-message"],e.will.qos=e["will-qos"],e.will.retain=e["will-retain"]),e.insecure&&(e.rejectUnauthorized=!1),e.topic=(e.topic||e._.shift()).toString(),e.message=(e.message||e._.shift()).toString(),!e.topic)return console.error("missing topic\n"),c.toStdout("publish");e.stdin?e.multiline?function multisend(e){var r=t.connect(e),i=new a({objectMode:!0});i._write=function(t,n,i){r.publish(e.topic,t.trim(),e,i)},r.on("connect",function(){n(process.stdin,l(),i,function(e){if(r.end(),e)throw e})})}(e):process.stdin.pipe(s(function(t){e.message=t,send(e)})):send(e)}}e.exports=start,r.c[r.s]===e&&start(process.argv.slice(2))}).call(this,r(48)(e))},function(e,t,r){var n=r(109),i=r(172),o=r(11),s=function(){},a=/^v?\.0/.test(process.version),c=function(e){return"function"==typeof e},u=function(e,t,r,u){u=n(u);var l=!1;e.on("close",function(){l=!0}),i(e,{readable:t,writable:r},function(e){if(e)return u(e);l=!0,u()});var p=!1;return function(t){if(!l&&!p)return p=!0,function(e){return!!a&&!!o&&(e instanceof(o.ReadStream||s)||e instanceof(o.WriteStream||s))&&c(e.close)}(e)?e.close(s):function(e){return e.setHeader&&c(e.abort)}(e)?e.abort():c(e.destroy)?e.destroy():void u(t||new Error("stream was destroyed"))}},l=function(e){e()},p=function(e,t){return e.pipe(t)};e.exports=function(){var e,t=Array.prototype.slice.call(arguments),r=c(t[t.length-1]||s)&&t.pop()||s;if(Array.isArray(t[0])&&(t=t[0]),t.length<2)throw new Error("pump requires two streams per minimum");var n=t.map(function(i,o){var s=o<t.length-1;return u(i,s,o>0,function(t){e||(e=t),t&&n.forEach(l),s||(n.forEach(l),r(e))})});return t.reduce(p)}},function(e,t,r){var n=r(55).Writable,i=r(38),o=r(1137);if("undefined"==typeof Uint8Array)var s=r(1138).Uint8Array;else s=Uint8Array;function ConcatStream(e,t){if(!(this instanceof ConcatStream))return new ConcatStream(e,t);"function"==typeof e&&(t=e,e={}),e||(e={});var r=e.encoding,i=!1;r?"u8"!==(r=String(r).toLowerCase())&&"uint8"!==r||(r="uint8array"):i=!0,n.call(this,{objectMode:!0}),this.encoding=r,this.shouldInferEncoding=i,t&&this.on("finish",function(){t(this.getBody())}),this.body=[]}e.exports=ConcatStream,i(ConcatStream,n),ConcatStream.prototype._write=function(e,t,r){this.body.push(e),r()},ConcatStream.prototype.inferEncoding=function(e){var t=void 0===e?this.body[0]:e;return Buffer.isBuffer(t)?"buffer":"undefined"!=typeof Uint8Array&&t instanceof Uint8Array?"uint8array":Array.isArray(t)?"array":"string"==typeof t?"string":"[object Object]"===Object.prototype.toString.call(t)?"object":"buffer"},ConcatStream.prototype.getBody=function(){return this.encoding||0!==this.body.length?(this.shouldInferEncoding&&(this.encoding=this.inferEncoding()),"array"===this.encoding?function arrayConcat(e){for(var t=[],r=0;r<e.length;r++)t.push.apply(t,e[r]);return t}(this.body):"string"===this.encoding?function stringConcat(e){for(var t=[],r=0;r<e.length;r++){var n=e[r];"string"==typeof n?t.push(n):Buffer.isBuffer(n)?t.push(n):isBufferish(n)?t.push(o(n)):t.push(o(String(n)))}t=Buffer.isBuffer(e[0])?(t=Buffer.concat(t)).toString("utf8"):t.join("");return t}(this.body):"buffer"===this.encoding?function bufferConcat(e){for(var t=[],r=0;r<e.length;r++){var n=e[r];Buffer.isBuffer(n)?t.push(n):isBufferish(n)?t.push(o(n)):t.push(o(String(n)))}return Buffer.concat(t)}(this.body):"uint8array"===this.encoding?function u8Concat(e){for(var t=0,r=0;r<e.length;r++)"string"==typeof e[r]&&(e[r]=o(e[r])),t+=e[r].length;for(var n=new s(t),r=0,i=0;r<e.length;r++)for(var a=e[r],c=0;c<a.length;c++)n[i++]=a[c];return n}(this.body):this.body):[]};Array.isArray;function isBufferish(e){return"string"==typeof e||function isArrayish(e){return/Array\]$/.test(Object.prototype.toString.call(e))}(e)||e&&"function"==typeof e.subarray}},function(e,t){var r=Object.prototype.toString,n="function"==typeof Buffer.alloc&&"function"==typeof Buffer.allocUnsafe&&"function"==typeof Buffer.from;e.exports=function bufferFrom(e,t,i){if("number"==typeof e)throw new TypeError('"value" argument must not be a number');return function isArrayBuffer(e){return"ArrayBuffer"===r.call(e).slice(8,-1)}(e)?function fromArrayBuffer(e,t,r){t>>>=0;var i=e.byteLength-t;if(i<0)throw new RangeError("'offset' is out of bounds");if(void 0===r)r=i;else if((r>>>=0)>i)throw new RangeError("'length' is out of bounds");return n?Buffer.from(e.slice(t,t+r)):new Buffer(new Uint8Array(e.slice(t,t+r)))}(e,t,i):"string"==typeof e?function fromString(e,t){if("string"==typeof t&&""!==t||(t="utf8"),!Buffer.isEncoding(t))throw new TypeError('"encoding" must be a valid string encoding');return n?Buffer.from(e,t):new Buffer(e,t)}(e,t):n?Buffer.from(e):new Buffer(e)}},function(e,t){var n,i,o,s=void 0,a=1e5,c=(n=Object.prototype.toString,i=Object.prototype.hasOwnProperty,{Class:function(e){return n.call(e).replace(/^\[object *|\]$/g,"")},HasProperty:function(e,t){return t in e},HasOwnProperty:function(e,t){return i.call(e,t)},IsCallable:function(e){return"function"==typeof e},ToInt32:function(e){return e>>0},ToUint32:function(e){return e>>>0}}),u=Math.LN2,l=Math.abs,p=Math.floor,d=Math.log,h=Math.min,f=Math.pow,m=Math.round;function configureProperties(e){if(g&&o){var t,r=g(e);for(t=0;t<r.length;t+=1)o(e,r[t],{value:e[r[t]],writable:!1,enumerable:!1,configurable:!1})}}o=Object.defineProperty&&function(){try{return Object.defineProperty({},"x",{}),!0}catch(e){return!1}}()?Object.defineProperty:function(e,t,r){if(!e===Object(e))throw new TypeError("Object.defineProperty called on non-object");return c.HasProperty(r,"get")&&Object.prototype.__defineGetter__&&Object.prototype.__defineGetter__.call(e,t,r.get),c.HasProperty(r,"set")&&Object.prototype.__defineSetter__&&Object.prototype.__defineSetter__.call(e,t,r.set),c.HasProperty(r,"value")&&(e[t]=r.value),e};var g=Object.getOwnPropertyNames||function(e){if(e!==Object(e))throw new TypeError("Object.getOwnPropertyNames called on non-object");var t,r=[];for(t in e)c.HasOwnProperty(e,t)&&r.push(t);return r};function as_signed(e,t){var r=32-t;return e<<r>>r}function as_unsigned(e,t){var r=32-t;return e<<r>>>r}function packI8(e){return[255&e]}function unpackI8(e){return as_signed(e[0],8)}function packU8(e){return[255&e]}function unpackU8(e){return as_unsigned(e[0],8)}function packU8Clamped(e){return[(e=m(Number(e)))<0?0:e>255?255:255&e]}function packI16(e){return[e>>8&255,255&e]}function unpackI16(e){return as_signed(e[0]<<8|e[1],16)}function packU16(e){return[e>>8&255,255&e]}function unpackU16(e){return as_unsigned(e[0]<<8|e[1],16)}function packI32(e){return[e>>24&255,e>>16&255,e>>8&255,255&e]}function unpackI32(e){return as_signed(e[0]<<24|e[1]<<16|e[2]<<8|e[3],32)}function packU32(e){return[e>>24&255,e>>16&255,e>>8&255,255&e]}function unpackU32(e){return as_unsigned(e[0]<<24|e[1]<<16|e[2]<<8|e[3],32)}function packIEEE754(e,t,r){var n,i,o,s,a,c,m,g=(1<<t-1)-1;function roundToEven(e){var t=p(e),r=e-t;return r<.5?t:r>.5?t+1:t%2?t+1:t}for(e!=e?(i=(1<<t)-1,o=f(2,r-1),n=0):e===1/0||e===-1/0?(i=(1<<t)-1,o=0,n=e<0?1:0):0===e?(i=0,o=0,n=1/e==-1/0?1:0):(n=e<0,(e=l(e))>=f(2,1-g)?(i=h(p(d(e)/u),1023),(o=roundToEven(e/f(2,i)*f(2,r)))/f(2,r)>=2&&(i+=1,o=1),i>g?(i=(1<<t)-1,o=0):(i+=g,o-=f(2,r))):(i=0,o=roundToEven(e/f(2,1-g-r)))),a=[],s=r;s;s-=1)a.push(o%2?1:0),o=p(o/2);for(s=t;s;s-=1)a.push(i%2?1:0),i=p(i/2);for(a.push(n?1:0),a.reverse(),c=a.join(""),m=[];c.length;)m.push(parseInt(c.substring(0,8),2)),c=c.substring(8);return m}function unpackIEEE754(e,t,r){var n,i,o,s,a,c,u,l,p=[];for(n=e.length;n;n-=1)for(o=e[n-1],i=8;i;i-=1)p.push(o%2?1:0),o>>=1;return p.reverse(),s=p.join(""),a=(1<<t-1)-1,c=parseInt(s.substring(0,1),2)?-1:1,u=parseInt(s.substring(1,1+t),2),l=parseInt(s.substring(1+t),2),u===(1<<t)-1?0!==l?NaN:c*(1/0):u>0?c*f(2,u-a)*(1+l/f(2,r)):0!==l?c*f(2,-(a-1))*(l/f(2,r)):c<0?-0:0}function unpackF64(e){return unpackIEEE754(e,11,52)}function packF64(e){return packIEEE754(e,11,52)}function unpackF32(e){return unpackIEEE754(e,8,23)}function packF32(e){return packIEEE754(e,8,23)}!function(){var e=function ArrayBuffer(e){if((e=c.ToInt32(e))<0)throw new RangeError("ArrayBuffer size is not a small enough positive integer");var t;for(this.byteLength=e,this._bytes=[],this._bytes.length=e,t=0;t<this.byteLength;t+=1)this._bytes[t]=0;configureProperties(this)};t.ArrayBuffer=t.ArrayBuffer||e;var r=function ArrayBufferView(){};function makeConstructor(t,n,i){var u;return(u=function(t,r,n){var i,s,l,p;if(arguments.length&&"number"!=typeof arguments[0])if("object"==typeof arguments[0]&&arguments[0].constructor===u)for(i=arguments[0],this.length=i.length,this.byteLength=this.length*this.BYTES_PER_ELEMENT,this.buffer=new e(this.byteLength),this.byteOffset=0,l=0;l<this.length;l+=1)this._setter(l,i._getter(l));else if("object"!=typeof arguments[0]||(arguments[0]instanceof e||"ArrayBuffer"===c.Class(arguments[0]))){if("object"!=typeof arguments[0]||!(arguments[0]instanceof e||"ArrayBuffer"===c.Class(arguments[0])))throw new TypeError("Unexpected argument type(s)");if(this.buffer=t,this.byteOffset=c.ToUint32(r),this.byteOffset>this.buffer.byteLength)throw new RangeError("byteOffset out of range");if(this.byteOffset%this.BYTES_PER_ELEMENT)throw new RangeError("ArrayBuffer length minus the byteOffset is not a multiple of the element size.");if(arguments.length<3){if(this.byteLength=this.buffer.byteLength-this.byteOffset,this.byteLength%this.BYTES_PER_ELEMENT)throw new RangeError("length of buffer minus byteOffset not a multiple of the element size");this.length=this.byteLength/this.BYTES_PER_ELEMENT}else this.length=c.ToUint32(n),this.byteLength=this.length*this.BYTES_PER_ELEMENT;if(this.byteOffset+this.byteLength>this.buffer.byteLength)throw new RangeError("byteOffset and length reference an area beyond the end of the buffer")}else for(s=arguments[0],this.length=c.ToUint32(s.length),this.byteLength=this.length*this.BYTES_PER_ELEMENT,this.buffer=new e(this.byteLength),this.byteOffset=0,l=0;l<this.length;l+=1)p=s[l],this._setter(l,Number(p));else{if(this.length=c.ToInt32(arguments[0]),n<0)throw new RangeError("ArrayBufferView size is not a small enough positive integer");this.byteLength=this.length*this.BYTES_PER_ELEMENT,this.buffer=new e(this.byteLength),this.byteOffset=0}this.constructor=u,configureProperties(this),function makeArrayAccessors(e){if(o){if(e.length>a)throw new RangeError("Array too large for polyfill");var t;for(t=0;t<e.length;t+=1)makeArrayAccessor(t)}function makeArrayAccessor(t){o(e,t,{get:function(){return e._getter(t)},set:function(r){e._setter(t,r)},enumerable:!0,configurable:!1})}}(this)}).prototype=new r,u.prototype.BYTES_PER_ELEMENT=t,u.prototype._pack=n,u.prototype._unpack=i,u.BYTES_PER_ELEMENT=t,u.prototype._getter=function(e){if(arguments.length<1)throw new SyntaxError("Not enough arguments");if((e=c.ToUint32(e))>=this.length)return s;var t,r,n=[];for(t=0,r=this.byteOffset+e*this.BYTES_PER_ELEMENT;t<this.BYTES_PER_ELEMENT;t+=1,r+=1)n.push(this.buffer._bytes[r]);return this._unpack(n)},u.prototype.get=u.prototype._getter,u.prototype._setter=function(e,t){if(arguments.length<2)throw new SyntaxError("Not enough arguments");if((e=c.ToUint32(e))>=this.length)return s;var r,n,i=this._pack(t);for(r=0,n=this.byteOffset+e*this.BYTES_PER_ELEMENT;r<this.BYTES_PER_ELEMENT;r+=1,n+=1)this.buffer._bytes[n]=i[r]},u.prototype.set=function(e,t){if(arguments.length<1)throw new SyntaxError("Not enough arguments");var r,n,i,o,s,a,u,l,p,d;if("object"==typeof arguments[0]&&arguments[0].constructor===this.constructor){if(r=arguments[0],(i=c.ToUint32(arguments[1]))+r.length>this.length)throw new RangeError("Offset plus length of array is out of range");if(l=this.byteOffset+i*this.BYTES_PER_ELEMENT,p=r.length*this.BYTES_PER_ELEMENT,r.buffer===this.buffer){for(d=[],s=0,a=r.byteOffset;s<p;s+=1,a+=1)d[s]=r.buffer._bytes[a];for(s=0,u=l;s<p;s+=1,u+=1)this.buffer._bytes[u]=d[s]}else for(s=0,a=r.byteOffset,u=l;s<p;s+=1,a+=1,u+=1)this.buffer._bytes[u]=r.buffer._bytes[a]}else{if("object"!=typeof arguments[0]||void 0===arguments[0].length)throw new TypeError("Unexpected argument type(s)");if(n=arguments[0],o=c.ToUint32(n.length),(i=c.ToUint32(arguments[1]))+o>this.length)throw new RangeError("Offset plus length of array is out of range");for(s=0;s<o;s+=1)a=n[s],this._setter(i+s,Number(a))}},u.prototype.subarray=function(e,t){function clamp(e,t,r){return e<t?t:e>r?r:e}e=c.ToInt32(e),t=c.ToInt32(t),arguments.length<1&&(e=0),arguments.length<2&&(t=this.length),e<0&&(e=this.length+e),t<0&&(t=this.length+t),e=clamp(e,0,this.length);var r=(t=clamp(t,0,this.length))-e;return r<0&&(r=0),new this.constructor(this.buffer,this.byteOffset+e*this.BYTES_PER_ELEMENT,r)},u}var n=makeConstructor(1,packI8,unpackI8),i=makeConstructor(1,packU8,unpackU8),u=makeConstructor(1,packU8Clamped,unpackU8),l=makeConstructor(2,packI16,unpackI16),p=makeConstructor(2,packU16,unpackU16),d=makeConstructor(4,packI32,unpackI32),h=makeConstructor(4,packU32,unpackU32),f=makeConstructor(4,packF32,unpackF32),m=makeConstructor(8,packF64,unpackF64);t.Int8Array=t.Int8Array||n,t.Uint8Array=t.Uint8Array||i,t.Uint8ClampedArray=t.Uint8ClampedArray||u,t.Int16Array=t.Int16Array||l,t.Uint16Array=t.Uint16Array||p,t.Int32Array=t.Int32Array||d,t.Uint32Array=t.Uint32Array||h,t.Float32Array=t.Float32Array||f,t.Float64Array=t.Float64Array||m}(),function(){function r(e,t){return c.IsCallable(e.get)?e.get(t):e[t]}var e,n=(e=new t.Uint16Array([4660]),18===r(new t.Uint8Array(e.buffer),0)),i=function DataView(e,r,n){if(0===arguments.length)e=new t.ArrayBuffer(0);else if(!(e instanceof t.ArrayBuffer||"ArrayBuffer"===c.Class(e)))throw new TypeError("TypeError");if(this.buffer=e||new t.ArrayBuffer(0),this.byteOffset=c.ToUint32(r),this.byteOffset>this.buffer.byteLength)throw new RangeError("byteOffset out of range");if(arguments.length<3?this.byteLength=this.buffer.byteLength-this.byteOffset:this.byteLength=c.ToUint32(n),this.byteOffset+this.byteLength>this.buffer.byteLength)throw new RangeError("byteOffset and length reference an area beyond the end of the buffer");configureProperties(this)};function makeGetter(e){return function(i,o){if((i=c.ToUint32(i))+e.BYTES_PER_ELEMENT>this.byteLength)throw new RangeError("Array index out of range");i+=this.byteOffset;var s,a=new t.Uint8Array(this.buffer,i,e.BYTES_PER_ELEMENT),u=[];for(s=0;s<e.BYTES_PER_ELEMENT;s+=1)u.push(r(a,s));return Boolean(o)===Boolean(n)&&u.reverse(),r(new e(new t.Uint8Array(u).buffer),0)}}function makeSetter(e){return function(i,o,s){if((i=c.ToUint32(i))+e.BYTES_PER_ELEMENT>this.byteLength)throw new RangeError("Array index out of range");var a,u=new e([o]),l=new t.Uint8Array(u.buffer),p=[];for(a=0;a<e.BYTES_PER_ELEMENT;a+=1)p.push(r(l,a));Boolean(s)===Boolean(n)&&p.reverse(),new t.Uint8Array(this.buffer,i,e.BYTES_PER_ELEMENT).set(p)}}i.prototype.getUint8=makeGetter(t.Uint8Array),i.prototype.getInt8=makeGetter(t.Int8Array),i.prototype.getUint16=makeGetter(t.Uint16Array),i.prototype.getInt16=makeGetter(t.Int16Array),i.prototype.getUint32=makeGetter(t.Uint32Array),i.prototype.getInt32=makeGetter(t.Int32Array),i.prototype.getFloat32=makeGetter(t.Float32Array),i.prototype.getFloat64=makeGetter(t.Float64Array),i.prototype.setUint8=makeSetter(t.Uint8Array),i.prototype.setInt8=makeSetter(t.Int8Array),i.prototype.setUint16=makeSetter(t.Uint16Array),i.prototype.setInt16=makeSetter(t.Int16Array),i.prototype.setUint32=makeSetter(t.Uint32Array),i.prototype.setInt32=makeSetter(t.Int32Array),i.prototype.setFloat32=makeSetter(t.Float32Array),i.prototype.setFloat64=makeSetter(t.Float64Array),t.DataView=t.DataView||i}()},function(e,t,r){"use strict";var n=r(252),i=r(187).StringDecoder;function transform(e,t,r){if(this._last+=this._decoder.write(e),this._last.length>this.maxLength)return r(new Error("maximum buffer reached"));var n=this._last.split(this.matcher);this._last=n.pop();for(var i=0;i<n.length;i++)push(this,this.mapper(n[i]));r()}function flush(e){this._last+=this._decoder.end(),this._last&&push(this,this.mapper(this._last)),e()}function push(e,t){void 0!==t&&e.push(t)}function noop(e){return e}e.exports=function split(e,t,r){switch(e=e||/\r?\n/,t=t||noop,r=r||{},arguments.length){case 1:"function"==typeof e?(t=e,e=/\r?\n/):"object"!=typeof e||e instanceof RegExp||(r=e,e=/\r?\n/);break;case 2:"function"==typeof e?(r=t,t=e,e=/\r?\n/):"object"==typeof t&&(r=t,t=noop)}var o=n(r,transform,flush);return o._readableState.objectMode=!0,o._readableState.highWaterMark&&!r.highWaterMark&&(o._readableState.highWaterMark=16),o._last="",o._decoder=new i("utf8"),o.matcher=e,o.mapper=t,o.maxLength=r.maxLength,o}},function(e,t,r){(function(e){var t=r(245),n=r(6),i=r(11),o=r(251)({dir:n.join(__dirname,"..","doc")}),s=r(476);function start(e){if((e=s(e,{string:["hostname","username","password","key","cert","ca","clientId","i","id"],boolean:["stdin","help","clean","insecure"],alias:{port:"p",hostname:["h","host"],topic:"t",qos:"q",clean:"c",keepalive:"k",clientId:["i","id"],username:"u",password:"P",protocol:["C","l"],verbose:"v",help:"-H",ca:"cafile"},default:{host:"localhost",qos:0,retain:!1,clean:!0,keepAlive:30}})).help)return o.toStdout("subscribe");if(e.topic=e.topic||e._.shift(),!e.topic)return console.error("missing topic\n"),o.toStdout("subscribe");if(e.key&&(e.key=i.readFileSync(e.key)),e.cert&&(e.cert=i.readFileSync(e.cert)),e.ca&&(e.ca=i.readFileSync(e.ca)),e.key&&e.cert&&!e.protocol&&(e.protocol="mqtts"),e.insecure&&(e.rejectUnauthorized=!1),e.port&&"number"!=typeof e.port)console.warn("# Port: number expected, '%s' was given.",typeof e.port);else{e["will-topic"]&&(e.will={},e.will.topic=e["will-topic"],e.will.payload=e["will-message"],e.will.qos=e["will-qos"],e.will.retain=e["will-retain"]),e.keepAlive=e["keep-alive"];var r=t.connect(e);r.on("connect",function(){r.subscribe(e.topic,{qos:e.qos},function(e,t){e&&(console.error(e),process.exit(1)),t.forEach(function(e){e.qos>2&&(console.error("subscription negated to",e.topic,"with code",e.qos),process.exit(1))})})}),r.on("message",function(t,r){e.verbose?console.log(t,r.toString()):console.log(r.toString())}),r.on("error",function(e){console.warn(e),r.end()})}}e.exports=start,r.c[r.s]===e&&start(process.argv.slice(2))}).call(this,r(48)(e))},function(e){e.exports={_args:[["mqtt@2.18.8","/home/travis/build/microsoft/vscode-azure-iot-toolkit"]],_from:"mqtt@2.18.8",_id:"mqtt@2.18.8",_inBundle:!1,_integrity:"sha512-3h6oHlPY/yWwtC2J3geraYRtVVoRM6wdI+uchF4nvSSafXPZnaKqF8xnX+S22SU/FcgEAgockVIlOaAX3fkMpA==",_location:"/mqtt",_phantomChildren:{},_requested:{type:"version",registry:!0,raw:"mqtt@2.18.8",name:"mqtt",escapedName:"mqtt",rawSpec:"2.18.8",saveSpec:null,fetchSpec:"2.18.8"},_requiredBy:["/azure-iot-mqtt-base"],_resolved:"https://registry.npmjs.org/mqtt/-/mqtt-2.18.8.tgz",_spec:"2.18.8",_where:"/home/travis/build/microsoft/vscode-azure-iot-toolkit",bin:{mqtt_pub:"./bin/pub.js",mqtt_sub:"./bin/sub.js",mqtt:"./mqtt.js"},browser:{"./mqtt.js":"./lib/connect/index.js",fs:!1,tls:!1,net:!1},bugs:{url:"https://github.com/mqttjs/MQTT.js/issues"},contributors:[{name:"Adam Rudd",email:"adamvrr@gmail.com"},{name:"Matteo Collina",email:"matteo.collina@gmail.com",url:"https://github.com/mcollina"}],dependencies:{commist:"^1.0.0","concat-stream":"^1.6.2","end-of-stream":"^1.4.1","es6-map":"^0.1.5","help-me":"^1.0.1",inherits:"^2.0.3",minimist:"^1.2.0","mqtt-packet":"^5.6.0",pump:"^3.0.0","readable-stream":"^2.3.6",reinterval:"^1.1.0",split2:"^2.1.1","websocket-stream":"^5.1.2",xtend:"^4.0.1"},description:"A library for the MQTT protocol",devDependencies:{"@types/node":"^8.10.21",browserify:"^16.2.2",codecov:"^3.0.4",global:"^4.3.2",istanbul:"^0.4.5",mkdirp:"^0.5.1",mocha:"^4.1.0","mqtt-connection":"^3.0.0","pre-commit":"^1.2.2",rimraf:"^2.6.2","safe-buffer":"^5.1.2",should:"^13.2.1",sinon:"~1.17.7",snazzy:"^7.1.1",standard:"^11.0.1",through2:"^2.0.3",tslint:"^5.11.0","tslint-config-standard":"^7.1.0",typescript:"^2.9.2","uglify-js":"^3.4.5",ws:"^3.3.3",zuul:"^3.12.0","zuul-ngrok":"^4.0.0"},engines:{node:">=4.0.0"},files:["dist/","CONTRIBUTING.md","doc","lib","bin","examples","test","types","mqtt.js"],homepage:"https://github.com/mqttjs/MQTT.js#readme",keywords:["mqtt","publish/subscribe","publish","subscribe"],license:"MIT",main:"mqtt.js",name:"mqtt","pre-commit":["test","tslint"],repository:{type:"git",url:"git://github.com/mqttjs/MQTT.js.git"},scripts:{"browser-build":"rimraf dist/ && mkdirp dist/ && browserify mqtt.js -s mqtt > dist/mqtt.js && uglifyjs < dist/mqtt.js > dist/mqtt.min.js","browser-test":"zuul --server test/browser/server.js --local --open test/browser/test.js",ci:"npm run tslint && npm run typescript-test && npm run test && codecov",prepare:"npm run browser-build",pretest:"standard | snazzy","sauce-test":"zuul --server test/browser/server.js --tunnel ngrok -- test/browser/test.js",test:"istanbul cover ./node_modules/mocha/bin/_mocha --report lcovonly --",tslint:'if [[ "`node -v`" != "v4.3.2" ]]; then tslint types/**/*.d.ts; fi',"typescript-compile-execute":"node test/typescript/*.js","typescript-compile-test":"tsc -p test/typescript/tsconfig.json","typescript-test":"npm run typescript-compile-test && npm run typescript-compile-execute","weapp-test":"zuul --server test/browser/server.js --local --open test/browser/wx.js"},standard:{env:["mocha"]},types:"types/index.d.ts",version:"2.18.8"}},function(e,t,r){"use strict";var n,i=this&&this.__extends||(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])},function(e,t){function __(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(__.prototype=t.prototype,new __)});Object.defineProperty(t,"__esModule",{value:!0});var o=r(443)("azure-iot-mqtt-base:translateError"),s=r(4),a=function(e){function MqttTransportError(){return null!==e&&e.apply(this,arguments)||this}return i(MqttTransportError,e),MqttTransportError}(Error);t.MqttTransportError=a,t.translateError=function translateError(e){var t;return o("translating: "+e.toString()),(t=e.code?new s.errors.NotConnectedError(e.message):e.message?e.message.indexOf("premature close")>-1?new s.errors.NotConnectedError(e.message):e.message.indexOf("client disconnecting")>-1?new s.errors.NotConnectedError("mqtt.js returned "+e.message+" error"):e.message.indexOf("Invalid topic")>-1?new s.errors.FormatError("mqtt.js returned "+e.message+" error"):e.message.indexOf("No connection to broker")>-1?new s.errors.NotConnectedError("mqtt.js returned "+e.message+" error"):e.message.indexOf("Unacceptable protocol version")>-1?new s.errors.NotImplementedError("mqtt.js returned "+e.message+" error"):e.message.indexOf("Identifier rejected")>-1?new s.errors.UnauthorizedError("mqtt.js returned "+e.message+" error"):e.message.indexOf("Server unavailable")>-1?new s.errors.ServiceUnavailableError("mqtt.js returned "+e.message+" error"):e.message.indexOf("Bad username or password")>-1?new s.errors.UnauthorizedError("mqtt.js returned "+e.message+" error"):e.message.indexOf("Not authorized")>-1?new s.errors.UnauthorizedError("mqtt.js returned "+e.message+" error"):e.message.indexOf("unrecognized packet type")>-1?new s.errors.InternalServerError("mqtt.js returned "+e.message+" error"):e:e).transportError=e,t}},function(e,t,r){"use strict";var n,i=this&&this.__extends||(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])},function(e,t){function __(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(__.prototype=t.prototype,new __)});Object.defineProperty(t,"__esModule",{value:!0});var o=r(5),s=r(442),a=r(52),c=r(7),u=r(35),l=r(78),p=r(440)("azure-iot-device-mqtt:MqttTwinClient"),d="$iothub/twin/res/#",h="$iothub/twin/PATCH/properties/desired/#",f=function(e){function MqttTwinClient(t){var r=e.call(this)||this;r._pendingTwinRequests={},r._mqtt=t;var n=r._onMqttMessage.bind(r);return r._mqtt.on("message",n),r._topicFsm=new l.BehavioralFsm({initialState:"unsubscribed",states:{unsubscribed:{_onEnter:function(e,t,r){r&&r(t)},subscribe:function(e,t){this.transition(e,"subscribing",t)},unsubscribe:function(e,t){t()}},subscribing:{_onEnter:function(e,t){var r=this;e.mqttClient.subscribe(e.topic,{qos:0},function(n,i){n?r.transition(e,"unsubscribed",n,t):(p("subscribed to response topic: "+JSON.stringify(i)),r.transition(e,"subscribed",t))})},"*":function(e){this.deferUntilTransition(e)}},subscribed:{_onEnter:function(e,t){t()},subscribe:function(e,t){t()},unsubscribe:function(e,t){this.transition(e,"unsubscribing",t)}},unsubscribing:{_onEnter:function(e,t){var r=this;e.mqttClient.unsubscribe(e.topic,function(n,i){p(n?"failed to unsubscribe: "+n.toString():"unsubscribed from: "+e.topic),r.transition(e,"unsubscribed",n,t)})},"*":function(e){this.deferUntilTransition(e)}}},subscribe:function(e,t){this.handle(e,"subscribe",t)},unsubscribe:function(e,t){this.handle(e,"unsubscribe",t)}}),r._responseTopic={mqttClient:r._mqtt,topic:d},r._desiredPropertiesUpdatesTopic={mqttClient:r._mqtt,topic:h},r}return i(MqttTwinClient,e),MqttTwinClient.prototype.getTwin=function(e){var t=this;this._topicFsm.subscribe(this._responseTopic,function(r){r?e(s.translateError(r)):t._sendTwinRequest("GET","/"," ",e)})},MqttTwinClient.prototype.updateTwinReportedProperties=function(e,t){var r=this;this._topicFsm.subscribe(this._responseTopic,function(n){n?t(s.translateError(n)):r._sendTwinRequest("PATCH","/properties/reported/",JSON.stringify(e),t)})},MqttTwinClient.prototype.enableTwinDesiredPropertiesUpdates=function(e){this._topicFsm.subscribe(this._desiredPropertiesUpdatesTopic,function(t,r){t?(p("failed to subscribe to desired properties updates: "+t.toString()),e(s.translateError(t))):(p("suback: "+JSON.stringify(r)),e())})},MqttTwinClient.prototype.disableTwinDesiredPropertiesUpdates=function(e){this._topicFsm.unsubscribe(this._desiredPropertiesUpdatesTopic,function(t,r){t?(p("failed to subscribe to desired properties updates: "+t.toString()),e(s.translateError(t))):(p("suback: "+JSON.stringify(r)),e())})},MqttTwinClient.prototype._sendTwinRequest=function(e,t,r,n){var i=this,o=u.v4(),a="$iothub/twin/"+e+t+("?$rid="+o);this._pendingTwinRequests[o]=n,this._mqtt.publish(a,r.toString(),{qos:0,retain:!1},function(e,t){e?(delete i._pendingTwinRequests[o],n(s.translateError(e))):p("twin request sent: "+t)})},MqttTwinClient.prototype._onMqttMessage=function(e,t){p("mqtt message received"),0===e.indexOf("$iothub/twin/res")?(p("response message received"),this._onResponseMessage(e,t)):0===e.indexOf("$iothub/twin/PATCH/properties/desired")?this.emit(MqttTwinClient.desiredPropertiesUpdateEvent,JSON.parse(t)):p("Message received on a topic we can ignore: "+e)},MqttTwinClient.prototype._onResponseMessage=function(e,t){var r,n,i;try{n=(r=c.parse(e)).path.split("/"),i=a.parse(r.query)}catch(e){return}if("$iothub"===n[0]&&"twin"===n[1]&&"res"===n[2]&&n[3]&&n[3].toString().length>0&&i.$rid&&i.$rid.toString().length>0)if(this._pendingTwinRequests[i.$rid]){var o=this._pendingTwinRequests[i.$rid];delete this._pendingTwinRequests[i.$rid];var s=t.toString();o(null,s?JSON.parse(s):void 0)}else p("received a response for a request we do not know about: "+i.$rid);else p("received a response with a malformed topic property: "+e)},MqttTwinClient.desiredPropertiesUpdateEvent="twinDesiredPropertiesUpdate",MqttTwinClient}(o.EventEmitter);t.MqttTwinClient=f},function(e,t,r){"use strict";var n,i=this&&this.__extends||(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])},function(e,t){function __(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(__.prototype=t.prototype,new __)});Object.defineProperty(t,"__esModule",{value:!0});var o=function(e){function MqttWs(t,r){return e.call(this,t,r)||this}return i(MqttWs,e),MqttWs.prototype._getBaseTransportConfig=function(t){var r=e.prototype._getBaseTransportConfig.call(this,t);return r.uri="wss://"+(t.gatewayHostName||t.host)+":443/$iothub/websocket",r},MqttWs}(r(439).Mqtt);t.MqttWs=o},function(e,t,r){"use strict";var n=this&&this.__awaiter||function(e,t,r,n){return new(r||(r=Promise))(function(i,o){function fulfilled(e){try{step(n.next(e))}catch(e){o(e)}}function rejected(e){try{step(n.throw(e))}catch(e){o(e)}}function step(e){e.done?i(e.value):new r(function(t){t(e.value)}).then(fulfilled,rejected)}step((n=n.apply(e,t||[])).next())})};Object.defineProperty(t,"__esModule",{value:!0});const i=r(67),o=r(10),s=r(68),a=r(16),c=r(18),u=r(25);t.IotHubDeviceTwinExplorer=class IotHubDeviceTwinExplorer extends s.BaseExplorer{constructor(e){super(e)}getDeviceTwin(e){return n(this,void 0,void 0,function*(){(e=yield u.Utility.getInputDevice(e,a.Constants.IoTHubAIGetDeviceTwinStartEvent))&&this.getDeviceTwinById(e.deviceId)})}getDeviceTwinById(e){return n(this,void 0,void 0,function*(){let t=yield u.Utility.getConnectionString(a.Constants.IotHubConnectionStringKey,a.Constants.IotHubConnectionStringTitle);if(!t)return;c.TelemetryClient.sendEvent(a.Constants.IoTHubAIGetDeviceTwinDoneEvent);let r=i.Registry.fromConnectionString(t);this._outputChannel.show(),this.outputLine(a.Constants.IoTHubDeviceTwinLabel,`Get Device Twin for [${e}]...`),r.getTwin(e,(e,t)=>{e?this.outputLine(a.Constants.IoTHubDeviceTwinLabel,`Failed to get Device Twin: ${e.message}`):(this.outputLine(a.Constants.IoTHubDeviceTwinLabel,"Device Twin retrieved successfully"),u.Utility.writeJson(a.Constants.DeviceTwinJosnFilePath,t),o.workspace.openTextDocument(a.Constants.DeviceTwinJosnFilePath).then(e=>{e.isDirty&&o.window.showWarningMessage(`Your ${a.Constants.DeviceTwinJosnFileName} has unsaved changes.                         Please close or save the file. Then try again.`),o.window.showTextDocument(e)}))})})}updateDeviceTwin(){return n(this,void 0,void 0,function*(){c.TelemetryClient.sendEvent(a.Constants.IoTHubAIUpdateDeviceTwinEvent);let e=yield u.Utility.getConnectionString(a.Constants.IotHubConnectionStringKey,a.Constants.IotHubConnectionStringTitle);if(e)try{this._outputChannel.show();let t=yield u.Utility.readFromActiveFile(a.Constants.DeviceTwinJosnFileName);if(!t)return;let r=JSON.parse(t);this.outputLine(a.Constants.IoTHubDeviceTwinLabel,`Update Device Twin for [${r.deviceId}]...`),i.Registry.fromConnectionString(e).updateTwin(r.deviceId,t,r.etag,e=>{e?this.outputLine(a.Constants.IoTHubDeviceTwinLabel,`Failed to update Device Twin: ${e.message}`):(this.outputLine(a.Constants.IoTHubDeviceTwinLabel,"Device Twin updated successfully"),this.getDeviceTwinById(r.deviceId))})}catch(e){return void this.outputLine(a.Constants.IoTHubDeviceTwinLabel,`Failed to update Device Twin: ${e}`)}})}}},function(e,t,r){"use strict";var n=this&&this.__awaiter||function(e,t,r,n){return new(r||(r=Promise))(function(i,o){function fulfilled(e){try{step(n.next(e))}catch(e){o(e)}}function rejected(e){try{step(n.throw(e))}catch(e){o(e)}}function step(e){e.done?i(e.value):new r(function(t){t(e.value)}).then(fulfilled,rejected)}step((n=n.apply(e,t||[])).next())})};Object.defineProperty(t,"__esModule",{value:!0});const i=r(67),o=r(10),s=r(68),a=r(16),c=r(18),u=r(25);t.IotHubDirectMethodExplorer=class IotHubDirectMethodExplorer extends s.BaseExplorer{constructor(e){super(e)}invokeDeviceDirectMethod(e){return n(this,void 0,void 0,function*(){let t=yield u.Utility.getConnectionString(a.Constants.IotHubConnectionStringKey,a.Constants.IotHubConnectionStringTitle);t&&(e=yield u.Utility.getInputDevice(e,a.Constants.IoTHubAIInvokeDeviceMethodEvent))&&this.invokeDirectMethod(t,e.deviceId)})}invokeModuleDirectMethod(e){return n(this,void 0,void 0,function*(){let t=yield u.Utility.getConnectionString(a.Constants.IotHubConnectionStringKey,a.Constants.IotHubConnectionStringTitle);t&&(c.TelemetryClient.sendEvent(a.Constants.IoTHubAIInvokeModuleMethodEvent),this.invokeDirectMethod(t,e.deviceId,e.moduleId))})}invokeDirectMethod(e,t,r){const n=r?`[${t}/${r}]`:`[${t}]`;o.window.showInputBox({prompt:`Enter [Method Name] sent to ${n}`,ignoreFocusOut:!0}).then(s=>{void 0!==s&&o.window.showInputBox({prompt:`Enter [Payload] sent to ${n}`,ignoreFocusOut:!0}).then(o=>{if(void 0===o)return;try{o=JSON.parse(o)}catch(e){}const c={methodName:s,payload:o,responseTimeoutInSeconds:10,connectTimeoutInSeconds:10},u=i.Client.fromConnectionString(e);this._outputChannel.show(),this.outputLine(a.Constants.IoTHubDirectMethodLabel,`Invoking Direct Method [${s}] to ${n} ...`),u.open(e=>{e?this.outputLine(a.Constants.IoTHubDirectMethodLabel,e.message):this.invokeDirectMethodWithServiceClient(u,t,c,(e,t)=>{e?this.outputLine(a.Constants.IoTHubDirectMethodLabel,`Failed to invoke Direct Method: ${e.message}`):(this.outputLine(a.Constants.IoTHubDirectMethodLabel,`Response from ${n}:`),this._outputChannel.appendLine(JSON.stringify(t,null,2)))},r)})})})}invokeDirectMethodWithServiceClient(e,t,r,n,i){i?e.invokeDeviceMethod(t,i,r,n):e.invokeDeviceMethod(t,r,n)}}},function(e,t,r){"use strict";var n=this&&this.__awaiter||function(e,t,r,n){return new(r||(r=Promise))(function(i,o){function fulfilled(e){try{step(n.next(e))}catch(e){o(e)}}function rejected(e){try{step(n.throw(e))}catch(e){o(e)}}function step(e){e.done?i(e.value):new r(function(t){t(e.value)}).then(fulfilled,rejected)}step((n=n.apply(e,t||[])).next())})};Object.defineProperty(t,"__esModule",{value:!0});const i=r(496),o=r(88),s=r(438),a=r(10),c=r(16),u=r(244),l=r(18),p=r(25);t.IoTHubMessageExplorer=class IoTHubMessageExplorer extends u.IoTHubMessageBaseExplorer{constructor(e){super(e,"$(primitive-square) Stop Monitoring built-in event endpoint","azure-iot-toolkit.stopMonitorIoTHubMessage")}sendD2CMessage(e){return n(this,void 0,void 0,function*(){if(!(e=yield p.Utility.getInputDevice(e,c.Constants.IoTHubAIMessageStartEvent))||!e.connectionString)return;const t=e.connectionString;a.window.showInputBox({prompt:`Enter message to send to ${c.Constants.IoTHub}`,ignoreFocusOut:!0}).then(e=>{if(void 0!==e){this._outputChannel.show();try{let r=s.clientFromConnectionString(t),n=p.Utility.getConfig(c.Constants.IoTHubD2CMessageStringifyKey);r.sendEvent(new o.Message(n?JSON.stringify(e):e),this.sendEventDone(r,c.Constants.IoTHubMessageLabel,c.Constants.IoTHub,c.Constants.IoTHubAIMessageDoneEvent))}catch(e){this.outputLine(c.Constants.IoTHubMessageLabel,e)}}})})}startMonitorIoTHubMessage(e){return n(this,void 0,void 0,function*(){if(this._isMonitoring)return this._outputChannel.show(),void this.outputLine(c.Constants.IoTHubMonitorLabel,"There is a running job to monitor built-in event endpoint. Please stop it first.");let t=yield p.Utility.getConnectionString(c.Constants.IotHubConnectionStringKey,c.Constants.IotHubConnectionStringTitle);if(!t)return;let r=p.Utility.getConfiguration().get(c.Constants.IoTHubConsumerGroup);try{this._outputChannel.show();const n=e?`device [${e.deviceId}]`:"all devices";this.outputLine(c.Constants.IoTHubMonitorLabel,`Start monitoring message arrived in built-in endpoint for ${n} ...`),this._eventHubClient=yield i.EventHubClient.createFromIotHubConnectionString(t),l.TelemetryClient.sendEvent(c.Constants.IoTHubAIStartMonitorEvent,{deviceType:e?e.contextValue:""}),yield this.startMonitor(c.Constants.IoTHubMonitorLabel,r,e),this.updateMonitorStatus(!0)}catch(e){this.updateMonitorStatus(!1),this.outputLine(c.Constants.IoTHubMonitorLabel,e),l.TelemetryClient.sendEvent(c.Constants.IoTHubAIStartMonitorEvent,{Result:"Exception",Message:e})}})}stopMonitorIoTHubMessage(){this.stopMonitorEventHubEndpoint(c.Constants.IoTHubMonitorLabel,c.Constants.IoTHubAIStopMonitorEvent,this._eventHubClient,"built-in event endpoint")}startMonitor(e,t,r){return n(this,void 0,void 0,function*(){if(this._eventHubClient){const n=p.Utility.getConfiguration().get("monitorD2CBeforeNowInMinutes"),o=new Date(Date.now()-6e4*n);(yield this._eventHubClient.getPartitionIds()).forEach(n=>{this.outputLine(e,`Created partition receiver [${n}] for consumerGroup [${t}]`),this._eventHubClient.receive(n,this.printMessage(this._outputChannel,e,r),this.printError(this._outputChannel,e),{eventPosition:i.EventPosition.fromEnqueuedTime(o),consumerGroup:t})})}})}printError(e,t){return e=>n(this,void 0,void 0,function*(){this.outputLine(t,e.message),this._isMonitoring&&(yield this._eventHubClient.close(),this.outputLine(t,"Message monitoring stopped. Please try to start monitoring again or use a different consumer group to monitor."),this.updateMonitorStatus(!1))})}printMessage(e,t,r){return e=>n(this,void 0,void 0,function*(){const n=e.annotations["iothub-connection-device-id"],i=e.annotations["iothub-connection-module-id"];if(r&&r.deviceId!==n)return;const o=p.Utility.getMessageFromEventData(e),s=p.Utility.getTimeMessageFromEventData(e),a=i?`${n}/${i}`:n;this.outputLine(t,`${s}Message received from [${a}]:`),this._outputChannel.appendLine(JSON.stringify(o,null,2))})}}},function(e,t,r){"use strict";var n=this&&this.__awaiter||function(e,t,r,n){return new(r||(r=Promise))(function(i,o){function fulfilled(e){try{step(n.next(e))}catch(e){o(e)}}function rejected(e){try{step(n.throw(e))}catch(e){o(e)}}function step(e){e.done?i(e.value):new r(function(t){t(e.value)}).then(fulfilled,rejected)}step((n=n.apply(e,t||[])).next())})};Object.defineProperty(t,"__esModule",{value:!0});const i=r(67),o=r(10),s=r(68),a=r(16),c=r(18),u=r(25);t.IotHubModuleExplorer=class IotHubModuleExplorer extends s.BaseExplorer{constructor(e){super(e)}getModule(e){return n(this,void 0,void 0,function*(){c.TelemetryClient.sendEvent(a.Constants.IoTHubAIGetModuleStartEvent);const t=yield u.Utility.getConnectionString(a.Constants.IotHubConnectionStringKey,a.Constants.IotHubConnectionStringTitle);if(!t)return;const r=i.Registry.fromConnectionString(t);this._outputChannel.show(),this.outputLine("Module",`Querying module [${e.deviceId}/${e.moduleId}]...`),r.getModule(e.deviceId,e.moduleId,(e,t)=>{e&&(this.outputLine("Module",`Error: ${e.message}`),c.TelemetryClient.sendEvent(a.Constants.IoTHubAIDGetModuleDoneEvent,{Result:"Fail",Message:e.message})),t&&(this.outputLine("Module",`Module info: ${JSON.stringify(t,null,2)}`),c.TelemetryClient.sendEvent(a.Constants.IoTHubAIDGetModuleDoneEvent,{Result:"Success"}))})})}createModule(e){return n(this,void 0,void 0,function*(){const t=yield u.Utility.getInputDevice(e?e.deviceItem:void 0,a.Constants.IoTHubAICreateModuleStartEvent);if(!t)return;const r=yield u.Utility.getConnectionString(a.Constants.IotHubConnectionStringKey,a.Constants.IotHubConnectionStringTitle);if(!r)return;const n=i.Registry.fromConnectionString(r),s=yield o.window.showInputBox({prompt:"Enter Module ID to create",ignoreFocusOut:!0});s&&(this._outputChannel.show(),this.outputLine("Module",`Creating '${s}'`),n.addModule({deviceId:t.deviceId,moduleId:s},(t,r)=>{t?(this.outputLine("Module",`Error: ${t.message}`),c.TelemetryClient.sendEvent(a.Constants.IoTHubAICreateModuleDoneEvent,{Result:"Fail",Message:t.message})):(this.outputLine("Module",`Created: ${JSON.stringify(r,null,2)}`),o.commands.executeCommand("azure-iot-toolkit.refresh",e),c.TelemetryClient.sendEvent(a.Constants.IoTHubAICreateModuleDoneEvent,{Result:"Success"}))}))})}copyModuleConnectionString(e){return n(this,void 0,void 0,function*(){c.TelemetryClient.sendEvent("AZ.Copy.ModuleConnectionString"),e.connectionString&&(yield o.env.clipboard.writeText(e.connectionString))})}deleteModule(e){return n(this,void 0,void 0,function*(){c.TelemetryClient.sendEvent(a.Constants.IoTHubAIDeleteModuleStartEvent);const t=yield u.Utility.getConnectionString(a.Constants.IotHubConnectionStringKey,a.Constants.IotHubConnectionStringTitle);if(!t)return;if((yield o.window.showWarningMessage(`${a.Constants.DeleteMessage} "${e.moduleItem.moduleId}"?`,{modal:!0},a.Constants.DeleteLabel))!==a.Constants.DeleteLabel)return;const r=i.Registry.fromConnectionString(t);this._outputChannel.show(),this.outputLine("Module",`Deleting '${e.moduleItem.moduleId}'`),r.removeModule(e.moduleItem.deviceId,e.moduleItem.moduleId,t=>{t?(this.outputLine("Module",`Error: ${t.message}`),c.TelemetryClient.sendEvent(a.Constants.IoTHubAIDeleteModuleDoneEvent,{Result:"Fail",Message:t.message})):(this.outputLine("Module",`Deleted '${e.moduleItem.moduleId}'`),o.commands.executeCommand("azure-iot-toolkit.refresh",e.moduleLabelNode),c.TelemetryClient.sendEvent(a.Constants.IoTHubAIDeleteModuleDoneEvent,{Result:"Success"}))})})}}},function(e,t,r){"use strict";var n=this&&this.__awaiter||function(e,t,r,n){return new(r||(r=Promise))(function(i,o){function fulfilled(e){try{step(n.next(e))}catch(e){o(e)}}function rejected(e){try{step(n.throw(e))}catch(e){o(e)}}function step(e){e.done?i(e.value):new r(function(t){t(e.value)}).then(fulfilled,rejected)}step((n=n.apply(e,t||[])).next())})};Object.defineProperty(t,"__esModule",{value:!0});const i=r(477),o=r(1218),s=r(10),a=r(68),c=r(16),u=r(1295),l=r(1296),p=r(1297),d=r(1298),h=r(18),f=r(25);t.IoTHubResourceExplorer=class IoTHubResourceExplorer extends a.BaseExplorer{constructor(e){super(e),this.accountApi=f.Utility.getAzureAccountApi()}createIoTHub(e=this._outputChannel,t,r){return n(this,void 0,void 0,function*(){if(h.TelemetryClient.sendEvent(c.Constants.IoTHubAICreateStartEvent),!(yield this.waitForLogin()))return;const o=yield this.getOrSelectSubscriptionItem(e,t);if(!o)return;if(!r){const t=yield this.getOrCreateResourceGroup(o);if(!t)return;r=t.resourceGroup.name,e.show(),e.appendLine(`Resource Group selected: ${r}`)}const a=yield s.window.showQuickPick(this.getLocationItems(o),{placeHolder:"Select a location to create your IoT Hub in...",ignoreFocusOut:!0});if(!a)return;e.show(),e.appendLine(`Location selected: ${a.label}`);const u={"S1: Standard tier":"S1","S2: Standard tier":"S2","S3: Standard tier":"S3","B1: Basic tier":"B1","B2: Basic tier":"B2","B3: Basic tier":"B3","F1: Free tier":"F1"},l=yield s.window.showQuickPick(Object.keys(u),{placeHolder:"Select pricing and scale tier for your IoT Hub...",ignoreFocusOut:!0});if(!l)return;e.appendLine(`Pricing and scale tier selected: ${l}`);const p=yield this.getIoTHubName(o);return p?s.window.withProgress({title:`Creating IoT Hub '${p}'`,location:s.ProgressLocation.Notification},t=>n(this,void 0,void 0,function*(){e.appendLine(`Creating IoT Hub: ${p}`);const t=setInterval(()=>{e.append(".")},1e3),{session:s,subscription:d}=o,m=new i.IotHubClient(s.credentials,d.subscriptionId,s.environment.resourceManagerEndpointUrl),g={location:a.location.name,subscriptionid:d.subscriptionId,resourcegroup:r,sku:{name:u[l],capacity:1}};return m.iotHubResource.createOrUpdate(r,p,g).then(r=>n(this,void 0,void 0,function*(){clearInterval(t),e.appendLine("");const n=yield this.getIoTHubConnectionString(o,r);return e.appendLine(`IoT Hub '${p}' is created.`),yield this.updateIoTHubConnectionString(n),r.iotHubConnectionString=n,h.TelemetryClient.sendEvent(c.Constants.IoTHubAICreateDoneEvent,{Result:"Success"},n),yield f.Utility.storeIoTHubInfo(o,r),r})).catch(r=>{let n;return clearInterval(t),e.appendLine(""),n=r.message?r.message:r.body&&r.body.message?r.body.message:"Error occurred when creating IoT Hub.",e.appendLine(n),h.TelemetryClient.sendEvent(c.Constants.IoTHubAICreateDoneEvent,{Result:"Fail",Message:n}),Promise.reject(r)})})):void 0})}selectIoTHub(e=this._outputChannel,t){return n(this,void 0,void 0,function*(){if(h.TelemetryClient.sendEvent("General.Select.IoTHub.Start"),!(yield this.waitForLogin()))return;h.TelemetryClient.sendEvent("General.Select.Subscription.Start");const r=yield this.getOrSelectSubscriptionItem(e,t);if(!r)return;h.TelemetryClient.sendEvent("General.Select.Subscription.Done");const n=yield this.selectIoTHubItem(r);if(n){e.show(),e.appendLine(`IoT Hub selected: ${n.label}`);const t=yield this.getIoTHubConnectionString(r,n.iotHubDescription);return yield this.updateIoTHubConnectionString(t),n.iotHubDescription.iotHubConnectionString=t,h.TelemetryClient.sendEvent("AZ.Select.IoTHub.Done",void 0,t),yield f.Utility.storeIoTHubInfo(r,n.iotHubDescription),n.iotHubDescription}})}copyIoTHubConnectionString(){return n(this,void 0,void 0,function*(){h.TelemetryClient.sendEvent("AZ.Copy.IotHubConnectionString");const e=f.Utility.getConnectionStringWithId(c.Constants.IotHubConnectionStringKey);e&&(yield s.env.clipboard.writeText(e))})}copyDeviceConnectionString(e){return n(this,void 0,void 0,function*(){(e=yield f.Utility.getInputDevice(e,"AZ.Copy.DeviceConnectionString"))&&e.connectionString&&(yield s.env.clipboard.writeText(e.connectionString))})}generateSasTokenForIotHub(){return n(this,void 0,void 0,function*(){h.TelemetryClient.sendEvent("AZ.Generate.SasToken.Service");const e=yield f.Utility.getConnectionString(c.Constants.IotHubConnectionStringKey,c.Constants.IotHubConnectionStringTitle);e&&this.generateSasToken(f.Utility.generateSasTokenForService,e,"IoT Hub")})}generateSasTokenForDevice(e){return n(this,void 0,void 0,function*(){(e=yield f.Utility.getInputDevice(e,"AZ.Generate.SasToken.Device"))&&e.connectionString&&this.generateSasToken(f.Utility.generateSasTokenForDevice,e.connectionString,e.deviceId)})}generateSasToken(e,t,r){return n(this,void 0,void 0,function*(){const n=yield s.window.showInputBox({prompt:"Enter expiration time (hours)",ignoreFocusOut:!0,validateInput:e=>{if(!e||isNaN(parseFloat(e)))return"Provided expiration time is not a number, enter correct expiration time (hours)."}}),i=e(t,parseFloat(n));yield s.env.clipboard.writeText(i),this._outputChannel.show(),this.outputLine("SASToken",`SAS token for [${r}] is generated and copied to clipboard:`),this._outputChannel.appendLine(i)})}waitForLogin(){return n(this,void 0,void 0,function*(){return!!(yield this.accountApi.waitForLogin())||(h.TelemetryClient.sendEvent("General.AskForAzureLogin"),yield s.commands.executeCommand("azure-account.askForLogin"),this.accountApi.waitForLogin())})}loadSubscriptionItems(e){return n(this,void 0,void 0,function*(){yield e.waitForFilters();const t=e.filters.map(e=>new d.SubscriptionItem(e.subscription,e.session));return h.TelemetryClient.sendEvent("General.Load.Subscription",{SubscriptionCount:t.length.toString()}),0===t.length&&s.window.showInformationMessage("No subscription found, click an Azure account at the bottom left corner and choose Select All."),t})}loadIoTHubItems(e){return n(this,void 0,void 0,function*(){const t=[],{session:r,subscription:n}=e,o=new i.IotHubClient(r.credentials,n.subscriptionId,r.environment.resourceManagerEndpointUrl),s=yield o.iotHubResource.listBySubscription();return t.push(...s.map(e=>new u.IotHubItem(e))),t.sort((e,t)=>e.label.localeCompare(t.label)),h.TelemetryClient.sendEvent("General.Load.IoTHub",{IoTHubCount:t.length.toString()}),t})}selectIoTHubItem(e){return n(this,void 0,void 0,function*(){const t=this.loadIoTHubItems(e);let r,n=3;do{const e=(new Date).getTime();if(!(void 0===(r=yield s.window.showQuickPick(t,{placeHolder:"Select IoT Hub",ignoreFocusOut:!0}))&&(new Date).getTime()-e<500))return r;n--}while(n>0);return r})}updateIoTHubConnectionString(e){return n(this,void 0,void 0,function*(){const t=f.Utility.getConfiguration();yield t.update(c.Constants.IotHubConnectionStringKey,e,!0),s.commands.executeCommand("azure-iot-toolkit.refresh")})}getIoTHubConnectionString(e,t){return n(this,void 0,void 0,function*(){const{session:r,subscription:n}=e;return new i.IotHubClient(r.credentials,n.subscriptionId,r.environment.resourceManagerEndpointUrl).iotHubResource.getKeysForKeyName(f.Utility.getResourceGroupNameFromId(t.id),t.name,"iothubowner").then(e=>`HostName=${t.properties.hostName};SharedAccessKeyName=${e.keyName};SharedAccessKey=${e.primaryKey}`)})}getOrSelectSubscriptionItem(e,t){return n(this,void 0,void 0,function*(){if(t){let e=this.accountApi.subscriptions.find(e=>e.subscription.subscriptionId===t);if(e)return new d.SubscriptionItem(e.subscription,e.session)}else{const t=yield s.window.showQuickPick(this.loadSubscriptionItems(this.accountApi),{placeHolder:"Select Subscription",ignoreFocusOut:!0});if(t)return e.show(),e.appendLine(`Subscription selected: ${t.label}`),t}})}getOrCreateResourceGroup(e){return n(this,void 0,void 0,function*(){const t=yield s.window.showQuickPick(this.getResourceGroupItems(e),{placeHolder:"Select a resource group to create your IoT Hub in...",ignoreFocusOut:!0});if(t){if(t instanceof p.ResourceGroupItem)return t;{const t=yield this.createResourceGroup(e);if(t)return new p.ResourceGroupItem(t)}}return null})}getResourceGroupItems(e){return n(this,void 0,void 0,function*(){const t=new o.ResourceManagementClient(e.session.credentials,e.subscription.subscriptionId,e.session.environment.resourceManagerEndpointUrl),r=yield t.resourceGroups.list();return[{label:"$(plus) Create Resource Group",description:null}].concat(r.map(e=>new p.ResourceGroupItem(e)))})}getLocationItems(e){return n(this,void 0,void 0,function*(){const t=new o.SubscriptionClient(e.session.credentials,e.session.environment.resourceManagerEndpointUrl);return(yield t.subscriptions.listLocations(e.subscription.subscriptionId)).map(e=>new l.LocationItem(e))})}getIoTHubName(e){return n(this,void 0,void 0,function*(){const t=new i.IotHubClient(e.session.credentials,e.subscription.subscriptionId,e.session.environment.resourceManagerEndpointUrl);for(;;){const e=yield s.window.showInputBox({placeHolder:"IoT Hub name",prompt:"Provide IoT Hub name",validateInput:this.validateIoTHubName,ignoreFocusOut:!0});if(!e)break;try{if((yield t.iotHubResource.checkNameAvailability(e)).nameAvailable)return e;yield s.window.showErrorMessage(`IoT Hub name '${e}' is not available.`)}catch(e){yield s.window.showErrorMessage(e.message)}}})}validateIoTHubName(e){return!e||e.length<3||e.length>50?"The name must be between 3 and 50 characters long.":e.match(/[^a-zA-Z0-9-]/)?"The name must contain only alphanumeric characters or -":e.startsWith("-")?"The name must not start with -":e.endsWith("-")?"The name must not end with -":null}createResourceGroup(e){return n(this,void 0,void 0,function*(){const t=yield s.window.showInputBox({placeHolder:"Resource Group Name",prompt:"Provide a resource group name",validateInput:this.validateResourceGroupName,ignoreFocusOut:!0});if(t){const r=yield s.window.showQuickPick(this.getLocationItems(e),{placeHolder:"Select a location to create your Resource Group in...",ignoreFocusOut:!0});if(r)return s.window.withProgress({title:`Creating resource group '${t}'`,location:s.ProgressLocation.Notification},i=>n(this,void 0,void 0,function*(){return new o.ResourceManagementClient(e.session.credentials,e.subscription.subscriptionId,e.session.environment.resourceManagerEndpointUrl).resourceGroups.createOrUpdate(t,{location:r.location.name})}))}return null})}validateResourceGroupName(e){return!e||e.length<1||e.length>90?"The name must be between 1 and 90 characters long.":e.match(/[^a-zA-Z0-9\.\_\-\(\)]/)?"The name must contain only alphanumeric characters or the symbols ._-()":e.endsWith(".")?"The name must not end in a period.":null}}},function(e,t,r){"use strict";e.exports=class CertificateVerificationDescription{constructor(){}mapper(){return{required:!1,serializedName:"CertificateVerificationDescription",type:{name:"Composite",className:"CertificateVerificationDescription",modelProperties:{certificate:{required:!1,serializedName:"certificate",type:{name:"String"}}}}}}}},function(e,t,r){"use strict";e.exports=class CertificateProperties{constructor(){}mapper(){return{required:!1,serializedName:"CertificateProperties",type:{name:"Composite",className:"CertificateProperties",modelProperties:{subject:{required:!1,readOnly:!0,serializedName:"subject",type:{name:"String"}},expiry:{required:!1,readOnly:!0,serializedName:"expiry",type:{name:"DateTimeRfc1123"}},thumbprint:{required:!1,readOnly:!0,serializedName:"thumbprint",type:{name:"String"}},isVerified:{required:!1,readOnly:!0,serializedName:"isVerified",type:{name:"Boolean"}},created:{required:!1,readOnly:!0,serializedName:"created",type:{name:"DateTimeRfc1123"}},updated:{required:!1,readOnly:!0,serializedName:"updated",type:{name:"DateTimeRfc1123"}},certificate:{required:!1,serializedName:"certificate",type:{name:"String"}}}}}}}},function(e,t,r){"use strict";const n=r(105);e.exports=class CertificateDescription extends n.BaseResource{constructor(){super()}mapper(){return{required:!1,serializedName:"CertificateDescription",type:{name:"Composite",className:"CertificateDescription",modelProperties:{properties:{required:!1,serializedName:"properties",type:{name:"Composite",className:"CertificateProperties"}},id:{required:!1,readOnly:!0,serializedName:"id",type:{name:"String"}},name:{required:!1,readOnly:!0,serializedName:"name",type:{name:"String"}},etag:{required:!1,readOnly:!0,serializedName:"etag",type:{name:"String"}},type:{required:!1,readOnly:!0,serializedName:"type",type:{name:"String"}}}}}}}},function(e,t,r){"use strict";e.exports=class CertificateListDescription{constructor(){}mapper(){return{required:!1,serializedName:"CertificateListDescription",type:{name:"Composite",className:"CertificateListDescription",modelProperties:{value:{required:!1,serializedName:"value",type:{name:"Sequence",element:{required:!1,serializedName:"CertificateDescriptionElementType",type:{name:"Composite",className:"CertificateDescription"}}}}}}}}}},function(e,t,r){"use strict";e.exports=class CertificateBodyDescription{constructor(){}mapper(){return{required:!1,serializedName:"CertificateBodyDescription",type:{name:"Composite",className:"CertificateBodyDescription",modelProperties:{certificate:{required:!1,serializedName:"certificate",type:{name:"String"}}}}}}}},function(e,t,r){"use strict";e.exports=class CertificatePropertiesWithNonce{constructor(){}mapper(){return{required:!1,serializedName:"CertificatePropertiesWithNonce",type:{name:"Composite",className:"CertificatePropertiesWithNonce",modelProperties:{subject:{required:!1,readOnly:!0,serializedName:"subject",type:{name:"String"}},expiry:{required:!1,readOnly:!0,serializedName:"expiry",type:{name:"DateTimeRfc1123"}},thumbprint:{required:!1,readOnly:!0,serializedName:"thumbprint",type:{name:"String"}},isVerified:{required:!1,readOnly:!0,serializedName:"isVerified",type:{name:"Boolean"}},created:{required:!1,readOnly:!0,serializedName:"created",type:{name:"DateTimeRfc1123"}},updated:{required:!1,readOnly:!0,serializedName:"updated",type:{name:"DateTimeRfc1123"}},verificationCode:{required:!1,readOnly:!0,serializedName:"verificationCode",type:{name:"String"}},certificate:{required:!1,readOnly:!0,serializedName:"certificate",type:{name:"String"}}}}}}}},function(e,t,r){"use strict";const n=r(105);e.exports=class CertificateWithNonceDescription extends n.BaseResource{constructor(){super()}mapper(){return{required:!1,serializedName:"CertificateWithNonceDescription",type:{name:"Composite",className:"CertificateWithNonceDescription",modelProperties:{properties:{required:!1,serializedName:"properties",type:{name:"Composite",className:"CertificatePropertiesWithNonce"}},id:{required:!1,readOnly:!0,serializedName:"id",type:{name:"String"}},name:{required:!1,readOnly:!0,serializedName:"name",type:{name:"String"}},etag:{required:!1,readOnly:!0,serializedName:"etag",type:{name:"String"}},type:{required:!1,readOnly:!0,serializedName:"type",type:{name:"String"}}}}}}}},function(e,t,r){"use strict";e.exports=class SharedAccessSignatureAuthorizationRule{constructor(){}mapper(){return{required:!1,serializedName:"SharedAccessSignatureAuthorizationRule",type:{name:"Composite",className:"SharedAccessSignatureAuthorizationRule",modelProperties:{keyName:{required:!0,serializedName:"keyName",type:{name:"String"}},primaryKey:{required:!1,serializedName:"primaryKey",type:{name:"String"}},secondaryKey:{required:!1,serializedName:"secondaryKey",type:{name:"String"}},rights:{required:!0,serializedName:"rights",type:{name:"Enum",allowedValues:["RegistryRead","RegistryWrite","ServiceConnect","DeviceConnect","RegistryRead, RegistryWrite","RegistryRead, ServiceConnect","RegistryRead, DeviceConnect","RegistryWrite, ServiceConnect","RegistryWrite, DeviceConnect","ServiceConnect, DeviceConnect","RegistryRead, RegistryWrite, ServiceConnect","RegistryRead, RegistryWrite, DeviceConnect","RegistryRead, ServiceConnect, DeviceConnect","RegistryWrite, ServiceConnect, DeviceConnect","RegistryRead, RegistryWrite, ServiceConnect, DeviceConnect"]}}}}}}}},function(e,t,r){"use strict";e.exports=class IpFilterRule{constructor(){}mapper(){return{required:!1,serializedName:"IpFilterRule",type:{name:"Composite",className:"IpFilterRule",modelProperties:{filterName:{required:!0,serializedName:"filterName",type:{name:"String"}},action:{required:!0,serializedName:"action",type:{name:"Enum",allowedValues:["Accept","Reject"]}},ipMask:{required:!0,serializedName:"ipMask",type:{name:"String"}}}}}}}},function(e,t,r){"use strict";e.exports=class EventHubProperties{constructor(){}mapper(){return{required:!1,serializedName:"EventHubProperties",type:{name:"Composite",className:"EventHubProperties",modelProperties:{retentionTimeInDays:{required:!1,serializedName:"retentionTimeInDays",type:{name:"Number"}},partitionCount:{required:!1,serializedName:"partitionCount",type:{name:"Number"}},partitionIds:{required:!1,readOnly:!0,serializedName:"partitionIds",type:{name:"Sequence",element:{required:!1,serializedName:"StringElementType",type:{name:"String"}}}},path:{required:!1,readOnly:!0,serializedName:"path",type:{name:"String"}},endpoint:{required:!1,readOnly:!0,serializedName:"endpoint",type:{name:"String"}}}}}}}},function(e,t,r){"use strict";e.exports=class RoutingServiceBusQueueEndpointProperties{constructor(){}mapper(){return{required:!1,serializedName:"RoutingServiceBusQueueEndpointProperties",type:{name:"Composite",className:"RoutingServiceBusQueueEndpointProperties",modelProperties:{connectionString:{required:!0,serializedName:"connectionString",type:{name:"String"}},name:{required:!0,serializedName:"name",constraints:{Pattern:"^[A-Za-z0-9-._]{1,64}$"},type:{name:"String"}},subscriptionId:{required:!1,serializedName:"subscriptionId",type:{name:"String"}},resourceGroup:{required:!1,serializedName:"resourceGroup",type:{name:"String"}}}}}}}},function(e,t,r){"use strict";e.exports=class RoutingServiceBusTopicEndpointProperties{constructor(){}mapper(){return{required:!1,serializedName:"RoutingServiceBusTopicEndpointProperties",type:{name:"Composite",className:"RoutingServiceBusTopicEndpointProperties",modelProperties:{connectionString:{required:!0,serializedName:"connectionString",type:{name:"String"}},name:{required:!0,serializedName:"name",constraints:{Pattern:"^[A-Za-z0-9-._]{1,64}$"},type:{name:"String"}},subscriptionId:{required:!1,serializedName:"subscriptionId",type:{name:"String"}},resourceGroup:{required:!1,serializedName:"resourceGroup",type:{name:"String"}}}}}}}},function(e,t,r){"use strict";e.exports=class RoutingEventHubProperties{constructor(){}mapper(){return{required:!1,serializedName:"RoutingEventHubProperties",type:{name:"Composite",className:"RoutingEventHubProperties",modelProperties:{connectionString:{required:!0,serializedName:"connectionString",type:{name:"String"}},name:{required:!0,serializedName:"name",constraints:{Pattern:"^[A-Za-z0-9-._]{1,64}$"},type:{name:"String"}},subscriptionId:{required:!1,serializedName:"subscriptionId",type:{name:"String"}},resourceGroup:{required:!1,serializedName:"resourceGroup",type:{name:"String"}}}}}}}},function(e,t,r){"use strict";e.exports=class RoutingStorageContainerProperties{constructor(){}mapper(){return{required:!1,serializedName:"RoutingStorageContainerProperties",type:{name:"Composite",className:"RoutingStorageContainerProperties",modelProperties:{connectionString:{required:!0,serializedName:"connectionString",type:{name:"String"}},name:{required:!0,serializedName:"name",constraints:{Pattern:"^[A-Za-z0-9-._]{1,64}$"},type:{name:"String"}},subscriptionId:{required:!1,serializedName:"subscriptionId",type:{name:"String"}},resourceGroup:{required:!1,serializedName:"resourceGroup",type:{name:"String"}},containerName:{required:!0,serializedName:"containerName",type:{name:"String"}},fileNameFormat:{required:!1,serializedName:"fileNameFormat",type:{name:"String"}},batchFrequencyInSeconds:{required:!1,serializedName:"batchFrequencyInSeconds",constraints:{InclusiveMaximum:720,InclusiveMinimum:60},type:{name:"Number"}},maxChunkSizeInBytes:{required:!1,serializedName:"maxChunkSizeInBytes",constraints:{InclusiveMaximum:524288e3,InclusiveMinimum:10485760},type:{name:"Number"}},encoding:{required:!1,serializedName:"encoding",type:{name:"String"}}}}}}}},function(e,t,r){"use strict";e.exports=class RoutingEndpoints{constructor(){}mapper(){return{required:!1,serializedName:"RoutingEndpoints",type:{name:"Composite",className:"RoutingEndpoints",modelProperties:{serviceBusQueues:{required:!1,serializedName:"serviceBusQueues",type:{name:"Sequence",element:{required:!1,serializedName:"RoutingServiceBusQueueEndpointPropertiesElementType",type:{name:"Composite",className:"RoutingServiceBusQueueEndpointProperties"}}}},serviceBusTopics:{required:!1,serializedName:"serviceBusTopics",type:{name:"Sequence",element:{required:!1,serializedName:"RoutingServiceBusTopicEndpointPropertiesElementType",type:{name:"Composite",className:"RoutingServiceBusTopicEndpointProperties"}}}},eventHubs:{required:!1,serializedName:"eventHubs",type:{name:"Sequence",element:{required:!1,serializedName:"RoutingEventHubPropertiesElementType",type:{name:"Composite",className:"RoutingEventHubProperties"}}}},storageContainers:{required:!1,serializedName:"storageContainers",type:{name:"Sequence",element:{required:!1,serializedName:"RoutingStorageContainerPropertiesElementType",type:{name:"Composite",className:"RoutingStorageContainerProperties"}}}}}}}}}},function(e,t,r){"use strict";e.exports=class RouteProperties{constructor(){}mapper(){return{required:!1,serializedName:"RouteProperties",type:{name:"Composite",className:"RouteProperties",modelProperties:{name:{required:!0,serializedName:"name",constraints:{Pattern:"^[A-Za-z0-9-._]{1,64}$"},type:{name:"String"}},source:{required:!0,serializedName:"source",type:{name:"String"}},condition:{required:!1,serializedName:"condition",type:{name:"String"}},endpointNames:{required:!0,serializedName:"endpointNames",constraints:{MaxItems:1,MinItems:1},type:{name:"Sequence",element:{required:!1,serializedName:"StringElementType",type:{name:"String"}}}},isEnabled:{required:!0,serializedName:"isEnabled",type:{name:"Boolean"}}}}}}}},function(e,t,r){"use strict";e.exports=class FallbackRouteProperties{constructor(){}mapper(){return{required:!1,serializedName:"FallbackRouteProperties",type:{name:"Composite",className:"FallbackRouteProperties",modelProperties:{name:{required:!1,serializedName:"name",type:{name:"String"}},source:{required:!0,isConstant:!0,serializedName:"source",defaultValue:"DeviceMessages",type:{name:"String"}},condition:{required:!1,serializedName:"condition",type:{name:"String"}},endpointNames:{required:!0,serializedName:"endpointNames",constraints:{MaxItems:1,MinItems:1},type:{name:"Sequence",element:{required:!1,serializedName:"StringElementType",type:{name:"String"}}}},isEnabled:{required:!0,serializedName:"isEnabled",type:{name:"Boolean"}}}}}}}},function(e,t,r){"use strict";e.exports=class RoutingProperties{constructor(){}mapper(){return{required:!1,serializedName:"RoutingProperties",type:{name:"Composite",className:"RoutingProperties",modelProperties:{endpoints:{required:!1,serializedName:"endpoints",type:{name:"Composite",className:"RoutingEndpoints"}},routes:{required:!1,serializedName:"routes",type:{name:"Sequence",element:{required:!1,serializedName:"RoutePropertiesElementType",type:{name:"Composite",className:"RouteProperties"}}}},fallbackRoute:{required:!1,serializedName:"fallbackRoute",type:{name:"Composite",className:"FallbackRouteProperties"}}}}}}}},function(e,t,r){"use strict";e.exports=class StorageEndpointProperties{constructor(){}mapper(){return{required:!1,serializedName:"StorageEndpointProperties",type:{name:"Composite",className:"StorageEndpointProperties",modelProperties:{sasTtlAsIso8601:{required:!1,serializedName:"sasTtlAsIso8601",type:{name:"TimeSpan"}},connectionString:{required:!0,serializedName:"connectionString",type:{name:"String"}},containerName:{required:!0,serializedName:"containerName",type:{name:"String"}}}}}}}},function(e,t,r){"use strict";e.exports=class MessagingEndpointProperties{constructor(){}mapper(){return{required:!1,serializedName:"MessagingEndpointProperties",type:{name:"Composite",className:"MessagingEndpointProperties",modelProperties:{lockDurationAsIso8601:{required:!1,serializedName:"lockDurationAsIso8601",type:{name:"TimeSpan"}},ttlAsIso8601:{required:!1,serializedName:"ttlAsIso8601",type:{name:"TimeSpan"}},maxDeliveryCount:{required:!1,serializedName:"maxDeliveryCount",constraints:{InclusiveMaximum:100,InclusiveMinimum:1},type:{name:"Number"}}}}}}}},function(e,t,r){"use strict";e.exports=class FeedbackProperties{constructor(){}mapper(){return{required:!1,serializedName:"FeedbackProperties",type:{name:"Composite",className:"FeedbackProperties",modelProperties:{lockDurationAsIso8601:{required:!1,serializedName:"lockDurationAsIso8601",type:{name:"TimeSpan"}},ttlAsIso8601:{required:!1,serializedName:"ttlAsIso8601",type:{name:"TimeSpan"}},maxDeliveryCount:{required:!1,serializedName:"maxDeliveryCount",constraints:{InclusiveMaximum:100,InclusiveMinimum:1},type:{name:"Number"}}}}}}}},function(e,t,r){"use strict";e.exports=class CloudToDeviceProperties{constructor(){}mapper(){return{required:!1,serializedName:"CloudToDeviceProperties",type:{name:"Composite",className:"CloudToDeviceProperties",modelProperties:{maxDeliveryCount:{required:!1,serializedName:"maxDeliveryCount",constraints:{InclusiveMaximum:100,InclusiveMinimum:1},type:{name:"Number"}},defaultTtlAsIso8601:{required:!1,serializedName:"defaultTtlAsIso8601",type:{name:"TimeSpan"}},feedback:{required:!1,serializedName:"feedback",type:{name:"Composite",className:"FeedbackProperties"}}}}}}}},function(e,t,r){"use strict";e.exports=class OperationsMonitoringProperties{constructor(){}mapper(){return{required:!1,serializedName:"OperationsMonitoringProperties",type:{name:"Composite",className:"OperationsMonitoringProperties",modelProperties:{events:{required:!1,serializedName:"events",type:{name:"Dictionary",value:{required:!1,serializedName:"OperationMonitoringLevelElementType",type:{name:"String"}}}}}}}}}},function(e,t,r){"use strict";e.exports=class IotHubProperties{constructor(){}mapper(){return{required:!1,serializedName:"IotHubProperties",type:{name:"Composite",className:"IotHubProperties",modelProperties:{authorizationPolicies:{required:!1,serializedName:"authorizationPolicies",type:{name:"Sequence",element:{required:!1,serializedName:"SharedAccessSignatureAuthorizationRuleElementType",type:{name:"Composite",className:"SharedAccessSignatureAuthorizationRule"}}}},ipFilterRules:{required:!1,serializedName:"ipFilterRules",type:{name:"Sequence",element:{required:!1,serializedName:"IpFilterRuleElementType",type:{name:"Composite",className:"IpFilterRule"}}}},provisioningState:{required:!1,readOnly:!0,serializedName:"provisioningState",type:{name:"String"}},state:{required:!1,readOnly:!0,serializedName:"state",type:{name:"String"}},hostName:{required:!1,readOnly:!0,serializedName:"hostName",type:{name:"String"}},eventHubEndpoints:{required:!1,serializedName:"eventHubEndpoints",type:{name:"Dictionary",value:{required:!1,serializedName:"EventHubPropertiesElementType",type:{name:"Composite",className:"EventHubProperties"}}}},routing:{required:!1,serializedName:"routing",type:{name:"Composite",className:"RoutingProperties"}},storageEndpoints:{required:!1,serializedName:"storageEndpoints",type:{name:"Dictionary",value:{required:!1,serializedName:"StorageEndpointPropertiesElementType",type:{name:"Composite",className:"StorageEndpointProperties"}}}},messagingEndpoints:{required:!1,serializedName:"messagingEndpoints",type:{name:"Dictionary",value:{required:!1,serializedName:"MessagingEndpointPropertiesElementType",type:{name:"Composite",className:"MessagingEndpointProperties"}}}},enableFileUploadNotifications:{required:!1,serializedName:"enableFileUploadNotifications",type:{name:"Boolean"}},cloudToDevice:{required:!1,serializedName:"cloudToDevice",type:{name:"Composite",className:"CloudToDeviceProperties"}},comments:{required:!1,serializedName:"comments",type:{name:"String"}},operationsMonitoringProperties:{required:!1,serializedName:"operationsMonitoringProperties",type:{name:"Composite",className:"OperationsMonitoringProperties"}},features:{required:!1,serializedName:"features",type:{name:"String"}}}}}}}},function(e,t,r){"use strict";e.exports=class IotHubSkuInfo{constructor(){}mapper(){return{required:!1,serializedName:"IotHubSkuInfo",type:{name:"Composite",className:"IotHubSkuInfo",modelProperties:{name:{required:!0,serializedName:"name",type:{name:"String"}},tier:{required:!1,readOnly:!0,serializedName:"tier",type:{name:"Enum",allowedValues:["Free","Standard","Basic"]}},capacity:{required:!1,serializedName:"capacity",type:{name:"Number"}}}}}}}},function(e,t,r){"use strict";const n=r(105);e.exports=class Resource extends n.BaseResource{constructor(){super()}mapper(){return{required:!1,serializedName:"Resource",type:{name:"Composite",className:"Resource",modelProperties:{id:{required:!1,readOnly:!0,serializedName:"id",type:{name:"String"}},name:{required:!1,readOnly:!0,serializedName:"name",constraints:{Pattern:"^(?![0-9]+$)(?!-)[a-zA-Z0-9-]{2,49}[a-zA-Z0-9]$"},type:{name:"String"}},type:{required:!1,readOnly:!0,serializedName:"type",type:{name:"String"}},location:{required:!0,serializedName:"location",type:{name:"String"}},tags:{required:!1,serializedName:"tags",type:{name:"Dictionary",value:{required:!1,serializedName:"StringElementType",type:{name:"String"}}}}}}}}}},function(e,t,r){"use strict";const n=r(105);e.exports=class IotHubDescription extends n.Resource{constructor(){super()}mapper(){return{required:!1,serializedName:"IotHubDescription",type:{name:"Composite",className:"IotHubDescription",modelProperties:{id:{required:!1,readOnly:!0,serializedName:"id",type:{name:"String"}},name:{required:!1,readOnly:!0,serializedName:"name",constraints:{Pattern:"^(?![0-9]+$)(?!-)[a-zA-Z0-9-]{2,49}[a-zA-Z0-9]$"},type:{name:"String"}},type:{required:!1,readOnly:!0,serializedName:"type",type:{name:"String"}},location:{required:!0,serializedName:"location",type:{name:"String"}},tags:{required:!1,serializedName:"tags",type:{name:"Dictionary",value:{required:!1,serializedName:"StringElementType",type:{name:"String"}}}},etag:{required:!1,serializedName:"etag",type:{name:"String"}},properties:{required:!1,serializedName:"properties",type:{name:"Composite",className:"IotHubProperties"}},sku:{required:!0,serializedName:"sku",type:{name:"Composite",className:"IotHubSkuInfo"}}}}}}}},function(e,t,r){"use strict";e.exports=class OperationDisplay{constructor(){}mapper(){return{required:!1,serializedName:"Operation_display",type:{name:"Composite",className:"OperationDisplay",modelProperties:{provider:{required:!1,readOnly:!0,serializedName:"provider",type:{name:"String"}},resource:{required:!1,readOnly:!0,serializedName:"resource",type:{name:"String"}},operation:{required:!1,readOnly:!0,serializedName:"operation",type:{name:"String"}}}}}}}},function(e,t,r){"use strict";e.exports=class Operation{constructor(){}mapper(){return{required:!1,serializedName:"Operation",type:{name:"Composite",className:"Operation",modelProperties:{name:{required:!1,readOnly:!0,serializedName:"name",type:{name:"String"}},display:{required:!1,serializedName:"display",type:{name:"Composite",className:"OperationDisplay"}}}}}}}},function(e,t,r){"use strict";e.exports=class ErrorDetails{constructor(){}mapper(){return{required:!1,serializedName:"ErrorDetails",type:{name:"Composite",className:"ErrorDetails",modelProperties:{code:{required:!1,readOnly:!0,serializedName:"code",type:{name:"String"}},httpStatusCode:{required:!1,readOnly:!0,serializedName:"httpStatusCode",type:{name:"String"}},message:{required:!1,readOnly:!0,serializedName:"message",type:{name:"String"}},details:{required:!1,readOnly:!0,serializedName:"details",type:{name:"String"}}}}}}}},function(e,t,r){"use strict";e.exports=class IotHubQuotaMetricInfo{constructor(){}mapper(){return{required:!1,serializedName:"IotHubQuotaMetricInfo",type:{name:"Composite",className:"IotHubQuotaMetricInfo",modelProperties:{name:{required:!1,readOnly:!0,serializedName:"name",type:{name:"String"}},currentValue:{required:!1,readOnly:!0,serializedName:"currentValue",type:{name:"Number"}},maxValue:{required:!1,readOnly:!0,serializedName:"maxValue",type:{name:"Number"}}}}}}}},function(e,t,r){"use strict";e.exports=class EndpointHealthData{constructor(){}mapper(){return{required:!1,serializedName:"EndpointHealthData",type:{name:"Composite",className:"EndpointHealthData",modelProperties:{endpointId:{required:!1,serializedName:"endpointId",type:{name:"String"}},healthStatus:{required:!1,serializedName:"healthStatus",type:{name:"String"}}}}}}}},function(e,t,r){"use strict";e.exports=class RegistryStatistics{constructor(){}mapper(){return{required:!1,serializedName:"RegistryStatistics",type:{name:"Composite",className:"RegistryStatistics",modelProperties:{totalDeviceCount:{required:!1,readOnly:!0,serializedName:"totalDeviceCount",type:{name:"Number"}},enabledDeviceCount:{required:!1,readOnly:!0,serializedName:"enabledDeviceCount",type:{name:"Number"}},disabledDeviceCount:{required:!1,readOnly:!0,serializedName:"disabledDeviceCount",type:{name:"Number"}}}}}}}},function(e,t,r){"use strict";e.exports=class JobResponse{constructor(){}mapper(){return{required:!1,serializedName:"JobResponse",type:{name:"Composite",className:"JobResponse",modelProperties:{jobId:{required:!1,readOnly:!0,serializedName:"jobId",type:{name:"String"}},startTimeUtc:{required:!1,readOnly:!0,serializedName:"startTimeUtc",type:{name:"DateTimeRfc1123"}},endTimeUtc:{required:!1,readOnly:!0,serializedName:"endTimeUtc",type:{name:"DateTimeRfc1123"}},type:{required:!1,readOnly:!0,serializedName:"type",type:{name:"String"}},status:{required:!1,readOnly:!0,serializedName:"status",type:{name:"Enum",allowedValues:["unknown","enqueued","running","completed","failed","cancelled"]}},failureReason:{required:!1,readOnly:!0,serializedName:"failureReason",type:{name:"String"}},statusMessage:{required:!1,readOnly:!0,serializedName:"statusMessage",type:{name:"String"}},parentJobId:{required:!1,readOnly:!0,serializedName:"parentJobId",type:{name:"String"}}}}}}}},function(e,t,r){"use strict";e.exports=class IotHubCapacity{constructor(){}mapper(){return{required:!1,serializedName:"IotHubCapacity",type:{name:"Composite",className:"IotHubCapacity",modelProperties:{minimum:{required:!1,readOnly:!0,serializedName:"minimum",constraints:{InclusiveMaximum:1,InclusiveMinimum:1},type:{name:"Number"}},maximum:{required:!1,readOnly:!0,serializedName:"maximum",type:{name:"Number"}},default:{required:!1,readOnly:!0,serializedName:"default",type:{name:"Number"}},scaleType:{required:!1,readOnly:!0,serializedName:"scaleType",type:{name:"Enum",allowedValues:["Automatic","Manual","None"]}}}}}}}},function(e,t,r){"use strict";e.exports=class IotHubSkuDescription{constructor(){}mapper(){return{required:!1,serializedName:"IotHubSkuDescription",type:{name:"Composite",className:"IotHubSkuDescription",modelProperties:{resourceType:{required:!1,readOnly:!0,serializedName:"resourceType",type:{name:"String"}},sku:{required:!0,serializedName:"sku",type:{name:"Composite",className:"IotHubSkuInfo"}},capacity:{required:!0,serializedName:"capacity",type:{name:"Composite",className:"IotHubCapacity"}}}}}}}},function(e,t,r){"use strict";e.exports=class TagsResource{constructor(){}mapper(){return{required:!1,serializedName:"TagsResource",type:{name:"Composite",className:"TagsResource",modelProperties:{tags:{required:!1,serializedName:"tags",type:{name:"Dictionary",value:{required:!1,serializedName:"StringElementType",type:{name:"String"}}}}}}}}}},function(e,t,r){"use strict";const n=r(105);e.exports=class EventHubConsumerGroupInfo extends n.BaseResource{constructor(){super()}mapper(){return{required:!1,serializedName:"EventHubConsumerGroupInfo",type:{name:"Composite",className:"EventHubConsumerGroupInfo",modelProperties:{properties:{required:!1,serializedName:"properties",type:{name:"Dictionary",value:{required:!1,serializedName:"StringElementType",type:{name:"String"}}}},id:{required:!1,readOnly:!0,serializedName:"id",type:{name:"String"}},name:{required:!1,readOnly:!0,serializedName:"name",type:{name:"String"}},type:{required:!1,readOnly:!0,serializedName:"type",type:{name:"String"}},etag:{required:!1,readOnly:!0,serializedName:"etag",type:{name:"String"}}}}}}}},function(e,t,r){"use strict";e.exports=class OperationInputs{constructor(){}mapper(){return{required:!1,serializedName:"OperationInputs",type:{name:"Composite",className:"OperationInputs",modelProperties:{name:{required:!0,serializedName:"name",type:{name:"String"}}}}}}}},function(e,t,r){"use strict";e.exports=class IotHubNameAvailabilityInfo{constructor(){}mapper(){return{required:!1,serializedName:"IotHubNameAvailabilityInfo",type:{name:"Composite",className:"IotHubNameAvailabilityInfo",modelProperties:{nameAvailable:{required:!1,readOnly:!0,serializedName:"nameAvailable",type:{name:"Boolean"}},reason:{required:!1,readOnly:!0,serializedName:"reason",type:{name:"Enum",allowedValues:["Invalid","AlreadyExists"]}},message:{required:!1,serializedName:"message",type:{name:"String"}}}}}}}},function(e,t,r){"use strict";e.exports=class Name{constructor(){}mapper(){return{required:!1,serializedName:"Name",type:{name:"Composite",className:"Name",modelProperties:{value:{required:!1,serializedName:"value",type:{name:"String"}},localizedValue:{required:!1,serializedName:"localizedValue",type:{name:"String"}}}}}}}},function(e,t,r){"use strict";e.exports=class UserSubscriptionQuota{constructor(){}mapper(){return{required:!1,serializedName:"UserSubscriptionQuota",type:{name:"Composite",className:"UserSubscriptionQuota",modelProperties:{id:{required:!1,serializedName:"id",type:{name:"String"}},type:{required:!1,serializedName:"type",type:{name:"String"}},unit:{required:!1,serializedName:"unit",type:{name:"String"}},currentValue:{required:!1,serializedName:"currentValue",type:{name:"Number"}},limit:{required:!1,serializedName:"limit",type:{name:"Number"}},name:{required:!1,serializedName:"name",type:{name:"Composite",className:"Name"}}}}}}}},function(e,t,r){"use strict";e.exports=class UserSubscriptionQuotaListResult{constructor(){}mapper(){return{required:!1,serializedName:"UserSubscriptionQuotaListResult",type:{name:"Composite",className:"UserSubscriptionQuotaListResult",modelProperties:{value:{required:!1,serializedName:"value",type:{name:"Sequence",element:{required:!1,serializedName:"UserSubscriptionQuotaElementType",type:{name:"Composite",className:"UserSubscriptionQuota"}}}},nextLink:{required:!1,readOnly:!0,serializedName:"nextLink",type:{name:"String"}}}}}}}},function(e,t,r){"use strict";e.exports=class RoutingMessage{constructor(){}mapper(){return{required:!1,serializedName:"RoutingMessage",type:{name:"Composite",className:"RoutingMessage",modelProperties:{body:{required:!1,serializedName:"body",type:{name:"String"}},appProperties:{required:!1,serializedName:"appProperties",type:{name:"Dictionary",value:{required:!1,serializedName:"StringElementType",type:{name:"String"}}}},systemProperties:{required:!1,serializedName:"systemProperties",type:{name:"Dictionary",value:{required:!1,serializedName:"StringElementType",type:{name:"String"}}}}}}}}}},function(e,t,r){"use strict";e.exports=class TestAllRoutesInput{constructor(){}mapper(){return{required:!1,serializedName:"TestAllRoutesInput",type:{name:"Composite",className:"TestAllRoutesInput",modelProperties:{routingSource:{required:!1,serializedName:"routingSource",type:{name:"String"}},message:{required:!1,serializedName:"message",type:{name:"Composite",className:"RoutingMessage"}}}}}}}},function(e,t,r){"use strict";e.exports=class MatchedRoute{constructor(){}mapper(){return{required:!1,serializedName:"MatchedRoute",type:{name:"Composite",className:"MatchedRoute",modelProperties:{properties:{required:!1,serializedName:"properties",type:{name:"Composite",className:"RouteProperties"}}}}}}}},function(e,t,r){"use strict";e.exports=class TestAllRoutesResult{constructor(){}mapper(){return{required:!1,serializedName:"TestAllRoutesResult",type:{name:"Composite",className:"TestAllRoutesResult",modelProperties:{routes:{required:!1,serializedName:"routes",type:{name:"Sequence",element:{required:!1,serializedName:"MatchedRouteElementType",type:{name:"Composite",className:"MatchedRoute"}}}}}}}}}},function(e,t,r){"use strict";e.exports=class TestRouteInput{constructor(){}mapper(){return{required:!1,serializedName:"TestRouteInput",type:{name:"Composite",className:"TestRouteInput",modelProperties:{message:{required:!1,serializedName:"message",type:{name:"Composite",className:"RoutingMessage"}},route:{required:!0,serializedName:"route",type:{name:"Composite",className:"RouteProperties"}}}}}}}},function(e,t,r){"use strict";e.exports=class RouteErrorPosition{constructor(){}mapper(){return{required:!1,serializedName:"RouteErrorPosition",type:{name:"Composite",className:"RouteErrorPosition",modelProperties:{line:{required:!1,serializedName:"line",type:{name:"Number"}},column:{required:!1,serializedName:"column",type:{name:"Number"}}}}}}}},function(e,t,r){"use strict";e.exports=class RouteErrorRange{constructor(){}mapper(){return{required:!1,serializedName:"RouteErrorRange",type:{name:"Composite",className:"RouteErrorRange",modelProperties:{start:{required:!1,serializedName:"start",type:{name:"Composite",className:"RouteErrorPosition"}},end:{required:!1,serializedName:"end",type:{name:"Composite",className:"RouteErrorPosition"}}}}}}}},function(e,t,r){"use strict";e.exports=class RouteCompilationError{constructor(){}mapper(){return{required:!1,serializedName:"RouteCompilationError",type:{name:"Composite",className:"RouteCompilationError",modelProperties:{message:{required:!1,serializedName:"message",type:{name:"String"}},severity:{required:!1,serializedName:"severity",type:{name:"String"}},location:{required:!1,serializedName:"location",type:{name:"Composite",className:"RouteErrorRange"}}}}}}}},function(e,t,r){"use strict";e.exports=class TestRouteResultDetails{constructor(){}mapper(){return{required:!1,serializedName:"TestRouteResultDetails",type:{name:"Composite",className:"TestRouteResultDetails",modelProperties:{compilationErrors:{required:!1,serializedName:"compilationErrors",type:{name:"Sequence",element:{required:!1,serializedName:"RouteCompilationErrorElementType",type:{name:"Composite",className:"RouteCompilationError"}}}}}}}}}},function(e,t,r){"use strict";e.exports=class TestRouteResult{constructor(){}mapper(){return{required:!1,serializedName:"TestRouteResult",type:{name:"Composite",className:"TestRouteResult",modelProperties:{result:{required:!1,serializedName:"result",type:{name:"String"}},details:{required:!1,serializedName:"details",type:{name:"Composite",className:"TestRouteResultDetails"}}}}}}}},function(e,t,r){"use strict";e.exports=class ExportDevicesRequest{constructor(){}mapper(){return{required:!1,serializedName:"ExportDevicesRequest",type:{name:"Composite",className:"ExportDevicesRequest",modelProperties:{exportBlobContainerUri:{required:!0,serializedName:"exportBlobContainerUri",type:{name:"String"}},excludeKeys:{required:!0,serializedName:"excludeKeys",type:{name:"Boolean"}}}}}}}},function(e,t,r){"use strict";e.exports=class ImportDevicesRequest{constructor(){}mapper(){return{required:!1,serializedName:"ImportDevicesRequest",type:{name:"Composite",className:"ImportDevicesRequest",modelProperties:{inputBlobContainerUri:{required:!0,serializedName:"inputBlobContainerUri",type:{name:"String"}},outputBlobContainerUri:{required:!0,serializedName:"outputBlobContainerUri",type:{name:"String"}}}}}}}},function(e,t,r){"use strict";e.exports=class OperationListResult extends Array{constructor(){super()}mapper(){return{required:!1,serializedName:"OperationListResult",type:{name:"Composite",className:"OperationListResult",modelProperties:{value:{required:!1,readOnly:!0,serializedName:"",type:{name:"Sequence",element:{required:!1,serializedName:"OperationElementType",type:{name:"Composite",className:"Operation"}}}},nextLink:{required:!1,readOnly:!0,serializedName:"nextLink",type:{name:"String"}}}}}}}},function(e,t,r){"use strict";e.exports=class IotHubDescriptionListResult extends Array{constructor(){super()}mapper(){return{required:!1,serializedName:"IotHubDescriptionListResult",type:{name:"Composite",className:"IotHubDescriptionListResult",modelProperties:{value:{required:!1,serializedName:"",type:{name:"Sequence",element:{required:!1,serializedName:"IotHubDescriptionElementType",type:{name:"Composite",className:"IotHubDescription"}}}},nextLink:{required:!1,readOnly:!0,serializedName:"nextLink",type:{name:"String"}}}}}}}},function(e,t,r){"use strict";e.exports=class IotHubSkuDescriptionListResult extends Array{constructor(){super()}mapper(){return{required:!1,serializedName:"IotHubSkuDescriptionListResult",type:{name:"Composite",className:"IotHubSkuDescriptionListResult",modelProperties:{value:{required:!1,serializedName:"",type:{name:"Sequence",element:{required:!1,serializedName:"IotHubSkuDescriptionElementType",type:{name:"Composite",className:"IotHubSkuDescription"}}}},nextLink:{required:!1,readOnly:!0,serializedName:"nextLink",type:{name:"String"}}}}}}}},function(e,t,r){"use strict";e.exports=class EventHubConsumerGroupsListResult extends Array{constructor(){super()}mapper(){return{required:!1,serializedName:"EventHubConsumerGroupsListResult",type:{name:"Composite",className:"EventHubConsumerGroupsListResult",modelProperties:{value:{required:!1,serializedName:"",type:{name:"Sequence",element:{required:!1,serializedName:"EventHubConsumerGroupInfoElementType",type:{name:"Composite",className:"EventHubConsumerGroupInfo"}}}},nextLink:{required:!1,readOnly:!0,serializedName:"nextLink",type:{name:"String"}}}}}}}},function(e,t,r){"use strict";e.exports=class JobResponseListResult extends Array{constructor(){super()}mapper(){return{required:!1,serializedName:"JobResponseListResult",type:{name:"Composite",className:"JobResponseListResult",modelProperties:{value:{required:!1,serializedName:"",type:{name:"Sequence",element:{required:!1,serializedName:"JobResponseElementType",type:{name:"Composite",className:"JobResponse"}}}},nextLink:{required:!1,readOnly:!0,serializedName:"nextLink",type:{name:"String"}}}}}}}},function(e,t,r){"use strict";e.exports=class IotHubQuotaMetricInfoListResult extends Array{constructor(){super()}mapper(){return{required:!1,serializedName:"IotHubQuotaMetricInfoListResult",type:{name:"Composite",className:"IotHubQuotaMetricInfoListResult",modelProperties:{value:{required:!1,serializedName:"",type:{name:"Sequence",element:{required:!1,serializedName:"IotHubQuotaMetricInfoElementType",type:{name:"Composite",className:"IotHubQuotaMetricInfo"}}}},nextLink:{required:!1,readOnly:!0,serializedName:"nextLink",type:{name:"String"}}}}}}}},function(e,t,r){"use strict";e.exports=class EndpointHealthDataListResult extends Array{constructor(){super()}mapper(){return{required:!1,serializedName:"EndpointHealthDataListResult",type:{name:"Composite",className:"EndpointHealthDataListResult",modelProperties:{value:{required:!1,serializedName:"",type:{name:"Sequence",element:{required:!1,serializedName:"EndpointHealthDataElementType",type:{name:"Composite",className:"EndpointHealthData"}}}},nextLink:{required:!1,readOnly:!0,serializedName:"nextLink",type:{name:"String"}}}}}}}},function(e,t,r){"use strict";e.exports=class SharedAccessSignatureAuthorizationRuleListResult extends Array{constructor(){super()}mapper(){return{required:!1,serializedName:"SharedAccessSignatureAuthorizationRuleListResult",type:{name:"Composite",className:"SharedAccessSignatureAuthorizationRuleListResult",modelProperties:{value:{required:!1,serializedName:"",type:{name:"Sequence",element:{required:!1,serializedName:"SharedAccessSignatureAuthorizationRuleElementType",type:{name:"Composite",className:"SharedAccessSignatureAuthorizationRule"}}}},nextLink:{required:!1,readOnly:!0,serializedName:"nextLink",type:{name:"String"}}}}}}}},function(e,t,r){"use strict";t.Operations=r(1214),t.IotHubResource=r(1215),t.ResourceProviderCommon=r(1216),t.Certificates=r(1217)},function(e,t,r){"use strict";const n=r(8),i=r(9),o=n.WebResource;function _list(e,t){let r=this.client;if(t||"function"!=typeof e||(t=e,e=null),!t)throw new Error("callback cannot be null.");try{if(null===this.client.apiVersion||void 0===this.client.apiVersion||"string"!=typeof this.client.apiVersion.valueOf())throw new Error("this.client.apiVersion cannot be null or undefined and it must be of type string.");if(null!==this.client.acceptLanguage&&void 0!==this.client.acceptLanguage&&"string"!=typeof this.client.acceptLanguage.valueOf())throw new Error("this.client.acceptLanguage must be of type string.")}catch(e){return t(e)}let s=this.client.baseUri,a=s+(s.endsWith("/")?"":"/")+"providers/Microsoft.Devices/operations",c=[];c.push("api-version="+encodeURIComponent(this.client.apiVersion)),c.length>0&&(a+="?"+c.join("&"));let u=new o;if(u.method="GET",u.url=a,u.headers={},u.headers["Content-Type"]="application/json; charset=utf-8",this.client.generateClientRequestId&&(u.headers["x-ms-client-request-id"]=i.generateUuid()),void 0!==this.client.acceptLanguage&&null!==this.client.acceptLanguage&&(u.headers["accept-language"]=this.client.acceptLanguage),e)for(let t in e.customHeaders)e.customHeaders.hasOwnProperty(t)&&(u.headers[t]=e.customHeaders[t]);return u.body=null,r.pipeline(u,(e,i,o)=>{if(e)return t(e);let s=i.statusCode;if(200!==s){let e,s=new Error(o);s.statusCode=i.statusCode,s.request=n.stripRequest(u),s.response=n.stripResponse(i),""===o&&(o=null);try{if(e=JSON.parse(o)){let t=null;e.error&&(t=e.error),s.code=t?t.code:e.code,s.message=t?t.message:e.message}if(null!=e){let t=(new r.models.ErrorDetails).mapper();s.body=r.deserialize(t,e,"error.body")}}catch(e){return s.message=`Error "${e.message}" occurred in deserializing the responseBody `+`- "${o}" for the default response.`,t(s)}return t(s)}let a=null;if(""===o&&(o=null),200===s){let e=null;try{if(e=JSON.parse(o),a=JSON.parse(o),null!=e){let t=(new r.models.OperationListResult).mapper();a=r.deserialize(t,e,"result")}}catch(e){let r=new Error(`Error ${e} occurred in deserializing the responseBody - ${o}`);return r.request=n.stripRequest(u),r.response=n.stripResponse(i),t(r)}}return t(null,a,u,i)})}function _listNext(e,t,r){let s=this.client;if(r||"function"!=typeof t||(r=t,t=null),!r)throw new Error("callback cannot be null.");try{if(null==e||"string"!=typeof e.valueOf())throw new Error("nextPageLink cannot be null or undefined and it must be of type string.");if(null!==this.client.acceptLanguage&&void 0!==this.client.acceptLanguage&&"string"!=typeof this.client.acceptLanguage.valueOf())throw new Error("this.client.acceptLanguage must be of type string.")}catch(e){return r(e)}let a="{nextLink}";a=a.replace("{nextLink}",e);let c=new o;if(c.method="GET",c.url=a,c.headers={},c.headers["Content-Type"]="application/json; charset=utf-8",this.client.generateClientRequestId&&(c.headers["x-ms-client-request-id"]=i.generateUuid()),void 0!==this.client.acceptLanguage&&null!==this.client.acceptLanguage&&(c.headers["accept-language"]=this.client.acceptLanguage),t)for(let e in t.customHeaders)t.customHeaders.hasOwnProperty(e)&&(c.headers[e]=t.customHeaders[e]);return c.body=null,s.pipeline(c,(e,t,i)=>{if(e)return r(e);let o=t.statusCode;if(200!==o){let e,o=new Error(i);o.statusCode=t.statusCode,o.request=n.stripRequest(c),o.response=n.stripResponse(t),""===i&&(i=null);try{if(e=JSON.parse(i)){let t=null;e.error&&(t=e.error),o.code=t?t.code:e.code,o.message=t?t.message:e.message}if(null!=e){let t=(new s.models.ErrorDetails).mapper();o.body=s.deserialize(t,e,"error.body")}}catch(e){return o.message=`Error "${e.message}" occurred in deserializing the responseBody `+`- "${i}" for the default response.`,r(o)}return r(o)}let a=null;if(""===i&&(i=null),200===o){let e=null;try{if(e=JSON.parse(i),a=JSON.parse(i),null!=e){let t=(new s.models.OperationListResult).mapper();a=s.deserialize(t,e,"result")}}catch(e){let o=new Error(`Error ${e} occurred in deserializing the responseBody - ${i}`);return o.request=n.stripRequest(c),o.response=n.stripResponse(t),r(o)}}return r(null,a,c,t)})}e.exports=class Operations{constructor(e){this.client=e,this._list=_list,this._listNext=_listNext}listWithHttpOperationResponse(e){this.client;let t=this;return new Promise((r,i)=>{t._list(e,(e,t,o,s)=>{let a=new n.HttpOperationResponse(o,s);a.body=t,e?i(e):r(a)})})}list(e,t){this.client;let r=this;return t||"function"!=typeof e||(t=e,e=null),t?r._list(e,t):new Promise((t,n)=>{r._list(e,(e,r,i,o)=>{e?n(e):t(r)})})}listNextWithHttpOperationResponse(e,t){this.client;let r=this;return new Promise((i,o)=>{r._listNext(e,t,(e,t,r,s)=>{let a=new n.HttpOperationResponse(r,s);a.body=t,e?o(e):i(a)})})}listNext(e,t,r){this.client;let n=this;return r||"function"!=typeof t||(r=t,t=null),r?n._listNext(e,t,r):new Promise((r,i)=>{n._listNext(e,t,(e,t,n,o)=>{e?i(e):r(t)})})}}},function(e,t,r){"use strict";const n=r(8),i=r(9),o=n.WebResource;function _get(e,t,r,s){let a=this.client;if(s||"function"!=typeof r||(s=r,r=null),!s)throw new Error("callback cannot be null.");try{if(null===this.client.apiVersion||void 0===this.client.apiVersion||"string"!=typeof this.client.apiVersion.valueOf())throw new Error("this.client.apiVersion cannot be null or undefined and it must be of type string.");if(null===this.client.subscriptionId||void 0===this.client.subscriptionId||"string"!=typeof this.client.subscriptionId.valueOf())throw new Error("this.client.subscriptionId cannot be null or undefined and it must be of type string.");if(null==e||"string"!=typeof e.valueOf())throw new Error("resourceGroupName cannot be null or undefined and it must be of type string.");if(null==t||"string"!=typeof t.valueOf())throw new Error("resourceName cannot be null or undefined and it must be of type string.");if(null!==this.client.acceptLanguage&&void 0!==this.client.acceptLanguage&&"string"!=typeof this.client.acceptLanguage.valueOf())throw new Error("this.client.acceptLanguage must be of type string.")}catch(e){return s(e)}let c=this.client.baseUri,u=c+(c.endsWith("/")?"":"/")+"subscriptions/{subscriptionId}/resourceGroups/{resourceGroupName}/providers/Microsoft.Devices/IotHubs/{resourceName}";u=(u=(u=u.replace("{subscriptionId}",encodeURIComponent(this.client.subscriptionId))).replace("{resourceGroupName}",encodeURIComponent(e))).replace("{resourceName}",encodeURIComponent(t));let l=[];l.push("api-version="+encodeURIComponent(this.client.apiVersion)),l.length>0&&(u+="?"+l.join("&"));let p=new o;if(p.method="GET",p.url=u,p.headers={},p.headers["Content-Type"]="application/json; charset=utf-8",this.client.generateClientRequestId&&(p.headers["x-ms-client-request-id"]=i.generateUuid()),void 0!==this.client.acceptLanguage&&null!==this.client.acceptLanguage&&(p.headers["accept-language"]=this.client.acceptLanguage),r)for(let e in r.customHeaders)r.customHeaders.hasOwnProperty(e)&&(p.headers[e]=r.customHeaders[e]);return p.body=null,a.pipeline(p,(e,t,r)=>{if(e)return s(e);let i=t.statusCode;if(200!==i){let e,i=new Error(r);i.statusCode=t.statusCode,i.request=n.stripRequest(p),i.response=n.stripResponse(t),""===r&&(r=null);try{if(e=JSON.parse(r)){let t=null;e.error&&(t=e.error),i.code=t?t.code:e.code,i.message=t?t.message:e.message}if(null!=e){let t=(new a.models.ErrorDetails).mapper();i.body=a.deserialize(t,e,"error.body")}}catch(e){return i.message=`Error "${e.message}" occurred in deserializing the responseBody `+`- "${r}" for the default response.`,s(i)}return s(i)}let o=null;if(""===r&&(r=null),200===i){let e=null;try{if(e=JSON.parse(r),o=JSON.parse(r),null!=e){let t=(new a.models.IotHubDescription).mapper();o=a.deserialize(t,e,"result")}}catch(e){let i=new Error(`Error ${e} occurred in deserializing the responseBody - ${r}`);return i.request=n.stripRequest(p),i.response=n.stripResponse(t),s(i)}}return s(null,o,p,t)})}function _createOrUpdate(e,t,r,i,o){let s=this.client;if(o||"function"!=typeof i||(o=i,i=null),!o)throw new Error("callback cannot be null.");this.beginCreateOrUpdate(e,t,r,i,(e,t,r,a)=>{if(e)return o(e);let c=new n.HttpOperationResponse;c.request=r,c.response=a,c.body=a.body,s.getLongRunningOperationResult(c,i,(e,t)=>{if(e)return o(e);let i=null;r=t.request,a=t.response;let c=t.body;""===c&&(c=null);let u=null;try{if(u=JSON.parse(c),i=JSON.parse(c),null!=u){let e=(new s.models.IotHubDescription).mapper();i=s.deserialize(e,u,"result")}}catch(e){let t=new Error(`Error ${e} occurred in deserializing the responseBody - ${c}`);return t.request=n.stripRequest(r),t.response=n.stripResponse(a),o(t)}return o(null,i,r,a)})})}function _update(e,t,r,i){let o=this.client;if(i||"function"!=typeof r||(i=r,r=null),!i)throw new Error("callback cannot be null.");this.beginUpdate(e,t,r,(e,t,s,a)=>{if(e)return i(e);let c=new n.HttpOperationResponse;c.request=s,c.response=a,c.body=a.body,o.getLongRunningOperationResult(c,r,(e,t)=>{if(e)return i(e);let r=null;s=t.request,a=t.response;let c=t.body;""===c&&(c=null);let u=null;try{if(u=JSON.parse(c),r=JSON.parse(c),null!=u){let e=(new o.models.IotHubDescription).mapper();r=o.deserialize(e,u,"result")}}catch(e){let t=new Error(`Error ${e} occurred in deserializing the responseBody - ${c}`);return t.request=n.stripRequest(s),t.response=n.stripResponse(a),i(t)}return i(null,r,s,a)})})}function _deleteMethod(e,t,r,i){let o=this.client;if(i||"function"!=typeof r||(i=r,r=null),!i)throw new Error("callback cannot be null.");this.beginDeleteMethod(e,t,r,(e,t,s,a)=>{if(e)return i(e);let c=new n.HttpOperationResponse;c.request=s,c.response=a,c.body=a.body,o.getLongRunningOperationResult(c,r,(e,t)=>{if(e)return i(e);let r=null;s=t.request,a=t.response;let c=t.body;""===c&&(c=null);let u=null;try{if(u=JSON.parse(c),r=JSON.parse(c),null!=u){let e={required:!1,serializedName:"parsedResponse",type:{name:"Object"}};r=o.deserialize(e,u,"result")}}catch(e){let t=new Error(`Error ${e} occurred in deserializing the responseBody - ${c}`);return t.request=n.stripRequest(s),t.response=n.stripResponse(a),i(t)}return i(null,r,s,a)})})}function _listBySubscription(e,t){let r=this.client;if(t||"function"!=typeof e||(t=e,e=null),!t)throw new Error("callback cannot be null.");try{if(null===this.client.apiVersion||void 0===this.client.apiVersion||"string"!=typeof this.client.apiVersion.valueOf())throw new Error("this.client.apiVersion cannot be null or undefined and it must be of type string.");if(null===this.client.subscriptionId||void 0===this.client.subscriptionId||"string"!=typeof this.client.subscriptionId.valueOf())throw new Error("this.client.subscriptionId cannot be null or undefined and it must be of type string.");if(null!==this.client.acceptLanguage&&void 0!==this.client.acceptLanguage&&"string"!=typeof this.client.acceptLanguage.valueOf())throw new Error("this.client.acceptLanguage must be of type string.")}catch(e){return t(e)}let s=this.client.baseUri,a=s+(s.endsWith("/")?"":"/")+"subscriptions/{subscriptionId}/providers/Microsoft.Devices/IotHubs";a=a.replace("{subscriptionId}",encodeURIComponent(this.client.subscriptionId));let c=[];c.push("api-version="+encodeURIComponent(this.client.apiVersion)),c.length>0&&(a+="?"+c.join("&"));let u=new o;if(u.method="GET",u.url=a,u.headers={},u.headers["Content-Type"]="application/json; charset=utf-8",this.client.generateClientRequestId&&(u.headers["x-ms-client-request-id"]=i.generateUuid()),void 0!==this.client.acceptLanguage&&null!==this.client.acceptLanguage&&(u.headers["accept-language"]=this.client.acceptLanguage),e)for(let t in e.customHeaders)e.customHeaders.hasOwnProperty(t)&&(u.headers[t]=e.customHeaders[t]);return u.body=null,r.pipeline(u,(e,i,o)=>{if(e)return t(e);let s=i.statusCode;if(200!==s){let e,s=new Error(o);s.statusCode=i.statusCode,s.request=n.stripRequest(u),s.response=n.stripResponse(i),""===o&&(o=null);try{if(e=JSON.parse(o)){let t=null;e.error&&(t=e.error),s.code=t?t.code:e.code,s.message=t?t.message:e.message}if(null!=e){let t=(new r.models.ErrorDetails).mapper();s.body=r.deserialize(t,e,"error.body")}}catch(e){return s.message=`Error "${e.message}" occurred in deserializing the responseBody `+`- "${o}" for the default response.`,t(s)}return t(s)}let a=null;if(""===o&&(o=null),200===s){let e=null;try{if(e=JSON.parse(o),a=JSON.parse(o),null!=e){let t=(new r.models.IotHubDescriptionListResult).mapper();a=r.deserialize(t,e,"result")}}catch(e){let r=new Error(`Error ${e} occurred in deserializing the responseBody - ${o}`);return r.request=n.stripRequest(u),r.response=n.stripResponse(i),t(r)}}return t(null,a,u,i)})}function _listByResourceGroup(e,t,r){let s=this.client;if(r||"function"!=typeof t||(r=t,t=null),!r)throw new Error("callback cannot be null.");try{if(null===this.client.apiVersion||void 0===this.client.apiVersion||"string"!=typeof this.client.apiVersion.valueOf())throw new Error("this.client.apiVersion cannot be null or undefined and it must be of type string.");if(null===this.client.subscriptionId||void 0===this.client.subscriptionId||"string"!=typeof this.client.subscriptionId.valueOf())throw new Error("this.client.subscriptionId cannot be null or undefined and it must be of type string.");if(null==e||"string"!=typeof e.valueOf())throw new Error("resourceGroupName cannot be null or undefined and it must be of type string.");if(null!==this.client.acceptLanguage&&void 0!==this.client.acceptLanguage&&"string"!=typeof this.client.acceptLanguage.valueOf())throw new Error("this.client.acceptLanguage must be of type string.")}catch(e){return r(e)}let a=this.client.baseUri,c=a+(a.endsWith("/")?"":"/")+"subscriptions/{subscriptionId}/resourceGroups/{resourceGroupName}/providers/Microsoft.Devices/IotHubs";c=(c=c.replace("{subscriptionId}",encodeURIComponent(this.client.subscriptionId))).replace("{resourceGroupName}",encodeURIComponent(e));let u=[];u.push("api-version="+encodeURIComponent(this.client.apiVersion)),u.length>0&&(c+="?"+u.join("&"));let l=new o;if(l.method="GET",l.url=c,l.headers={},l.headers["Content-Type"]="application/json; charset=utf-8",this.client.generateClientRequestId&&(l.headers["x-ms-client-request-id"]=i.generateUuid()),void 0!==this.client.acceptLanguage&&null!==this.client.acceptLanguage&&(l.headers["accept-language"]=this.client.acceptLanguage),t)for(let e in t.customHeaders)t.customHeaders.hasOwnProperty(e)&&(l.headers[e]=t.customHeaders[e]);return l.body=null,s.pipeline(l,(e,t,i)=>{if(e)return r(e);let o=t.statusCode;if(200!==o){let e,o=new Error(i);o.statusCode=t.statusCode,o.request=n.stripRequest(l),o.response=n.stripResponse(t),""===i&&(i=null);try{if(e=JSON.parse(i)){let t=null;e.error&&(t=e.error),o.code=t?t.code:e.code,o.message=t?t.message:e.message}if(null!=e){let t=(new s.models.ErrorDetails).mapper();o.body=s.deserialize(t,e,"error.body")}}catch(e){return o.message=`Error "${e.message}" occurred in deserializing the responseBody `+`- "${i}" for the default response.`,r(o)}return r(o)}let a=null;if(""===i&&(i=null),200===o){let e=null;try{if(e=JSON.parse(i),a=JSON.parse(i),null!=e){let t=(new s.models.IotHubDescriptionListResult).mapper();a=s.deserialize(t,e,"result")}}catch(e){let o=new Error(`Error ${e} occurred in deserializing the responseBody - ${i}`);return o.request=n.stripRequest(l),o.response=n.stripResponse(t),r(o)}}return r(null,a,l,t)})}function _getStats(e,t,r,s){let a=this.client;if(s||"function"!=typeof r||(s=r,r=null),!s)throw new Error("callback cannot be null.");try{if(null===this.client.apiVersion||void 0===this.client.apiVersion||"string"!=typeof this.client.apiVersion.valueOf())throw new Error("this.client.apiVersion cannot be null or undefined and it must be of type string.");if(null===this.client.subscriptionId||void 0===this.client.subscriptionId||"string"!=typeof this.client.subscriptionId.valueOf())throw new Error("this.client.subscriptionId cannot be null or undefined and it must be of type string.");if(null==e||"string"!=typeof e.valueOf())throw new Error("resourceGroupName cannot be null or undefined and it must be of type string.");if(null==t||"string"!=typeof t.valueOf())throw new Error("resourceName cannot be null or undefined and it must be of type string.");if(null!==this.client.acceptLanguage&&void 0!==this.client.acceptLanguage&&"string"!=typeof this.client.acceptLanguage.valueOf())throw new Error("this.client.acceptLanguage must be of type string.")}catch(e){return s(e)}let c=this.client.baseUri,u=c+(c.endsWith("/")?"":"/")+"subscriptions/{subscriptionId}/resourceGroups/{resourceGroupName}/providers/Microsoft.Devices/IotHubs/{resourceName}/IotHubStats";u=(u=(u=u.replace("{subscriptionId}",encodeURIComponent(this.client.subscriptionId))).replace("{resourceGroupName}",encodeURIComponent(e))).replace("{resourceName}",encodeURIComponent(t));let l=[];l.push("api-version="+encodeURIComponent(this.client.apiVersion)),l.length>0&&(u+="?"+l.join("&"));let p=new o;if(p.method="GET",p.url=u,p.headers={},p.headers["Content-Type"]="application/json; charset=utf-8",this.client.generateClientRequestId&&(p.headers["x-ms-client-request-id"]=i.generateUuid()),void 0!==this.client.acceptLanguage&&null!==this.client.acceptLanguage&&(p.headers["accept-language"]=this.client.acceptLanguage),r)for(let e in r.customHeaders)r.customHeaders.hasOwnProperty(e)&&(p.headers[e]=r.customHeaders[e]);return p.body=null,a.pipeline(p,(e,t,r)=>{if(e)return s(e);let i=t.statusCode;if(200!==i){let e,i=new Error(r);i.statusCode=t.statusCode,i.request=n.stripRequest(p),i.response=n.stripResponse(t),""===r&&(r=null);try{if(e=JSON.parse(r)){let t=null;e.error&&(t=e.error),i.code=t?t.code:e.code,i.message=t?t.message:e.message}if(null!=e){let t=(new a.models.ErrorDetails).mapper();i.body=a.deserialize(t,e,"error.body")}}catch(e){return i.message=`Error "${e.message}" occurred in deserializing the responseBody `+`- "${r}" for the default response.`,s(i)}return s(i)}let o=null;if(""===r&&(r=null),200===i){let e=null;try{if(e=JSON.parse(r),o=JSON.parse(r),null!=e){let t=(new a.models.RegistryStatistics).mapper();o=a.deserialize(t,e,"result")}}catch(e){let i=new Error(`Error ${e} occurred in deserializing the responseBody - ${r}`);return i.request=n.stripRequest(p),i.response=n.stripResponse(t),s(i)}}return s(null,o,p,t)})}function _getValidSkus(e,t,r,s){let a=this.client;if(s||"function"!=typeof r||(s=r,r=null),!s)throw new Error("callback cannot be null.");try{if(null===this.client.apiVersion||void 0===this.client.apiVersion||"string"!=typeof this.client.apiVersion.valueOf())throw new Error("this.client.apiVersion cannot be null or undefined and it must be of type string.");if(null===this.client.subscriptionId||void 0===this.client.subscriptionId||"string"!=typeof this.client.subscriptionId.valueOf())throw new Error("this.client.subscriptionId cannot be null or undefined and it must be of type string.");if(null==e||"string"!=typeof e.valueOf())throw new Error("resourceGroupName cannot be null or undefined and it must be of type string.");if(null==t||"string"!=typeof t.valueOf())throw new Error("resourceName cannot be null or undefined and it must be of type string.");if(null!==this.client.acceptLanguage&&void 0!==this.client.acceptLanguage&&"string"!=typeof this.client.acceptLanguage.valueOf())throw new Error("this.client.acceptLanguage must be of type string.")}catch(e){return s(e)}let c=this.client.baseUri,u=c+(c.endsWith("/")?"":"/")+"subscriptions/{subscriptionId}/resourceGroups/{resourceGroupName}/providers/Microsoft.Devices/IotHubs/{resourceName}/skus";u=(u=(u=u.replace("{subscriptionId}",encodeURIComponent(this.client.subscriptionId))).replace("{resourceGroupName}",encodeURIComponent(e))).replace("{resourceName}",encodeURIComponent(t));let l=[];l.push("api-version="+encodeURIComponent(this.client.apiVersion)),l.length>0&&(u+="?"+l.join("&"));let p=new o;if(p.method="GET",p.url=u,p.headers={},p.headers["Content-Type"]="application/json; charset=utf-8",this.client.generateClientRequestId&&(p.headers["x-ms-client-request-id"]=i.generateUuid()),void 0!==this.client.acceptLanguage&&null!==this.client.acceptLanguage&&(p.headers["accept-language"]=this.client.acceptLanguage),r)for(let e in r.customHeaders)r.customHeaders.hasOwnProperty(e)&&(p.headers[e]=r.customHeaders[e]);return p.body=null,a.pipeline(p,(e,t,r)=>{if(e)return s(e);let i=t.statusCode;if(200!==i){let e,i=new Error(r);i.statusCode=t.statusCode,i.request=n.stripRequest(p),i.response=n.stripResponse(t),""===r&&(r=null);try{if(e=JSON.parse(r)){let t=null;e.error&&(t=e.error),i.code=t?t.code:e.code,i.message=t?t.message:e.message}if(null!=e){let t=(new a.models.ErrorDetails).mapper();i.body=a.deserialize(t,e,"error.body")}}catch(e){return i.message=`Error "${e.message}" occurred in deserializing the responseBody `+`- "${r}" for the default response.`,s(i)}return s(i)}let o=null;if(""===r&&(r=null),200===i){let e=null;try{if(e=JSON.parse(r),o=JSON.parse(r),null!=e){let t=(new a.models.IotHubSkuDescriptionListResult).mapper();o=a.deserialize(t,e,"result")}}catch(e){let i=new Error(`Error ${e} occurred in deserializing the responseBody - ${r}`);return i.request=n.stripRequest(p),i.response=n.stripResponse(t),s(i)}}return s(null,o,p,t)})}function _listEventHubConsumerGroups(e,t,r,s,a){let c=this.client;if(a||"function"!=typeof s||(a=s,s=null),!a)throw new Error("callback cannot be null.");try{if(null===this.client.apiVersion||void 0===this.client.apiVersion||"string"!=typeof this.client.apiVersion.valueOf())throw new Error("this.client.apiVersion cannot be null or undefined and it must be of type string.");if(null===this.client.subscriptionId||void 0===this.client.subscriptionId||"string"!=typeof this.client.subscriptionId.valueOf())throw new Error("this.client.subscriptionId cannot be null or undefined and it must be of type string.");if(null==e||"string"!=typeof e.valueOf())throw new Error("resourceGroupName cannot be null or undefined and it must be of type string.");if(null==t||"string"!=typeof t.valueOf())throw new Error("resourceName cannot be null or undefined and it must be of type string.");if(null==r||"string"!=typeof r.valueOf())throw new Error("eventHubEndpointName cannot be null or undefined and it must be of type string.");if(null!==this.client.acceptLanguage&&void 0!==this.client.acceptLanguage&&"string"!=typeof this.client.acceptLanguage.valueOf())throw new Error("this.client.acceptLanguage must be of type string.")}catch(e){return a(e)}let u=this.client.baseUri,l=u+(u.endsWith("/")?"":"/")+"subscriptions/{subscriptionId}/resourceGroups/{resourceGroupName}/providers/Microsoft.Devices/IotHubs/{resourceName}/eventHubEndpoints/{eventHubEndpointName}/ConsumerGroups";l=(l=(l=(l=l.replace("{subscriptionId}",encodeURIComponent(this.client.subscriptionId))).replace("{resourceGroupName}",encodeURIComponent(e))).replace("{resourceName}",encodeURIComponent(t))).replace("{eventHubEndpointName}",encodeURIComponent(r));let p=[];p.push("api-version="+encodeURIComponent(this.client.apiVersion)),p.length>0&&(l+="?"+p.join("&"));let d=new o;if(d.method="GET",d.url=l,d.headers={},d.headers["Content-Type"]="application/json; charset=utf-8",this.client.generateClientRequestId&&(d.headers["x-ms-client-request-id"]=i.generateUuid()),void 0!==this.client.acceptLanguage&&null!==this.client.acceptLanguage&&(d.headers["accept-language"]=this.client.acceptLanguage),s)for(let e in s.customHeaders)s.customHeaders.hasOwnProperty(e)&&(d.headers[e]=s.customHeaders[e]);return d.body=null,c.pipeline(d,(e,t,r)=>{if(e)return a(e);let i=t.statusCode;if(200!==i){let e,i=new Error(r);i.statusCode=t.statusCode,i.request=n.stripRequest(d),i.response=n.stripResponse(t),""===r&&(r=null);try{if(e=JSON.parse(r)){let t=null;e.error&&(t=e.error),i.code=t?t.code:e.code,i.message=t?t.message:e.message}if(null!=e){let t=(new c.models.ErrorDetails).mapper();i.body=c.deserialize(t,e,"error.body")}}catch(e){return i.message=`Error "${e.message}" occurred in deserializing the responseBody `+`- "${r}" for the default response.`,a(i)}return a(i)}let o=null;if(""===r&&(r=null),200===i){let e=null;try{if(e=JSON.parse(r),o=JSON.parse(r),null!=e){let t=(new c.models.EventHubConsumerGroupsListResult).mapper();o=c.deserialize(t,e,"result")}}catch(e){let i=new Error(`Error ${e} occurred in deserializing the responseBody - ${r}`);return i.request=n.stripRequest(d),i.response=n.stripResponse(t),a(i)}}return a(null,o,d,t)})}function _getEventHubConsumerGroup(e,t,r,s,a,c){let u=this.client;if(c||"function"!=typeof a||(c=a,a=null),!c)throw new Error("callback cannot be null.");try{if(null===this.client.apiVersion||void 0===this.client.apiVersion||"string"!=typeof this.client.apiVersion.valueOf())throw new Error("this.client.apiVersion cannot be null or undefined and it must be of type string.");if(null===this.client.subscriptionId||void 0===this.client.subscriptionId||"string"!=typeof this.client.subscriptionId.valueOf())throw new Error("this.client.subscriptionId cannot be null or undefined and it must be of type string.");if(null==e||"string"!=typeof e.valueOf())throw new Error("resourceGroupName cannot be null or undefined and it must be of type string.");if(null==t||"string"!=typeof t.valueOf())throw new Error("resourceName cannot be null or undefined and it must be of type string.");if(null==r||"string"!=typeof r.valueOf())throw new Error("eventHubEndpointName cannot be null or undefined and it must be of type string.");if(null==s||"string"!=typeof s.valueOf())throw new Error("name cannot be null or undefined and it must be of type string.");if(null!==this.client.acceptLanguage&&void 0!==this.client.acceptLanguage&&"string"!=typeof this.client.acceptLanguage.valueOf())throw new Error("this.client.acceptLanguage must be of type string.")}catch(e){return c(e)}let l=this.client.baseUri,p=l+(l.endsWith("/")?"":"/")+"subscriptions/{subscriptionId}/resourceGroups/{resourceGroupName}/providers/Microsoft.Devices/IotHubs/{resourceName}/eventHubEndpoints/{eventHubEndpointName}/ConsumerGroups/{name}";p=(p=(p=(p=(p=p.replace("{subscriptionId}",encodeURIComponent(this.client.subscriptionId))).replace("{resourceGroupName}",encodeURIComponent(e))).replace("{resourceName}",encodeURIComponent(t))).replace("{eventHubEndpointName}",encodeURIComponent(r))).replace("{name}",encodeURIComponent(s));let d=[];d.push("api-version="+encodeURIComponent(this.client.apiVersion)),d.length>0&&(p+="?"+d.join("&"));let h=new o;if(h.method="GET",h.url=p,h.headers={},h.headers["Content-Type"]="application/json; charset=utf-8",this.client.generateClientRequestId&&(h.headers["x-ms-client-request-id"]=i.generateUuid()),void 0!==this.client.acceptLanguage&&null!==this.client.acceptLanguage&&(h.headers["accept-language"]=this.client.acceptLanguage),a)for(let e in a.customHeaders)a.customHeaders.hasOwnProperty(e)&&(h.headers[e]=a.customHeaders[e]);return h.body=null,u.pipeline(h,(e,t,r)=>{if(e)return c(e);let i=t.statusCode;if(200!==i){let e,i=new Error(r);i.statusCode=t.statusCode,i.request=n.stripRequest(h),i.response=n.stripResponse(t),""===r&&(r=null);try{if(e=JSON.parse(r)){let t=null;e.error&&(t=e.error),i.code=t?t.code:e.code,i.message=t?t.message:e.message}if(null!=e){let t=(new u.models.ErrorDetails).mapper();i.body=u.deserialize(t,e,"error.body")}}catch(e){return i.message=`Error "${e.message}" occurred in deserializing the responseBody `+`- "${r}" for the default response.`,c(i)}return c(i)}let o=null;if(""===r&&(r=null),200===i){let e=null;try{if(e=JSON.parse(r),o=JSON.parse(r),null!=e){let t=(new u.models.EventHubConsumerGroupInfo).mapper();o=u.deserialize(t,e,"result")}}catch(e){let i=new Error(`Error ${e} occurred in deserializing the responseBody - ${r}`);return i.request=n.stripRequest(h),i.response=n.stripResponse(t),c(i)}}return c(null,o,h,t)})}function _createEventHubConsumerGroup(e,t,r,s,a,c){let u=this.client;if(c||"function"!=typeof a||(c=a,a=null),!c)throw new Error("callback cannot be null.");try{if(null===this.client.apiVersion||void 0===this.client.apiVersion||"string"!=typeof this.client.apiVersion.valueOf())throw new Error("this.client.apiVersion cannot be null or undefined and it must be of type string.");if(null===this.client.subscriptionId||void 0===this.client.subscriptionId||"string"!=typeof this.client.subscriptionId.valueOf())throw new Error("this.client.subscriptionId cannot be null or undefined and it must be of type string.");if(null==e||"string"!=typeof e.valueOf())throw new Error("resourceGroupName cannot be null or undefined and it must be of type string.");if(null==t||"string"!=typeof t.valueOf())throw new Error("resourceName cannot be null or undefined and it must be of type string.");if(null==r||"string"!=typeof r.valueOf())throw new Error("eventHubEndpointName cannot be null or undefined and it must be of type string.");if(null==s||"string"!=typeof s.valueOf())throw new Error("name cannot be null or undefined and it must be of type string.");if(null!==this.client.acceptLanguage&&void 0!==this.client.acceptLanguage&&"string"!=typeof this.client.acceptLanguage.valueOf())throw new Error("this.client.acceptLanguage must be of type string.")}catch(e){return c(e)}let l=this.client.baseUri,p=l+(l.endsWith("/")?"":"/")+"subscriptions/{subscriptionId}/resourceGroups/{resourceGroupName}/providers/Microsoft.Devices/IotHubs/{resourceName}/eventHubEndpoints/{eventHubEndpointName}/ConsumerGroups/{name}";p=(p=(p=(p=(p=p.replace("{subscriptionId}",encodeURIComponent(this.client.subscriptionId))).replace("{resourceGroupName}",encodeURIComponent(e))).replace("{resourceName}",encodeURIComponent(t))).replace("{eventHubEndpointName}",encodeURIComponent(r))).replace("{name}",encodeURIComponent(s));let d=[];d.push("api-version="+encodeURIComponent(this.client.apiVersion)),d.length>0&&(p+="?"+d.join("&"));let h=new o;if(h.method="PUT",h.url=p,h.headers={},h.headers["Content-Type"]="application/json; charset=utf-8",this.client.generateClientRequestId&&(h.headers["x-ms-client-request-id"]=i.generateUuid()),void 0!==this.client.acceptLanguage&&null!==this.client.acceptLanguage&&(h.headers["accept-language"]=this.client.acceptLanguage),a)for(let e in a.customHeaders)a.customHeaders.hasOwnProperty(e)&&(h.headers[e]=a.customHeaders[e]);return h.body=null,u.pipeline(h,(e,t,r)=>{if(e)return c(e);let i=t.statusCode;if(200!==i){let e,i=new Error(r);i.statusCode=t.statusCode,i.request=n.stripRequest(h),i.response=n.stripResponse(t),""===r&&(r=null);try{if(e=JSON.parse(r)){let t=null;e.error&&(t=e.error),i.code=t?t.code:e.code,i.message=t?t.message:e.message}if(null!=e){let t=(new u.models.ErrorDetails).mapper();i.body=u.deserialize(t,e,"error.body")}}catch(e){return i.message=`Error "${e.message}" occurred in deserializing the responseBody `+`- "${r}" for the default response.`,c(i)}return c(i)}let o=null;if(""===r&&(r=null),200===i){let e=null;try{if(e=JSON.parse(r),o=JSON.parse(r),null!=e){let t=(new u.models.EventHubConsumerGroupInfo).mapper();o=u.deserialize(t,e,"result")}}catch(e){let i=new Error(`Error ${e} occurred in deserializing the responseBody - ${r}`);return i.request=n.stripRequest(h),i.response=n.stripResponse(t),c(i)}}return c(null,o,h,t)})}function _deleteEventHubConsumerGroup(e,t,r,s,a,c){let u=this.client;if(c||"function"!=typeof a||(c=a,a=null),!c)throw new Error("callback cannot be null.");try{if(null===this.client.apiVersion||void 0===this.client.apiVersion||"string"!=typeof this.client.apiVersion.valueOf())throw new Error("this.client.apiVersion cannot be null or undefined and it must be of type string.");if(null===this.client.subscriptionId||void 0===this.client.subscriptionId||"string"!=typeof this.client.subscriptionId.valueOf())throw new Error("this.client.subscriptionId cannot be null or undefined and it must be of type string.");if(null==e||"string"!=typeof e.valueOf())throw new Error("resourceGroupName cannot be null or undefined and it must be of type string.");if(null==t||"string"!=typeof t.valueOf())throw new Error("resourceName cannot be null or undefined and it must be of type string.");if(null==r||"string"!=typeof r.valueOf())throw new Error("eventHubEndpointName cannot be null or undefined and it must be of type string.");if(null==s||"string"!=typeof s.valueOf())throw new Error("name cannot be null or undefined and it must be of type string.");if(null!==this.client.acceptLanguage&&void 0!==this.client.acceptLanguage&&"string"!=typeof this.client.acceptLanguage.valueOf())throw new Error("this.client.acceptLanguage must be of type string.")}catch(e){return c(e)}let l=this.client.baseUri,p=l+(l.endsWith("/")?"":"/")+"subscriptions/{subscriptionId}/resourceGroups/{resourceGroupName}/providers/Microsoft.Devices/IotHubs/{resourceName}/eventHubEndpoints/{eventHubEndpointName}/ConsumerGroups/{name}";p=(p=(p=(p=(p=p.replace("{subscriptionId}",encodeURIComponent(this.client.subscriptionId))).replace("{resourceGroupName}",encodeURIComponent(e))).replace("{resourceName}",encodeURIComponent(t))).replace("{eventHubEndpointName}",encodeURIComponent(r))).replace("{name}",encodeURIComponent(s));let d=[];d.push("api-version="+encodeURIComponent(this.client.apiVersion)),d.length>0&&(p+="?"+d.join("&"));let h=new o;if(h.method="DELETE",h.url=p,h.headers={},h.headers["Content-Type"]="application/json; charset=utf-8",this.client.generateClientRequestId&&(h.headers["x-ms-client-request-id"]=i.generateUuid()),void 0!==this.client.acceptLanguage&&null!==this.client.acceptLanguage&&(h.headers["accept-language"]=this.client.acceptLanguage),a)for(let e in a.customHeaders)a.customHeaders.hasOwnProperty(e)&&(h.headers[e]=a.customHeaders[e]);return h.body=null,u.pipeline(h,(e,t,r)=>{if(e)return c(e);if(200!==t.statusCode){let e,i=new Error(r);i.statusCode=t.statusCode,i.request=n.stripRequest(h),i.response=n.stripResponse(t),""===r&&(r=null);try{if(e=JSON.parse(r)){let t=null;e.error&&(t=e.error),i.code=t?t.code:e.code,i.message=t?t.message:e.message}if(null!=e){let t=(new u.models.ErrorDetails).mapper();i.body=u.deserialize(t,e,"error.body")}}catch(e){return i.message=`Error "${e.message}" occurred in deserializing the responseBody `+`- "${r}" for the default response.`,c(i)}return c(i)}return""===r&&(r=null),c(null,null,h,t)})}function _listJobs(e,t,r,s){let a=this.client;if(s||"function"!=typeof r||(s=r,r=null),!s)throw new Error("callback cannot be null.");try{if(null===this.client.apiVersion||void 0===this.client.apiVersion||"string"!=typeof this.client.apiVersion.valueOf())throw new Error("this.client.apiVersion cannot be null or undefined and it must be of type string.");if(null===this.client.subscriptionId||void 0===this.client.subscriptionId||"string"!=typeof this.client.subscriptionId.valueOf())throw new Error("this.client.subscriptionId cannot be null or undefined and it must be of type string.");if(null==e||"string"!=typeof e.valueOf())throw new Error("resourceGroupName cannot be null or undefined and it must be of type string.");if(null==t||"string"!=typeof t.valueOf())throw new Error("resourceName cannot be null or undefined and it must be of type string.");if(null!==this.client.acceptLanguage&&void 0!==this.client.acceptLanguage&&"string"!=typeof this.client.acceptLanguage.valueOf())throw new Error("this.client.acceptLanguage must be of type string.")}catch(e){return s(e)}let c=this.client.baseUri,u=c+(c.endsWith("/")?"":"/")+"subscriptions/{subscriptionId}/resourceGroups/{resourceGroupName}/providers/Microsoft.Devices/IotHubs/{resourceName}/jobs";u=(u=(u=u.replace("{subscriptionId}",encodeURIComponent(this.client.subscriptionId))).replace("{resourceGroupName}",encodeURIComponent(e))).replace("{resourceName}",encodeURIComponent(t));let l=[];l.push("api-version="+encodeURIComponent(this.client.apiVersion)),l.length>0&&(u+="?"+l.join("&"));let p=new o;if(p.method="GET",p.url=u,p.headers={},p.headers["Content-Type"]="application/json; charset=utf-8",this.client.generateClientRequestId&&(p.headers["x-ms-client-request-id"]=i.generateUuid()),void 0!==this.client.acceptLanguage&&null!==this.client.acceptLanguage&&(p.headers["accept-language"]=this.client.acceptLanguage),r)for(let e in r.customHeaders)r.customHeaders.hasOwnProperty(e)&&(p.headers[e]=r.customHeaders[e]);return p.body=null,a.pipeline(p,(e,t,r)=>{if(e)return s(e);let i=t.statusCode;if(200!==i){let e,i=new Error(r);i.statusCode=t.statusCode,i.request=n.stripRequest(p),i.response=n.stripResponse(t),""===r&&(r=null);try{if(e=JSON.parse(r)){let t=null;e.error&&(t=e.error),i.code=t?t.code:e.code,i.message=t?t.message:e.message}if(null!=e){let t=(new a.models.ErrorDetails).mapper();i.body=a.deserialize(t,e,"error.body")}}catch(e){return i.message=`Error "${e.message}" occurred in deserializing the responseBody `+`- "${r}" for the default response.`,s(i)}return s(i)}let o=null;if(""===r&&(r=null),200===i){let e=null;try{if(e=JSON.parse(r),o=JSON.parse(r),null!=e){let t=(new a.models.JobResponseListResult).mapper();o=a.deserialize(t,e,"result")}}catch(e){let i=new Error(`Error ${e} occurred in deserializing the responseBody - ${r}`);return i.request=n.stripRequest(p),i.response=n.stripResponse(t),s(i)}}return s(null,o,p,t)})}function _getJob(e,t,r,s,a){let c=this.client;if(a||"function"!=typeof s||(a=s,s=null),!a)throw new Error("callback cannot be null.");try{if(null===this.client.apiVersion||void 0===this.client.apiVersion||"string"!=typeof this.client.apiVersion.valueOf())throw new Error("this.client.apiVersion cannot be null or undefined and it must be of type string.");if(null===this.client.subscriptionId||void 0===this.client.subscriptionId||"string"!=typeof this.client.subscriptionId.valueOf())throw new Error("this.client.subscriptionId cannot be null or undefined and it must be of type string.");if(null==e||"string"!=typeof e.valueOf())throw new Error("resourceGroupName cannot be null or undefined and it must be of type string.");if(null==t||"string"!=typeof t.valueOf())throw new Error("resourceName cannot be null or undefined and it must be of type string.");if(null==r||"string"!=typeof r.valueOf())throw new Error("jobId cannot be null or undefined and it must be of type string.");if(null!==this.client.acceptLanguage&&void 0!==this.client.acceptLanguage&&"string"!=typeof this.client.acceptLanguage.valueOf())throw new Error("this.client.acceptLanguage must be of type string.")}catch(e){return a(e)}let u=this.client.baseUri,l=u+(u.endsWith("/")?"":"/")+"subscriptions/{subscriptionId}/resourceGroups/{resourceGroupName}/providers/Microsoft.Devices/IotHubs/{resourceName}/jobs/{jobId}";l=(l=(l=(l=l.replace("{subscriptionId}",encodeURIComponent(this.client.subscriptionId))).replace("{resourceGroupName}",encodeURIComponent(e))).replace("{resourceName}",encodeURIComponent(t))).replace("{jobId}",encodeURIComponent(r));let p=[];p.push("api-version="+encodeURIComponent(this.client.apiVersion)),p.length>0&&(l+="?"+p.join("&"));let d=new o;if(d.method="GET",d.url=l,d.headers={},d.headers["Content-Type"]="application/json; charset=utf-8",this.client.generateClientRequestId&&(d.headers["x-ms-client-request-id"]=i.generateUuid()),void 0!==this.client.acceptLanguage&&null!==this.client.acceptLanguage&&(d.headers["accept-language"]=this.client.acceptLanguage),s)for(let e in s.customHeaders)s.customHeaders.hasOwnProperty(e)&&(d.headers[e]=s.customHeaders[e]);return d.body=null,c.pipeline(d,(e,t,r)=>{if(e)return a(e);let i=t.statusCode;if(200!==i){let e,i=new Error(r);i.statusCode=t.statusCode,i.request=n.stripRequest(d),i.response=n.stripResponse(t),""===r&&(r=null);try{if(e=JSON.parse(r)){let t=null;e.error&&(t=e.error),i.code=t?t.code:e.code,i.message=t?t.message:e.message}if(null!=e){let t=(new c.models.ErrorDetails).mapper();i.body=c.deserialize(t,e,"error.body")}}catch(e){return i.message=`Error "${e.message}" occurred in deserializing the responseBody `+`- "${r}" for the default response.`,a(i)}return a(i)}let o=null;if(""===r&&(r=null),200===i){let e=null;try{if(e=JSON.parse(r),o=JSON.parse(r),null!=e){let t=(new c.models.JobResponse).mapper();o=c.deserialize(t,e,"result")}}catch(e){let i=new Error(`Error ${e} occurred in deserializing the responseBody - ${r}`);return i.request=n.stripRequest(d),i.response=n.stripResponse(t),a(i)}}return a(null,o,d,t)})}function _getQuotaMetrics(e,t,r,s){let a=this.client;if(s||"function"!=typeof r||(s=r,r=null),!s)throw new Error("callback cannot be null.");try{if(null===this.client.apiVersion||void 0===this.client.apiVersion||"string"!=typeof this.client.apiVersion.valueOf())throw new Error("this.client.apiVersion cannot be null or undefined and it must be of type string.");if(null===this.client.subscriptionId||void 0===this.client.subscriptionId||"string"!=typeof this.client.subscriptionId.valueOf())throw new Error("this.client.subscriptionId cannot be null or undefined and it must be of type string.");if(null==e||"string"!=typeof e.valueOf())throw new Error("resourceGroupName cannot be null or undefined and it must be of type string.");if(null==t||"string"!=typeof t.valueOf())throw new Error("resourceName cannot be null or undefined and it must be of type string.");if(null!==this.client.acceptLanguage&&void 0!==this.client.acceptLanguage&&"string"!=typeof this.client.acceptLanguage.valueOf())throw new Error("this.client.acceptLanguage must be of type string.")}catch(e){return s(e)}let c=this.client.baseUri,u=c+(c.endsWith("/")?"":"/")+"subscriptions/{subscriptionId}/resourceGroups/{resourceGroupName}/providers/Microsoft.Devices/IotHubs/{resourceName}/quotaMetrics";u=(u=(u=u.replace("{subscriptionId}",encodeURIComponent(this.client.subscriptionId))).replace("{resourceGroupName}",encodeURIComponent(e))).replace("{resourceName}",encodeURIComponent(t));let l=[];l.push("api-version="+encodeURIComponent(this.client.apiVersion)),l.length>0&&(u+="?"+l.join("&"));let p=new o;if(p.method="GET",p.url=u,p.headers={},p.headers["Content-Type"]="application/json; charset=utf-8",this.client.generateClientRequestId&&(p.headers["x-ms-client-request-id"]=i.generateUuid()),void 0!==this.client.acceptLanguage&&null!==this.client.acceptLanguage&&(p.headers["accept-language"]=this.client.acceptLanguage),r)for(let e in r.customHeaders)r.customHeaders.hasOwnProperty(e)&&(p.headers[e]=r.customHeaders[e]);return p.body=null,a.pipeline(p,(e,t,r)=>{if(e)return s(e);let i=t.statusCode;if(200!==i){let e,i=new Error(r);i.statusCode=t.statusCode,i.request=n.stripRequest(p),i.response=n.stripResponse(t),""===r&&(r=null);try{if(e=JSON.parse(r)){let t=null;e.error&&(t=e.error),i.code=t?t.code:e.code,i.message=t?t.message:e.message}if(null!=e){let t=(new a.models.ErrorDetails).mapper();i.body=a.deserialize(t,e,"error.body")}}catch(e){return i.message=`Error "${e.message}" occurred in deserializing the responseBody `+`- "${r}" for the default response.`,s(i)}return s(i)}let o=null;if(""===r&&(r=null),200===i){let e=null;try{if(e=JSON.parse(r),o=JSON.parse(r),null!=e){let t=(new a.models.IotHubQuotaMetricInfoListResult).mapper();o=a.deserialize(t,e,"result")}}catch(e){let i=new Error(`Error ${e} occurred in deserializing the responseBody - ${r}`);return i.request=n.stripRequest(p),i.response=n.stripResponse(t),s(i)}}return s(null,o,p,t)})}function _getEndpointHealth(e,t,r,s){let a=this.client;if(s||"function"!=typeof r||(s=r,r=null),!s)throw new Error("callback cannot be null.");try{if(null===this.client.subscriptionId||void 0===this.client.subscriptionId||"string"!=typeof this.client.subscriptionId.valueOf())throw new Error("this.client.subscriptionId cannot be null or undefined and it must be of type string.");if(null==e||"string"!=typeof e.valueOf())throw new Error("resourceGroupName cannot be null or undefined and it must be of type string.");if(null==t||"string"!=typeof t.valueOf())throw new Error("iotHubName cannot be null or undefined and it must be of type string.");if(null===this.client.apiVersion||void 0===this.client.apiVersion||"string"!=typeof this.client.apiVersion.valueOf())throw new Error("this.client.apiVersion cannot be null or undefined and it must be of type string.");if(null!==this.client.acceptLanguage&&void 0!==this.client.acceptLanguage&&"string"!=typeof this.client.acceptLanguage.valueOf())throw new Error("this.client.acceptLanguage must be of type string.")}catch(e){return s(e)}let c=this.client.baseUri,u=c+(c.endsWith("/")?"":"/")+"subscriptions/{subscriptionId}/resourceGroups/{resourceGroupName}/providers/Microsoft.Devices/IotHubs/{iotHubName}/routingEndpointsHealth";u=(u=(u=u.replace("{subscriptionId}",encodeURIComponent(this.client.subscriptionId))).replace("{resourceGroupName}",encodeURIComponent(e))).replace("{iotHubName}",encodeURIComponent(t));let l=[];l.push("api-version="+encodeURIComponent(this.client.apiVersion)),l.length>0&&(u+="?"+l.join("&"));let p=new o;if(p.method="GET",p.url=u,p.headers={},p.headers["Content-Type"]="application/json; charset=utf-8",this.client.generateClientRequestId&&(p.headers["x-ms-client-request-id"]=i.generateUuid()),void 0!==this.client.acceptLanguage&&null!==this.client.acceptLanguage&&(p.headers["accept-language"]=this.client.acceptLanguage),r)for(let e in r.customHeaders)r.customHeaders.hasOwnProperty(e)&&(p.headers[e]=r.customHeaders[e]);return p.body=null,a.pipeline(p,(e,t,r)=>{if(e)return s(e);let i=t.statusCode;if(200!==i){let e,i=new Error(r);i.statusCode=t.statusCode,i.request=n.stripRequest(p),i.response=n.stripResponse(t),""===r&&(r=null);try{if(e=JSON.parse(r)){let t=null;e.error&&(t=e.error),i.code=t?t.code:e.code,i.message=t?t.message:e.message}if(null!=e){let t=(new a.models.ErrorDetails).mapper();i.body=a.deserialize(t,e,"error.body")}}catch(e){return i.message=`Error "${e.message}" occurred in deserializing the responseBody `+`- "${r}" for the default response.`,s(i)}return s(i)}let o=null;if(""===r&&(r=null),200===i){let e=null;try{if(e=JSON.parse(r),o=JSON.parse(r),null!=e){let t=(new a.models.EndpointHealthDataListResult).mapper();o=a.deserialize(t,e,"result")}}catch(e){let i=new Error(`Error ${e} occurred in deserializing the responseBody - ${r}`);return i.request=n.stripRequest(p),i.response=n.stripResponse(t),s(i)}}return s(null,o,p,t)})}function _checkNameAvailability(e,t,r){let s,a=this.client;if(r||"function"!=typeof t||(r=t,t=null),!r)throw new Error("callback cannot be null.");try{if(null===this.client.apiVersion||void 0===this.client.apiVersion||"string"!=typeof this.client.apiVersion.valueOf())throw new Error("this.client.apiVersion cannot be null or undefined and it must be of type string.");if(null===this.client.subscriptionId||void 0===this.client.subscriptionId||"string"!=typeof this.client.subscriptionId.valueOf())throw new Error("this.client.subscriptionId cannot be null or undefined and it must be of type string.");if(null==e||"string"!=typeof e.valueOf())throw new Error("name cannot be null or undefined and it must be of type string.");if(null!==this.client.acceptLanguage&&void 0!==this.client.acceptLanguage&&"string"!=typeof this.client.acceptLanguage.valueOf())throw new Error("this.client.acceptLanguage must be of type string.")}catch(e){return r(e)}null!=e&&((s=new a.models.OperationInputs).name=e);let c=this.client.baseUri,u=c+(c.endsWith("/")?"":"/")+"subscriptions/{subscriptionId}/providers/Microsoft.Devices/checkNameAvailability";u=u.replace("{subscriptionId}",encodeURIComponent(this.client.subscriptionId));let l=[];l.push("api-version="+encodeURIComponent(this.client.apiVersion)),l.length>0&&(u+="?"+l.join("&"));let p=new o;if(p.method="POST",p.url=u,p.headers={},p.headers["Content-Type"]="application/json; charset=utf-8",this.client.generateClientRequestId&&(p.headers["x-ms-client-request-id"]=i.generateUuid()),void 0!==this.client.acceptLanguage&&null!==this.client.acceptLanguage&&(p.headers["accept-language"]=this.client.acceptLanguage),t)for(let e in t.customHeaders)t.customHeaders.hasOwnProperty(e)&&(p.headers[e]=t.customHeaders[e]);let d=null,h=null;try{if(null!=s){let e=(new a.models.OperationInputs).mapper();h=a.serialize(e,s,"operationInputs"),d=JSON.stringify(h)}}catch(e){let t=new Error(`Error "${e.message}" occurred in serializing the `+`payload - ${JSON.stringify(s,null,2)}.`);return r(t)}return p.body=d,a.pipeline(p,(e,t,i)=>{if(e)return r(e);let o=t.statusCode;if(200!==o){let e,o=new Error(i);o.statusCode=t.statusCode,o.request=n.stripRequest(p),o.response=n.stripResponse(t),""===i&&(i=null);try{if(e=JSON.parse(i)){let t=null;e.error&&(t=e.error),o.code=t?t.code:e.code,o.message=t?t.message:e.message}if(null!=e){let t=(new a.models.ErrorDetails).mapper();o.body=a.deserialize(t,e,"error.body")}}catch(e){return o.message=`Error "${e.message}" occurred in deserializing the responseBody `+`- "${i}" for the default response.`,r(o)}return r(o)}let s=null;if(""===i&&(i=null),200===o){let e=null;try{if(e=JSON.parse(i),s=JSON.parse(i),null!=e){let t=(new a.models.IotHubNameAvailabilityInfo).mapper();s=a.deserialize(t,e,"result")}}catch(e){let o=new Error(`Error ${e} occurred in deserializing the responseBody - ${i}`);return o.request=n.stripRequest(p),o.response=n.stripResponse(t),r(o)}}return r(null,s,p,t)})}function _testAllRoutes(e,t,r,s,a){let c=this.client;if(a||"function"!=typeof s||(a=s,s=null),!a)throw new Error("callback cannot be null.");try{if(null==e)throw new Error("input cannot be null or undefined.");if(null==t||"string"!=typeof t.valueOf())throw new Error("iotHubName cannot be null or undefined and it must be of type string.");if(null===this.client.subscriptionId||void 0===this.client.subscriptionId||"string"!=typeof this.client.subscriptionId.valueOf())throw new Error("this.client.subscriptionId cannot be null or undefined and it must be of type string.");if(null==r||"string"!=typeof r.valueOf())throw new Error("resourceGroupName cannot be null or undefined and it must be of type string.");if(null===this.client.apiVersion||void 0===this.client.apiVersion||"string"!=typeof this.client.apiVersion.valueOf())throw new Error("this.client.apiVersion cannot be null or undefined and it must be of type string.");if(null!==this.client.acceptLanguage&&void 0!==this.client.acceptLanguage&&"string"!=typeof this.client.acceptLanguage.valueOf())throw new Error("this.client.acceptLanguage must be of type string.")}catch(e){return a(e)}let u=this.client.baseUri,l=u+(u.endsWith("/")?"":"/")+"subscriptions/{subscriptionId}/resourceGroups/{resourceGroupName}/providers/Microsoft.Devices/IotHubs/{iotHubName}/routing/routes/$testall";l=(l=(l=l.replace("{iotHubName}",encodeURIComponent(t))).replace("{subscriptionId}",encodeURIComponent(this.client.subscriptionId))).replace("{resourceGroupName}",encodeURIComponent(r));let p=[];p.push("api-version="+encodeURIComponent(this.client.apiVersion)),p.length>0&&(l+="?"+p.join("&"));let d=new o;if(d.method="POST",d.url=l,d.headers={},d.headers["Content-Type"]="application/json; charset=utf-8",this.client.generateClientRequestId&&(d.headers["x-ms-client-request-id"]=i.generateUuid()),void 0!==this.client.acceptLanguage&&null!==this.client.acceptLanguage&&(d.headers["accept-language"]=this.client.acceptLanguage),s)for(let e in s.customHeaders)s.customHeaders.hasOwnProperty(e)&&(d.headers[e]=s.customHeaders[e]);let h=null,f=null;try{if(null!=e){let t=(new c.models.TestAllRoutesInput).mapper();f=c.serialize(t,e,"input"),h=JSON.stringify(f)}}catch(t){let r=new Error(`Error "${t.message}" occurred in serializing the `+`payload - ${JSON.stringify(e,null,2)}.`);return a(r)}return d.body=h,c.pipeline(d,(e,t,r)=>{if(e)return a(e);let i=t.statusCode;if(200!==i){let e,i=new Error(r);i.statusCode=t.statusCode,i.request=n.stripRequest(d),i.response=n.stripResponse(t),""===r&&(r=null);try{if(e=JSON.parse(r)){let t=null;e.error&&(t=e.error),i.code=t?t.code:e.code,i.message=t?t.message:e.message}if(null!=e){let t=(new c.models.ErrorDetails).mapper();i.body=c.deserialize(t,e,"error.body")}}catch(e){return i.message=`Error "${e.message}" occurred in deserializing the responseBody `+`- "${r}" for the default response.`,a(i)}return a(i)}let o=null;if(""===r&&(r=null),200===i){let e=null;try{if(e=JSON.parse(r),o=JSON.parse(r),null!=e){let t=(new c.models.TestAllRoutesResult).mapper();o=c.deserialize(t,e,"result")}}catch(e){let i=new Error(`Error ${e} occurred in deserializing the responseBody - ${r}`);return i.request=n.stripRequest(d),i.response=n.stripResponse(t),a(i)}}return a(null,o,d,t)})}function _testRoute(e,t,r,s,a){let c=this.client;if(a||"function"!=typeof s||(a=s,s=null),!a)throw new Error("callback cannot be null.");try{if(null==e)throw new Error("input cannot be null or undefined.");if(null==t||"string"!=typeof t.valueOf())throw new Error("iotHubName cannot be null or undefined and it must be of type string.");if(null===this.client.subscriptionId||void 0===this.client.subscriptionId||"string"!=typeof this.client.subscriptionId.valueOf())throw new Error("this.client.subscriptionId cannot be null or undefined and it must be of type string.");if(null==r||"string"!=typeof r.valueOf())throw new Error("resourceGroupName cannot be null or undefined and it must be of type string.");if(null===this.client.apiVersion||void 0===this.client.apiVersion||"string"!=typeof this.client.apiVersion.valueOf())throw new Error("this.client.apiVersion cannot be null or undefined and it must be of type string.");if(null!==this.client.acceptLanguage&&void 0!==this.client.acceptLanguage&&"string"!=typeof this.client.acceptLanguage.valueOf())throw new Error("this.client.acceptLanguage must be of type string.")}catch(e){return a(e)}let u=this.client.baseUri,l=u+(u.endsWith("/")?"":"/")+"subscriptions/{subscriptionId}/resourceGroups/{resourceGroupName}/providers/Microsoft.Devices/IotHubs/{iotHubName}/routing/routes/$testnew";l=(l=(l=l.replace("{iotHubName}",encodeURIComponent(t))).replace("{subscriptionId}",encodeURIComponent(this.client.subscriptionId))).replace("{resourceGroupName}",encodeURIComponent(r));let p=[];p.push("api-version="+encodeURIComponent(this.client.apiVersion)),p.length>0&&(l+="?"+p.join("&"));let d=new o;if(d.method="POST",d.url=l,d.headers={},d.headers["Content-Type"]="application/json; charset=utf-8",this.client.generateClientRequestId&&(d.headers["x-ms-client-request-id"]=i.generateUuid()),void 0!==this.client.acceptLanguage&&null!==this.client.acceptLanguage&&(d.headers["accept-language"]=this.client.acceptLanguage),s)for(let e in s.customHeaders)s.customHeaders.hasOwnProperty(e)&&(d.headers[e]=s.customHeaders[e]);let h=null,f=null;try{if(null!=e){let t=(new c.models.TestRouteInput).mapper();f=c.serialize(t,e,"input"),h=JSON.stringify(f)}}catch(t){let r=new Error(`Error "${t.message}" occurred in serializing the `+`payload - ${JSON.stringify(e,null,2)}.`);return a(r)}return d.body=h,c.pipeline(d,(e,t,r)=>{if(e)return a(e);let i=t.statusCode;if(200!==i){let e,i=new Error(r);i.statusCode=t.statusCode,i.request=n.stripRequest(d),i.response=n.stripResponse(t),""===r&&(r=null);try{if(e=JSON.parse(r)){let t=null;e.error&&(t=e.error),i.code=t?t.code:e.code,i.message=t?t.message:e.message}if(null!=e){let t=(new c.models.ErrorDetails).mapper();i.body=c.deserialize(t,e,"error.body")}}catch(e){return i.message=`Error "${e.message}" occurred in deserializing the responseBody `+`- "${r}" for the default response.`,a(i)}return a(i)}let o=null;if(""===r&&(r=null),200===i){let e=null;try{if(e=JSON.parse(r),o=JSON.parse(r),null!=e){let t=(new c.models.TestRouteResult).mapper();o=c.deserialize(t,e,"result")}}catch(e){let i=new Error(`Error ${e} occurred in deserializing the responseBody - ${r}`);return i.request=n.stripRequest(d),i.response=n.stripResponse(t),a(i)}}return a(null,o,d,t)})}function _listKeys(e,t,r,s){let a=this.client;if(s||"function"!=typeof r||(s=r,r=null),!s)throw new Error("callback cannot be null.");try{if(null===this.client.apiVersion||void 0===this.client.apiVersion||"string"!=typeof this.client.apiVersion.valueOf())throw new Error("this.client.apiVersion cannot be null or undefined and it must be of type string.");if(null===this.client.subscriptionId||void 0===this.client.subscriptionId||"string"!=typeof this.client.subscriptionId.valueOf())throw new Error("this.client.subscriptionId cannot be null or undefined and it must be of type string.");if(null==e||"string"!=typeof e.valueOf())throw new Error("resourceGroupName cannot be null or undefined and it must be of type string.");if(null==t||"string"!=typeof t.valueOf())throw new Error("resourceName cannot be null or undefined and it must be of type string.");if(null!==this.client.acceptLanguage&&void 0!==this.client.acceptLanguage&&"string"!=typeof this.client.acceptLanguage.valueOf())throw new Error("this.client.acceptLanguage must be of type string.")}catch(e){return s(e)}let c=this.client.baseUri,u=c+(c.endsWith("/")?"":"/")+"subscriptions/{subscriptionId}/resourceGroups/{resourceGroupName}/providers/Microsoft.Devices/IotHubs/{resourceName}/listkeys";u=(u=(u=u.replace("{subscriptionId}",encodeURIComponent(this.client.subscriptionId))).replace("{resourceGroupName}",encodeURIComponent(e))).replace("{resourceName}",encodeURIComponent(t));let l=[];l.push("api-version="+encodeURIComponent(this.client.apiVersion)),l.length>0&&(u+="?"+l.join("&"));let p=new o;if(p.method="POST",p.url=u,p.headers={},p.headers["Content-Type"]="application/json; charset=utf-8",this.client.generateClientRequestId&&(p.headers["x-ms-client-request-id"]=i.generateUuid()),void 0!==this.client.acceptLanguage&&null!==this.client.acceptLanguage&&(p.headers["accept-language"]=this.client.acceptLanguage),r)for(let e in r.customHeaders)r.customHeaders.hasOwnProperty(e)&&(p.headers[e]=r.customHeaders[e]);return p.body=null,a.pipeline(p,(e,t,r)=>{if(e)return s(e);let i=t.statusCode;if(200!==i){let e,i=new Error(r);i.statusCode=t.statusCode,i.request=n.stripRequest(p),i.response=n.stripResponse(t),""===r&&(r=null);try{if(e=JSON.parse(r)){let t=null;e.error&&(t=e.error),i.code=t?t.code:e.code,i.message=t?t.message:e.message}if(null!=e){let t=(new a.models.ErrorDetails).mapper();i.body=a.deserialize(t,e,"error.body")}}catch(e){return i.message=`Error "${e.message}" occurred in deserializing the responseBody `+`- "${r}" for the default response.`,s(i)}return s(i)}let o=null;if(""===r&&(r=null),200===i){let e=null;try{if(e=JSON.parse(r),o=JSON.parse(r),null!=e){let t=(new a.models.SharedAccessSignatureAuthorizationRuleListResult).mapper();o=a.deserialize(t,e,"result")}}catch(e){let i=new Error(`Error ${e} occurred in deserializing the responseBody - ${r}`);return i.request=n.stripRequest(p),i.response=n.stripResponse(t),s(i)}}return s(null,o,p,t)})}function _getKeysForKeyName(e,t,r,s,a){let c=this.client;if(a||"function"!=typeof s||(a=s,s=null),!a)throw new Error("callback cannot be null.");try{if(null===this.client.apiVersion||void 0===this.client.apiVersion||"string"!=typeof this.client.apiVersion.valueOf())throw new Error("this.client.apiVersion cannot be null or undefined and it must be of type string.");if(null===this.client.subscriptionId||void 0===this.client.subscriptionId||"string"!=typeof this.client.subscriptionId.valueOf())throw new Error("this.client.subscriptionId cannot be null or undefined and it must be of type string.");if(null==e||"string"!=typeof e.valueOf())throw new Error("resourceGroupName cannot be null or undefined and it must be of type string.");if(null==t||"string"!=typeof t.valueOf())throw new Error("resourceName cannot be null or undefined and it must be of type string.");if(null==r||"string"!=typeof r.valueOf())throw new Error("keyName cannot be null or undefined and it must be of type string.");if(null!==this.client.acceptLanguage&&void 0!==this.client.acceptLanguage&&"string"!=typeof this.client.acceptLanguage.valueOf())throw new Error("this.client.acceptLanguage must be of type string.")}catch(e){return a(e)}let u=this.client.baseUri,l=u+(u.endsWith("/")?"":"/")+"subscriptions/{subscriptionId}/resourceGroups/{resourceGroupName}/providers/Microsoft.Devices/IotHubs/{resourceName}/IotHubKeys/{keyName}/listkeys";l=(l=(l=(l=l.replace("{subscriptionId}",encodeURIComponent(this.client.subscriptionId))).replace("{resourceGroupName}",encodeURIComponent(e))).replace("{resourceName}",encodeURIComponent(t))).replace("{keyName}",encodeURIComponent(r));let p=[];p.push("api-version="+encodeURIComponent(this.client.apiVersion)),p.length>0&&(l+="?"+p.join("&"));let d=new o;if(d.method="POST",d.url=l,d.headers={},d.headers["Content-Type"]="application/json; charset=utf-8",this.client.generateClientRequestId&&(d.headers["x-ms-client-request-id"]=i.generateUuid()),void 0!==this.client.acceptLanguage&&null!==this.client.acceptLanguage&&(d.headers["accept-language"]=this.client.acceptLanguage),s)for(let e in s.customHeaders)s.customHeaders.hasOwnProperty(e)&&(d.headers[e]=s.customHeaders[e]);return d.body=null,c.pipeline(d,(e,t,r)=>{if(e)return a(e);let i=t.statusCode;if(200!==i){let e,i=new Error(r);i.statusCode=t.statusCode,i.request=n.stripRequest(d),i.response=n.stripResponse(t),""===r&&(r=null);try{if(e=JSON.parse(r)){let t=null;e.error&&(t=e.error),i.code=t?t.code:e.code,i.message=t?t.message:e.message}if(null!=e){let t=(new c.models.ErrorDetails).mapper();i.body=c.deserialize(t,e,"error.body")}}catch(e){return i.message=`Error "${e.message}" occurred in deserializing the responseBody `+`- "${r}" for the default response.`,a(i)}return a(i)}let o=null;if(""===r&&(r=null),200===i){let e=null;try{if(e=JSON.parse(r),o=JSON.parse(r),null!=e){let t=(new c.models.SharedAccessSignatureAuthorizationRule).mapper();o=c.deserialize(t,e,"result")}}catch(e){let i=new Error(`Error ${e} occurred in deserializing the responseBody - ${r}`);return i.request=n.stripRequest(d),i.response=n.stripResponse(t),a(i)}}return a(null,o,d,t)})}function _exportDevices(e,t,r,s,a){let c=this.client;if(a||"function"!=typeof s||(a=s,s=null),!a)throw new Error("callback cannot be null.");try{if(null===this.client.apiVersion||void 0===this.client.apiVersion||"string"!=typeof this.client.apiVersion.valueOf())throw new Error("this.client.apiVersion cannot be null or undefined and it must be of type string.");if(null===this.client.subscriptionId||void 0===this.client.subscriptionId||"string"!=typeof this.client.subscriptionId.valueOf())throw new Error("this.client.subscriptionId cannot be null or undefined and it must be of type string.");if(null==e||"string"!=typeof e.valueOf())throw new Error("resourceGroupName cannot be null or undefined and it must be of type string.");if(null==t||"string"!=typeof t.valueOf())throw new Error("resourceName cannot be null or undefined and it must be of type string.");if(null==r)throw new Error("exportDevicesParameters cannot be null or undefined.");if(null!==this.client.acceptLanguage&&void 0!==this.client.acceptLanguage&&"string"!=typeof this.client.acceptLanguage.valueOf())throw new Error("this.client.acceptLanguage must be of type string.")}catch(e){return a(e)}let u=this.client.baseUri,l=u+(u.endsWith("/")?"":"/")+"subscriptions/{subscriptionId}/resourceGroups/{resourceGroupName}/providers/Microsoft.Devices/IotHubs/{resourceName}/exportDevices";l=(l=(l=l.replace("{subscriptionId}",encodeURIComponent(this.client.subscriptionId))).replace("{resourceGroupName}",encodeURIComponent(e))).replace("{resourceName}",encodeURIComponent(t));let p=[];p.push("api-version="+encodeURIComponent(this.client.apiVersion)),p.length>0&&(l+="?"+p.join("&"));let d=new o;if(d.method="POST",d.url=l,d.headers={},d.headers["Content-Type"]="application/json; charset=utf-8",this.client.generateClientRequestId&&(d.headers["x-ms-client-request-id"]=i.generateUuid()),void 0!==this.client.acceptLanguage&&null!==this.client.acceptLanguage&&(d.headers["accept-language"]=this.client.acceptLanguage),s)for(let e in s.customHeaders)s.customHeaders.hasOwnProperty(e)&&(d.headers[e]=s.customHeaders[e]);let h=null,f=null;try{if(null!=r){let e=(new c.models.ExportDevicesRequest).mapper();f=c.serialize(e,r,"exportDevicesParameters"),h=JSON.stringify(f)}}catch(e){let t=new Error(`Error "${e.message}" occurred in serializing the `+`payload - ${JSON.stringify(r,null,2)}.`);return a(t)}return d.body=h,c.pipeline(d,(e,t,r)=>{if(e)return a(e);let i=t.statusCode;if(200!==i){let e,i=new Error(r);i.statusCode=t.statusCode,i.request=n.stripRequest(d),i.response=n.stripResponse(t),""===r&&(r=null);try{if(e=JSON.parse(r)){let t=null;e.error&&(t=e.error),i.code=t?t.code:e.code,i.message=t?t.message:e.message}if(null!=e){let t=(new c.models.ErrorDetails).mapper();i.body=c.deserialize(t,e,"error.body")}}catch(e){return i.message=`Error "${e.message}" occurred in deserializing the responseBody `+`- "${r}" for the default response.`,a(i)}return a(i)}let o=null;if(""===r&&(r=null),200===i){let e=null;try{if(e=JSON.parse(r),o=JSON.parse(r),null!=e){let t=(new c.models.JobResponse).mapper();o=c.deserialize(t,e,"result")}}catch(e){let i=new Error(`Error ${e} occurred in deserializing the responseBody - ${r}`);return i.request=n.stripRequest(d),i.response=n.stripResponse(t),a(i)}}return a(null,o,d,t)})}function _importDevices(e,t,r,s,a){let c=this.client;if(a||"function"!=typeof s||(a=s,s=null),!a)throw new Error("callback cannot be null.");try{if(null===this.client.apiVersion||void 0===this.client.apiVersion||"string"!=typeof this.client.apiVersion.valueOf())throw new Error("this.client.apiVersion cannot be null or undefined and it must be of type string.");if(null===this.client.subscriptionId||void 0===this.client.subscriptionId||"string"!=typeof this.client.subscriptionId.valueOf())throw new Error("this.client.subscriptionId cannot be null or undefined and it must be of type string.");if(null==e||"string"!=typeof e.valueOf())throw new Error("resourceGroupName cannot be null or undefined and it must be of type string.");if(null==t||"string"!=typeof t.valueOf())throw new Error("resourceName cannot be null or undefined and it must be of type string.");if(null==r)throw new Error("importDevicesParameters cannot be null or undefined.");if(null!==this.client.acceptLanguage&&void 0!==this.client.acceptLanguage&&"string"!=typeof this.client.acceptLanguage.valueOf())throw new Error("this.client.acceptLanguage must be of type string.")}catch(e){return a(e)}let u=this.client.baseUri,l=u+(u.endsWith("/")?"":"/")+"subscriptions/{subscriptionId}/resourceGroups/{resourceGroupName}/providers/Microsoft.Devices/IotHubs/{resourceName}/importDevices";l=(l=(l=l.replace("{subscriptionId}",encodeURIComponent(this.client.subscriptionId))).replace("{resourceGroupName}",encodeURIComponent(e))).replace("{resourceName}",encodeURIComponent(t));let p=[];p.push("api-version="+encodeURIComponent(this.client.apiVersion)),p.length>0&&(l+="?"+p.join("&"));let d=new o;if(d.method="POST",d.url=l,d.headers={},d.headers["Content-Type"]="application/json; charset=utf-8",this.client.generateClientRequestId&&(d.headers["x-ms-client-request-id"]=i.generateUuid()),void 0!==this.client.acceptLanguage&&null!==this.client.acceptLanguage&&(d.headers["accept-language"]=this.client.acceptLanguage),s)for(let e in s.customHeaders)s.customHeaders.hasOwnProperty(e)&&(d.headers[e]=s.customHeaders[e]);let h=null,f=null;try{if(null!=r){let e=(new c.models.ImportDevicesRequest).mapper();f=c.serialize(e,r,"importDevicesParameters"),h=JSON.stringify(f)}}catch(e){let t=new Error(`Error "${e.message}" occurred in serializing the `+`payload - ${JSON.stringify(r,null,2)}.`);return a(t)}return d.body=h,c.pipeline(d,(e,t,r)=>{if(e)return a(e);let i=t.statusCode;if(200!==i){let e,i=new Error(r);i.statusCode=t.statusCode,i.request=n.stripRequest(d),i.response=n.stripResponse(t),""===r&&(r=null);try{if(e=JSON.parse(r)){let t=null;e.error&&(t=e.error),i.code=t?t.code:e.code,i.message=t?t.message:e.message}if(null!=e){let t=(new c.models.ErrorDetails).mapper();i.body=c.deserialize(t,e,"error.body")}}catch(e){return i.message=`Error "${e.message}" occurred in deserializing the responseBody `+`- "${r}" for the default response.`,a(i)}return a(i)}let o=null;if(""===r&&(r=null),200===i){let e=null;try{if(e=JSON.parse(r),o=JSON.parse(r),null!=e){let t=(new c.models.JobResponse).mapper();o=c.deserialize(t,e,"result")}}catch(e){let i=new Error(`Error ${e} occurred in deserializing the responseBody - ${r}`);return i.request=n.stripRequest(d),i.response=n.stripResponse(t),a(i)}}return a(null,o,d,t)})}function _beginCreateOrUpdate(e,t,r,s,a){let c=this.client;if(a||"function"!=typeof s||(a=s,s=null),!a)throw new Error("callback cannot be null.");let u=s&&void 0!==s.ifMatch?s.ifMatch:void 0;null==r&&(r={});try{if(null===this.client.apiVersion||void 0===this.client.apiVersion||"string"!=typeof this.client.apiVersion.valueOf())throw new Error("this.client.apiVersion cannot be null or undefined and it must be of type string.");if(null===this.client.subscriptionId||void 0===this.client.subscriptionId||"string"!=typeof this.client.subscriptionId.valueOf())throw new Error("this.client.subscriptionId cannot be null or undefined and it must be of type string.");if(null==e||"string"!=typeof e.valueOf())throw new Error("resourceGroupName cannot be null or undefined and it must be of type string.");if(null==t||"string"!=typeof t.valueOf())throw new Error("resourceName cannot be null or undefined and it must be of type string.");if(null==r)throw new Error("iotHubDescription cannot be null or undefined.");if(null!=u&&"string"!=typeof u.valueOf())throw new Error("ifMatch must be of type string.");if(null!==this.client.acceptLanguage&&void 0!==this.client.acceptLanguage&&"string"!=typeof this.client.acceptLanguage.valueOf())throw new Error("this.client.acceptLanguage must be of type string.")}catch(e){return a(e)}let l=this.client.baseUri,p=l+(l.endsWith("/")?"":"/")+"subscriptions/{subscriptionId}/resourceGroups/{resourceGroupName}/providers/Microsoft.Devices/IotHubs/{resourceName}";p=(p=(p=p.replace("{subscriptionId}",encodeURIComponent(this.client.subscriptionId))).replace("{resourceGroupName}",encodeURIComponent(e))).replace("{resourceName}",encodeURIComponent(t));let d=[];d.push("api-version="+encodeURIComponent(this.client.apiVersion)),d.length>0&&(p+="?"+d.join("&"));let h=new o;if(h.method="PUT",h.url=p,h.headers={},h.headers["Content-Type"]="application/json; charset=utf-8",this.client.generateClientRequestId&&(h.headers["x-ms-client-request-id"]=i.generateUuid()),null!=u&&(h.headers["If-Match"]=u),void 0!==this.client.acceptLanguage&&null!==this.client.acceptLanguage&&(h.headers["accept-language"]=this.client.acceptLanguage),s)for(let e in s.customHeaders)s.customHeaders.hasOwnProperty(e)&&(h.headers[e]=s.customHeaders[e]);let f=null,m=null;try{if(null!=r){let e=(new c.models.IotHubDescription).mapper();m=c.serialize(e,r,"iotHubDescription"),f=JSON.stringify(m)}}catch(e){let t=new Error(`Error "${e.message}" occurred in serializing the `+`payload - ${JSON.stringify(r,null,2)}.`);return a(t)}return h.body=f,c.pipeline(h,(e,t,r)=>{if(e)return a(e);let i=t.statusCode;if(200!==i&&201!==i){let e,i=new Error(r);i.statusCode=t.statusCode,i.request=n.stripRequest(h),i.response=n.stripResponse(t),""===r&&(r=null);try{if(e=JSON.parse(r)){let t=null;e.error&&(t=e.error),i.code=t?t.code:e.code,i.message=t?t.message:e.message}if(null!=e){let t=(new c.models.ErrorDetails).mapper();i.body=c.deserialize(t,e,"error.body")}}catch(e){return i.message=`Error "${e.message}" occurred in deserializing the responseBody `+`- "${r}" for the default response.`,a(i)}return a(i)}let o=null;if(""===r&&(r=null),200===i){let e=null;try{if(e=JSON.parse(r),o=JSON.parse(r),null!=e){let t=(new c.models.IotHubDescription).mapper();o=c.deserialize(t,e,"result")}}catch(e){let i=new Error(`Error ${e} occurred in deserializing the responseBody - ${r}`);return i.request=n.stripRequest(h),i.response=n.stripResponse(t),a(i)}}if(201===i){let e=null;try{if(e=JSON.parse(r),o=JSON.parse(r),null!=e){let t=(new c.models.IotHubDescription).mapper();o=c.deserialize(t,e,"result")}}catch(e){let i=new Error(`Error ${e} occurred in deserializing the responseBody - ${r}`);return i.request=n.stripRequest(h),i.response=n.stripResponse(t),a(i)}}return a(null,o,h,t)})}function _beginUpdate(e,t,r,s){let a=this.client;if(s||"function"!=typeof r||(s=r,r=null),!s)throw new Error("callback cannot be null.");let c,u=r&&void 0!==r.tags?r.tags:void 0;try{if(null===this.client.subscriptionId||void 0===this.client.subscriptionId||"string"!=typeof this.client.subscriptionId.valueOf())throw new Error("this.client.subscriptionId cannot be null or undefined and it must be of type string.");if(null==e||"string"!=typeof e.valueOf())throw new Error("resourceGroupName cannot be null or undefined and it must be of type string.");if(null==t||"string"!=typeof t.valueOf())throw new Error("resourceName cannot be null or undefined and it must be of type string.");if(null===this.client.apiVersion||void 0===this.client.apiVersion||"string"!=typeof this.client.apiVersion.valueOf())throw new Error("this.client.apiVersion cannot be null or undefined and it must be of type string.");if(u&&"object"==typeof u)for(let e in u)if(null!==u[e]&&void 0!==u[e]&&"string"!=typeof u[e].valueOf())throw new Error("tags[valueElement] must be of type string.");if(null!==this.client.acceptLanguage&&void 0!==this.client.acceptLanguage&&"string"!=typeof this.client.acceptLanguage.valueOf())throw new Error("this.client.acceptLanguage must be of type string.")}catch(e){return s(e)}null!=u&&((c=new a.models.TagsResource).tags=u);let l=this.client.baseUri,p=l+(l.endsWith("/")?"":"/")+"subscriptions/{subscriptionId}/resourceGroups/{resourceGroupName}/providers/Microsoft.Devices/IotHubs/{resourceName}";p=(p=(p=p.replace("{subscriptionId}",encodeURIComponent(this.client.subscriptionId))).replace("{resourceGroupName}",encodeURIComponent(e))).replace("{resourceName}",encodeURIComponent(t));let d=[];d.push("api-version="+encodeURIComponent(this.client.apiVersion)),d.length>0&&(p+="?"+d.join("&"));let h=new o;if(h.method="PATCH",h.url=p,h.headers={},h.headers["Content-Type"]="application/json; charset=utf-8",this.client.generateClientRequestId&&(h.headers["x-ms-client-request-id"]=i.generateUuid()),void 0!==this.client.acceptLanguage&&null!==this.client.acceptLanguage&&(h.headers["accept-language"]=this.client.acceptLanguage),r)for(let e in r.customHeaders)r.customHeaders.hasOwnProperty(e)&&(h.headers[e]=r.customHeaders[e]);let f=null,m=null;try{if(null!=c){let e=(new a.models.TagsResource).mapper();m=a.serialize(e,c,"iotHubTags"),f=JSON.stringify(m)}}catch(e){let t=new Error(`Error "${e.message}" occurred in serializing the `+`payload - ${JSON.stringify(c,null,2)}.`);return s(t)}return h.body=f,a.pipeline(h,(e,t,r)=>{if(e)return s(e);let i=t.statusCode;if(200!==i){let e,i=new Error(r);i.statusCode=t.statusCode,i.request=n.stripRequest(h),i.response=n.stripResponse(t),""===r&&(r=null);try{if((e=JSON.parse(r))&&(e.error&&(e=e.error),e.code&&(i.code=e.code),e.message&&(i.message=e.message)),null!=e){let t=(new a.models.CloudError).mapper();i.body=a.deserialize(t,e,"error.body")}}catch(e){return i.message=`Error "${e.message}" occurred in deserializing the responseBody `+`- "${r}" for the default response.`,s(i)}return s(i)}let o=null;if(""===r&&(r=null),200===i){let e=null;try{if(e=JSON.parse(r),o=JSON.parse(r),null!=e){let t=(new a.models.IotHubDescription).mapper();o=a.deserialize(t,e,"result")}}catch(e){let i=new Error(`Error ${e} occurred in deserializing the responseBody - ${r}`);return i.request=n.stripRequest(h),i.response=n.stripResponse(t),s(i)}}return s(null,o,h,t)})}function _beginDeleteMethod(e,t,r,s){let a=this.client;if(s||"function"!=typeof r||(s=r,r=null),!s)throw new Error("callback cannot be null.");try{if(null===this.client.apiVersion||void 0===this.client.apiVersion||"string"!=typeof this.client.apiVersion.valueOf())throw new Error("this.client.apiVersion cannot be null or undefined and it must be of type string.");if(null===this.client.subscriptionId||void 0===this.client.subscriptionId||"string"!=typeof this.client.subscriptionId.valueOf())throw new Error("this.client.subscriptionId cannot be null or undefined and it must be of type string.");if(null==e||"string"!=typeof e.valueOf())throw new Error("resourceGroupName cannot be null or undefined and it must be of type string.");if(null==t||"string"!=typeof t.valueOf())throw new Error("resourceName cannot be null or undefined and it must be of type string.");if(null!==this.client.acceptLanguage&&void 0!==this.client.acceptLanguage&&"string"!=typeof this.client.acceptLanguage.valueOf())throw new Error("this.client.acceptLanguage must be of type string.")}catch(e){return s(e)}let c=this.client.baseUri,u=c+(c.endsWith("/")?"":"/")+"subscriptions/{subscriptionId}/resourceGroups/{resourceGroupName}/providers/Microsoft.Devices/IotHubs/{resourceName}";u=(u=(u=u.replace("{subscriptionId}",encodeURIComponent(this.client.subscriptionId))).replace("{resourceGroupName}",encodeURIComponent(e))).replace("{resourceName}",encodeURIComponent(t));let l=[];l.push("api-version="+encodeURIComponent(this.client.apiVersion)),l.length>0&&(u+="?"+l.join("&"));let p=new o;if(p.method="DELETE",p.url=u,p.headers={},p.headers["Content-Type"]="application/json; charset=utf-8",this.client.generateClientRequestId&&(p.headers["x-ms-client-request-id"]=i.generateUuid()),void 0!==this.client.acceptLanguage&&null!==this.client.acceptLanguage&&(p.headers["accept-language"]=this.client.acceptLanguage),r)for(let e in r.customHeaders)r.customHeaders.hasOwnProperty(e)&&(p.headers[e]=r.customHeaders[e]);return p.body=null,a.pipeline(p,(e,t,r)=>{if(e)return s(e);let i=t.statusCode;if(200!==i&&202!==i&&204!==i&&404!==i){let e,i=new Error(r);i.statusCode=t.statusCode,i.request=n.stripRequest(p),i.response=n.stripResponse(t),""===r&&(r=null);try{if(e=JSON.parse(r)){let t=null;e.error&&(t=e.error),i.code=t?t.code:e.code,i.message=t?t.message:e.message}if(null!=e){let t=(new a.models.ErrorDetails).mapper();i.body=a.deserialize(t,e,"error.body")}}catch(e){return i.message=`Error "${e.message}" occurred in deserializing the responseBody `+`- "${r}" for the default response.`,s(i)}return s(i)}let o=null;if(""===r&&(r=null),200===i){let e=null;try{if(e=JSON.parse(r),o=JSON.parse(r),null!=e){let t=(new a.models.IotHubDescription).mapper();o=a.deserialize(t,e,"result")}}catch(e){let i=new Error(`Error ${e} occurred in deserializing the responseBody - ${r}`);return i.request=n.stripRequest(p),i.response=n.stripResponse(t),s(i)}}if(202===i){let e=null;try{if(e=JSON.parse(r),o=JSON.parse(r),null!=e){let t=(new a.models.IotHubDescription).mapper();o=a.deserialize(t,e,"result")}}catch(e){let i=new Error(`Error ${e} occurred in deserializing the responseBody - ${r}`);return i.request=n.stripRequest(p),i.response=n.stripResponse(t),s(i)}}if(404===i){let e=null;try{if(e=JSON.parse(r),o=JSON.parse(r),null!=e){let t=(new a.models.ErrorDetails).mapper();o=a.deserialize(t,e,"result")}}catch(e){let i=new Error(`Error ${e} occurred in deserializing the responseBody - ${r}`);return i.request=n.stripRequest(p),i.response=n.stripResponse(t),s(i)}}return s(null,o,p,t)})}function _listBySubscriptionNext(e,t,r){let s=this.client;if(r||"function"!=typeof t||(r=t,t=null),!r)throw new Error("callback cannot be null.");try{if(null==e||"string"!=typeof e.valueOf())throw new Error("nextPageLink cannot be null or undefined and it must be of type string.");if(null!==this.client.acceptLanguage&&void 0!==this.client.acceptLanguage&&"string"!=typeof this.client.acceptLanguage.valueOf())throw new Error("this.client.acceptLanguage must be of type string.")}catch(e){return r(e)}let a="{nextLink}";a=a.replace("{nextLink}",e);let c=new o;if(c.method="GET",c.url=a,c.headers={},c.headers["Content-Type"]="application/json; charset=utf-8",this.client.generateClientRequestId&&(c.headers["x-ms-client-request-id"]=i.generateUuid()),void 0!==this.client.acceptLanguage&&null!==this.client.acceptLanguage&&(c.headers["accept-language"]=this.client.acceptLanguage),t)for(let e in t.customHeaders)t.customHeaders.hasOwnProperty(e)&&(c.headers[e]=t.customHeaders[e]);return c.body=null,s.pipeline(c,(e,t,i)=>{if(e)return r(e);let o=t.statusCode;if(200!==o){let e,o=new Error(i);o.statusCode=t.statusCode,o.request=n.stripRequest(c),o.response=n.stripResponse(t),""===i&&(i=null);try{if(e=JSON.parse(i)){let t=null;e.error&&(t=e.error),o.code=t?t.code:e.code,o.message=t?t.message:e.message}if(null!=e){let t=(new s.models.ErrorDetails).mapper();o.body=s.deserialize(t,e,"error.body")}}catch(e){return o.message=`Error "${e.message}" occurred in deserializing the responseBody `+`- "${i}" for the default response.`,r(o)}return r(o)}let a=null;if(""===i&&(i=null),200===o){let e=null;try{if(e=JSON.parse(i),a=JSON.parse(i),null!=e){let t=(new s.models.IotHubDescriptionListResult).mapper();a=s.deserialize(t,e,"result")}}catch(e){let o=new Error(`Error ${e} occurred in deserializing the responseBody - ${i}`);return o.request=n.stripRequest(c),o.response=n.stripResponse(t),r(o)}}return r(null,a,c,t)})}function _listByResourceGroupNext(e,t,r){let s=this.client;if(r||"function"!=typeof t||(r=t,t=null),!r)throw new Error("callback cannot be null.");try{if(null==e||"string"!=typeof e.valueOf())throw new Error("nextPageLink cannot be null or undefined and it must be of type string.");if(null!==this.client.acceptLanguage&&void 0!==this.client.acceptLanguage&&"string"!=typeof this.client.acceptLanguage.valueOf())throw new Error("this.client.acceptLanguage must be of type string.")}catch(e){return r(e)}let a="{nextLink}";a=a.replace("{nextLink}",e);let c=new o;if(c.method="GET",c.url=a,c.headers={},c.headers["Content-Type"]="application/json; charset=utf-8",this.client.generateClientRequestId&&(c.headers["x-ms-client-request-id"]=i.generateUuid()),void 0!==this.client.acceptLanguage&&null!==this.client.acceptLanguage&&(c.headers["accept-language"]=this.client.acceptLanguage),t)for(let e in t.customHeaders)t.customHeaders.hasOwnProperty(e)&&(c.headers[e]=t.customHeaders[e]);return c.body=null,s.pipeline(c,(e,t,i)=>{if(e)return r(e);let o=t.statusCode;if(200!==o){let e,o=new Error(i);o.statusCode=t.statusCode,o.request=n.stripRequest(c),o.response=n.stripResponse(t),""===i&&(i=null);try{if(e=JSON.parse(i)){let t=null;e.error&&(t=e.error),o.code=t?t.code:e.code,o.message=t?t.message:e.message}if(null!=e){let t=(new s.models.ErrorDetails).mapper();o.body=s.deserialize(t,e,"error.body")}}catch(e){return o.message=`Error "${e.message}" occurred in deserializing the responseBody `+`- "${i}" for the default response.`,r(o)}return r(o)}let a=null;if(""===i&&(i=null),200===o){let e=null;try{if(e=JSON.parse(i),a=JSON.parse(i),null!=e){let t=(new s.models.IotHubDescriptionListResult).mapper();a=s.deserialize(t,e,"result")}}catch(e){let o=new Error(`Error ${e} occurred in deserializing the responseBody - ${i}`);return o.request=n.stripRequest(c),o.response=n.stripResponse(t),r(o)}}return r(null,a,c,t)})}function _getValidSkusNext(e,t,r){let s=this.client;if(r||"function"!=typeof t||(r=t,t=null),!r)throw new Error("callback cannot be null.");try{if(null==e||"string"!=typeof e.valueOf())throw new Error("nextPageLink cannot be null or undefined and it must be of type string.");if(null!==this.client.acceptLanguage&&void 0!==this.client.acceptLanguage&&"string"!=typeof this.client.acceptLanguage.valueOf())throw new Error("this.client.acceptLanguage must be of type string.")}catch(e){return r(e)}let a="{nextLink}";a=a.replace("{nextLink}",e);let c=new o;if(c.method="GET",c.url=a,c.headers={},c.headers["Content-Type"]="application/json; charset=utf-8",this.client.generateClientRequestId&&(c.headers["x-ms-client-request-id"]=i.generateUuid()),void 0!==this.client.acceptLanguage&&null!==this.client.acceptLanguage&&(c.headers["accept-language"]=this.client.acceptLanguage),t)for(let e in t.customHeaders)t.customHeaders.hasOwnProperty(e)&&(c.headers[e]=t.customHeaders[e]);return c.body=null,s.pipeline(c,(e,t,i)=>{if(e)return r(e);let o=t.statusCode;if(200!==o){let e,o=new Error(i);o.statusCode=t.statusCode,o.request=n.stripRequest(c),o.response=n.stripResponse(t),""===i&&(i=null);try{if(e=JSON.parse(i)){let t=null;e.error&&(t=e.error),o.code=t?t.code:e.code,o.message=t?t.message:e.message}if(null!=e){let t=(new s.models.ErrorDetails).mapper();o.body=s.deserialize(t,e,"error.body")}}catch(e){return o.message=`Error "${e.message}" occurred in deserializing the responseBody `+`- "${i}" for the default response.`,r(o)}return r(o)}let a=null;if(""===i&&(i=null),200===o){let e=null;try{if(e=JSON.parse(i),a=JSON.parse(i),null!=e){let t=(new s.models.IotHubSkuDescriptionListResult).mapper();a=s.deserialize(t,e,"result")}}catch(e){let o=new Error(`Error ${e} occurred in deserializing the responseBody - ${i}`);return o.request=n.stripRequest(c),o.response=n.stripResponse(t),r(o)}}return r(null,a,c,t)})}function _listEventHubConsumerGroupsNext(e,t,r){let s=this.client;if(r||"function"!=typeof t||(r=t,t=null),!r)throw new Error("callback cannot be null.");try{if(null==e||"string"!=typeof e.valueOf())throw new Error("nextPageLink cannot be null or undefined and it must be of type string.");if(null!==this.client.acceptLanguage&&void 0!==this.client.acceptLanguage&&"string"!=typeof this.client.acceptLanguage.valueOf())throw new Error("this.client.acceptLanguage must be of type string.")}catch(e){return r(e)}let a="{nextLink}";a=a.replace("{nextLink}",e);let c=new o;if(c.method="GET",c.url=a,c.headers={},c.headers["Content-Type"]="application/json; charset=utf-8",this.client.generateClientRequestId&&(c.headers["x-ms-client-request-id"]=i.generateUuid()),void 0!==this.client.acceptLanguage&&null!==this.client.acceptLanguage&&(c.headers["accept-language"]=this.client.acceptLanguage),t)for(let e in t.customHeaders)t.customHeaders.hasOwnProperty(e)&&(c.headers[e]=t.customHeaders[e]);return c.body=null,s.pipeline(c,(e,t,i)=>{if(e)return r(e);let o=t.statusCode;if(200!==o){let e,o=new Error(i);o.statusCode=t.statusCode,o.request=n.stripRequest(c),o.response=n.stripResponse(t),""===i&&(i=null);try{if(e=JSON.parse(i)){let t=null;e.error&&(t=e.error),o.code=t?t.code:e.code,o.message=t?t.message:e.message}if(null!=e){let t=(new s.models.ErrorDetails).mapper();o.body=s.deserialize(t,e,"error.body")}}catch(e){return o.message=`Error "${e.message}" occurred in deserializing the responseBody `+`- "${i}" for the default response.`,r(o)}return r(o)}let a=null;if(""===i&&(i=null),200===o){let e=null;try{if(e=JSON.parse(i),a=JSON.parse(i),null!=e){let t=(new s.models.EventHubConsumerGroupsListResult).mapper();a=s.deserialize(t,e,"result")}}catch(e){let o=new Error(`Error ${e} occurred in deserializing the responseBody - ${i}`);return o.request=n.stripRequest(c),o.response=n.stripResponse(t),r(o)}}return r(null,a,c,t)})}function _listJobsNext(e,t,r){let s=this.client;if(r||"function"!=typeof t||(r=t,t=null),!r)throw new Error("callback cannot be null.");try{if(null==e||"string"!=typeof e.valueOf())throw new Error("nextPageLink cannot be null or undefined and it must be of type string.");if(null!==this.client.acceptLanguage&&void 0!==this.client.acceptLanguage&&"string"!=typeof this.client.acceptLanguage.valueOf())throw new Error("this.client.acceptLanguage must be of type string.")}catch(e){return r(e)}let a="{nextLink}";a=a.replace("{nextLink}",e);let c=new o;if(c.method="GET",c.url=a,c.headers={},c.headers["Content-Type"]="application/json; charset=utf-8",this.client.generateClientRequestId&&(c.headers["x-ms-client-request-id"]=i.generateUuid()),void 0!==this.client.acceptLanguage&&null!==this.client.acceptLanguage&&(c.headers["accept-language"]=this.client.acceptLanguage),t)for(let e in t.customHeaders)t.customHeaders.hasOwnProperty(e)&&(c.headers[e]=t.customHeaders[e]);return c.body=null,s.pipeline(c,(e,t,i)=>{if(e)return r(e);let o=t.statusCode;if(200!==o){let e,o=new Error(i);o.statusCode=t.statusCode,o.request=n.stripRequest(c),o.response=n.stripResponse(t),""===i&&(i=null);try{if(e=JSON.parse(i)){let t=null;e.error&&(t=e.error),o.code=t?t.code:e.code,o.message=t?t.message:e.message}if(null!=e){let t=(new s.models.ErrorDetails).mapper();o.body=s.deserialize(t,e,"error.body")}}catch(e){return o.message=`Error "${e.message}" occurred in deserializing the responseBody `+`- "${i}" for the default response.`,r(o)}return r(o)}let a=null;if(""===i&&(i=null),200===o){let e=null;try{if(e=JSON.parse(i),a=JSON.parse(i),null!=e){let t=(new s.models.JobResponseListResult).mapper();a=s.deserialize(t,e,"result")}}catch(e){let o=new Error(`Error ${e} occurred in deserializing the responseBody - ${i}`);return o.request=n.stripRequest(c),o.response=n.stripResponse(t),r(o)}}return r(null,a,c,t)})}function _getQuotaMetricsNext(e,t,r){let s=this.client;if(r||"function"!=typeof t||(r=t,t=null),!r)throw new Error("callback cannot be null.");try{if(null==e||"string"!=typeof e.valueOf())throw new Error("nextPageLink cannot be null or undefined and it must be of type string.");if(null!==this.client.acceptLanguage&&void 0!==this.client.acceptLanguage&&"string"!=typeof this.client.acceptLanguage.valueOf())throw new Error("this.client.acceptLanguage must be of type string.")}catch(e){return r(e)}let a="{nextLink}";a=a.replace("{nextLink}",e);let c=new o;if(c.method="GET",c.url=a,c.headers={},c.headers["Content-Type"]="application/json; charset=utf-8",this.client.generateClientRequestId&&(c.headers["x-ms-client-request-id"]=i.generateUuid()),void 0!==this.client.acceptLanguage&&null!==this.client.acceptLanguage&&(c.headers["accept-language"]=this.client.acceptLanguage),t)for(let e in t.customHeaders)t.customHeaders.hasOwnProperty(e)&&(c.headers[e]=t.customHeaders[e]);return c.body=null,s.pipeline(c,(e,t,i)=>{if(e)return r(e);let o=t.statusCode;if(200!==o){let e,o=new Error(i);o.statusCode=t.statusCode,o.request=n.stripRequest(c),o.response=n.stripResponse(t),""===i&&(i=null);try{if(e=JSON.parse(i)){let t=null;e.error&&(t=e.error),o.code=t?t.code:e.code,o.message=t?t.message:e.message}if(null!=e){let t=(new s.models.ErrorDetails).mapper();o.body=s.deserialize(t,e,"error.body")}}catch(e){return o.message=`Error "${e.message}" occurred in deserializing the responseBody `+`- "${i}" for the default response.`,r(o)}return r(o)}let a=null;if(""===i&&(i=null),200===o){let e=null;try{if(e=JSON.parse(i),a=JSON.parse(i),null!=e){let t=(new s.models.IotHubQuotaMetricInfoListResult).mapper();a=s.deserialize(t,e,"result")}}catch(e){let o=new Error(`Error ${e} occurred in deserializing the responseBody - ${i}`);return o.request=n.stripRequest(c),o.response=n.stripResponse(t),r(o)}}return r(null,a,c,t)})}function _getEndpointHealthNext(e,t,r){let s=this.client;if(r||"function"!=typeof t||(r=t,t=null),!r)throw new Error("callback cannot be null.");try{if(null==e||"string"!=typeof e.valueOf())throw new Error("nextPageLink cannot be null or undefined and it must be of type string.");if(null!==this.client.acceptLanguage&&void 0!==this.client.acceptLanguage&&"string"!=typeof this.client.acceptLanguage.valueOf())throw new Error("this.client.acceptLanguage must be of type string.")}catch(e){return r(e)}let a="{nextLink}";a=a.replace("{nextLink}",e);let c=new o;if(c.method="GET",c.url=a,c.headers={},c.headers["Content-Type"]="application/json; charset=utf-8",this.client.generateClientRequestId&&(c.headers["x-ms-client-request-id"]=i.generateUuid()),void 0!==this.client.acceptLanguage&&null!==this.client.acceptLanguage&&(c.headers["accept-language"]=this.client.acceptLanguage),t)for(let e in t.customHeaders)t.customHeaders.hasOwnProperty(e)&&(c.headers[e]=t.customHeaders[e]);return c.body=null,s.pipeline(c,(e,t,i)=>{if(e)return r(e);let o=t.statusCode;if(200!==o){let e,o=new Error(i);o.statusCode=t.statusCode,o.request=n.stripRequest(c),o.response=n.stripResponse(t),""===i&&(i=null);try{if(e=JSON.parse(i)){let t=null;e.error&&(t=e.error),o.code=t?t.code:e.code,o.message=t?t.message:e.message}if(null!=e){let t=(new s.models.ErrorDetails).mapper();o.body=s.deserialize(t,e,"error.body")}}catch(e){return o.message=`Error "${e.message}" occurred in deserializing the responseBody `+`- "${i}" for the default response.`,r(o)}return r(o)}let a=null;if(""===i&&(i=null),200===o){let e=null;try{if(e=JSON.parse(i),a=JSON.parse(i),null!=e){let t=(new s.models.EndpointHealthDataListResult).mapper();a=s.deserialize(t,e,"result")}}catch(e){let o=new Error(`Error ${e} occurred in deserializing the responseBody - ${i}`);return o.request=n.stripRequest(c),o.response=n.stripResponse(t),r(o)}}return r(null,a,c,t)})}function _listKeysNext(e,t,r){let s=this.client;if(r||"function"!=typeof t||(r=t,t=null),!r)throw new Error("callback cannot be null.");try{if(null==e||"string"!=typeof e.valueOf())throw new Error("nextPageLink cannot be null or undefined and it must be of type string.");if(null!==this.client.acceptLanguage&&void 0!==this.client.acceptLanguage&&"string"!=typeof this.client.acceptLanguage.valueOf())throw new Error("this.client.acceptLanguage must be of type string.")}catch(e){return r(e)}let a="{nextLink}";a=a.replace("{nextLink}",e);let c=new o;if(c.method="POST",c.url=a,c.headers={},c.headers["Content-Type"]="application/json; charset=utf-8",this.client.generateClientRequestId&&(c.headers["x-ms-client-request-id"]=i.generateUuid()),void 0!==this.client.acceptLanguage&&null!==this.client.acceptLanguage&&(c.headers["accept-language"]=this.client.acceptLanguage),t)for(let e in t.customHeaders)t.customHeaders.hasOwnProperty(e)&&(c.headers[e]=t.customHeaders[e]);return c.body=null,s.pipeline(c,(e,t,i)=>{if(e)return r(e);let o=t.statusCode;if(200!==o){let e,o=new Error(i);o.statusCode=t.statusCode,o.request=n.stripRequest(c),o.response=n.stripResponse(t),""===i&&(i=null);try{if(e=JSON.parse(i)){let t=null;e.error&&(t=e.error),o.code=t?t.code:e.code,o.message=t?t.message:e.message}if(null!=e){let t=(new s.models.ErrorDetails).mapper();o.body=s.deserialize(t,e,"error.body")}}catch(e){return o.message=`Error "${e.message}" occurred in deserializing the responseBody `+`- "${i}" for the default response.`,r(o)}return r(o)}let a=null;if(""===i&&(i=null),200===o){let e=null;try{if(e=JSON.parse(i),a=JSON.parse(i),null!=e){let t=(new s.models.SharedAccessSignatureAuthorizationRuleListResult).mapper();a=s.deserialize(t,e,"result")}}catch(e){let o=new Error(`Error ${e} occurred in deserializing the responseBody - ${i}`);return o.request=n.stripRequest(c),o.response=n.stripResponse(t),r(o)}}return r(null,a,c,t)})}e.exports=class IotHubResource{constructor(e){this.client=e,this._get=_get,this._createOrUpdate=_createOrUpdate,this._update=_update,this._deleteMethod=_deleteMethod,this._listBySubscription=_listBySubscription,this._listByResourceGroup=_listByResourceGroup,this._getStats=_getStats,this._getValidSkus=_getValidSkus,this._listEventHubConsumerGroups=_listEventHubConsumerGroups,this._getEventHubConsumerGroup=_getEventHubConsumerGroup,this._createEventHubConsumerGroup=_createEventHubConsumerGroup,this._deleteEventHubConsumerGroup=_deleteEventHubConsumerGroup,this._listJobs=_listJobs,this._getJob=_getJob,this._getQuotaMetrics=_getQuotaMetrics,this._getEndpointHealth=_getEndpointHealth,this._checkNameAvailability=_checkNameAvailability,this._testAllRoutes=_testAllRoutes,this._testRoute=_testRoute,this._listKeys=_listKeys,this._getKeysForKeyName=_getKeysForKeyName,this._exportDevices=_exportDevices,this._importDevices=_importDevices,this._beginCreateOrUpdate=_beginCreateOrUpdate,this._beginUpdate=_beginUpdate,this._beginDeleteMethod=_beginDeleteMethod,this._listBySubscriptionNext=_listBySubscriptionNext,this._listByResourceGroupNext=_listByResourceGroupNext,this._getValidSkusNext=_getValidSkusNext,this._listEventHubConsumerGroupsNext=_listEventHubConsumerGroupsNext,this._listJobsNext=_listJobsNext,this._getQuotaMetricsNext=_getQuotaMetricsNext,this._getEndpointHealthNext=_getEndpointHealthNext,this._listKeysNext=_listKeysNext}getWithHttpOperationResponse(e,t,r){this.client;let i=this;return new Promise((o,s)=>{i._get(e,t,r,(e,t,r,i)=>{let a=new n.HttpOperationResponse(r,i);a.body=t,e?s(e):o(a)})})}get(e,t,r,n){this.client;let i=this;return n||"function"!=typeof r||(n=r,r=null),n?i._get(e,t,r,n):new Promise((n,o)=>{i._get(e,t,r,(e,t,r,i)=>{e?o(e):n(t)})})}createOrUpdateWithHttpOperationResponse(e,t,r,i){this.client;let o=this;return new Promise((s,a)=>{o._createOrUpdate(e,t,r,i,(e,t,r,i)=>{let o=new n.HttpOperationResponse(r,i);o.body=t,e?a(e):s(o)})})}createOrUpdate(e,t,r,n,i){this.client;let o=this;return i||"function"!=typeof n||(i=n,n=null),i?o._createOrUpdate(e,t,r,n,i):new Promise((i,s)=>{o._createOrUpdate(e,t,r,n,(e,t,r,n)=>{e?s(e):i(t)})})}updateWithHttpOperationResponse(e,t,r){this.client;let i=this;return new Promise((o,s)=>{i._update(e,t,r,(e,t,r,i)=>{let a=new n.HttpOperationResponse(r,i);a.body=t,e?s(e):o(a)})})}update(e,t,r,n){this.client;let i=this;return n||"function"!=typeof r||(n=r,r=null),n?i._update(e,t,r,n):new Promise((n,o)=>{i._update(e,t,r,(e,t,r,i)=>{e?o(e):n(t)})})}deleteMethodWithHttpOperationResponse(e,t,r){this.client;let i=this;return new Promise((o,s)=>{i._deleteMethod(e,t,r,(e,t,r,i)=>{let a=new n.HttpOperationResponse(r,i);a.body=t,e?s(e):o(a)})})}deleteMethod(e,t,r,n){this.client;let i=this;return n||"function"!=typeof r||(n=r,r=null),n?i._deleteMethod(e,t,r,n):new Promise((n,o)=>{i._deleteMethod(e,t,r,(e,t,r,i)=>{e?o(e):n(t)})})}listBySubscriptionWithHttpOperationResponse(e){this.client;let t=this;return new Promise((r,i)=>{t._listBySubscription(e,(e,t,o,s)=>{let a=new n.HttpOperationResponse(o,s);a.body=t,e?i(e):r(a)})})}listBySubscription(e,t){this.client;let r=this;return t||"function"!=typeof e||(t=e,e=null),t?r._listBySubscription(e,t):new Promise((t,n)=>{r._listBySubscription(e,(e,r,i,o)=>{e?n(e):t(r)})})}listByResourceGroupWithHttpOperationResponse(e,t){this.client;let r=this;return new Promise((i,o)=>{r._listByResourceGroup(e,t,(e,t,r,s)=>{let a=new n.HttpOperationResponse(r,s);a.body=t,e?o(e):i(a)})})}listByResourceGroup(e,t,r){this.client;let n=this;return r||"function"!=typeof t||(r=t,t=null),r?n._listByResourceGroup(e,t,r):new Promise((r,i)=>{n._listByResourceGroup(e,t,(e,t,n,o)=>{e?i(e):r(t)})})}getStatsWithHttpOperationResponse(e,t,r){this.client;let i=this;return new Promise((o,s)=>{i._getStats(e,t,r,(e,t,r,i)=>{let a=new n.HttpOperationResponse(r,i);a.body=t,e?s(e):o(a)})})}getStats(e,t,r,n){this.client;let i=this;return n||"function"!=typeof r||(n=r,r=null),n?i._getStats(e,t,r,n):new Promise((n,o)=>{i._getStats(e,t,r,(e,t,r,i)=>{e?o(e):n(t)})})}getValidSkusWithHttpOperationResponse(e,t,r){this.client;let i=this;return new Promise((o,s)=>{i._getValidSkus(e,t,r,(e,t,r,i)=>{let a=new n.HttpOperationResponse(r,i);a.body=t,e?s(e):o(a)})})}getValidSkus(e,t,r,n){this.client;let i=this;return n||"function"!=typeof r||(n=r,r=null),n?i._getValidSkus(e,t,r,n):new Promise((n,o)=>{i._getValidSkus(e,t,r,(e,t,r,i)=>{e?o(e):n(t)})})}listEventHubConsumerGroupsWithHttpOperationResponse(e,t,r,i){this.client;let o=this;return new Promise((s,a)=>{o._listEventHubConsumerGroups(e,t,r,i,(e,t,r,i)=>{let o=new n.HttpOperationResponse(r,i);o.body=t,e?a(e):s(o)})})}listEventHubConsumerGroups(e,t,r,n,i){this.client;let o=this;return i||"function"!=typeof n||(i=n,n=null),i?o._listEventHubConsumerGroups(e,t,r,n,i):new Promise((i,s)=>{o._listEventHubConsumerGroups(e,t,r,n,(e,t,r,n)=>{e?s(e):i(t)})})}getEventHubConsumerGroupWithHttpOperationResponse(e,t,r,i,o){this.client;let s=this;return new Promise((a,c)=>{s._getEventHubConsumerGroup(e,t,r,i,o,(e,t,r,i)=>{let o=new n.HttpOperationResponse(r,i);o.body=t,e?c(e):a(o)})})}getEventHubConsumerGroup(e,t,r,n,i,o){this.client;let s=this;return o||"function"!=typeof i||(o=i,i=null),o?s._getEventHubConsumerGroup(e,t,r,n,i,o):new Promise((o,a)=>{s._getEventHubConsumerGroup(e,t,r,n,i,(e,t,r,n)=>{e?a(e):o(t)})})}createEventHubConsumerGroupWithHttpOperationResponse(e,t,r,i,o){this.client;let s=this;return new Promise((a,c)=>{s._createEventHubConsumerGroup(e,t,r,i,o,(e,t,r,i)=>{let o=new n.HttpOperationResponse(r,i);o.body=t,e?c(e):a(o)})})}createEventHubConsumerGroup(e,t,r,n,i,o){this.client;let s=this;return o||"function"!=typeof i||(o=i,i=null),o?s._createEventHubConsumerGroup(e,t,r,n,i,o):new Promise((o,a)=>{s._createEventHubConsumerGroup(e,t,r,n,i,(e,t,r,n)=>{e?a(e):o(t)})})}deleteEventHubConsumerGroupWithHttpOperationResponse(e,t,r,i,o){this.client;let s=this;return new Promise((a,c)=>{s._deleteEventHubConsumerGroup(e,t,r,i,o,(e,t,r,i)=>{let o=new n.HttpOperationResponse(r,i);o.body=t,e?c(e):a(o)})})}deleteEventHubConsumerGroup(e,t,r,n,i,o){this.client;let s=this;return o||"function"!=typeof i||(o=i,i=null),o?s._deleteEventHubConsumerGroup(e,t,r,n,i,o):new Promise((o,a)=>{s._deleteEventHubConsumerGroup(e,t,r,n,i,(e,t,r,n)=>{e?a(e):o(t)})})}listJobsWithHttpOperationResponse(e,t,r){this.client;let i=this;return new Promise((o,s)=>{i._listJobs(e,t,r,(e,t,r,i)=>{let a=new n.HttpOperationResponse(r,i);a.body=t,e?s(e):o(a)})})}listJobs(e,t,r,n){this.client;let i=this;return n||"function"!=typeof r||(n=r,r=null),n?i._listJobs(e,t,r,n):new Promise((n,o)=>{i._listJobs(e,t,r,(e,t,r,i)=>{e?o(e):n(t)})})}getJobWithHttpOperationResponse(e,t,r,i){this.client;let o=this;return new Promise((s,a)=>{o._getJob(e,t,r,i,(e,t,r,i)=>{let o=new n.HttpOperationResponse(r,i);o.body=t,e?a(e):s(o)})})}getJob(e,t,r,n,i){this.client;let o=this;return i||"function"!=typeof n||(i=n,n=null),i?o._getJob(e,t,r,n,i):new Promise((i,s)=>{o._getJob(e,t,r,n,(e,t,r,n)=>{e?s(e):i(t)})})}getQuotaMetricsWithHttpOperationResponse(e,t,r){this.client;let i=this;return new Promise((o,s)=>{i._getQuotaMetrics(e,t,r,(e,t,r,i)=>{let a=new n.HttpOperationResponse(r,i);a.body=t,e?s(e):o(a)})})}getQuotaMetrics(e,t,r,n){this.client;let i=this;return n||"function"!=typeof r||(n=r,r=null),n?i._getQuotaMetrics(e,t,r,n):new Promise((n,o)=>{i._getQuotaMetrics(e,t,r,(e,t,r,i)=>{e?o(e):n(t)})})}getEndpointHealthWithHttpOperationResponse(e,t,r){this.client;let i=this;return new Promise((o,s)=>{i._getEndpointHealth(e,t,r,(e,t,r,i)=>{let a=new n.HttpOperationResponse(r,i);a.body=t,e?s(e):o(a)})})}getEndpointHealth(e,t,r,n){this.client;let i=this;return n||"function"!=typeof r||(n=r,r=null),n?i._getEndpointHealth(e,t,r,n):new Promise((n,o)=>{i._getEndpointHealth(e,t,r,(e,t,r,i)=>{e?o(e):n(t)})})}checkNameAvailabilityWithHttpOperationResponse(e,t){this.client;let r=this;return new Promise((i,o)=>{r._checkNameAvailability(e,t,(e,t,r,s)=>{let a=new n.HttpOperationResponse(r,s);a.body=t,e?o(e):i(a)})})}checkNameAvailability(e,t,r){this.client;let n=this;return r||"function"!=typeof t||(r=t,t=null),r?n._checkNameAvailability(e,t,r):new Promise((r,i)=>{n._checkNameAvailability(e,t,(e,t,n,o)=>{e?i(e):r(t)})})}testAllRoutesWithHttpOperationResponse(e,t,r,i){this.client;let o=this;return new Promise((s,a)=>{o._testAllRoutes(e,t,r,i,(e,t,r,i)=>{let o=new n.HttpOperationResponse(r,i);o.body=t,e?a(e):s(o)})})}testAllRoutes(e,t,r,n,i){this.client;let o=this;return i||"function"!=typeof n||(i=n,n=null),i?o._testAllRoutes(e,t,r,n,i):new Promise((i,s)=>{o._testAllRoutes(e,t,r,n,(e,t,r,n)=>{e?s(e):i(t)})})}testRouteWithHttpOperationResponse(e,t,r,i){this.client;let o=this;return new Promise((s,a)=>{o._testRoute(e,t,r,i,(e,t,r,i)=>{let o=new n.HttpOperationResponse(r,i);o.body=t,e?a(e):s(o)})})}testRoute(e,t,r,n,i){this.client;let o=this;return i||"function"!=typeof n||(i=n,n=null),i?o._testRoute(e,t,r,n,i):new Promise((i,s)=>{o._testRoute(e,t,r,n,(e,t,r,n)=>{e?s(e):i(t)})})}listKeysWithHttpOperationResponse(e,t,r){this.client;let i=this;return new Promise((o,s)=>{i._listKeys(e,t,r,(e,t,r,i)=>{let a=new n.HttpOperationResponse(r,i);a.body=t,e?s(e):o(a)})})}listKeys(e,t,r,n){this.client;let i=this;return n||"function"!=typeof r||(n=r,r=null),n?i._listKeys(e,t,r,n):new Promise((n,o)=>{i._listKeys(e,t,r,(e,t,r,i)=>{e?o(e):n(t)})})}getKeysForKeyNameWithHttpOperationResponse(e,t,r,i){this.client;let o=this;return new Promise((s,a)=>{o._getKeysForKeyName(e,t,r,i,(e,t,r,i)=>{let o=new n.HttpOperationResponse(r,i);o.body=t,e?a(e):s(o)})})}getKeysForKeyName(e,t,r,n,i){this.client;let o=this;return i||"function"!=typeof n||(i=n,n=null),i?o._getKeysForKeyName(e,t,r,n,i):new Promise((i,s)=>{o._getKeysForKeyName(e,t,r,n,(e,t,r,n)=>{e?s(e):i(t)})})}exportDevicesWithHttpOperationResponse(e,t,r,i){this.client;let o=this;return new Promise((s,a)=>{o._exportDevices(e,t,r,i,(e,t,r,i)=>{let o=new n.HttpOperationResponse(r,i);o.body=t,e?a(e):s(o)})})}exportDevices(e,t,r,n,i){this.client;let o=this;return i||"function"!=typeof n||(i=n,n=null),i?o._exportDevices(e,t,r,n,i):new Promise((i,s)=>{o._exportDevices(e,t,r,n,(e,t,r,n)=>{e?s(e):i(t)})})}importDevicesWithHttpOperationResponse(e,t,r,i){this.client;let o=this;return new Promise((s,a)=>{o._importDevices(e,t,r,i,(e,t,r,i)=>{let o=new n.HttpOperationResponse(r,i);o.body=t,e?a(e):s(o)})})}importDevices(e,t,r,n,i){this.client;let o=this;return i||"function"!=typeof n||(i=n,n=null),i?o._importDevices(e,t,r,n,i):new Promise((i,s)=>{o._importDevices(e,t,r,n,(e,t,r,n)=>{e?s(e):i(t)})})}beginCreateOrUpdateWithHttpOperationResponse(e,t,r,i){this.client;let o=this;return new Promise((s,a)=>{o._beginCreateOrUpdate(e,t,r,i,(e,t,r,i)=>{let o=new n.HttpOperationResponse(r,i);o.body=t,e?a(e):s(o)})})}beginCreateOrUpdate(e,t,r,n,i){this.client;let o=this;return i||"function"!=typeof n||(i=n,n=null),i?o._beginCreateOrUpdate(e,t,r,n,i):new Promise((i,s)=>{o._beginCreateOrUpdate(e,t,r,n,(e,t,r,n)=>{e?s(e):i(t)})})}beginUpdateWithHttpOperationResponse(e,t,r){this.client;let i=this;return new Promise((o,s)=>{i._beginUpdate(e,t,r,(e,t,r,i)=>{let a=new n.HttpOperationResponse(r,i);a.body=t,e?s(e):o(a)})})}beginUpdate(e,t,r,n){this.client;let i=this;return n||"function"!=typeof r||(n=r,r=null),n?i._beginUpdate(e,t,r,n):new Promise((n,o)=>{i._beginUpdate(e,t,r,(e,t,r,i)=>{e?o(e):n(t)})})}beginDeleteMethodWithHttpOperationResponse(e,t,r){this.client;let i=this;return new Promise((o,s)=>{i._beginDeleteMethod(e,t,r,(e,t,r,i)=>{let a=new n.HttpOperationResponse(r,i);a.body=t,e?s(e):o(a)})})}beginDeleteMethod(e,t,r,n){this.client;let i=this;return n||"function"!=typeof r||(n=r,r=null),n?i._beginDeleteMethod(e,t,r,n):new Promise((n,o)=>{i._beginDeleteMethod(e,t,r,(e,t,r,i)=>{e?o(e):n(t)})})}listBySubscriptionNextWithHttpOperationResponse(e,t){this.client;let r=this;return new Promise((i,o)=>{r._listBySubscriptionNext(e,t,(e,t,r,s)=>{let a=new n.HttpOperationResponse(r,s);a.body=t,e?o(e):i(a)})})}listBySubscriptionNext(e,t,r){this.client;let n=this;return r||"function"!=typeof t||(r=t,t=null),r?n._listBySubscriptionNext(e,t,r):new Promise((r,i)=>{n._listBySubscriptionNext(e,t,(e,t,n,o)=>{e?i(e):r(t)})})}listByResourceGroupNextWithHttpOperationResponse(e,t){this.client;let r=this;return new Promise((i,o)=>{r._listByResourceGroupNext(e,t,(e,t,r,s)=>{let a=new n.HttpOperationResponse(r,s);a.body=t,e?o(e):i(a)})})}listByResourceGroupNext(e,t,r){this.client;let n=this;return r||"function"!=typeof t||(r=t,t=null),r?n._listByResourceGroupNext(e,t,r):new Promise((r,i)=>{n._listByResourceGroupNext(e,t,(e,t,n,o)=>{e?i(e):r(t)})})}getValidSkusNextWithHttpOperationResponse(e,t){this.client;let r=this;return new Promise((i,o)=>{r._getValidSkusNext(e,t,(e,t,r,s)=>{let a=new n.HttpOperationResponse(r,s);a.body=t,e?o(e):i(a)})})}getValidSkusNext(e,t,r){this.client;let n=this;return r||"function"!=typeof t||(r=t,t=null),r?n._getValidSkusNext(e,t,r):new Promise((r,i)=>{n._getValidSkusNext(e,t,(e,t,n,o)=>{e?i(e):r(t)})})}listEventHubConsumerGroupsNextWithHttpOperationResponse(e,t){this.client;let r=this;return new Promise((i,o)=>{r._listEventHubConsumerGroupsNext(e,t,(e,t,r,s)=>{let a=new n.HttpOperationResponse(r,s);a.body=t,e?o(e):i(a)})})}listEventHubConsumerGroupsNext(e,t,r){this.client;let n=this;return r||"function"!=typeof t||(r=t,t=null),r?n._listEventHubConsumerGroupsNext(e,t,r):new Promise((r,i)=>{n._listEventHubConsumerGroupsNext(e,t,(e,t,n,o)=>{e?i(e):r(t)})})}listJobsNextWithHttpOperationResponse(e,t){this.client;let r=this;return new Promise((i,o)=>{r._listJobsNext(e,t,(e,t,r,s)=>{let a=new n.HttpOperationResponse(r,s);a.body=t,e?o(e):i(a)})})}listJobsNext(e,t,r){this.client;let n=this;return r||"function"!=typeof t||(r=t,t=null),r?n._listJobsNext(e,t,r):new Promise((r,i)=>{n._listJobsNext(e,t,(e,t,n,o)=>{e?i(e):r(t)})})}getQuotaMetricsNextWithHttpOperationResponse(e,t){this.client;let r=this;return new Promise((i,o)=>{r._getQuotaMetricsNext(e,t,(e,t,r,s)=>{let a=new n.HttpOperationResponse(r,s);a.body=t,e?o(e):i(a)})})}getQuotaMetricsNext(e,t,r){this.client;let n=this;return r||"function"!=typeof t||(r=t,t=null),r?n._getQuotaMetricsNext(e,t,r):new Promise((r,i)=>{n._getQuotaMetricsNext(e,t,(e,t,n,o)=>{e?i(e):r(t)})})}getEndpointHealthNextWithHttpOperationResponse(e,t){this.client;let r=this;return new Promise((i,o)=>{r._getEndpointHealthNext(e,t,(e,t,r,s)=>{let a=new n.HttpOperationResponse(r,s);a.body=t,e?o(e):i(a)})})}getEndpointHealthNext(e,t,r){this.client;let n=this;return r||"function"!=typeof t||(r=t,t=null),r?n._getEndpointHealthNext(e,t,r):new Promise((r,i)=>{n._getEndpointHealthNext(e,t,(e,t,n,o)=>{e?i(e):r(t)})})}listKeysNextWithHttpOperationResponse(e,t){this.client;let r=this;return new Promise((i,o)=>{r._listKeysNext(e,t,(e,t,r,s)=>{let a=new n.HttpOperationResponse(r,s);a.body=t,e?o(e):i(a)})})}listKeysNext(e,t,r){this.client;let n=this;return r||"function"!=typeof t||(r=t,t=null),r?n._listKeysNext(e,t,r):new Promise((r,i)=>{n._listKeysNext(e,t,(e,t,n,o)=>{e?i(e):r(t)})})}}},function(e,t,r){"use strict";const n=r(8),i=r(9),o=n.WebResource;function _getSubscriptionQuota(e,t){let r=this.client;if(t||"function"!=typeof e||(t=e,e=null),!t)throw new Error("callback cannot be null.");try{if(null===this.client.subscriptionId||void 0===this.client.subscriptionId||"string"!=typeof this.client.subscriptionId.valueOf())throw new Error("this.client.subscriptionId cannot be null or undefined and it must be of type string.");if(null===this.client.apiVersion||void 0===this.client.apiVersion||"string"!=typeof this.client.apiVersion.valueOf())throw new Error("this.client.apiVersion cannot be null or undefined and it must be of type string.");if(null!==this.client.acceptLanguage&&void 0!==this.client.acceptLanguage&&"string"!=typeof this.client.acceptLanguage.valueOf())throw new Error("this.client.acceptLanguage must be of type string.")}catch(e){return t(e)}let s=this.client.baseUri,a=s+(s.endsWith("/")?"":"/")+"subscriptions/{subscriptionId}/providers/Microsoft.Devices/usages";a=a.replace("{subscriptionId}",encodeURIComponent(this.client.subscriptionId));let c=[];c.push("api-version="+encodeURIComponent(this.client.apiVersion)),c.length>0&&(a+="?"+c.join("&"));let u=new o;if(u.method="GET",u.url=a,u.headers={},u.headers["Content-Type"]="application/json; charset=utf-8",this.client.generateClientRequestId&&(u.headers["x-ms-client-request-id"]=i.generateUuid()),void 0!==this.client.acceptLanguage&&null!==this.client.acceptLanguage&&(u.headers["accept-language"]=this.client.acceptLanguage),e)for(let t in e.customHeaders)e.customHeaders.hasOwnProperty(t)&&(u.headers[t]=e.customHeaders[t]);return u.body=null,r.pipeline(u,(e,i,o)=>{if(e)return t(e);let s=i.statusCode;if(200!==s){let e,s=new Error(o);s.statusCode=i.statusCode,s.request=n.stripRequest(u),s.response=n.stripResponse(i),""===o&&(o=null);try{if(e=JSON.parse(o)){let t=null;e.error&&(t=e.error),s.code=t?t.code:e.code,s.message=t?t.message:e.message}if(null!=e){let t=(new r.models.ErrorDetails).mapper();s.body=r.deserialize(t,e,"error.body")}}catch(e){return s.message=`Error "${e.message}" occurred in deserializing the responseBody `+`- "${o}" for the default response.`,t(s)}return t(s)}let a=null;if(""===o&&(o=null),200===s){let e=null;try{if(e=JSON.parse(o),a=JSON.parse(o),null!=e){let t=(new r.models.UserSubscriptionQuotaListResult).mapper();a=r.deserialize(t,e,"result")}}catch(e){let r=new Error(`Error ${e} occurred in deserializing the responseBody - ${o}`);return r.request=n.stripRequest(u),r.response=n.stripResponse(i),t(r)}}return t(null,a,u,i)})}e.exports=class ResourceProviderCommon{constructor(e){this.client=e,this._getSubscriptionQuota=_getSubscriptionQuota}getSubscriptionQuotaWithHttpOperationResponse(e){this.client;let t=this;return new Promise((r,i)=>{t._getSubscriptionQuota(e,(e,t,o,s)=>{let a=new n.HttpOperationResponse(o,s);a.body=t,e?i(e):r(a)})})}getSubscriptionQuota(e,t){this.client;let r=this;return t||"function"!=typeof e||(t=e,e=null),t?r._getSubscriptionQuota(e,t):new Promise((t,n)=>{r._getSubscriptionQuota(e,(e,r,i,o)=>{e?n(e):t(r)})})}}},function(e,t,r){"use strict";const n=r(8),i=r(9),o=n.WebResource;function _listByIotHub(e,t,r,s){let a=this.client;if(s||"function"!=typeof r||(s=r,r=null),!s)throw new Error("callback cannot be null.");try{if(null===this.client.apiVersion||void 0===this.client.apiVersion||"string"!=typeof this.client.apiVersion.valueOf())throw new Error("this.client.apiVersion cannot be null or undefined and it must be of type string.");if(null===this.client.subscriptionId||void 0===this.client.subscriptionId||"string"!=typeof this.client.subscriptionId.valueOf())throw new Error("this.client.subscriptionId cannot be null or undefined and it must be of type string.");if(null==e||"string"!=typeof e.valueOf())throw new Error("resourceGroupName cannot be null or undefined and it must be of type string.");if(null==t||"string"!=typeof t.valueOf())throw new Error("resourceName cannot be null or undefined and it must be of type string.");if(null!==this.client.acceptLanguage&&void 0!==this.client.acceptLanguage&&"string"!=typeof this.client.acceptLanguage.valueOf())throw new Error("this.client.acceptLanguage must be of type string.")}catch(e){return s(e)}let c=this.client.baseUri,u=c+(c.endsWith("/")?"":"/")+"subscriptions/{subscriptionId}/resourceGroups/{resourceGroupName}/providers/Microsoft.Devices/IotHubs/{resourceName}/certificates";u=(u=(u=u.replace("{subscriptionId}",encodeURIComponent(this.client.subscriptionId))).replace("{resourceGroupName}",encodeURIComponent(e))).replace("{resourceName}",encodeURIComponent(t));let l=[];l.push("api-version="+encodeURIComponent(this.client.apiVersion)),l.length>0&&(u+="?"+l.join("&"));let p=new o;if(p.method="GET",p.url=u,p.headers={},p.headers["Content-Type"]="application/json; charset=utf-8",this.client.generateClientRequestId&&(p.headers["x-ms-client-request-id"]=i.generateUuid()),void 0!==this.client.acceptLanguage&&null!==this.client.acceptLanguage&&(p.headers["accept-language"]=this.client.acceptLanguage),r)for(let e in r.customHeaders)r.customHeaders.hasOwnProperty(e)&&(p.headers[e]=r.customHeaders[e]);return p.body=null,a.pipeline(p,(e,t,r)=>{if(e)return s(e);let i=t.statusCode;if(200!==i){let e,i=new Error(r);i.statusCode=t.statusCode,i.request=n.stripRequest(p),i.response=n.stripResponse(t),""===r&&(r=null);try{if(e=JSON.parse(r)){let t=null;e.error&&(t=e.error),i.code=t?t.code:e.code,i.message=t?t.message:e.message}if(null!=e){let t=(new a.models.ErrorDetails).mapper();i.body=a.deserialize(t,e,"error.body")}}catch(e){return i.message=`Error "${e.message}" occurred in deserializing the responseBody `+`- "${r}" for the default response.`,s(i)}return s(i)}let o=null;if(""===r&&(r=null),200===i){let e=null;try{if(e=JSON.parse(r),o=JSON.parse(r),null!=e){let t=(new a.models.CertificateListDescription).mapper();o=a.deserialize(t,e,"result")}}catch(e){let i=new Error(`Error ${e} occurred in deserializing the responseBody - ${r}`);return i.request=n.stripRequest(p),i.response=n.stripResponse(t),s(i)}}return s(null,o,p,t)})}function _get(e,t,r,s,a){let c=this.client;if(a||"function"!=typeof s||(a=s,s=null),!a)throw new Error("callback cannot be null.");try{if(null===this.client.apiVersion||void 0===this.client.apiVersion||"string"!=typeof this.client.apiVersion.valueOf())throw new Error("this.client.apiVersion cannot be null or undefined and it must be of type string.");if(null===this.client.subscriptionId||void 0===this.client.subscriptionId||"string"!=typeof this.client.subscriptionId.valueOf())throw new Error("this.client.subscriptionId cannot be null or undefined and it must be of type string.");if(null==e||"string"!=typeof e.valueOf())throw new Error("resourceGroupName cannot be null or undefined and it must be of type string.");if(null==t||"string"!=typeof t.valueOf())throw new Error("resourceName cannot be null or undefined and it must be of type string.");if(null==r||"string"!=typeof r.valueOf())throw new Error("certificateName cannot be null or undefined and it must be of type string.");if(null!=r&&null===r.match(/^[A-Za-z0-9-._]{1,64}$/))throw new Error('"certificateName" should satisfy the constraint - "Pattern": /^[A-Za-z0-9-._]{1,64}$/');if(null!==this.client.acceptLanguage&&void 0!==this.client.acceptLanguage&&"string"!=typeof this.client.acceptLanguage.valueOf())throw new Error("this.client.acceptLanguage must be of type string.")}catch(e){return a(e)}let u=this.client.baseUri,l=u+(u.endsWith("/")?"":"/")+"subscriptions/{subscriptionId}/resourceGroups/{resourceGroupName}/providers/Microsoft.Devices/IotHubs/{resourceName}/certificates/{certificateName}";l=(l=(l=(l=l.replace("{subscriptionId}",encodeURIComponent(this.client.subscriptionId))).replace("{resourceGroupName}",encodeURIComponent(e))).replace("{resourceName}",encodeURIComponent(t))).replace("{certificateName}",encodeURIComponent(r));let p=[];p.push("api-version="+encodeURIComponent(this.client.apiVersion)),p.length>0&&(l+="?"+p.join("&"));let d=new o;if(d.method="GET",d.url=l,d.headers={},d.headers["Content-Type"]="application/json; charset=utf-8",this.client.generateClientRequestId&&(d.headers["x-ms-client-request-id"]=i.generateUuid()),void 0!==this.client.acceptLanguage&&null!==this.client.acceptLanguage&&(d.headers["accept-language"]=this.client.acceptLanguage),s)for(let e in s.customHeaders)s.customHeaders.hasOwnProperty(e)&&(d.headers[e]=s.customHeaders[e]);return d.body=null,c.pipeline(d,(e,t,r)=>{if(e)return a(e);let i=t.statusCode;if(200!==i){let e,i=new Error(r);i.statusCode=t.statusCode,i.request=n.stripRequest(d),i.response=n.stripResponse(t),""===r&&(r=null);try{if(e=JSON.parse(r)){let t=null;e.error&&(t=e.error),i.code=t?t.code:e.code,i.message=t?t.message:e.message}if(null!=e){let t=(new c.models.ErrorDetails).mapper();i.body=c.deserialize(t,e,"error.body")}}catch(e){return i.message=`Error "${e.message}" occurred in deserializing the responseBody `+`- "${r}" for the default response.`,a(i)}return a(i)}let o=null;if(""===r&&(r=null),200===i){let e=null;try{if(e=JSON.parse(r),o=JSON.parse(r),null!=e){let t=(new c.models.CertificateDescription).mapper();o=c.deserialize(t,e,"result")}}catch(e){let i=new Error(`Error ${e} occurred in deserializing the responseBody - ${r}`);return i.request=n.stripRequest(d),i.response=n.stripResponse(t),a(i)}}return a(null,o,d,t)})}function _createOrUpdate(e,t,r,s,a){let c=this.client;if(a||"function"!=typeof s||(a=s,s=null),!a)throw new Error("callback cannot be null.");let u,l=s&&void 0!==s.ifMatch?s.ifMatch:void 0,p=s&&void 0!==s.certificate?s.certificate:void 0;try{if(null===this.client.apiVersion||void 0===this.client.apiVersion||"string"!=typeof this.client.apiVersion.valueOf())throw new Error("this.client.apiVersion cannot be null or undefined and it must be of type string.");if(null===this.client.subscriptionId||void 0===this.client.subscriptionId||"string"!=typeof this.client.subscriptionId.valueOf())throw new Error("this.client.subscriptionId cannot be null or undefined and it must be of type string.");if(null==e||"string"!=typeof e.valueOf())throw new Error("resourceGroupName cannot be null or undefined and it must be of type string.");if(null==t||"string"!=typeof t.valueOf())throw new Error("resourceName cannot be null or undefined and it must be of type string.");if(null==r||"string"!=typeof r.valueOf())throw new Error("certificateName cannot be null or undefined and it must be of type string.");if(null!=r&&null===r.match(/^[A-Za-z0-9-._]{1,64}$/))throw new Error('"certificateName" should satisfy the constraint - "Pattern": /^[A-Za-z0-9-._]{1,64}$/');if(null!=l&&"string"!=typeof l.valueOf())throw new Error("ifMatch must be of type string.");if(null!=p&&"string"!=typeof p.valueOf())throw new Error("certificate must be of type string.");if(null!==this.client.acceptLanguage&&void 0!==this.client.acceptLanguage&&"string"!=typeof this.client.acceptLanguage.valueOf())throw new Error("this.client.acceptLanguage must be of type string.")}catch(e){return a(e)}null!=p&&((u=new c.models.CertificateBodyDescription).certificate=p);let d=this.client.baseUri,h=d+(d.endsWith("/")?"":"/")+"subscriptions/{subscriptionId}/resourceGroups/{resourceGroupName}/providers/Microsoft.Devices/IotHubs/{resourceName}/certificates/{certificateName}";h=(h=(h=(h=h.replace("{subscriptionId}",encodeURIComponent(this.client.subscriptionId))).replace("{resourceGroupName}",encodeURIComponent(e))).replace("{resourceName}",encodeURIComponent(t))).replace("{certificateName}",encodeURIComponent(r));let f=[];f.push("api-version="+encodeURIComponent(this.client.apiVersion)),f.length>0&&(h+="?"+f.join("&"));let m=new o;if(m.method="PUT",m.url=h,m.headers={},m.headers["Content-Type"]="application/json; charset=utf-8",this.client.generateClientRequestId&&(m.headers["x-ms-client-request-id"]=i.generateUuid()),null!=l&&(m.headers["If-Match"]=l),void 0!==this.client.acceptLanguage&&null!==this.client.acceptLanguage&&(m.headers["accept-language"]=this.client.acceptLanguage),s)for(let e in s.customHeaders)s.customHeaders.hasOwnProperty(e)&&(m.headers[e]=s.customHeaders[e]);let g=null,y=null;try{if(null!=u){let e=(new c.models.CertificateBodyDescription).mapper();y=c.serialize(e,u,"certificateDescription"),g=JSON.stringify(y)}}catch(e){let t=new Error(`Error "${e.message}" occurred in serializing the `+`payload - ${JSON.stringify(u,null,2)}.`);return a(t)}return m.body=g,c.pipeline(m,(e,t,r)=>{if(e)return a(e);let i=t.statusCode;if(200!==i&&201!==i){let e,i=new Error(r);i.statusCode=t.statusCode,i.request=n.stripRequest(m),i.response=n.stripResponse(t),""===r&&(r=null);try{if(e=JSON.parse(r)){let t=null;e.error&&(t=e.error),i.code=t?t.code:e.code,i.message=t?t.message:e.message}if(null!=e){let t=(new c.models.ErrorDetails).mapper();i.body=c.deserialize(t,e,"error.body")}}catch(e){return i.message=`Error "${e.message}" occurred in deserializing the responseBody `+`- "${r}" for the default response.`,a(i)}return a(i)}let o=null;if(""===r&&(r=null),200===i){let e=null;try{if(e=JSON.parse(r),o=JSON.parse(r),null!=e){let t=(new c.models.CertificateDescription).mapper();o=c.deserialize(t,e,"result")}}catch(e){let i=new Error(`Error ${e} occurred in deserializing the responseBody - ${r}`);return i.request=n.stripRequest(m),i.response=n.stripResponse(t),a(i)}}if(201===i){let e=null;try{if(e=JSON.parse(r),o=JSON.parse(r),null!=e){let t=(new c.models.CertificateDescription).mapper();o=c.deserialize(t,e,"result")}}catch(e){let i=new Error(`Error ${e} occurred in deserializing the responseBody - ${r}`);return i.request=n.stripRequest(m),i.response=n.stripResponse(t),a(i)}}return a(null,o,m,t)})}function _deleteMethod(e,t,r,s,a,c){let u=this.client;if(c||"function"!=typeof a||(c=a,a=null),!c)throw new Error("callback cannot be null.");try{if(null===this.client.apiVersion||void 0===this.client.apiVersion||"string"!=typeof this.client.apiVersion.valueOf())throw new Error("this.client.apiVersion cannot be null or undefined and it must be of type string.");if(null===this.client.subscriptionId||void 0===this.client.subscriptionId||"string"!=typeof this.client.subscriptionId.valueOf())throw new Error("this.client.subscriptionId cannot be null or undefined and it must be of type string.");if(null==e||"string"!=typeof e.valueOf())throw new Error("resourceGroupName cannot be null or undefined and it must be of type string.");if(null==t||"string"!=typeof t.valueOf())throw new Error("resourceName cannot be null or undefined and it must be of type string.");if(null==r||"string"!=typeof r.valueOf())throw new Error("certificateName cannot be null or undefined and it must be of type string.");if(null!=r&&null===r.match(/^[A-Za-z0-9-._]{1,64}$/))throw new Error('"certificateName" should satisfy the constraint - "Pattern": /^[A-Za-z0-9-._]{1,64}$/');if(null==s||"string"!=typeof s.valueOf())throw new Error("ifMatch cannot be null or undefined and it must be of type string.");if(null!==this.client.acceptLanguage&&void 0!==this.client.acceptLanguage&&"string"!=typeof this.client.acceptLanguage.valueOf())throw new Error("this.client.acceptLanguage must be of type string.")}catch(e){return c(e)}let l=this.client.baseUri,p=l+(l.endsWith("/")?"":"/")+"subscriptions/{subscriptionId}/resourceGroups/{resourceGroupName}/providers/Microsoft.Devices/IotHubs/{resourceName}/certificates/{certificateName}";p=(p=(p=(p=p.replace("{subscriptionId}",encodeURIComponent(this.client.subscriptionId))).replace("{resourceGroupName}",encodeURIComponent(e))).replace("{resourceName}",encodeURIComponent(t))).replace("{certificateName}",encodeURIComponent(r));let d=[];d.push("api-version="+encodeURIComponent(this.client.apiVersion)),d.length>0&&(p+="?"+d.join("&"));let h=new o;if(h.method="DELETE",h.url=p,h.headers={},h.headers["Content-Type"]="application/json; charset=utf-8",this.client.generateClientRequestId&&(h.headers["x-ms-client-request-id"]=i.generateUuid()),null!=s&&(h.headers["If-Match"]=s),void 0!==this.client.acceptLanguage&&null!==this.client.acceptLanguage&&(h.headers["accept-language"]=this.client.acceptLanguage),a)for(let e in a.customHeaders)a.customHeaders.hasOwnProperty(e)&&(h.headers[e]=a.customHeaders[e]);return h.body=null,u.pipeline(h,(e,t,r)=>{if(e)return c(e);let i=t.statusCode;if(200!==i&&204!==i){let e,i=new Error(r);i.statusCode=t.statusCode,i.request=n.stripRequest(h),i.response=n.stripResponse(t),""===r&&(r=null);try{if(e=JSON.parse(r)){let t=null;e.error&&(t=e.error),i.code=t?t.code:e.code,i.message=t?t.message:e.message}if(null!=e){let t=(new u.models.ErrorDetails).mapper();i.body=u.deserialize(t,e,"error.body")}}catch(e){return i.message=`Error "${e.message}" occurred in deserializing the responseBody `+`- "${r}" for the default response.`,c(i)}return c(i)}return""===r&&(r=null),c(null,null,h,t)})}function _generateVerificationCode(e,t,r,s,a,c){let u=this.client;if(c||"function"!=typeof a||(c=a,a=null),!c)throw new Error("callback cannot be null.");try{if(null===this.client.apiVersion||void 0===this.client.apiVersion||"string"!=typeof this.client.apiVersion.valueOf())throw new Error("this.client.apiVersion cannot be null or undefined and it must be of type string.");if(null===this.client.subscriptionId||void 0===this.client.subscriptionId||"string"!=typeof this.client.subscriptionId.valueOf())throw new Error("this.client.subscriptionId cannot be null or undefined and it must be of type string.");if(null==e||"string"!=typeof e.valueOf())throw new Error("resourceGroupName cannot be null or undefined and it must be of type string.");if(null==t||"string"!=typeof t.valueOf())throw new Error("resourceName cannot be null or undefined and it must be of type string.");if(null==r||"string"!=typeof r.valueOf())throw new Error("certificateName cannot be null or undefined and it must be of type string.");if(null!=r&&null===r.match(/^[A-Za-z0-9-._]{1,64}$/))throw new Error('"certificateName" should satisfy the constraint - "Pattern": /^[A-Za-z0-9-._]{1,64}$/');if(null==s||"string"!=typeof s.valueOf())throw new Error("ifMatch cannot be null or undefined and it must be of type string.");if(null!==this.client.acceptLanguage&&void 0!==this.client.acceptLanguage&&"string"!=typeof this.client.acceptLanguage.valueOf())throw new Error("this.client.acceptLanguage must be of type string.")}catch(e){return c(e)}let l=this.client.baseUri,p=l+(l.endsWith("/")?"":"/")+"subscriptions/{subscriptionId}/resourceGroups/{resourceGroupName}/providers/Microsoft.Devices/IotHubs/{resourceName}/certificates/{certificateName}/generateVerificationCode";p=(p=(p=(p=p.replace("{subscriptionId}",encodeURIComponent(this.client.subscriptionId))).replace("{resourceGroupName}",encodeURIComponent(e))).replace("{resourceName}",encodeURIComponent(t))).replace("{certificateName}",encodeURIComponent(r));let d=[];d.push("api-version="+encodeURIComponent(this.client.apiVersion)),d.length>0&&(p+="?"+d.join("&"));let h=new o;if(h.method="POST",h.url=p,h.headers={},h.headers["Content-Type"]="application/json; charset=utf-8",this.client.generateClientRequestId&&(h.headers["x-ms-client-request-id"]=i.generateUuid()),null!=s&&(h.headers["If-Match"]=s),void 0!==this.client.acceptLanguage&&null!==this.client.acceptLanguage&&(h.headers["accept-language"]=this.client.acceptLanguage),a)for(let e in a.customHeaders)a.customHeaders.hasOwnProperty(e)&&(h.headers[e]=a.customHeaders[e]);return h.body=null,u.pipeline(h,(e,t,r)=>{if(e)return c(e);let i=t.statusCode;if(200!==i){let e,i=new Error(r);i.statusCode=t.statusCode,i.request=n.stripRequest(h),i.response=n.stripResponse(t),""===r&&(r=null);try{if(e=JSON.parse(r)){let t=null;e.error&&(t=e.error),i.code=t?t.code:e.code,i.message=t?t.message:e.message}if(null!=e){let t=(new u.models.ErrorDetails).mapper();i.body=u.deserialize(t,e,"error.body")}}catch(e){return i.message=`Error "${e.message}" occurred in deserializing the responseBody `+`- "${r}" for the default response.`,c(i)}return c(i)}let o=null;if(""===r&&(r=null),200===i){let e=null;try{if(e=JSON.parse(r),o=JSON.parse(r),null!=e){let t=(new u.models.CertificateWithNonceDescription).mapper();o=u.deserialize(t,e,"result")}}catch(e){let i=new Error(`Error ${e} occurred in deserializing the responseBody - ${r}`);return i.request=n.stripRequest(h),i.response=n.stripResponse(t),c(i)}}return c(null,o,h,t)})}function _verify(e,t,r,s,a,c){let u=this.client;if(c||"function"!=typeof a||(c=a,a=null),!c)throw new Error("callback cannot be null.");let l,p=a&&void 0!==a.certificate?a.certificate:void 0;try{if(null===this.client.apiVersion||void 0===this.client.apiVersion||"string"!=typeof this.client.apiVersion.valueOf())throw new Error("this.client.apiVersion cannot be null or undefined and it must be of type string.");if(null===this.client.subscriptionId||void 0===this.client.subscriptionId||"string"!=typeof this.client.subscriptionId.valueOf())throw new Error("this.client.subscriptionId cannot be null or undefined and it must be of type string.");if(null==e||"string"!=typeof e.valueOf())throw new Error("resourceGroupName cannot be null or undefined and it must be of type string.");if(null==t||"string"!=typeof t.valueOf())throw new Error("resourceName cannot be null or undefined and it must be of type string.");if(null==r||"string"!=typeof r.valueOf())throw new Error("certificateName cannot be null or undefined and it must be of type string.");if(null!=r&&null===r.match(/^[A-Za-z0-9-._]{1,64}$/))throw new Error('"certificateName" should satisfy the constraint - "Pattern": /^[A-Za-z0-9-._]{1,64}$/');if(null==s||"string"!=typeof s.valueOf())throw new Error("ifMatch cannot be null or undefined and it must be of type string.");if(null!=p&&"string"!=typeof p.valueOf())throw new Error("certificate must be of type string.");if(null!==this.client.acceptLanguage&&void 0!==this.client.acceptLanguage&&"string"!=typeof this.client.acceptLanguage.valueOf())throw new Error("this.client.acceptLanguage must be of type string.")}catch(e){return c(e)}null!=p&&((l=new u.models.CertificateVerificationDescription).certificate=p);let d=this.client.baseUri,h=d+(d.endsWith("/")?"":"/")+"subscriptions/{subscriptionId}/resourceGroups/{resourceGroupName}/providers/Microsoft.Devices/IotHubs/{resourceName}/certificates/{certificateName}/verify";h=(h=(h=(h=h.replace("{subscriptionId}",encodeURIComponent(this.client.subscriptionId))).replace("{resourceGroupName}",encodeURIComponent(e))).replace("{resourceName}",encodeURIComponent(t))).replace("{certificateName}",encodeURIComponent(r));let f=[];f.push("api-version="+encodeURIComponent(this.client.apiVersion)),f.length>0&&(h+="?"+f.join("&"));let m=new o;if(m.method="POST",m.url=h,m.headers={},m.headers["Content-Type"]="application/json; charset=utf-8",this.client.generateClientRequestId&&(m.headers["x-ms-client-request-id"]=i.generateUuid()),null!=s&&(m.headers["If-Match"]=s),void 0!==this.client.acceptLanguage&&null!==this.client.acceptLanguage&&(m.headers["accept-language"]=this.client.acceptLanguage),a)for(let e in a.customHeaders)a.customHeaders.hasOwnProperty(e)&&(m.headers[e]=a.customHeaders[e]);let g=null,y=null;try{if(null!=l){let e=(new u.models.CertificateVerificationDescription).mapper();y=u.serialize(e,l,"certificateVerificationBody"),g=JSON.stringify(y)}}catch(e){let t=new Error(`Error "${e.message}" occurred in serializing the `+`payload - ${JSON.stringify(l,null,2)}.`);return c(t)}return m.body=g,u.pipeline(m,(e,t,r)=>{if(e)return c(e);let i=t.statusCode;if(200!==i){let e,i=new Error(r);i.statusCode=t.statusCode,i.request=n.stripRequest(m),i.response=n.stripResponse(t),""===r&&(r=null);try{if(e=JSON.parse(r)){let t=null;e.error&&(t=e.error),i.code=t?t.code:e.code,i.message=t?t.message:e.message}if(null!=e){let t=(new u.models.ErrorDetails).mapper();i.body=u.deserialize(t,e,"error.body")}}catch(e){return i.message=`Error "${e.message}" occurred in deserializing the responseBody `+`- "${r}" for the default response.`,c(i)}return c(i)}let o=null;if(""===r&&(r=null),200===i){let e=null;try{if(e=JSON.parse(r),o=JSON.parse(r),null!=e){let t=(new u.models.CertificateDescription).mapper();o=u.deserialize(t,e,"result")}}catch(e){let i=new Error(`Error ${e} occurred in deserializing the responseBody - ${r}`);return i.request=n.stripRequest(m),i.response=n.stripResponse(t),c(i)}}return c(null,o,m,t)})}e.exports=class Certificates{constructor(e){this.client=e,this._listByIotHub=_listByIotHub,this._get=_get,this._createOrUpdate=_createOrUpdate,this._deleteMethod=_deleteMethod,this._generateVerificationCode=_generateVerificationCode,this._verify=_verify}listByIotHubWithHttpOperationResponse(e,t,r){this.client;let i=this;return new Promise((o,s)=>{i._listByIotHub(e,t,r,(e,t,r,i)=>{let a=new n.HttpOperationResponse(r,i);a.body=t,e?s(e):o(a)})})}listByIotHub(e,t,r,n){this.client;let i=this;return n||"function"!=typeof r||(n=r,r=null),n?i._listByIotHub(e,t,r,n):new Promise((n,o)=>{i._listByIotHub(e,t,r,(e,t,r,i)=>{e?o(e):n(t)})})}getWithHttpOperationResponse(e,t,r,i){this.client;let o=this;return new Promise((s,a)=>{o._get(e,t,r,i,(e,t,r,i)=>{let o=new n.HttpOperationResponse(r,i);o.body=t,e?a(e):s(o)})})}get(e,t,r,n,i){this.client;let o=this;return i||"function"!=typeof n||(i=n,n=null),i?o._get(e,t,r,n,i):new Promise((i,s)=>{o._get(e,t,r,n,(e,t,r,n)=>{e?s(e):i(t)})})}createOrUpdateWithHttpOperationResponse(e,t,r,i){this.client;let o=this;return new Promise((s,a)=>{o._createOrUpdate(e,t,r,i,(e,t,r,i)=>{let o=new n.HttpOperationResponse(r,i);o.body=t,e?a(e):s(o)})})}createOrUpdate(e,t,r,n,i){this.client;let o=this;return i||"function"!=typeof n||(i=n,n=null),i?o._createOrUpdate(e,t,r,n,i):new Promise((i,s)=>{o._createOrUpdate(e,t,r,n,(e,t,r,n)=>{e?s(e):i(t)})})}deleteMethodWithHttpOperationResponse(e,t,r,i,o){this.client;let s=this;return new Promise((a,c)=>{s._deleteMethod(e,t,r,i,o,(e,t,r,i)=>{let o=new n.HttpOperationResponse(r,i);o.body=t,e?c(e):a(o)})})}deleteMethod(e,t,r,n,i,o){this.client;let s=this;return o||"function"!=typeof i||(o=i,i=null),o?s._deleteMethod(e,t,r,n,i,o):new Promise((o,a)=>{s._deleteMethod(e,t,r,n,i,(e,t,r,n)=>{e?a(e):o(t)})})}generateVerificationCodeWithHttpOperationResponse(e,t,r,i,o){this.client;let s=this;return new Promise((a,c)=>{s._generateVerificationCode(e,t,r,i,o,(e,t,r,i)=>{let o=new n.HttpOperationResponse(r,i);o.body=t,e?c(e):a(o)})})}generateVerificationCode(e,t,r,n,i,o){this.client;let s=this;return o||"function"!=typeof i||(o=i,i=null),o?s._generateVerificationCode(e,t,r,n,i,o):new Promise((o,a)=>{s._generateVerificationCode(e,t,r,n,i,(e,t,r,n)=>{e?a(e):o(t)})})}verifyWithHttpOperationResponse(e,t,r,i,o){this.client;let s=this;return new Promise((a,c)=>{s._verify(e,t,r,i,o,(e,t,r,i)=>{let o=new n.HttpOperationResponse(r,i);o.body=t,e?c(e):a(o)})})}verify(e,t,r,n,i,o){this.client;let s=this;return o||"function"!=typeof i||(o=i,i=null),o?s._verify(e,t,r,n,i,o):new Promise((o,a)=>{s._verify(e,t,r,n,i,(e,t,r,n)=>{e?a(e):o(t)})})}}},function(e,t,r){"use strict";t.ManagementLockClient=r(1219),t.FeatureClient=r(1224),t.SubscriptionClient=r(1229),t.ResourceManagementClient=r(1237),t.PolicyClient=r(1283),t.ManagementLinkClient=r(1289),t=e.exports},function(e,t,r){"use strict";const n=r(8),i=r(9).AzureServiceClient,o=r(478),s=r(1222);e.exports=class ManagementLockClient extends i{constructor(e,t,r,i){if(null==e)throw new Error("'credentials' cannot be null.");if(null==t)throw new Error("'subscriptionId' cannot be null.");i||(i={}),super(e,i),this.apiVersion="2016-09-01",this.acceptLanguage="en-US",this.longRunningOperationRetryTimeout=30,this.generateClientRequestId=!0,this.baseUri=r,this.baseUri||(this.baseUri="https://management.azure.com"),this.credentials=e,this.subscriptionId=t;let a=this.getPackageJsonInfo(__dirname);this.addUserAgentInfo(`${a.name}/${a.version}`),null!==i.apiVersion&&void 0!==i.apiVersion&&(this.apiVersion=i.apiVersion),null!==i.acceptLanguage&&void 0!==i.acceptLanguage&&(this.acceptLanguage=i.acceptLanguage),null!==i.longRunningOperationRetryTimeout&&void 0!==i.longRunningOperationRetryTimeout&&(this.longRunningOperationRetryTimeout=i.longRunningOperationRetryTimeout),null!==i.generateClientRequestId&&void 0!==i.generateClientRequestId&&(this.generateClientRequestId=i.generateClientRequestId),this.managementLocks=new s.ManagementLocks(this),this.models=o,n.addSerializationMixin(this)}}},function(e,t,r){"use strict";e.exports=class ManagementLockOwner{constructor(){}mapper(){return{required:!1,serializedName:"ManagementLockOwner",type:{name:"Composite",className:"ManagementLockOwner",modelProperties:{applicationId:{required:!1,serializedName:"applicationId",type:{name:"String"}}}}}}}},function(e,t,r){"use strict";const n=r(478);e.exports=class ManagementLockObject extends n.BaseResource{constructor(){super()}mapper(){return{required:!1,serializedName:"ManagementLockObject",type:{name:"Composite",className:"ManagementLockObject",modelProperties:{level:{required:!0,serializedName:"properties.level",type:{name:"String"}},notes:{required:!1,serializedName:"properties.notes",type:{name:"String"}},owners:{required:!1,serializedName:"properties.owners",type:{name:"Sequence",element:{required:!1,serializedName:"ManagementLockOwnerElementType",type:{name:"Composite",className:"ManagementLockOwner"}}}},id:{required:!1,readOnly:!0,serializedName:"id",type:{name:"String"}},type:{required:!1,readOnly:!0,serializedName:"type",type:{name:"String"}},name:{required:!1,serializedName:"name",type:{name:"String"}}}}}}}},function(e,t,r){"use strict";t.ManagementLocks=r(1223)},function(e,t,r){"use strict";const n=r(8),i=r(9),o=n.WebResource;function _createOrUpdateAtResourceGroupLevel(e,t,r,s,a){let c=this.client;if(a||"function"!=typeof s||(a=s,s=null),!a)throw new Error("callback cannot be null.");try{if(null==e||"string"!=typeof e.valueOf())throw new Error("resourceGroupName cannot be null or undefined and it must be of type string.");if(null!=e){if(e.length>90)throw new Error('"resourceGroupName" should satisfy the constraint - "MaxLength": 90');if(e.length<1)throw new Error('"resourceGroupName" should satisfy the constraint - "MinLength": 1');if(null===e.match(/^[-\w\._\(\)]+$/))throw new Error('"resourceGroupName" should satisfy the constraint - "Pattern": /^[-w._()]+$/')}if(null==t||"string"!=typeof t.valueOf())throw new Error("lockName cannot be null or undefined and it must be of type string.");if(null==r)throw new Error("parameters cannot be null or undefined.");if(null===this.client.apiVersion||void 0===this.client.apiVersion||"string"!=typeof this.client.apiVersion.valueOf())throw new Error("this.client.apiVersion cannot be null or undefined and it must be of type string.");if(null===this.client.subscriptionId||void 0===this.client.subscriptionId||"string"!=typeof this.client.subscriptionId.valueOf())throw new Error("this.client.subscriptionId cannot be null or undefined and it must be of type string.");if(null!==this.client.acceptLanguage&&void 0!==this.client.acceptLanguage&&"string"!=typeof this.client.acceptLanguage.valueOf())throw new Error("this.client.acceptLanguage must be of type string.")}catch(e){return a(e)}let u=this.client.baseUri,l=u+(u.endsWith("/")?"":"/")+"subscriptions/{subscriptionId}/resourceGroups/{resourceGroupName}/providers/Microsoft.Authorization/locks/{lockName}";l=(l=(l=l.replace("{resourceGroupName}",encodeURIComponent(e))).replace("{lockName}",encodeURIComponent(t))).replace("{subscriptionId}",encodeURIComponent(this.client.subscriptionId));let p=[];p.push("api-version="+encodeURIComponent(this.client.apiVersion)),p.length>0&&(l+="?"+p.join("&"));let d=new o;if(d.method="PUT",d.headers={},d.url=l,this.client.generateClientRequestId&&(d.headers["x-ms-client-request-id"]=i.generateUuid()),void 0!==this.client.acceptLanguage&&null!==this.client.acceptLanguage&&(d.headers["accept-language"]=this.client.acceptLanguage),s)for(let e in s.customHeaders)s.customHeaders.hasOwnProperty(e)&&(d.headers[e]=s.customHeaders[e]);d.headers["Content-Type"]="application/json; charset=utf-8";let h=null,f=null;try{if(null!=r){let e=(new c.models.ManagementLockObject).mapper();f=c.serialize(e,r,"parameters"),h=JSON.stringify(f)}}catch(e){let t=new Error(`Error "${e.message}" occurred in serializing the `+`payload - ${JSON.stringify(r,null,2)}.`);return a(t)}return d.body=h,c.pipeline(d,(e,t,r)=>{if(e)return a(e);let i=t.statusCode;if(200!==i&&201!==i){let e,i=new Error(r);i.statusCode=t.statusCode,i.request=n.stripRequest(d),i.response=n.stripResponse(t),""===r&&(r=null);try{if((e=JSON.parse(r))&&(e.error&&(e=e.error),e.code&&(i.code=e.code),e.message&&(i.message=e.message)),null!=e){let t=(new c.models.CloudError).mapper();i.body=c.deserialize(t,e,"error.body")}}catch(e){return i.message=`Error "${e.message}" occurred in deserializing the responseBody `+`- "${r}" for the default response.`,a(i)}return a(i)}let o=null;if(""===r&&(r=null),200===i){let e=null;try{if(e=JSON.parse(r),o=JSON.parse(r),null!=e){let t=(new c.models.ManagementLockObject).mapper();o=c.deserialize(t,e,"result")}}catch(e){let i=new Error(`Error ${e} occurred in deserializing the responseBody - ${r}`);return i.request=n.stripRequest(d),i.response=n.stripResponse(t),a(i)}}if(201===i){let e=null;try{if(e=JSON.parse(r),o=JSON.parse(r),null!=e){let t=(new c.models.ManagementLockObject).mapper();o=c.deserialize(t,e,"result")}}catch(e){let i=new Error(`Error ${e} occurred in deserializing the responseBody - ${r}`);return i.request=n.stripRequest(d),i.response=n.stripResponse(t),a(i)}}return a(null,o,d,t)})}function _deleteAtResourceGroupLevel(e,t,r,s){let a=this.client;if(s||"function"!=typeof r||(s=r,r=null),!s)throw new Error("callback cannot be null.");try{if(null==e||"string"!=typeof e.valueOf())throw new Error("resourceGroupName cannot be null or undefined and it must be of type string.");if(null!=e){if(e.length>90)throw new Error('"resourceGroupName" should satisfy the constraint - "MaxLength": 90');if(e.length<1)throw new Error('"resourceGroupName" should satisfy the constraint - "MinLength": 1');if(null===e.match(/^[-\w\._\(\)]+$/))throw new Error('"resourceGroupName" should satisfy the constraint - "Pattern": /^[-w._()]+$/')}if(null==t||"string"!=typeof t.valueOf())throw new Error("lockName cannot be null or undefined and it must be of type string.");if(null===this.client.apiVersion||void 0===this.client.apiVersion||"string"!=typeof this.client.apiVersion.valueOf())throw new Error("this.client.apiVersion cannot be null or undefined and it must be of type string.");if(null===this.client.subscriptionId||void 0===this.client.subscriptionId||"string"!=typeof this.client.subscriptionId.valueOf())throw new Error("this.client.subscriptionId cannot be null or undefined and it must be of type string.");if(null!==this.client.acceptLanguage&&void 0!==this.client.acceptLanguage&&"string"!=typeof this.client.acceptLanguage.valueOf())throw new Error("this.client.acceptLanguage must be of type string.")}catch(e){return s(e)}let c=this.client.baseUri,u=c+(c.endsWith("/")?"":"/")+"subscriptions/{subscriptionId}/resourceGroups/{resourceGroupName}/providers/Microsoft.Authorization/locks/{lockName}";u=(u=(u=u.replace("{resourceGroupName}",encodeURIComponent(e))).replace("{lockName}",encodeURIComponent(t))).replace("{subscriptionId}",encodeURIComponent(this.client.subscriptionId));let l=[];l.push("api-version="+encodeURIComponent(this.client.apiVersion)),l.length>0&&(u+="?"+l.join("&"));let p=new o;if(p.method="DELETE",p.headers={},p.url=u,this.client.generateClientRequestId&&(p.headers["x-ms-client-request-id"]=i.generateUuid()),void 0!==this.client.acceptLanguage&&null!==this.client.acceptLanguage&&(p.headers["accept-language"]=this.client.acceptLanguage),r)for(let e in r.customHeaders)r.customHeaders.hasOwnProperty(e)&&(p.headers[e]=r.customHeaders[e]);return p.headers["Content-Type"]="application/json; charset=utf-8",p.body=null,a.pipeline(p,(e,t,r)=>{if(e)return s(e);let i=t.statusCode;if(204!==i&&200!==i){let e,i=new Error(r);i.statusCode=t.statusCode,i.request=n.stripRequest(p),i.response=n.stripResponse(t),""===r&&(r=null);try{if((e=JSON.parse(r))&&(e.error&&(e=e.error),e.code&&(i.code=e.code),e.message&&(i.message=e.message)),null!=e){let t=(new a.models.CloudError).mapper();i.body=a.deserialize(t,e,"error.body")}}catch(e){return i.message=`Error "${e.message}" occurred in deserializing the responseBody `+`- "${r}" for the default response.`,s(i)}return s(i)}return""===r&&(r=null),s(null,null,p,t)})}function _getAtResourceGroupLevel(e,t,r,s){let a=this.client;if(s||"function"!=typeof r||(s=r,r=null),!s)throw new Error("callback cannot be null.");try{if(null==e||"string"!=typeof e.valueOf())throw new Error("resourceGroupName cannot be null or undefined and it must be of type string.");if(null!=e){if(e.length>90)throw new Error('"resourceGroupName" should satisfy the constraint - "MaxLength": 90');if(e.length<1)throw new Error('"resourceGroupName" should satisfy the constraint - "MinLength": 1');if(null===e.match(/^[-\w\._\(\)]+$/))throw new Error('"resourceGroupName" should satisfy the constraint - "Pattern": /^[-w._()]+$/')}if(null==t||"string"!=typeof t.valueOf())throw new Error("lockName cannot be null or undefined and it must be of type string.");if(null===this.client.apiVersion||void 0===this.client.apiVersion||"string"!=typeof this.client.apiVersion.valueOf())throw new Error("this.client.apiVersion cannot be null or undefined and it must be of type string.");if(null===this.client.subscriptionId||void 0===this.client.subscriptionId||"string"!=typeof this.client.subscriptionId.valueOf())throw new Error("this.client.subscriptionId cannot be null or undefined and it must be of type string.");if(null!==this.client.acceptLanguage&&void 0!==this.client.acceptLanguage&&"string"!=typeof this.client.acceptLanguage.valueOf())throw new Error("this.client.acceptLanguage must be of type string.")}catch(e){return s(e)}let c=this.client.baseUri,u=c+(c.endsWith("/")?"":"/")+"subscriptions/{subscriptionId}/resourceGroups/{resourceGroupName}/providers/Microsoft.Authorization/locks/{lockName}";u=(u=(u=u.replace("{resourceGroupName}",encodeURIComponent(e))).replace("{lockName}",encodeURIComponent(t))).replace("{subscriptionId}",encodeURIComponent(this.client.subscriptionId));let l=[];l.push("api-version="+encodeURIComponent(this.client.apiVersion)),l.length>0&&(u+="?"+l.join("&"));let p=new o;if(p.method="GET",p.headers={},p.url=u,this.client.generateClientRequestId&&(p.headers["x-ms-client-request-id"]=i.generateUuid()),void 0!==this.client.acceptLanguage&&null!==this.client.acceptLanguage&&(p.headers["accept-language"]=this.client.acceptLanguage),r)for(let e in r.customHeaders)r.customHeaders.hasOwnProperty(e)&&(p.headers[e]=r.customHeaders[e]);return p.headers["Content-Type"]="application/json; charset=utf-8",p.body=null,a.pipeline(p,(e,t,r)=>{if(e)return s(e);let i=t.statusCode;if(200!==i){let e,i=new Error(r);i.statusCode=t.statusCode,i.request=n.stripRequest(p),i.response=n.stripResponse(t),""===r&&(r=null);try{if((e=JSON.parse(r))&&(e.error&&(e=e.error),e.code&&(i.code=e.code),e.message&&(i.message=e.message)),null!=e){let t=(new a.models.CloudError).mapper();i.body=a.deserialize(t,e,"error.body")}}catch(e){return i.message=`Error "${e.message}" occurred in deserializing the responseBody `+`- "${r}" for the default response.`,s(i)}return s(i)}let o=null;if(""===r&&(r=null),200===i){let e=null;try{if(e=JSON.parse(r),o=JSON.parse(r),null!=e){let t=(new a.models.ManagementLockObject).mapper();o=a.deserialize(t,e,"result")}}catch(e){let i=new Error(`Error ${e} occurred in deserializing the responseBody - ${r}`);return i.request=n.stripRequest(p),i.response=n.stripResponse(t),s(i)}}return s(null,o,p,t)})}function _createOrUpdateByScope(e,t,r,s,a){let c=this.client;if(a||"function"!=typeof s||(a=s,s=null),!a)throw new Error("callback cannot be null.");try{if(null==e||"string"!=typeof e.valueOf())throw new Error("scope cannot be null or undefined and it must be of type string.");if(null==t||"string"!=typeof t.valueOf())throw new Error("lockName cannot be null or undefined and it must be of type string.");if(null==r)throw new Error("parameters cannot be null or undefined.");if(null===this.client.apiVersion||void 0===this.client.apiVersion||"string"!=typeof this.client.apiVersion.valueOf())throw new Error("this.client.apiVersion cannot be null or undefined and it must be of type string.");if(null!==this.client.acceptLanguage&&void 0!==this.client.acceptLanguage&&"string"!=typeof this.client.acceptLanguage.valueOf())throw new Error("this.client.acceptLanguage must be of type string.")}catch(e){return a(e)}let u=this.client.baseUri,l=u+(u.endsWith("/")?"":"/")+"{scope}/providers/Microsoft.Authorization/locks/{lockName}";l=(l=l.replace("{scope}",encodeURIComponent(e))).replace("{lockName}",encodeURIComponent(t));let p=[];p.push("api-version="+encodeURIComponent(this.client.apiVersion)),p.length>0&&(l+="?"+p.join("&"));let d=new o;if(d.method="PUT",d.headers={},d.url=l,this.client.generateClientRequestId&&(d.headers["x-ms-client-request-id"]=i.generateUuid()),void 0!==this.client.acceptLanguage&&null!==this.client.acceptLanguage&&(d.headers["accept-language"]=this.client.acceptLanguage),s)for(let e in s.customHeaders)s.customHeaders.hasOwnProperty(e)&&(d.headers[e]=s.customHeaders[e]);d.headers["Content-Type"]="application/json; charset=utf-8";let h=null,f=null;try{if(null!=r){let e=(new c.models.ManagementLockObject).mapper();f=c.serialize(e,r,"parameters"),h=JSON.stringify(f)}}catch(e){let t=new Error(`Error "${e.message}" occurred in serializing the `+`payload - ${JSON.stringify(r,null,2)}.`);return a(t)}return d.body=h,c.pipeline(d,(e,t,r)=>{if(e)return a(e);let i=t.statusCode;if(200!==i&&201!==i){let e,i=new Error(r);i.statusCode=t.statusCode,i.request=n.stripRequest(d),i.response=n.stripResponse(t),""===r&&(r=null);try{if((e=JSON.parse(r))&&(e.error&&(e=e.error),e.code&&(i.code=e.code),e.message&&(i.message=e.message)),null!=e){let t=(new c.models.CloudError).mapper();i.body=c.deserialize(t,e,"error.body")}}catch(e){return i.message=`Error "${e.message}" occurred in deserializing the responseBody `+`- "${r}" for the default response.`,a(i)}return a(i)}let o=null;if(""===r&&(r=null),200===i){let e=null;try{if(e=JSON.parse(r),o=JSON.parse(r),null!=e){let t=(new c.models.ManagementLockObject).mapper();o=c.deserialize(t,e,"result")}}catch(e){let i=new Error(`Error ${e} occurred in deserializing the responseBody - ${r}`);return i.request=n.stripRequest(d),i.response=n.stripResponse(t),a(i)}}if(201===i){let e=null;try{if(e=JSON.parse(r),o=JSON.parse(r),null!=e){let t=(new c.models.ManagementLockObject).mapper();o=c.deserialize(t,e,"result")}}catch(e){let i=new Error(`Error ${e} occurred in deserializing the responseBody - ${r}`);return i.request=n.stripRequest(d),i.response=n.stripResponse(t),a(i)}}return a(null,o,d,t)})}function _deleteByScope(e,t,r,s){let a=this.client;if(s||"function"!=typeof r||(s=r,r=null),!s)throw new Error("callback cannot be null.");try{if(null==e||"string"!=typeof e.valueOf())throw new Error("scope cannot be null or undefined and it must be of type string.");if(null==t||"string"!=typeof t.valueOf())throw new Error("lockName cannot be null or undefined and it must be of type string.");if(null===this.client.apiVersion||void 0===this.client.apiVersion||"string"!=typeof this.client.apiVersion.valueOf())throw new Error("this.client.apiVersion cannot be null or undefined and it must be of type string.");if(null!==this.client.acceptLanguage&&void 0!==this.client.acceptLanguage&&"string"!=typeof this.client.acceptLanguage.valueOf())throw new Error("this.client.acceptLanguage must be of type string.")}catch(e){return s(e)}let c=this.client.baseUri,u=c+(c.endsWith("/")?"":"/")+"{scope}/providers/Microsoft.Authorization/locks/{lockName}";u=(u=u.replace("{scope}",encodeURIComponent(e))).replace("{lockName}",encodeURIComponent(t));let l=[];l.push("api-version="+encodeURIComponent(this.client.apiVersion)),l.length>0&&(u+="?"+l.join("&"));let p=new o;if(p.method="DELETE",p.headers={},p.url=u,this.client.generateClientRequestId&&(p.headers["x-ms-client-request-id"]=i.generateUuid()),void 0!==this.client.acceptLanguage&&null!==this.client.acceptLanguage&&(p.headers["accept-language"]=this.client.acceptLanguage),r)for(let e in r.customHeaders)r.customHeaders.hasOwnProperty(e)&&(p.headers[e]=r.customHeaders[e]);return p.headers["Content-Type"]="application/json; charset=utf-8",p.body=null,a.pipeline(p,(e,t,r)=>{if(e)return s(e);let i=t.statusCode;if(204!==i&&200!==i){let e,i=new Error(r);i.statusCode=t.statusCode,i.request=n.stripRequest(p),i.response=n.stripResponse(t),""===r&&(r=null);try{if((e=JSON.parse(r))&&(e.error&&(e=e.error),e.code&&(i.code=e.code),e.message&&(i.message=e.message)),null!=e){let t=(new a.models.CloudError).mapper();i.body=a.deserialize(t,e,"error.body")}}catch(e){return i.message=`Error "${e.message}" occurred in deserializing the responseBody `+`- "${r}" for the default response.`,s(i)}return s(i)}return""===r&&(r=null),s(null,null,p,t)})}function _getByScope(e,t,r,s){let a=this.client;if(s||"function"!=typeof r||(s=r,r=null),!s)throw new Error("callback cannot be null.");try{if(null==e||"string"!=typeof e.valueOf())throw new Error("scope cannot be null or undefined and it must be of type string.");if(null==t||"string"!=typeof t.valueOf())throw new Error("lockName cannot be null or undefined and it must be of type string.");if(null===this.client.apiVersion||void 0===this.client.apiVersion||"string"!=typeof this.client.apiVersion.valueOf())throw new Error("this.client.apiVersion cannot be null or undefined and it must be of type string.");if(null!==this.client.acceptLanguage&&void 0!==this.client.acceptLanguage&&"string"!=typeof this.client.acceptLanguage.valueOf())throw new Error("this.client.acceptLanguage must be of type string.")}catch(e){return s(e)}let c=this.client.baseUri,u=c+(c.endsWith("/")?"":"/")+"{scope}/providers/Microsoft.Authorization/locks/{lockName}";u=(u=u.replace("{scope}",encodeURIComponent(e))).replace("{lockName}",encodeURIComponent(t));let l=[];l.push("api-version="+encodeURIComponent(this.client.apiVersion)),l.length>0&&(u+="?"+l.join("&"));let p=new o;if(p.method="GET",p.headers={},p.url=u,this.client.generateClientRequestId&&(p.headers["x-ms-client-request-id"]=i.generateUuid()),void 0!==this.client.acceptLanguage&&null!==this.client.acceptLanguage&&(p.headers["accept-language"]=this.client.acceptLanguage),r)for(let e in r.customHeaders)r.customHeaders.hasOwnProperty(e)&&(p.headers[e]=r.customHeaders[e]);return p.headers["Content-Type"]="application/json; charset=utf-8",p.body=null,a.pipeline(p,(e,t,r)=>{if(e)return s(e);let i=t.statusCode;if(200!==i){let e,i=new Error(r);i.statusCode=t.statusCode,i.request=n.stripRequest(p),i.response=n.stripResponse(t),""===r&&(r=null);try{if((e=JSON.parse(r))&&(e.error&&(e=e.error),e.code&&(i.code=e.code),e.message&&(i.message=e.message)),null!=e){let t=(new a.models.CloudError).mapper();i.body=a.deserialize(t,e,"error.body")}}catch(e){return i.message=`Error "${e.message}" occurred in deserializing the responseBody `+`- "${r}" for the default response.`,s(i)}return s(i)}let o=null;if(""===r&&(r=null),200===i){let e=null;try{if(e=JSON.parse(r),o=JSON.parse(r),null!=e){let t=(new a.models.ManagementLockObject).mapper();o=a.deserialize(t,e,"result")}}catch(e){let i=new Error(`Error ${e} occurred in deserializing the responseBody - ${r}`);return i.request=n.stripRequest(p),i.response=n.stripResponse(t),s(i)}}return s(null,o,p,t)})}function _createOrUpdateAtResourceLevel(e,t,r,s,a,c,u,l,p){let d=this.client;if(p||"function"!=typeof l||(p=l,l=null),!p)throw new Error("callback cannot be null.");try{if(null==e||"string"!=typeof e.valueOf())throw new Error("resourceGroupName cannot be null or undefined and it must be of type string.");if(null!=e){if(e.length>90)throw new Error('"resourceGroupName" should satisfy the constraint - "MaxLength": 90');if(e.length<1)throw new Error('"resourceGroupName" should satisfy the constraint - "MinLength": 1');if(null===e.match(/^[-\w\._\(\)]+$/))throw new Error('"resourceGroupName" should satisfy the constraint - "Pattern": /^[-w._()]+$/')}if(null==t||"string"!=typeof t.valueOf())throw new Error("resourceProviderNamespace cannot be null or undefined and it must be of type string.");if(null==r||"string"!=typeof r.valueOf())throw new Error("parentResourcePath cannot be null or undefined and it must be of type string.");if(null==s||"string"!=typeof s.valueOf())throw new Error("resourceType cannot be null or undefined and it must be of type string.");if(null==a||"string"!=typeof a.valueOf())throw new Error("resourceName cannot be null or undefined and it must be of type string.");if(null==c||"string"!=typeof c.valueOf())throw new Error("lockName cannot be null or undefined and it must be of type string.");if(null==u)throw new Error("parameters cannot be null or undefined.");if(null===this.client.apiVersion||void 0===this.client.apiVersion||"string"!=typeof this.client.apiVersion.valueOf())throw new Error("this.client.apiVersion cannot be null or undefined and it must be of type string.");if(null===this.client.subscriptionId||void 0===this.client.subscriptionId||"string"!=typeof this.client.subscriptionId.valueOf())throw new Error("this.client.subscriptionId cannot be null or undefined and it must be of type string.");if(null!==this.client.acceptLanguage&&void 0!==this.client.acceptLanguage&&"string"!=typeof this.client.acceptLanguage.valueOf())throw new Error("this.client.acceptLanguage must be of type string.")}catch(e){return p(e)}let h=this.client.baseUri,f=h+(h.endsWith("/")?"":"/")+"subscriptions/{subscriptionId}/resourcegroups/{resourceGroupName}/providers/{resourceProviderNamespace}/{parentResourcePath}/{resourceType}/{resourceName}/providers/Microsoft.Authorization/locks/{lockName}";f=(f=(f=(f=(f=(f=(f=f.replace("{resourceGroupName}",encodeURIComponent(e))).replace("{resourceProviderNamespace}",encodeURIComponent(t))).replace("{parentResourcePath}",r)).replace("{resourceType}",s)).replace("{resourceName}",encodeURIComponent(a))).replace("{lockName}",encodeURIComponent(c))).replace("{subscriptionId}",encodeURIComponent(this.client.subscriptionId));let m=[];m.push("api-version="+encodeURIComponent(this.client.apiVersion)),m.length>0&&(f+="?"+m.join("&"));let g=new o;if(g.method="PUT",g.headers={},g.url=f,this.client.generateClientRequestId&&(g.headers["x-ms-client-request-id"]=i.generateUuid()),void 0!==this.client.acceptLanguage&&null!==this.client.acceptLanguage&&(g.headers["accept-language"]=this.client.acceptLanguage),l)for(let e in l.customHeaders)l.customHeaders.hasOwnProperty(e)&&(g.headers[e]=l.customHeaders[e]);g.headers["Content-Type"]="application/json; charset=utf-8";let y=null,v=null;try{if(null!=u){let e=(new d.models.ManagementLockObject).mapper();v=d.serialize(e,u,"parameters"),y=JSON.stringify(v)}}catch(e){let t=new Error(`Error "${e.message}" occurred in serializing the `+`payload - ${JSON.stringify(u,null,2)}.`);return p(t)}return g.body=y,d.pipeline(g,(e,t,r)=>{if(e)return p(e);let i=t.statusCode;if(200!==i&&201!==i){let e,i=new Error(r);i.statusCode=t.statusCode,i.request=n.stripRequest(g),i.response=n.stripResponse(t),""===r&&(r=null);try{if((e=JSON.parse(r))&&(e.error&&(e=e.error),e.code&&(i.code=e.code),e.message&&(i.message=e.message)),null!=e){let t=(new d.models.CloudError).mapper();i.body=d.deserialize(t,e,"error.body")}}catch(e){return i.message=`Error "${e.message}" occurred in deserializing the responseBody `+`- "${r}" for the default response.`,p(i)}return p(i)}let o=null;if(""===r&&(r=null),200===i){let e=null;try{if(e=JSON.parse(r),o=JSON.parse(r),null!=e){let t=(new d.models.ManagementLockObject).mapper();o=d.deserialize(t,e,"result")}}catch(e){let i=new Error(`Error ${e} occurred in deserializing the responseBody - ${r}`);return i.request=n.stripRequest(g),i.response=n.stripResponse(t),p(i)}}if(201===i){let e=null;try{if(e=JSON.parse(r),o=JSON.parse(r),null!=e){let t=(new d.models.ManagementLockObject).mapper();o=d.deserialize(t,e,"result")}}catch(e){let i=new Error(`Error ${e} occurred in deserializing the responseBody - ${r}`);return i.request=n.stripRequest(g),i.response=n.stripResponse(t),p(i)}}return p(null,o,g,t)})}function _deleteAtResourceLevel(e,t,r,s,a,c,u,l){let p=this.client;if(l||"function"!=typeof u||(l=u,u=null),!l)throw new Error("callback cannot be null.");try{if(null==e||"string"!=typeof e.valueOf())throw new Error("resourceGroupName cannot be null or undefined and it must be of type string.");if(null!=e){if(e.length>90)throw new Error('"resourceGroupName" should satisfy the constraint - "MaxLength": 90');if(e.length<1)throw new Error('"resourceGroupName" should satisfy the constraint - "MinLength": 1');if(null===e.match(/^[-\w\._\(\)]+$/))throw new Error('"resourceGroupName" should satisfy the constraint - "Pattern": /^[-w._()]+$/')}if(null==t||"string"!=typeof t.valueOf())throw new Error("resourceProviderNamespace cannot be null or undefined and it must be of type string.");if(null==r||"string"!=typeof r.valueOf())throw new Error("parentResourcePath cannot be null or undefined and it must be of type string.");if(null==s||"string"!=typeof s.valueOf())throw new Error("resourceType cannot be null or undefined and it must be of type string.");if(null==a||"string"!=typeof a.valueOf())throw new Error("resourceName cannot be null or undefined and it must be of type string.");if(null==c||"string"!=typeof c.valueOf())throw new Error("lockName cannot be null or undefined and it must be of type string.");if(null===this.client.apiVersion||void 0===this.client.apiVersion||"string"!=typeof this.client.apiVersion.valueOf())throw new Error("this.client.apiVersion cannot be null or undefined and it must be of type string.");if(null===this.client.subscriptionId||void 0===this.client.subscriptionId||"string"!=typeof this.client.subscriptionId.valueOf())throw new Error("this.client.subscriptionId cannot be null or undefined and it must be of type string.");if(null!==this.client.acceptLanguage&&void 0!==this.client.acceptLanguage&&"string"!=typeof this.client.acceptLanguage.valueOf())throw new Error("this.client.acceptLanguage must be of type string.")}catch(e){return l(e)}let d=this.client.baseUri,h=d+(d.endsWith("/")?"":"/")+"subscriptions/{subscriptionId}/resourcegroups/{resourceGroupName}/providers/{resourceProviderNamespace}/{parentResourcePath}/{resourceType}/{resourceName}/providers/Microsoft.Authorization/locks/{lockName}";h=(h=(h=(h=(h=(h=(h=h.replace("{resourceGroupName}",encodeURIComponent(e))).replace("{resourceProviderNamespace}",encodeURIComponent(t))).replace("{parentResourcePath}",r)).replace("{resourceType}",s)).replace("{resourceName}",encodeURIComponent(a))).replace("{lockName}",encodeURIComponent(c))).replace("{subscriptionId}",encodeURIComponent(this.client.subscriptionId));let f=[];f.push("api-version="+encodeURIComponent(this.client.apiVersion)),f.length>0&&(h+="?"+f.join("&"));let m=new o;if(m.method="DELETE",m.headers={},m.url=h,this.client.generateClientRequestId&&(m.headers["x-ms-client-request-id"]=i.generateUuid()),void 0!==this.client.acceptLanguage&&null!==this.client.acceptLanguage&&(m.headers["accept-language"]=this.client.acceptLanguage),u)for(let e in u.customHeaders)u.customHeaders.hasOwnProperty(e)&&(m.headers[e]=u.customHeaders[e]);return m.headers["Content-Type"]="application/json; charset=utf-8",m.body=null,p.pipeline(m,(e,t,r)=>{if(e)return l(e);let i=t.statusCode;if(204!==i&&200!==i){let e,i=new Error(r);i.statusCode=t.statusCode,i.request=n.stripRequest(m),i.response=n.stripResponse(t),""===r&&(r=null);try{if((e=JSON.parse(r))&&(e.error&&(e=e.error),e.code&&(i.code=e.code),e.message&&(i.message=e.message)),null!=e){let t=(new p.models.CloudError).mapper();i.body=p.deserialize(t,e,"error.body")}}catch(e){return i.message=`Error "${e.message}" occurred in deserializing the responseBody `+`- "${r}" for the default response.`,l(i)}return l(i)}return""===r&&(r=null),l(null,null,m,t)})}function _getAtResourceLevel(e,t,r,s,a,c,u,l){let p=this.client;if(l||"function"!=typeof u||(l=u,u=null),!l)throw new Error("callback cannot be null.");try{if(null==e||"string"!=typeof e.valueOf())throw new Error("resourceGroupName cannot be null or undefined and it must be of type string.");if(null!=e){if(e.length>90)throw new Error('"resourceGroupName" should satisfy the constraint - "MaxLength": 90');if(e.length<1)throw new Error('"resourceGroupName" should satisfy the constraint - "MinLength": 1');if(null===e.match(/^[-\w\._\(\)]+$/))throw new Error('"resourceGroupName" should satisfy the constraint - "Pattern": /^[-w._()]+$/')}if(null==t||"string"!=typeof t.valueOf())throw new Error("resourceProviderNamespace cannot be null or undefined and it must be of type string.");if(null==r||"string"!=typeof r.valueOf())throw new Error("parentResourcePath cannot be null or undefined and it must be of type string.");if(null==s||"string"!=typeof s.valueOf())throw new Error("resourceType cannot be null or undefined and it must be of type string.");if(null==a||"string"!=typeof a.valueOf())throw new Error("resourceName cannot be null or undefined and it must be of type string.");if(null==c||"string"!=typeof c.valueOf())throw new Error("lockName cannot be null or undefined and it must be of type string.");if(null===this.client.apiVersion||void 0===this.client.apiVersion||"string"!=typeof this.client.apiVersion.valueOf())throw new Error("this.client.apiVersion cannot be null or undefined and it must be of type string.");if(null===this.client.subscriptionId||void 0===this.client.subscriptionId||"string"!=typeof this.client.subscriptionId.valueOf())throw new Error("this.client.subscriptionId cannot be null or undefined and it must be of type string.");if(null!==this.client.acceptLanguage&&void 0!==this.client.acceptLanguage&&"string"!=typeof this.client.acceptLanguage.valueOf())throw new Error("this.client.acceptLanguage must be of type string.")}catch(e){return l(e)}let d=this.client.baseUri,h=d+(d.endsWith("/")?"":"/")+"subscriptions/{subscriptionId}/resourcegroups/{resourceGroupName}/providers/{resourceProviderNamespace}/{parentResourcePath}/{resourceType}/{resourceName}/providers/Microsoft.Authorization/locks/{lockName}";h=(h=(h=(h=(h=(h=(h=h.replace("{resourceGroupName}",encodeURIComponent(e))).replace("{resourceProviderNamespace}",encodeURIComponent(t))).replace("{parentResourcePath}",r)).replace("{resourceType}",s)).replace("{resourceName}",encodeURIComponent(a))).replace("{lockName}",encodeURIComponent(c))).replace("{subscriptionId}",encodeURIComponent(this.client.subscriptionId));let f=[];f.push("api-version="+encodeURIComponent(this.client.apiVersion)),f.length>0&&(h+="?"+f.join("&"));let m=new o;if(m.method="GET",m.headers={},m.url=h,this.client.generateClientRequestId&&(m.headers["x-ms-client-request-id"]=i.generateUuid()),void 0!==this.client.acceptLanguage&&null!==this.client.acceptLanguage&&(m.headers["accept-language"]=this.client.acceptLanguage),u)for(let e in u.customHeaders)u.customHeaders.hasOwnProperty(e)&&(m.headers[e]=u.customHeaders[e]);return m.headers["Content-Type"]="application/json; charset=utf-8",m.body=null,p.pipeline(m,(e,t,r)=>{if(e)return l(e);let i=t.statusCode;if(200!==i){let e,i=new Error(r);i.statusCode=t.statusCode,i.request=n.stripRequest(m),i.response=n.stripResponse(t),""===r&&(r=null);try{if((e=JSON.parse(r))&&(e.error&&(e=e.error),e.code&&(i.code=e.code),e.message&&(i.message=e.message)),null!=e){let t=(new p.models.CloudError).mapper();i.body=p.deserialize(t,e,"error.body")}}catch(e){return i.message=`Error "${e.message}" occurred in deserializing the responseBody `+`- "${r}" for the default response.`,l(i)}return l(i)}let o=null;if(""===r&&(r=null),200===i){let e=null;try{if(e=JSON.parse(r),o=JSON.parse(r),null!=e){let t=(new p.models.ManagementLockObject).mapper();o=p.deserialize(t,e,"result")}}catch(e){let i=new Error(`Error ${e} occurred in deserializing the responseBody - ${r}`);return i.request=n.stripRequest(m),i.response=n.stripResponse(t),l(i)}}return l(null,o,m,t)})}function _createOrUpdateAtSubscriptionLevel(e,t,r,s){let a=this.client;if(s||"function"!=typeof r||(s=r,r=null),!s)throw new Error("callback cannot be null.");try{if(null==e||"string"!=typeof e.valueOf())throw new Error("lockName cannot be null or undefined and it must be of type string.");if(null==t)throw new Error("parameters cannot be null or undefined.");if(null===this.client.apiVersion||void 0===this.client.apiVersion||"string"!=typeof this.client.apiVersion.valueOf())throw new Error("this.client.apiVersion cannot be null or undefined and it must be of type string.");if(null===this.client.subscriptionId||void 0===this.client.subscriptionId||"string"!=typeof this.client.subscriptionId.valueOf())throw new Error("this.client.subscriptionId cannot be null or undefined and it must be of type string.");if(null!==this.client.acceptLanguage&&void 0!==this.client.acceptLanguage&&"string"!=typeof this.client.acceptLanguage.valueOf())throw new Error("this.client.acceptLanguage must be of type string.")}catch(e){return s(e)}let c=this.client.baseUri,u=c+(c.endsWith("/")?"":"/")+"subscriptions/{subscriptionId}/providers/Microsoft.Authorization/locks/{lockName}";u=(u=u.replace("{lockName}",encodeURIComponent(e))).replace("{subscriptionId}",encodeURIComponent(this.client.subscriptionId));let l=[];l.push("api-version="+encodeURIComponent(this.client.apiVersion)),l.length>0&&(u+="?"+l.join("&"));let p=new o;if(p.method="PUT",p.headers={},p.url=u,this.client.generateClientRequestId&&(p.headers["x-ms-client-request-id"]=i.generateUuid()),void 0!==this.client.acceptLanguage&&null!==this.client.acceptLanguage&&(p.headers["accept-language"]=this.client.acceptLanguage),r)for(let e in r.customHeaders)r.customHeaders.hasOwnProperty(e)&&(p.headers[e]=r.customHeaders[e]);p.headers["Content-Type"]="application/json; charset=utf-8";let d=null,h=null;try{if(null!=t){let e=(new a.models.ManagementLockObject).mapper();h=a.serialize(e,t,"parameters"),d=JSON.stringify(h)}}catch(e){let r=new Error(`Error "${e.message}" occurred in serializing the `+`payload - ${JSON.stringify(t,null,2)}.`);return s(r)}return p.body=d,a.pipeline(p,(e,t,r)=>{if(e)return s(e);let i=t.statusCode;if(201!==i&&200!==i){let e,i=new Error(r);i.statusCode=t.statusCode,i.request=n.stripRequest(p),i.response=n.stripResponse(t),""===r&&(r=null);try{if((e=JSON.parse(r))&&(e.error&&(e=e.error),e.code&&(i.code=e.code),e.message&&(i.message=e.message)),null!=e){let t=(new a.models.CloudError).mapper();i.body=a.deserialize(t,e,"error.body")}}catch(e){return i.message=`Error "${e.message}" occurred in deserializing the responseBody `+`- "${r}" for the default response.`,s(i)}return s(i)}let o=null;if(""===r&&(r=null),201===i){let e=null;try{if(e=JSON.parse(r),o=JSON.parse(r),null!=e){let t=(new a.models.ManagementLockObject).mapper();o=a.deserialize(t,e,"result")}}catch(e){let i=new Error(`Error ${e} occurred in deserializing the responseBody - ${r}`);return i.request=n.stripRequest(p),i.response=n.stripResponse(t),s(i)}}if(200===i){let e=null;try{if(e=JSON.parse(r),o=JSON.parse(r),null!=e){let t=(new a.models.ManagementLockObject).mapper();o=a.deserialize(t,e,"result")}}catch(e){let i=new Error(`Error ${e} occurred in deserializing the responseBody - ${r}`);return i.request=n.stripRequest(p),i.response=n.stripResponse(t),s(i)}}return s(null,o,p,t)})}function _deleteAtSubscriptionLevel(e,t,r){let s=this.client;if(r||"function"!=typeof t||(r=t,t=null),!r)throw new Error("callback cannot be null.");try{if(null==e||"string"!=typeof e.valueOf())throw new Error("lockName cannot be null or undefined and it must be of type string.");if(null===this.client.apiVersion||void 0===this.client.apiVersion||"string"!=typeof this.client.apiVersion.valueOf())throw new Error("this.client.apiVersion cannot be null or undefined and it must be of type string.");if(null===this.client.subscriptionId||void 0===this.client.subscriptionId||"string"!=typeof this.client.subscriptionId.valueOf())throw new Error("this.client.subscriptionId cannot be null or undefined and it must be of type string.");if(null!==this.client.acceptLanguage&&void 0!==this.client.acceptLanguage&&"string"!=typeof this.client.acceptLanguage.valueOf())throw new Error("this.client.acceptLanguage must be of type string.")}catch(e){return r(e)}let a=this.client.baseUri,c=a+(a.endsWith("/")?"":"/")+"subscriptions/{subscriptionId}/providers/Microsoft.Authorization/locks/{lockName}";c=(c=c.replace("{lockName}",encodeURIComponent(e))).replace("{subscriptionId}",encodeURIComponent(this.client.subscriptionId));let u=[];u.push("api-version="+encodeURIComponent(this.client.apiVersion)),u.length>0&&(c+="?"+u.join("&"));let l=new o;if(l.method="DELETE",l.headers={},l.url=c,this.client.generateClientRequestId&&(l.headers["x-ms-client-request-id"]=i.generateUuid()),void 0!==this.client.acceptLanguage&&null!==this.client.acceptLanguage&&(l.headers["accept-language"]=this.client.acceptLanguage),t)for(let e in t.customHeaders)t.customHeaders.hasOwnProperty(e)&&(l.headers[e]=t.customHeaders[e]);return l.headers["Content-Type"]="application/json; charset=utf-8",l.body=null,s.pipeline(l,(e,t,i)=>{if(e)return r(e);let o=t.statusCode;if(204!==o&&200!==o){let e,o=new Error(i);o.statusCode=t.statusCode,o.request=n.stripRequest(l),o.response=n.stripResponse(t),""===i&&(i=null);try{if((e=JSON.parse(i))&&(e.error&&(e=e.error),e.code&&(o.code=e.code),e.message&&(o.message=e.message)),null!=e){let t=(new s.models.CloudError).mapper();o.body=s.deserialize(t,e,"error.body")}}catch(e){return o.message=`Error "${e.message}" occurred in deserializing the responseBody `+`- "${i}" for the default response.`,r(o)}return r(o)}return""===i&&(i=null),r(null,null,l,t)})}function _getAtSubscriptionLevel(e,t,r){let s=this.client;if(r||"function"!=typeof t||(r=t,t=null),!r)throw new Error("callback cannot be null.");try{if(null==e||"string"!=typeof e.valueOf())throw new Error("lockName cannot be null or undefined and it must be of type string.");if(null===this.client.apiVersion||void 0===this.client.apiVersion||"string"!=typeof this.client.apiVersion.valueOf())throw new Error("this.client.apiVersion cannot be null or undefined and it must be of type string.");if(null===this.client.subscriptionId||void 0===this.client.subscriptionId||"string"!=typeof this.client.subscriptionId.valueOf())throw new Error("this.client.subscriptionId cannot be null or undefined and it must be of type string.");if(null!==this.client.acceptLanguage&&void 0!==this.client.acceptLanguage&&"string"!=typeof this.client.acceptLanguage.valueOf())throw new Error("this.client.acceptLanguage must be of type string.")}catch(e){return r(e)}let a=this.client.baseUri,c=a+(a.endsWith("/")?"":"/")+"subscriptions/{subscriptionId}/providers/Microsoft.Authorization/locks/{lockName}";c=(c=c.replace("{lockName}",encodeURIComponent(e))).replace("{subscriptionId}",encodeURIComponent(this.client.subscriptionId));let u=[];u.push("api-version="+encodeURIComponent(this.client.apiVersion)),u.length>0&&(c+="?"+u.join("&"));let l=new o;if(l.method="GET",l.headers={},l.url=c,this.client.generateClientRequestId&&(l.headers["x-ms-client-request-id"]=i.generateUuid()),void 0!==this.client.acceptLanguage&&null!==this.client.acceptLanguage&&(l.headers["accept-language"]=this.client.acceptLanguage),t)for(let e in t.customHeaders)t.customHeaders.hasOwnProperty(e)&&(l.headers[e]=t.customHeaders[e]);return l.headers["Content-Type"]="application/json; charset=utf-8",l.body=null,s.pipeline(l,(e,t,i)=>{if(e)return r(e);let o=t.statusCode;if(200!==o){let e,o=new Error(i);o.statusCode=t.statusCode,o.request=n.stripRequest(l),o.response=n.stripResponse(t),""===i&&(i=null);try{if((e=JSON.parse(i))&&(e.error&&(e=e.error),e.code&&(o.code=e.code),e.message&&(o.message=e.message)),null!=e){let t=(new s.models.CloudError).mapper();o.body=s.deserialize(t,e,"error.body")}}catch(e){return o.message=`Error "${e.message}" occurred in deserializing the responseBody `+`- "${i}" for the default response.`,r(o)}return r(o)}let a=null;if(""===i&&(i=null),200===o){let e=null;try{if(e=JSON.parse(i),a=JSON.parse(i),null!=e){let t=(new s.models.ManagementLockObject).mapper();a=s.deserialize(t,e,"result")}}catch(e){let o=new Error(`Error ${e} occurred in deserializing the responseBody - ${i}`);return o.request=n.stripRequest(l),o.response=n.stripResponse(t),r(o)}}return r(null,a,l,t)})}function _listAtResourceGroupLevel(e,t,r){let s=this.client;if(r||"function"!=typeof t||(r=t,t=null),!r)throw new Error("callback cannot be null.");let a=t&&void 0!==t.filter?t.filter:void 0;try{if(null==e||"string"!=typeof e.valueOf())throw new Error("resourceGroupName cannot be null or undefined and it must be of type string.");if(null!=e){if(e.length>90)throw new Error('"resourceGroupName" should satisfy the constraint - "MaxLength": 90');if(e.length<1)throw new Error('"resourceGroupName" should satisfy the constraint - "MinLength": 1');if(null===e.match(/^[-\w\._\(\)]+$/))throw new Error('"resourceGroupName" should satisfy the constraint - "Pattern": /^[-w._()]+$/')}if(null!=a&&"string"!=typeof a.valueOf())throw new Error("filter must be of type string.");if(null===this.client.apiVersion||void 0===this.client.apiVersion||"string"!=typeof this.client.apiVersion.valueOf())throw new Error("this.client.apiVersion cannot be null or undefined and it must be of type string.");if(null===this.client.subscriptionId||void 0===this.client.subscriptionId||"string"!=typeof this.client.subscriptionId.valueOf())throw new Error("this.client.subscriptionId cannot be null or undefined and it must be of type string.");if(null!==this.client.acceptLanguage&&void 0!==this.client.acceptLanguage&&"string"!=typeof this.client.acceptLanguage.valueOf())throw new Error("this.client.acceptLanguage must be of type string.")}catch(e){return r(e)}let c=this.client.baseUri,u=c+(c.endsWith("/")?"":"/")+"subscriptions/{subscriptionId}/resourceGroups/{resourceGroupName}/providers/Microsoft.Authorization/locks";u=(u=u.replace("{resourceGroupName}",encodeURIComponent(e))).replace("{subscriptionId}",encodeURIComponent(this.client.subscriptionId));let l=[];null!=a&&l.push("$filter="+encodeURIComponent(a)),l.push("api-version="+encodeURIComponent(this.client.apiVersion)),l.length>0&&(u+="?"+l.join("&"));let p=new o;if(p.method="GET",p.headers={},p.url=u,this.client.generateClientRequestId&&(p.headers["x-ms-client-request-id"]=i.generateUuid()),void 0!==this.client.acceptLanguage&&null!==this.client.acceptLanguage&&(p.headers["accept-language"]=this.client.acceptLanguage),t)for(let e in t.customHeaders)t.customHeaders.hasOwnProperty(e)&&(p.headers[e]=t.customHeaders[e]);return p.headers["Content-Type"]="application/json; charset=utf-8",p.body=null,s.pipeline(p,(e,t,i)=>{if(e)return r(e);let o=t.statusCode;if(200!==o){let e,o=new Error(i);o.statusCode=t.statusCode,o.request=n.stripRequest(p),o.response=n.stripResponse(t),""===i&&(i=null);try{if((e=JSON.parse(i))&&(e.error&&(e=e.error),e.code&&(o.code=e.code),e.message&&(o.message=e.message)),null!=e){let t=(new s.models.CloudError).mapper();o.body=s.deserialize(t,e,"error.body")}}catch(e){return o.message=`Error "${e.message}" occurred in deserializing the responseBody `+`- "${i}" for the default response.`,r(o)}return r(o)}let a=null;if(""===i&&(i=null),200===o){let e=null;try{if(e=JSON.parse(i),a=JSON.parse(i),null!=e){let t=(new s.models.ManagementLockListResult).mapper();a=s.deserialize(t,e,"result")}}catch(e){let o=new Error(`Error ${e} occurred in deserializing the responseBody - ${i}`);return o.request=n.stripRequest(p),o.response=n.stripResponse(t),r(o)}}return r(null,a,p,t)})}function _listAtResourceLevel(e,t,r,s,a,c,u){let l=this.client;if(u||"function"!=typeof c||(u=c,c=null),!u)throw new Error("callback cannot be null.");let p=c&&void 0!==c.filter?c.filter:void 0;try{if(null==e||"string"!=typeof e.valueOf())throw new Error("resourceGroupName cannot be null or undefined and it must be of type string.");if(null!=e){if(e.length>90)throw new Error('"resourceGroupName" should satisfy the constraint - "MaxLength": 90');if(e.length<1)throw new Error('"resourceGroupName" should satisfy the constraint - "MinLength": 1');if(null===e.match(/^[-\w\._\(\)]+$/))throw new Error('"resourceGroupName" should satisfy the constraint - "Pattern": /^[-w._()]+$/')}if(null==t||"string"!=typeof t.valueOf())throw new Error("resourceProviderNamespace cannot be null or undefined and it must be of type string.");if(null==r||"string"!=typeof r.valueOf())throw new Error("parentResourcePath cannot be null or undefined and it must be of type string.");if(null==s||"string"!=typeof s.valueOf())throw new Error("resourceType cannot be null or undefined and it must be of type string.");if(null==a||"string"!=typeof a.valueOf())throw new Error("resourceName cannot be null or undefined and it must be of type string.");if(null!=p&&"string"!=typeof p.valueOf())throw new Error("filter must be of type string.");if(null===this.client.apiVersion||void 0===this.client.apiVersion||"string"!=typeof this.client.apiVersion.valueOf())throw new Error("this.client.apiVersion cannot be null or undefined and it must be of type string.");if(null===this.client.subscriptionId||void 0===this.client.subscriptionId||"string"!=typeof this.client.subscriptionId.valueOf())throw new Error("this.client.subscriptionId cannot be null or undefined and it must be of type string.");if(null!==this.client.acceptLanguage&&void 0!==this.client.acceptLanguage&&"string"!=typeof this.client.acceptLanguage.valueOf())throw new Error("this.client.acceptLanguage must be of type string.")}catch(e){return u(e)}let d=this.client.baseUri,h=d+(d.endsWith("/")?"":"/")+"subscriptions/{subscriptionId}/resourcegroups/{resourceGroupName}/providers/{resourceProviderNamespace}/{parentResourcePath}/{resourceType}/{resourceName}/providers/Microsoft.Authorization/locks";h=(h=(h=(h=(h=(h=h.replace("{resourceGroupName}",encodeURIComponent(e))).replace("{resourceProviderNamespace}",encodeURIComponent(t))).replace("{parentResourcePath}",r)).replace("{resourceType}",s)).replace("{resourceName}",encodeURIComponent(a))).replace("{subscriptionId}",encodeURIComponent(this.client.subscriptionId));let f=[];null!=p&&f.push("$filter="+encodeURIComponent(p)),f.push("api-version="+encodeURIComponent(this.client.apiVersion)),f.length>0&&(h+="?"+f.join("&"));let m=new o;if(m.method="GET",m.headers={},m.url=h,this.client.generateClientRequestId&&(m.headers["x-ms-client-request-id"]=i.generateUuid()),void 0!==this.client.acceptLanguage&&null!==this.client.acceptLanguage&&(m.headers["accept-language"]=this.client.acceptLanguage),c)for(let e in c.customHeaders)c.customHeaders.hasOwnProperty(e)&&(m.headers[e]=c.customHeaders[e]);return m.headers["Content-Type"]="application/json; charset=utf-8",m.body=null,l.pipeline(m,(e,t,r)=>{if(e)return u(e);let i=t.statusCode;if(200!==i){let e,i=new Error(r);i.statusCode=t.statusCode,i.request=n.stripRequest(m),i.response=n.stripResponse(t),""===r&&(r=null);try{if((e=JSON.parse(r))&&(e.error&&(e=e.error),e.code&&(i.code=e.code),e.message&&(i.message=e.message)),null!=e){let t=(new l.models.CloudError).mapper();i.body=l.deserialize(t,e,"error.body")}}catch(e){return i.message=`Error "${e.message}" occurred in deserializing the responseBody `+`- "${r}" for the default response.`,u(i)}return u(i)}let o=null;if(""===r&&(r=null),200===i){let e=null;try{if(e=JSON.parse(r),o=JSON.parse(r),null!=e){let t=(new l.models.ManagementLockListResult).mapper();o=l.deserialize(t,e,"result")}}catch(e){let i=new Error(`Error ${e} occurred in deserializing the responseBody - ${r}`);return i.request=n.stripRequest(m),i.response=n.stripResponse(t),u(i)}}return u(null,o,m,t)})}function _listAtSubscriptionLevel(e,t){let r=this.client;if(t||"function"!=typeof e||(t=e,e=null),!t)throw new Error("callback cannot be null.");let s=e&&void 0!==e.filter?e.filter:void 0;try{if(null!=s&&"string"!=typeof s.valueOf())throw new Error("filter must be of type string.");if(null===this.client.apiVersion||void 0===this.client.apiVersion||"string"!=typeof this.client.apiVersion.valueOf())throw new Error("this.client.apiVersion cannot be null or undefined and it must be of type string.");if(null===this.client.subscriptionId||void 0===this.client.subscriptionId||"string"!=typeof this.client.subscriptionId.valueOf())throw new Error("this.client.subscriptionId cannot be null or undefined and it must be of type string.");if(null!==this.client.acceptLanguage&&void 0!==this.client.acceptLanguage&&"string"!=typeof this.client.acceptLanguage.valueOf())throw new Error("this.client.acceptLanguage must be of type string.")}catch(e){return t(e)}let a=this.client.baseUri,c=a+(a.endsWith("/")?"":"/")+"subscriptions/{subscriptionId}/providers/Microsoft.Authorization/locks";c=c.replace("{subscriptionId}",encodeURIComponent(this.client.subscriptionId));let u=[];null!=s&&u.push("$filter="+encodeURIComponent(s)),u.push("api-version="+encodeURIComponent(this.client.apiVersion)),u.length>0&&(c+="?"+u.join("&"));let l=new o;if(l.method="GET",l.headers={},l.url=c,this.client.generateClientRequestId&&(l.headers["x-ms-client-request-id"]=i.generateUuid()),void 0!==this.client.acceptLanguage&&null!==this.client.acceptLanguage&&(l.headers["accept-language"]=this.client.acceptLanguage),e)for(let t in e.customHeaders)e.customHeaders.hasOwnProperty(t)&&(l.headers[t]=e.customHeaders[t]);return l.headers["Content-Type"]="application/json; charset=utf-8",l.body=null,r.pipeline(l,(e,i,o)=>{if(e)return t(e);let s=i.statusCode;if(200!==s){let e,s=new Error(o);s.statusCode=i.statusCode,s.request=n.stripRequest(l),s.response=n.stripResponse(i),""===o&&(o=null);try{if((e=JSON.parse(o))&&(e.error&&(e=e.error),e.code&&(s.code=e.code),e.message&&(s.message=e.message)),null!=e){let t=(new r.models.CloudError).mapper();s.body=r.deserialize(t,e,"error.body")}}catch(e){return s.message=`Error "${e.message}" occurred in deserializing the responseBody `+`- "${o}" for the default response.`,t(s)}return t(s)}let a=null;if(""===o&&(o=null),200===s){let e=null;try{if(e=JSON.parse(o),a=JSON.parse(o),null!=e){let t=(new r.models.ManagementLockListResult).mapper();a=r.deserialize(t,e,"result")}}catch(e){let r=new Error(`Error ${e} occurred in deserializing the responseBody - ${o}`);return r.request=n.stripRequest(l),r.response=n.stripResponse(i),t(r)}}return t(null,a,l,i)})}function _listAtResourceGroupLevelNext(e,t,r){let s=this.client;if(r||"function"!=typeof t||(r=t,t=null),!r)throw new Error("callback cannot be null.");try{if(null==e||"string"!=typeof e.valueOf())throw new Error("nextPageLink cannot be null or undefined and it must be of type string.");if(null!==this.client.acceptLanguage&&void 0!==this.client.acceptLanguage&&"string"!=typeof this.client.acceptLanguage.valueOf())throw new Error("this.client.acceptLanguage must be of type string.")}catch(e){return r(e)}let a="{nextLink}";a=a.replace("{nextLink}",e);let c=new o;if(c.method="GET",c.headers={},c.url=a,this.client.generateClientRequestId&&(c.headers["x-ms-client-request-id"]=i.generateUuid()),void 0!==this.client.acceptLanguage&&null!==this.client.acceptLanguage&&(c.headers["accept-language"]=this.client.acceptLanguage),t)for(let e in t.customHeaders)t.customHeaders.hasOwnProperty(e)&&(c.headers[e]=t.customHeaders[e]);return c.headers["Content-Type"]="application/json; charset=utf-8",c.body=null,s.pipeline(c,(e,t,i)=>{if(e)return r(e);let o=t.statusCode;if(200!==o){let e,o=new Error(i);o.statusCode=t.statusCode,o.request=n.stripRequest(c),o.response=n.stripResponse(t),""===i&&(i=null);try{if((e=JSON.parse(i))&&(e.error&&(e=e.error),e.code&&(o.code=e.code),e.message&&(o.message=e.message)),null!=e){let t=(new s.models.CloudError).mapper();o.body=s.deserialize(t,e,"error.body")}}catch(e){return o.message=`Error "${e.message}" occurred in deserializing the responseBody `+`- "${i}" for the default response.`,r(o)}return r(o)}let a=null;if(""===i&&(i=null),200===o){let e=null;try{if(e=JSON.parse(i),a=JSON.parse(i),null!=e){let t=(new s.models.ManagementLockListResult).mapper();a=s.deserialize(t,e,"result")}}catch(e){let o=new Error(`Error ${e} occurred in deserializing the responseBody - ${i}`);return o.request=n.stripRequest(c),o.response=n.stripResponse(t),r(o)}}return r(null,a,c,t)})}function _listAtResourceLevelNext(e,t,r){let s=this.client;if(r||"function"!=typeof t||(r=t,t=null),!r)throw new Error("callback cannot be null.");try{if(null==e||"string"!=typeof e.valueOf())throw new Error("nextPageLink cannot be null or undefined and it must be of type string.");if(null!==this.client.acceptLanguage&&void 0!==this.client.acceptLanguage&&"string"!=typeof this.client.acceptLanguage.valueOf())throw new Error("this.client.acceptLanguage must be of type string.")}catch(e){return r(e)}let a="{nextLink}";a=a.replace("{nextLink}",e);let c=new o;if(c.method="GET",c.headers={},c.url=a,this.client.generateClientRequestId&&(c.headers["x-ms-client-request-id"]=i.generateUuid()),void 0!==this.client.acceptLanguage&&null!==this.client.acceptLanguage&&(c.headers["accept-language"]=this.client.acceptLanguage),t)for(let e in t.customHeaders)t.customHeaders.hasOwnProperty(e)&&(c.headers[e]=t.customHeaders[e]);return c.headers["Content-Type"]="application/json; charset=utf-8",c.body=null,s.pipeline(c,(e,t,i)=>{if(e)return r(e);let o=t.statusCode;if(200!==o){let e,o=new Error(i);o.statusCode=t.statusCode,o.request=n.stripRequest(c),o.response=n.stripResponse(t),""===i&&(i=null);try{if((e=JSON.parse(i))&&(e.error&&(e=e.error),e.code&&(o.code=e.code),e.message&&(o.message=e.message)),null!=e){let t=(new s.models.CloudError).mapper();o.body=s.deserialize(t,e,"error.body")}}catch(e){return o.message=`Error "${e.message}" occurred in deserializing the responseBody `+`- "${i}" for the default response.`,r(o)}return r(o)}let a=null;if(""===i&&(i=null),200===o){let e=null;try{if(e=JSON.parse(i),a=JSON.parse(i),null!=e){let t=(new s.models.ManagementLockListResult).mapper();a=s.deserialize(t,e,"result")}}catch(e){let o=new Error(`Error ${e} occurred in deserializing the responseBody - ${i}`);return o.request=n.stripRequest(c),o.response=n.stripResponse(t),r(o)}}return r(null,a,c,t)})}function _listAtSubscriptionLevelNext(e,t,r){let s=this.client;if(r||"function"!=typeof t||(r=t,t=null),!r)throw new Error("callback cannot be null.");try{if(null==e||"string"!=typeof e.valueOf())throw new Error("nextPageLink cannot be null or undefined and it must be of type string.");if(null!==this.client.acceptLanguage&&void 0!==this.client.acceptLanguage&&"string"!=typeof this.client.acceptLanguage.valueOf())throw new Error("this.client.acceptLanguage must be of type string.")}catch(e){return r(e)}let a="{nextLink}";a=a.replace("{nextLink}",e);let c=new o;if(c.method="GET",c.headers={},c.url=a,this.client.generateClientRequestId&&(c.headers["x-ms-client-request-id"]=i.generateUuid()),void 0!==this.client.acceptLanguage&&null!==this.client.acceptLanguage&&(c.headers["accept-language"]=this.client.acceptLanguage),t)for(let e in t.customHeaders)t.customHeaders.hasOwnProperty(e)&&(c.headers[e]=t.customHeaders[e]);return c.headers["Content-Type"]="application/json; charset=utf-8",c.body=null,s.pipeline(c,(e,t,i)=>{if(e)return r(e);let o=t.statusCode;if(200!==o){let e,o=new Error(i);o.statusCode=t.statusCode,o.request=n.stripRequest(c),o.response=n.stripResponse(t),""===i&&(i=null);try{if((e=JSON.parse(i))&&(e.error&&(e=e.error),e.code&&(o.code=e.code),e.message&&(o.message=e.message)),null!=e){let t=(new s.models.CloudError).mapper();o.body=s.deserialize(t,e,"error.body")}}catch(e){return o.message=`Error "${e.message}" occurred in deserializing the responseBody `+`- "${i}" for the default response.`,r(o)}return r(o)}let a=null;if(""===i&&(i=null),200===o){let e=null;try{if(e=JSON.parse(i),a=JSON.parse(i),null!=e){let t=(new s.models.ManagementLockListResult).mapper();a=s.deserialize(t,e,"result")}}catch(e){let o=new Error(`Error ${e} occurred in deserializing the responseBody - ${i}`);return o.request=n.stripRequest(c),o.response=n.stripResponse(t),r(o)}}return r(null,a,c,t)})}e.exports=class ManagementLocks{constructor(e){this.client=e,this._createOrUpdateAtResourceGroupLevel=_createOrUpdateAtResourceGroupLevel,this._deleteAtResourceGroupLevel=_deleteAtResourceGroupLevel,this._getAtResourceGroupLevel=_getAtResourceGroupLevel,this._createOrUpdateByScope=_createOrUpdateByScope,this._deleteByScope=_deleteByScope,this._getByScope=_getByScope,this._createOrUpdateAtResourceLevel=_createOrUpdateAtResourceLevel,this._deleteAtResourceLevel=_deleteAtResourceLevel,this._getAtResourceLevel=_getAtResourceLevel,this._createOrUpdateAtSubscriptionLevel=_createOrUpdateAtSubscriptionLevel,this._deleteAtSubscriptionLevel=_deleteAtSubscriptionLevel,this._getAtSubscriptionLevel=_getAtSubscriptionLevel,this._listAtResourceGroupLevel=_listAtResourceGroupLevel,this._listAtResourceLevel=_listAtResourceLevel,this._listAtSubscriptionLevel=_listAtSubscriptionLevel,this._listAtResourceGroupLevelNext=_listAtResourceGroupLevelNext,this._listAtResourceLevelNext=_listAtResourceLevelNext,this._listAtSubscriptionLevelNext=_listAtSubscriptionLevelNext}createOrUpdateAtResourceGroupLevelWithHttpOperationResponse(e,t,r,i){this.client;let o=this;return new Promise((s,a)=>{o._createOrUpdateAtResourceGroupLevel(e,t,r,i,(e,t,r,i)=>{let o=new n.HttpOperationResponse(r,i);o.body=t,e?a(e):s(o)})})}createOrUpdateAtResourceGroupLevel(e,t,r,n,i){this.client;let o=this;return i||"function"!=typeof n||(i=n,n=null),i?o._createOrUpdateAtResourceGroupLevel(e,t,r,n,i):new Promise((i,s)=>{o._createOrUpdateAtResourceGroupLevel(e,t,r,n,(e,t,r,n)=>{e?s(e):i(t)})})}deleteAtResourceGroupLevelWithHttpOperationResponse(e,t,r){this.client;let i=this;return new Promise((o,s)=>{i._deleteAtResourceGroupLevel(e,t,r,(e,t,r,i)=>{let a=new n.HttpOperationResponse(r,i);a.body=t,e?s(e):o(a)})})}deleteAtResourceGroupLevel(e,t,r,n){this.client;let i=this;return n||"function"!=typeof r||(n=r,r=null),n?i._deleteAtResourceGroupLevel(e,t,r,n):new Promise((n,o)=>{i._deleteAtResourceGroupLevel(e,t,r,(e,t,r,i)=>{e?o(e):n(t)})})}getAtResourceGroupLevelWithHttpOperationResponse(e,t,r){this.client;let i=this;return new Promise((o,s)=>{i._getAtResourceGroupLevel(e,t,r,(e,t,r,i)=>{let a=new n.HttpOperationResponse(r,i);a.body=t,e?s(e):o(a)})})}getAtResourceGroupLevel(e,t,r,n){this.client;let i=this;return n||"function"!=typeof r||(n=r,r=null),n?i._getAtResourceGroupLevel(e,t,r,n):new Promise((n,o)=>{i._getAtResourceGroupLevel(e,t,r,(e,t,r,i)=>{e?o(e):n(t)})})}createOrUpdateByScopeWithHttpOperationResponse(e,t,r,i){this.client;let o=this;return new Promise((s,a)=>{o._createOrUpdateByScope(e,t,r,i,(e,t,r,i)=>{let o=new n.HttpOperationResponse(r,i);o.body=t,e?a(e):s(o)})})}createOrUpdateByScope(e,t,r,n,i){this.client;let o=this;return i||"function"!=typeof n||(i=n,n=null),i?o._createOrUpdateByScope(e,t,r,n,i):new Promise((i,s)=>{o._createOrUpdateByScope(e,t,r,n,(e,t,r,n)=>{e?s(e):i(t)})})}deleteByScopeWithHttpOperationResponse(e,t,r){this.client;let i=this;return new Promise((o,s)=>{i._deleteByScope(e,t,r,(e,t,r,i)=>{let a=new n.HttpOperationResponse(r,i);a.body=t,e?s(e):o(a)})})}deleteByScope(e,t,r,n){this.client;let i=this;return n||"function"!=typeof r||(n=r,r=null),n?i._deleteByScope(e,t,r,n):new Promise((n,o)=>{i._deleteByScope(e,t,r,(e,t,r,i)=>{e?o(e):n(t)})})}getByScopeWithHttpOperationResponse(e,t,r){this.client;let i=this;return new Promise((o,s)=>{i._getByScope(e,t,r,(e,t,r,i)=>{let a=new n.HttpOperationResponse(r,i);a.body=t,e?s(e):o(a)})})}getByScope(e,t,r,n){this.client;let i=this;return n||"function"!=typeof r||(n=r,r=null),n?i._getByScope(e,t,r,n):new Promise((n,o)=>{i._getByScope(e,t,r,(e,t,r,i)=>{e?o(e):n(t)})})}createOrUpdateAtResourceLevelWithHttpOperationResponse(e,t,r,i,o,s,a,c){this.client;let u=this;return new Promise((l,p)=>{u._createOrUpdateAtResourceLevel(e,t,r,i,o,s,a,c,(e,t,r,i)=>{let o=new n.HttpOperationResponse(r,i);o.body=t,e?p(e):l(o)})})}createOrUpdateAtResourceLevel(e,t,r,n,i,o,s,a,c){this.client;let u=this;return c||"function"!=typeof a||(c=a,a=null),c?u._createOrUpdateAtResourceLevel(e,t,r,n,i,o,s,a,c):new Promise((c,l)=>{u._createOrUpdateAtResourceLevel(e,t,r,n,i,o,s,a,(e,t,r,n)=>{e?l(e):c(t)})})}deleteAtResourceLevelWithHttpOperationResponse(e,t,r,i,o,s,a){this.client;let c=this;return new Promise((u,l)=>{c._deleteAtResourceLevel(e,t,r,i,o,s,a,(e,t,r,i)=>{let o=new n.HttpOperationResponse(r,i);o.body=t,e?l(e):u(o)})})}deleteAtResourceLevel(e,t,r,n,i,o,s,a){this.client;let c=this;return a||"function"!=typeof s||(a=s,s=null),a?c._deleteAtResourceLevel(e,t,r,n,i,o,s,a):new Promise((a,u)=>{c._deleteAtResourceLevel(e,t,r,n,i,o,s,(e,t,r,n)=>{e?u(e):a(t)})})}getAtResourceLevelWithHttpOperationResponse(e,t,r,i,o,s,a){this.client;let c=this;return new Promise((u,l)=>{c._getAtResourceLevel(e,t,r,i,o,s,a,(e,t,r,i)=>{let o=new n.HttpOperationResponse(r,i);o.body=t,e?l(e):u(o)})})}getAtResourceLevel(e,t,r,n,i,o,s,a){this.client;let c=this;return a||"function"!=typeof s||(a=s,s=null),a?c._getAtResourceLevel(e,t,r,n,i,o,s,a):new Promise((a,u)=>{c._getAtResourceLevel(e,t,r,n,i,o,s,(e,t,r,n)=>{e?u(e):a(t)})})}createOrUpdateAtSubscriptionLevelWithHttpOperationResponse(e,t,r){this.client;let i=this;return new Promise((o,s)=>{i._createOrUpdateAtSubscriptionLevel(e,t,r,(e,t,r,i)=>{let a=new n.HttpOperationResponse(r,i);a.body=t,e?s(e):o(a)})})}createOrUpdateAtSubscriptionLevel(e,t,r,n){this.client;let i=this;return n||"function"!=typeof r||(n=r,r=null),n?i._createOrUpdateAtSubscriptionLevel(e,t,r,n):new Promise((n,o)=>{i._createOrUpdateAtSubscriptionLevel(e,t,r,(e,t,r,i)=>{e?o(e):n(t)})})}deleteAtSubscriptionLevelWithHttpOperationResponse(e,t){this.client;let r=this;return new Promise((i,o)=>{r._deleteAtSubscriptionLevel(e,t,(e,t,r,s)=>{let a=new n.HttpOperationResponse(r,s);a.body=t,e?o(e):i(a)})})}deleteAtSubscriptionLevel(e,t,r){this.client;let n=this;return r||"function"!=typeof t||(r=t,t=null),r?n._deleteAtSubscriptionLevel(e,t,r):new Promise((r,i)=>{n._deleteAtSubscriptionLevel(e,t,(e,t,n,o)=>{e?i(e):r(t)})})}getAtSubscriptionLevelWithHttpOperationResponse(e,t){this.client;let r=this;return new Promise((i,o)=>{r._getAtSubscriptionLevel(e,t,(e,t,r,s)=>{let a=new n.HttpOperationResponse(r,s);a.body=t,e?o(e):i(a)})})}getAtSubscriptionLevel(e,t,r){this.client;let n=this;return r||"function"!=typeof t||(r=t,t=null),r?n._getAtSubscriptionLevel(e,t,r):new Promise((r,i)=>{n._getAtSubscriptionLevel(e,t,(e,t,n,o)=>{e?i(e):r(t)})})}listAtResourceGroupLevelWithHttpOperationResponse(e,t){this.client;let r=this;return new Promise((i,o)=>{r._listAtResourceGroupLevel(e,t,(e,t,r,s)=>{let a=new n.HttpOperationResponse(r,s);a.body=t,e?o(e):i(a)})})}listAtResourceGroupLevel(e,t,r){this.client;let n=this;return r||"function"!=typeof t||(r=t,t=null),r?n._listAtResourceGroupLevel(e,t,r):new Promise((r,i)=>{n._listAtResourceGroupLevel(e,t,(e,t,n,o)=>{e?i(e):r(t)})})}listAtResourceLevelWithHttpOperationResponse(e,t,r,i,o,s){this.client;let a=this;return new Promise((c,u)=>{a._listAtResourceLevel(e,t,r,i,o,s,(e,t,r,i)=>{let o=new n.HttpOperationResponse(r,i);o.body=t,e?u(e):c(o)})})}listAtResourceLevel(e,t,r,n,i,o,s){this.client;let a=this;return s||"function"!=typeof o||(s=o,o=null),s?a._listAtResourceLevel(e,t,r,n,i,o,s):new Promise((s,c)=>{a._listAtResourceLevel(e,t,r,n,i,o,(e,t,r,n)=>{e?c(e):s(t)})})}listAtSubscriptionLevelWithHttpOperationResponse(e){this.client;let t=this;return new Promise((r,i)=>{t._listAtSubscriptionLevel(e,(e,t,o,s)=>{let a=new n.HttpOperationResponse(o,s);a.body=t,e?i(e):r(a)})})}listAtSubscriptionLevel(e,t){this.client;let r=this;return t||"function"!=typeof e||(t=e,e=null),t?r._listAtSubscriptionLevel(e,t):new Promise((t,n)=>{r._listAtSubscriptionLevel(e,(e,r,i,o)=>{e?n(e):t(r)})})}listAtResourceGroupLevelNextWithHttpOperationResponse(e,t){this.client;let r=this;return new Promise((i,o)=>{r._listAtResourceGroupLevelNext(e,t,(e,t,r,s)=>{let a=new n.HttpOperationResponse(r,s);a.body=t,e?o(e):i(a)})})}listAtResourceGroupLevelNext(e,t,r){this.client;let n=this;return r||"function"!=typeof t||(r=t,t=null),r?n._listAtResourceGroupLevelNext(e,t,r):new Promise((r,i)=>{n._listAtResourceGroupLevelNext(e,t,(e,t,n,o)=>{e?i(e):r(t)})})}listAtResourceLevelNextWithHttpOperationResponse(e,t){this.client;let r=this;return new Promise((i,o)=>{r._listAtResourceLevelNext(e,t,(e,t,r,s)=>{let a=new n.HttpOperationResponse(r,s);a.body=t,e?o(e):i(a)})})}listAtResourceLevelNext(e,t,r){this.client;let n=this;return r||"function"!=typeof t||(r=t,t=null),r?n._listAtResourceLevelNext(e,t,r):new Promise((r,i)=>{n._listAtResourceLevelNext(e,t,(e,t,n,o)=>{e?i(e):r(t)})})}listAtSubscriptionLevelNextWithHttpOperationResponse(e,t){this.client;let r=this;return new Promise((i,o)=>{r._listAtSubscriptionLevelNext(e,t,(e,t,r,s)=>{let a=new n.HttpOperationResponse(r,s);a.body=t,e?o(e):i(a)})})}listAtSubscriptionLevelNext(e,t,r){this.client;let n=this;return r||"function"!=typeof t||(r=t,t=null),r?n._listAtSubscriptionLevelNext(e,t,r):new Promise((r,i)=>{n._listAtSubscriptionLevelNext(e,t,(e,t,n,o)=>{e?i(e):r(t)})})}}},function(e,t,r){"use strict";const n=r(8),i=r(9).AzureServiceClient,o=r(480),s=r(1227);e.exports=class FeatureClient extends i{constructor(e,t,r,i){if(null==e)throw new Error("'credentials' cannot be null.");if(null==t)throw new Error("'subscriptionId' cannot be null.");i||(i={}),super(e,i),this.apiVersion="2015-12-01",this.acceptLanguage="en-US",this.longRunningOperationRetryTimeout=30,this.generateClientRequestId=!0,this.baseUri=r,this.baseUri||(this.baseUri="https://management.azure.com"),this.credentials=e,this.subscriptionId=t;let a=this.getPackageJsonInfo(__dirname);this.addUserAgentInfo(`${a.name}/${a.version}`),null!==i.apiVersion&&void 0!==i.apiVersion&&(this.apiVersion=i.apiVersion),null!==i.acceptLanguage&&void 0!==i.acceptLanguage&&(this.acceptLanguage=i.acceptLanguage),null!==i.longRunningOperationRetryTimeout&&void 0!==i.longRunningOperationRetryTimeout&&(this.longRunningOperationRetryTimeout=i.longRunningOperationRetryTimeout),null!==i.generateClientRequestId&&void 0!==i.generateClientRequestId&&(this.generateClientRequestId=i.generateClientRequestId),this.features=new s.Features(this),this.models=o,n.addSerializationMixin(this)}}},function(e,t,r){"use strict";e.exports=class FeatureProperties{constructor(){}mapper(){return{required:!1,serializedName:"FeatureProperties",type:{name:"Composite",className:"FeatureProperties",modelProperties:{state:{required:!1,serializedName:"state",type:{name:"String"}}}}}}}},function(e,t,r){"use strict";r(480);e.exports=class FeatureResult{constructor(){}mapper(){return{required:!1,serializedName:"FeatureResult",type:{name:"Composite",className:"FeatureResult",modelProperties:{name:{required:!1,serializedName:"name",type:{name:"String"}},properties:{required:!1,serializedName:"properties",type:{name:"Composite",className:"FeatureProperties"}},id:{required:!1,serializedName:"id",type:{name:"String"}},type:{required:!1,serializedName:"type",type:{name:"String"}}}}}}}},function(e,t,r){"use strict";t.Features=r(1228)},function(e,t,r){"use strict";const n=r(8),i=r(9),o=n.WebResource;function _listAll(e,t){let r=this.client;if(t||"function"!=typeof e||(t=e,e=null),!t)throw new Error("callback cannot be null.");try{if(null===this.client.apiVersion||void 0===this.client.apiVersion||"string"!=typeof this.client.apiVersion.valueOf())throw new Error("this.client.apiVersion cannot be null or undefined and it must be of type string.");if(null===this.client.subscriptionId||void 0===this.client.subscriptionId||"string"!=typeof this.client.subscriptionId.valueOf())throw new Error("this.client.subscriptionId cannot be null or undefined and it must be of type string.");if(null!==this.client.acceptLanguage&&void 0!==this.client.acceptLanguage&&"string"!=typeof this.client.acceptLanguage.valueOf())throw new Error("this.client.acceptLanguage must be of type string.")}catch(e){return t(e)}let s=this.client.baseUri,a=s+(s.endsWith("/")?"":"/")+"subscriptions/{subscriptionId}/providers/Microsoft.Features/features";a=a.replace("{subscriptionId}",encodeURIComponent(this.client.subscriptionId));let c=[];c.push("api-version="+encodeURIComponent(this.client.apiVersion)),c.length>0&&(a+="?"+c.join("&"));let u=new o;if(u.method="GET",u.headers={},u.url=a,this.client.generateClientRequestId&&(u.headers["x-ms-client-request-id"]=i.generateUuid()),void 0!==this.client.acceptLanguage&&null!==this.client.acceptLanguage&&(u.headers["accept-language"]=this.client.acceptLanguage),e)for(let t in e.customHeaders)e.customHeaders.hasOwnProperty(t)&&(u.headers[t]=e.customHeaders[t]);return u.headers["Content-Type"]="application/json; charset=utf-8",u.body=null,r.pipeline(u,(e,i,o)=>{if(e)return t(e);let s=i.statusCode;if(200!==s){let e,s=new Error(o);s.statusCode=i.statusCode,s.request=n.stripRequest(u),s.response=n.stripResponse(i),""===o&&(o=null);try{if((e=JSON.parse(o))&&(e.error&&(e=e.error),e.code&&(s.code=e.code),e.message&&(s.message=e.message)),null!=e){let t=(new r.models.CloudError).mapper();s.body=r.deserialize(t,e,"error.body")}}catch(e){return s.message=`Error "${e.message}" occurred in deserializing the responseBody `+`- "${o}" for the default response.`,t(s)}return t(s)}let a=null;if(""===o&&(o=null),200===s){let e=null;try{if(e=JSON.parse(o),a=JSON.parse(o),null!=e){let t=(new r.models.FeatureOperationsListResult).mapper();a=r.deserialize(t,e,"result")}}catch(e){let r=new Error(`Error ${e} occurred in deserializing the responseBody - ${o}`);return r.request=n.stripRequest(u),r.response=n.stripResponse(i),t(r)}}return t(null,a,u,i)})}function _list(e,t,r){let s=this.client;if(r||"function"!=typeof t||(r=t,t=null),!r)throw new Error("callback cannot be null.");try{if(null==e||"string"!=typeof e.valueOf())throw new Error("resourceProviderNamespace cannot be null or undefined and it must be of type string.");if(null===this.client.apiVersion||void 0===this.client.apiVersion||"string"!=typeof this.client.apiVersion.valueOf())throw new Error("this.client.apiVersion cannot be null or undefined and it must be of type string.");if(null===this.client.subscriptionId||void 0===this.client.subscriptionId||"string"!=typeof this.client.subscriptionId.valueOf())throw new Error("this.client.subscriptionId cannot be null or undefined and it must be of type string.");if(null!==this.client.acceptLanguage&&void 0!==this.client.acceptLanguage&&"string"!=typeof this.client.acceptLanguage.valueOf())throw new Error("this.client.acceptLanguage must be of type string.")}catch(e){return r(e)}let a=this.client.baseUri,c=a+(a.endsWith("/")?"":"/")+"subscriptions/{subscriptionId}/providers/Microsoft.Features/providers/{resourceProviderNamespace}/features";c=(c=c.replace("{resourceProviderNamespace}",encodeURIComponent(e))).replace("{subscriptionId}",encodeURIComponent(this.client.subscriptionId));let u=[];u.push("api-version="+encodeURIComponent(this.client.apiVersion)),u.length>0&&(c+="?"+u.join("&"));let l=new o;if(l.method="GET",l.headers={},l.url=c,this.client.generateClientRequestId&&(l.headers["x-ms-client-request-id"]=i.generateUuid()),void 0!==this.client.acceptLanguage&&null!==this.client.acceptLanguage&&(l.headers["accept-language"]=this.client.acceptLanguage),t)for(let e in t.customHeaders)t.customHeaders.hasOwnProperty(e)&&(l.headers[e]=t.customHeaders[e]);return l.headers["Content-Type"]="application/json; charset=utf-8",l.body=null,s.pipeline(l,(e,t,i)=>{if(e)return r(e);let o=t.statusCode;if(200!==o){let e,o=new Error(i);o.statusCode=t.statusCode,o.request=n.stripRequest(l),o.response=n.stripResponse(t),""===i&&(i=null);try{if((e=JSON.parse(i))&&(e.error&&(e=e.error),e.code&&(o.code=e.code),e.message&&(o.message=e.message)),null!=e){let t=(new s.models.CloudError).mapper();o.body=s.deserialize(t,e,"error.body")}}catch(e){return o.message=`Error "${e.message}" occurred in deserializing the responseBody `+`- "${i}" for the default response.`,r(o)}return r(o)}let a=null;if(""===i&&(i=null),200===o){let e=null;try{if(e=JSON.parse(i),a=JSON.parse(i),null!=e){let t=(new s.models.FeatureOperationsListResult).mapper();a=s.deserialize(t,e,"result")}}catch(e){let o=new Error(`Error ${e} occurred in deserializing the responseBody - ${i}`);return o.request=n.stripRequest(l),o.response=n.stripResponse(t),r(o)}}return r(null,a,l,t)})}function _get(e,t,r,s){let a=this.client;if(s||"function"!=typeof r||(s=r,r=null),!s)throw new Error("callback cannot be null.");try{if(null==e||"string"!=typeof e.valueOf())throw new Error("resourceProviderNamespace cannot be null or undefined and it must be of type string.");if(null==t||"string"!=typeof t.valueOf())throw new Error("featureName cannot be null or undefined and it must be of type string.");if(null===this.client.apiVersion||void 0===this.client.apiVersion||"string"!=typeof this.client.apiVersion.valueOf())throw new Error("this.client.apiVersion cannot be null or undefined and it must be of type string.");if(null===this.client.subscriptionId||void 0===this.client.subscriptionId||"string"!=typeof this.client.subscriptionId.valueOf())throw new Error("this.client.subscriptionId cannot be null or undefined and it must be of type string.");if(null!==this.client.acceptLanguage&&void 0!==this.client.acceptLanguage&&"string"!=typeof this.client.acceptLanguage.valueOf())throw new Error("this.client.acceptLanguage must be of type string.")}catch(e){return s(e)}let c=this.client.baseUri,u=c+(c.endsWith("/")?"":"/")+"subscriptions/{subscriptionId}/providers/Microsoft.Features/providers/{resourceProviderNamespace}/features/{featureName}";u=(u=(u=u.replace("{resourceProviderNamespace}",encodeURIComponent(e))).replace("{featureName}",encodeURIComponent(t))).replace("{subscriptionId}",encodeURIComponent(this.client.subscriptionId));let l=[];l.push("api-version="+encodeURIComponent(this.client.apiVersion)),l.length>0&&(u+="?"+l.join("&"));let p=new o;if(p.method="GET",p.headers={},p.url=u,this.client.generateClientRequestId&&(p.headers["x-ms-client-request-id"]=i.generateUuid()),void 0!==this.client.acceptLanguage&&null!==this.client.acceptLanguage&&(p.headers["accept-language"]=this.client.acceptLanguage),r)for(let e in r.customHeaders)r.customHeaders.hasOwnProperty(e)&&(p.headers[e]=r.customHeaders[e]);return p.headers["Content-Type"]="application/json; charset=utf-8",p.body=null,a.pipeline(p,(e,t,r)=>{if(e)return s(e);let i=t.statusCode;if(200!==i){let e,i=new Error(r);i.statusCode=t.statusCode,i.request=n.stripRequest(p),i.response=n.stripResponse(t),""===r&&(r=null);try{if((e=JSON.parse(r))&&(e.error&&(e=e.error),e.code&&(i.code=e.code),e.message&&(i.message=e.message)),null!=e){let t=(new a.models.CloudError).mapper();i.body=a.deserialize(t,e,"error.body")}}catch(e){return i.message=`Error "${e.message}" occurred in deserializing the responseBody `+`- "${r}" for the default response.`,s(i)}return s(i)}let o=null;if(""===r&&(r=null),200===i){let e=null;try{if(e=JSON.parse(r),o=JSON.parse(r),null!=e){let t=(new a.models.FeatureResult).mapper();o=a.deserialize(t,e,"result")}}catch(e){let i=new Error(`Error ${e} occurred in deserializing the responseBody - ${r}`);return i.request=n.stripRequest(p),i.response=n.stripResponse(t),s(i)}}return s(null,o,p,t)})}function _register(e,t,r,s){let a=this.client;if(s||"function"!=typeof r||(s=r,r=null),!s)throw new Error("callback cannot be null.");try{if(null==e||"string"!=typeof e.valueOf())throw new Error("resourceProviderNamespace cannot be null or undefined and it must be of type string.");if(null==t||"string"!=typeof t.valueOf())throw new Error("featureName cannot be null or undefined and it must be of type string.");if(null===this.client.apiVersion||void 0===this.client.apiVersion||"string"!=typeof this.client.apiVersion.valueOf())throw new Error("this.client.apiVersion cannot be null or undefined and it must be of type string.");if(null===this.client.subscriptionId||void 0===this.client.subscriptionId||"string"!=typeof this.client.subscriptionId.valueOf())throw new Error("this.client.subscriptionId cannot be null or undefined and it must be of type string.");if(null!==this.client.acceptLanguage&&void 0!==this.client.acceptLanguage&&"string"!=typeof this.client.acceptLanguage.valueOf())throw new Error("this.client.acceptLanguage must be of type string.")}catch(e){return s(e)}let c=this.client.baseUri,u=c+(c.endsWith("/")?"":"/")+"subscriptions/{subscriptionId}/providers/Microsoft.Features/providers/{resourceProviderNamespace}/features/{featureName}/register";u=(u=(u=u.replace("{resourceProviderNamespace}",encodeURIComponent(e))).replace("{featureName}",encodeURIComponent(t))).replace("{subscriptionId}",encodeURIComponent(this.client.subscriptionId));let l=[];l.push("api-version="+encodeURIComponent(this.client.apiVersion)),l.length>0&&(u+="?"+l.join("&"));let p=new o;if(p.method="POST",p.headers={},p.url=u,this.client.generateClientRequestId&&(p.headers["x-ms-client-request-id"]=i.generateUuid()),void 0!==this.client.acceptLanguage&&null!==this.client.acceptLanguage&&(p.headers["accept-language"]=this.client.acceptLanguage),r)for(let e in r.customHeaders)r.customHeaders.hasOwnProperty(e)&&(p.headers[e]=r.customHeaders[e]);return p.headers["Content-Type"]="application/json; charset=utf-8",p.body=null,a.pipeline(p,(e,t,r)=>{if(e)return s(e);let i=t.statusCode;if(200!==i){let e,i=new Error(r);i.statusCode=t.statusCode,i.request=n.stripRequest(p),i.response=n.stripResponse(t),""===r&&(r=null);try{if((e=JSON.parse(r))&&(e.error&&(e=e.error),e.code&&(i.code=e.code),e.message&&(i.message=e.message)),null!=e){let t=(new a.models.CloudError).mapper();i.body=a.deserialize(t,e,"error.body")}}catch(e){return i.message=`Error "${e.message}" occurred in deserializing the responseBody `+`- "${r}" for the default response.`,s(i)}return s(i)}let o=null;if(""===r&&(r=null),200===i){let e=null;try{if(e=JSON.parse(r),o=JSON.parse(r),null!=e){let t=(new a.models.FeatureResult).mapper();o=a.deserialize(t,e,"result")}}catch(e){let i=new Error(`Error ${e} occurred in deserializing the responseBody - ${r}`);return i.request=n.stripRequest(p),i.response=n.stripResponse(t),s(i)}}return s(null,o,p,t)})}function _listAllNext(e,t,r){let s=this.client;if(r||"function"!=typeof t||(r=t,t=null),!r)throw new Error("callback cannot be null.");try{if(null==e||"string"!=typeof e.valueOf())throw new Error("nextPageLink cannot be null or undefined and it must be of type string.");if(null!==this.client.acceptLanguage&&void 0!==this.client.acceptLanguage&&"string"!=typeof this.client.acceptLanguage.valueOf())throw new Error("this.client.acceptLanguage must be of type string.")}catch(e){return r(e)}let a="{nextLink}";a=a.replace("{nextLink}",e);let c=new o;if(c.method="GET",c.headers={},c.url=a,this.client.generateClientRequestId&&(c.headers["x-ms-client-request-id"]=i.generateUuid()),void 0!==this.client.acceptLanguage&&null!==this.client.acceptLanguage&&(c.headers["accept-language"]=this.client.acceptLanguage),t)for(let e in t.customHeaders)t.customHeaders.hasOwnProperty(e)&&(c.headers[e]=t.customHeaders[e]);return c.headers["Content-Type"]="application/json; charset=utf-8",c.body=null,s.pipeline(c,(e,t,i)=>{if(e)return r(e);let o=t.statusCode;if(200!==o){let e,o=new Error(i);o.statusCode=t.statusCode,o.request=n.stripRequest(c),o.response=n.stripResponse(t),""===i&&(i=null);try{if((e=JSON.parse(i))&&(e.error&&(e=e.error),e.code&&(o.code=e.code),e.message&&(o.message=e.message)),null!=e){let t=(new s.models.CloudError).mapper();o.body=s.deserialize(t,e,"error.body")}}catch(e){return o.message=`Error "${e.message}" occurred in deserializing the responseBody `+`- "${i}" for the default response.`,r(o)}return r(o)}let a=null;if(""===i&&(i=null),200===o){let e=null;try{if(e=JSON.parse(i),a=JSON.parse(i),null!=e){let t=(new s.models.FeatureOperationsListResult).mapper();a=s.deserialize(t,e,"result")}}catch(e){let o=new Error(`Error ${e} occurred in deserializing the responseBody - ${i}`);return o.request=n.stripRequest(c),o.response=n.stripResponse(t),r(o)}}return r(null,a,c,t)})}function _listNext(e,t,r){let s=this.client;if(r||"function"!=typeof t||(r=t,t=null),!r)throw new Error("callback cannot be null.");try{if(null==e||"string"!=typeof e.valueOf())throw new Error("nextPageLink cannot be null or undefined and it must be of type string.");if(null!==this.client.acceptLanguage&&void 0!==this.client.acceptLanguage&&"string"!=typeof this.client.acceptLanguage.valueOf())throw new Error("this.client.acceptLanguage must be of type string.")}catch(e){return r(e)}let a="{nextLink}";a=a.replace("{nextLink}",e);let c=new o;if(c.method="GET",c.headers={},c.url=a,this.client.generateClientRequestId&&(c.headers["x-ms-client-request-id"]=i.generateUuid()),void 0!==this.client.acceptLanguage&&null!==this.client.acceptLanguage&&(c.headers["accept-language"]=this.client.acceptLanguage),t)for(let e in t.customHeaders)t.customHeaders.hasOwnProperty(e)&&(c.headers[e]=t.customHeaders[e]);return c.headers["Content-Type"]="application/json; charset=utf-8",c.body=null,s.pipeline(c,(e,t,i)=>{if(e)return r(e);let o=t.statusCode;if(200!==o){let e,o=new Error(i);o.statusCode=t.statusCode,o.request=n.stripRequest(c),o.response=n.stripResponse(t),""===i&&(i=null);try{if((e=JSON.parse(i))&&(e.error&&(e=e.error),e.code&&(o.code=e.code),e.message&&(o.message=e.message)),null!=e){let t=(new s.models.CloudError).mapper();o.body=s.deserialize(t,e,"error.body")}}catch(e){return o.message=`Error "${e.message}" occurred in deserializing the responseBody `+`- "${i}" for the default response.`,r(o)}return r(o)}let a=null;if(""===i&&(i=null),200===o){let e=null;try{if(e=JSON.parse(i),a=JSON.parse(i),null!=e){let t=(new s.models.FeatureOperationsListResult).mapper();a=s.deserialize(t,e,"result")}}catch(e){let o=new Error(`Error ${e} occurred in deserializing the responseBody - ${i}`);return o.request=n.stripRequest(c),o.response=n.stripResponse(t),r(o)}}return r(null,a,c,t)})}e.exports=class Features{constructor(e){this.client=e,this._listAll=_listAll,this._list=_list,this._get=_get,this._register=_register,this._listAllNext=_listAllNext,this._listNext=_listNext}listAllWithHttpOperationResponse(e){this.client;let t=this;return new Promise((r,i)=>{t._listAll(e,(e,t,o,s)=>{let a=new n.HttpOperationResponse(o,s);a.body=t,e?i(e):r(a)})})}listAll(e,t){this.client;let r=this;return t||"function"!=typeof e||(t=e,e=null),t?r._listAll(e,t):new Promise((t,n)=>{r._listAll(e,(e,r,i,o)=>{e?n(e):t(r)})})}listWithHttpOperationResponse(e,t){this.client;let r=this;return new Promise((i,o)=>{r._list(e,t,(e,t,r,s)=>{let a=new n.HttpOperationResponse(r,s);a.body=t,e?o(e):i(a)})})}list(e,t,r){this.client;let n=this;return r||"function"!=typeof t||(r=t,t=null),r?n._list(e,t,r):new Promise((r,i)=>{n._list(e,t,(e,t,n,o)=>{e?i(e):r(t)})})}getWithHttpOperationResponse(e,t,r){this.client;let i=this;return new Promise((o,s)=>{i._get(e,t,r,(e,t,r,i)=>{let a=new n.HttpOperationResponse(r,i);a.body=t,e?s(e):o(a)})})}get(e,t,r,n){this.client;let i=this;return n||"function"!=typeof r||(n=r,r=null),n?i._get(e,t,r,n):new Promise((n,o)=>{i._get(e,t,r,(e,t,r,i)=>{e?o(e):n(t)})})}registerWithHttpOperationResponse(e,t,r){this.client;let i=this;return new Promise((o,s)=>{i._register(e,t,r,(e,t,r,i)=>{let a=new n.HttpOperationResponse(r,i);a.body=t,e?s(e):o(a)})})}register(e,t,r,n){this.client;let i=this;return n||"function"!=typeof r||(n=r,r=null),n?i._register(e,t,r,n):new Promise((n,o)=>{i._register(e,t,r,(e,t,r,i)=>{e?o(e):n(t)})})}listAllNextWithHttpOperationResponse(e,t){this.client;let r=this;return new Promise((i,o)=>{r._listAllNext(e,t,(e,t,r,s)=>{let a=new n.HttpOperationResponse(r,s);a.body=t,e?o(e):i(a)})})}listAllNext(e,t,r){this.client;let n=this;return r||"function"!=typeof t||(r=t,t=null),r?n._listAllNext(e,t,r):new Promise((r,i)=>{n._listAllNext(e,t,(e,t,n,o)=>{e?i(e):r(t)})})}listNextWithHttpOperationResponse(e,t){this.client;let r=this;return new Promise((i,o)=>{r._listNext(e,t,(e,t,r,s)=>{let a=new n.HttpOperationResponse(r,s);a.body=t,e?o(e):i(a)})})}listNext(e,t,r){this.client;let n=this;return r||"function"!=typeof t||(r=t,t=null),r?n._listNext(e,t,r):new Promise((r,i)=>{n._listNext(e,t,(e,t,n,o)=>{e?i(e):r(t)})})}}},function(e,t,r){"use strict";const n=r(8),i=r(9).AzureServiceClient,o=r(482),s=r(1234);e.exports=class SubscriptionClient extends i{constructor(e,t,r){if(null==e)throw new Error("'credentials' cannot be null.");r||(r={}),super(e,r),this.apiVersion="2016-06-01",this.acceptLanguage="en-US",this.longRunningOperationRetryTimeout=30,this.generateClientRequestId=!0,this.baseUri=t,this.baseUri||(this.baseUri="https://management.azure.com"),this.credentials=e;let i=this.getPackageJsonInfo(__dirname);this.addUserAgentInfo(`${i.name}/${i.version}`),null!==r.apiVersion&&void 0!==r.apiVersion&&(this.apiVersion=r.apiVersion),null!==r.acceptLanguage&&void 0!==r.acceptLanguage&&(this.acceptLanguage=r.acceptLanguage),null!==r.longRunningOperationRetryTimeout&&void 0!==r.longRunningOperationRetryTimeout&&(this.longRunningOperationRetryTimeout=r.longRunningOperationRetryTimeout),null!==r.generateClientRequestId&&void 0!==r.generateClientRequestId&&(this.generateClientRequestId=r.generateClientRequestId),this.subscriptions=new s.Subscriptions(this),this.tenants=new s.Tenants(this),this.models=o,n.addSerializationMixin(this)}}},function(e,t,r){"use strict";e.exports=class Location{constructor(){}mapper(){return{required:!1,serializedName:"Location",type:{name:"Composite",className:"Location",modelProperties:{id:{required:!1,readOnly:!0,serializedName:"id",type:{name:"String"}},subscriptionId:{required:!1,readOnly:!0,serializedName:"subscriptionId",type:{name:"String"}},name:{required:!1,readOnly:!0,serializedName:"name",type:{name:"String"}},displayName:{required:!1,readOnly:!0,serializedName:"displayName",type:{name:"String"}},latitude:{required:!1,readOnly:!0,serializedName:"latitude",type:{name:"String"}},longitude:{required:!1,readOnly:!0,serializedName:"longitude",type:{name:"String"}}}}}}}},function(e,t,r){"use strict";e.exports=class SubscriptionPolicies{constructor(){}mapper(){return{required:!1,serializedName:"SubscriptionPolicies",type:{name:"Composite",className:"SubscriptionPolicies",modelProperties:{locationPlacementId:{required:!1,readOnly:!0,serializedName:"locationPlacementId",type:{name:"String"}},quotaId:{required:!1,readOnly:!0,serializedName:"quotaId",type:{name:"String"}},spendingLimit:{required:!1,readOnly:!0,serializedName:"spendingLimit",type:{name:"Enum",allowedValues:["On","Off","CurrentPeriodOff"]}}}}}}}},function(e,t,r){"use strict";r(482);e.exports=class Subscription{constructor(){}mapper(){return{required:!1,serializedName:"Subscription",type:{name:"Composite",className:"Subscription",modelProperties:{id:{required:!1,readOnly:!0,serializedName:"id",type:{name:"String"}},subscriptionId:{required:!1,readOnly:!0,serializedName:"subscriptionId",type:{name:"String"}},tenantId:{required:!1,readOnly:!0,serializedName:"tenantId",type:{name:"String"}},displayName:{required:!1,readOnly:!0,serializedName:"displayName",type:{name:"String"}},state:{required:!1,readOnly:!0,serializedName:"state",type:{name:"Enum",allowedValues:["Enabled","Warned","PastDue","Disabled","Deleted"]}},subscriptionPolicies:{required:!1,serializedName:"subscriptionPolicies",type:{name:"Composite",className:"SubscriptionPolicies"}},authorizationSource:{required:!1,serializedName:"authorizationSource",type:{name:"String"}}}}}}}},function(e,t,r){"use strict";e.exports=class TenantIdDescription{constructor(){}mapper(){return{required:!1,serializedName:"TenantIdDescription",type:{name:"Composite",className:"TenantIdDescription",modelProperties:{id:{required:!1,readOnly:!0,serializedName:"id",type:{name:"String"}},tenantId:{required:!1,readOnly:!0,serializedName:"tenantId",type:{name:"String"}}}}}}}},function(e,t,r){"use strict";t.Subscriptions=r(1235),t.Tenants=r(1236)},function(e,t,r){"use strict";const n=r(8),i=r(9),o=n.WebResource;function _listLocations(e,t,r){let s=this.client;if(r||"function"!=typeof t||(r=t,t=null),!r)throw new Error("callback cannot be null.");try{if(null==e||"string"!=typeof e.valueOf())throw new Error("subscriptionId cannot be null or undefined and it must be of type string.");if(null===this.client.apiVersion||void 0===this.client.apiVersion||"string"!=typeof this.client.apiVersion.valueOf())throw new Error("this.client.apiVersion cannot be null or undefined and it must be of type string.");if(null!==this.client.acceptLanguage&&void 0!==this.client.acceptLanguage&&"string"!=typeof this.client.acceptLanguage.valueOf())throw new Error("this.client.acceptLanguage must be of type string.")}catch(e){return r(e)}let a=this.client.baseUri,c=a+(a.endsWith("/")?"":"/")+"subscriptions/{subscriptionId}/locations";c=c.replace("{subscriptionId}",encodeURIComponent(e));let u=[];u.push("api-version="+encodeURIComponent(this.client.apiVersion)),u.length>0&&(c+="?"+u.join("&"));let l=new o;if(l.method="GET",l.headers={},l.url=c,this.client.generateClientRequestId&&(l.headers["x-ms-client-request-id"]=i.generateUuid()),void 0!==this.client.acceptLanguage&&null!==this.client.acceptLanguage&&(l.headers["accept-language"]=this.client.acceptLanguage),t)for(let e in t.customHeaders)t.customHeaders.hasOwnProperty(e)&&(l.headers[e]=t.customHeaders[e]);return l.headers["Content-Type"]="application/json; charset=utf-8",l.body=null,s.pipeline(l,(e,t,i)=>{if(e)return r(e);let o=t.statusCode;if(200!==o){let e,o=new Error(i);o.statusCode=t.statusCode,o.request=n.stripRequest(l),o.response=n.stripResponse(t),""===i&&(i=null);try{if((e=JSON.parse(i))&&(e.error&&(e=e.error),e.code&&(o.code=e.code),e.message&&(o.message=e.message)),null!=e){let t=(new s.models.CloudError).mapper();o.body=s.deserialize(t,e,"error.body")}}catch(e){return o.message=`Error "${e.message}" occurred in deserializing the responseBody `+`- "${i}" for the default response.`,r(o)}return r(o)}let a=null;if(""===i&&(i=null),200===o){let e=null;try{if(e=JSON.parse(i),a=JSON.parse(i),null!=e){let t=(new s.models.LocationListResult).mapper();a=s.deserialize(t,e,"result")}}catch(e){let o=new Error(`Error ${e} occurred in deserializing the responseBody - ${i}`);return o.request=n.stripRequest(l),o.response=n.stripResponse(t),r(o)}}return r(null,a,l,t)})}function _get(e,t,r){let s=this.client;if(r||"function"!=typeof t||(r=t,t=null),!r)throw new Error("callback cannot be null.");try{if(null==e||"string"!=typeof e.valueOf())throw new Error("subscriptionId cannot be null or undefined and it must be of type string.");if(null===this.client.apiVersion||void 0===this.client.apiVersion||"string"!=typeof this.client.apiVersion.valueOf())throw new Error("this.client.apiVersion cannot be null or undefined and it must be of type string.");if(null!==this.client.acceptLanguage&&void 0!==this.client.acceptLanguage&&"string"!=typeof this.client.acceptLanguage.valueOf())throw new Error("this.client.acceptLanguage must be of type string.")}catch(e){return r(e)}let a=this.client.baseUri,c=a+(a.endsWith("/")?"":"/")+"subscriptions/{subscriptionId}";c=c.replace("{subscriptionId}",encodeURIComponent(e));let u=[];u.push("api-version="+encodeURIComponent(this.client.apiVersion)),u.length>0&&(c+="?"+u.join("&"));let l=new o;if(l.method="GET",l.headers={},l.url=c,this.client.generateClientRequestId&&(l.headers["x-ms-client-request-id"]=i.generateUuid()),void 0!==this.client.acceptLanguage&&null!==this.client.acceptLanguage&&(l.headers["accept-language"]=this.client.acceptLanguage),t)for(let e in t.customHeaders)t.customHeaders.hasOwnProperty(e)&&(l.headers[e]=t.customHeaders[e]);return l.headers["Content-Type"]="application/json; charset=utf-8",l.body=null,s.pipeline(l,(e,t,i)=>{if(e)return r(e);let o=t.statusCode;if(200!==o){let e,o=new Error(i);o.statusCode=t.statusCode,o.request=n.stripRequest(l),o.response=n.stripResponse(t),""===i&&(i=null);try{if((e=JSON.parse(i))&&(e.error&&(e=e.error),e.code&&(o.code=e.code),e.message&&(o.message=e.message)),null!=e){let t=(new s.models.CloudError).mapper();o.body=s.deserialize(t,e,"error.body")}}catch(e){return o.message=`Error "${e.message}" occurred in deserializing the responseBody `+`- "${i}" for the default response.`,r(o)}return r(o)}let a=null;if(""===i&&(i=null),200===o){let e=null;try{if(e=JSON.parse(i),a=JSON.parse(i),null!=e){let t=(new s.models.Subscription).mapper();a=s.deserialize(t,e,"result")}}catch(e){let o=new Error(`Error ${e} occurred in deserializing the responseBody - ${i}`);return o.request=n.stripRequest(l),o.response=n.stripResponse(t),r(o)}}return r(null,a,l,t)})}function _list(e,t){let r=this.client;if(t||"function"!=typeof e||(t=e,e=null),!t)throw new Error("callback cannot be null.");try{if(null===this.client.apiVersion||void 0===this.client.apiVersion||"string"!=typeof this.client.apiVersion.valueOf())throw new Error("this.client.apiVersion cannot be null or undefined and it must be of type string.");if(null!==this.client.acceptLanguage&&void 0!==this.client.acceptLanguage&&"string"!=typeof this.client.acceptLanguage.valueOf())throw new Error("this.client.acceptLanguage must be of type string.")}catch(e){return t(e)}let s=this.client.baseUri,a=s+(s.endsWith("/")?"":"/")+"subscriptions",c=[];c.push("api-version="+encodeURIComponent(this.client.apiVersion)),c.length>0&&(a+="?"+c.join("&"));let u=new o;if(u.method="GET",u.headers={},u.url=a,this.client.generateClientRequestId&&(u.headers["x-ms-client-request-id"]=i.generateUuid()),void 0!==this.client.acceptLanguage&&null!==this.client.acceptLanguage&&(u.headers["accept-language"]=this.client.acceptLanguage),e)for(let t in e.customHeaders)e.customHeaders.hasOwnProperty(t)&&(u.headers[t]=e.customHeaders[t]);return u.headers["Content-Type"]="application/json; charset=utf-8",u.body=null,r.pipeline(u,(e,i,o)=>{if(e)return t(e);let s=i.statusCode;if(200!==s){let e,s=new Error(o);s.statusCode=i.statusCode,s.request=n.stripRequest(u),s.response=n.stripResponse(i),""===o&&(o=null);try{if((e=JSON.parse(o))&&(e.error&&(e=e.error),e.code&&(s.code=e.code),e.message&&(s.message=e.message)),null!=e){let t=(new r.models.CloudError).mapper();s.body=r.deserialize(t,e,"error.body")}}catch(e){return s.message=`Error "${e.message}" occurred in deserializing the responseBody `+`- "${o}" for the default response.`,t(s)}return t(s)}let a=null;if(""===o&&(o=null),200===s){let e=null;try{if(e=JSON.parse(o),a=JSON.parse(o),null!=e){let t=(new r.models.SubscriptionListResult).mapper();a=r.deserialize(t,e,"result")}}catch(e){let r=new Error(`Error ${e} occurred in deserializing the responseBody - ${o}`);return r.request=n.stripRequest(u),r.response=n.stripResponse(i),t(r)}}return t(null,a,u,i)})}function _listNext(e,t,r){let s=this.client;if(r||"function"!=typeof t||(r=t,t=null),!r)throw new Error("callback cannot be null.");try{if(null==e||"string"!=typeof e.valueOf())throw new Error("nextPageLink cannot be null or undefined and it must be of type string.");if(null!==this.client.acceptLanguage&&void 0!==this.client.acceptLanguage&&"string"!=typeof this.client.acceptLanguage.valueOf())throw new Error("this.client.acceptLanguage must be of type string.")}catch(e){return r(e)}let a="{nextLink}";a=a.replace("{nextLink}",e);let c=new o;if(c.method="GET",c.headers={},c.url=a,this.client.generateClientRequestId&&(c.headers["x-ms-client-request-id"]=i.generateUuid()),void 0!==this.client.acceptLanguage&&null!==this.client.acceptLanguage&&(c.headers["accept-language"]=this.client.acceptLanguage),t)for(let e in t.customHeaders)t.customHeaders.hasOwnProperty(e)&&(c.headers[e]=t.customHeaders[e]);return c.headers["Content-Type"]="application/json; charset=utf-8",c.body=null,s.pipeline(c,(e,t,i)=>{if(e)return r(e);let o=t.statusCode;if(200!==o){let e,o=new Error(i);o.statusCode=t.statusCode,o.request=n.stripRequest(c),o.response=n.stripResponse(t),""===i&&(i=null);try{if((e=JSON.parse(i))&&(e.error&&(e=e.error),e.code&&(o.code=e.code),e.message&&(o.message=e.message)),null!=e){let t=(new s.models.CloudError).mapper();o.body=s.deserialize(t,e,"error.body")}}catch(e){return o.message=`Error "${e.message}" occurred in deserializing the responseBody `+`- "${i}" for the default response.`,r(o)}return r(o)}let a=null;if(""===i&&(i=null),200===o){let e=null;try{if(e=JSON.parse(i),a=JSON.parse(i),null!=e){let t=(new s.models.SubscriptionListResult).mapper();a=s.deserialize(t,e,"result")}}catch(e){let o=new Error(`Error ${e} occurred in deserializing the responseBody - ${i}`);return o.request=n.stripRequest(c),o.response=n.stripResponse(t),r(o)}}return r(null,a,c,t)})}e.exports=class Subscriptions{constructor(e){this.client=e,this._listLocations=_listLocations,this._get=_get,this._list=_list,this._listNext=_listNext}listLocationsWithHttpOperationResponse(e,t){this.client;let r=this;return new Promise((i,o)=>{r._listLocations(e,t,(e,t,r,s)=>{let a=new n.HttpOperationResponse(r,s);a.body=t,e?o(e):i(a)})})}listLocations(e,t,r){this.client;let n=this;return r||"function"!=typeof t||(r=t,t=null),r?n._listLocations(e,t,r):new Promise((r,i)=>{n._listLocations(e,t,(e,t,n,o)=>{e?i(e):r(t)})})}getWithHttpOperationResponse(e,t){this.client;let r=this;return new Promise((i,o)=>{r._get(e,t,(e,t,r,s)=>{let a=new n.HttpOperationResponse(r,s);a.body=t,e?o(e):i(a)})})}get(e,t,r){this.client;let n=this;return r||"function"!=typeof t||(r=t,t=null),r?n._get(e,t,r):new Promise((r,i)=>{n._get(e,t,(e,t,n,o)=>{e?i(e):r(t)})})}listWithHttpOperationResponse(e){this.client;let t=this;return new Promise((r,i)=>{t._list(e,(e,t,o,s)=>{let a=new n.HttpOperationResponse(o,s);a.body=t,e?i(e):r(a)})})}list(e,t){this.client;let r=this;return t||"function"!=typeof e||(t=e,e=null),t?r._list(e,t):new Promise((t,n)=>{r._list(e,(e,r,i,o)=>{e?n(e):t(r)})})}listNextWithHttpOperationResponse(e,t){this.client;let r=this;return new Promise((i,o)=>{r._listNext(e,t,(e,t,r,s)=>{let a=new n.HttpOperationResponse(r,s);a.body=t,e?o(e):i(a)})})}listNext(e,t,r){this.client;let n=this;return r||"function"!=typeof t||(r=t,t=null),r?n._listNext(e,t,r):new Promise((r,i)=>{n._listNext(e,t,(e,t,n,o)=>{e?i(e):r(t)})})}}},function(e,t,r){"use strict";const n=r(8),i=r(9),o=n.WebResource;function _list(e,t){let r=this.client;if(t||"function"!=typeof e||(t=e,e=null),!t)throw new Error("callback cannot be null.");try{if(null===this.client.apiVersion||void 0===this.client.apiVersion||"string"!=typeof this.client.apiVersion.valueOf())throw new Error("this.client.apiVersion cannot be null or undefined and it must be of type string.");if(null!==this.client.acceptLanguage&&void 0!==this.client.acceptLanguage&&"string"!=typeof this.client.acceptLanguage.valueOf())throw new Error("this.client.acceptLanguage must be of type string.")}catch(e){return t(e)}let s=this.client.baseUri,a=s+(s.endsWith("/")?"":"/")+"tenants",c=[];c.push("api-version="+encodeURIComponent(this.client.apiVersion)),c.length>0&&(a+="?"+c.join("&"));let u=new o;if(u.method="GET",u.headers={},u.url=a,this.client.generateClientRequestId&&(u.headers["x-ms-client-request-id"]=i.generateUuid()),void 0!==this.client.acceptLanguage&&null!==this.client.acceptLanguage&&(u.headers["accept-language"]=this.client.acceptLanguage),e)for(let t in e.customHeaders)e.customHeaders.hasOwnProperty(t)&&(u.headers[t]=e.customHeaders[t]);return u.headers["Content-Type"]="application/json; charset=utf-8",u.body=null,r.pipeline(u,(e,i,o)=>{if(e)return t(e);let s=i.statusCode;if(200!==s){let e,s=new Error(o);s.statusCode=i.statusCode,s.request=n.stripRequest(u),s.response=n.stripResponse(i),""===o&&(o=null);try{if((e=JSON.parse(o))&&(e.error&&(e=e.error),e.code&&(s.code=e.code),e.message&&(s.message=e.message)),null!=e){let t=(new r.models.CloudError).mapper();s.body=r.deserialize(t,e,"error.body")}}catch(e){return s.message=`Error "${e.message}" occurred in deserializing the responseBody `+`- "${o}" for the default response.`,t(s)}return t(s)}let a=null;if(""===o&&(o=null),200===s){let e=null;try{if(e=JSON.parse(o),a=JSON.parse(o),null!=e){let t=(new r.models.TenantListResult).mapper();a=r.deserialize(t,e,"result")}}catch(e){let r=new Error(`Error ${e} occurred in deserializing the responseBody - ${o}`);return r.request=n.stripRequest(u),r.response=n.stripResponse(i),t(r)}}return t(null,a,u,i)})}function _listNext(e,t,r){let s=this.client;if(r||"function"!=typeof t||(r=t,t=null),!r)throw new Error("callback cannot be null.");try{if(null==e||"string"!=typeof e.valueOf())throw new Error("nextPageLink cannot be null or undefined and it must be of type string.");if(null!==this.client.acceptLanguage&&void 0!==this.client.acceptLanguage&&"string"!=typeof this.client.acceptLanguage.valueOf())throw new Error("this.client.acceptLanguage must be of type string.")}catch(e){return r(e)}let a="{nextLink}";a=a.replace("{nextLink}",e);let c=new o;if(c.method="GET",c.headers={},c.url=a,this.client.generateClientRequestId&&(c.headers["x-ms-client-request-id"]=i.generateUuid()),void 0!==this.client.acceptLanguage&&null!==this.client.acceptLanguage&&(c.headers["accept-language"]=this.client.acceptLanguage),t)for(let e in t.customHeaders)t.customHeaders.hasOwnProperty(e)&&(c.headers[e]=t.customHeaders[e]);return c.headers["Content-Type"]="application/json; charset=utf-8",c.body=null,s.pipeline(c,(e,t,i)=>{if(e)return r(e);let o=t.statusCode;if(200!==o){let e,o=new Error(i);o.statusCode=t.statusCode,o.request=n.stripRequest(c),o.response=n.stripResponse(t),""===i&&(i=null);try{if((e=JSON.parse(i))&&(e.error&&(e=e.error),e.code&&(o.code=e.code),e.message&&(o.message=e.message)),null!=e){let t=(new s.models.CloudError).mapper();o.body=s.deserialize(t,e,"error.body")}}catch(e){return o.message=`Error "${e.message}" occurred in deserializing the responseBody `+`- "${i}" for the default response.`,r(o)}return r(o)}let a=null;if(""===i&&(i=null),200===o){let e=null;try{if(e=JSON.parse(i),a=JSON.parse(i),null!=e){let t=(new s.models.TenantListResult).mapper();a=s.deserialize(t,e,"result")}}catch(e){let o=new Error(`Error ${e} occurred in deserializing the responseBody - ${i}`);return o.request=n.stripRequest(c),o.response=n.stripResponse(t),r(o)}}return r(null,a,c,t)})}e.exports=class Tenants{constructor(e){this.client=e,this._list=_list,this._listNext=_listNext}listWithHttpOperationResponse(e){this.client;let t=this;return new Promise((r,i)=>{t._list(e,(e,t,o,s)=>{let a=new n.HttpOperationResponse(o,s);a.body=t,e?i(e):r(a)})})}list(e,t){this.client;let r=this;return t||"function"!=typeof e||(t=e,e=null),t?r._list(e,t):new Promise((t,n)=>{r._list(e,(e,r,i,o)=>{e?n(e):t(r)})})}listNextWithHttpOperationResponse(e,t){this.client;let r=this;return new Promise((i,o)=>{r._listNext(e,t,(e,t,r,s)=>{let a=new n.HttpOperationResponse(r,s);a.body=t,e?o(e):i(a)})})}listNext(e,t,r){this.client;let n=this;return r||"function"!=typeof t||(r=t,t=null),r?n._listNext(e,t,r):new Promise((r,i)=>{n._listNext(e,t,(e,t,n,o)=>{e?i(e):r(t)})})}}},function(e,t,r){"use strict";const n=r(8),i=r(9).AzureServiceClient,o=r(24),s=r(1276);e.exports=class ResourceManagementClient extends i{constructor(e,t,r,i){if(null==e)throw new Error("'credentials' cannot be null.");if(null==t)throw new Error("'subscriptionId' cannot be null.");i||(i={}),super(e,i),this.apiVersion="2016-09-01",this.acceptLanguage="en-US",this.longRunningOperationRetryTimeout=30,this.generateClientRequestId=!0,this.baseUri=r,this.baseUri||(this.baseUri="https://management.azure.com"),this.credentials=e,this.subscriptionId=t;let a=this.getPackageJsonInfo(__dirname);this.addUserAgentInfo(`${a.name}/${a.version}`),null!==i.apiVersion&&void 0!==i.apiVersion&&(this.apiVersion=i.apiVersion),null!==i.acceptLanguage&&void 0!==i.acceptLanguage&&(this.acceptLanguage=i.acceptLanguage),null!==i.longRunningOperationRetryTimeout&&void 0!==i.longRunningOperationRetryTimeout&&(this.longRunningOperationRetryTimeout=i.longRunningOperationRetryTimeout),null!==i.generateClientRequestId&&void 0!==i.generateClientRequestId&&(this.generateClientRequestId=i.generateClientRequestId),this.deployments=new s.Deployments(this),this.providers=new s.Providers(this),this.resourceGroups=new s.ResourceGroups(this),this.resources=new s.Resources(this),this.tags=new s.Tags(this),this.deploymentOperations=new s.DeploymentOperations(this),this.models=o,n.addSerializationMixin(this)}}},function(e,t,r){"use strict";e.exports=class DeploymentExtendedFilter{constructor(){}mapper(){return{required:!1,serializedName:"DeploymentExtendedFilter",type:{name:"Composite",className:"DeploymentExtendedFilter",modelProperties:{provisioningState:{required:!1,serializedName:"provisioningState",type:{name:"String"}}}}}}}},function(e,t,r){"use strict";e.exports=class GenericResourceFilter{constructor(){}mapper(){return{required:!1,serializedName:"GenericResourceFilter",type:{name:"Composite",className:"GenericResourceFilter",modelProperties:{resourceType:{required:!1,serializedName:"resourceType",type:{name:"String"}},tagname:{required:!1,serializedName:"tagname",type:{name:"String"}},tagvalue:{required:!1,serializedName:"tagvalue",type:{name:"String"}}}}}}}},function(e,t,r){"use strict";e.exports=class ResourceGroupFilter{constructor(){}mapper(){return{required:!1,serializedName:"ResourceGroupFilter",type:{name:"Composite",className:"ResourceGroupFilter",modelProperties:{tagName:{required:!1,serializedName:"tagName",type:{name:"String"}},tagValue:{required:!1,serializedName:"tagValue",type:{name:"String"}}}}}}}},function(e,t,r){"use strict";e.exports=class TemplateLink{constructor(){}mapper(){return{required:!1,serializedName:"TemplateLink",type:{name:"Composite",className:"TemplateLink",modelProperties:{uri:{required:!0,serializedName:"uri",type:{name:"String"}},contentVersion:{required:!1,serializedName:"contentVersion",type:{name:"String"}}}}}}}},function(e,t,r){"use strict";e.exports=class ParametersLink{constructor(){}mapper(){return{required:!1,serializedName:"ParametersLink",type:{name:"Composite",className:"ParametersLink",modelProperties:{uri:{required:!0,serializedName:"uri",type:{name:"String"}},contentVersion:{required:!1,serializedName:"contentVersion",type:{name:"String"}}}}}}}},function(e,t,r){"use strict";e.exports=class DebugSetting{constructor(){}mapper(){return{required:!1,serializedName:"DebugSetting",type:{name:"Composite",className:"DebugSetting",modelProperties:{detailLevel:{required:!1,serializedName:"detailLevel",type:{name:"String"}}}}}}}},function(e,t,r){"use strict";r(24);e.exports=class DeploymentProperties{constructor(){}mapper(){return{required:!1,serializedName:"DeploymentProperties",type:{name:"Composite",className:"DeploymentProperties",modelProperties:{template:{required:!1,serializedName:"template",type:{name:"Object"}},templateLink:{required:!1,serializedName:"templateLink",type:{name:"Composite",className:"TemplateLink"}},parameters:{required:!1,serializedName:"parameters",type:{name:"Object"}},parametersLink:{required:!1,serializedName:"parametersLink",type:{name:"Composite",className:"ParametersLink"}},mode:{required:!0,serializedName:"mode",type:{name:"Enum",allowedValues:["Incremental","Complete"]}},debugSetting:{required:!1,serializedName:"debugSetting",type:{name:"Composite",className:"DebugSetting"}}}}}}}},function(e,t,r){"use strict";r(24);e.exports=class Deployment{constructor(){}mapper(){return{required:!1,serializedName:"Deployment",type:{name:"Composite",className:"Deployment",modelProperties:{properties:{required:!0,serializedName:"properties",type:{name:"Composite",className:"DeploymentProperties"}}}}}}}},function(e,t,r){"use strict";e.exports=class DeploymentExportResult{constructor(){}mapper(){return{required:!1,serializedName:"DeploymentExportResult",type:{name:"Composite",className:"DeploymentExportResult",modelProperties:{template:{required:!1,serializedName:"template",type:{name:"Object"}}}}}}}},function(e,t,r){"use strict";r(24);e.exports=class ResourceManagementErrorWithDetails{constructor(){}mapper(){return{required:!1,serializedName:"ResourceManagementErrorWithDetails",type:{name:"Composite",className:"ResourceManagementErrorWithDetails",modelProperties:{code:{required:!1,readOnly:!0,serializedName:"code",type:{name:"String"}},message:{required:!1,readOnly:!0,serializedName:"message",type:{name:"String"}},target:{required:!1,readOnly:!0,serializedName:"target",type:{name:"String"}},details:{required:!1,readOnly:!0,serializedName:"details",type:{name:"Sequence",element:{required:!1,serializedName:"ResourceManagementErrorWithDetailsElementType",type:{name:"Composite",className:"ResourceManagementErrorWithDetails"}}}}}}}}}},function(e,t,r){"use strict";e.exports=class AliasPathType{constructor(){}mapper(){return{required:!1,serializedName:"AliasPathType",type:{name:"Composite",className:"AliasPathType",modelProperties:{path:{required:!1,serializedName:"path",type:{name:"String"}},apiVersions:{required:!1,serializedName:"apiVersions",type:{name:"Sequence",element:{required:!1,serializedName:"StringElementType",type:{name:"String"}}}}}}}}}},function(e,t,r){"use strict";r(24);e.exports=class AliasType{constructor(){}mapper(){return{required:!1,serializedName:"AliasType",type:{name:"Composite",className:"AliasType",modelProperties:{name:{required:!1,serializedName:"name",type:{name:"String"}},paths:{required:!1,serializedName:"paths",type:{name:"Sequence",element:{required:!1,serializedName:"AliasPathTypeElementType",type:{name:"Composite",className:"AliasPathType"}}}}}}}}}},function(e,t,r){"use strict";r(24);e.exports=class ProviderResourceType{constructor(){}mapper(){return{required:!1,serializedName:"ProviderResourceType",type:{name:"Composite",className:"ProviderResourceType",modelProperties:{resourceType:{required:!1,serializedName:"resourceType",type:{name:"String"}},locations:{required:!1,serializedName:"locations",type:{name:"Sequence",element:{required:!1,serializedName:"StringElementType",type:{name:"String"}}}},aliases:{required:!1,serializedName:"aliases",type:{name:"Sequence",element:{required:!1,serializedName:"AliasTypeElementType",type:{name:"Composite",className:"AliasType"}}}},apiVersions:{required:!1,serializedName:"apiVersions",type:{name:"Sequence",element:{required:!1,serializedName:"StringElementType",type:{name:"String"}}}},properties:{required:!1,serializedName:"properties",type:{name:"Dictionary",value:{required:!1,serializedName:"StringElementType",type:{name:"String"}}}}}}}}}},function(e,t,r){"use strict";r(24);e.exports=class Provider{constructor(){}mapper(){return{required:!1,serializedName:"Provider",type:{name:"Composite",className:"Provider",modelProperties:{id:{required:!1,readOnly:!0,serializedName:"id",type:{name:"String"}},namespace:{required:!1,serializedName:"namespace",type:{name:"String"}},registrationState:{required:!1,readOnly:!0,serializedName:"registrationState",type:{name:"String"}},resourceTypes:{required:!1,readOnly:!0,serializedName:"resourceTypes",type:{name:"Sequence",element:{required:!1,serializedName:"ProviderResourceTypeElementType",type:{name:"Composite",className:"ProviderResourceType"}}}}}}}}}},function(e,t,r){"use strict";e.exports=class BasicDependency{constructor(){}mapper(){return{required:!1,serializedName:"BasicDependency",type:{name:"Composite",className:"BasicDependency",modelProperties:{id:{required:!1,serializedName:"id",type:{name:"String"}},resourceType:{required:!1,serializedName:"resourceType",type:{name:"String"}},resourceName:{required:!1,serializedName:"resourceName",type:{name:"String"}}}}}}}},function(e,t,r){"use strict";r(24);e.exports=class Dependency{constructor(){}mapper(){return{required:!1,serializedName:"Dependency",type:{name:"Composite",className:"Dependency",modelProperties:{dependsOn:{required:!1,serializedName:"dependsOn",type:{name:"Sequence",element:{required:!1,serializedName:"BasicDependencyElementType",type:{name:"Composite",className:"BasicDependency"}}}},id:{required:!1,serializedName:"id",type:{name:"String"}},resourceType:{required:!1,serializedName:"resourceType",type:{name:"String"}},resourceName:{required:!1,serializedName:"resourceName",type:{name:"String"}}}}}}}},function(e,t,r){"use strict";r(24);e.exports=class DeploymentPropertiesExtended{constructor(){}mapper(){return{required:!1,serializedName:"DeploymentPropertiesExtended",type:{name:"Composite",className:"DeploymentPropertiesExtended",modelProperties:{provisioningState:{required:!1,readOnly:!0,serializedName:"provisioningState",type:{name:"String"}},correlationId:{required:!1,readOnly:!0,serializedName:"correlationId",type:{name:"String"}},timestamp:{required:!1,readOnly:!0,serializedName:"timestamp",type:{name:"DateTime"}},outputs:{required:!1,serializedName:"outputs",type:{name:"Object"}},providers:{required:!1,serializedName:"providers",type:{name:"Sequence",element:{required:!1,serializedName:"ProviderElementType",type:{name:"Composite",className:"Provider"}}}},dependencies:{required:!1,serializedName:"dependencies",type:{name:"Sequence",element:{required:!1,serializedName:"DependencyElementType",type:{name:"Composite",className:"Dependency"}}}},template:{required:!1,serializedName:"template",type:{name:"Object"}},templateLink:{required:!1,serializedName:"templateLink",type:{name:"Composite",className:"TemplateLink"}},parameters:{required:!1,serializedName:"parameters",type:{name:"Object"}},parametersLink:{required:!1,serializedName:"parametersLink",type:{name:"Composite",className:"ParametersLink"}},mode:{required:!1,serializedName:"mode",type:{name:"Enum",allowedValues:["Incremental","Complete"]}},debugSetting:{required:!1,serializedName:"debugSetting",type:{name:"Composite",className:"DebugSetting"}}}}}}}},function(e,t,r){"use strict";r(24);e.exports=class DeploymentValidateResult{constructor(){}mapper(){return{required:!1,serializedName:"DeploymentValidateResult",type:{name:"Composite",className:"DeploymentValidateResult",modelProperties:{error:{required:!1,serializedName:"error",type:{name:"Composite",className:"ResourceManagementErrorWithDetails"}},properties:{required:!1,serializedName:"properties",type:{name:"Composite",className:"DeploymentPropertiesExtended"}}}}}}}},function(e,t,r){"use strict";r(24);e.exports=class DeploymentExtended{constructor(){}mapper(){return{required:!1,serializedName:"DeploymentExtended",type:{name:"Composite",className:"DeploymentExtended",modelProperties:{id:{required:!1,serializedName:"id",type:{name:"String"}},name:{required:!0,serializedName:"name",type:{name:"String"}},properties:{required:!1,serializedName:"properties",type:{name:"Composite",className:"DeploymentPropertiesExtended"}}}}}}}},function(e,t,r){"use strict";e.exports=class Plan{constructor(){}mapper(){return{required:!1,serializedName:"Plan",type:{name:"Composite",className:"Plan",modelProperties:{name:{required:!1,serializedName:"name",type:{name:"String"}},publisher:{required:!1,serializedName:"publisher",type:{name:"String"}},product:{required:!1,serializedName:"product",type:{name:"String"}},promotionCode:{required:!1,serializedName:"promotionCode",type:{name:"String"}}}}}}}},function(e,t,r){"use strict";e.exports=class Sku{constructor(){}mapper(){return{required:!1,serializedName:"Sku",type:{name:"Composite",className:"Sku",modelProperties:{name:{required:!1,serializedName:"name",type:{name:"String"}},tier:{required:!1,serializedName:"tier",type:{name:"String"}},size:{required:!1,serializedName:"size",type:{name:"String"}},family:{required:!1,serializedName:"family",type:{name:"String"}},model:{required:!1,serializedName:"model",type:{name:"String"}},capacity:{required:!1,serializedName:"capacity",type:{name:"Number"}}}}}}}},function(e,t,r){"use strict";e.exports=class Identity{constructor(){}mapper(){return{required:!1,serializedName:"Identity",type:{name:"Composite",className:"Identity",modelProperties:{principalId:{required:!1,readOnly:!0,serializedName:"principalId",type:{name:"String"}},tenantId:{required:!1,readOnly:!0,serializedName:"tenantId",type:{name:"String"}},type:{required:!1,serializedName:"type",type:{name:"Enum",allowedValues:["SystemAssigned"]}}}}}}}},function(e,t,r){"use strict";const n=r(24);e.exports=class Resource extends n.BaseResource{constructor(){super()}mapper(){return{required:!1,serializedName:"Resource",type:{name:"Composite",className:"Resource",modelProperties:{id:{required:!1,readOnly:!0,serializedName:"id",type:{name:"String"}},name:{required:!1,readOnly:!0,serializedName:"name",type:{name:"String"}},type:{required:!1,readOnly:!0,serializedName:"type",type:{name:"String"}},location:{required:!1,serializedName:"location",type:{name:"String"}},tags:{required:!1,serializedName:"tags",type:{name:"Dictionary",value:{required:!1,serializedName:"StringElementType",type:{name:"String"}}}}}}}}}},function(e,t,r){"use strict";const n=r(24);e.exports=class GenericResource extends n.Resource{constructor(){super()}mapper(){return{required:!1,serializedName:"GenericResource",type:{name:"Composite",className:"GenericResource",modelProperties:{id:{required:!1,readOnly:!0,serializedName:"id",type:{name:"String"}},name:{required:!1,readOnly:!0,serializedName:"name",type:{name:"String"}},type:{required:!1,readOnly:!0,serializedName:"type",type:{name:"String"}},location:{required:!1,serializedName:"location",type:{name:"String"}},tags:{required:!1,serializedName:"tags",type:{name:"Dictionary",value:{required:!1,serializedName:"StringElementType",type:{name:"String"}}}},plan:{required:!1,serializedName:"plan",type:{name:"Composite",className:"Plan"}},properties:{required:!1,serializedName:"properties",type:{name:"Object"}},kind:{required:!1,serializedName:"kind",constraints:{Pattern:"^[-w._,()]+$"},type:{name:"String"}},managedBy:{required:!1,serializedName:"managedBy",type:{name:"String"}},sku:{required:!1,serializedName:"sku",type:{name:"Composite",className:"Sku"}},identity:{required:!1,serializedName:"identity",type:{name:"Composite",className:"Identity"}}}}}}}},function(e,t,r){"use strict";e.exports=class ResourceGroupProperties{constructor(){}mapper(){return{required:!1,serializedName:"ResourceGroupProperties",type:{name:"Composite",className:"ResourceGroupProperties",modelProperties:{provisioningState:{required:!1,readOnly:!0,serializedName:"provisioningState",type:{name:"String"}}}}}}}},function(e,t,r){"use strict";r(24);e.exports=class ResourceGroup{constructor(){}mapper(){return{required:!1,serializedName:"ResourceGroup",type:{name:"Composite",className:"ResourceGroup",modelProperties:{id:{required:!1,readOnly:!0,serializedName:"id",type:{name:"String"}},name:{required:!1,serializedName:"name",type:{name:"String"}},properties:{required:!1,serializedName:"properties",type:{name:"Composite",className:"ResourceGroupProperties"}},location:{required:!0,serializedName:"location",type:{name:"String"}},managedBy:{required:!1,serializedName:"managedBy",type:{name:"String"}},tags:{required:!1,serializedName:"tags",type:{name:"Dictionary",value:{required:!1,serializedName:"StringElementType",type:{name:"String"}}}}}}}}}},function(e,t,r){"use strict";e.exports=class ResourcesMoveInfo{constructor(){}mapper(){return{required:!1,serializedName:"ResourcesMoveInfo",type:{name:"Composite",className:"ResourcesMoveInfo",modelProperties:{resourcesProperty:{required:!1,serializedName:"resources",type:{name:"Sequence",element:{required:!1,serializedName:"StringElementType",type:{name:"String"}}}},targetResourceGroup:{required:!1,serializedName:"targetResourceGroup",type:{name:"String"}}}}}}}},function(e,t,r){"use strict";e.exports=class ExportTemplateRequest{constructor(){}mapper(){return{required:!1,serializedName:"ExportTemplateRequest",type:{name:"Composite",className:"ExportTemplateRequest",modelProperties:{resourcesProperty:{required:!1,serializedName:"resources",type:{name:"Sequence",element:{required:!1,serializedName:"StringElementType",type:{name:"String"}}}},options:{required:!1,serializedName:"options",type:{name:"String"}}}}}}}},function(e,t,r){"use strict";e.exports=class TagCount{constructor(){}mapper(){return{required:!1,serializedName:"TagCount",type:{name:"Composite",className:"TagCount",modelProperties:{type:{required:!1,serializedName:"type",type:{name:"String"}},value:{required:!1,serializedName:"value",type:{name:"Number"}}}}}}}},function(e,t,r){"use strict";r(24);e.exports=class TagValue{constructor(){}mapper(){return{required:!1,serializedName:"TagValue",type:{name:"Composite",className:"TagValue",modelProperties:{id:{required:!1,serializedName:"id",type:{name:"String"}},tagValue:{required:!1,serializedName:"tagValue",type:{name:"String"}},count:{required:!1,serializedName:"count",type:{name:"Composite",className:"TagCount"}}}}}}}},function(e,t,r){"use strict";r(24);e.exports=class TagDetails{constructor(){}mapper(){return{required:!1,serializedName:"TagDetails",type:{name:"Composite",className:"TagDetails",modelProperties:{id:{required:!1,serializedName:"id",type:{name:"String"}},tagName:{required:!1,serializedName:"tagName",type:{name:"String"}},count:{required:!1,serializedName:"count",type:{name:"Composite",className:"TagCount"}},values:{required:!1,serializedName:"values",type:{name:"Sequence",element:{required:!1,serializedName:"TagValueElementType",type:{name:"Composite",className:"TagValue"}}}}}}}}}},function(e,t,r){"use strict";e.exports=class TargetResource{constructor(){}mapper(){return{required:!1,serializedName:"TargetResource",type:{name:"Composite",className:"TargetResource",modelProperties:{id:{required:!1,serializedName:"id",type:{name:"String"}},resourceName:{required:!1,serializedName:"resourceName",type:{name:"String"}},resourceType:{required:!1,serializedName:"resourceType",type:{name:"String"}}}}}}}},function(e,t,r){"use strict";e.exports=class HttpMessage{constructor(){}mapper(){return{required:!1,serializedName:"HttpMessage",type:{name:"Composite",className:"HttpMessage",modelProperties:{content:{required:!1,serializedName:"content",type:{name:"Object"}}}}}}}},function(e,t,r){"use strict";r(24);e.exports=class DeploymentOperationProperties{constructor(){}mapper(){return{required:!1,serializedName:"DeploymentOperationProperties",type:{name:"Composite",className:"DeploymentOperationProperties",modelProperties:{provisioningState:{required:!1,readOnly:!0,serializedName:"provisioningState",type:{name:"String"}},timestamp:{required:!1,readOnly:!0,serializedName:"timestamp",type:{name:"DateTime"}},serviceRequestId:{required:!1,readOnly:!0,serializedName:"serviceRequestId",type:{name:"String"}},statusCode:{required:!1,readOnly:!0,serializedName:"statusCode",type:{name:"String"}},statusMessage:{required:!1,readOnly:!0,serializedName:"statusMessage",type:{name:"Object"}},targetResource:{required:!1,readOnly:!0,serializedName:"targetResource",type:{name:"Composite",className:"TargetResource"}},request:{required:!1,readOnly:!0,serializedName:"request",type:{name:"Composite",className:"HttpMessage"}},response:{required:!1,readOnly:!0,serializedName:"response",type:{name:"Composite",className:"HttpMessage"}}}}}}}},function(e,t,r){"use strict";r(24);e.exports=class DeploymentOperation{constructor(){}mapper(){return{required:!1,serializedName:"DeploymentOperation",type:{name:"Composite",className:"DeploymentOperation",modelProperties:{id:{required:!1,readOnly:!0,serializedName:"id",type:{name:"String"}},operationId:{required:!1,readOnly:!0,serializedName:"operationId",type:{name:"String"}},properties:{required:!1,serializedName:"properties",type:{name:"Composite",className:"DeploymentOperationProperties"}}}}}}}},function(e,t,r){"use strict";e.exports=class ResourceProviderOperationDisplayProperties{constructor(){}mapper(){return{required:!1,serializedName:"ResourceProviderOperationDisplayProperties",type:{name:"Composite",className:"ResourceProviderOperationDisplayProperties",modelProperties:{publisher:{required:!1,serializedName:"publisher",type:{name:"String"}},provider:{required:!1,serializedName:"provider",type:{name:"String"}},resource:{required:!1,serializedName:"resource",type:{name:"String"}},operation:{required:!1,serializedName:"operation",type:{name:"String"}},description:{required:!1,serializedName:"description",type:{name:"String"}}}}}}}},function(e,t,r){"use strict";const n=r(24);e.exports=class SubResource extends n.BaseResource{constructor(){super()}mapper(){return{required:!1,serializedName:"SubResource",type:{name:"Composite",className:"SubResource",modelProperties:{id:{required:!1,serializedName:"id",type:{name:"String"}}}}}}}},function(e,t,r){"use strict";r(24);e.exports=class ResourceGroupExportResult{constructor(){}mapper(){return{required:!1,serializedName:"ResourceGroupExportResult",type:{name:"Composite",className:"ResourceGroupExportResult",modelProperties:{template:{required:!1,serializedName:"template",type:{name:"Object"}},error:{required:!1,serializedName:"error",type:{name:"Composite",className:"ResourceManagementErrorWithDetails"}}}}}}}},function(e,t,r){"use strict";t.Deployments=r(1277),t.Providers=r(1278),t.ResourceGroups=r(1279),t.Resources=r(1280),t.Tags=r(1281),t.DeploymentOperations=r(1282)},function(e,t,r){"use strict";const n=r(8),i=r(9),o=n.WebResource;function _deleteMethod(e,t,r,i){let o=this.client;if(i||"function"!=typeof r||(i=r,r=null),!i)throw new Error("callback cannot be null.");this.beginDeleteMethod(e,t,r,(e,t,s,a)=>{if(e)return i(e);let c=new n.HttpOperationResponse;c.request=s,c.response=a,c.body=a.body,o.getLongRunningOperationResult(c,r,(e,t)=>{if(e)return i(e);s=t.request,a=t.response;let r=t.body;return""===r&&(r=null),i(null,null,s,a)})})}function _checkExistence(e,t,r,s){let a=this.client;if(s||"function"!=typeof r||(s=r,r=null),!s)throw new Error("callback cannot be null.");try{if(null==e||"string"!=typeof e.valueOf())throw new Error("resourceGroupName cannot be null or undefined and it must be of type string.");if(null!=e){if(e.length>90)throw new Error('"resourceGroupName" should satisfy the constraint - "MaxLength": 90');if(e.length<1)throw new Error('"resourceGroupName" should satisfy the constraint - "MinLength": 1');if(null===e.match(/^[-\w\._\(\)]+$/))throw new Error('"resourceGroupName" should satisfy the constraint - "Pattern": /^[-w._()]+$/')}if(null==t||"string"!=typeof t.valueOf())throw new Error("deploymentName cannot be null or undefined and it must be of type string.");if(null!=t){if(t.length>64)throw new Error('"deploymentName" should satisfy the constraint - "MaxLength": 64');if(t.length<1)throw new Error('"deploymentName" should satisfy the constraint - "MinLength": 1');if(null===t.match(/^[-\w\._\(\)]+$/))throw new Error('"deploymentName" should satisfy the constraint - "Pattern": /^[-w._()]+$/')}if(null===this.client.apiVersion||void 0===this.client.apiVersion||"string"!=typeof this.client.apiVersion.valueOf())throw new Error("this.client.apiVersion cannot be null or undefined and it must be of type string.");if(null===this.client.subscriptionId||void 0===this.client.subscriptionId||"string"!=typeof this.client.subscriptionId.valueOf())throw new Error("this.client.subscriptionId cannot be null or undefined and it must be of type string.");if(null!==this.client.acceptLanguage&&void 0!==this.client.acceptLanguage&&"string"!=typeof this.client.acceptLanguage.valueOf())throw new Error("this.client.acceptLanguage must be of type string.")}catch(e){return s(e)}let c=this.client.baseUri,u=c+(c.endsWith("/")?"":"/")+"subscriptions/{subscriptionId}/resourcegroups/{resourceGroupName}/providers/Microsoft.Resources/deployments/{deploymentName}";u=(u=(u=u.replace("{resourceGroupName}",encodeURIComponent(e))).replace("{deploymentName}",encodeURIComponent(t))).replace("{subscriptionId}",encodeURIComponent(this.client.subscriptionId));let l=[];l.push("api-version="+encodeURIComponent(this.client.apiVersion)),l.length>0&&(u+="?"+l.join("&"));let p=new o;if(p.method="HEAD",p.headers={},p.url=u,this.client.generateClientRequestId&&(p.headers["x-ms-client-request-id"]=i.generateUuid()),void 0!==this.client.acceptLanguage&&null!==this.client.acceptLanguage&&(p.headers["accept-language"]=this.client.acceptLanguage),r)for(let e in r.customHeaders)r.customHeaders.hasOwnProperty(e)&&(p.headers[e]=r.customHeaders[e]);return p.headers["Content-Type"]="application/json; charset=utf-8",p.body=null,a.pipeline(p,(e,t,r)=>{if(e)return s(e);let i=t.statusCode;if(204!==i&&404!==i){let e,i=new Error(r);i.statusCode=t.statusCode,i.request=n.stripRequest(p),i.response=n.stripResponse(t),""===r&&(r=null);try{if((e=JSON.parse(r))&&(e.error&&(e=e.error),e.code&&(i.code=e.code),e.message&&(i.message=e.message)),null!=e){let t=(new a.models.CloudError).mapper();i.body=a.deserialize(t,e,"error.body")}}catch(e){return i.message=`Error "${e.message}" occurred in deserializing the responseBody `+`- "${r}" for the default response.`,s(i)}return s(i)}let o=null;return""===r&&(r=null),s(null,o=204===i,p,t)})}function _createOrUpdate(e,t,r,i,o){let s=this.client;if(o||"function"!=typeof i||(o=i,i=null),!o)throw new Error("callback cannot be null.");this.beginCreateOrUpdate(e,t,r,i,(e,t,r,a)=>{if(e)return o(e);let c=new n.HttpOperationResponse;c.request=r,c.response=a,c.body=a.body,s.getLongRunningOperationResult(c,i,(e,t)=>{if(e)return o(e);let i=null;r=t.request,a=t.response;let c=t.body;""===c&&(c=null);let u=null;try{if(u=JSON.parse(c),i=JSON.parse(c),null!=u){let e=(new s.models.DeploymentExtended).mapper();i=s.deserialize(e,u,"result")}}catch(e){let t=new Error(`Error ${e} occurred in deserializing the responseBody - ${c}`);return t.request=n.stripRequest(r),t.response=n.stripResponse(a),o(t)}return o(null,i,r,a)})})}function _get(e,t,r,s){let a=this.client;if(s||"function"!=typeof r||(s=r,r=null),!s)throw new Error("callback cannot be null.");try{if(null==e||"string"!=typeof e.valueOf())throw new Error("resourceGroupName cannot be null or undefined and it must be of type string.");if(null!=e){if(e.length>90)throw new Error('"resourceGroupName" should satisfy the constraint - "MaxLength": 90');if(e.length<1)throw new Error('"resourceGroupName" should satisfy the constraint - "MinLength": 1');if(null===e.match(/^[-\w\._\(\)]+$/))throw new Error('"resourceGroupName" should satisfy the constraint - "Pattern": /^[-w._()]+$/')}if(null==t||"string"!=typeof t.valueOf())throw new Error("deploymentName cannot be null or undefined and it must be of type string.");if(null!=t){if(t.length>64)throw new Error('"deploymentName" should satisfy the constraint - "MaxLength": 64');if(t.length<1)throw new Error('"deploymentName" should satisfy the constraint - "MinLength": 1');if(null===t.match(/^[-\w\._\(\)]+$/))throw new Error('"deploymentName" should satisfy the constraint - "Pattern": /^[-w._()]+$/')}if(null===this.client.apiVersion||void 0===this.client.apiVersion||"string"!=typeof this.client.apiVersion.valueOf())throw new Error("this.client.apiVersion cannot be null or undefined and it must be of type string.");if(null===this.client.subscriptionId||void 0===this.client.subscriptionId||"string"!=typeof this.client.subscriptionId.valueOf())throw new Error("this.client.subscriptionId cannot be null or undefined and it must be of type string.");if(null!==this.client.acceptLanguage&&void 0!==this.client.acceptLanguage&&"string"!=typeof this.client.acceptLanguage.valueOf())throw new Error("this.client.acceptLanguage must be of type string.")}catch(e){return s(e)}let c=this.client.baseUri,u=c+(c.endsWith("/")?"":"/")+"subscriptions/{subscriptionId}/resourcegroups/{resourceGroupName}/providers/Microsoft.Resources/deployments/{deploymentName}";u=(u=(u=u.replace("{resourceGroupName}",encodeURIComponent(e))).replace("{deploymentName}",encodeURIComponent(t))).replace("{subscriptionId}",encodeURIComponent(this.client.subscriptionId));let l=[];l.push("api-version="+encodeURIComponent(this.client.apiVersion)),l.length>0&&(u+="?"+l.join("&"));let p=new o;if(p.method="GET",p.headers={},p.url=u,this.client.generateClientRequestId&&(p.headers["x-ms-client-request-id"]=i.generateUuid()),void 0!==this.client.acceptLanguage&&null!==this.client.acceptLanguage&&(p.headers["accept-language"]=this.client.acceptLanguage),r)for(let e in r.customHeaders)r.customHeaders.hasOwnProperty(e)&&(p.headers[e]=r.customHeaders[e]);return p.headers["Content-Type"]="application/json; charset=utf-8",p.body=null,a.pipeline(p,(e,t,r)=>{if(e)return s(e);let i=t.statusCode;if(200!==i){let e,i=new Error(r);i.statusCode=t.statusCode,i.request=n.stripRequest(p),i.response=n.stripResponse(t),""===r&&(r=null);try{if((e=JSON.parse(r))&&(e.error&&(e=e.error),e.code&&(i.code=e.code),e.message&&(i.message=e.message)),null!=e){let t=(new a.models.CloudError).mapper();i.body=a.deserialize(t,e,"error.body")}}catch(e){return i.message=`Error "${e.message}" occurred in deserializing the responseBody `+`- "${r}" for the default response.`,s(i)}return s(i)}let o=null;if(""===r&&(r=null),200===i){let e=null;try{if(e=JSON.parse(r),o=JSON.parse(r),null!=e){let t=(new a.models.DeploymentExtended).mapper();o=a.deserialize(t,e,"result")}}catch(e){let i=new Error(`Error ${e} occurred in deserializing the responseBody - ${r}`);return i.request=n.stripRequest(p),i.response=n.stripResponse(t),s(i)}}return s(null,o,p,t)})}function _cancel(e,t,r,s){let a=this.client;if(s||"function"!=typeof r||(s=r,r=null),!s)throw new Error("callback cannot be null.");try{if(null==e||"string"!=typeof e.valueOf())throw new Error("resourceGroupName cannot be null or undefined and it must be of type string.");if(null!=e){if(e.length>90)throw new Error('"resourceGroupName" should satisfy the constraint - "MaxLength": 90');if(e.length<1)throw new Error('"resourceGroupName" should satisfy the constraint - "MinLength": 1');if(null===e.match(/^[-\w\._\(\)]+$/))throw new Error('"resourceGroupName" should satisfy the constraint - "Pattern": /^[-w._()]+$/')}if(null==t||"string"!=typeof t.valueOf())throw new Error("deploymentName cannot be null or undefined and it must be of type string.");if(null!=t){if(t.length>64)throw new Error('"deploymentName" should satisfy the constraint - "MaxLength": 64');if(t.length<1)throw new Error('"deploymentName" should satisfy the constraint - "MinLength": 1');if(null===t.match(/^[-\w\._\(\)]+$/))throw new Error('"deploymentName" should satisfy the constraint - "Pattern": /^[-w._()]+$/')}if(null===this.client.apiVersion||void 0===this.client.apiVersion||"string"!=typeof this.client.apiVersion.valueOf())throw new Error("this.client.apiVersion cannot be null or undefined and it must be of type string.");if(null===this.client.subscriptionId||void 0===this.client.subscriptionId||"string"!=typeof this.client.subscriptionId.valueOf())throw new Error("this.client.subscriptionId cannot be null or undefined and it must be of type string.");if(null!==this.client.acceptLanguage&&void 0!==this.client.acceptLanguage&&"string"!=typeof this.client.acceptLanguage.valueOf())throw new Error("this.client.acceptLanguage must be of type string.")}catch(e){return s(e)}let c=this.client.baseUri,u=c+(c.endsWith("/")?"":"/")+"subscriptions/{subscriptionId}/resourcegroups/{resourceGroupName}/providers/Microsoft.Resources/deployments/{deploymentName}/cancel";u=(u=(u=u.replace("{resourceGroupName}",encodeURIComponent(e))).replace("{deploymentName}",encodeURIComponent(t))).replace("{subscriptionId}",encodeURIComponent(this.client.subscriptionId));let l=[];l.push("api-version="+encodeURIComponent(this.client.apiVersion)),l.length>0&&(u+="?"+l.join("&"));let p=new o;if(p.method="POST",p.headers={},p.url=u,this.client.generateClientRequestId&&(p.headers["x-ms-client-request-id"]=i.generateUuid()),void 0!==this.client.acceptLanguage&&null!==this.client.acceptLanguage&&(p.headers["accept-language"]=this.client.acceptLanguage),r)for(let e in r.customHeaders)r.customHeaders.hasOwnProperty(e)&&(p.headers[e]=r.customHeaders[e]);return p.headers["Content-Type"]="application/json; charset=utf-8",p.body=null,a.pipeline(p,(e,t,r)=>{if(e)return s(e);if(204!==t.statusCode){let e,i=new Error(r);i.statusCode=t.statusCode,i.request=n.stripRequest(p),i.response=n.stripResponse(t),""===r&&(r=null);try{if((e=JSON.parse(r))&&(e.error&&(e=e.error),e.code&&(i.code=e.code),e.message&&(i.message=e.message)),null!=e){let t=(new a.models.CloudError).mapper();i.body=a.deserialize(t,e,"error.body")}}catch(e){return i.message=`Error "${e.message}" occurred in deserializing the responseBody `+`- "${r}" for the default response.`,s(i)}return s(i)}return""===r&&(r=null),s(null,null,p,t)})}function _validate(e,t,r,s,a){let c=this.client;if(a||"function"!=typeof s||(a=s,s=null),!a)throw new Error("callback cannot be null.");try{if(null==e||"string"!=typeof e.valueOf())throw new Error("resourceGroupName cannot be null or undefined and it must be of type string.");if(null!=e){if(e.length>90)throw new Error('"resourceGroupName" should satisfy the constraint - "MaxLength": 90');if(e.length<1)throw new Error('"resourceGroupName" should satisfy the constraint - "MinLength": 1');if(null===e.match(/^[-\w\._\(\)]+$/))throw new Error('"resourceGroupName" should satisfy the constraint - "Pattern": /^[-w._()]+$/')}if(null==t||"string"!=typeof t.valueOf())throw new Error("deploymentName cannot be null or undefined and it must be of type string.");if(null!=t){if(t.length>64)throw new Error('"deploymentName" should satisfy the constraint - "MaxLength": 64');if(t.length<1)throw new Error('"deploymentName" should satisfy the constraint - "MinLength": 1');if(null===t.match(/^[-\w\._\(\)]+$/))throw new Error('"deploymentName" should satisfy the constraint - "Pattern": /^[-w._()]+$/')}if(null==r)throw new Error("parameters cannot be null or undefined.");if(null===this.client.apiVersion||void 0===this.client.apiVersion||"string"!=typeof this.client.apiVersion.valueOf())throw new Error("this.client.apiVersion cannot be null or undefined and it must be of type string.");if(null===this.client.subscriptionId||void 0===this.client.subscriptionId||"string"!=typeof this.client.subscriptionId.valueOf())throw new Error("this.client.subscriptionId cannot be null or undefined and it must be of type string.");if(null!==this.client.acceptLanguage&&void 0!==this.client.acceptLanguage&&"string"!=typeof this.client.acceptLanguage.valueOf())throw new Error("this.client.acceptLanguage must be of type string.")}catch(e){return a(e)}let u=this.client.baseUri,l=u+(u.endsWith("/")?"":"/")+"subscriptions/{subscriptionId}/resourcegroups/{resourceGroupName}/providers/Microsoft.Resources/deployments/{deploymentName}/validate";l=(l=(l=l.replace("{resourceGroupName}",encodeURIComponent(e))).replace("{deploymentName}",encodeURIComponent(t))).replace("{subscriptionId}",encodeURIComponent(this.client.subscriptionId));let p=[];p.push("api-version="+encodeURIComponent(this.client.apiVersion)),p.length>0&&(l+="?"+p.join("&"));let d=new o;if(d.method="POST",d.headers={},d.url=l,this.client.generateClientRequestId&&(d.headers["x-ms-client-request-id"]=i.generateUuid()),void 0!==this.client.acceptLanguage&&null!==this.client.acceptLanguage&&(d.headers["accept-language"]=this.client.acceptLanguage),s)for(let e in s.customHeaders)s.customHeaders.hasOwnProperty(e)&&(d.headers[e]=s.customHeaders[e]);d.headers["Content-Type"]="application/json; charset=utf-8";let h=null,f=null;try{if(null!=r){let e=(new c.models.Deployment).mapper();f=c.serialize(e,r,"parameters"),h=JSON.stringify(f)}}catch(e){let t=new Error(`Error "${e.message}" occurred in serializing the `+`payload - ${JSON.stringify(r,null,2)}.`);return a(t)}return d.body=h,c.pipeline(d,(e,t,r)=>{if(e)return a(e);let i=t.statusCode;if(200!==i&&400!==i){let e,i=new Error(r);i.statusCode=t.statusCode,i.request=n.stripRequest(d),i.response=n.stripResponse(t),""===r&&(r=null);try{if((e=JSON.parse(r))&&(e.error&&(e=e.error),e.code&&(i.code=e.code),e.message&&(i.message=e.message)),null!=e){let t=(new c.models.CloudError).mapper();i.body=c.deserialize(t,e,"error.body")}}catch(e){return i.message=`Error "${e.message}" occurred in deserializing the responseBody `+`- "${r}" for the default response.`,a(i)}return a(i)}let o=null;if(""===r&&(r=null),200===i){let e=null;try{if(e=JSON.parse(r),o=JSON.parse(r),null!=e){let t=(new c.models.DeploymentValidateResult).mapper();o=c.deserialize(t,e,"result")}}catch(e){let i=new Error(`Error ${e} occurred in deserializing the responseBody - ${r}`);return i.request=n.stripRequest(d),i.response=n.stripResponse(t),a(i)}}if(400===i){let e=null;try{if(e=JSON.parse(r),o=JSON.parse(r),null!=e){let t=(new c.models.DeploymentValidateResult).mapper();o=c.deserialize(t,e,"result")}}catch(e){let i=new Error(`Error ${e} occurred in deserializing the responseBody - ${r}`);return i.request=n.stripRequest(d),i.response=n.stripResponse(t),a(i)}}return a(null,o,d,t)})}function _exportTemplate(e,t,r,s){let a=this.client;if(s||"function"!=typeof r||(s=r,r=null),!s)throw new Error("callback cannot be null.");try{if(null==e||"string"!=typeof e.valueOf())throw new Error("resourceGroupName cannot be null or undefined and it must be of type string.");if(null!=e){if(e.length>90)throw new Error('"resourceGroupName" should satisfy the constraint - "MaxLength": 90');if(e.length<1)throw new Error('"resourceGroupName" should satisfy the constraint - "MinLength": 1');if(null===e.match(/^[-\w\._\(\)]+$/))throw new Error('"resourceGroupName" should satisfy the constraint - "Pattern": /^[-w._()]+$/')}if(null==t||"string"!=typeof t.valueOf())throw new Error("deploymentName cannot be null or undefined and it must be of type string.");if(null!=t){if(t.length>64)throw new Error('"deploymentName" should satisfy the constraint - "MaxLength": 64');if(t.length<1)throw new Error('"deploymentName" should satisfy the constraint - "MinLength": 1');if(null===t.match(/^[-\w\._\(\)]+$/))throw new Error('"deploymentName" should satisfy the constraint - "Pattern": /^[-w._()]+$/')}if(null===this.client.apiVersion||void 0===this.client.apiVersion||"string"!=typeof this.client.apiVersion.valueOf())throw new Error("this.client.apiVersion cannot be null or undefined and it must be of type string.");if(null===this.client.subscriptionId||void 0===this.client.subscriptionId||"string"!=typeof this.client.subscriptionId.valueOf())throw new Error("this.client.subscriptionId cannot be null or undefined and it must be of type string.");if(null!==this.client.acceptLanguage&&void 0!==this.client.acceptLanguage&&"string"!=typeof this.client.acceptLanguage.valueOf())throw new Error("this.client.acceptLanguage must be of type string.")}catch(e){return s(e)}let c=this.client.baseUri,u=c+(c.endsWith("/")?"":"/")+"subscriptions/{subscriptionId}/resourcegroups/{resourceGroupName}/providers/Microsoft.Resources/deployments/{deploymentName}/exportTemplate";u=(u=(u=u.replace("{resourceGroupName}",encodeURIComponent(e))).replace("{deploymentName}",encodeURIComponent(t))).replace("{subscriptionId}",encodeURIComponent(this.client.subscriptionId));let l=[];l.push("api-version="+encodeURIComponent(this.client.apiVersion)),l.length>0&&(u+="?"+l.join("&"));let p=new o;if(p.method="POST",p.headers={},p.url=u,this.client.generateClientRequestId&&(p.headers["x-ms-client-request-id"]=i.generateUuid()),void 0!==this.client.acceptLanguage&&null!==this.client.acceptLanguage&&(p.headers["accept-language"]=this.client.acceptLanguage),r)for(let e in r.customHeaders)r.customHeaders.hasOwnProperty(e)&&(p.headers[e]=r.customHeaders[e]);return p.headers["Content-Type"]="application/json; charset=utf-8",p.body=null,a.pipeline(p,(e,t,r)=>{if(e)return s(e);let i=t.statusCode;if(200!==i){let e,i=new Error(r);i.statusCode=t.statusCode,i.request=n.stripRequest(p),i.response=n.stripResponse(t),""===r&&(r=null);try{if((e=JSON.parse(r))&&(e.error&&(e=e.error),e.code&&(i.code=e.code),e.message&&(i.message=e.message)),null!=e){let t=(new a.models.CloudError).mapper();i.body=a.deserialize(t,e,"error.body")}}catch(e){return i.message=`Error "${e.message}" occurred in deserializing the responseBody `+`- "${r}" for the default response.`,s(i)}return s(i)}let o=null;if(""===r&&(r=null),200===i){let e=null;try{if(e=JSON.parse(r),o=JSON.parse(r),null!=e){let t=(new a.models.DeploymentExportResult).mapper();o=a.deserialize(t,e,"result")}}catch(e){let i=new Error(`Error ${e} occurred in deserializing the responseBody - ${r}`);return i.request=n.stripRequest(p),i.response=n.stripResponse(t),s(i)}}return s(null,o,p,t)})}function _list(e,t,r){let s=this.client;if(r||"function"!=typeof t||(r=t,t=null),!r)throw new Error("callback cannot be null.");let a=t&&void 0!==t.filter?t.filter:void 0,c=t&&void 0!==t.top?t.top:void 0;try{if(null==e||"string"!=typeof e.valueOf())throw new Error("resourceGroupName cannot be null or undefined and it must be of type string.");if(null!=e){if(e.length>90)throw new Error('"resourceGroupName" should satisfy the constraint - "MaxLength": 90');if(e.length<1)throw new Error('"resourceGroupName" should satisfy the constraint - "MinLength": 1');if(null===e.match(/^[-\w\._\(\)]+$/))throw new Error('"resourceGroupName" should satisfy the constraint - "Pattern": /^[-w._()]+$/')}if(null!=a&&"string"!=typeof a.valueOf())throw new Error("filter must be of type string.");if(null!=c&&"number"!=typeof c)throw new Error("top must be of type number.");if(null===this.client.apiVersion||void 0===this.client.apiVersion||"string"!=typeof this.client.apiVersion.valueOf())throw new Error("this.client.apiVersion cannot be null or undefined and it must be of type string.");if(null===this.client.subscriptionId||void 0===this.client.subscriptionId||"string"!=typeof this.client.subscriptionId.valueOf())throw new Error("this.client.subscriptionId cannot be null or undefined and it must be of type string.");if(null!==this.client.acceptLanguage&&void 0!==this.client.acceptLanguage&&"string"!=typeof this.client.acceptLanguage.valueOf())throw new Error("this.client.acceptLanguage must be of type string.")}catch(e){return r(e)}let u=this.client.baseUri,l=u+(u.endsWith("/")?"":"/")+"subscriptions/{subscriptionId}/resourcegroups/{resourceGroupName}/providers/Microsoft.Resources/deployments/";l=(l=l.replace("{resourceGroupName}",encodeURIComponent(e))).replace("{subscriptionId}",encodeURIComponent(this.client.subscriptionId));let p=[];null!=a&&p.push("$filter="+encodeURIComponent(a)),null!=c&&p.push("$top="+encodeURIComponent(c.toString())),p.push("api-version="+encodeURIComponent(this.client.apiVersion)),p.length>0&&(l+="?"+p.join("&"));let d=new o;if(d.method="GET",d.headers={},d.url=l,this.client.generateClientRequestId&&(d.headers["x-ms-client-request-id"]=i.generateUuid()),void 0!==this.client.acceptLanguage&&null!==this.client.acceptLanguage&&(d.headers["accept-language"]=this.client.acceptLanguage),t)for(let e in t.customHeaders)t.customHeaders.hasOwnProperty(e)&&(d.headers[e]=t.customHeaders[e]);return d.headers["Content-Type"]="application/json; charset=utf-8",d.body=null,s.pipeline(d,(e,t,i)=>{if(e)return r(e);let o=t.statusCode;if(200!==o){let e,o=new Error(i);o.statusCode=t.statusCode,o.request=n.stripRequest(d),o.response=n.stripResponse(t),""===i&&(i=null);try{if((e=JSON.parse(i))&&(e.error&&(e=e.error),e.code&&(o.code=e.code),e.message&&(o.message=e.message)),null!=e){let t=(new s.models.CloudError).mapper();o.body=s.deserialize(t,e,"error.body")}}catch(e){return o.message=`Error "${e.message}" occurred in deserializing the responseBody `+`- "${i}" for the default response.`,r(o)}return r(o)}let a=null;if(""===i&&(i=null),200===o){let e=null;try{if(e=JSON.parse(i),a=JSON.parse(i),null!=e){let t=(new s.models.DeploymentListResult).mapper();a=s.deserialize(t,e,"result")}}catch(e){let o=new Error(`Error ${e} occurred in deserializing the responseBody - ${i}`);return o.request=n.stripRequest(d),o.response=n.stripResponse(t),r(o)}}return r(null,a,d,t)})}function _beginDeleteMethod(e,t,r,s){let a=this.client;if(s||"function"!=typeof r||(s=r,r=null),!s)throw new Error("callback cannot be null.");try{if(null==e||"string"!=typeof e.valueOf())throw new Error("resourceGroupName cannot be null or undefined and it must be of type string.");if(null!=e){if(e.length>90)throw new Error('"resourceGroupName" should satisfy the constraint - "MaxLength": 90');if(e.length<1)throw new Error('"resourceGroupName" should satisfy the constraint - "MinLength": 1');if(null===e.match(/^[-\w\._\(\)]+$/))throw new Error('"resourceGroupName" should satisfy the constraint - "Pattern": /^[-w._()]+$/')}if(null==t||"string"!=typeof t.valueOf())throw new Error("deploymentName cannot be null or undefined and it must be of type string.");if(null!=t){if(t.length>64)throw new Error('"deploymentName" should satisfy the constraint - "MaxLength": 64');if(t.length<1)throw new Error('"deploymentName" should satisfy the constraint - "MinLength": 1');if(null===t.match(/^[-\w\._\(\)]+$/))throw new Error('"deploymentName" should satisfy the constraint - "Pattern": /^[-w._()]+$/')}if(null===this.client.apiVersion||void 0===this.client.apiVersion||"string"!=typeof this.client.apiVersion.valueOf())throw new Error("this.client.apiVersion cannot be null or undefined and it must be of type string.");if(null===this.client.subscriptionId||void 0===this.client.subscriptionId||"string"!=typeof this.client.subscriptionId.valueOf())throw new Error("this.client.subscriptionId cannot be null or undefined and it must be of type string.");if(null!==this.client.acceptLanguage&&void 0!==this.client.acceptLanguage&&"string"!=typeof this.client.acceptLanguage.valueOf())throw new Error("this.client.acceptLanguage must be of type string.")}catch(e){return s(e)}let c=this.client.baseUri,u=c+(c.endsWith("/")?"":"/")+"subscriptions/{subscriptionId}/resourcegroups/{resourceGroupName}/providers/Microsoft.Resources/deployments/{deploymentName}";u=(u=(u=u.replace("{resourceGroupName}",encodeURIComponent(e))).replace("{deploymentName}",encodeURIComponent(t))).replace("{subscriptionId}",encodeURIComponent(this.client.subscriptionId));let l=[];l.push("api-version="+encodeURIComponent(this.client.apiVersion)),l.length>0&&(u+="?"+l.join("&"));let p=new o;if(p.method="DELETE",p.headers={},p.url=u,this.client.generateClientRequestId&&(p.headers["x-ms-client-request-id"]=i.generateUuid()),void 0!==this.client.acceptLanguage&&null!==this.client.acceptLanguage&&(p.headers["accept-language"]=this.client.acceptLanguage),r)for(let e in r.customHeaders)r.customHeaders.hasOwnProperty(e)&&(p.headers[e]=r.customHeaders[e]);return p.headers["Content-Type"]="application/json; charset=utf-8",p.body=null,a.pipeline(p,(e,t,r)=>{if(e)return s(e);let i=t.statusCode;if(202!==i&&204!==i){let e,i=new Error(r);i.statusCode=t.statusCode,i.request=n.stripRequest(p),i.response=n.stripResponse(t),""===r&&(r=null);try{if((e=JSON.parse(r))&&(e.error&&(e=e.error),e.code&&(i.code=e.code),e.message&&(i.message=e.message)),null!=e){let t=(new a.models.CloudError).mapper();i.body=a.deserialize(t,e,"error.body")}}catch(e){return i.message=`Error "${e.message}" occurred in deserializing the responseBody `+`- "${r}" for the default response.`,s(i)}return s(i)}return""===r&&(r=null),s(null,null,p,t)})}function _beginCreateOrUpdate(e,t,r,s,a){let c=this.client;if(a||"function"!=typeof s||(a=s,s=null),!a)throw new Error("callback cannot be null.");try{if(null==e||"string"!=typeof e.valueOf())throw new Error("resourceGroupName cannot be null or undefined and it must be of type string.");if(null!=e){if(e.length>90)throw new Error('"resourceGroupName" should satisfy the constraint - "MaxLength": 90');if(e.length<1)throw new Error('"resourceGroupName" should satisfy the constraint - "MinLength": 1');if(null===e.match(/^[-\w\._\(\)]+$/))throw new Error('"resourceGroupName" should satisfy the constraint - "Pattern": /^[-w._()]+$/')}if(null==t||"string"!=typeof t.valueOf())throw new Error("deploymentName cannot be null or undefined and it must be of type string.");if(null!=t){if(t.length>64)throw new Error('"deploymentName" should satisfy the constraint - "MaxLength": 64');if(t.length<1)throw new Error('"deploymentName" should satisfy the constraint - "MinLength": 1');if(null===t.match(/^[-\w\._\(\)]+$/))throw new Error('"deploymentName" should satisfy the constraint - "Pattern": /^[-w._()]+$/')}if(null==r)throw new Error("parameters cannot be null or undefined.");if(null===this.client.apiVersion||void 0===this.client.apiVersion||"string"!=typeof this.client.apiVersion.valueOf())throw new Error("this.client.apiVersion cannot be null or undefined and it must be of type string.");if(null===this.client.subscriptionId||void 0===this.client.subscriptionId||"string"!=typeof this.client.subscriptionId.valueOf())throw new Error("this.client.subscriptionId cannot be null or undefined and it must be of type string.");if(null!==this.client.acceptLanguage&&void 0!==this.client.acceptLanguage&&"string"!=typeof this.client.acceptLanguage.valueOf())throw new Error("this.client.acceptLanguage must be of type string.")}catch(e){return a(e)}let u=this.client.baseUri,l=u+(u.endsWith("/")?"":"/")+"subscriptions/{subscriptionId}/resourcegroups/{resourceGroupName}/providers/Microsoft.Resources/deployments/{deploymentName}";l=(l=(l=l.replace("{resourceGroupName}",encodeURIComponent(e))).replace("{deploymentName}",encodeURIComponent(t))).replace("{subscriptionId}",encodeURIComponent(this.client.subscriptionId));let p=[];p.push("api-version="+encodeURIComponent(this.client.apiVersion)),p.length>0&&(l+="?"+p.join("&"));let d=new o;if(d.method="PUT",d.headers={},d.url=l,this.client.generateClientRequestId&&(d.headers["x-ms-client-request-id"]=i.generateUuid()),void 0!==this.client.acceptLanguage&&null!==this.client.acceptLanguage&&(d.headers["accept-language"]=this.client.acceptLanguage),s)for(let e in s.customHeaders)s.customHeaders.hasOwnProperty(e)&&(d.headers[e]=s.customHeaders[e]);d.headers["Content-Type"]="application/json; charset=utf-8";let h=null,f=null;try{if(null!=r){let e=(new c.models.Deployment).mapper();f=c.serialize(e,r,"parameters"),h=JSON.stringify(f)}}catch(e){let t=new Error(`Error "${e.message}" occurred in serializing the `+`payload - ${JSON.stringify(r,null,2)}.`);return a(t)}return d.body=h,c.pipeline(d,(e,t,r)=>{if(e)return a(e);let i=t.statusCode;if(200!==i&&201!==i){let e,i=new Error(r);i.statusCode=t.statusCode,i.request=n.stripRequest(d),i.response=n.stripResponse(t),""===r&&(r=null);try{if((e=JSON.parse(r))&&(e.error&&(e=e.error),e.code&&(i.code=e.code),e.message&&(i.message=e.message)),null!=e){let t=(new c.models.CloudError).mapper();i.body=c.deserialize(t,e,"error.body")}}catch(e){return i.message=`Error "${e.message}" occurred in deserializing the responseBody `+`- "${r}" for the default response.`,a(i)}return a(i)}let o=null;if(""===r&&(r=null),200===i){let e=null;try{if(e=JSON.parse(r),o=JSON.parse(r),null!=e){let t=(new c.models.DeploymentExtended).mapper();o=c.deserialize(t,e,"result")}}catch(e){let i=new Error(`Error ${e} occurred in deserializing the responseBody - ${r}`);return i.request=n.stripRequest(d),i.response=n.stripResponse(t),a(i)}}if(201===i){let e=null;try{if(e=JSON.parse(r),o=JSON.parse(r),null!=e){let t=(new c.models.DeploymentExtended).mapper();o=c.deserialize(t,e,"result")}}catch(e){let i=new Error(`Error ${e} occurred in deserializing the responseBody - ${r}`);return i.request=n.stripRequest(d),i.response=n.stripResponse(t),a(i)}}return a(null,o,d,t)})}function _listNext(e,t,r){let s=this.client;if(r||"function"!=typeof t||(r=t,t=null),!r)throw new Error("callback cannot be null.");try{if(null==e||"string"!=typeof e.valueOf())throw new Error("nextPageLink cannot be null or undefined and it must be of type string.");if(null!==this.client.acceptLanguage&&void 0!==this.client.acceptLanguage&&"string"!=typeof this.client.acceptLanguage.valueOf())throw new Error("this.client.acceptLanguage must be of type string.")}catch(e){return r(e)}let a="{nextLink}";a=a.replace("{nextLink}",e);let c=new o;if(c.method="GET",c.headers={},c.url=a,this.client.generateClientRequestId&&(c.headers["x-ms-client-request-id"]=i.generateUuid()),void 0!==this.client.acceptLanguage&&null!==this.client.acceptLanguage&&(c.headers["accept-language"]=this.client.acceptLanguage),t)for(let e in t.customHeaders)t.customHeaders.hasOwnProperty(e)&&(c.headers[e]=t.customHeaders[e]);return c.headers["Content-Type"]="application/json; charset=utf-8",c.body=null,s.pipeline(c,(e,t,i)=>{if(e)return r(e);let o=t.statusCode;if(200!==o){let e,o=new Error(i);o.statusCode=t.statusCode,o.request=n.stripRequest(c),o.response=n.stripResponse(t),""===i&&(i=null);try{if((e=JSON.parse(i))&&(e.error&&(e=e.error),e.code&&(o.code=e.code),e.message&&(o.message=e.message)),null!=e){let t=(new s.models.CloudError).mapper();o.body=s.deserialize(t,e,"error.body")}}catch(e){return o.message=`Error "${e.message}" occurred in deserializing the responseBody `+`- "${i}" for the default response.`,r(o)}return r(o)}let a=null;if(""===i&&(i=null),200===o){let e=null;try{if(e=JSON.parse(i),a=JSON.parse(i),null!=e){let t=(new s.models.DeploymentListResult).mapper();a=s.deserialize(t,e,"result")}}catch(e){let o=new Error(`Error ${e} occurred in deserializing the responseBody - ${i}`);return o.request=n.stripRequest(c),o.response=n.stripResponse(t),r(o)}}return r(null,a,c,t)})}e.exports=class Deployments{constructor(e){this.client=e,this._deleteMethod=_deleteMethod,this._checkExistence=_checkExistence,this._createOrUpdate=_createOrUpdate,this._get=_get,this._cancel=_cancel,this._validate=_validate,this._exportTemplate=_exportTemplate,this._list=_list,this._beginDeleteMethod=_beginDeleteMethod,this._beginCreateOrUpdate=_beginCreateOrUpdate,this._listNext=_listNext}deleteMethodWithHttpOperationResponse(e,t,r){this.client;let i=this;return new Promise((o,s)=>{i._deleteMethod(e,t,r,(e,t,r,i)=>{let a=new n.HttpOperationResponse(r,i);a.body=t,e?s(e):o(a)})})}deleteMethod(e,t,r,n){this.client;let i=this;return n||"function"!=typeof r||(n=r,r=null),n?i._deleteMethod(e,t,r,n):new Promise((n,o)=>{i._deleteMethod(e,t,r,(e,t,r,i)=>{e?o(e):n(t)})})}checkExistenceWithHttpOperationResponse(e,t,r){this.client;let i=this;return new Promise((o,s)=>{i._checkExistence(e,t,r,(e,t,r,i)=>{let a=new n.HttpOperationResponse(r,i);a.body=t,e?s(e):o(a)})})}checkExistence(e,t,r,n){this.client;let i=this;return n||"function"!=typeof r||(n=r,r=null),n?i._checkExistence(e,t,r,n):new Promise((n,o)=>{i._checkExistence(e,t,r,(e,t,r,i)=>{e?o(e):n(t)})})}createOrUpdateWithHttpOperationResponse(e,t,r,i){this.client;let o=this;return new Promise((s,a)=>{o._createOrUpdate(e,t,r,i,(e,t,r,i)=>{let o=new n.HttpOperationResponse(r,i);o.body=t,e?a(e):s(o)})})}createOrUpdate(e,t,r,n,i){this.client;let o=this;return i||"function"!=typeof n||(i=n,n=null),i?o._createOrUpdate(e,t,r,n,i):new Promise((i,s)=>{o._createOrUpdate(e,t,r,n,(e,t,r,n)=>{e?s(e):i(t)})})}getWithHttpOperationResponse(e,t,r){this.client;let i=this;return new Promise((o,s)=>{i._get(e,t,r,(e,t,r,i)=>{let a=new n.HttpOperationResponse(r,i);a.body=t,e?s(e):o(a)})})}get(e,t,r,n){this.client;let i=this;return n||"function"!=typeof r||(n=r,r=null),n?i._get(e,t,r,n):new Promise((n,o)=>{i._get(e,t,r,(e,t,r,i)=>{e?o(e):n(t)})})}cancelWithHttpOperationResponse(e,t,r){this.client;let i=this;return new Promise((o,s)=>{i._cancel(e,t,r,(e,t,r,i)=>{let a=new n.HttpOperationResponse(r,i);a.body=t,e?s(e):o(a)})})}cancel(e,t,r,n){this.client;let i=this;return n||"function"!=typeof r||(n=r,r=null),n?i._cancel(e,t,r,n):new Promise((n,o)=>{i._cancel(e,t,r,(e,t,r,i)=>{e?o(e):n(t)})})}validateWithHttpOperationResponse(e,t,r,i){this.client;let o=this;return new Promise((s,a)=>{o._validate(e,t,r,i,(e,t,r,i)=>{let o=new n.HttpOperationResponse(r,i);o.body=t,e?a(e):s(o)})})}validate(e,t,r,n,i){this.client;let o=this;return i||"function"!=typeof n||(i=n,n=null),i?o._validate(e,t,r,n,i):new Promise((i,s)=>{o._validate(e,t,r,n,(e,t,r,n)=>{e?s(e):i(t)})})}exportTemplateWithHttpOperationResponse(e,t,r){this.client;let i=this;return new Promise((o,s)=>{i._exportTemplate(e,t,r,(e,t,r,i)=>{let a=new n.HttpOperationResponse(r,i);a.body=t,e?s(e):o(a)})})}exportTemplate(e,t,r,n){this.client;let i=this;return n||"function"!=typeof r||(n=r,r=null),n?i._exportTemplate(e,t,r,n):new Promise((n,o)=>{i._exportTemplate(e,t,r,(e,t,r,i)=>{e?o(e):n(t)})})}listWithHttpOperationResponse(e,t){this.client;let r=this;return new Promise((i,o)=>{r._list(e,t,(e,t,r,s)=>{let a=new n.HttpOperationResponse(r,s);a.body=t,e?o(e):i(a)})})}list(e,t,r){this.client;let n=this;return r||"function"!=typeof t||(r=t,t=null),r?n._list(e,t,r):new Promise((r,i)=>{n._list(e,t,(e,t,n,o)=>{e?i(e):r(t)})})}beginDeleteMethodWithHttpOperationResponse(e,t,r){this.client;let i=this;return new Promise((o,s)=>{i._beginDeleteMethod(e,t,r,(e,t,r,i)=>{let a=new n.HttpOperationResponse(r,i);a.body=t,e?s(e):o(a)})})}beginDeleteMethod(e,t,r,n){this.client;let i=this;return n||"function"!=typeof r||(n=r,r=null),n?i._beginDeleteMethod(e,t,r,n):new Promise((n,o)=>{i._beginDeleteMethod(e,t,r,(e,t,r,i)=>{e?o(e):n(t)})})}beginCreateOrUpdateWithHttpOperationResponse(e,t,r,i){this.client;let o=this;return new Promise((s,a)=>{o._beginCreateOrUpdate(e,t,r,i,(e,t,r,i)=>{let o=new n.HttpOperationResponse(r,i);o.body=t,e?a(e):s(o)})})}beginCreateOrUpdate(e,t,r,n,i){this.client;let o=this;return i||"function"!=typeof n||(i=n,n=null),i?o._beginCreateOrUpdate(e,t,r,n,i):new Promise((i,s)=>{o._beginCreateOrUpdate(e,t,r,n,(e,t,r,n)=>{e?s(e):i(t)})})}listNextWithHttpOperationResponse(e,t){this.client;let r=this;return new Promise((i,o)=>{r._listNext(e,t,(e,t,r,s)=>{let a=new n.HttpOperationResponse(r,s);a.body=t,e?o(e):i(a)})})}listNext(e,t,r){this.client;let n=this;return r||"function"!=typeof t||(r=t,t=null),r?n._listNext(e,t,r):new Promise((r,i)=>{n._listNext(e,t,(e,t,n,o)=>{e?i(e):r(t)})})}}},function(e,t,r){"use strict";const n=r(8),i=r(9),o=n.WebResource;function _unregister(e,t,r){let s=this.client;if(r||"function"!=typeof t||(r=t,t=null),!r)throw new Error("callback cannot be null.");try{if(null==e||"string"!=typeof e.valueOf())throw new Error("resourceProviderNamespace cannot be null or undefined and it must be of type string.");if(null===this.client.apiVersion||void 0===this.client.apiVersion||"string"!=typeof this.client.apiVersion.valueOf())throw new Error("this.client.apiVersion cannot be null or undefined and it must be of type string.");if(null===this.client.subscriptionId||void 0===this.client.subscriptionId||"string"!=typeof this.client.subscriptionId.valueOf())throw new Error("this.client.subscriptionId cannot be null or undefined and it must be of type string.");if(null!==this.client.acceptLanguage&&void 0!==this.client.acceptLanguage&&"string"!=typeof this.client.acceptLanguage.valueOf())throw new Error("this.client.acceptLanguage must be of type string.")}catch(e){return r(e)}let a=this.client.baseUri,c=a+(a.endsWith("/")?"":"/")+"subscriptions/{subscriptionId}/providers/{resourceProviderNamespace}/unregister";c=(c=c.replace("{resourceProviderNamespace}",encodeURIComponent(e))).replace("{subscriptionId}",encodeURIComponent(this.client.subscriptionId));let u=[];u.push("api-version="+encodeURIComponent(this.client.apiVersion)),u.length>0&&(c+="?"+u.join("&"));let l=new o;if(l.method="POST",l.headers={},l.url=c,this.client.generateClientRequestId&&(l.headers["x-ms-client-request-id"]=i.generateUuid()),void 0!==this.client.acceptLanguage&&null!==this.client.acceptLanguage&&(l.headers["accept-language"]=this.client.acceptLanguage),t)for(let e in t.customHeaders)t.customHeaders.hasOwnProperty(e)&&(l.headers[e]=t.customHeaders[e]);return l.headers["Content-Type"]="application/json; charset=utf-8",l.body=null,s.pipeline(l,(e,t,i)=>{if(e)return r(e);let o=t.statusCode;if(200!==o){let e,o=new Error(i);o.statusCode=t.statusCode,o.request=n.stripRequest(l),o.response=n.stripResponse(t),""===i&&(i=null);try{if((e=JSON.parse(i))&&(e.error&&(e=e.error),e.code&&(o.code=e.code),e.message&&(o.message=e.message)),null!=e){let t=(new s.models.CloudError).mapper();o.body=s.deserialize(t,e,"error.body")}}catch(e){return o.message=`Error "${e.message}" occurred in deserializing the responseBody `+`- "${i}" for the default response.`,r(o)}return r(o)}let a=null;if(""===i&&(i=null),200===o){let e=null;try{if(e=JSON.parse(i),a=JSON.parse(i),null!=e){let t=(new s.models.Provider).mapper();a=s.deserialize(t,e,"result")}}catch(e){let o=new Error(`Error ${e} occurred in deserializing the responseBody - ${i}`);return o.request=n.stripRequest(l),o.response=n.stripResponse(t),r(o)}}return r(null,a,l,t)})}function _register(e,t,r){let s=this.client;if(r||"function"!=typeof t||(r=t,t=null),!r)throw new Error("callback cannot be null.");try{if(null==e||"string"!=typeof e.valueOf())throw new Error("resourceProviderNamespace cannot be null or undefined and it must be of type string.");if(null===this.client.apiVersion||void 0===this.client.apiVersion||"string"!=typeof this.client.apiVersion.valueOf())throw new Error("this.client.apiVersion cannot be null or undefined and it must be of type string.");if(null===this.client.subscriptionId||void 0===this.client.subscriptionId||"string"!=typeof this.client.subscriptionId.valueOf())throw new Error("this.client.subscriptionId cannot be null or undefined and it must be of type string.");if(null!==this.client.acceptLanguage&&void 0!==this.client.acceptLanguage&&"string"!=typeof this.client.acceptLanguage.valueOf())throw new Error("this.client.acceptLanguage must be of type string.")}catch(e){return r(e)}let a=this.client.baseUri,c=a+(a.endsWith("/")?"":"/")+"subscriptions/{subscriptionId}/providers/{resourceProviderNamespace}/register";c=(c=c.replace("{resourceProviderNamespace}",encodeURIComponent(e))).replace("{subscriptionId}",encodeURIComponent(this.client.subscriptionId));let u=[];u.push("api-version="+encodeURIComponent(this.client.apiVersion)),u.length>0&&(c+="?"+u.join("&"));let l=new o;if(l.method="POST",l.headers={},l.url=c,this.client.generateClientRequestId&&(l.headers["x-ms-client-request-id"]=i.generateUuid()),void 0!==this.client.acceptLanguage&&null!==this.client.acceptLanguage&&(l.headers["accept-language"]=this.client.acceptLanguage),t)for(let e in t.customHeaders)t.customHeaders.hasOwnProperty(e)&&(l.headers[e]=t.customHeaders[e]);return l.headers["Content-Type"]="application/json; charset=utf-8",l.body=null,s.pipeline(l,(e,t,i)=>{if(e)return r(e);let o=t.statusCode;if(200!==o){let e,o=new Error(i);o.statusCode=t.statusCode,o.request=n.stripRequest(l),o.response=n.stripResponse(t),""===i&&(i=null);try{if((e=JSON.parse(i))&&(e.error&&(e=e.error),e.code&&(o.code=e.code),e.message&&(o.message=e.message)),null!=e){let t=(new s.models.CloudError).mapper();o.body=s.deserialize(t,e,"error.body")}}catch(e){return o.message=`Error "${e.message}" occurred in deserializing the responseBody `+`- "${i}" for the default response.`,r(o)}return r(o)}let a=null;if(""===i&&(i=null),200===o){let e=null;try{if(e=JSON.parse(i),a=JSON.parse(i),null!=e){let t=(new s.models.Provider).mapper();a=s.deserialize(t,e,"result")}}catch(e){let o=new Error(`Error ${e} occurred in deserializing the responseBody - ${i}`);return o.request=n.stripRequest(l),o.response=n.stripResponse(t),r(o)}}return r(null,a,l,t)})}function _list(e,t){let r=this.client;if(t||"function"!=typeof e||(t=e,e=null),!t)throw new Error("callback cannot be null.");let s=e&&void 0!==e.top?e.top:void 0,a=e&&void 0!==e.expand?e.expand:void 0;try{if(null!=s&&"number"!=typeof s)throw new Error("top must be of type number.");if(null!=a&&"string"!=typeof a.valueOf())throw new Error("expand must be of type string.");if(null===this.client.apiVersion||void 0===this.client.apiVersion||"string"!=typeof this.client.apiVersion.valueOf())throw new Error("this.client.apiVersion cannot be null or undefined and it must be of type string.");if(null===this.client.subscriptionId||void 0===this.client.subscriptionId||"string"!=typeof this.client.subscriptionId.valueOf())throw new Error("this.client.subscriptionId cannot be null or undefined and it must be of type string.");if(null!==this.client.acceptLanguage&&void 0!==this.client.acceptLanguage&&"string"!=typeof this.client.acceptLanguage.valueOf())throw new Error("this.client.acceptLanguage must be of type string.")}catch(e){return t(e)}let c=this.client.baseUri,u=c+(c.endsWith("/")?"":"/")+"subscriptions/{subscriptionId}/providers";u=u.replace("{subscriptionId}",encodeURIComponent(this.client.subscriptionId));let l=[];null!=s&&l.push("$top="+encodeURIComponent(s.toString())),null!=a&&l.push("$expand="+encodeURIComponent(a)),l.push("api-version="+encodeURIComponent(this.client.apiVersion)),l.length>0&&(u+="?"+l.join("&"));let p=new o;if(p.method="GET",p.headers={},p.url=u,this.client.generateClientRequestId&&(p.headers["x-ms-client-request-id"]=i.generateUuid()),void 0!==this.client.acceptLanguage&&null!==this.client.acceptLanguage&&(p.headers["accept-language"]=this.client.acceptLanguage),e)for(let t in e.customHeaders)e.customHeaders.hasOwnProperty(t)&&(p.headers[t]=e.customHeaders[t]);return p.headers["Content-Type"]="application/json; charset=utf-8",p.body=null,r.pipeline(p,(e,i,o)=>{if(e)return t(e);let s=i.statusCode;if(200!==s){let e,s=new Error(o);s.statusCode=i.statusCode,s.request=n.stripRequest(p),s.response=n.stripResponse(i),""===o&&(o=null);try{if((e=JSON.parse(o))&&(e.error&&(e=e.error),e.code&&(s.code=e.code),e.message&&(s.message=e.message)),null!=e){let t=(new r.models.CloudError).mapper();s.body=r.deserialize(t,e,"error.body")}}catch(e){return s.message=`Error "${e.message}" occurred in deserializing the responseBody `+`- "${o}" for the default response.`,t(s)}return t(s)}let a=null;if(""===o&&(o=null),200===s){let e=null;try{if(e=JSON.parse(o),a=JSON.parse(o),null!=e){let t=(new r.models.ProviderListResult).mapper();a=r.deserialize(t,e,"result")}}catch(e){let r=new Error(`Error ${e} occurred in deserializing the responseBody - ${o}`);return r.request=n.stripRequest(p),r.response=n.stripResponse(i),t(r)}}return t(null,a,p,i)})}function _get(e,t,r){let s=this.client;if(r||"function"!=typeof t||(r=t,t=null),!r)throw new Error("callback cannot be null.");let a=t&&void 0!==t.expand?t.expand:void 0;try{if(null!=a&&"string"!=typeof a.valueOf())throw new Error("expand must be of type string.");if(null==e||"string"!=typeof e.valueOf())throw new Error("resourceProviderNamespace cannot be null or undefined and it must be of type string.");if(null===this.client.apiVersion||void 0===this.client.apiVersion||"string"!=typeof this.client.apiVersion.valueOf())throw new Error("this.client.apiVersion cannot be null or undefined and it must be of type string.");if(null===this.client.subscriptionId||void 0===this.client.subscriptionId||"string"!=typeof this.client.subscriptionId.valueOf())throw new Error("this.client.subscriptionId cannot be null or undefined and it must be of type string.");if(null!==this.client.acceptLanguage&&void 0!==this.client.acceptLanguage&&"string"!=typeof this.client.acceptLanguage.valueOf())throw new Error("this.client.acceptLanguage must be of type string.")}catch(e){return r(e)}let c=this.client.baseUri,u=c+(c.endsWith("/")?"":"/")+"subscriptions/{subscriptionId}/providers/{resourceProviderNamespace}";u=(u=u.replace("{resourceProviderNamespace}",encodeURIComponent(e))).replace("{subscriptionId}",encodeURIComponent(this.client.subscriptionId));let l=[];null!=a&&l.push("$expand="+encodeURIComponent(a)),l.push("api-version="+encodeURIComponent(this.client.apiVersion)),l.length>0&&(u+="?"+l.join("&"));let p=new o;if(p.method="GET",p.headers={},p.url=u,this.client.generateClientRequestId&&(p.headers["x-ms-client-request-id"]=i.generateUuid()),void 0!==this.client.acceptLanguage&&null!==this.client.acceptLanguage&&(p.headers["accept-language"]=this.client.acceptLanguage),t)for(let e in t.customHeaders)t.customHeaders.hasOwnProperty(e)&&(p.headers[e]=t.customHeaders[e]);return p.headers["Content-Type"]="application/json; charset=utf-8",p.body=null,s.pipeline(p,(e,t,i)=>{if(e)return r(e);let o=t.statusCode;if(200!==o){let e,o=new Error(i);o.statusCode=t.statusCode,o.request=n.stripRequest(p),o.response=n.stripResponse(t),""===i&&(i=null);try{if((e=JSON.parse(i))&&(e.error&&(e=e.error),e.code&&(o.code=e.code),e.message&&(o.message=e.message)),null!=e){let t=(new s.models.CloudError).mapper();o.body=s.deserialize(t,e,"error.body")}}catch(e){return o.message=`Error "${e.message}" occurred in deserializing the responseBody `+`- "${i}" for the default response.`,r(o)}return r(o)}let a=null;if(""===i&&(i=null),200===o){let e=null;try{if(e=JSON.parse(i),a=JSON.parse(i),null!=e){let t=(new s.models.Provider).mapper();a=s.deserialize(t,e,"result")}}catch(e){let o=new Error(`Error ${e} occurred in deserializing the responseBody - ${i}`);return o.request=n.stripRequest(p),o.response=n.stripResponse(t),r(o)}}return r(null,a,p,t)})}function _listNext(e,t,r){let s=this.client;if(r||"function"!=typeof t||(r=t,t=null),!r)throw new Error("callback cannot be null.");try{if(null==e||"string"!=typeof e.valueOf())throw new Error("nextPageLink cannot be null or undefined and it must be of type string.");if(null!==this.client.acceptLanguage&&void 0!==this.client.acceptLanguage&&"string"!=typeof this.client.acceptLanguage.valueOf())throw new Error("this.client.acceptLanguage must be of type string.")}catch(e){return r(e)}let a="{nextLink}";a=a.replace("{nextLink}",e);let c=new o;if(c.method="GET",c.headers={},c.url=a,this.client.generateClientRequestId&&(c.headers["x-ms-client-request-id"]=i.generateUuid()),void 0!==this.client.acceptLanguage&&null!==this.client.acceptLanguage&&(c.headers["accept-language"]=this.client.acceptLanguage),t)for(let e in t.customHeaders)t.customHeaders.hasOwnProperty(e)&&(c.headers[e]=t.customHeaders[e]);return c.headers["Content-Type"]="application/json; charset=utf-8",c.body=null,s.pipeline(c,(e,t,i)=>{if(e)return r(e);let o=t.statusCode;if(200!==o){let e,o=new Error(i);o.statusCode=t.statusCode,o.request=n.stripRequest(c),o.response=n.stripResponse(t),""===i&&(i=null);try{if((e=JSON.parse(i))&&(e.error&&(e=e.error),e.code&&(o.code=e.code),e.message&&(o.message=e.message)),null!=e){let t=(new s.models.CloudError).mapper();o.body=s.deserialize(t,e,"error.body")}}catch(e){return o.message=`Error "${e.message}" occurred in deserializing the responseBody `+`- "${i}" for the default response.`,r(o)}return r(o)}let a=null;if(""===i&&(i=null),200===o){let e=null;try{if(e=JSON.parse(i),a=JSON.parse(i),null!=e){let t=(new s.models.ProviderListResult).mapper();a=s.deserialize(t,e,"result")}}catch(e){let o=new Error(`Error ${e} occurred in deserializing the responseBody - ${i}`);return o.request=n.stripRequest(c),o.response=n.stripResponse(t),r(o)}}return r(null,a,c,t)})}e.exports=class Providers{constructor(e){this.client=e,this._unregister=_unregister,this._register=_register,this._list=_list,this._get=_get,this._listNext=_listNext}unregisterWithHttpOperationResponse(e,t){this.client;let r=this;return new Promise((i,o)=>{r._unregister(e,t,(e,t,r,s)=>{let a=new n.HttpOperationResponse(r,s);a.body=t,e?o(e):i(a)})})}unregister(e,t,r){this.client;let n=this;return r||"function"!=typeof t||(r=t,t=null),r?n._unregister(e,t,r):new Promise((r,i)=>{n._unregister(e,t,(e,t,n,o)=>{e?i(e):r(t)})})}registerWithHttpOperationResponse(e,t){this.client;let r=this;return new Promise((i,o)=>{r._register(e,t,(e,t,r,s)=>{let a=new n.HttpOperationResponse(r,s);a.body=t,e?o(e):i(a)})})}register(e,t,r){this.client;let n=this;return r||"function"!=typeof t||(r=t,t=null),r?n._register(e,t,r):new Promise((r,i)=>{n._register(e,t,(e,t,n,o)=>{e?i(e):r(t)})})}listWithHttpOperationResponse(e){this.client;let t=this;return new Promise((r,i)=>{t._list(e,(e,t,o,s)=>{let a=new n.HttpOperationResponse(o,s);a.body=t,e?i(e):r(a)})})}list(e,t){this.client;let r=this;return t||"function"!=typeof e||(t=e,e=null),t?r._list(e,t):new Promise((t,n)=>{r._list(e,(e,r,i,o)=>{e?n(e):t(r)})})}getWithHttpOperationResponse(e,t){this.client;let r=this;return new Promise((i,o)=>{r._get(e,t,(e,t,r,s)=>{let a=new n.HttpOperationResponse(r,s);a.body=t,e?o(e):i(a)})})}get(e,t,r){this.client;let n=this;return r||"function"!=typeof t||(r=t,t=null),r?n._get(e,t,r):new Promise((r,i)=>{n._get(e,t,(e,t,n,o)=>{e?i(e):r(t)})})}listNextWithHttpOperationResponse(e,t){this.client;let r=this;return new Promise((i,o)=>{r._listNext(e,t,(e,t,r,s)=>{let a=new n.HttpOperationResponse(r,s);a.body=t,e?o(e):i(a)})})}listNext(e,t,r){this.client;let n=this;return r||"function"!=typeof t||(r=t,t=null),r?n._listNext(e,t,r):new Promise((r,i)=>{n._listNext(e,t,(e,t,n,o)=>{e?i(e):r(t)})})}}},function(e,t,r){"use strict";const n=r(8),i=r(9),o=n.WebResource;function _listResources(e,t,r){let s=this.client;if(r||"function"!=typeof t||(r=t,t=null),!r)throw new Error("callback cannot be null.");let a=t&&void 0!==t.filter?t.filter:void 0,c=t&&void 0!==t.expand?t.expand:void 0,u=t&&void 0!==t.top?t.top:void 0;try{if(null==e||"string"!=typeof e.valueOf())throw new Error("resourceGroupName cannot be null or undefined and it must be of type string.");if(null!=e){if(e.length>90)throw new Error('"resourceGroupName" should satisfy the constraint - "MaxLength": 90');if(e.length<1)throw new Error('"resourceGroupName" should satisfy the constraint - "MinLength": 1');if(null===e.match(/^[-\w\._\(\)]+$/))throw new Error('"resourceGroupName" should satisfy the constraint - "Pattern": /^[-w._()]+$/')}if(null!=a&&"string"!=typeof a.valueOf())throw new Error("filter must be of type string.");if(null!=c&&"string"!=typeof c.valueOf())throw new Error("expand must be of type string.");if(null!=u&&"number"!=typeof u)throw new Error("top must be of type number.");if(null===this.client.apiVersion||void 0===this.client.apiVersion||"string"!=typeof this.client.apiVersion.valueOf())throw new Error("this.client.apiVersion cannot be null or undefined and it must be of type string.");if(null===this.client.subscriptionId||void 0===this.client.subscriptionId||"string"!=typeof this.client.subscriptionId.valueOf())throw new Error("this.client.subscriptionId cannot be null or undefined and it must be of type string.");if(null!==this.client.acceptLanguage&&void 0!==this.client.acceptLanguage&&"string"!=typeof this.client.acceptLanguage.valueOf())throw new Error("this.client.acceptLanguage must be of type string.")}catch(e){return r(e)}let l=this.client.baseUri,p=l+(l.endsWith("/")?"":"/")+"subscriptions/{subscriptionId}/resourceGroups/{resourceGroupName}/resources";p=(p=p.replace("{resourceGroupName}",encodeURIComponent(e))).replace("{subscriptionId}",encodeURIComponent(this.client.subscriptionId));let d=[];null!=a&&d.push("$filter="+encodeURIComponent(a)),null!=c&&d.push("$expand="+encodeURIComponent(c)),null!=u&&d.push("$top="+encodeURIComponent(u.toString())),d.push("api-version="+encodeURIComponent(this.client.apiVersion)),d.length>0&&(p+="?"+d.join("&"));let h=new o;if(h.method="GET",h.headers={},h.url=p,this.client.generateClientRequestId&&(h.headers["x-ms-client-request-id"]=i.generateUuid()),void 0!==this.client.acceptLanguage&&null!==this.client.acceptLanguage&&(h.headers["accept-language"]=this.client.acceptLanguage),t)for(let e in t.customHeaders)t.customHeaders.hasOwnProperty(e)&&(h.headers[e]=t.customHeaders[e]);return h.headers["Content-Type"]="application/json; charset=utf-8",h.body=null,s.pipeline(h,(e,t,i)=>{if(e)return r(e);let o=t.statusCode;if(200!==o){let e,o=new Error(i);o.statusCode=t.statusCode,o.request=n.stripRequest(h),o.response=n.stripResponse(t),""===i&&(i=null);try{if((e=JSON.parse(i))&&(e.error&&(e=e.error),e.code&&(o.code=e.code),e.message&&(o.message=e.message)),null!=e){let t=(new s.models.CloudError).mapper();o.body=s.deserialize(t,e,"error.body")}}catch(e){return o.message=`Error "${e.message}" occurred in deserializing the responseBody `+`- "${i}" for the default response.`,r(o)}return r(o)}let a=null;if(""===i&&(i=null),200===o){let e=null;try{if(e=JSON.parse(i),a=JSON.parse(i),null!=e){let t=(new s.models.ResourceListResult).mapper();a=s.deserialize(t,e,"result")}}catch(e){let o=new Error(`Error ${e} occurred in deserializing the responseBody - ${i}`);return o.request=n.stripRequest(h),o.response=n.stripResponse(t),r(o)}}return r(null,a,h,t)})}function _checkExistence(e,t,r){let s=this.client;if(r||"function"!=typeof t||(r=t,t=null),!r)throw new Error("callback cannot be null.");try{if(null==e||"string"!=typeof e.valueOf())throw new Error("resourceGroupName cannot be null or undefined and it must be of type string.");if(null!=e){if(e.length>90)throw new Error('"resourceGroupName" should satisfy the constraint - "MaxLength": 90');if(e.length<1)throw new Error('"resourceGroupName" should satisfy the constraint - "MinLength": 1');if(null===e.match(/^[-\w\._\(\)]+$/))throw new Error('"resourceGroupName" should satisfy the constraint - "Pattern": /^[-w._()]+$/')}if(null===this.client.apiVersion||void 0===this.client.apiVersion||"string"!=typeof this.client.apiVersion.valueOf())throw new Error("this.client.apiVersion cannot be null or undefined and it must be of type string.");if(null===this.client.subscriptionId||void 0===this.client.subscriptionId||"string"!=typeof this.client.subscriptionId.valueOf())throw new Error("this.client.subscriptionId cannot be null or undefined and it must be of type string.");if(null!==this.client.acceptLanguage&&void 0!==this.client.acceptLanguage&&"string"!=typeof this.client.acceptLanguage.valueOf())throw new Error("this.client.acceptLanguage must be of type string.")}catch(e){return r(e)}let a=this.client.baseUri,c=a+(a.endsWith("/")?"":"/")+"subscriptions/{subscriptionId}/resourcegroups/{resourceGroupName}";c=(c=c.replace("{resourceGroupName}",encodeURIComponent(e))).replace("{subscriptionId}",encodeURIComponent(this.client.subscriptionId));let u=[];u.push("api-version="+encodeURIComponent(this.client.apiVersion)),u.length>0&&(c+="?"+u.join("&"));let l=new o;if(l.method="HEAD",l.headers={},l.url=c,this.client.generateClientRequestId&&(l.headers["x-ms-client-request-id"]=i.generateUuid()),void 0!==this.client.acceptLanguage&&null!==this.client.acceptLanguage&&(l.headers["accept-language"]=this.client.acceptLanguage),t)for(let e in t.customHeaders)t.customHeaders.hasOwnProperty(e)&&(l.headers[e]=t.customHeaders[e]);return l.headers["Content-Type"]="application/json; charset=utf-8",l.body=null,s.pipeline(l,(e,t,i)=>{if(e)return r(e);let o=t.statusCode;if(204!==o&&404!==o){let e,o=new Error(i);o.statusCode=t.statusCode,o.request=n.stripRequest(l),o.response=n.stripResponse(t),""===i&&(i=null);try{if((e=JSON.parse(i))&&(e.error&&(e=e.error),e.code&&(o.code=e.code),e.message&&(o.message=e.message)),null!=e){let t=(new s.models.CloudError).mapper();o.body=s.deserialize(t,e,"error.body")}}catch(e){return o.message=`Error "${e.message}" occurred in deserializing the responseBody `+`- "${i}" for the default response.`,r(o)}return r(o)}let a=null;return""===i&&(i=null),r(null,a=204===o,l,t)})}function _createOrUpdate(e,t,r,s){let a=this.client;if(s||"function"!=typeof r||(s=r,r=null),!s)throw new Error("callback cannot be null.");try{if(null==e||"string"!=typeof e.valueOf())throw new Error("resourceGroupName cannot be null or undefined and it must be of type string.");if(null!=e){if(e.length>90)throw new Error('"resourceGroupName" should satisfy the constraint - "MaxLength": 90');if(e.length<1)throw new Error('"resourceGroupName" should satisfy the constraint - "MinLength": 1');if(null===e.match(/^[-\w\._\(\)]+$/))throw new Error('"resourceGroupName" should satisfy the constraint - "Pattern": /^[-w._()]+$/')}if(null==t)throw new Error("parameters cannot be null or undefined.");if(null===this.client.apiVersion||void 0===this.client.apiVersion||"string"!=typeof this.client.apiVersion.valueOf())throw new Error("this.client.apiVersion cannot be null or undefined and it must be of type string.");if(null===this.client.subscriptionId||void 0===this.client.subscriptionId||"string"!=typeof this.client.subscriptionId.valueOf())throw new Error("this.client.subscriptionId cannot be null or undefined and it must be of type string.");if(null!==this.client.acceptLanguage&&void 0!==this.client.acceptLanguage&&"string"!=typeof this.client.acceptLanguage.valueOf())throw new Error("this.client.acceptLanguage must be of type string.")}catch(e){return s(e)}let c=this.client.baseUri,u=c+(c.endsWith("/")?"":"/")+"subscriptions/{subscriptionId}/resourcegroups/{resourceGroupName}";u=(u=u.replace("{resourceGroupName}",encodeURIComponent(e))).replace("{subscriptionId}",encodeURIComponent(this.client.subscriptionId));let l=[];l.push("api-version="+encodeURIComponent(this.client.apiVersion)),l.length>0&&(u+="?"+l.join("&"));let p=new o;if(p.method="PUT",p.headers={},p.url=u,this.client.generateClientRequestId&&(p.headers["x-ms-client-request-id"]=i.generateUuid()),void 0!==this.client.acceptLanguage&&null!==this.client.acceptLanguage&&(p.headers["accept-language"]=this.client.acceptLanguage),r)for(let e in r.customHeaders)r.customHeaders.hasOwnProperty(e)&&(p.headers[e]=r.customHeaders[e]);p.headers["Content-Type"]="application/json; charset=utf-8";let d=null,h=null;try{if(null!=t){let e=(new a.models.ResourceGroup).mapper();h=a.serialize(e,t,"parameters"),d=JSON.stringify(h)}}catch(e){let r=new Error(`Error "${e.message}" occurred in serializing the `+`payload - ${JSON.stringify(t,null,2)}.`);return s(r)}return p.body=d,a.pipeline(p,(e,t,r)=>{if(e)return s(e);let i=t.statusCode;if(201!==i&&200!==i){let e,i=new Error(r);i.statusCode=t.statusCode,i.request=n.stripRequest(p),i.response=n.stripResponse(t),""===r&&(r=null);try{if((e=JSON.parse(r))&&(e.error&&(e=e.error),e.code&&(i.code=e.code),e.message&&(i.message=e.message)),null!=e){let t=(new a.models.CloudError).mapper();i.body=a.deserialize(t,e,"error.body")}}catch(e){return i.message=`Error "${e.message}" occurred in deserializing the responseBody `+`- "${r}" for the default response.`,s(i)}return s(i)}let o=null;if(""===r&&(r=null),201===i){let e=null;try{if(e=JSON.parse(r),o=JSON.parse(r),null!=e){let t=(new a.models.ResourceGroup).mapper();o=a.deserialize(t,e,"result")}}catch(e){let i=new Error(`Error ${e} occurred in deserializing the responseBody - ${r}`);return i.request=n.stripRequest(p),i.response=n.stripResponse(t),s(i)}}if(200===i){let e=null;try{if(e=JSON.parse(r),o=JSON.parse(r),null!=e){let t=(new a.models.ResourceGroup).mapper();o=a.deserialize(t,e,"result")}}catch(e){let i=new Error(`Error ${e} occurred in deserializing the responseBody - ${r}`);return i.request=n.stripRequest(p),i.response=n.stripResponse(t),s(i)}}return s(null,o,p,t)})}function _deleteMethod(e,t,r){let i=this.client;if(r||"function"!=typeof t||(r=t,t=null),!r)throw new Error("callback cannot be null.");this.beginDeleteMethod(e,t,(e,o,s,a)=>{if(e)return r(e);let c=new n.HttpOperationResponse;c.request=s,c.response=a,c.body=a.body,i.getLongRunningOperationResult(c,t,(e,t)=>{if(e)return r(e);s=t.request,a=t.response;let n=t.body;return""===n&&(n=null),r(null,null,s,a)})})}function _get(e,t,r){let s=this.client;if(r||"function"!=typeof t||(r=t,t=null),!r)throw new Error("callback cannot be null.");try{if(null==e||"string"!=typeof e.valueOf())throw new Error("resourceGroupName cannot be null or undefined and it must be of type string.");if(null!=e){if(e.length>90)throw new Error('"resourceGroupName" should satisfy the constraint - "MaxLength": 90');if(e.length<1)throw new Error('"resourceGroupName" should satisfy the constraint - "MinLength": 1');if(null===e.match(/^[-\w\._\(\)]+$/))throw new Error('"resourceGroupName" should satisfy the constraint - "Pattern": /^[-w._()]+$/')}if(null===this.client.apiVersion||void 0===this.client.apiVersion||"string"!=typeof this.client.apiVersion.valueOf())throw new Error("this.client.apiVersion cannot be null or undefined and it must be of type string.");if(null===this.client.subscriptionId||void 0===this.client.subscriptionId||"string"!=typeof this.client.subscriptionId.valueOf())throw new Error("this.client.subscriptionId cannot be null or undefined and it must be of type string.");if(null!==this.client.acceptLanguage&&void 0!==this.client.acceptLanguage&&"string"!=typeof this.client.acceptLanguage.valueOf())throw new Error("this.client.acceptLanguage must be of type string.")}catch(e){return r(e)}let a=this.client.baseUri,c=a+(a.endsWith("/")?"":"/")+"subscriptions/{subscriptionId}/resourcegroups/{resourceGroupName}";c=(c=c.replace("{resourceGroupName}",encodeURIComponent(e))).replace("{subscriptionId}",encodeURIComponent(this.client.subscriptionId));let u=[];u.push("api-version="+encodeURIComponent(this.client.apiVersion)),u.length>0&&(c+="?"+u.join("&"));let l=new o;if(l.method="GET",l.headers={},l.url=c,this.client.generateClientRequestId&&(l.headers["x-ms-client-request-id"]=i.generateUuid()),void 0!==this.client.acceptLanguage&&null!==this.client.acceptLanguage&&(l.headers["accept-language"]=this.client.acceptLanguage),t)for(let e in t.customHeaders)t.customHeaders.hasOwnProperty(e)&&(l.headers[e]=t.customHeaders[e]);return l.headers["Content-Type"]="application/json; charset=utf-8",l.body=null,s.pipeline(l,(e,t,i)=>{if(e)return r(e);let o=t.statusCode;if(200!==o){let e,o=new Error(i);o.statusCode=t.statusCode,o.request=n.stripRequest(l),o.response=n.stripResponse(t),""===i&&(i=null);try{if((e=JSON.parse(i))&&(e.error&&(e=e.error),e.code&&(o.code=e.code),e.message&&(o.message=e.message)),null!=e){let t=(new s.models.CloudError).mapper();o.body=s.deserialize(t,e,"error.body")}}catch(e){return o.message=`Error "${e.message}" occurred in deserializing the responseBody `+`- "${i}" for the default response.`,r(o)}return r(o)}let a=null;if(""===i&&(i=null),200===o){let e=null;try{if(e=JSON.parse(i),a=JSON.parse(i),null!=e){let t=(new s.models.ResourceGroup).mapper();a=s.deserialize(t,e,"result")}}catch(e){let o=new Error(`Error ${e} occurred in deserializing the responseBody - ${i}`);return o.request=n.stripRequest(l),o.response=n.stripResponse(t),r(o)}}return r(null,a,l,t)})}function _patch(e,t,r,s){let a=this.client;if(s||"function"!=typeof r||(s=r,r=null),!s)throw new Error("callback cannot be null.");try{if(null==e||"string"!=typeof e.valueOf())throw new Error("resourceGroupName cannot be null or undefined and it must be of type string.");if(null!=e){if(e.length>90)throw new Error('"resourceGroupName" should satisfy the constraint - "MaxLength": 90');if(e.length<1)throw new Error('"resourceGroupName" should satisfy the constraint - "MinLength": 1');if(null===e.match(/^[-\w\._\(\)]+$/))throw new Error('"resourceGroupName" should satisfy the constraint - "Pattern": /^[-w._()]+$/')}if(null==t)throw new Error("parameters cannot be null or undefined.");if(null===this.client.apiVersion||void 0===this.client.apiVersion||"string"!=typeof this.client.apiVersion.valueOf())throw new Error("this.client.apiVersion cannot be null or undefined and it must be of type string.");if(null===this.client.subscriptionId||void 0===this.client.subscriptionId||"string"!=typeof this.client.subscriptionId.valueOf())throw new Error("this.client.subscriptionId cannot be null or undefined and it must be of type string.");if(null!==this.client.acceptLanguage&&void 0!==this.client.acceptLanguage&&"string"!=typeof this.client.acceptLanguage.valueOf())throw new Error("this.client.acceptLanguage must be of type string.")}catch(e){return s(e)}let c=this.client.baseUri,u=c+(c.endsWith("/")?"":"/")+"subscriptions/{subscriptionId}/resourcegroups/{resourceGroupName}";u=(u=u.replace("{resourceGroupName}",encodeURIComponent(e))).replace("{subscriptionId}",encodeURIComponent(this.client.subscriptionId));let l=[];l.push("api-version="+encodeURIComponent(this.client.apiVersion)),l.length>0&&(u+="?"+l.join("&"));let p=new o;if(p.method="PATCH",p.headers={},p.url=u,this.client.generateClientRequestId&&(p.headers["x-ms-client-request-id"]=i.generateUuid()),void 0!==this.client.acceptLanguage&&null!==this.client.acceptLanguage&&(p.headers["accept-language"]=this.client.acceptLanguage),r)for(let e in r.customHeaders)r.customHeaders.hasOwnProperty(e)&&(p.headers[e]=r.customHeaders[e]);p.headers["Content-Type"]="application/json; charset=utf-8";let d=null,h=null;try{if(null!=t){let e=(new a.models.ResourceGroup).mapper();h=a.serialize(e,t,"parameters"),d=JSON.stringify(h)}}catch(e){let r=new Error(`Error "${e.message}" occurred in serializing the `+`payload - ${JSON.stringify(t,null,2)}.`);return s(r)}return p.body=d,a.pipeline(p,(e,t,r)=>{if(e)return s(e);let i=t.statusCode;if(200!==i){let e,i=new Error(r);i.statusCode=t.statusCode,i.request=n.stripRequest(p),i.response=n.stripResponse(t),""===r&&(r=null);try{if((e=JSON.parse(r))&&(e.error&&(e=e.error),e.code&&(i.code=e.code),e.message&&(i.message=e.message)),null!=e){let t=(new a.models.CloudError).mapper();i.body=a.deserialize(t,e,"error.body")}}catch(e){return i.message=`Error "${e.message}" occurred in deserializing the responseBody `+`- "${r}" for the default response.`,s(i)}return s(i)}let o=null;if(""===r&&(r=null),200===i){let e=null;try{if(e=JSON.parse(r),o=JSON.parse(r),null!=e){let t=(new a.models.ResourceGroup).mapper();o=a.deserialize(t,e,"result")}}catch(e){let i=new Error(`Error ${e} occurred in deserializing the responseBody - ${r}`);return i.request=n.stripRequest(p),i.response=n.stripResponse(t),s(i)}}return s(null,o,p,t)})}function _exportTemplate(e,t,r,s){let a=this.client;if(s||"function"!=typeof r||(s=r,r=null),!s)throw new Error("callback cannot be null.");try{if(null==e||"string"!=typeof e.valueOf())throw new Error("resourceGroupName cannot be null or undefined and it must be of type string.");if(null!=e){if(e.length>90)throw new Error('"resourceGroupName" should satisfy the constraint - "MaxLength": 90');if(e.length<1)throw new Error('"resourceGroupName" should satisfy the constraint - "MinLength": 1');if(null===e.match(/^[-\w\._\(\)]+$/))throw new Error('"resourceGroupName" should satisfy the constraint - "Pattern": /^[-w._()]+$/')}if(null==t)throw new Error("parameters cannot be null or undefined.");if(null===this.client.apiVersion||void 0===this.client.apiVersion||"string"!=typeof this.client.apiVersion.valueOf())throw new Error("this.client.apiVersion cannot be null or undefined and it must be of type string.");if(null===this.client.subscriptionId||void 0===this.client.subscriptionId||"string"!=typeof this.client.subscriptionId.valueOf())throw new Error("this.client.subscriptionId cannot be null or undefined and it must be of type string.");if(null!==this.client.acceptLanguage&&void 0!==this.client.acceptLanguage&&"string"!=typeof this.client.acceptLanguage.valueOf())throw new Error("this.client.acceptLanguage must be of type string.")}catch(e){return s(e)}let c=this.client.baseUri,u=c+(c.endsWith("/")?"":"/")+"subscriptions/{subscriptionId}/resourcegroups/{resourceGroupName}/exportTemplate";u=(u=u.replace("{resourceGroupName}",encodeURIComponent(e))).replace("{subscriptionId}",encodeURIComponent(this.client.subscriptionId));let l=[];l.push("api-version="+encodeURIComponent(this.client.apiVersion)),l.length>0&&(u+="?"+l.join("&"));let p=new o;if(p.method="POST",p.headers={},p.url=u,this.client.generateClientRequestId&&(p.headers["x-ms-client-request-id"]=i.generateUuid()),void 0!==this.client.acceptLanguage&&null!==this.client.acceptLanguage&&(p.headers["accept-language"]=this.client.acceptLanguage),r)for(let e in r.customHeaders)r.customHeaders.hasOwnProperty(e)&&(p.headers[e]=r.customHeaders[e]);p.headers["Content-Type"]="application/json; charset=utf-8";let d=null,h=null;try{if(null!=t){let e=(new a.models.ExportTemplateRequest).mapper();h=a.serialize(e,t,"parameters"),d=JSON.stringify(h)}}catch(e){let r=new Error(`Error "${e.message}" occurred in serializing the `+`payload - ${JSON.stringify(t,null,2)}.`);return s(r)}return p.body=d,a.pipeline(p,(e,t,r)=>{if(e)return s(e);let i=t.statusCode;if(200!==i){let e,i=new Error(r);i.statusCode=t.statusCode,i.request=n.stripRequest(p),i.response=n.stripResponse(t),""===r&&(r=null);try{if((e=JSON.parse(r))&&(e.error&&(e=e.error),e.code&&(i.code=e.code),e.message&&(i.message=e.message)),null!=e){let t=(new a.models.CloudError).mapper();i.body=a.deserialize(t,e,"error.body")}}catch(e){return i.message=`Error "${e.message}" occurred in deserializing the responseBody `+`- "${r}" for the default response.`,s(i)}return s(i)}let o=null;if(""===r&&(r=null),200===i){let e=null;try{if(e=JSON.parse(r),o=JSON.parse(r),null!=e){let t=(new a.models.ResourceGroupExportResult).mapper();o=a.deserialize(t,e,"result")}}catch(e){let i=new Error(`Error ${e} occurred in deserializing the responseBody - ${r}`);return i.request=n.stripRequest(p),i.response=n.stripResponse(t),s(i)}}return s(null,o,p,t)})}function _list(e,t){let r=this.client;if(t||"function"!=typeof e||(t=e,e=null),!t)throw new Error("callback cannot be null.");let s=e&&void 0!==e.filter?e.filter:void 0,a=e&&void 0!==e.top?e.top:void 0;try{if(null!=s&&"string"!=typeof s.valueOf())throw new Error("filter must be of type string.");if(null!=a&&"number"!=typeof a)throw new Error("top must be of type number.");if(null===this.client.apiVersion||void 0===this.client.apiVersion||"string"!=typeof this.client.apiVersion.valueOf())throw new Error("this.client.apiVersion cannot be null or undefined and it must be of type string.");if(null===this.client.subscriptionId||void 0===this.client.subscriptionId||"string"!=typeof this.client.subscriptionId.valueOf())throw new Error("this.client.subscriptionId cannot be null or undefined and it must be of type string.");if(null!==this.client.acceptLanguage&&void 0!==this.client.acceptLanguage&&"string"!=typeof this.client.acceptLanguage.valueOf())throw new Error("this.client.acceptLanguage must be of type string.")}catch(e){return t(e)}let c=this.client.baseUri,u=c+(c.endsWith("/")?"":"/")+"subscriptions/{subscriptionId}/resourcegroups";u=u.replace("{subscriptionId}",encodeURIComponent(this.client.subscriptionId));let l=[];null!=s&&l.push("$filter="+encodeURIComponent(s)),null!=a&&l.push("$top="+encodeURIComponent(a.toString())),l.push("api-version="+encodeURIComponent(this.client.apiVersion)),l.length>0&&(u+="?"+l.join("&"));let p=new o;if(p.method="GET",p.headers={},p.url=u,this.client.generateClientRequestId&&(p.headers["x-ms-client-request-id"]=i.generateUuid()),void 0!==this.client.acceptLanguage&&null!==this.client.acceptLanguage&&(p.headers["accept-language"]=this.client.acceptLanguage),e)for(let t in e.customHeaders)e.customHeaders.hasOwnProperty(t)&&(p.headers[t]=e.customHeaders[t]);return p.headers["Content-Type"]="application/json; charset=utf-8",p.body=null,r.pipeline(p,(e,i,o)=>{if(e)return t(e);let s=i.statusCode;if(200!==s){let e,s=new Error(o);s.statusCode=i.statusCode,s.request=n.stripRequest(p),s.response=n.stripResponse(i),""===o&&(o=null);try{if((e=JSON.parse(o))&&(e.error&&(e=e.error),e.code&&(s.code=e.code),e.message&&(s.message=e.message)),null!=e){let t=(new r.models.CloudError).mapper();s.body=r.deserialize(t,e,"error.body")}}catch(e){return s.message=`Error "${e.message}" occurred in deserializing the responseBody `+`- "${o}" for the default response.`,t(s)}return t(s)}let a=null;if(""===o&&(o=null),200===s){let e=null;try{if(e=JSON.parse(o),a=JSON.parse(o),null!=e){let t=(new r.models.ResourceGroupListResult).mapper();a=r.deserialize(t,e,"result")}}catch(e){let r=new Error(`Error ${e} occurred in deserializing the responseBody - ${o}`);return r.request=n.stripRequest(p),r.response=n.stripResponse(i),t(r)}}return t(null,a,p,i)})}function _beginDeleteMethod(e,t,r){let s=this.client;if(r||"function"!=typeof t||(r=t,t=null),!r)throw new Error("callback cannot be null.");try{if(null==e||"string"!=typeof e.valueOf())throw new Error("resourceGroupName cannot be null or undefined and it must be of type string.");if(null!=e){if(e.length>90)throw new Error('"resourceGroupName" should satisfy the constraint - "MaxLength": 90');if(e.length<1)throw new Error('"resourceGroupName" should satisfy the constraint - "MinLength": 1');if(null===e.match(/^[-\w\._\(\)]+$/))throw new Error('"resourceGroupName" should satisfy the constraint - "Pattern": /^[-w._()]+$/')}if(null===this.client.apiVersion||void 0===this.client.apiVersion||"string"!=typeof this.client.apiVersion.valueOf())throw new Error("this.client.apiVersion cannot be null or undefined and it must be of type string.");if(null===this.client.subscriptionId||void 0===this.client.subscriptionId||"string"!=typeof this.client.subscriptionId.valueOf())throw new Error("this.client.subscriptionId cannot be null or undefined and it must be of type string.");if(null!==this.client.acceptLanguage&&void 0!==this.client.acceptLanguage&&"string"!=typeof this.client.acceptLanguage.valueOf())throw new Error("this.client.acceptLanguage must be of type string.")}catch(e){return r(e)}let a=this.client.baseUri,c=a+(a.endsWith("/")?"":"/")+"subscriptions/{subscriptionId}/resourcegroups/{resourceGroupName}";c=(c=c.replace("{resourceGroupName}",encodeURIComponent(e))).replace("{subscriptionId}",encodeURIComponent(this.client.subscriptionId));let u=[];u.push("api-version="+encodeURIComponent(this.client.apiVersion)),u.length>0&&(c+="?"+u.join("&"));let l=new o;if(l.method="DELETE",l.headers={},l.url=c,this.client.generateClientRequestId&&(l.headers["x-ms-client-request-id"]=i.generateUuid()),void 0!==this.client.acceptLanguage&&null!==this.client.acceptLanguage&&(l.headers["accept-language"]=this.client.acceptLanguage),t)for(let e in t.customHeaders)t.customHeaders.hasOwnProperty(e)&&(l.headers[e]=t.customHeaders[e]);return l.headers["Content-Type"]="application/json; charset=utf-8",l.body=null,s.pipeline(l,(e,t,i)=>{if(e)return r(e);let o=t.statusCode;if(202!==o&&200!==o){let e,o=new Error(i);o.statusCode=t.statusCode,o.request=n.stripRequest(l),o.response=n.stripResponse(t),""===i&&(i=null);try{if((e=JSON.parse(i))&&(e.error&&(e=e.error),e.code&&(o.code=e.code),e.message&&(o.message=e.message)),null!=e){let t=(new s.models.CloudError).mapper();o.body=s.deserialize(t,e,"error.body")}}catch(e){return o.message=`Error "${e.message}" occurred in deserializing the responseBody `+`- "${i}" for the default response.`,r(o)}return r(o)}return""===i&&(i=null),r(null,null,l,t)})}function _listResourcesNext(e,t,r){let s=this.client;if(r||"function"!=typeof t||(r=t,t=null),!r)throw new Error("callback cannot be null.");try{if(null==e||"string"!=typeof e.valueOf())throw new Error("nextPageLink cannot be null or undefined and it must be of type string.");if(null!==this.client.acceptLanguage&&void 0!==this.client.acceptLanguage&&"string"!=typeof this.client.acceptLanguage.valueOf())throw new Error("this.client.acceptLanguage must be of type string.")}catch(e){return r(e)}let a="{nextLink}";a=a.replace("{nextLink}",e);let c=new o;if(c.method="GET",c.headers={},c.url=a,this.client.generateClientRequestId&&(c.headers["x-ms-client-request-id"]=i.generateUuid()),void 0!==this.client.acceptLanguage&&null!==this.client.acceptLanguage&&(c.headers["accept-language"]=this.client.acceptLanguage),t)for(let e in t.customHeaders)t.customHeaders.hasOwnProperty(e)&&(c.headers[e]=t.customHeaders[e]);return c.headers["Content-Type"]="application/json; charset=utf-8",c.body=null,s.pipeline(c,(e,t,i)=>{if(e)return r(e);let o=t.statusCode;if(200!==o){let e,o=new Error(i);o.statusCode=t.statusCode,o.request=n.stripRequest(c),o.response=n.stripResponse(t),""===i&&(i=null);try{if((e=JSON.parse(i))&&(e.error&&(e=e.error),e.code&&(o.code=e.code),e.message&&(o.message=e.message)),null!=e){let t=(new s.models.CloudError).mapper();o.body=s.deserialize(t,e,"error.body")}}catch(e){return o.message=`Error "${e.message}" occurred in deserializing the responseBody `+`- "${i}" for the default response.`,r(o)}return r(o)}let a=null;if(""===i&&(i=null),200===o){let e=null;try{if(e=JSON.parse(i),a=JSON.parse(i),null!=e){let t=(new s.models.ResourceListResult).mapper();a=s.deserialize(t,e,"result")}}catch(e){let o=new Error(`Error ${e} occurred in deserializing the responseBody - ${i}`);return o.request=n.stripRequest(c),o.response=n.stripResponse(t),r(o)}}return r(null,a,c,t)})}function _listNext(e,t,r){let s=this.client;if(r||"function"!=typeof t||(r=t,t=null),!r)throw new Error("callback cannot be null.");try{if(null==e||"string"!=typeof e.valueOf())throw new Error("nextPageLink cannot be null or undefined and it must be of type string.");if(null!==this.client.acceptLanguage&&void 0!==this.client.acceptLanguage&&"string"!=typeof this.client.acceptLanguage.valueOf())throw new Error("this.client.acceptLanguage must be of type string.")}catch(e){return r(e)}let a="{nextLink}";a=a.replace("{nextLink}",e);let c=new o;if(c.method="GET",c.headers={},c.url=a,this.client.generateClientRequestId&&(c.headers["x-ms-client-request-id"]=i.generateUuid()),void 0!==this.client.acceptLanguage&&null!==this.client.acceptLanguage&&(c.headers["accept-language"]=this.client.acceptLanguage),t)for(let e in t.customHeaders)t.customHeaders.hasOwnProperty(e)&&(c.headers[e]=t.customHeaders[e]);return c.headers["Content-Type"]="application/json; charset=utf-8",c.body=null,s.pipeline(c,(e,t,i)=>{if(e)return r(e);let o=t.statusCode;if(200!==o){let e,o=new Error(i);o.statusCode=t.statusCode,o.request=n.stripRequest(c),o.response=n.stripResponse(t),""===i&&(i=null);try{if((e=JSON.parse(i))&&(e.error&&(e=e.error),e.code&&(o.code=e.code),e.message&&(o.message=e.message)),null!=e){let t=(new s.models.CloudError).mapper();o.body=s.deserialize(t,e,"error.body")}}catch(e){return o.message=`Error "${e.message}" occurred in deserializing the responseBody `+`- "${i}" for the default response.`,r(o)}return r(o)}let a=null;if(""===i&&(i=null),200===o){let e=null;try{if(e=JSON.parse(i),a=JSON.parse(i),null!=e){let t=(new s.models.ResourceGroupListResult).mapper();a=s.deserialize(t,e,"result")}}catch(e){let o=new Error(`Error ${e} occurred in deserializing the responseBody - ${i}`);return o.request=n.stripRequest(c),o.response=n.stripResponse(t),r(o)}}return r(null,a,c,t)})}e.exports=class ResourceGroups{constructor(e){this.client=e,this._listResources=_listResources,this._checkExistence=_checkExistence,this._createOrUpdate=_createOrUpdate,this._deleteMethod=_deleteMethod,this._get=_get,this._patch=_patch,this._exportTemplate=_exportTemplate,this._list=_list,this._beginDeleteMethod=_beginDeleteMethod,this._listResourcesNext=_listResourcesNext,this._listNext=_listNext}listResourcesWithHttpOperationResponse(e,t){this.client;let r=this;return new Promise((i,o)=>{r._listResources(e,t,(e,t,r,s)=>{let a=new n.HttpOperationResponse(r,s);a.body=t,e?o(e):i(a)})})}listResources(e,t,r){this.client;let n=this;return r||"function"!=typeof t||(r=t,t=null),r?n._listResources(e,t,r):new Promise((r,i)=>{n._listResources(e,t,(e,t,n,o)=>{e?i(e):r(t)})})}checkExistenceWithHttpOperationResponse(e,t){this.client;let r=this;return new Promise((i,o)=>{r._checkExistence(e,t,(e,t,r,s)=>{let a=new n.HttpOperationResponse(r,s);a.body=t,e?o(e):i(a)})})}checkExistence(e,t,r){this.client;let n=this;return r||"function"!=typeof t||(r=t,t=null),r?n._checkExistence(e,t,r):new Promise((r,i)=>{n._checkExistence(e,t,(e,t,n,o)=>{e?i(e):r(t)})})}createOrUpdateWithHttpOperationResponse(e,t,r){this.client;let i=this;return new Promise((o,s)=>{i._createOrUpdate(e,t,r,(e,t,r,i)=>{let a=new n.HttpOperationResponse(r,i);a.body=t,e?s(e):o(a)})})}createOrUpdate(e,t,r,n){this.client;let i=this;return n||"function"!=typeof r||(n=r,r=null),n?i._createOrUpdate(e,t,r,n):new Promise((n,o)=>{i._createOrUpdate(e,t,r,(e,t,r,i)=>{e?o(e):n(t)})})}deleteMethodWithHttpOperationResponse(e,t){this.client;let r=this;return new Promise((i,o)=>{r._deleteMethod(e,t,(e,t,r,s)=>{let a=new n.HttpOperationResponse(r,s);a.body=t,e?o(e):i(a)})})}deleteMethod(e,t,r){this.client;let n=this;return r||"function"!=typeof t||(r=t,t=null),r?n._deleteMethod(e,t,r):new Promise((r,i)=>{n._deleteMethod(e,t,(e,t,n,o)=>{e?i(e):r(t)})})}getWithHttpOperationResponse(e,t){this.client;let r=this;return new Promise((i,o)=>{r._get(e,t,(e,t,r,s)=>{let a=new n.HttpOperationResponse(r,s);a.body=t,e?o(e):i(a)})})}get(e,t,r){this.client;let n=this;return r||"function"!=typeof t||(r=t,t=null),r?n._get(e,t,r):new Promise((r,i)=>{n._get(e,t,(e,t,n,o)=>{e?i(e):r(t)})})}patchWithHttpOperationResponse(e,t,r){this.client;let i=this;return new Promise((o,s)=>{i._patch(e,t,r,(e,t,r,i)=>{let a=new n.HttpOperationResponse(r,i);a.body=t,e?s(e):o(a)})})}patch(e,t,r,n){this.client;let i=this;return n||"function"!=typeof r||(n=r,r=null),n?i._patch(e,t,r,n):new Promise((n,o)=>{i._patch(e,t,r,(e,t,r,i)=>{e?o(e):n(t)})})}exportTemplateWithHttpOperationResponse(e,t,r){this.client;let i=this;return new Promise((o,s)=>{i._exportTemplate(e,t,r,(e,t,r,i)=>{let a=new n.HttpOperationResponse(r,i);a.body=t,e?s(e):o(a)})})}exportTemplate(e,t,r,n){this.client;let i=this;return n||"function"!=typeof r||(n=r,r=null),n?i._exportTemplate(e,t,r,n):new Promise((n,o)=>{i._exportTemplate(e,t,r,(e,t,r,i)=>{e?o(e):n(t)})})}listWithHttpOperationResponse(e){this.client;let t=this;return new Promise((r,i)=>{t._list(e,(e,t,o,s)=>{let a=new n.HttpOperationResponse(o,s);a.body=t,e?i(e):r(a)})})}list(e,t){this.client;let r=this;return t||"function"!=typeof e||(t=e,e=null),t?r._list(e,t):new Promise((t,n)=>{r._list(e,(e,r,i,o)=>{e?n(e):t(r)})})}beginDeleteMethodWithHttpOperationResponse(e,t){this.client;let r=this;return new Promise((i,o)=>{r._beginDeleteMethod(e,t,(e,t,r,s)=>{let a=new n.HttpOperationResponse(r,s);a.body=t,e?o(e):i(a)})})}beginDeleteMethod(e,t,r){this.client;let n=this;return r||"function"!=typeof t||(r=t,t=null),r?n._beginDeleteMethod(e,t,r):new Promise((r,i)=>{n._beginDeleteMethod(e,t,(e,t,n,o)=>{e?i(e):r(t)})})}listResourcesNextWithHttpOperationResponse(e,t){this.client;let r=this;return new Promise((i,o)=>{r._listResourcesNext(e,t,(e,t,r,s)=>{let a=new n.HttpOperationResponse(r,s);a.body=t,e?o(e):i(a)})})}listResourcesNext(e,t,r){this.client;let n=this;return r||"function"!=typeof t||(r=t,t=null),r?n._listResourcesNext(e,t,r):new Promise((r,i)=>{n._listResourcesNext(e,t,(e,t,n,o)=>{e?i(e):r(t)})})}listNextWithHttpOperationResponse(e,t){this.client;let r=this;return new Promise((i,o)=>{r._listNext(e,t,(e,t,r,s)=>{let a=new n.HttpOperationResponse(r,s);a.body=t,e?o(e):i(a)})})}listNext(e,t,r){this.client;let n=this;return r||"function"!=typeof t||(r=t,t=null),r?n._listNext(e,t,r):new Promise((r,i)=>{n._listNext(e,t,(e,t,n,o)=>{e?i(e):r(t)})})}}},function(e,t,r){"use strict";const n=r(8),i=r(9),o=n.WebResource;function _moveResources(e,t,r,i){let o=this.client;if(i||"function"!=typeof r||(i=r,r=null),!i)throw new Error("callback cannot be null.");this.beginMoveResources(e,t,r,(e,t,s,a)=>{if(e)return i(e);let c=new n.HttpOperationResponse;c.request=s,c.response=a,c.body=a.body,o.getLongRunningOperationResult(c,r,(e,t)=>{if(e)return i(e);s=t.request,a=t.response;let r=t.body;return""===r&&(r=null),i(null,null,s,a)})})}function _list(e,t){let r=this.client;if(t||"function"!=typeof e||(t=e,e=null),!t)throw new Error("callback cannot be null.");let s=e&&void 0!==e.filter?e.filter:void 0,a=e&&void 0!==e.expand?e.expand:void 0,c=e&&void 0!==e.top?e.top:void 0;try{if(null!=s&&"string"!=typeof s.valueOf())throw new Error("filter must be of type string.");if(null!=a&&"string"!=typeof a.valueOf())throw new Error("expand must be of type string.");if(null!=c&&"number"!=typeof c)throw new Error("top must be of type number.");if(null===this.client.apiVersion||void 0===this.client.apiVersion||"string"!=typeof this.client.apiVersion.valueOf())throw new Error("this.client.apiVersion cannot be null or undefined and it must be of type string.");if(null===this.client.subscriptionId||void 0===this.client.subscriptionId||"string"!=typeof this.client.subscriptionId.valueOf())throw new Error("this.client.subscriptionId cannot be null or undefined and it must be of type string.");if(null!==this.client.acceptLanguage&&void 0!==this.client.acceptLanguage&&"string"!=typeof this.client.acceptLanguage.valueOf())throw new Error("this.client.acceptLanguage must be of type string.")}catch(e){return t(e)}let u=this.client.baseUri,l=u+(u.endsWith("/")?"":"/")+"subscriptions/{subscriptionId}/resources";l=l.replace("{subscriptionId}",encodeURIComponent(this.client.subscriptionId));let p=[];null!=s&&p.push("$filter="+encodeURIComponent(s)),null!=a&&p.push("$expand="+encodeURIComponent(a)),null!=c&&p.push("$top="+encodeURIComponent(c.toString())),p.push("api-version="+encodeURIComponent(this.client.apiVersion)),p.length>0&&(l+="?"+p.join("&"));let d=new o;if(d.method="GET",d.headers={},d.url=l,this.client.generateClientRequestId&&(d.headers["x-ms-client-request-id"]=i.generateUuid()),void 0!==this.client.acceptLanguage&&null!==this.client.acceptLanguage&&(d.headers["accept-language"]=this.client.acceptLanguage),e)for(let t in e.customHeaders)e.customHeaders.hasOwnProperty(t)&&(d.headers[t]=e.customHeaders[t]);return d.headers["Content-Type"]="application/json; charset=utf-8",d.body=null,r.pipeline(d,(e,i,o)=>{if(e)return t(e);let s=i.statusCode;if(200!==s){let e,s=new Error(o);s.statusCode=i.statusCode,s.request=n.stripRequest(d),s.response=n.stripResponse(i),""===o&&(o=null);try{if((e=JSON.parse(o))&&(e.error&&(e=e.error),e.code&&(s.code=e.code),e.message&&(s.message=e.message)),null!=e){let t=(new r.models.CloudError).mapper();s.body=r.deserialize(t,e,"error.body")}}catch(e){return s.message=`Error "${e.message}" occurred in deserializing the responseBody `+`- "${o}" for the default response.`,t(s)}return t(s)}let a=null;if(""===o&&(o=null),200===s){let e=null;try{if(e=JSON.parse(o),a=JSON.parse(o),null!=e){let t=(new r.models.ResourceListResult).mapper();a=r.deserialize(t,e,"result")}}catch(e){let r=new Error(`Error ${e} occurred in deserializing the responseBody - ${o}`);return r.request=n.stripRequest(d),r.response=n.stripResponse(i),t(r)}}return t(null,a,d,i)})}function _checkExistence(e,t,r,s,a,c,u,l){let p=this.client;if(l||"function"!=typeof u||(l=u,u=null),!l)throw new Error("callback cannot be null.");try{if(null==e||"string"!=typeof e.valueOf())throw new Error("resourceGroupName cannot be null or undefined and it must be of type string.");if(null!=e){if(e.length>90)throw new Error('"resourceGroupName" should satisfy the constraint - "MaxLength": 90');if(e.length<1)throw new Error('"resourceGroupName" should satisfy the constraint - "MinLength": 1');if(null===e.match(/^[-\w\._\(\)]+$/))throw new Error('"resourceGroupName" should satisfy the constraint - "Pattern": /^[-w._()]+$/')}if(null==t||"string"!=typeof t.valueOf())throw new Error("resourceProviderNamespace cannot be null or undefined and it must be of type string.");if(null==r||"string"!=typeof r.valueOf())throw new Error("parentResourcePath cannot be null or undefined and it must be of type string.");if(null==s||"string"!=typeof s.valueOf())throw new Error("resourceType cannot be null or undefined and it must be of type string.");if(null==a||"string"!=typeof a.valueOf())throw new Error("resourceName cannot be null or undefined and it must be of type string.");if(null==c||"string"!=typeof c.valueOf())throw new Error("apiVersion cannot be null or undefined and it must be of type string.");if(null===this.client.subscriptionId||void 0===this.client.subscriptionId||"string"!=typeof this.client.subscriptionId.valueOf())throw new Error("this.client.subscriptionId cannot be null or undefined and it must be of type string.");if(null!==this.client.acceptLanguage&&void 0!==this.client.acceptLanguage&&"string"!=typeof this.client.acceptLanguage.valueOf())throw new Error("this.client.acceptLanguage must be of type string.")}catch(e){return l(e)}let d=this.client.baseUri,h=d+(d.endsWith("/")?"":"/")+"subscriptions/{subscriptionId}/resourcegroups/{resourceGroupName}/providers/{resourceProviderNamespace}/{parentResourcePath}/{resourceType}/{resourceName}";h=(h=(h=(h=(h=(h=h.replace("{resourceGroupName}",encodeURIComponent(e))).replace("{resourceProviderNamespace}",encodeURIComponent(t))).replace("{parentResourcePath}",r)).replace("{resourceType}",s)).replace("{resourceName}",encodeURIComponent(a))).replace("{subscriptionId}",encodeURIComponent(this.client.subscriptionId));let f=[];f.push("api-version="+encodeURIComponent(c)),f.length>0&&(h+="?"+f.join("&"));let m=new o;if(m.method="HEAD",m.headers={},m.url=h,this.client.generateClientRequestId&&(m.headers["x-ms-client-request-id"]=i.generateUuid()),void 0!==this.client.acceptLanguage&&null!==this.client.acceptLanguage&&(m.headers["accept-language"]=this.client.acceptLanguage),u)for(let e in u.customHeaders)u.customHeaders.hasOwnProperty(e)&&(m.headers[e]=u.customHeaders[e]);return m.headers["Content-Type"]="application/json; charset=utf-8",m.body=null,p.pipeline(m,(e,t,r)=>{if(e)return l(e);let i=t.statusCode;if(204!==i&&404!==i){let e,i=new Error(r);i.statusCode=t.statusCode,i.request=n.stripRequest(m),i.response=n.stripResponse(t),""===r&&(r=null);try{if((e=JSON.parse(r))&&(e.error&&(e=e.error),e.code&&(i.code=e.code),e.message&&(i.message=e.message)),null!=e){let t=(new p.models.CloudError).mapper();i.body=p.deserialize(t,e,"error.body")}}catch(e){return i.message=`Error "${e.message}" occurred in deserializing the responseBody `+`- "${r}" for the default response.`,l(i)}return l(i)}let o=null;return""===r&&(r=null),l(null,o=204===i,m,t)})}function _deleteMethod(e,t,r,i,o,s,a,c){let u=this.client;if(c||"function"!=typeof a||(c=a,a=null),!c)throw new Error("callback cannot be null.");this.beginDeleteMethod(e,t,r,i,o,s,a,(e,t,r,i)=>{if(e)return c(e);let o=new n.HttpOperationResponse;o.request=r,o.response=i,o.body=i.body,u.getLongRunningOperationResult(o,a,(e,t)=>{if(e)return c(e);r=t.request,i=t.response;let n=t.body;return""===n&&(n=null),c(null,null,r,i)})})}function _createOrUpdate(e,t,r,i,o,s,a,c,u){let l=this.client;if(u||"function"!=typeof c||(u=c,c=null),!u)throw new Error("callback cannot be null.");this.beginCreateOrUpdate(e,t,r,i,o,s,a,c,(e,t,r,i)=>{if(e)return u(e);let o=new n.HttpOperationResponse;o.request=r,o.response=i,o.body=i.body,l.getLongRunningOperationResult(o,c,(e,t)=>{if(e)return u(e);let o=null;r=t.request,i=t.response;let s=t.body;""===s&&(s=null);let a=null;try{if(a=JSON.parse(s),o=JSON.parse(s),null!=a){let e=(new l.models.GenericResource).mapper();o=l.deserialize(e,a,"result")}}catch(e){let t=new Error(`Error ${e} occurred in deserializing the responseBody - ${s}`);return t.request=n.stripRequest(r),t.response=n.stripResponse(i),u(t)}return u(null,o,r,i)})})}function _get(e,t,r,s,a,c,u,l){let p=this.client;if(l||"function"!=typeof u||(l=u,u=null),!l)throw new Error("callback cannot be null.");try{if(null==e||"string"!=typeof e.valueOf())throw new Error("resourceGroupName cannot be null or undefined and it must be of type string.");if(null!=e){if(e.length>90)throw new Error('"resourceGroupName" should satisfy the constraint - "MaxLength": 90');if(e.length<1)throw new Error('"resourceGroupName" should satisfy the constraint - "MinLength": 1');if(null===e.match(/^[-\w\._\(\)]+$/))throw new Error('"resourceGroupName" should satisfy the constraint - "Pattern": /^[-w._()]+$/')}if(null==t||"string"!=typeof t.valueOf())throw new Error("resourceProviderNamespace cannot be null or undefined and it must be of type string.");if(null==r||"string"!=typeof r.valueOf())throw new Error("parentResourcePath cannot be null or undefined and it must be of type string.");if(null==s||"string"!=typeof s.valueOf())throw new Error("resourceType cannot be null or undefined and it must be of type string.");if(null==a||"string"!=typeof a.valueOf())throw new Error("resourceName cannot be null or undefined and it must be of type string.");if(null==c||"string"!=typeof c.valueOf())throw new Error("apiVersion cannot be null or undefined and it must be of type string.");if(null===this.client.subscriptionId||void 0===this.client.subscriptionId||"string"!=typeof this.client.subscriptionId.valueOf())throw new Error("this.client.subscriptionId cannot be null or undefined and it must be of type string.");if(null!==this.client.acceptLanguage&&void 0!==this.client.acceptLanguage&&"string"!=typeof this.client.acceptLanguage.valueOf())throw new Error("this.client.acceptLanguage must be of type string.")}catch(e){return l(e)}let d=this.client.baseUri,h=d+(d.endsWith("/")?"":"/")+"subscriptions/{subscriptionId}/resourcegroups/{resourceGroupName}/providers/{resourceProviderNamespace}/{parentResourcePath}/{resourceType}/{resourceName}";h=(h=(h=(h=(h=(h=h.replace("{resourceGroupName}",encodeURIComponent(e))).replace("{resourceProviderNamespace}",encodeURIComponent(t))).replace("{parentResourcePath}",r)).replace("{resourceType}",s)).replace("{resourceName}",encodeURIComponent(a))).replace("{subscriptionId}",encodeURIComponent(this.client.subscriptionId));let f=[];f.push("api-version="+encodeURIComponent(c)),f.length>0&&(h+="?"+f.join("&"));let m=new o;if(m.method="GET",m.headers={},m.url=h,this.client.generateClientRequestId&&(m.headers["x-ms-client-request-id"]=i.generateUuid()),void 0!==this.client.acceptLanguage&&null!==this.client.acceptLanguage&&(m.headers["accept-language"]=this.client.acceptLanguage),u)for(let e in u.customHeaders)u.customHeaders.hasOwnProperty(e)&&(m.headers[e]=u.customHeaders[e]);return m.headers["Content-Type"]="application/json; charset=utf-8",m.body=null,p.pipeline(m,(e,t,r)=>{if(e)return l(e);let i=t.statusCode;if(200!==i){let e,i=new Error(r);i.statusCode=t.statusCode,i.request=n.stripRequest(m),i.response=n.stripResponse(t),""===r&&(r=null);try{if((e=JSON.parse(r))&&(e.error&&(e=e.error),e.code&&(i.code=e.code),e.message&&(i.message=e.message)),null!=e){let t=(new p.models.CloudError).mapper();i.body=p.deserialize(t,e,"error.body")}}catch(e){return i.message=`Error "${e.message}" occurred in deserializing the responseBody `+`- "${r}" for the default response.`,l(i)}return l(i)}let o=null;if(""===r&&(r=null),200===i){let e=null;try{if(e=JSON.parse(r),o=JSON.parse(r),null!=e){let t=(new p.models.GenericResource).mapper();o=p.deserialize(t,e,"result")}}catch(e){let i=new Error(`Error ${e} occurred in deserializing the responseBody - ${r}`);return i.request=n.stripRequest(m),i.response=n.stripResponse(t),l(i)}}return l(null,o,m,t)})}function _checkExistenceById(e,t,r,s){let a=this.client;if(s||"function"!=typeof r||(s=r,r=null),!s)throw new Error("callback cannot be null.");try{if(null==e||"string"!=typeof e.valueOf())throw new Error("resourceId cannot be null or undefined and it must be of type string.");if(null==t||"string"!=typeof t.valueOf())throw new Error("apiVersion cannot be null or undefined and it must be of type string.");if(null!==this.client.acceptLanguage&&void 0!==this.client.acceptLanguage&&"string"!=typeof this.client.acceptLanguage.valueOf())throw new Error("this.client.acceptLanguage must be of type string.")}catch(e){return s(e)}let c=this.client.baseUri,u=c+(c.endsWith("/")?"":"/")+"{resourceId}";u=u.replace("{resourceId}",e);let l=[];l.push("api-version="+encodeURIComponent(t)),l.length>0&&(u+="?"+l.join("&"));let p=new o;if(p.method="HEAD",p.headers={},p.url=u,this.client.generateClientRequestId&&(p.headers["x-ms-client-request-id"]=i.generateUuid()),void 0!==this.client.acceptLanguage&&null!==this.client.acceptLanguage&&(p.headers["accept-language"]=this.client.acceptLanguage),r)for(let e in r.customHeaders)r.customHeaders.hasOwnProperty(e)&&(p.headers[e]=r.customHeaders[e]);return p.headers["Content-Type"]="application/json; charset=utf-8",p.body=null,a.pipeline(p,(e,t,r)=>{if(e)return s(e);let i=t.statusCode;if(204!==i&&404!==i){let e,i=new Error(r);i.statusCode=t.statusCode,i.request=n.stripRequest(p),i.response=n.stripResponse(t),""===r&&(r=null);try{if((e=JSON.parse(r))&&(e.error&&(e=e.error),e.code&&(i.code=e.code),e.message&&(i.message=e.message)),null!=e){let t=(new a.models.CloudError).mapper();i.body=a.deserialize(t,e,"error.body")}}catch(e){return i.message=`Error "${e.message}" occurred in deserializing the responseBody `+`- "${r}" for the default response.`,s(i)}return s(i)}let o=null;return""===r&&(r=null),s(null,o=204===i,p,t)})}function _deleteById(e,t,r,i){let o=this.client;if(i||"function"!=typeof r||(i=r,r=null),!i)throw new Error("callback cannot be null.");this.beginDeleteById(e,t,r,(e,t,s,a)=>{if(e)return i(e);let c=new n.HttpOperationResponse;c.request=s,c.response=a,c.body=a.body,o.getLongRunningOperationResult(c,r,(e,t)=>{if(e)return i(e);s=t.request,a=t.response;let r=t.body;return""===r&&(r=null),i(null,null,s,a)})})}function _createOrUpdateById(e,t,r,i,o){let s=this.client;if(o||"function"!=typeof i||(o=i,i=null),!o)throw new Error("callback cannot be null.");this.beginCreateOrUpdateById(e,t,r,i,(e,t,r,a)=>{if(e)return o(e);let c=new n.HttpOperationResponse;c.request=r,c.response=a,c.body=a.body,s.getLongRunningOperationResult(c,i,(e,t)=>{if(e)return o(e);let i=null;r=t.request,a=t.response;let c=t.body;""===c&&(c=null);let u=null;try{if(u=JSON.parse(c),i=JSON.parse(c),null!=u){let e=(new s.models.GenericResource).mapper();i=s.deserialize(e,u,"result")}}catch(e){let t=new Error(`Error ${e} occurred in deserializing the responseBody - ${c}`);return t.request=n.stripRequest(r),t.response=n.stripResponse(a),o(t)}return o(null,i,r,a)})})}function _getById(e,t,r,s){let a=this.client;if(s||"function"!=typeof r||(s=r,r=null),!s)throw new Error("callback cannot be null.");try{if(null==e||"string"!=typeof e.valueOf())throw new Error("resourceId cannot be null or undefined and it must be of type string.");if(null==t||"string"!=typeof t.valueOf())throw new Error("apiVersion cannot be null or undefined and it must be of type string.");if(null!==this.client.acceptLanguage&&void 0!==this.client.acceptLanguage&&"string"!=typeof this.client.acceptLanguage.valueOf())throw new Error("this.client.acceptLanguage must be of type string.")}catch(e){return s(e)}let c=this.client.baseUri,u=c+(c.endsWith("/")?"":"/")+"{resourceId}";u=u.replace("{resourceId}",e);let l=[];l.push("api-version="+encodeURIComponent(t)),l.length>0&&(u+="?"+l.join("&"));let p=new o;if(p.method="GET",p.headers={},p.url=u,this.client.generateClientRequestId&&(p.headers["x-ms-client-request-id"]=i.generateUuid()),void 0!==this.client.acceptLanguage&&null!==this.client.acceptLanguage&&(p.headers["accept-language"]=this.client.acceptLanguage),r)for(let e in r.customHeaders)r.customHeaders.hasOwnProperty(e)&&(p.headers[e]=r.customHeaders[e]);return p.headers["Content-Type"]="application/json; charset=utf-8",p.body=null,a.pipeline(p,(e,t,r)=>{if(e)return s(e);let i=t.statusCode;if(200!==i){let e,i=new Error(r);i.statusCode=t.statusCode,i.request=n.stripRequest(p),i.response=n.stripResponse(t),""===r&&(r=null);try{if((e=JSON.parse(r))&&(e.error&&(e=e.error),e.code&&(i.code=e.code),e.message&&(i.message=e.message)),null!=e){let t=(new a.models.CloudError).mapper();i.body=a.deserialize(t,e,"error.body")}}catch(e){return i.message=`Error "${e.message}" occurred in deserializing the responseBody `+`- "${r}" for the default response.`,s(i)}return s(i)}let o=null;if(""===r&&(r=null),200===i){let e=null;try{if(e=JSON.parse(r),o=JSON.parse(r),null!=e){let t=(new a.models.GenericResource).mapper();o=a.deserialize(t,e,"result")}}catch(e){let i=new Error(`Error ${e} occurred in deserializing the responseBody - ${r}`);return i.request=n.stripRequest(p),i.response=n.stripResponse(t),s(i)}}return s(null,o,p,t)})}function _beginMoveResources(e,t,r,s){let a=this.client;if(s||"function"!=typeof r||(s=r,r=null),!s)throw new Error("callback cannot be null.");try{if(null==e||"string"!=typeof e.valueOf())throw new Error("sourceResourceGroupName cannot be null or undefined and it must be of type string.");if(null!=e){if(e.length>90)throw new Error('"sourceResourceGroupName" should satisfy the constraint - "MaxLength": 90');if(e.length<1)throw new Error('"sourceResourceGroupName" should satisfy the constraint - "MinLength": 1');if(null===e.match(/^[-\w\._\(\)]+$/))throw new Error('"sourceResourceGroupName" should satisfy the constraint - "Pattern": /^[-w._()]+$/')}if(null==t)throw new Error("parameters cannot be null or undefined.");if(null===this.client.apiVersion||void 0===this.client.apiVersion||"string"!=typeof this.client.apiVersion.valueOf())throw new Error("this.client.apiVersion cannot be null or undefined and it must be of type string.");if(null===this.client.subscriptionId||void 0===this.client.subscriptionId||"string"!=typeof this.client.subscriptionId.valueOf())throw new Error("this.client.subscriptionId cannot be null or undefined and it must be of type string.");if(null!==this.client.acceptLanguage&&void 0!==this.client.acceptLanguage&&"string"!=typeof this.client.acceptLanguage.valueOf())throw new Error("this.client.acceptLanguage must be of type string.")}catch(e){return s(e)}let c=this.client.baseUri,u=c+(c.endsWith("/")?"":"/")+"subscriptions/{subscriptionId}/resourceGroups/{sourceResourceGroupName}/moveResources";u=(u=u.replace("{sourceResourceGroupName}",encodeURIComponent(e))).replace("{subscriptionId}",encodeURIComponent(this.client.subscriptionId));let l=[];l.push("api-version="+encodeURIComponent(this.client.apiVersion)),l.length>0&&(u+="?"+l.join("&"));let p=new o;if(p.method="POST",p.headers={},p.url=u,this.client.generateClientRequestId&&(p.headers["x-ms-client-request-id"]=i.generateUuid()),void 0!==this.client.acceptLanguage&&null!==this.client.acceptLanguage&&(p.headers["accept-language"]=this.client.acceptLanguage),r)for(let e in r.customHeaders)r.customHeaders.hasOwnProperty(e)&&(p.headers[e]=r.customHeaders[e]);p.headers["Content-Type"]="application/json; charset=utf-8";let d=null,h=null;try{if(null!=t){let e=(new a.models.ResourcesMoveInfo).mapper();h=a.serialize(e,t,"parameters"),d=JSON.stringify(h)}}catch(e){let r=new Error(`Error "${e.message}" occurred in serializing the `+`payload - ${JSON.stringify(t,null,2)}.`);return s(r)}return p.body=d,a.pipeline(p,(e,t,r)=>{if(e)return s(e);let i=t.statusCode;if(202!==i&&204!==i){let e,i=new Error(r);i.statusCode=t.statusCode,i.request=n.stripRequest(p),i.response=n.stripResponse(t),""===r&&(r=null);try{if((e=JSON.parse(r))&&(e.error&&(e=e.error),e.code&&(i.code=e.code),e.message&&(i.message=e.message)),null!=e){let t=(new a.models.CloudError).mapper();i.body=a.deserialize(t,e,"error.body")}}catch(e){return i.message=`Error "${e.message}" occurred in deserializing the responseBody `+`- "${r}" for the default response.`,s(i)}return s(i)}return""===r&&(r=null),s(null,null,p,t)})}function _beginDeleteMethod(e,t,r,s,a,c,u,l){let p=this.client;if(l||"function"!=typeof u||(l=u,u=null),!l)throw new Error("callback cannot be null.");try{if(null==e||"string"!=typeof e.valueOf())throw new Error("resourceGroupName cannot be null or undefined and it must be of type string.");if(null!=e){if(e.length>90)throw new Error('"resourceGroupName" should satisfy the constraint - "MaxLength": 90');if(e.length<1)throw new Error('"resourceGroupName" should satisfy the constraint - "MinLength": 1');if(null===e.match(/^[-\w\._\(\)]+$/))throw new Error('"resourceGroupName" should satisfy the constraint - "Pattern": /^[-w._()]+$/')}if(null==t||"string"!=typeof t.valueOf())throw new Error("resourceProviderNamespace cannot be null or undefined and it must be of type string.");if(null==r||"string"!=typeof r.valueOf())throw new Error("parentResourcePath cannot be null or undefined and it must be of type string.");if(null==s||"string"!=typeof s.valueOf())throw new Error("resourceType cannot be null or undefined and it must be of type string.");if(null==a||"string"!=typeof a.valueOf())throw new Error("resourceName cannot be null or undefined and it must be of type string.");if(null==c||"string"!=typeof c.valueOf())throw new Error("apiVersion cannot be null or undefined and it must be of type string.");if(null===this.client.subscriptionId||void 0===this.client.subscriptionId||"string"!=typeof this.client.subscriptionId.valueOf())throw new Error("this.client.subscriptionId cannot be null or undefined and it must be of type string.");if(null!==this.client.acceptLanguage&&void 0!==this.client.acceptLanguage&&"string"!=typeof this.client.acceptLanguage.valueOf())throw new Error("this.client.acceptLanguage must be of type string.")}catch(e){return l(e)}let d=this.client.baseUri,h=d+(d.endsWith("/")?"":"/")+"subscriptions/{subscriptionId}/resourcegroups/{resourceGroupName}/providers/{resourceProviderNamespace}/{parentResourcePath}/{resourceType}/{resourceName}";h=(h=(h=(h=(h=(h=h.replace("{resourceGroupName}",encodeURIComponent(e))).replace("{resourceProviderNamespace}",encodeURIComponent(t))).replace("{parentResourcePath}",r)).replace("{resourceType}",s)).replace("{resourceName}",encodeURIComponent(a))).replace("{subscriptionId}",encodeURIComponent(this.client.subscriptionId));let f=[];f.push("api-version="+encodeURIComponent(c)),f.length>0&&(h+="?"+f.join("&"));let m=new o;if(m.method="DELETE",m.headers={},m.url=h,this.client.generateClientRequestId&&(m.headers["x-ms-client-request-id"]=i.generateUuid()),void 0!==this.client.acceptLanguage&&null!==this.client.acceptLanguage&&(m.headers["accept-language"]=this.client.acceptLanguage),u)for(let e in u.customHeaders)u.customHeaders.hasOwnProperty(e)&&(m.headers[e]=u.customHeaders[e]);return m.headers["Content-Type"]="application/json; charset=utf-8",m.body=null,p.pipeline(m,(e,t,r)=>{if(e)return l(e);let i=t.statusCode;if(200!==i&&204!==i&&202!==i){let e,i=new Error(r);i.statusCode=t.statusCode,i.request=n.stripRequest(m),i.response=n.stripResponse(t),""===r&&(r=null);try{if((e=JSON.parse(r))&&(e.error&&(e=e.error),e.code&&(i.code=e.code),e.message&&(i.message=e.message)),null!=e){let t=(new p.models.CloudError).mapper();i.body=p.deserialize(t,e,"error.body")}}catch(e){return i.message=`Error "${e.message}" occurred in deserializing the responseBody `+`- "${r}" for the default response.`,l(i)}return l(i)}return""===r&&(r=null),l(null,null,m,t)})}function _beginCreateOrUpdate(e,t,r,s,a,c,u,l,p){let d=this.client;if(p||"function"!=typeof l||(p=l,l=null),!p)throw new Error("callback cannot be null.");try{if(null==e||"string"!=typeof e.valueOf())throw new Error("resourceGroupName cannot be null or undefined and it must be of type string.");if(null!=e){if(e.length>90)throw new Error('"resourceGroupName" should satisfy the constraint - "MaxLength": 90');if(e.length<1)throw new Error('"resourceGroupName" should satisfy the constraint - "MinLength": 1');if(null===e.match(/^[-\w\._\(\)]+$/))throw new Error('"resourceGroupName" should satisfy the constraint - "Pattern": /^[-w._()]+$/')}if(null==t||"string"!=typeof t.valueOf())throw new Error("resourceProviderNamespace cannot be null or undefined and it must be of type string.");if(null==r||"string"!=typeof r.valueOf())throw new Error("parentResourcePath cannot be null or undefined and it must be of type string.");if(null==s||"string"!=typeof s.valueOf())throw new Error("resourceType cannot be null or undefined and it must be of type string.");if(null==a||"string"!=typeof a.valueOf())throw new Error("resourceName cannot be null or undefined and it must be of type string.");if(null==c||"string"!=typeof c.valueOf())throw new Error("apiVersion cannot be null or undefined and it must be of type string.");if(null==u)throw new Error("parameters cannot be null or undefined.");if(null===this.client.subscriptionId||void 0===this.client.subscriptionId||"string"!=typeof this.client.subscriptionId.valueOf())throw new Error("this.client.subscriptionId cannot be null or undefined and it must be of type string.");if(null!==this.client.acceptLanguage&&void 0!==this.client.acceptLanguage&&"string"!=typeof this.client.acceptLanguage.valueOf())throw new Error("this.client.acceptLanguage must be of type string.")}catch(e){return p(e)}let h=this.client.baseUri,f=h+(h.endsWith("/")?"":"/")+"subscriptions/{subscriptionId}/resourcegroups/{resourceGroupName}/providers/{resourceProviderNamespace}/{parentResourcePath}/{resourceType}/{resourceName}";f=(f=(f=(f=(f=(f=f.replace("{resourceGroupName}",encodeURIComponent(e))).replace("{resourceProviderNamespace}",encodeURIComponent(t))).replace("{parentResourcePath}",r)).replace("{resourceType}",s)).replace("{resourceName}",encodeURIComponent(a))).replace("{subscriptionId}",encodeURIComponent(this.client.subscriptionId));let m=[];m.push("api-version="+encodeURIComponent(c)),m.length>0&&(f+="?"+m.join("&"));let g=new o;if(g.method="PUT",g.headers={},g.url=f,this.client.generateClientRequestId&&(g.headers["x-ms-client-request-id"]=i.generateUuid()),void 0!==this.client.acceptLanguage&&null!==this.client.acceptLanguage&&(g.headers["accept-language"]=this.client.acceptLanguage),l)for(let e in l.customHeaders)l.customHeaders.hasOwnProperty(e)&&(g.headers[e]=l.customHeaders[e]);g.headers["Content-Type"]="application/json; charset=utf-8";let y=null,v=null;try{if(null!=u){let e=(new d.models.GenericResource).mapper();v=d.serialize(e,u,"parameters"),y=JSON.stringify(v)}}catch(e){let t=new Error(`Error "${e.message}" occurred in serializing the `+`payload - ${JSON.stringify(u,null,2)}.`);return p(t)}return g.body=y,d.pipeline(g,(e,t,r)=>{if(e)return p(e);let i=t.statusCode;if(201!==i&&200!==i&&202!==i){let e,i=new Error(r);i.statusCode=t.statusCode,i.request=n.stripRequest(g),i.response=n.stripResponse(t),""===r&&(r=null);try{if((e=JSON.parse(r))&&(e.error&&(e=e.error),e.code&&(i.code=e.code),e.message&&(i.message=e.message)),null!=e){let t=(new d.models.CloudError).mapper();i.body=d.deserialize(t,e,"error.body")}}catch(e){return i.message=`Error "${e.message}" occurred in deserializing the responseBody `+`- "${r}" for the default response.`,p(i)}return p(i)}let o=null;if(""===r&&(r=null),201===i){let e=null;try{if(e=JSON.parse(r),o=JSON.parse(r),null!=e){let t=(new d.models.GenericResource).mapper();o=d.deserialize(t,e,"result")}}catch(e){let i=new Error(`Error ${e} occurred in deserializing the responseBody - ${r}`);return i.request=n.stripRequest(g),i.response=n.stripResponse(t),p(i)}}if(200===i){let e=null;try{if(e=JSON.parse(r),o=JSON.parse(r),null!=e){let t=(new d.models.GenericResource).mapper();o=d.deserialize(t,e,"result")}}catch(e){let i=new Error(`Error ${e} occurred in deserializing the responseBody - ${r}`);return i.request=n.stripRequest(g),i.response=n.stripResponse(t),p(i)}}return p(null,o,g,t)})}function _beginDeleteById(e,t,r,s){let a=this.client;if(s||"function"!=typeof r||(s=r,r=null),!s)throw new Error("callback cannot be null.");try{if(null==e||"string"!=typeof e.valueOf())throw new Error("resourceId cannot be null or undefined and it must be of type string.");if(null==t||"string"!=typeof t.valueOf())throw new Error("apiVersion cannot be null or undefined and it must be of type string.");if(null!==this.client.acceptLanguage&&void 0!==this.client.acceptLanguage&&"string"!=typeof this.client.acceptLanguage.valueOf())throw new Error("this.client.acceptLanguage must be of type string.")}catch(e){return s(e)}let c=this.client.baseUri,u=c+(c.endsWith("/")?"":"/")+"{resourceId}";u=u.replace("{resourceId}",e);let l=[];l.push("api-version="+encodeURIComponent(t)),l.length>0&&(u+="?"+l.join("&"));let p=new o;if(p.method="DELETE",p.headers={},p.url=u,this.client.generateClientRequestId&&(p.headers["x-ms-client-request-id"]=i.generateUuid()),void 0!==this.client.acceptLanguage&&null!==this.client.acceptLanguage&&(p.headers["accept-language"]=this.client.acceptLanguage),r)for(let e in r.customHeaders)r.customHeaders.hasOwnProperty(e)&&(p.headers[e]=r.customHeaders[e]);return p.headers["Content-Type"]="application/json; charset=utf-8",p.body=null,a.pipeline(p,(e,t,r)=>{if(e)return s(e);let i=t.statusCode;if(200!==i&&204!==i&&202!==i){let e,i=new Error(r);i.statusCode=t.statusCode,i.request=n.stripRequest(p),i.response=n.stripResponse(t),""===r&&(r=null);try{if((e=JSON.parse(r))&&(e.error&&(e=e.error),e.code&&(i.code=e.code),e.message&&(i.message=e.message)),null!=e){let t=(new a.models.CloudError).mapper();i.body=a.deserialize(t,e,"error.body")}}catch(e){return i.message=`Error "${e.message}" occurred in deserializing the responseBody `+`- "${r}" for the default response.`,s(i)}return s(i)}return""===r&&(r=null),s(null,null,p,t)})}function _beginCreateOrUpdateById(e,t,r,s,a){let c=this.client;if(a||"function"!=typeof s||(a=s,s=null),!a)throw new Error("callback cannot be null.");try{if(null==e||"string"!=typeof e.valueOf())throw new Error("resourceId cannot be null or undefined and it must be of type string.");if(null==t||"string"!=typeof t.valueOf())throw new Error("apiVersion cannot be null or undefined and it must be of type string.");if(null==r)throw new Error("parameters cannot be null or undefined.");if(null!==this.client.acceptLanguage&&void 0!==this.client.acceptLanguage&&"string"!=typeof this.client.acceptLanguage.valueOf())throw new Error("this.client.acceptLanguage must be of type string.")}catch(e){return a(e)}let u=this.client.baseUri,l=u+(u.endsWith("/")?"":"/")+"{resourceId}";l=l.replace("{resourceId}",e);let p=[];p.push("api-version="+encodeURIComponent(t)),p.length>0&&(l+="?"+p.join("&"));let d=new o;if(d.method="PUT",d.headers={},d.url=l,this.client.generateClientRequestId&&(d.headers["x-ms-client-request-id"]=i.generateUuid()),void 0!==this.client.acceptLanguage&&null!==this.client.acceptLanguage&&(d.headers["accept-language"]=this.client.acceptLanguage),s)for(let e in s.customHeaders)s.customHeaders.hasOwnProperty(e)&&(d.headers[e]=s.customHeaders[e]);d.headers["Content-Type"]="application/json; charset=utf-8";let h=null,f=null;try{if(null!=r){let e=(new c.models.GenericResource).mapper();f=c.serialize(e,r,"parameters"),h=JSON.stringify(f)}}catch(e){let t=new Error(`Error "${e.message}" occurred in serializing the `+`payload - ${JSON.stringify(r,null,2)}.`);return a(t)}return d.body=h,c.pipeline(d,(e,t,r)=>{if(e)return a(e);let i=t.statusCode;if(201!==i&&200!==i&&202!==i){let e,i=new Error(r);i.statusCode=t.statusCode,i.request=n.stripRequest(d),i.response=n.stripResponse(t),""===r&&(r=null);try{if((e=JSON.parse(r))&&(e.error&&(e=e.error),e.code&&(i.code=e.code),e.message&&(i.message=e.message)),null!=e){let t=(new c.models.CloudError).mapper();i.body=c.deserialize(t,e,"error.body")}}catch(e){return i.message=`Error "${e.message}" occurred in deserializing the responseBody `+`- "${r}" for the default response.`,a(i)}return a(i)}let o=null;if(""===r&&(r=null),201===i){let e=null;try{if(e=JSON.parse(r),o=JSON.parse(r),null!=e){let t=(new c.models.GenericResource).mapper();o=c.deserialize(t,e,"result")}}catch(e){let i=new Error(`Error ${e} occurred in deserializing the responseBody - ${r}`);return i.request=n.stripRequest(d),i.response=n.stripResponse(t),a(i)}}if(200===i){let e=null;try{if(e=JSON.parse(r),o=JSON.parse(r),null!=e){let t=(new c.models.GenericResource).mapper();o=c.deserialize(t,e,"result")}}catch(e){let i=new Error(`Error ${e} occurred in deserializing the responseBody - ${r}`);return i.request=n.stripRequest(d),i.response=n.stripResponse(t),a(i)}}return a(null,o,d,t)})}function _listNext(e,t,r){let s=this.client;if(r||"function"!=typeof t||(r=t,t=null),!r)throw new Error("callback cannot be null.");try{if(null==e||"string"!=typeof e.valueOf())throw new Error("nextPageLink cannot be null or undefined and it must be of type string.");if(null!==this.client.acceptLanguage&&void 0!==this.client.acceptLanguage&&"string"!=typeof this.client.acceptLanguage.valueOf())throw new Error("this.client.acceptLanguage must be of type string.")}catch(e){return r(e)}let a="{nextLink}";a=a.replace("{nextLink}",e);let c=new o;if(c.method="GET",c.headers={},c.url=a,this.client.generateClientRequestId&&(c.headers["x-ms-client-request-id"]=i.generateUuid()),void 0!==this.client.acceptLanguage&&null!==this.client.acceptLanguage&&(c.headers["accept-language"]=this.client.acceptLanguage),t)for(let e in t.customHeaders)t.customHeaders.hasOwnProperty(e)&&(c.headers[e]=t.customHeaders[e]);return c.headers["Content-Type"]="application/json; charset=utf-8",c.body=null,s.pipeline(c,(e,t,i)=>{if(e)return r(e);let o=t.statusCode;if(200!==o){let e,o=new Error(i);o.statusCode=t.statusCode,o.request=n.stripRequest(c),o.response=n.stripResponse(t),""===i&&(i=null);try{if((e=JSON.parse(i))&&(e.error&&(e=e.error),e.code&&(o.code=e.code),e.message&&(o.message=e.message)),null!=e){let t=(new s.models.CloudError).mapper();o.body=s.deserialize(t,e,"error.body")}}catch(e){return o.message=`Error "${e.message}" occurred in deserializing the responseBody `+`- "${i}" for the default response.`,r(o)}return r(o)}let a=null;if(""===i&&(i=null),200===o){let e=null;try{if(e=JSON.parse(i),a=JSON.parse(i),null!=e){let t=(new s.models.ResourceListResult).mapper();a=s.deserialize(t,e,"result")}}catch(e){let o=new Error(`Error ${e} occurred in deserializing the responseBody - ${i}`);return o.request=n.stripRequest(c),o.response=n.stripResponse(t),r(o)}}return r(null,a,c,t)})}e.exports=class Resources{constructor(e){this.client=e,this._moveResources=_moveResources,this._list=_list,this._checkExistence=_checkExistence,this._deleteMethod=_deleteMethod,this._createOrUpdate=_createOrUpdate,this._get=_get,this._checkExistenceById=_checkExistenceById,this._deleteById=_deleteById,this._createOrUpdateById=_createOrUpdateById,this._getById=_getById,this._beginMoveResources=_beginMoveResources,this._beginDeleteMethod=_beginDeleteMethod,this._beginCreateOrUpdate=_beginCreateOrUpdate,this._beginDeleteById=_beginDeleteById,this._beginCreateOrUpdateById=_beginCreateOrUpdateById,this._listNext=_listNext}moveResourcesWithHttpOperationResponse(e,t,r){this.client;let i=this;return new Promise((o,s)=>{i._moveResources(e,t,r,(e,t,r,i)=>{let a=new n.HttpOperationResponse(r,i);a.body=t,e?s(e):o(a)})})}moveResources(e,t,r,n){this.client;let i=this;return n||"function"!=typeof r||(n=r,r=null),n?i._moveResources(e,t,r,n):new Promise((n,o)=>{i._moveResources(e,t,r,(e,t,r,i)=>{e?o(e):n(t)})})}listWithHttpOperationResponse(e){this.client;let t=this;return new Promise((r,i)=>{t._list(e,(e,t,o,s)=>{let a=new n.HttpOperationResponse(o,s);a.body=t,e?i(e):r(a)})})}list(e,t){this.client;let r=this;return t||"function"!=typeof e||(t=e,e=null),t?r._list(e,t):new Promise((t,n)=>{r._list(e,(e,r,i,o)=>{e?n(e):t(r)})})}checkExistenceWithHttpOperationResponse(e,t,r,i,o,s,a){this.client;let c=this;return new Promise((u,l)=>{c._checkExistence(e,t,r,i,o,s,a,(e,t,r,i)=>{let o=new n.HttpOperationResponse(r,i);o.body=t,e?l(e):u(o)})})}checkExistence(e,t,r,n,i,o,s,a){this.client;let c=this;return a||"function"!=typeof s||(a=s,s=null),a?c._checkExistence(e,t,r,n,i,o,s,a):new Promise((a,u)=>{c._checkExistence(e,t,r,n,i,o,s,(e,t,r,n)=>{e?u(e):a(t)})})}deleteMethodWithHttpOperationResponse(e,t,r,i,o,s,a){this.client;let c=this;return new Promise((u,l)=>{c._deleteMethod(e,t,r,i,o,s,a,(e,t,r,i)=>{let o=new n.HttpOperationResponse(r,i);o.body=t,e?l(e):u(o)})})}deleteMethod(e,t,r,n,i,o,s,a){this.client;let c=this;return a||"function"!=typeof s||(a=s,s=null),a?c._deleteMethod(e,t,r,n,i,o,s,a):new Promise((a,u)=>{c._deleteMethod(e,t,r,n,i,o,s,(e,t,r,n)=>{e?u(e):a(t)})})}createOrUpdateWithHttpOperationResponse(e,t,r,i,o,s,a,c){this.client;let u=this;return new Promise((l,p)=>{u._createOrUpdate(e,t,r,i,o,s,a,c,(e,t,r,i)=>{let o=new n.HttpOperationResponse(r,i);o.body=t,e?p(e):l(o)})})}createOrUpdate(e,t,r,n,i,o,s,a,c){this.client;let u=this;return c||"function"!=typeof a||(c=a,a=null),c?u._createOrUpdate(e,t,r,n,i,o,s,a,c):new Promise((c,l)=>{u._createOrUpdate(e,t,r,n,i,o,s,a,(e,t,r,n)=>{e?l(e):c(t)})})}getWithHttpOperationResponse(e,t,r,i,o,s,a){this.client;let c=this;return new Promise((u,l)=>{c._get(e,t,r,i,o,s,a,(e,t,r,i)=>{let o=new n.HttpOperationResponse(r,i);o.body=t,e?l(e):u(o)})})}get(e,t,r,n,i,o,s,a){this.client;let c=this;return a||"function"!=typeof s||(a=s,s=null),a?c._get(e,t,r,n,i,o,s,a):new Promise((a,u)=>{c._get(e,t,r,n,i,o,s,(e,t,r,n)=>{e?u(e):a(t)})})}checkExistenceByIdWithHttpOperationResponse(e,t,r){this.client;let i=this;return new Promise((o,s)=>{i._checkExistenceById(e,t,r,(e,t,r,i)=>{let a=new n.HttpOperationResponse(r,i);a.body=t,e?s(e):o(a)})})}checkExistenceById(e,t,r,n){this.client;let i=this;return n||"function"!=typeof r||(n=r,r=null),n?i._checkExistenceById(e,t,r,n):new Promise((n,o)=>{i._checkExistenceById(e,t,r,(e,t,r,i)=>{e?o(e):n(t)})})}deleteByIdWithHttpOperationResponse(e,t,r){this.client;let i=this;return new Promise((o,s)=>{i._deleteById(e,t,r,(e,t,r,i)=>{let a=new n.HttpOperationResponse(r,i);a.body=t,e?s(e):o(a)})})}deleteById(e,t,r,n){this.client;let i=this;return n||"function"!=typeof r||(n=r,r=null),n?i._deleteById(e,t,r,n):new Promise((n,o)=>{i._deleteById(e,t,r,(e,t,r,i)=>{e?o(e):n(t)})})}createOrUpdateByIdWithHttpOperationResponse(e,t,r,i){this.client;let o=this;return new Promise((s,a)=>{o._createOrUpdateById(e,t,r,i,(e,t,r,i)=>{let o=new n.HttpOperationResponse(r,i);o.body=t,e?a(e):s(o)})})}createOrUpdateById(e,t,r,n,i){this.client;let o=this;return i||"function"!=typeof n||(i=n,n=null),i?o._createOrUpdateById(e,t,r,n,i):new Promise((i,s)=>{o._createOrUpdateById(e,t,r,n,(e,t,r,n)=>{e?s(e):i(t)})})}getByIdWithHttpOperationResponse(e,t,r){this.client;let i=this;return new Promise((o,s)=>{i._getById(e,t,r,(e,t,r,i)=>{let a=new n.HttpOperationResponse(r,i);a.body=t,e?s(e):o(a)})})}getById(e,t,r,n){this.client;let i=this;return n||"function"!=typeof r||(n=r,r=null),n?i._getById(e,t,r,n):new Promise((n,o)=>{i._getById(e,t,r,(e,t,r,i)=>{e?o(e):n(t)})})}beginMoveResourcesWithHttpOperationResponse(e,t,r){this.client;let i=this;return new Promise((o,s)=>{i._beginMoveResources(e,t,r,(e,t,r,i)=>{let a=new n.HttpOperationResponse(r,i);a.body=t,e?s(e):o(a)})})}beginMoveResources(e,t,r,n){this.client;let i=this;return n||"function"!=typeof r||(n=r,r=null),n?i._beginMoveResources(e,t,r,n):new Promise((n,o)=>{i._beginMoveResources(e,t,r,(e,t,r,i)=>{e?o(e):n(t)})})}beginDeleteMethodWithHttpOperationResponse(e,t,r,i,o,s,a){this.client;let c=this;return new Promise((u,l)=>{c._beginDeleteMethod(e,t,r,i,o,s,a,(e,t,r,i)=>{let o=new n.HttpOperationResponse(r,i);o.body=t,e?l(e):u(o)})})}beginDeleteMethod(e,t,r,n,i,o,s,a){this.client;let c=this;return a||"function"!=typeof s||(a=s,s=null),a?c._beginDeleteMethod(e,t,r,n,i,o,s,a):new Promise((a,u)=>{c._beginDeleteMethod(e,t,r,n,i,o,s,(e,t,r,n)=>{e?u(e):a(t)})})}beginCreateOrUpdateWithHttpOperationResponse(e,t,r,i,o,s,a,c){this.client;let u=this;return new Promise((l,p)=>{u._beginCreateOrUpdate(e,t,r,i,o,s,a,c,(e,t,r,i)=>{let o=new n.HttpOperationResponse(r,i);o.body=t,e?p(e):l(o)})})}beginCreateOrUpdate(e,t,r,n,i,o,s,a,c){this.client;let u=this;return c||"function"!=typeof a||(c=a,a=null),c?u._beginCreateOrUpdate(e,t,r,n,i,o,s,a,c):new Promise((c,l)=>{u._beginCreateOrUpdate(e,t,r,n,i,o,s,a,(e,t,r,n)=>{e?l(e):c(t)})})}beginDeleteByIdWithHttpOperationResponse(e,t,r){this.client;let i=this;return new Promise((o,s)=>{i._beginDeleteById(e,t,r,(e,t,r,i)=>{let a=new n.HttpOperationResponse(r,i);a.body=t,e?s(e):o(a)})})}beginDeleteById(e,t,r,n){this.client;let i=this;return n||"function"!=typeof r||(n=r,r=null),n?i._beginDeleteById(e,t,r,n):new Promise((n,o)=>{i._beginDeleteById(e,t,r,(e,t,r,i)=>{e?o(e):n(t)})})}beginCreateOrUpdateByIdWithHttpOperationResponse(e,t,r,i){this.client;let o=this;return new Promise((s,a)=>{o._beginCreateOrUpdateById(e,t,r,i,(e,t,r,i)=>{let o=new n.HttpOperationResponse(r,i);o.body=t,e?a(e):s(o)})})}beginCreateOrUpdateById(e,t,r,n,i){this.client;let o=this;return i||"function"!=typeof n||(i=n,n=null),i?o._beginCreateOrUpdateById(e,t,r,n,i):new Promise((i,s)=>{o._beginCreateOrUpdateById(e,t,r,n,(e,t,r,n)=>{e?s(e):i(t)})})}listNextWithHttpOperationResponse(e,t){this.client;let r=this;return new Promise((i,o)=>{r._listNext(e,t,(e,t,r,s)=>{let a=new n.HttpOperationResponse(r,s);a.body=t,e?o(e):i(a)})})}listNext(e,t,r){this.client;let n=this;return r||"function"!=typeof t||(r=t,t=null),r?n._listNext(e,t,r):new Promise((r,i)=>{n._listNext(e,t,(e,t,n,o)=>{e?i(e):r(t)})})}}},function(e,t,r){"use strict";const n=r(8),i=r(9),o=n.WebResource;function _deleteValue(e,t,r,s){let a=this.client;if(s||"function"!=typeof r||(s=r,r=null),!s)throw new Error("callback cannot be null.");try{if(null==e||"string"!=typeof e.valueOf())throw new Error("tagName cannot be null or undefined and it must be of type string.");if(null==t||"string"!=typeof t.valueOf())throw new Error("tagValue cannot be null or undefined and it must be of type string.");if(null===this.client.apiVersion||void 0===this.client.apiVersion||"string"!=typeof this.client.apiVersion.valueOf())throw new Error("this.client.apiVersion cannot be null or undefined and it must be of type string.");if(null===this.client.subscriptionId||void 0===this.client.subscriptionId||"string"!=typeof this.client.subscriptionId.valueOf())throw new Error("this.client.subscriptionId cannot be null or undefined and it must be of type string.");if(null!==this.client.acceptLanguage&&void 0!==this.client.acceptLanguage&&"string"!=typeof this.client.acceptLanguage.valueOf())throw new Error("this.client.acceptLanguage must be of type string.")}catch(e){return s(e)}let c=this.client.baseUri,u=c+(c.endsWith("/")?"":"/")+"subscriptions/{subscriptionId}/tagNames/{tagName}/tagValues/{tagValue}";u=(u=(u=u.replace("{tagName}",encodeURIComponent(e))).replace("{tagValue}",encodeURIComponent(t))).replace("{subscriptionId}",encodeURIComponent(this.client.subscriptionId));let l=[];l.push("api-version="+encodeURIComponent(this.client.apiVersion)),l.length>0&&(u+="?"+l.join("&"));let p=new o;if(p.method="DELETE",p.headers={},p.url=u,this.client.generateClientRequestId&&(p.headers["x-ms-client-request-id"]=i.generateUuid()),void 0!==this.client.acceptLanguage&&null!==this.client.acceptLanguage&&(p.headers["accept-language"]=this.client.acceptLanguage),r)for(let e in r.customHeaders)r.customHeaders.hasOwnProperty(e)&&(p.headers[e]=r.customHeaders[e]);return p.headers["Content-Type"]="application/json; charset=utf-8",p.body=null,a.pipeline(p,(e,t,r)=>{if(e)return s(e);let i=t.statusCode;if(200!==i&&204!==i){let e,i=new Error(r);i.statusCode=t.statusCode,i.request=n.stripRequest(p),i.response=n.stripResponse(t),""===r&&(r=null);try{if((e=JSON.parse(r))&&(e.error&&(e=e.error),e.code&&(i.code=e.code),e.message&&(i.message=e.message)),null!=e){let t=(new a.models.CloudError).mapper();i.body=a.deserialize(t,e,"error.body")}}catch(e){return i.message=`Error "${e.message}" occurred in deserializing the responseBody `+`- "${r}" for the default response.`,s(i)}return s(i)}return""===r&&(r=null),s(null,null,p,t)})}function _createOrUpdateValue(e,t,r,s){let a=this.client;if(s||"function"!=typeof r||(s=r,r=null),!s)throw new Error("callback cannot be null.");try{if(null==e||"string"!=typeof e.valueOf())throw new Error("tagName cannot be null or undefined and it must be of type string.");if(null==t||"string"!=typeof t.valueOf())throw new Error("tagValue cannot be null or undefined and it must be of type string.");if(null===this.client.apiVersion||void 0===this.client.apiVersion||"string"!=typeof this.client.apiVersion.valueOf())throw new Error("this.client.apiVersion cannot be null or undefined and it must be of type string.");if(null===this.client.subscriptionId||void 0===this.client.subscriptionId||"string"!=typeof this.client.subscriptionId.valueOf())throw new Error("this.client.subscriptionId cannot be null or undefined and it must be of type string.");if(null!==this.client.acceptLanguage&&void 0!==this.client.acceptLanguage&&"string"!=typeof this.client.acceptLanguage.valueOf())throw new Error("this.client.acceptLanguage must be of type string.")}catch(e){return s(e)}let c=this.client.baseUri,u=c+(c.endsWith("/")?"":"/")+"subscriptions/{subscriptionId}/tagNames/{tagName}/tagValues/{tagValue}";u=(u=(u=u.replace("{tagName}",encodeURIComponent(e))).replace("{tagValue}",encodeURIComponent(t))).replace("{subscriptionId}",encodeURIComponent(this.client.subscriptionId));let l=[];l.push("api-version="+encodeURIComponent(this.client.apiVersion)),l.length>0&&(u+="?"+l.join("&"));let p=new o;if(p.method="PUT",p.headers={},p.url=u,this.client.generateClientRequestId&&(p.headers["x-ms-client-request-id"]=i.generateUuid()),void 0!==this.client.acceptLanguage&&null!==this.client.acceptLanguage&&(p.headers["accept-language"]=this.client.acceptLanguage),r)for(let e in r.customHeaders)r.customHeaders.hasOwnProperty(e)&&(p.headers[e]=r.customHeaders[e]);return p.headers["Content-Type"]="application/json; charset=utf-8",p.body=null,a.pipeline(p,(e,t,r)=>{if(e)return s(e);let i=t.statusCode;if(200!==i&&201!==i){let e,i=new Error(r);i.statusCode=t.statusCode,i.request=n.stripRequest(p),i.response=n.stripResponse(t),""===r&&(r=null);try{if((e=JSON.parse(r))&&(e.error&&(e=e.error),e.code&&(i.code=e.code),e.message&&(i.message=e.message)),null!=e){let t=(new a.models.CloudError).mapper();i.body=a.deserialize(t,e,"error.body")}}catch(e){return i.message=`Error "${e.message}" occurred in deserializing the responseBody `+`- "${r}" for the default response.`,s(i)}return s(i)}let o=null;if(""===r&&(r=null),200===i){let e=null;try{if(e=JSON.parse(r),o=JSON.parse(r),null!=e){let t=(new a.models.TagValue).mapper();o=a.deserialize(t,e,"result")}}catch(e){let i=new Error(`Error ${e} occurred in deserializing the responseBody - ${r}`);return i.request=n.stripRequest(p),i.response=n.stripResponse(t),s(i)}}if(201===i){let e=null;try{if(e=JSON.parse(r),o=JSON.parse(r),null!=e){let t=(new a.models.TagValue).mapper();o=a.deserialize(t,e,"result")}}catch(e){let i=new Error(`Error ${e} occurred in deserializing the responseBody - ${r}`);return i.request=n.stripRequest(p),i.response=n.stripResponse(t),s(i)}}return s(null,o,p,t)})}function _createOrUpdate(e,t,r){let s=this.client;if(r||"function"!=typeof t||(r=t,t=null),!r)throw new Error("callback cannot be null.");try{if(null==e||"string"!=typeof e.valueOf())throw new Error("tagName cannot be null or undefined and it must be of type string.");if(null===this.client.apiVersion||void 0===this.client.apiVersion||"string"!=typeof this.client.apiVersion.valueOf())throw new Error("this.client.apiVersion cannot be null or undefined and it must be of type string.");if(null===this.client.subscriptionId||void 0===this.client.subscriptionId||"string"!=typeof this.client.subscriptionId.valueOf())throw new Error("this.client.subscriptionId cannot be null or undefined and it must be of type string.");if(null!==this.client.acceptLanguage&&void 0!==this.client.acceptLanguage&&"string"!=typeof this.client.acceptLanguage.valueOf())throw new Error("this.client.acceptLanguage must be of type string.")}catch(e){return r(e)}let a=this.client.baseUri,c=a+(a.endsWith("/")?"":"/")+"subscriptions/{subscriptionId}/tagNames/{tagName}";c=(c=c.replace("{tagName}",encodeURIComponent(e))).replace("{subscriptionId}",encodeURIComponent(this.client.subscriptionId));let u=[];u.push("api-version="+encodeURIComponent(this.client.apiVersion)),u.length>0&&(c+="?"+u.join("&"));let l=new o;if(l.method="PUT",l.headers={},l.url=c,this.client.generateClientRequestId&&(l.headers["x-ms-client-request-id"]=i.generateUuid()),void 0!==this.client.acceptLanguage&&null!==this.client.acceptLanguage&&(l.headers["accept-language"]=this.client.acceptLanguage),t)for(let e in t.customHeaders)t.customHeaders.hasOwnProperty(e)&&(l.headers[e]=t.customHeaders[e]);return l.headers["Content-Type"]="application/json; charset=utf-8",l.body=null,s.pipeline(l,(e,t,i)=>{if(e)return r(e);let o=t.statusCode;if(200!==o&&201!==o){let e,o=new Error(i);o.statusCode=t.statusCode,o.request=n.stripRequest(l),o.response=n.stripResponse(t),""===i&&(i=null);try{if((e=JSON.parse(i))&&(e.error&&(e=e.error),e.code&&(o.code=e.code),e.message&&(o.message=e.message)),null!=e){let t=(new s.models.CloudError).mapper();o.body=s.deserialize(t,e,"error.body")}}catch(e){return o.message=`Error "${e.message}" occurred in deserializing the responseBody `+`- "${i}" for the default response.`,r(o)}return r(o)}let a=null;if(""===i&&(i=null),200===o){let e=null;try{if(e=JSON.parse(i),a=JSON.parse(i),null!=e){let t=(new s.models.TagDetails).mapper();a=s.deserialize(t,e,"result")}}catch(e){let o=new Error(`Error ${e} occurred in deserializing the responseBody - ${i}`);return o.request=n.stripRequest(l),o.response=n.stripResponse(t),r(o)}}if(201===o){let e=null;try{if(e=JSON.parse(i),a=JSON.parse(i),null!=e){let t=(new s.models.TagDetails).mapper();a=s.deserialize(t,e,"result")}}catch(e){let o=new Error(`Error ${e} occurred in deserializing the responseBody - ${i}`);return o.request=n.stripRequest(l),o.response=n.stripResponse(t),r(o)}}return r(null,a,l,t)})}function _deleteMethod(e,t,r){let s=this.client;if(r||"function"!=typeof t||(r=t,t=null),!r)throw new Error("callback cannot be null.");try{if(null==e||"string"!=typeof e.valueOf())throw new Error("tagName cannot be null or undefined and it must be of type string.");if(null===this.client.apiVersion||void 0===this.client.apiVersion||"string"!=typeof this.client.apiVersion.valueOf())throw new Error("this.client.apiVersion cannot be null or undefined and it must be of type string.");if(null===this.client.subscriptionId||void 0===this.client.subscriptionId||"string"!=typeof this.client.subscriptionId.valueOf())throw new Error("this.client.subscriptionId cannot be null or undefined and it must be of type string.");if(null!==this.client.acceptLanguage&&void 0!==this.client.acceptLanguage&&"string"!=typeof this.client.acceptLanguage.valueOf())throw new Error("this.client.acceptLanguage must be of type string.")}catch(e){return r(e)}let a=this.client.baseUri,c=a+(a.endsWith("/")?"":"/")+"subscriptions/{subscriptionId}/tagNames/{tagName}";c=(c=c.replace("{tagName}",encodeURIComponent(e))).replace("{subscriptionId}",encodeURIComponent(this.client.subscriptionId));let u=[];u.push("api-version="+encodeURIComponent(this.client.apiVersion)),u.length>0&&(c+="?"+u.join("&"));let l=new o;if(l.method="DELETE",l.headers={},l.url=c,this.client.generateClientRequestId&&(l.headers["x-ms-client-request-id"]=i.generateUuid()),void 0!==this.client.acceptLanguage&&null!==this.client.acceptLanguage&&(l.headers["accept-language"]=this.client.acceptLanguage),t)for(let e in t.customHeaders)t.customHeaders.hasOwnProperty(e)&&(l.headers[e]=t.customHeaders[e]);return l.headers["Content-Type"]="application/json; charset=utf-8",l.body=null,s.pipeline(l,(e,t,i)=>{if(e)return r(e);let o=t.statusCode;if(200!==o&&204!==o){let e,o=new Error(i);o.statusCode=t.statusCode,o.request=n.stripRequest(l),o.response=n.stripResponse(t),""===i&&(i=null);try{if((e=JSON.parse(i))&&(e.error&&(e=e.error),e.code&&(o.code=e.code),e.message&&(o.message=e.message)),null!=e){let t=(new s.models.CloudError).mapper();o.body=s.deserialize(t,e,"error.body")}}catch(e){return o.message=`Error "${e.message}" occurred in deserializing the responseBody `+`- "${i}" for the default response.`,r(o)}return r(o)}return""===i&&(i=null),r(null,null,l,t)})}function _list(e,t){let r=this.client;if(t||"function"!=typeof e||(t=e,e=null),!t)throw new Error("callback cannot be null.");try{if(null===this.client.apiVersion||void 0===this.client.apiVersion||"string"!=typeof this.client.apiVersion.valueOf())throw new Error("this.client.apiVersion cannot be null or undefined and it must be of type string.");if(null===this.client.subscriptionId||void 0===this.client.subscriptionId||"string"!=typeof this.client.subscriptionId.valueOf())throw new Error("this.client.subscriptionId cannot be null or undefined and it must be of type string.");if(null!==this.client.acceptLanguage&&void 0!==this.client.acceptLanguage&&"string"!=typeof this.client.acceptLanguage.valueOf())throw new Error("this.client.acceptLanguage must be of type string.")}catch(e){return t(e)}let s=this.client.baseUri,a=s+(s.endsWith("/")?"":"/")+"subscriptions/{subscriptionId}/tagNames";a=a.replace("{subscriptionId}",encodeURIComponent(this.client.subscriptionId));let c=[];c.push("api-version="+encodeURIComponent(this.client.apiVersion)),c.length>0&&(a+="?"+c.join("&"));let u=new o;if(u.method="GET",u.headers={},u.url=a,this.client.generateClientRequestId&&(u.headers["x-ms-client-request-id"]=i.generateUuid()),void 0!==this.client.acceptLanguage&&null!==this.client.acceptLanguage&&(u.headers["accept-language"]=this.client.acceptLanguage),e)for(let t in e.customHeaders)e.customHeaders.hasOwnProperty(t)&&(u.headers[t]=e.customHeaders[t]);return u.headers["Content-Type"]="application/json; charset=utf-8",u.body=null,r.pipeline(u,(e,i,o)=>{if(e)return t(e);let s=i.statusCode;if(200!==s){let e,s=new Error(o);s.statusCode=i.statusCode,s.request=n.stripRequest(u),s.response=n.stripResponse(i),""===o&&(o=null);try{if((e=JSON.parse(o))&&(e.error&&(e=e.error),e.code&&(s.code=e.code),e.message&&(s.message=e.message)),null!=e){let t=(new r.models.CloudError).mapper();s.body=r.deserialize(t,e,"error.body")}}catch(e){return s.message=`Error "${e.message}" occurred in deserializing the responseBody `+`- "${o}" for the default response.`,t(s)}return t(s)}let a=null;if(""===o&&(o=null),200===s){let e=null;try{if(e=JSON.parse(o),a=JSON.parse(o),null!=e){let t=(new r.models.TagsListResult).mapper();a=r.deserialize(t,e,"result")}}catch(e){let r=new Error(`Error ${e} occurred in deserializing the responseBody - ${o}`);return r.request=n.stripRequest(u),r.response=n.stripResponse(i),t(r)}}return t(null,a,u,i)})}function _listNext(e,t,r){let s=this.client;if(r||"function"!=typeof t||(r=t,t=null),!r)throw new Error("callback cannot be null.");try{if(null==e||"string"!=typeof e.valueOf())throw new Error("nextPageLink cannot be null or undefined and it must be of type string.");if(null!==this.client.acceptLanguage&&void 0!==this.client.acceptLanguage&&"string"!=typeof this.client.acceptLanguage.valueOf())throw new Error("this.client.acceptLanguage must be of type string.")}catch(e){return r(e)}let a="{nextLink}";a=a.replace("{nextLink}",e);let c=new o;if(c.method="GET",c.headers={},c.url=a,this.client.generateClientRequestId&&(c.headers["x-ms-client-request-id"]=i.generateUuid()),void 0!==this.client.acceptLanguage&&null!==this.client.acceptLanguage&&(c.headers["accept-language"]=this.client.acceptLanguage),t)for(let e in t.customHeaders)t.customHeaders.hasOwnProperty(e)&&(c.headers[e]=t.customHeaders[e]);return c.headers["Content-Type"]="application/json; charset=utf-8",c.body=null,s.pipeline(c,(e,t,i)=>{if(e)return r(e);let o=t.statusCode;if(200!==o){let e,o=new Error(i);o.statusCode=t.statusCode,o.request=n.stripRequest(c),o.response=n.stripResponse(t),""===i&&(i=null);try{if((e=JSON.parse(i))&&(e.error&&(e=e.error),e.code&&(o.code=e.code),e.message&&(o.message=e.message)),null!=e){let t=(new s.models.CloudError).mapper();o.body=s.deserialize(t,e,"error.body")}}catch(e){return o.message=`Error "${e.message}" occurred in deserializing the responseBody `+`- "${i}" for the default response.`,r(o)}return r(o)}let a=null;if(""===i&&(i=null),200===o){let e=null;try{if(e=JSON.parse(i),a=JSON.parse(i),null!=e){let t=(new s.models.TagsListResult).mapper();a=s.deserialize(t,e,"result")}}catch(e){let o=new Error(`Error ${e} occurred in deserializing the responseBody - ${i}`);return o.request=n.stripRequest(c),o.response=n.stripResponse(t),r(o)}}return r(null,a,c,t)})}e.exports=class Tags{constructor(e){this.client=e,this._deleteValue=_deleteValue,this._createOrUpdateValue=_createOrUpdateValue,this._createOrUpdate=_createOrUpdate,this._deleteMethod=_deleteMethod,this._list=_list,this._listNext=_listNext}deleteValueWithHttpOperationResponse(e,t,r){this.client;let i=this;return new Promise((o,s)=>{i._deleteValue(e,t,r,(e,t,r,i)=>{let a=new n.HttpOperationResponse(r,i);a.body=t,e?s(e):o(a)})})}deleteValue(e,t,r,n){this.client;let i=this;return n||"function"!=typeof r||(n=r,r=null),n?i._deleteValue(e,t,r,n):new Promise((n,o)=>{i._deleteValue(e,t,r,(e,t,r,i)=>{e?o(e):n(t)})})}createOrUpdateValueWithHttpOperationResponse(e,t,r){this.client;let i=this;return new Promise((o,s)=>{i._createOrUpdateValue(e,t,r,(e,t,r,i)=>{let a=new n.HttpOperationResponse(r,i);a.body=t,e?s(e):o(a)})})}createOrUpdateValue(e,t,r,n){this.client;let i=this;return n||"function"!=typeof r||(n=r,r=null),n?i._createOrUpdateValue(e,t,r,n):new Promise((n,o)=>{i._createOrUpdateValue(e,t,r,(e,t,r,i)=>{e?o(e):n(t)})})}createOrUpdateWithHttpOperationResponse(e,t){this.client;let r=this;return new Promise((i,o)=>{r._createOrUpdate(e,t,(e,t,r,s)=>{let a=new n.HttpOperationResponse(r,s);a.body=t,e?o(e):i(a)})})}createOrUpdate(e,t,r){this.client;let n=this;return r||"function"!=typeof t||(r=t,t=null),r?n._createOrUpdate(e,t,r):new Promise((r,i)=>{n._createOrUpdate(e,t,(e,t,n,o)=>{e?i(e):r(t)})})}deleteMethodWithHttpOperationResponse(e,t){this.client;let r=this;return new Promise((i,o)=>{r._deleteMethod(e,t,(e,t,r,s)=>{let a=new n.HttpOperationResponse(r,s);a.body=t,e?o(e):i(a)})})}deleteMethod(e,t,r){this.client;let n=this;return r||"function"!=typeof t||(r=t,t=null),r?n._deleteMethod(e,t,r):new Promise((r,i)=>{n._deleteMethod(e,t,(e,t,n,o)=>{e?i(e):r(t)})})}listWithHttpOperationResponse(e){this.client;let t=this;return new Promise((r,i)=>{t._list(e,(e,t,o,s)=>{let a=new n.HttpOperationResponse(o,s);a.body=t,e?i(e):r(a)})})}list(e,t){this.client;let r=this;return t||"function"!=typeof e||(t=e,e=null),t?r._list(e,t):new Promise((t,n)=>{r._list(e,(e,r,i,o)=>{e?n(e):t(r)})})}listNextWithHttpOperationResponse(e,t){this.client;let r=this;return new Promise((i,o)=>{r._listNext(e,t,(e,t,r,s)=>{let a=new n.HttpOperationResponse(r,s);a.body=t,e?o(e):i(a)})})}listNext(e,t,r){this.client;let n=this;return r||"function"!=typeof t||(r=t,t=null),r?n._listNext(e,t,r):new Promise((r,i)=>{n._listNext(e,t,(e,t,n,o)=>{e?i(e):r(t)})})}}},function(e,t,r){"use strict";const n=r(8),i=r(9),o=n.WebResource;function _get(e,t,r,s,a){let c=this.client;if(a||"function"!=typeof s||(a=s,s=null),!a)throw new Error("callback cannot be null.");try{if(null==e||"string"!=typeof e.valueOf())throw new Error("resourceGroupName cannot be null or undefined and it must be of type string.");if(null!=e){if(e.length>90)throw new Error('"resourceGroupName" should satisfy the constraint - "MaxLength": 90');if(e.length<1)throw new Error('"resourceGroupName" should satisfy the constraint - "MinLength": 1');if(null===e.match(/^[-\w\._\(\)]+$/))throw new Error('"resourceGroupName" should satisfy the constraint - "Pattern": /^[-w._()]+$/')}if(null==t||"string"!=typeof t.valueOf())throw new Error("deploymentName cannot be null or undefined and it must be of type string.");if(null!=t){if(t.length>64)throw new Error('"deploymentName" should satisfy the constraint - "MaxLength": 64');if(t.length<1)throw new Error('"deploymentName" should satisfy the constraint - "MinLength": 1');if(null===t.match(/^[-\w\._\(\)]+$/))throw new Error('"deploymentName" should satisfy the constraint - "Pattern": /^[-w._()]+$/')}if(null==r||"string"!=typeof r.valueOf())throw new Error("operationId cannot be null or undefined and it must be of type string.");if(null===this.client.apiVersion||void 0===this.client.apiVersion||"string"!=typeof this.client.apiVersion.valueOf())throw new Error("this.client.apiVersion cannot be null or undefined and it must be of type string.");if(null===this.client.subscriptionId||void 0===this.client.subscriptionId||"string"!=typeof this.client.subscriptionId.valueOf())throw new Error("this.client.subscriptionId cannot be null or undefined and it must be of type string.");if(null!==this.client.acceptLanguage&&void 0!==this.client.acceptLanguage&&"string"!=typeof this.client.acceptLanguage.valueOf())throw new Error("this.client.acceptLanguage must be of type string.")}catch(e){return a(e)}let u=this.client.baseUri,l=u+(u.endsWith("/")?"":"/")+"subscriptions/{subscriptionId}/resourcegroups/{resourceGroupName}/deployments/{deploymentName}/operations/{operationId}";l=(l=(l=(l=l.replace("{resourceGroupName}",encodeURIComponent(e))).replace("{deploymentName}",encodeURIComponent(t))).replace("{operationId}",encodeURIComponent(r))).replace("{subscriptionId}",encodeURIComponent(this.client.subscriptionId));let p=[];p.push("api-version="+encodeURIComponent(this.client.apiVersion)),p.length>0&&(l+="?"+p.join("&"));let d=new o;if(d.method="GET",d.headers={},d.url=l,this.client.generateClientRequestId&&(d.headers["x-ms-client-request-id"]=i.generateUuid()),void 0!==this.client.acceptLanguage&&null!==this.client.acceptLanguage&&(d.headers["accept-language"]=this.client.acceptLanguage),s)for(let e in s.customHeaders)s.customHeaders.hasOwnProperty(e)&&(d.headers[e]=s.customHeaders[e]);return d.headers["Content-Type"]="application/json; charset=utf-8",d.body=null,c.pipeline(d,(e,t,r)=>{if(e)return a(e);let i=t.statusCode;if(200!==i){let e,i=new Error(r);i.statusCode=t.statusCode,i.request=n.stripRequest(d),i.response=n.stripResponse(t),""===r&&(r=null);try{if((e=JSON.parse(r))&&(e.error&&(e=e.error),e.code&&(i.code=e.code),e.message&&(i.message=e.message)),null!=e){let t=(new c.models.CloudError).mapper();i.body=c.deserialize(t,e,"error.body")}}catch(e){return i.message=`Error "${e.message}" occurred in deserializing the responseBody `+`- "${r}" for the default response.`,a(i)}return a(i)}let o=null;if(""===r&&(r=null),200===i){let e=null;try{if(e=JSON.parse(r),o=JSON.parse(r),null!=e){let t=(new c.models.DeploymentOperation).mapper();o=c.deserialize(t,e,"result")}}catch(e){let i=new Error(`Error ${e} occurred in deserializing the responseBody - ${r}`);return i.request=n.stripRequest(d),i.response=n.stripResponse(t),a(i)}}return a(null,o,d,t)})}function _list(e,t,r,s){let a=this.client;if(s||"function"!=typeof r||(s=r,r=null),!s)throw new Error("callback cannot be null.");let c=r&&void 0!==r.top?r.top:void 0;try{if(null==e||"string"!=typeof e.valueOf())throw new Error("resourceGroupName cannot be null or undefined and it must be of type string.");if(null!=e){if(e.length>90)throw new Error('"resourceGroupName" should satisfy the constraint - "MaxLength": 90');if(e.length<1)throw new Error('"resourceGroupName" should satisfy the constraint - "MinLength": 1');if(null===e.match(/^[-\w\._\(\)]+$/))throw new Error('"resourceGroupName" should satisfy the constraint - "Pattern": /^[-w._()]+$/')}if(null==t||"string"!=typeof t.valueOf())throw new Error("deploymentName cannot be null or undefined and it must be of type string.");if(null!=t){if(t.length>64)throw new Error('"deploymentName" should satisfy the constraint - "MaxLength": 64');if(t.length<1)throw new Error('"deploymentName" should satisfy the constraint - "MinLength": 1');if(null===t.match(/^[-\w\._\(\)]+$/))throw new Error('"deploymentName" should satisfy the constraint - "Pattern": /^[-w._()]+$/')}if(null!=c&&"number"!=typeof c)throw new Error("top must be of type number.");if(null===this.client.apiVersion||void 0===this.client.apiVersion||"string"!=typeof this.client.apiVersion.valueOf())throw new Error("this.client.apiVersion cannot be null or undefined and it must be of type string.");if(null===this.client.subscriptionId||void 0===this.client.subscriptionId||"string"!=typeof this.client.subscriptionId.valueOf())throw new Error("this.client.subscriptionId cannot be null or undefined and it must be of type string.");if(null!==this.client.acceptLanguage&&void 0!==this.client.acceptLanguage&&"string"!=typeof this.client.acceptLanguage.valueOf())throw new Error("this.client.acceptLanguage must be of type string.")}catch(e){return s(e)}let u=this.client.baseUri,l=u+(u.endsWith("/")?"":"/")+"subscriptions/{subscriptionId}/resourcegroups/{resourceGroupName}/deployments/{deploymentName}/operations";l=(l=(l=l.replace("{resourceGroupName}",encodeURIComponent(e))).replace("{deploymentName}",encodeURIComponent(t))).replace("{subscriptionId}",encodeURIComponent(this.client.subscriptionId));let p=[];null!=c&&p.push("$top="+encodeURIComponent(c.toString())),p.push("api-version="+encodeURIComponent(this.client.apiVersion)),p.length>0&&(l+="?"+p.join("&"));let d=new o;if(d.method="GET",d.headers={},d.url=l,this.client.generateClientRequestId&&(d.headers["x-ms-client-request-id"]=i.generateUuid()),void 0!==this.client.acceptLanguage&&null!==this.client.acceptLanguage&&(d.headers["accept-language"]=this.client.acceptLanguage),r)for(let e in r.customHeaders)r.customHeaders.hasOwnProperty(e)&&(d.headers[e]=r.customHeaders[e]);return d.headers["Content-Type"]="application/json; charset=utf-8",d.body=null,a.pipeline(d,(e,t,r)=>{if(e)return s(e);let i=t.statusCode;if(200!==i){let e,i=new Error(r);i.statusCode=t.statusCode,i.request=n.stripRequest(d),i.response=n.stripResponse(t),""===r&&(r=null);try{if((e=JSON.parse(r))&&(e.error&&(e=e.error),e.code&&(i.code=e.code),e.message&&(i.message=e.message)),null!=e){let t=(new a.models.CloudError).mapper();i.body=a.deserialize(t,e,"error.body")}}catch(e){return i.message=`Error "${e.message}" occurred in deserializing the responseBody `+`- "${r}" for the default response.`,s(i)}return s(i)}let o=null;if(""===r&&(r=null),200===i){let e=null;try{if(e=JSON.parse(r),o=JSON.parse(r),null!=e){let t=(new a.models.DeploymentOperationsListResult).mapper();o=a.deserialize(t,e,"result")}}catch(e){let i=new Error(`Error ${e} occurred in deserializing the responseBody - ${r}`);return i.request=n.stripRequest(d),i.response=n.stripResponse(t),s(i)}}return s(null,o,d,t)})}function _listNext(e,t,r){let s=this.client;if(r||"function"!=typeof t||(r=t,t=null),!r)throw new Error("callback cannot be null.");try{if(null==e||"string"!=typeof e.valueOf())throw new Error("nextPageLink cannot be null or undefined and it must be of type string.");if(null!==this.client.acceptLanguage&&void 0!==this.client.acceptLanguage&&"string"!=typeof this.client.acceptLanguage.valueOf())throw new Error("this.client.acceptLanguage must be of type string.")}catch(e){return r(e)}let a="{nextLink}";a=a.replace("{nextLink}",e);let c=new o;if(c.method="GET",c.headers={},c.url=a,this.client.generateClientRequestId&&(c.headers["x-ms-client-request-id"]=i.generateUuid()),void 0!==this.client.acceptLanguage&&null!==this.client.acceptLanguage&&(c.headers["accept-language"]=this.client.acceptLanguage),t)for(let e in t.customHeaders)t.customHeaders.hasOwnProperty(e)&&(c.headers[e]=t.customHeaders[e]);return c.headers["Content-Type"]="application/json; charset=utf-8",c.body=null,s.pipeline(c,(e,t,i)=>{if(e)return r(e);let o=t.statusCode;if(200!==o){let e,o=new Error(i);o.statusCode=t.statusCode,o.request=n.stripRequest(c),o.response=n.stripResponse(t),""===i&&(i=null);try{if((e=JSON.parse(i))&&(e.error&&(e=e.error),e.code&&(o.code=e.code),e.message&&(o.message=e.message)),null!=e){let t=(new s.models.CloudError).mapper();o.body=s.deserialize(t,e,"error.body")}}catch(e){return o.message=`Error "${e.message}" occurred in deserializing the responseBody `+`- "${i}" for the default response.`,r(o)}return r(o)}let a=null;if(""===i&&(i=null),200===o){let e=null;try{if(e=JSON.parse(i),a=JSON.parse(i),null!=e){let t=(new s.models.DeploymentOperationsListResult).mapper();a=s.deserialize(t,e,"result")}}catch(e){let o=new Error(`Error ${e} occurred in deserializing the responseBody - ${i}`);return o.request=n.stripRequest(c),o.response=n.stripResponse(t),r(o)}}return r(null,a,c,t)})}e.exports=class DeploymentOperations{constructor(e){this.client=e,this._get=_get,this._list=_list,this._listNext=_listNext}getWithHttpOperationResponse(e,t,r,i){this.client;let o=this;return new Promise((s,a)=>{o._get(e,t,r,i,(e,t,r,i)=>{let o=new n.HttpOperationResponse(r,i);o.body=t,e?a(e):s(o)})})}get(e,t,r,n,i){this.client;let o=this;return i||"function"!=typeof n||(i=n,n=null),i?o._get(e,t,r,n,i):new Promise((i,s)=>{o._get(e,t,r,n,(e,t,r,n)=>{e?s(e):i(t)})})}listWithHttpOperationResponse(e,t,r){this.client;let i=this;return new Promise((o,s)=>{i._list(e,t,r,(e,t,r,i)=>{let a=new n.HttpOperationResponse(r,i);a.body=t,e?s(e):o(a)})})}list(e,t,r,n){this.client;let i=this;return n||"function"!=typeof r||(n=r,r=null),n?i._list(e,t,r,n):new Promise((n,o)=>{i._list(e,t,r,(e,t,r,i)=>{e?o(e):n(t)})})}listNextWithHttpOperationResponse(e,t){this.client;let r=this;return new Promise((i,o)=>{r._listNext(e,t,(e,t,r,s)=>{let a=new n.HttpOperationResponse(r,s);a.body=t,e?o(e):i(a)})})}listNext(e,t,r){this.client;let n=this;return r||"function"!=typeof t||(r=t,t=null),r?n._listNext(e,t,r):new Promise((r,i)=>{n._listNext(e,t,(e,t,n,o)=>{e?i(e):r(t)})})}}},function(e,t,r){"use strict";const n=r(8),i=r(9).AzureServiceClient,o=r(253),s=r(1286);e.exports=class PolicyClient extends i{constructor(e,t,r,i){if(null==e)throw new Error("'credentials' cannot be null.");if(null==t)throw new Error("'subscriptionId' cannot be null.");i||(i={}),super(e,i),this.apiVersion="2016-12-01",this.acceptLanguage="en-US",this.longRunningOperationRetryTimeout=30,this.generateClientRequestId=!0,this.baseUri=r,this.baseUri||(this.baseUri="https://management.azure.com"),this.credentials=e,this.subscriptionId=t;let a=this.getPackageJsonInfo(__dirname);this.addUserAgentInfo(`${a.name}/${a.version}`),null!==i.apiVersion&&void 0!==i.apiVersion&&(this.apiVersion=i.apiVersion),null!==i.acceptLanguage&&void 0!==i.acceptLanguage&&(this.acceptLanguage=i.acceptLanguage),null!==i.longRunningOperationRetryTimeout&&void 0!==i.longRunningOperationRetryTimeout&&(this.longRunningOperationRetryTimeout=i.longRunningOperationRetryTimeout),null!==i.generateClientRequestId&&void 0!==i.generateClientRequestId&&(this.generateClientRequestId=i.generateClientRequestId),this.policyAssignments=new s.PolicyAssignments(this),this.policyDefinitions=new s.PolicyDefinitions(this),this.models=o,n.addSerializationMixin(this)}}},function(e,t,r){"use strict";const n=r(253);e.exports=class PolicyDefinition extends n.BaseResource{constructor(){super()}mapper(){return{required:!1,serializedName:"PolicyDefinition",type:{name:"Composite",className:"PolicyDefinition",modelProperties:{policyType:{required:!1,serializedName:"properties.policyType",type:{name:"String"}},displayName:{required:!1,serializedName:"properties.displayName",type:{name:"String"}},description:{required:!1,serializedName:"properties.description",type:{name:"String"}},policyRule:{required:!1,serializedName:"properties.policyRule",type:{name:"Object"}},parameters:{required:!1,serializedName:"properties.parameters",type:{name:"Object"}},id:{required:!1,serializedName:"id",type:{name:"String"}},name:{required:!1,serializedName:"name",type:{name:"String"}}}}}}}},function(e,t,r){"use strict";const n=r(253);e.exports=class PolicyAssignment extends n.BaseResource{constructor(){super()}mapper(){return{required:!1,serializedName:"PolicyAssignment",type:{name:"Composite",className:"PolicyAssignment",modelProperties:{displayName:{required:!1,serializedName:"properties.displayName",type:{name:"String"}},policyDefinitionId:{required:!1,serializedName:"properties.policyDefinitionId",type:{name:"String"}},scope:{required:!1,serializedName:"properties.scope",type:{name:"String"}},parameters:{required:!1,serializedName:"properties.parameters",type:{name:"Object"}},description:{required:!1,serializedName:"properties.description",type:{name:"String"}},id:{required:!1,serializedName:"id",type:{name:"String"}},type:{required:!1,serializedName:"type",type:{name:"String"}},name:{required:!1,serializedName:"name",type:{name:"String"}}}}}}}},function(e,t,r){"use strict";t.PolicyAssignments=r(1287),t.PolicyDefinitions=r(1288)},function(e,t,r){"use strict";const n=r(8),i=r(9),o=n.WebResource;function _deleteMethod(e,t,r,s){let a=this.client;if(s||"function"!=typeof r||(s=r,r=null),!s)throw new Error("callback cannot be null.");try{if(null==e||"string"!=typeof e.valueOf())throw new Error("scope cannot be null or undefined and it must be of type string.");if(null==t||"string"!=typeof t.valueOf())throw new Error("policyAssignmentName cannot be null or undefined and it must be of type string.");if(null===this.client.apiVersion||void 0===this.client.apiVersion||"string"!=typeof this.client.apiVersion.valueOf())throw new Error("this.client.apiVersion cannot be null or undefined and it must be of type string.");if(null!==this.client.acceptLanguage&&void 0!==this.client.acceptLanguage&&"string"!=typeof this.client.acceptLanguage.valueOf())throw new Error("this.client.acceptLanguage must be of type string.")}catch(e){return s(e)}let c=this.client.baseUri,u=c+(c.endsWith("/")?"":"/")+"{scope}/providers/Microsoft.Authorization/policyassignments/{policyAssignmentName}";u=(u=u.replace("{scope}",e)).replace("{policyAssignmentName}",encodeURIComponent(t));let l=[];l.push("api-version="+encodeURIComponent(this.client.apiVersion)),l.length>0&&(u+="?"+l.join("&"));let p=new o;if(p.method="DELETE",p.headers={},p.url=u,this.client.generateClientRequestId&&(p.headers["x-ms-client-request-id"]=i.generateUuid()),void 0!==this.client.acceptLanguage&&null!==this.client.acceptLanguage&&(p.headers["accept-language"]=this.client.acceptLanguage),r)for(let e in r.customHeaders)r.customHeaders.hasOwnProperty(e)&&(p.headers[e]=r.customHeaders[e]);return p.headers["Content-Type"]="application/json; charset=utf-8",p.body=null,a.pipeline(p,(e,t,r)=>{if(e)return s(e);let i=t.statusCode;if(200!==i){let e,i=new Error(r);i.statusCode=t.statusCode,i.request=n.stripRequest(p),i.response=n.stripResponse(t),""===r&&(r=null);try{if((e=JSON.parse(r))&&(e.error&&(e=e.error),e.code&&(i.code=e.code),e.message&&(i.message=e.message)),null!=e){let t=(new a.models.CloudError).mapper();i.body=a.deserialize(t,e,"error.body")}}catch(e){return i.message=`Error "${e.message}" occurred in deserializing the responseBody `+`- "${r}" for the default response.`,s(i)}return s(i)}let o=null;if(""===r&&(r=null),200===i){let e=null;try{if(e=JSON.parse(r),o=JSON.parse(r),null!=e){let t=(new a.models.PolicyAssignment).mapper();o=a.deserialize(t,e,"result")}}catch(e){let i=new Error(`Error ${e} occurred in deserializing the responseBody - ${r}`);return i.request=n.stripRequest(p),i.response=n.stripResponse(t),s(i)}}return s(null,o,p,t)})}function _create(e,t,r,s,a){let c=this.client;if(a||"function"!=typeof s||(a=s,s=null),!a)throw new Error("callback cannot be null.");try{if(null==e||"string"!=typeof e.valueOf())throw new Error("scope cannot be null or undefined and it must be of type string.");if(null==t||"string"!=typeof t.valueOf())throw new Error("policyAssignmentName cannot be null or undefined and it must be of type string.");if(null==r)throw new Error("parameters cannot be null or undefined.");if(null===this.client.apiVersion||void 0===this.client.apiVersion||"string"!=typeof this.client.apiVersion.valueOf())throw new Error("this.client.apiVersion cannot be null or undefined and it must be of type string.");if(null!==this.client.acceptLanguage&&void 0!==this.client.acceptLanguage&&"string"!=typeof this.client.acceptLanguage.valueOf())throw new Error("this.client.acceptLanguage must be of type string.")}catch(e){return a(e)}let u=this.client.baseUri,l=u+(u.endsWith("/")?"":"/")+"{scope}/providers/Microsoft.Authorization/policyassignments/{policyAssignmentName}";l=(l=l.replace("{scope}",e)).replace("{policyAssignmentName}",encodeURIComponent(t));let p=[];p.push("api-version="+encodeURIComponent(this.client.apiVersion)),p.length>0&&(l+="?"+p.join("&"));let d=new o;if(d.method="PUT",d.headers={},d.url=l,this.client.generateClientRequestId&&(d.headers["x-ms-client-request-id"]=i.generateUuid()),void 0!==this.client.acceptLanguage&&null!==this.client.acceptLanguage&&(d.headers["accept-language"]=this.client.acceptLanguage),s)for(let e in s.customHeaders)s.customHeaders.hasOwnProperty(e)&&(d.headers[e]=s.customHeaders[e]);d.headers["Content-Type"]="application/json; charset=utf-8";let h=null,f=null;try{if(null!=r){let e=(new c.models.PolicyAssignment).mapper();f=c.serialize(e,r,"parameters"),h=JSON.stringify(f)}}catch(e){let t=new Error(`Error "${e.message}" occurred in serializing the `+`payload - ${JSON.stringify(r,null,2)}.`);return a(t)}return d.body=h,c.pipeline(d,(e,t,r)=>{if(e)return a(e);let i=t.statusCode;if(201!==i){let e,i=new Error(r);i.statusCode=t.statusCode,i.request=n.stripRequest(d),i.response=n.stripResponse(t),""===r&&(r=null);try{if((e=JSON.parse(r))&&(e.error&&(e=e.error),e.code&&(i.code=e.code),e.message&&(i.message=e.message)),null!=e){let t=(new c.models.CloudError).mapper();i.body=c.deserialize(t,e,"error.body")}}catch(e){return i.message=`Error "${e.message}" occurred in deserializing the responseBody `+`- "${r}" for the default response.`,a(i)}return a(i)}let o=null;if(""===r&&(r=null),201===i){let e=null;try{if(e=JSON.parse(r),o=JSON.parse(r),null!=e){let t=(new c.models.PolicyAssignment).mapper();o=c.deserialize(t,e,"result")}}catch(e){let i=new Error(`Error ${e} occurred in deserializing the responseBody - ${r}`);return i.request=n.stripRequest(d),i.response=n.stripResponse(t),a(i)}}return a(null,o,d,t)})}function _get(e,t,r,s){let a=this.client;if(s||"function"!=typeof r||(s=r,r=null),!s)throw new Error("callback cannot be null.");try{if(null==e||"string"!=typeof e.valueOf())throw new Error("scope cannot be null or undefined and it must be of type string.");if(null==t||"string"!=typeof t.valueOf())throw new Error("policyAssignmentName cannot be null or undefined and it must be of type string.");if(null===this.client.apiVersion||void 0===this.client.apiVersion||"string"!=typeof this.client.apiVersion.valueOf())throw new Error("this.client.apiVersion cannot be null or undefined and it must be of type string.");if(null!==this.client.acceptLanguage&&void 0!==this.client.acceptLanguage&&"string"!=typeof this.client.acceptLanguage.valueOf())throw new Error("this.client.acceptLanguage must be of type string.")}catch(e){return s(e)}let c=this.client.baseUri,u=c+(c.endsWith("/")?"":"/")+"{scope}/providers/Microsoft.Authorization/policyassignments/{policyAssignmentName}";u=(u=u.replace("{scope}",e)).replace("{policyAssignmentName}",encodeURIComponent(t));let l=[];l.push("api-version="+encodeURIComponent(this.client.apiVersion)),l.length>0&&(u+="?"+l.join("&"));let p=new o;if(p.method="GET",p.headers={},p.url=u,this.client.generateClientRequestId&&(p.headers["x-ms-client-request-id"]=i.generateUuid()),void 0!==this.client.acceptLanguage&&null!==this.client.acceptLanguage&&(p.headers["accept-language"]=this.client.acceptLanguage),r)for(let e in r.customHeaders)r.customHeaders.hasOwnProperty(e)&&(p.headers[e]=r.customHeaders[e]);return p.headers["Content-Type"]="application/json; charset=utf-8",p.body=null,a.pipeline(p,(e,t,r)=>{if(e)return s(e);let i=t.statusCode;if(200!==i){let e,i=new Error(r);i.statusCode=t.statusCode,i.request=n.stripRequest(p),i.response=n.stripResponse(t),""===r&&(r=null);try{if((e=JSON.parse(r))&&(e.error&&(e=e.error),e.code&&(i.code=e.code),e.message&&(i.message=e.message)),null!=e){let t=(new a.models.CloudError).mapper();i.body=a.deserialize(t,e,"error.body")}}catch(e){return i.message=`Error "${e.message}" occurred in deserializing the responseBody `+`- "${r}" for the default response.`,s(i)}return s(i)}let o=null;if(""===r&&(r=null),200===i){let e=null;try{if(e=JSON.parse(r),o=JSON.parse(r),null!=e){let t=(new a.models.PolicyAssignment).mapper();o=a.deserialize(t,e,"result")}}catch(e){let i=new Error(`Error ${e} occurred in deserializing the responseBody - ${r}`);return i.request=n.stripRequest(p),i.response=n.stripResponse(t),s(i)}}return s(null,o,p,t)})}function _listForResourceGroup(e,t,r){let s=this.client;if(r||"function"!=typeof t||(r=t,t=null),!r)throw new Error("callback cannot be null.");let a=t&&void 0!==t.filter?t.filter:void 0;try{if(null==e||"string"!=typeof e.valueOf())throw new Error("resourceGroupName cannot be null or undefined and it must be of type string.");if(null!=e){if(e.length>90)throw new Error('"resourceGroupName" should satisfy the constraint - "MaxLength": 90');if(e.length<1)throw new Error('"resourceGroupName" should satisfy the constraint - "MinLength": 1');if(null===e.match(/^[-\w\._\(\)]+$/))throw new Error('"resourceGroupName" should satisfy the constraint - "Pattern": /^[-w._()]+$/')}if(null!=a&&"string"!=typeof a.valueOf())throw new Error("filter must be of type string.");if(null===this.client.apiVersion||void 0===this.client.apiVersion||"string"!=typeof this.client.apiVersion.valueOf())throw new Error("this.client.apiVersion cannot be null or undefined and it must be of type string.");if(null===this.client.subscriptionId||void 0===this.client.subscriptionId||"string"!=typeof this.client.subscriptionId.valueOf())throw new Error("this.client.subscriptionId cannot be null or undefined and it must be of type string.");if(null!==this.client.acceptLanguage&&void 0!==this.client.acceptLanguage&&"string"!=typeof this.client.acceptLanguage.valueOf())throw new Error("this.client.acceptLanguage must be of type string.")}catch(e){return r(e)}let c=this.client.baseUri,u=c+(c.endsWith("/")?"":"/")+"subscriptions/{subscriptionId}/resourceGroups/{resourceGroupName}/providers/Microsoft.Authorization/policyAssignments";u=(u=u.replace("{resourceGroupName}",encodeURIComponent(e))).replace("{subscriptionId}",encodeURIComponent(this.client.subscriptionId));let l=[];null!=a&&l.push("$filter="+a),l.push("api-version="+encodeURIComponent(this.client.apiVersion)),l.length>0&&(u+="?"+l.join("&"));let p=new o;if(p.method="GET",p.headers={},p.url=u,this.client.generateClientRequestId&&(p.headers["x-ms-client-request-id"]=i.generateUuid()),void 0!==this.client.acceptLanguage&&null!==this.client.acceptLanguage&&(p.headers["accept-language"]=this.client.acceptLanguage),t)for(let e in t.customHeaders)t.customHeaders.hasOwnProperty(e)&&(p.headers[e]=t.customHeaders[e]);return p.headers["Content-Type"]="application/json; charset=utf-8",p.body=null,s.pipeline(p,(e,t,i)=>{if(e)return r(e);let o=t.statusCode;if(200!==o){let e,o=new Error(i);o.statusCode=t.statusCode,o.request=n.stripRequest(p),o.response=n.stripResponse(t),""===i&&(i=null);try{if((e=JSON.parse(i))&&(e.error&&(e=e.error),e.code&&(o.code=e.code),e.message&&(o.message=e.message)),null!=e){let t=(new s.models.CloudError).mapper();o.body=s.deserialize(t,e,"error.body")}}catch(e){return o.message=`Error "${e.message}" occurred in deserializing the responseBody `+`- "${i}" for the default response.`,r(o)}return r(o)}let a=null;if(""===i&&(i=null),200===o){let e=null;try{if(e=JSON.parse(i),a=JSON.parse(i),null!=e){let t=(new s.models.PolicyAssignmentListResult).mapper();a=s.deserialize(t,e,"result")}}catch(e){let o=new Error(`Error ${e} occurred in deserializing the responseBody - ${i}`);return o.request=n.stripRequest(p),o.response=n.stripResponse(t),r(o)}}return r(null,a,p,t)})}function _listForResource(e,t,r,s,a,c,u){let l=this.client;if(u||"function"!=typeof c||(u=c,c=null),!u)throw new Error("callback cannot be null.");let p=c&&void 0!==c.filter?c.filter:void 0;try{if(null==e||"string"!=typeof e.valueOf())throw new Error("resourceGroupName cannot be null or undefined and it must be of type string.");if(null!=e){if(e.length>90)throw new Error('"resourceGroupName" should satisfy the constraint - "MaxLength": 90');if(e.length<1)throw new Error('"resourceGroupName" should satisfy the constraint - "MinLength": 1');if(null===e.match(/^[-\w\._\(\)]+$/))throw new Error('"resourceGroupName" should satisfy the constraint - "Pattern": /^[-w._()]+$/')}if(null==t||"string"!=typeof t.valueOf())throw new Error("resourceProviderNamespace cannot be null or undefined and it must be of type string.");if(null==r||"string"!=typeof r.valueOf())throw new Error("parentResourcePath cannot be null or undefined and it must be of type string.");if(null==s||"string"!=typeof s.valueOf())throw new Error("resourceType cannot be null or undefined and it must be of type string.");if(null==a||"string"!=typeof a.valueOf())throw new Error("resourceName cannot be null or undefined and it must be of type string.");if(null!=p&&"string"!=typeof p.valueOf())throw new Error("filter must be of type string.");if(null===this.client.apiVersion||void 0===this.client.apiVersion||"string"!=typeof this.client.apiVersion.valueOf())throw new Error("this.client.apiVersion cannot be null or undefined and it must be of type string.");if(null===this.client.subscriptionId||void 0===this.client.subscriptionId||"string"!=typeof this.client.subscriptionId.valueOf())throw new Error("this.client.subscriptionId cannot be null or undefined and it must be of type string.");if(null!==this.client.acceptLanguage&&void 0!==this.client.acceptLanguage&&"string"!=typeof this.client.acceptLanguage.valueOf())throw new Error("this.client.acceptLanguage must be of type string.")}catch(e){return u(e)}let d=this.client.baseUri,h=d+(d.endsWith("/")?"":"/")+"subscriptions/{subscriptionId}/resourcegroups/{resourceGroupName}/providers/{resourceProviderNamespace}/{parentResourcePath}/{resourceType}/{resourceName}/providers/Microsoft.Authorization/policyassignments";h=(h=(h=(h=(h=(h=h.replace("{resourceGroupName}",encodeURIComponent(e))).replace("{resourceProviderNamespace}",encodeURIComponent(t))).replace("{parentResourcePath}",r)).replace("{resourceType}",s)).replace("{resourceName}",encodeURIComponent(a))).replace("{subscriptionId}",encodeURIComponent(this.client.subscriptionId));let f=[];null!=p&&f.push("$filter="+encodeURIComponent(p)),f.push("api-version="+encodeURIComponent(this.client.apiVersion)),f.length>0&&(h+="?"+f.join("&"));let m=new o;if(m.method="GET",m.headers={},m.url=h,this.client.generateClientRequestId&&(m.headers["x-ms-client-request-id"]=i.generateUuid()),void 0!==this.client.acceptLanguage&&null!==this.client.acceptLanguage&&(m.headers["accept-language"]=this.client.acceptLanguage),c)for(let e in c.customHeaders)c.customHeaders.hasOwnProperty(e)&&(m.headers[e]=c.customHeaders[e]);return m.headers["Content-Type"]="application/json; charset=utf-8",m.body=null,l.pipeline(m,(e,t,r)=>{if(e)return u(e);let i=t.statusCode;if(200!==i){let e,i=new Error(r);i.statusCode=t.statusCode,i.request=n.stripRequest(m),i.response=n.stripResponse(t),""===r&&(r=null);try{if((e=JSON.parse(r))&&(e.error&&(e=e.error),e.code&&(i.code=e.code),e.message&&(i.message=e.message)),null!=e){let t=(new l.models.CloudError).mapper();i.body=l.deserialize(t,e,"error.body")}}catch(e){return i.message=`Error "${e.message}" occurred in deserializing the responseBody `+`- "${r}" for the default response.`,u(i)}return u(i)}let o=null;if(""===r&&(r=null),200===i){let e=null;try{if(e=JSON.parse(r),o=JSON.parse(r),null!=e){let t=(new l.models.PolicyAssignmentListResult).mapper();o=l.deserialize(t,e,"result")}}catch(e){let i=new Error(`Error ${e} occurred in deserializing the responseBody - ${r}`);return i.request=n.stripRequest(m),i.response=n.stripResponse(t),u(i)}}return u(null,o,m,t)})}function _list(e,t){let r=this.client;if(t||"function"!=typeof e||(t=e,e=null),!t)throw new Error("callback cannot be null.");let s=e&&void 0!==e.filter?e.filter:void 0;try{if(null!=s&&"string"!=typeof s.valueOf())throw new Error("filter must be of type string.");if(null===this.client.apiVersion||void 0===this.client.apiVersion||"string"!=typeof this.client.apiVersion.valueOf())throw new Error("this.client.apiVersion cannot be null or undefined and it must be of type string.");if(null===this.client.subscriptionId||void 0===this.client.subscriptionId||"string"!=typeof this.client.subscriptionId.valueOf())throw new Error("this.client.subscriptionId cannot be null or undefined and it must be of type string.");if(null!==this.client.acceptLanguage&&void 0!==this.client.acceptLanguage&&"string"!=typeof this.client.acceptLanguage.valueOf())throw new Error("this.client.acceptLanguage must be of type string.")}catch(e){return t(e)}let a=this.client.baseUri,c=a+(a.endsWith("/")?"":"/")+"subscriptions/{subscriptionId}/providers/Microsoft.Authorization/policyassignments";c=c.replace("{subscriptionId}",encodeURIComponent(this.client.subscriptionId));let u=[];null!=s&&u.push("$filter="+encodeURIComponent(s)),u.push("api-version="+encodeURIComponent(this.client.apiVersion)),u.length>0&&(c+="?"+u.join("&"));let l=new o;if(l.method="GET",l.headers={},l.url=c,this.client.generateClientRequestId&&(l.headers["x-ms-client-request-id"]=i.generateUuid()),void 0!==this.client.acceptLanguage&&null!==this.client.acceptLanguage&&(l.headers["accept-language"]=this.client.acceptLanguage),e)for(let t in e.customHeaders)e.customHeaders.hasOwnProperty(t)&&(l.headers[t]=e.customHeaders[t]);return l.headers["Content-Type"]="application/json; charset=utf-8",l.body=null,r.pipeline(l,(e,i,o)=>{if(e)return t(e);let s=i.statusCode;if(200!==s){let e,s=new Error(o);s.statusCode=i.statusCode,s.request=n.stripRequest(l),s.response=n.stripResponse(i),""===o&&(o=null);try{if((e=JSON.parse(o))&&(e.error&&(e=e.error),e.code&&(s.code=e.code),e.message&&(s.message=e.message)),null!=e){let t=(new r.models.CloudError).mapper();s.body=r.deserialize(t,e,"error.body")}}catch(e){return s.message=`Error "${e.message}" occurred in deserializing the responseBody `+`- "${o}" for the default response.`,t(s)}return t(s)}let a=null;if(""===o&&(o=null),200===s){let e=null;try{if(e=JSON.parse(o),a=JSON.parse(o),null!=e){let t=(new r.models.PolicyAssignmentListResult).mapper();a=r.deserialize(t,e,"result")}}catch(e){let r=new Error(`Error ${e} occurred in deserializing the responseBody - ${o}`);return r.request=n.stripRequest(l),r.response=n.stripResponse(i),t(r)}}return t(null,a,l,i)})}function _deleteById(e,t,r){let s=this.client;if(r||"function"!=typeof t||(r=t,t=null),!r)throw new Error("callback cannot be null.");try{if(null==e||"string"!=typeof e.valueOf())throw new Error("policyAssignmentId cannot be null or undefined and it must be of type string.");if(null===this.client.apiVersion||void 0===this.client.apiVersion||"string"!=typeof this.client.apiVersion.valueOf())throw new Error("this.client.apiVersion cannot be null or undefined and it must be of type string.");if(null!==this.client.acceptLanguage&&void 0!==this.client.acceptLanguage&&"string"!=typeof this.client.acceptLanguage.valueOf())throw new Error("this.client.acceptLanguage must be of type string.")}catch(e){return r(e)}let a=this.client.baseUri,c=a+(a.endsWith("/")?"":"/")+"{policyAssignmentId}";c=c.replace("{policyAssignmentId}",e);let u=[];u.push("api-version="+encodeURIComponent(this.client.apiVersion)),u.length>0&&(c+="?"+u.join("&"));let l=new o;if(l.method="DELETE",l.headers={},l.url=c,this.client.generateClientRequestId&&(l.headers["x-ms-client-request-id"]=i.generateUuid()),void 0!==this.client.acceptLanguage&&null!==this.client.acceptLanguage&&(l.headers["accept-language"]=this.client.acceptLanguage),t)for(let e in t.customHeaders)t.customHeaders.hasOwnProperty(e)&&(l.headers[e]=t.customHeaders[e]);return l.headers["Content-Type"]="application/json; charset=utf-8",l.body=null,s.pipeline(l,(e,t,i)=>{if(e)return r(e);let o=t.statusCode;if(200!==o){let e,o=new Error(i);o.statusCode=t.statusCode,o.request=n.stripRequest(l),o.response=n.stripResponse(t),""===i&&(i=null);try{if((e=JSON.parse(i))&&(e.error&&(e=e.error),e.code&&(o.code=e.code),e.message&&(o.message=e.message)),null!=e){let t=(new s.models.CloudError).mapper();o.body=s.deserialize(t,e,"error.body")}}catch(e){return o.message=`Error "${e.message}" occurred in deserializing the responseBody `+`- "${i}" for the default response.`,r(o)}return r(o)}let a=null;if(""===i&&(i=null),200===o){let e=null;try{if(e=JSON.parse(i),a=JSON.parse(i),null!=e){let t=(new s.models.PolicyAssignment).mapper();a=s.deserialize(t,e,"result")}}catch(e){let o=new Error(`Error ${e} occurred in deserializing the responseBody - ${i}`);return o.request=n.stripRequest(l),o.response=n.stripResponse(t),r(o)}}return r(null,a,l,t)})}function _createById(e,t,r,s){let a=this.client;if(s||"function"!=typeof r||(s=r,r=null),!s)throw new Error("callback cannot be null.");try{if(null==e||"string"!=typeof e.valueOf())throw new Error("policyAssignmentId cannot be null or undefined and it must be of type string.");if(null==t)throw new Error("parameters cannot be null or undefined.");if(null===this.client.apiVersion||void 0===this.client.apiVersion||"string"!=typeof this.client.apiVersion.valueOf())throw new Error("this.client.apiVersion cannot be null or undefined and it must be of type string.");if(null!==this.client.acceptLanguage&&void 0!==this.client.acceptLanguage&&"string"!=typeof this.client.acceptLanguage.valueOf())throw new Error("this.client.acceptLanguage must be of type string.")}catch(e){return s(e)}let c=this.client.baseUri,u=c+(c.endsWith("/")?"":"/")+"{policyAssignmentId}";u=u.replace("{policyAssignmentId}",e);let l=[];l.push("api-version="+encodeURIComponent(this.client.apiVersion)),l.length>0&&(u+="?"+l.join("&"));let p=new o;if(p.method="PUT",p.headers={},p.url=u,this.client.generateClientRequestId&&(p.headers["x-ms-client-request-id"]=i.generateUuid()),void 0!==this.client.acceptLanguage&&null!==this.client.acceptLanguage&&(p.headers["accept-language"]=this.client.acceptLanguage),r)for(let e in r.customHeaders)r.customHeaders.hasOwnProperty(e)&&(p.headers[e]=r.customHeaders[e]);p.headers["Content-Type"]="application/json; charset=utf-8";let d=null,h=null;try{if(null!=t){let e=(new a.models.PolicyAssignment).mapper();h=a.serialize(e,t,"parameters"),d=JSON.stringify(h)}}catch(e){let r=new Error(`Error "${e.message}" occurred in serializing the `+`payload - ${JSON.stringify(t,null,2)}.`);return s(r)}return p.body=d,a.pipeline(p,(e,t,r)=>{if(e)return s(e);let i=t.statusCode;if(201!==i){let e,i=new Error(r);i.statusCode=t.statusCode,i.request=n.stripRequest(p),i.response=n.stripResponse(t),""===r&&(r=null);try{if((e=JSON.parse(r))&&(e.error&&(e=e.error),e.code&&(i.code=e.code),e.message&&(i.message=e.message)),null!=e){let t=(new a.models.CloudError).mapper();i.body=a.deserialize(t,e,"error.body")}}catch(e){return i.message=`Error "${e.message}" occurred in deserializing the responseBody `+`- "${r}" for the default response.`,s(i)}return s(i)}let o=null;if(""===r&&(r=null),201===i){let e=null;try{if(e=JSON.parse(r),o=JSON.parse(r),null!=e){let t=(new a.models.PolicyAssignment).mapper();o=a.deserialize(t,e,"result")}}catch(e){let i=new Error(`Error ${e} occurred in deserializing the responseBody - ${r}`);return i.request=n.stripRequest(p),i.response=n.stripResponse(t),s(i)}}return s(null,o,p,t)})}function _getById(e,t,r){let s=this.client;if(r||"function"!=typeof t||(r=t,t=null),!r)throw new Error("callback cannot be null.");try{if(null==e||"string"!=typeof e.valueOf())throw new Error("policyAssignmentId cannot be null or undefined and it must be of type string.");if(null===this.client.apiVersion||void 0===this.client.apiVersion||"string"!=typeof this.client.apiVersion.valueOf())throw new Error("this.client.apiVersion cannot be null or undefined and it must be of type string.");if(null!==this.client.acceptLanguage&&void 0!==this.client.acceptLanguage&&"string"!=typeof this.client.acceptLanguage.valueOf())throw new Error("this.client.acceptLanguage must be of type string.")}catch(e){return r(e)}let a=this.client.baseUri,c=a+(a.endsWith("/")?"":"/")+"{policyAssignmentId}";c=c.replace("{policyAssignmentId}",e);let u=[];u.push("api-version="+encodeURIComponent(this.client.apiVersion)),u.length>0&&(c+="?"+u.join("&"));let l=new o;if(l.method="GET",l.headers={},l.url=c,this.client.generateClientRequestId&&(l.headers["x-ms-client-request-id"]=i.generateUuid()),void 0!==this.client.acceptLanguage&&null!==this.client.acceptLanguage&&(l.headers["accept-language"]=this.client.acceptLanguage),t)for(let e in t.customHeaders)t.customHeaders.hasOwnProperty(e)&&(l.headers[e]=t.customHeaders[e]);return l.headers["Content-Type"]="application/json; charset=utf-8",l.body=null,s.pipeline(l,(e,t,i)=>{if(e)return r(e);let o=t.statusCode;if(200!==o){let e,o=new Error(i);o.statusCode=t.statusCode,o.request=n.stripRequest(l),o.response=n.stripResponse(t),""===i&&(i=null);try{if((e=JSON.parse(i))&&(e.error&&(e=e.error),e.code&&(o.code=e.code),e.message&&(o.message=e.message)),null!=e){let t=(new s.models.CloudError).mapper();o.body=s.deserialize(t,e,"error.body")}}catch(e){return o.message=`Error "${e.message}" occurred in deserializing the responseBody `+`- "${i}" for the default response.`,r(o)}return r(o)}let a=null;if(""===i&&(i=null),200===o){let e=null;try{if(e=JSON.parse(i),a=JSON.parse(i),null!=e){let t=(new s.models.PolicyAssignment).mapper();a=s.deserialize(t,e,"result")}}catch(e){let o=new Error(`Error ${e} occurred in deserializing the responseBody - ${i}`);return o.request=n.stripRequest(l),o.response=n.stripResponse(t),r(o)}}return r(null,a,l,t)})}function _listForResourceGroupNext(e,t,r){let s=this.client;if(r||"function"!=typeof t||(r=t,t=null),!r)throw new Error("callback cannot be null.");try{if(null==e||"string"!=typeof e.valueOf())throw new Error("nextPageLink cannot be null or undefined and it must be of type string.");if(null!==this.client.acceptLanguage&&void 0!==this.client.acceptLanguage&&"string"!=typeof this.client.acceptLanguage.valueOf())throw new Error("this.client.acceptLanguage must be of type string.")}catch(e){return r(e)}let a="{nextLink}";a=a.replace("{nextLink}",e);let c=new o;if(c.method="GET",c.headers={},c.url=a,this.client.generateClientRequestId&&(c.headers["x-ms-client-request-id"]=i.generateUuid()),void 0!==this.client.acceptLanguage&&null!==this.client.acceptLanguage&&(c.headers["accept-language"]=this.client.acceptLanguage),t)for(let e in t.customHeaders)t.customHeaders.hasOwnProperty(e)&&(c.headers[e]=t.customHeaders[e]);return c.headers["Content-Type"]="application/json; charset=utf-8",c.body=null,s.pipeline(c,(e,t,i)=>{if(e)return r(e);let o=t.statusCode;if(200!==o){let e,o=new Error(i);o.statusCode=t.statusCode,o.request=n.stripRequest(c),o.response=n.stripResponse(t),""===i&&(i=null);try{if((e=JSON.parse(i))&&(e.error&&(e=e.error),e.code&&(o.code=e.code),e.message&&(o.message=e.message)),null!=e){let t=(new s.models.CloudError).mapper();o.body=s.deserialize(t,e,"error.body")}}catch(e){return o.message=`Error "${e.message}" occurred in deserializing the responseBody `+`- "${i}" for the default response.`,r(o)}return r(o)}let a=null;if(""===i&&(i=null),200===o){let e=null;try{if(e=JSON.parse(i),a=JSON.parse(i),null!=e){let t=(new s.models.PolicyAssignmentListResult).mapper();a=s.deserialize(t,e,"result")}}catch(e){let o=new Error(`Error ${e} occurred in deserializing the responseBody - ${i}`);return o.request=n.stripRequest(c),o.response=n.stripResponse(t),r(o)}}return r(null,a,c,t)})}function _listForResourceNext(e,t,r){let s=this.client;if(r||"function"!=typeof t||(r=t,t=null),!r)throw new Error("callback cannot be null.");try{if(null==e||"string"!=typeof e.valueOf())throw new Error("nextPageLink cannot be null or undefined and it must be of type string.");if(null!==this.client.acceptLanguage&&void 0!==this.client.acceptLanguage&&"string"!=typeof this.client.acceptLanguage.valueOf())throw new Error("this.client.acceptLanguage must be of type string.")}catch(e){return r(e)}let a="{nextLink}";a=a.replace("{nextLink}",e);let c=new o;if(c.method="GET",c.headers={},c.url=a,this.client.generateClientRequestId&&(c.headers["x-ms-client-request-id"]=i.generateUuid()),void 0!==this.client.acceptLanguage&&null!==this.client.acceptLanguage&&(c.headers["accept-language"]=this.client.acceptLanguage),t)for(let e in t.customHeaders)t.customHeaders.hasOwnProperty(e)&&(c.headers[e]=t.customHeaders[e]);return c.headers["Content-Type"]="application/json; charset=utf-8",c.body=null,s.pipeline(c,(e,t,i)=>{if(e)return r(e);let o=t.statusCode;if(200!==o){let e,o=new Error(i);o.statusCode=t.statusCode,o.request=n.stripRequest(c),o.response=n.stripResponse(t),""===i&&(i=null);try{if((e=JSON.parse(i))&&(e.error&&(e=e.error),e.code&&(o.code=e.code),e.message&&(o.message=e.message)),null!=e){let t=(new s.models.CloudError).mapper();o.body=s.deserialize(t,e,"error.body")}}catch(e){return o.message=`Error "${e.message}" occurred in deserializing the responseBody `+`- "${i}" for the default response.`,r(o)}return r(o)}let a=null;if(""===i&&(i=null),200===o){let e=null;try{if(e=JSON.parse(i),a=JSON.parse(i),null!=e){let t=(new s.models.PolicyAssignmentListResult).mapper();a=s.deserialize(t,e,"result")}}catch(e){let o=new Error(`Error ${e} occurred in deserializing the responseBody - ${i}`);return o.request=n.stripRequest(c),o.response=n.stripResponse(t),r(o)}}return r(null,a,c,t)})}function _listNext(e,t,r){let s=this.client;if(r||"function"!=typeof t||(r=t,t=null),!r)throw new Error("callback cannot be null.");try{if(null==e||"string"!=typeof e.valueOf())throw new Error("nextPageLink cannot be null or undefined and it must be of type string.");if(null!==this.client.acceptLanguage&&void 0!==this.client.acceptLanguage&&"string"!=typeof this.client.acceptLanguage.valueOf())throw new Error("this.client.acceptLanguage must be of type string.")}catch(e){return r(e)}let a="{nextLink}";a=a.replace("{nextLink}",e);let c=new o;if(c.method="GET",c.headers={},c.url=a,this.client.generateClientRequestId&&(c.headers["x-ms-client-request-id"]=i.generateUuid()),void 0!==this.client.acceptLanguage&&null!==this.client.acceptLanguage&&(c.headers["accept-language"]=this.client.acceptLanguage),t)for(let e in t.customHeaders)t.customHeaders.hasOwnProperty(e)&&(c.headers[e]=t.customHeaders[e]);return c.headers["Content-Type"]="application/json; charset=utf-8",c.body=null,s.pipeline(c,(e,t,i)=>{if(e)return r(e);let o=t.statusCode;if(200!==o){let e,o=new Error(i);o.statusCode=t.statusCode,o.request=n.stripRequest(c),o.response=n.stripResponse(t),""===i&&(i=null);try{if((e=JSON.parse(i))&&(e.error&&(e=e.error),e.code&&(o.code=e.code),e.message&&(o.message=e.message)),null!=e){let t=(new s.models.CloudError).mapper();o.body=s.deserialize(t,e,"error.body")}}catch(e){return o.message=`Error "${e.message}" occurred in deserializing the responseBody `+`- "${i}" for the default response.`,r(o)}return r(o)}let a=null;if(""===i&&(i=null),200===o){let e=null;try{if(e=JSON.parse(i),a=JSON.parse(i),null!=e){let t=(new s.models.PolicyAssignmentListResult).mapper();a=s.deserialize(t,e,"result")}}catch(e){let o=new Error(`Error ${e} occurred in deserializing the responseBody - ${i}`);return o.request=n.stripRequest(c),o.response=n.stripResponse(t),r(o)}}return r(null,a,c,t)})}e.exports=class PolicyAssignments{constructor(e){this.client=e,this._deleteMethod=_deleteMethod,this._create=_create,this._get=_get,this._listForResourceGroup=_listForResourceGroup,this._listForResource=_listForResource,this._list=_list,this._deleteById=_deleteById,this._createById=_createById,this._getById=_getById,this._listForResourceGroupNext=_listForResourceGroupNext,this._listForResourceNext=_listForResourceNext,this._listNext=_listNext}deleteMethodWithHttpOperationResponse(e,t,r){this.client;let i=this;return new Promise((o,s)=>{i._deleteMethod(e,t,r,(e,t,r,i)=>{let a=new n.HttpOperationResponse(r,i);a.body=t,e?s(e):o(a)})})}deleteMethod(e,t,r,n){this.client;let i=this;return n||"function"!=typeof r||(n=r,r=null),n?i._deleteMethod(e,t,r,n):new Promise((n,o)=>{i._deleteMethod(e,t,r,(e,t,r,i)=>{e?o(e):n(t)})})}createWithHttpOperationResponse(e,t,r,i){this.client;let o=this;return new Promise((s,a)=>{o._create(e,t,r,i,(e,t,r,i)=>{let o=new n.HttpOperationResponse(r,i);o.body=t,e?a(e):s(o)})})}create(e,t,r,n,i){this.client;let o=this;return i||"function"!=typeof n||(i=n,n=null),i?o._create(e,t,r,n,i):new Promise((i,s)=>{o._create(e,t,r,n,(e,t,r,n)=>{e?s(e):i(t)})})}getWithHttpOperationResponse(e,t,r){this.client;let i=this;return new Promise((o,s)=>{i._get(e,t,r,(e,t,r,i)=>{let a=new n.HttpOperationResponse(r,i);a.body=t,e?s(e):o(a)})})}get(e,t,r,n){this.client;let i=this;return n||"function"!=typeof r||(n=r,r=null),n?i._get(e,t,r,n):new Promise((n,o)=>{i._get(e,t,r,(e,t,r,i)=>{e?o(e):n(t)})})}listForResourceGroupWithHttpOperationResponse(e,t){this.client;let r=this;return new Promise((i,o)=>{r._listForResourceGroup(e,t,(e,t,r,s)=>{let a=new n.HttpOperationResponse(r,s);a.body=t,e?o(e):i(a)})})}listForResourceGroup(e,t,r){this.client;let n=this;return r||"function"!=typeof t||(r=t,t=null),r?n._listForResourceGroup(e,t,r):new Promise((r,i)=>{n._listForResourceGroup(e,t,(e,t,n,o)=>{e?i(e):r(t)})})}listForResourceWithHttpOperationResponse(e,t,r,i,o,s){this.client;let a=this;return new Promise((c,u)=>{a._listForResource(e,t,r,i,o,s,(e,t,r,i)=>{let o=new n.HttpOperationResponse(r,i);o.body=t,e?u(e):c(o)})})}listForResource(e,t,r,n,i,o,s){this.client;let a=this;return s||"function"!=typeof o||(s=o,o=null),s?a._listForResource(e,t,r,n,i,o,s):new Promise((s,c)=>{a._listForResource(e,t,r,n,i,o,(e,t,r,n)=>{e?c(e):s(t)})})}listWithHttpOperationResponse(e){this.client;let t=this;return new Promise((r,i)=>{t._list(e,(e,t,o,s)=>{let a=new n.HttpOperationResponse(o,s);a.body=t,e?i(e):r(a)})})}list(e,t){this.client;let r=this;return t||"function"!=typeof e||(t=e,e=null),t?r._list(e,t):new Promise((t,n)=>{r._list(e,(e,r,i,o)=>{e?n(e):t(r)})})}deleteByIdWithHttpOperationResponse(e,t){this.client;let r=this;return new Promise((i,o)=>{r._deleteById(e,t,(e,t,r,s)=>{let a=new n.HttpOperationResponse(r,s);a.body=t,e?o(e):i(a)})})}deleteById(e,t,r){this.client;let n=this;return r||"function"!=typeof t||(r=t,t=null),r?n._deleteById(e,t,r):new Promise((r,i)=>{n._deleteById(e,t,(e,t,n,o)=>{e?i(e):r(t)})})}createByIdWithHttpOperationResponse(e,t,r){this.client;let i=this;return new Promise((o,s)=>{i._createById(e,t,r,(e,t,r,i)=>{let a=new n.HttpOperationResponse(r,i);a.body=t,e?s(e):o(a)})})}createById(e,t,r,n){this.client;let i=this;return n||"function"!=typeof r||(n=r,r=null),n?i._createById(e,t,r,n):new Promise((n,o)=>{i._createById(e,t,r,(e,t,r,i)=>{e?o(e):n(t)})})}getByIdWithHttpOperationResponse(e,t){this.client;let r=this;return new Promise((i,o)=>{r._getById(e,t,(e,t,r,s)=>{let a=new n.HttpOperationResponse(r,s);a.body=t,e?o(e):i(a)})})}getById(e,t,r){this.client;let n=this;return r||"function"!=typeof t||(r=t,t=null),r?n._getById(e,t,r):new Promise((r,i)=>{n._getById(e,t,(e,t,n,o)=>{e?i(e):r(t)})})}listForResourceGroupNextWithHttpOperationResponse(e,t){this.client;let r=this;return new Promise((i,o)=>{r._listForResourceGroupNext(e,t,(e,t,r,s)=>{let a=new n.HttpOperationResponse(r,s);a.body=t,e?o(e):i(a)})})}listForResourceGroupNext(e,t,r){this.client;let n=this;return r||"function"!=typeof t||(r=t,t=null),r?n._listForResourceGroupNext(e,t,r):new Promise((r,i)=>{n._listForResourceGroupNext(e,t,(e,t,n,o)=>{e?i(e):r(t)})})}listForResourceNextWithHttpOperationResponse(e,t){this.client;let r=this;return new Promise((i,o)=>{r._listForResourceNext(e,t,(e,t,r,s)=>{let a=new n.HttpOperationResponse(r,s);a.body=t,e?o(e):i(a)})})}listForResourceNext(e,t,r){this.client;let n=this;return r||"function"!=typeof t||(r=t,t=null),r?n._listForResourceNext(e,t,r):new Promise((r,i)=>{n._listForResourceNext(e,t,(e,t,n,o)=>{e?i(e):r(t)})})}listNextWithHttpOperationResponse(e,t){this.client;let r=this;return new Promise((i,o)=>{r._listNext(e,t,(e,t,r,s)=>{let a=new n.HttpOperationResponse(r,s);a.body=t,e?o(e):i(a)})})}listNext(e,t,r){this.client;let n=this;return r||"function"!=typeof t||(r=t,t=null),r?n._listNext(e,t,r):new Promise((r,i)=>{n._listNext(e,t,(e,t,n,o)=>{e?i(e):r(t)})})}}},function(e,t,r){"use strict";const n=r(8),i=r(9),o=n.WebResource;function _createOrUpdate(e,t,r,s){let a=this.client;if(s||"function"!=typeof r||(s=r,r=null),!s)throw new Error("callback cannot be null.");try{if(null==e||"string"!=typeof e.valueOf())throw new Error("policyDefinitionName cannot be null or undefined and it must be of type string.");if(null==t)throw new Error("parameters cannot be null or undefined.");if(null===this.client.apiVersion||void 0===this.client.apiVersion||"string"!=typeof this.client.apiVersion.valueOf())throw new Error("this.client.apiVersion cannot be null or undefined and it must be of type string.");if(null===this.client.subscriptionId||void 0===this.client.subscriptionId||"string"!=typeof this.client.subscriptionId.valueOf())throw new Error("this.client.subscriptionId cannot be null or undefined and it must be of type string.");if(null!==this.client.acceptLanguage&&void 0!==this.client.acceptLanguage&&"string"!=typeof this.client.acceptLanguage.valueOf())throw new Error("this.client.acceptLanguage must be of type string.")}catch(e){return s(e)}let c=this.client.baseUri,u=c+(c.endsWith("/")?"":"/")+"subscriptions/{subscriptionId}/providers/Microsoft.Authorization/policydefinitions/{policyDefinitionName}";u=(u=u.replace("{policyDefinitionName}",encodeURIComponent(e))).replace("{subscriptionId}",encodeURIComponent(this.client.subscriptionId));let l=[];l.push("api-version="+encodeURIComponent(this.client.apiVersion)),l.length>0&&(u+="?"+l.join("&"));let p=new o;if(p.method="PUT",p.headers={},p.url=u,this.client.generateClientRequestId&&(p.headers["x-ms-client-request-id"]=i.generateUuid()),void 0!==this.client.acceptLanguage&&null!==this.client.acceptLanguage&&(p.headers["accept-language"]=this.client.acceptLanguage),r)for(let e in r.customHeaders)r.customHeaders.hasOwnProperty(e)&&(p.headers[e]=r.customHeaders[e]);p.headers["Content-Type"]="application/json; charset=utf-8";let d=null,h=null;try{if(null!=t){let e=(new a.models.PolicyDefinition).mapper();h=a.serialize(e,t,"parameters"),d=JSON.stringify(h)}}catch(e){let r=new Error(`Error "${e.message}" occurred in serializing the `+`payload - ${JSON.stringify(t,null,2)}.`);return s(r)}return p.body=d,a.pipeline(p,(e,t,r)=>{if(e)return s(e);let i=t.statusCode;if(201!==i){let e,i=new Error(r);i.statusCode=t.statusCode,i.request=n.stripRequest(p),i.response=n.stripResponse(t),""===r&&(r=null);try{if((e=JSON.parse(r))&&(e.error&&(e=e.error),e.code&&(i.code=e.code),e.message&&(i.message=e.message)),null!=e){let t=(new a.models.CloudError).mapper();i.body=a.deserialize(t,e,"error.body")}}catch(e){return i.message=`Error "${e.message}" occurred in deserializing the responseBody `+`- "${r}" for the default response.`,s(i)}return s(i)}let o=null;if(""===r&&(r=null),201===i){let e=null;try{if(e=JSON.parse(r),o=JSON.parse(r),null!=e){let t=(new a.models.PolicyDefinition).mapper();o=a.deserialize(t,e,"result")}}catch(e){let i=new Error(`Error ${e} occurred in deserializing the responseBody - ${r}`);return i.request=n.stripRequest(p),i.response=n.stripResponse(t),s(i)}}return s(null,o,p,t)})}function _deleteMethod(e,t,r){let s=this.client;if(r||"function"!=typeof t||(r=t,t=null),!r)throw new Error("callback cannot be null.");try{if(null==e||"string"!=typeof e.valueOf())throw new Error("policyDefinitionName cannot be null or undefined and it must be of type string.");if(null===this.client.apiVersion||void 0===this.client.apiVersion||"string"!=typeof this.client.apiVersion.valueOf())throw new Error("this.client.apiVersion cannot be null or undefined and it must be of type string.");if(null===this.client.subscriptionId||void 0===this.client.subscriptionId||"string"!=typeof this.client.subscriptionId.valueOf())throw new Error("this.client.subscriptionId cannot be null or undefined and it must be of type string.");if(null!==this.client.acceptLanguage&&void 0!==this.client.acceptLanguage&&"string"!=typeof this.client.acceptLanguage.valueOf())throw new Error("this.client.acceptLanguage must be of type string.")}catch(e){return r(e)}let a=this.client.baseUri,c=a+(a.endsWith("/")?"":"/")+"subscriptions/{subscriptionId}/providers/Microsoft.Authorization/policydefinitions/{policyDefinitionName}";c=(c=c.replace("{policyDefinitionName}",encodeURIComponent(e))).replace("{subscriptionId}",encodeURIComponent(this.client.subscriptionId));let u=[];u.push("api-version="+encodeURIComponent(this.client.apiVersion)),u.length>0&&(c+="?"+u.join("&"));let l=new o;if(l.method="DELETE",l.headers={},l.url=c,this.client.generateClientRequestId&&(l.headers["x-ms-client-request-id"]=i.generateUuid()),void 0!==this.client.acceptLanguage&&null!==this.client.acceptLanguage&&(l.headers["accept-language"]=this.client.acceptLanguage),t)for(let e in t.customHeaders)t.customHeaders.hasOwnProperty(e)&&(l.headers[e]=t.customHeaders[e]);return l.headers["Content-Type"]="application/json; charset=utf-8",l.body=null,s.pipeline(l,(e,t,i)=>{if(e)return r(e);let o=t.statusCode;if(204!==o&&200!==o){let e,o=new Error(i);o.statusCode=t.statusCode,o.request=n.stripRequest(l),o.response=n.stripResponse(t),""===i&&(i=null);try{if((e=JSON.parse(i))&&(e.error&&(e=e.error),e.code&&(o.code=e.code),e.message&&(o.message=e.message)),null!=e){let t=(new s.models.CloudError).mapper();o.body=s.deserialize(t,e,"error.body")}}catch(e){return o.message=`Error "${e.message}" occurred in deserializing the responseBody `+`- "${i}" for the default response.`,r(o)}return r(o)}return""===i&&(i=null),r(null,null,l,t)})}function _get(e,t,r){let s=this.client;if(r||"function"!=typeof t||(r=t,t=null),!r)throw new Error("callback cannot be null.");try{if(null==e||"string"!=typeof e.valueOf())throw new Error("policyDefinitionName cannot be null or undefined and it must be of type string.");if(null===this.client.apiVersion||void 0===this.client.apiVersion||"string"!=typeof this.client.apiVersion.valueOf())throw new Error("this.client.apiVersion cannot be null or undefined and it must be of type string.");if(null===this.client.subscriptionId||void 0===this.client.subscriptionId||"string"!=typeof this.client.subscriptionId.valueOf())throw new Error("this.client.subscriptionId cannot be null or undefined and it must be of type string.");if(null!==this.client.acceptLanguage&&void 0!==this.client.acceptLanguage&&"string"!=typeof this.client.acceptLanguage.valueOf())throw new Error("this.client.acceptLanguage must be of type string.")}catch(e){return r(e)}let a=this.client.baseUri,c=a+(a.endsWith("/")?"":"/")+"subscriptions/{subscriptionId}/providers/Microsoft.Authorization/policydefinitions/{policyDefinitionName}";c=(c=c.replace("{policyDefinitionName}",encodeURIComponent(e))).replace("{subscriptionId}",encodeURIComponent(this.client.subscriptionId));let u=[];u.push("api-version="+encodeURIComponent(this.client.apiVersion)),u.length>0&&(c+="?"+u.join("&"));let l=new o;if(l.method="GET",l.headers={},l.url=c,this.client.generateClientRequestId&&(l.headers["x-ms-client-request-id"]=i.generateUuid()),void 0!==this.client.acceptLanguage&&null!==this.client.acceptLanguage&&(l.headers["accept-language"]=this.client.acceptLanguage),t)for(let e in t.customHeaders)t.customHeaders.hasOwnProperty(e)&&(l.headers[e]=t.customHeaders[e]);return l.headers["Content-Type"]="application/json; charset=utf-8",l.body=null,s.pipeline(l,(e,t,i)=>{if(e)return r(e);let o=t.statusCode;if(200!==o){let e,o=new Error(i);o.statusCode=t.statusCode,o.request=n.stripRequest(l),o.response=n.stripResponse(t),""===i&&(i=null);try{if((e=JSON.parse(i))&&(e.error&&(e=e.error),e.code&&(o.code=e.code),e.message&&(o.message=e.message)),null!=e){let t=(new s.models.CloudError).mapper();o.body=s.deserialize(t,e,"error.body")}}catch(e){return o.message=`Error "${e.message}" occurred in deserializing the responseBody `+`- "${i}" for the default response.`,r(o)}return r(o)}let a=null;if(""===i&&(i=null),200===o){let e=null;try{if(e=JSON.parse(i),a=JSON.parse(i),null!=e){let t=(new s.models.PolicyDefinition).mapper();a=s.deserialize(t,e,"result")}}catch(e){let o=new Error(`Error ${e} occurred in deserializing the responseBody - ${i}`);return o.request=n.stripRequest(l),o.response=n.stripResponse(t),r(o)}}return r(null,a,l,t)})}function _list(e,t){let r=this.client;if(t||"function"!=typeof e||(t=e,e=null),!t)throw new Error("callback cannot be null.");let s=e&&void 0!==e.filter?e.filter:void 0;try{if(null!=s&&"string"!=typeof s.valueOf())throw new Error("filter must be of type string.");if(null===this.client.apiVersion||void 0===this.client.apiVersion||"string"!=typeof this.client.apiVersion.valueOf())throw new Error("this.client.apiVersion cannot be null or undefined and it must be of type string.");if(null===this.client.subscriptionId||void 0===this.client.subscriptionId||"string"!=typeof this.client.subscriptionId.valueOf())throw new Error("this.client.subscriptionId cannot be null or undefined and it must be of type string.");if(null!==this.client.acceptLanguage&&void 0!==this.client.acceptLanguage&&"string"!=typeof this.client.acceptLanguage.valueOf())throw new Error("this.client.acceptLanguage must be of type string.")}catch(e){return t(e)}let a=this.client.baseUri,c=a+(a.endsWith("/")?"":"/")+"subscriptions/{subscriptionId}/providers/Microsoft.Authorization/policydefinitions";c=c.replace("{subscriptionId}",encodeURIComponent(this.client.subscriptionId));let u=[];null!=s&&u.push("$filter="+encodeURIComponent(s)),u.push("api-version="+encodeURIComponent(this.client.apiVersion)),u.length>0&&(c+="?"+u.join("&"));let l=new o;if(l.method="GET",l.headers={},l.url=c,this.client.generateClientRequestId&&(l.headers["x-ms-client-request-id"]=i.generateUuid()),void 0!==this.client.acceptLanguage&&null!==this.client.acceptLanguage&&(l.headers["accept-language"]=this.client.acceptLanguage),e)for(let t in e.customHeaders)e.customHeaders.hasOwnProperty(t)&&(l.headers[t]=e.customHeaders[t]);return l.headers["Content-Type"]="application/json; charset=utf-8",l.body=null,r.pipeline(l,(e,i,o)=>{if(e)return t(e);let s=i.statusCode;if(200!==s){let e,s=new Error(o);s.statusCode=i.statusCode,s.request=n.stripRequest(l),s.response=n.stripResponse(i),""===o&&(o=null);try{if((e=JSON.parse(o))&&(e.error&&(e=e.error),e.code&&(s.code=e.code),e.message&&(s.message=e.message)),null!=e){let t=(new r.models.CloudError).mapper();s.body=r.deserialize(t,e,"error.body")}}catch(e){return s.message=`Error "${e.message}" occurred in deserializing the responseBody `+`- "${o}" for the default response.`,t(s)}return t(s)}let a=null;if(""===o&&(o=null),200===s){let e=null;try{if(e=JSON.parse(o),a=JSON.parse(o),null!=e){let t=(new r.models.PolicyDefinitionListResult).mapper();a=r.deserialize(t,e,"result")}}catch(e){let r=new Error(`Error ${e} occurred in deserializing the responseBody - ${o}`);return r.request=n.stripRequest(l),r.response=n.stripResponse(i),t(r)}}return t(null,a,l,i)})}function _listNext(e,t,r){let s=this.client;if(r||"function"!=typeof t||(r=t,t=null),!r)throw new Error("callback cannot be null.");try{if(null==e||"string"!=typeof e.valueOf())throw new Error("nextPageLink cannot be null or undefined and it must be of type string.");if(null!==this.client.acceptLanguage&&void 0!==this.client.acceptLanguage&&"string"!=typeof this.client.acceptLanguage.valueOf())throw new Error("this.client.acceptLanguage must be of type string.")}catch(e){return r(e)}let a="{nextLink}";a=a.replace("{nextLink}",e);let c=new o;if(c.method="GET",c.headers={},c.url=a,this.client.generateClientRequestId&&(c.headers["x-ms-client-request-id"]=i.generateUuid()),void 0!==this.client.acceptLanguage&&null!==this.client.acceptLanguage&&(c.headers["accept-language"]=this.client.acceptLanguage),t)for(let e in t.customHeaders)t.customHeaders.hasOwnProperty(e)&&(c.headers[e]=t.customHeaders[e]);return c.headers["Content-Type"]="application/json; charset=utf-8",c.body=null,s.pipeline(c,(e,t,i)=>{if(e)return r(e);let o=t.statusCode;if(200!==o){let e,o=new Error(i);o.statusCode=t.statusCode,o.request=n.stripRequest(c),o.response=n.stripResponse(t),""===i&&(i=null);try{if((e=JSON.parse(i))&&(e.error&&(e=e.error),e.code&&(o.code=e.code),e.message&&(o.message=e.message)),null!=e){let t=(new s.models.CloudError).mapper();o.body=s.deserialize(t,e,"error.body")}}catch(e){return o.message=`Error "${e.message}" occurred in deserializing the responseBody `+`- "${i}" for the default response.`,r(o)}return r(o)}let a=null;if(""===i&&(i=null),200===o){let e=null;try{if(e=JSON.parse(i),a=JSON.parse(i),null!=e){let t=(new s.models.PolicyDefinitionListResult).mapper();a=s.deserialize(t,e,"result")}}catch(e){let o=new Error(`Error ${e} occurred in deserializing the responseBody - ${i}`);return o.request=n.stripRequest(c),o.response=n.stripResponse(t),r(o)}}return r(null,a,c,t)})}e.exports=class PolicyDefinitions{constructor(e){this.client=e,this._createOrUpdate=_createOrUpdate,this._deleteMethod=_deleteMethod,this._get=_get,this._list=_list,this._listNext=_listNext}createOrUpdateWithHttpOperationResponse(e,t,r){this.client;let i=this;return new Promise((o,s)=>{i._createOrUpdate(e,t,r,(e,t,r,i)=>{let a=new n.HttpOperationResponse(r,i);a.body=t,e?s(e):o(a)})})}createOrUpdate(e,t,r,n){this.client;let i=this;return n||"function"!=typeof r||(n=r,r=null),n?i._createOrUpdate(e,t,r,n):new Promise((n,o)=>{i._createOrUpdate(e,t,r,(e,t,r,i)=>{e?o(e):n(t)})})}deleteMethodWithHttpOperationResponse(e,t){this.client;let r=this;return new Promise((i,o)=>{r._deleteMethod(e,t,(e,t,r,s)=>{let a=new n.HttpOperationResponse(r,s);a.body=t,e?o(e):i(a)})})}deleteMethod(e,t,r){this.client;let n=this;return r||"function"!=typeof t||(r=t,t=null),r?n._deleteMethod(e,t,r):new Promise((r,i)=>{n._deleteMethod(e,t,(e,t,n,o)=>{e?i(e):r(t)})})}getWithHttpOperationResponse(e,t){this.client;let r=this;return new Promise((i,o)=>{r._get(e,t,(e,t,r,s)=>{let a=new n.HttpOperationResponse(r,s);a.body=t,e?o(e):i(a)})})}get(e,t,r){this.client;let n=this;return r||"function"!=typeof t||(r=t,t=null),r?n._get(e,t,r):new Promise((r,i)=>{n._get(e,t,(e,t,n,o)=>{e?i(e):r(t)})})}listWithHttpOperationResponse(e){this.client;let t=this;return new Promise((r,i)=>{t._list(e,(e,t,o,s)=>{let a=new n.HttpOperationResponse(o,s);a.body=t,e?i(e):r(a)})})}list(e,t){this.client;let r=this;return t||"function"!=typeof e||(t=e,e=null),t?r._list(e,t):new Promise((t,n)=>{r._list(e,(e,r,i,o)=>{e?n(e):t(r)})})}listNextWithHttpOperationResponse(e,t){this.client;let r=this;return new Promise((i,o)=>{r._listNext(e,t,(e,t,r,s)=>{let a=new n.HttpOperationResponse(r,s);a.body=t,e?o(e):i(a)})})}listNext(e,t,r){this.client;let n=this;return r||"function"!=typeof t||(r=t,t=null),r?n._listNext(e,t,r):new Promise((r,i)=>{n._listNext(e,t,(e,t,n,o)=>{e?i(e):r(t)})})}}},function(e,t,r){"use strict";const n=r(8),i=r(9).AzureServiceClient,o=r(494),s=r(1293);e.exports=class ManagementLinkClient extends i{constructor(e,t,r,i){if(null==e)throw new Error("'credentials' cannot be null.");if(null==t)throw new Error("'subscriptionId' cannot be null.");i||(i={}),super(e,i),this.apiVersion="2016-09-01",this.acceptLanguage="en-US",this.longRunningOperationRetryTimeout=30,this.generateClientRequestId=!0,this.baseUri=r,this.baseUri||(this.baseUri="https://management.azure.com"),this.credentials=e,this.subscriptionId=t;let a=this.getPackageJsonInfo(__dirname);this.addUserAgentInfo(`${a.name}/${a.version}`),null!==i.apiVersion&&void 0!==i.apiVersion&&(this.apiVersion=i.apiVersion),null!==i.acceptLanguage&&void 0!==i.acceptLanguage&&(this.acceptLanguage=i.acceptLanguage),null!==i.longRunningOperationRetryTimeout&&void 0!==i.longRunningOperationRetryTimeout&&(this.longRunningOperationRetryTimeout=i.longRunningOperationRetryTimeout),null!==i.generateClientRequestId&&void 0!==i.generateClientRequestId&&(this.generateClientRequestId=i.generateClientRequestId),this.resourceLinks=new s.ResourceLinks(this),this.models=o,n.addSerializationMixin(this)}}},function(e,t,r){"use strict";e.exports=class ResourceLinkFilter{constructor(){}mapper(){return{required:!1,serializedName:"ResourceLinkFilter",type:{name:"Composite",className:"ResourceLinkFilter",modelProperties:{targetId:{required:!0,serializedName:"targetId",type:{name:"String"}}}}}}}},function(e,t,r){"use strict";e.exports=class ResourceLinkProperties{constructor(){}mapper(){return{required:!1,serializedName:"ResourceLinkProperties",type:{name:"Composite",className:"ResourceLinkProperties",modelProperties:{sourceId:{required:!1,readOnly:!0,serializedName:"sourceId",type:{name:"String"}},targetId:{required:!0,serializedName:"targetId",type:{name:"String"}},notes:{required:!1,serializedName:"notes",type:{name:"String"}}}}}}}},function(e,t,r){"use strict";r(494);e.exports=class ResourceLink{constructor(){}mapper(){return{required:!1,serializedName:"ResourceLink",type:{name:"Composite",className:"ResourceLink",modelProperties:{id:{required:!1,readOnly:!0,serializedName:"id",type:{name:"String"}},name:{required:!1,readOnly:!0,serializedName:"name",type:{name:"String"}},properties:{required:!1,serializedName:"properties",type:{name:"Composite",className:"ResourceLinkProperties"}}}}}}}},function(e,t,r){"use strict";t.ResourceLinks=r(1294)},function(e,t,r){"use strict";const n=r(8),i=r(9),o=n.WebResource;function _deleteMethod(e,t,r){let s=this.client;if(r||"function"!=typeof t||(r=t,t=null),!r)throw new Error("callback cannot be null.");try{if(null==e||"string"!=typeof e.valueOf())throw new Error("linkId cannot be null or undefined and it must be of type string.");if(null===this.client.apiVersion||void 0===this.client.apiVersion||"string"!=typeof this.client.apiVersion.valueOf())throw new Error("this.client.apiVersion cannot be null or undefined and it must be of type string.");if(null!==this.client.acceptLanguage&&void 0!==this.client.acceptLanguage&&"string"!=typeof this.client.acceptLanguage.valueOf())throw new Error("this.client.acceptLanguage must be of type string.")}catch(e){return r(e)}let a=this.client.baseUri,c=a+(a.endsWith("/")?"":"/")+"{linkId}";c=c.replace("{linkId}",e);let u=[];u.push("api-version="+encodeURIComponent(this.client.apiVersion)),u.length>0&&(c+="?"+u.join("&"));let l=new o;if(l.method="DELETE",l.headers={},l.url=c,this.client.generateClientRequestId&&(l.headers["x-ms-client-request-id"]=i.generateUuid()),void 0!==this.client.acceptLanguage&&null!==this.client.acceptLanguage&&(l.headers["accept-language"]=this.client.acceptLanguage),t)for(let e in t.customHeaders)t.customHeaders.hasOwnProperty(e)&&(l.headers[e]=t.customHeaders[e]);return l.headers["Content-Type"]="application/json; charset=utf-8",l.body=null,s.pipeline(l,(e,t,i)=>{if(e)return r(e);let o=t.statusCode;if(200!==o&&204!==o){let e,o=new Error(i);o.statusCode=t.statusCode,o.request=n.stripRequest(l),o.response=n.stripResponse(t),""===i&&(i=null);try{if((e=JSON.parse(i))&&(e.error&&(e=e.error),e.code&&(o.code=e.code),e.message&&(o.message=e.message)),null!=e){let t=(new s.models.CloudError).mapper();o.body=s.deserialize(t,e,"error.body")}}catch(e){return o.message=`Error "${e.message}" occurred in deserializing the responseBody `+`- "${i}" for the default response.`,r(o)}return r(o)}return""===i&&(i=null),r(null,null,l,t)})}function _createOrUpdate(e,t,r,s){let a=this.client;if(s||"function"!=typeof r||(s=r,r=null),!s)throw new Error("callback cannot be null.");try{if(null==e||"string"!=typeof e.valueOf())throw new Error("linkId cannot be null or undefined and it must be of type string.");if(null==t)throw new Error("parameters cannot be null or undefined.");if(null===this.client.apiVersion||void 0===this.client.apiVersion||"string"!=typeof this.client.apiVersion.valueOf())throw new Error("this.client.apiVersion cannot be null or undefined and it must be of type string.");if(null!==this.client.acceptLanguage&&void 0!==this.client.acceptLanguage&&"string"!=typeof this.client.acceptLanguage.valueOf())throw new Error("this.client.acceptLanguage must be of type string.")}catch(e){return s(e)}let c=this.client.baseUri,u=c+(c.endsWith("/")?"":"/")+"{linkId}";u=u.replace("{linkId}",e);let l=[];l.push("api-version="+encodeURIComponent(this.client.apiVersion)),l.length>0&&(u+="?"+l.join("&"));let p=new o;if(p.method="PUT",p.headers={},p.url=u,this.client.generateClientRequestId&&(p.headers["x-ms-client-request-id"]=i.generateUuid()),void 0!==this.client.acceptLanguage&&null!==this.client.acceptLanguage&&(p.headers["accept-language"]=this.client.acceptLanguage),r)for(let e in r.customHeaders)r.customHeaders.hasOwnProperty(e)&&(p.headers[e]=r.customHeaders[e]);p.headers["Content-Type"]="application/json; charset=utf-8";let d=null,h=null;try{if(null!=t){let e=(new a.models.ResourceLink).mapper();h=a.serialize(e,t,"parameters"),d=JSON.stringify(h)}}catch(e){let r=new Error(`Error "${e.message}" occurred in serializing the `+`payload - ${JSON.stringify(t,null,2)}.`);return s(r)}return p.body=d,a.pipeline(p,(e,t,r)=>{if(e)return s(e);let i=t.statusCode;if(201!==i&&200!==i){let e,i=new Error(r);i.statusCode=t.statusCode,i.request=n.stripRequest(p),i.response=n.stripResponse(t),""===r&&(r=null);try{if((e=JSON.parse(r))&&(e.error&&(e=e.error),e.code&&(i.code=e.code),e.message&&(i.message=e.message)),null!=e){let t=(new a.models.CloudError).mapper();i.body=a.deserialize(t,e,"error.body")}}catch(e){return i.message=`Error "${e.message}" occurred in deserializing the responseBody `+`- "${r}" for the default response.`,s(i)}return s(i)}let o=null;if(""===r&&(r=null),201===i){let e=null;try{if(e=JSON.parse(r),o=JSON.parse(r),null!=e){let t=(new a.models.ResourceLink).mapper();o=a.deserialize(t,e,"result")}}catch(e){let i=new Error(`Error ${e} occurred in deserializing the responseBody - ${r}`);return i.request=n.stripRequest(p),i.response=n.stripResponse(t),s(i)}}if(200===i){let e=null;try{if(e=JSON.parse(r),o=JSON.parse(r),null!=e){let t=(new a.models.ResourceLink).mapper();o=a.deserialize(t,e,"result")}}catch(e){let i=new Error(`Error ${e} occurred in deserializing the responseBody - ${r}`);return i.request=n.stripRequest(p),i.response=n.stripResponse(t),s(i)}}return s(null,o,p,t)})}function _get(e,t,r){let s=this.client;if(r||"function"!=typeof t||(r=t,t=null),!r)throw new Error("callback cannot be null.");try{if(null==e||"string"!=typeof e.valueOf())throw new Error("linkId cannot be null or undefined and it must be of type string.");if(null===this.client.apiVersion||void 0===this.client.apiVersion||"string"!=typeof this.client.apiVersion.valueOf())throw new Error("this.client.apiVersion cannot be null or undefined and it must be of type string.");if(null!==this.client.acceptLanguage&&void 0!==this.client.acceptLanguage&&"string"!=typeof this.client.acceptLanguage.valueOf())throw new Error("this.client.acceptLanguage must be of type string.")}catch(e){return r(e)}let a=this.client.baseUri,c=a+(a.endsWith("/")?"":"/")+"{linkId}";c=c.replace("{linkId}",e);let u=[];u.push("api-version="+encodeURIComponent(this.client.apiVersion)),u.length>0&&(c+="?"+u.join("&"));let l=new o;if(l.method="GET",l.headers={},l.url=c,this.client.generateClientRequestId&&(l.headers["x-ms-client-request-id"]=i.generateUuid()),void 0!==this.client.acceptLanguage&&null!==this.client.acceptLanguage&&(l.headers["accept-language"]=this.client.acceptLanguage),t)for(let e in t.customHeaders)t.customHeaders.hasOwnProperty(e)&&(l.headers[e]=t.customHeaders[e]);return l.headers["Content-Type"]="application/json; charset=utf-8",l.body=null,s.pipeline(l,(e,t,i)=>{if(e)return r(e);let o=t.statusCode;if(200!==o){let e,o=new Error(i);o.statusCode=t.statusCode,o.request=n.stripRequest(l),o.response=n.stripResponse(t),""===i&&(i=null);try{if((e=JSON.parse(i))&&(e.error&&(e=e.error),e.code&&(o.code=e.code),e.message&&(o.message=e.message)),null!=e){let t=(new s.models.CloudError).mapper();o.body=s.deserialize(t,e,"error.body")}}catch(e){return o.message=`Error "${e.message}" occurred in deserializing the responseBody `+`- "${i}" for the default response.`,r(o)}return r(o)}let a=null;if(""===i&&(i=null),200===o){let e=null;try{if(e=JSON.parse(i),a=JSON.parse(i),null!=e){let t=(new s.models.ResourceLink).mapper();a=s.deserialize(t,e,"result")}}catch(e){let o=new Error(`Error ${e} occurred in deserializing the responseBody - ${i}`);return o.request=n.stripRequest(l),o.response=n.stripResponse(t),r(o)}}return r(null,a,l,t)})}function _listAtSubscription(e,t){let r=this.client;if(t||"function"!=typeof e||(t=e,e=null),!t)throw new Error("callback cannot be null.");let s=e&&void 0!==e.filter?e.filter:void 0;try{if(null!=s&&"string"!=typeof s.valueOf())throw new Error("filter must be of type string.");if(null===this.client.apiVersion||void 0===this.client.apiVersion||"string"!=typeof this.client.apiVersion.valueOf())throw new Error("this.client.apiVersion cannot be null or undefined and it must be of type string.");if(null===this.client.subscriptionId||void 0===this.client.subscriptionId||"string"!=typeof this.client.subscriptionId.valueOf())throw new Error("this.client.subscriptionId cannot be null or undefined and it must be of type string.");if(null!==this.client.acceptLanguage&&void 0!==this.client.acceptLanguage&&"string"!=typeof this.client.acceptLanguage.valueOf())throw new Error("this.client.acceptLanguage must be of type string.")}catch(e){return t(e)}let a=this.client.baseUri,c=a+(a.endsWith("/")?"":"/")+"subscriptions/{subscriptionId}/providers/Microsoft.Resources/links";c=c.replace("{subscriptionId}",encodeURIComponent(this.client.subscriptionId));let u=[];null!=s&&u.push("$filter="+encodeURIComponent(s)),u.push("api-version="+encodeURIComponent(this.client.apiVersion)),u.length>0&&(c+="?"+u.join("&"));let l=new o;if(l.method="GET",l.headers={},l.url=c,this.client.generateClientRequestId&&(l.headers["x-ms-client-request-id"]=i.generateUuid()),void 0!==this.client.acceptLanguage&&null!==this.client.acceptLanguage&&(l.headers["accept-language"]=this.client.acceptLanguage),e)for(let t in e.customHeaders)e.customHeaders.hasOwnProperty(t)&&(l.headers[t]=e.customHeaders[t]);return l.headers["Content-Type"]="application/json; charset=utf-8",l.body=null,r.pipeline(l,(e,i,o)=>{if(e)return t(e);let s=i.statusCode;if(200!==s){let e,s=new Error(o);s.statusCode=i.statusCode,s.request=n.stripRequest(l),s.response=n.stripResponse(i),""===o&&(o=null);try{if((e=JSON.parse(o))&&(e.error&&(e=e.error),e.code&&(s.code=e.code),e.message&&(s.message=e.message)),null!=e){let t=(new r.models.CloudError).mapper();s.body=r.deserialize(t,e,"error.body")}}catch(e){return s.message=`Error "${e.message}" occurred in deserializing the responseBody `+`- "${o}" for the default response.`,t(s)}return t(s)}let a=null;if(""===o&&(o=null),200===s){let e=null;try{if(e=JSON.parse(o),a=JSON.parse(o),null!=e){let t=(new r.models.ResourceLinkResult).mapper();a=r.deserialize(t,e,"result")}}catch(e){let r=new Error(`Error ${e} occurred in deserializing the responseBody - ${o}`);return r.request=n.stripRequest(l),r.response=n.stripResponse(i),t(r)}}return t(null,a,l,i)})}function _listAtSourceScope(e,t,r){let s=this.client;if(r||"function"!=typeof t||(r=t,t=null),!r)throw new Error("callback cannot be null.");let a=t&&void 0!==t.filter?t.filter:void 0;try{if(null==e||"string"!=typeof e.valueOf())throw new Error("scope cannot be null or undefined and it must be of type string.");if(null!=a&&"string"!=typeof a.valueOf())throw new Error("filter must be of type string.");if(null===this.client.apiVersion||void 0===this.client.apiVersion||"string"!=typeof this.client.apiVersion.valueOf())throw new Error("this.client.apiVersion cannot be null or undefined and it must be of type string.");if(null!==this.client.acceptLanguage&&void 0!==this.client.acceptLanguage&&"string"!=typeof this.client.acceptLanguage.valueOf())throw new Error("this.client.acceptLanguage must be of type string.")}catch(e){return r(e)}let c=this.client.baseUri,u=c+(c.endsWith("/")?"":"/")+"{scope}/providers/Microsoft.Resources/links";u=u.replace("{scope}",e);let l=[];null!=a&&l.push("$filter="+encodeURIComponent(a)),l.push("api-version="+encodeURIComponent(this.client.apiVersion)),l.length>0&&(u+="?"+l.join("&"));let p=new o;if(p.method="GET",p.headers={},p.url=u,this.client.generateClientRequestId&&(p.headers["x-ms-client-request-id"]=i.generateUuid()),void 0!==this.client.acceptLanguage&&null!==this.client.acceptLanguage&&(p.headers["accept-language"]=this.client.acceptLanguage),t)for(let e in t.customHeaders)t.customHeaders.hasOwnProperty(e)&&(p.headers[e]=t.customHeaders[e]);return p.headers["Content-Type"]="application/json; charset=utf-8",p.body=null,s.pipeline(p,(e,t,i)=>{if(e)return r(e);let o=t.statusCode;if(200!==o){let e,o=new Error(i);o.statusCode=t.statusCode,o.request=n.stripRequest(p),o.response=n.stripResponse(t),""===i&&(i=null);try{if((e=JSON.parse(i))&&(e.error&&(e=e.error),e.code&&(o.code=e.code),e.message&&(o.message=e.message)),null!=e){let t=(new s.models.CloudError).mapper();o.body=s.deserialize(t,e,"error.body")}}catch(e){return o.message=`Error "${e.message}" occurred in deserializing the responseBody `+`- "${i}" for the default response.`,r(o)}return r(o)}let a=null;if(""===i&&(i=null),200===o){let e=null;try{if(e=JSON.parse(i),a=JSON.parse(i),null!=e){let t=(new s.models.ResourceLinkResult).mapper();a=s.deserialize(t,e,"result")}}catch(e){let o=new Error(`Error ${e} occurred in deserializing the responseBody - ${i}`);return o.request=n.stripRequest(p),o.response=n.stripResponse(t),r(o)}}return r(null,a,p,t)})}function _listAtSubscriptionNext(e,t,r){let s=this.client;if(r||"function"!=typeof t||(r=t,t=null),!r)throw new Error("callback cannot be null.");try{if(null==e||"string"!=typeof e.valueOf())throw new Error("nextPageLink cannot be null or undefined and it must be of type string.");if(null!==this.client.acceptLanguage&&void 0!==this.client.acceptLanguage&&"string"!=typeof this.client.acceptLanguage.valueOf())throw new Error("this.client.acceptLanguage must be of type string.")}catch(e){return r(e)}let a="{nextLink}";a=a.replace("{nextLink}",e);let c=new o;if(c.method="GET",c.headers={},c.url=a,this.client.generateClientRequestId&&(c.headers["x-ms-client-request-id"]=i.generateUuid()),void 0!==this.client.acceptLanguage&&null!==this.client.acceptLanguage&&(c.headers["accept-language"]=this.client.acceptLanguage),t)for(let e in t.customHeaders)t.customHeaders.hasOwnProperty(e)&&(c.headers[e]=t.customHeaders[e]);return c.headers["Content-Type"]="application/json; charset=utf-8",c.body=null,s.pipeline(c,(e,t,i)=>{if(e)return r(e);let o=t.statusCode;if(200!==o){let e,o=new Error(i);o.statusCode=t.statusCode,o.request=n.stripRequest(c),o.response=n.stripResponse(t),""===i&&(i=null);try{if((e=JSON.parse(i))&&(e.error&&(e=e.error),e.code&&(o.code=e.code),e.message&&(o.message=e.message)),null!=e){let t=(new s.models.CloudError).mapper();o.body=s.deserialize(t,e,"error.body")}}catch(e){return o.message=`Error "${e.message}" occurred in deserializing the responseBody `+`- "${i}" for the default response.`,r(o)}return r(o)}let a=null;if(""===i&&(i=null),200===o){let e=null;try{if(e=JSON.parse(i),a=JSON.parse(i),null!=e){let t=(new s.models.ResourceLinkResult).mapper();a=s.deserialize(t,e,"result")}}catch(e){let o=new Error(`Error ${e} occurred in deserializing the responseBody - ${i}`);return o.request=n.stripRequest(c),o.response=n.stripResponse(t),r(o)}}return r(null,a,c,t)})}function _listAtSourceScopeNext(e,t,r){let s=this.client;if(r||"function"!=typeof t||(r=t,t=null),!r)throw new Error("callback cannot be null.");try{if(null==e||"string"!=typeof e.valueOf())throw new Error("nextPageLink cannot be null or undefined and it must be of type string.");if(null!==this.client.acceptLanguage&&void 0!==this.client.acceptLanguage&&"string"!=typeof this.client.acceptLanguage.valueOf())throw new Error("this.client.acceptLanguage must be of type string.")}catch(e){return r(e)}let a="{nextLink}";a=a.replace("{nextLink}",e);let c=new o;if(c.method="GET",c.headers={},c.url=a,this.client.generateClientRequestId&&(c.headers["x-ms-client-request-id"]=i.generateUuid()),void 0!==this.client.acceptLanguage&&null!==this.client.acceptLanguage&&(c.headers["accept-language"]=this.client.acceptLanguage),t)for(let e in t.customHeaders)t.customHeaders.hasOwnProperty(e)&&(c.headers[e]=t.customHeaders[e]);return c.headers["Content-Type"]="application/json; charset=utf-8",c.body=null,s.pipeline(c,(e,t,i)=>{if(e)return r(e);let o=t.statusCode;if(200!==o){let e,o=new Error(i);o.statusCode=t.statusCode,o.request=n.stripRequest(c),o.response=n.stripResponse(t),""===i&&(i=null);try{if((e=JSON.parse(i))&&(e.error&&(e=e.error),e.code&&(o.code=e.code),e.message&&(o.message=e.message)),null!=e){let t=(new s.models.CloudError).mapper();o.body=s.deserialize(t,e,"error.body")}}catch(e){return o.message=`Error "${e.message}" occurred in deserializing the responseBody `+`- "${i}" for the default response.`,r(o)}return r(o)}let a=null;if(""===i&&(i=null),200===o){let e=null;try{if(e=JSON.parse(i),a=JSON.parse(i),null!=e){let t=(new s.models.ResourceLinkResult).mapper();a=s.deserialize(t,e,"result")}}catch(e){let o=new Error(`Error ${e} occurred in deserializing the responseBody - ${i}`);return o.request=n.stripRequest(c),o.response=n.stripResponse(t),r(o)}}return r(null,a,c,t)})}e.exports=class ResourceLinks{constructor(e){this.client=e,this._deleteMethod=_deleteMethod,this._createOrUpdate=_createOrUpdate,this._get=_get,this._listAtSubscription=_listAtSubscription,this._listAtSourceScope=_listAtSourceScope,this._listAtSubscriptionNext=_listAtSubscriptionNext,this._listAtSourceScopeNext=_listAtSourceScopeNext}deleteMethodWithHttpOperationResponse(e,t){this.client;let r=this;return new Promise((i,o)=>{r._deleteMethod(e,t,(e,t,r,s)=>{let a=new n.HttpOperationResponse(r,s);a.body=t,e?o(e):i(a)})})}deleteMethod(e,t,r){this.client;let n=this;return r||"function"!=typeof t||(r=t,t=null),r?n._deleteMethod(e,t,r):new Promise((r,i)=>{n._deleteMethod(e,t,(e,t,n,o)=>{e?i(e):r(t)})})}createOrUpdateWithHttpOperationResponse(e,t,r){this.client;let i=this;return new Promise((o,s)=>{i._createOrUpdate(e,t,r,(e,t,r,i)=>{let a=new n.HttpOperationResponse(r,i);a.body=t,e?s(e):o(a)})})}createOrUpdate(e,t,r,n){this.client;let i=this;return n||"function"!=typeof r||(n=r,r=null),n?i._createOrUpdate(e,t,r,n):new Promise((n,o)=>{i._createOrUpdate(e,t,r,(e,t,r,i)=>{e?o(e):n(t)})})}getWithHttpOperationResponse(e,t){this.client;let r=this;return new Promise((i,o)=>{r._get(e,t,(e,t,r,s)=>{let a=new n.HttpOperationResponse(r,s);a.body=t,e?o(e):i(a)})})}get(e,t,r){this.client;let n=this;return r||"function"!=typeof t||(r=t,t=null),r?n._get(e,t,r):new Promise((r,i)=>{n._get(e,t,(e,t,n,o)=>{e?i(e):r(t)})})}listAtSubscriptionWithHttpOperationResponse(e){this.client;let t=this;return new Promise((r,i)=>{t._listAtSubscription(e,(e,t,o,s)=>{let a=new n.HttpOperationResponse(o,s);a.body=t,e?i(e):r(a)})})}listAtSubscription(e,t){this.client;let r=this;return t||"function"!=typeof e||(t=e,e=null),t?r._listAtSubscription(e,t):new Promise((t,n)=>{r._listAtSubscription(e,(e,r,i,o)=>{e?n(e):t(r)})})}listAtSourceScopeWithHttpOperationResponse(e,t){this.client;let r=this;return new Promise((i,o)=>{r._listAtSourceScope(e,t,(e,t,r,s)=>{let a=new n.HttpOperationResponse(r,s);a.body=t,e?o(e):i(a)})})}listAtSourceScope(e,t,r){this.client;let n=this;return r||"function"!=typeof t||(r=t,t=null),r?n._listAtSourceScope(e,t,r):new Promise((r,i)=>{n._listAtSourceScope(e,t,(e,t,n,o)=>{e?i(e):r(t)})})}listAtSubscriptionNextWithHttpOperationResponse(e,t){this.client;let r=this;return new Promise((i,o)=>{r._listAtSubscriptionNext(e,t,(e,t,r,s)=>{let a=new n.HttpOperationResponse(r,s);a.body=t,e?o(e):i(a)})})}listAtSubscriptionNext(e,t,r){this.client;let n=this;return r||"function"!=typeof t||(r=t,t=null),r?n._listAtSubscriptionNext(e,t,r):new Promise((r,i)=>{n._listAtSubscriptionNext(e,t,(e,t,n,o)=>{e?i(e):r(t)})})}listAtSourceScopeNextWithHttpOperationResponse(e,t){this.client;let r=this;return new Promise((i,o)=>{r._listAtSourceScopeNext(e,t,(e,t,r,s)=>{let a=new n.HttpOperationResponse(r,s);a.body=t,e?o(e):i(a)})})}listAtSourceScopeNext(e,t,r){this.client;let n=this;return r||"function"!=typeof t||(r=t,t=null),r?n._listAtSourceScopeNext(e,t,r):new Promise((r,i)=>{n._listAtSourceScopeNext(e,t,(e,t,n,o)=>{e?i(e):r(t)})})}}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n=r(25);t.IotHubItem=class IotHubItem{constructor(e){this.iotHubDescription=e,this.label=e.name,this.description=n.Utility.getResourceGroupNameFromId(e.id)}}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.LocationItem=class LocationItem{constructor(e){this.location=e,this.label=e.displayName,this.description=e.name}}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.ResourceGroupItem=class ResourceGroupItem{constructor(e){this.resourceGroup=e,this.label=e.name,this.description=e.location}}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.SubscriptionItem=class SubscriptionItem{constructor(e,t){this.subscription=e,this.session=t,this.label=e.displayName,this.description=e.subscriptionId}}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n=r(10),i=r(68),o=r(16),s=r(18),a=r(25);t.SnippetManager=class SnippetManager extends i.BaseExplorer{constructor(e){super(e),this.connectionStringKeys=[o.Constants.DeviceConnectionStringKey,o.Constants.IotHubConnectionStringKey]}replaceConnectionString(e){if(!e.contentChanges[0])return;let t=e.contentChanges[0].text;if(/\r|\n/.exec(t)&&-1===e.document.uri.scheme.indexOf("git")){let e=n.window.activeTextEditor;if(!e)return;let r=e.document,i=r.getText(),o=a.Utility.getConfiguration();this.connectionStringKeys.forEach(a=>{let c=o.get(a),u=this.getTextWithAngleBracket(a);if(t.indexOf(u)>-1&&c&&!c.startsWith("<<insert")){let t=i.indexOf(u);for(;t>-1;)e.edit(e=>{e.replace(new n.Range(r.positionAt(t),r.positionAt(t+u.length)),c),s.TelemetryClient.sendEvent("Snippet.ReplaceConnectionString",{Type:a})}),t=i.indexOf(u,t+1)}})}}getTextWithAngleBracket(e){return"<"+e+">"}}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n=r(11),i=r(6),o=r(10),s=r(16),a=r(18);t.WelcomePage=class WelcomePage{constructor(e){this.context=e}checkAndShow(){this.context.globalState.get(s.Constants.IsWelcomePageShown)||o.extensions.getExtension("vsciot-vscode.azure-iot-tools")||(a.TelemetryClient.sendEvent(s.Constants.IoTHubAIShowWelcomePagetEvent,{trigger:"auto"}),this.show(),this.context.globalState.update(s.Constants.IsWelcomePageShown,!0))}show(){if(this.panel)this.panel.reveal(o.ViewColumn.One);else{const e=new Date;this.panel=o.window.createWebviewPanel("welcomePage","Welcome to Azure IoT Hub Toolkit",o.ViewColumn.One,{enableCommandUris:!0,enableScripts:!0,retainContextWhenHidden:!0});let t=n.readFileSync(this.context.asAbsolutePath(i.join("resources","welcome","index.html")),"utf8");t=t.replace(/{{root}}/g,o.Uri.file(this.context.asAbsolutePath(".")).with({scheme:"vscode-resource"}).toString()),this.panel.webview.html=t,this.panel.onDidDispose(()=>{this.panel=void 0;const t=((new Date).getTime()-e.getTime())/1e3;a.TelemetryClient.sendEvent("General.WelcomePage.Close",{duration:t.toString()})}),this.panel.webview.onDidReceiveMessage(e=>{a.TelemetryClient.sendEvent("General.WelcomePage.Click",{href:e.href})})}}}},function(e,t,r){"use strict";var n=this&&this.__awaiter||function(e,t,r,n){return new(r||(r=Promise))(function(i,o){function fulfilled(e){try{step(n.next(e))}catch(e){o(e)}}function rejected(e){try{step(n.throw(e))}catch(e){o(e)}}function step(e){e.done?i(e.value):new r(function(t){t(e.value)}).then(fulfilled,rejected)}step((n=n.apply(e,t||[])).next())})};Object.defineProperty(t,"__esModule",{value:!0});const i=r(10),o=r(16),s=r(1302),a=r(1303),c=r(18),u=r(25);t.DeviceTree=class DeviceTree{constructor(e){this.context=e,this._onDidChangeTreeData=new i.EventEmitter,this.onDidChangeTreeData=this._onDidChangeTreeData.event}refresh(e){this._onDidChangeTreeData.fire(e),c.TelemetryClient.sendEvent("AZ.Refresh")}setIoTHubConnectionString(){return n(this,void 0,void 0,function*(){c.TelemetryClient.sendEvent("General.Set.IoTHubConnectionString"),(yield u.Utility.setConnectionString(o.Constants.IotHubConnectionStringKey,o.Constants.IotHubConnectionStringTitle))&&(i.window.showInformationMessage(`${o.Constants.IotHubConnectionStringTitle} is updated.`),this._onDidChangeTreeData.fire())})}getTreeItem(e){return e.getTreeItem()}getChildren(e){return n(this,void 0,void 0,function*(){let t=yield u.Utility.getConnectionString(o.Constants.IotHubConnectionStringKey,o.Constants.IotHubConnectionStringTitle,!1);return t?e?e.getChildren(this.context,t):this.showLableNodes(t):u.Utility.getDefaultTreeItems()})}showLableNodes(e){return n(this,void 0,void 0,function*(){return c.TelemetryClient.sendEvent("AZ.LoadLableNodes"),this.autoRefreshIntervalID&&clearInterval(this.autoRefreshIntervalID),this.autoRefreshIntervalID=this.generateAutoRefreshInterval(),[new s.DeviceLabelNode(e),new a.EndpointsLabelNode]})}generateAutoRefreshInterval(){if(u.Utility.getConfig(o.Constants.TreeViewAutoRefreshEnableKey)){let e=u.Utility.getConfig(o.Constants.TreeViewAutoRefreshIntervalInSecondsKey);return setInterval(()=>{this._onDidChangeTreeData.fire()},1e3*e)}}}},function(e,t,r){"use strict";var n=this&&this.__awaiter||function(e,t,r,n){return new(r||(r=Promise))(function(i,o){function fulfilled(e){try{step(n.next(e))}catch(e){o(e)}}function rejected(e){try{step(n.throw(e))}catch(e){o(e)}}function step(e){e.done?i(e.value):new r(function(t){t(e.value)}).then(fulfilled,rejected)}step((n=n.apply(e,t||[])).next())})};Object.defineProperty(t,"__esModule",{value:!0});const i=r(10),o=r(16),s=r(18),a=r(25),c=r(437),u=r(378);t.DeviceLabelNode=class DeviceLabelNode{constructor(e){this.iotHubConnectionString=e}getTreeItem(){return{label:"Devices",collapsibleState:i.TreeItemCollapsibleState.Expanded,contextValue:"devices-label"}}getChildren(){return n(this,void 0,void 0,function*(){s.TelemetryClient.sendEvent(o.Constants.IoTHubAIStartLoadDeviceTreeEvent);try{const e=yield a.Utility.getDeviceList(this.iotHubConnectionString,o.Constants.ExtensionContext);let t=e.map(e=>new c.DeviceNode(e));return 0===t.length&&t.push(new u.InfoNode(`No devices in ${a.Utility.getHostName(this.iotHubConnectionString)}`)),s.TelemetryClient.sendEvent(o.Constants.IoTHubAILoadDeviceTreeEvent,{Result:"Success",DeviceCount:e.length.toString()}),t}catch(e){return s.TelemetryClient.sendEvent(o.Constants.IoTHubAILoadDeviceTreeEvent,{Result:"Fail",Message:e.message}),a.Utility.getErrorMessageTreeItems("IoT Hub devices",e.message)}})}}},function(e,t,r){"use strict";var n=this&&this.__awaiter||function(e,t,r,n){return new(r||(r=Promise))(function(i,o){function fulfilled(e){try{step(n.next(e))}catch(e){o(e)}}function rejected(e){try{step(n.throw(e))}catch(e){o(e)}}function step(e){e.done?i(e.value):new r(function(t){t(e.value)}).then(fulfilled,rejected)}step((n=n.apply(e,t||[])).next())})};Object.defineProperty(t,"__esModule",{value:!0});const i=r(477),o=r(10),s=r(16),a=r(18),c=r(25),u=r(377),l=r(1304),p=r(1306),d=r(1309);t.EndpointsLabelNode=class EndpointsLabelNode{constructor(){}getTreeItem(){return{label:"Endpoints",collapsibleState:o.TreeItemCollapsibleState.Collapsed,contextValue:"endpoints-label"}}getChildren(){return n(this,void 0,void 0,function*(){a.TelemetryClient.sendEvent(s.Constants.IoTHubAILoadEndpointsTreeStartEvent);try{const e=c.Utility.getAzureAccountApi(),t=s.Constants.ExtensionContext.globalState.get(s.Constants.StateKeySubsID);if(!t||!(yield e.waitForLogin()))return[this.getSelectIoTHubCommandNode()];const r=e.subscriptions.find(e=>e.subscription.subscriptionId===t),n=new i.default(r.session.credentials,r.subscription.subscriptionId,r.session.environment.resourceManagerEndpointUrl),o=(yield n.iotHubResource.listBySubscription()).find(e=>e.id===s.Constants.ExtensionContext.globalState.get(s.Constants.StateKeyIoTHubID));return a.TelemetryClient.sendEvent(s.Constants.IoTHubAILoadEndpointsTreeDoneEvent,{Result:"Success"}),o?[new l.BuiltInEndpointLabelNode,new d.EventHubLabelNode(r,o.properties.routing.endpoints.eventHubs),new p.CustomEndpointLabelNode("Service Bus queue",o.properties.routing.endpoints.serviceBusQueues),new p.CustomEndpointLabelNode("Service Bus topic",o.properties.routing.endpoints.serviceBusTopics),new p.CustomEndpointLabelNode("Blob storage",o.properties.routing.endpoints.storageContainers)]:[this.getSelectIoTHubCommandNode()]}catch(e){return a.TelemetryClient.sendEvent(s.Constants.IoTHubAILoadEndpointsTreeDoneEvent,{Result:"Fail",Message:e.message}),c.Utility.getErrorMessageTreeItems("endpoints",e.message)}})}getSelectIoTHubCommandNode(){return new u.CommandNode("-> Please select an IoT Hub","azure-iot-toolkit.selectIoTHub")}}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n=r(10),i=r(1305);t.BuiltInEndpointLabelNode=class BuiltInEndpointLabelNode{constructor(){}getTreeItem(){return{label:"Built-in endpints",collapsibleState:n.TreeItemCollapsibleState.Collapsed,contextValue:"built-in-endpoint-label"}}getChildren(){return[new i.BuiltInEndpointItemNode]}}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.BuiltInEndpointItemNode=class BuiltInEndpointItemNode{constructor(){}getTreeItem(){return{label:"events",contextValue:"events"}}getChildren(){return[]}}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n=r(10),i=r(1307);t.CustomEndpointLabelNode=class CustomEndpointLabelNode{constructor(e,t){this.label=e,this.properties=t}getTreeItem(){return{label:this.label,collapsibleState:n.TreeItemCollapsibleState.Collapsed,contextValue:"custom-endpoint-label"}}getChildren(){return this.properties.map(e=>new i.CustomEndpointItemNode(e.name))}}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n=r(1308);t.CustomEndpointItemNode=class CustomEndpointItemNode{constructor(e){this.name=e}getTreeItem(){return new n.CustomEndpointItem(this.name)}getChildren(){return[]}}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n=r(10);t.CustomEndpointItem=class CustomEndpointItem extends n.TreeItem{constructor(e){super(e),this.contextValue="custom-endpoint"}}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n=r(10),i=r(1310),o=r(1311);t.EventHubLabelNode=class EventHubLabelNode{constructor(e,t){this.azureSubscription=e,this.eventHubProperties=t}getTreeItem(){return{label:"Event Hubs",collapsibleState:n.TreeItemCollapsibleState.Collapsed,contextValue:"event-hub-label"}}getChildren(){return this.eventHubProperties.map(e=>new o.EventHubItemNode(new i.EventHubItem(this.azureSubscription,e)))}}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n=r(10);t.EventHubItem=class EventHubItem extends n.TreeItem{constructor(e,t){super(t.name),this.azureSubscription=e,this.eventHubProperty=t,this.contextValue="event-hub"}}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.EventHubItemNode=class EventHubItemNode{constructor(e){this.eventHubItem=e}getTreeItem(){return this.eventHubItem}getChildren(){return[]}}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n=r(284),i=r(10);class Executor{static runInTerminal(e,t="Azure IoT Hub Toolkit"){void 0===this.terminals[t]&&(this.terminals[t]=i.window.createTerminal(t)),this.terminals[t].show(),this.terminals[t].sendText(e)}static exec(e){return n.exec(e)}static execSync(e){return n.execSync(e,{encoding:"utf8"})}static onDidCloseTerminal(e){delete this.terminals[e.name]}}Executor.terminals={},t.Executor=Executor},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n=r(10);t.DeviceTwinCodeLensProvider=class DeviceTwinCodeLensProvider{provideCodeLenses(e,t){const r=new n.Range(0,0,0,0);return Promise.resolve([new n.CodeLens(r,{title:"Update Device Twin",command:"azure-iot-toolkit.updateDeviceTwin"})])}}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n=r(10);t.ModuleTwinCodeLensProvider=class ModuleTwinCodeLensProvider{provideCodeLenses(e,t){const r=new n.Range(0,0,0,0);return Promise.resolve([new n.CodeLens(r,{title:"Update Module Twin",command:"azure-iot-toolkit.updateModuleTwin"})])}}}]);